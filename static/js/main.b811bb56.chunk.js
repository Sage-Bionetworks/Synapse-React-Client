(window["webpackJsonpsynapse-react-client"]=window["webpackJsonpsynapse-react-client"]||[]).push([[0],{1068:function(e,t,n){},1107:function(e,t){},1115:function(e,t){},1117:function(e,t){},1167:function(e,t){},1184:function(e,t,n){},1185:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"BUNDLE_MASK_QUERY_RESULTS",(function(){return E})),n.d(a,"BUNDLE_MASK_QUERY_COUNT",(function(){return S})),n.d(a,"BUNDLE_MASK_QUERY_SELECT_COLUMNS",(function(){return y})),n.d(a,"BUNDLE_MASK_QUERY_MAX_ROWS_PER_PAGE",(function(){return C})),n.d(a,"BUNDLE_MASK_QUERY_COLUMN_MODELS",(function(){return w})),n.d(a,"BUNDLE_MASK_QUERY_FACETS",(function(){return R})),n.d(a,"ENTITY_BUNDLE_MASK_ENTITY",(function(){return O})),n.d(a,"ENTITY_BUNDLE_MASK_ANNOTATIONS",(function(){return k})),n.d(a,"ENTITY_BUNDLE_MASK_PERMISSIONS",(function(){return D})),n.d(a,"ENTITY_BUNDLE_MASK_ENTITY_PATH",(function(){return x})),n.d(a,"ENTITY_BUNDLE_MASK_HAS_CHILDREN",(function(){return N})),n.d(a,"ENTITY_BUNDLE_MASK_ACL",(function(){return I})),n.d(a,"ENTITY_BUNDLE_MASK_FILE_HANDLES",(function(){return T})),n.d(a,"ENTITY_BUNDLE_MASK_TABLE_DATA",(function(){return j})),n.d(a,"ENTITY_BUNDLE_MASK_ROOT_WIKI_ID",(function(){return F})),n.d(a,"ENTITY_BUNDLE_MASK_BENEFACTOR_ACL",(function(){return L})),n.d(a,"ENTITY_BUNDLE_MASK_DOI",(function(){return P})),n.d(a,"ENTITY_BUNDLE_MASK_FILE_NAME",(function(){return A})),n.d(a,"ENTITY_BUNDLE_MASK_THREAD_COUNT",(function(){return M})),n.d(a,"ENTITY_BUNDLE_MASK_RESTRICTION_INFORMATION",(function(){return U})),n.d(a,"STUDY",(function(){return _})),n.d(a,"STUDY_ACTIVE",(function(){return q})),n.d(a,"STUDY_COMPLETE",(function(){return H})),n.d(a,"DATASET",(function(){return B})),n.d(a,"AMP_CONSORTIUM",(function(){return V})),n.d(a,"FUNDER",(function(){return W})),n.d(a,"PUBLICATION",(function(){return G})),n.d(a,"TOOL",(function(){return z})),n.d(a,"GENERIC_CARD",(function(){return Q})),n.d(a,"COMPUTATIONAL",(function(){return Y})),n.d(a,"EXPERIMENTAL",(function(){return K})),n.d(a,"CLINICAL",(function(){return J})),n.d(a,"PROJECT",(function(){return Z})),n.d(a,"PAGE_SIZE",(function(){return X})),n.d(a,"SMALL_USER_CARD",(function(){return $})),n.d(a,"MEDIUM_USER_CARD",(function(){return ee})),n.d(a,"LARGE_USER_CARD",(function(){return te})),n.d(a,"SEPERATOR",(function(){return ne})),n.d(a,"AUTHENTICATED_USERS",(function(){return ae})),n.d(a,"_TIME_DELAY",(function(){return re})),n.d(a,"SRC_SIGN_IN_CLASS",(function(){return oe}));var r={};n.r(r),n.d(r,"IS_OUTSIDE_SYNAPSE_ORG",(function(){return he})),n.d(r,"SESSION_TOKEN_COOKIE_KEY",(function(){return ge})),n.d(r,"DEFAULT_ENDPOINT",(function(){return be})),n.d(r,"DEFAULT_SWC_ENDPOINT",(function(){return ve})),n.d(r,"AUTH_PROVIDER",(function(){return Ee})),n.d(r,"SYNAPSE_STORAGE_LOCATION_ID",(function(){return Se})),n.d(r,"getRootURL",(function(){return ye})),n.d(r,"delay",(function(){return Ce})),n.d(r,"doPost",(function(){return Re})),n.d(r,"doGet",(function(){return Oe})),n.d(r,"doDelete",(function(){return ke})),n.d(r,"doPut",(function(){return De})),n.d(r,"putRefreshSessionToken",(function(){return xe})),n.d(r,"getVersion",(function(){return Ne})),n.d(r,"getDownloadFromTableRequest",(function(){return Ie})),n.d(r,"getFileHandleById",(function(){return Te})),n.d(r,"getFileHandleByIdURL",(function(){return je})),n.d(r,"getAsyncResultFromJobId",(function(){return Fe})),n.d(r,"getQueryTableResults",(function(){return Le})),n.d(r,"getFullQueryTableResults",(function(){return Pe})),n.d(r,"login",(function(){return Ae})),n.d(r,"oAuthUrlRequest",(function(){return Me})),n.d(r,"oAuthSessionRequest",(function(){return Ue})),n.d(r,"createEntity",(function(){return _e})),n.d(r,"createProject",(function(){return qe})),n.d(r,"getUserProfile",(function(){return He})),n.d(r,"getUserProfileById",(function(){return Be})),n.d(r,"getUserBundle",(function(){return Ve})),n.d(r,"getGroupHeadersBatch",(function(){return We})),n.d(r,"getUserProfiles",(function(){return Ge})),n.d(r,"getEntityChildren",(function(){return ze})),n.d(r,"lookupChildEntity",(function(){return Qe})),n.d(r,"getFiles",(function(){return Ye})),n.d(r,"getEntity",(function(){return Ke})),n.d(r,"getEntityHeader",(function(){return Je})),n.d(r,"updateEntity",(function(){return Ze})),n.d(r,"deleteEntity",(function(){return Xe})),n.d(r,"getEntityBundleForVersion",(function(){return $e})),n.d(r,"getEntityWiki",(function(){return et})),n.d(r,"getUserFavorites",(function(){return tt})),n.d(r,"getUserProjectList",(function(){return nt})),n.d(r,"getUserTeamList",(function(){return at})),n.d(r,"getTeamList",(function(){return rt})),n.d(r,"getWikiAttachmentsFromEntity",(function(){return ot})),n.d(r,"getWikiAttachmentsFromEvaluation",(function(){return it})),n.d(r,"setSessionTokenCookie",(function(){return st})),n.d(r,"getSessionTokenFromCookie",(function(){return ct})),n.d(r,"getPrincipalAliasRequest",(function(){return lt})),n.d(r,"detectSSOCode",(function(){return ut})),n.d(r,"signOut",(function(){return dt})),n.d(r,"uploadFile",(function(){return mt})),n.d(r,"checkUploadComplete",(function(){return ht})),n.d(r,"startMultipartUpload",(function(){return bt})),n.d(r,"getFileEntityContent",(function(){return vt})),n.d(r,"getFileHandleContentFromID",(function(){return Et})),n.d(r,"getFileHandleContent",(function(){return St})),n.d(r,"createACL",(function(){return yt})),n.d(r,"submitToEvaluation",(function(){return Ct})),n.d(r,"getEvaluation",(function(){return wt})),n.d(r,"getEvaluationSubmissions",(function(){return Rt})),n.d(r,"getOAuth2RequestDescription",(function(){return Ot})),n.d(r,"getOAuth2Client",(function(){return kt})),n.d(r,"consentToOAuth2Request",(function(){return Dt})),n.d(r,"createFormGroup",(function(){return xt})),n.d(r,"getFormACL",(function(){return Nt})),n.d(r,"updateFormACL",(function(){return It})),n.d(r,"createFormData",(function(){return Tt})),n.d(r,"updateFormData",(function(){return jt})),n.d(r,"deleteFormData",(function(){return Ft})),n.d(r,"submitFormData",(function(){return Lt})),n.d(r,"listFormData",(function(){return Pt})),n.d(r,"listFormDataAsFormAdmin",(function(){return At})),n.d(r,"acceptFormData",(function(){return Mt})),n.d(r,"rejectFormData",(function(){return Ut})),n.d(r,"getProjectStatistics",(function(){return _t}));var o=n(0),i=n.n(o),s=n(74),c=(n(331),n(366),n(3)),l=n(4),u=n(6),d=n(5),m=n(7),p=n(48),f=n(112),h=n(13),g=n(2),b=function(e){var t=e.children,n={paddingRight:10,fontWeight:500,paddingLeft:e.icon?0:10,paddingTop:10,paddingBottom:10,textAlign:"center",width:"100%"};return o.createElement("span",{style:n},t)},v=function(e){var t=e.active;return o.createElement("div",{style:{background:t?"#fff":"#eee",paddingTop:7,paddingRight:10,paddingBottom:4,paddingLeft:10,borderRadius:2}},o.createElement("svg",{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},o.createElement("g",{fill:"#000",fillRule:"evenodd"},o.createElement("path",{d:"M9 3.48c1.69 0 2.83.73 3.48 1.34l2.54-2.48C13.46.89 11.43 0 9 0 5.48 0 2.44 2.02.96 4.96l2.91 2.26C4.6 5.05 6.62 3.48 9 3.48z",fill:"#EA4335"}),o.createElement("path",{d:"M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.1.83-.64 2.08-1.84 2.92l2.84 2.2c1.7-1.57 2.68-3.88 2.68-6.62z",fill:"#4285F4"}),o.createElement("path",{d:"M3.88 10.78A5.54 5.54 0 0 1 3.58 9c0-.62.11-1.22.29-1.78L.96 4.96A9.008 9.008 0 0 0 0 9c0 1.45.35 2.82.96 4.04l2.92-2.26z",fill:"#FBBC05"}),o.createElement("path",{d:"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.84-2.2c-.76.53-1.78.9-3.12.9-2.38 0-4.4-1.57-5.12-3.74L.97 13.04C2.45 15.98 5.48 18 9 18z",fill:"#34A853"}),o.createElement("path",{fill:"none",d:"M0 0h18v18H0z"}))))},E=1,S=2,y=4,C=8,w=16,R=32,O=1,k=2,D=4,x=8,N=32,I=64,T=2048,j=4096,F=8192,L=16384,P=32768,A=65536,M=131072,U=262144,_="study",q="study active",H="study complete",B="dataset",V="AMP_Consortium",W="funder",G="publication",z="tool",Q="GENERIC_CARD",Y="computational",K="experimental",J="clinical",Z="Project",X=25,$="SMALL USER CARD",ee="MEDIUM USER CARD",te="LARGE USER CARD",ne="SEPERATOR",ae="AUTHENTICATED_USERS",re=75,oe="SRC-SIGN-IN-CLASS",ie=n(9),se=n.n(ie),ce=n(47),le=n(85),ue=n(15),de=n(513),me=n.n(de);function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he=!window.location.hostname.toLowerCase().includes(".synapse.org"),ge="org.sagebionetworks.security.user.login.token",be="https://repo-prod.prod.sagebase.org/",ve="https://www.synapse.org/",Ee="GOOGLE_OAUTH_2_0",Se=1,ye=function(){var e=window.location.port?":".concat(window.location.port):"";return"".concat(window.location.protocol,"//").concat(window.location.hostname).concat(e,"/")};function Ce(e){return new Promise((function(t){setTimeout(t.bind(null,{}),e)}))}var we=function e(t,n,a,r){return fetch(t,n).then((function(o){return o.status>199&&o.status<300?204===o.status?o:o.text().then((function(e){var t="";try{t=JSON.parse(e)}catch(n){console.log("Caught exception with parsing json ",n),t=e}return t||{}})).catch((function(e){return console.log("Caught exception loading response text ",e),{}})):429===o.status||0===o.status?1===r?Promise.reject({reason:o.statusText,statusCode:o.status}):Ce(a).then((function(){return e(t,n,2*a,r-1)})):o.json().then((function(e){var t={reason:e.reason,status:o.status};return o.ok?e:Promise.reject(t)})).catch((function(e){return e.reason&&e.status?Promise.reject({reason:e.reason,statusCode:e.status}):Promise.reject({reason:o.statusText,statusCode:o.status})}))})).catch((function(e){return Promise.reject(e)}))},Re=function(e,t,n,a,r){var o={body:JSON.stringify(t),headers:{Accept:"*/*","Access-Control-Request-Headers":"sessiontoken","Content-Type":"application/json"},method:"POST",mode:"cors",credentials:a};return a&&(o.credentials=a),n&&(o.headers.sessionToken=n),we(r+e,o,1e3,5)},Oe=function(e,t,n,a){var r={headers:{Accept:"*/*","Access-Control-Request-Headers":"sessiontoken"},method:"GET",mode:"cors"};return n&&(r.credentials=n),t&&(r.headers.sessionToken=t),we(a+e,r,1e3,5)},ke=function(e,t,n,a){var r={headers:{Accept:"*/*","Access-Control-Request-Headers":"sessiontoken"},method:"DELETE",mode:"cors",credentials:n};return n&&(r.credentials=n),t&&(r.headers.sessionToken=t),we(a+e,r,1e3,5)},De=function(e,t,n,a,r){var o={body:JSON.stringify(t),headers:{Accept:"*/*","Access-Control-Request-Headers":"sessiontoken","Content-Type":"application/json"},method:"PUT",mode:"cors"};return a&&(o.credentials=a),n&&(o.headers.sessionToken=n),we(r+e,o,1e3,5)},xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:be;return De("/auth/v1/session",{sessionToken:e},void 0,void 0,t)},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be;return Oe("/repo/v1/version",void 0,void 0,e)},Ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be,a=arguments.length>3?arguments[3]:void 0;return Re("/repo/v1/entity/".concat(e.entityId,"/table/download/csv/async/start"),e,t,void 0,n).then((function(r){var o="/repo/v1/entity/".concat(e.entityId,"/table/download/csv/async/get/").concat(r.token);return Fe(o,t,n,a)})).catch((function(e){throw e}))},Te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Oe("file/v1/fileHandle/".concat(e),t,void 0,n)},je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Oe("file/v1/fileHandle/".concat(e,"/url?redirect=false"),t,void 0,n)},Fe=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be,r=arguments.length>3?arguments[3]:void 0;return Oe(t,n,void 0,a).then((function(o){return o.jobState&&"FAILED"!==o.jobState?(r&&r({asyncJobStatus:o}),Ce(500).then((function(){return e(t,n,a,r)}))):o})).catch((function(e){throw e}))},Le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:be;return Re("/repo/v1/entity/".concat(e.entityId,"/table/query/async/start"),e,t,void 0,a).then((function(r){return Fe("/repo/v1/entity/".concat(e.entityId,"/table/query/async/get/").concat(r.token),t,a,n)})).catch((function(e){throw e}))},Pe=function(){var e=Object(ue.a)(se.a.mark((function e(t){var n,a,r,o,i,s,c=arguments;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:void 0,a=t.query,r=Object(le.a)(t,["query"]),o={},s=fe({},r,{query:fe({},a,{limit:i=150})}),e.next=7,Le(s,n).then(function(){var e=Object(ue.a)(se.a.mark((function e(t){var s,c,l;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.queryResult.queryResults.rows.length,c=s,o=t,l=function(){var e=Object(ue.a)(se.a.mark((function e(){var u;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s!==i){e.next=7;break}return i=t.maxRowsPerPage,u=fe({},r,{query:fe({},a,{limit:i,offset:c})}),e.next=5,Le(u,n).then((function(e){var t;(s+=e.queryResult.queryResults.rows.length)>0&&(c+=s,(t=o.queryResult.queryResults.rows).push.apply(t,Object(ce.a)(e.queryResult.queryResults.rows)));return l()})).catch((function(e){console.log("Error on getting table results ",e)}));case 5:e.next=8;break;case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",l());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Re("/auth/v1/login",{username:e,password:t},void 0,void 0,n)},Me=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Re("/auth/v1/oauth2/authurl",{provider:e,redirectUrl:t},void 0,void 0,n)},Ue=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:be;return Re("/auth/v1/oauth2/session",{provider:e,authenticationCode:t,redirectUrl:n},void 0,void 0,a)},_e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Re("/repo/v1/entity",e,t,void 0,n)},qe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return _e({name:e,concreteType:"org.sagebionetworks.repo.model.Project"},t,n)},He=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:be;return Oe("/repo/v1/userProfile",e,void 0,t)},Be=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Oe("/repo/v1/userProfile/".concat(t),e,void 0,n)},Ve=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:be;return Oe("repo/v1/user/".concat(e,"/bundle?mask=").concat(t),n,void 0,a)},We=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Oe("repo/v1/userGroupHeaders/batch?ids=".concat(e.join(",")),t,void 0,n)},Ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Re("/repo/v1/userProfile",{list:e},t,void 0,n)},ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Re("/repo/v1/entity/children",e,t,void 0,n)},Qe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Re("/repo/v1/entity/child",e,t,void 0,n)},Ye=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Re("/file/v1/fileHandle/batch",e,t,void 0,n)},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be,a="/repo/v1/entity/".concat(t);return Oe(a,e,void 0,n)},Je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Re("repo/v1/entity/header",{references:e},t,void 0,n)},Ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be,a="/repo/v1/entity/".concat(e.id);return De(a,e,t,void 0,n)},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be,a="/repo/v1/entity/".concat(t);return ke(a,e,void 0,n)},$e=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:be,o="/repo/v1/entity/".concat(e);return t&&(o+="/version/ + ".concat(t)),o+="/bundle?mask= ".concat(n),Oe(o,a,void 0,r)},et=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:be,r="/repo/v1/entity/".concat(t,"/wiki/").concat(n);return Oe(r,e,void 0,a)},tt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:be,n="repo/v1/favorite?offset=0&limit=200";return Oe(n,e,void 0,t)},nt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be,a="repo/v1/projects/".concat(t,"?offset=0&limit=200");return Oe(a,e,void 0,n)},at=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be,a="repo/v1/user/".concat(t,"/team?offset=0&limit=200");return Oe(a,e,void 0,n)},rt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:be,i="repo/v1/teamMembers/".concat(t,"?limit=").concat(a,"&offset=").concat(r).concat(n?"&fragment=".concat(n):"");return Oe(i,e,void 0,o)},ot=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:be,r="repo/v1/entity/".concat(t,"/wiki/").concat(n,"/attachmenthandles");return Oe(r,e,void 0,a)},it=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:be,r="repo/v1/evaluation/".concat(t,"/wiki/").concat(n,"/attachmenthandles");return Oe(r,e,void 0,a)},st=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ve;return he?(qt(ge,e,1),Promise.resolve()):Re("Portal/sessioncookie",{sessionToken:e},void 0,"include",t)},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve;return he?Promise.resolve(Ht(ge)):Oe("Portal/sessioncookie",void 0,"include",e)},lt=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:be,r="repo/v1/principal/alias";return Re(r,{alias:t,type:n},e,void 0,a)},ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ve,n=ye(),a=new URL(window.location.href),r=a,o=r.searchParams;o&&(a=o.get("code"))&&Ue(Ee,a,"".concat(n,"?provider=").concat(Ee),e).then((function(e){st(e.sessionToken,t).then((function(){var e=localStorage.getItem("after-sso-login-url");localStorage.removeItem("after-sso-login-url"),e&&window.location.replace(e)})).catch((function(e){console.error("Error on set sesion token cookie ",e)}))})).catch((function(e){404===e.statusCode&&window.location.replace("https://www.synapse.org/#!RegisterAccount:0"),console.error("Error on sso sign in ",e)}))},dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve;he?(Bt(ge),window.location.reload()):st(void 0,e).then((function(){window.location.reload()})).catch((function(e){console.error("err when clearing the session cookie ",e)}))},mt=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:be;return new Promise((function(r,o){var i=Math.max(5242880,n.size/1e4),s={contentType:n.type,fileName:t,fileSizeBytes:n.size,partSizeBytes:i,storageLocationId:Se};pt(n).then((function(i){s.contentMD5Hex=i,bt(e,t,n,s,r,o,a)}))}))},pt=function(e){return new Promise((function(t,n){var a=File.prototype.slice,r=e,o=Math.ceil(r.size/2097152),i=0,s=new me.a.ArrayBuffer,c=new FileReader;c.onload=function(e){if(console.log("read chunk nr",i+1,"of",o),s.append(c.result),++i<o)l();else{console.log("finished loading");var n=s.end();console.info("computed hash",n),t(n)}},c.onerror=function(){console.warn("oops, something went wrong."),n(c.error)};var l=function(){var e=2097152*i,t=e+2097152>=r.size?r.size:e+2097152;c.readAsArrayBuffer(a.call(r,e,t))};l()}))},ft=function e(t,n,a,r,o,i,s,c){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:be;if(!n.clientSidePartsState[t-1]){var u=n.uploadId,d={uploadId:u,contentType:"application/octet-stream",partNumbers:[t]},m="/file/v1/file/multipart/".concat(u,"/presigned/url/batch");Re(m,d,a,void 0,l).then(function(){var m=Object(ue.a)(se.a.mark((function m(p){var f,h,g,b;return se.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return f=p.partPresignedUrls[0].uploadPresignedUrl,h=(t-1)*i.partSizeBytes,(g=t*i.partSizeBytes-1)>=i.fileSizeBytes&&(g=i.fileSizeBytes-1),b=o.slice(h,g+1,d.contentType),m.next=7,gt(f,b,d.contentType);case 7:pt(b).then((function(d){var m="/file/v1/file/multipart/".concat(u,"/add/").concat(t,"?partMD5Hex=").concat(d);De(m,void 0,a,void 0,l).then((function(u){"ADD_SUCCESS"===u.addPartState?(n.clientSidePartsState[t-1]=!0,ht(n,r,a,s,c,l)):Ce(1e3).then((function(){e(t,n,a,r,o,i,s,c,l)}))}))}));case 8:case"end":return m.stop()}}),m)})));return function(e){return m.apply(this,arguments)}}())}},ht=function(e,t,n,a,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:be;if(e.clientSidePartsState.every((function(e){return e}))){var i="/file/v1/file/multipart/".concat(e.uploadId,"/complete");De(i,void 0,n,void 0,o).then((function(e){a({fileHandleId:e.resultFileHandleId,fileName:t})})).catch((function(e){r(e)}))}},gt=function(){var e=Object(ue.a)(se.a.mark((function e(t,n,a){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"PUT",headers:{"Content-Type":a},body:n});case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),bt=function(e,t,n,a,r,o){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:be,s="file/v1/file/multipart";Re(s,a,e,void 0,i).then(function(){var s=Object(ue.a)(se.a.mark((function s(c){var l,u;return se.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:l=c.partsState.split("").map((function(e){return"1"===e})),c.clientSidePartsState=l,u=0;case 3:if(!(u<l.length)){s.next=10;break}if(l[u]){s.next=7;break}return s.next=7,ft(u+1,c,e,t,n,a,r,o,i);case 7:u+=1,s.next=3;break;case 10:ht(c,t,e,r,o,i);case 11:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()).catch((function(e){o(e)}))},vt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return new Promise((function(a,r){var o=[{associateObjectId:t.id,associateObjectType:"FileEntity",fileHandleId:t.dataFileHandleId}];Ye({includeFileHandles:!0,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:o},e,n).then((function(e){var t=e.requestedFiles[0].preSignedURL,n=e.requestedFiles[0].fileHandle;return St(n,t).then((function(e){a(e)}))})).catch((function(e){r(e)}))}))},Et=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return new Promise((function(a,r){var o=Te(e,t,n),i=je(e,t,n);Promise.all([o,i]).then((function(e){var t=e[0],n=e[1];return St(t,n).then((function(e){a(e)}))})).catch((function(e){r(e)}))}))},St=function(e,t){return new Promise((function(n,a){e.contentSize<5242880?fetch(t,{method:"GET",mode:"cors",cache:"no-cache",headers:{"Content-Type":e.contentType}}).then((function(e){e.text().then((function(e){n(e)}))})):a("File size exceeds max (5MB)")}))},yt=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:be;return Re("/repo/v1/entity/".concat(e,"/acl"),t,n,void 0,a)},Ct=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:be;return Re("/repo/v1/evaluation/submission?etag=".concat(t),e,n,void 0,a)},wt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Oe("/repo/v1/evaluation/".concat(e),t,void 0,n)},Rt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Oe("/repo/v1/evaluation/submission/query?query=".concat(encodeURI(e)),t,void 0,n)},Ot=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Re("/auth/v1/oauth2/description",e,t,void 0,n)},kt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:be;return Oe("/auth/v1/oauth2/client/".concat(e),void 0,void 0,t)},Dt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Re("/auth/v1/oauth2/consent",e,t,void 0,n)},xt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Re("/repo/v1/form/group?name=".concat(encodeURI(e)),void 0,t,void 0,n)},Nt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Oe("/repo/v1/form/group/".concat(e,"/acl"),t,void 0,n)},It=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:be;return De("/repo/v1/form/group/".concat(e,"/acl"),t,n,void 0,a)},Tt=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:be,o={name:t,fileHandleId:n};return Re("/repo/v1/form/data?groupId=".concat(e),o,a,void 0,r)},jt=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:be,o={name:t,fileHandleId:n};return De("/repo/v1/form/data/".concat(e),o,a,void 0,r)},Ft=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return ke("/repo/v1/form/data/".concat(e),t,void 0,n)},Lt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Re("/repo/v1/form/data/".concat(e,"/submit"),void 0,t,void 0,n)},Pt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Re("/repo/v1/form/data/list",e,t,void 0,n)},At=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Re("/repo/v1/form/data/list/reviewer",e,t,void 0,n)},Mt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return De("/repo/v1/form/data/".concat(e,"/accept"),void 0,t,void 0,n)},Ut=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:be,r={reason:t};return De("/repo/v1/form/data/".concat(e,"/reject"),r,n,void 0,a)},_t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be;return Re("/repo/v1/statistics",e,t,void 0,n)},qt=function(e,t,n){if(t){var a="";if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),a="; expires=".concat(r.toUTCString())}document.cookie="".concat(e,"=").concat(t||"").concat(a,"; path=/")}},Ht=function(e){for(var t="".concat(e,"="),n=document.cookie.split(";"),a=0;a<n.length;a++){for(var r=n[a];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null},Bt=function(e){document.cookie="".concat(e,"=; Max-Age=-99999999;")},Vt=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={email:"",errorMessage:"",hasLoginInFailed:!1,isSignedIn:!1,password:"",username:""},n.handleChange=n.handleChange.bind(Object(g.a)(n)),n.handleLogin=n.handleLogin.bind(Object(g.a)(n)),n.getTokenView=n.getTokenView.bind(Object(g.a)(n)),n.getLoginFailureView=n.getLoginFailureView.bind(Object(g.a)(n)),n.onSignIn=n.onSignIn.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){var t=e.currentTarget,n=t.name,a=t.value,r=Object(h.a)({},n,a);this.setState(r)}},{key:"handleLogin",value:function(e){var t=this;e.preventDefault();var n=this.props.repoEndpoint?this.props.repoEndpoint:r.DEFAULT_ENDPOINT,a=this.props.swcEndpoint?this.props.swcEndpoint:r.DEFAULT_SWC_ENDPOINT;r.login(this.state.username,this.state.password,n).then((function(e){r.setSessionTokenCookie(e.sessionToken,a).then((function(){window.location.reload()})).catch((function(e){console.log("Could not set session token cookie!",e),t.setState({errorMessage:e.reason,hasLoginInFailed:!0,isSignedIn:!1})}))})).catch((function(e){console.log("Handle login failed with err = ",e),t.setState({errorMessage:e.reason,hasLoginInFailed:!0,isSignedIn:!1})}))}},{key:"getTokenView",value:function(){return!(!this.state.isSignedIn||""===this.props.token||this.state.hasLoginInFailed)&&o.createElement("p",null," Your session token is ",this.props.token," ")}},{key:"getLoginFailureView",value:function(){return!!this.state.hasLoginInFailed&&o.createElement("div",null,o.createElement("small",{className:"form-text text-danger"}," ",this.state.errorMessage," "),o.createElement("div",{className:"invalid-feedback"}))}},{key:"getSignInStateView",value:function(){return!this.state.isSignedIn&&o.createElement("p",null," ","You are currently"," ",o.createElement("strong",null," ",o.createElement("i",null," not ")," ")," ","signed in to Synpase"," ")}},{key:"onSignIn",value:function(e){localStorage.setItem("after-sso-login-url",window.location.href),e.preventDefault();var t=this.props.googleRedirectUrl?this.props.googleRedirectUrl:"".concat(r.getRootURL(),"?provider=").concat(r.AUTH_PROVIDER);r.oAuthUrlRequest(r.AUTH_PROVIDER,t).then((function(e){var t=e.authorizationUrl;window.location=t})).catch((function(e){console.log("Error on oAuth url ",e)}))}},{key:"render",value:function(){var e=this.props,t=e.theme,n=e.icon,a=this.props.swcEndpoint?this.props.swcEndpoint:r.DEFAULT_SWC_ENDPOINT,i="dark"===t?"SRC-google-button-dark-color":"SRC-google-button-light-color";return o.createElement("div",{id:"loginPage",className:"container loginContainer SRC-syn-border-spacing"},o.createElement("form",null,o.createElement("button",{onClick:this.onSignIn,className:"SRC-google-button ".concat(i," SRC-marginBottomTen")},o.createElement(v,{key:1,active:!0}),o.createElement(b,{icon:n,key:2},"Sign in with Google"))),o.createElement("div",{className:"SRC-center-text SRC-deemphasized-text SRC-marginBottomTen"},"or"),o.createElement("div",{className:"SRC-centerAndJustifyContent SRC-marginBottomTen"},o.createElement("img",{height:"20px",style:{marginRight:"10px"},alt:"sage bionetworks logo",src:"https://s3.amazonaws.com/static.synapse.org/sage-bionetworks-logo.svg"}),"Sign in with your Sage Bionetworks Synapse account"),o.createElement("form",{onSubmit:this.handleLogin,className:"form-group"},o.createElement("input",{autoComplete:"username",placeholder:"username or email",className:"form-control SRC-marginBottomTop",id:"exampleEmail",name:"username",type:"text",value:this.state.username,onChange:this.handleChange}),o.createElement("input",{autoComplete:"password",placeholder:"password",className:"form-control SRC-marginBottomTop",id:"examplePassword",name:"password",type:"password",value:this.state.password,onChange:this.handleChange}),this.getLoginFailureView(),o.createElement("button",{onSubmit:this.handleLogin,type:"submit",className:"btn SRC-primary-background-color SRC-hoverWhiteText SRC-whiteText m-1 SRC-google-button SRC-marginBottomTen"},o.createElement(b,{icon:n},"Sign in"))),o.createElement("div",null,o.createElement("a",{href:"".concat(a,"#!PasswordReset:0"),className:"SRC-floatLeft SRC-primary-text-color"},"Forgot password?"),o.createElement("span",{className:"SRC-deemphasized-text SRC-floatRight"},"\xa0It's free!"),o.createElement("a",{href:"".concat(a,"#!RegisterAccount:0"),className:"SRC-floatRight SRC-primary-text-color"},"Register")))}}]),t}(o.Component),Wt=n(514),Gt=n.n(Wt),zt=(n(758),n(759),n(143)),Qt=["rgb(91,176,181)","rgb(124,192,196)","rgb(157,208,211)","rgb(189,223,225)","rgb(222,239,240)","rgb(217,229,236)","rgb(179,202,217)","rgb(140,176,198)","rgb(102,149,179)","rgb(64,123,160)","rgb(201,66,129)","rgb(212,104,154)","rgb(223,142,179)","rgb(233,179,205)","rgb(244,217,230)","rgb(218,214,229)","rgb(181,173,203)","rgb(145,133,177)","rgb(108,92,151)","rgb(71,51,125)","rgb(222,154,31)","rgb(229,174,76)","rgb(235,194,121)","rgb(242,215,165)","rgb(248,235,210)","rgb(207,234,231)","rgb(159,212,207)","rgb(112,191,184)","rgb(64,169,160)","rgb(16,148,136)","rgb(60,74,99)","rgb(99,110,130)","rgb(138,146,161)","rgb(177,183,193)","rgb(216,219,224)","rgb(246,226,210)","rgb(238,197,165)","rgb(229,167,120)","rgb(221,138,75)","rgb(212,109,30)","rgb(88,161,88)","rgb(121,180,121)","rgb(155,199,155)","rgb(188,217,188)","rgb(222,236,222)","rgb(220,227,242)","rgb(185,198,230)","rgb(151,170,217)","rgb(116,141,205)","rgb(81,113,192)","rgb(178,36,42)","rgb(193,80,85)","rgb(209,124,127)","rgb(224,167,170)","rgb(240,211,212)","rgb(222,239,240)","rgb(189,223,225)","rgb(157,208,211)","rgb(124,192,196)","rgb(91,176,181)","rgb(64,123,160)","rgb(102,149,179)","rgb(140,176,198)","rgb(179,202,217)","rgb(217,229,236)","rgb(244,217,230)","rgb(233,179,205)","rgb(223,142,179)","rgb(212,104,154)","rgb(201,66,129)","rgb(71,51,125)","rgb(108,92,151)","rgb(145,133,177)","rgb(181,173,203)","rgb(218,214,229)","rgb(248,235,210)","rgb(242,215,165)","rgb(235,194,121)","rgb(229,174,76)","rgb(222,154,31)","rgb(16,148,136)","rgb(64,169,160)","rgb(112,191,184)","rgb(159,212,207)","rgb(207,234,231)","rgb(216,219,224)","rgb(177,183,193)","rgb(138,146,161)","rgb(99,110,130)","rgb(60,74,99)","rgb(212,109,30)","rgb(221,138,75)","rgb(229,167,120)","rgb(238,197,165)","rgb(246,226,210)","rgb(222,236,222)","rgb(188,217,188)","rgb(155,199,155)","rgb(121,180,121)","rgb(88,161,88)","rgb(81,113,192)","rgb(116,141,205)","rgb(151,170,217)","rgb(185,198,230)","rgb(220,227,242)","rgb(240,211,212)","rgb(224,167,170)","rgb(209,124,127)","rgb(193,80,85)","rgb(178,36,42)"],Yt=["rgb(64,123,160)","rgb(102,149,179)","rgb(140,176,198)","rgb(179,202,217)","rgb(217,229,236)","rgb(244,217,230)","rgb(233,179,205)","rgb(223,142,179)","rgb(212,104,154)","rgb(201,66,129)","rgb(71,51,125)","rgb(108,92,151)","rgb(145,133,177)","rgb(181,173,203)","rgb(218,214,229)","rgb(248,235,210)","rgb(242,215,165)","rgb(235,194,121)","rgb(229,174,76)","rgb(222,154,31)","rgb(16,148,136)","rgb(64,169,160)","rgb(112,191,184)","rgb(159,212,207)","rgb(207,234,231)","rgb(216,219,224)","rgb(177,183,193)","rgb(138,146,161)","rgb(99,110,130)","rgb(60,74,99)","rgb(212,109,30)","rgb(221,138,75)","rgb(229,167,120)","rgb(238,197,165)","rgb(246,226,210)","rgb(222,236,222)","rgb(188,217,188)","rgb(155,199,155)","rgb(121,180,121)","rgb(88,161,88)","rgb(81,113,192)","rgb(116,141,205)","rgb(151,170,217)","rgb(185,198,230)","rgb(220,227,242)","rgb(240,211,212)","rgb(224,167,170)","rgb(209,124,127)","rgb(193,80,85)","rgb(178,36,42)","rgb(91,176,181)","rgb(124,192,196)","rgb(157,208,211)","rgb(189,223,225)","rgb(222,239,240)","rgb(217,229,236)","rgb(179,202,217)","rgb(140,176,198)","rgb(102,149,179)","rgb(64,123,160)","rgb(201,66,129)","rgb(212,104,154)","rgb(223,142,179)","rgb(233,179,205)","rgb(244,217,230)","rgb(218,214,229)","rgb(181,173,203)","rgb(145,133,177)","rgb(108,92,151)","rgb(71,51,125)","rgb(222,154,31)","rgb(229,174,76)","rgb(235,194,121)","rgb(242,215,165)","rgb(248,235,210)","rgb(207,234,231)","rgb(159,212,207)","rgb(112,191,184)","rgb(64,169,160)","rgb(16,148,136)","rgb(60,74,99)","rgb(99,110,130)","rgb(138,146,161)","rgb(177,183,193)","rgb(216,219,224)","rgb(246,226,210)","rgb(238,197,165)","rgb(229,167,120)","rgb(221,138,75)","rgb(212,109,30)","rgb(88,161,88)","rgb(121,180,121)","rgb(155,199,155)","rgb(188,217,188)","rgb(222,236,222)","rgb(220,227,242)","rgb(185,198,230)","rgb(151,170,217)","rgb(116,141,205)","rgb(81,113,192)","rgb(178,36,42)","rgb(193,80,85)","rgb(209,124,127)","rgb(224,167,170)","rgb(240,211,212)","rgb(222,239,240)","rgb(189,223,225)","rgb(157,208,211)","rgb(124,192,196)","rgb(91,176,181)"];function Kt(e,t){var n=[],a=[],r=-1;e%2===0?(n=Qt,r=5*e):(n=Yt,r=5*(e-1));for(var o=[],i=0;i<t;i+=1){var s=i%10<2||i%10>7?"white":"black",c="".concat(n[(r+i)%n.length]);o.push(c),a.push(s)}return{colorPalette:o,textColors:a}}var Jt=Kt,Zt=n(11),Xt=n(10),$t=n(20),en=n(93),tn=n.n(en),nn=n(515),an=n.n(nn),rn=n(516),on=n.n(rn),sn=n(517),cn=n.n(sn),ln=n(325),un=n.n(ln);function dn(e){return(un.a||ln)(e)}var mn=function(){var e=Object(ue.a)(se.a.mark((function e(t,n,o){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getQueryTableResults(t,o).then((function(e){var t,r=dn(n),o=e.queryResult.queryResults.rows.length===a.PAGE_SIZE;return(t=r.queryResult.queryResults.rows).push.apply(t,Object(ce.a)(e.queryResult.queryResults.rows)),{hasMoreData:o,data:r}})).catch((function(e){return console.log("Failed to get data ",e),{}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),pn=function(e){var t=e.isLoading,n=e.lastFacetSelection,a=e.curFacetSelection,r=e.columnName;if(t&&r===n.columnName){if(n.facetValue===a.value)return!a.isSelected;if(n.selector===Ua)return!1}return a.isSelected},fn=function(e){var t=e.htmlCheckboxes,n=e.selector,a=e.queryRequest,r=e.facet,o=e.value,i=[];if(n)n===Ua&&i.push(o);else for(var s=0;s<t.length;s+=1){var c=t[s];c.checked&&i.push(c.value)}var l=a,u=l.query.selectedFacets,d=void 0===u?[]:u,m=d.find((function(e){return e.columnName===r}));if(m)m.facetValues=i;else{var p={facetValues:i,concreteType:"org.sagebionetworks.repo.model.table.FacetColumnValuesRequest",columnName:r};d.push(p),l.query.selectedFacets=d}return{newQueryRequest:l}},hn=n(144);Zt.b.add(Xt.x),Zt.b.add(Xt.w);var gn,bn=/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&\/\/=]*)?/gi,vn=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).renderRowValue=function(e,t){var a=n.props.isHeader?"SRC-lightLink":"";return t.match?t.match(Qn)?o.createElement("a",{className:a,"data-search-handle":e,target:"_blank",rel:"noopener noreferrer",href:"https://dx.doi.org/".concat(t)},t):t.match(bn)?o.createElement("a",{className:a,"data-search-handle":e,target:"_blank",rel:"noopener noreferrer",href:t},t):t:t},n.renderRows=function(e,t,a){return e.map((function(e,r){var i=r>=t?"SRC-hidden":"",s=e[0],c=n.renderRowValue(s,e[1]);return a?o.createElement("tr",{className:"SRC-cardRowDesktop "+i,key:r},o.createElement("td",{className:"SRC-verticalAlignTop SRC-row-label"}," ",s," "),o.createElement("td",{"data-search-handle":s,className:"SRC-row-data SRC-limitMaxWidth "}," ",c," ")):o.createElement(o.Fragment,{key:r},o.createElement("tr",{className:"SRC-cardRowMobile "+i},o.createElement("td",{className:"SRC-verticalAlignTop SRC-row-label"}," ",s," ")),o.createElement("tr",{className:"SRC-cardRowMobile "+i},o.createElement("td",{"data-search-handle":s,className:"SRC-row-data SRC-limitMaxWidth"}," ",c," ")))}))},n.state={isShowMoreOn:!1,isDesktop:!1},n.toggleShowMore=n.toggleShowMore.bind(Object(g.a)(n)),n.updatePredicate=n.updatePredicate.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"toggleShowMore",value:function(){this.setState({isShowMoreOn:!this.state.isShowMoreOn})}},{key:"componentDidMount",value:function(){this.updatePredicate(),window.addEventListener("resize",this.updatePredicate)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updatePredicate)}},{key:"updatePredicate",value:function(){this.setState({isDesktop:window.innerWidth>600})}},{key:"render",value:function(){var e=this.props,t=e.values,n=e.secondaryLabelLimit,a=void 0===n?3:n,r=this.state,i=r.isShowMoreOn,s=r.isDesktop,c=t.filter((function(e){return e[1]})),l=c.length>a,u=!l||i?1/0:a;return o.createElement("div",{className:"SRC-cardMetadata"},o.createElement("table",null,o.createElement("tbody",null,this.renderRows(c,u,s),l&&o.createElement("tr",{className:"SRC-cardRow"},o.createElement("td",null,o.createElement("button",{style:{textAlign:"left",margin:0,padding:0},className:"SRC-primary-text-color SRC-basicButton",onClick:this.toggleShowMore},"Show ",i?"Less":"More",o.createElement($t.a,{style:{marginLeft:"5px"},icon:i?"long-arrow-alt-up":"long-arrow-alt-down"})))))))}}]),t}(o.Component),En=function(e){var t=e.chips.map((function(e,t){return!!e&&o.createElement("span",{key:t}," ",e)}));return o.createElement(o.Fragment,null,t)},Sn=n(518),yn=n.n(Sn),Cn=n(326),wn=n.n(Cn),Rn=n(519),On=n.n(Rn),kn=n(520),Dn=n.n(kn),xn=n(521),Nn=n.n(xn),In=n(522),Tn=n.n(In),jn=n(523),Fn=n.n(jn),Ln=n(524),Pn=n.n(Ln),An=n(525),Mn=n.n(An),Un=n(526),_n=n.n(Un);function qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Hn=(gn={},Object(h.a)(gn,G,yn.a),Object(h.a)(gn,B,wn.a),Object(h.a)(gn,W,wn.a),Object(h.a)(gn,q,On.a),Object(h.a)(gn,H,Nn.a),Object(h.a)(gn,_,Dn.a),Object(h.a)(gn,z,Tn.a),Object(h.a)(gn,K,Mn.a),Object(h.a)(gn,Y,Pn.a),Object(h.a)(gn,J,Fn.a),Object(h.a)(gn,Z,_n.a),gn),Bn=function(e){var t=e.type,n=e.value,a=void 0===n?"":n,r=e.iconOptions,i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qn(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Hn,{},r),s=i[a]||i[t],c=a===B||t===B?"SRC-datasetIcon":"";return o.createElement("img",{className:"iconImg  ".concat(c),src:s})},Vn=400,Wn=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).getCutoff=function(e){var t="";if(!e)return{previewText:t};for(var n="",a=e.split(" "),r=0;t.length<Vn&&r<a.length;)t+="".concat(a[r]," "),r+=1;return r<a.length-1&&(n=a.slice(r).join(" ")),{previewText:t,hiddenText:n}},n.state={showMore:!1},n.toggleShowMore=n.toggleShowMore.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"toggleShowMore",value:function(e){e.preventDefault(),this.setState({showMore:!0})}},{key:"render",value:function(){var e=this.props.summary,t=e&&e.length>=Vn,n=this.getCutoff(e),a=n.previewText,r=n.hiddenText,i=t&&o.createElement("a",{style:{fontSize:"14px",cursor:"pointer",marginLeft:"1px"},className:"SRC-primary-text-color",onClick:this.toggleShowMore},"...Show More");return o.createElement(o.Fragment,null,o.createElement("span",null,a,o.createElement("span",{className:this.state.showMore?"":"SRC-hidden"},r)),!this.state.showMore&&i)}}]),t}(o.Component),Gn=function(e){var t=e.type,n=e.title,a=e.subTitle,r=e.description,i=e.iconOptions,s=e.iconValue,c=e.backgroundColor,l=e.values,u=e.secondaryLabelLimit,d={background:c};return o.createElement("div",{style:d,className:"SRC-portalCardHeader"},o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-1 iconContainer"},o.createElement(Bn,{value:s,iconOptions:i,type:t})),o.createElement("div",{className:"SRC-cardContent col-md-10"},o.createElement("div",{className:"SRC-type"},t),o.createElement("div",null,o.createElement("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"}},n)),a&&o.createElement("div",{className:"SRC-author"}," ",a," "),o.createElement("span",{className:"SRC-font-size-base"},r),o.createElement("div",{style:{borderTop:"1px solid rgba(26, 28, 41, 0.2)",marginTop:"15px",paddingTop:"5px"}},l&&o.createElement(vn,{isHeader:!0,secondaryLabelLimit:u,values:l}))))))},zn=400,Qn=/^10.\d{4,9}\/[-._;()\/:a-z0-9]+$/,Yn=/^syn\d+$/,Kn=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).getCutoff=function(e){for(var t="",n=e.split(" "),a=0;t.length<zn&&a<n.length;)t+="".concat(n[a]," "),a+=1;return{previewText:t=t.trim()}},n.toggleShowMore=function(){n.setState({showMoreDescription:!0})},n.state={showMoreDescription:!1},n.createTitleLink=n.createTitleLink.bind(Object(g.a)(n)),n.createLabelLink=n.createLabelLink.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"createTitleLink",value:function(e,t,n,a){var r=e,o="_self";if(e.match(Yn))r="https://www.synapse.org/#!Synapse:".concat(e);else if(e.match(Qn))o="_blank",r="https://dx.doi.org/".concat(e);else if(t){if(t){if(!n||!a)throw Error("Must specify CardLink and data for linking to work");var i=t.URLColumnNames.map((function(e){return a.hasOwnProperty(e)||console.error("Could not find match for data: ".concat(n," with columnName ").concat(e)),"".concat(e,"=").concat(n[a[e]])})).join("&");r="#/".concat(t.baseURL,"?").concat(i)}}else o="_blank";return{linkDisplay:r,target:o}}},{key:"createLabelLink",value:function(e,t,n){var a=e.split(","),r="",i={};return r=n?"SRC-lightLink":"SRC-primary-text-color",a.map((function(e,n){var s=t.baseURL,c=t.URLColumnNames.map((function(t){return"".concat(t,"=").concat(e)})).join("&"),l="#/".concat(s,"?").concat(c);return o.createElement(o.Fragment,{key:e},o.createElement("a",{href:l,key:e,className:r,style:i},e),n<a.length-1&&o.createElement("span",{style:{marginRight:4}}," , "))}))}},{key:"render",value:function(){for(var e=this,t=this.props,n=t.schema,a=t.data,r=t.genericCardSchema,i=t.secondaryLabelLimit,s=t.backgroundColor,c=t.iconOptions,l=t.isHeader,u=void 0!==l&&l,d=t.titleLinkConfig,m=t.labelLinkConfig,p=t.facetAliases,f=void 0===p?{}:p,h=this.state.showMoreDescription,g=r.link,b=void 0===g?"":g,v=r.type,E=a[n[r.title]],S=r.subTitle&&a[n[r.subTitle]],y=a[n[r.description||""]],C=a[n[r.icon||""]],w=a[n[b]]||"",R=this.createTitleLink(w,d,a,n),O=R.linkDisplay,k=R.target,D=[],x=r.secondaryLabels,N=void 0===x?[]:x,I=function(t){var r=N[t],o=a[n[r]];if(o){var i=m&&m.find((function(e){return e.matchColumnName===r}));i&&(o=e.createLabelLink(o,i,u));var s=[f[r]||r,o];D.push(s)}},T=0;T<N.length;T+=1)I(T);var j=D.length>0,F={background:s,marginTop:u?"0px":void 0,marginBottom:u?"0px":void 0,paddingBottom:j?void 0:"15px"};if(u)return o.createElement(Gn,{type:v,title:E,subTitle:S,backgroundColor:s,description:y,iconValue:C,iconOptions:c,values:D,secondaryLabelLimit:i});var L=f[r.title]||r.title,P=f[r.subTitle||""]||r.subTitle,A=f[r.description||""]||r.description;return o.createElement("div",{style:F,className:"SRC-portalCard"},o.createElement("div",{className:"SRC-cardThumbnail"},o.createElement(Bn,{iconOptions:c,value:C,type:v})),o.createElement("div",{className:"SRC-cardContent"},o.createElement("div",{className:"SRC-type"},v),o.createElement("div",null,o.createElement("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"}},O?o.createElement("a",{"data-search-handle":L,className:"SRC-primary-text-color",target:k,href:O},E):o.createElement("span",{"data-search-handle":L}," ",E," "))),S&&o.createElement("div",{"data-search-handle":P,className:"SRC-author"}," ",S," "),y&&o.createElement("div",{className:h?"SRC-hidden":""},o.createElement("span",{"data-search-handle":A,className:"SRC-font-size-base ".concat("SRC-short-description"," SRC-short-description")},this.getCutoff(y).previewText),y.length>=zn&&o.createElement("a",{style:{fontSize:"14px",cursor:"pointer",marginLeft:"3px"},className:"SRC-primary-text-color",onClick:this.toggleShowMore},"...Show More"," ")),y&&o.createElement("div",{className:h?"":"SRC-hidden"},o.createElement("span",{"data-search-handle":A,className:"SRC-font-size-base ".concat("SRC-long-description")},y))),j&&o.createElement(vn,{isHeader:!1,secondaryLabelLimit:i,values:D}))}}]),t}(o.Component),Jn=/group by/im,Zn=function(e){return Jn.test(e)},Xn=function(e,t,n){var a=n;switch(n.match(Yn)&&(a=n.substring(3)),t){case"LIKE":return[["LITERAL",e,"1"],["OPERATOR",t,"1"],["STRING","%".concat(a,"%"),"1"]];case"=":return[["LITERAL",e,"1"],["OPERATOR",t,"1"],["STRING",n,"1"]]}},$n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"LIKE",a=hn.lexer.tokenize(t),r=a.findIndex((function(e){return"WHERE"===e[0]})),o=-1===r?a.findIndex((function(e){return"FROM"===e[0]}))+2:r,i=o+1;-1===r?a.splice(o,0,["WHERE","WHERE","1"]):a.splice(i,0,["CONDITIONAL","AND","1"]);var s=Object.keys(e).length;return Object.keys(e).forEach((function(t,r){var o=Xn(t,n,e[t]);r<s-1&&o.unshift(["CONDITIONAL","AND","1"]),a.splice.apply(a,[i,0].concat(Object(ce.a)(o)))})),ea(a)},ea=function(e){var t=e[e.findIndex((function(e){return"FROM"===e[0]}))+1][1],n=hn.parser.parse(e).toString(),a="`".concat(t,"`");return n.split(a).join(t)},ta=n(126),na=n.n(ta),aa="First line is the columns names.",ra="Include row metadata (Row Id and Row Version).",oa="Comma Separated Values (CSV)",ia=[{title:"Download query results",type:"object",properties:{"File Type":{type:"string",oneOf:[{const:oa,title:oa},{const:"Tab Separated Values (TSV)",title:"Tab Separated Values (TSV)"}]},Contents:{type:"array",title:"Contents",items:{type:"string",enum:[aa,ra]},uniqueItems:!0}}},{title:"Download query results",description:"File is ready for download. Select the download button to download the file.",type:"object"}],sa=[{"File Type":{"ui:widget":"radio"},Contents:{"ui:widget":"checkboxes"}},{}];function ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}Zt.b.add(Xt.G);var la=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=function(e){0===n.state.step?n.handleDownloadSetup(e):n.onDownload()},n.handleDownloadSetup=function(e){n.setState({isLoading:!0});var t=e.formData,a=t["File Type"],o=t.Contents,i=n.props,s=i.token,c=(i.onClose,Object(le.a)(i,["token","onClose"])),l=a===oa?",":"\t",u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ca(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ca(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c,{concreteType:"org.sagebionetworks.repo.model.table.DownloadFromTableRequest",writeHeader:o.includes(aa),includeRowIdAndRowVersion:o.includes(ra),csvTableDescriptor:{separator:l}});r.getDownloadFromTableRequest(u,s).then((function(e){n.setState({isLoading:!1,step:1,data:e})})).catch((function(e){console.log("Error getDownloadFromTableRequest: ",e)}))},n.onDownload=function(){var e=n.state.data,t=n.props.token;r.getFileHandleByIdURL(e.resultsFileHandleId,t).then((function(e){window.location.href=e,n.props.onClose()}))},n.handleChange=function(e){var t=e.formData;n.setState({formData:t})},n.state={isLoading:!1,step:0,formData:{"File Type":oa,Contents:[aa,ra]}},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.createElement(o.Fragment,null,o.createElement("div",{className:"custom-checkbox-container modal fade in SRC-block",role:"dialog",tabIndex:-1},o.createElement("div",{className:"modal-dialog",role:"document"},o.createElement("div",{className:"modal-content"},o.createElement("button",{style:{position:"absolute",top:10,right:10,zIndex:10},onClick:this.props.onClose},o.createElement($t.a,{style:{fontSize:"21px"},icon:"times"})),o.createElement("div",{className:"modal-body"},o.createElement(na.a,{schema:ia[this.state.step],uiSchema:sa[this.state.step],onChange:this.handleChange,formData:this.state.formData,onSubmit:this.handleSubmit},this.state.isLoading&&o.createElement("div",{className:"SRC-centerAndJustifyContent"},o.createElement("div",{className:"SRC-center-text"},o.createElement("p",null," Creating the File "),o.createElement("div",{style:{height:50,width:50,backgroundSize:50},className:"spinner"}),o.createElement("p",null," Loading... "))),o.createElement("hr",null),o.createElement("div",{style:{textAlign:"right"}},o.createElement("button",{id:"cancelBtn",onClick:this.props.onClose,className:"SRC-primary-text-color SRC-roundBorder SRC-underline-on-hover ",type:"button"}," Cancel "),o.createElement("button",{id:"submitBtn",style:{padding:"6px 10px",borderRadius:6},className:"SRC-primary-background-color SRC-roundBorder SRC-whiteText",type:"submit"},0===this.state.step?"Next":"Download"))))))),o.createElement("div",{className:"modal-backdrop in"}))}}]),t}(o.Component);Zt.b.add(Xt.u),Zt.b.add(Xt.s),Zt.b.add(Xt.q),Zt.b.add(Xt.v),Zt.b.add(Xt.E),Zt.b.add(Xt.F),Zt.b.add(Xt.c);var ua=function(e){var t=e.type,n=t.split("."),a=function(e){switch(e){case"Link":return"link";case"Folder":return"folder";case"FileEntity":return"file";case"TableEntity":return"table";case"Project":return"list-alt";case"EntityView":return"th-list";default:return""}}(n[n.length-1]);return""===a?(console.log("Entity Type not mapped = ",t),o.createElement(o.Fragment,null)):o.createElement($t.a,{style:{marginRight:5},icon:a})},da=function(e){var t=e.entityHeader,n=e.className,a=t.id,r=t.name,i=t.type;return o.createElement("a",{className:n,target:"_blank",rel:"noopener noreferrer",href:"https://www.synapse.org/#!Synapse:".concat(a)},o.createElement("p",{className:n},o.createElement(ua,{type:i}),r))},ma=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={total:0},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.calculateTotal()}},{key:"componentDidUpdate",value:function(e){!this.props.isLoading&&e.isLoading&&this.calculateTotal()}},{key:"calculateTotal",value:function(){var e=this.props,t=e.data,n=e.facet,a=this.state.total;if(t)if(n){var r=t.facets,o=void 0===r?[]:r,i=o.findIndex((function(e){return"enumeration"===e.facetType&&e.columnName===n})),s=o[i],c=!1,l=0,u=0;if(s){var d=!0,m=!1,p=void 0;try{for(var f,h=s.facetValues[Symbol.iterator]();!(d=(f=h.next()).done);d=!0){var g=f.value;c=c||g.isSelected,l+=g.count,u+=g.isSelected?g.count:0}}catch(b){m=!0,p=b}finally{try{d||null==h.return||h.return()}finally{if(m)throw p}}}a=c?u:l,0===t.queryResult.queryResults.rows.length&&(a=0)}else{if(void 0===t.queryCount)throw Error("Failed to specify either a facet or query count in part mask");a=t.queryCount}this.setState({total:a})}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.style,a=e.unitDescription,r=e.frontText,i=this.state.total,s=o.createElement("span",{style:{marginLeft:"2px"},className:"spinner"});return o.createElement("p",{style:n,className:"SRC-boldText SRC-text-title SRC-centerContent"},r," ",i," ",a," ",t&&s)}}]),t}(o.Component);function pa(e,t){return r.getUserProfiles(e).then((function(e){var n=e.list.filter((function(e){return void 0!==e.profilePicureFileHandleId}));if(0===n.length)return e;var a={includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:n.map((function(e){return{associateObjectId:e.ownerId,associateObjectType:"UserProfileAttachment",fileHandleId:e.profilePicureFileHandleId}}))};return r.getFiles(a,t).then((function(t){return t.requestedFiles.forEach((function(t){var n=e.list.findIndex((function(e){return t.fileHandleId===e.profilePicureFileHandleId}));e.list[n].clientPreSignedURL=t.preSignedURL})),Promise.resolve(e)})).catch((function(e){return e}))}))}function fa(e,t){return r.getUserProfileById(t,e).then((function(n){if(!n.profilePicureFileHandleId)return Promise.resolve({userProfile:n});var a={includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:[{associateObjectId:e,associateObjectType:"UserProfileAttachment",fileHandleId:n.profilePicureFileHandleId}]};return r.getFiles(a,t).then((function(e){var t=e.requestedFiles[0];return Promise.resolve({userProfile:n,preSignedURL:t.preSignedURL})})).catch((function(e){console.log({err:e})}))}))}var ha=["chocolate","black","firebrick","maroon","olive","green","forestgreen","darkturquoise","teal","blue","navy","darkmagenta","purple","blue","orangered","blueviolet"],ga=function(e){var t=function(e){var t=e.split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0);return Math.abs(t)}(e);return ha[t%ha.length]};Zt.b.add(Xt.k);var ba=function(e){var t,n,a=e.userProfile,r=e.hideText,i=void 0!==r&&r,s=e.hideTooltip,c=void 0!==s&&s,l=e.preSignedURL,u=e.link,d=u||"https://www.synapse.org/#!Profile:".concat(a.ownerId),m="";if(c||(a.displayName?m+=a.displayName:a.firstName&&a.lastName&&(m+="".concat(a.firstName," ").concat(a.lastName)),a.userName&&(m+=" (".concat(a.userName,")")),a.position&&(m+=" <br/>".concat(a.position)),a.location&&(m+=" <br/>".concat(a.location))),l)n="3px",t=o.createElement("div",{className:"SRC-userImgSmall",style:{backgroundImage:"url(".concat(l,")")},"data-for":m,"data-tip":m});else{var p=ga(a.userName);n="3px",t=o.createElement("div",{style:{background:p},className:"SRC-userImgSmall SRC-centerContentInline"},a.firstName&&a.firstName[0]||a.userName[0])}return o.createElement("a",{href:d,className:"SRC-userCard SRC-primary-text-color SRC-no-underline-on-hover"},t,o.createElement(tn.a,{delayShow:1e3,id:m,multiline:!0}),!i&&o.createElement("span",{className:"SRC-primary-text-color SRC-underline-on-hover",style:{marginLeft:n,whiteSpace:"nowrap"}},"@".concat(a.userName)))},va=function(e){var t=e.menuActions,n=void 0===t?[]:t,a=e.userProfile;return o.createElement("div",{className:"dropdown open"},o.createElement("ul",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"dropdownMenu1"},n.map((function(e,t){var n=function(){return e.callback(a)};return e.field===ne?o.createElement("hr",{className:"SRC-break",key:e.field+t}):o.createElement("li",{key:e.field,style:{listStyle:"none"},className:"SRC-menu-item SRC-table-dropdown-list SRC-primary-background-color-hover",onClick:n,onKeyPress:n},o.createElement("button",{className:"SRC-menuAction"},e.field))}))))};function Ea(e){var t=e.userProfile,n=t.summary,a=t.industry,r=t.location,i=t.url;return o.createElement("div",{className:"SRC-cardMetaData"},n&&o.createElement("div",null,o.createElement("p",{className:"SRC-card-metadata-title"}," Bio "),o.createElement("p",null,n)),i&&o.createElement("div",null,o.createElement("p",{className:"SRC-card-metadata-title"}," More Info "),o.createElement("p",null,i)),a&&o.createElement("div",null,o.createElement("p",{className:"SRC-card-metadata-title"}," Industry "),o.createElement("p",null,a)),r&&o.createElement("div",null,o.createElement("p",{className:"SRC-card-metadata-title"}," Location "),o.createElement("p",null,r)))}Zt.b.add(Xt.k),Zt.b.add(Xt.o),Zt.b.add(Xt.m);var Sa=o.createElement("svg",{width:"12",height:"14",viewBox:"0 0 12 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M10.7368 12.7273H3.78947V3.81818H10.7368V12.7273ZM10.7368 2.54545H3.78947C3.45446 2.54545 3.13317 2.67954 2.89629 2.91823C2.6594 3.15691 2.52632 3.48063 2.52632 3.81818V12.7273C2.52632 13.0648 2.6594 13.3885 2.89629 13.6272C3.13317 13.8659 3.45446 14 3.78947 14H10.7368C11.0719 14 11.3931 13.8659 11.63 13.6272C11.8669 13.3885 12 13.0648 12 12.7273V3.81818C12 3.48063 11.8669 3.15691 11.63 2.91823C11.3931 2.67954 11.0719 2.54545 10.7368 2.54545V2.54545ZM8.8421 0H1.26316C0.928148 0 0.606858 0.134091 0.36997 0.372773C0.133082 0.611456 0 0.935179 0 1.27273V10.1818H1.26316V1.27273H8.8421V0Z",fill:"#DCDCDC"}));Zt.b.add(Xt.k),Zt.b.add(Xt.o),Zt.b.add(Xt.m);var ya=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).htmlDivRef=o.createRef(),n.copyToClipboard=function(e){return function(t){t.preventDefault();var a=document.createElement("textarea");a.value=e,a.setAttribute("readonly",""),a.style.position="absolute",a.style.left="-9999px",n.htmlDivRef.current.appendChild(a),a.select(),document.execCommand("copy"),n.htmlDivRef.current.removeChild(a),n.setState({showModal:!0}),setTimeout((function(){n.setState({showModal:!1})}),4e3)}},n.toggleContextMenu=function(e){n.setState({isContextMenuOpen:!n.state.isContextMenuOpen})},n.pageClick=function(e){n.state.isContextMenuOpen&&setTimeout((function(){n.state.isContextMenuOpen&&n.toggleContextMenu(e)}),10)},n.state={showModal:!1,isContextMenuOpen:!1},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("mouseup",this.pageClick,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mouseup",this.pageClick,!1)}},{key:"render",value:function(){var e,t=this.props,n=t.userProfile,a=t.menuActions,r=t.isLarge,i=void 0!==r&&r,s=t.preSignedURL,c=t.hideEmail,l=void 0!==c&&c,u=t.disableLink,d=void 0!==u&&u,m=t.link,p=this.state,f=p.isContextMenuOpen,h=p.showModal,g=n.displayName,b=n.userName,v=n.firstName,E=n.lastName,S=n.position,y=n.company,C="",w=m||"https://www.synapse.org/#!Profile:".concat(n.ownerId),R="".concat(b,"@synapse.org");g?C=g:v&&E?C="".concat(v," ").concat(E):b&&(C=b),e=s?o.createElement("div",{style:{backgroundImage:"url(".concat(s,")")},className:"SRC-userImg"}):o.createElement("div",{style:{background:ga(b)},className:"SRC-userImg SRC-centerContentInline"},n.firstName&&(n.firstName[0]||n.userName[0]));var O=o.createElement(o.Fragment,null,!l&&o.createElement(zt.TransitionGroup,null,h&&o.createElement(zt.CSSTransition,{key:R,classNames:"SRC-card",timeout:{enter:500,exit:300}},o.createElement("div",{key:R,className:"SRC-modal"}," Email address copied to clipboard "))),d&&e,!d&&o.createElement("a",{href:w,className:"SRC-no-underline-on-hover ".concat(i?"SRC-isLargeCard":"")},e),o.createElement("div",{className:"SRC-cardContent"},o.createElement("p",{className:"SRC-eqHeightRow SRC-userCardName"},i||d?o.createElement("span",{className:i?"SRC-whiteText":"SRC-blackText"}," ",C," "):o.createElement("a",{href:w,tabIndex:0,className:"SRC-hand-cursor SRC-primary-text-color"},C)),(S||y)&&o.createElement("p",{className:"".concat(i?"SRC-whiteText":"")},S," ",S?" / ":""," ",y),!l&&o.createElement("p",{className:"".concat(i?"SRC-whiteText":"SRC-primary-text-color SRC-primary-color-hover","\n              SRC-hand-cursor SRC-eqHeightRow SRC-inlineFlex SRC-emailText SRC-cardSvg"),onClick:this.copyToClipboard(R),onKeyPress:this.copyToClipboard(R),tabIndex:0,ref:this.htmlDivRef},o.createElement("span",{style:{paddingRight:"5px"}},"".concat(b,"@synapse.org")),Sa)),a&&o.createElement(o.Fragment,null,o.createElement("span",{className:"SRC-extraPadding SRC-hand-cursor SRC-primary-background-color-hover SRC-inlineBlock\n              SRC-cardMenuButton ".concat(f?"SRC-primary-background-color":""),style:{outline:"none"},tabIndex:0,onClick:this.toggleContextMenu,onKeyPress:this.toggleContextMenu},o.createElement($t.a,{className:f||i?"SRC-whiteText":"SRC-primary-text-color",icon:"ellipsis-v",fixedWidth:!0})),f&&o.createElement(va,{menuActions:a,userProfile:n})),!a&&o.createElement("span",{style:{padding:"0px 0px 0px 35px"}}));return i?o.createElement("div",{style:{boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)"},className:f?"SRC-hand-cursor":"",onClick:f?this.toggleContextMenu:void 0},o.createElement("div",{className:"SRC-primary-background-color SRC-userCard SRC-userCardMediumUp ".concat(f?"SRC-hand-cursor":"")},O),!!i&&o.createElement(Ea,{userProfile:n})):o.createElement("div",{style:{border:"1px solid #DDDDDF"},className:"SRC-userCard SRC-userCardMediumUp ".concat(f?"SRC-hand-cursor":""),onClick:f?this.toggleContextMenu:void 0},O)}}]),t}(o.Component);function Ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var wa=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={userProfile:void 0,isLoading:!0,preSignedURL:""},n.getUserProfile=n.getUserProfile.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.userProfile,a=t.ownerId,r=t.alias;n||(r?lt("",r,"USER_NAME").then((function(t){e.getUserProfile(t.principalId)})):this.getUserProfile(a))}},{key:"getUserProfile",value:function(e){var t=this;fa(e,"").then((function(e){var n=e.userProfile,a=e.preSignedURL;t.setState({userProfile:n,preSignedURL:a,isLoading:!1})})).catch((function(e){console.log("failed to get user bundle ",e)}))}},{key:"render",value:function(){var e,t,n=this.props,r=n.userProfile,i=n.loadingScreen,s=void 0===i?o.createElement("span",null):i,c=n.preSignedURL,l=n.size,u=Object(le.a)(n,["userProfile","loadingScreen","preSignedURL","size"]);if(r)e=r,t=c;else{if(this.state.isLoading)return s;e=this.state.userProfile,t=this.state.preSignedURL}var d=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ca(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ca(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({userProfile:e,preSignedURL:t},u);switch(l){case a.SMALL_USER_CARD:return o.createElement(ba,d);case a.MEDIUM_USER_CARD:return o.createElement(ya,d);case a.LARGE_USER_CARD:return o.createElement(ya,Object.assign({isLarge:!0},d));default:return o.createElement("span",null)}}}]),t}(o.Component),Ra=n(1189);function Oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ka(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oa(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oa(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Da=700;Zt.b.add(Xt.l),Zt.b.add(Xt.B),Zt.b.add(Xt.D),Zt.b.add(Xt.C),Zt.b.add(Xt.g),Zt.b.add(Xt.G),Zt.b.add(Xt.r),Zt.b.add(Xt.n),Zt.b.add(Xt.I),Zt.b.add(Xt.t);var xa="NEXT",Na="PREVIOUS",Ia="SELECT_ALL",Ta="Download Files",ja=["sort-amount-down","sort-amount-down","sort-amount-up"],Fa=["","DESC","ASC"],La="SRC-download-options-container",Pa="SRC-expand-class",Aa=500,Ma=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).toggleStateVariables=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){var a={};t.forEach((function(e){return a[e]=!n.state[e]})),n.setState(a)}},n.showGroupRowData=function(e){return function(t){var a=dn(n.props.getLastQueryRequest().query),r=n.getSqlUnderlyingDataForRow(e,a.sql);a.sql=r.newSql;var o=JSON.stringify(a),i=btoa(o);window.open("https://www.synapse.org/#!Synapse:".concat(r.synId,"/tables/query/").concat(i),"_self")}},n.renderDropdownDownloadOptions=function(){var e,t=n.state,a=t.isDropdownDownloadOptionsOpen,r=["isModalDownloadOpen"];return t.isExpanded&&r.push("isExpanded"),o.createElement("span",{className:"dropdown ".concat(La," ").concat(a?"open":"")},o.createElement("button",{style:{marginLeft:"10px"},"data-for":"download","data-tip":"Download Options",className:"SRC-primary-background-color-hover SRC-extraPadding SRC-hand-cursor",onClick:n.toggleStateVariables("isDropdownDownloadOptionsOpen","isMenuWallOpen")},o.createElement($t.a,{size:"1x",color:"white",icon:"download"})),o.createElement(tn.a,{delayShow:Aa,place:"top",type:"dark",effect:"solid",id:"openAdvancedSearch"}),o.createElement("ul",{className:"SRC-table-dropdown-zindex dropdown-menu dropdown-menu-right","aria-labelledby":"dropdownMenu1"},o.createElement("li",{style:{listStyle:"none"},className:"SRC-table-dropdown-list SRC-primary-background-color-hover",onClick:(e=n).toggleStateVariables.apply(e,r)},o.createElement("a",{href:"javascript:void"},"Export Metadata")),o.createElement("li",{style:{listStyle:"none"},className:"SRC-table-dropdown-list SRC-primary-background-color-hover",onClick:n.advancedSearch},o.createElement("a",{href:"javascript:void"},Ta))))},n.renderDropdownColumnMenu=function(e){var t=n.state.isDropdownColumnMenuOpen,a="SRC-inlineFlex SRC-primary-background-color-hover  dropdown-toggle SRC-hand-cursor";return a+=t?"SRC-primary-background-color":"",o.createElement("span",{style:{marginLeft:10,height:30,width:34,padding:1},className:"dropdown ".concat(t?"open":"")},o.createElement("span",{tabIndex:0,"data-for":"addAndRemoveColumns","data-tip":"Add / Remove Columns",className:a,onKeyPress:n.toggleStateVariables("isDropdownColumnMenuOpen","isMenuWallOpen"),onClick:n.toggleStateVariables("isDropdownColumnMenuOpen","isMenuWallOpen"),id:"dropdownMenu1"},o.createElement("img",{alt:"columns selection",src:an.a})),o.createElement(tn.a,{delayShow:Aa,place:"top",type:"dark",effect:"solid",id:"addAndRemoveColumns"}),o.createElement("ul",{className:"SRC-table-dropdown-zindex dropdown-menu dropdown-menu-right SRC-column-menu","aria-labelledby":"dropdownMenu1"},n.renderDropdownColumnMenuItems(e)))},n.renderTable=function(e,t,a){var r=n.props.getLastQueryRequest().query.offset>0,i=o.createElement("button",{onClick:n.handlePaginationClick(Na),className:"SRC-light-button SRC-standard-button-shape pull-right",type:"button"},"Previous"),s=n.props.hasMoreData,c=o.createElement("button",{onClick:n.handlePaginationClick(xa),className:"SRC-light-button SRC-standard-button-shape pull-right",type:"button"},"Next");return o.createElement("div",{style:{minHeight:"300px"},className:"SRC-overflowAuto"},o.createElement("table",{className:"table table-striped table-condensed"},o.createElement("thead",{className:"SRC_borderTop"},o.createElement("tr",null,n.createTableHeader(e,t))),o.createElement("tbody",null,n.createTableRows(a,e))),s&&c,r&&i)},n.renderTableTop=function(e){var t=n.props.title,a=n.state.isExpanded,r=Kt(n.props.rgbIndex,1).colorPalette[0];return o.createElement("div",{className:"SRC-centerContent",style:{background:r,padding:8}},o.createElement("h3",{className:"SRC-tableHeader"}," ",t),o.createElement("span",{className:"SRC-inlineFlex",style:{marginLeft:"auto"}},!Zn(n.props.getLastQueryRequest().query.sql)&&o.createElement(o.Fragment,null,o.createElement("span",{tabIndex:0,"data-for":"openAdvancedSearch","data-tip":"Open Advanced Search in Synapse",className:"SRC-primary-background-color-hover SRC-extraPadding SRC-hand-cursor",onKeyPress:n.advancedSearch,onClick:n.advancedSearch},o.createElement($t.a,{size:"1x",color:"white",icon:"filter"})),o.createElement(tn.a,{delayShow:Aa,place:"top",type:"dark",effect:"solid",id:"download"}),n.renderDropdownDownloadOptions(),n.renderDropdownColumnMenu(e)),o.createElement("span",{tabIndex:0,"data-for":"expand","data-tip":"Expand table in full screen",className:"SRC-primary-background-color-hover SRC-inlineFlex SRC-extraPadding SRC-hand-cursor ".concat(Pa),onKeyPress:n.toggleStateVariables("isExpanded"),onClick:n.toggleStateVariables("isExpanded")},a?o.createElement("img",{src:cn.a,alt:"shrink table"}):o.createElement("img",{src:on.a,alt:"expand table"})),o.createElement(tn.a,{delayShow:Aa,place:"top",type:"dark",effect:"solid",id:"expand"})))},n.handlePaginationClick=function(e){return function(t){var a=n.props.getLastQueryRequest(),r=a.query.offset;e===Na&&(r-=25),e===xa&&(r+=25),a.query.offset=r,n.props.executeQueryRequest(a)}},n.handleColumnSortPress=function(e){return function(t){var a=dn(n.state.columnIconSortState);0===a.length&&(a=Array(n.getLengthOfPropsData()).fill(0));var r=dn(n.state.sortedColumnSelection),o=n.findSelectionIndex(r,e.name);-1!==o&&r.splice(o,1),a[e.index]=(a[e.index]+1)%ja.length,a[e.index]>0&&r.unshift({column:e.name,direction:Fa[a[e.index]]});var i=n.props.getLastQueryRequest();i.query.sort=r,n.props.executeQueryRequest(i),n.setState({columnIconSortState:a,sortedColumnSelection:r})}},n.renderDropdownColumnMenuItems=function(e){return e.map((function(e,t){var a=n.state.isColumnSelected[t],r=n.props.visibleColumnCount;void 0===a&&(a=t<(void 0===r?1/0:r));var i={width:"11px",marginRight:"10px"};a||(i.visibility="hidden");var s=a?"SRC-primary-text-color":"";return o.createElement("li",{style:{listStyle:"none"},className:"SRC-table-dropdown-list SRC-primary-background-color-hover ",key:e.name,onClick:n.toggleColumnSelection(t)},o.createElement("a",{href:"javascript:void"},o.createElement($t.a,{style:i,className:s,icon:"check"}),e.name))}))},n.toggleColumnSelection=function(e){return function(t){var a;if(t.preventDefault(),0===n.state.isColumnSelected.length){var r,o=n.props.visibleColumnCount,i=void 0===o?1/0:o,s=n.getLengthOfPropsData();i===1/0?r=Array(s).fill(!0):(r=Array(s).fill(!1)).fill(!0,0,i),a=r}else a=dn(n.state.isColumnSelected);a[e]=!a[e],n.setState({isColumnSelected:a})}},n.applyChanges=function(e){var t=e.ref,a=e.columnName,r=e.facetValue,o=void 0===r?"":r,i=e.selector,s=void 0===i?"":i;return function(e){var r=Array.from(t.current.querySelectorAll(".SRC-facet-checkboxes")),i=n.props.getLastQueryRequest(),c=n.props.isAllFilterSelectedForFacet,l=fn({htmlCheckboxes:r,queryRequest:i,selector:s,facet:a}).newQueryRequest,u={columnName:a,facetValue:o,selector:s};c[a]=s===Ia,n.props.updateParentState({lastFacetSelection:u,isAllFilterSelectedForFacet:c}),n.props.executeQueryRequest(l)}},n.toggleFilterDropdown=function(e,t,a){return function(r){var o=a.current.parentElement.getBoundingClientRect().left<Da?"SRC-forceLeftDropdown dropdown-menu-left":"dropdown-menu-right";n.setState({activeFilterClass:o,activeFilterIndex:e,isDropdownColumnMenuOpen:!1,isMenuWallOpen:!t})}},n.handleColumnSortPress=n.handleColumnSortPress.bind(Object(g.a)(n)),n.handlePaginationClick=n.handlePaginationClick.bind(Object(g.a)(n)),n.findSelectionIndex=n.findSelectionIndex.bind(Object(g.a)(n)),n.toggleColumnSelection=n.toggleColumnSelection.bind(Object(g.a)(n)),n.advancedSearch=n.advancedSearch.bind(Object(g.a)(n)),n.getLengthOfPropsData=n.getLengthOfPropsData.bind(Object(g.a)(n)),n.configureFacetDropdown=n.configureFacetDropdown.bind(Object(g.a)(n)),n.closeAllDropdowns=n.closeAllDropdowns.bind(Object(g.a)(n)),n.applyChanges=n.applyChanges.bind(Object(g.a)(n)),n.toggleFilterDropdown=n.toggleFilterDropdown.bind(Object(g.a)(n)),n.state={columnIconSortState:[],activeFilterClass:"",isColumnSelected:[],activeFilterIndex:-1,isDropdownColumnMenuOpen:!1,isMenuWallOpen:!1,isModalDownloadOpen:!1,isDropdownDownloadOptionsOpen:!1,isExpanded:!1,sortedColumnSelection:[],mapEntityIdToHeader:{},mapUserIdToHeader:{}},n.renderFacetSelection=n.renderFacetSelection.bind(Object(g.a)(n)),n.getEntityHeadersInData=n.getEntityHeadersInData.bind(Object(g.a)(n)),n.getColumnIndiciesWithType=n.getColumnIndiciesWithType.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getEntityHeadersInData()}},{key:"componentDidUpdate",value:function(){this.getEntityHeadersInData()}},{key:"getEntityHeadersInData",value:function(){var e=Object(ue.a)(se.a.mark((function e(){var t,n,a,o,i,s,c,l,u,d,m,p,f;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.data,a=t.token,n){e.next=3;break}return e.abrupt("return");case 3:if(o=dn(this.state.mapEntityIdToHeader),i=dn(this.state.mapUserIdToHeader),s=this.getColumnIndiciesWithType("ENTITYID"),c=this.getColumnIndiciesWithType("USERID"),l=this.getUniqueEntities(n,o,s),u=this.getUniqueEntities(n,i,c),!(l.size>0)){e.next=22;break}return d=Array.from(l).map((function(e){return{targetId:e}})),e.prev=11,e.next=14,r.getEntityHeader(d,a);case 14:m=e.sent,m.results.forEach((function(e){o[e.id]=e})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(11),console.error("Error on retrieving entity header list , ",e.t0);case 22:if(0!==u.size){e.next=25;break}return l.size>0&&this.setState({mapEntityIdToHeader:o}),e.abrupt("return");case 25:return p=Array.from(u),f=[],e.prev=27,e.next=30,r.getGroupHeadersBatch(p,a);case 30:e.sent.children.forEach((function(e){e.isIndividual?f.push(e.ownerId):i[e.ownerId]=e})),e.next=37;break;case 34:e.prev=34,e.t1=e.catch(27),console.error("Error on getGroupHeaders batch: ",e.t1);case 37:if(!(f.length>0)){e.next=48;break}return e.prev=38,e.next=41,pa(f,a);case 41:e.sent.list.forEach((function(e){i[e.ownerId]=e})),e.next=48;break;case 45:e.prev=45,e.t2=e.catch(38),console.error("Error on getUserProfile : ",e.t2);case 48:(l.size>0||u.size>0)&&this.setState({mapEntityIdToHeader:o,mapUserIdToHeader:i});case 49:case"end":return e.stop()}}),e,this,[[11,19],[27,34],[38,45]])})));return function(){return e.apply(this,arguments)}}()},{key:"getUniqueEntities",value:function(e,t,n){var a=new Set;return e.queryResult.queryResults.rows.forEach((function(e){e.values.forEach((function(e,r){n.includes(r)&&!Object.prototype.hasOwnProperty.call(t,e)&&e&&a.add(e)}))})),a}},{key:"getColumnIndiciesWithType",value:function(e){var t=this.props.data,n=[];return t&&t.selectColumns&&t.selectColumns.forEach((function(t,a){t.columnType===e&&n.push(a)})),n}},{key:"render",value:function(){if(void 0===this.props.data)return this.props.loadingScreen||o.createElement("div",null);var e=this.props,t=e.data,n=e.isLoading,a=void 0===n||n,r=e.unitDescription,i=e.token,s=e.synapseId,c=e.facet,l=e.showBarChart,u=t.queryResult.queryResults,d=u.rows,m=u.headers,p=t.facets,f=void 0===p?[]:p,h=this.state,g=h.isMenuWallOpen,b=h.isModalDownloadOpen,v=h.isExpanded,E=this.props.getLastQueryRequest(),S=E.query,y=S.sql,C=S.selectedFacets,w={};l?(w.marginTop=15,w.marginBottom=15):w.marginTop=-10;var R=o.createElement(o.Fragment,null,o.createElement("div",{className:"SRC-centerContent",style:ka({height:"20px",textAlign:"left"},w)},r&&!Zn(E.query.sql)&&o.createElement(ma,{facet:c,data:t,isLoading:a,style:{fontSize:15},unitDescription:r,frontText:"Showing"})),this.renderTableTop(m),this.renderTable(m,f,d),g&&o.createElement("button",{onClick:this.closeAllDropdowns,className:"SRC-menu-wall"}));return o.createElement(o.Fragment,null,b&&o.createElement(la,{onClose:this.toggleStateVariables("isModalDownloadOpen","isDropdownDownloadOptionsOpen","isMenuWallOpen"),sql:y,selectedFacets:C,token:i,entityId:s}),v&&o.createElement(Ra.a,{animation:!1,centered:!0,show:!0,onHide:this.toggleStateVariables("isExpanded"),dialogClassName:"modal-90w"},o.createElement(Ra.a.Header,{onHide:this.toggleStateVariables("isExpanded"),closeButton:!0}),o.createElement(Ra.a.Body,null,R)),!v&&R)}},{key:"getCountFunctionColumnIndexes",value:function(e){var t=[];if(Zn(e))for(var n=hn.lexer.tokenize(e),a=n.findIndex((function(e){return"SELECT"===e[0]})),r=n.findIndex((function(e){return"FROM"===e[0]})),o=0,i=a+1;i<r-a-1;i+=1){var s=n[i];"FUNCTION"===s[0]&&"count"===s[1].toLowerCase()?t.push(o):"SEPARATOR"===s[0]&&(o+=1)}return t}},{key:"getSqlUnderlyingDataForRow",value:function(e,t){for(var n=hn.lexer.tokenize(t),a=n.findIndex((function(e){return"SELECT"===e[0]})),r=n.findIndex((function(e){return"FROM"===e[0]})),o=[],i=0,s=!1,c=a+1;c<r-a-1;c+=1){var l=n[c];"FUNCTION"===l[0]||"concat"===l[1].toLocaleLowerCase()?s=!0:"LITERAL"!==l[0]||s?"SEPARATOR"===l[0]&&(i+=1,s=!1):o.push({index:i,name:l[1]})}if((n=n.slice(0,n.findIndex((function(e){return"GROUP"===e[0]})))).splice(a+1,r-a-1,["STAR","*","1"]),void 0===this.props.data)return{synId:"",newSql:""};-1===n.findIndex((function(e){return"WHERE"===e[0]}))?n.push(["WHERE","WHERE","1"]):n.push(["CONDITIONAL","AND","1"]),o.forEach((function(t,a){var r=e.values[t.index];r?n.push(["LITERAL",t.name,"1"],["OPERATOR","=","1"],["STRING",r,"1"],["CONDITIONAL","AND","1"]):n.push(["LITERAL",t.name,"1"],["OPERATOR","IS","1"],["BOOLEAN","null","1"],["CONDITIONAL","AND","1"])})),n.pop();var u=n[n.findIndex((function(e){return"FROM"===e[0]}))+1][1];return n.push(["EOF","","1"]),{synId:u,newSql:ea(n)}}},{key:"createTableRows",value:function(e,t){var n=this,a=[],r=this.state,i=r.isColumnSelected,s=r.mapEntityIdToHeader,c=r.mapUserIdToHeader,l=this.getColumnIndiciesWithType("ENTITYID"),u=this.getColumnIndiciesWithType("USERID"),d=i.length,m=this.getCountFunctionColumnIndexes(this.props.getLastQueryRequest().query.sql),p=this.props.visibleColumnCount,f=void 0===p?1/0:p;return e.forEach((function(e,r){var i=e.values.map((function(a,i){var p=t[i].name,h=n.findSelectionIndex(n.state.sortedColumnSelection,p),g=i<(Zn(n.props.getLastQueryRequest().query.sql)?1/0:f)&&0===d,b=0!==d&&n.state.isColumnSelected[i],v=m.includes(i),E=-1===h?"":"SRC-boldText";return g||b?o.createElement("td",{className:"SRC_noBorderTop",key:"(".concat(r).concat(a).concat(i,")")},v&&o.createElement("a",{href:"javascript:void",onClick:n.showGroupRowData(e)},o.createElement("p",{className:E},a)),!v&&n.renderTableCell({entityColumnIndicies:l,userColumnIndicies:u,colIndex:i,columnValue:a,isBold:E,mapEntityIdToHeader:s,mapUserIdToHeader:c})):o.createElement("td",{className:"SRC-hidden",key:"(".concat(r,",").concat(i,")")})})),p=o.createElement("tr",{key:e.rowId},i);a.push(p)})),a}},{key:"renderTableCell",value:function(e){var t=e.entityColumnIndicies,n=e.userColumnIndicies,a=e.colIndex,r=e.columnValue,i=e.isBold,s=e.mapEntityIdToHeader,c=e.mapUserIdToHeader;if(t.includes(a)&&Object.prototype.hasOwnProperty.call(s,r))return o.createElement(da,{entityHeader:s[r],className:i});if(n.includes(a)&&Object.prototype.hasOwnProperty.call(c,r)){var l=c[r],u=l.ownerId,d=l.userName;if(!1===c[r].isIndividual){var m=d===ae?"globe-americas":"users";return d===ae?o.createElement("span",null,o.createElement($t.a,{icon:m})," All registered Synapse users "):o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.synapse.org/#!Team:".concat(u)}," ",o.createElement($t.a,{icon:m})," ",d," ")}return o.createElement(wa,{userProfile:c[r],preSignedURL:c[r].clientPreSignedURL,size:"SMALL USER CARD"})}return o.createElement("p",{className:i}," ",r," ")}},{key:"createTableHeader",value:function(e,t){var n=this,a=this.state,r=a.isColumnSelected,i=a.sortedColumnSelection,s=a.columnIconSortState,c=this.props,l=c.visibleColumnCount,u=void 0===l?1/0:l,d=c.facetAliases,m=void 0===d?{}:d,p=Zn(this.props.getLastQueryRequest().query.sql)?1/0:u;return e.map((function(e,a){var c=a<p&&0===r.length,l=r[a]&&0!==r.length;if(c||l){var u=-1!==n.findSelectionIndex(i,e.name),d=void 0===s[a]?0:s[a],f=t.findIndex((function(t){return(m[t.columnName]||t.columnName)===e.name})),h=-1!==f&&"enumeration"===t[f].facetType,g=u?"SRC-selected-table-icon":"SRC-primary-text-color",b="SRC-tableHead SRC-hand-cursor SRC-sortPadding SRC-primary-background-color-hover  ".concat(u?"SRC-primary-background-color SRC-anchor-light":"");return o.createElement("th",{key:e.name},o.createElement("div",{className:"SRC-centerContent"},o.createElement("span",{style:{whiteSpace:"nowrap"}},e.name),h&&n.configureFacetDropdown(a,t,f),o.createElement("span",{tabIndex:0,className:b,onKeyPress:n.handleColumnSortPress({index:a,name:e.name}),onClick:n.handleColumnSortPress({index:a,name:e.name})},o.createElement($t.a,{className:"SRC-primary-background-color-hover  ".concat(g),icon:ja[d]}))))}return o.createElement("th",{className:"SRC-hidden",key:e.name})}))}},{key:"findSelectionIndex",value:function(e,t){return 0!==e.length?e.findIndex((function(e){return e.column===t})):-1}},{key:"advancedSearch",value:function(e){e&&e.preventDefault();var t=this.props.getLastQueryRequest().query,n=btoa(JSON.stringify(t)),a=this.props.synapseId;window.open("https://www.synapse.org/#!Synapse:".concat(a,"/tables/query/").concat(n),"_blank")}},{key:"getLengthOfPropsData",value:function(){return this.props.data.queryResult.queryResults.headers.length}},{key:"configureFacetDropdown",value:function(e,t,n){var a=t[n],r=a.columnName,i=this.state.activeFilterIndex===e,s=o.createRef(),c=o.createRef(),l=i?"SRC-primary-background-color":"SRC-primary-text-color",u=i?this.state.activeFilterClass:"",d=this.props.isAllFilterSelectedForFacet[r];return o.createElement("div",{ref:c,style:{alignItems:"center",marginLeft:"10px",marginRight:"3px",color:"black",display:"flex"},className:"SRC-table-dropdown-zindex SRC-table-facet-dropdown btn-group SRC-tableHead ".concat(i?"open SRC-anchor-light":"")},o.createElement("span",{tabIndex:0,className:"SRC-padding SRC-hand-cursor SRC-primary-background-color-hover ".concat(l),onKeyPress:this.toggleFilterDropdown(e,i,c),onClick:this.toggleFilterDropdown(e,i,c),style:{outline:"none"}},o.createElement($t.a,{style:{margin:"auto"},size:"1x",className:l,color:i?"white":"",icon:"filter"})),o.createElement("div",{style:{paddingLeft:20},className:"dropdown-menu dropdown-menu-override SRC-minDropdownWidth ".concat(u)},o.createElement("ul",{style:{listStyleType:"none"},className:"scrollable checkbox"},o.createElement("label",{className:"dropdownList SRC-border-bottom-only SRC-overflowWrap SRC-base-font SRC-fullWidth",style:{paddingBottom:10}},o.createElement("input",{onClick:this.applyChanges({ref:s,columnName:r,selector:Ia}),checked:d,className:"SRC-facet-checkboxes",type:"checkbox"}),o.createElement("span",null," All ")),o.createElement("span",{ref:s},this.renderFacetSelection(a,s,r)))))}},{key:"closeAllDropdowns",value:function(e){var t={activeFilterClass:"",activeFilterIndex:-1};["isDropdownColumnMenuOpen","isDropdownDownloadOptionsOpen","isModalDownloadOpen","isMenuWallOpen"].forEach((function(e){t[e]=!1})),this.setState(t)}},{key:"renderFacetSelection",value:function(e,t,n){var a=this,r=this.props,i=r.lastFacetSelection,s=r.isLoading,c=r.isAllFilterSelectedForFacet;return e.facetValues.map((function(e){var r=e.value,l=e.count,u=r;"org.sagebionetworks.UNDEFINED_NULL_NOTSET"===u&&(u="unannotated");var d=n+r+l,m=!c[n]&&pn({columnName:n,isLoading:s,lastFacetSelection:i,curFacetSelection:e});return o.createElement("li",{className:"checkbox SRC-table-checkbox",key:d},o.createElement("label",{className:"dropdownList SRC-overflowWrap SRC-base-font SRC-fullWidth"},o.createElement("input",{onChange:a.applyChanges({ref:t,columnName:n,facetValue:r}),checked:m,className:"SRC-facet-checkboxes",type:"checkbox",value:r}),o.createElement("span",null,u,o.createElement("span",{style:{color:"#DDDDDF",marginLeft:"3px"}}," (",l,") "))))}))}}]),t}(o.Component),Ua="SELECT_SINGLE_FACET";Zt.b.add(Xt.G),Zt.b.add(Xt.z);var _a=function(e){var t=e.facetColumnResult,n=e.showAllFacets,a=e.lastFacetSelection,r=e.isLoading,i=e.rgbIndex,s=e.isAllFilterSelected,c=[],l=o.createRef();t.facetValues.sort((function(e,t){return t.count-e.count}));var u=Kt(i,t.facetValues.length),d=u.colorPalette,m=u.textColors;t.facetValues.forEach((function(n,i){var u=t.columnName+n.value+n.count,p=m[i],f=d[i],h={},g=!!s||pn({isLoading:r,lastFacetSelection:a,columnName:t.columnName,curFacetSelection:n}),b=g?"FACET_SELECTED_CLASS":"FACET_NOT_SELECTED_CLASS";(h=g?{background:f}:{background:"#C4C4C4"}).color=p;var v=n.value,E=n.count,S="org.sagebionetworks.UNDEFINED_NULL_NOTSET"===v?"unannotated":v;c.push(o.createElement("label",{style:h,className:"SRC-facets SRC-primary-background-color-hover ",key:u},o.createElement("span",{className:"SRC-facets-text"},S," (",E,")"," "),o.createElement("input",{onChange:e.applyChanges(l,v,Ua),checked:g,type:"checkbox",value:v,className:"SRC-hidden SRC-facet-checkboxes ".concat(b)})))}));var p=c.map((function(e,t){return!(!n&&t>4)&&e}));return o.createElement("span",{ref:l},p)},qa=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).applyChanges=function(e,t,a,r){return function(o){o.preventDefault(),n.state.showAllFacets||n.setState({showAllFacets:!0});var i=n.props,s=i.facet,c=void 0===s?"":s,l=i.isAllFilterSelectedForFacet,u=void 0===l?{}:l,d={facetValue:t,selector:a,columnName:c};u[c]=a===Ia,n.props.updateParentState({lastFacetSelection:d,isAllFilterSelectedForFacet:u,chartSelectionIndex:r});var m=Array.from(e.current.querySelectorAll(".SRC-facet-checkboxes")),p=n.props.getLastQueryRequest(),f=fn({htmlCheckboxes:m,queryRequest:p,selector:a,facet:c,value:t}).newQueryRequest;p.query.offset=0,n.props.executeQueryRequest(f)}},n.applyChanges=n.applyChanges.bind(Object(g.a)(n)),n.state={showAllFacets:!1},n.showAllFacets=n.showAllFacets.bind(Object(g.a)(n)),n.showButtons=n.showButtons.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"showFacetFilter",value:function(){var e=this;if(!this.props.data.facets)throw Error("Error on query request, must include facets in partmask to show facets");var t=this.props.data.facets.find((function(t){return t.columnName===e.props.facet&&"enumeration"===t.facetType}));if(!t)throw Error("Error no matching facet found given specified facet");return o.createElement(_a,{isAllFilterSelected:this.props.isAllFilterSelectedForFacet[this.props.facet],showAllFacets:this.state.showAllFacets,rgbIndex:this.props.rgbIndex,key:t.columnName,facetColumnResult:t,applyChanges:this.applyChanges,isLoading:this.props.isLoading,lastFacetSelection:this.props.lastFacetSelection})}},{key:"showAllFacets",value:function(e){e.preventDefault(),this.setState({showAllFacets:!0})}},{key:"showButtons",value:function(e,t,n){return e?o.createElement("button",{className:"SRC-primary-text-color SRC-facet-select-all SRC-no-text-decor",onClick:this.applyChanges(n,"",Ia)},"Select All"):o.createElement("button",{id:"showAllFacetsButton",className:"SRC-primary-text-color SRC-no-text-decor",onClick:this.showAllFacets}," ","Show All (",t,")"," ")}},{key:"render",value:function(){if(!this.props.data)return o.createElement("div",null);var e=this.state.showAllFacets,t=this.props,n=t.data,a=t.facet,r=t.unitDescription,i=t.isLoading,s=t.showBarChart,c=n.facets;if(!c)throw Error("Error on query request, must include facets in partmask to show facets");var l=c.findIndex((function(e){return e.columnName===a&&"enumeration"===e.facetType})),u=c[l];if(!u)return o.createElement("div",null);u.facetValues.length<5&&(e=!0);var d=o.createRef();return o.createElement("div",{className:"SRC-syn-border-spacing"},!s&&o.createElement(ma,{data:n,facet:a,unitDescription:r,frontText:"Displaying",isLoading:i}),o.createElement("form",null,o.createElement("div",{ref:d,className:"SRC-marginFive form-group"},this.showFacetFilter(),this.showButtons(e,u.facetValues.length,d))))}}]),t}(o.Component),Ha=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},n.calculateRowCount=n.calculateRowCount.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.calculateRowCount()}},{key:"componentDidUpdate",value:function(){this.calculateRowCount()}},{key:"calculateRowCount",value:function(){var e=this,t=this.props,n=t.sql,o=t.token;if(!this.state[n]){var i={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:n},partMask:a.BUNDLE_MASK_QUERY_COUNT};r.getQueryTableResults(i,o).then((function(t){e.setState(Object(h.a)({},n,t.queryCount))}))}}},{key:"render",value:function(){var e=this.props,t=e.sql,n=e.name,a=this.state[t];return o.createElement(o.Fragment,null," ",n," (",a&&a.toLocaleString(),") ")}}]),t}(o.Component);function Ba(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Va(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ba(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ba(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wa=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).executeInitialQueryRequest=n.executeInitialQueryRequest.bind(Object(g.a)(n)),n.executeQueryRequest=n.executeQueryRequest.bind(Object(g.a)(n)),n.getLastQueryRequest=n.getLastQueryRequest.bind(Object(g.a)(n)),n.getNextPageOfData=n.getNextPageOfData.bind(Object(g.a)(n)),n.updateParentState=n.updateParentState.bind(Object(g.a)(n)),n.getInitQueryRequest=n.getInitQueryRequest.bind(Object(g.a)(n)),n.state=t.initialState,n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.loadNow;(void 0===e||e)&&this.executeInitialQueryRequest()}},{key:"componentDidUpdate",value:function(e){var t=this.props.loadNow;(void 0===t||t)&&!this.state.loadNowStarted?this.executeInitialQueryRequest():""!==this.props.token&&""===e.token?this.executeInitialQueryRequest():e.initQueryRequest.query.sql!==this.props.initQueryRequest.query.sql&&this.executeInitialQueryRequest()}},{key:"getLastQueryRequest",value:function(){return dn(this.state.lastQueryRequest)}},{key:"getInitQueryRequest",value:function(){return dn(this.props.initQueryRequest)}},{key:"executeQueryRequest",value:function(e){var t=this;return this.setState({isLoading:!0}),r.getQueryTableResults(e,this.props.token,this.updateParentState).then((function(n){var r={hasMoreData:n.queryResult.queryResults.rows.length===a.PAGE_SIZE,data:n,isLoading:!1,lastQueryRequest:dn(e),asyncJobStatus:void 0};return t.setState(r),Promise.resolve((function(){}))})).catch((function(e){return console.log("Failed to get data ",e),Promise.resolve((function(){}))}))}},{key:"getNextPageOfData",value:function(){var e=Object(ue.a)(se.a.mark((function e(t){var n=this;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,mn(t,this.state.data,this.props.token).then((function(e){n.setState(Va({},e,{isLoading:!1,lastQueryRequest:dn(t)}))}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"executeInitialQueryRequest",value:function(){var e=this;this.setState({isLoading:!0,isLoadingNewData:!0,chartSelectionIndex:0,loadNowStarted:!0}),r.getQueryTableResults(this.props.initQueryRequest,this.props.token,this.updateParentState).then((function(t){var n=dn(e.props.initQueryRequest),r=t.queryResult.queryResults.rows.length===a.PAGE_SIZE,o=dn(e.state.isAllFilterSelectedForFacet),i=e.state.chartSelectionIndex;if(e.props.facet){if(!t.facets)throw Error("Error on query request, must include facets in partmask to show facets");t.facets.forEach((function(t){if("enumeration"===t.facetType){var n=t.facetValues,a=n.every((function(e){return!e.isSelected})),r=n.every((function(e){return e.isSelected})),s=a||r;o[t.columnName]=s,t.columnName!==e.props.facet||a||(i=n.sort((function(e,t){return t.count-e.count})).findIndex((function(e){return e.isSelected})))}}))}var s={isAllFilterSelectedForFacet:o,hasMoreData:r,data:t,chartSelectionIndex:i,lastQueryRequest:n,isLoading:!1,isLoadingNewData:!1,asyncJobStatus:void 0};e.setState(s)})).catch((function(e){console.log("Failed to get data ",e)}))}},{key:"updateParentState",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this,t=this.state.isLoading,n=this.props.facetAliases,a=void 0===n?{}:n,r=o.Children.map(this.props.children,(function(t){return o.cloneElement(t,{facetAliases:a,isAllFilterSelectedForFacet:e.state.isAllFilterSelectedForFacet,data:e.state.data,token:e.props.token,executeInitialQueryRequest:e.executeInitialQueryRequest,executeQueryRequest:e.executeQueryRequest,getLastQueryRequest:e.getLastQueryRequest,getNextPageOfData:e.getNextPageOfData,isLoading:e.state.isLoading,isLoadingNewData:e.state.isLoadingNewData,facet:e.props.facet,rgbIndex:e.props.rgbIndex,unitDescription:e.props.unitDescription,updateParentState:e.updateParentState,isQueryWrapperChild:!0,hasMoreData:e.state.hasMoreData,lastFacetSelection:e.state.lastFacetSelection,chartSelectionIndex:e.state.chartSelectionIndex,getInitQueryRequest:e.getInitQueryRequest,asyncJobStatus:e.state.asyncJobStatus,showBarChart:e.props.showBarChart})})),i=t?"SRC-logo-cursor":"";return this.props.showMenu,o.createElement("div",{className:"".concat(i)},r)}}]),t}(o.Component);Wa.defaultProps={token:""},Wa.initialState={data:void 0,isLoading:!0,isLoadingNewData:!0,lastQueryRequest:{},hasMoreData:!0,lastFacetSelection:{columnName:"",facetValue:"",selector:""},chartSelectionIndex:0,isAllFilterSelectedForFacet:{},loadNowStarted:!1};var Ga=n(527);function za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Qa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?za(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):za(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Zt.b.add(Xt.a),Zt.b.add(Xt.b);var Ya="left click",Ka=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleClick=function(e){return function(t){n.props.updateParentState({chartSelectionIndex:e.index})}},n.handleArrowClick=function(e){return function(t){var a=n.props.chartSelectionIndex,r=void 0===a?0:a,o=n.extractPropsData(n.props.data),i=Object.keys(o).length;return e===Ya?r=(r-=1)<0?i-1:r:r+=1,o=o[r%=i],n.props.updateParentState({chartSelectionIndex:r}),r}},n.handleHover=n.handleHover.bind(Object(g.a)(n)),n.handleExit=n.handleExit.bind(Object(g.a)(n)),n.handleClick=n.handleClick.bind(Object(g.a)(n)),n.handleArrowClick=n.handleArrowClick.bind(Object(g.a)(n)),n.getTextForChartSelection=n.getTextForChartSelection.bind(Object(g.a)(n)),n.onMeasureResize=n.onMeasureResize.bind(Object(g.a)(n)),n.rgba2rgb=n.rgba2rgb.bind(Object(g.a)(n)),n.state={dimensions:{bounds:{height:1,width:1,top:0,left:0,right:0,bottom:0}},selectedFacets:{}},n.extractPropsData=n.extractPropsData.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleHover",value:function(e){e.currentTarget.style.boxShadow="25px 20px"}},{key:"handleExit",value:function(e){e.currentTarget.style.boxShadow=""}},{key:"getTextForChartSelection",value:function(e){var t=this.props.chartSelectionIndex,n=void 0===t?0:t,a=this.props,r=a.facetAliases,i=void 0===r?{}:r,s=a.facet,c=e[n]&&e[n].value,l=i[s]||s;return o.createElement("span",null,o.createElement("span",{className:"SRC-text-title SRC-filter-display"},l)," :",o.createElement("span",{className:"SRC-facet-view SRC-text-title"}," ","org.sagebionetworks.UNDEFINED_NULL_NOTSET"===c?"unannotated":c))}},{key:"getFileCount",value:function(e){var t=this.props.chartSelectionIndex,n=void 0===t?1:t;return e[n]&&e[n].count}},{key:"rgba2rgb",value:function(e,t){var n=t[3];return[Math.floor((1-n)*e[0]+n*t[0]+.5),Math.floor((1-n)*e[1]+n*t[1]+.5),Math.floor((1-n)*e[2]+n*t[2]+.5)]}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.isLoadingNewData,r=t.loadingScreen,i=t.rgbIndex,s=t.facet,c=void 0===s?"":s,l=t.unitDescription,u=t.isLoading,d=t.lastFacetSelection,m=t.isAllFilterSelectedForFacet,p=t.chartSelectionIndex,f=t.asyncJobStatus;if(a)return o.createElement("div",{className:"SRC-loadingContainer SRC-centerContentColumn"},!!r&&r,o.createElement("div",null,f&&f.progressMessage));var h=this.extractPropsData(n),g=0,b=this.state.dimensions.bounds.width;for(var v in h)h.hasOwnProperty(v)&&(g+=h[v].count);var E=Kt(i,h.length),S=E.colorPalette,y=E.textColors,C=S[0];return o.createElement(o.Fragment,null,o.createElement("div",{className:"SRC-bar-border SRC-bar-marginTop SRC-bar-border-top"},o.createElement(Ga.a,{bounds:!0,onResize:function(t){e.setState({dimensions:t})}},(function(t){var n=t.measureRef;return o.createElement("div",{className:"SRC-flex",ref:n},h.map((function(t,n){var a,r=y[n],i=S[n];a=!!m[c]||pn({isLoading:u,lastFacetSelection:d,columnName:c,curFacetSelection:t})?{fill:i}:{fill:"#C4C4C4"};var s=t.count/g*b,f={};p===n&&(f.filter="drop-shadow(5px 5px 5px rgba(0,0,0,0.5))");var h="".concat(c,": ").concat(t.value,"  - ").concat(t.count," ").concat(l),v=t.value.replace(/(\r\n|\n|\r)/gm,""),E=4.5*t.count.toString().length;return o.createElement(o.Fragment,{key:h},o.createElement("span",{"data-for":v,"data-tip":h},o.createElement("svg",{className:"SRC-hoverBox",height:95,width:s,style:f,onClick:e.handleClick(Qa({},t,{index:n}))},o.createElement("rect",{onMouseEnter:e.handleHover,onMouseLeave:e.handleExit,height:80,width:s,className:"SRC-chart-rect-style",style:a}),n<3&&s>E&&o.createElement("text",{textAnchor:"middle",className:"SRC-text-title",fontFamily:"bold sans-serif",fill:r,x:"50%",y:"50%"},t.count),p===n&&o.createElement("text",{fill:C,x:0,y:95,className:"SRC-text-shadow SRC-text-large"},"\u25cf"))),o.createElement(tn.a,{delayShow:1e3,id:v}))})))}))),o.createElement("div",{className:"SRC-bar-border SRC-bar-border-bottom"},o.createElement("p",{className:"SRC-noMargin SRC-padding-chart SRC-text-title"},o.createElement("strong",null,this.getTextForChartSelection(h))),o.createElement("p",{id:"fileCount",className:"SRC-noMargin SRC-padding-chart SRC-text-chart"},this.getFileCount(h)," ",l),this.props.link&&o.createElement("div",{className:"SRC-chart-link"},o.createElement("a",{href:"#/".concat(this.props.link)}," ",this.props.linkText," "))),o.createElement("div",{className:"SRC-chart SRC-chart-nav SRC-center-text"},o.createElement("button",{className:"SRC-chart-btn btn btn-default btn-sm SRC-floatRight",onClick:this.handleArrowClick("right click")},o.createElement($t.a,{style:{fontSize:"11px"},className:"SRC-primary-text-color",icon:"angle-right"})),o.createElement("button",{className:"SRC-chart-btn btn btn-default btn-sm SRC-floatRight",onClick:this.handleArrowClick(Ya)},o.createElement($t.a,{style:{fontSize:"11px"},className:"SRC-primary-text-color",icon:"angle-left"}))))}},{key:"extractPropsData",value:function(e){var t=[],n=this.props.facet;return e.facets.forEach((function(e){"enumeration"===e.facetType&&e.columnName===n&&e.facetValues.forEach((function(n){e.columnName&&t.push(Qa({columnName:e.columnName},n))}))})),t.sort((function(e,t){return t.count-e.count})),t}},{key:"onMeasureResize",value:function(e){this.setState({dimensions:e})}}]),t}(o.Component),Ja=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];var Za=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleLinkClick=function(e){return function(t){t.preventDefault(),window.open("https://www.synapse.org/#!Synapse:".concat(e),"_blank")}},n.handleLinkClick=n.handleLinkClick.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.schema,a=t[n.datasetName],r=t[n.summary],i=t[n.tumorType],s=t[n.diseaseFocus],c=t[n.id],l=t[n.fundingAgency],u=t[n.fileCount],d=function(e){if(!e)return"";var t=Math.floor(Math.log(e)/Math.log(1024));return e?(e/Math.pow(1024,t)).toFixed(2)+" "+Ja[t]:"0 Bytes"}(t[n.fileSize]),m=[["FUNDER",l],["SIZE",d],["FILES",u]];return o.createElement("div",{className:"SRC-portalCard SRC-typeDataset  "},o.createElement("div",{className:"SRC-cardThumbnail"},o.createElement(Bn,{type:B}),o.createElement("div",null,d)),o.createElement("div",{className:"SRC-cardContent SRC-dataset"},o.createElement("div",{className:"SRC-type"},"Dataset "),o.createElement("div",null,o.createElement("h3",null,o.createElement("a",{target:"_self",href:"https://www.synapse.org/#!Synapse:".concat(c)},a))),o.createElement("div",{className:"SRC-description-dataset"},o.createElement("p",{className:"SRC-description-text"},r),o.createElement("div",{className:"SRC-cardAction"},o.createElement("button",{className:"SRC-datasetButton",onClick:this.handleLinkClick(c),type:"button"},"Download Dataset"))),o.createElement("div",{className:"SRC-cardAnnotations"},o.createElement(En,{chips:[i,s]}))),o.createElement(vn,{isHeader:!1,secondaryLabelLimit:this.props.secondaryLabelLimit,values:m}))}}]),t}(o.Component),Xa=n(529),$a=n.n(Xa),er=n(530),tr=n.n(er),nr=n(531),ar=n.n(nr),rr={CTF:$a.a,"DHART SPORE":tr.a,NTAP:ar.a},or=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleLinkClick=function(e){return function(t){t.preventDefault(),window.open(e,"_blank")}},n.handleLinkClick=n.handleLinkClick.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.schema,a=t[n.organizationName],r=t[n.organizationPath],i=t[n.summary],s=t[n.website],c=t[n.abbreviation],l=rr[c],u="".concat(window.location.origin,"/#").concat(r),d=s.replace("https://","");"/"===(d=d.replace("http://","")).charAt(d.length-1)&&(d=d.substring(0,d.length-1));var m,p=window.location.hash.substring(1)===r,f={};return p?f.paddingBottom="42px":m=o.createElement("div",{className:"SRC-marginAuto SRC-cardAction"},o.createElement("button",{onClick:this.handleLinkClick(u),type:"button"},"View Funded Research")),o.createElement("div",{className:"SRC-portalCard SRC-typeFunder ",style:f},o.createElement("div",{className:"SRC-cardContent"},o.createElement("div",{className:"SRC-type"},"Organization"),o.createElement("div",{className:"SRC-cardThumbnail"},o.createElement("img",{alt:"funder logo",className:"SRC-logo",src:l})),o.createElement("div",null,o.createElement("h3",null,p&&a,!p&&o.createElement("a",{href:u},a))),o.createElement("div",{className:"SRC-website"},o.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:s},d)),o.createElement("div",{className:"SRC-description"},i)),m)}}]),t}(o.Component),ir=function(e){function t(e){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).call(this,e))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.schema,a=t[n.citation],r=t[n.tumorType],i=t[n.diseaseFocus],s=t[n.doi],c=[["DOI",s],["FUNDER",t[n.fundingAgency]],["STUDY",t[n.projectName]]];return o.createElement("div",{className:"SRC-portalCard SRC-typePublication  "},o.createElement("div",{className:"SRC-cardThumbnail"},o.createElement(Bn,{type:G})),o.createElement("div",{className:"SRC-cardContent"},o.createElement("div",{className:"SRC-type"},"Publication"),o.createElement("div",null,o.createElement("h3",null,o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://dx.doi.org/".concat(s)},a))),o.createElement("div",{className:"SRC-cardAnnotations"},o.createElement(En,{chips:[r,i]}))),o.createElement(vn,{isHeader:!1,secondaryLabelLimit:this.props.secondaryLabelLimit,values:c}))}}]),t}(o.Component),sr=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={hasCreatedIndex:!1,showMore:!1},n.handleClick=n.handleClick.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleClick",value:function(e){this.setState({showMore:!this.state.showMore})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.schema,a=t[n.projectName],r=t[n.projectLeads]&&t[n.projectLeads].split(";").join(" / "),i=t[n.summary],s=t[n.diseaseFocus],c=t[n.tumorType],l=t[n.projectStatus],u=t[n.fundingAgency],d=t[n.dataStatus],m=t[n.id],p="https://www.synapse.org/#!Synapse:".concat(m),f=[["STATUS",l],["FUNDER",u],["DATA",d]],h=[c,s];return o.createElement("div",{className:"SRC-portalCard SRC-typeStudy  "},o.createElement("div",{className:"SRC-cardThumbnail"},o.createElement(Bn,{type:"Active"===l?q:H}),o.createElement("div",null,l)),o.createElement("div",{className:"SRC-cardContent"},o.createElement("div",{className:"SRC-type"},"Study"),o.createElement("div",null," ",o.createElement("h3",null," ",o.createElement("a",{target:"_self",href:p},a)," ")," "),o.createElement("div",{className:"SRC-author"},r),o.createElement("span",{className:"SRC-font-size-base"},o.createElement(Wn,{summary:i})),o.createElement("div",{className:"SRC-cardAnnotations"},o.createElement(En,{chips:h}))),o.createElement(vn,{isHeader:!1,secondaryLabelLimit:this.props.secondaryLabelLimit,values:f}))}}]),t}(o.Component),cr=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleLinkClick=function(e){return function(t){t.preventDefault(),window.open(e,"_blank")}},n.handleLinkClick=n.handleLinkClick.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.schema,a=t[n.softwareName],r=t[n.summary],i=t[n.softwareLink];return o.createElement("div",{className:"SRC-portalCard SRC-typeTool  "},o.createElement("div",{className:"SRC-cardThumbnail"},o.createElement(Bn,{type:z})),o.createElement("div",{className:"SRC-cardContent"},o.createElement("div",{className:"SRC-type"},"Tool"),o.createElement("div",null,o.createElement("h3",null,o.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer"},a))),o.createElement("div",{className:"SRC-description"},r)),o.createElement("div",{className:"SRC-cardAction"},o.createElement("button",{onClick:this.handleLinkClick(i),type:"button"},"Open Tool")))}}]),t}(o.Component),lr=n(532),ur=n.n(lr),dr=n(533),mr=n.n(dr),pr=n(534),fr=n.n(pr),hr=n(535),gr=n.n(hr),br=n(536),vr=n.n(br),Er=n(537),Sr=n.n(Er),yr=n(538),Cr=n.n(yr),wr=n(539),Rr=n.n(wr),Or=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).getIcon=n.getIcon.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"getIcon",value:function(e,t){switch(e){case"AMP-AD":return t?o.createElement("img",{alt:"amp-ad icon",src:ur.a}):o.createElement("img",{alt:"amp-ad icon",src:mr.a});case"M2OVE-AD":return t?o.createElement("img",{alt:"M2OVE icon",src:fr.a}):o.createElement("img",{alt:"M2OVE icon",src:gr.a});case"MODEL-AD":return t?o.createElement("img",{alt:"Model icon",src:vr.a}):o.createElement("img",{alt:"Model icon",src:Sr.a});case"Resilience-AD":return t?o.createElement("img",{alt:"Resillience icon",src:Cr.a}):o.createElement("img",{alt:"Resillience icon",src:Rr.a});default:return!1}}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.schema,a=t[n["Short Description"]],r=t[n["Full Name"]],i=t[n.Program],s=t[n.Path],c="".concat(window.location.origin,"/#").concat(s),l=window.location.hash.substring(1)===s;return o.createElement("div",{style:{paddingBottom:"32px"},className:"SRC-portalCard SRC-typeStudy  "},o.createElement("div",{className:"SRC-cardThumbnail"},this.getIcon(i,l)),o.createElement("div",{className:"SRC-cardContent"},o.createElement("div",{className:"SRC-type"},"Program"),o.createElement("div",null,o.createElement("h3",null,!l&&o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:c}," ",r," "),l&&r)),o.createElement("span",{className:"SRC-font-size-base"},a)))}}]),t}(o.Component);function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xr=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={userProfileMap:{}},n.update=n.update.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.list;this.update(e)}},{key:"difference",value:function(e,t){for(var n=new Set(e),a=0,r=Array.from(t);a<r.length;a++){var o=r[a];n.delete(o)}return n}},{key:"componentDidUpdate",value:function(e){var t=new Set(e.list),n=new Set(this.props.list.filter((function(e){return e})));if(this.difference(n,t).size>0){var a=new Set(Object.keys(this.state.userProfileMap)),r=Array.from(this.difference(n,a));r.length>0&&this.update(r)}}},{key:"update",value:function(e){var t=this;pa(e.filter((function(e){return e}))).then((function(e){var n={};e.list.forEach((function(e){var t=e.ownerId;n[t]=e})),t.setState({userProfileMap:Dr({},t.state.userProfileMap,{},n)})})).catch((function(e){console.log("Error on batch call =",e)}))}},{key:"manuallyExtractData",value:function(e){var t=e.queryResult.queryResults.headers.findIndex((function(e){return"firstName"===e.name})),n=e.queryResult.queryResults.headers.findIndex((function(e){return"lastName"===e.name})),a=e.queryResult.queryResults.headers.findIndex((function(e){return"institution"===e.name})),r=e.queryResult.queryResults.headers.findIndex((function(e){return"USERID"===e.columnType}));return e.queryResult.queryResults.rows.filter((function(e){return!e.values[r]})).map((function(e){var r=e.values;return{firstName:r[t],lastName:r[n],company:r[a],ownerId:"",userName:r[t][0]}}))}},{key:"render",value:function(){var e=this.props,t=e.size,n=void 0===t?ee:t,a=e.data,r=e.list,i=this.state.userProfileMap,s=void 0===i?{}:i,c=a&&this.manuallyExtractData(a),l=0;return o.createElement("div",{className:"SRC-card-grid-row SRC-adjust-for-bootstrap-margin"},r.map((function(e){var t=s[e];if(t)return o.createElement("div",{key:JSON.stringify(t),className:"SRC-grid-item SRC-narrow-grid-item"},o.createElement(wa,{size:n,preSignedURL:t.clientPreSignedURL,userProfile:t}));var a=c&&c[l];return!!a&&(l+=1,o.createElement("div",{key:JSON.stringify(a),className:"SRC-grid-item SRC-narrow-grid-item"},o.createElement(wa,{disableLink:!0,hideEmail:!0,size:n,userProfile:a})))})))}}]),t}(o.Component);function Nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Ir=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).renderCard=function(e,t){switch(t){case _:return o.createElement(sr,e);case B:return o.createElement(Za,e);case W:return o.createElement(or,e);case G:return o.createElement(ir,e);case z:return o.createElement(cr,e);case V:return o.createElement(Or,e);case Q:return o.createElement(Kn,e);default:return o.createElement("div",null)}},n.handleViewMore=n.handleViewMore.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleViewMore",value:function(){var e=this.props.getLastQueryRequest(),t=e.query.offset;t+=25,e.query.offset=t,this.props.getNextPageOfData(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.limit,r=void 0===a?1/0:a,i=t.isHeader,s=void 0!==i&&i,c=t.facet,l=t.unitDescription,u=t.type,d=t.isLoading,m=t.loadingScreen,p=t.secondaryLabelLimit,f=void 0===p?3:p,g=t.showBarChart,b=void 0===g||g,v=t.title,E=Object(le.a)(t,["data","limit","isHeader","facet","unitDescription","type","isLoading","loadingScreen","secondaryLabelLimit","showBarChart","title"]);if(!n)return o.createElement("div",null,d&&m);if(n&&0===n.queryResult.queryResults.rows.length)return o.createElement(o.Fragment,null);var S={};n.queryResult.queryResults.headers.forEach((function(e,t){S[e.name]=t}));var y,C=r>=25&&n.queryResult.queryResults.rows.length>=25,w=(C=C&&this.props.hasMoreData)&&o.createElement("div",null,o.createElement("button",{onClick:this.handleViewMore,className:"pull-right SRC-standard-button-shape SRC-light-button"},"View More"));if(u===ee){var R=n.queryResult.queryResults.headers.findIndex((function(e){return"USERID"===e.columnType}));if(-1===R)throw Error("Type MEDIUM_USER_CARD specified but no columnType USERID found");var O=n.queryResult.queryResults.rows.map((function(e){return e.values[R]}));y=o.createElement(xr,{data:n,list:O,size:ee})}else y=n.queryResult.queryResults.rows.map((function(t,n){if(n<r){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nr(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:JSON.stringify(t.values),type:u,schema:S,isHeader:s,secondaryLabelLimit:f,data:t.values},E);return e.renderCard(a,u)}return!1}));return o.createElement("div",null,v&&o.createElement("h2",{className:"SRC-card-overview-title"},v),!v&&l&&b&&o.createElement(ma,{data:n,facet:c,isLoading:d,unitDescription:l,frontText:"Displaying"}),y,w)}}]),t}(o.Component);function Tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tr(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Zt.b.add(Xt.e),Zt.b.add(Xt.f),Zt.b.add(Xt.A);var Fr=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).toggleDropdown=function(e){return function(t){n.setState({isSearchableDropdownOpen:e})}},n.setDropdownIndex=function(e){return function(t){n.setState({dropdownIndex:e,isSearchableDropdownOpen:!1})}},n.highlightText=function(){var e=n.state,t=e.submittedSearchText,a=e.dropdownIndex,r=n.props,o=r.searchable,i=r.rgbIndex,s=r.facetAliases,c=void 0===s?{}:s,l=r.isQueryWrapperMenuChild,u=void 0===l||l,d=Jt(i,1).colorPalette[0],m=o[a];if(document.querySelectorAll(".highlight").forEach((function(e){e.outerHTML=e.innerText})),t){var p=c[m.columnName]||m.columnName,f=(u?".".concat(Ar," "):"")+'[data-search-handle="'.concat(p,'"]');document.querySelectorAll(f).forEach((function(e){if(null!==e.innerHTML){var n=new RegExp(t,"gi");e.innerText.match(n)&&(e.innerHTML=e.innerHTML.replace(n,(function(e){return'<span style="background: '.concat(d,'; color: white;" class="highlight">').concat(e,"</span>")})))}}))}},n.search=function(e){e.preventDefault();var a=n.state,r=a.searchText,o=a.dropdownIndex,i=n.props.searchable[o],s=n.props.getInitQueryRequest(),c=s.query.sql,l=Object(h.a)({},i.columnName,t.addEscapeCharacters(r)),u=$n(l,c);s.query.sql=u,n.setState({submittedSearchText:r}),n.props.executeQueryRequest(s)},n.handleChange=function(e){n.setState({searchText:e.currentTarget.value})},n.state={dropdownIndex:0,isSearchableDropdownOpen:!1,searchText:"",submittedSearchText:""},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){!1===this.props.isLoading&&!0===e.isLoading&&setTimeout(this.highlightText,100)}},{key:"render",value:function(){var e=this,t=this.props,n=t.searchable,a=t.data,r=t.isLoading,i=t.facet,s=t.unitDescription,c=void 0===s?"":s,l=t.facetAliases,u=void 0===l?{}:l,d=this.state,m=d.isSearchableDropdownOpen,p=d.dropdownIndex,f=d.searchText,h=d.submittedSearchText,g=n[p],b={background:"#FFFFFF",border:"1px solid #DCDCDC",margin:"0px 10px",height:"51px",display:"inline-flex",alignItems:"center"},v={paddingLeft:"10px"},E=u[g.columnName]||g.columnName,S=c;return""!==h&&(S="".concat(c,' containing "').concat(h,'" in ').concat(E)),o.createElement("div",null,o.createElement("div",{style:{background:"#F9F9F9",height:"80px",display:"flex",marginTop:10,alignItems:"center",padding:"0px 10px"}},m&&o.createElement("button",{onClick:this.toggleDropdown(!1),className:"SRC-menu-wall"}),o.createElement("div",{className:"SRC-centerContent SRC-fullWidth"},o.createElement("span",{style:{display:"inline-block",whiteSpace:"nowrap"}}," Search in "),o.createElement("div",{style:jr({},b,{flex:1,paddingLeft:10})},o.createElement("div",{id:"search-dropdown",className:"SRC-inherit-height SRC-fullWidth"},o.createElement("div",{className:"SRC-centerContent SRC-inherit-height"},o.createElement("button",{style:{justifyContent:"space-between"},className:"SRC-inlineFlex SRC-fullWidth",onClick:this.toggleDropdown(!m)},E,o.createElement($t.a,{style:{fontSize:"16px",marginRight:8},icon:m?"caret-up":"caret-down"}))),o.createElement("div",{className:"dropdown "+(m?"open":"")},o.createElement("ul",{"aria-labelledby":"search-dropdown",style:{width:"inherit",left:-10,paddingBottom:0,paddingTop:0},className:"SRC-search-dropdown dropdown-menu SRC-forceLeftDropdown dropdown-menu-left"},n.map((function(t,n){var a=u[t.columnName]||t.columnName;return o.createElement("li",{style:v,onClick:e.setDropdownIndex(n),key:a,className:"SRC-hand-cursor SRC-primary-background-color-hover"},a)})))))),o.createElement("form",{style:jr({},b,{flex:3,alignItems:"center"}),onSubmit:this.search},o.createElement("input",{placeholder:'e.g. "'.concat(g.hintText,'"'),style:{border:1,margin:1,paddingLeft:10,height:49},onChange:this.handleChange,value:f,type:"text",className:"SRC-fullWidth"}),o.createElement($t.a,{size:"sm",style:{color:"#C4C4C4",position:"absolute",right:50,fontSize:16},icon:"search"})))),o.createElement(ma,{style:{margin:"20px 0px"},isLoading:r,data:a,facet:i,frontText:"Displaying",unitDescription:S}))}}]),t}(o.Component);Fr.addEscapeCharacters=function(e){var t=e;return t=(t=(t=t.split("'").join("''")).split("%").join("%")).split("\\").join("\\\\")};var Lr=Fr;function Pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}Zt.b.add(Xt.z),Zt.b.add(Xt.A);var Ar="SRC-search-component",Mr=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleHoverLogic=function(e){return function(t){t.currentTarget.classList.contains("SRC-hoverWhiteText")||t.currentTarget.classList.add("SRC-hoverWhiteText"),e.isSelected||"DIV"!==t.currentTarget.tagName||(t.currentTarget.style.backgroundColor=e.originalColor)}},n.switchFacet=function(e,t){return function(a){var r=n.state,o=r.activeMenuIndices,i=r.accordionGroupIndex===t&&o[t]===e;o[t]=e,i||n.setState({activeMenuIndices:o,accordionGroupIndex:t})}},n.toggleGroupAccordionIndex=function(e){return function(t){n.state.accordionGroupIndex!==e&&n.setState({accordionGroupIndex:e})}};var a=n.props,r=a.searchParams,o=a.accordionConfig,i=[],s=r&&Number(r.menuIndex)||0;return i=o?new Array(o.length).fill(0):[s],n.state={activeMenuIndices:i,accordionGroupIndex:0},n.handleHoverLogic=n.handleHoverLogic.bind(Object(g.a)(n)),n.switchFacet=n.switchFacet.bind(Object(g.a)(n)),n.getUnitDescription=n.getUnitDescription.bind(Object(g.a)(n)),n.getPartMask=n.getPartMask.bind(Object(g.a)(n)),n.getSelectedFacets=n.getSelectedFacets.bind(Object(g.a)(n)),n.getTableLoadingScreen=n.getTableLoadingScreen.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){var n=this.state.activeMenuIndices,a=this.props,r=a.rgbIndex,o=a.accordionConfig;r!==e.rgbIndex&&(n=o?new Array(o.length).fill(0):[0],this.setState({activeMenuIndices:n,accordionGroupIndex:0}))}},{key:"render",value:function(){var e=this.props,t=e.stackedBarChartConfiguration,n=e.name,a=e.menuConfig,r=e.token,i=e.accordionConfig,s=this.state.activeMenuIndices,c="";a&&(c=a[s[0]].sql);var l=Zn(c),u=this.renderMenuDropdown(),d=this.renderQueryChildren(),m=void 0!==t;return o.createElement(o.Fragment,null,n&&c&&!l&&o.createElement("h3",{id:"exploreCount",className:"SRC-boldText"},o.createElement(Ha,{token:r,name:n,sql:c})),(l||i)&&o.createElement("h3",{id:"exploreCount",className:"SRC-boldText"},n),o.createElement("div",{className:"break"},o.createElement("hr",null)),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-xs-12 col-sm-3 col-lg-2 SRC-menuLayout ".concat(m?"SRC-menuPadding":"SRC-menuPaddingLess")},u),o.createElement("div",{className:"col-xs-12 col-sm-9 col-lg-10"},d)))}},{key:"renderQueryChild",value:function(e,t,n){var a=this,r=this.props,i=r.token,s=r.rgbIndex,c=void 0===s?0:s,l=r.isConsistent,u=void 0!==l&&l,d=r.searchParams,m=r.accordionConfig,p=void 0===m?[]:m,f=r.facetAliases,g=void 0===f?{}:f,b=t.cardConfiguration,v=t.tableConfiguration,E=t.stackedBarChartConfiguration,S=t.unitDescription,y=void 0===S?"":S,C=t.searchConfiguration,w=this.state,R=w.activeMenuIndices,O=w.accordionGroupIndex,k="",D="";if(d){var x=d.facetValue;k=void 0===x?"":x,D=d.menuIndex}return e.map((function(t,r){var s=n===O&&R[O]===r,l=t.facet,d=t.sql,m=p[n]&&p[n].name,f=Zn(d),S=r===e.length-1&&void 0!==C,w=void 0!==E&&!S&&!f,x=l&&(g[l]||l),N=S?Ar:"";s||(N="SRC-hidden");var I=a.getUnitDescription(y,x,S,p.length>0,m),T=a.getSelectedFacets(Number(D)===r,l,k),j=a.getPartMask(l,f),F=a.getTableLoadingScreen(f,E,v);return o.createElement("span",{key:l,className:N},o.createElement(Wa,{showBarChart:w,loadNow:s,showMenu:!0,initQueryRequest:{partMask:j,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:d,selectedFacets:T,isConsistent:u,limit:25,offset:0}},unitDescription:I,facet:l,token:i,rgbIndex:c,facetAliases:g},w?o.createElement(Ka,E):o.createElement(o.Fragment,null),S?o.createElement(o.Fragment,null):o.createElement(qa,null),S?o.createElement(Lr,{searchable:C.searchable}):o.createElement(o.Fragment,null),v?o.createElement(Ma,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pr(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},v,{loadingScreen:F})):o.createElement(o.Fragment,null),b?o.createElement(Ir,b):o.createElement(o.Fragment,null)))}))}},{key:"getUnitDescription",value:function(e,t,n,a,r){return a&&!n?"".concat(r," Tools by ").concat(t):a&&n?"".concat(r," Tools"):e}},{key:"getPartMask",value:function(e,t){var n=a.BUNDLE_MASK_QUERY_SELECT_COLUMNS|a.BUNDLE_MASK_QUERY_RESULTS;return n|=e?a.BUNDLE_MASK_QUERY_FACETS:a.BUNDLE_MASK_QUERY_COUNT}},{key:"getSelectedFacets",value:function(e,t,n){return e&&t&&n?[{concreteType:"org.sagebionetworks.repo.model.table.FacetColumnValuesRequest",facetValues:[n],columnName:t}]:[]}},{key:"getTableLoadingScreen",value:function(e,t,n){return e&&t&&n?t.loadingScreen:o.createElement(o.Fragment,null)}},{key:"renderQueryChildren",value:function(){var e=this,t=this.props,n=t.accordionConfig,a=t.menuConfig,r=this.state.accordionGroupIndex;return n?n.map((function(t,n){return o.createElement("div",{key:JSON.stringify(t),className:r===n?"":"SRC-hidden"},e.renderQueryChild(t.menuConfig,t,n))})):this.renderQueryChild(a,this.props,0)}},{key:"renderMenuDropdown",value:function(){var e=this,t=this.props,n=t.accordionConfig,a=t.menuConfig,r=t.searchConfiguration,i=this.state.accordionGroupIndex,s=Kt(this.props.rgbIndex,5).colorPalette;return n?n.map((function(t,n){var a=i===n,r=s[0],c={background:a?r:"#F5F5F5",color:a?"white":""},l=a?"SRC-whiteText SRC-pointed-triangle-down":" SRC-hand-cursor ";a&&(c.borderTopColor=r);var u={isSelected:a,originalColor:r},d={isSelected:a,originalColor:"#F5F5F5"};return o.createElement("div",{key:JSON.stringify(t),className:a?"SRC-IS-ACTIVE":""},o.createElement("div",{style:c,role:a?"":"button",onMouseEnter:e.handleHoverLogic(u),onMouseLeave:e.handleHoverLogic(d),className:"".concat("SRC-accordion-key"," SRC-gap SRC-menu-button-base SRC-background-unset ").concat(l),onClick:a?void 0:e.toggleGroupAccordionIndex(n)},t.name,o.createElement("span",{style:{marginLeft:5}},!a&&o.createElement($t.a,{style:{fontSize:"0.55em"},color:r,icon:"plus"}))),o.createElement(zt.TransitionGroup,{component:null},a&&o.createElement(zt.CSSTransition,{appear:!0,key:JSON.stringify(t),classNames:"SRC-accordion-menu",timeout:{enter:1e3,exit:500}},o.createElement("div",{className:"SRC-accordion-menu"},e.renderFacetMenu(t.menuConfig,n,t.searchConfiguration)))))})):this.renderFacetMenu(a,0,r)}},{key:"renderFacetMenu",value:function(e,t,n){var a=this,r=this.props,i=r.rgbIndex,s=r.accordionConfig,c=r.facetAliases,l=void 0===c?{}:c,u=this.state,d=u.activeMenuIndices,m=u.accordionGroupIndex,p=Kt(i,5).colorPalette,f=p[0],h="#F5F5F5";return s&&(f=p[2],h=p[4]),e.map((function(r,i){var s={margin:"auto 0",opacity:.4},c=r.facet,u=d[m]===i&&t===m,p={},g=i===e.length-1&&n,b="";u?(p.background=f,p.borderLeftColor=f,b="SRC-pointed-triangle-right SRC-whiteText",s.color="white"):(b="SRC-blackText",p.background=h);var v={isSelected:u,originalColor:f},E={isSelected:u,originalColor:h},S=c&&l[c]||c;return o.createElement("div",{onMouseEnter:a.handleHoverLogic(v),onMouseLeave:a.handleHoverLogic(E),key:r.facet,className:"SRC-hand-cursor SRC-background-unset ".concat(b," SRC-menu-button-base SRC-gap"),onClick:a.switchFacet(i,t),onKeyPress:a.switchFacet(i,t),role:"button",tabIndex:0,style:p},g?"Search":S,g&&o.createElement("span",null,o.createElement($t.a,{className:b,size:"sm",style:s,icon:"search"})))}))}}]),t}(o.Component),Ur=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).inputOpenFileRef=void 0,n.showOpenFileDlg=function(){n.inputOpenFileRef&&n.inputOpenFileRef.current&&n.inputOpenFileRef.current.click()},n.handleChange=function(e){e.target.files&&n.handleFilesChanged(e.target.files)},n.finishedProcessingOneFile=function(){var e=n.state.filesUploadedCount+1,t=e<n.state.totalFilesToUploadCount;n.setState({isUploading:t,filesUploadedCount:e,successfullyUploaded:!t})},n.handleUploadError=function(e){n.finishedProcessingOneFile(),n.setState({error:e})},n.handleFilesChanged=function(e){n.setState({error:void 0,isUploading:!0,filesUploadedCount:0,totalFilesToUploadCount:e.length,successfullyUploaded:!1}),Array.from(e).forEach((function(e){var t={parentId:n.props.parentContainerId,name:e.name,concreteType:"org.sagebionetworks.repo.model.FileEntity",dataFileHandleId:""},a={entityName:e.name,parentId:n.props.parentContainerId};Qe(a,n.props.token).then((function(a){Ke(n.props.token,a.id).then((function(a){"org.sagebionetworks.repo.model.FileEntity"===a.concreteType?n.updateEntityFile(a,e):n.updateEntityFile(t,e)}))})).catch((function(a){404===a.statusCode?n.updateEntityFile(t,e):n.handleUploadError(a)}))}))},n.updateEntityFile=function(e,t){mt(n.props.token,t.name,t).then((function(t){var a=""===e.dataFileHandleId;e.dataFileHandleId=t.fileHandleId,(a?_e:Ze)(e,n.props.token).then((function(){n.finishedProcessingOneFile()}))})).catch((function(e){n.handleUploadError(e)}))},n.state={token:"",isUploading:!1,filesUploadedCount:0,totalFilesToUploadCount:0,successfullyUploaded:!1},n.inputOpenFileRef=o.createRef(),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.createElement("div",null,o.createElement("input",{ref:this.inputOpenFileRef,type:"file",style:{display:"none"},onChange:this.handleChange,multiple:!0}),o.createElement("button",{type:"button",onClick:this.showOpenFileDlg,className:"SRC-uploadButton"},"Browse..."),this.state.isUploading&&o.createElement(o.Fragment,null,o.createElement("span",{style:{marginLeft:"10px"}},this.state.filesUploadedCount," / ",this.state.totalFilesToUploadCount," file(s)"),o.createElement("span",{style:{marginLeft:"2px"},className:"spinner"})),this.state.successfullyUploaded&&o.createElement("span",{style:{marginLeft:"10px"}},"Successfully uploaded ",this.state.totalFilesToUploadCount," file(s) to",o.createElement("a",{style:{marginLeft:"2px"},href:"https://www.synapse.org/#!Synapse:".concat(this.props.parentContainerId),rel:"noopener noreferrer",target:"_blank"},this.props.parentContainerId)),this.state.error&&o.createElement("p",null,"Upload error!"))}}]),t}(o.Component),_r=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).updateFileContent=function(e){if(n.props.token&&n.state.targetEntity&&n.state.fileContent){n.setState({isLoading:!0});var t=new Blob([n.state.fileContent],{type:"text/plain"});mt(n.props.token,n.state.targetEntity.name,t).then((function(e){n.state.targetEntity&&(n.state.targetEntity.dataFileHandleId=e.fileHandleId,Ze(n.state.targetEntity,n.props.token).then((function(e){var t=e;n.setState({targetEntity:t,isLoading:!1})})).catch((function(e){n.setState({error:e,isLoading:!1})})))})).catch((function(e){n.setState({error:e,isLoading:!1})}))}},n.handleContentChange=function(e){n.setState({fileContent:e.target.value})},n.state={token:"",isLoading:!1},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.token,a=t.targetEntityId;n&&(this.setState({isLoading:!0}),Ke(n,a).then((function(t){if("org.sagebionetworks.repo.model.FileEntity"===t.concreteType){var a=t;vt(n,a).then((function(t){e.setState({fileContent:t,targetEntity:a,isLoading:!1})}))}else e.setState({error:"invalid type",isLoading:!1})})).catch((function(t){e.setState({error:t,isLoading:!1})})))}},{key:"render",value:function(){return o.createElement("div",null,this.state.fileContent&&o.createElement(o.Fragment,null,o.createElement("div",null,o.createElement("textarea",{style:{width:"100%",height:"300px"},value:this.state.fileContent,onChange:this.handleContentChange})),o.createElement("button",{onClick:this.updateFileContent},"Update File Content...")),this.state.isLoading&&o.createElement("span",{style:{marginLeft:"2px"},className:"spinner"}),this.state.error&&o.createElement("p",null,"Download error!"))}}]),t}(o.Component),qr=n(228),Hr=n.n(qr),Br=n(229),Vr=n.n(Br);function Wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Gr=Vr()(Hr.a),zr=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).fetchPlotlyData=Object(ue.a)(se.a.mark((function e(){var t,a,o,i;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.token,o=t.request,i=t.endpoint,e.abrupt("return",r.getProjectStatistics(o,a,i).then((function(e){n.setState({isLoaded:!0,plotData:e})})).catch((function(e){console.log("Error on call to get statistics ",e)})));case 2:case"end":return e.stop()}}),e)}))),n.getTrace=function(e,t,n){var a={orientation:n,x:[],y:[],name:e,type:"bar"},r=!0,o=!1,i=void 0;try{for(var s,c=t[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value,u=new Date(l.rangeStart).toLocaleString("default",{month:"long"});a.x.push(u),a.y.push(l.filesCount)}}catch(d){o=!0,i=d}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return a},n.showPlot=function(){if(n.state.isLoaded&&n.state.plotData){var e=n.props,t=e.title,a=e.xtitle,r=e.ytitle,i=e.isHorizontal,s=e.xaxistype,c=e.showlegend,l=n.state.plotData,u={showlegend:c,title:t,barmode:"stack"};a&&(u.xaxis={title:a}),s&&(u.xaxis=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wr(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u.xaxis,{xaxistype:s.toLowerCase()})),r&&(u.yaxis={title:r});var d=i?"h":"v",m=[];return l.fileDownloads&&l.fileDownloads.months&&l.fileDownloads.months.length>0&&m.push(n.getTrace("File Downloads",l.fileDownloads.months,d)),l.fileUploads&&l.fileUploads.months&&l.fileUploads.months.length>0&&m.push(n.getTrace("File Uploads",l.fileUploads.months,d)),m.length>0?o.createElement(Gr,{layout:u,data:m}):o.createElement(o.Fragment,null)}},n.state={isLoaded:!1,plotData:{}},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fetchPlotlyData()}},{key:"render",value:function(){return this.state.isLoaded?this.showPlot():null}}]),t}(o.Component),Qr=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).entityFormRef=void 0,n.entityFormRef=o.createRef(),n.state={isLoading:!0,ownerId:"",showMarkdown:!0,token:"",version:0,showTabOne:!1,tabOne:{unitDescription:"datum",tableConfiguration:{title:"title",synapseId:"syn16787123"},menuConfig:[{title:"Data",facetDisplayValue:"Organism",facet:"dataStatus",sql:"SELECT projectStatus, dataStatus, tumorType, diseaseFocus FROM syn16787123"},{title:"Data",facetDisplayValue:"Study",facet:"projectStatus",sql:"SELECT createdBy FROM syn16787123"}],rgbIndex:2},tabTwo:{unitDescription:"datum",tableConfiguration:{title:"title",synapseId:"syn16858331"},menuConfig:[{facet:"assay",sql:"SELECT * FROM syn16858331"},{facet:"dataType",sql:"SELECT id, fundingAgency, assay, diagnosis, dataType FROM syn16858331"},{facet:"diagnosis",sql:"SELECT id, fundingAgency, assay, diagnosis, dataType FROM syn16858331"}],rgbIndex:5}},n.getVersion=n.getVersion.bind(Object(g.a)(n)),n.handleChange=n.handleChange.bind(Object(g.a)(n)),n.removeHandler=n.removeHandler.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"onSubmitEntityForm",value:function(){this.entityFormRef.current.submitForm()}},{key:"onEntityFormSubmitted",value:function(e){this.setState({userFormDataSynId:e})}},{key:"getVersion",value:function(){var e=this;r.getVersion().then((function(t){return e.setState({version:t.version})})).catch((function(e){console.error("Get version failed",e)}))}},{key:"handleChange",value:function(e){this.setState(e)}},{key:"removeHandler",value:function(){this.setState({showMarkdown:!this.state.showMarkdown})}},{key:"componentDidMount",value:function(){var e=this;r.detectSSOCode(),r.getSessionTokenFromCookie().then((function(t){return e.handleChange({token:t})})).catch((function(e){console.error(e)})),this.getVersion()}},{key:"render",value:function(){var e=this;return"",o.createElement("div",null,o.createElement("p",{className:"App-intro text-center"},"Synapse production version: ",this.state.version),this.state.token&&""!==this.state.token&&o.createElement("div",{className:"container"},o.createElement("h5",null,"Upload File(s) Demo"),o.createElement(Ur,{token:this.state.token,parentContainerId:"syn18987891"}),o.createElement("hr",null)),this.state.token&&""!==this.state.token&&o.createElement("div",{className:"container"},o.createElement("h5",null,"Download File Content Demo (syn12196718)"),o.createElement(_r,{token:this.state.token,targetEntityId:"syn12196718"}),o.createElement("hr",null)),this.state.token&&""!==this.state.token&&o.createElement("div",{className:"container"},o.createElement("h5",null,"Project Statistics Demo"),o.createElement(zr,{token:this.state.token,request:{concreteType:"org.sagebionetworks.repo.model.statistics.ProjectFilesStatisticsRequest",objectId:"syn5585645",fileDownloads:!0,fileUploads:!0}}),o.createElement("hr",null)),o.createElement("div",{className:"container"},o.createElement("button",{className:"btn btn-default",onClick:function(){e.setState({showTabOne:!e.state.showTabOne})}},"toggle config for query wrapper menu"),o.createElement(Mr,{isConsistent:!0,name:"Demo",token:r.IS_OUTSIDE_SYNAPSE_ORG?"":this.state.token,unitDescription:this.state.showTabOne?this.state.tabOne.unitDescription:this.state.tabTwo.unitDescription,tableConfiguration:this.state.showTabOne?this.state.tabOne.tableConfiguration:this.state.tabTwo.tableConfiguration,menuConfig:this.state.showTabOne?this.state.tabOne.menuConfig:this.state.tabTwo.menuConfig,rgbIndex:this.state.showTabOne?this.state.tabOne.rgbIndex:this.state.tabTwo.rgbIndex,stackedBarChartConfiguration:{loadingScreen:o.createElement("div",null)}})))}}]),t}(o.Component),Yr=function(e){function t(e){var n;Object(c.a)(this,t);var r="SELECT * FROM syn20337467 WHERE toolType = 'experimental' LIMIT 100",i="SELECT * FROM syn20337467 WHERE toolType = 'computational' LIMIT 100",s={title:"Title",type:"Generic Tool",subTitle:"softwareType",description:"summary",icon:"icon",secondaryLabels:["contributor","diagnosis","program"]};return(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={isLoading:!0,ownerId:"",showMarkdown:!0,activeTab:1,tabThree:{stackedBarChartConfiguration:{loadingScreen:o.createElement("div",null," Im loading as fast I can! ")},unitDescription:"datum",tableConfiguration:{title:"title",synapseId:"syn11346063"},searchConfiguration:{searchable:[{columnName:"study",hintText:"study name"}]},menuConfig:[{facet:"species",sql:"SELECT * FROM syn11346063 LIMIT 1000"},{facet:"study",sql:"SELECT * FROM syn11346063 limit 1000"},{sql:"SELECT * FROM syn11346063 limit 1000"}],rgbIndex:5},tabTwo:{name:"Demo",unitDescription:"persons",cardConfiguration:{genericCardSchema:s,type:a.MEDIUM_USER_CARD,loadingScreen:o.createElement("div",{style:{height:450}}," I'm loading as fast I can! ")},rgbIndex:1,facetAliases:{grant:"Grant"},accordionConfig:[{name:"Compuational",cardConfiguration:{genericCardSchema:s,type:a.GENERIC_CARD,loadingScreen:o.createElement("div",{style:{height:450}}," I'm loading as fast I can! ")},menuConfig:[{facet:"grant",sql:i},{facet:"diagnosis",sql:i},{facet:"modelType",sql:i}]},{name:"Experimental",cardConfiguration:{genericCardSchema:s,type:a.GENERIC_CARD,loadingScreen:o.createElement("div",{style:{height:450}}," I'm loading as fast I can! ")},menuConfig:[{facet:"program",sql:r},{facet:"reagentType",sql:r},{facet:"softwareType",sql:r}]}]},tabOne:{unitDescription:"datum",tableConfiguration:{title:"title",synapseId:"syn11346063"},searchConfiguration:{searchable:[{columnName:"study",hintText:"study name"}]},menuConfig:[{facet:"diagnosis",sql:"SELECT study, assay, count(distinct id) AS files, concat(organ) AS organs FROM syn17024112 WHERE species='Human' AND assay='rnaSeq' group by 1,2 order by 3 desc limit 1000"},{facet:"PORTALS-712",sql:"SELECT dataType, assay, fileFormat, COUNT(distinct id) AS Files FROM syn11346063 WHERE (study LIKE '%MODEL-AD_5XFAD%') GROUP BY 1, 2, 3 ORDER BY 4 DESC"},{facet:"PORTALS-803",sql:'SELECT diagnosis AS "Diagnosis", sex as "Sex", dataType as "Data Type", assay as "Assay", count(distinct(id)) as "Files", count(distinct(specimenID)) as "Specimens", count(distinct(individualID)) as "Individuals" FROM syn11346063 GROUP BY 1,2,3,4 ORDER BY 1 DESC'},{facet:"study",sql:"SELECT * FROM syn11346063 limit 1000"}],rgbIndex:5},token:"",version:0},n.handleChange=n.handleChange.bind(Object(g.a)(n)),n.removeHandler=n.removeHandler.bind(Object(g.a)(n)),n.rgba2rgb=n.rgba2rgb.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"rgba2rgb",value:function(e,t){var n=t[3];return[Math.floor((1-n)*e[0]+n*t[0]+.5),Math.floor((1-n)*e[1]+n*t[1]+.5),Math.floor((1-n)*e[2]+n*t[2]+.5)]}},{key:"handleChange",value:function(e){this.setState(e)}},{key:"removeHandler",value:function(){this.setState({showMarkdown:!this.state.showMarkdown})}},{key:"render",value:function(){var e=this,t=this.state.activeTab,n={};return n=0===t?this.state.tabOne:1===t?this.state.tabTwo:this.state.tabThree,o.createElement("div",{className:"container"},o.createElement("button",{className:"btn btn-default",onClick:function(){e.setState({activeTab:0})}},"With Group By"),o.createElement("button",{className:"btn btn-default",onClick:function(){e.setState({activeTab:1})}},"With Tools"),o.createElement("button",{className:"btn btn-default",onClick:function(){e.setState({activeTab:2})}},"Standard"),o.createElement("h2",null,"Demo of table"),o.createElement(Mr,Object.assign({token:"",isConsistent:!0},n)))}}]),t}(o.Component);function Kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kr(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zr=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).executeInitialQueryRequest=n.executeInitialQueryRequest.bind(Object(g.a)(n)),n.getLastQueryRequest=n.getLastQueryRequest.bind(Object(g.a)(n)),n.getNextPageOfData=n.getNextPageOfData.bind(Object(g.a)(n)),n.state=t.defaultState,n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.executeInitialQueryRequest()}},{key:"componentDidUpdate",value:function(e){""!==this.props.token&&""===e.token&&this.executeInitialQueryRequest(),e.sql!==this.props.sql&&this.executeInitialQueryRequest()}},{key:"getLastQueryRequest",value:function(){return dn(this.state.queryRequest)}},{key:"getNextPageOfData",value:function(){var e=Object(ue.a)(se.a.mark((function e(t){var n=this;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,mn(t,this.state.data,this.props.token).then((function(e){n.setState(Jr({},e,{isLoading:!1,queryRequest:dn(t)}))}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"executeInitialQueryRequest",value:function(){var e=this;this.setState({isLoading:!0});var t=this.props.sql;this.props.searchParams&&(t=$n(this.props.searchParams,this.props.sql,this.props.sqlOperator));var n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:a.BUNDLE_MASK_QUERY_COLUMN_MODELS|a.BUNDLE_MASK_QUERY_FACETS|a.BUNDLE_MASK_QUERY_RESULTS|a.BUNDLE_MASK_QUERY_COUNT,query:{sql:t,isConsistent:!1,limit:25,offset:0}};r.getQueryTableResults(n,this.props.token).then((function(t){var r=dn(n);r.partMask=a.BUNDLE_MASK_QUERY_COLUMN_MODELS|a.BUNDLE_MASK_QUERY_FACETS|a.BUNDLE_MASK_QUERY_RESULTS;var o={hasMoreData:t.queryResult.queryResults.rows.length===a.PAGE_SIZE,data:t,queryRequest:r,isLoading:!1,totalResultsNoFacet:t.queryCount};e.setState(o)})).catch((function(e){console.log("Failed to get data ",e)}))}},{key:"render",value:function(){var e=this.props,t=(e.sql,e.searchParams,e.token,Object(le.a)(e,["sql","searchParams","token"]));return o.createElement(Ir,Object.assign({},t,{data:this.state.data,getLastQueryRequest:this.getLastQueryRequest,getNextPageOfData:this.getNextPageOfData,hasMoreData:this.state.hasMoreData,isLoading:this.state.isLoading}))}}]),t}(o.Component);Zr.defaultProps={token:""},Zr.defaultState={data:void 0,isLoading:!0,queryRequest:{},totalResultsNoFacet:0,hasMoreData:!0};n(256);var Xr,$r=n(552),eo=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).renderBookmarks=n.renderBookmarks.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"renderBookmarks",value:function(){for(var e,t=String(this.props.footnotes),n=/Synapse widget&gt;<\/span>(.*)</g,a=[];e=n.exec(t);)a.push(e[1]);return a.map((function(e,t){var n=t<a.length-1;return o.createElement(o.Fragment,{key:t},o.createElement("button",{className:"SRC-markdown-bookmark",id:"bookmark".concat(t)},"[",t+1,"]"),o.createElement("span",{dangerouslySetInnerHTML:{__html:e}}),n&&o.createElement("br",null))}))}},{key:"render",value:function(){return o.createElement(o.Fragment,null,o.createElement("hr",null),this.renderBookmarks())}}]),t}(o.Component);!function(e){e.FileEntity="FileEntity",e.TableEntity="TableEntity",e.WikiAttachment="WikiAttachment",e.WikiMarkdown="WikiMarkdown",e.UserProfileAttachment="UserProfileAttachment",e.MessageAttachment="MessageAttachment",e.TeamAttachment="TeamAttachment",e.SubmissionAttachment="SubmissionAttachment",e.VerificationSubmission="VerificationSubmission",e.AccessRequirementAttachment="AccessRequirementAttachment",e.DataAccessRequestAttachment="DataAccessRequestAttachment",e.DataAccessSubmissionAttachment="DataAccessSubmissionAttachment"}(Xr||(Xr={}));var to=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).getEntity=n.getEntity.bind(Object(g.a)(n)),n.getSynapseFiles=n.getSynapseFiles.bind(Object(g.a)(n)),n.state={preSignedURL:""},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"getEntity",value:function(){var e=this,t=this.props,n=t.token,a=t.synapseId;a&&Ke(n,a).then((function(t){var n=[{associateObjectId:a,associateObjectType:Xr.FileEntity,fileHandleId:t.dataFileHandleId}];e.getSynapseFiles(n,t.dataFileHandleId)}))}},{key:"getSynapseFiles",value:function(e,t){var n=this;Ye({includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:e},this.props.token).then((function(e){var a=e.requestedFiles.filter((function(e){return e.fileHandleId===t}))[0].preSignedURL;n.setState({preSignedURL:a})})).catch((function(e){console.error("Error on getting image ",e)}))}},{key:"componentDidMount",value:function(){if(this.props.wikiId){var e=this.props,t=e.fileName,n=e.fileResults,a=(void 0===n?[]:n).filter((function(e){return e.fileName===t}))[0].id,r=[{associateObjectId:this.props.wikiId,associateObjectType:Xr.WikiAttachment,fileHandleId:a}];this.getSynapseFiles(r,a)}else this.getEntity()}},{key:"render",value:function(){var e=this.props.params,t=(void 0===e?{}:e).align,n=(void 0===t?"":t).toLowerCase(),a="";return"left"===n&&(a="floatLeft"),"right"===n&&(a="floatright"),"center"===n&&(a="align-center"),this.state.preSignedURL?o.createElement(o.Fragment,null,o.createElement("img",{alt:"synapse",className:"img-fluid  "+a,src:this.state.preSignedURL,style:{}})):null}}]),t}(o.Component);function no(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var ao,ro,oo,io=Vr()(Hr.a),so=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={isLoaded:!1,queryData:{}},n.fetchPlotlyData=n.fetchPlotlyData.bind(Object(g.a)(n)),n.showPlot=n.showPlot.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fetchPlotlyData()}},{key:"fetchPlotlyData",value:function(){var e=this,t=this.props.token,n=this.props.widgetparamsMapped.query,r={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:a.BUNDLE_MASK_QUERY_RESULTS,query:{sql:n}};Pe(r,t).then((function(t){e.setState({isLoaded:!0,queryData:t})})).catch((function(e){console.log("Error on full table query ",e)}))}},{key:"showPlot",value:function(){if(this.state.isLoaded){var e=this.props.widgetparamsMapped,t=e.title,n=e.xtitle,a=e.ytitle,r=e.type,i=e.xaxistype,s=e.showlegend,c=this.state,l=this.props.widgetparamsMapped.horizontal.toLowerCase(),u={showlegend:s,title:t};n&&(u.xaxis={title:n}),i&&(u.xaxis=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?no(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):no(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u.xaxis,{xaxistype:i.toLowerCase()})),a&&(u.yaxis={title:a});for(var d=[],m=l?"v":"h",p=c.queryData.queryResult.queryResults.headers,f=0;f<p.length-1;f+=1)d[f]={orientation:m,name:p[f+1].name,type:r.toLowerCase(),x:[],y:[]};var g=!0,b=!1,v=void 0;try{for(var E,S=c.queryData.queryResult.queryResults.rows[Symbol.iterator]();!(g=(E=S.next()).done);g=!0)for(var y=E.value,C=1;C<y.values.length;C+=1){var w=y.values;d[C-1].x.push(w[0]),d[C-1].y.push(w[C])}}catch(R){b=!0,v=R}finally{try{g||null==S.return||S.return()}finally{if(b)throw v}}return o.createElement(io,{layout:u,data:d})}}},{key:"render",value:function(){return this.state.isLoaded?this.showPlot():null}}]),t}(o.Component),co={1:"toc-indent1",2:"toc-indent2",3:"toc-indent3",4:"toc-indent4",5:"toc-indent5",6:"toc-indent6"},lo=markdownit({html:!0}),uo=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).markupRef=void 0,markdownitSynapse.init_markdown_it(lo,markdownitSub,markdownitSup,markdownitCentertext,markdownitSynapseHeading,markdownitSynapseTable,markdownitStrikethroughAlt,markdownitContainer,markdownitEmphasisAlt,markdownitInlineComments,markdownitBr);lo.use(markdownitSynapse,"").use(markdownitMath,"");var a={};return n.props.markdown&&(a.markdown=n.props.markdown),n.state={md:lo,errorMessage:"",fileHandles:void 0,data:a},n.markupRef=o.createRef(),n.handleLinkClicks=n.handleLinkClicks.bind(Object(g.a)(n)),n.processWidgets=n.processWidgets.bind(Object(g.a)(n)),n.processWidgetOrDomElement=n.processWidgetOrDomElement.bind(Object(g.a)(n)),n.processMath=n.processMath.bind(Object(g.a)(n)),n.getWikiAttachments=n.getWikiAttachments.bind(Object(g.a)(n)),n.getWikiPageMarkdown=n.getWikiPageMarkdown.bind(Object(g.a)(n)),n.renderWidget=n.renderWidget.bind(Object(g.a)(n)),n.renderSynapseButton=n.renderSynapseButton.bind(Object(g.a)(n)),n.renderSynapseImage=n.renderSynapseImage.bind(Object(g.a)(n)),n.renderSynapsePlot=n.renderSynapsePlot.bind(Object(g.a)(n)),n.renderSynapseTOC=n.renderSynapseTOC.bind(Object(g.a)(n)),n.getErrorView=n.getErrorView.bind(Object(g.a)(n)),n.createHTML=n.createHTML.bind(Object(g.a)(n)),n.addBookmarks=n.addBookmarks.bind(Object(g.a)(n)),n.addIdsToReferenceWidgets=n.addIdsToReferenceWidgets.bind(Object(g.a)(n)),n.addIdsToTocWidgets=n.addIdsToTocWidgets.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.markupRef.current.removeEventListener("click",this.handleLinkClicks)}},{key:"handleLinkClicks",value:function(e){var t=e.target;if("A"===t.tagName||"BUTTON"===t.tagName){var n=e.target;if("ref"===n.id.substring(0,3)){e.preventDefault();var a=Number(e.currentTarget.id.substring(3)),r=this.markupRef.current.querySelector("#bookmark".concat(a));try{r.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(s){console.log("error on scroll",s)}}else if(null!==e.currentTarget.id&&n.getAttribute("data-anchor")){e.preventDefault();var o=n.getAttribute("data-anchor"),i=this.markupRef.current.querySelector("#".concat(o));try{i.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(s){console.log("error on scroll",s)}}}}},{key:"createHTML",value:function(e){if(!e)return{__html:""};var t=this.state.md.render(e);return{__html:sanitizeHtml(t,{allowedAttributes:{a:["href","target"],button:["class"],div:["class","style"],h1:["toc"],h2:["toc"],h3:["toc"],h4:["toc"],h5:["toc"],h6:["toc"],li:["class"],ol:["class"],span:["*"],table:["class"],th:["class"],thead:["class"],ul:["class"]},allowedTags:["span","code","h1","h2","h3","h4","h5","p","b","i","em","strong","a","id","table","tr","td","tbody","th","thead","button","div","image","ol","ul","li","svg","g","br","hr","summary","details"]})}}},{key:"processMath",value:function(){this.markupRef.current&&this.markupRef.current.querySelectorAll('[id^="mathjax-"]').forEach((function(e){katex.render(e.textContent,e,{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!1,left:"\\(",right:"\\)"},{display:!0,left:"\\[",right:"\\]"}],throwOnError:!1})}))}},{key:"addBookmarks",value:function(){markdownitSynapse.resetFootnotes(),this.createHTML(this.state.data.markdown);var e=this.createHTML(markdownitSynapse.footnotes()).__html;if(e.length>0)return o.createElement(eo,{footnotes:e})}},{key:"getWikiPageMarkdown",value:function(){var e=Object(ue.a)(se.a.mark((function e(){var t,n,a,o,i,s,c;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.ownerId,a=t.wikiId,o=void 0===a?"":a,i=t.token,e.prev=1,e.next=4,r.getEntityWiki(i,n,o);case 4:return s=e.sent,e.prev=5,e.next=8,this.getWikiAttachments(o||s.id);case 8:c=e.sent,this.setState({data:s,fileHandles:c}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("fileHandlesErr = ",e.t0);case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(1),console.error("Error on wiki markdown load\n",e.t1);case 20:case"end":return e.stop()}}),e,this,[[1,17],[5,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"getWikiAttachments",value:function(){var e=Object(ue.a)(se.a.mark((function e(t){var n,a,o,i=this;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,a=n.token,o=n.ownerId){e.next=4;break}return console.error("Cannot get wiki attachments without ownerId on Markdown Component"),e.abrupt("return",void 0);case 4:return e.next=6,r.getWikiAttachmentsFromEntity(a,o,t).then((function(e){return e})).catch((function(e){i.setState({errorMessage:e.reason}),console.error("Error on wiki attachment load ",e)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getErrorView",value:function(){if(this.state.errorMessage&&this.props.errorMessageView){var e=this.props.errorMessageView;return o.createElement(e,null,this.state.errorMessage)}}},{key:"addIdsToReferenceWidgets",value:function(e){var t=1;return e.replace(/<span id="wikiReference.*?<span data-widgetparams.*?span>/g,(function(){var e=t;return t+=1,'<a href="" id="ref'.concat(e,'">[').concat(e,"]</a>")}))}},{key:"addIdsToTocWidgets",value:function(e){var t=1;return e.replace(/<h[1-6] toc="true">.*<\/h[1-6]>/gm,(function(e){var n=t;return t+=1,"".concat(e.substring(0,3),' id="').concat("SRC-header-").concat(n,'"').concat(e.substring(3))}))}},{key:"processWidgets",value:function(){var e=this.createHTML(this.state.data.markdown).__html;e=this.addIdsToReferenceWidgets(e);var t=(e=this.addIdsToTocWidgets(e)).split(/(<span data-widgetparams.*?span>)/);if(e.length>0)return this.processWidgetOrDomElement(t,e)}},{key:"decodeXml",value:function(e){var t={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'};return e.replace(/(&quot;|&lt;|&gt;|&amp;)/g,(function(e,n){return t[n]}))}},{key:"processWidgetMappings",value:function(e,t){var n=e.match(/data-widgetparams=("(.*?)")/),a=this.decodeXml(n[2]),r=a.indexOf("?");if(-1===r)return this.renderWidget(a,{},t);var o=a.substring(0,r),i={};return a.substring(r+1).split("&").forEach((function(e){var t=e.split("="),n=Object($r.a)(t,2),a=n[0],r=n[1];r=decodeURIComponent(r),i[a]=r})),this.renderWidget(o,i,t)}},{key:"processWidgetOrDomElement",value:function(e,t){var n=[],a=0,r=!0,i=!1,s=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var u=c.value;if(-1!==u.indexOf("<span data-widgetparams"))n.push(this.processWidgetMappings(u,t));else{var d=a.toString()+u,m=o.createElement("span",{key:d,dangerouslySetInnerHTML:{__html:u}});n.push(m),a+=1}}}catch(p){i=!0,s=p}finally{try{r||null==l.return||l.return()}finally{if(i)throw s}}return n}},{key:"renderWidget",value:function(e,t,n){var a=JSON.stringify(t);switch(t.reactKey=a,e){case"buttonlink":return this.renderSynapseButton(t);case"image":return this.renderSynapseImage(t);case"plot":return this.renderSynapsePlot(t);case"toc":return this.renderSynapseTOC(n);case"badge":return this.renderUserBadge(t);default:return}}},{key:"renderSynapseButton",value:function(e){var t="",n=e.align,a=void 0===n?"":n,r=e.highlight,i=void 0===r?"":r,s=a.toLowerCase();return"left"===s&&(t+="floatLeft "),"right"===s&&(t+="floatright "),t+="true"===i?" SRC-primary-button ":"SRC-light-button ","center"===s?o.createElement("div",{style:{textAlign:"center"}},o.createElement("a",{key:e.reactKey,href:e.url,className:"SRC-standard-button-shape "+t,role:"button"},e.text)):o.createElement("a",{key:e.reactKey,href:e.url,className:"SRC-standard-button-shape "+t,role:"button"},e.text)}},{key:"renderSynapsePlot",value:function(e){return o.createElement(so,{key:e.reactKey,token:this.props.token,ownerId:this.props.ownerId,wikiId:this.props.wikiId||this.state.data.id,widgetparamsMapped:e})}},{key:"renderSynapseImage",value:function(e){var t=e.reactKey;if(e.fileName){if(!this.state.fileHandles)return;return o.createElement(to,{params:e,key:t,token:this.props.token,fileName:e.fileName,wikiId:this.props.wikiId||this.state.data.id,fileResults:this.state.fileHandles.list})}if(e.synapseId)return o.createElement(to,{params:e,key:t,token:this.props.token,synapseId:e.synapseId})}},{key:"renderSynapseTOC",value:function(e){var t=[],n="";return e.replace(/<h([1-6]) id="(.*)" .*toc="true">(.*)<\/h[1-6]>/gm,(function(e,a,r,i){return n+=i,t.push(o.createElement("div",{key:i},o.createElement("a",{className:"link ".concat(co[Number(a)]),"data-anchor":r}," ",i," "))),""})),o.createElement("div",{key:n},t)}},{key:"renderUserBadge",value:function(e){return o.createElement(wa,{key:JSON.stringify(e),size:a.SMALL_USER_CARD,alias:e.alias})}},{key:"componentDidMount",value:function(){var e=Object(ue.a)(se.a.mark((function e(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.data.markdown){e.next=2;break}return e.abrupt("return");case 2:return this.markupRef.current&&this.markupRef.current.addEventListener("click",this.handleLinkClicks),e.next=5,this.getWikiPageMarkdown();case 5:this.processMath();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(ue.a)(se.a.mark((function e(t){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.props.token!==t.token||this.props.ownerId!==t.ownerId||this.props.wikiId!==t.wikiId)){e.next=6;break}return e.next=6,this.getWikiPageMarkdown();case 6:this.processMath();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.createElement("div",{className:"markdown",ref:this.markupRef},this.getErrorView(),o.createElement("span",null,this.processWidgets()),o.createElement("div",null,this.addBookmarks()))}}]),t}(o.Component);o.Component;!function(e){e[e.TODO=0]="TODO",e[e.PROGRESS=1]="PROGRESS",e[e.COMPLETED=2]="COMPLETED",e[e.EXCLUDED=3]="EXCLUDED",e[e.ERROR=4]="ERROR"}(ao||(ao={})),function(e){e[e.PREVIOUS=0]="PREVIOUS",e[e.NEXT=1]="NEXT",e[e.GO_TO_STEP=2]="GO_TO_STEP",e[e.SAVE=3]="SAVE",e[e.SUBMIT=4]="SUBMIT",e[e.VALIDATE=5]="VALIDATE",e[e.NONE=6]="NONE"}(ro||(ro={})),function(e){e[e.PROGRESS=0]="PROGRESS",e[e.ERROR=1]="ERROR",e[e.SAVE_SUCCESS=2]="SAVE_SUCCESS",e[e.SUBMIT_SUCCESS=3]="SUBMIT_SUCCESS",e[e.ERROR_CRITICAL=4]="ERROR_CRITICAL"}(oo||(oo={}));var mo=n(329),po=n.n(mo),fo=(n(465),n(16)),ho=n.n(fo),go=n(540);function bo(e){var t=o.createElement(o.Fragment,null);return e.isSubmitted?t=o.createElement("div",null,"Your information has been submitted"):e.bodyText&&(t=o.createElement("div",{dangerouslySetInnerHTML:{__html:e.bodyText}})),o.createElement("div",{className:"submission-header".concat(e.isSubmitted?" submitted":"")},o.createElement("h2",null,e.title),t,o.createElement("hr",null))}n(1068);function vo(e){var t=e.stepList.filter((function(e){return!0!==e.child})),n=function(e,t,n,a){var r=Xt.k,o=void 0;return n||a?{iconDef:r,flip:o}:(t?(r=Xt.d,o="horizontal"):e==ao.COMPLETED?r=Xt.h:e==ao.ERROR&&(r=Xt.p),{iconDef:r,flip:o})},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="item";return e&&(n="".concat(n," pointed ")),t&&(n="".concat(n," static")),n},r=function(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t||t.child&&!i)return o.createElement(o.Fragment,null);var s=function(e,t,n){return e.inProgress||t&&!e.final?o.createElement("span",null,e.title):o.createElement("button",{className:"btn btn-link",onClick:function(){return n(e)}},e.title)},c=n(t.state,t.excluded,t.static,t.final),l=a(t.inProgress,t.static);return o.createElement("div",{className:l},o.createElement($t.a,{icon:c.iconDef,flip:c.flip}),s(t,r,e.onStepChange))};return o.createElement("div",{className:"SRC-menuLayout json-forms-menu",style:{flex:"1"}},o.createElement("ul",null,t.map((function(t,n){return o.createElement("li",{className:"item-wrap",key:n+t.id},r(t,!!e.isWizardMode),t.children&&t.children.length>0&&o.createElement("div",{className:"subMenu"},o.createElement("ul",null,t.children&&t.children.map((function(t,n){var a=e.stepList.find((function(e){return e.id===t}));return"undefined"===typeof a?o.createElement(o.Fragment,null):o.createElement("li",{className:"item-wrap",key:n+t},r(a,!!e.isWizardMode,!0))})))))}))))}function Eo(e){var t=function(e){return e.isWizardMode?e.previousStepIds&&e.previousStepIds.length>0:e.steps.findIndex((function(t){return t.id===e.currentStep.id}))>0}(e)?o.createElement("button",{type:"button",onClick:function(t){return e.onNavAction(ro.PREVIOUS)},className:"btn btn-link nav-link prev"},o.createElement($t.a,{icon:Xt.i})):o.createElement(o.Fragment,null),n=e.currentStep.final?o.createElement(o.Fragment,null):o.createElement("button",{type:"button",onClick:function(t){return e.onNavAction(ro.NEXT)},className:"btn btn-link nav-link next"},o.createElement($t.a,{icon:Xt.j})),a=o.createElement("button",{type:"button",className:"btn btn-action save",disabled:e.isFormSubmitted,onClick:function(t){return e.onNavAction(ro.SAVE)}},"SAVE");return o.createElement("div",null,o.createElement("hr",null),o.createElement("div",{className:"buttonWrapper pull-right"},t," ",n," ",a))}function So(e){var t=e.steps.find((function(t){return t.id===e.nextStepId}));return"undefined"===typeof t?o.createElement(o.Fragment,null):o.createElement("span",{className:"nav-link"},o.createElement("a",{onClick:function(n){return e.onNavAction(t)}},t.title),o.createElement($t.a,{icon:Xt.j}))}function yo(e){var t=o.createElement("div",null,o.createElement("h6",null,"Data"),o.createElement("pre",null,JSON.stringify(e.formData,null,2)));return o.createElement(o.Fragment,null,!e.hidden&&t)}function Co(e,t,n){var a=/\[\d+\]\./g,r=(e=e.replace(/\.(\d)+/g,"[$1]")).split("."),o="".concat(r.join(".properties."),".title"),i="".concat(e,".ui:title"),s=o.replace(a,".items."),c=i.replace(a,".items."),l=o.match(a),u=ho.a.first(l);u&&(u=u.substring(1,u.length-2),u=isNaN(parseInt(u))?"":parseInt(u)+1+"");var d=ho.a.get(n,i)||ho.a.get(t.properties,o)||ho.a.get(n,c)||ho.a.get(t.properties,s)||"".concat(s);return"".concat(u?"["+u+"] ":"").concat(d)}function wo(e){var t=[];t=function(e,t,n,a){var r=function e(t,n,a){return Object.keys(t).forEach((function(r){if(null===t[r])n[a+r]="";else if(ho.a.isArray(t[r])&&!ho.a.isString(t[r]))for(var o in t[r])if(ho.a.isArray(t[r][o])||ho.a.isObject(t[r])&&!ho.a.isString(t[r][o]))e(t[r][o],n,"".concat(a).concat(r,"[").concat(o,"]").concat("."));else{var i=n["".concat(a).concat(r)];i=i?i+", ":"",n["".concat(a).concat(r)]=i+t[r][o]}else ho.a.isObject(t[r])&&!ho.a.isDate(t[r])?e(t[r],n,"".concat(a).concat(r).concat(".")):n[a+r]=t[r]})),n}(ho.a.cloneDeep(e),[],"");return ho.a.keys(r).map((function(e){var o=r[e];!1===r[e]&&(o="false"),!0===r[e]&&(o="true");var i=e.indexOf(".");return{screen:ho.a.find(t,{id:e.substring(0,i)}),label:Co(e,n,a),value:o}})).filter((function(e){return"included"!==e.label})).filter((function(e){return e.screen&&"undefined"!==typeof e.value})).map((function(e){return{label:e.label,value:e.value,screen:e.screen}})).sort((function(e,t){return e.screen.order-t.screen.order}))}(ho.a.cloneDeep(e.formData),e.steps,e.schema,e.uiSchema);var n="",a=o.createElement(o.Fragment,null,o.createElement("table",{className:"table summary-table-header"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,"Step"),o.createElement("th",null,"Label"),o.createElement("th",null,"Value")))),o.createElement("div",{className:"scroll-area table-body"},o.createElement("table",{className:"table summary-table"},o.createElement("tbody",null,t.map((function(e,t){return o.createElement("tr",{key:t+e.screen.id+e.label},o.createElement("td",null,n!==e.screen.id&&(n=e.screen.id)&&o.createElement("span",null,e.screen.title)),o.createElement("td",null,e.label),o.createElement("td",null,e.value))}))))));return o.createElement(o.Fragment,null,o.createElement("p",{className:"step-exclude-directions"},"Below is all of the data you have entered. Before submitting, click 'Validate' to ensure that all of the required data has been entered."),o.createElement("div",{className:"panel panel-default padding-full wrap"},o.createElement("div",{className:"summary scroll-area"},a)))}var Ro=n(175),Oo=n.n(Ro),ko=n(65),Do=n.n(ko);function xo(e){return i.a.createElement(Do.a,{show:e.show,animation:!1,className:e.className},i.a.createElement(Do.a.Header,{closeButton:!1,onHide:function(){return e.onCancel()}},i.a.createElement(Do.a.Title,null,e.title)),i.a.createElement(Do.a.Body,null,e.copy),i.a.createElement(Do.a.Footer,null,i.a.createElement(Oo.a,{variant:"secondary",onClick:function(){return e.onCancel()}},"Cancel"),i.a.createElement(Oo.a,{variant:"success",onClick:function(){return e.onOK.apply(e,Object(ce.a)(e.callbackArgs))}},i.a.createElement("span",null,e.confirmCopy||"OK"))))}var No=n(541),Io=n.n(No);function To(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function jo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?To(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):To(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fo=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).excludeWarningText=o.createElement("div",null,"This action will clear any entered data on this page and remove this form from your submission.",o.createElement("br",null),"You can include it again at anytime. Only this page will be affected."," ",o.createElement("br",null),"Are you sure you want to skip this step and clear any entered data?"),n.excludeWarningHeader="Skip This Step?",n.unsavedDataWarning="You might have some unsaved data. Are you sure you want to leave?",n.formRef=void 0,n.navAction=ro.NONE,n.uiSchema=void 0,n.nextStep=void 0,n.isNewForm=function(e){return 1==Object.keys(e).length&&"metadata"===Object.keys(e)[0]},n.getFirstStep=function(e,t){return n.isNewForm(t)?e[0]:e.find((function(e){return!0===e.final}))||e[0]},n.onUnload=function(e){return n.state.hasUnsavedChanges?(e.preventDefault(),e.returnValue=n.unsavedDataWarning):void 0},n.setupBeforeUnloadListener=function(){window.addEventListener("beforeunload",n.onUnload)},n.getSchema=function(e){var t=e.id;return e.final?n.props.schema:ho.a.pick(n.props.schema,["title","type","properties.".concat(t)])},n.getNextStepId=function(){var e=Object(ue.a)(se.a.mark((function e(t,n,a){var r,o;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=2;break}return e.abrupt("return",a);case 2:if(t.rules&&0!==t.rules.length){e.next=4;break}return e.abrupt("return",t.default);case 4:return r=new go.Engine(t.rules),e.prev=5,e.next=8,r.run(n);case 8:if(!((o=e.sent).events.length>0)){e.next=13;break}return e.abrupt("return",o.events[0].params.next);case 13:return e.abrupt("return",t.default);case 14:e.next=19;break;case 16:return e.prev=16,e.t0=e.catch(5),e.abrupt("return",t.default);case 19:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(t,n,a){return e.apply(this,arguments)}}(),n.moveStep=function(){var e=Object(ue.a)(se.a.mark((function e(t,a,r){var o,i,s,c,l,u,d=arguments;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=d.length>3&&void 0!==d[3]?d[3]:Object(ce.a)(n.state.previousStepIds),i=n.state.currentStep,n.formRef.current.setState({errorSchema:{}}),(c=n.props.isWizardMode&&!a)&&o.push(i.id),r?s=ao.ERROR:(s=ao.COMPLETED,!c&&n.props.isWizardMode&&(s=ao.TODO)),e.next=8,n.getNextStepId(i,t,a);case 8:a=e.sent,l=n.state.steps.map((function(e){return e.id===i.id?jo({},e,{},{state:s,inProgress:!1}):e.id===a?jo({},e,{},{inProgress:!0}):e})),c&&ho.a.set(t,"".concat(a,".included"),!0),u=n.state.steps.find((function(e){return e.id===a})),n.props.isWizardMode&&u.final&&Object.keys(t).forEach((function(e){void 0===t[e].included&&(t[e]={})})),n.saveStepState(o,l,u,t);case 14:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),n.saveStepState=function(e,t,a,r){n.setState({previousStepIds:e,steps:t,currentStep:a,formData:r,hasValidated:!1,doShowErrors:!1})},n.goPrevious=function(){var e=Object(ue.a)(se.a.mark((function e(t,a){var r,o,i;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Object(ce.a)(n.state.previousStepIds),n.props.isWizardMode?(r=o.pop(),n.isSubmitScreen()||ho.a.set(t,"".concat(n.state.currentStep.id,".included"),void 0)):(i=ho.a.findIndex(n.state.steps,{id:n.state.currentStep.id}))>0&&(r=n.state.steps[i-1].id),ho.a.isUndefined(r)){e.next=4;break}return e.abrupt("return",n.moveStep(t,r,a,o));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.triggerAction=function(e){if(e===ro.SAVE)return n.props.onSave(n.state.formData);n.navAction=e,n.formRef.current&&n.formRef.current.submit()},n.triggerStepChange=function(e){n.nextStep=e,n.triggerAction(ro.GO_TO_STEP)},n.onError=function(e){if(n.setState({doShowErrors:!0,hasValidated:!1}),n.navAction===ro.VALIDATE){var t=n.setStepStatusForFailedValidation(e.props,n.state.steps,!!n.props.isWizardMode,n.state.formData,n.getSchema(n.state.currentStep).properties||n.getSchema(n.state.currentStep));n.setState({steps:t}),n.state.isLoadingSaved&&(n.moveStep(n.state.formData,t[0].id,!0),n.setState({isLoadingSaved:!1}))}},n.setStepStatusForFailedValidation=function(e,t,n,a,r){var o=e.map((function(e){return ho.a.trimStart(e.property,".").split(".")[0]})),i=Object.keys(r);return t.map((function(e){if(o.indexOf(e.id)>-1)return jo({},e,{state:ao.ERROR});if(i.indexOf(e.id)>-1){var t=ao.COMPLETED;return n&&!ho.a.get(a[e.id],"included")&&(t=e.state),jo({},e,{state:t})}return e}))},n.onSubmit=function(){n.performAction(n.navAction,n.state.currentStep.state===ao.ERROR)},n.isSubmitScreen=function(){return!0===n.state.currentStep.final&&!n.state.isLoadingSaved},n.showExcludeStateWarningModal=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.setState({modalContext:{action:n.toggleExcludeStep,arguments:[e,!0,t]}})},n.toggleExcludeStep=function(e,t){n.setState((function(n,a){var r=n.steps.map((function(n){return n.id===e?jo({},n,{},{excluded:t}):n})),o=ho.a.cloneDeep(n.formData),i=ho.a.cloneDeep(n.currentStep);return i.id===e&&(i.excluded=t),t?o[e]={}:ho.a.set(o,"".concat(e,".included"),!0),{steps:r,formData:o,modalContext:void 0,currentStep:i}}))},n.renderNotification=function(e){return e===oo.SAVE_SUCCESS?o.createElement("div",{className:"notification-area"}," Successfully saved "):e===oo.SUBMIT_SUCCESS?o.createElement("div",{className:"notification-area"}," Successfully submitted "):e===oo.PROGRESS?o.createElement("div",{className:"notification-area"}," working on it ...."):o.createElement(o.Fragment,null)},n.renderTextForStaticScreen=function(){if(!n.state.currentStep.copy)return o.createElement(o.Fragment,null);var e=n.state.currentStep.copy;return o.createElement("div",{className:"static-screen",dangerouslySetInnerHTML:{__html:e}})},n.renderOptionalFormSubheader=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e)return o.createElement(o.Fragment,null);var t=n.state.currentStep;return!0===t.excluded?o.createElement("div",{className:"step-exclude-directions"},"This form is currently not included in the submission.",o.createElement("button",{className:"btn btn-link",onClick:function(){return n.toggleExcludeStep(t.id,!1)}},"INCLUDE")):!1===t.excluded?o.createElement("div",{className:"step-exclude-directions"},'This form is currently included in the submission. Enter some data if you have it, or click "Skip".'," ",o.createElement("button",{className:"btn btn-link",onClick:function(){return n.showExcludeStateWarningModal(n.state.currentStep.id)}},"SKIP")):o.createElement(o.Fragment,null)},n.renderHelpToggle=function(e,t,n){return e.static||e.final?o.createElement(o.Fragment,null):o.createElement(o.Fragment,null,o.createElement("label",{className:"pull-right toggle-help-label"},o.createElement("span",null,"Hide help"),o.createElement(Io.a,{checkedIcon:!1,uncheckedIcon:!1,height:20,width:45,className:"toggle-help",offColor:"#ccc",onChange:function(){return n()},checked:t}),o.createElement("span",null,"Show help")))},n.transformErrors=function(e){if(n.navAction!==ro.SUBMIT&&n.navAction!==ro.VALIDATE&&(!n.props.isWizardMode||n.state.currentStep.final)){var t=jo({},n.state.currentStep);return e.length>0?t.state=ao.ERROR:t.state=ao.COMPLETED,n.setState({currentStep:t}),[]}return e.filter((function(e){return"required"===e.name})).forEach((function(t){var n=t.property.substring(0,t.property.lastIndexOf("."));ho.a.remove(e,(function(e){return e.property.indexOf(n)>-1&&("enum"===e.name||"oneOf"===e.name)}))})),e.map((function(e){return e.message=e.message.replace("property","field"),e}))},n.renderErrorListTemplate=function(e){var t=e.errors.map((function(e,t){return function(e,t,n,a,r){var i=ho.a.trimStart(t.property,"."),s=i.split("."),c="".concat(s.join(".properties."),".title"),l="".concat(i,".ui:title"),u=c.replace(/\[.*?\]/,".items"),d=l.replace(/\[.*?\]/,".items"),m=c.match(/\[.*?\]/),p=ho.a.first(m);p&&(p=p.substring(1,p.length-1),p=isNaN(parseInt(p))?"":" [".concat(parseInt(p)+1,"]"));var f=ho.a.get(n,l)||ho.a.get(r.properties,c)||ho.a.get(n,d)||ho.a.get(r.properties,u)||t.property,h=ho.a.find(e,{id:s[0]})||{title:s[0]};return o.createElement("li",{key:a,className:""},o.createElement("span",null,o.createElement("strong",null,h.title,p,":"," "),f,"\xa0 ",t.message))}(n.state.steps,e,n.uiSchema,t,n.props.schema)}));return o.createElement("div",{className:"form-error-summary"},o.createElement("ul",{className:"error-detail"},t))},n.uiSchema=function e(t,n){ho.a.keys(t).some((function(a){if(a===n){var r=t[a];return t[a]=o.createElement("span",{dangerouslySetInnerHTML:{__html:r}}),t}t[a]&&"object"===typeof t[a]&&e(t[a],n)}));return t}(ho.a.cloneDeep(e.uiSchema),"ui:help");var a=e.navSchema.steps.map((function(e,t){return jo({},e,{inProgress:0===t})})).sort((function(e,t){return e.order-t.order}));n.formRef=o.createRef();var r=n.getFirstStep(a,e.formData);return n.state={currentStep:r,steps:a,previousStepIds:[],formData:e.formData,doShowErrors:!1,doShowHelp:!0,hasUnsavedChanges:!1,isSubmitted:e.isSubmitted,isLoadingSaved:!n.isNewForm(n.props.formData)},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.onUnload)}},{key:"componentDidUpdate",value:function(e){var t=this.props.callbackStatus!==e.callbackStatus,n=this.props.callbackStatus===oo.SAVE_SUCCESS||this.props.callbackStatus===oo.SUBMIT_SUCCESS;t&&n&&(this.setState({hasUnsavedChanges:!1}),this.props.callbackStatus===oo.SUBMIT_SUCCESS&&(this.setState({isSubmitted:!0}),window.history.back()))}},{key:"componentDidMount",value:function(){if(this.setupBeforeUnloadListener(),this.isNewForm(this.state.formData))if(this.props.isWizardMode)this.setState((function(e){var t=e.formData,n=e.currentStep.id;return ho.a.set(t,"".concat(n,".included"),!0),{formData:t}}));else{var e={},t=this.props.schema.properties;Object.keys(t).forEach((function(n){t[n].properties&&Object.keys(t[n].properties).indexOf("included")>-1&&ho.a.set(e,"".concat(n,".included"),!0)})),this.setState((function(t){return jo({formData:t.formData},e)}))}else this.triggerAction(ro.VALIDATE)}},{key:"handleOnChange",value:function(e){var t=e.formData;if(!this.isSubmitScreen()){var n=!ho.a.isEqual(this.state.formData,t);this.setState({formData:t,hasUnsavedChanges:n})}}},{key:"performAction",value:function(e,t){var n=this.state.formData;switch(e){case ro.NEXT:return this.moveStep(n,void 0,t);case ro.PREVIOUS:return this.goPrevious(n,t);case ro.GO_TO_STEP:if(!this.nextStep)return;return this.moveStep(n,this.nextStep.id,t);case ro.SUBMIT:this.props.onSubmit(n);case ro.VALIDATE:var a=this.setStepStatusForFailedValidation([],this.state.steps,!!this.props.isWizardMode,this.state.formData,this.getSchema(this.state.currentStep).properties||this.getSchema(this.state.currentStep)),r=jo({},this.state.currentStep,{state:ao.COMPLETED});this.setState({hasValidated:!0,currentStep:r,steps:a}),this.state.isLoadingSaved&&(this.moveStep(this.state.formData,a[0].id,!1),this.setState({isLoadingSaved:!1}));default:return}}},{key:"render",value:function(){var e=this;return o.createElement("div",{className:"outter-wrap"},o.createElement(f.a,{when:this.state.hasUnsavedChanges,message:this.unsavedDataWarning}),o.createElement(bo,{isSubmitted:this.state.isSubmitted,bodyText:this.state.currentStep.description,title:this.props.formTitle}),o.createElement("div",null,o.createElement("div",{className:"inner-wrap"},o.createElement(vo,{stepList:this.state.steps,isWizardMode:this.props.isWizardMode,onStepChange:this.triggerStepChange}),this.state.isLoadingSaved&&o.createElement("div",{className:"text-center"},o.createElement("span",{className:"spinner"})),o.createElement("div",{className:"form-wrap"},o.createElement("div",{className:"form-title"},this.state.currentStep.title),this.renderNotification(this.props.callbackStatus),o.createElement("div",{className:"right-top-actions ".concat(this.state.isSubmitted?"hide":"")},!this.state.currentStep.static&&o.createElement("button",{type:"button",className:"btn btn-action save pull-right",onClick:function(){return e.triggerAction(ro.VALIDATE)}},"VALIDATE"),this.renderHelpToggle(this.state.currentStep,this.state.doShowHelp,(function(){return e.setState({doShowHelp:!e.state.doShowHelp})})),this.isSubmitScreen()&&o.createElement("button",{type:"button",className:"btn btn-action save pull-right",disabled:this.state.isSubmitted,onClick:function(){return e.triggerAction(ro.SUBMIT)}},"SUBMIT")),this.renderOptionalFormSubheader(this.props.isWizardMode),o.createElement("div",{className:this.isSubmitScreen()||this.state.currentStep.static?"hide-form-only":"wrap"},this.state.hasValidated&&o.createElement("div",{className:"notification-area"},"Great! Your data is valid!"),o.createElement("div",{className:"scroll-area ".concat(this.state.currentStep.excluded?"disabled":" "," ")},o.createElement(na.a,{className:this.state.doShowHelp?"submissionInputForm":"submissionInputForm no-help",liveValidate:!1,formData:this.state.formData,schema:this.getSchema(this.state.currentStep),uiSchema:this.uiSchema,onSubmit:this.onSubmit,onChange:function(t){return e.handleOnChange(t)},onError:function(t){return e.onError({props:t,form:e.formRef})},showErrorList:!!this.state.doShowErrors||!!this.props.isWizardMode,ErrorList:this.renderErrorListTemplate,transformErrors:this.transformErrors,ref:this.formRef,disabled:this.state.currentStep.excluded||this.state.isSubmitted},o.createElement("div",{style:{display:"none"}},o.createElement("button",{type:"submit"}))),this.renderTextForStaticScreen(),!this.props.isWizardMode&&o.createElement(So,{steps:this.state.steps,nextStepId:this.state.currentStep.default,onNavAction:function(t){return e.triggerStepChange(t)}}))),this.isSubmitScreen()&&o.createElement(wo,{formData:this.state.formData,steps:this.state.steps,callbackFn:function(t){return e.showExcludeStateWarningModal(t,!0)},uiSchema:this.props.uiSchema,schema:this.props.schema}),o.createElement(Eo,{currentStep:this.state.currentStep,steps:this.state.steps,previousStepIds:this.state.previousStepIds,isFormSubmitted:this.state.isSubmitted,onNavAction:function(t){return e.triggerAction(t)}})))),this.state.modalContext&&o.createElement(xo,{show:!0,title:this.excludeWarningHeader,copy:this.excludeWarningText,className:"theme-".concat(this.props.formClass),callbackArgs:this.state.modalContext.arguments,onCancel:function(){return e.setState({modalContext:void 0})},onOK:function(t,n){return e.toggleExcludeStep(t,n)}}),o.createElement(yo,{formData:this.state.formData,hidden:!0}))}}]),t}(o.Component);var Lo,Po=n(544),Ao=n.n(Po),Mo=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).getFileEntityData=function(){var e=Object(ue.a)(se.a.mark((function e(t,a){var o,i,s,c;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getEntity(t,a);case 3:return o=e.sent,e.next=6,r.getFileEntityContent(t,o);case 6:return i=e.sent,s=JSON.parse(i),e.abrupt("return",{version:o.versionNumber,content:s});case 11:return e.prev=11,e.t0=e.catch(0),c={message:"".concat(e.t0.message,":  configuration data for ").concat(a," failed to load")},n.onError(c),e.abrupt("return",Promise.reject(c));case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),n.getFileEntityDataDereferenced=function(){var e=Object(ue.a)(se.a.mark((function e(t,a){var r,o,i,s;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getFileEntityData(t,a);case 2:return r=e.sent,o=r.version,i=r.content,e.next=7,Ao.a.dereference(i);case 7:return s=e.sent,e.abrupt("return",{version:o,content:s});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.getData=function(){var e=Object(ue.a)(se.a.mark((function e(t){var a,o,i,s,c,l;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,a={},o=[n.getFileEntityDataDereferenced(t,n.props.formSchemaEntityId),n.getFileEntityData(t,n.props.formUiSchemaEntityId),n.getFileEntityData(t,n.props.formNavSchemaEntityId)],i=n.props.searchParams,e.next=8,Promise.all(o);case 8:if(s=e.sent,!(c=i&&i.dataFileHandleId)){e.next=17;break}return e.next=13,r.getFileHandleContentFromID(c,t);case 13:l=e.sent,a=JSON.parse(l),e.next=18;break;case 17:a={metadata:{formSchemaVersion:s[0].version,uiSchemaVersion:s[1].version,navSchemaVersion:s[2].version}};case 18:n.setState({formData:a,formSchema:s[0].content,formUiSchema:s[1].content,formNavSchema:s[2].content,isLoading:!1}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),n.onError({message:e.t0});case 24:return e.prev=24,n.setState({isLoading:!1}),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[2,21,24,27]])})));return function(t){return e.apply(this,arguments)}}(),n.finishedProcessing=function(e,t){n.setState({isLoading:!1,notification:{type:e,message:t},status:e}),setTimeout((function(){n.setState({status:void 0})}),7e3)},n.onError=function(e){n.setState({notification:{type:oo.ERROR,message:e.message,name:e.name},status:oo.ERROR,isLoading:!1})},n.submitForm=function(){var e=Object(ue.a)(se.a.mark((function e(t){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.saveToFile(t);case 2:return n.setState({isLoading:!0}),e.next=5,r.submitFormData(n.state.formDataId,n.props.token);case 5:n.finishedProcessing(oo.SUBMIT_SUCCESS,"File Submitted");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.createOrUpdateFormDataFile=function(){var e=Object(ue.a)(se.a.mark((function e(t,a){var o,i,s,c,l;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(t,".json"),e.next=3,r.uploadFile(n.props.token,t,a);case 3:if(o=e.sent,i=n.props.searchParams,s=i&&i.formGroupId){e.next=9;break}throw console.error("formGroupId must be defined"),"formGroupId must be defined";case 9:if(e.prev=9,c=o.fileHandleId,!n.state.formDataId){e.next=17;break}return e.next=14,r.updateFormData(n.state.formDataId,t,c,n.props.token);case 14:l=e.sent,e.next=20;break;case 17:return e.next=19,r.createFormData(s,t,c,n.props.token);case 19:l=e.sent;case 20:return e.abrupt("return",l);case 23:throw e.prev=23,e.t0=e.catch(9),n.onError(e.t0),e.t0;case 27:case"end":return e.stop()}}),e,null,[[9,23]])})));return function(t,n){return e.apply(this,arguments)}}(),n.saveToFile=function(){var e=Object(ue.a)(se.a.mark((function e(t){var a,r,o;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ho.a.get(t,n.props.fileNamePath),n.setState({status:oo.PROGRESS,notification:{type:oo.PROGRESS,message:"Progress"},isLoading:!0}),a){e.next=5;break}return n.onError({message:"Please Provide the File Name"}),e.abrupt("return");case 5:return e.prev=5,r=new Blob([JSON.stringify(t)],{type:"text/json"}),e.next=9,n.createOrUpdateFormDataFile(a,r);case 9:o=e.sent,n.setState({formDataId:o.formDataId}),n.finishedProcessing(oo.SAVE_SUCCESS,"File Saved"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),n.onError({message:e.t0});case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}(),n.isReadyToDisplayForm=function(e){return n.state.status!==oo.ERROR_CRITICAL&&e.formSchema&&e.formUiSchema&&e.formNavSchema&&e.formData},n.renderLoader=function(e,t){return!ho.a.includes([oo.ERROR,oo.ERROR_CRITICAL],e.status)&&t.token&&e.isLoading?o.createElement("div",{className:"text-center"},o.createElement("span",{className:"spinner"})):o.createElement(o.Fragment,null)},n.renderNotification=function(e){return e&&e.type===oo.ERROR?o.createElement(po.a,{variant:"danger",onClose:function(){return n.setState({status:void 0})}},o.createElement(po.a.Heading,null,"Error"),o.createElement("p",null,e.name," ",e.message)):o.createElement(o.Fragment,null)},n.renderUnauthenticatedView=function(e){return e?o.createElement(o.Fragment,null):o.createElement("div",{className:"panel padding-full unauthenticated text-center"},"Please"," ",o.createElement("button",{className:"SRC-standard-button-shape SRC-light-button SRC-sign-in-button ".concat(oe)}," ","sign in"," ")," ","to initiate or continue your submission"," ")},n.state={isLoading:!0,formDataId:ho.a.get(n.props,"searchParams.formDataId")},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(ue.a)(se.a.mark((function e(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData(this.props.token);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(ue.a)(se.a.mark((function e(t){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.props.token!==t.token)){e.next=4;break}return e.next=4,this.getData(this.props.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.createElement("div",{className:"theme-".concat(this.props.formClass)},o.createElement("div",{className:"SRC-ReactJsonForm"},this.renderNotification(this.state.notification),this.renderLoader(this.state,this.props),this.renderUnauthenticatedView(this.props.token),this.isReadyToDisplayForm(this.state)&&o.createElement("div",null,o.createElement(Fo,{schema:this.state.formSchema,uiSchema:this.state.formUiSchema,formData:this.state.formData,navSchema:this.state.formNavSchema,isWizardMode:this.props.isWizardMode,formTitle:this.props.formTitle,formClass:this.props.formClass,callbackStatus:this.state.status,onSave:function(t){return e.saveToFile(t)},onSubmit:function(t){return e.submitForm(t)},isSubmitted:this.props.searchParams&&!!this.props.searchParams.submitted}))))}}]),t}(o.Component);!function(e){e.WAITING_FOR_SUBMISSION="WAITING_FOR_SUBMISSION",e.SUBMITTED_WAITING_FOR_REVIEW="SUBMITTED_WAITING_FOR_REVIEW",e.ACCEPTED="ACCEPTED",e.REJECTED="REJECTED"}(Lo||(Lo={}));var Uo=n(330),_o=n.n(Uo),qo=n(545),Ho=n.n(qo);function Bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Vo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bo(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bo(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wo=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).modalTitle="Trash Submission?",n.listingText={inProgress:{subhead:"In Progress",noRecords:"You don't have submissions in progress"},submitted:{subhead:"Submitted",noRecords:"You don't have anything submitted"}},n.modalCopy=o.createElement(o.Fragment,null,o.createElement("p",null,"This submission is currently incomplete and has not been submitted. If you trash this submission, you won't be able to recover the data."),o.createElement("p",null,"Are you sure you want to trash this submission?' ")),n.getTypeFileListing=function(){var e=Object(ue.a)(se.a.mark((function e(t,a){var o,i,s,c,l,u;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isLoading:!0}),o=n.props.token,i=n.props.formGroupId,e.prev=3,s=function(e){return e=Vo({},e,{},{name:e.name.replace(".json","")})},c={filterByState:t,groupId:i,nextPageToken:a},e.next=8,r.listFormData(c,o);case 8:return l=e.sent,u=l.page?l.page.map((function(e){return s(e)})):[],e.abrupt("return",{fileList:u,nextPageToken:l.nextPageToken});case 13:return e.prev=13,e.t0=e.catch(3),n.onError(e.t0),e.abrupt("return",Promise.reject(e.t0));case 17:return e.prev=17,n.setState({isLoading:!1}),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,13,17,20]])})));return function(t,n){return e.apply(this,arguments)}}(),n.getMore=function(){var e=Object(ue.a)(se.a.mark((function e(a,r){var o,i;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="SUBMITTED"===a?t.requestFilter.SUBMITTED:t.requestFilter.IN_PROGRESS,e.next=3,n.getTypeFileListing(o,r);case 3:i=e.sent,"SUBMITTED"===a?n.setState((function(e){return{submitted:{fileList:[].concat(Object(ce.a)(e.submitted.fileList),Object(ce.a)(i.fileList)),nextPageToken:i.nextPageToken}}})):n.setState((function(e){return{inProgress:{fileList:[].concat(Object(ce.a)(e.inProgress.fileList),Object(ce.a)(i.fileList)),nextPageToken:i.nextPageToken}}}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.getUserFileListing=Object(ue.a)(se.a.mark((function e(){var a,r;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getTypeFileListing(t.requestFilter.IN_PROGRESS,n.state.inProgress.nextPageToken);case 2:return a=e.sent,e.next=5,n.getTypeFileListing(t.requestFilter.SUBMITTED,n.state.submitted.nextPageToken);case 5:return r=e.sent,n.setState({inProgress:a,submitted:r}),e.abrupt("return");case 8:case"end":return e.stop()}}),e)}))),n.onError=function(e){console.log(e)},n.deleteFile=function(){var e=Object(ue.a)(se.a.mark((function e(t,a){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isLoading:!0,modalContext:void 0}),e.prev=1,e.next=4,r.deleteFormData(a,t);case 4:n.setState((function(e,t){return{inProgress:{fileList:e.inProgress.fileList.filter((function(e){return e.formDataId!==a})),nextPageToken:e.inProgress.nextPageToken}}})),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),n.onError(e.t0),e.abrupt("return",[]);case 11:return e.prev=11,n.setState({isLoading:!1}),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,7,11,14]])})));return function(t,n){return e.apply(this,arguments)}}(),n.setModalConfirmationState=function(e,t){n.setState({modalContext:{action:n.deleteFile,arguments:[e,t]}})},n.renderLoading=function(e,t){return e&&t?o.createElement("div",{className:"text-center"},o.createElement("span",null,"Loading\u2026"),o.createElement("span",{style:{marginLeft:"2px"},className:"spinner"})):o.createElement(o.Fragment,null)},n.renderUnauthenticatedView=function(e){return e?o.createElement(o.Fragment,null):o.createElement("div",{className:"panel padding-full unauthenticated text-center"},"Please"," ",o.createElement("button",{className:"SRC-standard-button-shape SRC-light-button ".concat(oe," SRC-sign-in-button")}," ","sign in"," ")," ","to initiate or continue your submission"," ")},n.renderSubmissionsTable=function(e,t,a,r,i){if(!a)return n.onError("Form Group ID is undefined"),o.createElement(o.Fragment,null);var s="IN_PROGRESS"===r,c=s?n.listingText.inProgress:n.listingText.submitted,l=o.createElement("h4",null,c.subhead),u=s?o.createElement("tr",null,o.createElement("th",null,"Submission Name"),o.createElement("th",null,"Edited On"),o.createElement("th",null),o.createElement("th",null)):o.createElement("tr",null,o.createElement("th",null,"Submission Name"),o.createElement("th",null,"Submitted On"),o.createElement("th",null,"Status"),o.createElement("th",null)),d=o.createElement("h5",{className:"text-center no-submissions padding-full"},c.noRecords),m=i?o.createElement("div",{className:"view-more"},o.createElement("button",{className:"btn btn-link",onClick:function(){return n.getMore(r,i)}},"more ...")):o.createElement(o.Fragment,null);return e.length>0&&(d=o.createElement("div",{className:"file-table"},o.createElement("table",{className:"table"},o.createElement("thead",null,u),o.createElement("tbody",null,e.map((function(e,i){return s?o.createElement("tr",{key:e.formDataId+i+r},o.createElement("td",null,o.createElement("a",{href:"".concat(t,"?formGroupId=").concat(a,"&formDataId=").concat(e.formDataId,"&dataFileHandleId=").concat(e.dataFileHandleId)},e.name)),o.createElement("td",null,_o()(e.modifiedOn).calendar()),o.createElement("td",null,"\xa0"),o.createElement("td",{className:"text-right"},o.createElement("button",{className:"btn","aria-label":"delete",onClick:function(){return n.setModalConfirmationState(n.props.token,e.formDataId)}},o.createElement($t.a,{icon:Xt.H,"aria-hidden":"true"})))):o.createElement("tr",{key:e.formDataId+i},o.createElement("td",null,o.createElement("a",{href:"".concat(t,"?formGroupId=").concat(a,"&formDataId=").concat(e.formDataId,"&dataFileHandleId=").concat(e.dataFileHandleId,"&submitted=1")},e.name)),o.createElement("td",null,_o()(e.modifiedOn).calendar()),o.createElement("td",null,e.submissionStatus.state),o.createElement("td",{className:"text-right"},o.createElement("button",{className:"btn","aria-label":"information",onClick:function(){return n.setState({isShowInfoModal:!0})}},o.createElement($t.a,{icon:Xt.y,"aria-hidden":"true"}))))})))),m," ")),o.createElement(o.Fragment,null,l," ",d)},n.renderSubmissionsTables=function(e,t,a,r){return 0===e.fileList.length&&0===t.fileList.length?o.createElement("div",{className:"text-center"},o.createElement("img",{src:Ho.a,alt:"no submissions"}),o.createElement("p",{className:"padding-full"},"You have no submissions")):[n.renderSubmissionsTable(e.fileList,a,r,"IN_PROGRESS",e.nextPageToken),n.renderSubmissionsTable(t.fileList,a,r,"SUBMITTED",t.nextPageToken)]},n.state={isLoading:!0,isShowInfoModal:!1,inProgress:{fileList:[]},submitted:{fileList:[]}},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(ue.a)(se.a.mark((function e(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refresh(this.props.token);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(ue.a)(se.a.mark((function e(t){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.props.token!==t.token)){e.next=4;break}return e.next=4,this.refresh(this.props.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(ue.a)(se.a.mark((function e(t){var n=this;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,this.getUserFileListing().catch((function(e){n.onError(e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.createElement("div",{className:"theme-".concat(this.props.formClass)},o.createElement("div",{className:"SRC-ReactJsonForm"},this.renderLoading(this.props.token,this.state.isLoading),this.renderUnauthenticatedView(this.props.token),!this.state.isLoading&&o.createElement("div",{className:"file-grid "},o.createElement("h3",null,"Your Submissions"),o.createElement("div",{className:"panel panel-default padding-full"},this.renderSubmissionsTables(this.state.inProgress,this.state.submitted,this.props.pathpart,this.props.formGroupId),o.createElement("div",{className:"text-center"},o.createElement("a",{className:"btn btn-large",href:"".concat(this.props.pathpart,"?formGroupId=").concat(this.props.formGroupId)},"Add new ",this.props.itemNoun)))),this.state.modalContext&&o.createElement(xo,{className:"theme-".concat(this.props.formClass),show:"undefined"!==typeof this.state.modalContext,title:this.modalTitle,copy:this.modalCopy,callbackArgs:this.state.modalContext.arguments,onCancel:function(){return e.setState({modalContext:void 0})},onOK:function(t,n){return e.deleteFile(t,n)}}),o.createElement(Do.a,{show:this.state.isShowInfoModal,animation:!1,className:"theme-".concat(this.props.formClass)},o.createElement(Do.a.Header,{closeButton:!1,onHide:function(){return e.setState({isShowInfoModal:!1})}},o.createElement(Do.a.Title,null,"More Information")),o.createElement(Do.a.Body,null,"Please"," ",o.createElement("a",{href:"mailto:ModelAD@iupui.edu"},"contact us")," for more information about your submission"),o.createElement(Do.a.Footer,null,o.createElement(Oo.a,{variant:"success",onClick:function(){return e.setState({isShowInfoModal:!1})}},"OK")))))}}]),t}(o.Component);Wo.requestFilter={IN_PROGRESS:[Lo.WAITING_FOR_SUBMISSION],SUBMITTED:[Lo.SUBMITTED_WAITING_FOR_REVIEW,Lo.ACCEPTED,Lo.REJECTED]},Zt.b.add(Xt.x),Zt.b.add(Xt.w);var Go=new(n(1131)),zo=new DOMParser,Qo=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).onToggleReadMore=function(e){return function(t){var a=document.getElementById(e);n.state.itemId2MoreItem[e]||(n.state.itemId2MoreItem[e]={text:"View full post",icon:"long-arrow-alt-down"});var r=n.state.itemId2MoreItem[e].text.includes("View full post");if(a)for(var o=!1,i=0;i<a.children.length;i++){var s=a.children[i];o?r?s.classList.remove("hidden"):s.classList.add("hidden"):o=s.id.includes("more-")}var c=r?"Hide":"View full post",l=r?"long-arrow-alt-up":"long-arrow-alt-down";n.state.itemId2MoreItem[e]={text:c,icon:l},n.setState({itemId2MoreItem:n.state.itemId2MoreItem})}},n.onClickShowMoreItems=function(){return function(e){n.setState({isShowingMoreItems:!0})}},n.state={rssFeed:{},isLoadingError:!1,isShowingMoreItems:!1,itemId2MoreItem:{}},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.url;fetch(t).then((function(e){return e.text()})).then((function(e){return Go.parseString(e)})).then((function(t){return e.setState({rssFeed:t})})).catch((function(t){return e.setState({isLoadingError:!0})}))}},{key:"render",value:function(){var e=this;return o.createElement("ul",{className:"srcRssFeed"},this.state.rssFeed.items&&this.state.rssFeed.items.map((function(t,n){var a=zo.parseFromString(t["content:encoded"],"text/html"),r=a.querySelector("body"),i=a.querySelector('[id^="more-"]');if(i&&r)for(var s=!1,c=r.children,l=0;l<c.length;l++){var u=c[l];s&&u.classList.add("hidden"),u===i&&(s=!0)}var d=n<e.props.defaultItemsToShow||e.state.isShowingMoreItems,m="View full post",p="long-arrow-alt-down";return e.state.itemId2MoreItem[t.guid]&&(m=e.state.itemId2MoreItem[t.guid].text,p=e.state.itemId2MoreItem[t.guid].icon),o.createElement("li",{key:t.guid,className:"srcRssFeedItem ".concat(d?"":"hidden")},o.createElement("div",{className:"srcRssFeedItemContent"},o.createElement("div",{id:t.guid,dangerouslySetInnerHTML:{__html:a.documentElement.innerHTML}}),i&&o.createElement("div",{className:"clearfix"},o.createElement("button",{style:{textAlign:"left",margin:0,padding:"0px 50px 25px 35px"},className:"SRC-primary-text-color SRC-basicButton SRC-floatRight",onClick:e.onToggleReadMore(t.guid)},m,o.createElement($t.a,{key:"".concat(t.guid).concat(n),style:{marginLeft:"5px"},icon:p})))))})),this.state.rssFeed.items&&this.state.rssFeed.items.length>this.props.defaultItemsToShow&&!this.state.isShowingMoreItems&&o.createElement("div",{className:"clearfix"},o.createElement("button",{className:"btn SRC-grayBackground SRC-roundBorder SRC-floatRight",onClick:this.onClickShowMoreItems()},"View All")),this.state.isLoadingError&&o.createElement("div",null,"Unable to load feed: ",this.props.url))}}]),t}(o.Component),Yo=function(e){function t(e){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).call(this,e))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){"undefined"!==typeof window.twttr&&window.twttr.widgets.load(document.getElementById(this.props.href))}},{key:"render",value:function(){return o.createElement("div",null,o.createElement("a",{id:this.props.href,className:"twitter-timeline","data-height":"600","data-theme":"light",href:this.props.href}))}}]),t}(o.Component),Ko=n(553),Jo=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).switchFeed=function(e){return function(t){n.state.menuIndex!==e&&n.setState({menuIndex:e})}},n.state={menuIndex:0},n.switchFeed=n.switchFeed.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.renderMenu(),t=this.props.menuConfig[this.state.menuIndex],n=t.feedName,a=t.feedDescription,r=t.feedUrl,i=t.defaultItemsToShow,s=t.mailChimpUrl,c=t.twitterFeedUrl,l=t.mailChimpListName;return o.createElement("div",{className:"row"},o.createElement("div",{className:"col-xs-2 SRC-menuLayout SRC-menuPadding"},e),o.createElement("div",{className:"col-xs-10"},o.createElement(o.Fragment,null,s&&o.createElement("div",{className:"SRC-mailchimpSubscribeContainer"},o.createElement("h4",null,"Subscribe"),o.createElement("p",{className:"SRC-marginBottomTop"},"Subscribe to receive the ",l," by e-mail, which provides information and updates related to the Portal. You can opt out at any time by using the unsubscribe link within the e-mail. We will not share your information with any third parties or use it for any other purposes."),o.createElement("div",{className:"SRC-marginBottomTop"},o.createElement(Ko.a,{url:s}))),o.createElement("h3",{className:"srcRssFeed"},n),o.createElement("p",null,a),o.createElement(Qo,{key:r,url:r,defaultItemsToShow:i})),c&&o.createElement(Yo,{href:c})))}},{key:"renderMenu",value:function(){var e=this;return this.props.menuConfig.map((function(t,n){var a="";return a=n===e.state.menuIndex?"SRC-pointed SRC-whiteText SRC-primary-background-color SRC-pointed-triangle-right SRC-primary-background-color-border-left":"SRC-blackText SRC-light-background",o.createElement("div",{key:t.feedName,className:"SRC-hand-cursor SRC-menu-button-base SRC-gap SRC-hoverWhiteText SRC-primary-background-color-hover ".concat(a),onClick:e.switchFeed(n),role:"button",tabIndex:0,style:{}},t.feedName)}))}}]),t}(o.Component),Zo=(n(1184),n(548)),Xo=n.n(Zo),$o=n(549),ei=n.n($o),ti=n(550),ni=n.n(ti),ai=n(551),ri=n.n(ai),oi=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e={"AMP-AD":ei.a,"M2OVE-AD":Xo.a,"MODEL-AD":ni.a,"Resilience-AD":ri.a};return o.createElement("div",null,o.createElement("hr",null),o.createElement("p",null," Generic Card Rendering "),o.createElement(Zr,{type:a.GENERIC_CARD,sql:"SELECT * FROM syn17024173",searchParams:{Program:"AMP-AD"},genericCardSchema:{type:"PROGRAM",title:"Full Name",subTitle:"Short Description",description:"Long Description",icon:"Program",secondaryLabels:["Full Name"]},backgroundColor:"#5960a5",isHeader:!0,iconOptions:e}),o.createElement(Zr,{type:a.MEDIUM_USER_CARD,sql:"SELECT ownerID as ownerId FROM syn13897207",loadingScreen:o.createElement("div",null," Im loading as fast I can !!! ")}))}}]),t}(o.Component),ii=function(){var e={type:a.GENERIC_CARD,genericCardSchema:{title:"Title",type:"Generic Tool",subTitle:"softwareType",description:"summary",icon:"icon",secondaryLabels:["contributor","diagnosis","program"]}};return o.createElement("div",{className:"col-xs-8 col-xs-offset-2"},o.createElement(Wa,{facetAliases:{contributor:"Contributor",diagnosis:"Diagnosis"},rgbIndex:5,initQueryRequest:{concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:a.BUNDLE_MASK_QUERY_COLUMN_MODELS|a.BUNDLE_MASK_QUERY_FACETS|a.BUNDLE_MASK_QUERY_SELECT_COLUMNS|a.BUNDLE_MASK_QUERY_COUNT|a.BUNDLE_MASK_QUERY_RESULTS,query:{sql:"SELECT * FROM syn20337467",limit:25,offset:0}},showBarChart:!1,unitDescription:"studies"},o.createElement(Lr,{searchable:[{columnName:"summary",hintText:"summary"},{columnName:"contributor",hintText:"Jane"},{columnName:"diagnosis",hintText:"LOAD"},{columnName:"modelType",hintText:"hint"}],isQueryWrapperMenuChild:!1}),o.createElement(Ir,e)))},si=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).onClose=function(){n.setState({showModal:!1})},n.onOpen=function(){console.log("opening"),n.setState({showModal:!0})},n.state={showModal:!1},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.createElement("div",{className:"container"},o.createElement("button",{onClick:this.onOpen,className:"btn btn-primary"}," Show ModalDownload "),this.state.showModal&&o.createElement(la,{sql:"SELECT * from syn17328596",entityId:"syn17328596",onClose:this.onClose}))}}]),t}(o.Component),ci=function(e){function t(e){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).call(this,e))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=["3376985","1131050","273960","3346401","3374422","273950","273950"];return o.createElement(o.Fragment,null,o.createElement("div",{className:"container"},o.createElement("div",{className:"row"},o.createElement("h3",null,"User Card Small "),o.createElement("p",null," sans photo- "),o.createElement(wa,{ownerId:"273950",size:a.SMALL_USER_CARD}),o.createElement("p",null," without text "),o.createElement(wa,{ownerId:"3374422",hideText:!0,size:a.SMALL_USER_CARD}),o.createElement("hr",null),o.createElement("p",null," with custom link- "),o.createElement(wa,{ownerId:"273950",size:a.SMALL_USER_CARD,link:"https://google.com"}),o.createElement(wa,{ownerId:"3374422",hideText:!0,size:a.SMALL_USER_CARD,link:"https://google.com"}),o.createElement("hr",null),o.createElement("p",null," without tooltip "),o.createElement("div",{className:"SRC-centerContent"},o.createElement(wa,{ownerId:"3374422",hideTooltip:!0,size:a.SMALL_USER_CARD}),o.createElement(wa,{ownerId:"3346401",hideTooltip:!0,size:a.SMALL_USER_CARD})),o.createElement("hr",null),o.createElement("p",null," with photo- "),o.createElement(wa,{ownerId:"3346401",size:a.SMALL_USER_CARD}),o.createElement(wa,{ownerId:"1131050",size:a.SMALL_USER_CARD}),o.createElement("p",null," without text- "),o.createElement(wa,{ownerId:"273960",hideText:!0,size:a.SMALL_USER_CARD}),o.createElement("hr",null),o.createElement("p",null,"inside of markdown-"),o.createElement(uo,{wikiId:"588827",ownerId:"syn18380882"})),o.createElement("div",{className:"row"},o.createElement("h3",null," User Card Large "),o.createElement("p",null," with photo- "),o.createElement(wa,{ownerId:"1131050",size:a.LARGE_USER_CARD,menuActions:[{field:"Projects",callback:function(e){console.log(e)}},{field:"Profile",callback:function(e){console.log(e)}},{field:"SEPERATOR"},{field:"Teams",callback:function(e){console.log(e)}}]}),o.createElement("br",null),o.createElement("p",null," sans photo- "),o.createElement("br",null),o.createElement(wa,{ownerId:"3374422",size:a.LARGE_USER_CARD}),o.createElement("br",null),o.createElement("br",null),o.createElement(wa,{ownerId:"345424",size:a.LARGE_USER_CARD,menuActions:[{field:"Projects",callback:function(e){console.log(e)}},{field:"Profile",callback:function(e){console.log(e)}},{field:"SEPERATOR"},{field:"Teams",callback:function(e){console.log(e)}}]}))),o.createElement("h3",null," User Card Medium Wrapping Example "),o.createElement("div",{className:"SRC-card-grid-row"},[1,2,3,4,5].map((function(t,n){return o.createElement("div",{className:"SRC-grid-item",key:n},o.createElement(wa,{hideEmail:n%2===0,menuActions:[{field:"Projects",callback:function(e){console.log(e)}},{field:"Profile",callback:function(e){console.log(e)}},{field:"SEPERATOR"},{field:"Teams",callback:function(e){console.log(e)}}],ownerId:e[n],size:a.MEDIUM_USER_CARD,link:n%2?"https://google.com":""}))}))))}}]),t}(o.Component),li=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={index:5,markdownPropsArray:[{ownerId:"syn3157182"},{ownerId:"syn12666371",wikiId:"585317"},{ownerId:"syn17100797",wikiId:"587923"},{ownerId:"syn17100797",wikiId:"587923"},{ownerId:"syn18142975"},{ownerId:"syn12666371",wikiId:"595383"}]},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.index,a=t.markdownPropsArray[n];return o.createElement("div",{className:"container"},o.createElement("button",{className:"btn btn-default",onClick:function(){e.setState({index:0})}},"Footnotes with html"),o.createElement("button",{className:"btn btn-default",onClick:function(){e.setState({index:1})}},"Details tag"),o.createElement("button",{className:"btn btn-default",onClick:function(){e.setState({index:2})}},"References"),o.createElement("button",{className:"btn btn-default",onClick:function(){e.setState({index:2})}},"Table of Contents"),o.createElement("button",{className:"btn btn-default",onClick:function(){e.setState({index:4})}},"Show nested anchor"),o.createElement(uo,a))}}]),t}(o.Component),ui=function(){return o.createElement(Jo,{menuConfig:[{feedName:"Data Releases",feedDescription:"The AMP-AD Knowledge Portal releases new Alzheimer's disease data twice annually, in May and November. Data releases may include new data, analyses, and results; as well as changes and updates to previously released data.",feedUrl:"https://portalnews.wpengine.com/?feed=rss2&cat=4",defaultItemsToShow:3},{feedName:"Updates",feedDescription:"The AMP-AD Knowledge Portal reaches the broader scientific community through multiple channels that encourage open-science collaborations. News updates include videos, events, and presentations that highlight the community behind the data.",feedUrl:"https://portalnews.wpengine.com/?feed=rss2&cat=3",defaultItemsToShow:3,twitterFeedUrl:"https://twitter.com/AMPADPortal?ref_src=twsrc%5Etfw"},{feedName:"Newsletter",feedDescription:"The AMP-AD Knowledge Portal sends a quarterly newsletter to interested members of the scientific community, delivering consolidated information and updates related to the Portal.",feedUrl:"https://portalnews.wpengine.com/?feed=rss2&cat=5",defaultItemsToShow:3,mailChimpListName:"AMP-AD quarterly newsletter",mailChimpUrl:"https://sagebase.us7.list-manage.com/subscribe/post?u=b146de537186191a9d2110f3a&amp;id=96b614587a"}]})},di=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).listMyFormData=function(){if(n.state.token&&n.state.formGroup&&!n.state.myFormDataList){var e={groupId:n.state.formGroup.groupId,filterByState:[Lo.ACCEPTED,Lo.SUBMITTED_WAITING_FOR_REVIEW,Lo.WAITING_FOR_SUBMISSION]};r.listFormData(e,n.state.token).then((function(e){console.log("Successfully got a my FormData list",e),n.setState({myFormDataList:e})})).catch((function(e){return console.error("Failed to get my FormData list",e)}))}},n.listFormAdminFormData=function(){if(n.state.token&&n.state.formGroup&&!n.state.formAdminFormDataList){var e={groupId:n.state.formGroup.groupId,filterByState:[Lo.ACCEPTED,Lo.SUBMITTED_WAITING_FOR_REVIEW]};r.listFormDataAsFormAdmin(e,n.state.token).then((function(e){console.log("Successfully got FormGroup admin list",e),n.setState({formAdminFormDataList:e})})).catch((function(e){return console.error("Failed to get FormGroup admin FormData list",e)}))}},n.onReadFormDataFileHandleContents=function(){r.getFileHandleContentFromID(n.state.formData.dataFileHandleId,n.state.token).then((function(e){console.log("Successfully fetched file handle contents: ",e)})).catch((function(e){return console.error("Failed to read form data file handle contents",e)}))},n.state={},n.onCreateFormGroup=n.onCreateFormGroup.bind(Object(g.a)(n)),n.onCreateFormData=n.onCreateFormData.bind(Object(g.a)(n)),n.onUpdateFormData=n.onUpdateFormData.bind(Object(g.a)(n)),n.onSubmitFormData=n.onSubmitFormData.bind(Object(g.a)(n)),n.listMyFormData=n.listMyFormData.bind(Object(g.a)(n)),n.listFormAdminFormData=n.listFormAdminFormData.bind(Object(g.a)(n)),n.onReadFormDataFileHandleContents=n.onReadFormDataFileHandleContents.bind(Object(g.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"onCreateFormGroup",value:function(){var e=this;r.createFormGroup("AAMP-ADExternalContribution(production)",this.state.token).then((function(t){console.log("Successfully created FormGroup",t),e.setState({formGroup:t})})).catch((function(e){return console.error("Failed to create form group",e)}))}},{key:"onUpdateFormData",value:function(){var e=this;r.uploadFile(this.state.token,"my test file",new Blob(["hello form data 2"])).then((function(t){console.log("Successfully created test file handle, now update the form data!"),r.updateFormData(e.state.formData.formDataId,"my test form data",t.fileHandleId,e.state.token).then((function(t){console.log("Successfully updated FormData",t),e.setState({formData:t})})).catch((function(e){return console.error("Failed to update FormData",e)}))})).catch((function(e){return console.error("Failed to update a new file handle:",e)}))}},{key:"onCreateFormData",value:function(){var e=this;r.uploadFile(this.state.token,"my test file",new Blob(["hello form data"])).then((function(t){console.log("Successfully created test file handle, now create the form data!"),r.createFormData(e.state.formGroup.groupId,"my test form data",t.fileHandleId,e.state.token).then((function(t){console.log("Successfully created FormData",t),e.setState({formData:t})})).catch((function(e){return console.error("Failed to create FormData",e)}))})).catch((function(e){return console.error("Failed to create a new file handle:",e)}))}},{key:"onSubmitFormData",value:function(){r.submitFormData(this.state.formData.formDataId,this.state.token).then((function(e){console.log("Successfully submitted FormData",e)})).catch((function(e){return console.error("Failed to submit form data",e)}))}},{key:"componentDidUpdate",value:function(){this.listMyFormData(),this.listFormAdminFormData()}},{key:"render",value:function(){var e=this;return o.createElement(pi.Consumer,null,(function(t){return t!==e.state.token&&e.setState({token:t}),t?o.createElement(o.Fragment,null,o.createElement("div",null,o.createElement("a",{onClick:e.onCreateFormGroup},"Create Form Group",o.createElement("br",null)),!e.state.formData&&o.createElement("a",{onClick:e.onCreateFormData},"Create Form Data",o.createElement("br",null)),e.state.formData&&o.createElement("a",{onClick:e.onReadFormDataFileHandleContents},"Get Form Data FileHandle contents",o.createElement("br",null)),e.state.formData&&o.createElement("a",{onClick:e.onUpdateFormData},"Update Form Data",o.createElement("br",null)),e.state.formData&&o.createElement("a",{onClick:e.onSubmitFormData},"Submit Form Data",o.createElement("br",null))),o.createElement("h3",null,"My FormData"),e.state.myFormDataList&&o.createElement("table",null,o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,"Form Data name"),o.createElement("th",null,"Data File Handle ID"),o.createElement("th",null,"Status"),o.createElement("th",null,"Rejection Reason"))),o.createElement("tbody",null,e.state.myFormDataList.page.map((function(e){return o.createElement("tr",null,o.createElement("td",null,e.name),o.createElement("td",null,e.dataFileHandleId),o.createElement("td",null,e.submissionStatus.state),o.createElement("td",null,e.submissionStatus.rejectionMessage))})))),o.createElement("h3",null,"FormGroup Admin FormData"),e.state.formAdminFormDataList&&o.createElement("table",null,o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,"Form Data name"),o.createElement("th",null,"Data File Handle ID"),o.createElement("th",null,"Status"),o.createElement("th",null,"Rejection Reason"))),o.createElement("tbody",null,e.state.formAdminFormDataList.page.map((function(e){return o.createElement("tr",null,o.createElement("td",null,e.name),o.createElement("td",null,e.dataFileHandleId),o.createElement("td",null,e.submissionStatus.state),o.createElement("td",null,e.submissionStatus.rejectionMessage))}))))):o.createElement(o.Fragment,null,o.createElement("p",null,"Please log in and reload this route"))}))}}]),t}(o.Component),mi=function(e){var t=e.match;return o.createElement("div",null,o.createElement("h2",null,"Links to components under development "),o.createElement("ul",null,o.createElement("li",null,o.createElement(p.b,{to:"".concat(t.url,"/QueryWrapperMenuDemo")},"QueryWrapperMenuDemo")),o.createElement("li",null,o.createElement(p.b,{to:"".concat(t.url,"/SearchDemo")},"SearchDemo")),o.createElement("li",null,o.createElement(p.b,{to:"".concat(t.url,"/CardContainerLogicDemo")},"CardContainerLogicDemo")),o.createElement("li",null,o.createElement(p.b,{to:"".concat(t.url,"/UserBadgeDemo")},"UserBadgeDemo")),o.createElement("li",null,o.createElement(p.b,{to:"".concat(t.url,"/MarkdownSynapseDemo")},"MarkdownSynapseDemo")),o.createElement("li",null,o.createElement(p.b,{to:"".concat(t.url,"/NewsFeedDemo")},"NewsFeedDemo")),o.createElement("li",null,o.createElement(p.b,{to:"".concat(t.url,"/FormServicesIntegrationDemo")},"FormServicesIntegrationDemo")),o.createElement("li",null,o.createElement(p.b,{to:"".concat(t.url,"/ModalDownloadDemo")},"ModalDownload"))),o.createElement(f.b,{exact:!0,path:"".concat(t.url,"/QueryWrapperMenuDemo"),render:function(){return o.createElement(Yr,{rgbIndex:0})}}),o.createElement(f.b,{exact:!0,path:"".concat(t.url,"/SearchDemo"),render:function(){return o.createElement(ii,null)}}),o.createElement(f.b,{exact:!0,path:"".concat(t.url,"/CardContainerLogicDemo"),component:oi}),o.createElement(f.b,{exact:!0,path:"".concat(t.url,"/UserBadgeDemo"),component:function(){return o.createElement(ci,null)}}),o.createElement(f.b,{exact:!0,path:"".concat(t.url,"/MarkdownSynapseDemo"),component:function(){return o.createElement(li,null)}}),o.createElement(f.b,{exact:!0,path:"".concat(t.url,"/NewsFeedDemo"),component:function(){return o.createElement(ui,null)}}),o.createElement(f.b,{exact:!0,path:"".concat(t.url,"/FormServicesIntegrationDemo"),component:function(){return o.createElement(di,null)}}),o.createElement(f.b,{exact:!0,path:"".concat(t.url,"/ModalDownloadDemo"),component:function(){return o.createElement(si,null)}}),o.createElement(f.b,{exact:!0,path:t.path,component:function(){return o.createElement("div",null)}}))},pi=o.createContext(""),fi=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){n.setState(e)},n.state={token:""},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;r.detectSSOCode(),r.getSessionTokenFromCookie().then((function(t){return e.handleChange({token:t})})).catch((function(e){console.error(e)}))}},{key:"renderLoginAndSignout",value:function(e){var t=o.createElement("div",{className:"bg-success text-center",role:"alert"},"You are logged in.\xa0",o.createElement("button",{onClick:function(){r.signOut()}},o.createElement("span",{"aria-hidden":"true"},"Sign out"))),n=o.createElement("div",{className:"text-center"},o.createElement("h4",null,"Synapse Production (Google SSO redirects here)"),o.createElement(Vt,{token:r.IS_OUTSIDE_SYNAPSE_ORG?e:this.state.token,theme:"light",icon:!0}),o.createElement("details",null,o.createElement("summary",null,"Synapse Staging (Google SSO redirects to staging site)"),o.createElement(Vt,{token:r.IS_OUTSIDE_SYNAPSE_ORG?e:this.state.token,theme:"dark",icon:!0,googleRedirectUrl:"https://staging.synapse.org/Portal/oauth2callback?oauth2provider=GOOGLE_OAUTH_2_0",repoEndpoint:"https://repo-staging.prod.sagebase.org/",swcEndpoint:"https://staging.sagebase.org/"})),o.createElement("hr",null));return e&&""!==e?t:n}},{key:"render",value:function(){var e=this;return o.createElement(pi.Provider,{value:this.state.token},o.createElement(p.a,{basename:"/Synapse-React-Client"},o.createElement("div",null,o.createElement("div",{className:"App-header text-center"},o.createElement("img",{src:Gt.a,className:"App-logo",alt:"logo"}),o.createElement("h4",{className:"white-text"},"Synapse React Client Demo")),this.renderLoginAndSignout(this.state.token),o.createElement("ul",null,o.createElement("li",null,o.createElement(p.b,{to:"/"},"Demo")),o.createElement("li",null,o.createElement(p.b,{to:"/Playground"},"Playground")),o.createElement("li",null,o.createElement(p.b,{to:"/drugUploadTool"},"Drug Upload Tool")),o.createElement("li",null,o.createElement(p.b,{to:"/contribReqForm"},"AMP-AD external data contribution "))),o.createElement(f.b,{exact:!0,path:"/",component:Qr}),o.createElement(f.b,{path:"/Playground",component:mi}),o.createElement(f.b,{exact:!0,path:"/drugUploadTool",render:function(t){var n={};return new URLSearchParams(t.location.search).forEach((function(e,t){n[t]=e})),t.location.search?o.createElement(Mo,Object.assign({},t,{formSchemaEntityId:"syn20680102",fileNamePath:"naming.compound_name",formUiSchemaEntityId:"syn20693568",formNavSchemaEntityId:"syn20680027",token:e.state.token,formTitle:"Your Submission",formClass:"drug-upload-tool",searchParams:n})):o.createElement(Wo,{pathpart:"drugUploadTool",token:e.state.token,formClass:"drug-upload-tool",formGroupId:"9",itemNoun:"Compound"})}}),o.createElement(f.b,{exact:!0,path:"/contribReqForm",render:function(t){var n={};return new URLSearchParams(t.location.search).forEach((function(e,t){n[t]=e})),t.location.search?o.createElement(Mo,Object.assign({},t,{formSchemaEntityId:"syn20692910",fileNamePath:"study.submission_name",formUiSchemaEntityId:"syn20692911",formNavSchemaEntityId:"syn20968007",isWizardMode:!0,token:e.state.token,formTitle:"Your Contribution Request",formClass:"contribution-request",searchParams:n})):o.createElement(Wo,{pathpart:"contribReqForm",formGroupId:"11",token:e.state.token,formClass:"contribution-request",itemNoun:"Contribution Request"})}}))))}}]),t}(o.Component);s.render(o.createElement(fi,null),document.getElementById("root"))},326:function(e,t,n){e.exports=n.p+"static/media/Data2.1104e430.svg"},465:function(e,t,n){},514:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},515:function(e,t,n){e.exports=n.p+"static/media/columns.94835d60.svg"},516:function(e,t,n){e.exports=n.p+"static/media/expand.2b935894.svg"},517:function(e,t,n){e.exports=n.p+"static/media/shrink.199a8060.svg"},518:function(e,t,n){e.exports=n.p+"static/media/Publication.b630024c.svg"},519:function(e,t,n){e.exports=n.p+"static/media/study-active.bc52e72b.svg"},520:function(e,t,n){e.exports=n.p+"static/media/study.79d24d74.svg"},521:function(e,t,n){e.exports=n.p+"static/media/study-complete.b012f80b.svg"},522:function(e,t,n){e.exports=n.p+"static/media/DNA_Two.d8f80972.svg"},523:function(e,t,n){e.exports=n.p+"static/media/ToolClinical.ca6b9056.svg"},524:function(e,t,n){e.exports=n.p+"static/media/ToolComputational.b3b0a1a1.svg"},525:function(e,t,n){e.exports=n.p+"static/media/ToolExperimental.30e19c72.svg"},526:function(e,t,n){e.exports=n.p+"static/media/project.28806f03.svg"},529:function(e,t,n){e.exports=n.p+"static/media/ctf.4eb55044.svg"},530:function(e,t,n){e.exports=n.p+"static/media/dhart.e554b25a.svg"},531:function(e,t,n){e.exports=n.p+"static/media/ntap.e9543055.svg"},532:function(e,t,n){e.exports=n.p+"static/media/amp-icon-header.71a5e101.svg"},533:function(e,t,n){e.exports=n.p+"static/media/amp-icon.3593ecd7.svg"},534:function(e,t,n){e.exports=n.p+"static/media/move-icon-header.dd07eaeb.svg"},535:function(e,t,n){e.exports=n.p+"static/media/move-icon.2f85f6de.svg"},536:function(e,t,n){e.exports=n.p+"static/media/ModelAD-icon-header.d2e9fd8e.svg"},537:function(e,t,n){e.exports=n.p+"static/media/ModelAD-icon.e37944bf.svg"},538:function(e,t,n){e.exports=n.p+"static/media/resilience-icon-header.595fa5fa.svg"},539:function(e,t,n){e.exports=n.p+"static/media/resilience-icon.b1a30ae3.svg"},545:function(e,t,n){e.exports=n.p+"static/media/json-form-tool-no-submissions.e64940c0.svg"},548:function(e,t,n){e.exports=n.p+"static/media/brain.c6301611.svg"},549:function(e,t,n){e.exports=n.p+"static/media/circle.ed6d433a.svg"},550:function(e,t,n){e.exports=n.p+"static/media/mouse.7e294e96.svg"},551:function(e,t,n){e.exports=n.p+"static/media/resiliencead.7500217a.svg"},555:function(e,t,n){e.exports=n(1185)},758:function(e,t,n){},759:function(e,t,n){}},[[555,1,2]]]);
//# sourceMappingURL=main.b811bb56.chunk.js.map