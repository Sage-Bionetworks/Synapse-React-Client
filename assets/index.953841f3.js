import{c as rr,H as Zr,h as kf}from"./iframe.37379422.js";import{u as Se,e as Be,r as pe,a as Ne,i as ee}from"./index.b9529b57.js";import{b as Re}from"./index.66e0b57e.js";import{i as Ir}from"./index.440cefe9.js";function Te(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function hn(e,r){for(var t="",n=0,i=-1,o=0,f,a=0;a<=e.length;++a){if(a<e.length)f=e.charCodeAt(a);else{if(f===47)break;f=47}if(f===47){if(!(i===a-1||o===1))if(i!==a-1&&o===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var g=t.lastIndexOf("/");if(g!==t.length-1){g===-1?(t="",n=0):(t=t.slice(0,g),n=t.length-1-t.lastIndexOf("/")),i=a,o=0;continue}}else if(t.length===2||t.length===1){t="",n=0,i=a,o=0;continue}}r&&(t.length>0?t+="/..":t="..",n=2)}else t.length>0?t+="/"+e.slice(i+1,a):t=e.slice(i+1,a),n=a-i-1;i=a,o=0}else f===46&&o!==-1?++o:o=-1}return t}function Nf(e,r){var t=r.dir||r.root,n=r.base||(r.name||"")+(r.ext||"");return t?t===r.root?t+n:t+e+n:n}var He={resolve:function(){for(var r="",t=!1,n,i=arguments.length-1;i>=-1&&!t;i--){var o;i>=0?o=arguments[i]:(n===void 0&&(n=process.cwd()),o=n),Te(o),o.length!==0&&(r=o+"/"+r,t=o.charCodeAt(0)===47)}return r=hn(r,!t),t?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(r){if(Te(r),r.length===0)return".";var t=r.charCodeAt(0)===47,n=r.charCodeAt(r.length-1)===47;return r=hn(r,!t),r.length===0&&!t&&(r="."),r.length>0&&n&&(r+="/"),t?"/"+r:r},isAbsolute:function(r){return Te(r),r.length>0&&r.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var r,t=0;t<arguments.length;++t){var n=arguments[t];Te(n),n.length>0&&(r===void 0?r=n:r+="/"+n)}return r===void 0?".":He.normalize(r)},relative:function(r,t){if(Te(r),Te(t),r===t||(r=He.resolve(r),t=He.resolve(t),r===t))return"";for(var n=1;n<r.length&&r.charCodeAt(n)===47;++n);for(var i=r.length,o=i-n,f=1;f<t.length&&t.charCodeAt(f)===47;++f);for(var a=t.length,g=a-f,h=o<g?o:g,p=-1,d=0;d<=h;++d){if(d===h){if(g>h){if(t.charCodeAt(f+d)===47)return t.slice(f+d+1);if(d===0)return t.slice(f+d)}else o>h&&(r.charCodeAt(n+d)===47?p=d:d===0&&(p=0));break}var w=r.charCodeAt(n+d),c=t.charCodeAt(f+d);if(w!==c)break;w===47&&(p=d)}var u="";for(d=n+p+1;d<=i;++d)(d===i||r.charCodeAt(d)===47)&&(u.length===0?u+="..":u+="/..");return u.length>0?u+t.slice(f+p):(f+=p,t.charCodeAt(f)===47&&++f,t.slice(f))},_makeLong:function(r){return r},dirname:function(r){if(Te(r),r.length===0)return".";for(var t=r.charCodeAt(0),n=t===47,i=-1,o=!0,f=r.length-1;f>=1;--f)if(t=r.charCodeAt(f),t===47){if(!o){i=f;break}}else o=!1;return i===-1?n?"/":".":n&&i===1?"//":r.slice(0,i)},basename:function(r,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Te(r);var n=0,i=-1,o=!0,f;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";var a=t.length-1,g=-1;for(f=r.length-1;f>=0;--f){var h=r.charCodeAt(f);if(h===47){if(!o){n=f+1;break}}else g===-1&&(o=!1,g=f+1),a>=0&&(h===t.charCodeAt(a)?--a===-1&&(i=f):(a=-1,i=g))}return n===i?i=g:i===-1&&(i=r.length),r.slice(n,i)}else{for(f=r.length-1;f>=0;--f)if(r.charCodeAt(f)===47){if(!o){n=f+1;break}}else i===-1&&(o=!1,i=f+1);return i===-1?"":r.slice(n,i)}},extname:function(r){Te(r);for(var t=-1,n=0,i=-1,o=!0,f=0,a=r.length-1;a>=0;--a){var g=r.charCodeAt(a);if(g===47){if(!o){n=a+1;break}continue}i===-1&&(o=!1,i=a+1),g===46?t===-1?t=a:f!==1&&(f=1):t!==-1&&(f=-1)}return t===-1||i===-1||f===0||f===1&&t===i-1&&t===n+1?"":r.slice(t,i)},format:function(r){if(r===null||typeof r!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof r);return Nf("/",r)},parse:function(r){Te(r);var t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;var n=r.charCodeAt(0),i=n===47,o;i?(t.root="/",o=1):o=0;for(var f=-1,a=0,g=-1,h=!0,p=r.length-1,d=0;p>=o;--p){if(n=r.charCodeAt(p),n===47){if(!h){a=p+1;break}continue}g===-1&&(h=!1,g=p+1),n===46?f===-1?f=p:d!==1&&(d=1):f!==-1&&(d=-1)}return f===-1||g===-1||d===0||d===1&&f===g-1&&f===a+1?g!==-1&&(a===0&&i?t.base=t.name=r.slice(1,g):t.base=t.name=r.slice(a,g)):(a===0&&i?(t.name=r.slice(1,f),t.base=r.slice(1,g)):(t.name=r.slice(a,f),t.base=r.slice(a,g)),t.ext=r.slice(f,g)),a>0?t.dir=r.slice(0,a-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};He.posix=He;var jf=He,fi={exports:{}};(function(e){/**
 * @license IDBWrapper - A cross-browser wrapper for IndexedDB
 * Version 1.7.2
 * Copyright (c) 2011 - 2017 Jens Arps
 * http://jensarps.de/
 *
 * Licensed under the MIT license
 */(function(r,t,n){e.exports?e.exports=t():n[r]=t()})("IDBStore",function(){var r=function(h){throw h},t=function(){},n={storeName:"Store",storePrefix:"IDBWrapper-",dbVersion:1,keyPath:"id",autoIncrement:!0,onStoreReady:function(){},onError:r,indexes:[],implementationPreference:["indexedDB","webkitIndexedDB","mozIndexedDB","shimIndexedDB"]},i=function(h,p){typeof p>"u"&&typeof h=="function"&&(p=h),Object.prototype.toString.call(h)!="[object Object]"&&(h={});for(var d in n)this[d]=typeof h[d]<"u"?h[d]:n[d];this.dbName=this.storePrefix+this.storeName,this.dbVersion=parseInt(this.dbVersion,10)||1,p&&(this.onStoreReady=p);var w=typeof window=="object"?window:self,c=this.implementationPreference.filter(function(u){return u in w});this.implementation=c[0],this.idb=w[this.implementation],this.keyRange=w.IDBKeyRange||w.webkitIDBKeyRange||w.mozIDBKeyRange,this.consts={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_NO_DUPLICATE:"nextunique",PREV:"prev",PREV_NO_DUPLICATE:"prevunique"},this.openDB()},o={constructor:i,version:"1.7.2",db:null,dbName:null,dbVersion:null,store:null,storeName:null,storePrefix:null,keyPath:null,autoIncrement:null,indexes:null,implementationPreference:null,implementation:"",onStoreReady:null,onError:null,_insertIdCount:0,openDB:function(){var h=this.idb.open(this.dbName,this.dbVersion),p=!1;h.onerror=function(d){if(g(d))this.onError(new Error("The version number provided is lower than the existing one."));else{var w;if(d.target.error)w=d.target.error;else{var c="IndexedDB unknown error occurred when opening DB "+this.dbName+" version "+this.dbVersion;"errorCode"in d.target&&(c+=" with error code "+d.target.errorCode),w=new Error(c)}this.onError(w)}}.bind(this),h.onsuccess=function(d){if(!p){if(this.db){this.onStoreReady();return}if(this.db=d.target.result,typeof this.db.version=="string"){this.onError(new Error("The IndexedDB implementation in this browser is outdated. Please upgrade your browser."));return}if(!this.db.objectStoreNames.contains(this.storeName)){this.onError(new Error("Object store couldn't be created."));return}var w=this.db.transaction([this.storeName],this.consts.READ_ONLY);this.store=w.objectStore(this.storeName);var c=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(u){var v=u.name;if(!v){p=!0,this.onError(new Error("Cannot create index: No index name given."));return}if(this.normalizeIndexData(u),this.hasIndex(v)){var S=this.store.index(v),b=this.indexComplies(S,u);b||(p=!0,this.onError(new Error('Cannot modify index "'+v+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),c.splice(c.indexOf(v),1)}else p=!0,this.onError(new Error('Cannot create new index "'+v+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))},this),c.length&&(p=!0,this.onError(new Error('Cannot delete index(es) "'+c.toString()+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),p||this.onStoreReady()}}.bind(this),h.onupgradeneeded=function(d){if(this.db=d.target.result,this.db.objectStoreNames.contains(this.storeName))this.store=d.target.transaction.objectStore(this.storeName);else{var w={autoIncrement:this.autoIncrement};this.keyPath!==null&&(w.keyPath=this.keyPath),this.store=this.db.createObjectStore(this.storeName,w)}var c=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(u){var v=u.name;if(v||(p=!0,this.onError(new Error("Cannot create index: No index name given."))),this.normalizeIndexData(u),this.hasIndex(v)){var S=this.store.index(v),b=this.indexComplies(S,u);b||(this.store.deleteIndex(v),this.store.createIndex(v,u.keyPath,{unique:u.unique,multiEntry:u.multiEntry})),c.splice(c.indexOf(v),1)}else this.store.createIndex(v,u.keyPath,{unique:u.unique,multiEntry:u.multiEntry})},this),c.length&&c.forEach(function(u){this.store.deleteIndex(u)},this)}.bind(this)},deleteDatabase:function(h,p){if(this.idb.deleteDatabase){this.db.close();var d=this.idb.deleteDatabase(this.dbName);d.onsuccess=h,d.onerror=p}else p(new Error("Browser does not support IndexedDB deleteDatabase!"))},put:function(h,p,d,w){this.keyPath!==null&&(w=d,d=p,p=h),w||(w=r),d||(d=t);var c=!1,u=null,v,S=this.db.transaction([this.storeName],this.consts.READ_WRITE);return S.oncomplete=function(){var b=c?d:w;b(u)},S.onabort=w,S.onerror=w,this.keyPath!==null?(this._addIdPropertyIfNeeded(p),v=S.objectStore(this.storeName).put(p)):v=S.objectStore(this.storeName).put(p,h),v.onsuccess=function(b){c=!0,u=b.target.result},v.onerror=w,S},get:function(h,p,d){d||(d=r),p||(p=t);var w=!1,c=null,u=this.db.transaction([this.storeName],this.consts.READ_ONLY);u.oncomplete=function(){var S=w?p:d;S(c)},u.onabort=d,u.onerror=d;var v=u.objectStore(this.storeName).get(h);return v.onsuccess=function(S){w=!0,c=S.target.result},v.onerror=d,u},remove:function(h,p,d){d||(d=r),p||(p=t);var w=!1,c=null,u=this.db.transaction([this.storeName],this.consts.READ_WRITE);u.oncomplete=function(){var S=w?p:d;S(c)},u.onabort=d,u.onerror=d;var v=u.objectStore(this.storeName).delete(h);return v.onsuccess=function(S){w=!0,c=S.target.result},v.onerror=d,u},batch:function(h,p,d){if(d||(d=r),p||(p=t),Object.prototype.toString.call(h)!="[object Array]")d(new Error("dataArray argument must be of type Array."));else if(h.length===0)return p(!0);var w=h.length,c=!1,u=!1,v=this.db.transaction([this.storeName],this.consts.READ_WRITE);v.oncomplete=function(){var b=u?p:d;b(u)},v.onabort=d,v.onerror=d;var S=function(){w--,w===0&&!c&&(c=!0,u=!0)};return h.forEach(function(b){var E=b.type,D=b.key,y=b.value,s=function(A){v.abort(),c||(c=!0,d(A,E,D))};if(E=="remove"){var l=v.objectStore(this.storeName).delete(D);l.onsuccess=S,l.onerror=s}else if(E=="put"){var x;this.keyPath!==null?(this._addIdPropertyIfNeeded(y),x=v.objectStore(this.storeName).put(y)):x=v.objectStore(this.storeName).put(y,D),x.onsuccess=S,x.onerror=s}},this),v},putBatch:function(h,p,d){var w=h.map(function(c){return{type:"put",value:c}});return this.batch(w,p,d)},upsertBatch:function(h,p,d,w){typeof p=="function"&&(d=p,w=d,p={}),w||(w=r),d||(d=t),p||(p={}),Object.prototype.toString.call(h)!="[object Array]"&&w(new Error("dataArray argument must be of type Array."));var c=p.keyField||this.keyPath,u=h.length,v=!1,S=!1,b=0,E=this.db.transaction([this.storeName],this.consts.READ_WRITE);E.oncomplete=function(){S?d(h):w(!1)},E.onabort=w,E.onerror=w;var D=function(y){var s=h[b++];s[c]=y.target.result,u--,u===0&&!v&&(v=!0,S=!0)};return h.forEach(function(y){var s=y.key,l=function(A){E.abort(),v||(v=!0,w(A))},x;this.keyPath!==null?(this._addIdPropertyIfNeeded(y),x=E.objectStore(this.storeName).put(y)):x=E.objectStore(this.storeName).put(y,s),x.onsuccess=D,x.onerror=l},this),E},removeBatch:function(h,p,d){var w=h.map(function(c){return{type:"remove",key:c}});return this.batch(w,p,d)},getBatch:function(h,p,d,w){if(d||(d=r),p||(p=t),w||(w="sparse"),Object.prototype.toString.call(h)!="[object Array]")d(new Error("keyArray argument must be of type Array."));else if(h.length===0)return p([]);var c=[],u=h.length,v=!1,S=null,b=this.db.transaction([this.storeName],this.consts.READ_ONLY);b.oncomplete=function(){var D=v?p:d;D(S)},b.onabort=d,b.onerror=d;var E=function(D){D.target.result||w=="dense"?c.push(D.target.result):w=="sparse"&&c.length++,u--,u===0&&(v=!0,S=c)};return h.forEach(function(D){var y=function(l){S=l,d(l),b.abort()},s=b.objectStore(this.storeName).get(D);s.onsuccess=E,s.onerror=y},this),b},getAll:function(h,p){p||(p=r),h||(h=t);var d=this.db.transaction([this.storeName],this.consts.READ_ONLY),w=d.objectStore(this.storeName);return w.getAll?this._getAllNative(d,w,h,p):this._getAllCursor(d,w,h,p),d},_getAllNative:function(h,p,d,w){var c=!1,u=null;h.oncomplete=function(){var S=c?d:w;S(u)},h.onabort=w,h.onerror=w;var v=p.getAll();v.onsuccess=function(S){c=!0,u=S.target.result},v.onerror=w},_getAllCursor:function(h,p,d,w){var c=[],u=!1,v=null;h.oncomplete=function(){var b=u?d:w;b(v)},h.onabort=w,h.onerror=w;var S=p.openCursor();S.onsuccess=function(b){var E=b.target.result;E?(c.push(E.value),E.continue()):(u=!0,v=c)},S.onError=w},clear:function(h,p){p||(p=r),h||(h=t);var d=!1,w=null,c=this.db.transaction([this.storeName],this.consts.READ_WRITE);c.oncomplete=function(){var v=d?h:p;v(w)},c.onabort=p,c.onerror=p;var u=c.objectStore(this.storeName).clear();return u.onsuccess=function(v){d=!0,w=v.target.result},u.onerror=p,c},_addIdPropertyIfNeeded:function(h){typeof h[this.keyPath]>"u"&&(h[this.keyPath]=this._insertIdCount+++Date.now())},getIndexList:function(){return this.store.indexNames},hasIndex:function(h){return this.store.indexNames.contains(h)},normalizeIndexData:function(h){h.keyPath=h.keyPath||h.name,h.unique=!!h.unique,h.multiEntry=!!h.multiEntry},indexComplies:function(h,p){var d=["keyPath","unique","multiEntry"].every(function(w){if(w=="multiEntry"&&h[w]===void 0&&p[w]===!1)return!0;if(w=="keyPath"&&Object.prototype.toString.call(p[w])=="[object Array]"){var c=p.keyPath,u=h.keyPath;if(typeof u=="string")return c.toString()==u;if(!(typeof u.contains=="function"||typeof u.indexOf=="function")||u.length!==c.length)return!1;for(var v=0,S=c.length;v<S;v++)if(!(u.contains&&u.contains(c[v])||u.indexOf(c[v]!==-1)))return!1;return!0}return p[w]==h[w]});return d},iterate:function(h,p){p=a({index:null,order:"ASC",autoContinue:!0,filterDuplicates:!1,keyRange:null,writeAccess:!1,onEnd:null,onError:r,limit:1/0,offset:0,allowItemRejection:!1},p||{});var d=p.order.toLowerCase()=="desc"?"PREV":"NEXT";p.filterDuplicates&&(d+="_NO_DUPLICATE");var w=!1,c=this.db.transaction([this.storeName],this.consts[p.writeAccess?"READ_WRITE":"READ_ONLY"]),u=c.objectStore(this.storeName);p.index&&(u=u.index(p.index));var v=0;c.oncomplete=function(){if(!w){p.onError(null);return}p.onEnd?p.onEnd():h(null)},c.onabort=p.onError,c.onerror=p.onError;var S=u.openCursor(p.keyRange,this.consts[d]);return S.onerror=p.onError,S.onsuccess=function(b){var E=b.target.result;if(E)if(p.offset)E.advance(p.offset),p.offset=0;else{var D=h(E.value,E,c);(!p.allowItemRejection||D!==!1)&&v++,p.autoContinue&&(v+p.offset<p.limit?E.continue():w=!0)}else w=!0},c},query:function(h,p){var d=[],w=0;return p=p||{},p.autoContinue=!0,p.writeAccess=!1,p.allowItemRejection=!!p.filter,p.onEnd=function(){h(d,w)},this.iterate(function(c){w++;var u=p.filter?p.filter(c):!0;return u!==!1&&d.push(c),u},p)},count:function(h,p){p=a({index:null,keyRange:null},p||{});var d=p.onError||r,w=!1,c=null,u=this.db.transaction([this.storeName],this.consts.READ_ONLY);u.oncomplete=function(){var b=w?h:d;b(c)},u.onabort=d,u.onerror=d;var v=u.objectStore(this.storeName);p.index&&(v=v.index(p.index));var S=v.count(p.keyRange);return S.onsuccess=function(b){w=!0,c=b.target.result},S.onError=d,u},makeKeyRange:function(h){var p,d=typeof h.lower<"u",w=typeof h.upper<"u",c=typeof h.only<"u";switch(!0){case c:p=this.keyRange.only(h.only);break;case(d&&w):p=this.keyRange.bound(h.lower,h.upper,h.excludeLower,h.excludeUpper);break;case d:p=this.keyRange.lowerBound(h.lower,h.excludeLower);break;case w:p=this.keyRange.upperBound(h.upper,h.excludeUpper);break;default:throw new Error('Cannot create KeyRange. Provide one or both of "lower" or "upper" value, or an "only" value.')}return p}},f={};function a(h,p){var d,w;for(d in p)w=p[d],w!==f[d]&&w!==h[d]&&(h[d]=w);return h}function g(h){return"error"in h.target?h.target.error.name=="VersionError":"errorCode"in h.target?h.target.errorCode==12:!1}return i.prototype=o,i.version=o.version,i},rr)})(fi);var tr={},Cf=$f;function $f(){for(var e={},r=0;r<arguments.length;r++){var t=arguments[r];for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}return e}function Ft(e){this.db=e,this._ended=!1,this._nexting=!1}Ft.prototype.next=function(e){var r=this;if(typeof e!="function")throw new Error("next() requires a callback argument");if(r._ended)return e(new Error("cannot call next() after end()"));if(r._nexting)return e(new Error("cannot call next() before previous next() has completed"));if(r._nexting=!0,typeof r._next=="function")return r._next(function(){r._nexting=!1,e.apply(null,arguments)});process.nextTick(function(){r._nexting=!1,e()})};Ft.prototype.end=function(e){if(typeof e!="function")throw new Error("end() requires a callback argument");if(this._ended)return e(new Error("end() already called on iterator"));if(this._ended=!0,typeof this._end=="function")return this._end(e);process.nextTick(e)};var If=Ft;function nr(e){this._db=e,this._operations=[],this._written=!1}nr.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")};nr.prototype.put=function(e,r){this._checkWritten();var t=this._db._checkKeyValue(e,"key",this._db._isBuffer);if(t||(t=this._db._checkKeyValue(r,"value",this._db._isBuffer),t))throw t;return this._db._isBuffer(e)||(e=String(e)),this._db._isBuffer(r)||(r=String(r)),typeof this._put=="function"?this._put(e,r):this._operations.push({type:"put",key:e,value:r}),this};nr.prototype.del=function(e){this._checkWritten();var r=this._db._checkKeyValue(e,"key",this._db._isBuffer);if(r)throw r;return this._db._isBuffer(e)||(e=String(e)),typeof this._del=="function"?this._del(e):this._operations.push({type:"del",key:e}),this};nr.prototype.clear=function(){return this._checkWritten(),this._operations=[],typeof this._clear=="function"&&this._clear(),this};nr.prototype.write=function(e,r){if(this._checkWritten(),typeof e=="function"&&(r=e),typeof r!="function")throw new Error("write() requires a callback argument");if(typeof e!="object"&&(e={}),this._written=!0,typeof this._write=="function")return this._write(r);if(typeof this._db._batch=="function")return this._db._batch(this._operations,e,r);process.nextTick(r)};var Lf=nr,Wf=Cf,oi=If,ai=Lf;function Ee(e){if(!arguments.length||e===void 0)throw new Error("constructor requires at least a location argument");if(typeof e!="string")throw new Error("constructor requires a location string argument");this.location=e}Ee.prototype.open=function(e,r){if(typeof e=="function"&&(r=e),typeof r!="function")throw new Error("open() requires a callback argument");if(typeof e!="object"&&(e={}),typeof this._open=="function")return this._open(e,r);process.nextTick(r)};Ee.prototype.close=function(e){if(typeof e!="function")throw new Error("close() requires a callback argument");if(typeof this._close=="function")return this._close(e);process.nextTick(e)};Ee.prototype.get=function(e,r,t){var n;if(typeof r=="function"&&(t=r),typeof t!="function")throw new Error("get() requires a callback argument");if(n=this._checkKeyValue(e,"key",this._isBuffer))return t(n);if(this._isBuffer(e)||(e=String(e)),typeof r!="object"&&(r={}),typeof this._get=="function")return this._get(e,r,t);process.nextTick(function(){t(new Error("NotFound"))})};Ee.prototype.put=function(e,r,t,n){var i;if(typeof t=="function"&&(n=t),typeof n!="function")throw new Error("put() requires a callback argument");if((i=this._checkKeyValue(e,"key",this._isBuffer))||(i=this._checkKeyValue(r,"value",this._isBuffer)))return n(i);if(this._isBuffer(e)||(e=String(e)),!this._isBuffer(r)&&!process.browser&&(r=String(r)),typeof t!="object"&&(t={}),typeof this._put=="function")return this._put(e,r,t,n);process.nextTick(n)};Ee.prototype.del=function(e,r,t){var n;if(typeof r=="function"&&(t=r),typeof t!="function")throw new Error("del() requires a callback argument");if(n=this._checkKeyValue(e,"key",this._isBuffer))return t(n);if(this._isBuffer(e)||(e=String(e)),typeof r!="object"&&(r={}),typeof this._del=="function")return this._del(e,r,t);process.nextTick(t)};Ee.prototype.batch=function(e,r,t){if(!arguments.length)return this._chainedBatch();if(typeof r=="function"&&(t=r),typeof t!="function")throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return t(new Error("batch(array) requires an array argument"));typeof r!="object"&&(r={});for(var n=0,i=e.length,o,f;n<i;n++)if(o=e[n],typeof o=="object"&&((f=this._checkKeyValue(o.type,"type",this._isBuffer))||(f=this._checkKeyValue(o.key,"key",this._isBuffer))||o.type=="put"&&(f=this._checkKeyValue(o.value,"value",this._isBuffer))))return t(f);if(typeof this._batch=="function")return this._batch(e,r,t);process.nextTick(t)};Ee.prototype.approximateSize=function(e,r,t){if(e==null||r==null||typeof e=="function"||typeof r=="function")throw new Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if(typeof t!="function")throw new Error("approximateSize() requires a callback argument");if(this._isBuffer(e)||(e=String(e)),this._isBuffer(r)||(r=String(r)),typeof this._approximateSize=="function")return this._approximateSize(e,r,t);process.nextTick(function(){t(null,0)})};Ee.prototype._setupIteratorOptions=function(e){var r=this;return e=Wf(e),["start","end","gt","gte","lt","lte"].forEach(function(t){e[t]&&r._isBuffer(e[t])&&e[t].length===0&&delete e[t]}),e.reverse=!!e.reverse,e.reverse&&e.lt&&(e.start=e.lt),e.reverse&&e.lte&&(e.start=e.lte),!e.reverse&&e.gt&&(e.start=e.gt),!e.reverse&&e.gte&&(e.start=e.gte),(e.reverse&&e.lt&&!e.lte||!e.reverse&&e.gt&&!e.gte)&&(e.exclusiveStart=!0),e};Ee.prototype.iterator=function(e){return typeof e!="object"&&(e={}),e=this._setupIteratorOptions(e),typeof this._iterator=="function"?this._iterator(e):new oi(this)};Ee.prototype._chainedBatch=function(){return new ai(this)};Ee.prototype._isBuffer=function(e){return Buffer.isBuffer(e)};Ee.prototype._checkKeyValue=function(e,r){if(e==null)return new Error(r+" cannot be `null` or `undefined`");if(this._isBuffer(e)){if(e.length===0)return new Error(r+" cannot be an empty Buffer")}else if(String(e)==="")return new Error(r+" cannot be an empty String")};tr.AbstractLevelDOWN=Ee;tr.AbstractIterator=oi;tr.AbstractChainedBatch=ai;var ui={};(function(e){e.compare=function(c,u){if(Buffer.isBuffer(c)){for(var v=Math.min(c.length,u.length),S=0;S<v;S++){var b=c[S]-u[S];if(b)return b}return c.length-u.length}return c<u?-1:c>u?1:0};function r(c){return c!==void 0&&c!==""}function t(c,u){return Object.hasOwnProperty.call(c,u)}function n(c,u){return Object.hasOwnProperty.call(c,u)&&u}var i=e.lowerBoundKey=function(c){return n(c,"gt")||n(c,"gte")||n(c,"min")||(c.reverse?n(c,"end"):n(c,"start"))||void 0},o=e.lowerBound=function(c,u){var v=i(c);return v?c[v]:u},f=e.lowerBoundInclusive=function(c){return!t(c,"gt")},a=e.upperBoundInclusive=function(c){return!t(c,"lt")},g=e.lowerBoundExclusive=function(c){return!f(c)},h=e.upperBoundExclusive=function(c){return!a(c)},p=e.upperBoundKey=function(c){return n(c,"lt")||n(c,"lte")||n(c,"max")||(c.reverse?n(c,"start"):n(c,"end"))||void 0},d=e.upperBound=function(c,u){var v=p(c);return v?c[v]:u};e.start=function(c,u){return c.reverse?d(c,u):o(c,u)},e.end=function(c,u){return c.reverse?o(c,u):d(c,u)},e.startInclusive=function(c){return c.reverse?a(c):f(c)},e.endInclusive=function(c){return c.reverse?f(c):a(c)};function w(c){return c}e.toLtgt=function(c,u,v,S,b){u=u||{},v=v||w;var E=arguments.length>3,D=e.lowerBoundKey(c),y=e.upperBoundKey(c);return D?D==="gt"?u.gt=v(c.gt,!1):u.gte=v(c[D],!1):E&&(u.gte=v(S,!1)),y?y==="lt"?u.lt=v(c.lt,!0):u.lte=v(c[y],!0):E&&(u.lte=v(b,!0)),c.reverse!=null&&(u.reverse=!!c.reverse),t(u,"max")&&delete u.max,t(u,"min")&&delete u.min,t(u,"start")&&delete u.start,t(u,"end")&&delete u.end,u},e.contains=function(c,u,v){v=v||e.compare;var S=o(c);if(r(S)){var b=v(u,S);if(b<0||b===0&&g(c))return!1}var E=d(c);if(r(E)){var b=v(u,E);if(b>0||b===0&&h(c))return!1}return!0},e.filter=function(c,u){return function(v){return e.contains(c,v,u)}}})(ui);var Pf=Se,si=tr.AbstractIterator,xr=ui,Uf=yr;function yr(e,r){r||(r={}),this.options=r,si.call(this,e),this._order=r.reverse?"DESC":"ASC",this._limit=r.limit,this._count=0,this._done=!1;var t=xr.lowerBound(r),n=xr.upperBound(r);try{this._keyRange=t||n?this.db.makeKeyRange({lower:t,upper:n,excludeLower:xr.lowerBoundExclusive(r),excludeUpper:xr.upperBoundExclusive(r)}):null}catch{this._keyRangeError=!0}this.callback=null}Pf.inherits(yr,si);yr.prototype.createIterator=function(){var e=this;e.iterator=e.db.iterate(function(){e.onItem.apply(e,arguments)},{keyRange:e._keyRange,autoContinue:!1,order:e._order,onError:function(r){console.log("horrible error",r)}})};yr.prototype.onItem=function(e,r,t){if(!r&&this.callback){this.callback(),this.callback=!1;return}var n=!0;!!this._limit&&this._limit>0&&this._count++>=this._limit&&(n=!1),n&&this.callback(!1,r.key,r.value),r&&r.continue()};yr.prototype._next=function(e){if(!e)return new Error("next() requires a callback argument");if(this._keyRangeError)return e();this._started||(this.createIterator(),this._started=!0),this.callback=e};var Ff=Re.Buffer,qf=Kf;function Kf(e){return Ff.isBuffer(e)||/\[object (.+Array|Array.+)\]/.test(Object.prototype.toString.call(e))}var Qr={exports:{}},et,dn;function Vf(){if(dn)return et;dn=1;var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,t=function(n){var i=typeof n=="function"&&!(n instanceof RegExp)||r.call(n)==="[object Function]";return!i&&typeof window<"u"&&(i=n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt),i};return et=function(i,o){if(!t(o))throw new TypeError("iterator must be a function");var f,a,g=typeof i=="string",h=i.length,p=arguments.length>2?arguments[2]:null;if(h===+h)for(f=0;f<h;f++)p===null?o(g?i.charAt(f):i[f],f,i):o.call(p,g?i.charAt(f):i[f],f,i);else for(a in i)e.call(i,a)&&(p===null?o(i[a],a,i):o.call(p,i[a],a,i))},et}var rt,pn;function Hf(){if(pn)return rt;pn=1;var e=Object.prototype.toString;return rt=function(t){var n=e.call(t),i=n==="[object Arguments]";return i||(i=n!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&e.call(t.callee)==="[object Function]"),i},rt}var gn;function Yf(){return gn||(gn=1,function(){var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,t=Vf(),n=Hf(),i=!{toString:null}.propertyIsEnumerable("toString"),o=function(){}.propertyIsEnumerable("prototype"),f=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a;a=function(h){var p=h!==null&&typeof h=="object",d=r.call(h)==="[object Function]",w=n(h),c=[];if(!p&&!d&&!w)throw new TypeError("Object.keys called on a non-object");if(w)t(h,function(E){c.push(E)});else{var u,v=o&&d;for(u in h)!(v&&u==="prototype")&&e.call(h,u)&&c.push(u)}if(i){var S=h.constructor,b=S&&S.prototype===h;t(f,function(E){!(b&&E==="constructor")&&e.call(h,E)&&c.push(E)})}return c},Qr.exports=a}()),Qr.exports}var zf=Object.keys||Yf(),Xf=Gf;function Gf(e){return e!==null&&(typeof e=="object"||typeof e=="function")}var Jf=zf,Zf=Xf,Qf=eo;function eo(){for(var e={},r=0;r<arguments.length;r++){var t=arguments[r];if(!!Zf(t))for(var n=Jf(t),i=0;i<n.length;i++){var o=n[i];e[o]=t[o]}}return e}var ro=function(e){return typeof Buffer._augment=="function"&&Buffer.TYPED_ARRAY_SUPPORT?Buffer._augment(e):new Buffer(e)},to=ye,no=fi.exports,io=tr.AbstractLevelDOWN,fo=Se,oo=Uf,ao=qf,uo=Qf,li=ro;function ye(e){if(!(this instanceof ye))return new ye(e);if(!e)throw new Error("constructor requires at least a location argument");this.IDBOptions={},this.location=e}fo.inherits(ye,io);ye.prototype._open=function(e,r){var t=this,n={storeName:this.location,autoIncrement:!1,keyPath:null,onStoreReady:function(){r&&r(null,t.idb)},onError:function(i){r&&r(i)}};uo(n,e),this.IDBOptions=n,this.idb=new no(n)};ye.prototype._get=function(e,r,t){this.idb.get(e,function(n){if(n===void 0)return t(new Error("NotFound"));var i=!0;return r.asBuffer===!1&&(i=!1),r.raw&&(i=!1),i&&(n instanceof Uint8Array?n=li(n):n=new Buffer(String(n))),t(null,n,e)},t)};ye.prototype._del=function(e,r,t){this.idb.remove(e,t,t)};ye.prototype._put=function(e,r,t,n){r instanceof ArrayBuffer&&(r=li(new Uint8Array(r)));var i=this.convertEncoding(e,r,t);Buffer.isBuffer(i.value)&&(typeof r.toArrayBuffer=="function"?i.value=new Uint8Array(r.toArrayBuffer()):i.value=new Uint8Array(r)),this.idb.put(i.key,i.value,function(){n()},n)};ye.prototype.convertEncoding=function(e,r,t){if(t.raw)return{key:e,value:r};if(r){var n=r.toString();n==="NaN"&&(r="NaN")}var i=t.valueEncoding,o={key:e,value:r};return r&&(!i||i!=="binary")&&typeof o.value!="object"&&(o.value=n),o};ye.prototype.iterator=function(e){return typeof e!="object"&&(e={}),new oo(this.idb,e)};ye.prototype._batch=function(e,r,t){var n,i,o,f,a=[];if(e.length===0)return setTimeout(t,0);for(n=0;n<e.length;n++){o={},f=e[n],a[n]=o;var g=this.convertEncoding(f.key,f.value,r);f.key=g.key,f.value=g.value;for(i in f)i==="type"&&f[i]=="del"?o[i]="remove":o[i]=f[i]}return this.idb.batch(a,function(){t()},t)};ye.prototype._close=function(e){this.idb.db.close(),e()};ye.prototype._approximateSize=function(e,r,t){var n=new Error("Not implemented");if(t)return t(n);throw n};ye.prototype._isBuffer=function(e){return Buffer.isBuffer(e)};ye.destroy=function(e,r){if(typeof e=="object")var t=e.IDBOptions.storePrefix||"IDBWrapper-",n=e.location;else var t="IDBWrapper-",n=e;var i=indexedDB.deleteDatabase(t+n);i.onsuccess=function(){r()},i.onerror=function(o){r(o)}};ye.prototype._checkKeyValue=function(e,r){if(e==null)return new Error(r+" cannot be `null` or `undefined`");if(e==null)return new Error(r+" cannot be `null` or `undefined`");if(ao(e)&&e.byteLength===0)return new Error(r+" cannot be an empty ArrayBuffer");if(String(e)==="")return new Error(r+" cannot be an empty String");if(e.length===0)return new Error(r+" cannot be an empty Array")};var br={exports:{}},Lr=so;function so(){for(var e={},r=0;r<arguments.length;r++){var t=arguments[r];for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}return e}var ci={exports:{}};/*!
  * prr
  * (c) 2013 Rod Vagg <rod@vagg.org>
  * https://github.com/rvagg/prr
  * License: MIT
  */(function(e){(function(r,t,n){e.exports?e.exports=n():t[r]=n()})("prr",rr,function(){var r=typeof Object.defineProperty=="function"?function(i,o,f){return Object.defineProperty(i,o,f),i}:function(i,o,f){return i[o]=f.value,i},t=function(i,o){var f=typeof o=="object",a=!f&&typeof o=="string",g=function(h){return f?!!o[h]:a?o.indexOf(h[0])>-1:!1};return{enumerable:g("enumerable"),configurable:g("configurable"),writable:g("writable"),value:i}},n=function(i,o,f,a){var g;if(a=t(f,a),typeof o=="object"){for(g in o)Object.hasOwnProperty.call(o,g)&&(a.value=o[g],r(i,g,a));return i}return r(i,o,a)};return n})})(ci);var lo=Se,hi=tr.AbstractLevelDOWN;function We(e){hi.call(this,typeof e=="string"?e:""),this._db=void 0,this._operations=[]}lo.inherits(We,hi);We.prototype.setDb=function(e){this._db=e,this._operations.forEach(function(r){e[r.method].apply(e,r.args)})};We.prototype._open=function(e,r){return process.nextTick(r)};We.prototype._operation=function(e,r){if(this._db)return this._db[e].apply(this._db,r);this._operations.push({method:e,args:r})};"put get del batch approximateSize".split(" ").forEach(function(e){We.prototype["_"+e]=function(){this._operation(e,arguments)}});We.prototype._isBuffer=function(e){return Buffer.isBuffer(e)};We.prototype._iterator=function(){throw new TypeError("not implemented")};var co=We,qt={exports:{}},di={exports:{}};/*!
  * prr
  * (c) 2013 Rod Vagg <rod@vagg.org>
  * https://github.com/rvagg/prr
  * License: MIT
  */(function(e){(function(r,t,n){e.exports?e.exports=n():t[r]=n()})("prr",rr,function(){var r=typeof Object.defineProperty=="function"?function(i,o,f){return Object.defineProperty(i,o,f),i}:function(i,o,f){return i[o]=f.value,i},t=function(i,o){var f=typeof o=="object",a=!f&&typeof o=="string",g=function(h){return f?!!o[h]:a?o.indexOf(h[0])>-1:!1};return{enumerable:g("enumerable"),configurable:g("configurable"),writable:g("writable"),value:i}},n=function(i,o,f,a){var g;if(a=t(f,a),typeof o=="object"){for(g in o)Object.hasOwnProperty.call(o,g)&&(a.value=o[g],r(i,g,a));return i}return r(i,o,a)};return n})})(di);var ho=di.exports;function pi(e,r,t){!!r&&typeof r!="string"&&(r=r.message||r.name),ho(this,{type:e,name:e,cause:typeof r!="string"?r:t,message:r},"ewr")}function Kt(e,r){Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),pi.call(this,"CustomError",e,r)}Kt.prototype=new Error;function po(e,r,t){var n=function(i,o){pi.call(this,r,i,o),r=="FilesystemError"&&(this.code=this.cause.code,this.path=this.cause.path,this.errno=this.cause.errno,this.message=(e.errno[this.cause.errno]?e.errno[this.cause.errno].description:this.cause.message)+(this.cause.path?" ["+this.cause.path+"]":"")),Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,n)};return n.prototype=t?new t:new Kt,n}var go=function(e){var r=function(t,n){return po(e,t,n)};return{CustomError:Kt,FilesystemError:r("FilesystemError"),createError:r}};(function(e){var r=e.exports.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];e.exports.errno={},e.exports.code={},r.forEach(function(t){e.exports.errno[t.errno]=t,e.exports.code[t.code]=t}),e.exports.custom=go(e.exports),e.exports.create=e.exports.custom.createError})(qt);var Fe=qt.exports.create,Ue=Fe("LevelUPError"),Vt=Fe("NotFoundError",Ue);Vt.prototype.notFound=!0;Vt.prototype.status=404;var De={LevelUPError:Ue,InitializationError:Fe("InitializationError",Ue),OpenError:Fe("OpenError",Ue),ReadError:Fe("ReadError",Ue),WriteError:Fe("WriteError",Ue),NotFoundError:Vt,EncodingError:Fe("EncodingError",Ue)},Ot={exports:{}},z={};function vo(e){return Array.isArray?Array.isArray(e):Wr(e)==="[object Array]"}z.isArray=vo;function yo(e){return typeof e=="boolean"}z.isBoolean=yo;function bo(e){return e===null}z.isNull=bo;function wo(e){return e==null}z.isNullOrUndefined=wo;function mo(e){return typeof e=="number"}z.isNumber=mo;function _o(e){return typeof e=="string"}z.isString=_o;function Eo(e){return typeof e=="symbol"}z.isSymbol=Eo;function So(e){return e===void 0}z.isUndefined=So;function xo(e){return Wr(e)==="[object RegExp]"}z.isRegExp=xo;function Ro(e){return typeof e=="object"&&e!==null}z.isObject=Ro;function To(e){return Wr(e)==="[object Date]"}z.isDate=To;function Oo(e){return Wr(e)==="[object Error]"||e instanceof Error}z.isError=Oo;function Bo(e){return typeof e=="function"}z.isFunction=Bo;function Mo(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}z.isPrimitive=Mo;z.isBuffer=Re.Buffer.isBuffer;function Wr(e){return Object.prototype.toString.call(e)}var gi=se,Ao=Ir,Ar=Re.Buffer;se.ReadableState=yi;var Dr=Be.exports.EventEmitter;Dr.listenerCount||(Dr.listenerCount=function(e,r){return e.listeners(r).length});var or=pe(),vi=z;vi.inherits=ee.exports;var Ye;vi.inherits(se,or);function yi(e,r){e=e||{};var t=e.highWaterMark;this.highWaterMark=t||t===0?t:16*1024,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(Ye||(Ye=Ne().StringDecoder),this.decoder=new Ye(e.encoding),this.encoding=e.encoding)}function se(e){if(!(this instanceof se))return new se(e);this._readableState=new yi(e),this.readable=!0,or.call(this)}se.prototype.push=function(e,r){var t=this._readableState;return typeof e=="string"&&!t.objectMode&&(r=r||t.defaultEncoding,r!==t.encoding&&(e=new Ar(e,r),r="")),bi(this,t,e,r,!1)};se.prototype.unshift=function(e){var r=this._readableState;return bi(this,r,e,"",!0)};function bi(e,r,t,n,i){var o=No(r,t);if(o)e.emit("error",o);else if(t==null)r.reading=!1,r.ended||jo(e,r);else if(r.objectMode||t&&t.length>0)if(r.ended&&!i){var f=new Error("stream.push() after EOF");e.emit("error",f)}else if(r.endEmitted&&i){var f=new Error("stream.unshift() after end event");e.emit("error",f)}else r.decoder&&!i&&!n&&(t=r.decoder.write(t)),r.length+=r.objectMode?1:t.length,i?r.buffer.unshift(t):(r.reading=!1,r.buffer.push(t)),r.needReadable&&Pr(e),Co(e,r);else i||(r.reading=!1);return Do(r)}function Do(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}se.prototype.setEncoding=function(e){Ye||(Ye=Ne().StringDecoder),this._readableState.decoder=new Ye(e),this._readableState.encoding=e};var vn=8388608;function ko(e){if(e>=vn)e=vn;else{e--;for(var r=1;r<32;r<<=1)e|=e>>r;e++}return e}function yn(e,r){return r.length===0&&r.ended?0:r.objectMode?e===0?0:1:e===null||isNaN(e)?r.flowing&&r.buffer.length?r.buffer[0].length:r.length:e<=0?0:(e>r.highWaterMark&&(r.highWaterMark=ko(e)),e>r.length?r.ended?r.length:(r.needReadable=!0,0):e)}se.prototype.read=function(e){var r=this._readableState;r.calledRead=!0;var t=e,n;if((typeof e!="number"||e>0)&&(r.emittedReadable=!1),e===0&&r.needReadable&&(r.length>=r.highWaterMark||r.ended))return Pr(this),null;if(e=yn(e,r),e===0&&r.ended)return n=null,r.length>0&&r.decoder&&(n=Mt(e,r),r.length-=n.length),r.length===0&&At(this),n;var i=r.needReadable;return r.length-e<=r.highWaterMark&&(i=!0),(r.ended||r.reading)&&(i=!1),i&&(r.reading=!0,r.sync=!0,r.length===0&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1),i&&!r.reading&&(e=yn(t,r)),e>0?n=Mt(e,r):n=null,n===null&&(r.needReadable=!0,e=0),r.length-=e,r.length===0&&!r.ended&&(r.needReadable=!0),r.ended&&!r.endEmitted&&r.length===0&&At(this),n};function No(e,r){var t=null;return!Ar.isBuffer(r)&&typeof r!="string"&&r!==null&&r!==void 0&&!e.objectMode&&(t=new TypeError("Invalid non-string/buffer chunk")),t}function jo(e,r){if(r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&(r.buffer.push(t),r.length+=r.objectMode?1:t.length)}r.ended=!0,r.length>0?Pr(e):At(e)}function Pr(e){var r=e._readableState;r.needReadable=!1,!r.emittedReadable&&(r.emittedReadable=!0,r.sync?process.nextTick(function(){bn(e)}):bn(e))}function bn(e){e.emit("readable")}function Co(e,r){r.readingMore||(r.readingMore=!0,process.nextTick(function(){$o(e,r)}))}function $o(e,r){for(var t=r.length;!r.reading&&!r.flowing&&!r.ended&&r.length<r.highWaterMark&&(e.read(0),t!==r.length);)t=r.length;r.readingMore=!1}se.prototype._read=function(e){this.emit("error",new Error("not implemented"))};se.prototype.pipe=function(e,r){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1;var i=(!r||r.end!==!1)&&e!==process.stdout&&e!==process.stderr,o=i?a:h;n.endEmitted?process.nextTick(o):t.once("end",o),e.on("unpipe",f);function f(u){u===t&&h()}function a(){e.end()}var g=Io(t);e.on("drain",g);function h(){e.removeListener("close",d),e.removeListener("finish",w),e.removeListener("drain",g),e.removeListener("error",p),e.removeListener("unpipe",f),t.removeListener("end",a),t.removeListener("end",h),(!e._writableState||e._writableState.needDrain)&&g()}function p(u){c(),e.removeListener("error",p),Dr.listenerCount(e,"error")===0&&e.emit("error",u)}!e._events||!e._events.error?e.on("error",p):Ao(e._events.error)?e._events.error.unshift(p):e._events.error=[p,e._events.error];function d(){e.removeListener("finish",w),c()}e.once("close",d);function w(){e.removeListener("close",d),c()}e.once("finish",w);function c(){t.unpipe(e)}return e.emit("pipe",t),n.flowing||(this.on("readable",Bt),n.flowing=!0,process.nextTick(function(){Ht(t)})),e};function Io(e){return function(){var r=e._readableState;r.awaitDrain--,r.awaitDrain===0&&Ht(e)}}function Ht(e){var r=e._readableState,t;r.awaitDrain=0;function n(i,o,f){var a=i.write(t);a===!1&&r.awaitDrain++}for(;r.pipesCount&&(t=e.read())!==null;)if(r.pipesCount===1?n(r.pipes):wi(r.pipes,n),e.emit("data",t),r.awaitDrain>0)return;if(r.pipesCount===0){r.flowing=!1,Dr.listenerCount(e,"data")>0&&Ur(e);return}r.ranOut=!0}function Bt(){this._readableState.ranOut&&(this._readableState.ranOut=!1,Ht(this))}se.prototype.unpipe=function(e){var r=this._readableState;if(r.pipesCount===0)return this;if(r.pipesCount===1)return e&&e!==r.pipes?this:(e||(e=r.pipes),r.pipes=null,r.pipesCount=0,this.removeListener("readable",Bt),r.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var t=r.pipes,n=r.pipesCount;r.pipes=null,r.pipesCount=0,this.removeListener("readable",Bt),r.flowing=!1;for(var i=0;i<n;i++)t[i].emit("unpipe",this);return this}var i=Lo(r.pipes,e);return i===-1?this:(r.pipes.splice(i,1),r.pipesCount-=1,r.pipesCount===1&&(r.pipes=r.pipes[0]),e.emit("unpipe",this),this)};se.prototype.on=function(e,r){var t=or.prototype.on.call(this,e,r);if(e==="data"&&!this._readableState.flowing&&Ur(this),e==="readable"&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&Pr(this):this.read(0))}return t};se.prototype.addListener=se.prototype.on;se.prototype.resume=function(){Ur(this),this.read(0),this.emit("resume")};se.prototype.pause=function(){Ur(this,!0),this.emit("pause")};function Ur(e,r){var t=e._readableState;if(t.flowing)throw new Error("Cannot switch to old mode now.");var n=r||!1,i=!1;e.readable=!0,e.pipe=or.prototype.pipe,e.on=e.addListener=or.prototype.on,e.on("readable",function(){i=!0;for(var o;!n&&(o=e.read())!==null;)e.emit("data",o);o===null&&(i=!1,e._readableState.needReadable=!0)}),e.pause=function(){n=!0,this.emit("pause")},e.resume=function(){n=!1,i?process.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}se.prototype.wrap=function(e){var r=this._readableState,t=!1,n=this;e.on("end",function(){if(r.decoder&&!r.ended){var f=r.decoder.end();f&&f.length&&n.push(f)}n.push(null)}),e.on("data",function(f){if(r.decoder&&(f=r.decoder.write(f)),!(r.objectMode&&f==null)&&!(!r.objectMode&&(!f||!f.length))){var a=n.push(f);a||(t=!0,e.pause())}});for(var i in e)typeof e[i]=="function"&&typeof this[i]>"u"&&(this[i]=function(f){return function(){return e[f].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return wi(o,function(f){e.on(f,n.emit.bind(n,f))}),n._read=function(f){t&&(t=!1,e.resume())},n};se._fromList=Mt;function Mt(e,r){var t=r.buffer,n=r.length,i=!!r.decoder,o=!!r.objectMode,f;if(t.length===0)return null;if(n===0)f=null;else if(o)f=t.shift();else if(!e||e>=n)i?f=t.join(""):f=Ar.concat(t,n),t.length=0;else if(e<t[0].length){var a=t[0];f=a.slice(0,e),t[0]=a.slice(e)}else if(e===t[0].length)f=t.shift();else{i?f="":f=new Ar(e);for(var g=0,h=0,p=t.length;h<p&&g<e;h++){var a=t[0],d=Math.min(e-g,a.length);i?f+=a.slice(0,d):a.copy(f,g,0,d),d<a.length?t[0]=a.slice(d):t.shift(),g+=d}}return f}function At(e){var r=e._readableState;if(r.length>0)throw new Error("endReadable called on non-empty stream");!r.endEmitted&&r.calledRead&&(r.ended=!0,process.nextTick(function(){!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function wi(e,r){for(var t=0,n=e.length;t<n;t++)r(e[t],t)}function Lo(e,r){for(var t=0,n=e.length;t<n;t++)if(e[t]===r)return t;return-1}var tt,wn;function Yt(){if(wn)return tt;wn=1,tt=i;var e=Object.keys||function(a){var g=[];for(var h in a)g.push(h);return g},r=z;r.inherits=ee.exports;var t=gi,n=mi();r.inherits(i,t),f(e(n.prototype),function(a){i.prototype[a]||(i.prototype[a]=n.prototype[a])});function i(a){if(!(this instanceof i))return new i(a);t.call(this,a),n.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",o)}function o(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}function f(a,g){for(var h=0,p=a.length;h<p;h++)g(a[h],h)}return tt}var nt,mn;function mi(){if(mn)return nt;mn=1,nt=o;var e=Re.Buffer;o.WritableState=i;var r=z;r.inherits=ee.exports;var t=pe();r.inherits(o,t);function n(y,s,l){this.chunk=y,this.encoding=s,this.callback=l}function i(y,s){y=y||{};var l=y.highWaterMark;this.highWaterMark=l||l===0?l:16*1024,this.objectMode=!!y.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var x=y.decodeStrings===!1;this.decodeStrings=!x,this.defaultEncoding=y.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(A){c(s,A)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(y){var s=Yt();if(!(this instanceof o)&&!(this instanceof s))return new o(y);this._writableState=new i(y,this),this.writable=!0,t.call(this)}o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function f(y,s,l){var x=new Error("write after end");y.emit("error",x),process.nextTick(function(){l(x)})}function a(y,s,l,x){var A=!0;if(!e.isBuffer(l)&&typeof l!="string"&&l!==null&&l!==void 0&&!s.objectMode){var I=new TypeError("Invalid non-string/buffer chunk");y.emit("error",I),process.nextTick(function(){x(I)}),A=!1}return A}o.prototype.write=function(y,s,l){var x=this._writableState,A=!1;return typeof s=="function"&&(l=s,s=null),e.isBuffer(y)?s="buffer":s||(s=x.defaultEncoding),typeof l!="function"&&(l=function(){}),x.ended?f(this,x,l):a(this,x,y,l)&&(A=h(this,x,y,s,l)),A};function g(y,s,l){return!y.objectMode&&y.decodeStrings!==!1&&typeof s=="string"&&(s=new e(s,l)),s}function h(y,s,l,x,A){l=g(s,l,x),e.isBuffer(l)&&(x="buffer");var I=s.objectMode?1:l.length;s.length+=I;var K=s.length<s.highWaterMark;return K||(s.needDrain=!0),s.writing?s.buffer.push(new n(l,x,A)):p(y,s,I,l,x,A),K}function p(y,s,l,x,A,I){s.writelen=l,s.writecb=I,s.writing=!0,s.sync=!0,y._write(x,A,s.onwrite),s.sync=!1}function d(y,s,l,x,A){l?process.nextTick(function(){A(x)}):A(x),y._writableState.errorEmitted=!0,y.emit("error",x)}function w(y){y.writing=!1,y.writecb=null,y.length-=y.writelen,y.writelen=0}function c(y,s){var l=y._writableState,x=l.sync,A=l.writecb;if(w(l),s)d(y,l,x,s,A);else{var I=b(y,l);!I&&!l.bufferProcessing&&l.buffer.length&&S(y,l),x?process.nextTick(function(){u(y,l,I,A)}):u(y,l,I,A)}}function u(y,s,l,x){l||v(y,s),x(),l&&E(y,s)}function v(y,s){s.length===0&&s.needDrain&&(s.needDrain=!1,y.emit("drain"))}function S(y,s){s.bufferProcessing=!0;for(var l=0;l<s.buffer.length;l++){var x=s.buffer[l],A=x.chunk,I=x.encoding,K=x.callback,G=s.objectMode?1:A.length;if(p(y,s,G,A,I,K),s.writing){l++;break}}s.bufferProcessing=!1,l<s.buffer.length?s.buffer=s.buffer.slice(l):s.buffer.length=0}o.prototype._write=function(y,s,l){l(new Error("not implemented"))},o.prototype.end=function(y,s,l){var x=this._writableState;typeof y=="function"?(l=y,y=null,s=null):typeof s=="function"&&(l=s,s=null),typeof y<"u"&&y!==null&&this.write(y,s),!x.ending&&!x.finished&&D(this,x,l)};function b(y,s){return s.ending&&s.length===0&&!s.finished&&!s.writing}function E(y,s){var l=b(y,s);return l&&(s.finished=!0,y.emit("finish")),l}function D(y,s,l){s.ending=!0,E(y,s),l&&(s.finished?process.nextTick(l):y.once("finish",l)),s.ended=!0}return nt}var _i=je,zt=Yt(),Ei=z;Ei.inherits=ee.exports;Ei.inherits(je,zt);function Wo(e,r){this.afterTransform=function(t,n){return Po(r,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function Po(e,r,t){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,t!=null&&e.push(t),i&&i(r);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function je(e){if(!(this instanceof je))return new je(e);zt.call(this,e),this._transformState=new Wo(e,this);var r=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){typeof this._flush=="function"?this._flush(function(t){_n(r,t)}):_n(r)})}je.prototype.push=function(e,r){return this._transformState.needTransform=!1,zt.prototype.push.call(this,e,r)};je.prototype._transform=function(e,r,t){throw new Error("not implemented")};je.prototype._write=function(e,r,t){var n=this._transformState;if(n.writecb=t,n.writechunk=e,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};je.prototype._read=function(e){var r=this._transformState;r.writechunk!==null&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0};function _n(e,r){if(r)return e.emit("error",r);var t=e._writableState;e._readableState;var n=e._transformState;if(t.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}var Uo=ar,Si=_i,xi=z;xi.inherits=ee.exports;xi.inherits(ar,Si);function ar(e){if(!(this instanceof ar))return new ar(e);Si.call(this,e)}ar.prototype._transform=function(e,r,t){t(null,e)};(function(e,r){var t=pe();r=e.exports=gi,r.Stream=t,r.Readable=r,r.Writable=mi(),r.Duplex=Yt(),r.Transform=_i,r.PassThrough=Uo,!process.browser&&process.env.READABLE_STREAM==="disable"&&(e.exports=pe())})(Ot,Ot.exports);const Fo="levelup",qo="Fast & simple storage - a Node.js-style LevelDB wrapper",Ko="0.18.6",Vo=["Rod Vagg <r@va.gg> (https://github.com/rvagg)","John Chesley <john@chesl.es> (https://github.com/chesles/)","Jake Verbaten <raynos2@gmail.com> (https://github.com/raynos)","Dominic Tarr <dominic.tarr@gmail.com> (https://github.com/dominictarr)","Max Ogden <max@maxogden.com> (https://github.com/maxogden)","Lars-Magnus Skog <lars.magnus.skog@gmail.com> (https://github.com/ralphtheninja)","David Bj\xF6rklund <david.bjorklund@gmail.com> (https://github.com/kesla)","Julian Gruber <julian@juliangruber.com> (https://github.com/juliangruber)","Paolo Fragomeni <paolo@async.ly> (https://github.com/hij1nx)","Anton Whalley <anton.whalley@nearform.com> (https://github.com/No9)","Matteo Collina <matteo.collina@gmail.com> (https://github.com/mcollina)","Pedro Teixeira <pedro.teixeira@gmail.com> (https://github.com/pgte)","James Halliday <mail@substack.net> (https://github.com/substack)"],Ho={type:"git",url:"https://github.com/rvagg/node-levelup.git"},Yo="https://github.com/rvagg/node-levelup",zo=["leveldb","stream","database","db","store","storage","json"],Xo="lib/levelup.js",Go={bl:"~0.8.1","deferred-leveldown":"~0.2.0",errno:"~0.1.1",prr:"~0.0.0","readable-stream":"~1.0.26",semver:"~2.3.1",xtend:"~3.0.0"},Jo={leveldown:"~0.10.0",bustermove:"*",tap:"*",referee:"*",rimraf:"*",async:"*",fstream:"*",tar:"*",mkfiletree:"*",readfiletree:"*","slow-stream":">=0.0.4",delayed:"*",boganipsum:"*",du:"*",memdown:"*","msgpack-js":"*"},Zo={leveldown:!1,"leveldown/package":!1,semver:!1},Qo={test:"tap test/*-test.js --stderr",functionaltests:"node ./test/functional/fstream-test.js && node ./test/functional/binary-data-test.js && node ./test/functional/compat-test.js",alltests:"npm test && npm run-script functionaltests"},ea="MIT",ra={name:Fo,description:qo,version:Ko,contributors:Vo,repository:Ho,homepage:Yo,keywords:zo,main:Xo,dependencies:Go,devDependencies:Jo,browser:Zo,scripts:Qo,license:ea};var ta=Lr,it=De.LevelUPError,Ri=["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le"],Ti={createIfMissing:!0,errorIfExists:!1,keyEncoding:"utf8",valueEncoding:"utf8",compression:!0},ft,Oi=function(){function e(t){return t==null||Buffer.isBuffer(t)}var r={};return r.utf8=r["utf-8"]={encode:function(t){return e(t)?t:String(t)},decode:function(t){return t},buffer:!1,type:"utf8"},r.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},Ri.forEach(function(t){r[t]||(r[t]={encode:function(n){return e(n)?n:new Buffer(n,t)},decode:function(n){return process.browser?n.toString(t):n},buffer:!0,type:t})}),r}(),En=function(){var e={};return Ri.forEach(function(r){e[r]={valueEncoding:r}}),e}();function na(e,r,t){e.readStream().pipe(r.writeStream()).on("close",t||function(){}).on("error",t||function(n){throw n})}function ia(e,r){var t=typeof r=="string";return!t&&r&&r.encoding&&!r.valueEncoding&&(r.valueEncoding=r.encoding),ta(e&&e.options||{},t?En[r]||En[Ti.valueEncoding]:r)}function fa(){if(ft)return ft;var e=ra.devDependencies.leveldown,r="Could not locate LevelDOWN, try `npm install leveldown`",t;try{t=Zr.version}catch{throw new it(r)}if(!Zr.satisfies(t,e))throw new it("Installed version of LevelDOWN ("+t+") does not match required version ("+e+")");try{return ft=Zr}catch{throw new it(r)}}function oa(e,r,t){return typeof t=="function"?t(r):e.emit("error",r)}function Xt(e,r){var t=r&&r.keyEncoding||e.keyEncoding||"utf8";return Oi[t]||t}function Gt(e,r){var t=r&&(r.valueEncoding||r.encoding)||e.valueEncoding||e.encoding||"utf8";return Oi[t]||t}function aa(e,r,t){return Xt(r,t).encode(e)}function ua(e,r,t){return Gt(r,t).encode(e)}function sa(e,r){return Xt(r).decode(e)}function la(e,r){return Gt(r).decode(e)}function ca(e,r){return Gt(e,r).buffer}function ha(e,r){return Xt(e,r).buffer}var Fr={defaultOptions:Ti,copy:na,getOptions:ia,getLevelDOWN:fa,dispatchError:oa,encodeKey:aa,encodeValue:ua,isValueAsBuffer:ca,isKeyAsBuffer:ha,decodeValue:la,decodeKey:sa},Bi=Ot.exports.Readable,da=Se.inherits,pa=Lr,ga=De.EncodingError,ke=Fr,va={keys:!0,values:!0},ya=function(e,r){return{key:ke.decodeKey(e,this._options),value:ke.decodeValue(r,this._options)}},ba=function(e){return ke.decodeKey(e,this._options)},wa=function(e,r){return ke.decodeValue(r,this._options)},ma=function(){return null};function Ce(e,r,t){if(!(this instanceof Ce))return new Ce(e,r,t);Bi.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this._db=r,e=this._options=pa(va,e),this._keyEncoding=e.keyEncoding||e.encoding,this._valueEncoding=e.valueEncoding||e.encoding,typeof this._options.start<"u"&&(this._options.start=ke.encodeKey(this._options.start,this._options)),typeof this._options.end<"u"&&(this._options.end=ke.encodeKey(this._options.end,this._options)),typeof this._options.limit!="number"&&(this._options.limit=-1),this._options.keyAsBuffer=ke.isKeyAsBuffer(this._options),this._options.valueAsBuffer=ke.isValueAsBuffer(this._options),this._makeData=this._options.keys&&this._options.values?ya:this._options.keys?ba:this._options.values?wa:ma;var n=this;this._db.isOpen()?this._iterator=t(this._options):this._db.once("ready",function(){n._destroyed||(n._iterator=t(n._options))})}da(Ce,Bi);Ce.prototype._read=function e(){var r=this;if(!r._db.isOpen())return r._db.once("ready",function(){e.call(r)});r._destroyed||r._iterator.next(function(t,n,i){if(t||n===void 0&&i===void 0)return!t&&!r._destroyed&&r.push(null),r._cleanup(t);try{i=r._makeData(n,i)}catch(o){return r._cleanup(new ga(o))}r._destroyed||r.push(i)})};Ce.prototype._cleanup=function(e){if(!this._destroyed){this._destroyed=!0;var r=this;e&&r.emit("error",e),r._iterator?r._iterator.end(function(){r._iterator=null,r.emit("close")}):r.emit("close")}};Ce.prototype.destroy=function(){this._cleanup()};Ce.prototype.toString=function(){return"LevelUP.ReadStream"};var _a=Ce,Dt={exports:{}},Mi=le,Ea=Ir,kr=Re.Buffer;le.ReadableState=Di;var Nr=Be.exports.EventEmitter;Nr.listenerCount||(Nr.listenerCount=function(e,r){return e.listeners(r).length});var ur=pe(),Ai=z;Ai.inherits=ee.exports;var ze;Ai.inherits(le,ur);function Di(e,r){e=e||{};var t=e.highWaterMark;this.highWaterMark=t||t===0?t:16*1024,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(ze||(ze=Ne().StringDecoder),this.decoder=new ze(e.encoding),this.encoding=e.encoding)}function le(e){if(!(this instanceof le))return new le(e);this._readableState=new Di(e),this.readable=!0,ur.call(this)}le.prototype.push=function(e,r){var t=this._readableState;return typeof e=="string"&&!t.objectMode&&(r=r||t.defaultEncoding,r!==t.encoding&&(e=new kr(e,r),r="")),ki(this,t,e,r,!1)};le.prototype.unshift=function(e){var r=this._readableState;return ki(this,r,e,"",!0)};function ki(e,r,t,n,i){var o=Ra(r,t);if(o)e.emit("error",o);else if(t==null)r.reading=!1,r.ended||Ta(e,r);else if(r.objectMode||t&&t.length>0)if(r.ended&&!i){var f=new Error("stream.push() after EOF");e.emit("error",f)}else if(r.endEmitted&&i){var f=new Error("stream.unshift() after end event");e.emit("error",f)}else r.decoder&&!i&&!n&&(t=r.decoder.write(t)),r.length+=r.objectMode?1:t.length,i?r.buffer.unshift(t):(r.reading=!1,r.buffer.push(t)),r.needReadable&&qr(e),Oa(e,r);else i||(r.reading=!1);return Sa(r)}function Sa(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}le.prototype.setEncoding=function(e){ze||(ze=Ne().StringDecoder),this._readableState.decoder=new ze(e),this._readableState.encoding=e};var Sn=8388608;function xa(e){if(e>=Sn)e=Sn;else{e--;for(var r=1;r<32;r<<=1)e|=e>>r;e++}return e}function xn(e,r){return r.length===0&&r.ended?0:r.objectMode?e===0?0:1:e===null||isNaN(e)?r.flowing&&r.buffer.length?r.buffer[0].length:r.length:e<=0?0:(e>r.highWaterMark&&(r.highWaterMark=xa(e)),e>r.length?r.ended?r.length:(r.needReadable=!0,0):e)}le.prototype.read=function(e){var r=this._readableState;r.calledRead=!0;var t=e,n;if((typeof e!="number"||e>0)&&(r.emittedReadable=!1),e===0&&r.needReadable&&(r.length>=r.highWaterMark||r.ended))return qr(this),null;if(e=xn(e,r),e===0&&r.ended)return n=null,r.length>0&&r.decoder&&(n=Nt(e,r),r.length-=n.length),r.length===0&&jt(this),n;var i=r.needReadable;return r.length-e<=r.highWaterMark&&(i=!0),(r.ended||r.reading)&&(i=!1),i&&(r.reading=!0,r.sync=!0,r.length===0&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1),i&&!r.reading&&(e=xn(t,r)),e>0?n=Nt(e,r):n=null,n===null&&(r.needReadable=!0,e=0),r.length-=e,r.length===0&&!r.ended&&(r.needReadable=!0),r.ended&&!r.endEmitted&&r.length===0&&jt(this),n};function Ra(e,r){var t=null;return!kr.isBuffer(r)&&typeof r!="string"&&r!==null&&r!==void 0&&!e.objectMode&&(t=new TypeError("Invalid non-string/buffer chunk")),t}function Ta(e,r){if(r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&(r.buffer.push(t),r.length+=r.objectMode?1:t.length)}r.ended=!0,r.length>0?qr(e):jt(e)}function qr(e){var r=e._readableState;r.needReadable=!1,!r.emittedReadable&&(r.emittedReadable=!0,r.sync?process.nextTick(function(){Rn(e)}):Rn(e))}function Rn(e){e.emit("readable")}function Oa(e,r){r.readingMore||(r.readingMore=!0,process.nextTick(function(){Ba(e,r)}))}function Ba(e,r){for(var t=r.length;!r.reading&&!r.flowing&&!r.ended&&r.length<r.highWaterMark&&(e.read(0),t!==r.length);)t=r.length;r.readingMore=!1}le.prototype._read=function(e){this.emit("error",new Error("not implemented"))};le.prototype.pipe=function(e,r){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1;var i=(!r||r.end!==!1)&&e!==process.stdout&&e!==process.stderr,o=i?a:h;n.endEmitted?process.nextTick(o):t.once("end",o),e.on("unpipe",f);function f(u){u===t&&h()}function a(){e.end()}var g=Ma(t);e.on("drain",g);function h(){e.removeListener("close",d),e.removeListener("finish",w),e.removeListener("drain",g),e.removeListener("error",p),e.removeListener("unpipe",f),t.removeListener("end",a),t.removeListener("end",h),(!e._writableState||e._writableState.needDrain)&&g()}function p(u){c(),e.removeListener("error",p),Nr.listenerCount(e,"error")===0&&e.emit("error",u)}!e._events||!e._events.error?e.on("error",p):Ea(e._events.error)?e._events.error.unshift(p):e._events.error=[p,e._events.error];function d(){e.removeListener("finish",w),c()}e.once("close",d);function w(){e.removeListener("close",d),c()}e.once("finish",w);function c(){t.unpipe(e)}return e.emit("pipe",t),n.flowing||(this.on("readable",kt),n.flowing=!0,process.nextTick(function(){Jt(t)})),e};function Ma(e){return function(){var r=e._readableState;r.awaitDrain--,r.awaitDrain===0&&Jt(e)}}function Jt(e){var r=e._readableState,t;r.awaitDrain=0;function n(i,o,f){var a=i.write(t);a===!1&&r.awaitDrain++}for(;r.pipesCount&&(t=e.read())!==null;)if(r.pipesCount===1?n(r.pipes):Ni(r.pipes,n),e.emit("data",t),r.awaitDrain>0)return;if(r.pipesCount===0){r.flowing=!1,Nr.listenerCount(e,"data")>0&&Kr(e);return}r.ranOut=!0}function kt(){this._readableState.ranOut&&(this._readableState.ranOut=!1,Jt(this))}le.prototype.unpipe=function(e){var r=this._readableState;if(r.pipesCount===0)return this;if(r.pipesCount===1)return e&&e!==r.pipes?this:(e||(e=r.pipes),r.pipes=null,r.pipesCount=0,this.removeListener("readable",kt),r.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var t=r.pipes,n=r.pipesCount;r.pipes=null,r.pipesCount=0,this.removeListener("readable",kt),r.flowing=!1;for(var i=0;i<n;i++)t[i].emit("unpipe",this);return this}var i=Aa(r.pipes,e);return i===-1?this:(r.pipes.splice(i,1),r.pipesCount-=1,r.pipesCount===1&&(r.pipes=r.pipes[0]),e.emit("unpipe",this),this)};le.prototype.on=function(e,r){var t=ur.prototype.on.call(this,e,r);if(e==="data"&&!this._readableState.flowing&&Kr(this),e==="readable"&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&qr(this):this.read(0))}return t};le.prototype.addListener=le.prototype.on;le.prototype.resume=function(){Kr(this),this.read(0),this.emit("resume")};le.prototype.pause=function(){Kr(this,!0),this.emit("pause")};function Kr(e,r){var t=e._readableState;if(t.flowing)throw new Error("Cannot switch to old mode now.");var n=r||!1,i=!1;e.readable=!0,e.pipe=ur.prototype.pipe,e.on=e.addListener=ur.prototype.on,e.on("readable",function(){i=!0;for(var o;!n&&(o=e.read())!==null;)e.emit("data",o);o===null&&(i=!1,e._readableState.needReadable=!0)}),e.pause=function(){n=!0,this.emit("pause")},e.resume=function(){n=!1,i?process.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}le.prototype.wrap=function(e){var r=this._readableState,t=!1,n=this;e.on("end",function(){if(r.decoder&&!r.ended){var f=r.decoder.end();f&&f.length&&n.push(f)}n.push(null)}),e.on("data",function(f){if(r.decoder&&(f=r.decoder.write(f)),!(r.objectMode&&f==null)&&!(!r.objectMode&&(!f||!f.length))){var a=n.push(f);a||(t=!0,e.pause())}});for(var i in e)typeof e[i]=="function"&&typeof this[i]>"u"&&(this[i]=function(f){return function(){return e[f].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return Ni(o,function(f){e.on(f,n.emit.bind(n,f))}),n._read=function(f){t&&(t=!1,e.resume())},n};le._fromList=Nt;function Nt(e,r){var t=r.buffer,n=r.length,i=!!r.decoder,o=!!r.objectMode,f;if(t.length===0)return null;if(n===0)f=null;else if(o)f=t.shift();else if(!e||e>=n)i?f=t.join(""):f=kr.concat(t,n),t.length=0;else if(e<t[0].length){var a=t[0];f=a.slice(0,e),t[0]=a.slice(e)}else if(e===t[0].length)f=t.shift();else{i?f="":f=new kr(e);for(var g=0,h=0,p=t.length;h<p&&g<e;h++){var a=t[0],d=Math.min(e-g,a.length);i?f+=a.slice(0,d):a.copy(f,g,0,d),d<a.length?t[0]=a.slice(d):t.shift(),g+=d}}return f}function jt(e){var r=e._readableState;if(r.length>0)throw new Error("endReadable called on non-empty stream");!r.endEmitted&&r.calledRead&&(r.ended=!0,process.nextTick(function(){!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function Ni(e,r){for(var t=0,n=e.length;t<n;t++)r(e[t],t)}function Aa(e,r){for(var t=0,n=e.length;t<n;t++)if(e[t]===r)return t;return-1}var ot,Tn;function Zt(){if(Tn)return ot;Tn=1,ot=i;var e=Object.keys||function(a){var g=[];for(var h in a)g.push(h);return g},r=z;r.inherits=ee.exports;var t=Mi,n=ji();r.inherits(i,t),f(e(n.prototype),function(a){i.prototype[a]||(i.prototype[a]=n.prototype[a])});function i(a){if(!(this instanceof i))return new i(a);t.call(this,a),n.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",o)}function o(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}function f(a,g){for(var h=0,p=a.length;h<p;h++)g(a[h],h)}return ot}var at,On;function ji(){if(On)return at;On=1,at=o;var e=Re.Buffer;o.WritableState=i;var r=z;r.inherits=ee.exports;var t=pe();r.inherits(o,t);function n(y,s,l){this.chunk=y,this.encoding=s,this.callback=l}function i(y,s){y=y||{};var l=y.highWaterMark;this.highWaterMark=l||l===0?l:16*1024,this.objectMode=!!y.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var x=y.decodeStrings===!1;this.decodeStrings=!x,this.defaultEncoding=y.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(A){c(s,A)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(y){var s=Zt();if(!(this instanceof o)&&!(this instanceof s))return new o(y);this._writableState=new i(y,this),this.writable=!0,t.call(this)}o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function f(y,s,l){var x=new Error("write after end");y.emit("error",x),process.nextTick(function(){l(x)})}function a(y,s,l,x){var A=!0;if(!e.isBuffer(l)&&typeof l!="string"&&l!==null&&l!==void 0&&!s.objectMode){var I=new TypeError("Invalid non-string/buffer chunk");y.emit("error",I),process.nextTick(function(){x(I)}),A=!1}return A}o.prototype.write=function(y,s,l){var x=this._writableState,A=!1;return typeof s=="function"&&(l=s,s=null),e.isBuffer(y)?s="buffer":s||(s=x.defaultEncoding),typeof l!="function"&&(l=function(){}),x.ended?f(this,x,l):a(this,x,y,l)&&(A=h(this,x,y,s,l)),A};function g(y,s,l){return!y.objectMode&&y.decodeStrings!==!1&&typeof s=="string"&&(s=new e(s,l)),s}function h(y,s,l,x,A){l=g(s,l,x),e.isBuffer(l)&&(x="buffer");var I=s.objectMode?1:l.length;s.length+=I;var K=s.length<s.highWaterMark;return K||(s.needDrain=!0),s.writing?s.buffer.push(new n(l,x,A)):p(y,s,I,l,x,A),K}function p(y,s,l,x,A,I){s.writelen=l,s.writecb=I,s.writing=!0,s.sync=!0,y._write(x,A,s.onwrite),s.sync=!1}function d(y,s,l,x,A){l?process.nextTick(function(){A(x)}):A(x),y._writableState.errorEmitted=!0,y.emit("error",x)}function w(y){y.writing=!1,y.writecb=null,y.length-=y.writelen,y.writelen=0}function c(y,s){var l=y._writableState,x=l.sync,A=l.writecb;if(w(l),s)d(y,l,x,s,A);else{var I=b(y,l);!I&&!l.bufferProcessing&&l.buffer.length&&S(y,l),x?process.nextTick(function(){u(y,l,I,A)}):u(y,l,I,A)}}function u(y,s,l,x){l||v(y,s),x(),l&&E(y,s)}function v(y,s){s.length===0&&s.needDrain&&(s.needDrain=!1,y.emit("drain"))}function S(y,s){s.bufferProcessing=!0;for(var l=0;l<s.buffer.length;l++){var x=s.buffer[l],A=x.chunk,I=x.encoding,K=x.callback,G=s.objectMode?1:A.length;if(p(y,s,G,A,I,K),s.writing){l++;break}}s.bufferProcessing=!1,l<s.buffer.length?s.buffer=s.buffer.slice(l):s.buffer.length=0}o.prototype._write=function(y,s,l){l(new Error("not implemented"))},o.prototype.end=function(y,s,l){var x=this._writableState;typeof y=="function"?(l=y,y=null,s=null):typeof s=="function"&&(l=s,s=null),typeof y<"u"&&y!==null&&this.write(y,s),!x.ending&&!x.finished&&D(this,x,l)};function b(y,s){return s.ending&&s.length===0&&!s.finished&&!s.writing}function E(y,s){var l=b(y,s);return l&&(s.finished=!0,y.emit("finish")),l}function D(y,s,l){s.ending=!0,E(y,s),l&&(s.finished?process.nextTick(l):y.once("finish",l)),s.ended=!0}return at}var Ci=$e,Qt=Zt(),$i=z;$i.inherits=ee.exports;$i.inherits($e,Qt);function Da(e,r){this.afterTransform=function(t,n){return ka(r,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function ka(e,r,t){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,t!=null&&e.push(t),i&&i(r);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function $e(e){if(!(this instanceof $e))return new $e(e);Qt.call(this,e),this._transformState=new Da(e,this);var r=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){typeof this._flush=="function"?this._flush(function(t){Bn(r,t)}):Bn(r)})}$e.prototype.push=function(e,r){return this._transformState.needTransform=!1,Qt.prototype.push.call(this,e,r)};$e.prototype._transform=function(e,r,t){throw new Error("not implemented")};$e.prototype._write=function(e,r,t){var n=this._transformState;if(n.writecb=t,n.writechunk=e,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};$e.prototype._read=function(e){var r=this._transformState;r.writechunk!==null&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0};function Bn(e,r){if(r)return e.emit("error",r);var t=e._writableState;e._readableState;var n=e._transformState;if(t.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}var Na=sr,Ii=Ci,Li=z;Li.inherits=ee.exports;Li.inherits(sr,Ii);function sr(e){if(!(this instanceof sr))return new sr(e);Ii.call(this,e)}sr.prototype._transform=function(e,r,t){t(null,e)};(function(e,r){var t=pe();r=e.exports=Mi,r.Stream=t,r.Readable=r,r.Writable=ji(),r.Duplex=Zt(),r.Transform=Ci,r.PassThrough=Na,!process.browser&&process.env.READABLE_STREAM==="disable"&&(e.exports=pe())})(Dt,Dt.exports);var en=Dt.exports.Duplex,ja=Se;function he(e){if(!(this instanceof he))return new he(e);if(this._bufs=[],this.length=0,typeof e=="function"){this._callback=e;var r=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",function(t){t.on("error",r)}),this.on("unpipe",function(t){t.removeListener("error",r)})}else Buffer.isBuffer(e)?this.append(e):Array.isArray(e)&&e.forEach(function(t){Buffer.isBuffer(t)&&this.append(t)}.bind(this));en.call(this)}ja.inherits(he,en);he.prototype._offset=function(e){for(var r=0,t=0,n;t<this._bufs.length;t++){if(n=r+this._bufs[t].length,e<n)return[t,e-r];r=n}};he.prototype.append=function(e){return this._bufs.push(Buffer.isBuffer(e)?e:new Buffer(e)),this.length+=e.length,this};he.prototype._write=function(e,r,t){this.append(e),t&&t()};he.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)};he.prototype.end=function(e){en.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)};he.prototype.get=function(e){return this.slice(e,e+1)[0]};he.prototype.slice=function(e,r){return this.copy(null,0,e,r)};he.prototype.copy=function(e,r,t,n){if((typeof t!="number"||t<0)&&(t=0),(typeof n!="number"||n>this.length)&&(n=this.length),t>=this.length)return e||new Buffer(0);if(n<=0)return e||new Buffer(0);var i=!!e,o=this._offset(t),f=n-t,a=f,g=i&&r||0,h=o[1],p,d;if(t===0&&n==this.length){if(!i)return Buffer.concat(this._bufs);for(d=0;d<this._bufs.length;d++)this._bufs[d].copy(e,g),g+=this._bufs[d].length;return e}if(a<=this._bufs[o[0]].length-h)return i?this._bufs[o[0]].copy(e,r,h,h+a):this._bufs[o[0]].slice(h,h+a);for(i||(e=new Buffer(f)),d=o[0];d<this._bufs.length;d++){if(p=this._bufs[d].length-h,a>p)this._bufs[d].copy(e,g,h);else{this._bufs[d].copy(e,g,h,h+a);break}g+=p,a-=p,h&&(h=0)}return e};he.prototype.toString=function(e,r,t){return this.slice(r,t).toString(e)};he.prototype.consume=function(e){for(;this._bufs.length;)if(e>this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};he.prototype.duplicate=function(){for(var e=0,r=new he;e<this._bufs.length;e++)r.append(this._bufs[e]);return r};he.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)};(function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var r in e)(function(t){he.prototype[t]=function(n){return this.slice(n,n+e[t])[t](0)}})(r)})();var Ca=he,Wi=pe().Stream,$a=Se.inherits,Ia=Lr,La=Ca,rn=rr.setImmediate||process.nextTick,Wa=Fr.getOptions,Pa={type:"put"};function _e(e,r){if(!(this instanceof _e))return new _e(e,r);Wi.call(this),this._options=Ia(Pa,Wa(r,e)),this._db=r,this._buffer=[],this._status="init",this._end=!1,this.writable=!0,this.readable=!1;var t=this,n=function(){!t.writable||(t._status="ready",t.emit("ready"),t._process())};r.isOpen()?rn(n):r.once("ready",n)}$a(_e,Wi);_e.prototype.write=function(e){return this.writable?(this._buffer.push(e),this._status!="init"&&this._processDelayed(),this._options.maxBufferLength&&this._buffer.length>this._options.maxBufferLength?(this._writeBlock=!0,!1):!0):!1};_e.prototype.end=function(e){var r=this;e&&this.write(e),rn(function(){r._end=!0,r._process()})};_e.prototype.destroy=function(){this.writable=!1,this.end()};_e.prototype.destroySoon=function(){this.end()};_e.prototype.add=function(e){if(!!e.props)return e.props.Directory?e.pipe(this._db.writeStream(this._options)):(e.props.File||e.File||e.type=="File")&&this._write(e),!0};_e.prototype._processDelayed=function(){var e=this;rn(function(){e._process()})};_e.prototype._process=function(){var e,r=this,t=function(n){if(!!r.writable){if(r._status!="closed"&&(r._status="ready"),n)return r.writable=!1,r.emit("error",n);r._process()}};if(r._status!="ready"&&r.writable){r._buffer.length&&r._status!="closed"&&r._processDelayed();return}if(r._buffer.length&&r.writable){r._status="writing",e=r._buffer,r._buffer=[],r._db.batch(e.map(function(n){return{type:n.type||r._options.type,key:n.key,value:n.value,keyEncoding:n.keyEncoding||r._options.keyEncoding,valueEncoding:n.valueEncoding||n.encoding||r._options.valueEncoding}}),t),r._writeBlock&&(r._writeBlock=!1,r.emit("drain"));return}r._end&&r._status!="closed"&&(r._status="closed",r.writable=!1,r.emit("close"))};_e.prototype._write=function(e){var r=e.path||e.props.path,t=this;!r||e.pipe(La(function(n,i){if(n)return t.writable=!1,t.emit("error",n);t._options.fstreamRoot&&r.indexOf(t._options.fstreamRoot)>-1&&(r=r.substr(t._options.fstreamRoot.length+1)),t.write({key:r,value:i.slice(0)})}))};_e.prototype.toString=function(){return"LevelUP.WriteStream"};var Ua=_e,lr=Fr,cr=De.WriteError,Pi=lr.getOptions,Fa=lr.dispatchError;function wr(e){this._levelup=e,this.batch=e.db.batch(),this.ops=[]}wr.prototype.put=function(e,r,t){t=Pi(this._levelup,t);var n=lr.encodeKey(e,t),i=lr.encodeValue(r,t);try{this.batch.put(n,i)}catch(o){throw new cr(o)}return this.ops.push({type:"put",key:n,value:i}),this};wr.prototype.del=function(e,r){r=Pi(this._levelup,r);var t=lr.encodeKey(e,r);try{this.batch.del(t)}catch(n){throw new cr(n)}return this.ops.push({type:"del",key:t}),this};wr.prototype.clear=function(){try{this.batch.clear()}catch(e){throw new cr(e)}return this.ops=[],this};wr.prototype.write=function(e){var r=this._levelup,t=this.ops;try{this.batch.write(function(n){if(n)return Fa(r,new cr(n),e);r.emit("batch",t),e&&e()})}catch(n){throw new cr(n)}};var qa=wr,Ui=Be.exports.EventEmitter,Ka=Se.inherits,mr=Lr,Va=ci.exports,Ha=co,Oe=De.WriteError,Or=De.ReadError,Ya=De.NotFoundError,Fi=De.OpenError,za=De.EncodingError,Xa=De.InitializationError,Ga=_a,Ja=Ua,ge=Fr,Za=qa,Vr=ge.getOptions,Qa=ge.defaultOptions,qi=ge.getLevelDOWN,ve=ge.dispatchError;function Hr(e,r){return typeof e=="function"?e:r}function ne(e,r,t){if(!(this instanceof ne))return new ne(e,r,t);var n;if(Ui.call(this),this.setMaxListeners(1/0),typeof e=="function"?(r=typeof r=="object"?r:{},r.db=e,e=null):typeof e=="object"&&typeof e.db=="function"&&(r=e,e=null),typeof r=="function"&&(t=r,r={}),(!r||typeof r.db!="function")&&typeof e!="string"){if(n=new Xa("Must provide a location for the database"),t)return process.nextTick(function(){t(n)});throw n}r=Vr(this,r),this.options=mr(Qa,r),this._status="new",Va(this,"location",e,"e"),this.open(t)}Ka(ne,Ui);ne.prototype.open=function(e){var r=this,t,n;if(this.isOpen())return e&&process.nextTick(function(){e(null,r)}),this;if(this._isOpening())return e&&this.once("open",function(){e(null,r)});this.emit("opening"),this._status="opening",this.db=new Ha(this.location),t=this.options.db||qi(),n=t(this.location),n.open(this.options,function(i){if(i)return ve(r,new Fi(i),e);r.db.setDb(n),r.db=n,r._status="open",e&&e(null,r),r.emit("open"),r.emit("ready")})};ne.prototype.close=function(e){var r=this;if(this.isOpen())this._status="closing",this.db.close(function(){r._status="closed",r.emit("closed"),e&&e.apply(null,arguments)}),this.emit("closing"),this.db=null;else{if(this._status=="closed"&&e)return process.nextTick(e);this._status=="closing"&&e?this.once("closed",e):this._isOpening()&&this.once("open",function(){r.close(e)})}};ne.prototype.isOpen=function(){return this._status=="open"};ne.prototype._isOpening=function(){return this._status=="opening"};ne.prototype.isClosed=function(){return/^clos/.test(this._status)};ne.prototype.get=function(e,r,t){var n=this,i;if(t=Hr(r,t),typeof t!="function")return ve(this,new Or("get() requires key and callback arguments"));if(!this._isOpening()&&!this.isOpen())return ve(this,new Or("Database is not open"),t);r=ge.getOptions(this,r),i=ge.encodeKey(e,r),r.asBuffer=ge.isValueAsBuffer(r),this.db.get(i,r,function(o,f){if(o)return/notfound/i.test(o)?o=new Ya("Key not found in database ["+e+"]",o):o=new Or(o),ve(n,o,t);if(t){try{f=ge.decodeValue(f,r)}catch(a){return t(new za(a))}t(null,f)}})};ne.prototype.put=function(e,r,t,n){var i=this,o,f;if(n=Hr(t,n),e==null||r===null||r===void 0)return ve(this,new Oe("put() requires key and value arguments"),n);if(!this._isOpening()&&!this.isOpen())return ve(this,new Oe("Database is not open"),n);t=Vr(this,t),o=ge.encodeKey(e,t),f=ge.encodeValue(r,t),this.db.put(o,f,t,function(a){if(a)return ve(i,new Oe(a),n);i.emit("put",e,r),n&&n()})};ne.prototype.del=function(e,r,t){var n=this,i;if(t=Hr(r,t),e==null)return ve(this,new Oe("del() requires a key argument"),t);if(!this._isOpening()&&!this.isOpen())return ve(this,new Oe("Database is not open"),t);r=Vr(this,r),i=ge.encodeKey(e,r),this.db.del(i,r,function(o){if(o)return ve(n,new Oe(o),t);n.emit("del",e),t&&t()})};ne.prototype.batch=function(e,r,t){var n=this,i,o,f;if(!arguments.length)return new Za(this);if(t=Hr(r,t),!Array.isArray(e))return ve(this,new Oe("batch() requires an array argument"),t);if(!this._isOpening()&&!this.isOpen())return ve(this,new Oe("Database is not open"),t);r=Vr(this,r),i=r.keyEncoding,o=r.valueEncoding,f=e.map(function(a){if(a.type===void 0||a.key===void 0)return{};var g=a.keyEncoding||i,h=a.valueEncoding||a.encoding||o,p;return g!="utf8"&&g!="binary"||h!="utf8"&&h!="binary"?(p={type:a.type,key:ge.encodeKey(a.key,r,a)},a.value!==void 0&&(p.value=ge.encodeValue(a.value,r,a)),p):a}),this.db.batch(f,r,function(a){if(a)return ve(n,new Oe(a),t);n.emit("batch",e),t&&t()})};ne.prototype.approximateSize=function(e,r,t){var n=this,i,o;if(e==null||r===null||r===void 0||typeof t!="function")return ve(this,new Or("approximateSize() requires start, end and callback arguments"),t);if(i=ge.encodeKey(e,this.options),o=ge.encodeKey(r,this.options),!this._isOpening()&&!this.isOpen())return ve(this,new Oe("Database is not open"),t);this.db.approximateSize(i,o,function(f,a){if(f)return ve(n,new Fi(f),t);t&&t(null,a)})};ne.prototype.readStream=ne.prototype.createReadStream=function(e){var r=this;return e=mr(this.options,e),new Ga(e,this,function(t){return r.db.iterator(t)})};ne.prototype.keyStream=ne.prototype.createKeyStream=function(e){return this.createReadStream(mr(e,{keys:!0,values:!1}))};ne.prototype.valueStream=ne.prototype.createValueStream=function(e){return this.createReadStream(mr(e,{keys:!1,values:!0}))};ne.prototype.writeStream=ne.prototype.createWriteStream=function(e){return new Ja(mr(e),this)};ne.prototype.toString=function(){return"LevelUP"};function Ki(e){return function(r,t){qi()[e](r,t||function(){})}}br.exports=ne;br.exports.copy=ge.copy;br.exports.destroy=Ki("destroy");br.exports.repair=Ki("repair");var Vi={},Hi={exports:{}},Yi=ce,eu=Ir,jr=Re.Buffer;ce.ReadableState=Xi;var Cr=Be.exports.EventEmitter;Cr.listenerCount||(Cr.listenerCount=function(e,r){return e.listeners(r).length});var hr=pe(),zi=z;zi.inherits=ee.exports;var Xe;zi.inherits(ce,hr);function Xi(e,r){e=e||{};var t=e.highWaterMark;this.highWaterMark=t||t===0?t:16*1024,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(Xe||(Xe=Ne().StringDecoder),this.decoder=new Xe(e.encoding),this.encoding=e.encoding)}function ce(e){if(!(this instanceof ce))return new ce(e);this._readableState=new Xi(e),this.readable=!0,hr.call(this)}ce.prototype.push=function(e,r){var t=this._readableState;return typeof e=="string"&&!t.objectMode&&(r=r||t.defaultEncoding,r!==t.encoding&&(e=new jr(e,r),r="")),Gi(this,t,e,r,!1)};ce.prototype.unshift=function(e){var r=this._readableState;return Gi(this,r,e,"",!0)};function Gi(e,r,t,n,i){var o=nu(r,t);if(o)e.emit("error",o);else if(t==null)r.reading=!1,r.ended||iu(e,r);else if(r.objectMode||t&&t.length>0)if(r.ended&&!i){var f=new Error("stream.push() after EOF");e.emit("error",f)}else if(r.endEmitted&&i){var f=new Error("stream.unshift() after end event");e.emit("error",f)}else r.decoder&&!i&&!n&&(t=r.decoder.write(t)),r.length+=r.objectMode?1:t.length,i?r.buffer.unshift(t):(r.reading=!1,r.buffer.push(t)),r.needReadable&&Yr(e),fu(e,r);else i||(r.reading=!1);return ru(r)}function ru(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}ce.prototype.setEncoding=function(e){Xe||(Xe=Ne().StringDecoder),this._readableState.decoder=new Xe(e),this._readableState.encoding=e};var Mn=8388608;function tu(e){if(e>=Mn)e=Mn;else{e--;for(var r=1;r<32;r<<=1)e|=e>>r;e++}return e}function An(e,r){return r.length===0&&r.ended?0:r.objectMode?e===0?0:1:e===null||isNaN(e)?r.flowing&&r.buffer.length?r.buffer[0].length:r.length:e<=0?0:(e>r.highWaterMark&&(r.highWaterMark=tu(e)),e>r.length?r.ended?r.length:(r.needReadable=!0,0):e)}ce.prototype.read=function(e){var r=this._readableState;r.calledRead=!0;var t=e,n;if((typeof e!="number"||e>0)&&(r.emittedReadable=!1),e===0&&r.needReadable&&(r.length>=r.highWaterMark||r.ended))return Yr(this),null;if(e=An(e,r),e===0&&r.ended)return n=null,r.length>0&&r.decoder&&(n=$t(e,r),r.length-=n.length),r.length===0&&It(this),n;var i=r.needReadable;return r.length-e<=r.highWaterMark&&(i=!0),(r.ended||r.reading)&&(i=!1),i&&(r.reading=!0,r.sync=!0,r.length===0&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1),i&&!r.reading&&(e=An(t,r)),e>0?n=$t(e,r):n=null,n===null&&(r.needReadable=!0,e=0),r.length-=e,r.length===0&&!r.ended&&(r.needReadable=!0),r.ended&&!r.endEmitted&&r.length===0&&It(this),n};function nu(e,r){var t=null;return!jr.isBuffer(r)&&typeof r!="string"&&r!==null&&r!==void 0&&!e.objectMode&&(t=new TypeError("Invalid non-string/buffer chunk")),t}function iu(e,r){if(r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&(r.buffer.push(t),r.length+=r.objectMode?1:t.length)}r.ended=!0,r.length>0?Yr(e):It(e)}function Yr(e){var r=e._readableState;r.needReadable=!1,!r.emittedReadable&&(r.emittedReadable=!0,r.sync?process.nextTick(function(){Dn(e)}):Dn(e))}function Dn(e){e.emit("readable")}function fu(e,r){r.readingMore||(r.readingMore=!0,process.nextTick(function(){ou(e,r)}))}function ou(e,r){for(var t=r.length;!r.reading&&!r.flowing&&!r.ended&&r.length<r.highWaterMark&&(e.read(0),t!==r.length);)t=r.length;r.readingMore=!1}ce.prototype._read=function(e){this.emit("error",new Error("not implemented"))};ce.prototype.pipe=function(e,r){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1;var i=(!r||r.end!==!1)&&e!==process.stdout&&e!==process.stderr,o=i?a:h;n.endEmitted?process.nextTick(o):t.once("end",o),e.on("unpipe",f);function f(u){u===t&&h()}function a(){e.end()}var g=au(t);e.on("drain",g);function h(){e.removeListener("close",d),e.removeListener("finish",w),e.removeListener("drain",g),e.removeListener("error",p),e.removeListener("unpipe",f),t.removeListener("end",a),t.removeListener("end",h),(!e._writableState||e._writableState.needDrain)&&g()}function p(u){c(),e.removeListener("error",p),Cr.listenerCount(e,"error")===0&&e.emit("error",u)}!e._events||!e._events.error?e.on("error",p):eu(e._events.error)?e._events.error.unshift(p):e._events.error=[p,e._events.error];function d(){e.removeListener("finish",w),c()}e.once("close",d);function w(){e.removeListener("close",d),c()}e.once("finish",w);function c(){t.unpipe(e)}return e.emit("pipe",t),n.flowing||(this.on("readable",Ct),n.flowing=!0,process.nextTick(function(){tn(t)})),e};function au(e){return function(){var r=e._readableState;r.awaitDrain--,r.awaitDrain===0&&tn(e)}}function tn(e){var r=e._readableState,t;r.awaitDrain=0;function n(i,o,f){var a=i.write(t);a===!1&&r.awaitDrain++}for(;r.pipesCount&&(t=e.read())!==null;)if(r.pipesCount===1?n(r.pipes):Ji(r.pipes,n),e.emit("data",t),r.awaitDrain>0)return;if(r.pipesCount===0){r.flowing=!1,Cr.listenerCount(e,"data")>0&&zr(e);return}r.ranOut=!0}function Ct(){this._readableState.ranOut&&(this._readableState.ranOut=!1,tn(this))}ce.prototype.unpipe=function(e){var r=this._readableState;if(r.pipesCount===0)return this;if(r.pipesCount===1)return e&&e!==r.pipes?this:(e||(e=r.pipes),r.pipes=null,r.pipesCount=0,this.removeListener("readable",Ct),r.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var t=r.pipes,n=r.pipesCount;r.pipes=null,r.pipesCount=0,this.removeListener("readable",Ct),r.flowing=!1;for(var i=0;i<n;i++)t[i].emit("unpipe",this);return this}var i=uu(r.pipes,e);return i===-1?this:(r.pipes.splice(i,1),r.pipesCount-=1,r.pipesCount===1&&(r.pipes=r.pipes[0]),e.emit("unpipe",this),this)};ce.prototype.on=function(e,r){var t=hr.prototype.on.call(this,e,r);if(e==="data"&&!this._readableState.flowing&&zr(this),e==="readable"&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&Yr(this):this.read(0))}return t};ce.prototype.addListener=ce.prototype.on;ce.prototype.resume=function(){zr(this),this.read(0),this.emit("resume")};ce.prototype.pause=function(){zr(this,!0),this.emit("pause")};function zr(e,r){var t=e._readableState;if(t.flowing)throw new Error("Cannot switch to old mode now.");var n=r||!1,i=!1;e.readable=!0,e.pipe=hr.prototype.pipe,e.on=e.addListener=hr.prototype.on,e.on("readable",function(){i=!0;for(var o;!n&&(o=e.read())!==null;)e.emit("data",o);o===null&&(i=!1,e._readableState.needReadable=!0)}),e.pause=function(){n=!0,this.emit("pause")},e.resume=function(){n=!1,i?process.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}ce.prototype.wrap=function(e){var r=this._readableState,t=!1,n=this;e.on("end",function(){if(r.decoder&&!r.ended){var f=r.decoder.end();f&&f.length&&n.push(f)}n.push(null)}),e.on("data",function(f){if(r.decoder&&(f=r.decoder.write(f)),!(r.objectMode&&f==null)&&!(!r.objectMode&&(!f||!f.length))){var a=n.push(f);a||(t=!0,e.pause())}});for(var i in e)typeof e[i]=="function"&&typeof this[i]>"u"&&(this[i]=function(f){return function(){return e[f].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return Ji(o,function(f){e.on(f,n.emit.bind(n,f))}),n._read=function(f){t&&(t=!1,e.resume())},n};ce._fromList=$t;function $t(e,r){var t=r.buffer,n=r.length,i=!!r.decoder,o=!!r.objectMode,f;if(t.length===0)return null;if(n===0)f=null;else if(o)f=t.shift();else if(!e||e>=n)i?f=t.join(""):f=jr.concat(t,n),t.length=0;else if(e<t[0].length){var a=t[0];f=a.slice(0,e),t[0]=a.slice(e)}else if(e===t[0].length)f=t.shift();else{i?f="":f=new jr(e);for(var g=0,h=0,p=t.length;h<p&&g<e;h++){var a=t[0],d=Math.min(e-g,a.length);i?f+=a.slice(0,d):a.copy(f,g,0,d),d<a.length?t[0]=a.slice(d):t.shift(),g+=d}}return f}function It(e){var r=e._readableState;if(r.length>0)throw new Error("endReadable called on non-empty stream");!r.endEmitted&&r.calledRead&&(r.ended=!0,process.nextTick(function(){!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function Ji(e,r){for(var t=0,n=e.length;t<n;t++)r(e[t],t)}function uu(e,r){for(var t=0,n=e.length;t<n;t++)if(e[t]===r)return t;return-1}var ut,kn;function Xr(){if(kn)return ut;kn=1,ut=i;var e=Object.keys||function(a){var g=[];for(var h in a)g.push(h);return g},r=z;r.inherits=ee.exports;var t=Yi,n=nn();r.inherits(i,t),f(e(n.prototype),function(a){i.prototype[a]||(i.prototype[a]=n.prototype[a])});function i(a){if(!(this instanceof i))return new i(a);t.call(this,a),n.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",o)}function o(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}function f(a,g){for(var h=0,p=a.length;h<p;h++)g(a[h],h)}return ut}var st,Nn;function nn(){if(Nn)return st;Nn=1,st=o;var e=Re.Buffer;o.WritableState=i;var r=z;r.inherits=ee.exports;var t=pe();r.inherits(o,t);function n(y,s,l){this.chunk=y,this.encoding=s,this.callback=l}function i(y,s){y=y||{};var l=y.highWaterMark;this.highWaterMark=l||l===0?l:16*1024,this.objectMode=!!y.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var x=y.decodeStrings===!1;this.decodeStrings=!x,this.defaultEncoding=y.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(A){c(s,A)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(y){var s=Xr();if(!(this instanceof o)&&!(this instanceof s))return new o(y);this._writableState=new i(y,this),this.writable=!0,t.call(this)}o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function f(y,s,l){var x=new Error("write after end");y.emit("error",x),process.nextTick(function(){l(x)})}function a(y,s,l,x){var A=!0;if(!e.isBuffer(l)&&typeof l!="string"&&l!==null&&l!==void 0&&!s.objectMode){var I=new TypeError("Invalid non-string/buffer chunk");y.emit("error",I),process.nextTick(function(){x(I)}),A=!1}return A}o.prototype.write=function(y,s,l){var x=this._writableState,A=!1;return typeof s=="function"&&(l=s,s=null),e.isBuffer(y)?s="buffer":s||(s=x.defaultEncoding),typeof l!="function"&&(l=function(){}),x.ended?f(this,x,l):a(this,x,y,l)&&(A=h(this,x,y,s,l)),A};function g(y,s,l){return!y.objectMode&&y.decodeStrings!==!1&&typeof s=="string"&&(s=new e(s,l)),s}function h(y,s,l,x,A){l=g(s,l,x),e.isBuffer(l)&&(x="buffer");var I=s.objectMode?1:l.length;s.length+=I;var K=s.length<s.highWaterMark;return K||(s.needDrain=!0),s.writing?s.buffer.push(new n(l,x,A)):p(y,s,I,l,x,A),K}function p(y,s,l,x,A,I){s.writelen=l,s.writecb=I,s.writing=!0,s.sync=!0,y._write(x,A,s.onwrite),s.sync=!1}function d(y,s,l,x,A){l?process.nextTick(function(){A(x)}):A(x),y._writableState.errorEmitted=!0,y.emit("error",x)}function w(y){y.writing=!1,y.writecb=null,y.length-=y.writelen,y.writelen=0}function c(y,s){var l=y._writableState,x=l.sync,A=l.writecb;if(w(l),s)d(y,l,x,s,A);else{var I=b(y,l);!I&&!l.bufferProcessing&&l.buffer.length&&S(y,l),x?process.nextTick(function(){u(y,l,I,A)}):u(y,l,I,A)}}function u(y,s,l,x){l||v(y,s),x(),l&&E(y,s)}function v(y,s){s.length===0&&s.needDrain&&(s.needDrain=!1,y.emit("drain"))}function S(y,s){s.bufferProcessing=!0;for(var l=0;l<s.buffer.length;l++){var x=s.buffer[l],A=x.chunk,I=x.encoding,K=x.callback,G=s.objectMode?1:A.length;if(p(y,s,G,A,I,K),s.writing){l++;break}}s.bufferProcessing=!1,l<s.buffer.length?s.buffer=s.buffer.slice(l):s.buffer.length=0}o.prototype._write=function(y,s,l){l(new Error("not implemented"))},o.prototype.end=function(y,s,l){var x=this._writableState;typeof y=="function"?(l=y,y=null,s=null):typeof s=="function"&&(l=s,s=null),typeof y<"u"&&y!==null&&this.write(y,s),!x.ending&&!x.finished&&D(this,x,l)};function b(y,s){return s.ending&&s.length===0&&!s.finished&&!s.writing}function E(y,s){var l=b(y,s);return l&&(s.finished=!0,y.emit("finish")),l}function D(y,s,l){s.ending=!0,E(y,s),l&&(s.finished?process.nextTick(l):y.once("finish",l)),s.ended=!0}return st}(function(e){e.exports=nn()})(Hi);var Lt={exports:{}},Zi=Ie,fn=Xr(),Qi=z;Qi.inherits=ee.exports;Qi.inherits(Ie,fn);function su(e,r){this.afterTransform=function(t,n){return lu(r,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function lu(e,r,t){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,t!=null&&e.push(t),i&&i(r);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function Ie(e){if(!(this instanceof Ie))return new Ie(e);fn.call(this,e),this._transformState=new su(e,this);var r=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){typeof this._flush=="function"?this._flush(function(t){jn(r,t)}):jn(r)})}Ie.prototype.push=function(e,r){return this._transformState.needTransform=!1,fn.prototype.push.call(this,e,r)};Ie.prototype._transform=function(e,r,t){throw new Error("not implemented")};Ie.prototype._write=function(e,r,t){var n=this._transformState;if(n.writecb=t,n.writechunk=e,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Ie.prototype._read=function(e){var r=this._transformState;r.writechunk!==null&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0};function jn(e,r){if(r)return e.emit("error",r);var t=e._writableState;e._readableState;var n=e._transformState;if(t.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}var cu=dr,ef=Zi,rf=z;rf.inherits=ee.exports;rf.inherits(dr,ef);function dr(e){if(!(this instanceof dr))return new dr(e);ef.call(this,e)}dr.prototype._transform=function(e,r,t){t(null,e)};(function(e,r){var t=pe();r=e.exports=Yi,r.Stream=t,r.Readable=r,r.Writable=nn(),r.Duplex=Xr(),r.Transform=Zi,r.PassThrough=cu,!process.browser&&process.env.READABLE_STREAM==="disable"&&(e.exports=pe())})(Lt,Lt.exports);var tf={exports:{}};(function(e){e.exports=Xr()})(tf);(function(e){var r=Hi.exports,t=Lt.exports,n=tf.exports,i=new Buffer(0),o=function(){},f=function(h){return typeof h=="function"?h:function(p){p(null,h)}},a=function(h,p){var d=!1,w=!1;return h._read=function(){d=!0},h.destroy=function(){w=!0},p(function(c,u){if(c)return h.emit("error",c);var v=function(){for(var S;(S=u.read())!==null;)d=!1,h.push(S)};if(u.on("readable",function(){d&&v()}),u.on("end",function(){v(),h.push(null)}),u.on("error",function(S){h.emit("error",S)}),u.on("close",function(){v(),process.nextTick(function(){h.emit("close")})}),h._read=function(){d=!0,v()},h.destroy=function(){w||(w=!0,u.destroy&&u.destroy())},w){w=!1,h.destroy();return}d&&v()}),h},g=function(h,p){var d=o,w=!1;return h._write=function(c,u,v){d=v},h.destroy=function(){w=!0},h.write(i),p(function(c,u){if(c)return h.emit("error",c);u.on("close",function(){h.emit("close")}),u.on("error",function(S){h.emit("error",S)}),h._write=function(S,b,E){if(S===i)return E();u.write(S,b,E)};var v=h.emit;if(u.on("finish",function(){v.call(h,"finish")}),h.destroy=function(){w||(w=!0,u.destroy&&u.destroy())},h.emit=function(S){if(S!=="finish")return v.apply(h,arguments);u.end()},w){w=!1,h.destroy();return}d()}),h};e.readable=function(h,p){return arguments.length===1?e.readable(null,h):(h||(h={}),a(new t(h),f(p)))},e.writable=function(h,p){return arguments.length===1?e.writable(null,h):(h||(h={}),g(new r(h),f(p)))},e.duplex=function(h,p,d){if(arguments.length===2)return e.duplex(null,h,p);h||(h={});var w=new n(h);return g(w,f(p)),a(w,f(d)),w}})(Vi);var nf={exports:{}},on={};(function(e){var r=e.range=function(n){return n==null?{}:typeof r=="string"?{min:r,max:r+"\xFF"}:n};e.prefix=function(n,i,o){n=e.range(n);var f={};return o=o||"\xFF",n instanceof RegExp||typeof n=="function"?(f.min=i,f.max=i+o,f.inner=function(a){var g=a.substring(i.length);return n.test?n.test(g):n(g)}):typeof n=="object"&&(f.min=i+(n.min||n.start||""),f.max=i+(n.max||n.end||o||"~"),f.reverse=!!n.reverse),f};var t=e.checker=function(n){if(n||(n={}),typeof n=="string")return function(i){return i.indexOf(n)==0};if(n instanceof RegExp)return function(i){return n.test(i)};if(typeof n=="object")return function(i){var o=n.min||n.start,f=n.max||n.end;return i=String(i),(!o||i>=o)&&(!f||i<=f)&&(!n.inner||(n.inner.test?n.inner.test(i):n.inner(i)))};if(typeof n=="function")return n};e.satisfies=function(n,i){return t(i)(n)}})(on);var ff={exports:{}};(function(e){function r(i){return Object.prototype.toString.call(i)}var t={isArray:function(i){return Array.isArray(i)||typeof i=="object"&&r(i)==="[object Array]"},isDate:function(i){return typeof i=="object"&&r(i)==="[object Date]"},isRegExp:function(i){return typeof i=="object"&&r(i)==="[object RegExp]"},getRegExpFlags:function(i){var o="";return i.global&&(o+="g"),i.ignoreCase&&(o+="i"),i.multiline&&(o+="m"),o}};e.exports=n;function n(i,o,f,a){var g=[],h=[],p=typeof Buffer<"u";typeof o>"u"&&(o=!0),typeof f>"u"&&(f=1/0);function d(w,c){if(w===null)return null;if(c==0)return w;var u,v;if(typeof w!="object")return w;if(t.isArray(w))u=[];else if(t.isRegExp(w))u=new RegExp(w.source,t.getRegExpFlags(w)),w.lastIndex&&(u.lastIndex=w.lastIndex);else if(t.isDate(w))u=new Date(w.getTime());else{if(p&&Buffer.isBuffer(w))return u=new Buffer(w.length),w.copy(u),u;typeof a>"u"?(v=Object.getPrototypeOf(w),u=Object.create(v)):(u=Object.create(a),v=a)}if(o){var S=g.indexOf(w);if(S!=-1)return h[S];g.push(w),h.push(u)}for(var b in w){var E;v&&(E=Object.getOwnPropertyDescriptor(v,b)),!(E&&E.set==null)&&(u[b]=d(w[b],c-1))}return u}return d(i,f)}n.clonePrototype=function(i){if(i===null)return null;var o=function(){};return o.prototype=i,new o}})(ff);var hu=ff.exports,of=function(r){r=hu(r);var t=r.reverse,n=r.max||r.end,i=r.min||r.start,o=[i,n];return i!=null&&n!=null&&o.sort(),t&&(o=o.reverse()),r.start=o[0],r.end=o[1],delete r.min,delete r.max,r},lt={exports:{}},ct={exports:{}},Cn;function du(){if(Cn)return ct.exports;Cn=1;/**!
 * is
 * the definitive JavaScript type testing library
 * 
 * @copyright 2013 Enrico Marino
 * @license MIT
 */var e=Object.prototype,r=e.hasOwnProperty,t=e.toString,n=function(f){return f!==f},i={boolean:1,number:1,string:1,undefined:1},o=ct.exports={};return o.a=o.type=function(f,a){return typeof f===a},o.defined=function(f){return f!==void 0},o.empty=function(f){var a=t.call(f),g;if(a==="[object Array]"||a==="[object Arguments]")return f.length===0;if(a==="[object Object]"){for(g in f)if(r.call(f,g))return!1;return!0}return a==="[object String]"?f==="":!1},o.equal=function(f,a){var g=t.call(f),h;if(g!==t.call(a))return!1;if(g==="[object Object]"){for(h in f)if(!o.equal(f[h],a[h]))return!1;return!0}if(g==="[object Array]"){if(h=f.length,h!==a.length)return!1;for(;--h;)if(!o.equal(f[h],a[h]))return!1;return!0}return g==="[object Function]"?f.prototype===a.prototype:g==="[object Date]"?f.getTime()===a.getTime():f===a},o.hosted=function(f,a){var g=typeof a[f];return g==="object"?!!a[f]:!i[g]},o.instance=o.instanceof=function(f,a){return f instanceof a},o.null=function(f){return f===null},o.undefined=function(f){return f===void 0},o.arguments=function(f){var a=t.call(f)==="[object Arguments]",g=!o.array(f)&&o.arraylike(f)&&o.object(f)&&o.fn(f.callee);return a||g},o.array=function(f){return t.call(f)==="[object Array]"},o.arguments.empty=function(f){return o.arguments(f)&&f.length===0},o.array.empty=function(f){return o.array(f)&&f.length===0},o.arraylike=function(f){return!!f&&!o.boolean(f)&&r.call(f,"length")&&isFinite(f.length)&&o.number(f.length)&&f.length>=0},o.boolean=function(f){return t.call(f)==="[object Boolean]"},o.false=function(f){return o.boolean(f)&&(f===!1||f.valueOf()===!1)},o.true=function(f){return o.boolean(f)&&(f===!0||f.valueOf()===!0)},o.date=function(f){return t.call(f)==="[object Date]"},o.element=function(f){return f!==void 0&&typeof HTMLElement<"u"&&f instanceof HTMLElement&&f.nodeType===1},o.error=function(f){return t.call(f)==="[object Error]"},o.fn=o.function=function(f){var a=typeof window<"u"&&f===window.alert;return a||t.call(f)==="[object Function]"},o.number=function(f){return t.call(f)==="[object Number]"},o.infinite=function(f){return f===1/0||f===-1/0},o.decimal=function(f){return o.number(f)&&!n(f)&&!o.infinite(f)&&f%1!==0},o.divisibleBy=function(f,a){var g=o.infinite(f),h=o.infinite(a),p=o.number(f)&&!n(f)&&o.number(a)&&!n(a)&&a!==0;return g||h||p&&f%a===0},o.int=function(f){return o.number(f)&&!n(f)&&f%1===0},o.maximum=function(f,a){if(n(f))throw new TypeError("NaN is not a valid value");if(!o.arraylike(a))throw new TypeError("second argument must be array-like");for(var g=a.length;--g>=0;)if(f<a[g])return!1;return!0},o.minimum=function(f,a){if(n(f))throw new TypeError("NaN is not a valid value");if(!o.arraylike(a))throw new TypeError("second argument must be array-like");for(var g=a.length;--g>=0;)if(f>a[g])return!1;return!0},o.nan=function(f){return!o.number(f)||f!==f},o.even=function(f){return o.infinite(f)||o.number(f)&&f===f&&f%2===0},o.odd=function(f){return o.infinite(f)||o.number(f)&&f===f&&f%2!==0},o.ge=function(f,a){if(n(f)||n(a))throw new TypeError("NaN is not a valid value");return!o.infinite(f)&&!o.infinite(a)&&f>=a},o.gt=function(f,a){if(n(f)||n(a))throw new TypeError("NaN is not a valid value");return!o.infinite(f)&&!o.infinite(a)&&f>a},o.le=function(f,a){if(n(f)||n(a))throw new TypeError("NaN is not a valid value");return!o.infinite(f)&&!o.infinite(a)&&f<=a},o.lt=function(f,a){if(n(f)||n(a))throw new TypeError("NaN is not a valid value");return!o.infinite(f)&&!o.infinite(a)&&f<a},o.within=function(f,a,g){if(n(f)||n(a)||n(g))throw new TypeError("NaN is not a valid value");if(!o.number(f)||!o.number(a)||!o.number(g))throw new TypeError("all arguments must be numbers");var h=o.infinite(f)||o.infinite(a)||o.infinite(g);return h||f>=a&&f<=g},o.object=function(f){return f&&t.call(f)==="[object Object]"},o.hash=function(f){return o.object(f)&&f.constructor===Object&&!f.nodeType&&!f.setInterval},o.regexp=function(f){return t.call(f)==="[object RegExp]"},o.string=function(f){return t.call(f)==="[object String]"},ct.exports}var ht,$n;function pu(){if($n)return ht;$n=1;var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString;return ht=function(n,i,o){if(r.call(i)!=="[object Function]")throw new TypeError("iterator must be a function");var f=n.length;if(f===+f)for(var a=0;a<f;a++)i.call(o,n[a],a,n);else for(var g in n)e.call(n,g)&&i.call(o,n[g],g,n)},ht}var In;function gu(){return In||(In=1,function(){var e=Object.prototype.hasOwnProperty,r=du(),t=pu(),n=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o;o=function(a){if(!r.object(a)&&!r.array(a))throw new TypeError("Object.keys called on a non-object");var g,h=[];for(g in a)e.call(a,g)&&h.push(g);return n&&t(i,function(p){e.call(a,p)&&h.push(p)}),h},lt.exports=o}()),lt.exports}var vu=Object.keys||gu(),yu=bu;function bu(e){return e!==null&&(typeof e=="object"||typeof e=="function")}var wu=vu,mu=yu,_u=Eu;function Eu(){for(var e={},r=0;r<arguments.length;r++){var t=arguments[r];if(!!mu(t))for(var n=wu(t),i=0;i<n.length;i++){var o=n[i];e[o]=t[o]}}return e}function Ln(e,r,t,n){var i={type:e,key:r,value:t,options:n};return n&&n.prefix&&(i.prefix=n.prefix,delete n.prefix),this._operations.push(i),this}function af(e){this._operations=[],this._sdb=e,this.put=Ln.bind(this,"put"),this.del=Ln.bind(this,"del")}var uf=af.prototype;uf.clear=function(){this._operations=[]};uf.write=function(e){this._sdb.batch(this._operations,e)};var sf=af,Su=Be.exports.EventEmitter,xu=Se.inherits,an=on,lf=of,cf=_u,Ru=sf;xu(Ge,Su);function Ge(e,r,t){if(typeof t=="string"&&(console.error("db.sublevel(name, seperator<string>) is depreciated"),console.error("use db.sublevel(name, {sep: separator})) if you must"),t={sep:t}),!(this instanceof Ge))return new Ge(e,r,t);if(!e)throw new Error("must provide db");if(!r)throw new Error("must provide prefix");t=t||{},t.sep=t.sep||"\xFF",this._parent=e,this._options=t,this.options=t,this._prefix=r,this._root=Ke(this),e.sublevels[r]=this,this.sublevels={},this.methods={};var n=this;this.hooks={pre:function(){return n.pre.apply(n,arguments)},post:function(){return n.post.apply(n,arguments)}}}var oe=Ge.prototype;oe._key=function(e){var r=this._options.sep;return r+this._prefix+r+e};oe._getOptsAndCb=function(e,r){return typeof e=="function"&&(r=e,e={}),{opts:cf(e,this._options),cb:r}};oe.sublevel=function(e,r){return this.sublevels[e]?this.sublevels[e]:new Ge(this,e,r||this._options)};oe.put=function(e,r,t,n){var i=this._getOptsAndCb(t,n);this._root.put(this.prefix(e),r,i.opts,i.cb)};oe.get=function(e,r,t){var n=this._getOptsAndCb(r,t);this._root.get(this.prefix(e),n.opts,n.cb)};oe.del=function(e,r,t){var n=this._getOptsAndCb(r,t);this._root.del(this.prefix(e),n.opts,n.cb)};oe.batch=function(e,r,t){if(!Array.isArray(e))return new Ru(this);var n=this,i=this._getOptsAndCb(r,t);e.forEach(function(o){typeof o.prefix=="string"?o.key=o.prefix+o.key:o.key=(o.prefix||n).prefix(o.key),o.prefix&&(o.prefix=null)}),this._root.batch(e,i.opts,i.cb)};oe._getKeyEncoding=function(){if(this.options.keyEncoding)return this.options.keyEncoding;if(this._parent&&this._parent._getKeyEncoding)return this._parent._getKeyEncoding()};oe._getValueEncoding=function(){if(this.options.valueEncoding)return this.options.valueEncoding;if(this._parent&&this._parent._getValueEncoding)return this._parent._getValueEncoding()};oe.prefix=function(e){var r=this._options.sep;return this._parent.prefix()+r+this._prefix+r+(e||"")};oe.keyStream=oe.createKeyStream=function(e){return e=e||{},e.keys=!0,e.values=!1,this.createReadStream(e)};oe.valueStream=oe.createValueStream=function(e){return e=e||{},e.keys=!1,e.values=!0,e.keys=!1,this.createReadStream(e)};function Tu(e,r){["valueEncoding","encoding","keyEncoding","reverse","values","keys","limit","fillCache"].forEach(function(t){r.hasOwnProperty(t)&&(e[t]=r[t])})}oe.readStream=oe.createReadStream=function(e){e=e||{};var r=Ke(this),t=this.prefix(),n=an.prefix(e,t);Tu(n,cf(e,this._options));var i=r.createReadStream(n);if(n.values===!1){var o=i.read;if(o)i.read=function(a){var g=o.call(this,a);return g&&(g=g.substring(t.length)),g};else{var f=i.emit;i.emit=function(a,g){a==="data"?f.call(this,"data",g.substring(t.length)):f.call(this,a,g)}}return i}else{if(n.keys===!1)return i;var o=i.read;return o?i.read=function(g){var h=o.call(this,g);return h&&(h.key=h.key.substring(t.length)),h}:i.on("data",function(g){g.key=g.key.substring(t.length)}),i}};oe.writeStream=oe.createWriteStream=function(){var e=Ke(this),r=this.prefix(),t=e.createWriteStream.apply(e,arguments),n=t.write,i=this._options.encoding,o=this._options.valueEncoding,f=this._options.keyEncoding,a=!i&&!o&&!f;return t.write=a?function(g){return g.key=r+g.key,n.call(t,g)}:function(g){return g.key=r+g.key,i&&typeof g.encoding>"u"&&(g.encoding=i),o&&typeof g.valueEncoding>"u"&&(g.valueEncoding=o),f&&typeof g.keyEncoding>"u"&&(g.keyEncoding=f),n.call(t,g)},t};oe.approximateSize=function(){var e=Ke(db);return e.approximateSize.apply(e,arguments)};function Ke(e){return e._parent?Ke(e._parent):e}oe.pre=function(e,r){r||(r=e,e=null),e=an.prefix(e,this.prefix(),this._options.sep);var t=Ke(this._parent),n=this.prefix();return t.hooks.pre(lf(e),function(i,o,f){r({key:i.key.substring(n.length),value:i.value,type:i.type},function(a,g){o(a,a.prefix?g:g||n)},f)})};oe.post=function(e,r){r||(r=e,e=null);var t=Ke(this._parent),n=this.prefix();return e=an.prefix(e,n,this._options.sep),t.hooks.post(lf(e),function(i){r({key:i.key.substring(n.length),value:i.value,type:i.type})})};nf.exports=Ge;var Wn=on,Ou=function(e){if(e.hooks)return;var r=[],t=[];function n(w){return w&&(typeof w=="string"?w:typeof w.prefix=="string"?w.prefix:typeof w.prefix=="function"?w.prefix():"")}function i(w){if(w&&w._getKeyEncoding)return w._getKeyEncoding(w)}function o(w){if(w&&w._getValueEncoding)return w._getValueEncoding(w)}function f(w,c){return function(){var u=w.indexOf(c);return~u?(w.splice(u,1),!0):!1}}e.hooks={post:function(w,c){c||(c=w,w="");var u={test:Wn.checker(w),hook:c};return r.push(u),f(r,u)},pre:function(w,c){c||(c=w,w="");var u={test:Wn.checker(w),hook:c,safe:w.safe!==!1};return t.push(u),f(t,u)},posthooks:r,prehooks:t};function a(w){w&&w.type&&r.forEach(function(c){c.test(w.key)&&c.hook(w)})}e.on("put",function(w,c){a({type:"put",key:w,value:c})}),e.on("del",function(w,c){a({type:"del",key:w,value:c})}),e.on("batch",function(c){c.forEach(a)});var g=e.put,h=e.del,p=e.batch;function d(w,c,u,v){try{c.forEach(function b(E,D){t.forEach(function(y){if(y.test(String(E.key))){var s={add:function(l,x){if(typeof l>"u")return this;if(l===!1)return delete c[D];var A=n(l.prefix)||n(x)||y.prefix||"";if(A&&(l.prefix=A),l.key=A+l.key,y.safe&&y.test(String(l.key)))throw new Error("prehook cannot insert into own range");var I=l.keyEncoding||i(l.prefix),K=l.valueEncoding||o(l.prefix);return I&&(l.keyEncoding=I),K&&(l.valueEncoding=K),c.push(l),b(l,c.length-1),this},put:function(l,x){return typeof l=="object"&&(l.type="put"),this.add(l,x)},del:function(l,x){return typeof l=="object"&&(l.type="del"),this.add(l,x)},veto:function(){return this.add(!1)}};y.hook.call(s,E,s.add,c)}})})}catch(b){return(v||u)(b)}if(c=c.filter(function(b){return b&&b.type}),c.length==1&&!w){var S=c[0];return S.type=="put"?g.call(e,S.key,S.value,u,v):h.call(e,S.key,u,v)}return p.call(e,c,u,v)}e.put=function(w,c,u,v){var S=[{key:w,value:c,type:"put"}];return d(!1,S,u,v)},e.del=function(w,c,u){var v=[{key:w,type:"del"}];return d(!1,v,c,u)},e.batch=function(w,c,u){return d(!0,w,c,u)}};Be.exports.EventEmitter;process.nextTick;var Bu=nf.exports,Mu=sf,Au=of,Du=Ou,ku=function(e,r){function t(){}t.prototype=e;var n=new t;if(n.sublevel)return n;r=r||{};var i=r.sep=r.sep||"\xFF";n._options=r,Du(n),n.sublevels={},n.sublevel=function(a,g){return n.sublevels[a]?n.sublevels[a]:new Bu(n,a,g||this._options)},n.methods={},n.prefix=function(a){return""+(a||"")},n.pre=function(a,g){return g||(g=a,a={max:i}),n.hooks.pre(a,g)},n.post=function(a,g){return g||(g=a,a={max:i}),n.hooks.post(a,g)};function o(a){return function(g){return g=g||{},g=Au(g),g.reverse?g.start=g.start||i:g.end=g.end||i,a.call(n,g)}}n.readStream=n.createReadStream=o(n.createReadStream),n.keyStream=n.createKeyStream=o(n.createKeyStream),n.valuesStream=n.createValueStream=o(n.createValueStream);var f=n.batch;return n.batch=function(a,g,h){if(!Array.isArray(a))return new Mu(n);a.forEach(function(p){p.prefix&&(typeof p.prefix.prefix=="function"?p.key=p.prefix.prefix(p.key):typeof p.prefix=="string"&&(p.key=p.prefix+p.key))}),f.call(n,a,g,h)},n},hf={exports:{}},dt,Pn;function df(){if(Pn)return dt;Pn=1,dt=g;var e=Ir,r=Re.Buffer;g.ReadableState=a;var t=Be.exports.EventEmitter;t.listenerCount||(t.listenerCount=function(R,T){return R.listeners(T).length});var n=pe(),i=z;i.inherits=ee.exports;var o,f=Se;f&&f.debuglog?f=f.debuglog("stream"):f=function(){},i.inherits(g,n);function a(R,T){var j=Je();R=R||{};var W=R.highWaterMark,Y=R.objectMode?16:16*1024;this.highWaterMark=W||W===0?W:Y,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!R.objectMode,T instanceof j&&(this.objectMode=this.objectMode||!!R.readableObjectMode),this.defaultEncoding=R.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,R.encoding&&(o||(o=Ne().StringDecoder),this.decoder=new o(R.encoding),this.encoding=R.encoding)}function g(R){if(Je(),!(this instanceof g))return new g(R);this._readableState=new a(R,this),this.readable=!0,n.call(this)}g.prototype.push=function(R,T){var j=this._readableState;return i.isString(R)&&!j.objectMode&&(T=T||j.defaultEncoding,T!==j.encoding&&(R=new r(R,T),T="")),h(this,j,R,T,!1)},g.prototype.unshift=function(R){var T=this._readableState;return h(this,T,R,"",!0)};function h(R,T,j,W,Y){var M=u(T,j);if(M)R.emit("error",M);else if(i.isNullOrUndefined(j))T.reading=!1,T.ended||v(R,T);else if(T.objectMode||j&&j.length>0)if(T.ended&&!Y){var B=new Error("stream.push() after EOF");R.emit("error",B)}else if(T.endEmitted&&Y){var B=new Error("stream.unshift() after end event");R.emit("error",B)}else T.decoder&&!Y&&!W&&(j=T.decoder.write(j)),Y||(T.reading=!1),T.flowing&&T.length===0&&!T.sync?(R.emit("data",j),R.read(0)):(T.length+=T.objectMode?1:j.length,Y?T.buffer.unshift(j):T.buffer.push(j),T.needReadable&&S(R)),E(R,T);else Y||(T.reading=!1);return p(T)}function p(R){return!R.ended&&(R.needReadable||R.length<R.highWaterMark||R.length===0)}g.prototype.setEncoding=function(R){return o||(o=Ne().StringDecoder),this._readableState.decoder=new o(R),this._readableState.encoding=R,this};var d=8388608;function w(R){if(R>=d)R=d;else{R--;for(var T=1;T<32;T<<=1)R|=R>>T;R++}return R}function c(R,T){return T.length===0&&T.ended?0:T.objectMode?R===0?0:1:isNaN(R)||i.isNull(R)?T.flowing&&T.buffer.length?T.buffer[0].length:T.length:R<=0?0:(R>T.highWaterMark&&(T.highWaterMark=w(R)),R>T.length?T.ended?T.length:(T.needReadable=!0,0):R)}g.prototype.read=function(R){f("read",R);var T=this._readableState,j=R;if((!i.isNumber(R)||R>0)&&(T.emittedReadable=!1),R===0&&T.needReadable&&(T.length>=T.highWaterMark||T.ended))return f("read: emitReadable",T.length,T.ended),T.length===0&&T.ended?I(this):S(this),null;if(R=c(R,T),R===0&&T.ended)return T.length===0&&I(this),null;var W=T.needReadable;f("need readable",W),(T.length===0||T.length-R<T.highWaterMark)&&(W=!0,f("length less than watermark",W)),(T.ended||T.reading)&&(W=!1,f("reading or ended",W)),W&&(f("do read"),T.reading=!0,T.sync=!0,T.length===0&&(T.needReadable=!0),this._read(T.highWaterMark),T.sync=!1),W&&!T.reading&&(R=c(j,T));var Y;return R>0?Y=A(R,T):Y=null,i.isNull(Y)&&(T.needReadable=!0,R=0),T.length-=R,T.length===0&&!T.ended&&(T.needReadable=!0),j!==R&&T.ended&&T.length===0&&I(this),i.isNull(Y)||this.emit("data",Y),Y};function u(R,T){var j=null;return!i.isBuffer(T)&&!i.isString(T)&&!i.isNullOrUndefined(T)&&!R.objectMode&&(j=new TypeError("Invalid non-string/buffer chunk")),j}function v(R,T){if(T.decoder&&!T.ended){var j=T.decoder.end();j&&j.length&&(T.buffer.push(j),T.length+=T.objectMode?1:j.length)}T.ended=!0,S(R)}function S(R){var T=R._readableState;T.needReadable=!1,T.emittedReadable||(f("emitReadable",T.flowing),T.emittedReadable=!0,T.sync?process.nextTick(function(){b(R)}):b(R))}function b(R){f("emit readable"),R.emit("readable"),x(R)}function E(R,T){T.readingMore||(T.readingMore=!0,process.nextTick(function(){D(R,T)}))}function D(R,T){for(var j=T.length;!T.reading&&!T.flowing&&!T.ended&&T.length<T.highWaterMark&&(f("maybeReadMore read 0"),R.read(0),j!==T.length);)j=T.length;T.readingMore=!1}g.prototype._read=function(R){this.emit("error",new Error("not implemented"))},g.prototype.pipe=function(R,T){var j=this,W=this._readableState;switch(W.pipesCount){case 0:W.pipes=R;break;case 1:W.pipes=[W.pipes,R];break;default:W.pipes.push(R);break}W.pipesCount+=1,f("pipe count=%d opts=%j",W.pipesCount,T);var Y=(!T||T.end!==!1)&&R!==process.stdout&&R!==process.stderr,M=Y?C:L;W.endEmitted?process.nextTick(M):j.once("end",M),R.on("unpipe",B);function B(m){f("onunpipe"),m===j&&L()}function C(){f("onend"),R.end()}var O=y(j);R.on("drain",O);function L(){f("cleanup"),R.removeListener("close",X),R.removeListener("finish",V),R.removeListener("drain",O),R.removeListener("error",q),R.removeListener("unpipe",B),j.removeListener("end",C),j.removeListener("end",L),j.removeListener("data",k),W.awaitDrain&&(!R._writableState||R._writableState.needDrain)&&O()}j.on("data",k);function k(m){f("ondata");var _=R.write(m);_===!1&&(f("false write response, pause",j._readableState.awaitDrain),j._readableState.awaitDrain++,j.pause())}function q(m){f("onerror",m),U(),R.removeListener("error",q),t.listenerCount(R,"error")===0&&R.emit("error",m)}!R._events||!R._events.error?R.on("error",q):e(R._events.error)?R._events.error.unshift(q):R._events.error=[q,R._events.error];function X(){R.removeListener("finish",V),U()}R.once("close",X);function V(){f("onfinish"),R.removeListener("close",X),U()}R.once("finish",V);function U(){f("unpipe"),j.unpipe(R)}return R.emit("pipe",j),W.flowing||(f("pipe resume"),j.resume()),R};function y(R){return function(){var T=R._readableState;f("pipeOnDrain",T.awaitDrain),T.awaitDrain&&T.awaitDrain--,T.awaitDrain===0&&t.listenerCount(R,"data")&&(T.flowing=!0,x(R))}}g.prototype.unpipe=function(R){var T=this._readableState;if(T.pipesCount===0)return this;if(T.pipesCount===1)return R&&R!==T.pipes?this:(R||(R=T.pipes),T.pipes=null,T.pipesCount=0,T.flowing=!1,R&&R.emit("unpipe",this),this);if(!R){var j=T.pipes,W=T.pipesCount;T.pipes=null,T.pipesCount=0,T.flowing=!1;for(var Y=0;Y<W;Y++)j[Y].emit("unpipe",this);return this}var Y=G(T.pipes,R);return Y===-1?this:(T.pipes.splice(Y,1),T.pipesCount-=1,T.pipesCount===1&&(T.pipes=T.pipes[0]),R.emit("unpipe",this),this)},g.prototype.on=function(R,T){var j=n.prototype.on.call(this,R,T);if(R==="data"&&this._readableState.flowing!==!1&&this.resume(),R==="readable"&&this.readable){var W=this._readableState;if(!W.readableListening)if(W.readableListening=!0,W.emittedReadable=!1,W.needReadable=!0,W.reading)W.length&&S(this);else{var Y=this;process.nextTick(function(){f("readable nexttick read 0"),Y.read(0)})}}return j},g.prototype.addListener=g.prototype.on,g.prototype.resume=function(){var R=this._readableState;return R.flowing||(f("resume"),R.flowing=!0,R.reading||(f("resume read 0"),this.read(0)),s(this,R)),this};function s(R,T){T.resumeScheduled||(T.resumeScheduled=!0,process.nextTick(function(){l(R,T)}))}function l(R,T){T.resumeScheduled=!1,R.emit("resume"),x(R),T.flowing&&!T.reading&&R.read(0)}g.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function x(R){var T=R._readableState;if(f("flow",T.flowing),T.flowing)do var j=R.read();while(j!==null&&T.flowing)}g.prototype.wrap=function(R){var T=this._readableState,j=!1,W=this;R.on("end",function(){if(f("wrapped end"),T.decoder&&!T.ended){var B=T.decoder.end();B&&B.length&&W.push(B)}W.push(null)}),R.on("data",function(B){if(f("wrapped data"),T.decoder&&(B=T.decoder.write(B)),!(!B||!T.objectMode&&!B.length)){var C=W.push(B);C||(j=!0,R.pause())}});for(var Y in R)i.isFunction(R[Y])&&i.isUndefined(this[Y])&&(this[Y]=function(B){return function(){return R[B].apply(R,arguments)}}(Y));var M=["error","close","destroy","pause","resume"];return K(M,function(B){R.on(B,W.emit.bind(W,B))}),W._read=function(B){f("wrapped _read",B),j&&(j=!1,R.resume())},W},g._fromList=A;function A(R,T){var j=T.buffer,W=T.length,Y=!!T.decoder,M=!!T.objectMode,B;if(j.length===0)return null;if(W===0)B=null;else if(M)B=j.shift();else if(!R||R>=W)Y?B=j.join(""):B=r.concat(j,W),j.length=0;else if(R<j[0].length){var C=j[0];B=C.slice(0,R),j[0]=C.slice(R)}else if(R===j[0].length)B=j.shift();else{Y?B="":B=new r(R);for(var O=0,L=0,k=j.length;L<k&&O<R;L++){var C=j[0],q=Math.min(R-O,C.length);Y?B+=C.slice(0,q):C.copy(B,O,0,q),q<C.length?j[0]=C.slice(q):j.shift(),O+=q}}return B}function I(R){var T=R._readableState;if(T.length>0)throw new Error("endReadable called on non-empty stream");T.endEmitted||(T.ended=!0,process.nextTick(function(){!T.endEmitted&&T.length===0&&(T.endEmitted=!0,R.readable=!1,R.emit("end"))}))}function K(R,T){for(var j=0,W=R.length;j<W;j++)T(R[j],j)}function G(R,T){for(var j=0,W=R.length;j<W;j++)if(R[j]===T)return j;return-1}return dt}var pt,Un;function Je(){if(Un)return pt;Un=1,pt=i;var e=Object.keys||function(a){var g=[];for(var h in a)g.push(h);return g},r=z;r.inherits=ee.exports;var t=df(),n=un();r.inherits(i,t),f(e(n.prototype),function(a){i.prototype[a]||(i.prototype[a]=n.prototype[a])});function i(a){if(!(this instanceof i))return new i(a);t.call(this,a),n.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",o)}function o(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}function f(a,g){for(var h=0,p=a.length;h<p;h++)g(a[h],h)}return pt}var gt,Fn;function un(){if(Fn)return gt;Fn=1,gt=o;var e=Re.Buffer;o.WritableState=i;var r=z;r.inherits=ee.exports;var t=pe();r.inherits(o,t);function n(s,l,x){this.chunk=s,this.encoding=l,this.callback=x}function i(s,l){var x=Je();s=s||{};var A=s.highWaterMark,I=s.objectMode?16:16*1024;this.highWaterMark=A||A===0?A:I,this.objectMode=!!s.objectMode,l instanceof x&&(this.objectMode=this.objectMode||!!s.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var K=s.decodeStrings===!1;this.decodeStrings=!K,this.defaultEncoding=s.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(G){c(l,G)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(s){var l=Je();if(!(this instanceof o)&&!(this instanceof l))return new o(s);this._writableState=new i(s,this),this.writable=!0,t.call(this)}o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function f(s,l,x){var A=new Error("write after end");s.emit("error",A),process.nextTick(function(){x(A)})}function a(s,l,x,A){var I=!0;if(!r.isBuffer(x)&&!r.isString(x)&&!r.isNullOrUndefined(x)&&!l.objectMode){var K=new TypeError("Invalid non-string/buffer chunk");s.emit("error",K),process.nextTick(function(){A(K)}),I=!1}return I}o.prototype.write=function(s,l,x){var A=this._writableState,I=!1;return r.isFunction(l)&&(x=l,l=null),r.isBuffer(s)?l="buffer":l||(l=A.defaultEncoding),r.isFunction(x)||(x=function(){}),A.ended?f(this,A,x):a(this,A,s,x)&&(A.pendingcb++,I=h(this,A,s,l,x)),I},o.prototype.cork=function(){var s=this._writableState;s.corked++},o.prototype.uncork=function(){var s=this._writableState;s.corked&&(s.corked--,!s.writing&&!s.corked&&!s.finished&&!s.bufferProcessing&&s.buffer.length&&S(this,s))};function g(s,l,x){return!s.objectMode&&s.decodeStrings!==!1&&r.isString(l)&&(l=new e(l,x)),l}function h(s,l,x,A,I){x=g(l,x,A),r.isBuffer(x)&&(A="buffer");var K=l.objectMode?1:x.length;l.length+=K;var G=l.length<l.highWaterMark;return G||(l.needDrain=!0),l.writing||l.corked?l.buffer.push(new n(x,A,I)):p(s,l,!1,K,x,A,I),G}function p(s,l,x,A,I,K,G){l.writelen=A,l.writecb=G,l.writing=!0,l.sync=!0,x?s._writev(I,l.onwrite):s._write(I,K,l.onwrite),l.sync=!1}function d(s,l,x,A,I){x?process.nextTick(function(){l.pendingcb--,I(A)}):(l.pendingcb--,I(A)),s._writableState.errorEmitted=!0,s.emit("error",A)}function w(s){s.writing=!1,s.writecb=null,s.length-=s.writelen,s.writelen=0}function c(s,l){var x=s._writableState,A=x.sync,I=x.writecb;if(w(x),l)d(s,x,A,l,I);else{var K=b(s,x);!K&&!x.corked&&!x.bufferProcessing&&x.buffer.length&&S(s,x),A?process.nextTick(function(){u(s,x,K,I)}):u(s,x,K,I)}}function u(s,l,x,A){x||v(s,l),l.pendingcb--,A(),D(s,l)}function v(s,l){l.length===0&&l.needDrain&&(l.needDrain=!1,s.emit("drain"))}function S(s,l){if(l.bufferProcessing=!0,s._writev&&l.buffer.length>1){for(var x=[],A=0;A<l.buffer.length;A++)x.push(l.buffer[A].callback);l.pendingcb++,p(s,l,!0,l.length,l.buffer,"",function(j){for(var W=0;W<x.length;W++)l.pendingcb--,x[W](j)}),l.buffer=[]}else{for(var A=0;A<l.buffer.length;A++){var I=l.buffer[A],K=I.chunk,G=I.encoding,R=I.callback,T=l.objectMode?1:K.length;if(p(s,l,!1,T,K,G,R),l.writing){A++;break}}A<l.buffer.length?l.buffer=l.buffer.slice(A):l.buffer.length=0}l.bufferProcessing=!1}o.prototype._write=function(s,l,x){x(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(s,l,x){var A=this._writableState;r.isFunction(s)?(x=s,s=null,l=null):r.isFunction(l)&&(x=l,l=null),r.isNullOrUndefined(s)||this.write(s,l),A.corked&&(A.corked=1,this.uncork()),!A.ending&&!A.finished&&y(this,A,x)};function b(s,l){return l.ending&&l.length===0&&!l.finished&&!l.writing}function E(s,l){l.prefinished||(l.prefinished=!0,s.emit("prefinish"))}function D(s,l){var x=b(s,l);return x&&(l.pendingcb===0?(E(s,l),l.finished=!0,s.emit("finish")):E(s,l)),x}function y(s,l,x){l.ending=!0,D(s,l),x&&(l.finished?process.nextTick(x):s.once("finish",x)),l.ended=!0}return gt}(function(e){e.exports=un()})(hf);var Wt={exports:{}},pf=Le,sn=Je(),_r=z;_r.inherits=ee.exports;_r.inherits(Le,sn);function Nu(e,r){this.afterTransform=function(t,n){return ju(r,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function ju(e,r,t){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,_r.isNullOrUndefined(t)||e.push(t),i&&i(r);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function Le(e){if(!(this instanceof Le))return new Le(e);sn.call(this,e),this._transformState=new Nu(e,this);var r=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){_r.isFunction(this._flush)?this._flush(function(t){qn(r,t)}):qn(r)})}Le.prototype.push=function(e,r){return this._transformState.needTransform=!1,sn.prototype.push.call(this,e,r)};Le.prototype._transform=function(e,r,t){throw new Error("not implemented")};Le.prototype._write=function(e,r,t){var n=this._transformState;if(n.writecb=t,n.writechunk=e,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Le.prototype._read=function(e){var r=this._transformState;!_r.isNull(r.writechunk)&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0};function qn(e,r){if(r)return e.emit("error",r);var t=e._writableState,n=e._transformState;if(t.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}var Cu=pr,gf=pf,vf=z;vf.inherits=ee.exports;vf.inherits(pr,gf);function pr(e){if(!(this instanceof pr))return new pr(e);gf.call(this,e)}pr.prototype._transform=function(e,r,t){t(null,e)};(function(e,r){r=e.exports=df(),r.Stream=pe(),r.Readable=r,r.Writable=un(),r.Duplex=Je(),r.Transform=pf,r.PassThrough=Cu,!process.browser&&process.env.READABLE_STREAM==="disable"&&(e.exports=pe())})(Wt,Wt.exports);var $r={exports:{}},$u=function(r){var t=r.reverse,n=r.end,i=r.start,o=[i,n];return i!=null&&n!=null&&o.sort(),t&&(o=o.reverse()),r.start=o[0],r.end=o[1],r};(function(e,r){var t=$u;r=e.exports=i,r.first=o,r.last=f;function n(a,g,h){var p=[];return g.forEach(function(d){function w(c){h(d,c)!==!1&&p.forEach(function(u){u()})}a.on(d,w),p.push(function(){a.removeListener(d,w)})}),a}function i(a,g,h){g.limit=g.reverse?2:1,n(a.createReadStream(g),["data","error","end"],function(p,d){if(g.reverse&&d&&g.start&&d.key.toString()>g.start)return!1;p=="error"?h(d):p=="end"?h(new Error("range not found"),null,null):h(null,d.key,d.value)})}function o(a,g,h){return h||(h=g,g={}),g.reverse=!1,i(a,t(g),h)}function f(a,g,h){return h||(h=g,g={}),g.start,g.reverse=!0,i(a,t(g),function(p,d,w){if(p){var c=g.start;g.start=null,i(a,g,function(u,v,S){if(!v)return h(p,null,null);var b=v.toString();b<=c&&(!g.end||b>=g.end)?h(u,v,S):h(p,null,null)})}else h(p,d,w)})}})($r,$r.exports);var Er={exports:{}},Iu=yf;function yf(e,r){if(e&&r)return yf(e)(r);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){t[n]=e[n]}),t;function t(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var o=e.apply(this,n),f=n[n.length-1];return typeof o=="function"&&o!==f&&Object.keys(f).forEach(function(a){o[a]=f[a]}),o}}var bf=Iu;Er.exports=bf(Br);Er.exports.strict=bf(wf);Br.proto=Br(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Br(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return wf(this)},configurable:!0})});function Br(e){var r=function(){return r.called?r.value:(r.called=!0,r.value=e.apply(this,arguments))};return r.called=!1,r}function wf(e){var r=function(){if(r.called)throw new Error(r.onceError);return r.called=!0,r.value=e.apply(this,arguments)},t=e.name||"Function wrapped with `once`";return r.onceError=t+" shouldn't be called more than once",r.called=!1,r}var vt=hf.exports,Kn=Wt.exports,Lu=$r.exports,Vn=Se,Hn=Er.exports,Yn=new Buffer(0),Rr={encode:function(e){return typeof e=="string"?e=new Buffer(e):e},decode:function(e){return Buffer.isBuffer(e)?e:new Buffer(e)},buffer:!0,type:"raw"},yt=function(){},bt=function(e){return e=e.toString(16),"00000000".slice(0,-e.length)+e},Wu=function(e,r){var t=new Buffer(r);return e.copy(t),t},Pu=function(e,r){r||(r={});var t={},n=r.blockSize||65536,i=r.batch||100,o=new Buffer(n);e.put("\0","ignore",yt);var f={},a=function(p,d,w,c,u){var v=function(){--f[p].locks||delete f[p]},S=function(b){if(b.locks++,!b.block&&!d){b.block=w,u(null,b.block,v);return}b.block||(b.block=new Buffer(n)),b.block.length<d+w.length&&(b.block=Wu(b.block,d+w.length)),w.copy(b.block,d),!c&&d+w.length<b.block.length&&(b.block=b.block.slice(0,d+w.length)),u(null,b.block,v)};if(f[p])return S(f[p]);e.get(p,{valueEncoding:Rr},function(b,E){if(b&&!b.notFound)return u(b);f[p]||(f[p]={locks:0,block:E}),S(f[p])})},g=function(p,d){if(!(this instanceof g))return new g(p,d);d||(d={}),this.name=p,this.blocks=[],this.batch=[],this.bytesWritten=0,this.truncate=!d.append,this.append=d.append,this._shouldInitAppend=this.append&&d.start===void 0,this._destroyed=!1,this._init(d.start||0),vt.call(this)};Vn.inherits(g,vt),g.prototype._init=function(p){this.blockIndex=p/n|0,this.blockOffset=p-this.blockIndex*n,this.blockLength=this.blockOffset},g.prototype._flush=function(p){if(!this.batch.length)return p();var d=this.batch[this.batch.length-1].key,w=this.batch;if(this.batch=[],!this.truncate)return e.batch(w,p);this.truncate=!1,this._truncate(w,d,p)},g.prototype._truncate=function(p,d,w){w=Hn(w);var c=[],u=e.createKeyStream({start:d,end:this.name+"\xFF\xFF"});u.on("error",w),u.on("data",function(v){c.push({type:"del",key:v})}),u.on("end",function(){c.push.apply(c,p),e.batch(c,w)})},g.prototype._writeBlock=function(p){var d=this.blocks.length===1?this.blocks[0]:Buffer.concat(this.blocks,this.blockLength-this.blockOffset),w=this.blockIndex,c=this.blockOffset,u=this;this.blockOffset=0,this.blockLength=0,this.blockIndex++,this.blocks=[];var v=this.name+"\xFF"+bt(w),S=function(b,E,D){return b.length&&u.batch.push({type:"put",key:v,value:b,valueEncoding:Rr}),!E&&u.batch.length<i?D():u._flush(D)};if(!c&&d.length===n||!c&&!this.append)return S(d,!1,p);a(v,c,d,this.append,function(b,E,D){if(b)return p(b);S(E,!0,function(y){D(),p(y)})})},g.prototype._initAppend=function(p,d,w){var c=this;this._shouldInitAppend=!1,t.size(this.name,function(u,v){if(u)return w(u);c._init(v),c._write(p,d,w)})},g.prototype._write=function(p,d,w){if(!p.length||this._destroyed)return w();if(this._shouldInitAppend)return this._initAppend(p,d,w);var c=this,u,v=n-this.blockLength,S=function(b){if(b)return w(b);if(u)return c._write(u,d,w);w()};if(p.length>v&&(u=p.slice(v),p=p.slice(0,v)),this.bytesWritten+=p.length,this.blockLength+=p.length,this.blocks.push(p),p.length<v)return S();this._writeBlock(S)},g.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,process.nextTick(this.emit.bind(this,"close")))},g.prototype.end=function(p){var d=this,w=arguments;p&&typeof p!="function"&&(this.write(p),p=Yn),this.write(Yn,function(){d._writeBlock(function(c){if(c)return d.emit("error",c);d._flush(function(u){if(u)return d.emit("error",u);vt.prototype.end.apply(d,w)})})})};var h=function(p,d){d||(d={});var w=this,c=d.start||0,u=c/n|0,v=c-u*n,S=p+"\xFF"+bt(u);this.name=p,this._missing=(typeof d.end=="number"?d.end:1/0)-c+1,this._paused=!1,this._destroyed=!1,this._reader=e.createReadStream({start:S,end:p+"\xFF\xFF",valueEncoding:Rr});var b=function(E){return S=p+"\xFF"+bt(++u),w._missing?v&&(E=E.slice(v),v=0,!E.length)?!0:(E.length>w._missing&&(E=E.slice(0,w._missing)),w._missing-=E.length,w._pause(!w.push(E)),!!w._missing):!1};this._reader.on("data",function(E){for(;E.key>S;)if(!b(o))return;b(E.value)}),this._reader.on("error",function(E){w.emit("error",E)}),this._reader.on("end",function(){w.push(null)}),Kn.call(this)};return Vn.inherits(h,Kn),h.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this._reader.destroy(),process.nextTick(this.emit.bind(this,"close")))},h.prototype._pause=function(p){this._paused!==p&&(this._paused=p,this._paused?this._reader.pause():this._reader.resume())},h.prototype._read=function(){this._pause(!1)},t.remove=function(p,d){d=Hn(d||yt);var w=[],c=e.createKeyStream({start:p+"\xFF",end:p+"\xFF\xFF"});c.on("error",d),c.on("data",function(u){w.push({type:"del",key:u})}),c.on("end",function(){e.batch(w,d)})},t.size=function(p,d){Lu.last(e,{start:p+"\xFF",end:p+"\xFF\xFF",valueEncoding:Rr},function(w,c,u){if(w&&w.message==="range not found")return d(null,0);if(w)return d(w);if(c.slice(0,p.length+1)!==p+"\xFF")return d(null,0);d(null,parseInt(c.toString().slice(p.length+1),16)*n+u.length)})},t.write=function(p,d,w,c){if(typeof w=="function")return t.write(p,d,null,w);w||(w={}),c||(c=yt);var u=t.createWriteStream(p,w);u.on("error",c),u.on("finish",function(){c()}),u.write(d),u.end()},t.read=function(p,d,w){if(typeof d=="function")return t.read(p,null,d);d||(d={});var c=t.createReadStream(p,d),u=[];c.on("error",w),c.on("data",function(v){u.push(v)}),c.on("end",function(){w(null,u.length===1?u[0]:Buffer.concat(u))})},t.createReadStream=function(p,d){return new h(p,d)},t.createWriteStream=function(p,d){return new g(p,d)},t},mf=function(e,r){return parseInt(e.toString(),r||8)},ln={};(function(e){var r=qt.exports;Object.keys(r.code).forEach(function(t){var n=r.code[t];e[t]=function(i){var o=new Error(t+", "+n.description+(i?" '"+i+"'":""));return o.errno=n.errno,o.code=t,o.path=i,o}})})(ln);var Pt={exports:{}},Ze={exports:{}};typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?Ze.exports={nextTick:Uu}:Ze.exports=process;function Uu(e,r,t,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,o,f;switch(i){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,r)});case 3:return process.nextTick(function(){e.call(null,r,t)});case 4:return process.nextTick(function(){e.call(null,r,t,n)});default:for(o=new Array(i-1),f=0;f<o.length;)o[f++]=arguments[f];return process.nextTick(function(){e.apply(null,o)})}}var Fu={}.toString,qu=Array.isArray||function(e){return Fu.call(e)=="[object Array]"},_f=Be.exports.EventEmitter,Qe={exports:{}};(function(e,r){var t=Re,n=t.Buffer;function i(f,a){for(var g in f)a[g]=f[g]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=t:(i(t,r),r.Buffer=o);function o(f,a,g){return n(f,a,g)}i(n,o),o.from=function(f,a,g){if(typeof f=="number")throw new TypeError("Argument must not be a number");return n(f,a,g)},o.alloc=function(f,a,g){if(typeof f!="number")throw new TypeError("Argument must be a number");var h=n(f);return a!==void 0?typeof g=="string"?h.fill(a,g):h.fill(a):h.fill(0),h},o.allocUnsafe=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return n(f)},o.allocUnsafeSlow=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(f)}})(Qe,Qe.exports);var wt={exports:{}},zn;function Ku(){return zn||(zn=1,function(e){function r(o,f){if(!(o instanceof f))throw new TypeError("Cannot call a class as a function")}var t=Qe.exports.Buffer,n=Se;function i(o,f,a){o.copy(f,a)}e.exports=function(){function o(){r(this,o),this.head=null,this.tail=null,this.length=0}return o.prototype.push=function(a){var g={data:a,next:null};this.length>0?this.tail.next=g:this.head=g,this.tail=g,++this.length},o.prototype.unshift=function(a){var g={data:a,next:this.head};this.length===0&&(this.tail=g),this.head=g,++this.length},o.prototype.shift=function(){if(this.length!==0){var a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}},o.prototype.clear=function(){this.head=this.tail=null,this.length=0},o.prototype.join=function(a){if(this.length===0)return"";for(var g=this.head,h=""+g.data;g=g.next;)h+=a+g.data;return h},o.prototype.concat=function(a){if(this.length===0)return t.alloc(0);if(this.length===1)return this.head.data;for(var g=t.allocUnsafe(a>>>0),h=this.head,p=0;h;)i(h.data,g,p),p+=h.data.length,h=h.next;return g},o}(),n&&n.inspect&&n.inspect.custom&&(e.exports.prototype[n.inspect.custom]=function(){var o=n.inspect({length:this.length});return this.constructor.name+" "+o})}(wt)),wt.exports}var Xn=Ze.exports;function Vu(e,r){var t=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(r?r(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&Xn.nextTick(Gn,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(o){!r&&o?(Xn.nextTick(Gn,t,o),t._writableState&&(t._writableState.errorEmitted=!0)):r&&r(o)}),this)}function Hu(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Gn(e,r){e.emit("error",r)}var Ef={destroy:Vu,undestroy:Hu},mt,Jn;function Sf(){if(Jn)return mt;Jn=1;var e=Ze.exports;mt=v;function r(M){var B=this;this.next=null,this.entry=null,this.finish=function(){Y(B,M)}}var t=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:e.nextTick,n;v.WritableState=c;var i=Object.create(z);i.inherits=ee.exports;var o={deprecate:kf},f=_f,a=Qe.exports.Buffer,g=rr.Uint8Array||function(){};function h(M){return a.from(M)}function p(M){return a.isBuffer(M)||M instanceof g}var d=Ef;i.inherits(v,f);function w(){}function c(M,B){n=n||er(),M=M||{};var C=B instanceof n;this.objectMode=!!M.objectMode,C&&(this.objectMode=this.objectMode||!!M.writableObjectMode);var O=M.highWaterMark,L=M.writableHighWaterMark,k=this.objectMode?16:16*1024;O||O===0?this.highWaterMark=O:C&&(L||L===0)?this.highWaterMark=L:this.highWaterMark=k,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var q=M.decodeStrings===!1;this.decodeStrings=!q,this.defaultEncoding=M.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(X){x(B,X)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}c.prototype.getBuffer=function(){for(var B=this.bufferedRequest,C=[];B;)C.push(B),B=B.next;return C},function(){try{Object.defineProperty(c.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var u;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(M){return u.call(this,M)?!0:this!==v?!1:M&&M._writableState instanceof c}})):u=function(M){return M instanceof this};function v(M){if(n=n||er(),!u.call(v,this)&&!(this instanceof n))return new v(M);this._writableState=new c(M,this),this.writable=!0,M&&(typeof M.write=="function"&&(this._write=M.write),typeof M.writev=="function"&&(this._writev=M.writev),typeof M.destroy=="function"&&(this._destroy=M.destroy),typeof M.final=="function"&&(this._final=M.final)),f.call(this)}v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function S(M,B){var C=new Error("write after end");M.emit("error",C),e.nextTick(B,C)}function b(M,B,C,O){var L=!0,k=!1;return C===null?k=new TypeError("May not write null values to stream"):typeof C!="string"&&C!==void 0&&!B.objectMode&&(k=new TypeError("Invalid non-string/buffer chunk")),k&&(M.emit("error",k),e.nextTick(O,k),L=!1),L}v.prototype.write=function(M,B,C){var O=this._writableState,L=!1,k=!O.objectMode&&p(M);return k&&!a.isBuffer(M)&&(M=h(M)),typeof B=="function"&&(C=B,B=null),k?B="buffer":B||(B=O.defaultEncoding),typeof C!="function"&&(C=w),O.ended?S(this,C):(k||b(this,O,M,C))&&(O.pendingcb++,L=D(this,O,k,M,B,C)),L},v.prototype.cork=function(){var M=this._writableState;M.corked++},v.prototype.uncork=function(){var M=this._writableState;M.corked&&(M.corked--,!M.writing&&!M.corked&&!M.finished&&!M.bufferProcessing&&M.bufferedRequest&&K(this,M))},v.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=B.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((B+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+B);return this._writableState.defaultEncoding=B,this};function E(M,B,C){return!M.objectMode&&M.decodeStrings!==!1&&typeof B=="string"&&(B=a.from(B,C)),B}Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function D(M,B,C,O,L,k){if(!C){var q=E(B,O,L);O!==q&&(C=!0,L="buffer",O=q)}var X=B.objectMode?1:O.length;B.length+=X;var V=B.length<B.highWaterMark;if(V||(B.needDrain=!0),B.writing||B.corked){var U=B.lastBufferedRequest;B.lastBufferedRequest={chunk:O,encoding:L,isBuf:C,callback:k,next:null},U?U.next=B.lastBufferedRequest:B.bufferedRequest=B.lastBufferedRequest,B.bufferedRequestCount+=1}else y(M,B,!1,X,O,L,k);return V}function y(M,B,C,O,L,k,q){B.writelen=O,B.writecb=q,B.writing=!0,B.sync=!0,C?M._writev(L,B.onwrite):M._write(L,k,B.onwrite),B.sync=!1}function s(M,B,C,O,L){--B.pendingcb,C?(e.nextTick(L,O),e.nextTick(j,M,B),M._writableState.errorEmitted=!0,M.emit("error",O)):(L(O),M._writableState.errorEmitted=!0,M.emit("error",O),j(M,B))}function l(M){M.writing=!1,M.writecb=null,M.length-=M.writelen,M.writelen=0}function x(M,B){var C=M._writableState,O=C.sync,L=C.writecb;if(l(C),B)s(M,C,O,B,L);else{var k=G(C);!k&&!C.corked&&!C.bufferProcessing&&C.bufferedRequest&&K(M,C),O?t(A,M,C,k,L):A(M,C,k,L)}}function A(M,B,C,O){C||I(M,B),B.pendingcb--,O(),j(M,B)}function I(M,B){B.length===0&&B.needDrain&&(B.needDrain=!1,M.emit("drain"))}function K(M,B){B.bufferProcessing=!0;var C=B.bufferedRequest;if(M._writev&&C&&C.next){var O=B.bufferedRequestCount,L=new Array(O),k=B.corkedRequestsFree;k.entry=C;for(var q=0,X=!0;C;)L[q]=C,C.isBuf||(X=!1),C=C.next,q+=1;L.allBuffers=X,y(M,B,!0,B.length,L,"",k.finish),B.pendingcb++,B.lastBufferedRequest=null,k.next?(B.corkedRequestsFree=k.next,k.next=null):B.corkedRequestsFree=new r(B),B.bufferedRequestCount=0}else{for(;C;){var V=C.chunk,U=C.encoding,m=C.callback,_=B.objectMode?1:V.length;if(y(M,B,!1,_,V,U,m),C=C.next,B.bufferedRequestCount--,B.writing)break}C===null&&(B.lastBufferedRequest=null)}B.bufferedRequest=C,B.bufferProcessing=!1}v.prototype._write=function(M,B,C){C(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(M,B,C){var O=this._writableState;typeof M=="function"?(C=M,M=null,B=null):typeof B=="function"&&(C=B,B=null),M!=null&&this.write(M,B),O.corked&&(O.corked=1,this.uncork()),!O.ending&&!O.finished&&W(this,O,C)};function G(M){return M.ending&&M.length===0&&M.bufferedRequest===null&&!M.finished&&!M.writing}function R(M,B){M._final(function(C){B.pendingcb--,C&&M.emit("error",C),B.prefinished=!0,M.emit("prefinish"),j(M,B)})}function T(M,B){!B.prefinished&&!B.finalCalled&&(typeof M._final=="function"?(B.pendingcb++,B.finalCalled=!0,e.nextTick(R,M,B)):(B.prefinished=!0,M.emit("prefinish")))}function j(M,B){var C=G(B);return C&&(T(M,B),B.pendingcb===0&&(B.finished=!0,M.emit("finish"))),C}function W(M,B,C){B.ending=!0,j(M,B),C&&(B.finished?e.nextTick(C):M.once("finish",C)),B.ended=!0,M.writable=!1}function Y(M,B,C){var O=M.entry;for(M.entry=null;O;){var L=O.callback;B.pendingcb--,L(C),O=O.next}B.corkedRequestsFree?B.corkedRequestsFree.next=M:B.corkedRequestsFree=M}return Object.defineProperty(v.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(M){!this._writableState||(this._writableState.destroyed=M)}}),v.prototype.destroy=d.destroy,v.prototype._undestroy=d.undestroy,v.prototype._destroy=function(M,B){this.end(),B(M)},mt}var _t,Zn;function er(){if(Zn)return _t;Zn=1;var e=Ze.exports,r=Object.keys||function(d){var w=[];for(var c in d)w.push(c);return w};_t=g;var t=Object.create(z);t.inherits=ee.exports;var n=xf(),i=Sf();t.inherits(g,n);for(var o=r(i.prototype),f=0;f<o.length;f++){var a=o[f];g.prototype[a]||(g.prototype[a]=i.prototype[a])}function g(d){if(!(this instanceof g))return new g(d);n.call(this,d),i.call(this,d),d&&d.readable===!1&&(this.readable=!1),d&&d.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,d&&d.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",h)}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function h(){this.allowHalfOpen||this._writableState.ended||e.nextTick(p,this)}function p(d){d.end()}return Object.defineProperty(g.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(d){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=d,this._writableState.destroyed=d)}}),g.prototype._destroy=function(d,w){this.push(null),this.end(),e.nextTick(w,d)},_t}var Et={},Qn;function ei(){if(Qn)return Et;Qn=1;var e=Qe.exports.Buffer,r=e.isEncoding||function(b){switch(b=""+b,b&&b.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(b){if(!b)return"utf8";for(var E;;)switch(b){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return b;default:if(E)return;b=(""+b).toLowerCase(),E=!0}}function n(b){var E=t(b);if(typeof E!="string"&&(e.isEncoding===r||!r(b)))throw new Error("Unknown encoding: "+b);return E||b}Et.StringDecoder=i;function i(b){this.encoding=n(b);var E;switch(this.encoding){case"utf16le":this.text=d,this.end=w,E=4;break;case"utf8":this.fillLast=g,E=4;break;case"base64":this.text=c,this.end=u,E=3;break;default:this.write=v,this.end=S;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(E)}i.prototype.write=function(b){if(b.length===0)return"";var E,D;if(this.lastNeed){if(E=this.fillLast(b),E===void 0)return"";D=this.lastNeed,this.lastNeed=0}else D=0;return D<b.length?E?E+this.text(b,D):this.text(b,D):E||""},i.prototype.end=p,i.prototype.text=h,i.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length),this.lastNeed-=b.length};function o(b){return b<=127?0:b>>5===6?2:b>>4===14?3:b>>3===30?4:b>>6===2?-1:-2}function f(b,E,D){var y=E.length-1;if(y<D)return 0;var s=o(E[y]);return s>=0?(s>0&&(b.lastNeed=s-1),s):--y<D||s===-2?0:(s=o(E[y]),s>=0?(s>0&&(b.lastNeed=s-2),s):--y<D||s===-2?0:(s=o(E[y]),s>=0?(s>0&&(s===2?s=0:b.lastNeed=s-3),s):0))}function a(b,E,D){if((E[0]&192)!==128)return b.lastNeed=0,"\uFFFD";if(b.lastNeed>1&&E.length>1){if((E[1]&192)!==128)return b.lastNeed=1,"\uFFFD";if(b.lastNeed>2&&E.length>2&&(E[2]&192)!==128)return b.lastNeed=2,"\uFFFD"}}function g(b){var E=this.lastTotal-this.lastNeed,D=a(this,b);if(D!==void 0)return D;if(this.lastNeed<=b.length)return b.copy(this.lastChar,E,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,E,0,b.length),this.lastNeed-=b.length}function h(b,E){var D=f(this,b,E);if(!this.lastNeed)return b.toString("utf8",E);this.lastTotal=D;var y=b.length-(D-this.lastNeed);return b.copy(this.lastChar,0,y),b.toString("utf8",E,y)}function p(b){var E=b&&b.length?this.write(b):"";return this.lastNeed?E+"\uFFFD":E}function d(b,E){if((b.length-E)%2===0){var D=b.toString("utf16le",E);if(D){var y=D.charCodeAt(D.length-1);if(y>=55296&&y<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1],D.slice(0,-1)}return D}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=b[b.length-1],b.toString("utf16le",E,b.length-1)}function w(b){var E=b&&b.length?this.write(b):"";if(this.lastNeed){var D=this.lastTotal-this.lastNeed;return E+this.lastChar.toString("utf16le",0,D)}return E}function c(b,E){var D=(b.length-E)%3;return D===0?b.toString("base64",E):(this.lastNeed=3-D,this.lastTotal=3,D===1?this.lastChar[0]=b[b.length-1]:(this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1]),b.toString("base64",E,b.length-D))}function u(b){var E=b&&b.length?this.write(b):"";return this.lastNeed?E+this.lastChar.toString("base64",0,3-this.lastNeed):E}function v(b){return b.toString(this.encoding)}function S(b){return b&&b.length?this.write(b):""}return Et}var St,ri;function xf(){if(ri)return St;ri=1;var e=Ze.exports;St=E;var r=qu,t;E.ReadableState=b,Be.exports.EventEmitter;var n=function(m,_){return m.listeners(_).length},i=_f,o=Qe.exports.Buffer,f=rr.Uint8Array||function(){};function a(m){return o.from(m)}function g(m){return o.isBuffer(m)||m instanceof f}var h=Object.create(z);h.inherits=ee.exports;var p=Se,d=void 0;p&&p.debuglog?d=p.debuglog("stream"):d=function(){};var w=Ku(),c=Ef,u;h.inherits(E,i);var v=["error","close","destroy","pause","resume"];function S(m,_,N){if(typeof m.prependListener=="function")return m.prependListener(_,N);!m._events||!m._events[_]?m.on(_,N):r(m._events[_])?m._events[_].unshift(N):m._events[_]=[N,m._events[_]]}function b(m,_){t=t||er(),m=m||{};var N=_ instanceof t;this.objectMode=!!m.objectMode,N&&(this.objectMode=this.objectMode||!!m.readableObjectMode);var $=m.highWaterMark,H=m.readableHighWaterMark,P=this.objectMode?16:16*1024;$||$===0?this.highWaterMark=$:N&&(H||H===0)?this.highWaterMark=H:this.highWaterMark=P,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new w,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=m.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,m.encoding&&(u||(u=ei().StringDecoder),this.decoder=new u(m.encoding),this.encoding=m.encoding)}function E(m){if(t=t||er(),!(this instanceof E))return new E(m);this._readableState=new b(m,this),this.readable=!0,m&&(typeof m.read=="function"&&(this._read=m.read),typeof m.destroy=="function"&&(this._destroy=m.destroy)),i.call(this)}Object.defineProperty(E.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(m){!this._readableState||(this._readableState.destroyed=m)}}),E.prototype.destroy=c.destroy,E.prototype._undestroy=c.undestroy,E.prototype._destroy=function(m,_){this.push(null),_(m)},E.prototype.push=function(m,_){var N=this._readableState,$;return N.objectMode?$=!0:typeof m=="string"&&(_=_||N.defaultEncoding,_!==N.encoding&&(m=o.from(m,_),_=""),$=!0),D(this,m,_,!1,$)},E.prototype.unshift=function(m){return D(this,m,null,!0,!1)};function D(m,_,N,$,H){var P=m._readableState;if(_===null)P.reading=!1,K(m,P);else{var F;H||(F=s(P,_)),F?m.emit("error",F):P.objectMode||_&&_.length>0?(typeof _!="string"&&!P.objectMode&&Object.getPrototypeOf(_)!==o.prototype&&(_=a(_)),$?P.endEmitted?m.emit("error",new Error("stream.unshift() after end event")):y(m,P,_,!0):P.ended?m.emit("error",new Error("stream.push() after EOF")):(P.reading=!1,P.decoder&&!N?(_=P.decoder.write(_),P.objectMode||_.length!==0?y(m,P,_,!1):T(m,P)):y(m,P,_,!1))):$||(P.reading=!1)}return l(P)}function y(m,_,N,$){_.flowing&&_.length===0&&!_.sync?(m.emit("data",N),m.read(0)):(_.length+=_.objectMode?1:N.length,$?_.buffer.unshift(N):_.buffer.push(N),_.needReadable&&G(m)),T(m,_)}function s(m,_){var N;return!g(_)&&typeof _!="string"&&_!==void 0&&!m.objectMode&&(N=new TypeError("Invalid non-string/buffer chunk")),N}function l(m){return!m.ended&&(m.needReadable||m.length<m.highWaterMark||m.length===0)}E.prototype.isPaused=function(){return this._readableState.flowing===!1},E.prototype.setEncoding=function(m){return u||(u=ei().StringDecoder),this._readableState.decoder=new u(m),this._readableState.encoding=m,this};var x=8388608;function A(m){return m>=x?m=x:(m--,m|=m>>>1,m|=m>>>2,m|=m>>>4,m|=m>>>8,m|=m>>>16,m++),m}function I(m,_){return m<=0||_.length===0&&_.ended?0:_.objectMode?1:m!==m?_.flowing&&_.length?_.buffer.head.data.length:_.length:(m>_.highWaterMark&&(_.highWaterMark=A(m)),m<=_.length?m:_.ended?_.length:(_.needReadable=!0,0))}E.prototype.read=function(m){d("read",m),m=parseInt(m,10);var _=this._readableState,N=m;if(m!==0&&(_.emittedReadable=!1),m===0&&_.needReadable&&(_.length>=_.highWaterMark||_.ended))return d("read: emitReadable",_.length,_.ended),_.length===0&&_.ended?X(this):G(this),null;if(m=I(m,_),m===0&&_.ended)return _.length===0&&X(this),null;var $=_.needReadable;d("need readable",$),(_.length===0||_.length-m<_.highWaterMark)&&($=!0,d("length less than watermark",$)),_.ended||_.reading?($=!1,d("reading or ended",$)):$&&(d("do read"),_.reading=!0,_.sync=!0,_.length===0&&(_.needReadable=!0),this._read(_.highWaterMark),_.sync=!1,_.reading||(m=I(N,_)));var H;return m>0?H=O(m,_):H=null,H===null?(_.needReadable=!0,m=0):_.length-=m,_.length===0&&(_.ended||(_.needReadable=!0),N!==m&&_.ended&&X(this)),H!==null&&this.emit("data",H),H};function K(m,_){if(!_.ended){if(_.decoder){var N=_.decoder.end();N&&N.length&&(_.buffer.push(N),_.length+=_.objectMode?1:N.length)}_.ended=!0,G(m)}}function G(m){var _=m._readableState;_.needReadable=!1,_.emittedReadable||(d("emitReadable",_.flowing),_.emittedReadable=!0,_.sync?e.nextTick(R,m):R(m))}function R(m){d("emit readable"),m.emit("readable"),C(m)}function T(m,_){_.readingMore||(_.readingMore=!0,e.nextTick(j,m,_))}function j(m,_){for(var N=_.length;!_.reading&&!_.flowing&&!_.ended&&_.length<_.highWaterMark&&(d("maybeReadMore read 0"),m.read(0),N!==_.length);)N=_.length;_.readingMore=!1}E.prototype._read=function(m){this.emit("error",new Error("_read() is not implemented"))},E.prototype.pipe=function(m,_){var N=this,$=this._readableState;switch($.pipesCount){case 0:$.pipes=m;break;case 1:$.pipes=[$.pipes,m];break;default:$.pipes.push(m);break}$.pipesCount+=1,d("pipe count=%d opts=%j",$.pipesCount,_);var H=(!_||_.end!==!1)&&m!==process.stdout&&m!==process.stderr,P=H?be:we;$.endEmitted?e.nextTick(P):N.once("end",P),m.on("unpipe",F);function F(me,Me){d("onunpipe"),me===N&&Me&&Me.hasUnpiped===!1&&(Me.hasUnpiped=!0,ue())}function be(){d("onend"),m.end()}var ae=W(N);m.on("drain",ae);var Z=!1;function ue(){d("cleanup"),m.removeListener("close",fe),m.removeListener("finish",Q),m.removeListener("drain",ae),m.removeListener("error",ie),m.removeListener("unpipe",F),N.removeListener("end",be),N.removeListener("end",we),N.removeListener("data",te),Z=!0,$.awaitDrain&&(!m._writableState||m._writableState.needDrain)&&ae()}var re=!1;N.on("data",te);function te(me){d("ondata"),re=!1;var Me=m.write(me);Me===!1&&!re&&(($.pipesCount===1&&$.pipes===m||$.pipesCount>1&&U($.pipes,m)!==-1)&&!Z&&(d("false write response, pause",N._readableState.awaitDrain),N._readableState.awaitDrain++,re=!0),N.pause())}function ie(me){d("onerror",me),we(),m.removeListener("error",ie),n(m,"error")===0&&m.emit("error",me)}S(m,"error",ie);function fe(){m.removeListener("finish",Q),we()}m.once("close",fe);function Q(){d("onfinish"),m.removeListener("close",fe),we()}m.once("finish",Q);function we(){d("unpipe"),N.unpipe(m)}return m.emit("pipe",N),$.flowing||(d("pipe resume"),N.resume()),m};function W(m){return function(){var _=m._readableState;d("pipeOnDrain",_.awaitDrain),_.awaitDrain&&_.awaitDrain--,_.awaitDrain===0&&n(m,"data")&&(_.flowing=!0,C(m))}}E.prototype.unpipe=function(m){var _=this._readableState,N={hasUnpiped:!1};if(_.pipesCount===0)return this;if(_.pipesCount===1)return m&&m!==_.pipes?this:(m||(m=_.pipes),_.pipes=null,_.pipesCount=0,_.flowing=!1,m&&m.emit("unpipe",this,N),this);if(!m){var $=_.pipes,H=_.pipesCount;_.pipes=null,_.pipesCount=0,_.flowing=!1;for(var P=0;P<H;P++)$[P].emit("unpipe",this,N);return this}var F=U(_.pipes,m);return F===-1?this:(_.pipes.splice(F,1),_.pipesCount-=1,_.pipesCount===1&&(_.pipes=_.pipes[0]),m.emit("unpipe",this,N),this)},E.prototype.on=function(m,_){var N=i.prototype.on.call(this,m,_);if(m==="data")this._readableState.flowing!==!1&&this.resume();else if(m==="readable"){var $=this._readableState;!$.endEmitted&&!$.readableListening&&($.readableListening=$.needReadable=!0,$.emittedReadable=!1,$.reading?$.length&&G(this):e.nextTick(Y,this))}return N},E.prototype.addListener=E.prototype.on;function Y(m){d("readable nexttick read 0"),m.read(0)}E.prototype.resume=function(){var m=this._readableState;return m.flowing||(d("resume"),m.flowing=!0,M(this,m)),this};function M(m,_){_.resumeScheduled||(_.resumeScheduled=!0,e.nextTick(B,m,_))}function B(m,_){_.reading||(d("resume read 0"),m.read(0)),_.resumeScheduled=!1,_.awaitDrain=0,m.emit("resume"),C(m),_.flowing&&!_.reading&&m.read(0)}E.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function C(m){var _=m._readableState;for(d("flow",_.flowing);_.flowing&&m.read()!==null;);}E.prototype.wrap=function(m){var _=this,N=this._readableState,$=!1;m.on("end",function(){if(d("wrapped end"),N.decoder&&!N.ended){var F=N.decoder.end();F&&F.length&&_.push(F)}_.push(null)}),m.on("data",function(F){if(d("wrapped data"),N.decoder&&(F=N.decoder.write(F)),!(N.objectMode&&F==null)&&!(!N.objectMode&&(!F||!F.length))){var be=_.push(F);be||($=!0,m.pause())}});for(var H in m)this[H]===void 0&&typeof m[H]=="function"&&(this[H]=function(F){return function(){return m[F].apply(m,arguments)}}(H));for(var P=0;P<v.length;P++)m.on(v[P],this.emit.bind(this,v[P]));return this._read=function(F){d("wrapped _read",F),$&&($=!1,m.resume())},this},Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),E._fromList=O;function O(m,_){if(_.length===0)return null;var N;return _.objectMode?N=_.buffer.shift():!m||m>=_.length?(_.decoder?N=_.buffer.join(""):_.buffer.length===1?N=_.buffer.head.data:N=_.buffer.concat(_.length),_.buffer.clear()):N=L(m,_.buffer,_.decoder),N}function L(m,_,N){var $;return m<_.head.data.length?($=_.head.data.slice(0,m),_.head.data=_.head.data.slice(m)):m===_.head.data.length?$=_.shift():$=N?k(m,_):q(m,_),$}function k(m,_){var N=_.head,$=1,H=N.data;for(m-=H.length;N=N.next;){var P=N.data,F=m>P.length?P.length:m;if(F===P.length?H+=P:H+=P.slice(0,m),m-=F,m===0){F===P.length?(++$,N.next?_.head=N.next:_.head=_.tail=null):(_.head=N,N.data=P.slice(F));break}++$}return _.length-=$,H}function q(m,_){var N=o.allocUnsafe(m),$=_.head,H=1;for($.data.copy(N),m-=$.data.length;$=$.next;){var P=$.data,F=m>P.length?P.length:m;if(P.copy(N,N.length-m,0,F),m-=F,m===0){F===P.length?(++H,$.next?_.head=$.next:_.head=_.tail=null):(_.head=$,$.data=P.slice(F));break}++H}return _.length-=H,N}function X(m){var _=m._readableState;if(_.length>0)throw new Error('"endReadable()" called on non-empty stream');_.endEmitted||(_.ended=!0,e.nextTick(V,_,m))}function V(m,_){!m.endEmitted&&m.length===0&&(m.endEmitted=!0,_.readable=!1,_.emit("end"))}function U(m,_){for(var N=0,$=m.length;N<$;N++)if(m[N]===_)return N;return-1}return St}var Rf=Ae,Gr=er(),Tf=Object.create(z);Tf.inherits=ee.exports;Tf.inherits(Ae,Gr);function Yu(e,r){var t=this._transformState;t.transforming=!1;var n=t.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));t.writechunk=null,t.writecb=null,r!=null&&this.push(r),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Ae(e){if(!(this instanceof Ae))return new Ae(e);Gr.call(this,e),this._transformState={afterTransform:Yu.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",zu)}function zu(){var e=this;typeof this._flush=="function"?this._flush(function(r,t){ti(e,r,t)}):ti(this,null,null)}Ae.prototype.push=function(e,r){return this._transformState.needTransform=!1,Gr.prototype.push.call(this,e,r)};Ae.prototype._transform=function(e,r,t){throw new Error("_transform() is not implemented")};Ae.prototype._write=function(e,r,t){var n=this._transformState;if(n.writecb=t,n.writechunk=e,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Ae.prototype._read=function(e){var r=this._transformState;r.writechunk!==null&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0};Ae.prototype._destroy=function(e,r){var t=this;Gr.prototype._destroy.call(this,e,function(n){r(n),t.emit("close")})};function ti(e,r,t){if(r)return e.emit("error",r);if(t!=null&&e.push(t),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}var Xu=gr,Of=Rf,Bf=Object.create(z);Bf.inherits=ee.exports;Bf.inherits(gr,Of);function gr(e){if(!(this instanceof gr))return new gr(e);Of.call(this,e)}gr.prototype._transform=function(e,r,t){t(null,e)};(function(e,r){r=e.exports=xf(),r.Stream=r,r.Readable=r,r.Writable=Sf(),r.Duplex=er(),r.Transform=Rf,r.PassThrough=Xu})(Pt,Pt.exports);var Gu=Object.prototype.toString,cn=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function Ju(e){return Gu.call(e).slice(8,-1)==="ArrayBuffer"}function Zu(e,r,t){r>>>=0;var n=e.byteLength-r;if(n<0)throw new RangeError("'offset' is out of bounds");if(t===void 0)t=n;else if(t>>>=0,t>n)throw new RangeError("'length' is out of bounds");return cn?Buffer.from(e.slice(r,r+t)):new Buffer(new Uint8Array(e.slice(r,r+t)))}function Qu(e,r){if((typeof r!="string"||r==="")&&(r="utf8"),!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');return cn?Buffer.from(e,r):new Buffer(e,r)}function es(e,r,t){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return Ju(e)?Zu(e,r,t):typeof e=="string"?Qu(e,r):cn?Buffer.from(e):new Buffer(e)}var rs=es,xt={},ni;function ts(){return ni||(ni=1,function(e){var r=void 0,t=1e5,n=function(){var O=Object.prototype.toString,L=Object.prototype.hasOwnProperty;return{Class:function(k){return O.call(k).replace(/^\[object *|\]$/g,"")},HasProperty:function(k,q){return q in k},HasOwnProperty:function(k,q){return L.call(k,q)},IsCallable:function(k){return typeof k=="function"},ToInt32:function(k){return k>>0},ToUint32:function(k){return k>>>0}}}(),i=Math.LN2,o=Math.abs,f=Math.floor,a=Math.log,g=Math.min,h=Math.pow,p=Math.round;function d(O){if(c&&w){var L=c(O),k;for(k=0;k<L.length;k+=1)w(O,L[k],{value:O[L[k]],writable:!1,enumerable:!1,configurable:!1})}}var w;Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}}()?w=Object.defineProperty:w=function(O,L,k){if(!O===Object(O))throw new TypeError("Object.defineProperty called on non-object");return n.HasProperty(k,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(O,L,k.get),n.HasProperty(k,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(O,L,k.set),n.HasProperty(k,"value")&&(O[L]=k.value),O};var c=Object.getOwnPropertyNames||function(O){if(O!==Object(O))throw new TypeError("Object.getOwnPropertyNames called on non-object");var L=[],k;for(k in O)n.HasOwnProperty(O,k)&&L.push(k);return L};function u(O){if(!w)return;if(O.length>t)throw new RangeError("Array too large for polyfill");function L(q){w(O,q,{get:function(){return O._getter(q)},set:function(X){O._setter(q,X)},enumerable:!0,configurable:!1})}var k;for(k=0;k<O.length;k+=1)L(k)}function v(O,L){var k=32-L;return O<<k>>k}function S(O,L){var k=32-L;return O<<k>>>k}function b(O){return[O&255]}function E(O){return v(O[0],8)}function D(O){return[O&255]}function y(O){return S(O[0],8)}function s(O){return O=p(Number(O)),[O<0?0:O>255?255:O&255]}function l(O){return[O>>8&255,O&255]}function x(O){return v(O[0]<<8|O[1],16)}function A(O){return[O>>8&255,O&255]}function I(O){return S(O[0]<<8|O[1],16)}function K(O){return[O>>24&255,O>>16&255,O>>8&255,O&255]}function G(O){return v(O[0]<<24|O[1]<<16|O[2]<<8|O[3],32)}function R(O){return[O>>24&255,O>>16&255,O>>8&255,O&255]}function T(O){return S(O[0]<<24|O[1]<<16|O[2]<<8|O[3],32)}function j(O,L,k){var q=(1<<L-1)-1,X,V,U,m,_,N,$;function H(P){var F=f(P),be=P-F;return be<.5?F:be>.5||F%2?F+1:F}for(O!==O?(V=(1<<L)-1,U=h(2,k-1),X=0):O===1/0||O===-1/0?(V=(1<<L)-1,U=0,X=O<0?1:0):O===0?(V=0,U=0,X=1/O===-1/0?1:0):(X=O<0,O=o(O),O>=h(2,1-q)?(V=g(f(a(O)/i),1023),U=H(O/h(2,V)*h(2,k)),U/h(2,k)>=2&&(V=V+1,U=1),V>q?(V=(1<<L)-1,U=0):(V=V+q,U=U-h(2,k))):(V=0,U=H(O/h(2,1-q-k)))),_=[],m=k;m;m-=1)_.push(U%2?1:0),U=f(U/2);for(m=L;m;m-=1)_.push(V%2?1:0),V=f(V/2);for(_.push(X?1:0),_.reverse(),N=_.join(""),$=[];N.length;)$.push(parseInt(N.substring(0,8),2)),N=N.substring(8);return $}function W(O,L,k){var q=[],X,V,U,m,_,N,$,H;for(X=O.length;X;X-=1)for(U=O[X-1],V=8;V;V-=1)q.push(U%2?1:0),U=U>>1;return q.reverse(),m=q.join(""),_=(1<<L-1)-1,N=parseInt(m.substring(0,1),2)?-1:1,$=parseInt(m.substring(1,1+L),2),H=parseInt(m.substring(1+L),2),$===(1<<L)-1?H!==0?NaN:N*(1/0):$>0?N*h(2,$-_)*(1+H/h(2,k)):H!==0?N*h(2,-(_-1))*(H/h(2,k)):N<0?-0:0}function Y(O){return W(O,11,52)}function M(O){return j(O,11,52)}function B(O){return W(O,8,23)}function C(O){return j(O,8,23)}(function(){var O=function(F){if(F=n.ToInt32(F),F<0)throw new RangeError("ArrayBuffer size is not a small enough positive integer");this.byteLength=F,this._bytes=[],this._bytes.length=F;var be;for(be=0;be<this.byteLength;be+=1)this._bytes[be]=0;d(this)};e.ArrayBuffer=e.ArrayBuffer||O;var L=function(){};function k(P,F,be){var ae;return ae=function(Z,ue,re){var te,ie,fe,Q;if(!arguments.length||typeof arguments[0]=="number"){if(this.length=n.ToInt32(arguments[0]),re<0)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new O(this.byteLength),this.byteOffset=0}else if(typeof arguments[0]=="object"&&arguments[0].constructor===ae)for(te=arguments[0],this.length=te.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new O(this.byteLength),this.byteOffset=0,fe=0;fe<this.length;fe+=1)this._setter(fe,te._getter(fe));else if(typeof arguments[0]=="object"&&!(arguments[0]instanceof O||n.Class(arguments[0])==="ArrayBuffer"))for(ie=arguments[0],this.length=n.ToUint32(ie.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new O(this.byteLength),this.byteOffset=0,fe=0;fe<this.length;fe+=1)Q=ie[fe],this._setter(fe,Number(Q));else if(typeof arguments[0]=="object"&&(arguments[0]instanceof O||n.Class(arguments[0])==="ArrayBuffer")){if(this.buffer=Z,this.byteOffset=n.ToUint32(ue),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=n.ToUint32(re),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else throw new TypeError("Unexpected argument type(s)");this.constructor=ae,d(this),u(this)},ae.prototype=new L,ae.prototype.BYTES_PER_ELEMENT=P,ae.prototype._pack=F,ae.prototype._unpack=be,ae.BYTES_PER_ELEMENT=P,ae.prototype._getter=function(Z){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if(Z=n.ToUint32(Z),Z>=this.length)return r;var ue=[],re,te;for(re=0,te=this.byteOffset+Z*this.BYTES_PER_ELEMENT;re<this.BYTES_PER_ELEMENT;re+=1,te+=1)ue.push(this.buffer._bytes[te]);return this._unpack(ue)},ae.prototype.get=ae.prototype._getter,ae.prototype._setter=function(Z,ue){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if(Z=n.ToUint32(Z),Z>=this.length)return r;var re=this._pack(ue),te,ie;for(te=0,ie=this.byteOffset+Z*this.BYTES_PER_ELEMENT;te<this.BYTES_PER_ELEMENT;te+=1,ie+=1)this.buffer._bytes[ie]=re[te]},ae.prototype.set=function(Z,ue){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var re,te,ie,fe,Q,we,me,Me,Sr,Jr;if(typeof arguments[0]=="object"&&arguments[0].constructor===this.constructor){if(re=arguments[0],ie=n.ToUint32(arguments[1]),ie+re.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(Me=this.byteOffset+ie*this.BYTES_PER_ELEMENT,Sr=re.length*this.BYTES_PER_ELEMENT,re.buffer===this.buffer){for(Jr=[],Q=0,we=re.byteOffset;Q<Sr;Q+=1,we+=1)Jr[Q]=re.buffer._bytes[we];for(Q=0,me=Me;Q<Sr;Q+=1,me+=1)this.buffer._bytes[me]=Jr[Q]}else for(Q=0,we=re.byteOffset,me=Me;Q<Sr;Q+=1,we+=1,me+=1)this.buffer._bytes[me]=re.buffer._bytes[we]}else if(typeof arguments[0]=="object"&&typeof arguments[0].length<"u"){if(te=arguments[0],fe=n.ToUint32(te.length),ie=n.ToUint32(arguments[1]),ie+fe>this.length)throw new RangeError("Offset plus length of array is out of range");for(Q=0;Q<fe;Q+=1)we=te[Q],this._setter(ie+Q,Number(we))}else throw new TypeError("Unexpected argument type(s)")},ae.prototype.subarray=function(Z,ue){function re(ie,fe,Q){return ie<fe?fe:ie>Q?Q:ie}Z=n.ToInt32(Z),ue=n.ToInt32(ue),arguments.length<1&&(Z=0),arguments.length<2&&(ue=this.length),Z<0&&(Z=this.length+Z),ue<0&&(ue=this.length+ue),Z=re(Z,0,this.length),ue=re(ue,0,this.length);var te=ue-Z;return te<0&&(te=0),new this.constructor(this.buffer,this.byteOffset+Z*this.BYTES_PER_ELEMENT,te)},ae}var q=k(1,b,E),X=k(1,D,y),V=k(1,s,y),U=k(2,l,x),m=k(2,A,I),_=k(4,K,G),N=k(4,R,T),$=k(4,C,B),H=k(8,M,Y);e.Int8Array=e.Int8Array||q,e.Uint8Array=e.Uint8Array||X,e.Uint8ClampedArray=e.Uint8ClampedArray||V,e.Int16Array=e.Int16Array||U,e.Uint16Array=e.Uint16Array||m,e.Int32Array=e.Int32Array||_,e.Uint32Array=e.Uint32Array||N,e.Float32Array=e.Float32Array||$,e.Float64Array=e.Float64Array||H})(),function(){function O(V,U){return n.IsCallable(V.get)?V.get(U):V[U]}var L=function(){var V=new e.Uint16Array([4660]),U=new e.Uint8Array(V.buffer);return O(U,0)===18}(),k=function(U,m,_){if(arguments.length===0)U=new e.ArrayBuffer(0);else if(!(U instanceof e.ArrayBuffer||n.Class(U)==="ArrayBuffer"))throw new TypeError("TypeError");if(this.buffer=U||new e.ArrayBuffer(0),this.byteOffset=n.ToUint32(m),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(arguments.length<3?this.byteLength=this.buffer.byteLength-this.byteOffset:this.byteLength=n.ToUint32(_),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");d(this)};function q(V){return function(U,m){if(U=n.ToUint32(U),U+V.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");U+=this.byteOffset;var _=new e.Uint8Array(this.buffer,U,V.BYTES_PER_ELEMENT),N=[],$;for($=0;$<V.BYTES_PER_ELEMENT;$+=1)N.push(O(_,$));return Boolean(m)===Boolean(L)&&N.reverse(),O(new V(new e.Uint8Array(N).buffer),0)}}k.prototype.getUint8=q(e.Uint8Array),k.prototype.getInt8=q(e.Int8Array),k.prototype.getUint16=q(e.Uint16Array),k.prototype.getInt16=q(e.Int16Array),k.prototype.getUint32=q(e.Uint32Array),k.prototype.getInt32=q(e.Int32Array),k.prototype.getFloat32=q(e.Float32Array),k.prototype.getFloat64=q(e.Float64Array);function X(V){return function(U,m,_){if(U=n.ToUint32(U),U+V.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var N=new V([m]),$=new e.Uint8Array(N.buffer),H=[],P,F;for(P=0;P<V.BYTES_PER_ELEMENT;P+=1)H.push(O($,P));Boolean(_)===Boolean(L)&&H.reverse(),F=new e.Uint8Array(this.buffer,U,V.BYTES_PER_ELEMENT),F.set(H)}}k.prototype.setUint8=X(e.Uint8Array),k.prototype.setInt8=X(e.Int8Array),k.prototype.setUint16=X(e.Uint16Array),k.prototype.setInt16=X(e.Int16Array),k.prototype.setUint32=X(e.Uint32Array),k.prototype.setInt32=X(e.Int32Array),k.prototype.setFloat32=X(e.Float32Array),k.prototype.setFloat64=X(e.Float64Array),e.DataView=e.DataView||k}()}(xt)),xt}var Mf=Pt.exports.Writable,ns=ee.exports,vr=rs;if(typeof Uint8Array>"u")var Af=ts().Uint8Array;else var Af=Uint8Array;function qe(e,r){if(!(this instanceof qe))return new qe(e,r);typeof e=="function"&&(r=e,e={}),e||(e={});var t=e.encoding,n=!1;t?(t=String(t).toLowerCase(),(t==="u8"||t==="uint8")&&(t="uint8array")):n=!0,Mf.call(this,{objectMode:!0}),this.encoding=t,this.shouldInferEncoding=n,r&&this.on("finish",function(){r(this.getBody())}),this.body=[]}var is=qe;ns(qe,Mf);qe.prototype._write=function(e,r,t){this.body.push(e),t()};qe.prototype.inferEncoding=function(e){var r=e===void 0?this.body[0]:e;return Buffer.isBuffer(r)?"buffer":typeof Uint8Array<"u"&&r instanceof Uint8Array?"uint8array":Array.isArray(r)?"array":typeof r=="string"?"string":Object.prototype.toString.call(r)==="[object Object]"?"object":"buffer"};qe.prototype.getBody=function(){return!this.encoding&&this.body.length===0?[]:(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),this.encoding==="array"?us(this.body):this.encoding==="string"?os(this.body):this.encoding==="buffer"?as(this.body):this.encoding==="uint8array"?ss(this.body):this.body)};function fs(e){return/Array\]$/.test(Object.prototype.toString.call(e))}function Df(e){return typeof e=="string"||fs(e)||e&&typeof e.subarray=="function"}function os(e){for(var r=[],t=0;t<e.length;t++){var n=e[t];typeof n=="string"||Buffer.isBuffer(n)?r.push(n):Df(n)?r.push(vr(n)):r.push(vr(String(n)))}return Buffer.isBuffer(e[0])?(r=Buffer.concat(r),r=r.toString("utf8")):r=r.join(""),r}function as(e){for(var r=[],t=0;t<e.length;t++){var n=e[t];Buffer.isBuffer(n)?r.push(n):Df(n)?r.push(vr(n)):r.push(vr(String(n)))}return Buffer.concat(r)}function us(e){for(var r=[],t=0;t<e.length;t++)r.push.apply(r,e[t]);return r}function ss(e){for(var r=0,t=0;t<e.length;t++)typeof e[t]=="string"&&(e[t]=vr(e[t])),r+=e[t].length;for(var n=new Af(r),t=0,i=0;t<e.length;t++)for(var o=e[t],f=0;f<o.length;f++)n[i++]=o[f];return n}var Rt=function(e){return e?typeof e=="string"?new Date(e):e:new Date},Pe=function(e){this.uid=e.uid||0,this.gid=e.gid||0,this.mode=e.mode||0,this.size=e.size||0,this.mtime=Rt(e.mtime),this.atime=Rt(e.atime),this.ctime=Rt(e.ctime),this.type=e.type,this.target=e.target,this.link=e.link,this.blob=e.blob};Pe.prototype.isDirectory=function(){return this.type==="directory"};Pe.prototype.isFile=function(){return this.type==="file"};Pe.prototype.isBlockDevice=function(){return!1};Pe.prototype.isCharacterDevice=function(){return!1};Pe.prototype.isSymbolicLink=function(){return this.type==="symlink"};Pe.prototype.isFIFO=function(){return!1};Pe.prototype.isSocket=function(){return!1};var ls=function(e){return new Pe(e)},cs=hs;function hs(e){return e!==null&&(typeof e=="object"||typeof e=="function")}var ds=cs,ps=gs;function gs(){for(var e={},r=0;r<arguments.length;r++){var t=arguments[r];if(!!ds(t))for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}return e}var Ut=jf,vs=Er.exports,ys=is,bs=mf,Mr=ls,ws=ps,ir=ln,ms=Mr({type:"directory",mode:bs(777),size:4096}),Ve=function(e){return e=e[0]==="/"?e:"/"+e,e=Ut.normalize(e),e==="/"?e:e[e.length-1]==="/"?e.slice(0,-1):e},Tr=function(e){var r=e.split("/").length.toString(36);return"0000000000".slice(r.length)+r+e},_s=function(e){var r={};r.normalize=Ve,r.get=function(n,i){if(n=Ve(n),n==="/")return process.nextTick(i.bind(null,null,ms,"/"));e.get(Tr(n),{valueEncoding:"json"},function(o,f){if(o&&o.notFound)return i(ir.ENOENT(n),null,n);if(o)return i(o,null,n);i(null,Mr(f),n)})},r.writable=function(n,i){if(n=Ve(n),n==="/")return process.nextTick(i.bind(null,ir.EPERM(n)));r.follow(Ut.dirname(n),function(o,f){if(o)return i(o);if(!f.isDirectory())return i(ir.ENOTDIR(n));i(null,n)})},r.list=function(n,i){n=Ve(n);var o=Tr(n==="/"?n:n+"/"),f=e.createKeyStream({start:o,end:o+"\xFF"});i=vs(i),f.on("error",i),f.pipe(ys({encoding:"object"},function(a){a=a.map(function(g){return g.split("/").pop()}),i(null,a)}))};var t=function(n,i){var o="/",f=n.split("/").slice(1),a=function(){r.get(Ut.join(o,f.shift()),function(g,h,p){if(g)return i(g,h,n);if(o=h.target||p,!f.length)return i(null,h,p);a()})};a()};return r.follow=function(n,i){t(Ve(n),function o(f,a,g){if(f)return i(f,null,g);if(a.target)return r.get(a.target,o);i(null,Mr(a),g)})},r.update=function(n,i,o){r.get(n,function(f,a,g){if(f)return o(f);if(g==="/")return o(ir.EPERM(g));r.put(g,ws(a,i),o)})},r.put=function(n,i,o){r.writable(n,function(f,a){if(f)return o(f);e.put(Tr(a),Mr(i),{valueEncoding:"json"},o)})},r.del=function(n,i){if(n=Ve(n),n==="/")return process.nextTick(i.bind(null,ir.EPERM(n)));e.del(Tr(n),i)},r},Tt=Be.exports,Es=function(){var e={},r=new Tt.EventEmitter;return r.watch=function(t,n){return e[t]||(e[t]=new Tt.EventEmitter,e[t].setMaxListeners(0)),n&&e[t].on("change",n),e[t]},r.watcher=function(t,n){var i=new Tt.EventEmitter,o=function(){i.emit("change","change",t)};return r.watch(t,o),n&&i.on("change",n),i.close=function(){r.unwatch(t,o)},i},r.unwatch=function(t,n){!e[t]||(n?e[t].removeListener("change",n):e[t].removeAllListeners("change"),e[t].listeners("change").length||delete e[t])},r.change=function(t){e[t]&&e[t].emit("change"),r.emit("change",t)},r.cb=function(t,n){return function(i,o){t&&r.change(t),n&&n(i,o)}},r},ii=Vi,Ss=ku,xs=Pu,Rs=$r.exports,Ts=Er.exports,fr=mf,J=ln,Os=_s,Bs=Es,xe=function(e,r,t){process.nextTick(function(){e(r,t)})},de=function(){},Ms=function(e,r){var t={};e=Ss(e);var n=xs(e.sublevel("blobs"),r),i=Os(e.sublevel("stats")),o=e.sublevel("links"),f=Bs(),a=[],g=Date.now(),h=function(){return++g};t.mkdir=function(c,u,v){if(typeof u=="function")return t.mkdir(c,null,u);u||(u=fr(777)),v||(v=de),i.follow(c,function(S,b,E){if(S&&S.code!=="ENOENT")return v(S);if(b)return v(J.EEXIST(E));i.put(E,{type:"directory",mode:u,size:4096},f.cb(E,v))})},t.rmdir=function(c,u){u||(u=de),i.follow(c,function(v,S,b){if(v)return u(v);t.readdir(b,function(E,D){if(E)return u(E);if(D.length)return u(J.ENOTEMPTY(b));i.del(b,f.cb(b,u))})})},t.readdir=function(c,u){i.follow(c,function(v,S,b){if(v)return u(v);if(!S)return u(J.ENOENT(b));if(!S.isDirectory())return u(J.ENOTDIR(b));i.list(b,u)})};var p=function(c,u,v){u(c,function(S,b,E){if(S)return v(S);if(!b.isFile())return v(null,b);var D=b&&b.blob||E;n.size(D,function(y,s){if(y)return v(y);b.size=s,v(null,b)})})};t.stat=function(c,u){p(c,i.follow,u)},t.lstat=function(c,u){p(c,i.get,u)},t.exists=function(c,u){i.follow(c,function(v){u(!v)})};var d=function(c,u,v,S){S||(S=de),u(c,function(b,E,D){if(b)return S(b);i.update(D,{mode:v},f.cb(D,S))})};t.chmod=function(c,u,v){d(c,i.follow,u,v)},t.lchmod=function(c,u,v){d(c,i.get,u,v)};var w=function(c,u,v,S,b){b||(b=de),u(c,function(E,D,y){if(E)return b(E);i.update(y,{uid:v,gid:S},f.cb(y,b))})};return t.chown=function(c,u,v,S){w(c,i.follow,u,v,S)},t.lchown=function(c,u,v,S){w(c,i.get,u,v,S)},t.utimes=function(c,u,v,S){S||(S=de),i.follow(c,function(b,E,D){if(b)return S(b);var y={};u&&(y.atime=u),v&&(y.mtime=v),i.update(D,y,f.cb(D,S))})},t.rename=function(c,u,v){v||(v=de),i.follow(c,function(S,b,E){if(S)return v(S);var D=function(){v=f.cb(u,f.cb(E,v)),i.put(u,b,function(y){if(y)return v(y);i.del(E,v)})};i.follow(u,function(y,s,l){if(y&&y.code!=="ENOENT")return v(y);if(!s)return D();if(b.isDirectory()!==s.isDirectory())return v(J.EISDIR(E));if(s.isDirectory()){t.readdir(l,function(x,A){if(x)return v(x);if(A.length)return v(J.ENOTEMPTY(E));D()});return}D()})})},t.realpath=function(c,u,v){if(typeof u=="function")return t.realpath(c,null,u);i.follow(c,function(S,b,E){if(S)return v(S);v(null,E)})},t.writeFile=function(c,u,v,S){if(typeof v=="function")return t.writeFile(c,u,null,v);typeof v=="string"&&(v={encoding:v}),v||(v={}),S||(S=de),Buffer.isBuffer(u)||(u=new Buffer(u,v.encoding||"utf-8"));var b=v.flags||"w";v.append=b[0]!=="w",i.follow(c,function(E,D,y){if(E&&E.code!=="ENOENT")return S(E);if(D&&D.isDirectory())return S(J.EISDIR(y));if(D&&b[1]==="x")return S(J.EEXIST(y));var s=D&&D.blob||y;i.writable(y,function(l){if(l)return S(l);n.write(s,u,v,function(x){if(x)return S(x);i.put(y,{ctime:D&&D.ctime,mtime:new Date,mode:v.mode||fr(666),type:"file"},f.cb(y,S))})})})},t.appendFile=function(c,u,v,S){if(typeof v=="function")return t.appendFile(c,u,null,v);typeof v=="string"&&(v={encoding:v}),v||(v={}),v.flags="a",t.writeFile(c,u,v,S)},t.unlink=function(c,u){u||(u=de),i.get(c,function(v,S,b){if(v)return u(v);if(S.isDirectory())return u(J.EISDIR(b));var E=function(y){Rs(o,{start:y+"\xFF",end:y+"\xFF\xFF"},function(s){if(s)return n.remove(y,u);u()})},D=function(){var y=S.link.slice(0,S.link.indexOf("\xFF"));o.del(S.link,function(s){if(s)return u(s);E(y)})};i.del(b,f.cb(b,function(y){if(y)return u(y);if(S.link)return D();o.del(b+"\xFF",function(s){if(s)return u(s);E(b)})}))})},t.readFile=function(c,u,v){if(typeof u=="function")return t.readFile(c,null,u);typeof u=="string"&&(u={encoding:u}),u||(u={}),u.encoding,u.flag,i.follow(c,function(S,b,E){if(S)return v(S);if(b.isDirectory())return v(J.EISDIR(E));var D=b&&b.blob||E;n.read(D,function(y,s){if(y)return v(y);v(null,u.encoding?s.toString(u.encoding):s)})})},t.createReadStream=function(c,u){u||(u={});var v=!1,S=ii.readable(function(b){i.follow(c,function(E,D,y){if(E)return b(E);if(D.isDirectory())return b(J.EISDIR(y));var s=D&&D.blob||y,l=n.createReadStream(s,u);S.emit("open"),l.on("end",function(){process.nextTick(function(){v||S.emit("close")})}),b(null,l)})});return S.on("close",function(){v=!0}),S},t.createWriteStream=function(c,u){u||(u={});var v=u.flags||"w",S=!1,b=u.mode||fr(666);u.append=v[0]==="a";var E=ii.writable(function(D){i.follow(c,function(y,s,l){if(y&&y.code!=="ENOENT")return D(y);if(s&&s.isDirectory())return D(J.EISDIR(l));if(s&&v[1]==="x")return D(J.EEXIST(l));var x=s&&s.blob||l;i.writable(x,function(A){if(A)return D(A);var I=s?s.ctime:new Date,K={ctime:I,mtime:new Date,mode:b,type:"file"};i.put(l,K,function(G){if(G)return D(G);var R=n.createWriteStream(x,u);E.emit("open"),R.on("finish",function(){K.mtime=new Date,i.put(l,K,function(){f.change(l),S||E.emit("close")})}),D(null,R)})})})});return E.on("close",function(){S=!0}),E},t.truncate=function(c,u,v){i.follow(c,function(S,b,E){if(S)return v(S);var D=b&&b.blob||E;n.size(D,function(y,s){if(y)return v(y);i.writable(E,function(l){if(l)return v(l);if(v=Ts(f.cb(E,v)),!u)return n.remove(D,v);var x=n.createWriteStream(D,{start:s<u?u-1:u});x.on("error",v),x.on("finish",v),s<u&&x.write(new Buffer([0])),x.end()})})})},t.watchFile=function(c,u,v){return typeof u=="function"?t.watchFile(c,null,u):f.watch(i.normalize(c),v)},t.unwatchFile=function(c,u){f.unwatch(i.normalize(c),u)},t.watch=function(c,u,v){return typeof u=="function"?t.watch(c,null,u):f.watcher(i.normalize(c),v)},t.notify=function(c){f.on("change",c)},t.open=function(c,u,v,S){if(typeof v=="function")return t.open(c,u,null,v);i.follow(c,function(b,E,D){if(b&&b.code!=="ENOENT")return S(b);var y=u[0],s=u[1]==="+"||u[2]==="+",l=E&&E.blob||D,x={key:D,blob:l,mode:v||fr(666),readable:y==="r"||(y==="w"||y==="a")&&s,writable:y==="w"||y==="a"||y==="r"&&s,append:y==="a"};if(y==="r"&&b)return S(b);if(u[1]==="x"&&E)return S(J.EEXIST(D));if(E&&E.isDirectory())return S(J.EISDIR(D));n.size(l,function(A,I){if(A)return S(A);x.append&&(x.writePos=I),i.writable(D,function(K){if(K)return S(K);var G=function(T){if(T)return S(T);var j=a.indexOf(null);j===-1&&(j=10+a.push(a.length+10)-1),x.fd=j,a[j]=x,f.change(D),S(null,x.fd)},R=function(T){if(T)return S(T);if(E)return G();i.put(l,{ctime:E&&E.ctime,type:"file"},G)};if(!x.append&&x.writable)return n.remove(l,R);R()})})})},t.close=function(c,u){var v=a[c];if(!v)return xe(u,J.EBADF());a[c]=null,xe(f.cb(v.key,u))},t.write=function(c,u,v,S,b,E){var D=a[c];if(E||(E=de),!D||!D.writable)return xe(E,J.EBADF());b===null&&(b=D.writePos||0);var y=u.slice(v,v+S);D.writePos=b+y.length,n.write(D.blob,y,{start:b,append:!0},function(s){if(s)return E(s);E(null,S,u)})},t.read=function(c,u,v,S,b,E){var D=a[c];if(E||(E=de),!D||!D.readable)return xe(E,J.EBADF());b===null&&(b=t.readPos||0),n.read(D.blob,{start:b,end:b+S-1},function(y,s){if(y)return E(y);var l=s.slice(0,S);l.copy(u,v),t.readPos=b+l.length,E(null,l.length,u)})},t.fsync=function(c,u){var v=a[c];if(u||(u=de),!v||!v.writable)return xe(u,J.EBADF());xe(u)},t.ftruncate=function(c,u,v){var S=a[c];if(v||(v=de),!S)return xe(v,J.EBADF());t.truncate(S.blob,u,v)},t.fchown=function(c,u,v,S){var b=a[c];if(S||(S=de),!b)return xe(S,J.EBADF());t.chown(b.key,u,v,S)},t.fchmod=function(c,u,v){var S=a[c];if(v||(v=de),!S)return xe(v,J.EBADF());t.chmod(S.key,u,v)},t.futimes=function(c,u,v,S){var b=a[c];if(S||(S=de),!b)return xe(S,J.EBADF());t.utimes(b.key,u,v,S)},t.fstat=function(c,u){var v=a[c];if(!v)return xe(u,J.EBADF());t.stat(v.key,u)},t.symlink=function(c,u,v){v||(v=de),i.follow(c,function(S,b,E){if(S)return v(S);i.get(u,function(D,y){if(D&&D.code!=="ENOENT")return v(D);if(y)return v(J.EEXIST(u));i.put(u,{type:"symlink",target:E,mode:fr(777)},v)})})},t.readlink=function(c,u){i.get(c,function(v,S){if(v)return u(v);if(!S.target)return u(J.EINVAL(c));u(null,S.target)})},t.link=function(c,u,v){v||(v=de),i.follow(c,function(S,b,E){if(S)return v(S);if(!b.isFile())return v(J.EINVAL(E));i.get(u,function(D,y){if(D&&D.code!=="ENOENT")return v(D);if(y)return v(J.EEXIST(u));var s=E+"\xFF"+h();o.put(E+"\xFF",E,function(l){if(l)return v(l);o.put(s,E,function(x){if(x)return v(x);i.put(u,{type:"file",link:s,blob:E,mode:b.mode},v)})})})})},t},As=to,Ds=br.exports,ks=Ms,Ns=Ds("level-filesystem",{db:As}),Ls=ks(Ns);export{Ls as b,jf as p};
