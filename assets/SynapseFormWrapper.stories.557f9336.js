import{b as ut,J as Nn,H as kn,c as kt,g as ji}from"./iframe.c18f9f1c.js";import{e as $n}from"./index.a30bf6ee.js";import{u as $t}from"./url.11a74cd7.js";import{b as Hi}from"./index.a04826db.js";import{bw as Vi,aR as It,W as Yi,bX as qi,cH as Wi,cU as zi,cV as Gi,c9 as Ki,cW as Ji,cX as Xi,aH as Qi,cY as Zi}from"./index.84210d7d.js";import{F as eo}from"./core.esm.3b09efdf.js";import{j as m,a as x,F as T,b as ro}from"./jsx-runtime.00d70968.js";import{I as br}from"./IconSvg.7fcfdfd8.js";import{c as In}from"./cloneDeep.ea1bb0ac.js";import{f as to,h as no,i as Dt,a as io,l as w,b as oo}from"./lodash.default.f33bc61a.js";import{g as _e}from"./_baseMap.e5b37582.js";import{e as Mt}from"./toString.d84aaeca.js";import{W as ao}from"./WarningModal.e66d24b4.js";import{P as so}from"./react-router.c0d6a067.js";import{A as Lt}from"./Alert.b74d1cfd.js";import{B as lo}from"./Button.fda23eee.js";import"./index.66e0b57e.js";import"./index.440cefe9.js";import"./withStyles.5fe35516.js";import"./objectWithoutPropertiesLoose.5e7699d1.js";import"./toConsumableArray.c4898ee4.js";import"./assert.9b56e417.js";import"./getEndpoint.bb7ded34.js";import"./SvgIcon.e37b9412.js";import"./index.57d09176.js";import"./index.35ce73ec.js";import"./isEmpty.fc6d098b.js";import"./ajv.c1d1463a.js";import"./sortBy.5b998eb2.js";import"./_copyArray.90f2161e.js";import"./union.c39e082d.js";import"./uniq.7adac9ef.js";import"./toInteger.ada06091.js";import"./_cacheHas.f8ac99cc.js";import"./_baseDifference.473c5fc3.js";import"./_setToArray.a82100c8.js";import"./Tooltip.b1e63f93.js";import"./createSvgIcon.99e72c0f.js";import"./slicedToArray.e72f11da.js";import"./useTheme.aaa309f8.js";import"./Transition.8278edb2.js";import"./makeStyles.45e8b79c.js";import"./InfoOutlined.60e019a4.js";import"./toLower.96dd1c76.js";import"./upperFirst.8c3db992.js";import"./times.7d6137c1.js";import"./_baseIsEqual.a778e630.js";import"./uniqueId.eba72690.js";import"./isEqual.e4f3fe37.js";import"./differenceWith.7a1b8d74.js";import"./sortBy.470a294c.js";import"./without.f32c0c19.js";import"./groupBy.054d72b2.js";import"./Modal.1fb607f9.js";import"./useWaitForDOMRef.97759fd7.js";import"./useWillUnmount.4a16e5cd.js";import"./removeClass.27874bcb.js";import"./hasClass.56fd144a.js";var Q={exports:{}};const uo=!1,co=/\r?\n/,fo=/\bono[ @]/;function ho(e){return Boolean(e&&e.configurable&&typeof e.get=="function")}function po(e){return Boolean(!e||e.writable||typeof e.set=="function")}function Dn(e,r){let t=Mn(e.stack),i=r?r.stack:void 0;return t&&i?t+`

`+i:t||i}function mo(e,r,t){t?Object.defineProperty(r,"stack",{get:()=>{let i=e.get.apply(r);return Dn({stack:i},t)},enumerable:!1,configurable:!0}):vo(r,e)}function Mn(e){if(e){let r=e.split(co),t;for(let i=0;i<r.length;i++){let n=r[i];if(fo.test(n))t===void 0&&(t=i);else if(t!==void 0){r.splice(t,i-t);break}}if(r.length>0)return r.join(`
`)}return e}function vo(e,r){Object.defineProperty(e,"stack",{get:()=>Mn(r.get.apply(e)),enumerable:!1,configurable:!0})}const go=["function","symbol","undefined"],yo=["constructor","prototype","__proto__"],So=Object.getPrototypeOf({});function Ln(){let e={},r=this;for(let t of Un(r))if(typeof t=="string"){let i=r[t],n=typeof i;go.includes(n)||(e[t]=i)}return e}function Un(e,r=[]){let t=[];for(;e&&e!==So;)t=t.concat(Object.getOwnPropertyNames(e),Object.getOwnPropertySymbols(e)),e=Object.getPrototypeOf(e);let i=new Set(t);for(let n of r.concat(yo))i.delete(n);return i}const bo=["name","message","stack"];function lr(e,r,t){let i=e;return Eo(i,r),r&&typeof r=="object"&&_o(i,r),i.toJSON=Ln,t&&typeof t=="object"&&Object.assign(i,t),i}function Eo(e,r){let t=Object.getOwnPropertyDescriptor(e,"stack");ho(t)?mo(t,e,r):po(t)&&(e.stack=Dn(e,r))}function _o(e,r){let t=Un(r,bo),i=e,n=r;for(let o of t)if(i[o]===void 0)try{i[o]=n[o]}catch{}}function wo(e){return e=e||{},{concatMessages:e.concatMessages===void 0?!0:Boolean(e.concatMessages),format:e.format===void 0?uo:typeof e.format=="function"?e.format:!1}}function xo(e,r){let t,i,n,o="";return typeof e[0]=="string"?n=e:typeof e[1]=="string"?(e[0]instanceof Error?t=e[0]:i=e[0],n=e.slice(1)):(t=e[0],i=e[1],n=e.slice(2)),n.length>0&&(r.format?o=r.format.apply(void 0,n):o=n.join(" ")),r.concatMessages&&t&&t.message&&(o+=(o?` 
`:"")+t.message),{originalError:t,props:i,message:o}}const se=ct;function ct(e,r){r=wo(r);function t(...i){let{originalError:n,props:o,message:a}=xo(i,r),s=new e(a);return lr(s,n,o)}return t[Symbol.species]=e,t}ct.toJSON=function(r){return Ln.call(r)};ct.extend=function(r,t,i){return i||t instanceof Error?lr(r,t,i):t?lr(r,void 0,t):lr(r)};const Ut=Z;Z.error=new se(Error);Z.eval=new se(EvalError);Z.range=new se(RangeError);Z.reference=new se(ReferenceError);Z.syntax=new se(SyntaxError);Z.type=new se(TypeError);Z.uri=new se(URIError);const Ao=Z;function Z(...e){let r=e[0];if(typeof r=="object"&&typeof r.name=="string"){for(let t of Object.values(Ao))if(typeof t=="function"&&t.name==="ono"){let i=t[Symbol.species];if(i&&i!==Error&&(r instanceof i||r.name===i.name))return t.apply(void 0,e)}}return Z.error.apply(void 0,e)}typeof module=="object"&&typeof module.exports=="object"&&(module.exports=Object.assign(module.exports.default,module.exports));const Oo=Object.freeze(Object.defineProperty({__proto__:null,ono:Ut,default:Ut,Ono:se},Symbol.toStringTag,{value:"Module"})),me=ut(Oo);var L={exports:{}};(function(e,r){let t=/^win/.test(process.platform),i=/\//g,n=/^(\w{2,}):\/\//i,o=e.exports,a=/~1/g,s=/~0/g,l=[/\?/g,"%3F",/\#/g,"%23"],u=[/\%23/g,"#",/\%24/g,"$",/\%26/g,"&",/\%2C/g,",",/\%40/g,"@"];r.parse=$t.parse,r.resolve=$t.resolve,r.cwd=function(){if(process.browser)return location.href;let c=process.cwd(),d=c.slice(-1);return d==="/"||d==="\\"?c:c+"/"},r.getProtocol=function(c){let d=n.exec(c);if(d)return d[1].toLowerCase()},r.getExtension=function(c){let d=c.lastIndexOf(".");return d>=0?o.stripQuery(c.substr(d).toLowerCase()):""},r.stripQuery=function(c){let d=c.indexOf("?");return d>=0&&(c=c.substr(0,d)),c},r.getHash=function(c){let d=c.indexOf("#");return d>=0?c.substr(d):"#"},r.stripHash=function(c){let d=c.indexOf("#");return d>=0&&(c=c.substr(0,d)),c},r.isHttp=function(c){let d=o.getProtocol(c);return d==="http"||d==="https"?!0:d===void 0?process.browser:!1},r.isFileSystemPath=function(c){if(process.browser)return!1;let d=o.getProtocol(c);return d===void 0||d==="file"},r.fromFileSystemPath=function(c){t&&(c=c.replace(/\\/g,"/")),c=encodeURI(c);for(let d=0;d<l.length;d+=2)c=c.replace(l[d],l[d+1]);return c},r.toFileSystemPath=function(c,d){c=decodeURI(c);for(let p=0;p<u.length;p+=2)c=c.replace(u[p],u[p+1]);let h=c.substr(0,7).toLowerCase()==="file://";return h&&(c=c[7]==="/"?c.substr(8):c.substr(7),t&&c[1]==="/"&&(c=c[0]+":"+c.substr(1)),d?c="file:///"+c:(h=!1,c=t?c:"/"+c)),t&&!h&&(c=c.replace(i,"\\"),c.substr(1,2)===":\\"&&(c=c[0].toUpperCase()+c.substr(1))),c},r.safePointerToPath=function(c){return c.length<=1||c[0]!=="#"||c[1]!=="/"?[]:c.slice(2).split("/").map(d=>decodeURIComponent(d).replace(a,"/").replace(s,"~"))}})(L,L.exports);var C={};const{Ono:Bn}=me,{stripHash:jn,toFileSystemPath:Ro}=L.exports,le=C.JSONParserError=class extends Error{constructor(r,t){super(),this.code="EUNKNOWN",this.message=r,this.source=t,this.path=null,Bn.extend(this)}get footprint(){return`${this.path}+${this.source}+${this.code}+${this.message}`}};ue(le);const Hn=C.JSONParserErrorGroup=class Vn extends Error{constructor(r){super(),this.files=r,this.message=`${this.errors.length} error${this.errors.length>1?"s":""} occurred while reading '${Ro(r.$refs._root$Ref.path)}'`,Bn.extend(this)}static getParserErrors(r){const t=[];for(const i of Object.values(r.$refs._$refs))i.errors&&t.push(...i.errors);return t}get errors(){return Vn.getParserErrors(this.files)}};ue(Hn);const Co=C.ParserError=class extends le{constructor(r,t){super(`Error parsing ${t}: ${r}`,t),this.code="EPARSER"}};ue(Co);const To=C.UnmatchedParserError=class extends le{constructor(r){super(`Could not find parser for "${r}"`,r),this.code="EUNMATCHEDPARSER"}};ue(To);const Fo=C.ResolverError=class extends le{constructor(r,t){super(r.message||`Error reading file "${t}"`,t),this.code="ERESOLVER","code"in r&&(this.ioErrorCode=String(r.code))}};ue(Fo);const Po=C.UnmatchedResolverError=class extends le{constructor(r){super(`Could not find resolver for "${r}"`,r),this.code="EUNMATCHEDRESOLVER"}};ue(Po);const No=C.MissingPointerError=class extends le{constructor(r,t){super(`Token "${r}" does not exist.`,jn(t)),this.code="EMISSINGPOINTER"}};ue(No);const ko=C.InvalidPointerError=class extends le{constructor(r,t){super(`Invalid $ref pointer "${r}". Pointers must begin with "#/"`,jn(t)),this.code="EINVALIDPOINTER"}};ue(ko);function ue(e){Object.defineProperty(e.prototype,"name",{value:e.name,enumerable:!0})}C.isHandledError=function(e){return e instanceof le||e instanceof Hn};C.normalizeError=function(e){return e.path===null&&(e.path=[]),e};var Ur,Bt;function Cr(){if(Bt)return Ur;Bt=1,Ur=f;const e=Ye(),r=L.exports,{JSONParserError:t,InvalidPointerError:i,MissingPointerError:n,isHandledError:o}=C,a=/\//g,s=/~/g,l=/~1/g,u=/~0/g;function f(p,g,v){this.$ref=p,this.path=g,this.originalPath=v||g,this.value=void 0,this.circular=!1,this.indirections=0}f.prototype.resolve=function(p,g,v){let y=f.parse(this.path,this.originalPath);this.value=h(p);for(let E=0;E<y.length;E++){if(c(this,g)&&(this.path=f.join(this.path,y.slice(E))),typeof this.value=="object"&&this.value!==null&&"$ref"in this.value)return this;let F=y[E];if(this.value[F]===void 0||this.value[F]===null)throw this.value=null,new n(F,this.originalPath);this.value=this.value[F]}return(!this.value||this.value.$ref&&r.resolve(this.path,this.value.$ref)!==v)&&c(this,g),this},f.prototype.set=function(p,g,v){let y=f.parse(this.path),E;if(y.length===0)return this.value=g,g;this.value=h(p);for(let F=0;F<y.length-1;F++)c(this,v),E=y[F],this.value&&this.value[E]!==void 0?this.value=this.value[E]:this.value=d(this,E,{});return c(this,v),E=y[y.length-1],d(this,E,g),p},f.parse=function(p,g){let v=r.getHash(p).substr(1);if(!v)return[];v=v.split("/");for(let y=0;y<v.length;y++)v[y]=decodeURIComponent(v[y].replace(l,"/").replace(u,"~"));if(v[0]!=="")throw new i(v,g===void 0?p:g);return v.slice(1)},f.join=function(p,g){p.indexOf("#")===-1&&(p+="#"),g=Array.isArray(g)?g:[g];for(let v=0;v<g.length;v++){let y=g[v];p+="/"+encodeURIComponent(y.replace(s,"~0").replace(a,"~1"))}return p};function c(p,g){if(e.isAllowed$Ref(p.value,g)){let v=r.resolve(p.path,p.value.$ref);if(v===p.path)p.circular=!0;else{let y=p.$ref.$refs._resolve(v,p.path,g);return y===null?!1:(p.indirections+=y.indirections+1,e.isExtended$Ref(p.value)?(p.value=e.dereference(p.value,y.value),!1):(p.$ref=y.$ref,p.path=y.path,p.value=y.value,!0))}}}function d(p,g,v){if(p.value&&typeof p.value=="object")g==="-"&&Array.isArray(p.value)?p.value.push(v):p.value[g]=v;else throw new t(`Error assigning $ref pointer "${p.path}". 
Cannot set "${g}" of a non-object.`);return v}function h(p){if(o(p))throw p;return p}return Ur}var Br,jt;function Ye(){if(jt)return Br;jt=1,Br=s;const e=Cr(),{InvalidPointerError:r,isHandledError:t,normalizeError:i}=C,{safePointerToPath:n,stripHash:o,getHash:a}=L.exports;function s(){this.path=void 0,this.value=void 0,this.$refs=void 0,this.pathType=void 0,this.errors=void 0}return s.prototype.addError=function(l){this.errors===void 0&&(this.errors=[]);const u=this.errors.map(({footprint:f})=>f);Array.isArray(l.errors)?this.errors.push(...l.errors.map(i).filter(({footprint:f})=>!u.includes(f))):u.includes(l.footprint)||this.errors.push(i(l))},s.prototype.exists=function(l,u){try{return this.resolve(l,u),!0}catch{return!1}},s.prototype.get=function(l,u){return this.resolve(l,u).value},s.prototype.resolve=function(l,u,f,c){let d=new e(this,l,f);try{return d.resolve(this.value,u,c)}catch(h){if(!u||!u.continueOnError||!t(h))throw h;return h.path===null&&(h.path=n(a(c))),h instanceof r&&(h.source=o(c)),this.addError(h),null}},s.prototype.set=function(l,u){let f=new e(this,l);this.value=f.set(this.value,u)},s.is$Ref=function(l){return l&&typeof l=="object"&&typeof l.$ref=="string"&&l.$ref.length>0},s.isExternal$Ref=function(l){return s.is$Ref(l)&&l.$ref[0]!=="#"},s.isAllowed$Ref=function(l,u){if(s.is$Ref(l)){if(l.$ref.substr(0,2)==="#/"||l.$ref==="#")return!0;if(l.$ref[0]!=="#"&&(!u||u.resolve.external))return!0}},s.isExtended$Ref=function(l){return s.is$Ref(l)&&Object.keys(l).length>1},s.dereference=function(l,u){if(u&&typeof u=="object"&&s.isExtended$Ref(l)){let f={};for(let c of Object.keys(l))c!=="$ref"&&(f[c]=l[c]);for(let c of Object.keys(u))c in f||(f[c]=u[c]);return f}else return u},Br}const{ono:Yn}=me,$o=Ye(),ae=L.exports;var Io=W;function W(){this.circular=!1,this._$refs={},this._root$Ref=null}W.prototype.paths=function(e){return qn(this._$refs,arguments).map(t=>t.decoded)};W.prototype.values=function(e){let r=this._$refs;return qn(r,arguments).reduce((i,n)=>(i[n.decoded]=r[n.encoded].value,i),{})};W.prototype.toJSON=W.prototype.values;W.prototype.exists=function(e,r){try{return this._resolve(e,"",r),!0}catch{return!1}};W.prototype.get=function(e,r){return this._resolve(e,"",r).value};W.prototype.set=function(e,r){let t=ae.resolve(this._root$Ref.path,e),i=ae.stripHash(t),n=this._$refs[i];if(!n)throw Yn(`Error resolving $ref pointer "${e}". 
"${i}" not found.`);n.set(t,r)};W.prototype._add=function(e){let r=ae.stripHash(e),t=new $o;return t.path=r,t.$refs=this,this._$refs[r]=t,this._root$Ref=this._root$Ref||t,t};W.prototype._resolve=function(e,r,t){let i=ae.resolve(this._root$Ref.path,e),n=ae.stripHash(i),o=this._$refs[n];if(!o)throw Yn(`Error resolving $ref pointer "${e}". 
"${n}" not found.`);return o.resolve(i,t,e,r)};W.prototype._get$Ref=function(e){e=ae.resolve(this._root$Ref.path,e);let r=ae.stripHash(e);return this._$refs[r]};function qn(e,r){let t=Object.keys(e);return r=Array.isArray(r[0])?r[0]:Array.prototype.slice.call(r),r.length>0&&r[0]&&(t=t.filter(i=>r.indexOf(e[i].pathType)!==-1)),t.map(i=>({encoded:i,decoded:e[i].pathType==="file"?ae.toFileSystemPath(i,!0):i}))}var qe={};qe.all=function(e){return Object.keys(e).filter(r=>typeof e[r]=="object").map(r=>(e[r].name=r,e[r]))};qe.filter=function(e,r,t){return e.filter(i=>!!Wn(i,r,t))};qe.sort=function(e){for(let r of e)r.order=r.order||Number.MAX_SAFE_INTEGER;return e.sort((r,t)=>r.order-t.order)};qe.run=function(e,r,t,i){let n,o,a=0;return new Promise((s,l)=>{u();function u(){if(n=e[a++],!n)return l(o);try{let h=Wn(n,r,t,f,i);if(h&&typeof h.then=="function")h.then(c,d);else if(h!==void 0)c(h);else if(a===e.length)throw new Error("No promise has been returned or callback has been called.")}catch(h){d(h)}}function f(h,p){h?d(h):c(p)}function c(h){s({plugin:n,result:h})}function d(h){o={plugin:n,error:h},u()}})};function Wn(e,r,t,i,n){let o=e[r];if(typeof o=="function")return o.apply(e,[t,i,n]);if(!i){if(o instanceof RegExp)return o.test(t.url);if(typeof o=="string")return o===t.extension;if(Array.isArray(o))return o.indexOf(t.extension)!==-1}return o}const{ono:Xr}=me,Ht=L.exports,ne=qe,{ResolverError:Vt,ParserError:Yt,UnmatchedParserError:Do,UnmatchedResolverError:Mo,isHandledError:Lo}=C;var zn=Uo;async function Uo(e,r,t){e=Ht.stripHash(e);let i=r._add(e),n={url:e,extension:Ht.getExtension(e)};try{const o=await Bo(n,t,r);i.pathType=o.plugin.name,n.data=o.result;const a=await jo(n,t,r);return i.value=a.result,a.result}catch(o){throw Lo(o)&&(i.value=o),o}}function Bo(e,r,t){return new Promise((i,n)=>{let o=ne.all(r.resolve);o=ne.filter(o,"canRead",e),ne.sort(o),ne.run(o,"read",e,t).then(i,a);function a(s){!s&&r.continueOnError?n(new Mo(e.url)):!s||!("error"in s)?n(Xr.syntax(`Unable to resolve $ref pointer "${e.url}"`)):s.error instanceof Vt?n(s.error):n(new Vt(s,e.url))}})}function jo(e,r,t){return new Promise((i,n)=>{let o=ne.all(r.parse),a=ne.filter(o,"canParse",e),s=a.length>0?a:o;ne.sort(s),ne.run(s,"parse",e,t).then(l,u);function l(f){!f.plugin.allowEmpty&&Ho(f.result)?n(Xr.syntax(`Error parsing "${e.url}" as ${f.plugin.name}. 
Parsed value is empty`)):i(f)}function u(f){!f&&r.continueOnError?n(new Do(e.url)):!f||!("error"in f)?n(Xr.syntax(`Unable to parse ${e.url}`)):f.error instanceof Yt?n(f.error):n(new Yt(f.error.message,e.url))}})}function Ho(e){return e===void 0||typeof e=="object"&&Object.keys(e).length===0||typeof e=="string"&&e.trim().length===0||Buffer.isBuffer(e)&&e.length===0}const{ParserError:Vo}=C;var Yo={order:100,allowEmpty:!0,canParse:".json",async parse(e){let r=e.data;if(Buffer.isBuffer(r)&&(r=r.toString()),typeof r=="string"){if(r.trim().length===0)return;try{return JSON.parse(r)}catch(t){throw new Vo(t.message,e.url)}}else return r}},O={},We={},j={};function Gn(e){return typeof e>"u"||e===null}function qo(e){return typeof e=="object"&&e!==null}function Wo(e){return Array.isArray(e)?e:Gn(e)?[]:[e]}function zo(e,r){var t,i,n,o;if(r)for(o=Object.keys(r),t=0,i=o.length;t<i;t+=1)n=o[t],e[n]=r[n];return e}function Go(e,r){var t="",i;for(i=0;i<r;i+=1)t+=e;return t}function Ko(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}j.isNothing=Gn;j.isObject=qo;j.toArray=Wo;j.repeat=Go;j.isNegativeZero=Ko;j.extend=zo;function Me(e,r){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=r,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Me.prototype=Object.create(Error.prototype);Me.prototype.constructor=Me;Me.prototype.toString=function(r){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!r&&this.mark&&(t+=" "+this.mark.toString()),t};var ze=Me,qt=j;function ft(e,r,t,i,n){this.name=e,this.buffer=r,this.position=t,this.line=i,this.column=n}ft.prototype.getSnippet=function(r,t){var i,n,o,a,s;if(!this.buffer)return null;for(r=r||4,t=t||75,i="",n=this.position;n>0&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(n-1))===-1;)if(n-=1,this.position-n>t/2-1){i=" ... ",n+=5;break}for(o="",a=this.position;a<this.buffer.length&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(a))===-1;)if(a+=1,a-this.position>t/2-1){o=" ... ",a-=5;break}return s=this.buffer.slice(n,a),qt.repeat(" ",r)+i+s+o+`
`+qt.repeat(" ",r+this.position-n+i.length)+"^"};ft.prototype.toString=function(r){var t,i="";return this.name&&(i+='in "'+this.name+'" '),i+="at line "+(this.line+1)+", column "+(this.column+1),r||(t=this.getSnippet(),t&&(i+=`:
`+t)),i};var Jo=ft,Wt=ze,Xo=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],Qo=["scalar","sequence","mapping"];function Zo(e){var r={};return e!==null&&Object.keys(e).forEach(function(t){e[t].forEach(function(i){r[String(i)]=t})}),r}function ea(e,r){if(r=r||{},Object.keys(r).forEach(function(t){if(Xo.indexOf(t)===-1)throw new Wt('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=r.kind||null,this.resolve=r.resolve||function(){return!0},this.construct=r.construct||function(t){return t},this.instanceOf=r.instanceOf||null,this.predicate=r.predicate||null,this.represent=r.represent||null,this.defaultStyle=r.defaultStyle||null,this.styleAliases=Zo(r.styleAliases||null),Qo.indexOf(this.kind)===-1)throw new Wt('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var N=ea,zt=j,ur=ze,ra=N;function Qr(e,r,t){var i=[];return e.include.forEach(function(n){t=Qr(n,r,t)}),e[r].forEach(function(n){t.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&i.push(a)}),t.push(n)}),t.filter(function(n,o){return i.indexOf(o)===-1})}function ta(){var e={scalar:{},sequence:{},mapping:{},fallback:{}},r,t;function i(n){e[n.kind][n.tag]=e.fallback[n.tag]=n}for(r=0,t=arguments.length;r<t;r+=1)arguments[r].forEach(i);return e}function we(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(r){if(r.loadKind&&r.loadKind!=="scalar")throw new ur("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=Qr(this,"implicit",[]),this.compiledExplicit=Qr(this,"explicit",[]),this.compiledTypeMap=ta(this.compiledImplicit,this.compiledExplicit)}we.DEFAULT=null;we.create=function(){var r,t;switch(arguments.length){case 1:r=we.DEFAULT,t=arguments[0];break;case 2:r=arguments[0],t=arguments[1];break;default:throw new ur("Wrong number of arguments for Schema.create function")}if(r=zt.toArray(r),t=zt.toArray(t),!r.every(function(i){return i instanceof we}))throw new ur("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every(function(i){return i instanceof ra}))throw new ur("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new we({include:r,explicit:t})};var Re=we,na=N,ia=new na("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),oa=N,aa=new oa("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),sa=N,la=new sa("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),ua=Re,dt=new ua({explicit:[ia,aa,la]}),ca=N;function fa(e){if(e===null)return!0;var r=e.length;return r===1&&e==="~"||r===4&&(e==="null"||e==="Null"||e==="NULL")}function da(){return null}function ha(e){return e===null}var pa=new ca("tag:yaml.org,2002:null",{kind:"scalar",resolve:fa,construct:da,predicate:ha,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"}),ma=N;function va(e){if(e===null)return!1;var r=e.length;return r===4&&(e==="true"||e==="True"||e==="TRUE")||r===5&&(e==="false"||e==="False"||e==="FALSE")}function ga(e){return e==="true"||e==="True"||e==="TRUE"}function ya(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Sa=new ma("tag:yaml.org,2002:bool",{kind:"scalar",resolve:va,construct:ga,predicate:ya,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"}),ba=j,Ea=N;function _a(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function wa(e){return 48<=e&&e<=55}function xa(e){return 48<=e&&e<=57}function Aa(e){if(e===null)return!1;var r=e.length,t=0,i=!1,n;if(!r)return!1;if(n=e[t],(n==="-"||n==="+")&&(n=e[++t]),n==="0"){if(t+1===r)return!0;if(n=e[++t],n==="b"){for(t++;t<r;t++)if(n=e[t],n!=="_"){if(n!=="0"&&n!=="1")return!1;i=!0}return i&&n!=="_"}if(n==="x"){for(t++;t<r;t++)if(n=e[t],n!=="_"){if(!_a(e.charCodeAt(t)))return!1;i=!0}return i&&n!=="_"}for(;t<r;t++)if(n=e[t],n!=="_"){if(!wa(e.charCodeAt(t)))return!1;i=!0}return i&&n!=="_"}if(n==="_")return!1;for(;t<r;t++)if(n=e[t],n!=="_"){if(n===":")break;if(!xa(e.charCodeAt(t)))return!1;i=!0}return!i||n==="_"?!1:n!==":"?!0:/^(:[0-5]?[0-9])+$/.test(e.slice(t))}function Oa(e){var r=e,t=1,i,n,o=[];return r.indexOf("_")!==-1&&(r=r.replace(/_/g,"")),i=r[0],(i==="-"||i==="+")&&(i==="-"&&(t=-1),r=r.slice(1),i=r[0]),r==="0"?0:i==="0"?r[1]==="b"?t*parseInt(r.slice(2),2):r[1]==="x"?t*parseInt(r,16):t*parseInt(r,8):r.indexOf(":")!==-1?(r.split(":").forEach(function(a){o.unshift(parseInt(a,10))}),r=0,n=1,o.forEach(function(a){r+=a*n,n*=60}),t*r):t*parseInt(r,10)}function Ra(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!ba.isNegativeZero(e)}var Ca=new Ea("tag:yaml.org,2002:int",{kind:"scalar",resolve:Aa,construct:Oa,predicate:Ra,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Kn=j,Ta=N,Fa=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Pa(e){return!(e===null||!Fa.test(e)||e[e.length-1]==="_")}function Na(e){var r,t,i,n;return r=e.replace(/_/g,"").toLowerCase(),t=r[0]==="-"?-1:1,n=[],"+-".indexOf(r[0])>=0&&(r=r.slice(1)),r===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:r===".nan"?NaN:r.indexOf(":")>=0?(r.split(":").forEach(function(o){n.unshift(parseFloat(o,10))}),r=0,i=1,n.forEach(function(o){r+=o*i,i*=60}),t*r):t*parseFloat(r,10)}var ka=/^[-+]?[0-9]+e/;function $a(e,r){var t;if(isNaN(e))switch(r){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(r){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(r){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Kn.isNegativeZero(e))return"-0.0";return t=e.toString(10),ka.test(t)?t.replace("e",".e"):t}function Ia(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Kn.isNegativeZero(e))}var Da=new Ta("tag:yaml.org,2002:float",{kind:"scalar",resolve:Pa,construct:Na,predicate:Ia,represent:$a,defaultStyle:"lowercase"}),Ma=Re,Jn=new Ma({include:[dt],implicit:[pa,Sa,Ca,Da]}),La=Re,Xn=new La({include:[Jn]}),Ua=N,Qn=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Zn=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Ba(e){return e===null?!1:Qn.exec(e)!==null||Zn.exec(e)!==null}function ja(e){var r,t,i,n,o,a,s,l=0,u=null,f,c,d;if(r=Qn.exec(e),r===null&&(r=Zn.exec(e)),r===null)throw new Error("Date resolve error");if(t=+r[1],i=+r[2]-1,n=+r[3],!r[4])return new Date(Date.UTC(t,i,n));if(o=+r[4],a=+r[5],s=+r[6],r[7]){for(l=r[7].slice(0,3);l.length<3;)l+="0";l=+l}return r[9]&&(f=+r[10],c=+(r[11]||0),u=(f*60+c)*6e4,r[9]==="-"&&(u=-u)),d=new Date(Date.UTC(t,i,n,o,a,s,l)),u&&d.setTime(d.getTime()-u),d}function Ha(e){return e.toISOString()}var Va=new Ua("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Ba,construct:ja,instanceOf:Date,represent:Ha}),Ya=N;function qa(e){return e==="<<"||e===null}var Wa=new Ya("tag:yaml.org,2002:merge",{kind:"scalar",resolve:qa}),fe;try{var za=Nn;fe=za("buffer").Buffer}catch{}var Ga=N,ht=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Ka(e){if(e===null)return!1;var r,t,i=0,n=e.length,o=ht;for(t=0;t<n;t++)if(r=o.indexOf(e.charAt(t)),!(r>64)){if(r<0)return!1;i+=6}return i%8===0}function Ja(e){var r,t,i=e.replace(/[\r\n=]/g,""),n=i.length,o=ht,a=0,s=[];for(r=0;r<n;r++)r%4===0&&r&&(s.push(a>>16&255),s.push(a>>8&255),s.push(a&255)),a=a<<6|o.indexOf(i.charAt(r));return t=n%4*6,t===0?(s.push(a>>16&255),s.push(a>>8&255),s.push(a&255)):t===18?(s.push(a>>10&255),s.push(a>>2&255)):t===12&&s.push(a>>4&255),fe?fe.from?fe.from(s):new fe(s):s}function Xa(e){var r="",t=0,i,n,o=e.length,a=ht;for(i=0;i<o;i++)i%3===0&&i&&(r+=a[t>>18&63],r+=a[t>>12&63],r+=a[t>>6&63],r+=a[t&63]),t=(t<<8)+e[i];return n=o%3,n===0?(r+=a[t>>18&63],r+=a[t>>12&63],r+=a[t>>6&63],r+=a[t&63]):n===2?(r+=a[t>>10&63],r+=a[t>>4&63],r+=a[t<<2&63],r+=a[64]):n===1&&(r+=a[t>>2&63],r+=a[t<<4&63],r+=a[64],r+=a[64]),r}function Qa(e){return fe&&fe.isBuffer(e)}var Za=new Ga("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Ka,construct:Ja,predicate:Qa,represent:Xa}),es=N,rs=Object.prototype.hasOwnProperty,ts=Object.prototype.toString;function ns(e){if(e===null)return!0;var r=[],t,i,n,o,a,s=e;for(t=0,i=s.length;t<i;t+=1){if(n=s[t],a=!1,ts.call(n)!=="[object Object]")return!1;for(o in n)if(rs.call(n,o))if(!a)a=!0;else return!1;if(!a)return!1;if(r.indexOf(o)===-1)r.push(o);else return!1}return!0}function is(e){return e!==null?e:[]}var os=new es("tag:yaml.org,2002:omap",{kind:"sequence",resolve:ns,construct:is}),as=N,ss=Object.prototype.toString;function ls(e){if(e===null)return!0;var r,t,i,n,o,a=e;for(o=new Array(a.length),r=0,t=a.length;r<t;r+=1){if(i=a[r],ss.call(i)!=="[object Object]"||(n=Object.keys(i),n.length!==1))return!1;o[r]=[n[0],i[n[0]]]}return!0}function us(e){if(e===null)return[];var r,t,i,n,o,a=e;for(o=new Array(a.length),r=0,t=a.length;r<t;r+=1)i=a[r],n=Object.keys(i),o[r]=[n[0],i[n[0]]];return o}var cs=new as("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:ls,construct:us}),fs=N,ds=Object.prototype.hasOwnProperty;function hs(e){if(e===null)return!0;var r,t=e;for(r in t)if(ds.call(t,r)&&t[r]!==null)return!1;return!0}function ps(e){return e!==null?e:{}}var ms=new fs("tag:yaml.org,2002:set",{kind:"mapping",resolve:hs,construct:ps}),vs=Re,Ge=new vs({include:[Xn],implicit:[Va,Wa],explicit:[Za,os,cs,ms]}),gs=N;function ys(){return!0}function Ss(){}function bs(){return""}function Es(e){return typeof e>"u"}var _s=new gs("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:ys,construct:Ss,predicate:Es,represent:bs}),ws=N;function xs(e){if(e===null||e.length===0)return!1;var r=e,t=/\/([gim]*)$/.exec(e),i="";return!(r[0]==="/"&&(t&&(i=t[1]),i.length>3||r[r.length-i.length-1]!=="/"))}function As(e){var r=e,t=/\/([gim]*)$/.exec(e),i="";return r[0]==="/"&&(t&&(i=t[1]),r=r.slice(1,r.length-i.length-1)),new RegExp(r,i)}function Os(e){var r="/"+e.source+"/";return e.global&&(r+="g"),e.multiline&&(r+="m"),e.ignoreCase&&(r+="i"),r}function Rs(e){return Object.prototype.toString.call(e)==="[object RegExp]"}var Cs=new ws("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:xs,construct:As,predicate:Rs,represent:Os}),Er;try{var Ts=Nn;Er=Ts("esprima")}catch{typeof window<"u"&&(Er=window.esprima)}var Fs=N;function Ps(e){if(e===null)return!1;try{var r="("+e+")",t=Er.parse(r,{range:!0});return!(t.type!=="Program"||t.body.length!==1||t.body[0].type!=="ExpressionStatement"||t.body[0].expression.type!=="ArrowFunctionExpression"&&t.body[0].expression.type!=="FunctionExpression")}catch{return!1}}function Ns(e){var r="("+e+")",t=Er.parse(r,{range:!0}),i=[],n;if(t.type!=="Program"||t.body.length!==1||t.body[0].type!=="ExpressionStatement"||t.body[0].expression.type!=="ArrowFunctionExpression"&&t.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return t.body[0].expression.params.forEach(function(o){i.push(o.name)}),n=t.body[0].expression.body.range,t.body[0].expression.body.type==="BlockStatement"?new Function(i,r.slice(n[0]+1,n[1]-1)):new Function(i,"return "+r.slice(n[0],n[1]))}function ks(e){return e.toString()}function $s(e){return Object.prototype.toString.call(e)==="[object Function]"}var Is=new Fs("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:Ps,construct:Ns,predicate:$s,represent:ks}),Gt=Re,Tr=Gt.DEFAULT=new Gt({include:[Ge],explicit:[_s,Cs,Is]}),J=j,ei=ze,Ds=Jo,Zr=Ge,Ms=Tr,he=Object.prototype.hasOwnProperty,_r=1,ri=2,ti=3,wr=4,jr=1,Ls=2,Kt=3,Us=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Bs=/[\x85\u2028\u2029]/,js=/[,\[\]\{\}]/,ni=/^(?:!|!!|![a-z\-]+!)$/i,ii=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Jt(e){return Object.prototype.toString.call(e)}function X(e){return e===10||e===13}function de(e){return e===9||e===32}function D(e){return e===9||e===32||e===10||e===13}function xe(e){return e===44||e===91||e===93||e===123||e===125}function Hs(e){var r;return 48<=e&&e<=57?e-48:(r=e|32,97<=r&&r<=102?r-97+10:-1)}function Vs(e){return e===120?2:e===117?4:e===85?8:0}function Ys(e){return 48<=e&&e<=57?e-48:-1}function Xt(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function qs(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var oi=new Array(256),ai=new Array(256);for(var Se=0;Se<256;Se++)oi[Se]=Xt(Se)?1:0,ai[Se]=Xt(Se);function Ws(e,r){this.input=e,this.filename=r.filename||null,this.schema=r.schema||Ms,this.onWarning=r.onWarning||null,this.legacy=r.legacy||!1,this.json=r.json||!1,this.listener=r.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function si(e,r){return new ei(r,new Ds(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function S(e,r){throw si(e,r)}function xr(e,r){e.onWarning&&e.onWarning.call(null,si(e,r))}var Qt={YAML:function(r,t,i){var n,o,a;r.version!==null&&S(r,"duplication of %YAML directive"),i.length!==1&&S(r,"YAML directive accepts exactly one argument"),n=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),n===null&&S(r,"ill-formed argument of the YAML directive"),o=parseInt(n[1],10),a=parseInt(n[2],10),o!==1&&S(r,"unacceptable YAML version of the document"),r.version=i[0],r.checkLineBreaks=a<2,a!==1&&a!==2&&xr(r,"unsupported YAML version of the document")},TAG:function(r,t,i){var n,o;i.length!==2&&S(r,"TAG directive accepts exactly two arguments"),n=i[0],o=i[1],ni.test(n)||S(r,"ill-formed tag handle (first argument) of the TAG directive"),he.call(r.tagMap,n)&&S(r,'there is a previously declared suffix for "'+n+'" tag handle'),ii.test(o)||S(r,"ill-formed tag prefix (second argument) of the TAG directive"),r.tagMap[n]=o}};function oe(e,r,t,i){var n,o,a,s;if(r<t){if(s=e.input.slice(r,t),i)for(n=0,o=s.length;n<o;n+=1)a=s.charCodeAt(n),a===9||32<=a&&a<=1114111||S(e,"expected valid JSON character");else Us.test(s)&&S(e,"the stream contains non-printable characters");e.result+=s}}function Zt(e,r,t,i){var n,o,a,s;for(J.isObject(t)||S(e,"cannot merge mappings; the provided source object is unacceptable"),n=Object.keys(t),a=0,s=n.length;a<s;a+=1)o=n[a],he.call(r,o)||(r[o]=t[o],i[o]=!0)}function Ae(e,r,t,i,n,o,a,s){var l,u;if(Array.isArray(n))for(n=Array.prototype.slice.call(n),l=0,u=n.length;l<u;l+=1)Array.isArray(n[l])&&S(e,"nested arrays are not supported inside keys"),typeof n=="object"&&Jt(n[l])==="[object Object]"&&(n[l]="[object Object]");if(typeof n=="object"&&Jt(n)==="[object Object]"&&(n="[object Object]"),n=String(n),r===null&&(r={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(l=0,u=o.length;l<u;l+=1)Zt(e,r,o[l],t);else Zt(e,r,o,t);else!e.json&&!he.call(t,n)&&he.call(r,n)&&(e.line=a||e.line,e.position=s||e.position,S(e,"duplicated mapping key")),r[n]=o,delete t[n];return r}function pt(e){var r;r=e.input.charCodeAt(e.position),r===10?e.position++:r===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):S(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function R(e,r,t){for(var i=0,n=e.input.charCodeAt(e.position);n!==0;){for(;de(n);)n=e.input.charCodeAt(++e.position);if(r&&n===35)do n=e.input.charCodeAt(++e.position);while(n!==10&&n!==13&&n!==0);if(X(n))for(pt(e),n=e.input.charCodeAt(e.position),i++,e.lineIndent=0;n===32;)e.lineIndent++,n=e.input.charCodeAt(++e.position);else break}return t!==-1&&i!==0&&e.lineIndent<t&&xr(e,"deficient indentation"),i}function Fr(e){var r=e.position,t;return t=e.input.charCodeAt(r),!!((t===45||t===46)&&t===e.input.charCodeAt(r+1)&&t===e.input.charCodeAt(r+2)&&(r+=3,t=e.input.charCodeAt(r),t===0||D(t)))}function mt(e,r){r===1?e.result+=" ":r>1&&(e.result+=J.repeat(`
`,r-1))}function zs(e,r,t){var i,n,o,a,s,l,u,f,c=e.kind,d=e.result,h;if(h=e.input.charCodeAt(e.position),D(h)||xe(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(n=e.input.charCodeAt(e.position+1),D(n)||t&&xe(n)))return!1;for(e.kind="scalar",e.result="",o=a=e.position,s=!1;h!==0;){if(h===58){if(n=e.input.charCodeAt(e.position+1),D(n)||t&&xe(n))break}else if(h===35){if(i=e.input.charCodeAt(e.position-1),D(i))break}else{if(e.position===e.lineStart&&Fr(e)||t&&xe(h))break;if(X(h))if(l=e.line,u=e.lineStart,f=e.lineIndent,R(e,!1,-1),e.lineIndent>=r){s=!0,h=e.input.charCodeAt(e.position);continue}else{e.position=a,e.line=l,e.lineStart=u,e.lineIndent=f;break}}s&&(oe(e,o,a,!1),mt(e,e.line-l),o=a=e.position,s=!1),de(h)||(a=e.position+1),h=e.input.charCodeAt(++e.position)}return oe(e,o,a,!1),e.result?!0:(e.kind=c,e.result=d,!1)}function Gs(e,r){var t,i,n;if(t=e.input.charCodeAt(e.position),t!==39)return!1;for(e.kind="scalar",e.result="",e.position++,i=n=e.position;(t=e.input.charCodeAt(e.position))!==0;)if(t===39)if(oe(e,i,e.position,!0),t=e.input.charCodeAt(++e.position),t===39)i=e.position,e.position++,n=e.position;else return!0;else X(t)?(oe(e,i,n,!0),mt(e,R(e,!1,r)),i=n=e.position):e.position===e.lineStart&&Fr(e)?S(e,"unexpected end of the document within a single quoted scalar"):(e.position++,n=e.position);S(e,"unexpected end of the stream within a single quoted scalar")}function Ks(e,r){var t,i,n,o,a,s;if(s=e.input.charCodeAt(e.position),s!==34)return!1;for(e.kind="scalar",e.result="",e.position++,t=i=e.position;(s=e.input.charCodeAt(e.position))!==0;){if(s===34)return oe(e,t,e.position,!0),e.position++,!0;if(s===92){if(oe(e,t,e.position,!0),s=e.input.charCodeAt(++e.position),X(s))R(e,!1,r);else if(s<256&&oi[s])e.result+=ai[s],e.position++;else if((a=Vs(s))>0){for(n=a,o=0;n>0;n--)s=e.input.charCodeAt(++e.position),(a=Hs(s))>=0?o=(o<<4)+a:S(e,"expected hexadecimal character");e.result+=qs(o),e.position++}else S(e,"unknown escape sequence");t=i=e.position}else X(s)?(oe(e,t,i,!0),mt(e,R(e,!1,r)),t=i=e.position):e.position===e.lineStart&&Fr(e)?S(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}S(e,"unexpected end of the stream within a double quoted scalar")}function Js(e,r){var t=!0,i,n=e.tag,o,a=e.anchor,s,l,u,f,c,d={},h,p,g,v;if(v=e.input.charCodeAt(e.position),v===91)l=93,c=!1,o=[];else if(v===123)l=125,c=!0,o={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),v=e.input.charCodeAt(++e.position);v!==0;){if(R(e,!0,r),v=e.input.charCodeAt(e.position),v===l)return e.position++,e.tag=n,e.anchor=a,e.kind=c?"mapping":"sequence",e.result=o,!0;t||S(e,"missed comma between flow collection entries"),p=h=g=null,u=f=!1,v===63&&(s=e.input.charCodeAt(e.position+1),D(s)&&(u=f=!0,e.position++,R(e,!0,r))),i=e.line,Oe(e,r,_r,!1,!0),p=e.tag,h=e.result,R(e,!0,r),v=e.input.charCodeAt(e.position),(f||e.line===i)&&v===58&&(u=!0,v=e.input.charCodeAt(++e.position),R(e,!0,r),Oe(e,r,_r,!1,!0),g=e.result),c?Ae(e,o,d,p,h,g):u?o.push(Ae(e,null,d,p,h,g)):o.push(h),R(e,!0,r),v=e.input.charCodeAt(e.position),v===44?(t=!0,v=e.input.charCodeAt(++e.position)):t=!1}S(e,"unexpected end of the stream within a flow collection")}function Xs(e,r){var t,i,n=jr,o=!1,a=!1,s=r,l=0,u=!1,f,c;if(c=e.input.charCodeAt(e.position),c===124)i=!1;else if(c===62)i=!0;else return!1;for(e.kind="scalar",e.result="";c!==0;)if(c=e.input.charCodeAt(++e.position),c===43||c===45)jr===n?n=c===43?Kt:Ls:S(e,"repeat of a chomping mode identifier");else if((f=Ys(c))>=0)f===0?S(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?S(e,"repeat of an indentation width identifier"):(s=r+f-1,a=!0);else break;if(de(c)){do c=e.input.charCodeAt(++e.position);while(de(c));if(c===35)do c=e.input.charCodeAt(++e.position);while(!X(c)&&c!==0)}for(;c!==0;){for(pt(e),e.lineIndent=0,c=e.input.charCodeAt(e.position);(!a||e.lineIndent<s)&&c===32;)e.lineIndent++,c=e.input.charCodeAt(++e.position);if(!a&&e.lineIndent>s&&(s=e.lineIndent),X(c)){l++;continue}if(e.lineIndent<s){n===Kt?e.result+=J.repeat(`
`,o?1+l:l):n===jr&&o&&(e.result+=`
`);break}for(i?de(c)?(u=!0,e.result+=J.repeat(`
`,o?1+l:l)):u?(u=!1,e.result+=J.repeat(`
`,l+1)):l===0?o&&(e.result+=" "):e.result+=J.repeat(`
`,l):e.result+=J.repeat(`
`,o?1+l:l),o=!0,a=!0,l=0,t=e.position;!X(c)&&c!==0;)c=e.input.charCodeAt(++e.position);oe(e,t,e.position,!1)}return!0}function en(e,r){var t,i=e.tag,n=e.anchor,o=[],a,s=!1,l;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),l=e.input.charCodeAt(e.position);l!==0&&!(l!==45||(a=e.input.charCodeAt(e.position+1),!D(a)));){if(s=!0,e.position++,R(e,!0,-1)&&e.lineIndent<=r){o.push(null),l=e.input.charCodeAt(e.position);continue}if(t=e.line,Oe(e,r,ti,!1,!0),o.push(e.result),R(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===t||e.lineIndent>r)&&l!==0)S(e,"bad indentation of a sequence entry");else if(e.lineIndent<r)break}return s?(e.tag=i,e.anchor=n,e.kind="sequence",e.result=o,!0):!1}function Qs(e,r,t){var i,n,o,a,s=e.tag,l=e.anchor,u={},f={},c=null,d=null,h=null,p=!1,g=!1,v;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),v=e.input.charCodeAt(e.position);v!==0;){if(i=e.input.charCodeAt(e.position+1),o=e.line,a=e.position,(v===63||v===58)&&D(i))v===63?(p&&(Ae(e,u,f,c,d,null),c=d=h=null),g=!0,p=!0,n=!0):p?(p=!1,n=!0):S(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,v=i;else if(Oe(e,t,ri,!1,!0))if(e.line===o){for(v=e.input.charCodeAt(e.position);de(v);)v=e.input.charCodeAt(++e.position);if(v===58)v=e.input.charCodeAt(++e.position),D(v)||S(e,"a whitespace character is expected after the key-value separator within a block mapping"),p&&(Ae(e,u,f,c,d,null),c=d=h=null),g=!0,p=!1,n=!1,c=e.tag,d=e.result;else if(g)S(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=s,e.anchor=l,!0}else if(g)S(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=s,e.anchor=l,!0;else break;if((e.line===o||e.lineIndent>r)&&(Oe(e,r,wr,!0,n)&&(p?d=e.result:h=e.result),p||(Ae(e,u,f,c,d,h,o,a),c=d=h=null),R(e,!0,-1),v=e.input.charCodeAt(e.position)),e.lineIndent>r&&v!==0)S(e,"bad indentation of a mapping entry");else if(e.lineIndent<r)break}return p&&Ae(e,u,f,c,d,null),g&&(e.tag=s,e.anchor=l,e.kind="mapping",e.result=u),g}function Zs(e){var r,t=!1,i=!1,n,o,a;if(a=e.input.charCodeAt(e.position),a!==33)return!1;if(e.tag!==null&&S(e,"duplication of a tag property"),a=e.input.charCodeAt(++e.position),a===60?(t=!0,a=e.input.charCodeAt(++e.position)):a===33?(i=!0,n="!!",a=e.input.charCodeAt(++e.position)):n="!",r=e.position,t){do a=e.input.charCodeAt(++e.position);while(a!==0&&a!==62);e.position<e.length?(o=e.input.slice(r,e.position),a=e.input.charCodeAt(++e.position)):S(e,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!D(a);)a===33&&(i?S(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(r-1,e.position+1),ni.test(n)||S(e,"named tag handle cannot contain such characters"),i=!0,r=e.position+1)),a=e.input.charCodeAt(++e.position);o=e.input.slice(r,e.position),js.test(o)&&S(e,"tag suffix cannot contain flow indicator characters")}return o&&!ii.test(o)&&S(e,"tag name cannot contain such characters: "+o),t?e.tag=o:he.call(e.tagMap,n)?e.tag=e.tagMap[n]+o:n==="!"?e.tag="!"+o:n==="!!"?e.tag="tag:yaml.org,2002:"+o:S(e,'undeclared tag handle "'+n+'"'),!0}function el(e){var r,t;if(t=e.input.charCodeAt(e.position),t!==38)return!1;for(e.anchor!==null&&S(e,"duplication of an anchor property"),t=e.input.charCodeAt(++e.position),r=e.position;t!==0&&!D(t)&&!xe(t);)t=e.input.charCodeAt(++e.position);return e.position===r&&S(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(r,e.position),!0}function rl(e){var r,t,i;if(i=e.input.charCodeAt(e.position),i!==42)return!1;for(i=e.input.charCodeAt(++e.position),r=e.position;i!==0&&!D(i)&&!xe(i);)i=e.input.charCodeAt(++e.position);return e.position===r&&S(e,"name of an alias node must contain at least one character"),t=e.input.slice(r,e.position),e.anchorMap.hasOwnProperty(t)||S(e,'unidentified alias "'+t+'"'),e.result=e.anchorMap[t],R(e,!0,-1),!0}function Oe(e,r,t,i,n){var o,a,s,l=1,u=!1,f=!1,c,d,h,p,g;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=s=wr===t||ti===t,i&&R(e,!0,-1)&&(u=!0,e.lineIndent>r?l=1:e.lineIndent===r?l=0:e.lineIndent<r&&(l=-1)),l===1)for(;Zs(e)||el(e);)R(e,!0,-1)?(u=!0,s=o,e.lineIndent>r?l=1:e.lineIndent===r?l=0:e.lineIndent<r&&(l=-1)):s=!1;if(s&&(s=u||n),(l===1||wr===t)&&(_r===t||ri===t?p=r:p=r+1,g=e.position-e.lineStart,l===1?s&&(en(e,g)||Qs(e,g,p))||Js(e,p)?f=!0:(a&&Xs(e,p)||Gs(e,p)||Ks(e,p)?f=!0:rl(e)?(f=!0,(e.tag!==null||e.anchor!==null)&&S(e,"alias node should not have any properties")):zs(e,p,_r===t)&&(f=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(f=s&&en(e,g))),e.tag!==null&&e.tag!=="!")if(e.tag==="?"){for(c=0,d=e.implicitTypes.length;c<d;c+=1)if(h=e.implicitTypes[c],h.resolve(e.result)){e.result=h.construct(e.result),e.tag=h.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else he.call(e.typeMap[e.kind||"fallback"],e.tag)?(h=e.typeMap[e.kind||"fallback"][e.tag],e.result!==null&&h.kind!==e.kind&&S(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+h.kind+'", not "'+e.kind+'"'),h.resolve(e.result)?(e.result=h.construct(e.result),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):S(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):S(e,"unknown tag !<"+e.tag+">");return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||f}function tl(e){var r=e.position,t,i,n,o=!1,a;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};(a=e.input.charCodeAt(e.position))!==0&&(R(e,!0,-1),a=e.input.charCodeAt(e.position),!(e.lineIndent>0||a!==37));){for(o=!0,a=e.input.charCodeAt(++e.position),t=e.position;a!==0&&!D(a);)a=e.input.charCodeAt(++e.position);for(i=e.input.slice(t,e.position),n=[],i.length<1&&S(e,"directive name must not be less than one character in length");a!==0;){for(;de(a);)a=e.input.charCodeAt(++e.position);if(a===35){do a=e.input.charCodeAt(++e.position);while(a!==0&&!X(a));break}if(X(a))break;for(t=e.position;a!==0&&!D(a);)a=e.input.charCodeAt(++e.position);n.push(e.input.slice(t,e.position))}a!==0&&pt(e),he.call(Qt,i)?Qt[i](e,i,n):xr(e,'unknown document directive "'+i+'"')}if(R(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,R(e,!0,-1)):o&&S(e,"directives end mark is expected"),Oe(e,e.lineIndent-1,wr,!1,!0),R(e,!0,-1),e.checkLineBreaks&&Bs.test(e.input.slice(r,e.position))&&xr(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Fr(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,R(e,!0,-1));return}if(e.position<e.length-1)S(e,"end of the stream or a document separator is expected");else return}function li(e,r){e=String(e),r=r||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var t=new Ws(e,r);for(t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)tl(t);return t.documents}function et(e,r,t){var i=li(e,t),n,o;if(typeof r!="function")return i;for(n=0,o=i.length;n<o;n+=1)r(i[n])}function ui(e,r){var t=li(e,r);if(t.length!==0){if(t.length===1)return t[0];throw new ei("expected a single document in the stream, but found more")}}function nl(e,r,t){if(typeof r=="function")et(e,r,J.extend({schema:Zr},t));else return et(e,J.extend({schema:Zr},t))}function il(e,r){return ui(e,J.extend({schema:Zr},r))}We.loadAll=et;We.load=ui;We.safeLoadAll=nl;We.safeLoad=il;var vt={},Ke=j,Je=ze,ol=Tr,al=Ge,ci=Object.prototype.toString,fi=Object.prototype.hasOwnProperty,sl=9,Ar=10,ll=32,ul=33,cl=34,di=35,fl=37,dl=38,hl=39,pl=42,hi=44,ml=45,pi=58,vl=62,gl=63,yl=64,mi=91,vi=93,Sl=96,gi=123,bl=124,yi=125,$={};$[0]="\\0";$[7]="\\a";$[8]="\\b";$[9]="\\t";$[10]="\\n";$[11]="\\v";$[12]="\\f";$[13]="\\r";$[27]="\\e";$[34]='\\"';$[92]="\\\\";$[133]="\\N";$[160]="\\_";$[8232]="\\L";$[8233]="\\P";var El=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function _l(e,r){var t,i,n,o,a,s,l;if(r===null)return{};for(t={},i=Object.keys(r),n=0,o=i.length;n<o;n+=1)a=i[n],s=String(r[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),l=e.compiledTypeMap.fallback[a],l&&fi.call(l.styleAliases,s)&&(s=l.styleAliases[s]),t[a]=s;return t}function rn(e){var r,t,i;if(r=e.toString(16).toUpperCase(),e<=255)t="x",i=2;else if(e<=65535)t="u",i=4;else if(e<=4294967295)t="U",i=8;else throw new Je("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+Ke.repeat("0",i-r.length)+r}function wl(e){this.schema=e.schema||ol,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Ke.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=_l(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function tn(e,r){for(var t=Ke.repeat(" ",r),i=0,n=-1,o="",a,s=e.length;i<s;)n=e.indexOf(`
`,i),n===-1?(a=e.slice(i),i=s):(a=e.slice(i,n+1),i=n+1),a.length&&a!==`
`&&(o+=t),o+=a;return o}function rt(e,r){return`
`+Ke.repeat(" ",e.indent*r)}function xl(e,r){var t,i,n;for(t=0,i=e.implicitTypes.length;t<i;t+=1)if(n=e.implicitTypes[t],n.resolve(r))return!0;return!1}function Si(e){return e===ll||e===sl}function Le(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==65279||65536<=e&&e<=1114111}function nn(e){return Le(e)&&e!==65279&&e!==hi&&e!==mi&&e!==vi&&e!==gi&&e!==yi&&e!==pi&&e!==di}function Al(e){return Le(e)&&e!==65279&&!Si(e)&&e!==ml&&e!==gl&&e!==pi&&e!==hi&&e!==mi&&e!==vi&&e!==gi&&e!==yi&&e!==di&&e!==dl&&e!==pl&&e!==ul&&e!==bl&&e!==vl&&e!==hl&&e!==cl&&e!==fl&&e!==yl&&e!==Sl}function bi(e){var r=/^\n* /;return r.test(e)}var Ei=1,_i=2,wi=3,xi=4,cr=5;function Ol(e,r,t,i,n){var o,a,s=!1,l=!1,u=i!==-1,f=-1,c=Al(e.charCodeAt(0))&&!Si(e.charCodeAt(e.length-1));if(r)for(o=0;o<e.length;o++){if(a=e.charCodeAt(o),!Le(a))return cr;c=c&&nn(a)}else{for(o=0;o<e.length;o++){if(a=e.charCodeAt(o),a===Ar)s=!0,u&&(l=l||o-f-1>i&&e[f+1]!==" ",f=o);else if(!Le(a))return cr;c=c&&nn(a)}l=l||u&&o-f-1>i&&e[f+1]!==" "}return!s&&!l?c&&!n(e)?Ei:_i:t>9&&bi(e)?cr:l?xi:wi}function Rl(e,r,t,i){e.dump=function(){if(r.length===0)return"''";if(!e.noCompatMode&&El.indexOf(r)!==-1)return"'"+r+"'";var n=e.indent*Math.max(1,t),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-n),a=i||e.flowLevel>-1&&t>=e.flowLevel;function s(l){return xl(e,l)}switch(Ol(r,a,e.indent,o,s)){case Ei:return r;case _i:return"'"+r.replace(/'/g,"''")+"'";case wi:return"|"+on(r,e.indent)+an(tn(r,n));case xi:return">"+on(r,e.indent)+an(tn(Cl(r,o),n));case cr:return'"'+Tl(r)+'"';default:throw new Je("impossible error: invalid scalar style")}}()}function on(e,r){var t=bi(e)?String(r):"",i=e[e.length-1]===`
`,n=i&&(e[e.length-2]===`
`||e===`
`),o=n?"+":i?"":"-";return t+o+`
`}function an(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Cl(e,r){for(var t=/(\n+)([^\n]*)/g,i=function(){var u=e.indexOf(`
`);return u=u!==-1?u:e.length,t.lastIndex=u,sn(e.slice(0,u),r)}(),n=e[0]===`
`||e[0]===" ",o,a;a=t.exec(e);){var s=a[1],l=a[2];o=l[0]===" ",i+=s+(!n&&!o&&l!==""?`
`:"")+sn(l,r),n=o}return i}function sn(e,r){if(e===""||e[0]===" ")return e;for(var t=/ [^ ]/g,i,n=0,o,a=0,s=0,l="";i=t.exec(e);)s=i.index,s-n>r&&(o=a>n?a:s,l+=`
`+e.slice(n,o),n=o+1),a=s;return l+=`
`,e.length-n>r&&a>n?l+=e.slice(n,a)+`
`+e.slice(a+1):l+=e.slice(n),l.slice(1)}function Tl(e){for(var r="",t,i,n,o=0;o<e.length;o++){if(t=e.charCodeAt(o),t>=55296&&t<=56319&&(i=e.charCodeAt(o+1),i>=56320&&i<=57343)){r+=rn((t-55296)*1024+i-56320+65536),o++;continue}n=$[t],r+=!n&&Le(t)?e[o]:n||rn(t)}return r}function Fl(e,r,t){var i="",n=e.tag,o,a;for(o=0,a=t.length;o<a;o+=1)pe(e,r,t[o],!1,!1)&&(o!==0&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=n,e.dump="["+i+"]"}function Pl(e,r,t,i){var n="",o=e.tag,a,s;for(a=0,s=t.length;a<s;a+=1)pe(e,r+1,t[a],!0,!0)&&((!i||a!==0)&&(n+=rt(e,r)),e.dump&&Ar===e.dump.charCodeAt(0)?n+="-":n+="- ",n+=e.dump);e.tag=o,e.dump=n||"[]"}function Nl(e,r,t){var i="",n=e.tag,o=Object.keys(t),a,s,l,u,f;for(a=0,s=o.length;a<s;a+=1)f=e.condenseFlow?'"':"",a!==0&&(f+=", "),l=o[a],u=t[l],pe(e,r,l,!1,!1)&&(e.dump.length>1024&&(f+="? "),f+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),pe(e,r,u,!1,!1)&&(f+=e.dump,i+=f));e.tag=n,e.dump="{"+i+"}"}function kl(e,r,t,i){var n="",o=e.tag,a=Object.keys(t),s,l,u,f,c,d;if(e.sortKeys===!0)a.sort();else if(typeof e.sortKeys=="function")a.sort(e.sortKeys);else if(e.sortKeys)throw new Je("sortKeys must be a boolean or a function");for(s=0,l=a.length;s<l;s+=1)d="",(!i||s!==0)&&(d+=rt(e,r)),u=a[s],f=t[u],pe(e,r+1,u,!0,!0,!0)&&(c=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,c&&(e.dump&&Ar===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,c&&(d+=rt(e,r)),pe(e,r+1,f,!0,c)&&(e.dump&&Ar===e.dump.charCodeAt(0)?d+=":":d+=": ",d+=e.dump,n+=d));e.tag=o,e.dump=n||"{}"}function ln(e,r,t){var i,n,o,a,s,l;for(n=t?e.explicitTypes:e.implicitTypes,o=0,a=n.length;o<a;o+=1)if(s=n[o],(s.instanceOf||s.predicate)&&(!s.instanceOf||typeof r=="object"&&r instanceof s.instanceOf)&&(!s.predicate||s.predicate(r))){if(e.tag=t?s.tag:"?",s.represent){if(l=e.styleMap[s.tag]||s.defaultStyle,ci.call(s.represent)==="[object Function]")i=s.represent(r,l);else if(fi.call(s.represent,l))i=s.represent[l](r,l);else throw new Je("!<"+s.tag+'> tag resolver accepts not "'+l+'" style');e.dump=i}return!0}return!1}function pe(e,r,t,i,n,o){e.tag=null,e.dump=t,ln(e,t,!1)||ln(e,t,!0);var a=ci.call(e.dump);i&&(i=e.flowLevel<0||e.flowLevel>r);var s=a==="[object Object]"||a==="[object Array]",l,u;if(s&&(l=e.duplicates.indexOf(t),u=l!==-1),(e.tag!==null&&e.tag!=="?"||u||e.indent!==2&&r>0)&&(n=!1),u&&e.usedDuplicates[l])e.dump="*ref_"+l;else{if(s&&u&&!e.usedDuplicates[l]&&(e.usedDuplicates[l]=!0),a==="[object Object]")i&&Object.keys(e.dump).length!==0?(kl(e,r,e.dump,n),u&&(e.dump="&ref_"+l+e.dump)):(Nl(e,r,e.dump),u&&(e.dump="&ref_"+l+" "+e.dump));else if(a==="[object Array]"){var f=e.noArrayIndent&&r>0?r-1:r;i&&e.dump.length!==0?(Pl(e,f,e.dump,n),u&&(e.dump="&ref_"+l+e.dump)):(Fl(e,f,e.dump),u&&(e.dump="&ref_"+l+" "+e.dump))}else if(a==="[object String]")e.tag!=="?"&&Rl(e,e.dump,r,o);else{if(e.skipInvalid)return!1;throw new Je("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function $l(e,r){var t=[],i=[],n,o;for(tt(e,t,i),n=0,o=i.length;n<o;n+=1)r.duplicates.push(t[i[n]]);r.usedDuplicates=new Array(o)}function tt(e,r,t){var i,n,o;if(e!==null&&typeof e=="object")if(n=r.indexOf(e),n!==-1)t.indexOf(n)===-1&&t.push(n);else if(r.push(e),Array.isArray(e))for(n=0,o=e.length;n<o;n+=1)tt(e[n],r,t);else for(i=Object.keys(e),n=0,o=i.length;n<o;n+=1)tt(e[i[n]],r,t)}function Ai(e,r){r=r||{};var t=new wl(r);return t.noRefs||$l(e,t),pe(t,0,e,!0,!0)?t.dump+`
`:""}function Il(e,r){return Ai(e,Ke.extend({schema:al},r))}vt.dump=Ai;vt.safeDump=Il;var Pr=We,Oi=vt;function Nr(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}O.Type=N;O.Schema=Re;O.FAILSAFE_SCHEMA=dt;O.JSON_SCHEMA=Jn;O.CORE_SCHEMA=Xn;O.DEFAULT_SAFE_SCHEMA=Ge;O.DEFAULT_FULL_SCHEMA=Tr;O.load=Pr.load;O.loadAll=Pr.loadAll;O.safeLoad=Pr.safeLoad;O.safeLoadAll=Pr.safeLoadAll;O.dump=Oi.dump;O.safeDump=Oi.safeDump;O.YAMLException=ze;O.MINIMAL_SCHEMA=dt;O.SAFE_SCHEMA=Ge;O.DEFAULT_SCHEMA=Tr;O.scan=Nr("scan");O.parse=Nr("parse");O.compose=Nr("compose");O.addConstructor=Nr("addConstructor");var Dl=O,Ml=Dl;const{ParserError:Ll}=C,Ul=Ml;var Bl={order:200,allowEmpty:!0,canParse:[".yaml",".yml",".json"],async parse(e){let r=e.data;if(Buffer.isBuffer(r)&&(r=r.toString()),typeof r=="string")try{return Ul.load(r)}catch(t){throw new Ll(t.message,e.url)}else return r}};const{ParserError:jl}=C;let Hl=/\.(txt|htm|html|md|xml|js|min|map|css|scss|less|svg)$/i;var Vl={order:300,allowEmpty:!0,encoding:"utf8",canParse(e){return(typeof e.data=="string"||Buffer.isBuffer(e.data))&&Hl.test(e.url)},parse(e){if(typeof e.data=="string")return e.data;if(Buffer.isBuffer(e.data))return e.data.toString(this.encoding);throw new jl("data is not text",e.url)}};let Yl=/\.(jpeg|jpg|gif|png|bmp|ico)$/i;var ql={order:400,allowEmpty:!0,canParse(e){return Buffer.isBuffer(e.data)&&Yl.test(e.url)},parse(e){return Buffer.isBuffer(e.data)?e.data:Buffer.from(e.data)}};const Wl=Hi,{ono:Hr}=me,un=L.exports,{ResolverError:Vr}=C;var zl={order:100,canRead(e){return un.isFileSystemPath(e.url)},read(e){return new Promise((r,t)=>{let i;try{i=un.toFileSystemPath(e.url)}catch(n){t(new Vr(Hr.uri(n,`Malformed URI: ${e.url}`),e.url))}try{Wl.readFile(i,(n,o)=>{n?t(new Vr(Hr(n,`Error opening file "${i}"`),i)):r(o)})}catch(n){t(new Vr(Hr(n,`Error opening file "${i}"`),i))}})}};const Gl=kn,Kl=kn,{ono:rr}=me,Ie=L.exports,{ResolverError:cn}=C;var Jl={order:200,headers:null,timeout:5e3,redirects:5,withCredentials:!1,canRead(e){return Ie.isHttp(e.url)},read(e){let r=Ie.parse(e.url);return process.browser&&!r.protocol&&(r.protocol=Ie.parse(location.href).protocol),Ri(r,this)}};function Ri(e,r,t){return new Promise((i,n)=>{e=Ie.parse(e),t=t||[],t.push(e.href),Xl(e,r).then(o=>{if(o.statusCode>=400)throw rr({status:o.statusCode},`HTTP ERROR ${o.statusCode}`);if(o.statusCode>=300)if(t.length>r.redirects)n(new cn(rr({status:o.statusCode},`Error downloading ${t[0]}. 
Too many redirects: 
  ${t.join(` 
  `)}`)));else if(o.headers.location){let a=Ie.resolve(e,o.headers.location);Ri(a,r,t).then(i,n)}else throw rr({status:o.statusCode},`HTTP ${o.statusCode} redirect with no location header`);else i(o.body||Buffer.alloc(0))}).catch(o=>{n(new cn(rr(o,`Error downloading ${e.href}`),e.href))})})}function Xl(e,r){return new Promise((t,i)=>{let o=(e.protocol==="https:"?Kl:Gl).get({hostname:e.hostname,port:e.port,path:e.path,auth:e.auth,protocol:e.protocol,headers:r.headers||{},withCredentials:r.withCredentials});typeof o.setTimeout=="function"&&o.setTimeout(r.timeout),o.on("timeout",()=>{o.abort()}),o.on("error",i),o.once("response",a=>{a.body=Buffer.alloc(0),a.on("data",s=>{a.body=Buffer.concat([a.body,Buffer.from(s)])}),a.on("error",i),a.on("end",()=>{t(a)})})})}const Ql=Yo,Zl=Bl,eu=Vl,ru=ql,tu=zl,nu=Jl;var iu=gt;function gt(e){nt(this,gt.defaults),nt(this,e)}gt.defaults={parse:{json:Ql,yaml:Zl,text:eu,binary:ru},resolve:{file:tu,http:nu,external:!0},continueOnError:!1,dereference:{circular:!0}};function nt(e,r){if(fn(r)){let t=Object.keys(r);for(let i=0;i<t.length;i++){let n=t[i],o=r[n],a=e[n];fn(o)?e[n]=nt(a||{},o):o!==void 0&&(e[n]=o)}}return e}function fn(e){return e&&typeof e=="object"&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}const dn=iu;var ou=au;function au(e){let r,t,i,n;return e=Array.prototype.slice.call(e),typeof e[e.length-1]=="function"&&(n=e.pop()),typeof e[0]=="string"?(r=e[0],typeof e[2]=="object"?(t=e[1],i=e[2]):(t=void 0,i=e[1])):(r="",t=e[0],i=e[1]),i instanceof dn||(i=new dn(i)),{path:r,schema:t,options:i,callback:n}}const hn=Ye(),su=Cr(),lu=zn,ke=L.exports,{isHandledError:uu}=C;var cu=fu;function fu(e,r){if(!r.resolve.external)return Promise.resolve();try{let t=yt(e.schema,e.$refs._root$Ref.path+"#",e.$refs,r);return Promise.all(t)}catch(t){return Promise.reject(t)}}function yt(e,r,t,i,n){n=n||new Set;let o=[];if(e&&typeof e=="object"&&!ArrayBuffer.isView(e)&&!n.has(e))if(n.add(e),hn.isExternal$Ref(e))o.push(pn(e,r,t,i));else for(let a of Object.keys(e)){let s=su.join(r,a),l=e[a];hn.isExternal$Ref(l)?o.push(pn(l,s,t,i)):o=o.concat(yt(l,s,t,i,n))}return o}async function pn(e,r,t,i){let n=ke.resolve(r,e.$ref),o=ke.stripHash(n);if(e=t._$refs[o],e)return Promise.resolve(e.value);try{const a=await lu(n,t,i);let s=yt(a,o+"#",t,i);return Promise.all(s)}catch(a){if(!i.continueOnError||!uu(a))throw a;return t._$refs[o]&&(a.source=ke.stripHash(r),a.path=ke.safePointerToPath(ke.getHash(r))),[]}}const Or=Ye(),Ue=Cr(),Yr=L.exports;var du=hu;function hu(e,r){let t=[];St(e,"schema",e.$refs._root$Ref.path+"#","#",0,t,e.$refs,r),pu(t)}function St(e,r,t,i,n,o,a,s){let l=r===null?e:e[r];if(l&&typeof l=="object"&&!ArrayBuffer.isView(l))if(Or.isAllowed$Ref(l))mn(e,r,t,i,n,o,a,s);else{let u=Object.keys(l).sort((f,c)=>f==="definitions"?-1:c==="definitions"?1:f.length-c.length);for(let f of u){let c=Ue.join(t,f),d=Ue.join(i,f),h=l[f];Or.isAllowed$Ref(h)?mn(l,f,t,d,n,o,a,s):St(l,f,c,d,n,o,a,s)}}}function mn(e,r,t,i,n,o,a,s){let l=r===null?e:e[r],u=Yr.resolve(t,l.$ref),f=a._resolve(u,i,s);if(f===null)return;let c=Ue.parse(i).length,d=Yr.stripHash(f.path),h=Yr.getHash(f.path),p=d!==a._root$Ref.path,g=Or.isExtended$Ref(l);n+=f.indirections;let v=mu(o,e,r);if(v)if(c<v.depth||n<v.indirections)vu(o,v);else return;o.push({$ref:l,parent:e,key:r,pathFromRoot:i,depth:c,file:d,hash:h,value:f.value,circular:f.circular,extended:g,external:p,indirections:n}),v||St(f.value,null,f.path,i,n+1,o,a,s)}function pu(e){e.sort((n,o)=>{if(n.file!==o.file)return n.file<o.file?-1:1;if(n.hash!==o.hash)return n.hash<o.hash?-1:1;if(n.circular!==o.circular)return n.circular?-1:1;if(n.extended!==o.extended)return n.extended?1:-1;if(n.indirections!==o.indirections)return n.indirections-o.indirections;if(n.depth!==o.depth)return n.depth-o.depth;{let a=n.pathFromRoot.lastIndexOf("/definitions"),s=o.pathFromRoot.lastIndexOf("/definitions");return a!==s?s-a:n.pathFromRoot.length-o.pathFromRoot.length}});let r,t,i;for(let n of e)n.external?n.file===r&&n.hash===t?n.$ref.$ref=i:n.file===r&&n.hash.indexOf(t+"/")===0?n.$ref.$ref=Ue.join(i,Ue.parse(n.hash.replace(t,"#"))):(r=n.file,t=n.hash,i=n.pathFromRoot,n.$ref=n.parent[n.key]=Or.dereference(n.$ref,n.value),n.circular&&(n.$ref.$ref=n.pathFromRoot)):n.$ref.$ref=n.hash}function mu(e,r,t){for(let i=0;i<e.length;i++){let n=e[i];if(n.parent===r&&n.key===t)return n}}function vu(e,r){let t=e.indexOf(r);e.splice(t,1)}const it=Ye(),vn=Cr(),{ono:gu}=me,yu=L.exports;var Su=bu;function bu(e,r){let t=bt(e.schema,e.$refs._root$Ref.path,"#",new Set,new Set,new Map,e.$refs,r);e.$refs.circular=t.circular,e.schema=t.value}function bt(e,r,t,i,n,o,a,s){let l,u={value:e,circular:!1};if((s.dereference.circular==="ignore"||!n.has(e))&&e&&typeof e=="object"&&!ArrayBuffer.isView(e)){if(i.add(e),n.add(e),it.isAllowed$Ref(e,s))l=gn(e,r,t,i,n,o,a,s),u.circular=l.circular,u.value=l.value;else for(const f of Object.keys(e)){let c=vn.join(r,f),d=vn.join(t,f),h=e[f],p=!1;it.isAllowed$Ref(h,s)?(l=gn(h,c,d,i,n,o,a,s),p=l.circular,e[f]!==l.value&&(e[f]=l.value)):i.has(h)?p=Ci(c,a,s):(l=bt(h,c,d,i,n,o,a,s),p=l.circular,e[f]!==l.value&&(e[f]=l.value)),u.circular=u.circular||p}i.delete(e)}return u}function gn(e,r,t,i,n,o,a,s){let l=yu.resolve(r,e.$ref);const u=o.get(l);if(u){const g=Object.keys(e);if(g.length>1){const v={};for(let y of g)y!=="$ref"&&!(y in u.value)&&(v[y]=e[y]);return{circular:u.circular,value:Object.assign({},u.value,v)}}return u}let f=a._resolve(l,r,s);if(f===null)return{circular:!1,value:null};let c=f.circular,d=c||i.has(f.value);d&&Ci(r,a,s);let h=it.dereference(e,f.value);if(!d){let g=bt(h,f.path,t,i,n,o,a,s);d=g.circular,h=g.value}d&&!c&&s.dereference.circular==="ignore"&&(h=e),c&&(h.$ref=t);const p={circular:d,value:h};return Object.keys(e).length===1&&o.set(l,p),p}function Ci(e,r,t){if(r.circular=!0,!t.dereference.circular)throw gu.reference(`Circular $ref pointer found at ${e}`);return!0}var yn=kt.process&&process.nextTick||kt.setImmediate||function(e){setTimeout(e,0)},Eu=function(r,t){if(r){t.then(function(i){yn(function(){r(null,i)})},function(i){yn(function(){r(i)})});return}else return t};const Ti=Io,_u=zn,kr=ou,wu=cu,xu=du,Au=Su,be=L.exports,{JSONParserError:Ou,InvalidPointerError:Ru,MissingPointerError:Cu,ResolverError:Tu,ParserError:Fu,UnmatchedParserError:Pu,UnmatchedResolverError:Nu,isHandledError:ku,JSONParserErrorGroup:Sn}=C,Y=Eu,{ono:bn}=me;Q.exports=ee;Q.exports.default=ee;Q.exports.JSONParserError=Ou;Q.exports.InvalidPointerError=Ru;Q.exports.MissingPointerError=Cu;Q.exports.ResolverError=Tu;Q.exports.ParserError=Fu;Q.exports.UnmatchedParserError=Pu;Q.exports.UnmatchedResolverError=Nu;function ee(){this.schema=null,this.$refs=new Ti}ee.parse=function(r,t,i,n){let o=this,a=new o;return a.parse.apply(a,arguments)};ee.prototype.parse=async function(r,t,i,n){let o=kr(arguments),a;if(!o.path&&!o.schema){let u=bn(`Expected a file path, URL, or object. Got ${o.path||o.schema}`);return Y(o.callback,Promise.reject(u))}this.schema=null,this.$refs=new Ti;let s="http";if(be.isFileSystemPath(o.path)&&(o.path=be.fromFileSystemPath(o.path),s="file"),o.path=be.resolve(be.cwd(),o.path),o.schema&&typeof o.schema=="object"){let u=this.$refs._add(o.path);u.value=o.schema,u.pathType=s,a=Promise.resolve(o.schema)}else a=_u(o.path,this.$refs,o.options);let l=this;try{let u=await a;if(u!==null&&typeof u=="object"&&!Buffer.isBuffer(u))return l.schema=u,Y(o.callback,Promise.resolve(l.schema));if(o.options.continueOnError)return l.schema=null,Y(o.callback,Promise.resolve(l.schema));throw bn.syntax(`"${l.$refs._root$Ref.path||u}" is not a valid JSON Schema`)}catch(u){return!o.options.continueOnError||!ku(u)?Y(o.callback,Promise.reject(u)):(this.$refs._$refs[be.stripHash(o.path)]&&this.$refs._$refs[be.stripHash(o.path)].addError(u),Y(o.callback,Promise.resolve(null)))}};ee.resolve=function(r,t,i,n){let o=this,a=new o;return a.resolve.apply(a,arguments)};ee.prototype.resolve=async function(r,t,i,n){let o=this,a=kr(arguments);try{return await this.parse(a.path,a.schema,a.options),await wu(o,a.options),Et(o),Y(a.callback,Promise.resolve(o.$refs))}catch(s){return Y(a.callback,Promise.reject(s))}};ee.bundle=function(r,t,i,n){let o=this,a=new o;return a.bundle.apply(a,arguments)};ee.prototype.bundle=async function(r,t,i,n){let o=this,a=kr(arguments);try{return await this.resolve(a.path,a.schema,a.options),xu(o,a.options),Et(o),Y(a.callback,Promise.resolve(o.schema))}catch(s){return Y(a.callback,Promise.reject(s))}};ee.dereference=function(r,t,i,n){let o=this,a=new o;return a.dereference.apply(a,arguments)};ee.prototype.dereference=async function(r,t,i,n){let o=this,a=kr(arguments);try{return await this.resolve(a.path,a.schema,a.options),Au(o,a.options),Et(o),Y(a.callback,Promise.resolve(o.schema))}catch(s){return Y(a.callback,Promise.reject(s))}};function Et(e){if(Sn.getParserErrors(e).length>0)throw new Sn(e)}var ot={exports:{}},q={},te={},Xe={},De=typeof Symbol=="function"?Symbol("curriable placeholder"):60881;function $u(e,r){function t(i){return function(){var n=i.length,o=arguments,a=o.length,s=[],l=0,u=r,f;if(n)for(var c=-1;++c<n;)s[c]=f=i[c]===De&&l<a?o[l++]:i[c],f!==De&&--u;if(l<a)for(;l<a;)s[s.length]=f=o[l],f!==De&&l<r&&--u,++l;return u>0?t(s):e.apply(this,s)}}return t([])}function ve(e,r){var t=typeof r=="number"?r:e.length,i=$u(e,t);return i.arity=t,i.fn=e,i}ve.__=De;function Iu(e){return e===De}ve.isPlaceholder=Iu;function Du(e){return e.fn}ve.uncurry=Du;var tr,nr,V,Ee,Mu=typeof Buffer<"u"&&typeof Buffer.from=="function",Lu=typeof Uint16Array=="function",Uu=/\[object (HTML(.*)Element)\]/,Bu=/\[object (SVG(.*)Element)\]/,ju=["Arguments","Array","ArrayBuffer","Boolean","DataView","Date","DocumentFragment","Error","Event","Float32Array","Float64Array","Function","Generator","GeneratorFunction","HTMLElement","Int8Array","Int16Array","Int32Array","Map","Null","Number","Object","Promise","RegExp","Set","String","Symbol","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","Undefined","WeakMap","WeakSet","Window"],K=ju.reduce(function(e,r){return e["[object "+r+"]"]=r,e},{}),A=Object.keys(K).reduce(function(e,r){return e[K[r].toUpperCase()]=r,e},{}),Hu={"[object Map]":!0,"[object Set]":!0},Vu={boolean:!0,function:!0,number:!0,string:!0,undefined:!0},Yu=(tr={},tr[A.ARGUMENTS]=!0,tr[A.ARRAY]=!0,tr),qu=(nr={},nr[A.REGEXP]=!0,nr[A.SYMBOL]=!0,nr),Wu=(V={},V[A.FLOAT32ARRAY]=!0,V[A.FLOAT64ARRAY]=!0,V[A.INT8ARRAY]=!0,V[A.INT16ARRAY]=!0,V[A.INT32ARRAY]=!0,V[A.UINT8ARRAY]=!0,V[A.UINT8CLAMPEDARRAY]=!0,V[A.UINT16ARRAY]=!0,V[A.UINT32ARRAY]=!0,V),zu=(Ee={},Ee[A.GENERATOR]=!0,Ee[A.PROMISE]=!0,Ee[A.WEAKMAP]=!0,Ee[A.WEAKSET]=!0,Ee),Gu=/^\s*function\s*([^(]*)/i,Fi=Object.prototype.toString,Ku=Object.keys;function Ju(e){return e.name||(e.toString().match(Gu)||[])[1]||"anonymous"}function Xu(e){for(var r=e.length,t=5381,i=52711,n;r--;)n=e.charCodeAt(r),t=t*33^n,i=i*33^n;return(t>>>0)*4096+(i>>>0)}function Qu(e){return{bubbles:e.bubbles,cancelBubble:e.cancelBubble,cancelable:e.cancelable,composed:e.composed,currentTarget:e.currentTarget,defaultPrevented:e.defaultPrevented,eventPhase:e.eventPhase,isTrusted:e.isTrusted,returnValue:e.returnValue,target:e.target,type:e.type}}function Pi(e,r){return e>r}function Zu(e,r){return e[0]>r[0]}function at(e,r){for(var t,i,n=0;n<e.length;++n){for(i=e[n],t=n-1;~t&&r(e[t],i);--t)e[t+1]=e[t];e[t+1]=i}return e}function ec(e,r,t){var i=typeof e.get=="function",n=[];i?(e.forEach(function(u,f){n.push([fr(f,r,t),fr(u,r,t)])}),at(n,Zu)):(e.forEach(function(u){n.push(fr(u,r,t))}),at(n,Pi));for(var o=Ju(e.constructor)+"|[",a=0,s=n.length,l;a<s;++a)l=n[a],o+=(a?",":"")+(i?"["+l[0]+","+l[1]+"]":l);return o+"]"}function rc(e){for(var r=at(Ku(e),Pi),t={},i,n=0;n<r.length;++n)i=r[n],t[i]=e[i];return t}function tc(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function nc(e){return Buffer.from(e).toString("utf8")}function ic(){return""}var En=function(){return Mu?nc:Lu?tc:ic}();function oc(e){for(var r=e.children,t="",i=0;i<r.length;++i)t+=r[i].outerHTML;return t}function _n(e,r){for(var t=0;t<e.length;++t)if(e[t]===r)return t+1;return 0}function Rr(e,r,t,i){if(i===void 0){var n=typeof e;if(n==="string"||Vu[n])return n+"|"+e;if(e===null)return"null|"+e}var o=i||Fi.call(e);return Yu[o]?e:o===A.OBJECT?rc(e):qu[o]?K[o]+"|"+e.toString():Hu[o]?ec(e,r,t):o===A.DATE?K[o]+"|"+e.getTime():o===A.ERROR?K[o]+"|"+e.stack:o===A.EVENT?Qu(e):zu[o]?K[o]+"|NOT_ENUMERABLE":Uu.test(o)||Bu.test(o)?o.slice(8,-1)+"|"+e.outerHTML:o===A.DOCUMENTFRAGMENT?K[o]+"|"+oc(e):Wu[o]?K[o]+"|"+e.join(","):o===A.ARRAYBUFFER?K[o]+"|"+En(e):o===A.DATAVIEW?K[o]+"|"+En(e.buffer):e}function ac(e,r){return e===void 0&&(e=[]),r===void 0&&(r=[]),function(t,i){if(typeof i=="object")if(e.length){var n=_n(e,this);n===0?e.push(this):(e.splice(n),r.splice(n)),r.push(t);var o=_n(e,i);if(o!==0)return"[~"+(r.slice(0,o).join(".")||".")+"]";e.push(i)}else e[0]=i,r[0]=t;return t&&this[t]instanceof Date?Rr(this[t],e,r,A.DATE):Rr(i,e,r)}}function fr(e,r,t){if(!e||typeof e!="object")return Rr(e,r,t);var i=Fi.call(e);return i===A.DATE||i===A.REGEXP?Rr(e,r,t,i):JSON.stringify(e,ac(r,t))}function B(e){return Xu(fr(e))}B.is=ve(function(e,r){return B(e)===B(r)});B.is.all=ve(function(e){for(var r=B.is(e),t=1;t<arguments.length;++t)if(!r(arguments[t]))return!1;return!0},2);B.is.any=ve(function(e){for(var r=B.is(e),t=1;t<arguments.length;t++)if(r(arguments[t]))return!0;return!1},2);B.is.not=ve(function(e,r){return B(e)!==B(r)});const sc=Object.freeze(Object.defineProperty({__proto__:null,hash:B,default:B},Symbol.toStringTag,{value:"Module"})),lc=ut(sc);Object.defineProperty(Xe,"__esModule",{value:!0});var uc=function(){function e(r,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),r}}(),cc=lc,fc=dc(cc);function dc(e){return e&&e.__esModule?e:{default:e}}function hc(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var _t=function(){function e(r,t,i){hc(this,e),this.id=r;var n={cache:!0};if(typeof i>"u"&&(i=n),typeof t!="function"?(this.value=t,this.type=this.constructor.CONSTANT):(this.calculationMethod=t,this.type=this.constructor.DYNAMIC),!this.id)throw new Error("factId required");if(typeof this.value>"u"&&typeof this.calculationMethod>"u")throw new Error("facts must have a value or method");return this.priority=parseInt(i.priority||1,10),this.options=Object.assign({},n,i),this.cacheKeyMethod=this.defaultCacheKeys,this}return uc(e,[{key:"isConstant",value:function(){return this.type===this.constructor.CONSTANT}},{key:"isDynamic",value:function(){return this.type===this.constructor.DYNAMIC}},{key:"calculate",value:function(t,i){return this.hasOwnProperty("value")?this.value:this.calculationMethod(t,i)}},{key:"defaultCacheKeys",value:function(t,i){return{params:i,id:t}}},{key:"getCacheKey",value:function(t){if(this.options.cache===!0){var i=this.cacheKeyMethod(this.id,t),n=e.hashFromObject(i);return n}}}],[{key:"hashFromObject",value:function(t){return(0,fc.default)(t)}}]),e}();_t.CONSTANT="CONSTANT";_t.DYNAMIC="DYNAMIC";Xe.default=_t;var $r={},wt={},Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.default=pc;function pc(e){(typeof process<"u"&&process.env&&process.env.DEBUG&&process.env.DEBUG.match(/json-rules-engine/)||typeof window<"u"&&window.localStorage&&window.localStorage.debug&&window.localStorage.debug.match(/json-rules-engine/))&&console.log(e)}function mc(e){return!!e&&typeof e=="object"}var Ni=mc;Object.defineProperty(wt,"__esModule",{value:!0});var vc=function(){function e(r,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),r}}(),gc=Ce,yc=ki(gc),Sc=Ni,bc=ki(Sc);function ki(e){return e&&e.__esModule?e:{default:e}}function Ec(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var _c=function(){function e(r){if(Ec(this,e),!r)throw new Error("Condition: constructor options required");var t=e.booleanOperator(r);if(Object.assign(this,r),t){var i=r[t];if(!Array.isArray(i))throw new Error('"'+t+'" must be an array');this.operator=t,this.priority=parseInt(r.priority,10)||1,this[t]=i.map(function(n){return new e(n)})}else{if(!r.hasOwnProperty("fact"))throw new Error('Condition: constructor "fact" property required');if(!r.hasOwnProperty("operator"))throw new Error('Condition: constructor "operator" property required');if(!r.hasOwnProperty("value"))throw new Error('Condition: constructor "value" property required');r.hasOwnProperty("priority")&&(r.priority=parseInt(r.priority,10))}}return vc(e,[{key:"toJSON",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i={};this.priority&&(i.priority=this.priority);var n=e.booleanOperator(this);return n?i[n]=this[n].map(function(o){return o.toJSON(t)}):(i.operator=this.operator,i.value=this.value,i.fact=this.fact,this.factResult!==void 0&&(i.factResult=this.factResult),this.result!==void 0&&(i.result=this.result),this.params&&(i.params=this.params),this.path&&(i.path=this.path)),t?JSON.stringify(i):i}},{key:"_getValue",value:function(t){var i=this.value;return(0,bc.default)(i)&&i.hasOwnProperty("fact")?t.factValue(i.fact,i.params,i.path):Promise.resolve(i)}},{key:"evaluate",value:function(t,i){var n=this;if(!t)return Promise.reject(new Error("almanac required"));if(!i)return Promise.reject(new Error("operatorMap required"));if(this.isBooleanOperator())return Promise.reject(new Error("Cannot evaluate() a boolean condition"));var o=i.get(this.operator);return o?this._getValue(t).then(function(a){return t.factValue(n.fact,n.params,n.path).then(function(s){var l=o.evaluate(s,a);return(0,yc.default)("condition::evaluate <"+s+" "+n.operator+" "+a+"?> ("+l+")"),{result:l,leftHandSideValue:s,rightHandSideValue:a,operator:n.operator}})}):Promise.reject(new Error("Unknown operator: "+this.operator))}},{key:"booleanOperator",value:function(){return e.booleanOperator(this)}},{key:"isBooleanOperator",value:function(){return e.booleanOperator(this)!==void 0}}],[{key:"booleanOperator",value:function(t){if(t.hasOwnProperty("any"))return"any";if(t.hasOwnProperty("all"))return"all"}}]),e}();wt.default=_c;var xt={},$i={exports:{}};(function(e){var r=function(){function t(d,h){return h!=null&&d instanceof h}var i;try{i=Map}catch{i=function(){}}var n;try{n=Set}catch{n=function(){}}var o;try{o=Promise}catch{o=function(){}}function a(d,h,p,g,v){typeof h=="object"&&(p=h.depth,g=h.prototype,v=h.includeNonEnumerable,h=h.circular);var y=[],E=[],F=typeof Buffer<"u";typeof h>"u"&&(h=!0),typeof p>"u"&&(p=1/0);function I(b,M){if(b===null)return null;if(M===0)return b;var _,G;if(typeof b!="object")return b;if(t(b,i))_=new i;else if(t(b,n))_=new n;else if(t(b,o))_=new o(function(Fe,Pe){b.then(function(Ne){Fe(I(Ne,M-1))},function(Ne){Pe(I(Ne,M-1))})});else if(a.__isArray(b))_=[];else if(a.__isRegExp(b))_=new RegExp(b.source,c(b)),b.lastIndex&&(_.lastIndex=b.lastIndex);else if(a.__isDate(b))_=new Date(b.getTime());else{if(F&&Buffer.isBuffer(b))return Buffer.allocUnsafe?_=Buffer.allocUnsafe(b.length):_=new Buffer(b.length),b.copy(_),_;t(b,Error)?_=Object.create(b):typeof g>"u"?(G=Object.getPrototypeOf(b),_=Object.create(G)):(_=Object.create(g),G=g)}if(h){var ge=y.indexOf(b);if(ge!=-1)return E[ge];y.push(b),E.push(_)}t(b,i)&&b.forEach(function(Fe,Pe){var Ne=I(Pe,M-1),Bi=I(Fe,M-1);_.set(Ne,Bi)}),t(b,n)&&b.forEach(function(Fe){var Pe=I(Fe,M-1);_.add(Pe)});for(var H in b){var Lr;G&&(Lr=Object.getOwnPropertyDescriptor(G,H)),!(Lr&&Lr.set==null)&&(_[H]=I(b[H],M-1))}if(Object.getOwnPropertySymbols)for(var Pt=Object.getOwnPropertySymbols(b),H=0;H<Pt.length;H++){var Ze=Pt[H],ye=Object.getOwnPropertyDescriptor(b,Ze);ye&&!ye.enumerable&&!v||(_[Ze]=I(b[Ze],M-1),ye.enumerable||Object.defineProperty(_,Ze,{enumerable:!1}))}if(v)for(var Nt=Object.getOwnPropertyNames(b),H=0;H<Nt.length;H++){var er=Nt[H],ye=Object.getOwnPropertyDescriptor(b,er);ye&&ye.enumerable||(_[er]=I(b[er],M-1),Object.defineProperty(_,er,{enumerable:!1}))}return _}return I(d,p)}a.clonePrototype=function(h){if(h===null)return null;var p=function(){};return p.prototype=h,new p};function s(d){return Object.prototype.toString.call(d)}a.__objToStr=s;function l(d){return typeof d=="object"&&s(d)==="[object Date]"}a.__isDate=l;function u(d){return typeof d=="object"&&s(d)==="[object Array]"}a.__isArray=u;function f(d){return typeof d=="object"&&s(d)==="[object RegExp]"}a.__isRegExp=f;function c(d){var h="";return d.global&&(h+="g"),d.ignoreCase&&(h+="i"),d.multiline&&(h+="m"),h}return a.__getRegExpFlags=c,a}();e.exports&&(e.exports=r)})($i);Object.defineProperty(xt,"__esModule",{value:!0});var wc=function(){function e(r,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),r}}(),xc=$i.exports,ir=Ac(xc);function Ac(e){return e&&e.__esModule?e:{default:e}}function Oc(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var Rc=function(){function e(r,t,i,n){Oc(this,e),this.conditions=(0,ir.default)(r),this.event=(0,ir.default)(t),this.priority=(0,ir.default)(i),this.name=(0,ir.default)(n),this.result=null}return wc(e,[{key:"setResult",value:function(t){this.result=t}},{key:"toJSON",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i={conditions:this.conditions.toJSON(!1),event:this.event,priority:this.priority,name:this.name,result:this.result};return t?JSON.stringify(i):i}}]),e}();xt.default=Rc;Object.defineProperty($r,"__esModule",{value:!0});var Cc=function(){function e(r,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),r}}(),Tc=wt,Fc=At(Tc),Pc=xt,Nc=At(Pc),kc=$n.exports,$c=Ce,qr=At($c);function At(e){return e&&e.__esModule?e:{default:e}}function Ic(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Dc(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function Mc(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var Lc=function(e){Mc(r,e);function r(t){Ic(this,r);var i=Dc(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));typeof t=="string"&&(t=JSON.parse(t)),t&&t.conditions&&i.setConditions(t.conditions),t&&t.onSuccess&&i.on("success",t.onSuccess),t&&t.onFailure&&i.on("failure",t.onFailure),t&&(t.name||t.name===0)&&i.setName(t.name);var n=t&&t.priority||1;i.setPriority(n);var o=t&&t.event||{type:"unknown"};return i.setEvent(o),i}return Cc(r,[{key:"setPriority",value:function(i){if(i=parseInt(i,10),i<=0)throw new Error("Priority must be greater than zero");return this.priority=i,this}},{key:"setName",value:function(i){if(!i&&i!==0)throw new Error('Rule "name" must be defined');return this.name=i,this}},{key:"setConditions",value:function(i){if(!i.hasOwnProperty("all")&&!i.hasOwnProperty("any"))throw new Error('"conditions" root must contain a single instance of "all" or "any"');return this.conditions=new Fc.default(i),this}},{key:"setEvent",value:function(i){if(!i)throw new Error("Rule: setEvent() requires event object");if(!i.hasOwnProperty("type"))throw new Error('Rule: setEvent() requires event object with "type" property');return this.event={type:i.type},i.params&&(this.event.params=i.params),this}},{key:"setEngine",value:function(i){return this.engine=i,this}},{key:"toJSON",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n={conditions:this.conditions.toJSON(!1),priority:this.priority,event:this.event,name:this.name};return i?JSON.stringify(n):n}},{key:"prioritizeConditions",value:function(i){var n=this,o=i.reduce(function(a,s){var l=s.priority;if(!l){var u=n.engine.getFact(s.fact);l=u&&u.priority||1}return a[l]||(a[l]=[]),a[l].push(s),a},{});return Object.keys(o).sort(function(a,s){return Number(a)>Number(s)?-1:1}).map(function(a){return o[a]})}},{key:"evaluate",value:function(i){var n=this,o=new Nc.default(this.conditions,this.event,this.priority,this.name),a=function(h){if(h.isBooleanOperator()){var p=h[h.operator],g=void 0;return h.operator==="all"?g=f(p):g=u(p),g.then(function(v){var y=v===!0;return h.result=y,y})}else return h.evaluate(i,n.engine.operators).then(function(v){var y=v.result;return h.factResult=v.leftHandSideValue,h.result=y,y})},s=function(h,p){return Array.isArray(h)||(h=[h]),Promise.all(h.map(function(g){return a(g)})).then(function(g){return(0,qr.default)("rule::evaluateConditions results",g),p.call(g,function(v){return v===!0})})},l=function(h,p){if(h.length===0)return Promise.resolve(!0);var g=Array.prototype.some;p==="all"&&(g=Array.prototype.every);for(var v=n.prioritizeConditions(h),y=Promise.resolve(),E=function(b){var M=v[b],_=!1;y=y.then(function(G){return p==="any"&&G===!0||_?((0,qr.default)("prioritizeAndRun::detected truthy result; skipping remaining conditions"),_=!0,!0):p==="all"&&G===!1||_?((0,qr.default)("prioritizeAndRun::detected falsey result; skipping remaining conditions"),_=!0,!1):s(M,g)})},F=0;F<v.length;F++)E(F);return y},u=function(h){return l(h,"any")},f=function(h){return l(h,"all")},c=function(h){return o.setResult(h),h?n.emit("success",o.event,i,o):n.emit("failure",o.event,i,o),o};return o.conditions.any?u(o.conditions.any).then(function(d){return c(d)}):f(o.conditions.all).then(function(d){return c(d)})}}]),r}(kc.EventEmitter);$r.default=Lc;var Qe={};Object.defineProperty(Qe,"__esModule",{value:!0});var Uc=function(){function e(r,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),r}}();function Bc(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var jc=function(){function e(r,t,i){if(Bc(this,e),this.name=String(r),!r)throw new Error("Missing operator name");if(typeof t!="function")throw new Error("Missing operator callback");this.cb=t,this.factValueValidator=i,this.factValueValidator||(this.factValueValidator=function(){return!0})}return Uc(e,[{key:"evaluate",value:function(t,i){return this.factValueValidator(t)&&this.cb(t,i)}}]),e}();Qe.default=jc;var Ot={},Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});function Hc(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Vc(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function Yc(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Rt.UndefinedFactError=function(e){Yc(r,e);function r(){var t;Hc(this,r);for(var i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];var a=Vc(this,(t=r.__proto__||Object.getPrototypeOf(r)).call.apply(t,[this].concat(n)));return a.code="UNDEFINED_FACT",a}return r}(Error);var Wr,wn;function qc(){return wn||(wn=1,Wr=function(e){var r=this,t;if(arguments.length<2)t=function(){if(this instanceof t){var o=r.apply(this,arguments);return Object(o)===o?o:this}else return r.apply(e,arguments)};else{for(var i=new Array(arguments.length-1),n=1;n<arguments.length;n++)i[n-1]=arguments[n];t=function(){var o=i.length,a=new Array(o+arguments.length),s;for(s=0;s<o;s++)a[s]=i[s];for(s=0;s<arguments.length;s++)a[o+s]=arguments[s];if(this instanceof t){var l=r.apply(this,a);return Object(l)===l?l:this}else return r.apply(e,a)}}return t.prototype=r.prototype,t}),Wr}/*!
 * imports.
 */var Wc=Function.prototype.bind||qc();/*!
 * exports.
 */var zc=Gc;function Gc(e,r){var t=function(){return arguments.length===0?t:arguments.length>1?e.apply(r,arguments):Wc.call(e,r,arguments[0])};return t.uncurry=function(){return e},t}var st={exports:{}},lt={exports:{}},Be=1e3,je=Be*60,He=je*60,Ve=He*24,Kc=Ve*365.25,Jc=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return Xc(e);if(t==="number"&&isNaN(e)===!1)return r.long?Zc(e):Qc(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Xc(e){if(e=String(e),!(e.length>100)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!!r){var t=parseFloat(r[1]),i=(r[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return t*Kc;case"days":case"day":case"d":return t*Ve;case"hours":case"hour":case"hrs":case"hr":case"h":return t*He;case"minutes":case"minute":case"mins":case"min":case"m":return t*je;case"seconds":case"second":case"secs":case"sec":case"s":return t*Be;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Qc(e){return e>=Ve?Math.round(e/Ve)+"d":e>=He?Math.round(e/He)+"h":e>=je?Math.round(e/je)+"m":e>=Be?Math.round(e/Be)+"s":e+"ms"}function Zc(e){return or(e,Ve,"day")||or(e,He,"hour")||or(e,je,"minute")||or(e,Be,"second")||e+" ms"}function or(e,r,t){if(!(e<r))return e<r*1.5?Math.floor(e/r)+" "+t:Math.ceil(e/r)+" "+t+"s"}(function(e,r){r=e.exports=n.debug=n.default=n,r.coerce=l,r.disable=a,r.enable=o,r.enabled=s,r.humanize=Jc,r.names=[],r.skips=[],r.formatters={};var t;function i(u){var f=0,c;for(c in u)f=(f<<5)-f+u.charCodeAt(c),f|=0;return r.colors[Math.abs(f)%r.colors.length]}function n(u){function f(){if(!!f.enabled){var c=f,d=+new Date,h=d-(t||d);c.diff=h,c.prev=t,c.curr=d,t=d;for(var p=new Array(arguments.length),g=0;g<p.length;g++)p[g]=arguments[g];p[0]=r.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var v=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(E,F){if(E==="%%")return E;v++;var I=r.formatters[F];if(typeof I=="function"){var b=p[v];E=I.call(c,b),p.splice(v,1),v--}return E}),r.formatArgs.call(c,p);var y=f.log||r.log||console.log.bind(console);y.apply(c,p)}}return f.namespace=u,f.enabled=r.enabled(u),f.useColors=r.useColors(),f.color=i(u),typeof r.init=="function"&&r.init(f),f}function o(u){r.save(u),r.names=[],r.skips=[];for(var f=(typeof u=="string"?u:"").split(/[\s,]+/),c=f.length,d=0;d<c;d++)!f[d]||(u=f[d].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function a(){r.enable("")}function s(u){var f,c;for(f=0,c=r.skips.length;f<c;f++)if(r.skips[f].test(u))return!1;for(f=0,c=r.names.length;f<c;f++)if(r.names[f].test(u))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}})(lt,lt.exports);(function(e,r){r=e.exports=lt.exports,r.log=n,r.formatArgs=i,r.save=o,r.load=a,r.useColors=t,r.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:s(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function t(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}r.formatters.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}};function i(l){var u=this.useColors;if(l[0]=(u?"%c":"")+this.namespace+(u?" %c":" ")+l[0]+(u?"%c ":" ")+"+"+r.humanize(this.diff),!!u){var f="color: "+this.color;l.splice(1,0,f,"color: inherit");var c=0,d=0;l[0].replace(/%[a-zA-Z%]/g,function(h){h!=="%%"&&(c++,h==="%c"&&(d=c))}),l.splice(d,0,f)}}function n(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(l){try{l==null?r.storage.removeItem("debug"):r.storage.debug=l}catch{}}function a(){var l;try{l=r.storage.debug}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}r.enable(a());function s(){try{return window.localStorage}catch{}}})(st,st.exports);/*!
 * exports.
 */var ef=nf;/*!
 * regexp patterns.
 */var rf=/\[([^\[\]]+)\]/g,tf=/^[.]*|[.]*$/g;function nf(e){return{}.toString.call(e)=="[object String]"?e.replace(rf,".$1").replace(tf,""):""}var of=Object.prototype.toString;function af(e){for(var r=-1,t=lf(sf(e).split(".")),i=t.length,n=[];++r<i;)n.push(uf(t[r]));return n}function sf(e){return(of.call(e)==="[object String]"?e:"").replace(/\\\./g,"\uFFFF")}function lf(e){for(var r=-1,t=e.length,i=[];++r<t;)e[r]&&i.push(e[r]);return i}function uf(e){return e.replace(/\uffff/g,".")}/*!
 * exports.
 */var cf=af,ff=zc,xn=st.exports("selectn"),df=ef,hf=cf,pf=Object.prototype.toString,mf=ff(vf);function vf(e,r){xn("arguments:",{path:e,object:r});for(var t=-1,i=pf.call(e)==="[object Array]"?e:hf(df(e)),n=i.length,o=n?r:void 0;++t<n;){if(Object(o)!==o)return;o=o[i[t]]}return xn("ref:",o),typeof o=="function"?o():o}Object.defineProperty(Ot,"__esModule",{value:!0});var An=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf=function(){function e(r,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),r}}(),yf=Xe,zr=Ir(yf),Sf=Rt,bf=Ce,$e=Ir(bf),Ef=mf,_f=Ir(Ef),wf=Ni,xf=Ir(wf);function Ir(e){return e&&e.__esModule?e:{default:e}}function Af(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var Of=function(){function e(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Af(this,e),this.factMap=new Map(r),this.factResultsCache=new Map,this.allowUndefinedFacts=Boolean(i.allowUndefinedFacts);for(var n in t){var o=void 0;t[n]instanceof zr.default?o=t[n]:o=new zr.default(n,t[n]),this._addConstantFact(o),(0,$e.default)("almanac::constructor initialized runtime fact:"+o.id+" with "+o.value+"<"+An(o.value)+">")}}return gf(e,[{key:"_getFact",value:function(t){return this.factMap.get(t)}},{key:"_addConstantFact",value:function(t){this.factMap.set(t.id,t),this._setFactValue(t,{},t.value)}},{key:"_setFactValue",value:function(t,i,n){var o=t.getCacheKey(i),a=Promise.resolve(n);return o&&this.factResultsCache.set(o,a),a}},{key:"addRuntimeFact",value:function(t,i){var n=new zr.default(t,i);return this._addConstantFact(n)}},{key:"factValue",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",o=void 0,a=this._getFact(t);if(a===void 0)return this.allowUndefinedFacts?Promise.resolve(void 0):Promise.reject(new Sf.UndefinedFactError("Undefined fact: "+t));if(a.isConstant())o=Promise.resolve(a.calculate(i,this));else{var s=a.getCacheKey(i),l=s&&this.factResultsCache.get(s);l?(o=Promise.resolve(l),(0,$e.default)("almanac::factValue cache hit for fact:"+t)):((0,$e.default)("almanac::factValue cache miss for fact:"+t+"; calculating"),o=this._setFactValue(a,i,a.calculate(i,this)))}return n?o.then(function(u){if((0,xf.default)(u)){var f=(0,_f.default)(n)(u);return(0,$e.default)("condition::evaluate extracting object property "+n+", received: "+f),f}else return(0,$e.default)("condition::evaluate could not compute object path("+n+") of non-object: "+u+" <"+(typeof u>"u"?"undefined":An(u))+">; continuing with "+u),u}):o}}]),e}();Ot.default=Of;var Ct={};Object.defineProperty(Ct,"__esModule",{value:!0});var Rf=function(){var r=[];return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.event&&r.push(t.event),r}};Ct.SuccessEventFact=Rf;var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});var Cf=Qe,re=Tf(Cf);function Tf(e){return e&&e.__esModule?e:{default:e}}var z=[];z.push(new re.default("equal",function(e,r){return e===r}));z.push(new re.default("notEqual",function(e,r){return e!==r}));z.push(new re.default("in",function(e,r){return r.indexOf(e)>-1}));z.push(new re.default("notIn",function(e,r){return r.indexOf(e)===-1}));z.push(new re.default("contains",function(e,r){return e.indexOf(r)>-1},Array.isArray));z.push(new re.default("doesNotContain",function(e,r){return e.indexOf(r)===-1},Array.isArray));function Dr(e){return Number.parseFloat(e).toString()!=="NaN"}z.push(new re.default("lessThan",function(e,r){return e<r},Dr));z.push(new re.default("lessThanInclusive",function(e,r){return e<=r},Dr));z.push(new re.default("greaterThan",function(e,r){return e>r},Dr));z.push(new re.default("greaterThanInclusive",function(e,r){return e>=r},Dr));Tt.default=z;Object.defineProperty(te,"__esModule",{value:!0});te.FINISHED=te.RUNNING=te.READY=void 0;var Ff=function(){function e(r,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),r}}(),Pf=Xe,ar=Te(Pf),Nf=$r,Gr=Te(Nf),kf=Qe,Kr=Te(kf),$f=Ot,If=Te($f),Df=$n.exports,Mf=Ct,Lf=Tt,Uf=Te(Lf),Bf=Ce,ce=Te(Bf);function Te(e){return e&&e.__esModule?e:{default:e}}function jf(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Hf(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function Vf(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var Yf=te.READY="READY",On=te.RUNNING="RUNNING",Rn=te.FINISHED="FINISHED",qf=function(e){Vf(r,e);function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};jf(this,r);var n=Hf(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return n.rules=[],n.allowUndefinedFacts=i.allowUndefinedFacts||!1,n.operators=new Map,n.facts=new Map,n.status=Yf,t.map(function(o){return n.addRule(o)}),Uf.default.map(function(o){return n.addOperator(o)}),n}return Ff(r,[{key:"addRule",value:function(i){if(!i)throw new Error("Engine: addRule() requires options");if(!i.hasOwnProperty("conditions"))throw new Error('Engine: addRule() argument requires "conditions" property');if(!i.hasOwnProperty("event"))throw new Error('Engine: addRule() argument requires "event" property');var n=void 0;return i instanceof Gr.default?n=i:n=new Gr.default(i),n.setEngine(this),this.rules.push(n),this.prioritizedRules=null,this}},{key:"removeRule",value:function(i){if(!(i instanceof Gr.default))throw new Error("Engine: removeRule() rule must be a instance of Rule");var n=this.rules.indexOf(i);return n===-1?!1:(this.prioritizedRules=null,Boolean(this.rules.splice(n,1).length))}},{key:"addOperator",value:function(i,n){var o=void 0;i instanceof Kr.default?o=i:o=new Kr.default(i,n),(0,ce.default)("engine::addOperator name:"+o.name),this.operators.set(o.name,o)}},{key:"removeOperator",value:function(i){var n=void 0;return i instanceof Kr.default?n=i.name:n=i,this.operators.delete(n)}},{key:"addFact",value:function(i,n,o){var a=i,s=void 0;return i instanceof ar.default?(a=i.id,s=i):s=new ar.default(i,n,o),(0,ce.default)("engine::addFact id:"+a),this.facts.set(a,s),this}},{key:"removeFact",value:function(i){var n=void 0;return i instanceof ar.default?n=i.id:n=i,this.facts.delete(n)}},{key:"prioritizeRules",value:function(){if(!this.prioritizedRules){var i=this.rules.reduce(function(n,o){var a=o.priority;return n[a]||(n[a]=[]),n[a].push(o),n},{});this.prioritizedRules=Object.keys(i).sort(function(n,o){return Number(n)>Number(o)?-1:1}).map(function(n){return i[n]})}return this.prioritizedRules}},{key:"stop",value:function(){return this.status=Rn,this}},{key:"getFact",value:function(i){return this.facts.get(i)}},{key:"evaluateRules",value:function(i,n){var o=this;return Promise.all(i.map(function(a){if(o.status!==On){(0,ce.default)("engine::run status:"+o.status+"; skipping remaining rules");return}return a.evaluate(n).then(function(s){(0,ce.default)("engine::run ruleResult:"+s.result),s.result?(o.emit("success",a.event,n,s),o.emit(a.event.type,a.event.params,n,s),n.factValue("success-events",{event:a.event})):o.emit("failure",a.event,n,s)})}))}},{key:"run",value:function(){var i=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,ce.default)("engine::run started"),(0,ce.default)("engine::run runtimeFacts:",n),n["success-events"]=new ar.default("success-events",(0,Mf.SuccessEventFact)(),{cache:!1}),this.status=On;var o=new If.default(this.facts,n,{allowUndefinedFacts:this.allowUndefinedFacts}),a=this.prioritizeRules(),s=Promise.resolve();return new Promise(function(l,u){a.map(function(f){return s=s.then(function(){return i.evaluateRules(f,o)}).catch(u),s}),s.then(function(){return i.status=Rn,(0,ce.default)("engine::run completed"),o.factValue("success-events")}).then(function(f){l({events:f,almanac:o})}).catch(u)})}}]),r}(Df.EventEmitter);te.default=qf;Object.defineProperty(q,"__esModule",{value:!0});q.Engine=q.Operator=q.Rule=q.Fact=void 0;q.default=function(e,r){return new Ii.default(e,r)};var Wf=te,Ii=Mr(Wf),zf=Xe,Gf=Mr(zf),Kf=$r,Jf=Mr(Kf),Xf=Qe,Qf=Mr(Xf);function Mr(e){return e&&e.__esModule?e:{default:e}}q.Fact=Gf.default;q.Rule=Jf.default;q.Operator=Qf.default;q.Engine=Ii.default;(function(e){e.exports=q})(ot);var U=(e=>(e[e.TODO=0]="TODO",e[e.PROGRESS=1]="PROGRESS",e[e.COMPLETED=2]="COMPLETED",e[e.EXCLUDED=3]="EXCLUDED",e[e.ERROR=4]="ERROR",e))(U||{}),P=(e=>(e[e.PREVIOUS=0]="PREVIOUS",e[e.NEXT=1]="NEXT",e[e.GO_TO_STEP=2]="GO_TO_STEP",e[e.SAVE=3]="SAVE",e[e.SUBMIT=4]="SUBMIT",e[e.VALIDATE=5]="VALIDATE",e[e.NONE=6]="NONE",e))(P||{}),k=(e=>(e[e.PROGRESS=0]="PROGRESS",e[e.ERROR=1]="ERROR",e[e.SAVE_SUCCESS=2]="SAVE_SUCCESS",e[e.SUBMIT_SUCCESS=3]="SUBMIT_SUCCESS",e[e.ERROR_CRITICAL=4]="ERROR_CRITICAL",e))(k||{});function dr(e){let r=m(T,{});return e.isSubmitted?r=m("div",{children:"Your information has been submitted"}):e.bodyText&&(r=m("div",{dangerouslySetInnerHTML:{__html:e.bodyText}})),x("div",{className:`submission-header${e.isSubmitted?" submitted":""}`,children:[m("h2",{children:e.title}),r,m("hr",{})]})}try{dr.displayName="Header",dr.__docgenInfo={description:"",displayName:"Header",props:{isSubmitted:{defaultValue:null,description:"",name:"isSubmitted",required:!1,type:{name:"boolean"}},bodyText:{defaultValue:null,description:"",name:"bodyText",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/Header.tsx#Header"]={docgenInfo:dr.__docgenInfo,name:"Header",path:"src/lib/containers/synapse_form_wrapper/Header.tsx#Header"})}catch{}function hr(e){const r=e.stepList.filter(o=>o.child!==!0),t=(o,a,s,l)=>{let u="circle";return s||l?{iconDef:u}:(a?u="block":o===U.COMPLETED?u="checkCircle":o===U.ERROR&&(u="errorOutlined"),{iconDef:u})},i=(o,a=!1)=>{let s="item";return o&&(s=`${s} pointed `),a&&(s=`${s} static`),s},n=(o,a,s=!1)=>{if(!o||o.child&&!s)return m(T,{});const l=(c,d,h)=>!c.inProgress&&(!d||!!c.final)?m("button",{className:"btn btn-link",onClick:()=>h(c),children:c.title}):m("span",{children:c.title}),u=t(o.state,o.excluded,o.static,o.final),f=i(o.inProgress,o.static);return x("div",{className:f,children:[m(br,{options:{icon:u.iconDef}}),l(o,a,e.onStepChange)]})};return m("div",{className:"SRC-menuLayout json-forms-menu",style:{flex:"1"},children:m("ul",{children:r.map((o,a)=>x("li",{className:"item-wrap",children:[n(o,!!e.isWizardMode),o.children&&o.children.length>0&&m("div",{className:"subMenu",children:m("ul",{children:o.children&&o.children.map((s,l)=>{const u=e.stepList.find(f=>f.id===s);return typeof u>"u"?m(T,{}):m("li",{className:"item-wrap",children:n(u,!!e.isWizardMode,!0)},l+s)})})})]},a+o.id))})})}try{hr.displayName="StepsSideNav",hr.__docgenInfo={description:"",displayName:"StepsSideNav",props:{stepList:{defaultValue:null,description:"",name:"stepList",required:!0,type:{name:"Step[]"}},onStepChange:{defaultValue:null,description:"",name:"onStepChange",required:!0,type:{name:"Function"}},isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/StepsSideNav.tsx#StepsSideNav"]={docgenInfo:hr.__docgenInfo,name:"StepsSideNav",path:"src/lib/containers/synapse_form_wrapper/StepsSideNav.tsx#StepsSideNav"})}catch{}function pr(e){const t=(o=>o.isWizardMode?o.previousStepIds&&o.previousStepIds.length>0:o.steps.findIndex(a=>a.id===o.currentStep.id)>0)(e)?m("button",{type:"button",onClick:o=>e.onNavAction(P.PREVIOUS),className:"btn btn-link nav-link prev",children:m(br,{options:{icon:"chevronLeft"}})}):m(T,{}),i=e.currentStep.final?m(T,{}):m("button",{type:"button",onClick:o=>e.onNavAction(P.NEXT),className:"btn btn-link nav-link next",children:m(br,{options:{icon:"chevronRight"}})}),n=m("button",{type:"button",className:"btn btn-action save",disabled:e.isFormSubmitted,onClick:o=>e.onNavAction(P.SAVE),children:"SAVE"});return x("div",{children:[m("hr",{}),x("div",{className:"buttonWrapper pull-right",children:[t," ",i," ",n]})]})}function mr(e){const r=e.steps.find(t=>t.id===e.nextStepId);return typeof r>"u"?m(T,{}):x("span",{className:"nav-link",children:[m("a",{onClick:t=>e.onNavAction(r),children:r.title}),m(br,{options:{icon:"chevronRight"}})]})}try{pr.displayName="NavButtons",pr.__docgenInfo={description:"",displayName:"NavButtons",props:{isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}},previousStepIds:{defaultValue:null,description:"",name:"previousStepIds",required:!0,type:{name:"string[]"}},onNavAction:{defaultValue:null,description:"",name:"onNavAction",required:!0,type:{name:"Function"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"Step[]"}},currentStep:{defaultValue:null,description:"",name:"currentStep",required:!0,type:{name:"Step"}},isFormSubmitted:{defaultValue:null,description:"",name:"isFormSubmitted",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/NavButtons.tsx#NavButtons"]={docgenInfo:pr.__docgenInfo,name:"NavButtons",path:"src/lib/containers/synapse_form_wrapper/NavButtons.tsx#NavButtons"})}catch{}try{mr.displayName="NextStepLink",mr.__docgenInfo={description:"",displayName:"NextStepLink",props:{onNavAction:{defaultValue:null,description:"",name:"onNavAction",required:!0,type:{name:"Function"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"Step[]"}},nextStepId:{defaultValue:null,description:"",name:"nextStepId",required:!0,type:{name:"string | undefined"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/NavButtons.tsx#NextStepLink"]={docgenInfo:mr.__docgenInfo,name:"NextStepLink",path:"src/lib/containers/synapse_form_wrapper/NavButtons.tsx#NextStepLink"})}catch{}function vr(e){const r=x("div",{children:[m("h6",{children:"Data"}),m("pre",{children:JSON.stringify(e.formData,null,2)})]});return m(T,{children:!e.hidden&&r})}try{vr.displayName="DataDebug",vr.__docgenInfo={description:"",displayName:"DataDebug",props:{formData:{defaultValue:null,description:"",name:"formData",required:!0,type:{name:"any"}},hidden:{defaultValue:null,description:"",name:"hidden",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/DataDebug.tsx#DataDebug"]={docgenInfo:vr.__docgenInfo,name:"DataDebug",path:"src/lib/containers/synapse_form_wrapper/DataDebug.tsx#DataDebug"})}catch{}function Zf(e,r,t){const i=/\[\d+\]\./g,n=/\.(\d)+/g;e=e.replace(n,"[$1]");const a=`${e.split(".").join(".properties.")}.title`,s=`${e}.ui:title`,l=a.replace(i,".items."),u=s.replace(i,".items."),f=a.match(i);let c=no(f);c&&(c=c.substring(1,c.length-2),c=isNaN(parseInt(c))?"":parseInt(c)+1+"");const d=_e(t,s)||_e(r.properties,a)||_e(t,u)||_e(r.properties,l)||`${l}`;return`${c?"["+c+"] ":""}${d}`}function ed(e,r,t,i){function n(l,u,f){const c=".";return Object.keys(l).forEach(d=>{if(l[d]===null)u[f+d]="";else if(Mt(l[d])&&!Dt(l[d]))for(const h in l[d])if(Mt(l[d][h])||It(l[d])&&!Dt(l[d][h]))n(l[d][h],u,`${f}${d}[${h}]${c}`);else{let p=u[`${f}${d}`];p=p?p+", ":"",u[`${f}${d}`]=p+l[d][h]}else It(l[d])&&!io(l[d])?n(l[d],u,`${f}${d}${c}`):u[f+d]=l[d]}),u}const o=n(In(e),[],"");return Vi(o).map(l=>{let u=o[l];o[l]===!1&&(u="false"),o[l]===!0&&(u="true");const f=l.indexOf(".");return{screen:to(r,{id:l.substring(0,f)}),label:Zf(l,t,i),value:u}}).filter(l=>l.label.indexOf(".properties.included.title")===-1).filter(l=>l.screen&&typeof l.value<"u").map(l=>({label:l.label,value:l.value,screen:l.screen})).sort((l,u)=>l.screen.order-u.screen.order)}function gr(e){let r=[];r=ed(In(e.formData),e.steps,e.schema,e.uiSchema);let t="";const i=x(T,{children:[m("table",{className:"table summary-table-header",children:m("thead",{children:x("tr",{children:[m("th",{children:"Step"}),m("th",{children:"Label"}),m("th",{children:"Value"})]})})}),m("div",{className:"scroll-area table-body",children:m("table",{className:"table summary-table",children:m("tbody",{children:r.map((n,o)=>x("tr",{children:[m("td",{children:t!==n.screen.id&&(t=n.screen.id)&&m("span",{children:n.screen.title})}),m("td",{children:n.label}),m("td",{children:n.value})]},o+n.screen.id+n.label))})})})]});return x(T,{children:[m("p",{className:"step-exclude-directions",children:"Below is all of the data you have entered. Before submitting, click 'Validate' to ensure that all of the required data has been entered."}),m("button",{className:"nav-link pull-right",onClick:()=>window.print(),children:"Print this data"}),m("div",{className:"panel panel-default padding-full wrap",children:m("div",{className:"summary scroll-area",children:i})})]})}try{gr.displayName="SummaryTable",gr.__docgenInfo={description:"",displayName:"SummaryTable",props:{isWizard:{defaultValue:null,description:"",name:"isWizard",required:!1,type:{name:"boolean"}},formData:{defaultValue:null,description:"",name:"formData",required:!0,type:{name:"any"}},callbackFn:{defaultValue:null,description:"",name:"callbackFn",required:!1,type:{name:"Function"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"Step[]"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"FormSchema"}},uiSchema:{defaultValue:null,description:"",name:"uiSchema",required:!0,type:{name:"UiSchema"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/SummaryTable.tsx#SummaryTable"]={docgenInfo:gr.__docgenInfo,name:"SummaryTable",path:"src/lib/containers/synapse_form_wrapper/SummaryTable.tsx#SummaryTable"})}catch{}var Di={exports:{}},Ft={};const Mi=ut(ro);var ie=Mi.jsx,Cn=Mi.jsxs;Object.defineProperty(Ft,"__esModule",{value:!0});var rd=window.React,td=ie("svg",{viewBox:"-2 -5 14 20",height:"100%",width:"100%",style:{position:"absolute",top:0},children:ie("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"})}),nd=ie("svg",{height:"100%",width:"100%",viewBox:"-2 -5 17 21",style:{position:"absolute",top:0},children:ie("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"})});function id(e,r,t,i,n){var o=(e-t)/(r-t);if(o===0)return i;if(o===1)return n;for(var a="#",s=1;s<6;s+=2){var l=parseInt(i.substr(s,2),16),u=parseInt(n.substr(s,2),16),f=Math.round((1-o)*l+o*u).toString(16);f.length===1&&(f="0"+f),a+=f}return a}function Tn(e){if(e.length===7)return e;for(var r="#",t=1;t<4;t+=1)r+=e[t]+e[t];return r}function Fn(e,r,t,i,n){return id(e,r,t,Tn(i),Tn(n))}function od(e,r){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&r.indexOf(i)===-1&&(t[i]=e[i]);return t}var Pn=function(e){function r(t){e.call(this,t);var i=t.height,n=t.width,o=t.checked;this.t=t.handleDiameter||i-2,this.i=Math.max(n-i,n-(i+this.t)/2),this.o=Math.max(0,(i-this.t)/2),this.state={s:o?this.i:this.o},this.n=0,this.e=0,this.h=this.h.bind(this),this.r=this.r.bind(this),this.a=this.a.bind(this),this.c=this.c.bind(this),this.l=this.l.bind(this),this.u=this.u.bind(this),this.f=this.f.bind(this),this.p=this.p.bind(this),this.b=this.b.bind(this),this.g=this.g.bind(this),this.v=this.v.bind(this),this.w=this.w.bind(this)}return e&&(r.__proto__=e),((r.prototype=Object.create(e&&e.prototype)).constructor=r).prototype.componentDidUpdate=function(t){t.checked!==this.props.checked&&this.setState({s:this.props.checked?this.i:this.o})},r.prototype.k=function(t){this.y.focus(),this.setState({C:t,M:!0,m:Date.now()})},r.prototype.x=function(t){var i=this.state,n=i.C,o=i.s,a=(this.props.checked?this.i:this.o)+t-n;i.R||t===n||this.setState({R:!0});var s=Math.min(this.i,Math.max(this.o,a));s!==o&&this.setState({s})},r.prototype.S=function(t){var i=this.state,n=i.s,o=i.R,a=i.m,s=this.props.checked,l=(this.i+this.o)/2,u=Date.now()-a;!o||u<250?this.T(t):s?l<n?this.setState({s:this.i}):this.T(t):n<l?this.setState({s:this.o}):this.T(t),this.setState({R:!1,M:!1}),this.n=Date.now()},r.prototype.h=function(t){t.preventDefault(),typeof t.button=="number"&&t.button!==0||(this.k(t.clientX),window.addEventListener("mousemove",this.r),window.addEventListener("mouseup",this.a))},r.prototype.r=function(t){t.preventDefault(),this.x(t.clientX)},r.prototype.a=function(t){this.S(t),window.removeEventListener("mousemove",this.r),window.removeEventListener("mouseup",this.a)},r.prototype.c=function(t){this.$=null,this.k(t.touches[0].clientX)},r.prototype.l=function(t){this.x(t.touches[0].clientX)},r.prototype.u=function(t){t.preventDefault(),this.S(t)},r.prototype.p=function(t){50<Date.now()-this.n&&(this.T(t),50<Date.now()-this.e&&this.setState({M:!1}))},r.prototype.b=function(){this.e=Date.now()},r.prototype.g=function(){this.setState({M:!0})},r.prototype.v=function(){this.setState({M:!1})},r.prototype.w=function(t){this.y=t},r.prototype.f=function(t){t.preventDefault(),this.y.focus(),this.T(t),this.setState({M:!1})},r.prototype.T=function(t){var i=this.props;(0,i.onChange)(!i.checked,t,i.id)},r.prototype.render=function(){var t=this.props,i=t.disabled,n=t.className,o=t.offColor,a=t.onColor,s=t.offHandleColor,l=t.onHandleColor,u=t.checkedIcon,f=t.uncheckedIcon,c=t.boxShadow,d=t.activeBoxShadow,h=t.height,p=t.width,g=od(t,["disabled","className","offColor","onColor","offHandleColor","onHandleColor","checkedIcon","uncheckedIcon","boxShadow","activeBoxShadow","height","width","handleDiameter"]),v=this.state,y=v.s,E=v.R,F=v.M,I={position:"relative",display:"inline-block",textAlign:"left",opacity:i?.5:1,direction:"ltr",borderRadius:h/2,WebkitTransition:"opacity 0.25s",MozTransition:"opacity 0.25s",transition:"opacity 0.25s",touchAction:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},b={height:h,width:p,margin:Math.max(0,(this.t-h)/2),position:"relative",background:Fn(y,this.i,this.o,o,a),borderRadius:h/2,cursor:i?"default":"pointer",WebkitTransition:E?null:"background 0.25s",MozTransition:E?null:"background 0.25s",transition:E?null:"background 0.25s"},M={height:h,width:Math.min(1.5*h,p-(this.t+h)/2+1),position:"relative",opacity:(y-this.o)/(this.i-this.o),pointerEvents:"none",WebkitTransition:E?null:"opacity 0.25s",MozTransition:E?null:"opacity 0.25s",transition:E?null:"opacity 0.25s"},_={height:h,width:Math.min(1.5*h,p-(this.t+h)/2+1),position:"absolute",opacity:1-(y-this.o)/(this.i-this.o),right:0,top:0,pointerEvents:"none",WebkitTransition:E?null:"opacity 0.25s",MozTransition:E?null:"opacity 0.25s",transition:E?null:"opacity 0.25s"},G={height:this.t,width:this.t,background:Fn(y,this.i,this.o,s,l),display:"inline-block",cursor:i?"default":"pointer",borderRadius:"50%",position:"absolute",transform:"translateX("+y+"px)",top:Math.max(0,(h-this.t)/2),outline:0,boxShadow:F?d:c,border:0,WebkitTransition:E?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",MozTransition:E?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",transition:E?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s"};return Cn("div",{className:n,style:I,children:[Cn("div",{className:"react-switch-bg",style:b,onClick:i?null:this.f,onMouseDown:function(ge){return ge.preventDefault()},children:[u&&ie("div",{style:M,children:u}),f&&ie("div",{style:_,children:f})]}),ie("div",{className:"react-switch-handle",style:G,onClick:function(ge){return ge.preventDefault()},onMouseDown:i?null:this.h,onTouchStart:i?null:this.c,onTouchMove:i?null:this.l,onTouchEnd:i?null:this.u,onTouchCancel:i?null:this.v}),ie("input",{type:"checkbox",role:"switch",disabled:i,style:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1},...g,ref:this.w,onFocus:this.g,onBlur:this.v,onKeyUp:this.b,onChange:this.p})]})},r}(rd.Component);Pn.defaultProps={disabled:!1,offColor:"#888",onColor:"#080",offHandleColor:"#fff",onHandleColor:"#fff",uncheckedIcon:td,checkedIcon:nd,boxShadow:null,activeBoxShadow:"0 0 2px 3px #3bf",height:28,width:56},Ft.default=Pn;(function(e){e.exports=Ft})(Di);const ad=ji(Di.exports),sr=window.React;class yr extends sr.Component{constructor(r){super(r),this.excludeWarningText=x("div",{children:[m("p",{children:"This action will clear any entered data on this page and remove this form from your submission. You can include it again at anytime. Only this page will be affected."}),m("p",{children:"Are you sure you want to skip this step and clear any entered data?"})]}),this.excludeWarningHeader="Skip This Step?",this.unsavedDataWarning="You might have some unsaved data. Are you sure you want to leave?",this.navAction=P.NONE,this.extraErrors=[],this.isNewForm=n=>Object.keys(n).length==1&&Object.keys(n)[0]==="metadata"||Object.keys(n).length==0,this.getFirstStep=(n,o)=>this.isNewForm(o)?n[0]:n.find(a=>a.final===!0)||n[0],this.onUnload=n=>this.state.hasUnsavedChanges?(n.preventDefault(),n.returnValue=this.unsavedDataWarning):void 0,this.setupBeforeUnloadListener=()=>{window.addEventListener("beforeunload",this.onUnload)},this._setIncludedPropInFormDataNonWizard=(n,o)=>{const a={},s=n.formData;return Object.keys(o).forEach(l=>{w.get(o[l],"properties.included")&&w.set(a,`${l}.included`,!0)}),{...s,...a}},this._setIncludedPropInFormDataWizard=n=>{const o=n.currentStep.id,a=w.cloneDeep(n.formData);return w.set(a,`${o}.included`,!0),a},this.getSchema=({id:n,final:o})=>o?this.props.schema:w.pick(this.props.schema,["title","type",`properties.${n}`]),this.getNextStepId=async(n,o,a)=>{if(a)return a;if(!n.rules||n.rules.length===0)return n.default;const s=new ot.exports.Engine(n.rules);try{const l=await s.run(o);return l.events.length>0?l.events[0].params.next:n.default}catch{return n.default}},this.moveStep=async(n,o,a,s=[...this.state.previousStepIds])=>{var h;const l=this.state.currentStep;let u;(h=this.formRef)!=null&&h.current&&this.formRef.current.setState({errorSchema:{}});const f=this.props.isWizardMode&&!o;f&&s.push(l.id),a?u=U.ERROR:(u=U.COMPLETED,!f&&this.props.isWizardMode&&(u=U.TODO)),o=await this.getNextStepId(l,n,o);const c=this.state.steps.map(p=>p.id===l.id?{...p,state:u,inProgress:!1}:p.id===o?{...p,inProgress:!0}:p);f&&w.set(n,`${o}.included`,!0);const d=this.state.steps.find(p=>p.id===o);this.props.isWizardMode&&d.final&&Object.keys(n).forEach(p=>{n[p].included===void 0&&(n[p]={})}),this.saveStepState(s,c,d,n)},this.saveStepState=(n,o,a,s)=>{this.setState({previousStepIds:n,steps:o,currentStep:a,formData:s,hasValidated:!1,doShowErrors:!1})},this.goPrevious=async(n,o)=>{let a;const s=[...this.state.previousStepIds];if(this.props.isWizardMode)a=s.pop(),this.isSubmitScreen()||w.set(n,`${this.state.currentStep.id}.included`,void 0);else{const l=w.findIndex(this.state.steps,{id:this.state.currentStep.id});l>0&&(a=this.state.steps[l-1].id)}if(!w.isUndefined(a))return this.moveStep(n,a,o,s)},this.triggerAction=async n=>{if(n===P.SAVE)return this.props.onSave(this.state.formData);this.navAction=n,this.extraErrors=await this.runCustomValidation(this.state.formData,this.state.currentStep,this.state.steps),this.submitButtonRef.current&&this.submitButtonRef.current.click()},this.triggerStepChange=n=>{this.nextStep=n,this.triggerAction(P.GO_TO_STEP)},this.onError=n=>{if(this.setState({doShowErrors:!0,hasValidated:!1}),this.navAction===P.VALIDATE){const o=this.setStepStatusForFailedValidation(n.props,this.state.steps,!!this.props.isWizardMode,this.state.formData,this.getSchema(this.state.currentStep).properties||this.getSchema(this.state.currentStep));this.setState({steps:o}),this.formDivRef.current.scrollTo(0,0),this.state.isLoadingSaved&&(this.moveStep(this.state.formData,o[0].id,!0),this.setState({isLoadingSaved:!1}))}},this.setStepStatusForFailedValidation=(n,o,a,s,l)=>{const u=n.map(d=>w.trimStart(d.property,".").split(".")[0]),f=Object.keys(l);return o.map(d=>{if(u.indexOf(d.id)>-1)return{...d,state:U.ERROR};if(f.indexOf(d.id)>-1){let h=U.COMPLETED;return a&&!w.get(s[d.id],"included")&&(h=d.state),{...d,state:h}}else return d})},this.onSubmit=()=>{this.performAction(this.navAction,this.state.currentStep.state===U.ERROR)},this.isSubmitScreen=()=>this.state.currentStep.final===!0&&!this.state.isLoadingSaved,this.showExcludeStateWarningModal=(n,o=!1)=>{this.setState({modalContext:{action:this.toggleExcludeStep,arguments:[n,!0,o]}})},this.toggleExcludeStep=(n,o)=>{this.setState((a,s)=>{const l=a.steps.map(c=>c.id===n?{...c,excluded:o}:c),u=w.cloneDeep(a.formData),f=w.cloneDeep(a.currentStep);return f.id===n&&(f.excluded=o),o?u[n]={}:w.set(u,`${n}.included`,!0),{steps:l,formData:u,modalContext:void 0,currentStep:f}})},this.renderNotification=n=>n===k.SAVE_SUCCESS?m("div",{className:"notification-area",children:" Successfully saved "}):n===k.SUBMIT_SUCCESS?m("div",{className:"notification-area",children:" Successfully submitted "}):n===k.PROGRESS?m("div",{className:"notification-area",children:" working on it ...."}):m(T,{}),this.renderTextForStaticScreen=()=>{if(!this.state.currentStep.copy)return m(T,{});const n=this.state.currentStep.copy;return m("div",{className:"static-screen",dangerouslySetInnerHTML:{__html:n}})},this.renderOptionalFormSubheader=(n=!1)=>{if(n)return m(T,{});const o=this.state.currentStep;return o.excluded===!0?x("div",{className:"step-exclude-directions",children:["This form is currently not included in the submission.",m("button",{className:"btn btn-link",onClick:()=>this.toggleExcludeStep(o.id,!1),children:"INCLUDE"})]}):o.excluded===!1?x("div",{className:"step-exclude-directions",children:['This form is currently included in the submission. Enter some data if you have it, or click "Skip".',m("button",{className:"btn btn-link",onClick:()=>this.showExcludeStateWarningModal(this.state.currentStep.id),children:"SKIP"})]}):m(T,{})},this.renderHelpToggle=(n,o,a)=>n.static||n.final?m(T,{}):m(T,{children:x("label",{className:"pull-right toggle-help-label",children:[m("span",{children:"Hide help"}),m(ad,{checkedIcon:!1,uncheckedIcon:!1,height:20,width:45,className:"toggle-help",offColor:"#ccc",onChange:()=>a(),checked:o}),m("span",{children:"Show help"})]})}),this.runCustomValidation=async(n,o,a)=>{const s=[];let l=o.validationRules||[],u={[o.id]:n[o.id]};if(o.final&&(l=a.reduce((d,h)=>h.validationRules&&h.validationRules.length>0?d.concat(h.validationRules):d,[]),u=w.cloneDeep(n)),l.length===0)return[];const f=[];l.forEach(d=>{const h=d.event.params.property;if(h.indexOf("[*]")===-1)f.push(d);else{const p=h.split("[*]")[0].substring(1),g=w.get(n,p);if(Array.isArray(g)&&typeof g!="string")for(let v=0;v<g.length;v++){const y=JSON.parse(JSON.stringify(d).replace(/\[\*\]/g,`[${v}]`));f.push(y)}else f.push(d)}});const c=new ot.exports.Engine(f,{allowUndefinedFacts:!0});try{(await c.run(u)).events.forEach(p=>{const g={...p.params,params:{},stack:`${p.params.property} ${p.params.message}`};s.push(g)})}catch(d){console.log(d)}return s},this.transformErrors=n=>{if(this.extraErrors.forEach(a=>{n.find(s=>s.stack===a.stack)||n.push(a)}),this.navAction!==P.SUBMIT&&this.navAction!==P.VALIDATE&&(!this.props.isWizardMode||this.state.currentStep.final)){const a={...this.state.currentStep};return n.length>0?a.state=U.ERROR:a.state=U.COMPLETED,this.setState({currentStep:a}),[]}return n.filter(a=>a.name==="required").forEach(a=>{const s=a.property.substring(0,a.property.lastIndexOf("."));w.remove(n,l=>l.property.indexOf(s)>-1&&(l.name==="enum"||l.name==="oneOf"))}),n.map(a=>(a.message=a.message.replace("property","field"),a))},this.renderErrorListTemplate=n=>{const{errors:o}=n,a=o.map((s,l)=>sd(this.state.steps,s,this.uiSchema,l,this.props.schema)).sort((s,l)=>s.order-l.order).map(s=>s.element);return m("div",{className:"form-error-summary",children:m("ul",{className:"error-detail",children:a})})},this.uiSchema=Li(w.cloneDeep(r.uiSchema),"ui:help");const t=r.navSchema.steps.map((n,o)=>({...n,inProgress:o===0})).sort((n,o)=>n.order-o.order);this.formRef=sr.createRef(),this.formDivRef=sr.createRef(),this.submitButtonRef=sr.createRef();const i=this.getFirstStep(t,r.formData);this.state={currentStep:i,steps:t,previousStepIds:[],formData:r.formData,doShowErrors:!1,doShowHelp:!0,hasUnsavedChanges:!1,isSubmitted:r.isSubmitted,isLoadingSaved:!this.isNewForm(this.props.formData)}}componentWillUnmount(){window.removeEventListener("beforeunload",this.onUnload)}componentDidUpdate(r){const t=this.props.callbackStatus!==r.callbackStatus,i=this.props.callbackStatus===k.SAVE_SUCCESS||this.props.callbackStatus===k.SUBMIT_SUCCESS;t&&i&&(this.setState({hasUnsavedChanges:!1}),this.props.callbackStatus===k.SUBMIT_SUCCESS&&(this.setState({isSubmitted:!0}),window.history.back()))}componentDidMount(){this.setupBeforeUnloadListener(),this.isNewForm(this.state.formData)?this.setState(t=>({formData:this.props.isWizardMode?this._setIncludedPropInFormDataWizard(t):this._setIncludedPropInFormDataNonWizard(t,this.props.schema)})):this.triggerAction(P.VALIDATE)}handleOnChange({formData:r}){if(!this.isSubmitScreen()&&!this.state.currentStep.excluded){const t=!w.isEqual(this.state.formData,r);this.setState({formData:r,hasUnsavedChanges:t})}}performAction(r,t){const i=this.state.formData;switch(r){case P.NEXT:return this.moveStep(i,void 0,t);case P.PREVIOUS:return this.goPrevious(i,t);case P.GO_TO_STEP:return this.nextStep?this.moveStep(i,this.nextStep.id,t):void 0;case P.SUBMIT:{this.props.onSubmit(i);return}case P.VALIDATE:{const n=this.setStepStatusForFailedValidation([],this.state.steps,!!this.props.isWizardMode,this.state.formData,this.getSchema(this.state.currentStep).properties||this.getSchema(this.state.currentStep)),o={...this.state.currentStep,state:U.COMPLETED};this.setState({hasValidated:!0,currentStep:o,steps:n}),this.state.isLoadingSaved&&(this.moveStep(this.state.formData,n[0].id,!1),this.setState({isLoadingSaved:!1}));return}default:return}}render(){return x("div",{className:"outter-wrap",children:[m(so,{when:this.state.hasUnsavedChanges,message:this.unsavedDataWarning}),m(dr,{isSubmitted:this.state.isSubmitted,bodyText:this.state.currentStep.description,title:this.props.formTitle}),m("div",{children:x("div",{className:"inner-wrap",children:[m(hr,{stepList:this.state.steps,isWizardMode:this.props.isWizardMode,onStepChange:this.triggerStepChange}),this.state.isLoadingSaved&&m("div",{className:"text-center",children:m("span",{className:"spinner"})}),x("div",{className:"form-wrap",children:[m("div",{className:"form-title",children:this.state.currentStep.title}),this.renderNotification(this.props.callbackStatus),x("div",{className:`right-top-actions ${this.state.isSubmitted?"hide":""}`,children:[!this.state.currentStep.static&&m("button",{type:"button",className:"btn btn-action save pull-right",onClick:()=>this.triggerAction(P.VALIDATE),children:"VALIDATE"}),this.renderHelpToggle(this.state.currentStep,this.state.doShowHelp,()=>this.setState({doShowHelp:!this.state.doShowHelp})),this.isSubmitScreen()&&m("button",{type:"button",className:"btn btn-action save pull-right",disabled:this.state.isSubmitted,onClick:()=>this.triggerAction(P.SUBMIT),children:"SUBMIT"})]}),this.renderOptionalFormSubheader(this.props.isWizardMode),x("div",{className:this.isSubmitScreen()||this.state.currentStep.static?"hide-form-only":"wrap",children:[this.state.hasValidated&&m("div",{className:"notification-area",children:"Great! All required data on this form has been entered."}),x("div",{ref:this.formDivRef,className:`scroll-area ${this.state.currentStep.excluded?"disabled":" "} `,children:[m(eo,{noHtml5Validate:!0,className:this.state.doShowHelp?"submissionInputForm":"submissionInputForm no-help",liveValidate:!1,formData:this.state.formData,schema:this.getSchema(this.state.currentStep),uiSchema:this.uiSchema,onSubmit:this.onSubmit,onChange:r=>this.handleOnChange(r),onError:r=>this.onError({props:r,form:this.formRef}),showErrorList:!!this.state.doShowErrors||!!this.props.isWizardMode,ErrorList:this.renderErrorListTemplate,transformErrors:this.transformErrors,ref:this.formRef,disabled:this.state.currentStep.excluded||this.state.isSubmitted,children:m("div",{style:{display:"none"},children:m("button",{type:"submit",ref:this.submitButtonRef})})}),this.renderTextForStaticScreen(),!this.props.isWizardMode&&m(mr,{steps:this.state.steps,nextStepId:this.state.currentStep.default,onNavAction:r=>this.triggerStepChange(r)})]})]}),this.isSubmitScreen()&&m(gr,{formData:this.state.formData,steps:this.state.steps,callbackFn:r=>this.showExcludeStateWarningModal(r,!0),uiSchema:this.props.uiSchema,schema:this.props.schema}),m(pr,{currentStep:this.state.currentStep,steps:this.state.steps,previousStepIds:this.state.previousStepIds,isFormSubmitted:this.state.isSubmitted,onNavAction:r=>this.triggerAction(r)})]})]})}),this.state.modalContext&&m(ao,{show:!0,title:this.excludeWarningHeader,modalBody:this.excludeWarningText,className:`theme-${this.props.formClass}`,onConfirmCallbackArgs:this.state.modalContext.arguments,onCancel:()=>this.setState({modalContext:void 0}),onConfirm:(r,t)=>this.toggleExcludeStep(r,t)}),m(vr,{formData:this.state.formData,hidden:!0})]})}}function sd(e,r,t,i,n){const o=w.trimStart(r.property,"."),a=o.split("."),s=`${a.join(".properties.")}.title`,l=`${o}.ui:title`,u=s.replace(/\[.*?\]/,".items"),f=l.replace(/\[.*?\]/,".items"),c=s.match(/\[.*?\]/);let d=w.first(c);d&&(d=d.substring(1,d.length-1),d=isNaN(parseInt(d))?"":` [${parseInt(d)+1}]`);const h=w.get(t,l)||w.get(n.properties,s)||w.get(t,f)||w.get(n.properties,u)||r.property,p=w.find(e,{id:a[0]})||{title:a[0],order:0},g=m("li",{className:"",children:x("span",{children:[x("strong",{children:[p.title,d,":"]}),h,"\xA0 ",r.message]})},i);return{order:p.order,element:g}}function Li(e,r){return w.keys(e).some(t=>{if(t===r){const i=e[t];return e[t]=m("span",{dangerouslySetInnerHTML:{__html:i}}),e}e[t]&&typeof e[t]=="object"&&Li(e[t],r)}),e}try{yr.displayName="SynapseForm",yr.__docgenInfo={description:"",displayName:"SynapseForm",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"FormSchema"}},uiSchema:{defaultValue:null,description:"",name:"uiSchema",required:!0,type:{name:"UiSchema"}},navSchema:{defaultValue:null,description:"",name:"navSchema",required:!0,type:{name:"{ steps: any[]; }"}},formData:{defaultValue:null,description:"",name:"formData",required:!0,type:{name:"IFormData"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"Function"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!0,type:{name:"Function"}},formTitle:{defaultValue:null,description:"",name:"formTitle",required:!0,type:{name:"string"}},formClass:{defaultValue:null,description:"",name:"formClass",required:!1,type:{name:"string"}},isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}},callbackStatus:{defaultValue:null,description:"",name:"callbackStatus",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"}]}},isSubmitted:{defaultValue:null,description:"",name:"isSubmitted",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/SynapseForm.tsx#SynapseForm"]={docgenInfo:yr.__docgenInfo,name:"SynapseForm",path:"src/lib/containers/synapse_form_wrapper/SynapseForm.tsx#SynapseForm"})}catch{}async function Jr(e,r,t,i){try{const n=await Yi(e,r,t),o=await qi(n,e,!0,!0),a=await Wi(o.fileHandle,o.preSignedURL),s=JSON.parse(a);return{version:n.versionNumber,content:s}}catch(n){const o={message:`${n.message}:  configuration data for ${r} failed to load`};return i&&i(o),Promise.reject(o)}}const ld=window.React;class Sr extends ld.Component{constructor(r){var t,i;super(r),this.getFileEntityDataDereferenced=async(n,o,a)=>{const{version:s,content:l}=await Jr(n,o,a,this.onError),u=await Q.exports.dereference(l);return{version:s,content:u}},this.getData=async n=>{if(!!n)try{let o={},a,s,l,u,f;const{searchParams:c}=this.props;if(c&&({dataFileHandleId:a,submitted:s}=c),a){const p=await zi(a,n);o=JSON.parse(p),s&&o&&o.metadata&&({formSchemaVersion:l,uiSchemaVersion:u,navSchemaVersion:f}=o.metadata)}const d=[this.getFileEntityDataDereferenced(n,this.props.formSchemaEntityId,l),Jr(n,this.props.formUiSchemaEntityId,u,this.onError),Jr(n,this.props.formNavSchemaEntityId,f,this.onError)],h=await Promise.all(d);a||(o={metadata:{formSchemaVersion:h[0].version,uiSchemaVersion:h[1].version,navSchemaVersion:h[2].version}}),this.setState({formData:o,formSchema:h[0].content,formUiSchema:h[1].content,formNavSchema:h[2].content,isLoading:!1})}catch(o){this.onError({message:o})}finally{this.setState({isLoading:!1})}},this.finishedProcessing=(n,o)=>{this.setState({isLoading:!1,notification:{type:n,message:o},status:n}),setTimeout(()=>{this.setState({status:void 0})},7e3)},this.onError=n=>{this.setState({notification:{type:k.ERROR,message:n.message,name:n.name},status:k.ERROR,isLoading:!1})},this.submitForm=async n=>{await this.saveToFile(n),this.setState({isLoading:!0}),await Gi(this.state.formDataId,this.props.token),this.finishedProcessing(k.SUBMIT_SUCCESS,"File Submitted")},this.createOrUpdateFormDataFile=async(n,o)=>{n=`${n}.json`;const a=await Ki(this.props.token,n,o),{searchParams:s}=this.props,l=s&&s.formGroupId;if(!l)throw console.error("formGroupId must be defined"),"formGroupId must be defined";try{const u=a.fileHandleId;let f;return this.state.formDataId?f=await Ji(this.state.formDataId,n,u,this.props.token):f=await Xi(l,n,u,this.props.token),f}catch(u){throw this.onError(u),u}},this.saveToFile=async n=>{const o=_e(n,this.props.fileNamePath);if(this.setState({status:k.PROGRESS,notification:{type:k.PROGRESS,message:"Progress"},isLoading:!0}),!o){let a="File Name";try{const s=`${this.props.fileNamePath.replace(".",".properties.")}.title`;a=_e(this.state.formSchema.properties,s,a)}finally{const s=`Please Provide the ${a} before saving`;this.onError({message:s})}return}try{const a=new Blob([JSON.stringify(n)],{type:"text/json"}),s=await this.createOrUpdateFormDataFile(o,a);this.setState({formDataId:s.formDataId}),this.finishedProcessing(k.SAVE_SUCCESS,"File Saved")}catch(a){this.onError({message:a})}},this.isReadyToDisplayForm=n=>this.state.status!==k.ERROR_CRITICAL&&n.formSchema&&n.formUiSchema&&n.formNavSchema&&n.formData,this.renderLoader=(n,o)=>oo([k.ERROR,k.ERROR_CRITICAL],n.status)&&o.token&&n.isLoading?m("div",{className:"text-center",children:m("span",{className:"spinner"})}):m(T,{}),this.renderNotification=n=>n?n.type===k.ERROR?x(Lt,{variant:"danger",onClose:()=>this.setState({status:void 0}),children:[m(Lt.Heading,{children:"Error"}),x("p",{children:[n.name," ",n.message]})]}):m(T,{}):m(T,{}),this.renderUnauthenticatedView=n=>n?m(T,{}):x("div",{className:"panel padding-full unauthenticated text-center bootstrap-4-backport",children:["Please",m(lo,{variant:"light-primary-base",style:{margin:"10px"},className:`pill ${Qi}`,children:"sign in"}),"to initiate or continue your submission"]}),this.state={isLoading:!0,formDataId:(i=(t=this.props)==null?void 0:t.searchParams)==null?void 0:i.formDataId}}async componentDidMount(){await this.getData(this.props.token)}async componentDidUpdate(r){this.props.token!==r.token&&await this.getData(this.props.token)}render(){return m("div",{className:`theme-${this.props.formClass}`,children:x("div",{className:"SRC-ReactJsonForm",children:[this.renderNotification(this.state.notification),this.renderLoader(this.state,this.props),this.renderUnauthenticatedView(this.props.token),this.isReadyToDisplayForm(this.state)&&m("div",{children:m(yr,{schema:this.state.formSchema,uiSchema:this.state.formUiSchema,formData:this.state.formData,navSchema:this.state.formNavSchema,isWizardMode:this.props.isWizardMode,formTitle:this.props.formTitle,formClass:this.props.formClass,callbackStatus:this.state.status,onSave:r=>this.saveToFile(r),onSubmit:r=>this.submitForm(r),isSubmitted:this.props.searchParams&&!!this.props.searchParams.submitted})})]})})}}const Ui=Sr;try{Sr.displayName="SynapseFormWrapper",Sr.__docgenInfo={description:"",displayName:"SynapseFormWrapper",props:{formSchemaEntityId:{defaultValue:null,description:"",name:"formSchemaEntityId",required:!0,type:{name:"string"}},formUiSchemaEntityId:{defaultValue:null,description:"",name:"formUiSchemaEntityId",required:!0,type:{name:"string"}},formNavSchemaEntityId:{defaultValue:null,description:"",name:"formNavSchemaEntityId",required:!0,type:{name:"string"}},token:{defaultValue:null,description:"",name:"token",required:!1,type:{name:"string"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"UploadToolSearchParams"}},isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}},fileNamePath:{defaultValue:null,description:"",name:"fileNamePath",required:!0,type:{name:"string"}},formTitle:{defaultValue:null,description:"",name:"formTitle",required:!0,type:{name:"string"}},formClass:{defaultValue:null,description:"",name:"formClass",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/SynapseFormWrapper.tsx#SynapseFormWrapper"]={docgenInfo:Sr.__docgenInfo,name:"SynapseFormWrapper",path:"src/lib/containers/synapse_form_wrapper/SynapseFormWrapper.tsx#SynapseFormWrapper"})}catch{}const _h={parameters:{storySource:{source:`import React from 'react'
import { ComponentStory, ComponentMeta } from '@storybook/react'
import SynapseFormWrapper from './SynapseFormWrapper'
import { SynapseContextConsumer } from '../../utils/SynapseContext'

export default {
  title: 'Synapse/SynapseFormWrapper',
  component: SynapseFormWrapper,
} as ComponentMeta<typeof SynapseFormWrapper>

const Template: ComponentStory<typeof SynapseFormWrapper> = args => (
  <SynapseContextConsumer>
    {synapseContext => (
      <SynapseFormWrapper {...args} token={synapseContext?.accessToken} />
    )}
  </SynapseContextConsumer>
)

export const Demo = Template.bind({})
Demo.args = {
  formTitle: 'Your Contribution Request',
  formClass: 'contribution-request',
  formSchemaEntityId: 'syn20692910',
  fileNamePath: 'study.submission_name',
  formUiSchemaEntityId: 'syn20692911',
  formNavSchemaEntityId: 'syn20968007',
  isWizardMode: true,
}
`,locationsMap:{demo:{startLoc:{col:60,line:11},endLoc:{col:1,line:17},startBody:{col:60,line:11},endBody:{col:1,line:17}}}}},title:"Synapse/SynapseFormWrapper",component:Ui},ud=e=>m(Zi,{children:r=>m(Ui,{...e,token:r==null?void 0:r.accessToken})}),cd=ud.bind({});cd.args={formTitle:"Your Contribution Request",formClass:"contribution-request",formSchemaEntityId:"syn20692910",fileNamePath:"study.submission_name",formUiSchemaEntityId:"syn20692911",formNavSchemaEntityId:"syn20968007",isWizardMode:!0};const wh=["Demo"];export{cd as Demo,wh as __namedExportsOrder,_h as default};
