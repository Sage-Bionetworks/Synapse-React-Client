import{h as c,bT as D,k as S,bU as A,bV as E,R as C,bW as I,bX as l,bY as R}from"./index.c07b435e.js";import{u as T}from"./useInfiniteQuery.3fef2ad0.js";import{u as _}from"./useMutation.0c99a4c1.js";import{D as b}from"./EntityChildren.50133102.js";import{r as m}from"./jsx-runtime.a1d381ad.js";function p(s,n,e,t,r,u){const{accessToken:i}=c();return T(["forumthread","infinite",s,n,r,e,t],async a=>D(i,s,a.pageParam,n,e,t,r),{...u,getNextPageParam:(a,o)=>{if(a.results.length>0)return o.length*n}})}function M(s,n){const{accessToken:e}=c();return S(["thread",s],()=>A(s,e),n)}function v(s,n,e,t,r,u){const{accessToken:i}=c();return T(["forumthread","infinite",s,e,r,t,n],async a=>E(i,s,e,a.pageParam,t,n,r),{...u,getNextPageParam:(a,o)=>{if(a.results.length>0)return o.length*e}})}var d=(s=>(s.FORUM="FORUM",s.THREAD="THREAD",s.DATA_ACCESS_SUBMISSION="DATA_ACCESS_SUBMISSION",s.DATA_ACCESS_SUBMISSION_STATUS="DATA_ACCESS_SUBMISSION_STATUS",s))(d||{}),f=(s=>(s.SUBSCRIPTION_ID="SUBSCRIPTION_ID",s.SUBSCRIBER_ID="SUBSCRIBER_ID",s.OBJECT_ID="OBJECT_ID",s.OBJECT_TYPE="OBJECT_TYPE",s.CREATED_ON="CREATED_ON",s))(f||{});function U(s,n,e){const{accessToken:t}=c();return S([t,"subscription",s,n],async()=>{const u={objectType:n,idList:[s],sortByType:f.OBJECT_ID,sortDirection:b.ASC};return(await R(t,u)).results[0]},e)}function B(s){const n=C(),{accessToken:e}=c();return _(t=>I(e,t),{...s,onSuccess:async(t,r,u)=>{await n.invalidateQueries([e,"subscription"]),s!=null&&s.onSuccess&&await s.onSuccess(t,r,u)}})}function O(s){const n=C(),{accessToken:e}=c();return _(t=>l(e,t),{...s,onSuccess:async(t,r,u)=>{await n.invalidateQueries([e,"subscription"]),s!=null&&s.onSuccess&&await s.onSuccess(t,r,u)}})}const F=(s,n)=>{const{data:e,isLoading:t}=U(s,n),{mutate:r,isLoading:u}=B(),{mutate:i,isLoading:a}=O(),o=t||u||a,g=m.exports.useCallback(()=>{e?i(e.subscriptionId):r({objectId:s,objectType:n})},[i,s,n,r,e]);return{isLoading:o,subscription:e,toggleSubscribed:g}};export{d as S,F as a,v as b,p as c,M as u};
