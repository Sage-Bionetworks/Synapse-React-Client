import{r as i,j as t,F as O,a as g}from"./jsx-runtime.189701ee.js";import{I as A}from"./IconSvg.b4c3e826.js";import{a as U}from"./CardContainerLogic.036c84c3.js";import{a2 as v}from"./index.8c58329a.js";import{U as N}from"./UserSearchBoxV2.841fb560.js";import{M as h}from"./Modal.d9737342.js";import{s as $}from"./startCase.aeca1d05.js";import{T as B}from"./Tooltip.23ad89d7.js";const V=["title","bold","italic","strikethrough","code","latex","subscript","superscript","link","image"],C={title:{openSyntax:"###",closeSyntax:""},bold:{openSyntax:"**",closeSyntax:"**"},italic:{openSyntax:"_",closeSyntax:"_"},strikethrough:{openSyntax:"--",closeSyntax:"--"},code:{openSyntax:"```",closeSyntax:"```"},latex:{openSyntax:"$$\\(",closeSyntax:"\\)$$"},subscript:{openSyntax:"~",closeSyntax:"~"},superscript:{openSyntax:"^",closeSyntax:"^"},link:{openSyntax:"[",closeSyntax:"](url)"},image:{openSyntax:"![",closeSyntax:"](image-url)"}},x=({show:r,onClose:n,handleUserTag:s})=>{const p=i.exports.useCallback((y,c)=>{y&&c&&s(c.userName),n()},[n,s]);return t(O,{children:g(h,{show:r,onHide:n,backdrop:"static",animation:!1,children:[t(h.Header,{closeButton:!0,children:t(h.Title,{children:"Find User or Team"})}),t(h.Body,{children:t(N,{placeholder:"Search for a user or team name",onChange:p,typeFilter:v.USERS_ONLY})})]})})};try{x.displayName="UserMentionModal",x.__docgenInfo={description:"",displayName:"UserMentionModal",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},handleUserTag:{defaultValue:null,description:"",name:"handleUserTag",required:!0,type:{name:"(user: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/UserMentionModal.tsx#UserMentionModal"]={docgenInfo:x.__docgenInfo,name:"UserMentionModal",path:"src/lib/containers/markdown/UserMentionModal.tsx#UserMentionModal"})}catch{}var E=(r=>(r.WRITE="WRITE",r.PREVIEW="PREVIEW",r))(E||{});const _=({placeholder:r,text:n,setText:s})=>{const[p,y]=i.exports.useState("WRITE"),[c,M]=i.exports.useState(0),[T,k]=i.exports.useState(!1),l=i.exports.useRef(null);i.exports.useEffect(()=>{const e=l.current;e&&e.setSelectionRange(c,c)},[l,c]),i.exports.useEffect(()=>{var e;(e=l.current)==null||e.focus()},[T]);const R=e=>{const o=[],a=l.current;if(a){const d=a==null?void 0:a.selectionStart,u=n.substring(0,d),S=n.substring(d,n.length);M(d+e.length+1),o.push(u,`@${e}`,S)}s(o.join(""))},I=e=>{const o=l.current;if(o){const a=o.selectionStart,d=o.selectionEnd,u=n.substring(a,d),S=n.substring(0,a),b=n.substring(d,n.length),m=C[e].openSyntax,w=C[e].closeSyntax;switch(e){case"code":{const f=[];f.push(S,m,u,w,b),s(f.join(`\r
`)),o.focus(),M(a+m.length+2);break}case"title":case"bold":case"italic":case"strikethrough":case"latex":case"subscript":case"superscript":case"link":case"image":{const f=`${S}${m}${u}${w}${b}`;o.focus(),M(a+m.length),s(f)}}}};return g("div",{className:"bootstrap-4-backport MarkdownEditor",children:[g("div",{className:"MarkdownEditorControls",children:[t("div",{className:"Tabs",children:Object.keys(E).map(e=>t("button",{className:"Tab",role:"tab","aria-selected":e===p,onClick:o=>{o.stopPropagation(),y(E[e])},children:e},e))}),p==="WRITE"&&g("div",{className:"MarkdownEditorControlsToolbar",children:[V.map(e=>t("button",{onClick:()=>I(e),children:t(A,{options:{icon:e,label:$(e)}})},e)),t(B,{placement:"top",title:"Mention",children:t("button",{className:"tag",onClick:()=>k(!0),children:"@"})})]})]}),t("div",{children:p==="WRITE"?t("textarea",{onChange:e=>s(e.target.value),style:{width:"100%"},rows:6,value:n,ref:l,placeholder:r}):n?t(U,{markdown:n}):"Nothing to preview"}),t(x,{show:T,onClose:()=>k(!1),handleUserTag:R})]})};try{_.displayName="MarkdownEditor",_.__docgenInfo={description:"",displayName:"MarkdownEditor",props:{placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},setText:{defaultValue:null,description:"",name:"setText",required:!0,type:{name:"(text: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/MarkdownEditor.tsx#MarkdownEditor"]={docgenInfo:_.__docgenInfo,name:"MarkdownEditor",path:"src/lib/containers/markdown/MarkdownEditor.tsx#MarkdownEditor"})}catch{}export{_ as M};
