import"./assert.5b8bcf86.js";import{s as v,B,J as w,$ as V}from"./index.6d910eba.js";import{a as U,E as F}from"./useUserBundle.d80d2782.js";import{c as H,g as c}from"./useGetQueryResultBundle.8fa45b5b.js";import{u as K}from"./useShowDesktop.09cba887.js";import{E as P}from"./ExpandableContent.d42f8e6c.js";import{Q as O}from"./QueryCount.0ad01a8f.js";import{j as t,a as n}from"./jsx-runtime.2e925369.js";import{B as T}from"./Button.77571428.js";import"./iframe.0ff191b8.js";import"./index.8cde812d.js";import"./getEndpoint.0de7fccf.js";import"./SvgIcon.1f1b3522.js";import"./objectWithoutPropertiesLoose.d29fb19f.js";import"./toConsumableArray.5f669646.js";import"./withStyles.4f64abe1.js";import"./index.f252d424.js";import"./FormLabel.a635baa2.js";import"./index.06f4a415.js";import"./createWithBsPrefix.f7715523.js";import"./Alert.ad748791.js";import"./Fade.7bfbed49.js";import"./Transition.f54f11c8.js";import"./_Uint8Array.692793fe.js";import"./isObject.7e2c8eb3.js";import"./isArray.949e1480.js";import"./useInfiniteQuery.b06c24cc.js";import"./queryKeys.e0d3085f.js";import"./IconSvg.d5022c82.js";import"./utils.ebacc06c.js";import"./useTheme.735ed160.js";import"./makeStyles.5f6bad01.js";import"./createSvgIcon.53013205.js";import"./InfoOutlined.748401db.js";import"./Clear.53a62cf5.js";import"./sqlFunctions.9bad0aa7.js";import"./RegularExpressions.b87376bf.js";function _({link:s,summary:r,countSql:i,title:l}){return t(P,{title:n("div",{className:"Goals__Mobile__Header",children:[i&&t("span",{className:"Goals__Mobile__Header__Count",children:t(O,{parens:!1,sql:i})}),n("span",{className:"Goals__Mobile__Header__Title",children:[" ",l," "]})]}),content:n("div",{className:"Goals__Mobile__Content bootstrap-4-backport",children:[t("p",{children:r}),t(T,{variant:"secondary",className:"pill Goals__Mobile__Content__Link",href:s,children:"EXPLORE"})]})})}try{_.displayName="GoalsMobile",_.__docgenInfo={description:"",displayName:"GoalsMobile",props:{countSql:{defaultValue:null,description:"",name:"countSql",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"string"}},link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},asset:{defaultValue:null,description:"",name:"asset",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/home_page/goals/Goals.Mobile.tsx#GoalsMobile"]={docgenInfo:_.__docgenInfo,name:"GoalsMobile",path:"src/lib/containers/home_page/goals/Goals.Mobile.tsx#GoalsMobile"})}catch{}function y({asset:s,link:r,summary:i,countSql:l,title:m}){return n("div",{className:"Goals__Card bootstrap-4-backport",children:[t("div",{className:"Goals__Card__header",style:{background:`url('${s}')`},children:n("p",{children:[n("span",{className:"Goals__Card__header__title",children:[" ",m," "]}),l&&t("span",{className:"Goals__Card__header__count",children:t(O,{parens:!1,sql:l})})]})}),n("div",{className:"Goals__Card__summary",children:[n("p",{children:[" ",i," "]}),t(T,{className:"pill Goals__Card__summary__link",variant:"secondary",href:r,children:"EXPLORE"})]})]})}try{y.displayName="GoalsDesktop",y.__docgenInfo={description:"",displayName:"GoalsDesktop",props:{countSql:{defaultValue:null,description:"",name:"countSql",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"string"}},link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},asset:{defaultValue:null,description:"",name:"asset",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/home_page/goals/Goals.Desktop.tsx#GoalsDesktop"]={docgenInfo:y.__docgenInfo,name:"GoalsDesktop",path:"src/lib/containers/home_page/goals/Goals.Desktop.tsx#GoalsDesktop"})}catch{}const Y=window.React.useEffect,I=window.React.useState,f=s=>{const{entityId:r}=s,{accessToken:i}=U(),[l,m]=I(),[g,b]=I(),h=K(),x={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:r,partMask:v|B,query:{sql:`select * from ${r} order by ItemOrder`}},{data:e}=H(x);Y(()=>{(async()=>{var u;try{const o=c("Asset",e),d=(u=e==null?void 0:e.queryResult.queryResults.rows.map(a=>a.values[o]))!=null?u:[];if(d.length===0)return;const p=d.map(a=>({associateObjectId:r,associateObjectType:w.TableEntity,fileHandleId:a})),G=await V({includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:p},i);b(void 0),m(G.requestedFiles.filter(a=>a.preSignedURL!==void 0).map(a=>a.preSignedURL))}catch(o){console.error("Error on get data",o),b(o)}})()},[r,i,e]);const C=c("TableId",e),S=c("CountSql",e),M=c("Title",e),N=c("Summary",e),D=c("Link",e);return n("div",{className:`Goals${h?"__Desktop":""}`,children:[g&&t(F,{error:g}),e==null?void 0:e.queryResult.queryResults.rows.map((E,u)=>{var k;const o=E.values,d=C>-1?o[C]:void 0;let p;S>-1&&o[S]?p=o[S]:d&&(p=`SELECT * FROM ${d}`);const R=o[M],G=o[N],a=o[D],A=(k=l==null?void 0:l[u])!=null?k:"",q={countSql:p,title:R,summary:G,link:a,asset:A};return h?t(y,{...q}):t(_,{...q})})]})};var L=f;try{f.displayName="Goals",f.__docgenInfo={description:"",displayName:"Goals",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/home_page/goals/Goals.tsx#Goals"]={docgenInfo:f.__docgenInfo,name:"Goals",path:"src/lib/containers/home_page/goals/Goals.tsx#Goals"})}catch{}var xe={parameters:{storySource:{source:`import React from 'react'
import { ComponentStory, ComponentMeta } from '@storybook/react'
import Goals from './Goals'

export default {
  title: 'Home Page/Goals',
  component: Goals,
} as ComponentMeta<typeof Goals>

const Template: ComponentStory<typeof Goals> = args => <Goals {...args} />

export const Demo = Template.bind({})
Demo.args = {
  entityId: 'syn22315959',
}
`,locationsMap:{demo:{startLoc:{col:47,line:10},endLoc:{col:74,line:10},startBody:{col:47,line:10},endBody:{col:74,line:10}}}}},title:"Home Page/Goals",component:L};const Q=s=>t(L,{...s}),$=Q.bind({});$.args={entityId:"syn22315959"};const Me=["Demo"];export{$ as Demo,Me as __namedExportsOrder,xe as default};
//# sourceMappingURL=Goals.stories.5f9dd1dc.js.map
