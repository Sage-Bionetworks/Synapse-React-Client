import{r as n,j as A}from"./jsx-runtime.bdebd148.js";import{_ as de,f as u,h as le,b as C,i as fe,u as Se,S as me,e as he}from"./Select-54ac8379.esm.8753c42f.js";import"./index.131112ec.js";import{h as Oe,cf as ge,ci as ve}from"./index.8be8b52c.js";import{a as _e}from"./useGetAccessRequirement.71137bf5.js";import{S as xe}from"./Skeleton.8bc2d5f2.js";var Ie=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function ye(t){var a=t.defaultOptions,e=a===void 0?!1:a,d=t.cacheOptions,l=d===void 0?!1:d,f=t.loadOptions;t.options;var i=t.isLoading,R=i===void 0?!1:i,_=t.onInputChange,m=t.filterOption,x=m===void 0?null:m,o=de(t,Ie),h=o.inputValue,r=n.exports.useRef(void 0),p=n.exports.useRef(!1),I=n.exports.useState(Array.isArray(e)?e:void 0),c=u(I,2),z=c[0],T=c[1],F=n.exports.useState(typeof h<"u"?h:""),N=u(F,2),j=N[0],L=N[1],H=n.exports.useState(e===!0),w=u(H,2),J=w[0],O=w[1],Q=n.exports.useState(void 0),D=u(Q,2),q=D[0],b=D[1],U=n.exports.useState([]),k=u(U,2),X=k[0],B=k[1],Z=n.exports.useState(!1),K=u(Z,2),ee=K[0],y=K[1],te=n.exports.useState({}),M=u(te,2),g=M[0],Y=M[1],ne=n.exports.useState(void 0),G=u(ne,2),ae=G[0],se=G[1],re=n.exports.useState(void 0),W=u(re,2),oe=W[0],ie=W[1];l!==oe&&(Y({}),ie(l)),e!==ae&&(T(Array.isArray(e)?e:void 0),se(e)),n.exports.useEffect(function(){return p.current=!0,function(){p.current=!1}},[]);var V=n.exports.useCallback(function(v,S){if(!f)return S();var s=f(v,S);s&&typeof s.then=="function"&&s.then(S,function(){return S()})},[f]);n.exports.useEffect(function(){e===!0&&V(j,function(v){!p.current||(T(v||[]),O(!!r.current))})},[]);var ue=n.exports.useCallback(function(v,S){var s=le(v,S,_);if(!s){r.current=void 0,L(""),b(""),B([]),O(!1),y(!1);return}if(l&&g[s])L(s),b(s),B(g[s]),O(!1),y(!1);else{var ce=r.current={};L(s),O(!0),y(!q),V(s,function(E){!p||ce===r.current&&(r.current=void 0,O(!1),b(s),B(E||[]),y(!1),Y(E?C(C({},g),{},fe({},s,E)):g))})}},[l,V,q,g,_]),pe=ee?[]:j&&q?X:z||[];return C(C({},o),{},{options:pe,isLoading:J||R,onInputChange:ue,filterOption:x})}var Ce=n.exports.forwardRef(function(t,a){var e=ye(t),d=Se(e);return A(me,{ref:a,...d})});const Ae=Ce;function P(t,a){return t.toString()===a?a:`${a} (${t})`}const Re={Control:t=>{var a;return A(he.Control,{...t,className:`form-control ${(a=t.className)!=null?a:""}`})}};function $(t){var m,x;const{inputId:a,initialId:e,onChange:d,placeholder:l}=t,{accessToken:f}=Oe(),{data:i,isLoading:R}=_e(e,{enabled:!!e});async function _(o){var p,I;const h=parseInt(o);let r;return h&&(r=[await ge(f,h)]),r||(r=(p=await ve(f,{nameContains:o}))==null?void 0:p.results),(I=r==null?void 0:r.map(c=>({id:c.id.toString(),value:c.id.toString(),label:P(c.id,c.name)})))!=null?I:[]}return e&&R?A(xe,{width:"100%"}):A(Ae,{className:"bootstrap-4-backport",defaultInputValue:e?P(e,(m=i==null?void 0:i.name)!=null?m:e.toString()):void 0,defaultOptions:e?[{id:e,value:e,label:P(e,(x=i==null?void 0:i.name)!=null?x:e.toString())}]:!0,inputId:a,cacheOptions:!0,isClearable:!0,styles:{control:o=>({...o,display:"flex !important"})},components:Re,loadOptions:_,onChange:o=>{d(o==null?void 0:o.id.toString())},placeholder:l})}try{$.displayName="AccessRequirementSearchBox",$.__docgenInfo={description:"",displayName:"AccessRequirementSearchBox",props:{inputId:{defaultValue:null,description:"",name:"inputId",required:!1,type:{name:"string"}},initialId:{defaultValue:null,description:"",name:"initialId",required:!1,type:{name:"string | number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(accessRequirementId?: string | undefined) => void"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/dataaccess/AccessRequirementSearchBox.tsx#AccessRequirementSearchBox"]={docgenInfo:$.__docgenInfo,name:"AccessRequirementSearchBox",path:"src/lib/containers/dataaccess/AccessRequirementSearchBox.tsx#AccessRequirementSearchBox"})}catch{}export{$ as A};
