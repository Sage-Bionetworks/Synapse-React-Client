import{j as N,a as ne,F as fe}from"./jsx-runtime.00d70968.js";import{h as kd}from"./moment.a565bb48.js";import{f as Md}from"./DateFormatter.39210394.js";import{aD as Id,b7 as Dd,f as Rd,aV as Td,cF as Xi,H as $d}from"./index.059e0d20.js";import{k as Ad}from"./ToastMessage.0ffd35ff.js";import{d as zn}from"./Tooltip.02f85a09.js";import{T as Fo}from"./Typography.9748340b.js";import{b as Ld}from"./UserCard.0ffebfe2.js";import{e as $c,E as Gi,b as zd}from"./EntityTypeUtils.c1fb28b9.js";import{P as Bd}from"./getEndpoint.bb7ded34.js";import"./assert.277c07bd.js";import{E as Ki}from"./EntityIcon.0f44d705.js";import{I as di}from"./IconSvg.45071707.js";import{p as Vd}from"./pluralize.f3ebeddd.js";import{ab as ct,ac as jd,j as tn,ad as Hd,O as Ac,ae as Yd,af as qd,ag as Ud,X as Fd,Y as Xd,$ as Lc,ah as Gd,ai as Kd,a0 as Zd,e as zc,aj as Bc,a2 as Wd,ak as fi,J as hi,al as Vc,P as jc,am as Qd,an as Jd,a6 as Hc,ao as ef,R as tf,ap as nf,aq as rf,m as of,V as af}from"./iframe.addcd329.js";import{_ as sf,f as Yc,a as qc,b as cf,c as uf,d as lf,e as df,g as ff,h as hf,i as vf,j as pf,k as gf,l as mf,s as yf}from"./sortBy.7c380975.js";import{i as bf,u as wf}from"./union.5c975efd.js";import{i as Ef}from"./isString.f1a909dc.js";import{c as Sf}from"./_copyArray.e9e4f405.js";import{H as xf}from"./HelpPopover.d50fa45f.js";import{d as _f}from"./differenceWith.125f3601.js";import{i as Cf}from"./isEqual.c3ab29e1.js";import{u as Nf}from"./useGetEntityHeaders.b5450c3a.js";import{w as Of,b as Zi,d as Pf,_ as kf}from"./withStyles.d6b2de44.js";import{_ as Mf}from"./objectWithoutProperties.a0dea5ce.js";import"./FullWidthAlert.a73af62a.js";import"./objectWithoutPropertiesLoose.5e7699d1.js";import"./index.57d09176.js";import"./Button.fda23eee.js";import"./index.35ce73ec.js";import"./SvgIcon.5d5878ed.js";import"./createClass.67a84016.js";import"./slicedToArray.e9a7fa03.js";import"./toConsumableArray.8f496188.js";import"./makeStyles.2422b359.js";import"./IconCopy.095bf867.js";import"./SkeletonTable.d7bc91d1.js";import"./times.7c60ecae.js";import"./toInteger.26df0eb9.js";import"./Skeleton.88496afb.js";import"./Overlay.3297046e.js";import"./useWaitForDOMRef.d07b3a07.js";import"./usePopperMarginModifiers.1c4b2def.js";import"./FileEntity.69b7bd86.js";import"./TypeUtils.a2c41307.js";import"./InfoOutlined.303a7ed9.js";import"./MarkdownPopover.a64897ce.js";import"./MarkdownSynapse.ee5cf257.js";import"./factory.875690b2.js";import"./sqlFunctions.59c64146.js";import"./SynapseVideo.d12575c5.js";import"./react-intersection-observer.esm.e445ee86.js";import"./index.128923a6.js";import"./index.c68ec8b9.js";import"./index.66e0b57e.js";import"./index.440cefe9.js";import"./_baseDifference.66c4a72c.js";import"./_cacheHas.af935b3d.js";import"./_baseIsEqual.49cbb44a.js";import"./_setToArray.a82100c8.js";const If=window.React;var He=44,Df=function(t){return{root:{display:"inline-block"},static:{transition:t.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:t.transitions.create("transform")},colorPrimary:{color:t.palette.primary.main},colorSecondary:{color:t.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:t.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:t.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}},Rf=If.forwardRef(function(t,n){var r=t.classes,o=t.className,i=t.color,a=i===void 0?"primary":i,s=t.disableShrink,u=s===void 0?!1:s,l=t.size,c=l===void 0?40:l,d=t.style,f=t.thickness,h=f===void 0?3.6:f,v=t.value,p=v===void 0?0:v,y=t.variant,m=y===void 0?"indeterminate":y,x=Mf(t,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),E={},b={},w={};if(m==="determinate"||m==="static"){var _=2*Math.PI*((He-h)/2);E.strokeDasharray=_.toFixed(3),w["aria-valuenow"]=Math.round(p),E.strokeDashoffset="".concat(((100-p)/100*_).toFixed(3),"px"),b.transform="rotate(-90deg)"}return N("div",{className:Zi(r.root,o,a!=="inherit"&&r["color".concat(Pf(a))],{determinate:r.determinate,indeterminate:r.indeterminate,static:r.static}[m]),style:kf({width:c,height:c},b,d),ref:n,role:"progressbar",...w,...x,children:N("svg",{className:r.svg,viewBox:"".concat(He/2," ").concat(He/2," ").concat(He," ").concat(He),children:N("circle",{className:Zi(r.circle,u&&r.circleDisableShrink,{determinate:r.circleDeterminate,indeterminate:r.circleIndeterminate,static:r.circleStatic}[m]),style:E,cx:He,cy:He,r:(He-h)/2,fill:"none",strokeWidth:h})})})});const Tf=Of(Df,{name:"MuiCircularProgress",flip:!1})(Rf),$f=window.React.useReducer,vt=window.React.useRef,Af=window.React.useDebugValue,Lf=window.React.useEffect,zf=window.React.useLayoutEffect;function Bf(e){let t;const n=new Set,r=(l,c)=>{const d=typeof l=="function"?l(t):l;if(d!==t){const f=t;t=c?d:Object.assign({},t,d),n.forEach(h=>h(t,f))}},o=()=>t,i=(l,c=o,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=c(t);function h(){const v=c(t);if(!d(f,v)){const p=f;l(f=v,p)}}return n.add(h),()=>n.delete(h)},u={setState:r,getState:o,subscribe:(l,c,d)=>c||d?i(l,c,d):(n.add(l),()=>n.delete(l)),destroy:()=>n.clear()};return t=e(r,o,u),u}const Vf=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Wi=Vf?Lf:zf;function jf(e){const t=typeof e=="function"?Bf(e):e,n=(r=t.getState,o=Object.is)=>{const[,i]=$f(y=>y+1,0),a=t.getState(),s=vt(a),u=vt(r),l=vt(o),c=vt(!1),d=vt();d.current===void 0&&(d.current=r(a));let f,h=!1;(s.current!==a||u.current!==r||l.current!==o||c.current)&&(f=r(a),h=!o(d.current,f)),Wi(()=>{h&&(d.current=f),s.current=a,u.current=r,l.current=o,c.current=!1});const v=vt(a);Wi(()=>{const y=()=>{try{const x=t.getState(),E=u.current(x);l.current(d.current,E)||(s.current=x,d.current=E,i())}catch{c.current=!0,i()}},m=t.subscribe(y);return t.getState()!==v.current&&y(),m},[]);const p=h?f:d.current;return Af(p),p};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,t];return{next(){const o=r.length<=0;return{value:r.shift(),done:o}}}},n}const Hf=window.React.createContext,Yf=window.React.useRef,qf=window.React.createElement,Qi=window.React.useContext,Uf=window.React.useMemo;function Ff(){const e=Hf(void 0);return{Provider:({initialStore:o,createStore:i,children:a})=>{const s=Yf();return s.current||(o&&(console.warn("Provider initialStore is deprecated and will be removed in the next version."),i||(i=()=>o)),s.current=i()),qf(e.Provider,{value:s.current},a)},useStore:(o,i=Object.is)=>{const a=Qi(e);if(!a)throw new Error("Seems like you have not used zustand provider as an ancestor.");return a(o,i)},useStoreApi:()=>{const o=Qi(e);if(!o)throw new Error("Seems like you have not used zustand provider as an ancestor.");return Uf(()=>({getState:o.getState,setState:o.setState,subscribe:o.subscribe,destroy:o.destroy}),[o])}}}var Xf={value:()=>{}};function er(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new On(n)}function On(e){this._=e}function Gf(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}On.prototype=er.prototype={constructor:On,on:function(e,t){var n=this._,r=Gf(e+"",n),o,i=-1,a=r.length;if(arguments.length<2){for(;++i<a;)if((o=(e=r[i]).type)&&(o=Kf(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(o=(e=r[i]).type)n[o]=Ji(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Ji(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new On(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function Kf(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Ji(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Xf,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Xo="http://www.w3.org/1999/xhtml";const ea={svg:"http://www.w3.org/2000/svg",xhtml:Xo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ea.hasOwnProperty(t)?{space:ea[t],local:e}:e}function Zf(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Xo&&t.documentElement.namespaceURI===Xo?t.createElement(e):t.createElementNS(n,e)}}function Wf(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Uc(e){var t=tr(e);return(t.local?Wf:Zf)(t)}function Qf(){}function vi(e){return e==null?Qf:function(){return this.querySelector(e)}}function Jf(e){typeof e!="function"&&(e=vi(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,s=r[o]=new Array(a),u,l,c=0;c<a;++c)(u=i[c])&&(l=e.call(u,u.__data__,c,i))&&("__data__"in u&&(l.__data__=u.__data__),s[c]=l);return new pe(r,this._parents)}function eh(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function th(){return[]}function Fc(e){return e==null?th:function(){return this.querySelectorAll(e)}}function nh(e){return function(){return eh(e.apply(this,arguments))}}function rh(e){typeof e=="function"?e=nh(e):e=Fc(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var a=t[i],s=a.length,u,l=0;l<s;++l)(u=a[l])&&(r.push(e.call(u,u.__data__,l,a)),o.push(u));return new pe(r,o)}function Xc(e){return function(){return this.matches(e)}}function Gc(e){return function(t){return t.matches(e)}}var oh=Array.prototype.find;function ih(e){return function(){return oh.call(this.children,e)}}function ah(){return this.firstElementChild}function sh(e){return this.select(e==null?ah:ih(typeof e=="function"?e:Gc(e)))}var ch=Array.prototype.filter;function uh(){return Array.from(this.children)}function lh(e){return function(){return ch.call(this.children,e)}}function dh(e){return this.selectAll(e==null?uh:lh(typeof e=="function"?e:Gc(e)))}function fh(e){typeof e!="function"&&(e=Xc(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,s=r[o]=[],u,l=0;l<a;++l)(u=i[l])&&e.call(u,u.__data__,l,i)&&s.push(u);return new pe(r,this._parents)}function Kc(e){return new Array(e.length)}function hh(){return new pe(this._enter||this._groups.map(Kc),this._parents)}function Bn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Bn.prototype={constructor:Bn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function vh(e){return function(){return e}}function ph(e,t,n,r,o,i){for(var a=0,s,u=t.length,l=i.length;a<l;++a)(s=t[a])?(s.__data__=i[a],r[a]=s):n[a]=new Bn(e,i[a]);for(;a<u;++a)(s=t[a])&&(o[a]=s)}function gh(e,t,n,r,o,i,a){var s,u,l=new Map,c=t.length,d=i.length,f=new Array(c),h;for(s=0;s<c;++s)(u=t[s])&&(f[s]=h=a.call(u,u.__data__,s,t)+"",l.has(h)?o[s]=u:l.set(h,u));for(s=0;s<d;++s)h=a.call(e,i[s],s,i)+"",(u=l.get(h))?(r[s]=u,u.__data__=i[s],l.delete(h)):n[s]=new Bn(e,i[s]);for(s=0;s<c;++s)(u=t[s])&&l.get(f[s])===u&&(o[s]=u)}function mh(e){return e.__data__}function yh(e,t){if(!arguments.length)return Array.from(this,mh);var n=t?gh:ph,r=this._parents,o=this._groups;typeof e!="function"&&(e=vh(e));for(var i=o.length,a=new Array(i),s=new Array(i),u=new Array(i),l=0;l<i;++l){var c=r[l],d=o[l],f=d.length,h=bh(e.call(c,c&&c.__data__,l,r)),v=h.length,p=s[l]=new Array(v),y=a[l]=new Array(v),m=u[l]=new Array(f);n(c,d,p,y,m,h,t);for(var x=0,E=0,b,w;x<v;++x)if(b=p[x]){for(x>=E&&(E=x+1);!(w=y[E])&&++E<v;);b._next=w||null}}return a=new pe(a,r),a._enter=s,a._exit=u,a}function bh(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wh(){return new pe(this._exit||this._groups.map(Kc),this._parents)}function Eh(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function Sh(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,a=Math.min(o,i),s=new Array(o),u=0;u<a;++u)for(var l=n[u],c=r[u],d=l.length,f=s[u]=new Array(d),h,v=0;v<d;++v)(h=l[v]||c[v])&&(f[v]=h);for(;u<o;++u)s[u]=n[u];return new pe(s,this._parents)}function xh(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],a;--o>=0;)(a=r[o])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function _h(e){e||(e=Ch);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a=n[i],s=a.length,u=o[i]=new Array(s),l,c=0;c<s;++c)(l=a[c])&&(u[c]=l);u.sort(t)}return new pe(o,this._parents).order()}function Ch(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Nh(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Oh(){return Array.from(this)}function Ph(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null}function kh(){let e=0;for(const t of this)++e;return e}function Mh(){return!this.node()}function Ih(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,a=o.length,s;i<a;++i)(s=o[i])&&e.call(s,s.__data__,i,o);return this}function Dh(e){return function(){this.removeAttribute(e)}}function Rh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Th(e,t){return function(){this.setAttribute(e,t)}}function $h(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ah(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Lh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function zh(e,t){var n=tr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Rh:Dh:typeof t=="function"?n.local?Lh:Ah:n.local?$h:Th)(n,t))}function Zc(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Bh(e){return function(){this.style.removeProperty(e)}}function Vh(e,t,n){return function(){this.style.setProperty(e,t,n)}}function jh(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Hh(e,t,n){return arguments.length>1?this.each((t==null?Bh:typeof t=="function"?jh:Vh)(e,t,n==null?"":n)):Ct(this.node(),e)}function Ct(e,t){return e.style.getPropertyValue(t)||Zc(e).getComputedStyle(e,null).getPropertyValue(t)}function Yh(e){return function(){delete this[e]}}function qh(e,t){return function(){this[e]=t}}function Uh(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Fh(e,t){return arguments.length>1?this.each((t==null?Yh:typeof t=="function"?Uh:qh)(e,t)):this.node()[e]}function Wc(e){return e.trim().split(/^|\s+/)}function pi(e){return e.classList||new Qc(e)}function Qc(e){this._node=e,this._names=Wc(e.getAttribute("class")||"")}Qc.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Jc(e,t){for(var n=pi(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function eu(e,t){for(var n=pi(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Xh(e){return function(){Jc(this,e)}}function Gh(e){return function(){eu(this,e)}}function Kh(e,t){return function(){(t.apply(this,arguments)?Jc:eu)(this,e)}}function Zh(e,t){var n=Wc(e+"");if(arguments.length<2){for(var r=pi(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?Kh:t?Xh:Gh)(n,t))}function Wh(){this.textContent=""}function Qh(e){return function(){this.textContent=e}}function Jh(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function ev(e){return arguments.length?this.each(e==null?Wh:(typeof e=="function"?Jh:Qh)(e)):this.node().textContent}function tv(){this.innerHTML=""}function nv(e){return function(){this.innerHTML=e}}function rv(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function ov(e){return arguments.length?this.each(e==null?tv:(typeof e=="function"?rv:nv)(e)):this.node().innerHTML}function iv(){this.nextSibling&&this.parentNode.appendChild(this)}function av(){return this.each(iv)}function sv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function cv(){return this.each(sv)}function uv(e){var t=typeof e=="function"?e:Uc(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function lv(){return null}function dv(e,t){var n=typeof e=="function"?e:Uc(e),r=t==null?lv:typeof t=="function"?t:vi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function fv(){var e=this.parentNode;e&&e.removeChild(this)}function hv(){return this.each(fv)}function vv(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pv(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gv(e){return this.select(e?pv:vv)}function mv(e){return arguments.length?this.property("__data__",e):this.node().__data__}function yv(e){return function(t){e.call(this,t,this.__data__)}}function bv(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function wv(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function Ev(e,t,n){return function(){var r=this.__on,o,i=yv(t);if(r){for(var a=0,s=r.length;a<s;++a)if((o=r[a]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function Sv(e,t,n){var r=bv(e+""),o,i=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,c;u<l;++u)for(o=0,c=s[u];o<i;++o)if((a=r[o]).type===c.type&&a.name===c.name)return c.value}return}for(s=t?Ev:wv,o=0;o<i;++o)this.each(s(r[o],t,n));return this}function tu(e,t,n){var r=Zc(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function xv(e,t){return function(){return tu(this,e,t)}}function _v(e,t){return function(){return tu(this,e,t.apply(this,arguments))}}function Cv(e,t){return this.each((typeof t=="function"?_v:xv)(e,t))}function*Nv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,a;o<i;++o)(a=r[o])&&(yield a)}var nu=[null];function pe(e,t){this._groups=e,this._parents=t}function nn(){return new pe([[document.documentElement]],nu)}function Ov(){return this}pe.prototype=nn.prototype={constructor:pe,select:Jf,selectAll:rh,selectChild:sh,selectChildren:dh,filter:fh,data:yh,enter:hh,exit:wh,join:Eh,merge:Sh,selection:Ov,order:xh,sort:_h,call:Nh,nodes:Oh,node:Ph,size:kh,empty:Mh,each:Ih,attr:zh,style:Hh,property:Fh,classed:Zh,text:ev,html:ov,raise:av,lower:cv,append:uv,insert:dv,remove:hv,clone:gv,datum:mv,on:Sv,dispatch:Cv,[Symbol.iterator]:Nv};function be(e){return typeof e=="string"?new pe([[document.querySelector(e)]],[document.documentElement]):new pe([[e]],nu)}function Pv(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ce(e,t){if(e=Pv(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const kv={passive:!1},Kt={capture:!0,passive:!1};function fr(e){e.stopImmediatePropagation()}function Et(e){e.preventDefault(),e.stopImmediatePropagation()}function ru(e){var t=e.document.documentElement,n=be(e).on("dragstart.drag",Et,Kt);"onselectstart"in t?n.on("selectstart.drag",Et,Kt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ou(e,t){var n=e.document.documentElement,r=be(e).on("dragstart.drag",null);t&&(r.on("click.drag",Et,Kt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const vn=e=>()=>e;function Go(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:a,y:s,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}Go.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Mv(e){return!e.ctrlKey&&!e.button}function Iv(){return this.parentNode}function Dv(e,t){return t==null?{x:e.x,y:e.y}:t}function Rv(){return navigator.maxTouchPoints||"ontouchstart"in this}function Tv(){var e=Mv,t=Iv,n=Dv,r=Rv,o={},i=er("start","drag","end"),a=0,s,u,l,c,d=0;function f(b){b.on("mousedown.drag",h).filter(r).on("touchstart.drag",y).on("touchmove.drag",m,kv).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(b,w){if(!(c||!e.call(this,b,w))){var _=E(this,t.call(this,b,w),b,w,"mouse");!_||(be(b.view).on("mousemove.drag",v,Kt).on("mouseup.drag",p,Kt),ru(b.view),fr(b),l=!1,s=b.clientX,u=b.clientY,_("start",b))}}function v(b){if(Et(b),!l){var w=b.clientX-s,_=b.clientY-u;l=w*w+_*_>d}o.mouse("drag",b)}function p(b){be(b.view).on("mousemove.drag mouseup.drag",null),ou(b.view,l),Et(b),o.mouse("end",b)}function y(b,w){if(!!e.call(this,b,w)){var _=b.changedTouches,k=t.call(this,b,w),O=_.length,R,A;for(R=0;R<O;++R)(A=E(this,k,b,w,_[R].identifier,_[R]))&&(fr(b),A("start",b,_[R]))}}function m(b){var w=b.changedTouches,_=w.length,k,O;for(k=0;k<_;++k)(O=o[w[k].identifier])&&(Et(b),O("drag",b,w[k]))}function x(b){var w=b.changedTouches,_=w.length,k,O;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),k=0;k<_;++k)(O=o[w[k].identifier])&&(fr(b),O("end",b,w[k]))}function E(b,w,_,k,O,R){var A=i.copy(),$=Ce(R||_,w),V,B,g;if((g=n.call(b,new Go("beforestart",{sourceEvent:_,target:f,identifier:O,active:a,x:$[0],y:$[1],dx:0,dy:0,dispatch:A}),k))!=null)return V=g.x-$[0]||0,B=g.y-$[1]||0,function C(S,P,M){var T=$,I;switch(S){case"start":o[O]=C,I=a++;break;case"end":delete o[O],--a;case"drag":$=Ce(M||P,w),I=a;break}A.call(S,b,new Go(S,{sourceEvent:P,subject:g,target:f,identifier:O,active:I,x:$[0]+V,y:$[1]+B,dx:$[0]-T[0],dy:$[1]-T[1],dispatch:A}),k)}}return f.filter=function(b){return arguments.length?(e=typeof b=="function"?b:vn(!!b),f):e},f.container=function(b){return arguments.length?(t=typeof b=="function"?b:vn(b),f):t},f.subject=function(b){return arguments.length?(n=typeof b=="function"?b:vn(b),f):n},f.touchable=function(b){return arguments.length?(r=typeof b=="function"?b:vn(!!b),f):r},f.on=function(){var b=i.on.apply(i,arguments);return b===i?f:b},f.clickDistance=function(b){return arguments.length?(d=(b=+b)*b,f):Math.sqrt(d)},f}function gi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function iu(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function rn(){}var Zt=.7,Vn=1/Zt,St="\\s*([+-]?\\d+)\\s*",Wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$v=/^#([0-9a-f]{3,8})$/,Av=new RegExp(`^rgb\\(${St},${St},${St}\\)$`),Lv=new RegExp(`^rgb\\(${Oe},${Oe},${Oe}\\)$`),zv=new RegExp(`^rgba\\(${St},${St},${St},${Wt}\\)$`),Bv=new RegExp(`^rgba\\(${Oe},${Oe},${Oe},${Wt}\\)$`),Vv=new RegExp(`^hsl\\(${Wt},${Oe},${Oe}\\)$`),jv=new RegExp(`^hsla\\(${Wt},${Oe},${Oe},${Wt}\\)$`),ta={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gi(rn,Qt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:na,formatHex:na,formatHex8:Hv,formatHsl:Yv,formatRgb:ra,toString:ra});function na(){return this.rgb().formatHex()}function Hv(){return this.rgb().formatHex8()}function Yv(){return au(this).formatHsl()}function ra(){return this.rgb().formatRgb()}function Qt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=$v.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?oa(t):n===3?new de(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?pn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?pn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Av.exec(e))?new de(t[1],t[2],t[3],1):(t=Lv.exec(e))?new de(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=zv.exec(e))?pn(t[1],t[2],t[3],t[4]):(t=Bv.exec(e))?pn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Vv.exec(e))?sa(t[1],t[2]/100,t[3]/100,1):(t=jv.exec(e))?sa(t[1],t[2]/100,t[3]/100,t[4]):ta.hasOwnProperty(e)?oa(ta[e]):e==="transparent"?new de(NaN,NaN,NaN,0):null}function oa(e){return new de(e>>16&255,e>>8&255,e&255,1)}function pn(e,t,n,r){return r<=0&&(e=t=n=NaN),new de(e,t,n,r)}function qv(e){return e instanceof rn||(e=Qt(e)),e?(e=e.rgb(),new de(e.r,e.g,e.b,e.opacity)):new de}function Ko(e,t,n,r){return arguments.length===1?qv(e):new de(e,t,n,r==null?1:r)}function de(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}gi(de,Ko,iu(rn,{brighter(e){return e=e==null?Vn:Math.pow(Vn,e),new de(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Zt:Math.pow(Zt,e),new de(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new de(ot(this.r),ot(this.g),ot(this.b),jn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ia,formatHex:ia,formatHex8:Uv,formatRgb:aa,toString:aa}));function ia(){return`#${nt(this.r)}${nt(this.g)}${nt(this.b)}`}function Uv(){return`#${nt(this.r)}${nt(this.g)}${nt(this.b)}${nt((isNaN(this.opacity)?1:this.opacity)*255)}`}function aa(){const e=jn(this.opacity);return`${e===1?"rgb(":"rgba("}${ot(this.r)}, ${ot(this.g)}, ${ot(this.b)}${e===1?")":`, ${e})`}`}function jn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ot(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function nt(e){return e=ot(e),(e<16?"0":"")+e.toString(16)}function sa(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new we(e,t,n,r)}function au(e){if(e instanceof we)return new we(e.h,e.s,e.l,e.opacity);if(e instanceof rn||(e=Qt(e)),!e)return new we;if(e instanceof we)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,s=i-o,u=(i+o)/2;return s?(t===i?a=(n-r)/s+(n<r)*6:n===i?a=(r-t)/s+2:a=(t-n)/s+4,s/=u<.5?i+o:2-i-o,a*=60):s=u>0&&u<1?0:a,new we(a,s,u,e.opacity)}function Fv(e,t,n,r){return arguments.length===1?au(e):new we(e,t,n,r==null?1:r)}function we(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}gi(we,Fv,iu(rn,{brighter(e){return e=e==null?Vn:Math.pow(Vn,e),new we(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Zt:Math.pow(Zt,e),new we(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new de(hr(e>=240?e-240:e+120,o,r),hr(e,o,r),hr(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new we(ca(this.h),gn(this.s),gn(this.l),jn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=jn(this.opacity);return`${e===1?"hsl(":"hsla("}${ca(this.h)}, ${gn(this.s)*100}%, ${gn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ca(e){return e=(e||0)%360,e<0?e+360:e}function gn(e){return Math.max(0,Math.min(1,e||0))}function hr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const su=e=>()=>e;function Xv(e,t){return function(n){return e+n*t}}function Gv(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Kv(e){return(e=+e)==1?cu:function(t,n){return n-t?Gv(t,n,e):su(isNaN(t)?n:t)}}function cu(e,t){var n=t-e;return n?Xv(e,n):su(isNaN(e)?t:e)}const ua=function e(t){var n=Kv(t);function r(o,i){var a=n((o=Ko(o)).r,(i=Ko(i)).r),s=n(o.g,i.g),u=n(o.b,i.b),l=cu(o.opacity,i.opacity);return function(c){return o.r=a(c),o.g=s(c),o.b=u(c),o.opacity=l(c),o+""}}return r.gamma=e,r}(1);function Ue(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Zo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vr=new RegExp(Zo.source,"g");function Zv(e){return function(){return e}}function Wv(e){return function(t){return e(t)+""}}function Qv(e,t){var n=Zo.lastIndex=vr.lastIndex=0,r,o,i,a=-1,s=[],u=[];for(e=e+"",t=t+"";(r=Zo.exec(e))&&(o=vr.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),s[a]?s[a]+=i:s[++a]=i),(r=r[0])===(o=o[0])?s[a]?s[a]+=o:s[++a]=o:(s[++a]=null,u.push({i:a,x:Ue(r,o)})),n=vr.lastIndex;return n<t.length&&(i=t.slice(n),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?Wv(u[0].x):Zv(t):(t=u.length,function(l){for(var c=0,d;c<t;++c)s[(d=u[c]).i]=d.x(l);return s.join("")})}var la=180/Math.PI,Wo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uu(e,t,n,r,o,i){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*la,skewX:Math.atan(u)*la,scaleX:a,scaleY:s}}var mn;function Jv(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Wo:uu(t.a,t.b,t.c,t.d,t.e,t.f)}function ep(e){return e==null||(mn||(mn=document.createElementNS("http://www.w3.org/2000/svg","g")),mn.setAttribute("transform",e),!(e=mn.transform.baseVal.consolidate()))?Wo:(e=e.matrix,uu(e.a,e.b,e.c,e.d,e.e,e.f))}function lu(e,t,n,r){function o(l){return l.length?l.pop()+" ":""}function i(l,c,d,f,h,v){if(l!==d||c!==f){var p=h.push("translate(",null,t,null,n);v.push({i:p-4,x:Ue(l,d)},{i:p-2,x:Ue(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function a(l,c,d,f){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),f.push({i:d.push(o(d)+"rotate(",null,r)-2,x:Ue(l,c)})):c&&d.push(o(d)+"rotate("+c+r)}function s(l,c,d,f){l!==c?f.push({i:d.push(o(d)+"skewX(",null,r)-2,x:Ue(l,c)}):c&&d.push(o(d)+"skewX("+c+r)}function u(l,c,d,f,h,v){if(l!==d||c!==f){var p=h.push(o(h)+"scale(",null,",",null,")");v.push({i:p-4,x:Ue(l,d)},{i:p-2,x:Ue(c,f)})}else(d!==1||f!==1)&&h.push(o(h)+"scale("+d+","+f+")")}return function(l,c){var d=[],f=[];return l=e(l),c=e(c),i(l.translateX,l.translateY,c.translateX,c.translateY,d,f),a(l.rotate,c.rotate,d,f),s(l.skewX,c.skewX,d,f),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,d,f),l=c=null,function(h){for(var v=-1,p=f.length,y;++v<p;)d[(y=f[v]).i]=y.x(h);return d.join("")}}}var tp=lu(Jv,"px, ","px)","deg)"),np=lu(ep,", ",")",")"),rp=1e-12;function da(e){return((e=Math.exp(e))+1/e)/2}function op(e){return((e=Math.exp(e))-1/e)/2}function ip(e){return((e=Math.exp(2*e))-1)/(e+1)}const ap=function e(t,n,r){function o(i,a){var s=i[0],u=i[1],l=i[2],c=a[0],d=a[1],f=a[2],h=c-s,v=d-u,p=h*h+v*v,y,m;if(p<rp)m=Math.log(f/l)/t,y=function(k){return[s+k*h,u+k*v,l*Math.exp(t*k*m)]};else{var x=Math.sqrt(p),E=(f*f-l*l+r*p)/(2*l*n*x),b=(f*f-l*l-r*p)/(2*f*n*x),w=Math.log(Math.sqrt(E*E+1)-E),_=Math.log(Math.sqrt(b*b+1)-b);m=(_-w)/t,y=function(k){var O=k*m,R=da(w),A=l/(n*x)*(R*ip(t*O+w)-op(w));return[s+A*h,u+A*v,l*R/da(t*O+w)]}}return y.duration=m*1e3*t/Math.SQRT2,y}return o.rho=function(i){var a=Math.max(.001,+i),s=a*a,u=s*s;return e(a,s,u)},o}(Math.SQRT2,2,4);var Nt=0,Vt=0,$t=0,du=1e3,Hn,jt,Yn=0,st=0,nr=0,Jt=typeof performance=="object"&&performance.now?performance:Date,fu=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function mi(){return st||(fu(sp),st=Jt.now()+nr)}function sp(){st=0}function qn(){this._call=this._time=this._next=null}qn.prototype=hu.prototype={constructor:qn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?mi():+n)+(t==null?0:+t),!this._next&&jt!==this&&(jt?jt._next=this:Hn=this,jt=this),this._call=e,this._time=n,Qo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Qo())}};function hu(e,t,n){var r=new qn;return r.restart(e,t,n),r}function cp(){mi(),++Nt;for(var e=Hn,t;e;)(t=st-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Nt}function fa(){st=(Yn=Jt.now())+nr,Nt=Vt=0;try{cp()}finally{Nt=0,lp(),st=0}}function up(){var e=Jt.now(),t=e-Yn;t>du&&(nr-=t,Yn=e)}function lp(){for(var e,t=Hn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Hn=n);jt=e,Qo(r)}function Qo(e){if(!Nt){Vt&&(Vt=clearTimeout(Vt));var t=e-st;t>24?(e<1/0&&(Vt=setTimeout(fa,e-Jt.now()-nr)),$t&&($t=clearInterval($t))):($t||(Yn=Jt.now(),$t=setInterval(up,du)),Nt=1,fu(fa))}}function ha(e,t,n){var r=new qn;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var dp=er("start","end","cancel","interrupt"),fp=[],vu=0,va=1,Jo=2,Pn=3,pa=4,ei=5,kn=6;function rr(e,t,n,r,o,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;hp(e,n,{name:t,index:r,group:o,on:dp,tween:fp,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:vu})}function yi(e,t){var n=Ee(e,t);if(n.state>vu)throw new Error("too late; already scheduled");return n}function ke(e,t){var n=Ee(e,t);if(n.state>Pn)throw new Error("too late; already running");return n}function Ee(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function hp(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=hu(i,0,n.time);function i(l){n.state=va,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var c,d,f,h;if(n.state!==va)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===Pn)return ha(a);h.state===pa?(h.state=kn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=kn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(ha(function(){n.state===Pn&&(n.state=pa,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Jo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Jo){for(n.state=Pn,o=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=h);o.length=d+1}}function s(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=ei,1),d=-1,f=o.length;++d<f;)o[d].call(e,c);n.state===ei&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=kn,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Mn(e,t){var n=e.__transition,r,o,i=!0,a;if(!!n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){i=!1;continue}o=r.state>Jo&&r.state<ei,r.state=kn,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}i&&delete e.__transition}}function vp(e){return this.each(function(){Mn(this,e)})}function pp(e,t){var n,r;return function(){var o=ke(this,e),i=o.tween;if(i!==n){r=n=i;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}o.tween=r}}function gp(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=ke(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var s={name:t,value:n},u=0,l=o.length;u<l;++u)if(o[u].name===t){o[u]=s;break}u===l&&o.push(s)}i.tween=o}}function mp(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ee(this.node(),n).tween,o=0,i=r.length,a;o<i;++o)if((a=r[o]).name===e)return a.value;return null}return this.each((t==null?pp:gp)(n,e,t))}function bi(e,t,n){var r=e._id;return e.each(function(){var o=ke(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Ee(o,r).value[t]}}function pu(e,t){var n;return(typeof t=="number"?Ue:t instanceof Qt?ua:(n=Qt(t))?(t=n,ua):Qv)(e,t)}function yp(e){return function(){this.removeAttribute(e)}}function bp(e){return function(){this.removeAttributeNS(e.space,e.local)}}function wp(e,t,n){var r,o=n+"",i;return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function Ep(e,t,n){var r,o=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function Sp(e,t,n){var r,o,i;return function(){var a,s=n(this),u;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=s+"",a===u?null:a===r&&u===o?i:(o=u,i=t(r=a,s)))}}function xp(e,t,n){var r,o,i;return function(){var a,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=s+"",a===u?null:a===r&&u===o?i:(o=u,i=t(r=a,s)))}}function _p(e,t){var n=tr(e),r=n==="transform"?np:pu;return this.attrTween(e,typeof t=="function"?(n.local?xp:Sp)(n,r,bi(this,"attr."+e,t)):t==null?(n.local?bp:yp)(n):(n.local?Ep:wp)(n,r,t))}function Cp(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Np(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Op(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Np(e,i)),n}return o._value=t,o}function Pp(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Cp(e,i)),n}return o._value=t,o}function kp(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=tr(e);return this.tween(n,(r.local?Op:Pp)(r,t))}function Mp(e,t){return function(){yi(this,e).delay=+t.apply(this,arguments)}}function Ip(e,t){return t=+t,function(){yi(this,e).delay=t}}function Dp(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Mp:Ip)(t,e)):Ee(this.node(),t).delay}function Rp(e,t){return function(){ke(this,e).duration=+t.apply(this,arguments)}}function Tp(e,t){return t=+t,function(){ke(this,e).duration=t}}function $p(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Rp:Tp)(t,e)):Ee(this.node(),t).duration}function Ap(e,t){if(typeof t!="function")throw new Error;return function(){ke(this,e).ease=t}}function Lp(e){var t=this._id;return arguments.length?this.each(Ap(t,e)):Ee(this.node(),t).ease}function zp(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ke(this,e).ease=n}}function Bp(e){if(typeof e!="function")throw new Error;return this.each(zp(this._id,e))}function Vp(e){typeof e!="function"&&(e=Xc(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,s=r[o]=[],u,l=0;l<a;++l)(u=i[l])&&e.call(u,u.__data__,l,i)&&s.push(u);return new Be(r,this._parents,this._name,this._id)}function jp(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var u=t[s],l=n[s],c=u.length,d=a[s]=new Array(c),f,h=0;h<c;++h)(f=u[h]||l[h])&&(d[h]=f);for(;s<r;++s)a[s]=t[s];return new Be(a,this._parents,this._name,this._id)}function Hp(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Yp(e,t,n){var r,o,i=Hp(t)?yi:ke;return function(){var a=i(this,e),s=a.on;s!==r&&(o=(r=s).copy()).on(t,n),a.on=o}}function qp(e,t){var n=this._id;return arguments.length<2?Ee(this.node(),n).on.on(e):this.each(Yp(n,e,t))}function Up(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Fp(){return this.on("end.remove",Up(this._id))}function Xp(e){var t=this._name,n=this._id;typeof e!="function"&&(e=vi(e));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var s=r[a],u=s.length,l=i[a]=new Array(u),c,d,f=0;f<u;++f)(c=s[f])&&(d=e.call(c,c.__data__,f,s))&&("__data__"in c&&(d.__data__=c.__data__),l[f]=d,rr(l[f],t,n,f,l,Ee(c,n)));return new Be(i,this._parents,t,n)}function Gp(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Fc(e));for(var r=this._groups,o=r.length,i=[],a=[],s=0;s<o;++s)for(var u=r[s],l=u.length,c,d=0;d<l;++d)if(c=u[d]){for(var f=e.call(c,c.__data__,d,u),h,v=Ee(c,n),p=0,y=f.length;p<y;++p)(h=f[p])&&rr(h,t,n,p,f,v);i.push(f),a.push(c)}return new Be(i,a,t,n)}var Kp=nn.prototype.constructor;function Zp(){return new Kp(this._groups,this._parents)}function Wp(e,t){var n,r,o;return function(){var i=Ct(this,e),a=(this.style.removeProperty(e),Ct(this,e));return i===a?null:i===n&&a===r?o:o=t(n=i,r=a)}}function gu(e){return function(){this.style.removeProperty(e)}}function Qp(e,t,n){var r,o=n+"",i;return function(){var a=Ct(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}function Jp(e,t,n){var r,o,i;return function(){var a=Ct(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),Ct(this,e))),a===u?null:a===r&&u===o?i:(o=u,i=t(r=a,s))}}function eg(e,t){var n,r,o,i="style."+t,a="end."+i,s;return function(){var u=ke(this,e),l=u.on,c=u.value[i]==null?s||(s=gu(t)):void 0;(l!==n||o!==c)&&(r=(n=l).copy()).on(a,o=c),u.on=r}}function tg(e,t,n){var r=(e+="")=="transform"?tp:pu;return t==null?this.styleTween(e,Wp(e,r)).on("end.style."+e,gu(e)):typeof t=="function"?this.styleTween(e,Jp(e,r,bi(this,"style."+e,t))).each(eg(this._id,e)):this.styleTween(e,Qp(e,r,t),n).on("end.style."+e,null)}function ng(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function rg(e,t,n){var r,o;function i(){var a=t.apply(this,arguments);return a!==o&&(r=(o=a)&&ng(e,a,n)),r}return i._value=t,i}function og(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,rg(e,t,n==null?"":n))}function ig(e){return function(){this.textContent=e}}function ag(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function sg(e){return this.tween("text",typeof e=="function"?ag(bi(this,"text",e)):ig(e==null?"":e+""))}function cg(e){return function(t){this.textContent=e.call(this,t)}}function ug(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&cg(o)),t}return r._value=e,r}function lg(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ug(e))}function dg(){for(var e=this._name,t=this._id,n=mu(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a=r[i],s=a.length,u,l=0;l<s;++l)if(u=a[l]){var c=Ee(u,t);rr(u,e,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Be(r,this._parents,e,n)}function fg(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,a){var s={value:a},u={value:function(){--o===0&&i()}};n.each(function(){var l=ke(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),l.on=t}),o===0&&i()})}var hg=0;function Be(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function mu(){return++hg}var De=nn.prototype;Be.prototype={constructor:Be,select:Xp,selectAll:Gp,selectChild:De.selectChild,selectChildren:De.selectChildren,filter:Vp,merge:jp,selection:Zp,transition:dg,call:De.call,nodes:De.nodes,node:De.node,size:De.size,empty:De.empty,each:De.each,on:qp,attr:_p,attrTween:kp,style:tg,styleTween:og,text:sg,textTween:lg,remove:Fp,tween:mp,delay:Dp,duration:$p,ease:Lp,easeVarying:Bp,end:fg,[Symbol.iterator]:De[Symbol.iterator]};function vg(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var pg={time:null,delay:0,duration:250,ease:vg};function gg(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function mg(e){var t,n;e instanceof Be?(t=e._id,e=e._name):(t=mu(),(n=pg).time=mi(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a=r[i],s=a.length,u,l=0;l<s;++l)(u=a[l])&&rr(u,e,t,l,a,n||gg(u,t));return new Be(r,this._parents,e,t)}nn.prototype.interrupt=vp;nn.prototype.transition=mg;const yn=e=>()=>e;function yg(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Ae(e,t,n){this.k=e,this.x=t,this.y=n}Ae.prototype={constructor:Ae,scale:function(e){return e===1?this:new Ae(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ae(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var it=new Ae(1,0,0);Ae.prototype;function pr(e){e.stopImmediatePropagation()}function At(e){e.preventDefault(),e.stopImmediatePropagation()}function bg(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function wg(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ga(){return this.__zoom||it}function Eg(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Sg(){return navigator.maxTouchPoints||"ontouchstart"in this}function xg(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function _g(){var e=bg,t=wg,n=xg,r=Eg,o=Sg,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,u=ap,l=er("start","zoom","end"),c,d,f,h=500,v=150,p=0,y=10;function m(g){g.property("__zoom",ga).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",A).filter(o).on("touchstart.zoom",$).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(g,C,S,P){var M=g.selection?g.selection():g;M.property("__zoom",ga),g!==M?w(g,C,S,P):M.interrupt().each(function(){_(this,arguments).event(P).start().zoom(null,typeof C=="function"?C.apply(this,arguments):C).end()})},m.scaleBy=function(g,C,S,P){m.scaleTo(g,function(){var M=this.__zoom.k,T=typeof C=="function"?C.apply(this,arguments):C;return M*T},S,P)},m.scaleTo=function(g,C,S,P){m.transform(g,function(){var M=t.apply(this,arguments),T=this.__zoom,I=S==null?b(M):typeof S=="function"?S.apply(this,arguments):S,L=T.invert(I),Y=typeof C=="function"?C.apply(this,arguments):C;return n(E(x(T,Y),I,L),M,a)},S,P)},m.translateBy=function(g,C,S,P){m.transform(g,function(){return n(this.__zoom.translate(typeof C=="function"?C.apply(this,arguments):C,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),a)},null,P)},m.translateTo=function(g,C,S,P,M){m.transform(g,function(){var T=t.apply(this,arguments),I=this.__zoom,L=P==null?b(T):typeof P=="function"?P.apply(this,arguments):P;return n(it.translate(L[0],L[1]).scale(I.k).translate(typeof C=="function"?-C.apply(this,arguments):-C,typeof S=="function"?-S.apply(this,arguments):-S),T,a)},P,M)};function x(g,C){return C=Math.max(i[0],Math.min(i[1],C)),C===g.k?g:new Ae(C,g.x,g.y)}function E(g,C,S){var P=C[0]-S[0]*g.k,M=C[1]-S[1]*g.k;return P===g.x&&M===g.y?g:new Ae(g.k,P,M)}function b(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function w(g,C,S,P){g.on("start.zoom",function(){_(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(P).end()}).tween("zoom",function(){var M=this,T=arguments,I=_(M,T).event(P),L=t.apply(M,T),Y=S==null?b(L):typeof S=="function"?S.apply(M,T):S,U=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),D=M.__zoom,H=typeof C=="function"?C.apply(M,T):C,Z=u(D.invert(Y).concat(U/D.k),H.invert(Y).concat(U/H.k));return function(G){if(G===1)G=H;else{var Q=Z(G),ee=U/Q[2];G=new Ae(ee,Y[0]-Q[0]*ee,Y[1]-Q[1]*ee)}I.zoom(null,G)}})}function _(g,C,S){return!S&&g.__zooming||new k(g,C)}function k(g,C){this.that=g,this.args=C,this.active=0,this.sourceEvent=null,this.extent=t.apply(g,C),this.taps=0}k.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,C){return this.mouse&&g!=="mouse"&&(this.mouse[1]=C.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=C.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=C.invert(this.touch1[0])),this.that.__zoom=C,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var C=be(this.that).datum();l.call(g,this.that,new yg(g,{sourceEvent:this.sourceEvent,target:m,type:g,transform:this.that.__zoom,dispatch:l}),C)}};function O(g,...C){if(!e.apply(this,arguments))return;var S=_(this,C).event(g),P=this.__zoom,M=Math.max(i[0],Math.min(i[1],P.k*Math.pow(2,r.apply(this,arguments)))),T=Ce(g);if(S.wheel)(S.mouse[0][0]!==T[0]||S.mouse[0][1]!==T[1])&&(S.mouse[1]=P.invert(S.mouse[0]=T)),clearTimeout(S.wheel);else{if(P.k===M)return;S.mouse=[T,P.invert(T)],Mn(this),S.start()}At(g),S.wheel=setTimeout(I,v),S.zoom("mouse",n(E(x(P,M),S.mouse[0],S.mouse[1]),S.extent,a));function I(){S.wheel=null,S.end()}}function R(g,...C){if(f||!e.apply(this,arguments))return;var S=g.currentTarget,P=_(this,C,!0).event(g),M=be(g.view).on("mousemove.zoom",Y,!0).on("mouseup.zoom",U,!0),T=Ce(g,S),I=g.clientX,L=g.clientY;ru(g.view),pr(g),P.mouse=[T,this.__zoom.invert(T)],Mn(this),P.start();function Y(D){if(At(D),!P.moved){var H=D.clientX-I,Z=D.clientY-L;P.moved=H*H+Z*Z>p}P.event(D).zoom("mouse",n(E(P.that.__zoom,P.mouse[0]=Ce(D,S),P.mouse[1]),P.extent,a))}function U(D){M.on("mousemove.zoom mouseup.zoom",null),ou(D.view,P.moved),At(D),P.event(D).end()}}function A(g,...C){if(!!e.apply(this,arguments)){var S=this.__zoom,P=Ce(g.changedTouches?g.changedTouches[0]:g,this),M=S.invert(P),T=S.k*(g.shiftKey?.5:2),I=n(E(x(S,T),P,M),t.apply(this,C),a);At(g),s>0?be(this).transition().duration(s).call(w,I,P,g):be(this).call(m.transform,I,P,g)}}function $(g,...C){if(!!e.apply(this,arguments)){var S=g.touches,P=S.length,M=_(this,C,g.changedTouches.length===P).event(g),T,I,L,Y;for(pr(g),I=0;I<P;++I)L=S[I],Y=Ce(L,this),Y=[Y,this.__zoom.invert(Y),L.identifier],M.touch0?!M.touch1&&M.touch0[2]!==Y[2]&&(M.touch1=Y,M.taps=0):(M.touch0=Y,T=!0,M.taps=1+!!c);c&&(c=clearTimeout(c)),T&&(M.taps<2&&(d=Y[0],c=setTimeout(function(){c=null},h)),Mn(this),M.start())}}function V(g,...C){if(!!this.__zooming){var S=_(this,C).event(g),P=g.changedTouches,M=P.length,T,I,L,Y;for(At(g),T=0;T<M;++T)I=P[T],L=Ce(I,this),S.touch0&&S.touch0[2]===I.identifier?S.touch0[0]=L:S.touch1&&S.touch1[2]===I.identifier&&(S.touch1[0]=L);if(I=S.that.__zoom,S.touch1){var U=S.touch0[0],D=S.touch0[1],H=S.touch1[0],Z=S.touch1[1],G=(G=H[0]-U[0])*G+(G=H[1]-U[1])*G,Q=(Q=Z[0]-D[0])*Q+(Q=Z[1]-D[1])*Q;I=x(I,Math.sqrt(G/Q)),L=[(U[0]+H[0])/2,(U[1]+H[1])/2],Y=[(D[0]+Z[0])/2,(D[1]+Z[1])/2]}else if(S.touch0)L=S.touch0[0],Y=S.touch0[1];else return;S.zoom("touch",n(E(I,L,Y),S.extent,a))}}function B(g,...C){if(!!this.__zooming){var S=_(this,C).event(g),P=g.changedTouches,M=P.length,T,I;for(pr(g),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),T=0;T<M;++T)I=P[T],S.touch0&&S.touch0[2]===I.identifier?delete S.touch0:S.touch1&&S.touch1[2]===I.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(I=Ce(I,this),Math.hypot(d[0]-I[0],d[1]-I[1])<y)){var L=be(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return m.wheelDelta=function(g){return arguments.length?(r=typeof g=="function"?g:yn(+g),m):r},m.filter=function(g){return arguments.length?(e=typeof g=="function"?g:yn(!!g),m):e},m.touchable=function(g){return arguments.length?(o=typeof g=="function"?g:yn(!!g),m):o},m.extent=function(g){return arguments.length?(t=typeof g=="function"?g:yn([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),m):t},m.scaleExtent=function(g){return arguments.length?(i[0]=+g[0],i[1]=+g[1],m):[i[0],i[1]]},m.translateExtent=function(g){return arguments.length?(a[0][0]=+g[0][0],a[1][0]=+g[1][0],a[0][1]=+g[0][1],a[1][1]=+g[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},m.constrain=function(g){return arguments.length?(n=g,m):n},m.duration=function(g){return arguments.length?(s=+g,m):s},m.interpolate=function(g){return arguments.length?(u=g,m):u},m.on=function(){var g=l.on.apply(l,arguments);return g===l?m:g},m.clickDistance=function(g){return arguments.length?(p=(g=+g)*g,m):Math.sqrt(p)},m.tapDistance=function(g){return arguments.length?(y=+g,m):y},m}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ti(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yu(e,t){if(!!e){if(typeof e=="string")return ti(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ti(e,t)}}function Cg(e){if(Array.isArray(e))return e}function Ng(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,i=!1,a,s;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));o=!0);}catch(u){i=!0,s=u}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw s}}return r}}function Og(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X(e,t){return Cg(e)||Ng(e,t)||yu(e,t)||Og()}var Ot;(function(e){e.Strict="strict",e.Loose="loose"})(Ot||(Ot={}));var ma;(function(e){e.Lines="lines",e.Dots="dots"})(ma||(ma={}));var xt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(xt||(xt={}));var $e;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})($e||($e={}));var en;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(en||(en={}));var z;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(z||(z={}));var wi=function(t){return{width:t.offsetWidth,height:t.offsetHeight}},_t=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(t,n),r)},bu=function(t,n){return{x:_t(t.x,n[0][0],n[1][0]),y:_t(t.y,n[0][1],n[1][1])}},wu=function(t){var n,r;return((n=t.getRootNode)===null||n===void 0?void 0:n.call(t))||((r=window)===null||r===void 0?void 0:r.document)},Pg=function(t,n){return{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x2,n.x2),y2:Math.max(t.y2,n.y2)}},Un=function(t){var n=t.x,r=t.y,o=t.width,i=t.height;return{x:n,y:r,x2:n+o,y2:r+i}},kg=function(t){var n=t.x,r=t.y,o=t.x2,i=t.y2;return{x:n,y:r,width:o-n,height:i-r}},Eu=function(t){return!isNaN(t)&&isFinite(t)},se=Symbol("internals");function ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ya(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ya(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ba(e,t){var n=e.find(function(l){return l.id===t.parentNode});if(n){var r=t.position.x+t.width-n.width,o=t.position.y+t.height-n.height;if(r>0||o>0||t.position.x<0||t.position.y<0){var i,a;if(n.style=Ht({},n.style)||{},n.style.width=(i=n.style.width)!==null&&i!==void 0?i:n.width,n.style.height=(a=n.style.height)!==null&&a!==void 0?a:n.height,r>0&&(n.style.width+=r),o>0&&(n.style.height+=o),t.position.x<0){var s=Math.abs(t.position.x);n.position.x=n.position.x-s,n.style.width+=s,t.position.x=0}if(t.position.y<0){var u=Math.abs(t.position.y);n.position.y=n.position.y-u,n.style.height+=u,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Su(e,t){if(e.some(function(r){return r.type==="reset"}))return e.filter(function(r){return r.type==="reset"}).map(function(r){return r.item});var n=e.filter(function(r){return r.type==="add"}).map(function(r){return r.item});return t.reduce(function(r,o){var i=e.find(function(u){return u.id===o.id});if(i)switch(i.type){case"select":return r.push(Ht(Ht({},o),{},{selected:i.selected})),r;case"position":{var a=Ht({},o);return typeof i.position<"u"&&(a.position=i.position),typeof i.positionAbsolute<"u"&&(a.positionAbsolute=i.positionAbsolute),typeof i.dragging<"u"&&(a.dragging=i.dragging),a.expandParent&&ba(r,a),r.push(a),r}case"dimensions":{var s=Ht({},o);return typeof i.dimensions<"u"&&(s.width=i.dimensions.width,s.height=i.dimensions.height),s.expandParent&&ba(r,s),r.push(s),r}case"remove":return r}return r.push(o),r},n)}function xu(e,t){return Su(e,t)}function Mg(e,t){return Su(e,t)}var Fe=function(t,n){return{id:t,type:"select",selected:n}};function bt(e,t){return e.reduce(function(n,r){var o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(Fe(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(Fe(r.id,!1))),n},[])}function wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function _u(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wa(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wa(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Ea=function(t,n,r){var o=n.querySelectorAll(t);if(!o||!o.length)return null;var i=Array.from(o),a=n.getBoundingClientRect();return i.map(function(s){var u=s.getBoundingClientRect();return _u({id:s.getAttribute("data-handleid"),position:s.getAttribute("data-handlepos"),x:(u.left-a.left)/r,y:(u.top-a.top)/r},wi(s))})};function Lt(e,t,n){return n===void 0?n:function(r){var o=t().nodeInternals.get(e);n(r,_u({},o))}}function Cu(e){var t=e.id,n=e.store,r=n.getState(),o=r.addSelectedNodes,i=r.unselectNodesAndEdges,a=r.multiSelectionActive,s=r.nodeInternals,u=s.get(t);n.setState({nodesSelectionActive:!1}),u.selected?u.selected&&a&&i({nodes:[u]}):o([t])}function Sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sa(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sa(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Ig=function(t){return"id"in t&&"source"in t&&"target"in t},Dg=function(t){var n=t.source,r=t.sourceHandle,o=t.target,i=t.targetHandle;return"reactflow__edge-".concat(n).concat(r||"","-").concat(o).concat(i||"")},ni=function(t,n){if(typeof t>"u")return"";if(typeof t=="string")return t;var r=n?"".concat(n,"__"):"";return"".concat(r).concat(Object.keys(t).sort().map(function(o){return"".concat(o,"=").concat(t[o])}).join("&"))},Rg=function(t,n){return n.some(function(r){return r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)})},Tg=function(t,n){if(!t.source||!t.target)return n;var r;return Ig(t)?r=Ft({},t):r=Ft(Ft({},t),{},{id:Dg(t)}),Rg(r,n)?n:n.concat(r)},Nu=function(t,n,r,o){var i=t.x,a=t.y,s=X(n,3),u=s[0],l=s[1],c=s[2],d=X(o,2),f=d[0],h=d[1],v={x:(i-u)/c,y:(a-l)/c};return r?{x:f*Math.round(v.x/f),y:h*Math.round(v.y/h)}:v},Ei=function(t){if(t.length===0)return{x:0,y:0,width:0,height:0};var n=t.reduce(function(r,o){var i=o.positionAbsolute,a=o.position,s=o.width,u=o.height;return Pg(r,Un({x:i?i.x:a.x,y:i?i.y:a.y,width:s||0,height:u||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return kg(n)},Ou=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,1],o=X(r,3),i=o[0],a=o[1],s=o[2],u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,c=Un({x:(n.x-i)/s,y:(n.y-a)/s,width:n.width/s,height:n.height/s}),d=[];return t.forEach(function(f){var h=f.positionAbsolute,v=f.width,p=f.height,y=f.selectable,m=y===void 0?!0:y;if(l&&!m)return!1;var x=Un(Ft(Ft({},h),{},{width:v||0,height:p||0})),E=Math.max(0,Math.min(c.x2,x.x2)-Math.max(c.x,x.x)),b=Math.max(0,Math.min(c.y2,x.y2)-Math.max(c.y,x.y)),w=Math.ceil(E*b),_=typeof v>"u"||typeof p>"u"||v===null||p===null,k=u&&w>0,O=(v||0)*(p||0),R=_||k||w>=O;R&&d.push(f)}),d},Si=function(t,n){var r=t.map(function(o){return o.id});return n.filter(function(o){return r.includes(o.source)||r.includes(o.target)})},Pu=function(t,n,r,o,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:.1,s=n/(t.width*(1+a)),u=r/(t.height*(1+a)),l=Math.min(s,u),c=_t(l,o,i),d=t.x+t.width/2,f=t.y+t.height/2,h=n/2-d*c,v=r/2-f*c;return[h,v,c]},tt=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.transition().duration(n)};function xa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function wt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xa(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xa(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ku(e,t,n,r){var o,i,a,s,u,l,c,d,f,h,v,p;if(!e.parentNode)return r;var y=t.get(e.parentNode);return ku(y,t,n,{x:((o=r.x)!==null&&o!==void 0?o:0)+((i=(a=y.position)===null||a===void 0?void 0:a.x)!==null&&i!==void 0?i:0),y:((s=r.y)!==null&&s!==void 0?s:0)+((u=(l=y.position)===null||l===void 0?void 0:l.y)!==null&&u!==void 0?u:0),z:((c=(d=y[se])===null||d===void 0?void 0:d.z)!==null&&c!==void 0?c:0)>((f=r.z)!==null&&f!==void 0?f:0)?(h=(v=y[se])===null||v===void 0?void 0:v.z)!==null&&h!==void 0?h:0:(p=r.z)!==null&&p!==void 0?p:0})}function gr(e,t){var n=new Map,r={};return e.forEach(function(o){var i,a=Eu(o.zIndex)?o.zIndex:o.selected?1e3:0,s=t.get(o.id),u=wt(wt({width:s==null?void 0:s.width,height:s==null?void 0:s.height},o),{},{positionAbsolute:{x:o.position.x,y:o.position.y}});o.parentNode&&(u.parentNode=o.parentNode,r[o.parentNode]=!0),Object.defineProperty(u,se,{enumerable:!1,value:{handleBounds:s==null||(i=s[se])===null||i===void 0?void 0:i.handleBounds,z:a}}),n.set(o.id,u)}),n.forEach(function(o){if(o.parentNode&&!n.has(o.parentNode))throw new Error("Parent node ".concat(o.parentNode," not found"));if(o.parentNode||r[o.id]){var i,a,s=ku(o,n,r,wt(wt({},o.position),{},{z:(i=(a=o[se])===null||a===void 0?void 0:a.z)!==null&&i!==void 0?i:0})),u=s.x,l=s.y,c=s.z;o.positionAbsolute={x:u,y:l},o[se].z=c,r[o.id]&&(o[se].isParent=!0)}}),n}function Mu(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e(),r=n.nodeInternals,o=n.width,i=n.height,a=n.minZoom,s=n.maxZoom,u=n.d3Zoom,l=n.d3Selection,c=n.fitViewOnInitDone,d=n.fitViewOnInit;if((t.initial&&!c&&d||!t.initial)&&u&&l){var f=Array.from(r.values()).filter(function(O){return t.includeHiddenNodes?O.width&&O.height:!O.hidden}),h=f.every(function(O){return O.width&&O.height});if(f.length>0&&h){var v,p,y,m=Ei(f),x=Pu(m,o,i,(v=t.minZoom)!==null&&v!==void 0?v:a,(p=t.maxZoom)!==null&&p!==void 0?p:s,(y=t.padding)!==null&&y!==void 0?y:.1),E=X(x,3),b=E[0],w=E[1],_=E[2],k=it.translate(b,w).scale(_);return typeof t.duration=="number"&&t.duration>0?u.transform(tt(l,t.duration),k):u.transform(l,k),!0}}return!1}function $g(e,t){return e.forEach(function(n){var r=t.get(n.id);if(r){var o;t.set(r.id,wt(wt({},r),{},(o={},W(o,se,r[se]),W(o,"selected",n.selected),o)))}}),new Map(t)}function Ag(e,t){return t.map(function(n){var r=e.find(function(o){return o.id===n.id});return r&&(n.selected=r.selected),n})}function bn(e){var t=e.changedNodes,n=e.changedEdges,r=e.get,o=e.set,i=r(),a=i.nodeInternals,s=i.edges,u=i.onNodesChange,l=i.onEdgesChange,c=i.hasDefaultNodes,d=i.hasDefaultEdges;t!=null&&t.length&&(c&&o({nodeInternals:$g(t,a)}),u==null||u(t)),n!=null&&n.length&&(d&&o({edges:Ag(n,s)}),l==null||l(n))}var _a=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ca={width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:_a,nodeExtent:_a,nodesSelectionActive:!1,userSelectionActive:!1,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:Ot.Strict,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,reactFlowVersion:"10.3.11",connectionStartHandle:null,connectOnClick:!0};function Na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Na(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Na(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var xi=Ff(),Iu=xi.Provider,ae=xi.useStore,le=xi.useStoreApi,Du=function(){return jf(function(t,n){return _e(_e({},Ca),{},{setNodes:function(o){t({nodeInternals:gr(o,n().nodeInternals)})},setEdges:function(o){var i=n(),a=i.defaultEdgeOptions,s=a===void 0?{}:a;t({edges:o.map(function(u){return _e(_e({},s),u)})})},setDefaultNodesAndEdges:function(o,i){var a=typeof o<"u",s=typeof i<"u",u=a?gr(o,new Map):new Map,l=s?i:[];t({nodeInternals:u,edges:l,hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:function(o){var i=n(),a=i.onNodesChange,s=i.nodeInternals,u=i.fitViewOnInit,l=i.fitViewOnInitDone,c=i.fitViewOnInitOptions,d=window.getComputedStyle(document.querySelector(".react-flow__viewport")),f=new window.DOMMatrixReadOnly(d.transform),h=f.m22,v=o.reduce(function(y,m){var x=s.get(m.id);if(x){var E=wi(m.nodeElement),b=!!(E.width&&E.height&&(x.width!==E.width||x.height!==E.height||m.forceUpdate));b&&(s.set(x.id,_e(_e({},x),{},W({},se,_e(_e({},x[se]),{},{handleBounds:{source:Ea(".source",m.nodeElement,h),target:Ea(".target",m.nodeElement,h)}})),E)),y.push({id:x.id,type:"dimensions",dimensions:E}))}return y},[]),p=l||u&&!l&&Mu(n,_e({initial:!0},c));t({nodeInternals:new Map(s),fitViewOnInitDone:p}),(v==null?void 0:v.length)>0&&(a==null||a(v))},updateNodePositions:function(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=n(),u=s.onNodesChange,l=s.nodeInternals,c=s.hasDefaultNodes;if(c||u){var d=o.map(function(v){var p={id:v.id,type:"position",dragging:a};return i&&(p.positionAbsolute=v.positionAbsolute,p.position=v.position),p});if(d!=null&&d.length){if(c){var f=xu(d,Array.from(l.values())),h=gr(f,l);t({nodeInternals:h})}u==null||u(d)}}},addSelectedNodes:function(o){var i=n(),a=i.multiSelectionActive,s=i.nodeInternals,u=i.edges,l,c=null;a?l=o.map(function(d){return Fe(d,!0)}):(l=bt(Array.from(s.values()),o),c=bt(u,[])),bn({changedNodes:l,changedEdges:c,get:n,set:t})},addSelectedEdges:function(o){var i=n(),a=i.multiSelectionActive,s=i.edges,u=i.nodeInternals,l,c=null;a?l=o.map(function(d){return Fe(d,!0)}):(l=bt(s,o),c=bt(Array.from(u.values()),[])),bn({changedNodes:c,changedEdges:l,get:n,set:t})},unselectNodesAndEdges:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=o.nodes,a=o.edges,s=n(),u=s.nodeInternals,l=s.edges,c=i||Array.from(u.values()),d=a||l,f=c.map(function(v){return v.selected=!1,Fe(v.id,!1)}),h=d.map(function(v){return Fe(v.id,!1)});bn({changedNodes:f,changedEdges:h,get:n,set:t})},setMinZoom:function(o){var i=n(),a=i.d3Zoom,s=i.maxZoom;a==null||a.scaleExtent([o,s]),t({minZoom:o})},setMaxZoom:function(o){var i=n(),a=i.d3Zoom,s=i.minZoom;a==null||a.scaleExtent([s,o]),t({maxZoom:o})},setTranslateExtent:function(o){var i=n(),a=i.d3Zoom;a==null||a.translateExtent(o),t({translateExtent:o})},resetSelectedElements:function(){var o=n(),i=o.nodeInternals,a=o.edges,s=Array.from(i.values()),u=s.filter(function(c){return c.selected}).map(function(c){return Fe(c.id,!1)}),l=a.filter(function(c){return c.selected}).map(function(c){return Fe(c.id,!1)});bn({changedNodes:u,changedEdges:l,get:n,set:t})},setNodeExtent:function(o){var i=n(),a=i.nodeInternals;a.forEach(function(s){s.positionAbsolute=bu(s.position,o)}),t({nodeExtent:o,nodeInternals:new Map(a)})},reset:function(){return t(_e({},Ca))}})})};function ge(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}const Lg=window.React.useMemo,Re=window.React.useCallback;function zg(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function on(e,t){if(e==null)return{};var n=zg(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(n[r]=e[r]))}return n}function Bg(e){if(Array.isArray(e))return ti(e)}function Vg(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function at(e){return Bg(e)||Vg(e)||yu(e)||jg()}var Hg={zoomIn:function(){},zoomOut:function(){},zoomTo:function(t){},getZoom:function(){return 1},setViewport:function(t){},getViewport:function(){return{x:0,y:0,zoom:1}},fitView:function(){},setCenter:function(t,n){},fitBounds:function(t){},project:function(t){return t},initialized:!1},Yg=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}},qg=function(){var t=le(),n=ae(Yg,ge),r=n.d3Zoom,o=n.d3Selection,i=Lg(function(){return o&&r?{zoomIn:function(s){return r.scaleBy(tt(o,s==null?void 0:s.duration),1.2)},zoomOut:function(s){return r.scaleBy(tt(o,s==null?void 0:s.duration),1/1.2)},zoomTo:function(s,u){return r.scaleTo(tt(o,u==null?void 0:u.duration),s)},getZoom:function(){return t.getState().transform[2]},setViewport:function(s,u){var l,c,d,f=X(t.getState().transform,3),h=f[0],v=f[1],p=f[2],y=it.translate((l=s.x)!==null&&l!==void 0?l:h,(c=s.y)!==null&&c!==void 0?c:v).scale((d=s.zoom)!==null&&d!==void 0?d:p);r.transform(tt(o,u==null?void 0:u.duration),y)},getViewport:function(){var s=X(t.getState().transform,3),u=s[0],l=s[1],c=s[2];return{x:u,y:l,zoom:c}},fitView:function(s){return Mu(t.getState,s)},setCenter:function(s,u,l){var c=t.getState(),d=c.width,f=c.height,h=c.maxZoom,v=typeof(l==null?void 0:l.zoom)<"u"?l.zoom:h,p=d/2-s*v,y=f/2-u*v,m=it.translate(p,y).scale(v);r.transform(tt(o,l==null?void 0:l.duration),m)},fitBounds:function(s,u){var l,c=t.getState(),d=c.width,f=c.height,h=c.minZoom,v=c.maxZoom,p=Pu(s,d,f,h,v,(l=u==null?void 0:u.padding)!==null&&l!==void 0?l:.1),y=X(p,3),m=y[0],x=y[1],E=y[2],b=it.translate(m,x).scale(E);r.transform(tt(o,u==null?void 0:u.duration),b)},project:function(s){var u=t.getState(),l=u.transform,c=u.snapToGrid,d=u.snapGrid;return Nu(s,l,c,d)},initialized:!0}:Hg},[r,o]);return i},Ug=["initialized"];function Oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Oa(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oa(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _i(){var e=qg(),t=e.initialized,n=on(e,Ug),r=le(),o=Re(function(){var h=r.getState(),v=h.nodeInternals,p=Array.from(v.values());return p.map(function(y){return pt({},y)})},[]),i=Re(function(h){var v=r.getState(),p=v.nodeInternals;return p.get(h)},[]),a=Re(function(){var h=r.getState(),v=h.edges,p=v===void 0?[]:v;return p.map(function(y){return pt({},y)})},[]),s=Re(function(h){var v=r.getState(),p=v.edges,y=p===void 0?[]:p;return y.find(function(m){return m.id===h})},[]),u=Re(function(h){var v=r.getState(),p=v.nodeInternals,y=v.setNodes,m=v.hasDefaultNodes,x=v.onNodesChange,E=Array.from(p.values()),b=typeof h=="function"?h(E):h;if(m)y(b);else if(x){var w=b.length===0?E.map(function(_){return{type:"remove",id:_.id}}):b.map(function(_){return{item:_,type:"reset"}});x(w)}},[]),l=Re(function(h){var v=r.getState(),p=v.edges,y=p===void 0?[]:p,m=v.setEdges,x=v.hasDefaultEdges,E=v.onEdgesChange,b=typeof h=="function"?h(y):h;if(x)m(b);else if(E){var w=b.length===0?y.map(function(_){return{type:"remove",id:_.id}}):b.map(function(_){return{item:_,type:"reset"}});E(w)}},[]),c=Re(function(h){var v=Array.isArray(h)?h:[h],p=r.getState(),y=p.nodeInternals,m=p.setNodes,x=p.hasDefaultNodes,E=p.onNodesChange;if(x){var b=Array.from(y.values()),w=[].concat(b,at(v));m(w)}else if(E){var _=v.map(function(k){return{item:k,type:"add"}});E(_)}},[]),d=Re(function(h){var v=Array.isArray(h)?h:[h],p=r.getState(),y=p.edges,m=y===void 0?[]:y,x=p.setEdges,E=p.hasDefaultEdges,b=p.onEdgesChange;if(E)x([].concat(at(m),at(v)));else if(b){var w=v.map(function(_){return{item:_,type:"add"}});b(w)}},[]),f=Re(function(){var h=r.getState(),v=h.nodeInternals,p=h.edges,y=p===void 0?[]:p,m=h.transform,x=Array.from(v.values()),E=X(m,3),b=E[0],w=E[1],_=E[2];return{nodes:x.map(function(k){return pt({},k)}),edges:y.map(function(k){return pt({},k)}),viewport:{x:b,y:w,zoom:_}}},[]);return pt(pt({},n),{},{viewportInitialized:t,getNodes:o,getNode:i,getEdges:a,getEdge:s,setNodes:u,setEdges:l,addNodes:c,addEdges:d,toObject:f})}function me(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=me(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const Fg=window.React.memo,Xg=window.React.useState,Gg=window.React.useEffect;function Kg(){return N("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:N("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Zg(){return N("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:N("path",{d:"M0 0h32v4.2H0z"})})}function Wg(){return N("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:N("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Qg(){return N("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:N("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Jg(){return N("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:N("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}var em=["children","className"];function Pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function tm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pa(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pa(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var wn=function(t){var n=t.children,r=t.className,o=on(t,em);return N("button",{...tm({type:"button",className:me(["react-flow__controls-button",r])},o),children:n})},nm=function(t){return t.nodesDraggable&&t.nodesConnectable&&t.elementsSelectable},Ru=function(t){var n=t.style,r=t.showZoom,o=r===void 0?!0:r,i=t.showFitView,a=i===void 0?!0:i,s=t.showInteractive,u=s===void 0?!0:s,l=t.fitViewOptions,c=t.onZoomIn,d=t.onZoomOut,f=t.onFitView,h=t.onInteractiveChange,v=t.className,p=t.children,y=le(),m=Xg(!1),x=X(m,2),E=x[0],b=x[1],w=ae(nm),_=_i(),k=_.zoomIn,O=_.zoomOut,R=_.fitView;if(Gg(function(){b(!0)},[]),!E)return null;var A=function(){k==null||k(),c==null||c()},$=function(){O==null||O(),d==null||d()},V=function(){R==null||R(l),f==null||f()},B=function(){y.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),h==null||h(!w)};return ne("div",{className:me(["react-flow__controls",v]),style:n,children:[o&&ne(fe,{children:[N(wn,{onClick:A,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",children:N(Kg,{})}),N(wn,{onClick:$,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",children:N(Zg,{})})]}),a&&N(wn,{className:"react-flow__controls-fitview",onClick:V,title:"fit view","aria-label":"fit view",children:N(Wg,{})}),u&&N(wn,{className:"react-flow__controls-interactive",onClick:B,title:"toggle interactivity","aria-label":"toggle interactivity",children:w?N(Jg,{}):N(Qg,{})}),p]})};Ru.displayName="Controls";var rm=Fg(Ru);const ka=window.React,oe=window.React.memo,ie=window.React.useRef,kt=window.React.useState,re=window.React.useEffect,om=window.React.createContext,Tu=window.React.forwardRef,im=window.React.useContext,Pt=window.React.useMemo,Mt=window.React.useCallback;var am=["paid-pro","paid-sponsor","paid-enterprise","paid-custom"];function sm(e){var t=e.proOptions,n=e.position,r=n===void 0?"bottom-right":n;if(t!=null&&t.account&&am.includes(t==null?void 0:t.account)&&t!==null&&t!==void 0&&t.hideAttribution)return null;var o="".concat(r).split("-");return N("div",{className:me(["react-flow__attribution"].concat(at(o))),"data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev/pricing",children:N("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer",children:"React Flow"})})}var cm=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"];function Ma(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function um(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ma(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ma(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var lm=function(t){var n=t.x,r=t.y,o=t.label,i=t.labelStyle,a=i===void 0?{}:i,s=t.labelShowBg,u=s===void 0?!0:s,l=t.labelBgStyle,c=l===void 0?{}:l,d=t.labelBgPadding,f=d===void 0?[2,4]:d,h=t.labelBgBorderRadius,v=h===void 0?2:h,p=t.children,y=t.className,m=on(t,cm),x=ie(null),E=kt({x:0,y:0,width:0,height:0}),b=X(E,2),w=b[0],_=b[1],k=me(["react-flow__edge-textwrapper",y]);return re(function(){if(x.current){var O=x.current.getBBox();_({x:O.x,y:O.y,width:O.width,height:O.height})}},[o]),typeof o>"u"||!o?null:ne("g",{...um({transform:"translate(".concat(n-w.width/2," ").concat(r-w.height/2,")"),className:k},m),children:[u&&N("rect",{width:w.width+2*f[0],x:-f[0],y:-f[1],height:w.height+2*f[1],className:"react-flow__edge-textbg",style:c,rx:v,ry:v}),N("text",{className:"react-flow__edge-text",y:w.height/2,dy:"0.3em",ref:x,style:a,children:o}),p]})},dm=oe(lm),or=function(e){var t=e.path,n=e.centerX,r=e.centerY,o=e.label,i=e.labelStyle,a=e.labelShowBg,s=e.labelBgStyle,u=e.labelBgPadding,l=e.labelBgBorderRadius,c=e.style,d=e.markerEnd,f=e.markerStart,h=o?N(dm,{x:n,y:r,label:o,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:l}):null;return ne(fe,{children:[N("path",{style:c,d:t,className:"react-flow__edge-path",markerEnd:d,markerStart:f}),h]})};function Fn(e){var t=e.pos,n=e.x1,r=e.y1,o=e.x2,i=e.y2,a,s;switch(t){case z.Left:case z.Right:a=.5*(n+o),s=r;break;case z.Top:case z.Bottom:a=n,s=.5*(r+i);break}return[a,s]}function $u(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?z.Bottom:r,i=e.targetX,a=e.targetY,s=e.targetPosition,u=s===void 0?z.Top:s,l=Fn({pos:o,x1:t,y1:n,x2:i,y2:a}),c=X(l,2),d=c[0],f=c[1],h=Fn({pos:u,x1:i,y1:a,x2:t,y2:n}),v=X(h,2),p=v[0],y=v[1];return"M".concat(t,",").concat(n," C").concat(d,",").concat(f," ").concat(p,",").concat(y," ").concat(i,",").concat(a)}function fm(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?z.Bottom:r,i=e.targetX,a=e.targetY,s=e.targetPosition,u=s===void 0?z.Top:s,l=Fn({pos:o,x1:t,y1:n,x2:i,y2:a}),c=X(l,2),d=c[0],f=c[1],h=Fn({pos:u,x1:i,y1:a,x2:t,y2:n}),v=X(h,2),p=v[0],y=v[1],m=t*.125+d*.375+p*.375+i*.125,x=n*.125+f*.375+y*.375+a*.125,E=Math.abs(m-t),b=Math.abs(x-n);return[m,x,E,b]}var Au=oe(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,i=e.sourcePosition,a=i===void 0?z.Bottom:i,s=e.targetPosition,u=s===void 0?z.Top:s,l=e.label,c=e.labelStyle,d=e.labelShowBg,f=e.labelBgStyle,h=e.labelBgPadding,v=e.labelBgBorderRadius,p=e.style,y=e.markerEnd,m=e.markerStart,x={sourceX:t,sourceY:n,sourcePosition:a,targetX:r,targetY:o,targetPosition:u},E=$u(x),b=fm(x),w=X(b,2),_=w[0],k=w[1];return N(or,{path:E,centerX:_,centerY:k,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:v,style:p,markerEnd:y,markerStart:m})});function Ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function hm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ia(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ia(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Da=[z.Left,z.Right],Lu=function(t){var n=t.sourceX,r=t.sourceY,o=t.targetX,i=t.targetY,a=t.sourcePosition,s=a===void 0?z.Bottom:a,u=t.targetPosition,l=u===void 0?z.Top:u,c=Da.includes(s),d=Da.includes(l),f=c&&!d||d&&!c;if(f){var h=c?Math.abs(o-n):0,v=n>o?n-h:n+h,p=c?0:Math.abs(i-r),y=r<i?r+p:r-p;return[v,y,h,p]}var m=Math.abs(o-n)/2,x=o<n?o+m:o-m,E=Math.abs(i-r)/2,b=i<r?i+E:i-E;return[x,b,m,E]};function zt(e,t,n){return n===void 0?n:function(r){var o=t().edges.find(function(i){return i.id===e});n(r,hm({},o))}}var mr=function(t,n,r){return"L ".concat(t,",").concat(n-r,"Q ").concat(t,",").concat(n," ").concat(t+r,",").concat(n)},yr=function(t,n,r){return"L ".concat(t+r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-r)},br=function(t,n,r){return"L ".concat(t,",").concat(n-r,"Q ").concat(t,",").concat(n," ").concat(t-r,",").concat(n)},wr=function(t,n,r){return"L ".concat(t-r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-r)},Er=function(t,n,r){return"L ".concat(t+r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+r)},Sr=function(t,n,r){return"L ".concat(t,",").concat(n+r,"Q ").concat(t,",").concat(n," ").concat(t+r,",").concat(n)},xr=function(t,n,r){return"L ".concat(t,",").concat(n+r,"Q ").concat(t,",").concat(n," ").concat(t-r,",").concat(n)},_r=function(t,n,r){return"L ".concat(t-r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+r)};function ri(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?z.Bottom:r,i=e.targetX,a=e.targetY,s=e.targetPosition,u=s===void 0?z.Top:s,l=e.borderRadius,c=l===void 0?5:l,d=e.centerX,f=e.centerY,h=Lu({sourceX:t,sourceY:n,targetX:i,targetY:a}),v=X(h,4),p=v[0],y=v[1],m=v[2],x=v[3],E=Math.min(c,Math.abs(i-t)),b=Math.min(c,Math.abs(a-n)),w=Math.min(E,b,m,x),_=[z.Left,z.Right],k=typeof d<"u"?d:p,O=typeof f<"u"?f:y,R=null,A=null;return t<=i?(R=n<=a?mr(t,O,w):Sr(t,O,w),A=n<=a?_r(i,O,w):wr(i,O,w)):(R=n<a?br(t,O,w):xr(t,O,w),A=n<a?Er(i,O,w):yr(i,O,w)),_.includes(o)&&_.includes(u)?t<=i?(R=n<=a?_r(k,n,w):wr(k,n,w),A=n<=a?mr(k,a,w):Sr(k,a,w)):(o===z.Right&&u===z.Left||o===z.Left&&u===z.Right||o===z.Left&&u===z.Left)&&(R=n<=a?Er(k,n,w):yr(k,n,w),A=n<=a?br(k,a,w):xr(k,a,w)):_.includes(o)&&!_.includes(u)?(t<=i?R=n<=a?_r(i,n,w):wr(i,n,w):R=n<=a?Er(i,n,w):yr(i,n,w),A=""):!_.includes(o)&&_.includes(u)&&(t<=i?R=n<=a?mr(t,a,w):Sr(t,a,w):R=n<=a?br(t,a,w):xr(t,a,w),A=""),"M ".concat(t,",").concat(n).concat(R).concat(A,"L ").concat(i,",").concat(a)}var Ci=oe(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,i=e.label,a=e.labelStyle,s=e.labelShowBg,u=e.labelBgStyle,l=e.labelBgPadding,c=e.labelBgBorderRadius,d=e.style,f=e.sourcePosition,h=f===void 0?z.Bottom:f,v=e.targetPosition,p=v===void 0?z.Top:v,y=e.markerEnd,m=e.markerStart,x=e.borderRadius,E=x===void 0?5:x,b=Lu({sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:h,targetPosition:p}),w=X(b,2),_=w[0],k=w[1],O=ri({sourceX:t,sourceY:n,sourcePosition:h,targetX:r,targetY:o,targetPosition:p,borderRadius:E});return N(or,{path:O,centerX:_,centerY:k,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:y,markerStart:m})});function Ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ta(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ra(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ra(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var zu=oe(function(e){return N(Ci,{...Ta(Ta({},e),{},{borderRadius:0})})}),Bu=oe(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,i=e.label,a=e.labelStyle,s=e.labelShowBg,u=e.labelBgStyle,l=e.labelBgPadding,c=e.labelBgBorderRadius,d=e.style,f=e.markerEnd,h=e.markerStart,v=Math.abs(o-n)/2,p=o<n?o+v:o-v,y=Math.abs(r-t)/2,m=r<t?r+y:r-y,x="M ".concat(t,",").concat(n,"L ").concat(r,",").concat(o);return N(or,{path:x,centerX:m,centerY:p,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:f,markerStart:h})});function En(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Xn(e){var t=e.pos,n=e.x1,r=e.y1,o=e.x2,i=e.y2,a=e.c,s,u;switch(t){case z.Left:s=n-En(n-o,a),u=r;break;case z.Right:s=n+En(o-n,a),u=r;break;case z.Top:s=n,u=r-En(r-i,a);break;case z.Bottom:s=n,u=r+En(i-r,a);break}return[s,u]}function Vu(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?z.Bottom:r,i=e.targetX,a=e.targetY,s=e.targetPosition,u=s===void 0?z.Top:s,l=e.curvature,c=l===void 0?.25:l,d=Xn({pos:o,x1:t,y1:n,x2:i,y2:a,c}),f=X(d,2),h=f[0],v=f[1],p=Xn({pos:u,x1:i,y1:a,x2:t,y2:n,c}),y=X(p,2),m=y[0],x=y[1];return"M".concat(t,",").concat(n," C").concat(h,",").concat(v," ").concat(m,",").concat(x," ").concat(i,",").concat(a)}function vm(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?z.Bottom:r,i=e.targetX,a=e.targetY,s=e.targetPosition,u=s===void 0?z.Top:s,l=e.curvature,c=l===void 0?.25:l,d=Xn({pos:o,x1:t,y1:n,x2:i,y2:a,c}),f=X(d,2),h=f[0],v=f[1],p=Xn({pos:u,x1:i,y1:a,x2:t,y2:n,c}),y=X(p,2),m=y[0],x=y[1],E=t*.125+h*.375+m*.375+i*.125,b=n*.125+v*.375+x*.375+a*.125,w=Math.abs(E-t),_=Math.abs(b-n);return[E,b,w,_]}var oi=oe(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,i=e.sourcePosition,a=i===void 0?z.Bottom:i,s=e.targetPosition,u=s===void 0?z.Top:s,l=e.label,c=e.labelStyle,d=e.labelShowBg,f=e.labelBgStyle,h=e.labelBgPadding,v=e.labelBgBorderRadius,p=e.style,y=e.markerEnd,m=e.markerStart,x=e.curvature,E={sourceX:t,sourceY:n,sourcePosition:a,targetX:r,targetY:o,targetPosition:u,curvature:x},b=Vu(E),w=vm(E),_=X(w,2),k=_[0],O=_[1];return N(or,{path:b,centerX:k,centerY:O,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:v,style:p,markerEnd:y,markerStart:m})}),Ni=om(null),pm=Ni.Provider;Ni.Consumer;function ii(e,t,n,r,o,i,a){var s=a.elementFromPoint(e.clientX,e.clientY),u=(s==null?void 0:s.classList.contains("target"))||!1,l=(s==null?void 0:s.classList.contains("source"))||!1,c={elementBelow:s,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(s&&(u||l)){c.isHoveringHandle=!0;var d=s.getAttribute("data-nodeid"),f=s.getAttribute("data-handleid"),h=n?{source:d,sourceHandle:f,target:r,targetHandle:o}:{source:r,sourceHandle:o,target:d,targetHandle:f};c.connection=h;var v=t===Ot.Strict?n&&l||!n&&u:!0;v&&(c.isValid=i(h))}return c}function $a(e){e==null||e.classList.remove("react-flow__handle-valid"),e==null||e.classList.remove("react-flow__handle-connecting")}function ju(e){var t=e.event,n=e.handleId,r=e.nodeId,o=e.onConnect,i=e.isTarget,a=e.getState,s=e.setState,u=e.isValidConnection,l=e.elementEdgeUpdaterType,c=e.onEdgeUpdateEnd,d=t.target.closest(".react-flow"),f=wu(t.target);if(!f)return;var h=f.elementFromPoint(t.clientX,t.clientY),v=h==null?void 0:h.classList.contains("target"),p=h==null?void 0:h.classList.contains("source");if(!d||!v&&!p&&!l)return;var y=a(),m=y.onConnectStart,x=y.connectionMode,E=l||(v?"target":"source"),b=d.getBoundingClientRect(),w;s({connectionPosition:{x:t.clientX-b.left,y:t.clientY-b.top},connectionNodeId:r,connectionHandleId:n,connectionHandleType:E}),m==null||m(t,{nodeId:r,handleId:n,handleType:E});function _(O){s({connectionPosition:{x:O.clientX-b.left,y:O.clientY-b.top}});var R=ii(O,x,i,r,n,u,f),A=R.connection,$=R.elementBelow,V=R.isValid,B=R.isHoveringHandle;if(!B)return $a(w);A.source!==A.target&&$&&(w=$,$.classList.add("react-flow__handle-connecting"),$.classList.toggle("react-flow__handle-valid",V))}function k(O){var R=a(),A=R.onConnectStop,$=R.onConnectEnd,V=ii(O,x,i,r,n,u,f),B=V.connection,g=V.isValid;A==null||A(O),g&&(o==null||o(B)),$==null||$(O),l&&c&&c(O),$a(w),s({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),f.removeEventListener("mousemove",_),f.removeEventListener("mouseup",k)}f.addEventListener("mousemove",_),f.addEventListener("mouseup",k)}var gm=["type","position","isValidConnection","isConnectable","id","onConnect","children","className","onMouseDown"];function Aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Cr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Aa(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aa(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var mm=function(){return!0},ym=function(t){return{connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick}},Hu=Tu(function(e,t){var n=e.type,r=n===void 0?"source":n,o=e.position,i=o===void 0?z.Top:o,a=e.isValidConnection,s=a===void 0?mm:a,u=e.isConnectable,l=u===void 0?!0:u,c=e.id,d=e.onConnect,f=e.children,h=e.className,v=e.onMouseDown,p=on(e,gm),y=le(),m=im(Ni),x=ae(ym,ge),E=x.connectionStartHandle,b=x.connectOnClick,w=c||null,_=r==="target",k=function($){var V=y.getState(),B=V.defaultEdgeOptions,g=V.onConnect,C=V.hasDefaultEdges,S=Cr(Cr({},B),$);if(C){var P=y.getState(),M=P.edges;y.setState({edges:Tg(S,M)})}g==null||g(S),d==null||d(S)},O=function($){$.button===0&&ju({event:$,handleId:w,nodeId:m,onConnect:k,isTarget:_,getState:y.getState,setState:y.setState,isValidConnection:s}),v==null||v($)},R=function($){var V=y.getState(),B=V.onClickConnectStart,g=V.onClickConnectStop,C=V.onClickConnectEnd,S=V.connectionMode;if(!E){B==null||B($,{nodeId:m,handleId:w,handleType:r}),y.setState({connectionStartHandle:{nodeId:m,type:r,handleId:w}});return}var P=wu($.target),M=ii($,S,E.type==="target",E.nodeId,E.handleId||null,s,P),T=M.connection,I=M.isValid;g==null||g($),I&&k(T),C==null||C($),y.setState({connectionStartHandle:null})};return N("div",{...Cr({"data-handleid":w,"data-nodeid":m,"data-handlepos":i,className:me(["react-flow__handle","react-flow__handle-".concat(i),"nodrag",h,{source:!_,target:_,connectable:l,connecting:(E==null?void 0:E.nodeId)===m&&(E==null?void 0:E.handleId)===w&&(E==null?void 0:E.type)===r}]),onMouseDown:O,onClick:b?R:void 0,ref:t},p),children:f})});Hu.displayName="Handle";var Gn=oe(Hu),Yu=function(t){var n=t.data,r=t.isConnectable,o=t.targetPosition,i=o===void 0?z.Top:o,a=t.sourcePosition,s=a===void 0?z.Bottom:a;return ne(fe,{children:[N(Gn,{type:"target",position:i,isConnectable:r}),n==null?void 0:n.label,N(Gn,{type:"source",position:s,isConnectable:r})]})};Yu.displayName="DefaultNode";var ai=oe(Yu),qu=function(t){var n=t.data,r=t.isConnectable,o=t.sourcePosition,i=o===void 0?z.Bottom:o;return ne(fe,{children:[n==null?void 0:n.label,N(Gn,{type:"source",position:i,isConnectable:r})]})};qu.displayName="InputNode";var Uu=oe(qu),Fu=function(t){var n=t.data,r=t.isConnectable,o=t.targetPosition,i=o===void 0?z.Top:o;return ne(fe,{children:[N(Gn,{type:"target",position:i,isConnectable:r}),n==null?void 0:n.label]})};Fu.displayName="OutputNode";var Xu=oe(Fu),bm=function(t){return{selectedNodes:Array.from(t.nodeInternals.values()).filter(function(n){return n.selected}),selectedEdges:t.edges.filter(function(n){return n.selected})}},wm=function(t,n){var r=t.selectedNodes.map(function(s){return s.id}),o=n.selectedNodes.map(function(s){return s.id}),i=t.selectedEdges.map(function(s){return s.id}),a=n.selectedEdges.map(function(s){return s.id});return ge(r,o)&&ge(i,a)};function Em(e){var t=e.onSelectionChange,n=ae(bm,wm),r=n.selectedNodes,o=n.selectedEdges;return re(function(){t({nodes:r,edges:o})},[r,o]),null}var Sm=oe(Em),xm=function(t){return{setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset}};function Ye(e,t){re(function(){typeof e<"u"&&t(e)},[e])}function J(e,t,n){re(function(){typeof t<"u"&&n(W({},e,t))},[t])}var _m=function(t){var n=t.nodes,r=t.edges,o=t.defaultNodes,i=t.defaultEdges,a=t.onConnect,s=t.onConnectStart,u=t.onConnectStop,l=t.onConnectEnd,c=t.onClickConnectStart,d=t.onClickConnectStop,f=t.onClickConnectEnd,h=t.nodesDraggable,v=t.nodesConnectable,p=t.minZoom,y=t.maxZoom,m=t.nodeExtent,x=t.onNodesChange,E=t.onEdgesChange,b=t.elementsSelectable,w=t.connectionMode,_=t.snapGrid,k=t.snapToGrid,O=t.translateExtent,R=t.connectOnClick,A=t.defaultEdgeOptions,$=t.fitView,V=t.fitViewOptions,B=t.onNodesDelete,g=t.onEdgesDelete,C=t.onNodeDrag,S=t.onNodeDragStart,P=t.onNodeDragStop,M=t.onSelectionDrag,T=t.onSelectionDragStart,I=t.onSelectionDragStop,L=ae(xm,ge),Y=L.setNodes,U=L.setEdges,D=L.setDefaultNodesAndEdges,H=L.setMinZoom,Z=L.setMaxZoom,G=L.setTranslateExtent,Q=L.setNodeExtent,ee=L.reset,j=le();return re(function(){return D(o,i),function(){ee()}},[]),J("defaultEdgeOptions",A,j.setState),J("connectionMode",w,j.setState),J("onConnect",a,j.setState),J("onConnectStart",s,j.setState),J("onConnectStop",u,j.setState),J("onConnectEnd",l,j.setState),J("onClickConnectStart",c,j.setState),J("onClickConnectStop",d,j.setState),J("onClickConnectEnd",f,j.setState),J("nodesDraggable",h,j.setState),J("nodesConnectable",v,j.setState),J("elementsSelectable",b,j.setState),J("snapToGrid",k,j.setState),J("snapGrid",_,j.setState),J("onNodesChange",x,j.setState),J("onEdgesChange",E,j.setState),J("connectOnClick",R,j.setState),J("fitViewOnInit",$,j.setState),J("fitViewOnInitOptions",V,j.setState),J("onNodesDelete",B,j.setState),J("onEdgesDelete",g,j.setState),J("onNodeDrag",C,j.setState),J("onNodeDragStart",S,j.setState),J("onNodeDragStop",P,j.setState),J("onSelectionDrag",M,j.setState),J("onSelectionDragStart",T,j.setState),J("onSelectionDragStop",I,j.setState),Ye(n,Y),Ye(r,U),Ye(o,Y),Ye(i,U),Ye(p,H),Ye(y,Z),Ye(O,G),Ye(m,Q),null},Cm=".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__container{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__viewport{pointer-events:none;transform-origin:0 0;z-index:2}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow .react-flow__edges{overflow:visible;pointer-events:none}.react-flow .react-flow__connectionline{z-index:1001}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{box-sizing:border-box;pointer-events:all;position:absolute;transform-origin:0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{pointer-events:none;transform-origin:left top;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none;position:absolute}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__controls{bottom:20px;left:15px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:20px;position:absolute;right:15px;z-index:5}.react-flow__attribution{background:hsla(0,0%,100%,.5);color:#999;font-size:10px;padding:2px 3px;position:absolute;z-index:1000}.react-flow__attribution a{color:#555;text-decoration:none}.react-flow__attribution.top{top:0}.react-flow__attribution.bottom{bottom:0}.react-flow__attribution.left{left:0}.react-flow__attribution.right{right:0}.react-flow__attribution.center{left:50%;transform:translateX(-50%)}",Nm=Cm,Om=".react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-group,.react-flow__node-input,.react-flow__node-output{background:#fff;border:1px solid #1a192b;border-radius:3px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selected,.react-flow__node-group.selected,.react-flow__node-input.selected,.react-flow__node-output.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle,.react-flow__node-group .react-flow__handle,.react-flow__node-input .react-flow__handle,.react-flow__node-output .react-flow__handle{background:#1a192b}.react-flow__node-default.selectable:hover,.react-flow__node-group.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-default.selectable.selected,.react-flow__node-group.selectable.selected,.react-flow__node-input.selectable.selected,.react-flow__node-output.selectable.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-group{background:hsla(0,0%,94%,.25);border-color:#1a192b}.react-flow__nodesselection-rect,.react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}",Pm=Om,km=function(t,n,r){return r===z.Left?t-n:r===z.Right?t+n:t},Mm=function(t,n,r){return r===z.Top?t-n:r===z.Bottom?t+n:t},La=function(t){var n=t.className,r=t.position,o=t.centerX,i=t.centerY,a=t.radius,s=a===void 0?10:a;return N("circle",{className:me(["react-flow__edgeupdater",n]),cx:km(o,s,r),cy:Mm(i,s,r),r:s,stroke:"transparent",fill:"transparent"})},gt=function(e){var t=function(r){var o=r.id,i=r.className,a=r.type,s=r.data,u=r.onClick,l=r.onEdgeDoubleClick,c=r.selected,d=r.animated,f=r.label,h=r.labelStyle,v=r.labelShowBg,p=r.labelBgStyle,y=r.labelBgPadding,m=r.labelBgBorderRadius,x=r.style,E=r.source,b=r.target,w=r.sourceX,_=r.sourceY,k=r.targetX,O=r.targetY,R=r.sourcePosition,A=r.targetPosition,$=r.elementsSelectable,V=r.hidden,B=r.sourceHandleId,g=r.targetHandleId,C=r.onContextMenu,S=r.onMouseEnter,P=r.onMouseMove,M=r.onMouseLeave,T=r.edgeUpdaterRadius,I=r.onEdgeUpdate,L=r.onEdgeUpdateStart,Y=r.onEdgeUpdateEnd,U=r.markerEnd,D=r.markerStart,H=r.rfId,Z=kt(!1),G=X(Z,2),Q=G[0],ee=G[1],j=le(),ce=function(xe){var Ie=j.getState(),Rt=Ie.edges,ft=Ie.addSelectedEdges,Je=Rt.find(function(ht){return ht.id===o});$&&(j.setState({nodesSelectionActive:!1}),ft([o])),u==null||u(xe,Je)},Me=zt(o,j.getState,l),Ze=zt(o,j.getState,C),We=zt(o,j.getState,S),It=zt(o,j.getState,P),je=zt(o,j.getState,M),lt=function(xe,Ie){var Rt=Ie?b:E,ft=(Ie?g:B)||null,Je=Ie?"target":"source",ht=function(){return!0},lr=Ie,Tt=j.getState().edges.find(function(et){return et.id===o});L==null||L(xe,Tt,Je);var dn=Y?function(et){return Y(et,Tt,Je)}:void 0,dr=function(fn){return I==null?void 0:I(Tt,fn)};ju({event:xe,handleId:ft,nodeId:Rt,onConnect:dr,isTarget:lr,getState:j.getState,setState:j.setState,isValidConnection:ht,elementEdgeUpdaterType:Je,onEdgeUpdateEnd:dn})},dt=function(xe){return lt(xe,!0)},sr=function(xe){return lt(xe,!1)},Dt=function(){return ee(!0)},sn=function(){return ee(!1)},cn=Pt(function(){return"url(#".concat(ni(D,H),")")},[D,H]),cr=Pt(function(){return"url(#".concat(ni(U,H),")")},[U,H]);if(V)return null;var un=!$&&!u,ln=typeof I<"u",ur=me(["react-flow__edge","react-flow__edge-".concat(a),i,{selected:c,animated:d,inactive:un,updating:Q}]);return ne("g",{className:ur,onClick:ce,onDoubleClick:Me,onContextMenu:Ze,onMouseEnter:We,onMouseMove:It,onMouseLeave:je,children:[N(e,{id:o,source:E,target:b,selected:c,animated:d,label:f,labelStyle:h,labelShowBg:v,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:m,data:s,style:x,sourceX:w,sourceY:_,targetX:k,targetY:O,sourcePosition:R,targetPosition:A,sourceHandleId:B,targetHandleId:g,markerStart:cn,markerEnd:cr}),ln&&N("g",{onMouseDown:dt,onMouseEnter:Dt,onMouseOut:sn,children:N(La,{position:R,centerX:w,centerY:_,radius:T})}),ln&&N("g",{onMouseDown:sr,onMouseEnter:Dt,onMouseOut:sn,children:N(La,{position:A,centerX:k,centerY:O,radius:T})})]})};return t.displayName="EdgeWrapper",oe(t)};function za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ba(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?za(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):za(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Im(e){var t={default:gt(e.default||oi),straight:gt(e.bezier||Bu),step:gt(e.step||zu),smoothstep:gt(e.step||Ci),simplebezier:gt(e.simplebezier||Au)},n={},r=Object.keys(e).filter(function(o){return!["default","bezier"].includes(o)}).reduce(function(o,i){return o[i]=gt(e[i]||oi),o},n);return Ba(Ba({},t),r)}function Va(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,i=(n==null?void 0:n.width)||t.width,a=(n==null?void 0:n.height)||t.height;switch(e){case z.Top:return{x:r+i/2,y:o};case z.Right:return{x:r+i,y:o+a/2};case z.Bottom:return{x:r+i/2,y:o+a};case z.Left:return{x:r,y:o+a/2}}}function ja(e,t){if(!e)return null;var n=null;return e.length===1||!t?n=e[0]:t&&(n=e.find(function(r){return r.id===t})),typeof n>"u"?null:n}var Dm=function(t,n,r,o,i,a){var s=Va(r,t,n),u=Va(a,o,i);return{sourceX:s.x,sourceY:s.y,targetX:u.x,targetY:u.y}};function Rm(e){var t=e.sourcePos,n=e.targetPos,r=e.sourceWidth,o=e.sourceHeight,i=e.targetWidth,a=e.targetHeight,s=e.width,u=e.height,l=e.transform,c={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+r,n.x+i),y2:Math.max(t.y+o,n.y+a)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);var d=Un({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:s/l[2],height:u/l[2]}),f=Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x)),h=Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y)),v=Math.ceil(f*h);return v>0}function Ha(e,t){var n,r,o,i,a,s=e.get(t),u=(s==null||(n=s[se])===null||n===void 0?void 0:n.handleBounds)||null,l=!s||!u||!s.width||!s.height||typeof((r=s.positionAbsolute)===null||r===void 0?void 0:r.x)>"u"||typeof((o=s.positionAbsolute)===null||o===void 0?void 0:o.y)>"u";return[{x:(s==null||(i=s.positionAbsolute)===null||i===void 0?void 0:i.x)||0,y:(s==null||(a=s.positionAbsolute)===null||a===void 0?void 0:a.y)||0,width:(s==null?void 0:s.width)||0,height:(s==null?void 0:s.height)||0},u,!l]}var Tm=typeof document<"u"?document:null,Kn=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{target:Tm},n=kt(!1),r=X(n,2),o=r[0],i=r[1],a=ie(new Set([])),s=Pt(function(){if(e!==null){var d=Array.isArray(e)?e:[e],f=d.filter(function(v){return typeof v=="string"}).map(function(v){return v.split("+")}),h=f.reduce(function(v,p){return v.concat.apply(v,at(p))},[]);return[f,h]}return[[],[]]},[e]),u=X(s,2),l=u[0],c=u[1];return re(function(){if(e!==null){var d,f,h=function(m){if(Ua(m))return!1;var x=qa(m.code,c);a.current.add(m[x]),Ya(l,a.current,!1)&&(m.preventDefault(),i(!0))},v=function(m){if(Ua(m))return!1;var x=qa(m.code,c);Ya(l,a.current,!0)?(i(!1),a.current.clear()):a.current.delete(m[x])},p=function(){a.current.clear(),i(!1)};return t==null||(d=t.target)===null||d===void 0||d.addEventListener("keydown",h),t==null||(f=t.target)===null||f===void 0||f.addEventListener("keyup",v),window.addEventListener("blur",p),function(){var y,m;t==null||(y=t.target)===null||y===void 0||y.removeEventListener("keydown",h),t==null||(m=t.target)===null||m===void 0||m.removeEventListener("keyup",v),window.removeEventListener("blur",p)}}},[e,i]),o};function Ya(e,t,n){return e.filter(function(r){return n||r.length===t.size}).some(function(r){return r.every(function(o){return t.has(o)})})}function qa(e,t){return t.includes(e)?"code":"key"}function Ua(e){var t=e.target;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))}var $m=function(t){return{onNodesChange:t.onNodesChange,onEdgesChange:t.onEdgesChange}},Am=function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,r=le(),o=ae($m,ge),i=o.onNodesChange,a=o.onEdgesChange,s=Kn(t),u=Kn(n);re(function(){var l=r.getState(),c=l.nodeInternals,d=l.edges,f=l.hasDefaultNodes,h=l.hasDefaultEdges,v=l.onNodesDelete,p=l.onEdgesDelete,y=Array.from(c.values()),m=y.reduce(function(O,R){return(!R.selected&&R.parentNode&&O.find(function(A){return A.id===R.parentNode})||R.selected)&&O.push(R),O},[]),x=d.filter(function(O){return O.selected});if(s&&(m||x)){var E=Si(m,d),b=[].concat(at(x),at(E)),w=b.reduce(function(O,R){return O.includes(R.id)||O.push(R.id),O},[]);if((h||f)&&(h&&r.setState({edges:d.filter(function(O){return!w.includes(O.id)})}),f&&(m.forEach(function(O){c.delete(O.id)}),r.setState({nodeInternals:new Map(c)}))),w.length>0&&(p==null||p(b),a)){var _=w.map(function(O){return{id:O,type:"remove"}});a(_)}if(m.length>0&&(v==null||v(m),i)){var k=m.map(function(O){return{id:O.id,type:"remove"}});i(k)}r.setState({nodesSelectionActive:!1})}},[s,i,a]),re(function(){r.setState({multiSelectionActive:u})},[u])};function Lm(e){var t=le();re(function(){var n,r=function(){if(!!e.current){var i=wi(e.current);t.setState({width:i.width||500,height:i.height||500})}};return r(),window.onresize=r,e.current&&(n=new ResizeObserver(function(){return r()}),n.observe(e.current)),function(){window.onresize=null,n&&e.current&&n.unobserve(e.current)}},[])}var zm=function(t,n){return t.x!==n.x||t.y!==n.y||t.zoom!==n.k},Nr=function(t){return{x:t.x,y:t.y,zoom:t.k}},Sn=function(t,n){return t.target.closest(".".concat(n))},Bm=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler}},Vm=function(t){var n=t.onMove,r=t.onMoveStart,o=t.onMoveEnd,i=t.zoomOnScroll,a=i===void 0?!0:i,s=t.zoomOnPinch,u=s===void 0?!0:s,l=t.panOnScroll,c=l===void 0?!1:l,d=t.panOnScrollSpeed,f=d===void 0?.5:d,h=t.panOnScrollMode,v=h===void 0?xt.Free:h,p=t.zoomOnDoubleClick,y=p===void 0?!0:p,m=t.selectionKeyPressed,x=t.elementsSelectable,E=t.panOnDrag,b=E===void 0?!0:E,w=t.defaultPosition,_=w===void 0?[0,0]:w,k=t.defaultZoom,O=k===void 0?1:k,R=t.zoomActivationKeyCode,A=t.preventScrolling,$=A===void 0?!0:A,V=t.children,B=t.noWheelClassName,g=t.noPanClassName,C=le(),S=ie(!1),P=ie(null),M=ie({x:0,y:0,zoom:0}),T=ae(Bm,ge),I=T.d3Zoom,L=T.d3Selection,Y=T.d3ZoomHandler,U=Kn(R);return Lm(P),re(function(){if(P.current){var D=C.getState(),H=D.minZoom,Z=D.maxZoom,G=D.translateExtent,Q=_g().scaleExtent([H,Z]).translateExtent(G),ee=be(P.current).call(Q),j=_t(_[0],G[0][0],G[1][0]),ce=_t(_[1],G[0][1],G[1][1]),Me=_t(O,H,Z),Ze=it.translate(j,ce).scale(Me);Q.transform(ee,Ze),C.setState({d3Zoom:Q,d3Selection:ee,d3ZoomHandler:ee.on("wheel.zoom"),transform:[j,ce,Me]})}},[]),re(function(){L&&I&&(c&&!U?L.on("wheel",function(D){if(Sn(D,B))return!1;D.preventDefault(),D.stopImmediatePropagation();var H=L.property("__zoom").k||1;if(D.ctrlKey&&u){var Z=Ce(D),G=-D.deltaY*(D.deltaMode===1?.05:D.deltaMode?1:.002)*10,Q=H*Math.pow(2,G);I.scaleTo(L,Q,Z);return}var ee=D.deltaMode===1?20:1,j=v===xt.Vertical?0:D.deltaX*ee,ce=v===xt.Horizontal?0:D.deltaY*ee;I.translateBy(L,-(j/H)*f,-(ce/H)*f)}).on("wheel.zoom",null):typeof Y<"u"&&L.on("wheel",function(D){if(!$||Sn(D,B))return null;D.preventDefault()}).on("wheel.zoom",Y))},[c,v,L,I,Y,U,u,$,B]),re(function(){I&&(m&&!S.current?I.on("zoom",null):m||I.on("zoom",function(D){if(C.setState({transform:[D.transform.x,D.transform.y,D.transform.k]}),n){var H=Nr(D.transform);n(D.sourceEvent,H)}}))},[m,I,n]),re(function(){I&&I.on("start",function(D){if(S.current=!0,r){var H=Nr(D.transform);M.current=H,r(D.sourceEvent,H)}})},[I,r]),re(function(){I&&I.on("end",function(D){if(S.current=!1,o&&zm(M.current,D.transform)){var H=Nr(D.transform);M.current=H,o(D.sourceEvent,H)}})},[I,o]),re(function(){I&&I.filter(function(D){var H=U||a,Z=u&&D.ctrlKey;return!b&&!H&&!c&&!y&&!u||m||!y&&D.type==="dblclick"||Sn(D,B)&&D.type==="wheel"||Sn(D,g)&&D.type!=="wheel"||!u&&D.ctrlKey&&D.type==="wheel"||!H&&!c&&!Z&&D.type==="wheel"||!b&&(D.type==="mousedown"||D.type==="touchstart")?!1:(!D.ctrlKey||D.type==="wheel")&&!D.button})},[I,a,u,c,y,b,m,x,U]),N("div",{className:"react-flow__renderer react-flow__container",ref:P,children:V})};function Fa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Xa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fa(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fa(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ga(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}var jm=function(t){return{userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable}},Ka={startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},Hm=oe(function(e){var t=e.selectionKeyPressed,n=le(),r=ie(0),o=ie(0),i=ie(),a=kt(Ka),s=X(a,2),u=s[0],l=s[1],c=ae(jm,ge),d=c.userSelectionActive,f=c.elementsSelectable,h=d||t;if(!f||!h)return null;var v=function(){l(Ka),n.setState({userSelectionActive:!1}),r.current=0,o.current=0},p=function(b){var w=b.target.closest(".react-flow");i.current=w.getBoundingClientRect();var _=Ga(b,i.current);l({width:0,height:0,startX:_.x,startY:_.y,x:_.x,y:_.y,draw:!0}),n.setState({userSelectionActive:!0,nodesSelectionActive:!1})},y=function(b){var w,_;if(!(!t||!u.draw||!i.current)){var k=Ga(b,i.current),O=(w=u.startX)!==null&&w!==void 0?w:0,R=(_=u.startY)!==null&&_!==void 0?_:0,A=Xa(Xa({},u),{},{x:k.x<O?k.x:O,y:k.y<R?k.y:R,width:Math.abs(k.x-O),height:Math.abs(k.y-R)}),$=n.getState(),V=$.nodeInternals,B=$.edges,g=$.transform,C=$.onNodesChange,S=$.onEdgesChange,P=Array.from(V.values()),M=Ou(V,A,g,!1,!0),T=Si(M,B).map(function(U){return U.id}),I=M.map(function(U){return U.id});if(r.current!==I.length){r.current=I.length;var L=bt(P,I);L.length&&(C==null||C(L))}if(o.current!==T.length){o.current=T.length;var Y=bt(B,T);Y.length&&(S==null||S(Y))}l(A)}},m=function(){n.setState({nodesSelectionActive:r.current>0}),v()},x=function(){n.setState({nodesSelectionActive:!1}),v()};return N("div",{className:"react-flow__selectionpane react-flow__container",onMouseDown:p,onMouseMove:y,onMouseUp:m,onMouseLeave:x,children:u.draw&&N("div",{className:"react-flow__selection react-flow__container",style:{width:u.width,height:u.height,transform:"translate(".concat(u.x,"px, ").concat(u.y,"px)")}})})});function Za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Wa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Za(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Za(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gu(e,t){if(!e.parentNode)return!1;var n=t.get(e.parentNode);return n?n.selected?!0:Gu(n,t):!1}function Qa(e,t,n){var r=e;do{var o;if((o=r)!==null&&o!==void 0&&o.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Ym(e,t,n){return Array.from(e.values()).filter(function(r){return(r.selected||r.id===n)&&(!r.parentNode||!Gu(r,e))}).map(function(r){var o,i,a,s;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:t.x-((o=(i=r.positionAbsolute)===null||i===void 0?void 0:i.x)!==null&&o!==void 0?o:0),y:t.y-((a=(s=r.positionAbsolute)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode,width:r.width,height:r.height}})}function qm(e,t,n,r){var o=e.extent||r,i={x:t.x-e.distance.x,y:t.y-e.distance.y};if(e.extent==="parent")if(e.parentNode&&e.width&&e.height){var a=n.get(e.parentNode);o=a!=null&&a.positionAbsolute&&a!==null&&a!==void 0&&a.width&&a!==null&&a!==void 0&&a.height?[[a.positionAbsolute.x,a.positionAbsolute.y],[a.positionAbsolute.x+a.width-e.width,a.positionAbsolute.y+a.height-e.height]]:o}else o=r;else if(e.extent&&e.parentNode){var s,u,l,c,d=n.get(e.parentNode),f=(s=d==null||(u=d.positionAbsolute)===null||u===void 0?void 0:u.x)!==null&&s!==void 0?s:0,h=(l=d==null||(c=d.positionAbsolute)===null||c===void 0?void 0:c.y)!==null&&l!==void 0?l:0;o=[[e.extent[0][0]+f,e.extent[0][1]+h],[e.extent[1][0]+f,e.extent[1][1]+h]]}var v={x:0,y:0};if(e.parentNode){var p,y,m,x,E=n.get(e.parentNode);v={x:(p=E==null||(y=E.positionAbsolute)===null||y===void 0?void 0:y.x)!==null&&p!==void 0?p:0,y:(m=E==null||(x=E.positionAbsolute)===null||x===void 0?void 0:x.y)!==null&&m!==void 0?m:0}}return e.positionAbsolute=o?bu(i,o):i,e.position={x:e.positionAbsolute.x-v.x,y:e.positionAbsolute.y-v.y},e}function Or(e){var t=e.nodeId,n=e.dragItems,r=e.nodeInternals,o=n.map(function(i){var a=r.get(i.id);return Wa(Wa({},a),{},{position:i.position,positionAbsolute:i.positionAbsolute})});return[t?o.find(function(i){return i.id===t}):o[0],o]}function Pr(e){return function(t,n,r){return e==null?void 0:e(t,r)}}function Ku(e){var t=e.nodeRef,n=e.disabled,r=n===void 0?!1:n,o=e.noDragClassName,i=e.handleSelector,a=e.nodeId,s=e.isSelectable,u=e.selectNodesOnDrag,l=kt(!1),c=X(l,2),d=c[0],f=c[1],h=le(),v=ie(),p=ie({x:null,y:null}),y=Mt(function(m){var x=m.sourceEvent,E=h.getState(),b=E.transform,w=E.snapGrid,_=E.snapToGrid,k=x.touches?x.touches[0].clientX:x.clientX,O=x.touches?x.touches[0].clientY:x.clientY,R=Nu({x:k,y:O},b,_,w);return R},[]);return re(function(){if(t!=null&&t.current){var m=be(t.current);if(r)m.on(".drag",null);else{var x=Tv().on("start",function(E){var b=h.getState(),w=b.nodeInternals,_=b.multiSelectionActive,k=b.unselectNodesAndEdges,O=b.onNodeDragStart,R=b.onSelectionDragStart,A=a?O:Pr(R);if(!u&&!_&&a){var $;($=w.get(a))!==null&&$!==void 0&&$.selected||k()}a&&s&&u&&Cu({id:a,store:h});var V=y(E);if(p.current=V,v.current=Ym(w,V,a),A&&v.current){var B=Or({nodeId:a,dragItems:v.current,nodeInternals:w}),g=X(B,2),C=g[0],S=g[1];A(E.sourceEvent,C,S)}}).on("drag",function(E){var b=h.getState(),w=b.updateNodePositions,_=b.nodeInternals,k=b.nodeExtent,O=b.onNodeDrag,R=b.onSelectionDrag,A=y(E);if((p.current.x!==A.x||p.current.y!==A.y)&&v.current){p.current=A,v.current=v.current.map(function(S){return qm(S,A,_,k)});var $=a?O:Pr(R);if(w(v.current,!0,!0),f(!0),$){var V=Or({nodeId:a,dragItems:v.current,nodeInternals:_}),B=X(V,2),g=B[0],C=B[1];$(E.sourceEvent,g,C)}}E.on("end",function(S){if(f(!1),v.current){var P=h.getState(),M=P.updateNodePositions,T=P.nodeInternals,I=P.onNodeDragStop,L=P.onSelectionDragStop,Y=a?I:Pr(L);if(M(v.current,!1,!1),Y){var U=Or({nodeId:a,dragItems:v.current,nodeInternals:T}),D=X(U,2),H=D[0],Z=D[1];Y(S.sourceEvent,H,Z)}}})}).filter(function(E){var b=E.target,w=!E.button&&(!o||!Qa(b,".".concat(o),t))&&(!i||Qa(b,i,t));return w});return m.call(x),function(){m.on(".drag",null)}}}},[t,r,o,i,s,h,a,u,y]),d}function Ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Um(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ja(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Fm=function(t){return Um({transformString:"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")"),userSelectionActive:t.userSelectionActive},Ei(Array.from(t.nodeInternals.values()).filter(function(n){return n.selected})))},Xm=function(t){var n=Array.from(t.nodeInternals.values()).filter(function(r){return r.selected});return Ei(n)};function Gm(e){var t=e.onSelectionContextMenu,n=e.noPanClassName,r=le(),o=ae(Fm,ge),i=o.transformString,a=o.userSelectionActive,s=ae(Xm,ge),u=s.width,l=s.height,c=s.x,d=s.y,f=ie(null);if(Ku({nodeRef:f}),a||!u||!l)return null;var h=t?function(v){var p=Array.from(r.getState().nodeInternals.values()).filter(function(y){return y.selected});t(v,p)}:void 0;return N("div",{className:me(["react-flow__nodesselection","react-flow__container",n]),style:{transform:i},children:N("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,style:{width:u,height:l,top:d,left:c}})})}var Km=oe(Gm),Zm=function(t){return t.nodesSelectionActive},Zu=function(t){var n=t.children,r=t.onPaneClick,o=t.onPaneContextMenu,i=t.onPaneScroll,a=t.deleteKeyCode,s=t.onMove,u=t.onMoveStart,l=t.onMoveEnd,c=t.selectionKeyCode,d=t.multiSelectionKeyCode,f=t.zoomActivationKeyCode,h=t.elementsSelectable,v=t.zoomOnScroll,p=t.zoomOnPinch,y=t.panOnScroll,m=t.panOnScrollSpeed,x=t.panOnScrollMode,E=t.zoomOnDoubleClick,b=t.panOnDrag,w=t.defaultPosition,_=t.defaultZoom,k=t.preventScrolling,O=t.onSelectionContextMenu,R=t.noWheelClassName,A=t.noPanClassName,$=le(),V=ae(Zm),B=Kn(c);Am({deleteKeyCode:a,multiSelectionKeyCode:d});var g=function(M){r==null||r(M),$.getState().resetSelectedElements(),$.setState({nodesSelectionActive:!1})},C=o?function(P){return o(P)}:void 0,S=i?function(P){return i(P)}:void 0;return ne(Vm,{onMove:s,onMoveStart:u,onMoveEnd:l,selectionKeyPressed:B,elementsSelectable:h,zoomOnScroll:v,zoomOnPinch:p,panOnScroll:y,panOnScrollSpeed:m,panOnScrollMode:x,zoomOnDoubleClick:E,panOnDrag:b,defaultPosition:w,defaultZoom:_,zoomActivationKeyCode:f,preventScrolling:k,noWheelClassName:R,noPanClassName:A,children:[n,N(Hm,{selectionKeyPressed:B}),V&&N(Km,{onSelectionContextMenu:O,noPanClassName:A}),N("div",{className:"react-flow__pane react-flow__container",onClick:g,onContextMenu:C,onWheel:S})]})};Zu.displayName="FlowRenderer";var Wm=oe(Zu);function Qm(e){var t=ae(Mt(function(n){return e?Ou(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):Array.from(n.nodeInternals.values())},[e]));return t}var Jm=function(t){return{nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions}},Wu=function(t){var n=ae(Jm,ge),r=n.nodesDraggable,o=n.nodesConnectable,i=n.elementsSelectable,a=n.updateNodeDimensions,s=Qm(t.onlyRenderVisibleElements),u=ie(),l=Pt(function(){if(typeof ResizeObserver>"u")return null;var c=new ResizeObserver(function(d){var f=d.map(function(h){return{id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}});a(f)});return u.current=c,c},[]);return re(function(){return function(){var c;u==null||(c=u.current)===null||c===void 0||c.disconnect()}},[]),N("div",{className:"react-flow__nodes react-flow__container",children:s.map(function(c){var d,f,h,v,p,y,m,x=c.type||"default";t.nodeTypes[x]||(x="default");var E=t.nodeTypes[x]||t.nodeTypes.default,b=!!(c.draggable||r&&typeof c.draggable>"u"),w=!!(c.selectable||i&&typeof c.selectable>"u"),_=!!(c.connectable||o&&typeof c.connectable>"u");return N(E,{id:c.id,className:c.className,style:c.style,type:x,data:c.data,sourcePosition:c.sourcePosition||z.Bottom,targetPosition:c.targetPosition||z.Top,hidden:c.hidden,xPos:(d=(f=c.positionAbsolute)===null||f===void 0?void 0:f.x)!==null&&d!==void 0?d:0,yPos:(h=(v=c.positionAbsolute)===null||v===void 0?void 0:v.y)!==null&&h!==void 0?h:0,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!c.selected,isDraggable:b,isSelectable:w,isConnectable:_,resizeObserver:l,dragHandle:c.dragHandle,zIndex:(p=(y=c[se])===null||y===void 0?void 0:y.z)!==null&&p!==void 0?p:0,isParent:!!((m=c[se])!==null&&m!==void 0&&m.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!c.width&&!!c.height},c.id)})})};Wu.displayName="NodeRenderer";var ey=oe(Wu),mt;function es(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ts(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?es(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):es(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var ty=(mt={},W(mt,z.Left,z.Right),W(mt,z.Right,z.Left),W(mt,z.Top,z.Bottom),W(mt,z.Bottom,z.Top),mt),ny=function(e){var t,n,r,o,i,a=e.connectionNodeId,s=e.connectionHandleType,u=e.connectionLineStyle,l=e.connectionLineType,c=l===void 0?$e.Bezier:l,d=e.isConnectable,f=e.CustomConnectionLineComponent,h=ae(Mt(function(T){return{fromNode:T.nodeInternals.get(a),handleId:T.connectionHandleId,toX:(T.connectionPosition.x-T.transform[0])/T.transform[2],toY:(T.connectionPosition.y-T.transform[1])/T.transform[2]}},[a]),ge),v=h.fromNode,p=h.handleId,y=h.toX,m=h.toY,x=v==null||(t=v[se])===null||t===void 0?void 0:t.handleBounds;if(!v||!d||!(x!=null&&x[s]))return null;var E=x[s],b=p?E.find(function(T){return T.id===p}):E[0],w=b?b.x+b.width/2:((n=v==null?void 0:v.width)!==null&&n!==void 0?n:0)/2,_=b?b.y+b.height/2:(r=v==null?void 0:v.height)!==null&&r!==void 0?r:0,k=((v==null||(o=v.positionAbsolute)===null||o===void 0?void 0:o.x)||0)+w,O=((v==null||(i=v.positionAbsolute)===null||i===void 0?void 0:i.y)||0)+_,R=b==null?void 0:b.position;if(!R)return null;var A=ty[R],$,V,B,g,C,S;switch(s){case"source":$=k,V=O,B=R,g=y,C=m,S=A;break;case"target":$=y,V=m,B=A,g=k,C=O,S=R;break}if(f)return N("g",{className:"react-flow__connection",children:N(f,{connectionLineType:c,connectionLineStyle:u,fromNode:v,fromHandle:b,fromX:k,fromY:O,toX:y,toY:m,fromPosition:R,toPosition:A,sourcePosition:B,targetPosition:S,sourceNode:v,sourceHandle:b,targetX:g,targetY:C,sourceX:$,sourceY:V})});var P="",M={sourceX:$,sourceY:V,sourcePosition:B,targetX:g,targetY:C,targetPosition:S};return c===$e.Bezier?P=Vu(M):c===$e.Step?P=ri(ts(ts({},M),{},{borderRadius:0})):c===$e.SmoothStep?P=ri(M):c===$e.SimpleBezier?P=$u(M):P="M".concat($,",").concat(V," ").concat(g,",").concat(C),N("g",{className:"react-flow__connection",children:N("path",{d:P,className:"react-flow__connection-path",style:u})})};function si(e){return si=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},si(e)}var xn,ry=function(t){var n=t.color,r=n===void 0?"none":n,o=t.strokeWidth,i=o===void 0?1:o;return N("polyline",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:i,fill:"none",points:"-5,-4 0,0 -5,4"})},oy=function(t){var n=t.color,r=n===void 0?"none":n,o=t.strokeWidth,i=o===void 0?1:o;return N("polyline",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:i,fill:r,points:"-5,-4 0,0 -5,4 -5,-4"})},ns=(xn={},W(xn,en.Arrow,ry),W(xn,en.ArrowClosed,oy),xn);function iy(e){var t=Pt(function(){var n=ns.hasOwnProperty(e);return n?ns[e]:function(){return null}},[e]);return t}function rs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ay(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rs(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rs(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var sy=function(t){var n=t.id,r=t.type,o=t.color,i=t.width,a=i===void 0?12.5:i,s=t.height,u=s===void 0?12.5:s,l=t.markerUnits,c=l===void 0?"strokeWidth":l,d=t.strokeWidth,f=t.orient,h=f===void 0?"auto":f,v=iy(r);return ka.createElement("marker",{className:"react-flow__arrowhead",id:n,markerWidth:"".concat(a),markerHeight:"".concat(u),viewBox:"-10 -10 20 20",markerUnits:c,orient:h,refX:"0",refY:"0"},ka.createElement(v,{color:o,strokeWidth:d}))},cy=function(t){var n=t.defaultColor,r=t.rfId;return function(o){var i=[];return o.edges.reduce(function(a,s){return[s.markerStart,s.markerEnd].forEach(function(u){if(u&&si(u)==="object"){var l=ni(u,r);i.includes(l)||(a.push(ay({id:l,color:u.color||n},u)),i.push(l))}}),a},[]).sort(function(a,s){return a.id.localeCompare(s.id)})}},Qu=function(t){var n=t.defaultColor,r=t.rfId,o=ae(Mt(cy({defaultColor:n,rfId:r}),[n,r]),function(i,a){return!(i.length!==a.length||i.some(function(s,u){return s.id!==a[u].id}))});return N("defs",{children:o.map(function(i){return N(sy,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id)})})};Qu.displayName="MarkerDefinitions";var uy=oe(Qu),ly=[{level:0,isMaxLevel:!0,edges:[]}];function dy(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=-1,o=e.reduce(function(a,s){var u=Eu(s.zIndex),l=u?s.zIndex:0;if(n){var c,d,f,h;l=u?s.zIndex:Math.max(((c=t.get(s.source))===null||c===void 0||(d=c[se])===null||d===void 0?void 0:d.z)||0,((f=t.get(s.target))===null||f===void 0||(h=f[se])===null||h===void 0?void 0:h.z)||0)}return a[l]?a[l].push(s):a[l]=[s],r=l>r?l:r,a},{}),i=Object.entries(o).map(function(a){var s=X(a,2),u=s[0],l=s[1],c=+u;return{edges:l,level:c,isMaxLevel:c===r}});return i.length===0?ly:i}function fy(e,t,n){var r=ae(Mt(function(o){return e?o.edges.filter(function(i){var a=t.get(i.source),s=t.get(i.target);return(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&Rm({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:s.width,targetHeight:s.height,width:o.width,height:o.height,transform:o.transform})}):o.edges},[e,t]));return dy(r,t,n)}var hy=function(t){return{connectionNodeId:t.connectionNodeId,connectionHandleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals}},Ju=function(t){var n=ae(hy,ge),r=n.connectionNodeId,o=n.connectionHandleType,i=n.nodesConnectable,a=n.elementsSelectable,s=n.width,u=n.height,l=n.connectionMode,c=n.nodeInternals,d=fy(t.onlyRenderVisibleElements,c,t.elevateEdgesOnSelect);if(!s)return null;var f=t.connectionLineType,h=t.defaultMarkerColor,v=t.connectionLineStyle,p=t.connectionLineComponent,y=t.connectionLineContainerStyle,m=r&&o;return ne(fe,{children:[d.map(function(x){var E=x.level,b=x.edges,w=x.isMaxLevel;return ne("svg",{style:{zIndex:E},width:s,height:u,className:"react-flow__edges react-flow__container",children:[w&&N(uy,{defaultColor:h,rfId:t.rfId}),N("g",{children:b.map(function(_){var k=Ha(c,_.source),O=X(k,3),R=O[0],A=O[1],$=O[2],V=Ha(c,_.target),B=X(V,3),g=B[0],C=B[1],S=B[2];if(!$||!S)return null;var P=_.type||"default",M=t.edgeTypes[P]||t.edgeTypes.default,T=l===Ot.Strict?C.target:C.target||C.source,I=ja(A.source,_.sourceHandle||null),L=ja(T,_.targetHandle||null),Y=(I==null?void 0:I.position)||z.Bottom,U=(L==null?void 0:L.position)||z.Top;if(!I||!L)return null;var D=Dm(R,I,Y,g,L,U),H=D.sourceX,Z=D.sourceY,G=D.targetX,Q=D.targetY;return N(M,{id:_.id,className:me([_.className,t.noPanClassName]),type:P,data:_.data,selected:!!_.selected,animated:!!_.animated,hidden:!!_.hidden,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,style:_.style,source:_.source,target:_.target,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerEnd:_.markerEnd,markerStart:_.markerStart,sourceX:H,sourceY:Z,targetX:G,targetY:Q,sourcePosition:Y,targetPosition:U,elementsSelectable:a,onEdgeUpdate:t.onEdgeUpdate,onContextMenu:t.onEdgeContextMenu,onMouseEnter:t.onEdgeMouseEnter,onMouseMove:t.onEdgeMouseMove,onMouseLeave:t.onEdgeMouseLeave,onClick:t.onEdgeClick,edgeUpdaterRadius:t.edgeUpdaterRadius,onEdgeDoubleClick:t.onEdgeDoubleClick,onEdgeUpdateStart:t.onEdgeUpdateStart,onEdgeUpdateEnd:t.onEdgeUpdateEnd,rfId:t.rfId},_.id)})})]},E)}),m&&N("svg",{style:y,width:s,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container",children:N(ny,{connectionNodeId:r,connectionHandleType:o,connectionLineStyle:v,connectionLineType:f,isConnectable:i,CustomConnectionLineComponent:p})})]})};Ju.displayName="EdgeRenderer";var vy=oe(Ju),py=function(t){return"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")")};function gy(e){var t=e.children,n=ae(py);return N("div",{className:"react-flow__viewport react-flow__container",style:{transform:n},children:t})}function my(e){var t=_i(),n=ie(!1);re(function(){!n.current&&t.viewportInitialized&&e&&(setTimeout(function(){return e(t)},1),n.current=!0)},[e,t.viewportInitialized])}var el=function(t){var n=t.nodeTypes,r=t.edgeTypes,o=t.onMove,i=t.onMoveStart,a=t.onMoveEnd,s=t.onInit,u=t.onNodeClick,l=t.onEdgeClick,c=t.onNodeDoubleClick,d=t.onEdgeDoubleClick,f=t.onNodeMouseEnter,h=t.onNodeMouseMove,v=t.onNodeMouseLeave,p=t.onNodeContextMenu,y=t.onSelectionContextMenu,m=t.connectionLineType,x=t.connectionLineStyle,E=t.connectionLineComponent,b=t.connectionLineContainerStyle,w=t.selectionKeyCode,_=t.multiSelectionKeyCode,k=t.zoomActivationKeyCode,O=t.deleteKeyCode,R=t.onlyRenderVisibleElements,A=t.elementsSelectable,$=t.selectNodesOnDrag,V=t.defaultZoom,B=t.defaultPosition,g=t.preventScrolling,C=t.defaultMarkerColor,S=t.zoomOnScroll,P=t.zoomOnPinch,M=t.panOnScroll,T=t.panOnScrollSpeed,I=t.panOnScrollMode,L=t.zoomOnDoubleClick,Y=t.panOnDrag,U=t.onPaneClick,D=t.onPaneScroll,H=t.onPaneContextMenu,Z=t.onEdgeUpdate,G=t.onEdgeContextMenu,Q=t.onEdgeMouseEnter,ee=t.onEdgeMouseMove,j=t.onEdgeMouseLeave,ce=t.edgeUpdaterRadius,Me=t.onEdgeUpdateStart,Ze=t.onEdgeUpdateEnd,We=t.noDragClassName,It=t.noWheelClassName,je=t.noPanClassName,lt=t.elevateEdgesOnSelect,dt=t.id;return my(s),N(Wm,{onPaneClick:U,onPaneContextMenu:H,onPaneScroll:D,deleteKeyCode:O,selectionKeyCode:w,multiSelectionKeyCode:_,zoomActivationKeyCode:k,elementsSelectable:A,onMove:o,onMoveStart:i,onMoveEnd:a,zoomOnScroll:S,zoomOnPinch:P,zoomOnDoubleClick:L,panOnScroll:M,panOnScrollSpeed:T,panOnScrollMode:I,panOnDrag:Y,defaultPosition:B,defaultZoom:V,onSelectionContextMenu:y,preventScrolling:g,noDragClassName:We,noWheelClassName:It,noPanClassName:je,children:ne(gy,{children:[N(vy,{edgeTypes:r,onEdgeClick:l,onEdgeDoubleClick:d,connectionLineType:m,connectionLineStyle:x,connectionLineComponent:E,connectionLineContainerStyle:b,onEdgeUpdate:Z,onlyRenderVisibleElements:R,onEdgeContextMenu:G,onEdgeMouseEnter:Q,onEdgeMouseMove:ee,onEdgeMouseLeave:j,onEdgeUpdateStart:Me,onEdgeUpdateEnd:Ze,edgeUpdaterRadius:ce,defaultMarkerColor:C,noPanClassName:je,elevateEdgesOnSelect:!!lt,rfId:dt}),N(ey,{nodeTypes:n,onNodeClick:u,onNodeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:h,onNodeMouseLeave:v,onNodeContextMenu:p,selectNodesOnDrag:$,onlyRenderVisibleElements:R,noPanClassName:je,noDragClassName:We})]})})};el.displayName="GraphView";var yy=oe(el),tl=function(){return null};tl.displayName="GroupNode";function os(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function is(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?os(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):os(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Bt=function(e){var t=function(r){var o=r.id,i=r.type,a=r.data,s=r.xPos,u=r.yPos,l=r.selected,c=r.onClick,d=r.onMouseEnter,f=r.onMouseMove,h=r.onMouseLeave,v=r.onContextMenu,p=r.onDoubleClick,y=r.style,m=r.className,x=r.isDraggable,E=r.isSelectable,b=r.isConnectable,w=r.selectNodesOnDrag,_=r.sourcePosition,k=r.targetPosition,O=r.hidden,R=r.resizeObserver,A=r.dragHandle,$=r.zIndex,V=r.isParent,B=r.noPanClassName,g=r.noDragClassName,C=r.initialized,S=le(),P=ie(null),M=ie(_),T=ie(k),I=ie(i),L=E||x||c||d||f||h,Y=Lt(o,S.getState,d),U=Lt(o,S.getState,f),D=Lt(o,S.getState,h),H=Lt(o,S.getState,v),Z=Lt(o,S.getState,p),G=function(j){if(E&&(!w||!x)&&Cu({id:o,store:S}),c){var ce=S.getState().nodeInternals.get(o);c(j,is({},ce))}};re(function(){if(P.current&&!O){var ee=P.current;return R==null||R.observe(ee),function(){return R==null?void 0:R.unobserve(ee)}}},[O]),re(function(){var ee=I.current!==i,j=M.current!==_,ce=T.current!==k;P.current&&(ee||j||ce)&&(ee&&(I.current=i),j&&(M.current=_),ce&&(T.current=k),S.getState().updateNodeDimensions([{id:o,nodeElement:P.current,forceUpdate:!0}]))},[o,i,_,k]);var Q=Ku({nodeRef:P,disabled:O||!x,noDragClassName:g,handleSelector:A,nodeId:o,isSelectable:E,selectNodesOnDrag:w});return O?null:N("div",{className:me(["react-flow__node","react-flow__node-".concat(i),B,m,{selected:l,selectable:E,parent:V}]),ref:P,style:is({zIndex:$,transform:"translate(".concat(s,"px,").concat(u,"px)"),pointerEvents:L?"all":"none",visibility:C?"visible":"hidden"},y),onMouseEnter:Y,onMouseMove:U,onMouseLeave:D,onContextMenu:H,onClick:G,onDoubleClick:Z,"data-id":o,children:N(pm,{value:o,children:N(e,{id:o,data:a,type:i,xPos:s,yPos:u,selected:l,isConnectable:b,sourcePosition:_,targetPosition:k,dragging:Q,dragHandle:A,zIndex:$})})})};return t.displayName="NodeWrapper",oe(t)};function as(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ss(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?as(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):as(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function by(e){var t={input:Bt(e.input||Uu),default:Bt(e.default||ai),output:Bt(e.output||Xu),group:Bt(e.group||tl)},n={},r=Object.keys(e).filter(function(o){return!["input","default","output","group"].includes(o)}).reduce(function(o,i){return o[i]=Bt(e[i]||ai),o},n);return ss(ss({},t),r)}function cs(e,t){ie(null);var n=Pt(function(){return t(e)},[e]);return n}function us(e){if(!(!e||typeof document>"u")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");t.appendChild(n),n.appendChild(document.createTextNode(e))}}var nl=function(t){var n=t.children,r=!0;try{le()}catch{r=!1}return r?N(fe,{children:n}):N(Iu,{createStore:Du,children:n})};nl.displayName="ReactFlowWrapper";var wy=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectStop","onConnectEnd","onClickConnectStart","onClickConnectStop","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateEdgesOnSelect"];function ls(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ds(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ls(Object(n),!0).forEach(function(r){W(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ls(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}us(Nm),us(Pm);var Ey={input:Uu,default:ai,output:Xu},Sy={default:oi,straight:Bu,step:zu,smoothstep:Ci,simplebezier:Au},xy=[15,15],_y=[0,0],rl=Tu(function(e,t){var n=e.nodes,r=e.edges,o=e.defaultNodes,i=e.defaultEdges,a=e.className,s=e.nodeTypes,u=s===void 0?Ey:s,l=e.edgeTypes,c=l===void 0?Sy:l,d=e.onNodeClick,f=e.onEdgeClick,h=e.onInit,v=e.onMove,p=e.onMoveStart,y=e.onMoveEnd,m=e.onConnect,x=e.onConnectStart,E=e.onConnectStop,b=e.onConnectEnd,w=e.onClickConnectStart,_=e.onClickConnectStop,k=e.onClickConnectEnd,O=e.onNodeMouseEnter,R=e.onNodeMouseMove,A=e.onNodeMouseLeave,$=e.onNodeContextMenu,V=e.onNodeDoubleClick,B=e.onNodeDragStart,g=e.onNodeDrag,C=e.onNodeDragStop,S=e.onNodesDelete,P=e.onEdgesDelete,M=e.onSelectionChange,T=e.onSelectionDragStart,I=e.onSelectionDrag,L=e.onSelectionDragStop,Y=e.onSelectionContextMenu,U=e.connectionMode,D=U===void 0?Ot.Strict:U,H=e.connectionLineType,Z=H===void 0?$e.Bezier:H,G=e.connectionLineStyle,Q=e.connectionLineComponent,ee=e.connectionLineContainerStyle,j=e.deleteKeyCode,ce=j===void 0?"Backspace":j,Me=e.selectionKeyCode,Ze=Me===void 0?"Shift":Me,We=e.multiSelectionKeyCode,It=We===void 0?"Meta":We,je=e.zoomActivationKeyCode,lt=je===void 0?"Meta":je,dt=e.snapToGrid,sr=dt===void 0?!1:dt,Dt=e.snapGrid,sn=Dt===void 0?xy:Dt,cn=e.onlyRenderVisibleElements,cr=cn===void 0?!1:cn,un=e.selectNodesOnDrag,ln=un===void 0?!0:un,ur=e.nodesDraggable,Qe=e.nodesConnectable,xe=e.elementsSelectable,Ie=e.minZoom,Rt=e.maxZoom,ft=e.defaultZoom,Je=ft===void 0?1:ft,ht=e.defaultPosition,lr=ht===void 0?_y:ht,Tt=e.translateExtent,dn=e.preventScrolling,dr=dn===void 0?!0:dn,et=e.nodeExtent,fn=e.defaultMarkerColor,Xl=fn===void 0?"#b1b1b7":fn,Ri=e.zoomOnScroll,Gl=Ri===void 0?!0:Ri,Ti=e.zoomOnPinch,Kl=Ti===void 0?!0:Ti,$i=e.panOnScroll,Zl=$i===void 0?!1:$i,Ai=e.panOnScrollSpeed,Wl=Ai===void 0?.5:Ai,Li=e.panOnScrollMode,Ql=Li===void 0?xt.Free:Li,zi=e.zoomOnDoubleClick,Jl=zi===void 0?!0:zi,Bi=e.panOnDrag,ed=Bi===void 0?!0:Bi,td=e.onPaneClick,nd=e.onPaneScroll,rd=e.onPaneContextMenu,od=e.children,id=e.onEdgeUpdate,ad=e.onEdgeContextMenu,sd=e.onEdgeDoubleClick,cd=e.onEdgeMouseEnter,ud=e.onEdgeMouseMove,ld=e.onEdgeMouseLeave,dd=e.onEdgeUpdateStart,fd=e.onEdgeUpdateEnd,Vi=e.edgeUpdaterRadius,hd=Vi===void 0?10:Vi,vd=e.onNodesChange,pd=e.onEdgesChange,ji=e.noDragClassName,gd=ji===void 0?"nodrag":ji,Hi=e.noWheelClassName,md=Hi===void 0?"nowheel":Hi,Yi=e.noPanClassName,yd=Yi===void 0?"nopan":Yi,qi=e.fitView,bd=qi===void 0?!1:qi,wd=e.fitViewOptions,Ui=e.connectOnClick,Ed=Ui===void 0?!0:Ui,Sd=e.attributionPosition,xd=e.proOptions,_d=e.defaultEdgeOptions,Fi=e.elevateEdgesOnSelect,Cd=Fi===void 0?!1:Fi,hn=on(e,wy),Nd=cs(u,by),Od=cs(c,Im),Pd=me(["react-flow",a]);return N("div",{...ds(ds({},hn),{},{ref:t,className:Pd}),children:ne(nl,{children:[N(yy,{onInit:h,onMove:v,onMoveStart:p,onMoveEnd:y,onNodeClick:d,onEdgeClick:f,onNodeMouseEnter:O,onNodeMouseMove:R,onNodeMouseLeave:A,onNodeContextMenu:$,onNodeDoubleClick:V,nodeTypes:Nd,edgeTypes:Od,connectionLineType:Z,connectionLineStyle:G,connectionLineComponent:Q,connectionLineContainerStyle:ee,selectionKeyCode:Ze,deleteKeyCode:ce,multiSelectionKeyCode:It,zoomActivationKeyCode:lt,onlyRenderVisibleElements:cr,selectNodesOnDrag:ln,defaultZoom:Je,defaultPosition:lr,preventScrolling:dr,zoomOnScroll:Gl,zoomOnPinch:Kl,zoomOnDoubleClick:Jl,panOnScroll:Zl,panOnScrollSpeed:Wl,panOnScrollMode:Ql,panOnDrag:ed,onPaneClick:td,onPaneScroll:nd,onPaneContextMenu:rd,onSelectionContextMenu:Y,onEdgeUpdate:id,onEdgeContextMenu:ad,onEdgeDoubleClick:sd,onEdgeMouseEnter:cd,onEdgeMouseMove:ud,onEdgeMouseLeave:ld,onEdgeUpdateStart:dd,onEdgeUpdateEnd:fd,edgeUpdaterRadius:hd,defaultMarkerColor:Xl,noDragClassName:gd,noWheelClassName:md,noPanClassName:yd,elevateEdgesOnSelect:Cd,id:hn==null?void 0:hn.id}),N(_m,{nodes:n,edges:r,defaultNodes:o,defaultEdges:i,onConnect:m,onConnectStart:x,onConnectStop:E,onConnectEnd:b,onClickConnectStart:w,onClickConnectStop:_,onClickConnectEnd:k,nodesDraggable:ur,nodesConnectable:Qe,elementsSelectable:xe,minZoom:Ie,maxZoom:Rt,nodeExtent:et,onNodesChange:vd,onEdgesChange:pd,snapToGrid:sr,snapGrid:sn,connectionMode:D,translateExtent:Tt,connectOnClick:Ed,defaultEdgeOptions:_d,fitView:bd,fitViewOptions:wd,onNodesDelete:S,onEdgesDelete:P,onNodeDragStart:B,onNodeDrag:g,onNodeDragStop:C,onSelectionDrag:I,onSelectionDragStart:T,onSelectionDragStop:L}),M&&N(Sm,{onSelectionChange:M}),od,N(sm,{proOptions:xd,position:Sd})]})})});rl.displayName="ReactFlow";var ol=function(t){var n=t.children;return N(Iu,{createStore:Du,children:n})};ol.displayName="ReactFlowProvider";function il(e){return function(t){var n=kt(t),r=X(n,2),o=r[0],i=r[1],a=Mt(function(s){return i(function(u){return e(s,u)})},[]);return[o,i,a]}}var Cy=il(xu),Ny=il(Mg);const Oy=window.React.useMemo,In=e=>{const{data:t}=Id(e.modifiedBy),n=Md(kd(e.modifiedOn)),{name:r,description:o}=e;return Oy(()=>ne(fe,{children:[r&&N(zn,{title:r,placement:"top",enterNextDelay:200,children:N("span",{children:N(Fo,{variant:"smallText1",className:"name",children:r})})}),o&&N(zn,{title:o,placement:"top",enterNextDelay:200,children:N("span",{children:N(Fo,{variant:"smallText1",className:"description",children:o})})}),t&&N(Ld,{userProfile:t}),N("div",{children:n})]}),[r,o,t,n])};try{In.displayName="ActivityNodeLabel",In.__docgenInfo={description:"",displayName:"ActivityNodeLabel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},etag:{defaultValue:null,description:"",name:"etag",required:!0,type:{name:"string"}},createdOn:{defaultValue:null,description:"",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"",name:"modifiedBy",required:!0,type:{name:"string"}},used:{defaultValue:null,description:"",name:"used",required:!1,type:{name:"(UsedURL | UsedEntity)[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ActivityNodeLabel.tsx#ActivityNodeLabel"]={docgenInfo:In.__docgenInfo,name:"ActivityNodeLabel",path:"src/lib/containers/provenance/ActivityNodeLabel.tsx#ActivityNodeLabel"})}catch{}const Py=new Set([".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx",".cwl",".wdl",".json"]),Dn=e=>{const{entityHeader:t}=e;if(t){const n=$c(t==null?void 0:t.type);if(n==Gi.FILE){const r=t.name.lastIndexOf(".");if(r>-1){const o=t.name.slice(r);if(Py.has(o.toLowerCase()))return N(di,{options:{icon:"code"}})}}else return N(Ki,{type:n,includeTooltip:!1})}return N(Ki,{type:Gi.FILE,includeTooltip:!1})};try{Dn.displayName="ProvenanceEntityIcon",Dn.__docgenInfo={description:"",displayName:"ProvenanceEntityIcon",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!1,type:{name:"EntityHeader"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceEntityIcon.tsx#ProvenanceEntityIcon"]={docgenInfo:Dn.__docgenInfo,name:"ProvenanceEntityIcon",path:"src/lib/containers/provenance/ProvenanceEntityIcon.tsx#ProvenanceEntityIcon"})}catch{}const ky=window.React.useMemo,Rn=e=>{const t=e.versionNumber?`.${e.versionNumber}`:"",n=`${e.id}${t}`;return ky(()=>ne(fe,{children:[N("div",{children:N(Dn,{entityHeader:e})}),ne(fe,{children:[N("div",{children:N(zn,{title:e.name,placement:"top",enterNextDelay:300,children:N("a",{href:`${Bd.PORTAL}#!Synapse:${n}`,children:e.name})})}),zd($c(e.type))&&ne("div",{children:[ne("div",{children:["v.",e.versionNumber]}),!e.isLatestVersion&&N("div",{children:"(old version)"})]})]})]}),[e,n])};try{Rn.displayName="EntityNodeLabel",Rn.__docgenInfo={description:"",displayName:"EntityNodeLabel",props:{name:{defaultValue:null,description:"The name of the entity",name:"name",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"The id of the entity",name:"id",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"The type of the entity",name:"type",required:!0,type:{name:"enum",value:[{value:'"org.sagebionetworks.repo.model.table.EntityView"'},{value:'"org.sagebionetworks.repo.model.table.SubmissionView"'},{value:'"org.sagebionetworks.repo.model.table.Dataset"'},{value:'"org.sagebionetworks.repo.model.table.DatasetCollection"'},{value:'"org.sagebionetworks.repo.model.Link"'},{value:'"org.sagebionetworks.repo.model.docker.DockerRepository"'},{value:'"org.sagebionetworks.repo.model.FileEntity"'},{value:'"org.sagebionetworks.repo.model.table.TableEntity"'},{value:'"org.sagebionetworks.repo.model.table.MaterializedView"'},{value:'"org.sagebionetworks.repo.model.Folder"'},{value:'"org.sagebionetworks.repo.model.Project"'}]}},versionNumber:{defaultValue:null,description:"The version number of the entity",name:"versionNumber",required:!1,type:{name:"number"}},versionLabel:{defaultValue:null,description:"The user defined version label of the entity",name:"versionLabel",required:!1,type:{name:"string"}},benefactorId:{defaultValue:null,description:"The ID of the entity that this Entity's ACL is inherited from.",name:"benefactorId",required:!0,type:{name:"number"}},createdOn:{defaultValue:null,description:"The date this entity was created.",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"The date this entity was last modified.",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"The ID of the user that created this entity.",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"The ID of the user that last modified this entity.",name:"modifiedBy",required:!0,type:{name:"string"}},isLatestVersion:{defaultValue:null,description:"If this version is the latest version of the entity",name:"isLatestVersion",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/EntityNodeLabel.tsx#EntityNodeLabel"]={docgenInfo:Rn.__docgenInfo,name:"EntityNodeLabel",path:"src/lib/containers/provenance/EntityNodeLabel.tsx#EntityNodeLabel"})}catch{}const My=window.React.useMemo,Tn=e=>{const{itemCount:t}=e;return My(()=>N(fe,{children:ne("a",{children:["Show ",t," ",Vd("item",t),"\u2026"]})}),[t])};try{Tn.displayName="ExpandGraphNodeLabel",Tn.__docgenInfo={description:"",displayName:"ExpandGraphNodeLabel",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!0,type:{name:"EntityHeader"}},itemCount:{defaultValue:null,description:"",name:"itemCount",required:!0,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ExpandGraphNodeLabel.tsx#ExpandGraphNodeLabel"]={docgenInfo:Tn.__docgenInfo,name:"ExpandGraphNodeLabel",path:"src/lib/containers/provenance/ExpandGraphNodeLabel.tsx#ExpandGraphNodeLabel"})}catch{}const Iy=/^(.+?\.)?github\.com$/,Dy=/^(.+?\.)?githubusercontent\.com$/,$n=e=>{const{url:t}=e;let n="link";const r=new URL(t),{hostname:o}=r;return(o.match(Iy)||o.match(Dy))&&(n="github"),N(di,{options:{icon:n}})};try{$n.displayName="ProvenanceExternalIcon",$n.__docgenInfo={description:"",displayName:"ProvenanceExternalIcon",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceExternalIcon.tsx#ProvenanceExternalIcon"]={docgenInfo:$n.__docgenInfo,name:"ProvenanceExternalIcon",path:"src/lib/containers/provenance/ProvenanceExternalIcon.tsx#ProvenanceExternalIcon"})}catch{}const Ry=window.React.useMemo,An=e=>Ry(()=>ne(fe,{children:[N("div",{children:N($n,{url:e.url})}),N(zn,{title:e.name,placement:"top",enterNextDelay:300,children:N("a",{href:e.url,rel:"noopener noreferrer",children:e.name})})]}),[e.name,e.url]);try{An.displayName="ExternalGraphNodeLabel",An.__docgenInfo={description:"",displayName:"ExternalGraphNodeLabel",props:{concreteType:{defaultValue:null,description:"",name:"concreteType",required:!0,type:{name:'"org.sagebionetworks.repo.model.provenance.UsedURL"'}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},wasExecuted:{defaultValue:null,description:"",name:"wasExecuted",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ExternalGraphNodeLabel.tsx#ExternalGraphNodeLabel"]={docgenInfo:An.__docgenInfo,name:"ExternalGraphNodeLabel",path:"src/lib/containers/provenance/ExternalGraphNodeLabel.tsx#ExternalGraphNodeLabel"})}catch{}var kr,fs;function Ty(){if(fs)return kr;fs=1;var e=sf,t=4;function n(r){return e(r,t)}return kr=n,kr}var Mr={exports:{}},hs;function al(){return hs||(hs=1,function(e){e.exports=Yc}(Mr)),Mr.exports}var Ir,vs;function $y(){if(vs)return Ir;vs=1;var e=qc;function t(n,r){var o=[];return e(n,function(i,a,s){r(i,a,s)&&o.push(i)}),o}return Ir=t,Ir}var Dr,ps;function sl(){if(ps)return Dr;ps=1;var e=jd,t=$y(),n=ct,r=tn;function o(i,a){var s=r(i)?e:t;return s(i,n(a))}return Dr=o,Dr}var Rr,gs;function Ay(){if(gs)return Rr;gs=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,o){return r!=null&&t.call(r,o)}return Rr=n,Rr}var Tr,ms;function cl(){if(ms)return Tr;ms=1;var e=Ay(),t=Hd;function n(r,o){return r!=null&&t(r,o,e)}return Tr=n,Tr}var $r,ys;function ul(){if(ys)return $r;ys=1;function e(t){return t===void 0}return $r=e,$r}var Ar,bs;function ll(){if(bs)return Ar;bs=1;var e=Ac,t=ct,n=cf,r=tn;function o(i,a){var s=r(i)?e:n;return s(i,t(a))}return Ar=o,Ar}var Lr,ws;function Ly(){if(ws)return Lr;ws=1;function e(t,n,r,o,i){return i(t,function(a,s,u){r=o?(o=!1,a):n(r,a,s,u)}),r}return Lr=e,Lr}var zr,Es;function dl(){if(Es)return zr;Es=1;var e=Yd,t=qc,n=ct,r=Ly(),o=tn;function i(a,s,u){var l=o(a)?e:r,c=arguments.length<3;return l(a,n(s),u,c,t)}return zr=i,zr}var Br,Ss;function zy(){if(Ss)return Br;Ss=1;var e=qd,t=e("length");return Br=t,Br}var Vr,xs;function By(){if(xs)return Vr;xs=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,i="\\ufe0e\\ufe0f",a="["+e+"]",s="["+o+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+s+"|"+u+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",v=l+"?",p="["+i+"]?",y="(?:"+h+"(?:"+[c,d,f].join("|")+")"+p+v+")*",m=p+v+y,x="(?:"+[c+s+"?",s,d,f,a].join("|")+")",E=RegExp(u+"(?="+u+")|"+x+m,"g");function b(w){for(var _=E.lastIndex=0;E.test(w);)++_;return _}return Vr=b,Vr}var jr,_s;function Vy(){if(_s)return jr;_s=1;var e=zy(),t=Ud,n=By();function r(o){return t(o)?n(o):e(o)}return jr=r,jr}var Hr,Cs;function jy(){if(Cs)return Hr;Cs=1;var e=Fd,t=Xd,n=Lc,r=Ef,o=Vy(),i="[object Map]",a="[object Set]";function s(u){if(u==null)return 0;if(n(u))return r(u)?o(u):u.length;var l=t(u);return l==i||l==a?u.size:e(u).length}return Hr=s,Hr}var Yr,Ns;function Hy(){if(Ns)return Yr;Ns=1;var e=uf,t=lf,n=Gd,r=ct,o=Kd,i=tn,a=Zd.exports,s=zc,u=Bc,l=Wd;function c(d,f,h){var v=i(d),p=v||a(d)||l(d);if(f=r(f),h==null){var y=d&&d.constructor;p?h=v?new y:[]:u(d)?h=s(y)?t(o(d)):{}:h={}}return(p?e:n)(d,function(m,x,E){return f(h,m,x,E)}),h}return Yr=c,Yr}var qr,Os;function Yy(){if(Os)return qr;Os=1;var e=Ac;function t(n,r){return e(r,function(o){return n[o]})}return qr=t,qr}var Ur,Ps;function fl(){if(Ps)return Ur;Ps=1;var e=Yy(),t=fi;function n(r){return r==null?[]:e(r,t(r))}return Ur=n,Ur}var Fr,ks;function ye(){if(ks)return Fr;ks=1;var e;if(typeof hi=="function")try{e={clone:Ty(),constant:Vc,each:al(),filter:sl(),has:cl(),isArray:tn,isEmpty:bf,isFunction:zc,isUndefined:ul(),keys:fi,map:ll(),reduce:dl(),size:jy(),transform:Hy(),union:wf,values:fl()}}catch{}return e||(e=window._),Fr=e,Fr}var Xr,Ms;function Oi(){if(Ms)return Xr;Ms=1;var e=ye();Xr=o;var t="\0",n="\0",r="";function o(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(c){return this._label=c,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return e.keys(this._nodes)},o.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},o.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},o.prototype.setNodes=function(c,d){var f=arguments,h=this;return e.each(c,function(v){f.length>1?h.setNode(v,d):h.setNode(v)}),this},o.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},o.prototype.node=function(c){return this._nodes[c]},o.prototype.hasNode=function(c){return e.has(this._nodes,c)},o.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var f=function(h){d.removeEdge(d._edgeObjs[h])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(h){d.setParent(h)}),delete this._children[c]),e.each(e.keys(this._in[c]),f),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),f),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},o.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},o.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},o.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},o.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},o.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},o.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},o.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},o.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},o.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(p,y){c(y)&&d.setNode(y,p)}),e.each(this._edgeObjs,function(p){d.hasNode(p.v)&&d.hasNode(p.w)&&d.setEdge(p,f.edge(p))});var h={};function v(p){var y=f.parent(p);return y===void 0||d.hasNode(y)?(h[p]=y,y):y in h?h[y]:v(y)}return this._isCompound&&e.each(d.nodes(),function(p){d.setParent(p,v(p))}),d},o.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return e.values(this._edgeObjs)},o.prototype.setPath=function(c,d){var f=this,h=arguments;return e.reduce(c,function(v,p){return h.length>1?f.setEdge(v,p,d):f.setEdge(v,p),p}),this},o.prototype.setEdge=function(){var c,d,f,h,v=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,d=p.w,f=p.name,arguments.length===2&&(h=arguments[1],v=!0)):(c=p,d=arguments[1],f=arguments[3],arguments.length>2&&(h=arguments[2],v=!0)),c=""+c,d=""+d,e.isUndefined(f)||(f=""+f);var y=s(this._isDirected,c,d,f);if(e.has(this._edgeLabels,y))return v&&(this._edgeLabels[y]=h),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[y]=v?h:this._defaultEdgeLabelFn(c,d,f);var m=u(this._isDirected,c,d,f);return c=m.v,d=m.w,Object.freeze(m),this._edgeObjs[y]=m,i(this._preds[d],c),i(this._sucs[c],d),this._in[d][y]=m,this._out[c][y]=m,this._edgeCount++,this},o.prototype.edge=function(c,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,f);return this._edgeLabels[h]},o.prototype.hasEdge=function(c,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,f);return e.has(this._edgeLabels,h)},o.prototype.removeEdge=function(c,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,f),v=this._edgeObjs[h];return v&&(c=v.v,d=v.w,delete this._edgeLabels[h],delete this._edgeObjs[h],a(this._preds[d],c),a(this._sucs[c],d),delete this._in[d][h],delete this._out[c][h],this._edgeCount--),this},o.prototype.inEdges=function(c,d){var f=this._in[c];if(f){var h=e.values(f);return d?e.filter(h,function(v){return v.v===d}):h}},o.prototype.outEdges=function(c,d){var f=this._out[c];if(f){var h=e.values(f);return d?e.filter(h,function(v){return v.w===d}):h}},o.prototype.nodeEdges=function(c,d){var f=this.inEdges(c,d);if(f)return f.concat(this.outEdges(c,d))};function i(c,d){c[d]?c[d]++:c[d]=1}function a(c,d){--c[d]||delete c[d]}function s(c,d,f,h){var v=""+d,p=""+f;if(!c&&v>p){var y=v;v=p,p=y}return v+r+p+r+(e.isUndefined(h)?t:h)}function u(c,d,f,h){var v=""+d,p=""+f;if(!c&&v>p){var y=v;v=p,p=y}var m={v,w:p};return h&&(m.name=h),m}function l(c,d){return s(c,d.v,d.w,d.name)}return Xr}var Gr,Is;function qy(){return Is||(Is=1,Gr="2.1.8"),Gr}var Kr,Ds;function Uy(){return Ds||(Ds=1,Kr={Graph:Oi(),version:qy()}),Kr}var Zr,Rs;function Fy(){if(Rs)return Zr;Rs=1;var e=ye(),t=Oi();Zr={write:n,read:i};function n(a){var s={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:r(a),edges:o(a)};return e.isUndefined(a.graph())||(s.value=e.clone(a.graph())),s}function r(a){return e.map(a.nodes(),function(s){var u=a.node(s),l=a.parent(s),c={v:s};return e.isUndefined(u)||(c.value=u),e.isUndefined(l)||(c.parent=l),c})}function o(a){return e.map(a.edges(),function(s){var u=a.edge(s),l={v:s.v,w:s.w};return e.isUndefined(s.name)||(l.name=s.name),e.isUndefined(u)||(l.value=u),l})}function i(a){var s=new t(a.options).setGraph(a.value);return e.each(a.nodes,function(u){s.setNode(u.v,u.value),u.parent&&s.setParent(u.v,u.parent)}),e.each(a.edges,function(u){s.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),s}return Zr}var Wr,Ts;function Xy(){if(Ts)return Wr;Ts=1;var e=ye();Wr=t;function t(n){var r={},o=[],i;function a(s){e.has(r,s)||(r[s]=!0,i.push(s),e.each(n.successors(s),a),e.each(n.predecessors(s),a))}return e.each(n.nodes(),function(s){i=[],a(s),i.length&&o.push(i)}),o}return Wr}var Qr,$s;function hl(){if($s)return Qr;$s=1;var e=ye();Qr=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var o=this._keyIndices;if(n=String(n),!e.has(o,n)){var i=this._arr,a=i.length;return o[n]=a,i.push({key:n,priority:r}),this._decrease(a),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var o=this._keyIndices[n];if(r>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[o].priority+" New: "+r);this._arr[o].priority=r,this._decrease(o)},t.prototype._heapify=function(n){var r=this._arr,o=2*n,i=o+1,a=n;o<r.length&&(a=r[o].priority<r[a].priority?o:a,i<r.length&&(a=r[i].priority<r[a].priority?i:a),a!==n&&(this._swap(n,a),this._heapify(a)))},t.prototype._decrease=function(n){for(var r=this._arr,o=r[n].priority,i;n!==0&&(i=n>>1,!(r[i].priority<o));)this._swap(n,i),n=i},t.prototype._swap=function(n,r){var o=this._arr,i=this._keyIndices,a=o[n],s=o[r];o[n]=s,o[r]=a,i[s.key]=n,i[a.key]=r},Qr}var Jr,As;function vl(){if(As)return Jr;As=1;var e=ye(),t=hl();Jr=r;var n=e.constant(1);function r(i,a,s,u){return o(i,String(a),s||n,u||function(l){return i.outEdges(l)})}function o(i,a,s,u){var l={},c=new t,d,f,h=function(v){var p=v.v!==d?v.v:v.w,y=l[p],m=s(v),x=f.distance+m;if(m<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+v+" Weight: "+m);x<y.distance&&(y.distance=x,y.predecessor=d,c.decrease(p,x))};for(i.nodes().forEach(function(v){var p=v===a?0:Number.POSITIVE_INFINITY;l[v]={distance:p},c.add(v,p)});c.size()>0&&(d=c.removeMin(),f=l[d],f.distance!==Number.POSITIVE_INFINITY);)u(d).forEach(h);return l}return Jr}var eo,Ls;function Gy(){if(Ls)return eo;Ls=1;var e=vl(),t=ye();eo=n;function n(r,o,i){return t.transform(r.nodes(),function(a,s){a[s]=e(r,s,o,i)},{})}return eo}var to,zs;function pl(){if(zs)return to;zs=1;var e=ye();to=t;function t(n){var r=0,o=[],i={},a=[];function s(u){var l=i[u]={onStack:!0,lowlink:r,index:r++};if(o.push(u),n.successors(u).forEach(function(f){e.has(i,f)?i[f].onStack&&(l.lowlink=Math.min(l.lowlink,i[f].index)):(s(f),l.lowlink=Math.min(l.lowlink,i[f].lowlink))}),l.lowlink===l.index){var c=[],d;do d=o.pop(),i[d].onStack=!1,c.push(d);while(u!==d);a.push(c)}}return n.nodes().forEach(function(u){e.has(i,u)||s(u)}),a}return to}var no,Bs;function Ky(){if(Bs)return no;Bs=1;var e=ye(),t=pl();no=n;function n(r){return e.filter(t(r),function(o){return o.length>1||o.length===1&&r.hasEdge(o[0],o[0])})}return no}var ro,Vs;function Zy(){if(Vs)return ro;Vs=1;var e=ye();ro=n;var t=e.constant(1);function n(o,i,a){return r(o,i||t,a||function(s){return o.outEdges(s)})}function r(o,i,a){var s={},u=o.nodes();return u.forEach(function(l){s[l]={},s[l][l]={distance:0},u.forEach(function(c){l!==c&&(s[l][c]={distance:Number.POSITIVE_INFINITY})}),a(l).forEach(function(c){var d=c.v===l?c.w:c.v,f=i(c);s[l][d]={distance:f,predecessor:l}})}),u.forEach(function(l){var c=s[l];u.forEach(function(d){var f=s[d];u.forEach(function(h){var v=f[l],p=c[h],y=f[h],m=v.distance+p.distance;m<y.distance&&(y.distance=m,y.predecessor=p.predecessor)})})}),s}return ro}var oo,js;function gl(){if(js)return oo;js=1;var e=ye();oo=t,t.CycleException=n;function t(r){var o={},i={},a=[];function s(u){if(e.has(i,u))throw new n;e.has(o,u)||(i[u]=!0,o[u]=!0,e.each(r.predecessors(u),s),delete i[u],a.push(u))}if(e.each(r.sinks(),s),e.size(o)!==r.nodeCount())throw new n;return a}function n(){}return n.prototype=new Error,oo}var io,Hs;function Wy(){if(Hs)return io;Hs=1;var e=gl();io=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return io}var ao,Ys;function ml(){if(Ys)return ao;Ys=1;var e=ye();ao=t;function t(r,o,i){e.isArray(o)||(o=[o]);var a=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],u={};return e.each(o,function(l){if(!r.hasNode(l))throw new Error("Graph does not have node: "+l);n(r,l,i==="post",u,a,s)}),s}function n(r,o,i,a,s,u){e.has(a,o)||(a[o]=!0,i||u.push(o),e.each(s(o),function(l){n(r,l,i,a,s,u)}),i&&u.push(o))}return ao}var so,qs;function Qy(){if(qs)return so;qs=1;var e=ml();so=t;function t(n,r){return e(n,r,"post")}return so}var co,Us;function Jy(){if(Us)return co;Us=1;var e=ml();co=t;function t(n,r){return e(n,r,"pre")}return co}var uo,Fs;function e0(){if(Fs)return uo;Fs=1;var e=ye(),t=Oi(),n=hl();uo=r;function r(o,i){var a=new t,s={},u=new n,l;function c(f){var h=f.v===l?f.w:f.v,v=u.priority(h);if(v!==void 0){var p=i(f);p<v&&(s[h]=l,u.decrease(h,p))}}if(o.nodeCount()===0)return a;e.each(o.nodes(),function(f){u.add(f,Number.POSITIVE_INFINITY),a.setNode(f)}),u.decrease(o.nodes()[0],0);for(var d=!1;u.size()>0;){if(l=u.removeMin(),e.has(s,l))a.setEdge(l,s[l]);else{if(d)throw new Error("Input graph is not connected: "+o);d=!0}o.nodeEdges(l).forEach(c)}return a}return uo}var lo,Xs;function t0(){return Xs||(Xs=1,lo={components:Xy(),dijkstra:vl(),dijkstraAll:Gy(),findCycles:Ky(),floydWarshall:Zy(),isAcyclic:Wy(),postorder:Qy(),preorder:Jy(),prim:e0(),tarjan:pl(),topsort:gl()}),lo}var fo,Gs;function n0(){if(Gs)return fo;Gs=1;var e=Uy();return fo={Graph:e.Graph,json:Fy(),alg:t0(),version:e.version},fo}var Zn;if(typeof hi=="function")try{Zn=n0()}catch{}Zn||(Zn=window.graphlib);var Se=Zn,ho,Ks;function r0(){if(Ks)return ho;Ks=1;var e=ct,t=Lc,n=fi;function r(o){return function(i,a,s){var u=Object(i);if(!t(i)){var l=e(a);i=n(i),a=function(d){return l(u[d],d,u)}}var c=o(i,a,s);return c>-1?u[l?i[c]:c]:void 0}}return ho=r,ho}var vo,Zs;function o0(){if(Zs)return vo;Zs=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return vo=t,vo}var po,Ws;function i0(){if(Ws)return po;Ws=1;var e=o0(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return po=n,po}var go,Qs;function a0(){if(Qs)return go;Qs=1;var e=i0(),t=Bc,n=jc,r=0/0,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function u(l){if(typeof l=="number")return l;if(n(l))return r;if(t(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=t(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=e(l);var d=i.test(l);return d||a.test(l)?s(l.slice(2),d?2:8):o.test(l)?r:+l}return go=u,go}var mo,Js;function yl(){if(Js)return mo;Js=1;var e=a0(),t=1/0,n=17976931348623157e292;function r(o){if(!o)return o===0?o:0;if(o=e(o),o===t||o===-t){var i=o<0?-1:1;return i*n}return o===o?o:0}return mo=r,mo}var yo,ec;function s0(){if(ec)return yo;ec=1;var e=yl();function t(n){var r=e(n),o=r%1;return r===r?o?r-o:r:0}return yo=t,yo}var bo,tc;function c0(){if(tc)return bo;tc=1;var e=Sf,t=ct,n=s0(),r=Math.max;function o(i,a,s){var u=i==null?0:i.length;if(!u)return-1;var l=s==null?0:n(s);return l<0&&(l=r(u+l,0)),e(i,t(a),l)}return bo=o,bo}var wo,nc;function u0(){if(nc)return wo;nc=1;var e=r0(),t=c0(),n=e(t);return wo=n,wo}var Eo,rc;function l0(){if(rc)return Eo;rc=1;var e=Qd,t=df,n=Jd;function r(o,i){return o==null?o:e(o,t(i),n)}return Eo=r,Eo}var So,oc;function Pi(){if(oc)return So;oc=1;var e=jc;function t(n,r,o){for(var i=-1,a=n.length;++i<a;){var s=n[i],u=r(s);if(u!=null&&(l===void 0?u===u&&!e(u):o(u,l)))var l=u,c=s}return c}return So=t,So}var xo,ic;function d0(){if(ic)return xo;ic=1;function e(t,n){return t>n}return xo=e,xo}var _o,ac;function f0(){if(ac)return _o;ac=1;var e=Pi(),t=d0(),n=Hc;function r(o){return o&&o.length?e(o,n,t):void 0}return _o=r,_o}var Co,sc;function h0(){if(sc)return Co;sc=1;var e=hf,t=ff,n=t(function(r,o,i){e(r,o,i)});return Co=n,Co}var No,cc;function bl(){if(cc)return No;cc=1;function e(t,n){return t<n}return No=e,No}var Oo,uc;function v0(){if(uc)return Oo;uc=1;var e=Pi(),t=bl(),n=Hc;function r(o){return o&&o.length?e(o,n,t):void 0}return Oo=r,Oo}var Po,lc;function p0(){if(lc)return Po;lc=1;var e=Pi(),t=ct,n=bl();function r(o,i){return o&&o.length?e(o,t(i),n):void 0}return Po=r,Po}var ko,dc;function g0(){if(dc)return ko;dc=1;var e=ef,t=function(){return e.Date.now()};return ko=t,ko}var Mo,fc;function m0(){if(fc)return Mo;fc=1;var e=Math.ceil,t=Math.max;function n(r,o,i,a){for(var s=-1,u=t(e((o-r)/(i||1)),0),l=Array(u);u--;)l[a?u:++s]=r,r+=i;return l}return Mo=n,Mo}var Io,hc;function y0(){if(hc)return Io;hc=1;var e=m0(),t=vf,n=yl();function r(o){return function(i,a,s){return s&&typeof s!="number"&&t(i,a,s)&&(a=s=void 0),i=n(i),a===void 0?(a=i,i=0):a=n(a),s=s===void 0?i<a?1:-1:n(s),e(i,a,s,o)}}return Io=r,Io}var Do,vc;function b0(){if(vc)return Do;vc=1;var e=y0(),t=e();return Do=t,Do}var Ro,pc;function w0(){if(pc)return Ro;pc=1;var e=tf,t=0;function n(r){var o=++t;return e(r)+o}return Ro=n,Ro}var To,gc;function E0(){if(gc)return To;gc=1;function e(t,n,r){for(var o=-1,i=t.length,a=n.length,s={};++o<i;){var u=o<a?n[o]:void 0;r(s,t[o],u)}return s}return To=e,To}var $o,mc;function S0(){if(mc)return $o;mc=1;var e=nf,t=E0();function n(r,o){return t(r||[],o||[],e)}return $o=n,$o}var Wn;if(typeof hi=="function")try{Wn={cloneDeep:pf,constant:Vc,defaults:gf,each:al(),filter:sl(),find:u0(),flatten:rf,forEach:Yc,forIn:l0(),has:cl(),isUndefined:ul(),last:mf,map:ll(),mapValues:of,max:f0(),merge:h0(),min:v0(),minBy:p0(),now:g0(),pick:af,range:b0(),reduce:dl(),sortBy:yf,uniqueId:w0(),values:fl(),zipObject:S0()}}catch{}Wn||(Wn=window._);var te=Wn,x0=ir;function ir(){var e={};e._next=e._prev=e,this._sentinel=e}ir.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return wl(t),t};ir.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&wl(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};ir.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,_0)),n=n._prev;return"["+e.join(", ")+"]"};function wl(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function _0(e,t){if(e!=="_next"&&e!=="_prev")return t}var Le=te,C0=Se.Graph,N0=x0,O0=k0,P0=Le.constant(1);function k0(e,t){if(e.nodeCount()<=1)return[];var n=I0(e,t||P0),r=M0(n.graph,n.buckets,n.zeroIdx);return Le.flatten(Le.map(r,function(o){return e.outEdges(o.v,o.w)}),!0)}function M0(e,t,n){for(var r=[],o=t[t.length-1],i=t[0],a;e.nodeCount();){for(;a=i.dequeue();)Ao(e,t,n,a);for(;a=o.dequeue();)Ao(e,t,n,a);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(a=t[s].dequeue(),a){r=r.concat(Ao(e,t,n,a,!0));break}}}return r}function Ao(e,t,n,r,o){var i=o?[]:void 0;return Le.forEach(e.inEdges(r.v),function(a){var s=e.edge(a),u=e.node(a.v);o&&i.push({v:a.v,w:a.w}),u.out-=s,ci(t,n,u)}),Le.forEach(e.outEdges(r.v),function(a){var s=e.edge(a),u=a.w,l=e.node(u);l.in-=s,ci(t,n,l)}),e.removeNode(r.v),i}function I0(e,t){var n=new C0,r=0,o=0;Le.forEach(e.nodes(),function(s){n.setNode(s,{v:s,in:0,out:0})}),Le.forEach(e.edges(),function(s){var u=n.edge(s.v,s.w)||0,l=t(s),c=u+l;n.setEdge(s.v,s.w,c),o=Math.max(o,n.node(s.v).out+=l),r=Math.max(r,n.node(s.w).in+=l)});var i=Le.range(o+r+3).map(function(){return new N0}),a=r+1;return Le.forEach(n.nodes(),function(s){ci(i,a,n.node(s))}),{graph:n,buckets:i,zeroIdx:a}}function ci(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var rt=te,D0=O0,R0={run:T0,undo:A0};function T0(e){var t=e.graph().acyclicer==="greedy"?D0(e,n(e)):$0(e);rt.forEach(t,function(r){var o=e.edge(r);e.removeEdge(r),o.forwardName=r.name,o.reversed=!0,e.setEdge(r.w,r.v,o,rt.uniqueId("rev"))});function n(r){return function(o){return r.edge(o).weight}}}function $0(e){var t=[],n={},r={};function o(i){rt.has(r,i)||(r[i]=!0,n[i]=!0,rt.forEach(e.outEdges(i),function(a){rt.has(n,a.w)?t.push(a):o(a.w)}),delete n[i])}return rt.forEach(e.nodes(),o),t}function A0(e){rt.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var K=te,El=Se.Graph,he={addDummyNode:Sl,simplify:L0,asNonCompoundGraph:z0,successorWeights:B0,predecessorWeights:V0,intersectRect:j0,buildLayerMatrix:H0,normalizeRanks:Y0,removeEmptyRanks:q0,addBorderNode:U0,maxRank:xl,partition:F0,time:X0,notime:G0};function Sl(e,t,n,r){var o;do o=K.uniqueId(r);while(e.hasNode(o));return n.dummy=t,e.setNode(o,n),o}function L0(e){var t=new El().setGraph(e.graph());return K.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),K.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})}),t}function z0(e){var t=new El({multigraph:e.isMultigraph()}).setGraph(e.graph());return K.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),K.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function B0(e){var t=K.map(e.nodes(),function(n){var r={};return K.forEach(e.outEdges(n),function(o){r[o.w]=(r[o.w]||0)+e.edge(o).weight}),r});return K.zipObject(e.nodes(),t)}function V0(e){var t=K.map(e.nodes(),function(n){var r={};return K.forEach(e.inEdges(n),function(o){r[o.v]=(r[o.v]||0)+e.edge(o).weight}),r});return K.zipObject(e.nodes(),t)}function j0(e,t){var n=e.x,r=e.y,o=t.x-n,i=t.y-r,a=e.width/2,s=e.height/2;if(!o&&!i)throw new Error("Not possible to find intersection inside of the rectangle");var u,l;return Math.abs(i)*a>Math.abs(o)*s?(i<0&&(s=-s),u=s*o/i,l=s):(o<0&&(a=-a),u=a,l=a*i/o),{x:n+u,y:r+l}}function H0(e){var t=K.map(K.range(xl(e)+1),function(){return[]});return K.forEach(e.nodes(),function(n){var r=e.node(n),o=r.rank;K.isUndefined(o)||(t[o][r.order]=n)}),t}function Y0(e){var t=K.min(K.map(e.nodes(),function(n){return e.node(n).rank}));K.forEach(e.nodes(),function(n){var r=e.node(n);K.has(r,"rank")&&(r.rank-=t)})}function q0(e){var t=K.min(K.map(e.nodes(),function(i){return e.node(i).rank})),n=[];K.forEach(e.nodes(),function(i){var a=e.node(i).rank-t;n[a]||(n[a]=[]),n[a].push(i)});var r=0,o=e.graph().nodeRankFactor;K.forEach(n,function(i,a){K.isUndefined(i)&&a%o!==0?--r:r&&K.forEach(i,function(s){e.node(s).rank+=r})})}function U0(e,t,n,r){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=r),Sl(e,"border",o,t)}function xl(e){return K.max(K.map(e.nodes(),function(t){var n=e.node(t).rank;if(!K.isUndefined(n))return n}))}function F0(e,t){var n={lhs:[],rhs:[]};return K.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function X0(e,t){var n=K.now();try{return t()}finally{console.log(e+" time: "+(K.now()-n)+"ms")}}function G0(e,t){return t()}var _l=te,K0=he,Z0={run:W0,undo:J0};function W0(e){e.graph().dummyChains=[],_l.forEach(e.edges(),function(t){Q0(e,t)})}function Q0(e,t){var n=t.v,r=e.node(n).rank,o=t.w,i=e.node(o).rank,a=t.name,s=e.edge(t),u=s.labelRank;if(i!==r+1){e.removeEdge(t);var l,c,d;for(d=0,++r;r<i;++d,++r)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:t,rank:r},l=K0.addDummyNode(e,"edge",c,"_d"),r===u&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),e.setEdge(n,l,{weight:s.weight},a),d===0&&e.graph().dummyChains.push(l),n=l;e.setEdge(n,o,{weight:s.weight},a)}}function J0(e){_l.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,o;for(e.setEdge(n.edgeObj,r);n.dummy;)o=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=o,n=e.node(t)})}var _n=te,ar={longestPath:eb,slack:tb};function eb(e){var t={};function n(r){var o=e.node(r);if(_n.has(t,r))return o.rank;t[r]=!0;var i=_n.min(_n.map(e.outEdges(r),function(a){return n(a.w)-e.edge(a).minlen}));return(i===Number.POSITIVE_INFINITY||i===void 0||i===null)&&(i=0),o.rank=i}_n.forEach(e.sources(),n)}function tb(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Qn=te,nb=Se.Graph,Jn=ar.slack,Cl=rb;function rb(e){var t=new nb({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var o,i;ob(t,e)<r;)o=ib(t,e),i=t.hasNode(o.v)?Jn(e,o):-Jn(e,o),ab(t,e,i);return t}function ob(e,t){function n(r){Qn.forEach(t.nodeEdges(r),function(o){var i=o.v,a=r===i?o.w:i;!e.hasNode(a)&&!Jn(t,o)&&(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))})}return Qn.forEach(e.nodes(),n),e.nodeCount()}function ib(e,t){return Qn.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return Jn(t,n)})}function ab(e,t,n){Qn.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var Ve=te,sb=Cl,cb=ar.slack,ub=ar.longestPath,lb=Se.alg.preorder,db=Se.alg.postorder,fb=he.simplify,hb=ut;ut.initLowLimValues=Mi;ut.initCutValues=ki;ut.calcCutValue=Nl;ut.leaveEdge=Pl;ut.enterEdge=kl;ut.exchangeEdges=Ml;function ut(e){e=fb(e),ub(e);var t=sb(e);Mi(t),ki(t,e);for(var n,r;n=Pl(t);)r=kl(t,e,n),Ml(t,e,n,r)}function ki(e,t){var n=db(e,e.nodes());n=n.slice(0,n.length-1),Ve.forEach(n,function(r){vb(e,t,r)})}function vb(e,t,n){var r=e.node(n),o=r.parent;e.edge(n,o).cutvalue=Nl(e,t,n)}function Nl(e,t,n){var r=e.node(n),o=r.parent,i=!0,a=t.edge(n,o),s=0;return a||(i=!1,a=t.edge(o,n)),s=a.weight,Ve.forEach(t.nodeEdges(n),function(u){var l=u.v===n,c=l?u.w:u.v;if(c!==o){var d=l===i,f=t.edge(u).weight;if(s+=d?f:-f,gb(e,n,c)){var h=e.edge(n,c).cutvalue;s+=d?-h:h}}}),s}function Mi(e,t){arguments.length<2&&(t=e.nodes()[0]),Ol(e,{},1,t)}function Ol(e,t,n,r,o){var i=n,a=e.node(r);return t[r]=!0,Ve.forEach(e.neighbors(r),function(s){Ve.has(t,s)||(n=Ol(e,t,n,s,r))}),a.low=i,a.lim=n++,o?a.parent=o:delete a.parent,n}function Pl(e){return Ve.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function kl(e,t,n){var r=n.v,o=n.w;t.hasEdge(r,o)||(r=n.w,o=n.v);var i=e.node(r),a=e.node(o),s=i,u=!1;i.lim>a.lim&&(s=a,u=!0);var l=Ve.filter(t.edges(),function(c){return u===yc(e,e.node(c.v),s)&&u!==yc(e,e.node(c.w),s)});return Ve.minBy(l,function(c){return cb(t,c)})}function Ml(e,t,n,r){var o=n.v,i=n.w;e.removeEdge(o,i),e.setEdge(r.v,r.w,{}),Mi(e),ki(e,t),pb(e,t)}function pb(e,t){var n=Ve.find(e.nodes(),function(o){return!t.node(o).parent}),r=lb(e,n);r=r.slice(1),Ve.forEach(r,function(o){var i=e.node(o).parent,a=t.edge(o,i),s=!1;a||(a=t.edge(i,o),s=!0),t.node(o).rank=t.node(i).rank+(s?a.minlen:-a.minlen)})}function gb(e,t,n){return e.hasEdge(t,n)}function yc(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var mb=ar,Il=mb.longestPath,yb=Cl,bb=hb,wb=Eb;function Eb(e){switch(e.graph().ranker){case"network-simplex":bc(e);break;case"tight-tree":xb(e);break;case"longest-path":Sb(e);break;default:bc(e)}}var Sb=Il;function xb(e){Il(e),yb(e)}function bc(e){bb(e)}var ui=te,_b=Cb;function Cb(e){var t=Ob(e);ui.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),o=r.edgeObj,i=Nb(e,t,o.v,o.w),a=i.path,s=i.lca,u=0,l=a[u],c=!0;n!==o.w;){if(r=e.node(n),c){for(;(l=a[u])!==s&&e.node(l).maxRank<r.rank;)u++;l===s&&(c=!1)}if(!c){for(;u<a.length-1&&e.node(l=a[u+1]).minRank<=r.rank;)u++;l=a[u]}e.setParent(n,l),n=e.successors(n)[0]}})}function Nb(e,t,n,r){var o=[],i=[],a=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim),u,l;u=n;do u=e.parent(u),o.push(u);while(u&&(t[u].low>a||s>t[u].lim));for(l=u,u=r;(u=e.parent(u))!==l;)i.push(u);return{path:o.concat(i.reverse()),lca:l}}function Ob(e){var t={},n=0;function r(o){var i=n;ui.forEach(e.children(o),r),t[o]={low:i,lim:n++}}return ui.forEach(e.children(),r),t}var ze=te,li=he,Pb={run:kb,cleanup:Db};function kb(e){var t=li.addDummyNode(e,"root",{},"_root"),n=Mb(e),r=ze.max(ze.values(n))-1,o=2*r+1;e.graph().nestingRoot=t,ze.forEach(e.edges(),function(a){e.edge(a).minlen*=o});var i=Ib(e)+1;ze.forEach(e.children(),function(a){Dl(e,t,o,i,r,n,a)}),e.graph().nodeRankFactor=o}function Dl(e,t,n,r,o,i,a){var s=e.children(a);if(!s.length){a!==t&&e.setEdge(t,a,{weight:0,minlen:n});return}var u=li.addBorderNode(e,"_bt"),l=li.addBorderNode(e,"_bb"),c=e.node(a);e.setParent(u,a),c.borderTop=u,e.setParent(l,a),c.borderBottom=l,ze.forEach(s,function(d){Dl(e,t,n,r,o,i,d);var f=e.node(d),h=f.borderTop?f.borderTop:d,v=f.borderBottom?f.borderBottom:d,p=f.borderTop?r:2*r,y=h!==v?1:o-i[a]+1;e.setEdge(u,h,{weight:p,minlen:y,nestingEdge:!0}),e.setEdge(v,l,{weight:p,minlen:y,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,u,{weight:0,minlen:o+i[a]})}function Mb(e){var t={};function n(r,o){var i=e.children(r);i&&i.length&&ze.forEach(i,function(a){n(a,o+1)}),t[r]=o}return ze.forEach(e.children(),function(r){n(r,1)}),t}function Ib(e){return ze.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function Db(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,ze.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var Lo=te,Rb=he,Tb=$b;function $b(e){function t(n){var r=e.children(n),o=e.node(n);if(r.length&&Lo.forEach(r,t),Lo.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var i=o.minRank,a=o.maxRank+1;i<a;++i)wc(e,"borderLeft","_bl",n,o,i),wc(e,"borderRight","_br",n,o,i)}}Lo.forEach(e.children(),t)}function wc(e,t,n,r,o,i){var a={width:0,height:0,rank:i,borderType:t},s=o[t][i-1],u=Rb.addDummyNode(e,"border",a,n);o[t][i]=u,e.setParent(u,r),s&&e.setEdge(s,u,{weight:1})}var Ne=te,Ab={adjust:Lb,undo:zb};function Lb(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Rl(e)}function zb(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&Bb(e),(t==="lr"||t==="rl")&&(Vb(e),Rl(e))}function Rl(e){Ne.forEach(e.nodes(),function(t){Ec(e.node(t))}),Ne.forEach(e.edges(),function(t){Ec(e.edge(t))})}function Ec(e){var t=e.width;e.width=e.height,e.height=t}function Bb(e){Ne.forEach(e.nodes(),function(t){zo(e.node(t))}),Ne.forEach(e.edges(),function(t){var n=e.edge(t);Ne.forEach(n.points,zo),Ne.has(n,"y")&&zo(n)})}function zo(e){e.y=-e.y}function Vb(e){Ne.forEach(e.nodes(),function(t){Bo(e.node(t))}),Ne.forEach(e.edges(),function(t){var n=e.edge(t);Ne.forEach(n.points,Bo),Ne.has(n,"x")&&Bo(n)})}function Bo(e){var t=e.x;e.x=e.y,e.y=t}var Te=te,jb=Hb;function Hb(e){var t={},n=Te.filter(e.nodes(),function(s){return!e.children(s).length}),r=Te.max(Te.map(n,function(s){return e.node(s).rank})),o=Te.map(Te.range(r+1),function(){return[]});function i(s){if(!Te.has(t,s)){t[s]=!0;var u=e.node(s);o[u.rank].push(s),Te.forEach(e.successors(s),i)}}var a=Te.sortBy(n,function(s){return e.node(s).rank});return Te.forEach(a,i),o}var qe=te,Yb=qb;function qb(e,t){for(var n=0,r=1;r<t.length;++r)n+=Ub(e,t[r-1],t[r]);return n}function Ub(e,t,n){for(var r=qe.zipObject(n,qe.map(n,function(l,c){return c})),o=qe.flatten(qe.map(t,function(l){return qe.sortBy(qe.map(e.outEdges(l),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),i=1;i<n.length;)i<<=1;var a=2*i-1;i-=1;var s=qe.map(new Array(a),function(){return 0}),u=0;return qe.forEach(o.forEach(function(l){var c=l.pos+i;s[c]+=l.weight;for(var d=0;c>0;)c%2&&(d+=s[c+1]),c=c-1>>1,s[c]+=l.weight;u+=l.weight*d})),u}var Sc=te,Fb=Xb;function Xb(e,t){return Sc.map(t,function(n){var r=e.inEdges(n);if(r.length){var o=Sc.reduce(r,function(i,a){var s=e.edge(a),u=e.node(a.v);return{sum:i.sum+s.weight*u.order,weight:i.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:n}})}var ve=te,Gb=Kb;function Kb(e,t){var n={};ve.forEach(e,function(o,i){var a=n[o.v]={indegree:0,in:[],out:[],vs:[o.v],i};ve.isUndefined(o.barycenter)||(a.barycenter=o.barycenter,a.weight=o.weight)}),ve.forEach(t.edges(),function(o){var i=n[o.v],a=n[o.w];!ve.isUndefined(i)&&!ve.isUndefined(a)&&(a.indegree++,i.out.push(n[o.w]))});var r=ve.filter(n,function(o){return!o.indegree});return Zb(r)}function Zb(e){var t=[];function n(i){return function(a){a.merged||(ve.isUndefined(a.barycenter)||ve.isUndefined(i.barycenter)||a.barycenter>=i.barycenter)&&Wb(i,a)}}function r(i){return function(a){a.in.push(i),--a.indegree===0&&e.push(a)}}for(;e.length;){var o=e.pop();t.push(o),ve.forEach(o.in.reverse(),n(o)),ve.forEach(o.out,r(o))}return ve.map(ve.filter(t,function(i){return!i.merged}),function(i){return ve.pick(i,["vs","i","barycenter","weight"])})}function Wb(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var Yt=te,Qb=he,Jb=ew;function ew(e,t){var n=Qb.partition(e,function(c){return Yt.has(c,"barycenter")}),r=n.lhs,o=Yt.sortBy(n.rhs,function(c){return-c.i}),i=[],a=0,s=0,u=0;r.sort(tw(!!t)),u=xc(i,o,u),Yt.forEach(r,function(c){u+=c.vs.length,i.push(c.vs),a+=c.barycenter*c.weight,s+=c.weight,u=xc(i,o,u)});var l={vs:Yt.flatten(i,!0)};return s&&(l.barycenter=a/s,l.weight=s),l}function xc(e,t,n){for(var r;t.length&&(r=Yt.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function tw(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var Xe=te,nw=Fb,rw=Gb,ow=Jb,iw=Tl;function Tl(e,t,n,r){var o=e.children(t),i=e.node(t),a=i?i.borderLeft:void 0,s=i?i.borderRight:void 0,u={};a&&(o=Xe.filter(o,function(v){return v!==a&&v!==s}));var l=nw(e,o);Xe.forEach(l,function(v){if(e.children(v.v).length){var p=Tl(e,v.v,n,r);u[v.v]=p,Xe.has(p,"barycenter")&&sw(v,p)}});var c=rw(l,n);aw(c,u);var d=ow(c,r);if(a&&(d.vs=Xe.flatten([a,d.vs,s],!0),e.predecessors(a).length)){var f=e.node(e.predecessors(a)[0]),h=e.node(e.predecessors(s)[0]);Xe.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+h.order)/(d.weight+2),d.weight+=2}return d}function aw(e,t){Xe.forEach(e,function(n){n.vs=Xe.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function sw(e,t){Xe.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var qt=te,cw=Se.Graph,uw=lw;function lw(e,t,n){var r=dw(e),o=new cw({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(i){return e.node(i)});return qt.forEach(e.nodes(),function(i){var a=e.node(i),s=e.parent(i);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(o.setNode(i),o.setParent(i,s||r),qt.forEach(e[n](i),function(u){var l=u.v===i?u.w:u.v,c=o.edge(l,i),d=qt.isUndefined(c)?0:c.weight;o.setEdge(l,i,{weight:e.edge(u).weight+d})}),qt.has(a,"minRank")&&o.setNode(i,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),o}function dw(e){for(var t;e.hasNode(t=qt.uniqueId("_root")););return t}var fw=te,hw=vw;function vw(e,t,n){var r={},o;fw.forEach(n,function(i){for(var a=e.parent(i),s,u;a;){if(s=e.parent(a),s?(u=r[s],r[s]=a):(u=o,o=a),u&&u!==a){t.setEdge(u,a);return}a=s}})}var Ge=te,pw=jb,gw=Yb,mw=iw,yw=uw,bw=hw,ww=Se.Graph,_c=he,Ew=Sw;function Sw(e){var t=_c.maxRank(e),n=Cc(e,Ge.range(1,t+1),"inEdges"),r=Cc(e,Ge.range(t-1,-1,-1),"outEdges"),o=pw(e);Nc(e,o);for(var i=Number.POSITIVE_INFINITY,a,s=0,u=0;u<4;++s,++u){xw(s%2?n:r,s%4>=2),o=_c.buildLayerMatrix(e);var l=gw(e,o);l<i&&(u=0,a=Ge.cloneDeep(o),i=l)}Nc(e,a)}function Cc(e,t,n){return Ge.map(t,function(r){return yw(e,r,n)})}function xw(e,t){var n=new ww;Ge.forEach(e,function(r){var o=r.graph().root,i=mw(r,o,n,t);Ge.forEach(i.vs,function(a,s){r.node(a).order=s}),bw(r,n,i.vs)})}function Nc(e,t){Ge.forEach(t,function(n){Ge.forEach(n,function(r,o){e.node(r).order=o})})}var q=te,_w=Se.Graph,Cw=he,Nw={positionX:kw,findType1Conflicts:$l,findType2Conflicts:Al,addConflict:Ii,hasConflict:Ll,verticalAlignment:zl,horizontalCompaction:Bl,alignCoordinates:jl,findSmallestWidthAlignment:Vl,balance:Hl};function $l(e,t){var n={};function r(o,i){var a=0,s=0,u=o.length,l=q.last(i);return q.forEach(i,function(c,d){var f=Ow(e,c),h=f?e.node(f).order:u;(f||c===l)&&(q.forEach(i.slice(s,d+1),function(v){q.forEach(e.predecessors(v),function(p){var y=e.node(p),m=y.order;(m<a||h<m)&&!(y.dummy&&e.node(v).dummy)&&Ii(n,p,v)})}),s=d+1,a=h)}),i}return q.reduce(t,r),n}function Al(e,t){var n={};function r(i,a,s,u,l){var c;q.forEach(q.range(a,s),function(d){c=i[d],e.node(c).dummy&&q.forEach(e.predecessors(c),function(f){var h=e.node(f);h.dummy&&(h.order<u||h.order>l)&&Ii(n,f,c)})})}function o(i,a){var s=-1,u,l=0;return q.forEach(a,function(c,d){if(e.node(c).dummy==="border"){var f=e.predecessors(c);f.length&&(u=e.node(f[0]).order,r(a,l,d,s,u),l=d,s=u)}r(a,l,a.length,u,i.length)}),a}return q.reduce(t,o),n}function Ow(e,t){if(e.node(t).dummy)return q.find(e.predecessors(t),function(n){return e.node(n).dummy})}function Ii(e,t,n){if(t>n){var r=t;t=n,n=r}var o=e[t];o||(e[t]=o={}),o[n]=!0}function Ll(e,t,n){if(t>n){var r=t;t=n,n=r}return q.has(e[t],n)}function zl(e,t,n,r){var o={},i={},a={};return q.forEach(t,function(s){q.forEach(s,function(u,l){o[u]=u,i[u]=u,a[u]=l})}),q.forEach(t,function(s){var u=-1;q.forEach(s,function(l){var c=r(l);if(c.length){c=q.sortBy(c,function(p){return a[p]});for(var d=(c.length-1)/2,f=Math.floor(d),h=Math.ceil(d);f<=h;++f){var v=c[f];i[l]===l&&u<a[v]&&!Ll(n,l,v)&&(i[v]=l,i[l]=o[l]=o[v],u=a[v])}}})}),{root:o,align:i}}function Bl(e,t,n,r,o){var i={},a=Pw(e,t,n,o),s=o?"borderLeft":"borderRight";function u(d,f){for(var h=a.nodes(),v=h.pop(),p={};v;)p[v]?d(v):(p[v]=!0,h.push(v),h=h.concat(f(v))),v=h.pop()}function l(d){i[d]=a.inEdges(d).reduce(function(f,h){return Math.max(f,i[h.v]+a.edge(h))},0)}function c(d){var f=a.outEdges(d).reduce(function(v,p){return Math.min(v,i[p.w]-a.edge(p))},Number.POSITIVE_INFINITY),h=e.node(d);f!==Number.POSITIVE_INFINITY&&h.borderType!==s&&(i[d]=Math.max(i[d],f))}return u(l,a.predecessors.bind(a)),u(c,a.successors.bind(a)),q.forEach(r,function(d){i[d]=i[n[d]]}),i}function Pw(e,t,n,r){var o=new _w,i=e.graph(),a=Mw(i.nodesep,i.edgesep,r);return q.forEach(t,function(s){var u;q.forEach(s,function(l){var c=n[l];if(o.setNode(c),u){var d=n[u],f=o.edge(d,c);o.setEdge(d,c,Math.max(a(e,l,u),f||0))}u=l})}),o}function Vl(e,t){return q.minBy(q.values(t),function(n){var r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return q.forIn(n,function(i,a){var s=Iw(e,a)/2;r=Math.max(i+s,r),o=Math.min(i-s,o)}),r-o})}function jl(e,t){var n=q.values(t),r=q.min(n),o=q.max(n);q.forEach(["u","d"],function(i){q.forEach(["l","r"],function(a){var s=i+a,u=e[s],l;if(u!==t){var c=q.values(u);l=a==="l"?r-q.min(c):o-q.max(c),l&&(e[s]=q.mapValues(u,function(d){return d+l}))}})})}function Hl(e,t){return q.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var o=q.sortBy(q.map(e,r));return(o[1]+o[2])/2})}function kw(e){var t=Cw.buildLayerMatrix(e),n=q.merge($l(e,t),Al(e,t)),r={},o;q.forEach(["u","d"],function(a){o=a==="u"?t:q.values(t).reverse(),q.forEach(["l","r"],function(s){s==="r"&&(o=q.map(o,function(d){return q.values(d).reverse()}));var u=(a==="u"?e.predecessors:e.successors).bind(e),l=zl(e,o,n,u),c=Bl(e,o,l.root,l.align,s==="r");s==="r"&&(c=q.mapValues(c,function(d){return-d})),r[a+s]=c})});var i=Vl(e,r);return jl(r,i),Hl(r,e.graph().align)}function Mw(e,t,n){return function(r,o,i){var a=r.node(o),s=r.node(i),u=0,l;if(u+=a.width/2,q.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":l=-a.width/2;break;case"r":l=a.width/2;break}if(l&&(u+=n?l:-l),l=0,u+=(a.dummy?t:e)/2,u+=(s.dummy?t:e)/2,u+=s.width/2,q.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":l=s.width/2;break;case"r":l=-s.width/2;break}return l&&(u+=n?l:-l),l=0,u}}function Iw(e,t){return e.node(t).width}var Ut=te,Yl=he,Dw=Nw.positionX,Rw=Tw;function Tw(e){e=Yl.asNonCompoundGraph(e),$w(e),Ut.forEach(Dw(e),function(t,n){e.node(n).x=t})}function $w(e){var t=Yl.buildLayerMatrix(e),n=e.graph().ranksep,r=0;Ut.forEach(t,function(o){var i=Ut.max(Ut.map(o,function(a){return e.node(a).height}));Ut.forEach(o,function(a){e.node(a).y=r+i/2}),r+=i+n})}var F=te,Oc=R0,Pc=Z0,Aw=wb,Lw=he.normalizeRanks,zw=_b,Bw=he.removeEmptyRanks,kc=Pb,Vw=Tb,Mc=Ab,jw=Ew,Hw=Rw,Ke=he,Yw=Se.Graph,qw=Uw;function Uw(e,t){var n=t&&t.debugTiming?Ke.time:Ke.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return nE(e)});n("  runLayout",function(){Fw(r,n)}),n("  updateInputGraph",function(){Xw(e,r)})})}function Fw(e,t){t("    makeSpaceForEdgeLabels",function(){rE(e)}),t("    removeSelfEdges",function(){fE(e)}),t("    acyclic",function(){Oc.run(e)}),t("    nestingGraph.run",function(){kc.run(e)}),t("    rank",function(){Aw(Ke.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){oE(e)}),t("    removeEmptyRanks",function(){Bw(e)}),t("    nestingGraph.cleanup",function(){kc.cleanup(e)}),t("    normalizeRanks",function(){Lw(e)}),t("    assignRankMinMax",function(){iE(e)}),t("    removeEdgeLabelProxies",function(){aE(e)}),t("    normalize.run",function(){Pc.run(e)}),t("    parentDummyChains",function(){zw(e)}),t("    addBorderSegments",function(){Vw(e)}),t("    order",function(){jw(e)}),t("    insertSelfEdges",function(){hE(e)}),t("    adjustCoordinateSystem",function(){Mc.adjust(e)}),t("    position",function(){Hw(e)}),t("    positionSelfEdges",function(){vE(e)}),t("    removeBorderNodes",function(){dE(e)}),t("    normalize.undo",function(){Pc.undo(e)}),t("    fixupEdgeLabelCoords",function(){uE(e)}),t("    undoCoordinateSystem",function(){Mc.undo(e)}),t("    translateGraph",function(){sE(e)}),t("    assignNodeIntersects",function(){cE(e)}),t("    reversePoints",function(){lE(e)}),t("    acyclic.undo",function(){Oc.undo(e)})}function Xw(e,t){F.forEach(e.nodes(),function(n){var r=e.node(n),o=t.node(n);r&&(r.x=o.x,r.y=o.y,t.children(n).length&&(r.width=o.width,r.height=o.height))}),F.forEach(e.edges(),function(n){var r=e.edge(n),o=t.edge(n);r.points=o.points,F.has(o,"x")&&(r.x=o.x,r.y=o.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var Gw=["nodesep","edgesep","ranksep","marginx","marginy"],Kw={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Zw=["acyclicer","ranker","rankdir","align"],Ww=["width","height"],Qw={width:0,height:0},Jw=["minlen","weight","width","height","labeloffset"],eE={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},tE=["labelpos"];function nE(e){var t=new Yw({multigraph:!0,compound:!0}),n=jo(e.graph());return t.setGraph(F.merge({},Kw,Vo(n,Gw),F.pick(n,Zw))),F.forEach(e.nodes(),function(r){var o=jo(e.node(r));t.setNode(r,F.defaults(Vo(o,Ww),Qw)),t.setParent(r,e.parent(r))}),F.forEach(e.edges(),function(r){var o=jo(e.edge(r));t.setEdge(r,F.merge({},eE,Vo(o,Jw),F.pick(o,tE)))}),t}function rE(e){var t=e.graph();t.ranksep/=2,F.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function oE(e){F.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),o=e.node(t.w),i={rank:(o.rank-r.rank)/2+r.rank,e:t};Ke.addDummyNode(e,"edge-proxy",i,"_ep")}})}function iE(e){var t=0;F.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=F.max(t,r.maxRank))}),e.graph().maxRank=t}function aE(e){F.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function sE(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,o=0,i=e.graph(),a=i.marginx||0,s=i.marginy||0;function u(l){var c=l.x,d=l.y,f=l.width,h=l.height;t=Math.min(t,c-f/2),n=Math.max(n,c+f/2),r=Math.min(r,d-h/2),o=Math.max(o,d+h/2)}F.forEach(e.nodes(),function(l){u(e.node(l))}),F.forEach(e.edges(),function(l){var c=e.edge(l);F.has(c,"x")&&u(c)}),t-=a,r-=s,F.forEach(e.nodes(),function(l){var c=e.node(l);c.x-=t,c.y-=r}),F.forEach(e.edges(),function(l){var c=e.edge(l);F.forEach(c.points,function(d){d.x-=t,d.y-=r}),F.has(c,"x")&&(c.x-=t),F.has(c,"y")&&(c.y-=r)}),i.width=n-t+a,i.height=o-r+s}function cE(e){F.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),o=e.node(t.w),i,a;n.points?(i=n.points[0],a=n.points[n.points.length-1]):(n.points=[],i=o,a=r),n.points.unshift(Ke.intersectRect(r,i)),n.points.push(Ke.intersectRect(o,a))})}function uE(e){F.forEach(e.edges(),function(t){var n=e.edge(t);if(F.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function lE(e){F.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function dE(e){F.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),o=e.node(n.borderBottom),i=e.node(F.last(n.borderLeft)),a=e.node(F.last(n.borderRight));n.width=Math.abs(a.x-i.x),n.height=Math.abs(o.y-r.y),n.x=i.x+n.width/2,n.y=r.y+n.height/2}}),F.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function fE(e){F.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function hE(e){var t=Ke.buildLayerMatrix(e);F.forEach(t,function(n){var r=0;F.forEach(n,function(o,i){var a=e.node(o);a.order=i+r,F.forEach(a.selfEdges,function(s){Ke.addDummyNode(e,"selfedge",{width:s.label.width,height:s.label.height,rank:a.rank,order:i+ ++r,e:s.e,label:s.label},"_se")}),delete a.selfEdges})})}function vE(e){F.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),o=r.x+r.width/2,i=r.y,a=n.x-o,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:o+2*a/3,y:i-s},{x:o+5*a/6,y:i-s},{x:o+a,y:i},{x:o+5*a/6,y:i+s},{x:o+2*a/3,y:i+s}],n.label.x=n.x,n.label.y=n.y}})}function Vo(e,t){return F.mapValues(F.pick(e,t),Number)}function jo(e){var t={};return F.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var Cn=te,pE=he,gE=Se.Graph,mE={debugOrdering:yE};function yE(e){var t=pE.buildLayerMatrix(e),n=new gE({compound:!0,multigraph:!0}).setGraph({});return Cn.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),Cn.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),Cn.forEach(t,function(r,o){var i="layer"+o;n.setNode(i,{rank:"same"}),Cn.reduce(r,function(a,s){return n.setEdge(a,s,{style:"invis"}),s})}),n}var bE="0.8.5",ql={graphlib:Se,layout:qw,debug:mE,util:{time:he.time,notime:he.notime},version:bE};const wE=()=>ne(fe,{children:[N(Fo,{variant:"smallText1",className:"description",children:"Undefined"}),N(xf,{placement:"top",markdownText:"Provenance tracks the relationship  between data, code and analytical results.",helpUrl:"https://help.synapse.org/docs/Provenance.1972470373.html"})]}),EE=window.React.useMemo,Ln=e=>{const t=e.targetVersionNumber?`.${e.targetVersionNumber}`:"",n=`${e.targetId}${t}`;return EE(()=>ne(fe,{children:[N("div",{children:N(di,{options:{icon:"fileOutlined"}})}),N("span",{children:n})]}),[n])};try{Ln.displayName="EntityPlaceholderNodeLabel",Ln.__docgenInfo={description:"This node type is used if the user cannot access the entity for some reason",displayName:"EntityPlaceholderNodeLabel",props:{targetId:{defaultValue:null,description:"",name:"targetId",required:!0,type:{name:"string"}},targetVersionNumber:{defaultValue:null,description:"",name:"targetVersionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/EntityPlaceholderNodeLabel.tsx#EntityPlaceholderNodeLabel"]={docgenInfo:Ln.__docgenInfo,name:"EntityPlaceholderNodeLabel",path:"src/lib/containers/provenance/EntityPlaceholderNodeLabel.tsx#EntityPlaceholderNodeLabel"})}catch{}var ue=(e=>(e.ENTITY="EntityNode",e.ENTITY_PLACEHOLDER="EntityPlaceholderNode",e.EXTERNAL="ExternalNode",e.ACTIVITY="ActivityNode",e.EXPAND="ExpandNode",e.UNDEFINED="UndefinedNode",e))(ue||{});const Xt=e=>{const{type:t,data:n}=e;let r;switch(t){case"EntityNode":r=N(Rn,{...n});break;case"EntityPlaceholderNode":r=N(Ln,{...n});break;case"ExternalNode":r=N(An,{...n});break;case"ActivityNode":r=N(In,{...n});break;case"ExpandNode":r=N(Tn,{...n});break;case"UndefinedNode":r=N(wE,{});break;default:r=ne("p",{children:["Unrecognized node type: ",t]});break}const o={label:r,props:n,type:t};return{id:Pe(e),position:{x:100,y:100},data:o,connectable:!1,draggable:!1,className:`${t}`}},Ul=(e,t)=>{const n=Pe(e),r=Pe(t);return{id:`${n}-${r}`,source:n,target:r,animated:!0,type:$e.SimpleBezier,markerEnd:{type:en.ArrowClosed}}},Pe=e=>{var r,o,i,a;const{type:t,data:n}=e;switch(t){case"EntityNode":return`${n.id}.${(r=n.versionNumber)!=null?r:"latest"}`;case"EntityPlaceholderNode":return`${n.targetId}.${(o=n.targetVersionNumber)!=null?o:"latest"}`;case"ExternalNode":return`${n.url}`;case"ActivityNode":return`${n.id}`;case"ExpandNode":return`expand.node.${n.entityHeader.id}.${(i=n.entityHeader.versionNumber)!=null?i:"latest"}`;case"UndefinedNode":return`undefined.dummy.node.${n.id}.${(a=n.versionNumber)!=null?a:"latest"}`}},yt=new ql.graphlib.Graph;yt.setDefaultEdgeLabel(()=>({}));const Ic=e=>e.data.type=="ExpandNode"?30:100,Dc=e=>e.data.type=="ExpandNode"?30:172,SE=(e,t,n)=>{const r=n==="LR";return yt.setGraph({rankdir:n}),e.forEach(o=>{yt.setNode(o.id,{width:Dc(o),height:Ic(o)})}),t.forEach(o=>{yt.setEdge(o.source,o.target)}),ql.layout(yt),e.forEach(o=>{const i=yt.node(o.id);return o.targetPosition=r?z.Left:z.Top,o.sourcePosition=r?z.Right:z.Bottom,o.position={x:i.x-Dc(o)/2,y:i.y-Ic(o)/2},o}),{nodes:e,edges:t}},Rc=(e,t)=>_f(e,t,Cf).length==0;try{Xt.displayName="getProvenanceNode",Xt.__docgenInfo={description:"",displayName:"getProvenanceNode",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceUtils.tsx#getProvenanceNode"]={docgenInfo:Xt.__docgenInfo,name:"getProvenanceNode",path:"src/lib/containers/provenance/ProvenanceUtils.tsx#getProvenanceNode"})}catch{}try{Pe.displayName="getNodeId",Pe.__docgenInfo={description:"",displayName:"getNodeId",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceUtils.tsx#getNodeId"]={docgenInfo:Pe.__docgenInfo,name:"getNodeId",path:"src/lib/containers/provenance/ProvenanceUtils.tsx#getNodeId"})}catch{}const xE="org.sagebionetworks.repo.model.provenance.UsedEntity",Tc=e=>{const{entityHeader:t,rootEntityHeaders:n}=e;return(n==null?void 0:n.find(o=>t.id==o.id&&t.versionNumber==o.versionNumber))!==void 0},Fl=(e,t)=>t.find(r=>r.id===Pe(e))===void 0,_E=(e,t)=>{const n={type:ue.ENTITY,data:e};return t.find(r=>r.id===Pe(n))},CE=(e,t,n)=>n.find(o=>o.source===Pe(e)&&o.target===Pe(t))===void 0,an=e=>{const{newNodeProps:t,existingNodeProps:n,nodesCopy:r,edgesCopy:o}=e;Fl(t,r)&&r.push(Xt(t)),CE(t,n,o)&&o.push(Ul(t,n))},NE=e=>{const{activity:t,entityHeader:n,nodesCopy:r,edgesCopy:o}=e,i={type:ue.ACTIVITY,data:t},a={type:ue.ENTITY,data:n};an({newNodeProps:i,existingNodeProps:a,nodesCopy:r,edgesCopy:o})},OE=e=>{const{entityHeader:t,itemCount:n=0,nodesCopy:r,edgesCopy:o}=e,i={type:ue.EXPAND,data:{itemCount:n,entityHeader:t}},a={type:ue.ENTITY,data:t};an({newNodeProps:i,existingNodeProps:a,nodesCopy:r,edgesCopy:o})},PE=e=>{const{ref:t,activity:n,nodesCopy:r,edgesCopy:o}=e,i={type:ue.ENTITY_PLACEHOLDER,data:t},a={type:ue.ACTIVITY,data:n};an({newNodeProps:i,existingNodeProps:a,nodesCopy:r,edgesCopy:o})},kE=e=>{const{entityHeader:t,nodesCopy:n,edgesCopy:r}=e,o={type:ue.UNDEFINED,data:t},i={type:ue.ENTITY,data:t};an({newNodeProps:o,existingNodeProps:i,nodesCopy:n,edgesCopy:r})},ME=e=>{const{usedURL:t,activity:n,nodesCopy:r,edgesCopy:o}=e,i={type:ue.ACTIVITY,data:n},a={type:ue.EXTERNAL,data:t};an({newNodeProps:a,existingNodeProps:i,nodesCopy:r,edgesCopy:o})},IE=e=>{const{entityHeader:t,activity:n,nodesCopy:r,edgesCopy:o}=e,i={type:ue.ENTITY,data:t};if(Fl(i,r)&&(r.push(Xt(i)),n)){const a={type:ue.ACTIVITY,data:n};o.push(Ul(i,a))}},Ho=window.React,Yo=window.React.useCallback,Nn=window.React.useEffect,DE=window.React.useState,qo=400,Uo=.85,RE=e=>{const{entityRefs:t,containerHeight:n="200px",initialNodes:r=[],initialEdges:o=[],onNodesChangedListener:i,onEdgesChangedListener:a}=e,{accessToken:s}=Rd(),[u,l]=Ho.useState(r),[c,d]=Ho.useState(o),[f,h,v]=Cy([]),[p,y,m]=Ny([]),[x,E]=DE(),b=Td(),{data:w,isSuccess:_}=Nf(t,{useErrorBoundary:!0});if(_&&w.totalNumberOfResults==0){const g=t.map(C=>C.targetId).join(",");b(`Unable to load provenance for the given Synapse IDs: ${g}`)}const k=w==null?void 0:w.results,[O,R]=Ho.useState(!1),A=_i(),$=Yo((g,C)=>{E(C)},[]),V=Yo(async g=>{var T;const{entityHeader:C,nodesCopy:S,edgesCopy:P,usedInActivity:M}=g;IE({entityHeader:C,activity:M,nodesCopy:S,edgesCopy:P});try{const I=await Xi(C.id,C.versionNumber,s);(!Tc({entityHeader:C,rootEntityHeaders:k})||I.used&&I.used.length>=qo)&&OE({entityHeader:C,itemCount:(T=I.used)==null?void 0:T.length,nodesCopy:S,edgesCopy:P})}catch(I){console.error(I),Tc({entityHeader:C,rootEntityHeaders:k})&&kE({entityHeader:C,nodesCopy:S,edgesCopy:P})}},[s,k]);Nn(()=>{!O&&f.length>0&&setTimeout(()=>{if(k){const g=_E(k[0],f);if(g){const C=A.getZoom(),S=C>Uo?Uo:C;A==null||A.setCenter(g.position.x+150,g.position.y-30,{zoom:S,duration:0})}R(!0)}})},[O,f,A,k]);const B=Yo(async g=>{const{entityHeader:C,nodesCopy:S,edgesCopy:P}=g;try{const M=await Xi(C.id,C.versionNumber,s);if(NE({activity:M,entityHeader:C,nodesCopy:S,edgesCopy:P}),M.used&&M.used.length<qo){const T=[];M.used.forEach(D=>{D.concreteType==xE?T.push(D.reference):ME({usedURL:D,activity:M,nodesCopy:S,edgesCopy:P})});const I=await $d(T,s),{results:L}=I;T.filter(D=>L.find(H=>H.id==D.targetId)==null).forEach(D=>{PE({ref:D,activity:M,nodesCopy:S,edgesCopy:P})});const U=[];L.forEach(D=>{U.push(V({entityHeader:D,nodesCopy:S,edgesCopy:P,usedInActivity:M}))}),await Promise.allSettled(U)}}catch(M){console.error(M)}},[s,V]);return Nn(()=>{if(k&&u.length==0){const g=[...u],C=[...c],S=[];k.forEach(P=>{const M=V({entityHeader:P,nodesCopy:g,edgesCopy:C});S.push(M);const T=B({entityHeader:P,nodesCopy:g,edgesCopy:C});S.push(T)}),Promise.allSettled(S).finally(()=>{l(g),d(C)})}},[V,b,B,k,t,c,u]),Nn(()=>{const g=x==null?void 0:x.data;if(x&&(g==null?void 0:g.type)==ue.EXPAND){const C=g.props;if(C.itemCount>qo){Ad("Web visualization does not support expanding this many items at this time.","danger");return}else{g.label=N(Tf,{size:30});const S=u.filter(T=>T.id!=x.id),P=Si([x],c)[0],M=c.filter(T=>T!=P);B({entityHeader:C.entityHeader,nodesCopy:S,edgesCopy:M}).finally(()=>{l(S),d(M)})}E(void 0)}},[x,u,c,B]),Nn(()=>{const{nodes:g,edges:C}=SE(u,c,"TB");Rc(g,f)||(h(g),i&&i(g)),Rc(C,p)||(y(C),a&&a(C))},[u,c,f,p,h,y,O,A,t,i,a]),N("div",{className:"bootstrap-4-backport ProvenanceWidget",role:"graphics-doc",style:{width:"100%",height:n},children:N(rl,{defaultZoom:Uo,nodes:f,edges:p,onNodeClick:$,onNodesChange:v,onEdgesChange:m,attributionPosition:"bottom-right",onConnect:void 0,children:N(rm,{})})})},Gt=e=>N(Dd,{children:N(ol,{children:N(RE,{...e})})});try{Gt.displayName="ProvenanceGraph",Gt.__docgenInfo={description:"",displayName:"ProvenanceGraph",props:{entityRefs:{defaultValue:null,description:"",name:"entityRefs",required:!0,type:{name:"ReferenceList"}},containerHeight:{defaultValue:null,description:"",name:"containerHeight",required:!0,type:{name:"string"}},initialNodes:{defaultValue:null,description:"",name:"initialNodes",required:!1,type:{name:"Node<any>[]"}},initialEdges:{defaultValue:null,description:"",name:"initialEdges",required:!1,type:{name:"Edge<any>[]"}},onNodesChangedListener:{defaultValue:null,description:"",name:"onNodesChangedListener",required:!1,type:{name:"((nodes: Node<any>[]) => void)"}},onEdgesChangedListener:{defaultValue:null,description:"",name:"onEdgesChangedListener",required:!1,type:{name:"((edges: Edge<any>[]) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceGraph.tsx#ProvenanceGraph"]={docgenInfo:Gt.__docgenInfo,name:"ProvenanceGraph",path:"src/lib/containers/provenance/ProvenanceGraph.tsx#ProvenanceGraph"})}catch{}const YS={parameters:{storySource:{source:`import React from 'react'
import { ComponentStory, ComponentMeta } from '@storybook/react'

import { ProvenanceGraph } from './ProvenanceGraph'

// More on default export: https://storybook.js.org/docs/react/writing-stories/introduction#default-export
export default {
  title: 'Synapse/ProvenanceGraph',
  component: ProvenanceGraph,
  // More on argTypes: https://storybook.js.org/docs/react/api/argtypes
  argTypes: {},
} as ComponentMeta<typeof ProvenanceGraph>

// More on component templates: https://storybook.js.org/docs/react/writing-stories/introduction#using-args
const Template: ComponentStory<typeof ProvenanceGraph> = args => (
  <div className="bootstrap-4-backport">
    <ProvenanceGraph {...args} />
  </div>
)

export const TestProvenanceGraph = Template.bind({})
TestProvenanceGraph.args = {
  entityRefs: [
    {
      targetId: 'syn13363290',
      targetVersionNumber: 9,
    },
  ],
  containerHeight: '500px',
}

export const NoProvenanceGraph = Template.bind({})
NoProvenanceGraph.args = {
  entityRefs: [
    {
      targetId: 'syn8075918',
      targetVersionNumber: undefined,
    },
  ],
  containerHeight: '500px',
}

export const InvalidSynIDProvenanceGraph = Template.bind({})
InvalidSynIDProvenanceGraph.args = {
  entityRefs: [
    {
      targetId: 'synINVALID',
      targetVersionNumber: 1,
    },
  ],
  containerHeight: '500px',
}
`,locationsMap:{"test-provenance-graph":{startLoc:{col:57,line:15},endLoc:{col:1,line:19},startBody:{col:57,line:15},endBody:{col:1,line:19}},"no-provenance-graph":{startLoc:{col:57,line:15},endLoc:{col:1,line:19},startBody:{col:57,line:15},endBody:{col:1,line:19}},"invalid-syn-id-provenance-graph":{startLoc:{col:57,line:15},endLoc:{col:1,line:19},startBody:{col:57,line:15},endBody:{col:1,line:19}}}}},title:"Synapse/ProvenanceGraph",component:Gt,argTypes:{}},Di=e=>N("div",{className:"bootstrap-4-backport",children:N(Gt,{...e})}),TE=Di.bind({});TE.args={entityRefs:[{targetId:"syn13363290",targetVersionNumber:9}],containerHeight:"500px"};const $E=Di.bind({});$E.args={entityRefs:[{targetId:"syn8075918",targetVersionNumber:void 0}],containerHeight:"500px"};const AE=Di.bind({});AE.args={entityRefs:[{targetId:"synINVALID",targetVersionNumber:1}],containerHeight:"500px"};const qS=["TestProvenanceGraph","NoProvenanceGraph","InvalidSynIDProvenanceGraph"];export{AE as InvalidSynIDProvenanceGraph,$E as NoProvenanceGraph,TE as TestProvenanceGraph,qS as __namedExportsOrder,YS as default};
