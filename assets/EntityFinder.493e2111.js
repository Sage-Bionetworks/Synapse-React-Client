import{A as Bs,a as Bt}from"./iframe.e1b191de.js";import{W as co,ba as js,w as ht,bb as Ks,bc as Us,bd as Ys,be as Gs,bf as Xs,p as ho,I as Js,bg as fo,bh as po,bi as Qs,bj as Zs,b5 as mo,bk as el,b4 as go,bl as tl,bm as rl,bn as nl,x as il}from"./index.29a7f152.js";import{a as J,_ as we}from"./objectWithoutPropertiesLoose.090b3c10.js";import{b as j}from"./toConsumableArray.b3669986.js";import{P as f}from"./index.06f4a415.js";import{_ as ze,a as D}from"./withStyles.8be28b48.js";import{r as al}from"./react-sizeme.72bae47f.js";import{A as ol}from"./Arrow.c6e8b887.js";import{E as tt,g as Re,a as Qi,b as _o,c as sl,e as ll}from"./EntityTypeUtils.d9092623.js";import{S as yo}from"./sqlFunctions.b49ac766.js";import{P as ul,I as Mr}from"./IconSvg.3d20df6f.js";import{a as k,j as S,F as te}from"./jsx-runtime.2e925369.js";import{u as cl}from"./use-deep-compare-effect.esm.9d3fc03b.js";import{u as dl}from"./useGetEntityChildren.1512a1e6.js";import{D as Gn,S as Vr}from"./EntityChildren.50133102.js";import"./assert.f243583f.js";import{c as Ue}from"./index.f252d424.js";import{b as pe}from"./stateManager-845a3300.esm.2aae5abd.js";import{H as hl}from"./HelpPopover.ebe6769b.js";import{S as ci,B as fl}from"./LoadingScreen.56f18e4f.js";import{C as di}from"./Checkbox.60e96e17.js";import{u as it}from"./useEntityBundle.84032203.js";import{T as Zi}from"./Typography.bfdf676e.js";import{E as hi}from"./EntityIcon.8686c6e4.js";import{T as Ke,C as pl}from"./Tooltip.6c95fe7b.js";import{T as ml}from"./SynapseTableConstants.07ecdebd.js";import{S as ft}from"./Skeleton.8dd0668e.js";import{u as vo}from"./react-intersection-observer.m.66de6abb.js";import{u as gl,a as _l}from"./SchemaDrivenAnnotationEditor.d389ccdb.js";import{E as yl,a as vl}from"./EntityModal.83b671c2.js";import{W as wl}from"./WarningModal.db1d2b8d.js";import{i as Sl}from"./isEmpty.f18793ff.js";import{L as bl,C as Rl}from"./LockTwoTone.32ff1570.js";import{c as pn}from"./createSvgIcon.d78a924b.js";import{c as El}from"./cloneDeep.c7a1e17e.js";import{D as wr}from"./Dropdown.c29f5884.js";import{B as ea}from"./Button.c582ea4c.js";import{b as Tl}from"./toString.8ef640ae.js";import{h as Cl}from"./moment.53181859.js";import{S as Il}from"./Sort.9096f3c6.js";import{f as xl}from"./DateFormatter.71dd544f.js";import{E as wo}from"./EntityLink.3c3c3edb.js";import{U as Ol}from"./UserCard.97189984.js";import{u as zl}from"./useFavorites.275857e8.js";const Sr=window.React;var Nl=pn(Sr.createElement(Sr.Fragment,null,Sr.createElement("path",{d:"M4 18l2-2h14V4H4z",opacity:".3"}),Sr.createElement("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"})));const br=window.React;var Dl=pn(br.createElement(br.Fragment,null,br.createElement("path",{d:"M13 4H6v16h12V9h-5V4zm3 14H8v-2h8v2zm0-6v2H8v-2h8z",opacity:".3"}),br.createElement("path",{d:"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"})));const Al=window.React;var Ml=pn(Al.createElement("path",{d:"M14.39 11L16 12.61V11zM17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.27-.77 2.37-1.87 2.84l1.4 1.4C21.05 15.36 22 13.79 22 12c0-2.76-2.24-5-5-5zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4.01 1.41-1.41L3.41 2.86 2 4.27z"}));const $t=window.React;var Vl=pn($t.createElement($t.Fragment,null,$t.createElement("path",{d:"M11 4H4v7l9 9.01L20 13l-9-9zM6.5 8C5.67 8 5 7.33 5 6.5S5.67 5 6.5 5 8 5.67 8 6.5 7.33 8 6.5 8z",opacity:".3"}),$t.createElement("path",{d:"M12.41 2.58C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58s1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41s-.23-1.06-.59-1.42l-9-9zM13 20.01L4 11V4h7v-.01l9 9-7 7.02z"}),$t.createElement("circle",{cx:"6.5",cy:"6.5",r:"1.5"})));function Pl(t,e){const{accessToken:n}=ht();return co(["search",n,t],async i=>js({...t,start:i.pageParam},n),{...e,getNextPageParam:i=>i.start+i.hits.length===i.found?null:i.start+i.hits.length})}function So(t,e){const{accessToken:n}=ht();return co(["myProjects",n,t],async i=>await Ks(n,{...t,nextPageToken:i.pageParam}),{...e,getNextPageParam:i=>i.nextPageToken})}var cr="delete",G=5,Te=1<<G,ce=Te-1,F={};function Xn(){return{value:!1}}function Ce(t){t&&(t.value=!0)}function fi(){}function Et(t){return t.size===void 0&&(t.size=t.__iterate(bo)),t.size}function rt(t,e){if(typeof e!="number"){var n=e>>>0;if(""+n!==e||n===4294967295)return NaN;e=n}return e<0?Et(t)+e:e}function bo(){return!0}function mn(t,e,n){return(t===0&&!Eo(t)||n!==void 0&&t<=-n)&&(e===void 0||n!==void 0&&e>=n)}function dr(t,e){return Ro(t,e,0)}function gn(t,e){return Ro(t,e,e)}function Ro(t,e,n){return t===void 0?n:Eo(t)?e===1/0?e:Math.max(0,e+t)|0:e===void 0||e===t?t:Math.min(e,t)|0}function Eo(t){return t<0||t===0&&1/t===-1/0}var To="@@__IMMUTABLE_ITERABLE__@@";function ge(t){return Boolean(t&&t[To])}var Co="@@__IMMUTABLE_KEYED__@@";function Z(t){return Boolean(t&&t[Co])}var Io="@@__IMMUTABLE_INDEXED__@@";function me(t){return Boolean(t&&t[Io])}function _n(t){return Z(t)||me(t)}var re=function(e){return ge(e)?e:be(e)},Ne=function(t){function e(n){return Z(n)?n:at(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(re),pt=function(t){function e(n){return me(n)?n:He(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(re),Dt=function(t){function e(n){return ge(n)&&!_n(n)?n:Pt(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(re);re.Keyed=Ne;re.Indexed=pt;re.Set=Dt;var xo="@@__IMMUTABLE_SEQ__@@";function pi(t){return Boolean(t&&t[xo])}var Oo="@@__IMMUTABLE_RECORD__@@";function At(t){return Boolean(t&&t[Oo])}function Be(t){return ge(t)||At(t)}var Mt="@@__IMMUTABLE_ORDERED__@@";function Ve(t){return Boolean(t&&t[Mt])}var hr=0,Pe=1,Oe=2,Jn=typeof Symbol=="function"&&Symbol.iterator,zo="@@iterator",yn=Jn||zo,B=function(e){this.next=e};B.prototype.toString=function(){return"[Iterator]"};B.KEYS=hr;B.VALUES=Pe;B.ENTRIES=Oe;B.prototype.inspect=B.prototype.toSource=function(){return this.toString()};B.prototype[yn]=function(){return this};function Q(t,e,n,i){var r=t===0?e:t===1?n:[e,n];return i?i.value=r:i={value:r,done:!1},i}function _e(){return{value:void 0,done:!0}}function No(t){return Array.isArray(t)?!0:!!vn(t)}function ta(t){return t&&typeof t.next=="function"}function Qn(t){var e=vn(t);return e&&e.call(t)}function vn(t){var e=t&&(Jn&&t[Jn]||t[zo]);if(typeof e=="function")return e}function Hl(t){var e=vn(t);return e&&e===t.entries}function Ll(t){var e=vn(t);return e&&e===t.keys}var Vt=Object.prototype.hasOwnProperty;function Do(t){return Array.isArray(t)||typeof t=="string"?!0:t&&typeof t=="object"&&Number.isInteger(t.length)&&t.length>=0&&(t.length===0?Object.keys(t).length===1:t.hasOwnProperty(t.length-1))}var be=function(t){function e(n){return n==null?gi():Be(n)?n.toSeq():kl(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(i,r){var a=this._cache;if(a){for(var o=a.length,s=0;s!==o;){var l=a[r?o-++s:s++];if(i(l[1],l[0],this)===!1)break}return s}return this.__iterateUncached(i,r)},e.prototype.__iterator=function(i,r){var a=this._cache;if(a){var o=a.length,s=0;return new B(function(){if(s===o)return _e();var l=a[r?o-++s:s++];return Q(i,l[0],l[1])})}return this.__iteratorUncached(i,r)},e}(re),at=function(t){function e(n){return n==null?gi().toKeyedSeq():ge(n)?Z(n)?n.toSeq():n.fromEntrySeq():At(n)?n.toSeq():_i(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(be),He=function(t){function e(n){return n==null?gi():ge(n)?Z(n)?n.entrySeq():n.toIndexedSeq():At(n)?n.toSeq().entrySeq():Ao(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(be),Pt=function(t){function e(n){return(ge(n)&&!_n(n)?n:He(n)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(be);be.isSeq=pi;be.Keyed=at;be.Set=Pt;be.Indexed=He;be.prototype[xo]=!0;var dt=function(t){function e(n){this._array=n,this.size=n.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(i,r){return this.has(i)?this._array[rt(this,i)]:r},e.prototype.__iterate=function(i,r){for(var a=this._array,o=a.length,s=0;s!==o;){var l=r?o-++s:s++;if(i(a[l],l,this)===!1)break}return s},e.prototype.__iterator=function(i,r){var a=this._array,o=a.length,s=0;return new B(function(){if(s===o)return _e();var l=r?o-++s:s++;return Q(i,l,a[l])})},e}(He),mi=function(t){function e(n){var i=Object.keys(n).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n):[]);this._object=n,this._keys=i,this.size=i.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(i,r){return r!==void 0&&!this.has(i)?r:this._object[i]},e.prototype.has=function(i){return Vt.call(this._object,i)},e.prototype.__iterate=function(i,r){for(var a=this._object,o=this._keys,s=o.length,l=0;l!==s;){var u=o[r?s-++l:l++];if(i(a[u],u,this)===!1)break}return l},e.prototype.__iterator=function(i,r){var a=this._object,o=this._keys,s=o.length,l=0;return new B(function(){if(l===s)return _e();var u=o[r?s-++l:l++];return Q(i,u,a[u])})},e}(at);mi.prototype[Mt]=!0;var ql=function(t){function e(n){this._collection=n,this.size=n.length||n.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(i,r){if(r)return this.cacheResult().__iterate(i,r);var a=this._collection,o=Qn(a),s=0;if(ta(o))for(var l;!(l=o.next()).done&&i(l.value,s++,this)!==!1;);return s},e.prototype.__iteratorUncached=function(i,r){if(r)return this.cacheResult().__iterator(i,r);var a=this._collection,o=Qn(a);if(!ta(o))return new B(_e);var s=0;return new B(function(){var l=o.next();return l.done?l:Q(i,s++,l.value)})},e}(He),ra;function gi(){return ra||(ra=new dt([]))}function _i(t){var e=yi(t);if(e)return e.fromEntrySeq();if(typeof t=="object")return new mi(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function Ao(t){var e=yi(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function kl(t){var e=yi(t);if(e)return Hl(t)?e.fromEntrySeq():Ll(t)?e.toSetSeq():e;if(typeof t=="object")return new mi(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}function yi(t){return Do(t)?new dt(t):No(t)?new ql(t):void 0}var Mo="@@__IMMUTABLE_MAP__@@";function vi(t){return Boolean(t&&t[Mo])}function Vo(t){return vi(t)&&Ve(t)}function na(t){return Boolean(t&&typeof t.equals=="function"&&typeof t.hashCode=="function")}function Se(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if(typeof t.valueOf=="function"&&typeof e.valueOf=="function"){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!!(na(t)&&na(e)&&t.equals(e))}var Wt=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(e,n){e|=0,n|=0;var i=e&65535,r=n&65535;return i*r+((e>>>16)*r+i*(n>>>16)<<16>>>0)|0};function wn(t){return t>>>1&1073741824|t&3221225471}var Fl=Object.prototype.valueOf;function ve(t){if(t==null)return ia(t);if(typeof t.hashCode=="function")return wn(t.hashCode(t));var e=Ul(t);if(e==null)return ia(e);switch(typeof e){case"boolean":return e?1108378657:1108378656;case"number":return $l(e);case"string":return e.length>Yl?Wl(e):Zn(e);case"object":case"function":return jl(e);case"symbol":return Bl(e);default:if(typeof e.toString=="function")return Zn(e.toString());throw new Error("Value type "+typeof e+" cannot be hashed.")}}function ia(t){return t===null?1108378658:1108378659}function $l(t){if(t!==t||t===1/0)return 0;var e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)t/=4294967295,e^=t;return wn(e)}function Wl(t){var e=xn[t];return e===void 0&&(e=Zn(t),In===Gl&&(In=0,xn={}),In++,xn[t]=e),e}function Zn(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return wn(e)}function Bl(t){var e=sa[t];return e!==void 0||(e=Po(),sa[t]=e),e}function jl(t){var e;if(ei&&(e=ti.get(t),e!==void 0)||(e=t[lt],e!==void 0)||!oa&&(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[lt],e!==void 0||(e=Kl(t),e!==void 0)))return e;if(e=Po(),ei)ti.set(t,e);else{if(aa!==void 0&&aa(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(oa)Object.defineProperty(t,lt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[lt]=e;else if(t.nodeType!==void 0)t[lt]=e;else throw new Error("Unable to set a non-enumerable property on object.")}return e}var aa=Object.isExtensible,oa=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function Kl(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function Ul(t){return t.valueOf!==Fl&&typeof t.valueOf=="function"?t.valueOf(t):t}function Po(){var t=++Cn;return Cn&1073741824&&(Cn=0),t}var ei=typeof WeakMap=="function",ti;ei&&(ti=new WeakMap);var sa=Object.create(null),Cn=0,lt="__immutablehash__";typeof Symbol=="function"&&(lt=Symbol(lt));var Yl=16,Gl=255,In=0,xn={},Sn=function(t){function e(n,i){this._iter=n,this._useKeys=i,this.size=n.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(i,r){return this._iter.get(i,r)},e.prototype.has=function(i){return this._iter.has(i)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var i=this,r=wi(this,!0);return this._useKeys||(r.valueSeq=function(){return i._iter.toSeq().reverse()}),r},e.prototype.map=function(i,r){var a=this,o=Fo(this,i,r);return this._useKeys||(o.valueSeq=function(){return a._iter.toSeq().map(i,r)}),o},e.prototype.__iterate=function(i,r){var a=this;return this._iter.__iterate(function(o,s){return i(o,s,a)},r)},e.prototype.__iterator=function(i,r){return this._iter.__iterator(i,r)},e}(at);Sn.prototype[Mt]=!0;var Ho=function(t){function e(n){this._iter=n,this.size=n.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(i){return this._iter.includes(i)},e.prototype.__iterate=function(i,r){var a=this,o=0;return r&&Et(this),this._iter.__iterate(function(s){return i(s,r?a.size-++o:o++,a)},r)},e.prototype.__iterator=function(i,r){var a=this,o=this._iter.__iterator(Pe,r),s=0;return r&&Et(this),new B(function(){var l=o.next();return l.done?l:Q(i,r?a.size-++s:s++,l.value,l)})},e}(He),Lo=function(t){function e(n){this._iter=n,this.size=n.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(i){return this._iter.includes(i)},e.prototype.__iterate=function(i,r){var a=this;return this._iter.__iterate(function(o){return i(o,o,a)},r)},e.prototype.__iterator=function(i,r){var a=this._iter.__iterator(Pe,r);return new B(function(){var o=a.next();return o.done?o:Q(i,o.value,o.value,o)})},e}(Pt),qo=function(t){function e(n){this._iter=n,this.size=n.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(i,r){var a=this;return this._iter.__iterate(function(o){if(o){ua(o);var s=ge(o);return i(s?o.get(1):o[1],s?o.get(0):o[0],a)}},r)},e.prototype.__iterator=function(i,r){var a=this._iter.__iterator(Pe,r);return new B(function(){for(;;){var o=a.next();if(o.done)return o;var s=o.value;if(s){ua(s);var l=ge(s);return Q(i,l?s.get(0):s[0],l?s.get(1):s[1],o)}}})},e}(at);Ho.prototype.cacheResult=Sn.prototype.cacheResult=Lo.prototype.cacheResult=qo.prototype.cacheResult=bi;function ko(t){var e=je(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var n=t.reverse.apply(this);return n.flip=function(){return t.reverse()},n},e.has=function(n){return t.includes(n)},e.includes=function(n){return t.has(n)},e.cacheResult=bi,e.__iterateUncached=function(n,i){var r=this;return t.__iterate(function(a,o){return n(o,a,r)!==!1},i)},e.__iteratorUncached=function(n,i){if(n===Oe){var r=t.__iterator(n,i);return new B(function(){var a=r.next();if(!a.done){var o=a.value[0];a.value[0]=a.value[1],a.value[1]=o}return a})}return t.__iterator(n===Pe?hr:Pe,i)},e}function Fo(t,e,n){var i=je(t);return i.size=t.size,i.has=function(r){return t.has(r)},i.get=function(r,a){var o=t.get(r,F);return o===F?a:e.call(n,o,r,t)},i.__iterateUncached=function(r,a){var o=this;return t.__iterate(function(s,l,u){return r(e.call(n,s,l,u),l,o)!==!1},a)},i.__iteratorUncached=function(r,a){var o=t.__iterator(Oe,a);return new B(function(){var s=o.next();if(s.done)return s;var l=s.value,u=l[0];return Q(r,u,e.call(n,l[1],u,t),s)})},i}function wi(t,e){var n=this,i=je(t);return i._iter=t,i.size=t.size,i.reverse=function(){return t},t.flip&&(i.flip=function(){var r=ko(t);return r.reverse=function(){return t.flip()},r}),i.get=function(r,a){return t.get(e?r:-1-r,a)},i.has=function(r){return t.has(e?r:-1-r)},i.includes=function(r){return t.includes(r)},i.cacheResult=bi,i.__iterate=function(r,a){var o=this,s=0;return a&&Et(t),t.__iterate(function(l,u){return r(l,e?u:a?o.size-++s:s++,o)},!a)},i.__iterator=function(r,a){var o=0;a&&Et(t);var s=t.__iterator(Oe,!a);return new B(function(){var l=s.next();if(l.done)return l;var u=l.value;return Q(r,e?u[0]:a?n.size-++o:o++,u[1],l)})},i}function $o(t,e,n,i){var r=je(t);return i&&(r.has=function(a){var o=t.get(a,F);return o!==F&&!!e.call(n,o,a,t)},r.get=function(a,o){var s=t.get(a,F);return s!==F&&e.call(n,s,a,t)?s:o}),r.__iterateUncached=function(a,o){var s=this,l=0;return t.__iterate(function(u,c,d){if(e.call(n,u,c,d))return l++,a(u,i?c:l-1,s)},o),l},r.__iteratorUncached=function(a,o){var s=t.__iterator(Oe,o),l=0;return new B(function(){for(;;){var u=s.next();if(u.done)return u;var c=u.value,d=c[0],p=c[1];if(e.call(n,p,d,t))return Q(a,i?d:l++,p,u)}})},r}function Xl(t,e,n){var i=mt().asMutable();return t.__iterate(function(r,a){i.update(e.call(n,r,a,t),0,function(o){return o+1})}),i.asImmutable()}function Jl(t,e,n){var i=Z(t),r=(Ve(t)?Je():mt()).asMutable();t.__iterate(function(o,s){r.update(e.call(n,o,s,t),function(l){return l=l||[],l.push(i?[s,o]:o),l})});var a=jo(t);return r.map(function(o){return U(t,a(o))}).asImmutable()}function Si(t,e,n,i){var r=t.size;if(mn(e,n,r))return t;var a=dr(e,r),o=gn(n,r);if(a!==a||o!==o)return Si(t.toSeq().cacheResult(),e,n,i);var s=o-a,l;s===s&&(l=s<0?0:s);var u=je(t);return u.size=l===0?l:t.size&&l||void 0,!i&&pi(t)&&l>=0&&(u.get=function(c,d){return c=rt(this,c),c>=0&&c<l?t.get(c+a,d):d}),u.__iterateUncached=function(c,d){var p=this;if(l===0)return 0;if(d)return this.cacheResult().__iterate(c,d);var g=0,_=!0,h=0;return t.__iterate(function(v,y){if(!(_&&(_=g++<a)))return h++,c(v,i?y:h-1,p)!==!1&&h!==l}),h},u.__iteratorUncached=function(c,d){if(l!==0&&d)return this.cacheResult().__iterator(c,d);if(l===0)return new B(_e);var p=t.__iterator(c,d),g=0,_=0;return new B(function(){for(;g++<a;)p.next();if(++_>l)return _e();var h=p.next();return i||c===Pe||h.done?h:c===hr?Q(c,_-1,void 0,h):Q(c,_-1,h.value[1],h)})},u}function Ql(t,e,n){var i=je(t);return i.__iterateUncached=function(r,a){var o=this;if(a)return this.cacheResult().__iterate(r,a);var s=0;return t.__iterate(function(l,u,c){return e.call(n,l,u,c)&&++s&&r(l,u,o)}),s},i.__iteratorUncached=function(r,a){var o=this;if(a)return this.cacheResult().__iterator(r,a);var s=t.__iterator(Oe,a),l=!0;return new B(function(){if(!l)return _e();var u=s.next();if(u.done)return u;var c=u.value,d=c[0],p=c[1];return e.call(n,p,d,o)?r===Oe?u:Q(r,d,p,u):(l=!1,_e())})},i}function Wo(t,e,n,i){var r=je(t);return r.__iterateUncached=function(a,o){var s=this;if(o)return this.cacheResult().__iterate(a,o);var l=!0,u=0;return t.__iterate(function(c,d,p){if(!(l&&(l=e.call(n,c,d,p))))return u++,a(c,i?d:u-1,s)}),u},r.__iteratorUncached=function(a,o){var s=this;if(o)return this.cacheResult().__iterator(a,o);var l=t.__iterator(Oe,o),u=!0,c=0;return new B(function(){var d,p,g;do{if(d=l.next(),d.done)return i||a===Pe?d:a===hr?Q(a,c++,void 0,d):Q(a,c++,d.value[1],d);var _=d.value;p=_[0],g=_[1],u&&(u=e.call(n,g,p,s))}while(u);return a===Oe?d:Q(a,p,g,d)})},r}function Zl(t,e){var n=Z(t),i=[t].concat(e).map(function(o){return ge(o)?n&&(o=Ne(o)):o=n?_i(o):Ao(Array.isArray(o)?o:[o]),o}).filter(function(o){return o.size!==0});if(i.length===0)return t;if(i.length===1){var r=i[0];if(r===t||n&&Z(r)||me(t)&&me(r))return r}var a=new dt(i);return n?a=a.toKeyedSeq():me(t)||(a=a.toSetSeq()),a=a.flatten(!0),a.size=i.reduce(function(o,s){if(o!==void 0){var l=s.size;if(l!==void 0)return o+l}},0),a}function Bo(t,e,n){var i=je(t);return i.__iterateUncached=function(r,a){if(a)return this.cacheResult().__iterate(r,a);var o=0,s=!1;function l(u,c){u.__iterate(function(d,p){return(!e||c<e)&&ge(d)?l(d,c+1):(o++,r(d,n?p:o-1,i)===!1&&(s=!0)),!s},a)}return l(t,0),o},i.__iteratorUncached=function(r,a){if(a)return this.cacheResult().__iterator(r,a);var o=t.__iterator(r,a),s=[],l=0;return new B(function(){for(;o;){var u=o.next();if(u.done!==!1){o=s.pop();continue}var c=u.value;if(r===Oe&&(c=c[1]),(!e||s.length<e)&&ge(c))s.push(o),o=c.__iterator(r,a);else return n?u:Q(r,l++,c,u)}return _e()})},i}function eu(t,e,n){var i=jo(t);return t.toSeq().map(function(r,a){return i(e.call(n,r,a,t))}).flatten(!0)}function tu(t,e){var n=je(t);return n.size=t.size&&t.size*2-1,n.__iterateUncached=function(i,r){var a=this,o=0;return t.__iterate(function(s){return(!o||i(e,o++,a)!==!1)&&i(s,o++,a)!==!1},r),o},n.__iteratorUncached=function(i,r){var a=t.__iterator(Pe,r),o=0,s;return new B(function(){return(!s||o%2)&&(s=a.next(),s.done)?s:o%2?Q(i,o++,e):Q(i,o++,s.value,s)})},n}function Tt(t,e,n){e||(e=Ko);var i=Z(t),r=0,a=t.toSeq().map(function(o,s){return[s,o,r++,n?n(o,s,t):o]}).valueSeq().toArray();return a.sort(function(o,s){return e(o[3],s[3])||o[2]-s[2]}).forEach(i?function(o,s){a[s].length=2}:function(o,s){a[s]=o[1]}),i?at(a):me(t)?He(a):Pt(a)}function Rr(t,e,n){if(e||(e=Ko),n){var i=t.toSeq().map(function(r,a){return[r,n(r,a,t)]}).reduce(function(r,a){return la(e,r[1],a[1])?a:r});return i&&i[0]}return t.reduce(function(r,a){return la(e,r,a)?a:r})}function la(t,e,n){var i=t(n,e);return i===0&&n!==e&&(n==null||n!==n)||i>0}function Er(t,e,n,i){var r=je(t),a=new dt(n).map(function(o){return o.size});return r.size=i?a.max():a.min(),r.__iterate=function(o,s){for(var l=this.__iterator(Pe,s),u,c=0;!(u=l.next()).done&&o(u.value,c++,this)!==!1;);return c},r.__iteratorUncached=function(o,s){var l=n.map(function(d){return d=re(d),Qn(s?d.reverse():d)}),u=0,c=!1;return new B(function(){var d;return c||(d=l.map(function(p){return p.next()}),c=i?d.every(function(p){return p.done}):d.some(function(p){return p.done})),c?_e():Q(o,u++,e.apply(null,d.map(function(p){return p.value})))})},r}function U(t,e){return t===e?t:pi(t)?e:t.constructor(e)}function ua(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function jo(t){return Z(t)?Ne:me(t)?pt:Dt}function je(t){return Object.create((Z(t)?at:me(t)?He:Pt).prototype)}function bi(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):be.prototype.cacheResult.call(this)}function Ko(t,e){return t===void 0&&e===void 0?0:t===void 0?1:e===void 0?-1:t>e?1:t<e?-1:0}function ke(t,e){e=e||0;for(var n=Math.max(0,t.length-e),i=new Array(n),r=0;r<n;r++)i[r]=t[r+e];return i}function Ri(t,e){if(!t)throw new Error(e)}function Ie(t){Ri(t!==1/0,"Cannot perform this action with an infinite size.")}function Uo(t){if(Do(t)&&typeof t!="string")return t;if(Ve(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}var ru=Object.prototype.toString;function nu(t){if(!t||typeof t!="object"||ru.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e,i=Object.getPrototypeOf(e);i!==null;)n=i,i=Object.getPrototypeOf(n);return n===e}function nt(t){return typeof t=="object"&&(Be(t)||Array.isArray(t)||nu(t))}function nr(t){try{return typeof t=="string"?JSON.stringify(t):String(t)}catch{return JSON.stringify(t)}}function iu(t,e){return Be(t)?t.has(e):nt(t)&&Vt.call(t,e)}function Yo(t,e,n){return Be(t)?t.get(e,n):iu(t,e)?typeof t.get=="function"?t.get(e):t[e]:n}function on(t){if(Array.isArray(t))return ke(t);var e={};for(var n in t)Vt.call(t,n)&&(e[n]=t[n]);return e}function au(t,e){if(!nt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(Be(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!Vt.call(t,e))return t;var n=on(t);return Array.isArray(n)?n.splice(e,1):delete n[e],n}function ou(t,e,n){if(!nt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(Be(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,n)}if(Vt.call(t,e)&&n===t[e])return t;var i=on(t);return i[e]=n,i}function Ht(t,e,n,i){i||(i=n,n=void 0);var r=Go(Be(t),t,Uo(e),0,n,i);return r===F?n:r}function Go(t,e,n,i,r,a){var o=e===F;if(i===n.length){var s=o?r:e,l=a(s);return l===s?e:l}if(!o&&!nt(e))throw new TypeError("Cannot update within non-data-structure value in path ["+n.slice(0,i).map(nr)+"]: "+e);var u=n[i],c=o?F:Yo(e,u,F),d=Go(c===F?t:Be(c),c,n,i+1,r,a);return d===c?e:d===F?au(e,u):ou(o?t?Me():{}:e,u,d)}function su(t,e,n){return Ht(t,e,F,function(){return n})}function Ei(t,e){return su(this,t,e)}function lu(t,e){return Ht(t,e,function(){return F})}function Ti(t){return lu(this,t)}function Xo(t,e,n,i){return Ht(t,[e],n,i)}function Ci(t,e,n){return arguments.length===1?t(this):Xo(this,t,e,n)}function Ii(t,e,n){return Ht(this,t,e,n)}function Jo(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Zo(this,t)}function Qo(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(typeof t!="function")throw new TypeError("Invalid merger function: "+t);return Zo(this,e,t)}function Zo(t,e,n){for(var i=[],r=0;r<e.length;r++){var a=Ne(e[r]);a.size!==0&&i.push(a)}return i.length===0?t:t.toSeq().size===0&&!t.__ownerID&&i.length===1?t.constructor(i[0]):t.withMutations(function(o){for(var s=n?function(u,c){Xo(o,c,F,function(d){return d===F?u:n(d,u,c)})}:function(u,c){o.set(c,u)},l=0;l<i.length;l++)i[l].forEach(s)})}function xi(t,e,n){return Oi(t,e,uu(n))}function Oi(t,e,n){if(!nt(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(Be(t))return typeof n=="function"&&t.mergeWith?t.mergeWith.apply(t,[n].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var i=Array.isArray(t),r=t,a=i?pt:Ne,o=i?function(l){r===t&&(r=on(r)),r.push(l)}:function(l,u){var c=Vt.call(r,u),d=c&&n?n(r[u],l,u):l;(!c||d!==r[u])&&(r===t&&(r=on(r)),r[u]=d)},s=0;s<e.length;s++)a(e[s]).forEach(o);return r}function uu(t){function e(n,i,r){return nt(n)&&nt(i)&&cu(n,i)?Oi(n,[i],e):t?t(n,i,r):i}return e}function cu(t,e){var n=be(t),i=be(e);return me(n)===me(i)&&Z(n)===Z(i)}function es(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return xi(this,t)}function ts(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return xi(this,e,t)}function zi(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return Ht(this,t,Me(),function(i){return Oi(i,e)})}function Ni(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return Ht(this,t,Me(),function(i){return xi(i,e)})}function fr(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function pr(){return this.__ownerID?this:this.__ensureOwner(new fi)}function mr(){return this.__ensureOwner()}function Di(){return this.__altered}var mt=function(t){function e(n){return n==null?Me():vi(n)&&!Ve(n)?n:Me().withMutations(function(i){var r=t(n);Ie(r.size),r.forEach(function(a,o){return i.set(o,a)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];return Me().withMutations(function(a){for(var o=0;o<i.length;o+=2){if(o+1>=i.length)throw new Error("Missing value for key: "+i[o]);a.set(i[o],i[o+1])}})},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(i,r){return this._root?this._root.get(0,void 0,i,r):r},e.prototype.set=function(i,r){return ha(this,i,r)},e.prototype.remove=function(i){return ha(this,i,F)},e.prototype.deleteAll=function(i){var r=re(i);return r.size===0?this:this.withMutations(function(a){r.forEach(function(o){return a.remove(o)})})},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Me()},e.prototype.sort=function(i){return Je(Tt(this,i))},e.prototype.sortBy=function(i,r){return Je(Tt(this,r,i))},e.prototype.map=function(i,r){var a=this;return this.withMutations(function(o){o.forEach(function(s,l){o.set(l,i.call(r,s,l,a))})})},e.prototype.__iterator=function(i,r){return new du(this,i,r)},e.prototype.__iterate=function(i,r){var a=this,o=0;return this._root&&this._root.iterate(function(s){return o++,i(s[1],s[0],a)},r),o},e.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?Ai(this.size,this._root,i,this.__hash):this.size===0?Me():(this.__ownerID=i,this.__altered=!1,this)},e}(Ne);mt.isMap=vi;var X=mt.prototype;X[Mo]=!0;X[cr]=X.remove;X.removeAll=X.deleteAll;X.setIn=Ei;X.removeIn=X.deleteIn=Ti;X.update=Ci;X.updateIn=Ii;X.merge=X.concat=Jo;X.mergeWith=Qo;X.mergeDeep=es;X.mergeDeepWith=ts;X.mergeIn=zi;X.mergeDeepIn=Ni;X.withMutations=fr;X.wasAltered=Di;X.asImmutable=mr;X["@@transducer/init"]=X.asMutable=pr;X["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])};X["@@transducer/result"]=function(t){return t.asImmutable()};var ir=function(e,n){this.ownerID=e,this.entries=n};ir.prototype.get=function(e,n,i,r){for(var a=this.entries,o=0,s=a.length;o<s;o++)if(Se(i,a[o][0]))return a[o][1];return r};ir.prototype.update=function(e,n,i,r,a,o,s){for(var l=a===F,u=this.entries,c=0,d=u.length;c<d&&!Se(r,u[c][0]);c++);var p=c<d;if(p?u[c][1]===a:l)return this;if(Ce(s),(l||!p)&&Ce(o),!(l&&u.length===1)){if(!p&&!l&&u.length>=_u)return hu(e,u,r,a);var g=e&&e===this.ownerID,_=g?u:ke(u);return p?l?c===d-1?_.pop():_[c]=_.pop():_[c]=[r,a]:_.push([r,a]),g?(this.entries=_,this):new ir(e,_)}};var Ct=function(e,n,i){this.ownerID=e,this.bitmap=n,this.nodes=i};Ct.prototype.get=function(e,n,i,r){n===void 0&&(n=ve(i));var a=1<<((e===0?n:n>>>e)&ce),o=this.bitmap;return(o&a)===0?r:this.nodes[rs(o&a-1)].get(e+G,n,i,r)};Ct.prototype.update=function(e,n,i,r,a,o,s){i===void 0&&(i=ve(r));var l=(n===0?i:i>>>n)&ce,u=1<<l,c=this.bitmap,d=(c&u)!==0;if(!d&&a===F)return this;var p=rs(c&u-1),g=this.nodes,_=d?g[p]:void 0,h=Mi(_,e,n+G,i,r,a,o,s);if(h===_)return this;if(!d&&h&&g.length>=yu)return pu(e,g,c,l,h);if(d&&!h&&g.length===2&&fa(g[p^1]))return g[p^1];if(d&&h&&g.length===1&&fa(h))return h;var v=e&&e===this.ownerID,y=d?h?c:c^u:c|u,T=d?h?ns(g,p,h,v):gu(g,p,v):mu(g,p,h,v);return v?(this.bitmap=y,this.nodes=T,this):new Ct(e,y,T)};var ar=function(e,n,i){this.ownerID=e,this.count=n,this.nodes=i};ar.prototype.get=function(e,n,i,r){n===void 0&&(n=ve(i));var a=(e===0?n:n>>>e)&ce,o=this.nodes[a];return o?o.get(e+G,n,i,r):r};ar.prototype.update=function(e,n,i,r,a,o,s){i===void 0&&(i=ve(r));var l=(n===0?i:i>>>n)&ce,u=a===F,c=this.nodes,d=c[l];if(u&&!d)return this;var p=Mi(d,e,n+G,i,r,a,o,s);if(p===d)return this;var g=this.count;if(!d)g++;else if(!p&&(g--,g<vu))return fu(e,c,g,l);var _=e&&e===this.ownerID,h=ns(c,l,p,_);return _?(this.count=g,this.nodes=h,this):new ar(e,g,h)};var It=function(e,n,i){this.ownerID=e,this.keyHash=n,this.entries=i};It.prototype.get=function(e,n,i,r){for(var a=this.entries,o=0,s=a.length;o<s;o++)if(Se(i,a[o][0]))return a[o][1];return r};It.prototype.update=function(e,n,i,r,a,o,s){i===void 0&&(i=ve(r));var l=a===F;if(i!==this.keyHash)return l?this:(Ce(s),Ce(o),Vi(this,e,n,i,[r,a]));for(var u=this.entries,c=0,d=u.length;c<d&&!Se(r,u[c][0]);c++);var p=c<d;if(p?u[c][1]===a:l)return this;if(Ce(s),(l||!p)&&Ce(o),l&&d===2)return new Xe(e,this.keyHash,u[c^1]);var g=e&&e===this.ownerID,_=g?u:ke(u);return p?l?c===d-1?_.pop():_[c]=_.pop():_[c]=[r,a]:_.push([r,a]),g?(this.entries=_,this):new It(e,this.keyHash,_)};var Xe=function(e,n,i){this.ownerID=e,this.keyHash=n,this.entry=i};Xe.prototype.get=function(e,n,i,r){return Se(i,this.entry[0])?this.entry[1]:r};Xe.prototype.update=function(e,n,i,r,a,o,s){var l=a===F,u=Se(r,this.entry[0]);if(u?a===this.entry[1]:l)return this;if(Ce(s),l){Ce(o);return}return u?e&&e===this.ownerID?(this.entry[1]=a,this):new Xe(e,this.keyHash,[r,a]):(Ce(o),Vi(this,e,n,ve(r),[r,a]))};ir.prototype.iterate=It.prototype.iterate=function(t,e){for(var n=this.entries,i=0,r=n.length-1;i<=r;i++)if(t(n[e?r-i:i])===!1)return!1};Ct.prototype.iterate=ar.prototype.iterate=function(t,e){for(var n=this.nodes,i=0,r=n.length-1;i<=r;i++){var a=n[e?r-i:i];if(a&&a.iterate(t,e)===!1)return!1}};Xe.prototype.iterate=function(t,e){return t(this.entry)};var du=function(t){function e(n,i,r){this._type=i,this._reverse=r,this._stack=n._root&&ca(n._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var i=this._type,r=this._stack;r;){var a=r.node,o=r.index++,s=void 0;if(a.entry){if(o===0)return On(i,a.entry)}else if(a.entries){if(s=a.entries.length-1,o<=s)return On(i,a.entries[this._reverse?s-o:o])}else if(s=a.nodes.length-1,o<=s){var l=a.nodes[this._reverse?s-o:o];if(l){if(l.entry)return On(i,l.entry);r=this._stack=ca(l,r)}continue}r=this._stack=this._stack.__prev}return _e()},e}(B);function On(t,e){return Q(t,e[0],e[1])}function ca(t,e){return{node:t,index:0,__prev:e}}function Ai(t,e,n,i){var r=Object.create(X);return r.size=t,r._root=e,r.__ownerID=n,r.__hash=i,r.__altered=!1,r}var da;function Me(){return da||(da=Ai(0))}function ha(t,e,n){var i,r;if(t._root){var a=Xn(),o=Xn();if(i=Mi(t._root,t.__ownerID,0,void 0,e,n,a,o),!o.value)return t;r=t.size+(a.value?n===F?-1:1:0)}else{if(n===F)return t;r=1,i=new ir(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=r,t._root=i,t.__hash=void 0,t.__altered=!0,t):i?Ai(r,i):Me()}function Mi(t,e,n,i,r,a,o,s){return t?t.update(e,n,i,r,a,o,s):a===F?t:(Ce(s),Ce(o),new Xe(e,i,[r,a]))}function fa(t){return t.constructor===Xe||t.constructor===It}function Vi(t,e,n,i,r){if(t.keyHash===i)return new It(e,i,[t.entry,r]);var a=(n===0?t.keyHash:t.keyHash>>>n)&ce,o=(n===0?i:i>>>n)&ce,s,l=a===o?[Vi(t,e,n+G,i,r)]:(s=new Xe(e,i,r),a<o?[t,s]:[s,t]);return new Ct(e,1<<a|1<<o,l)}function hu(t,e,n,i){t||(t=new fi);for(var r=new Xe(t,ve(n),[n,i]),a=0;a<e.length;a++){var o=e[a];r=r.update(t,0,void 0,o[0],o[1])}return r}function fu(t,e,n,i){for(var r=0,a=0,o=new Array(n),s=0,l=1,u=e.length;s<u;s++,l<<=1){var c=e[s];c!==void 0&&s!==i&&(r|=l,o[a++]=c)}return new Ct(t,r,o)}function pu(t,e,n,i,r){for(var a=0,o=new Array(Te),s=0;n!==0;s++,n>>>=1)o[s]=n&1?e[a++]:void 0;return o[i]=r,new ar(t,a+1,o)}function rs(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function ns(t,e,n,i){var r=i?t:ke(t);return r[e]=n,r}function mu(t,e,n,i){var r=t.length+1;if(i&&e+1===r)return t[e]=n,t;for(var a=new Array(r),o=0,s=0;s<r;s++)s===e?(a[s]=n,o=-1):a[s]=t[s+o];return a}function gu(t,e,n){var i=t.length-1;if(n&&e===i)return t.pop(),t;for(var r=new Array(i),a=0,o=0;o<i;o++)o===e&&(a=1),r[o]=t[o+a];return r}var _u=Te/4,yu=Te/2,vu=Te/4,is="@@__IMMUTABLE_LIST__@@";function as(t){return Boolean(t&&t[is])}var bn=function(t){function e(n){var i=Pr();if(n==null)return i;if(as(n))return n;var r=t(n),a=r.size;return a===0?i:(Ie(a),a>0&&a<Te?or(0,a,G,null,new et(r.toArray())):i.withMutations(function(o){o.setSize(a),r.forEach(function(s,l){return o.set(l,s)})}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(i,r){if(i=rt(this,i),i>=0&&i<this.size){i+=this._origin;var a=os(this,i);return a&&a.array[i&ce]}return r},e.prototype.set=function(i,r){return wu(this,i,r)},e.prototype.remove=function(i){return this.has(i)?i===0?this.shift():i===this.size-1?this.pop():this.splice(i,1):this},e.prototype.insert=function(i,r){return this.splice(i,0,r)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=G,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):Pr()},e.prototype.push=function(){var i=arguments,r=this.size;return this.withMutations(function(a){Ze(a,0,r+i.length);for(var o=0;o<i.length;o++)a.set(r+o,i[o])})},e.prototype.pop=function(){return Ze(this,0,-1)},e.prototype.unshift=function(){var i=arguments;return this.withMutations(function(r){Ze(r,-i.length);for(var a=0;a<i.length;a++)r.set(a,i[a])})},e.prototype.shift=function(){return Ze(this,1)},e.prototype.concat=function(){for(var i=arguments,r=[],a=0;a<arguments.length;a++){var o=i[a],s=t(typeof o!="string"&&No(o)?o:[o]);s.size!==0&&r.push(s)}return r.length===0?this:this.size===0&&!this.__ownerID&&r.length===1?this.constructor(r[0]):this.withMutations(function(l){r.forEach(function(u){return u.forEach(function(c){return l.push(c)})})})},e.prototype.setSize=function(i){return Ze(this,0,i)},e.prototype.map=function(i,r){var a=this;return this.withMutations(function(o){for(var s=0;s<a.size;s++)o.set(s,i.call(r,o.get(s),s,a))})},e.prototype.slice=function(i,r){var a=this.size;return mn(i,r,a)?this:Ze(this,dr(i,a),gn(r,a))},e.prototype.__iterator=function(i,r){var a=r?this.size:0,o=pa(this,r);return new B(function(){var s=o();return s===Gt?_e():Q(i,r?--a:a++,s)})},e.prototype.__iterate=function(i,r){for(var a=r?this.size:0,o=pa(this,r),s;(s=o())!==Gt&&i(s,r?--a:a++,this)!==!1;);return a},e.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?or(this._origin,this._capacity,this._level,this._root,this._tail,i,this.__hash):this.size===0?Pr():(this.__ownerID=i,this.__altered=!1,this)},e}(pt);bn.isList=as;var ae=bn.prototype;ae[is]=!0;ae[cr]=ae.remove;ae.merge=ae.concat;ae.setIn=Ei;ae.deleteIn=ae.removeIn=Ti;ae.update=Ci;ae.updateIn=Ii;ae.mergeIn=zi;ae.mergeDeepIn=Ni;ae.withMutations=fr;ae.wasAltered=Di;ae.asImmutable=mr;ae["@@transducer/init"]=ae.asMutable=pr;ae["@@transducer/step"]=function(t,e){return t.push(e)};ae["@@transducer/result"]=function(t){return t.asImmutable()};var et=function(e,n){this.array=e,this.ownerID=n};et.prototype.removeBefore=function(e,n,i){if(i===n?1<<n:this.array.length===0)return this;var r=i>>>n&ce;if(r>=this.array.length)return new et([],e);var a=r===0,o;if(n>0){var s=this.array[r];if(o=s&&s.removeBefore(e,n-G,i),o===s&&a)return this}if(a&&!o)return this;var l=xt(this,e);if(!a)for(var u=0;u<r;u++)l.array[u]=void 0;return o&&(l.array[r]=o),l};et.prototype.removeAfter=function(e,n,i){if(i===(n?1<<n:0)||this.array.length===0)return this;var r=i-1>>>n&ce;if(r>=this.array.length)return this;var a;if(n>0){var o=this.array[r];if(a=o&&o.removeAfter(e,n-G,i),a===o&&r===this.array.length-1)return this}var s=xt(this,e);return s.array.splice(r+1),a&&(s.array[r]=a),s};var Gt={};function pa(t,e){var n=t._origin,i=t._capacity,r=sr(i),a=t._tail;return o(t._root,t._level,0);function o(u,c,d){return c===0?s(u,d):l(u,c,d)}function s(u,c){var d=c===r?a&&a.array:u&&u.array,p=c>n?0:n-c,g=i-c;return g>Te&&(g=Te),function(){if(p===g)return Gt;var _=e?--g:p++;return d&&d[_]}}function l(u,c,d){var p,g=u&&u.array,_=d>n?0:n-d>>c,h=(i-d>>c)+1;return h>Te&&(h=Te),function(){for(;;){if(p){var v=p();if(v!==Gt)return v;p=null}if(_===h)return Gt;var y=e?--h:_++;p=o(g&&g[y],c-G,d+(y<<c))}}}}function or(t,e,n,i,r,a,o){var s=Object.create(ae);return s.size=e-t,s._origin=t,s._capacity=e,s._level=n,s._root=i,s._tail=r,s.__ownerID=a,s.__hash=o,s.__altered=!1,s}var ma;function Pr(){return ma||(ma=or(0,0,G))}function wu(t,e,n){if(e=rt(t,e),e!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(o){e<0?Ze(o,e).set(0,n):Ze(o,0,e+1).set(e,n)});e+=t._origin;var i=t._tail,r=t._root,a=Xn();return e>=sr(t._capacity)?i=ri(i,t.__ownerID,0,e,n,a):r=ri(r,t.__ownerID,t._level,e,n,a),a.value?t.__ownerID?(t._root=r,t._tail=i,t.__hash=void 0,t.__altered=!0,t):or(t._origin,t._capacity,t._level,r,i):t}function ri(t,e,n,i,r,a){var o=i>>>n&ce,s=t&&o<t.array.length;if(!s&&r===void 0)return t;var l;if(n>0){var u=t&&t.array[o],c=ri(u,e,n-G,i,r,a);return c===u?t:(l=xt(t,e),l.array[o]=c,l)}return s&&t.array[o]===r?t:(a&&Ce(a),l=xt(t,e),r===void 0&&o===l.array.length-1?l.array.pop():l.array[o]=r,l)}function xt(t,e){return e&&t&&e===t.ownerID?t:new et(t?t.array.slice():[],e)}function os(t,e){if(e>=sr(t._capacity))return t._tail;if(e<1<<t._level+G){for(var n=t._root,i=t._level;n&&i>0;)n=n.array[e>>>i&ce],i-=G;return n}}function Ze(t,e,n){e!==void 0&&(e|=0),n!==void 0&&(n|=0);var i=t.__ownerID||new fi,r=t._origin,a=t._capacity,o=r+e,s=n===void 0?a:n<0?a+n:r+n;if(o===r&&s===a)return t;if(o>=s)return t.clear();for(var l=t._level,u=t._root,c=0;o+c<0;)u=new et(u&&u.array.length?[void 0,u]:[],i),l+=G,c+=1<<l;c&&(o+=c,r+=c,s+=c,a+=c);for(var d=sr(a),p=sr(s);p>=1<<l+G;)u=new et(u&&u.array.length?[u]:[],i),l+=G;var g=t._tail,_=p<d?os(t,s-1):p>d?new et([],i):g;if(g&&p>d&&o<a&&g.array.length){u=xt(u,i);for(var h=u,v=l;v>G;v-=G){var y=d>>>v&ce;h=h.array[y]=xt(h.array[y],i)}h.array[d>>>G&ce]=g}if(s<a&&(_=_&&_.removeAfter(i,0,s)),o>=p)o-=p,s-=p,l=G,u=null,_=_&&_.removeBefore(i,0,o);else if(o>r||p<d){for(c=0;u;){var T=o>>>l&ce;if(T!==p>>>l&ce)break;T&&(c+=(1<<l)*T),l-=G,u=u.array[T]}u&&o>r&&(u=u.removeBefore(i,l,o-c)),u&&p<d&&(u=u.removeAfter(i,l,p-c)),c&&(o-=c,s-=c)}return t.__ownerID?(t.size=s-o,t._origin=o,t._capacity=s,t._level=l,t._root=u,t._tail=_,t.__hash=void 0,t.__altered=!0,t):or(o,s,l,u,_)}function sr(t){return t<Te?0:t-1>>>G<<G}var Je=function(t){function e(n){return n==null?jt():Vo(n)?n:jt().withMutations(function(i){var r=Ne(n);Ie(r.size),r.forEach(function(a,o){return i.set(o,a)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(i,r){var a=this._map.get(i);return a!==void 0?this._list.get(a)[1]:r},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):jt()},e.prototype.set=function(i,r){return _a(this,i,r)},e.prototype.remove=function(i){return _a(this,i,F)},e.prototype.__iterate=function(i,r){var a=this;return this._list.__iterate(function(o){return o&&i(o[1],o[0],a)},r)},e.prototype.__iterator=function(i,r){return this._list.fromEntrySeq().__iterator(i,r)},e.prototype.__ensureOwner=function(i){if(i===this.__ownerID)return this;var r=this._map.__ensureOwner(i),a=this._list.__ensureOwner(i);return i?Pi(r,a,i,this.__hash):this.size===0?jt():(this.__ownerID=i,this.__altered=!1,this._map=r,this._list=a,this)},e}(mt);Je.isOrderedMap=Vo;Je.prototype[Mt]=!0;Je.prototype[cr]=Je.prototype.remove;function Pi(t,e,n,i){var r=Object.create(Je.prototype);return r.size=t?t.size:0,r._map=t,r._list=e,r.__ownerID=n,r.__hash=i,r.__altered=!1,r}var ga;function jt(){return ga||(ga=Pi(Me(),Pr()))}function _a(t,e,n){var i=t._map,r=t._list,a=i.get(e),o=a!==void 0,s,l;if(n===F){if(!o)return t;r.size>=Te&&r.size>=i.size*2?(l=r.filter(function(u,c){return u!==void 0&&a!==c}),s=l.toKeyedSeq().map(function(u){return u[0]}).flip().toMap(),t.__ownerID&&(s.__ownerID=l.__ownerID=t.__ownerID)):(s=i.remove(e),l=a===r.size-1?r.pop():r.set(a,void 0))}else if(o){if(n===r.get(a)[1])return t;s=i,l=r.set(a,[e,n])}else s=i.set(e,r.size),l=r.set(r.size,[e,n]);return t.__ownerID?(t.size=s.size,t._map=s,t._list=l,t.__hash=void 0,t.__altered=!0,t):Pi(s,l)}var ss="@@__IMMUTABLE_STACK__@@";function ni(t){return Boolean(t&&t[ss])}var Hi=function(t){function e(n){return n==null?Tr():ni(n)?n:Tr().pushAll(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(i,r){var a=this._head;for(i=rt(this,i);a&&i--;)a=a.next;return a?a.value:r},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var i=arguments;if(arguments.length===0)return this;for(var r=this.size+arguments.length,a=this._head,o=arguments.length-1;o>=0;o--)a={value:i[o],next:a};return this.__ownerID?(this.size=r,this._head=a,this.__hash=void 0,this.__altered=!0,this):Kt(r,a)},e.prototype.pushAll=function(i){if(i=t(i),i.size===0)return this;if(this.size===0&&ni(i))return i;Ie(i.size);var r=this.size,a=this._head;return i.__iterate(function(o){r++,a={value:o,next:a}},!0),this.__ownerID?(this.size=r,this._head=a,this.__hash=void 0,this.__altered=!0,this):Kt(r,a)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Tr()},e.prototype.slice=function(i,r){if(mn(i,r,this.size))return this;var a=dr(i,this.size),o=gn(r,this.size);if(o!==this.size)return t.prototype.slice.call(this,i,r);for(var s=this.size-a,l=this._head;a--;)l=l.next;return this.__ownerID?(this.size=s,this._head=l,this.__hash=void 0,this.__altered=!0,this):Kt(s,l)},e.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?Kt(this.size,this._head,i,this.__hash):this.size===0?Tr():(this.__ownerID=i,this.__altered=!1,this)},e.prototype.__iterate=function(i,r){var a=this;if(r)return new dt(this.toArray()).__iterate(function(l,u){return i(l,u,a)},r);for(var o=0,s=this._head;s&&i(s.value,o++,this)!==!1;)s=s.next;return o},e.prototype.__iterator=function(i,r){if(r)return new dt(this.toArray()).__iterator(i,r);var a=0,o=this._head;return new B(function(){if(o){var s=o.value;return o=o.next,Q(i,a++,s)}return _e()})},e}(pt);Hi.isStack=ni;var de=Hi.prototype;de[ss]=!0;de.shift=de.pop;de.unshift=de.push;de.unshiftAll=de.pushAll;de.withMutations=fr;de.wasAltered=Di;de.asImmutable=mr;de["@@transducer/init"]=de.asMutable=pr;de["@@transducer/step"]=function(t,e){return t.unshift(e)};de["@@transducer/result"]=function(t){return t.asImmutable()};function Kt(t,e,n,i){var r=Object.create(de);return r.size=t,r._head=e,r.__ownerID=n,r.__hash=i,r.__altered=!1,r}var ya;function Tr(){return ya||(ya=Kt(0))}var ls="@@__IMMUTABLE_SET__@@";function Li(t){return Boolean(t&&t[ls])}function us(t){return Li(t)&&Ve(t)}function cs(t,e){if(t===e)return!0;if(!ge(e)||t.size!==void 0&&e.size!==void 0&&t.size!==e.size||t.__hash!==void 0&&e.__hash!==void 0&&t.__hash!==e.__hash||Z(t)!==Z(e)||me(t)!==me(e)||Ve(t)!==Ve(e))return!1;if(t.size===0&&e.size===0)return!0;var n=!_n(t);if(Ve(t)){var i=t.entries();return e.every(function(l,u){var c=i.next().value;return c&&Se(c[1],l)&&(n||Se(c[0],u))})&&i.next().done}var r=!1;if(t.size===void 0)if(e.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else{r=!0;var a=t;t=e,e=a}var o=!0,s=e.__iterate(function(l,u){if(n?!t.has(l):r?!Se(l,t.get(u,F)):!Se(t.get(u,F),l))return o=!1,!1});return o&&t.size===s}function gt(t,e){var n=function(i){t.prototype[i]=e[i]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function sn(t){if(!t||typeof t!="object")return t;if(!ge(t)){if(!nt(t))return t;t=be(t)}if(Z(t)){var e={};return t.__iterate(function(i,r){e[r]=sn(i)}),e}var n=[];return t.__iterate(function(i){n.push(sn(i))}),n}var Rn=function(t){function e(n){return n==null?Ut():Li(n)&&!Ve(n)?n:Ut().withMutations(function(i){var r=t(n);Ie(r.size),r.forEach(function(a){return i.add(a)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(i){return this(Ne(i).keySeq())},e.intersect=function(i){return i=re(i).toArray(),i.length?le.intersect.apply(e(i.pop()),i):Ut()},e.union=function(i){return i=re(i).toArray(),i.length?le.union.apply(e(i.pop()),i):Ut()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(i){return this._map.has(i)},e.prototype.add=function(i){return Cr(this,this._map.set(i,i))},e.prototype.remove=function(i){return Cr(this,this._map.remove(i))},e.prototype.clear=function(){return Cr(this,this._map.clear())},e.prototype.map=function(i,r){var a=this,o=!1,s=Cr(this,this._map.mapEntries(function(l){var u=l[1],c=i.call(r,u,u,a);return c!==u&&(o=!0),[c,c]},r));return o?s:this},e.prototype.union=function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];return i=i.filter(function(a){return a.size!==0}),i.length===0?this:this.size===0&&!this.__ownerID&&i.length===1?this.constructor(i[0]):this.withMutations(function(a){for(var o=0;o<i.length;o++)t(i[o]).forEach(function(s){return a.add(s)})})},e.prototype.intersect=function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];if(i.length===0)return this;i=i.map(function(o){return t(o)});var a=[];return this.forEach(function(o){i.every(function(s){return s.includes(o)})||a.push(o)}),this.withMutations(function(o){a.forEach(function(s){o.remove(s)})})},e.prototype.subtract=function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];if(i.length===0)return this;i=i.map(function(o){return t(o)});var a=[];return this.forEach(function(o){i.some(function(s){return s.includes(o)})&&a.push(o)}),this.withMutations(function(o){a.forEach(function(s){o.remove(s)})})},e.prototype.sort=function(i){return lr(Tt(this,i))},e.prototype.sortBy=function(i,r){return lr(Tt(this,r,i))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(i,r){var a=this;return this._map.__iterate(function(o){return i(o,o,a)},r)},e.prototype.__iterator=function(i,r){return this._map.__iterator(i,r)},e.prototype.__ensureOwner=function(i){if(i===this.__ownerID)return this;var r=this._map.__ensureOwner(i);return i?this.__make(r,i):this.size===0?this.__empty():(this.__ownerID=i,this._map=r,this)},e}(Dt);Rn.isSet=Li;var le=Rn.prototype;le[ls]=!0;le[cr]=le.remove;le.merge=le.concat=le.union;le.withMutations=fr;le.asImmutable=mr;le["@@transducer/init"]=le.asMutable=pr;le["@@transducer/step"]=function(t,e){return t.add(e)};le["@@transducer/result"]=function(t){return t.asImmutable()};le.__empty=Ut;le.__make=ds;function Cr(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:e.size===0?t.__empty():t.__make(e)}function ds(t,e){var n=Object.create(le);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}var va;function Ut(){return va||(va=ds(Me()))}var Su=function(t){function e(n,i,r){if(!(this instanceof e))return new e(n,i,r);if(Ri(r!==0,"Cannot step a Range by 0"),n=n||0,i===void 0&&(i=1/0),r=r===void 0?1:Math.abs(r),i<n&&(r=-r),this._start=n,this._end=i,this._step=r,this.size=Math.max(0,Math.ceil((i-n)/r-1)+1),this.size===0){if(zn)return zn;zn=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},e.prototype.get=function(i,r){return this.has(i)?this._start+rt(this,i)*this._step:r},e.prototype.includes=function(i){var r=(i-this._start)/this._step;return r>=0&&r<this.size&&r===Math.floor(r)},e.prototype.slice=function(i,r){return mn(i,r,this.size)?this:(i=dr(i,this.size),r=gn(r,this.size),r<=i?new e(0,0):new e(this.get(i,this._end),this.get(r,this._end),this._step))},e.prototype.indexOf=function(i){var r=i-this._start;if(r%this._step===0){var a=r/this._step;if(a>=0&&a<this.size)return a}return-1},e.prototype.lastIndexOf=function(i){return this.indexOf(i)},e.prototype.__iterate=function(i,r){for(var a=this.size,o=this._step,s=r?this._start+(a-1)*o:this._start,l=0;l!==a&&i(s,r?a-++l:l++,this)!==!1;)s+=r?-o:o;return l},e.prototype.__iterator=function(i,r){var a=this.size,o=this._step,s=r?this._start+(a-1)*o:this._start,l=0;return new B(function(){if(l===a)return _e();var u=s;return s+=r?-o:o,Q(i,r?a-++l:l++,u)})},e.prototype.equals=function(i){return i instanceof e?this._start===i._start&&this._end===i._end&&this._step===i._step:cs(this,i)},e}(He),zn;function hs(t,e,n){for(var i=Uo(e),r=0;r!==i.length;)if(t=Yo(t,i[r++],F),t===F)return n;return t}function fs(t,e){return hs(this,t,e)}function bu(t,e){return hs(t,e,F)!==F}function Ru(t){return bu(this,t)}function ps(){Ie(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t}re.isIterable=ge;re.isKeyed=Z;re.isIndexed=me;re.isAssociative=_n;re.isOrdered=Ve;re.Iterator=B;gt(re,{toArray:function(){Ie(this.size);var e=new Array(this.size||0),n=Z(this),i=0;return this.__iterate(function(r,a){e[i++]=n?[a,r]:r}),e},toIndexedSeq:function(){return new Ho(this)},toJS:function(){return sn(this)},toKeyedSeq:function(){return new Sn(this,!0)},toMap:function(){return mt(this.toKeyedSeq())},toObject:ps,toOrderedMap:function(){return Je(this.toKeyedSeq())},toOrderedSet:function(){return lr(Z(this)?this.valueSeq():this)},toSet:function(){return Rn(Z(this)?this.valueSeq():this)},toSetSeq:function(){return new Lo(this)},toSeq:function(){return me(this)?this.toIndexedSeq():Z(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Hi(Z(this)?this.valueSeq():this)},toList:function(){return bn(Z(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,n){return this.size===0?e+n:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+n},concat:function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return U(this,Zl(this,e))},includes:function(e){return this.some(function(n){return Se(n,e)})},entries:function(){return this.__iterator(Oe)},every:function(e,n){Ie(this.size);var i=!0;return this.__iterate(function(r,a,o){if(!e.call(n,r,a,o))return i=!1,!1}),i},filter:function(e,n){return U(this,$o(this,e,n,!0))},find:function(e,n,i){var r=this.findEntry(e,n);return r?r[1]:i},forEach:function(e,n){return Ie(this.size),this.__iterate(n?e.bind(n):e)},join:function(e){Ie(this.size),e=e!==void 0?""+e:",";var n="",i=!0;return this.__iterate(function(r){i?i=!1:n+=e,n+=r!=null?r.toString():""}),n},keys:function(){return this.__iterator(hr)},map:function(e,n){return U(this,Fo(this,e,n))},reduce:function(e,n,i){return wa(this,e,n,i,arguments.length<2,!1)},reduceRight:function(e,n,i){return wa(this,e,n,i,arguments.length<2,!0)},reverse:function(){return U(this,wi(this,!0))},slice:function(e,n){return U(this,Si(this,e,n,!0))},some:function(e,n){return!this.every(Ir(e),n)},sort:function(e){return U(this,Tt(this,e))},values:function(){return this.__iterator(Pe)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(e,n){return Et(e?this.toSeq().filter(e,n):this)},countBy:function(e,n){return Xl(this,e,n)},equals:function(e){return cs(this,e)},entrySeq:function(){var e=this;if(e._cache)return new dt(e._cache);var n=e.toSeq().map(Tu).toIndexedSeq();return n.fromEntrySeq=function(){return e.toSeq()},n},filterNot:function(e,n){return this.filter(Ir(e),n)},findEntry:function(e,n,i){var r=i;return this.__iterate(function(a,o,s){if(e.call(n,a,o,s))return r=[o,a],!1}),r},findKey:function(e,n){var i=this.findEntry(e,n);return i&&i[0]},findLast:function(e,n,i){return this.toKeyedSeq().reverse().find(e,n,i)},findLastEntry:function(e,n,i){return this.toKeyedSeq().reverse().findEntry(e,n,i)},findLastKey:function(e,n){return this.toKeyedSeq().reverse().findKey(e,n)},first:function(e){return this.find(bo,null,e)},flatMap:function(e,n){return U(this,eu(this,e,n))},flatten:function(e){return U(this,Bo(this,e,!0))},fromEntrySeq:function(){return new qo(this)},get:function(e,n){return this.find(function(i,r){return Se(r,e)},void 0,n)},getIn:fs,groupBy:function(e,n){return Jl(this,e,n)},has:function(e){return this.get(e,F)!==F},hasIn:Ru,isSubset:function(e){return e=typeof e.includes=="function"?e:re(e),this.every(function(n){return e.includes(n)})},isSuperset:function(e){return e=typeof e.isSubset=="function"?e:re(e),e.isSubset(this)},keyOf:function(e){return this.findKey(function(n){return Se(n,e)})},keySeq:function(){return this.toSeq().map(Eu).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return Rr(this,e)},maxBy:function(e,n){return Rr(this,n,e)},min:function(e){return Rr(this,e?Sa(e):Ra)},minBy:function(e,n){return Rr(this,n?Sa(n):Ra,e)},rest:function(){return this.slice(1)},skip:function(e){return e===0?this:this.slice(Math.max(0,e))},skipLast:function(e){return e===0?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,n){return U(this,Wo(this,e,n,!0))},skipUntil:function(e,n){return this.skipWhile(Ir(e),n)},sortBy:function(e,n){return U(this,Tt(this,n,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,n){return U(this,Ql(this,e,n))},takeUntil:function(e,n){return this.takeWhile(Ir(e),n)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Cu(this))}});var ue=re.prototype;ue[To]=!0;ue[yn]=ue.values;ue.toJSON=ue.toArray;ue.__toStringMapper=nr;ue.inspect=ue.toSource=function(){return this.toString()};ue.chain=ue.flatMap;ue.contains=ue.includes;gt(Ne,{flip:function(){return U(this,ko(this))},mapEntries:function(e,n){var i=this,r=0;return U(this,this.toSeq().map(function(a,o){return e.call(n,[o,a],r++,i)}).fromEntrySeq())},mapKeys:function(e,n){var i=this;return U(this,this.toSeq().flip().map(function(r,a){return e.call(n,r,a,i)}).flip())}});var gr=Ne.prototype;gr[Co]=!0;gr[yn]=ue.entries;gr.toJSON=ps;gr.__toStringMapper=function(t,e){return nr(e)+": "+nr(t)};gt(pt,{toKeyedSeq:function(){return new Sn(this,!1)},filter:function(e,n){return U(this,$o(this,e,n,!1))},findIndex:function(e,n){var i=this.findEntry(e,n);return i?i[0]:-1},indexOf:function(e){var n=this.keyOf(e);return n===void 0?-1:n},lastIndexOf:function(e){var n=this.lastKeyOf(e);return n===void 0?-1:n},reverse:function(){return U(this,wi(this,!1))},slice:function(e,n){return U(this,Si(this,e,n,!1))},splice:function(e,n){var i=arguments.length;if(n=Math.max(n||0,0),i===0||i===2&&!n)return this;e=dr(e,e<0?this.count():this.size);var r=this.slice(0,e);return U(this,i===1?r:r.concat(ke(arguments,2),this.slice(e+n)))},findLastIndex:function(e,n){var i=this.findLastEntry(e,n);return i?i[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return U(this,Bo(this,e,!1))},get:function(e,n){return e=rt(this,e),e<0||this.size===1/0||this.size!==void 0&&e>this.size?n:this.find(function(i,r){return r===e},void 0,n)},has:function(e){return e=rt(this,e),e>=0&&(this.size!==void 0?this.size===1/0||e<this.size:this.indexOf(e)!==-1)},interpose:function(e){return U(this,tu(this,e))},interleave:function(){var e=[this].concat(ke(arguments)),n=Er(this.toSeq(),He.of,e),i=n.flatten(!0);return n.size&&(i.size=n.size*e.length),U(this,i)},keySeq:function(){return Su(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,n){return U(this,Wo(this,e,n,!1))},zip:function(){var e=[this].concat(ke(arguments));return U(this,Er(this,ba,e))},zipAll:function(){var e=[this].concat(ke(arguments));return U(this,Er(this,ba,e,!0))},zipWith:function(e){var n=ke(arguments);return n[0]=this,U(this,Er(this,e,n))}});var Lt=pt.prototype;Lt[Io]=!0;Lt[Mt]=!0;gt(Dt,{get:function(e,n){return this.has(e)?e:n},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var Ot=Dt.prototype;Ot.has=ue.includes;Ot.contains=Ot.includes;Ot.keys=Ot.values;gt(at,gr);gt(He,Lt);gt(Pt,Ot);function wa(t,e,n,i,r,a){return Ie(t.size),t.__iterate(function(o,s,l){r?(r=!1,n=o):n=e.call(i,n,o,s,l)},a),n}function Eu(t,e){return e}function Tu(t,e){return[e,t]}function Ir(t){return function(){return!t.apply(this,arguments)}}function Sa(t){return function(){return-t.apply(this,arguments)}}function ba(){return ke(arguments)}function Ra(t,e){return t<e?1:t>e?-1:0}function Cu(t){if(t.size===1/0)return 0;var e=Ve(t),n=Z(t),i=e?1:0,r=t.__iterate(n?e?function(a,o){i=31*i+Ea(ve(a),ve(o))|0}:function(a,o){i=i+Ea(ve(a),ve(o))|0}:e?function(a){i=31*i+ve(a)|0}:function(a){i=i+ve(a)|0});return Iu(r,i)}function Iu(t,e){return e=Wt(e,3432918353),e=Wt(e<<15|e>>>-15,461845907),e=Wt(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=Wt(e^e>>>16,2246822507),e=Wt(e^e>>>13,3266489909),e=wn(e^e>>>16),e}function Ea(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var lr=function(t){function e(n){return n==null?ii():us(n)?n:ii().withMutations(function(i){var r=Dt(n);Ie(r.size),r.forEach(function(a){return i.add(a)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(i){return this(Ne(i).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(Rn);lr.isOrderedSet=us;var _t=lr.prototype;_t[Mt]=!0;_t.zip=Lt.zip;_t.zipWith=Lt.zipWith;_t.zipAll=Lt.zipAll;_t.__empty=ii;_t.__make=ms;function ms(t,e){var n=Object.create(_t);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}var Ta;function ii(){return Ta||(Ta=ms(jt()))}function xu(t){if(At(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(Be(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(t===null||typeof t!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var se=function(e,n){var i;xu(e);var r=function(s){var l=this;if(s instanceof r)return s;if(!(this instanceof r))return new r(s);if(!i){i=!0;var u=Object.keys(e),c=a._indices={};a._name=n,a._keys=u,a._defaultValues=e;for(var d=0;d<u.length;d++){var p=u[d];c[p]=d,a[p]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+ki(this)+' with property "'+p+'" since that property name is part of the Record API.'):Ou(a,p)}}return this.__ownerID=void 0,this._values=bn().withMutations(function(g){g.setSize(l._keys.length),Ne(s).forEach(function(_,h){g.set(l._indices[h],_===l._defaultValues[h]?void 0:_)})}),this},a=r.prototype=Object.create(Y);return a.constructor=r,n&&(r.displayName=n),r};se.prototype.toString=function(){for(var e=ki(this)+" { ",n=this._keys,i,r=0,a=n.length;r!==a;r++)i=n[r],e+=(r?", ":"")+i+": "+nr(this.get(i));return e+" }"};se.prototype.equals=function(e){return this===e||At(e)&&zt(this).equals(zt(e))};se.prototype.hashCode=function(){return zt(this).hashCode()};se.prototype.has=function(e){return this._indices.hasOwnProperty(e)};se.prototype.get=function(e,n){if(!this.has(e))return n;var i=this._indices[e],r=this._values.get(i);return r===void 0?this._defaultValues[e]:r};se.prototype.set=function(e,n){if(this.has(e)){var i=this._values.set(this._indices[e],n===this._defaultValues[e]?void 0:n);if(i!==this._values&&!this.__ownerID)return qi(this,i)}return this};se.prototype.remove=function(e){return this.set(e)};se.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:qi(this,e)};se.prototype.wasAltered=function(){return this._values.wasAltered()};se.prototype.toSeq=function(){return zt(this)};se.prototype.toJS=function(){return sn(this)};se.prototype.entries=function(){return this.__iterator(Oe)};se.prototype.__iterator=function(e,n){return zt(this).__iterator(e,n)};se.prototype.__iterate=function(e,n){return zt(this).__iterate(e,n)};se.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var n=this._values.__ensureOwner(e);return e?qi(this,n,e):(this.__ownerID=e,this._values=n,this)};se.isRecord=At;se.getDescriptiveName=ki;var Y=se.prototype;Y[Oo]=!0;Y[cr]=Y.remove;Y.deleteIn=Y.removeIn=Ti;Y.getIn=fs;Y.hasIn=ue.hasIn;Y.merge=Jo;Y.mergeWith=Qo;Y.mergeIn=zi;Y.mergeDeep=es;Y.mergeDeepWith=ts;Y.mergeDeepIn=Ni;Y.setIn=Ei;Y.update=Ci;Y.updateIn=Ii;Y.withMutations=fr;Y.asMutable=pr;Y.asImmutable=mr;Y[yn]=Y.entries;Y.toJSON=Y.toObject=ue.toObject;Y.inspect=Y.toSource=function(){return this.toString()};function qi(t,e,n){var i=Object.create(Object.getPrototypeOf(t));return i._values=e,i.__ownerID=n,i}function ki(t){return t.constructor.displayName||t.constructor.name||"Record"}function zt(t){return _i(t._keys.map(function(e){return[e,t.get(e)]}))}function Ou(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(n){Ri(this.__ownerID,"Cannot set on an immutable record."),this.set(e,n)}})}catch{}}var gs={exports:{}};(function(t,e){(function(n,i){typeof Bs=="function"&&!0?t.exports=i():n.pluralize=i()})(Bt,function(){var n=[],i=[],r={},a={},o={};function s(h){return typeof h=="string"?new RegExp("^"+h+"$","i"):h}function l(h,v){return h===v?v:h===h.toLowerCase()?v.toLowerCase():h===h.toUpperCase()?v.toUpperCase():h[0]===h[0].toUpperCase()?v.charAt(0).toUpperCase()+v.substr(1).toLowerCase():v.toLowerCase()}function u(h,v){return h.replace(/\$(\d{1,2})/g,function(y,T){return v[T]||""})}function c(h,v){return h.replace(v[0],function(y,T){var R=u(v[1],arguments);return l(y===""?h[T-1]:y,R)})}function d(h,v,y){if(!h.length||r.hasOwnProperty(h))return v;for(var T=y.length;T--;){var R=y[T];if(R[0].test(v))return c(v,R)}return v}function p(h,v,y){return function(T){var R=T.toLowerCase();return v.hasOwnProperty(R)?l(T,R):h.hasOwnProperty(R)?l(T,h[R]):d(R,T,y)}}function g(h,v,y,T){return function(R){var w=R.toLowerCase();return v.hasOwnProperty(w)?!0:h.hasOwnProperty(w)?!1:d(w,w,y)===w}}function _(h,v,y){var T=v===1?_.singular(h):_.plural(h);return(y?v+" ":"")+T}return _.plural=p(o,a,n),_.isPlural=g(o,a,n),_.singular=p(a,o,i),_.isSingular=g(a,o,i),_.addPluralRule=function(h,v){n.push([s(h),v])},_.addSingularRule=function(h,v){i.push([s(h),v])},_.addUncountableRule=function(h){if(typeof h=="string"){r[h.toLowerCase()]=!0;return}_.addPluralRule(h,"$0"),_.addSingularRule(h,"$0")},_.addIrregularRule=function(h,v){v=v.toLowerCase(),h=h.toLowerCase(),o[h]=v,a[v]=h},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(h){return _.addIrregularRule(h[0],h[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(h){return _.addPluralRule(h[0],h[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(h){return _.addSingularRule(h[0],h[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[e]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(_.addUncountableRule),_})})(gs);var zu=gs.exports;function Ge(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&i.push.apply(i,Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),i.forEach(function(r){j(t,r,n[r])})}return t}class W{static isBrowser(){return typeof window!="undefined"}static isOpera(){return W.isBrowser()&&(!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0)}static isFirefox(){return W.isBrowser()&&typeof InstallTrigger!="undefined"}static isSafari(){return W.isBrowser()?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}static isIE(){return W.isBrowser()&&!!document.documentMode}static isEdge(){return W.isBrowser()&&!W.isIE()&&!!window.StyleMedia}static isChrome(){return W.isBrowser()&&!!window.chrome&&!!window.chrome.webstore}static isBlink(){return W.isBrowser()&&(W.isChrome()||W.isOpera())&&!!window.CSS}static getUserAgent(){return typeof navigator=="undefined"?"":navigator.userAgent}static isAndroid(){return W.isBrowser()&&W.getUserAgent().match(/Android/i)}static isBlackBerry(){return W.isBrowser()&&W.getUserAgent().match(/BlackBerry/i)}static isIOS(){return W.isBrowser()&&W.getUserAgent().match(/iPhone|iPad|iPod/i)}static isOpera(){return W.isBrowser()&&W.getUserAgent().match(/Opera Mini/i)}static isWindows(){return W.isBrowser()&&W.isWindowsDesktop()||W.isWindowsMobile()}static isWindowsMobile(){return W.isBrowser()&&W.getUserAgent().match(/IEMobile/i)}static isWindowsDesktop(){return W.isBrowser()&&W.getUserAgent().match(/WPDesktop/i)}static isMobile(){return W.isBrowser()&&(W.isWindowsMobile()||W.isBlackBerry()||W.isAndroid()||W.isIOS())}}const En=t=>Object.keys(t).reduce((e,n)=>n.substr(0,5)==="data-"?Ge({},e,{[n]:t[n]}):e,{}),Nn=window.React;class Ee extends Nn.Component{static isA(e){return e?e.type===Ee:!1}constructor(e){super(e),j(this,"ref",Nn.createRef()),j(this,"onMouseMove",n=>{if(this.state.active){const i=this.ref.current;this.props.events.emit("resize",{index:this.props.index,domElement:i,event:n}),this.props.onResize&&this.props.onResize({component:this,domElement:i}),n.stopPropagation(),n.preventDefault()}}),j(this,"onMouseDown",n=>{this.setState({active:!0}),!(this.props.onStartResize&&this.props.onStartResize({domElement:this.ref.current,component:this}))&&this.props.events.emit("startResize",{index:this.props.index,event:n})}),j(this,"onMouseUp",n=>{this.state.active&&(this.setState({active:!1}),this.props.onStopResize&&this.props.onStopResize({domElement:this.ref.current,component:this}),this.props.events.emit("stopResize",{index:this.props.index,event:n}))}),this.state={active:!1},this.document=e.document}componentDidMount(){!this.document||(this.document.addEventListener("touchend",this.onMouseUp),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),this.document.addEventListener("touchmove",this.onMouseMove,{passive:!1}))}componentWillUnmount(){!this.document||(this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("touchend",this.onMouseUp),this.document.removeEventListener("mousemove",this.onMouseMove),this.document.removeEventListener("touchmove",this.onMouseMove),this.state.active&&this.props.events.emit("stopResize",{index:this.props.index,event:null}))}render(){const e=[W.isMobile()?"reflex-thin":"",...this.props.className.split(" "),this.state.active?"active":"","reflex-splitter"].join(" ").trim();return Nn.createElement("div",J({},En(this.props),{onTouchStart:this.onMouseDown,onMouseDown:this.onMouseDown,style:this.props.style,className:e,id:this.props.id,ref:this.ref}),this.props.children)}}j(Ee,"propTypes",{children:f.oneOfType([f.arrayOf(f.node),f.node]),onStartResize:f.func,onStopResize:f.func,className:f.string,propagate:f.bool,onResize:f.func,style:f.object});j(Ee,"defaultProps",{document:typeof document!="undefined"?document:null,onStartResize:null,onStopResize:null,propagate:!1,onResize:null,className:"",style:{}});class Nu{constructor(){this._events={}}on(e,n){return e.split(" ").forEach(i=>{this._events[i]=this._events[i]||[],this._events[i].push(n)}),this}off(e,n){if(e==null){this._events={};return}return e.split(" ").forEach(i=>{i in this._events&&(n?this._events[i].splice(this._events[i].indexOf(n),1):this._events[i]=[])}),this}emit(e){if(this._events[e]!==void 0)for(var n=this._events[e].slice(),i=0;i<n.length;++i){var r=n[i].apply(this,Array.prototype.slice.call(arguments,1));if(r!==void 0)return r}}}Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(this==null)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(i===0)return!1;var r=e|0,a=Math.max(r>=0?r:i-Math.abs(r),0);function o(s,l){return s===l||typeof s=="number"&&typeof l=="number"&&isNaN(s)&&isNaN(l)}for(;a<i;){if(o(n[a],t))return!0;a++}return!1}});Math.sign||(Math.sign=function(t){return(t>0)-(t<0)||+t});const ot=window.React;class Fi extends ot.Component{constructor(e){super(e),j(this,"onWindowResize",()=>{this.setState({flexData:this.computeFlexData()})}),j(this,"onStartResize",n=>{const i=n.event.changedTouches?n.event.changedTouches[0]:n.event;switch(this.props.orientation){case"horizontal":document.body.classList.add("reflex-row-resize"),this.previousPos=i.clientY;break;case"vertical":default:document.body.classList.add("reflex-col-resize"),this.previousPos=i.clientX;break}this.elements=[this.children[n.index-1],this.children[n.index+1]],this.emitElementsEvent(this.elements,"onStartResize")}),j(this,"onResize",n=>{const i=n.event.changedTouches?n.event.changedTouches[0]:n.event,r=this.getOffset(i,n.domElement);switch(this.props.orientation){case"horizontal":this.previousPos=i.clientY;break;case"vertical":default:this.previousPos=i.clientX;break}if(r){const a=this.computeAvailableOffset(n.index,r);a&&(this.elements=this.dispatchOffset(n.index,a),this.adjustFlex(this.elements),this.setState({resizing:!0},()=>{this.emitElementsEvent(this.elements,"onResize")}))}}),j(this,"onStopResize",n=>{document.body.classList.remove("reflex-row-resize"),document.body.classList.remove("reflex-col-resize");const i=this.elements?this.elements.map(a=>a.ref):[],r=this.children.filter(a=>!Ee.isA(a)&&i.includes(a.ref));this.emitElementsEvent(r,"onStopResize"),this.setState({resizing:!1})}),j(this,"onElementSize",n=>new Promise(i=>{try{const r=n.index,a=this.getSize(this.children[r]),o=n.size-a,s=n.direction,l=r+s,u=this.computeAvailableOffset(l,s*o);this.elements=null,u&&(this.elements=this.dispatchOffset(l,u),this.adjustFlex(this.elements)),this.setState(this.state,()=>{this.emitElementsEvent(this.elements,"onResize"),i()})}catch(r){console.log(r)}})),this.events=new Nu,this.children=[],this.state={flexData:[]},this.ref=ot.createRef()}componentDidMount(){const e=this.computeFlexData(),{windowResizeAware:n}=this.props;n&&window.addEventListener("resize",this.onWindowResize),this.setState({windowResizeAware:n,flexData:e}),this.events.on("element.size",this.onElementSize),this.events.on("startResize",this.onStartResize),this.events.on("stopResize",this.onStopResize),this.events.on("resize",this.onResize)}componentWillUnmount(){this.events.off(),window.removeEventListener("resize",this.onWindowResize)}getValidChildren(e=this.props){return this.toArray(e.children).filter(n=>!!n)}componentDidUpdate(e,n){const i=this.getValidChildren(this.props);if(i.length!==this.state.flexData.length||e.orientation!==this.props.orientation||this.flexHasChanged(e)){const r=this.computeFlexData(i,this.props);this.setState({flexData:r})}this.props.windowResizeAware!==this.state.windowResizeAware&&(this.props.windowResizeAware?window.addEventListener("resize",this.onWindowResize):window.removeEventListener("resize",this.onWindowResize),this.setState({windowResizeAware:this.props.windowResizeAware}))}flexHasChanged(e){const n=this.getValidChildren(e).map(r=>r.props.flex||0);return!this.getValidChildren().map(r=>r.props.flex||0).every((r,a)=>r===n[a])}getSize(e){const n=e.ref.current;switch(this.props.orientation){case"horizontal":return n.offsetHeight;case"vertical":default:return n.offsetWidth}}getOffset(e,n){const{top:i,bottom:r,left:a,right:o}=n.getBoundingClientRect();switch(this.props.orientation){case"horizontal":{const s=e.clientY-this.previousPos;if(s>0){if(e.clientY>=i)return s}else if(e.clientY<=r)return s;break}case"vertical":default:{const s=e.clientX-this.previousPos;if(s>0){if(e.clientX>a)return s}else if(e.clientX<o)return s}break}return 0}adjustFlex(e){const n=e.reduce((i,r)=>{const a=r.props.index,o=r.props.flex,s=this.state.flexData[a].flex;return i+(o-s)/e.length},0);e.forEach(i=>{this.state.flexData[i.props.index].flex+=n})}computeAvailableOffset(e,n){const i=this.computeAvailableStretch(e,n),r=this.computeAvailableShrink(e,n);return Math.min(i,r)*Math.sign(n)}checkPropagate(e,n){if(n>0){if(e<this.children.length-2){const i=this.children[e+2];return Ee.isA(i)&&i.props.propagate}}else if(e>2){const i=this.children[e-2];return Ee.isA(i)&&i.props.propagate}return!1}computeAvailableStretch(e,n){const i=n<0?e+1:e-1,r=this.children[i],a=this.getSize(r),s=r.props.maxSize-a;if(s<Math.abs(n)&&this.checkPropagate(e,-1*n)){const l=Math.sign(n)*(Math.abs(n)-s);return s+this.computeAvailableStretch(n<0?e+2:e-2,l)}return Math.min(s,Math.abs(n))}computeAvailableShrink(e,n){const i=n>0?e+1:e-1,r=this.children[i],a=this.getSize(r),o=Math.max(r.props.minSize,0),s=a-o;if(s<Math.abs(n)&&this.checkPropagate(e,n)){const l=Math.sign(n)*(Math.abs(n)-s);return s+this.computeAvailableShrink(n>0?e+2:e-2,l)}return Math.min(s,Math.abs(n))}computePixelFlex(e=this.props.orientation){if(!this.ref.current)return console.warn("Unable to locate ReflexContainer dom node"),0;switch(e){case"horizontal":return this.ref.current.offsetHeight===0?(console.warn("Found ReflexContainer with height=0, this will cause invalid behavior..."),console.warn(this.ref.current),0):1/this.ref.current.offsetHeight;case"vertical":default:return this.ref.current.offsetWidth===0?(console.warn("Found ReflexContainer with width=0, this will cause invalid behavior..."),console.warn(this.ref.current),0):1/this.ref.current.offsetWidth}}addOffset(e,n){const i=this.getSize(e),r=e.props.index,a=Math.max(i+n,0),o=this.state.flexData[r].flex,s=o>0?o*a/i:this.computePixelFlex()*a;this.state.flexData[r].flex=!isFinite(s)||isNaN(s)?0:s}dispatchStretch(e,n){const i=n<0?e+1:e-1;if(i<0||i>this.children.length-1)return[];const r=this.children[i],a=this.getSize(r),s=Math.min(r.props.maxSize,a+Math.abs(n))-a;if(this.addOffset(r,s),s<Math.abs(n)){const l=e-Math.sign(n)*2,u=Math.sign(n)*(Math.abs(n)-s);return[r,...this.dispatchStretch(l,u)]}return[r]}dispatchShrink(e,n){const i=n>0?e+1:e-1;if(i<0||i>this.children.length-1)return[];const r=this.children[i],a=this.getSize(r),s=Math.max(r.props.minSize,a-Math.abs(n))-a;if(this.addOffset(r,s),Math.abs(s)<Math.abs(n)){const l=e+Math.sign(n)*2,u=Math.sign(n)*(Math.abs(n)+s);return[r,...this.dispatchShrink(l,u)]}return[r]}dispatchOffset(e,n){return[...this.dispatchStretch(e,n),...this.dispatchShrink(e,n)]}emitElementsEvent(e,n){this.toArray(e).forEach(i=>{i.props[n]&&i.props[n]({domElement:i.ref.current,component:i})})}computeFlexData(e=this.getValidChildren(),n=this.props){const i=this.computePixelFlex(n.orientation),r=u=>u.reduce((c,d)=>!Ee.isA(d)&&d.constrained?c-d.flex:c,1),a=u=>u.reduce((c,d)=>!Ee.isA(d)&&!d.constrained?c+1:c,0),o=e.map(u=>{const c=u.props;return{maxFlex:(c.maxSize||Number.MAX_VALUE)*i,sizeFlex:(c.size||Number.MAX_VALUE)*i,minFlex:(c.minSize||1)*i,constrained:c.flex!==void 0,flex:c.flex||0,type:u.type}}),s=(u,c=0)=>{let d=!1;const p=a(u),g=r(u),_=u.map(h=>{if(Ee.isA(h))return h;const v=h.constrained?h.flex:g/p,y=Math.min(h.sizeFlex,Math.min(h.maxFlex,Math.max(h.minFlex,v))),T=h.constrained||y!==v;return d=d||T,Ge({},h,{flex:y,constrained:T})});return d&&c<this.props.maxRecDepth?s(_,c+1):_};return s(o).map(u=>({flex:Ee.isA(u)?0:u.flex,ref:ot.createRef()}))}toArray(e){return e?Array.isArray(e)?e:[e]:[]}render(){const e=[this.state.resizing?"reflex-resizing":"",...this.props.className.split(" "),this.props.orientation,"reflex-container"].join(" ").trim();return this.children=ot.Children.map(this.getValidChildren(),(n,i)=>{if(i>this.state.flexData.length-1)return ot.createElement("div",null);const r=this.state.flexData[i],a=Ge({},n.props,{maxSize:n.props.maxSize||Number.MAX_VALUE,orientation:this.props.orientation,minSize:n.props.minSize||1,events:this.events,flex:r.flex,ref:r.ref,index:i});return ot.cloneElement(n,a)}),ot.createElement("div",J({},En(this.props),{style:this.props.style,className:e,ref:this.ref}),this.children)}}j(Fi,"propTypes",{windowResizeAware:f.bool,orientation:f.oneOf(["horizontal","vertical"]),maxRecDepth:f.number,className:f.string,style:f.object});j(Fi,"defaultProps",{orientation:"horizontal",windowResizeAware:!1,maxRecDepth:100,className:"",style:{}});const Dn=window.React;class qt extends Dn.Component{static isA(e){return e?e.type===qt:!1}constructor(e){super(e),j(this,"ref",Dn.createRef()),j(this,"onMouseMove",n=>{if(this.state.active){const i=this.ref.current;this.props.events.emit("resize",{index:this.props.index,domElement:i,event:n}),this.props.onResize&&this.props.onResize({component:this,domElement:i}),n.stopPropagation(),n.preventDefault()}}),j(this,"onMouseDown",n=>{this.setState({active:!0}),!(this.props.onStartResize&&this.props.onStartResize({domElement:this.ref.current,component:this}))&&this.props.events.emit("startResize",{index:this.props.index,event:n})}),j(this,"onMouseUp",n=>{this.state.active&&(this.setState({active:!1}),this.props.onStopResize&&this.props.onStopResize({domElement:this.ref.current,component:this}),this.props.events.emit("stopResize",{index:this.props.index,event:n}))}),this.state={active:!1},this.document=e.document}componentDidMount(){!this.document||(this.document.addEventListener("touchend",this.onMouseUp),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),this.document.addEventListener("touchmove",this.onMouseMove,{passive:!1}))}componentWillUnmount(){!this.document||(this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("touchend",this.onMouseUp),this.document.removeEventListener("mousemove",this.onMouseMove),this.document.removeEventListener("touchmove",this.onMouseMove),this.state.active&&this.props.events.emit("stopResize",{index:this.props.index,event:null}))}render(){const e=[...this.props.className.split(" "),this.state.active?"active":"","reflex-handle"].join(" ").trim();return Dn.createElement("div",J({},En(this.props),{onTouchStart:this.onMouseDown,onMouseDown:this.onMouseDown,style:this.props.style,className:e,id:this.props.id,ref:this.ref}),this.props.children)}}j(qt,"propTypes",{children:f.oneOfType([f.arrayOf(f.node),f.node]),onStartResize:f.func,onStopResize:f.func,className:f.string,propagate:f.bool,onResize:f.func,style:f.object});j(qt,"defaultProps",{document:typeof document=="undefined"?null:document,onStartResize:null,onStopResize:null,propagate:!1,onResize:null,className:"",style:{}});var _s="Expected a function",Ca=0/0,Du="[object Symbol]",Au=/^\s+|\s+$/g,Mu=/^[-+]0x[0-9a-f]+$/i,Vu=/^0b[01]+$/i,Pu=/^0o[0-7]+$/i,Hu=parseInt,Lu=typeof Bt=="object"&&Bt&&Bt.Object===Object&&Bt,qu=typeof self=="object"&&self&&self.Object===Object&&self,ku=Lu||qu||Function("return this")(),Fu=Object.prototype,$u=Fu.toString,Wu=Math.max,Bu=Math.min,An=function(){return ku.Date.now()};function ju(t,e,n){var i,r,a,o,s,l,u=0,c=!1,d=!1,p=!0;if(typeof t!="function")throw new TypeError(_s);e=Ia(e)||0,ln(n)&&(c=!!n.leading,d="maxWait"in n,a=d?Wu(Ia(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p);function g(b){var E=i,I=r;return i=r=void 0,u=b,o=t.apply(I,E),o}function _(b){return u=b,s=setTimeout(y,e),c?g(b):o}function h(b){var E=b-l,I=b-u,O=e-E;return d?Bu(O,a-I):O}function v(b){var E=b-l,I=b-u;return l===void 0||E>=e||E<0||d&&I>=a}function y(){var b=An();if(v(b))return T(b);s=setTimeout(y,h(b))}function T(b){return s=void 0,p&&i?g(b):(i=r=void 0,o)}function R(){s!==void 0&&clearTimeout(s),u=0,i=l=r=s=void 0}function w(){return s===void 0?o:T(An())}function m(){var b=An(),E=v(b);if(i=arguments,r=this,l=b,E){if(s===void 0)return _(l);if(d)return s=setTimeout(y,e),g(l)}return s===void 0&&(s=setTimeout(y,e)),o}return m.cancel=R,m.flush=w,m}function Ku(t,e,n){var i=!0,r=!0;if(typeof t!="function")throw new TypeError(_s);return ln(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),ju(t,e,{leading:i,maxWait:e,trailing:r})}function ln(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Uu(t){return!!t&&typeof t=="object"}function Yu(t){return typeof t=="symbol"||Uu(t)&&$u.call(t)==Du}function Ia(t){if(typeof t=="number")return t;if(Yu(t))return Ca;if(ln(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ln(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Au,"");var n=Vu.test(t);return n||Pu.test(t)?Hu(t.slice(2),n?2:8):Mu.test(t)?Ca:+t}var Gu=Ku,ys=function(){if(typeof Map!="undefined")return Map;function t(e,n){var i=-1;return e.some(function(r,a){return r[0]===n?(i=a,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var i=t(this.__entries__,n),r=this.__entries__[i];return r&&r[1]},e.prototype.set=function(n,i){var r=t(this.__entries__,n);~r?this.__entries__[r][1]=i:this.__entries__.push([n,i])},e.prototype.delete=function(n){var i=this.__entries__,r=t(i,n);~r&&i.splice(r,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,i){i===void 0&&(i=null);for(var r=0,a=this.__entries__;r<a.length;r++){var o=a[r];n.call(i,o[1],o[0])}},e}()}(),ai=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,un=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),Xu=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(un):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),Ju=2;function Qu(t,e){var n=!1,i=!1,r=0;function a(){n&&(n=!1,t()),i&&s()}function o(){Xu(a)}function s(){var l=Date.now();if(n){if(l-r<Ju)return;i=!0}else n=!0,i=!1,setTimeout(o,e);r=l}return s}var Zu=20,ec=["top","right","bottom","left","width","height","size","weight"],tc=typeof MutationObserver!="undefined",rc=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Qu(this.refresh.bind(this),Zu)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,i=n.indexOf(e);~i&&n.splice(i,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!ai||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),tc?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!ai||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,i=n===void 0?"":n,r=ec.some(function(a){return!!~i.indexOf(a)});r&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),vs=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},Nt=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||un},ws=Tn(0,0,0,0);function cn(t){return parseFloat(t)||0}function xa(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(i,r){var a=t["border-"+r+"-width"];return i+cn(a)},0)}function nc(t){for(var e=["top","right","bottom","left"],n={},i=0,r=e;i<r.length;i++){var a=r[i],o=t["padding-"+a];n[a]=cn(o)}return n}function ic(t){var e=t.getBBox();return Tn(0,0,e.width,e.height)}function ac(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return ws;var i=Nt(t).getComputedStyle(t),r=nc(i),a=r.left+r.right,o=r.top+r.bottom,s=cn(i.width),l=cn(i.height);if(i.boxSizing==="border-box"&&(Math.round(s+a)!==e&&(s-=xa(i,"left","right")+a),Math.round(l+o)!==n&&(l-=xa(i,"top","bottom")+o)),!sc(t)){var u=Math.round(s+a)-e,c=Math.round(l+o)-n;Math.abs(u)!==1&&(s-=u),Math.abs(c)!==1&&(l-=c)}return Tn(r.left,r.top,s,l)}var oc=function(){return typeof SVGGraphicsElement!="undefined"?function(t){return t instanceof Nt(t).SVGGraphicsElement}:function(t){return t instanceof Nt(t).SVGElement&&typeof t.getBBox=="function"}}();function sc(t){return t===Nt(t).document.documentElement}function lc(t){return ai?oc(t)?ic(t):ac(t):ws}function uc(t){var e=t.x,n=t.y,i=t.width,r=t.height,a=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,o=Object.create(a.prototype);return vs(o,{x:e,y:n,width:i,height:r,top:n,right:e+i,bottom:r+n,left:e}),o}function Tn(t,e,n,i){return{x:t,y:e,width:n,height:i}}var cc=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Tn(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=lc(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),dc=function(){function t(e,n){var i=uc(n);vs(this,{target:e,contentRect:i})}return t}(),hc=function(){function t(e,n,i){if(this.activeObservations_=[],this.observations_=new ys,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=i}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof Nt(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new cc(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof Nt(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;!n.has(e)||(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(!!this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(i){return new dc(i.target,i.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),Ss=typeof WeakMap!="undefined"?new WeakMap:new ys,bs=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=rc.getInstance(),i=new hc(e,n,this);Ss.set(this,i)}return t}();["observe","unobserve","disconnect"].forEach(function(t){bs.prototype[t]=function(){var e;return(e=Ss.get(this))[t].apply(e,arguments)}});var fc=function(){return typeof un.ResizeObserver!="undefined"?un.ResizeObserver:bs}();const pc=window.React.Component,mc=window.React.createElement;var gc=["client","offset","scroll","bounds","margin"];function Oa(t){var e=[];return gc.forEach(function(n){t[n]&&e.push(n)}),e}function za(t,e){var n={};if(e.indexOf("client")>-1&&(n.client={top:t.clientTop,left:t.clientLeft,width:t.clientWidth,height:t.clientHeight}),e.indexOf("offset")>-1&&(n.offset={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}),e.indexOf("scroll")>-1&&(n.scroll={top:t.scrollTop,left:t.scrollLeft,width:t.scrollWidth,height:t.scrollHeight}),e.indexOf("bounds")>-1){var i=t.getBoundingClientRect();n.bounds={top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height}}if(e.indexOf("margin")>-1){var r=getComputedStyle(t);n.margin={top:r?parseInt(r.marginTop):0,right:r?parseInt(r.marginRight):0,bottom:r?parseInt(r.marginBottom):0,left:r?parseInt(r.marginLeft):0}}return n}function _c(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||window}function yc(t){return function(e){var n,i;return i=n=function(r){ze(a,r);function a(){for(var s,l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return s=r.call.apply(r,[this].concat(u))||this,s.state={contentRect:{entry:{},client:{},offset:{},scroll:{},bounds:{},margin:{}}},s._animationFrameID=null,s._resizeObserver=null,s._node=null,s._window=null,s.measure=function(d){var p=za(s._node,t||Oa(s.props));d&&(p.entry=d[0].contentRect),s._animationFrameID=s._window.requestAnimationFrame(function(){s._resizeObserver!==null&&(s.setState({contentRect:p}),typeof s.props.onResize=="function"&&s.props.onResize(p))})},s._handleRef=function(d){s._resizeObserver!==null&&s._node!==null&&s._resizeObserver.unobserve(s._node),s._node=d,s._window=_c(s._node);var p=s.props.innerRef;p&&(typeof p=="function"?p(s._node):p.current=s._node),s._resizeObserver!==null&&s._node!==null&&s._resizeObserver.observe(s._node)},s}var o=a.prototype;return o.componentDidMount=function(){this._resizeObserver=this._window!==null&&this._window.ResizeObserver?new this._window.ResizeObserver(this.measure):new fc(this.measure),this._node!==null&&(this._resizeObserver.observe(this._node),typeof this.props.onResize=="function"&&this.props.onResize(za(this._node,t||Oa(this.props))))},o.componentWillUnmount=function(){this._window!==null&&this._window.cancelAnimationFrame(this._animationFrameID),this._resizeObserver!==null&&(this._resizeObserver.disconnect(),this._resizeObserver=null)},o.render=function(){var l=this.props;l.innerRef,l.onResize;var u=we(l,["innerRef","onResize"]);return mc(e,J({},u,{measureRef:this._handleRef,measure:this.measure,contentRect:this.state.contentRect}))},a}(pc),n.propTypes={client:f.bool,offset:f.bool,scroll:f.bool,bounds:f.bool,margin:f.bool,innerRef:f.oneOfType([f.object,f.func]),onResize:f.func},i}}var $i=yc()(function(t){var e=t.measure,n=t.measureRef,i=t.contentRect,r=t.children;return r({measure:e,measureRef:n,contentRect:i})});$i.displayName="Measure";$i.propTypes.children=f.func;const fe=window.React,oi=t=>t?Array.isArray(t)?t:[t]:[];class vc extends fe.Component{constructor(e){super(e),j(this,"onResize",n=>{const{resizeHeight:i,resizeWidth:r}=this.props,{height:a,width:o}=n.bounds;this.setDimensions(Ge({},i&&{height:a},r&&{width:o}))}),this.setDimensions=Gu(n=>{this.setState(n)},this.props.propagateDimensionsRate/1e3),this.state={height:"100%",width:"100%"}}renderChildren(){const{propagateDimensions:e}=this.props,n=oi(this.props.children).filter(i=>!!i);return fe.Children.map(n,i=>this.props.withHandle||qt.isA(i)?fe.cloneElement(i,Ge({dimensions:e&&this.state},i.props,{index:this.props.index-1,events:this.props.events})):e?fe.cloneElement(i,Ge({},i.props,{dimensions:this.state})):i)}render(){return fe.createElement($i,{bounds:!0,onResize:this.onResize},({measureRef:e})=>fe.createElement("div",{ref:e,className:"reflex-size-aware"},fe.createElement("div",{style:this.state},this.renderChildren())))}}class Wi extends fe.Component{constructor(e){super(e),this.state={size:e.size}}static getDerivedStateFromProps(e,n){return e.size!==n.size?Ge({},n,{size:e.size}):null}async componentDidUpdate(e,n,i){if(n.size!==this.state.size){const r=oi(this.props.direction);for(let a of r)await this.props.events.emit("element.size",{index:this.props.index,size:this.props.size,direction:a})}}renderChildren(){const e=oi(this.props.children).filter(n=>!!n);return fe.Children.map(e,n=>this.props.withHandle||qt.isA(n)?fe.cloneElement(n,Ge({},n.props,{index:this.props.index-1,events:this.props.events})):n)}render(){const e=[...this.props.className.split(" "),this.props.orientation,"reflex-element"].join(" ").trim(),n=Ge({},this.props.style,{flexGrow:this.props.flex,flexShrink:1,flexBasis:"0%"});return fe.createElement("div",J({},En(this.props),{ref:this.props.innerRef,className:e,style:n}),this.props.propagateDimensions?fe.createElement(vc,this.props):this.renderChildren())}}j(Wi,"propTypes",{propagateDimensions:f.bool,resizeHeight:f.bool,resizeWidth:f.bool,className:f.string,size:f.number});j(Wi,"defaultProps",{propagateDimensionsRate:100,propagateDimensions:!1,resizeHeight:!0,resizeWidth:!0,direction:[1],className:""});var Na=fe.forwardRef((t,e)=>fe.createElement(Wi,J({innerRef:e},t)));const Hr=({items:t,maxItemCount:e=4})=>{const n=t.length>e;return n&&(t=t.slice(-e)),k("div",{className:"Breadcrumbs",children:[t.length>0&&S("span",{children:"You are in: "}),n&&k(te,{children:[S("button",{className:"BreadcrumbItem Current",children:"..."}),S("span",{children:">"})]}),t.map((i,r)=>k(te,{children:[S("button",{className:`BreadcrumbItem ${i.isCurrent?"Current":""}`,onClick:a=>{a.preventDefault(),i.action&&i.action()},children:i.name},r),r!==t.length-1&&S("span",{children:">"})]}))]})};try{Hr.displayName="Breadcrumbs",Hr.__docgenInfo={description:"",displayName:"Breadcrumbs",props:{items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"BreadcrumbItem[]"}},maxItemCount:{defaultValue:{value:"4"},description:"",name:"maxItemCount",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/Breadcrumbs.tsx#Breadcrumbs"]={docgenInfo:Hr.__docgenInfo,name:"Breadcrumbs",path:"src/lib/containers/entity_finder/Breadcrumbs.tsx#Breadcrumbs"})}catch{}const Rt=window.React.createElement,Rs=window.React.PureComponent;var wc=typeof performance=="object"&&typeof performance.now=="function",Da=wc?function(){return performance.now()}:function(){return Date.now()};function dn(t){cancelAnimationFrame(t.id)}function Es(t,e){var n=Da();function i(){Da()-n>=e?t.call(null):r.id=requestAnimationFrame(i)}var r={id:requestAnimationFrame(i)};return r}var Mn=-1;function Sc(t){if(t===void 0&&(t=!1),Mn===-1||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(e),Mn=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Mn}var St=null;function hn(t){if(t===void 0&&(t=!1),St===null||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var i=document.createElement("div"),r=i.style;return r.width="100px",r.height="100px",e.appendChild(i),document.body.appendChild(e),e.scrollLeft>0?St="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?St="negative":St="positive-ascending"),document.body.removeChild(e),St}return St}var bc=150,Rc=function(e){var n=e.columnIndex;e.data;var i=e.rowIndex;return i+":"+n};function Ts(t){var e,n=t.getColumnOffset,i=t.getColumnStartIndexForOffset,r=t.getColumnStopIndexForStartIndex,a=t.getColumnWidth,o=t.getEstimatedTotalHeight,s=t.getEstimatedTotalWidth,l=t.getOffsetForColumnAndAlignment,u=t.getOffsetForRowAndAlignment,c=t.getRowHeight,d=t.getRowOffset,p=t.getRowStartIndexForOffset,g=t.getRowStopIndexForStartIndex,_=t.initInstanceProps,h=t.shouldResetStyleCacheOnItemSizeChange,v=t.validateProps;return e=function(y){ze(T,y);function T(w){var m;return m=y.call(this,w)||this,m._instanceProps=_(m.props,D(m)),m._resetIsScrollingTimeoutId=null,m._outerRef=void 0,m.state={instance:D(m),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:typeof m.props.initialScrollLeft=="number"?m.props.initialScrollLeft:0,scrollTop:typeof m.props.initialScrollTop=="number"?m.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},m._callOnItemsRendered=void 0,m._callOnItemsRendered=pe(function(b,E,I,O,x,z,M,H){return m.props.onItemsRendered({overscanColumnStartIndex:b,overscanColumnStopIndex:E,overscanRowStartIndex:I,overscanRowStopIndex:O,visibleColumnStartIndex:x,visibleColumnStopIndex:z,visibleRowStartIndex:M,visibleRowStopIndex:H})}),m._callOnScroll=void 0,m._callOnScroll=pe(function(b,E,I,O,x){return m.props.onScroll({horizontalScrollDirection:I,scrollLeft:b,scrollTop:E,verticalScrollDirection:O,scrollUpdateWasRequested:x})}),m._getItemStyle=void 0,m._getItemStyle=function(b,E){var I=m.props,O=I.columnWidth,x=I.direction,z=I.rowHeight,M=m._getItemStyleCache(h&&O,h&&x,h&&z),H=b+":"+E,A;if(M.hasOwnProperty(H))A=M[H];else{var q=n(m.props,E,m._instanceProps),$=x==="rtl";M[H]=A={position:"absolute",left:$?void 0:q,right:$?q:void 0,top:d(m.props,b,m._instanceProps),height:c(m.props,b,m._instanceProps),width:a(m.props,E,m._instanceProps)}}return A},m._getItemStyleCache=void 0,m._getItemStyleCache=pe(function(b,E,I){return{}}),m._onScroll=function(b){var E=b.currentTarget,I=E.clientHeight,O=E.clientWidth,x=E.scrollLeft,z=E.scrollTop,M=E.scrollHeight,H=E.scrollWidth;m.setState(function(A){if(A.scrollLeft===x&&A.scrollTop===z)return null;var q=m.props.direction,$=x;if(q==="rtl")switch(hn()){case"negative":$=-x;break;case"positive-descending":$=H-O-x;break}$=Math.max(0,Math.min($,H-O));var K=Math.max(0,Math.min(z,M-I));return{isScrolling:!0,horizontalScrollDirection:A.scrollLeft<x?"forward":"backward",scrollLeft:$,scrollTop:K,verticalScrollDirection:A.scrollTop<z?"forward":"backward",scrollUpdateWasRequested:!1}},m._resetIsScrollingDebounced)},m._outerRefSetter=function(b){var E=m.props.outerRef;m._outerRef=b,typeof E=="function"?E(b):E!=null&&typeof E=="object"&&E.hasOwnProperty("current")&&(E.current=b)},m._resetIsScrollingDebounced=function(){m._resetIsScrollingTimeoutId!==null&&dn(m._resetIsScrollingTimeoutId),m._resetIsScrollingTimeoutId=Es(m._resetIsScrolling,bc)},m._resetIsScrolling=function(){m._resetIsScrollingTimeoutId=null,m.setState({isScrolling:!1},function(){m._getItemStyleCache(-1)})},m}T.getDerivedStateFromProps=function(m,b){return Ec(m,b),v(m),null};var R=T.prototype;return R.scrollTo=function(m){var b=m.scrollLeft,E=m.scrollTop;b!==void 0&&(b=Math.max(0,b)),E!==void 0&&(E=Math.max(0,E)),this.setState(function(I){return b===void 0&&(b=I.scrollLeft),E===void 0&&(E=I.scrollTop),I.scrollLeft===b&&I.scrollTop===E?null:{horizontalScrollDirection:I.scrollLeft<b?"forward":"backward",scrollLeft:b,scrollTop:E,scrollUpdateWasRequested:!0,verticalScrollDirection:I.scrollTop<E?"forward":"backward"}},this._resetIsScrollingDebounced)},R.scrollToItem=function(m){var b=m.align,E=b===void 0?"auto":b,I=m.columnIndex,O=m.rowIndex,x=this.props,z=x.columnCount,M=x.height,H=x.rowCount,A=x.width,q=this.state,$=q.scrollLeft,K=q.scrollTop,V=Sc();I!==void 0&&(I=Math.max(0,Math.min(I,z-1))),O!==void 0&&(O=Math.max(0,Math.min(O,H-1)));var N=o(this.props,this._instanceProps),C=s(this.props,this._instanceProps),L=C>A?V:0,ee=N>M?V:0;this.scrollTo({scrollLeft:I!==void 0?l(this.props,I,E,$,this._instanceProps,ee):$,scrollTop:O!==void 0?u(this.props,O,E,K,this._instanceProps,L):K})},R.componentDidMount=function(){var m=this.props,b=m.initialScrollLeft,E=m.initialScrollTop;if(this._outerRef!=null){var I=this._outerRef;typeof b=="number"&&(I.scrollLeft=b),typeof E=="number"&&(I.scrollTop=E)}this._callPropsCallbacks()},R.componentDidUpdate=function(){var m=this.props.direction,b=this.state,E=b.scrollLeft,I=b.scrollTop,O=b.scrollUpdateWasRequested;if(O&&this._outerRef!=null){var x=this._outerRef;if(m==="rtl")switch(hn()){case"negative":x.scrollLeft=-E;break;case"positive-ascending":x.scrollLeft=E;break;default:var z=x.clientWidth,M=x.scrollWidth;x.scrollLeft=M-z-E;break}else x.scrollLeft=Math.max(0,E);x.scrollTop=Math.max(0,I)}this._callPropsCallbacks()},R.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&dn(this._resetIsScrollingTimeoutId)},R.render=function(){var m=this.props,b=m.children,E=m.className,I=m.columnCount,O=m.direction,x=m.height,z=m.innerRef,M=m.innerElementType,H=m.innerTagName,A=m.itemData,q=m.itemKey,$=q===void 0?Rc:q,K=m.outerElementType,V=m.outerTagName,N=m.rowCount,C=m.style,L=m.useIsScrolling,ee=m.width,De=this.state.isScrolling,P=this._getHorizontalRangeToRender(),ne=P[0],yt=P[1],vt=this._getVerticalRangeToRender(),wt=vt[0],vr=vt[1],Ji=[];if(I>0&&N)for(var kt=wt;kt<=vr;kt++)for(var Ft=ne;Ft<=yt;Ft++)Ji.push(Rt(b,{columnIndex:Ft,data:A,isScrolling:L?De:void 0,key:$({columnIndex:Ft,data:A,rowIndex:kt}),rowIndex:kt,style:this._getItemStyle(kt,Ft)}));var $s=o(this.props,this._instanceProps),Ws=s(this.props,this._instanceProps);return Rt(K||V||"div",{className:E,onScroll:this._onScroll,ref:this._outerRefSetter,style:J({position:"relative",height:x,width:ee,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:O},C)},Rt(M||H||"div",{children:Ji,ref:z,style:{height:$s,pointerEvents:De?"none":void 0,width:Ws}}))},R._callPropsCallbacks=function(){var m=this.props,b=m.columnCount,E=m.onItemsRendered,I=m.onScroll,O=m.rowCount;if(typeof E=="function"&&b>0&&O>0){var x=this._getHorizontalRangeToRender(),z=x[0],M=x[1],H=x[2],A=x[3],q=this._getVerticalRangeToRender(),$=q[0],K=q[1],V=q[2],N=q[3];this._callOnItemsRendered(z,M,$,K,H,A,V,N)}if(typeof I=="function"){var C=this.state,L=C.horizontalScrollDirection,ee=C.scrollLeft,De=C.scrollTop,P=C.scrollUpdateWasRequested,ne=C.verticalScrollDirection;this._callOnScroll(ee,De,L,ne,P)}},R._getHorizontalRangeToRender=function(){var m=this.props,b=m.columnCount,E=m.overscanColumnCount,I=m.overscanColumnsCount,O=m.overscanCount,x=m.rowCount,z=this.state,M=z.horizontalScrollDirection,H=z.isScrolling,A=z.scrollLeft,q=E||I||O||1;if(b===0||x===0)return[0,0,0,0];var $=i(this.props,A,this._instanceProps),K=r(this.props,$,A,this._instanceProps),V=!H||M==="backward"?Math.max(1,q):1,N=!H||M==="forward"?Math.max(1,q):1;return[Math.max(0,$-V),Math.max(0,Math.min(b-1,K+N)),$,K]},R._getVerticalRangeToRender=function(){var m=this.props,b=m.columnCount,E=m.overscanCount,I=m.overscanRowCount,O=m.overscanRowsCount,x=m.rowCount,z=this.state,M=z.isScrolling,H=z.verticalScrollDirection,A=z.scrollTop,q=I||O||E||1;if(b===0||x===0)return[0,0,0,0];var $=p(this.props,A,this._instanceProps),K=g(this.props,$,A,this._instanceProps),V=!M||H==="backward"?Math.max(1,q):1,N=!M||H==="forward"?Math.max(1,q):1;return[Math.max(0,$-V),Math.max(0,Math.min(x-1,K+N)),$,K]},T}(Rs),e.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},e}var Ec=function(e,n){e.children,e.direction,e.height,e.innerTagName,e.outerTagName,e.overscanColumnsCount,e.overscanCount,e.overscanRowsCount,e.width,n.instance},Aa=50,Cs=function(e,n){var i=e.rowCount,r=n.rowMetadataMap,a=n.estimatedRowHeight,o=n.lastMeasuredRowIndex,s=0;if(o>=i&&(o=i-1),o>=0){var l=r[o];s=l.offset+l.size}var u=i-o-1,c=u*a;return s+c},Is=function(e,n){var i=e.columnCount,r=n.columnMetadataMap,a=n.estimatedColumnWidth,o=n.lastMeasuredColumnIndex,s=0;if(o>=i&&(o=i-1),o>=0){var l=r[o];s=l.offset+l.size}var u=i-o-1,c=u*a;return s+c},Ye=function(e,n,i,r){var a,o,s;if(e==="column"?(a=r.columnMetadataMap,o=n.columnWidth,s=r.lastMeasuredColumnIndex):(a=r.rowMetadataMap,o=n.rowHeight,s=r.lastMeasuredRowIndex),i>s){var l=0;if(s>=0){var u=a[s];l=u.offset+u.size}for(var c=s+1;c<=i;c++){var d=o(c);a[c]={offset:l,size:d},l+=d}e==="column"?r.lastMeasuredColumnIndex=i:r.lastMeasuredRowIndex=i}return a[i]},Ma=function(e,n,i,r){var a,o;e==="column"?(a=i.columnMetadataMap,o=i.lastMeasuredColumnIndex):(a=i.rowMetadataMap,o=i.lastMeasuredRowIndex);var s=o>0?a[o].offset:0;return s>=r?xs(e,n,i,o,0,r):Tc(e,n,i,Math.max(0,o),r)},xs=function(e,n,i,r,a,o){for(;a<=r;){var s=a+Math.floor((r-a)/2),l=Ye(e,n,s,i).offset;if(l===o)return s;l<o?a=s+1:l>o&&(r=s-1)}return a>0?a-1:0},Tc=function(e,n,i,r,a){for(var o=e==="column"?n.columnCount:n.rowCount,s=1;r<o&&Ye(e,n,r,i).offset<a;)r+=s,s*=2;return xs(e,n,i,Math.min(r,o-1),Math.floor(r/2),a)},Va=function(e,n,i,r,a,o,s){var l=e==="column"?n.width:n.height,u=Ye(e,n,i,o),c=e==="column"?Is(n,o):Cs(n,o),d=Math.max(0,Math.min(c-l,u.offset)),p=Math.max(0,u.offset-l+s+u.size);switch(r==="smart"&&(a>=p-l&&a<=d+l?r="auto":r="center"),r){case"start":return d;case"end":return p;case"center":return Math.round(p+(d-p)/2);case"auto":default:return a>=p&&a<=d?a:p>d||a<p?p:d}},Cc=Ts({getColumnOffset:function(e,n,i){return Ye("column",e,n,i).offset},getColumnStartIndexForOffset:function(e,n,i){return Ma("column",e,i,n)},getColumnStopIndexForStartIndex:function(e,n,i,r){for(var a=e.columnCount,o=e.width,s=Ye("column",e,n,r),l=i+o,u=s.offset+s.size,c=n;c<a-1&&u<l;)c++,u+=Ye("column",e,c,r).size;return c},getColumnWidth:function(e,n,i){return i.columnMetadataMap[n].size},getEstimatedTotalHeight:Cs,getEstimatedTotalWidth:Is,getOffsetForColumnAndAlignment:function(e,n,i,r,a,o){return Va("column",e,n,i,r,a,o)},getOffsetForRowAndAlignment:function(e,n,i,r,a,o){return Va("row",e,n,i,r,a,o)},getRowOffset:function(e,n,i){return Ye("row",e,n,i).offset},getRowHeight:function(e,n,i){return i.rowMetadataMap[n].size},getRowStartIndexForOffset:function(e,n,i){return Ma("row",e,i,n)},getRowStopIndexForStartIndex:function(e,n,i,r){for(var a=e.rowCount,o=e.height,s=Ye("row",e,n,r),l=i+o,u=s.offset+s.size,c=n;c<a-1&&u<l;)c++,u+=Ye("row",e,c,r).size;return c},initInstanceProps:function(e,n){var i=e,r=i.estimatedColumnWidth,a=i.estimatedRowHeight,o={columnMetadataMap:{},estimatedColumnWidth:r||Aa,estimatedRowHeight:a||Aa,lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,rowMetadataMap:{}};return n.resetAfterColumnIndex=function(s,l){l===void 0&&(l=!0),n.resetAfterIndices({columnIndex:s,shouldForceUpdate:l})},n.resetAfterRowIndex=function(s,l){l===void 0&&(l=!0),n.resetAfterIndices({rowIndex:s,shouldForceUpdate:l})},n.resetAfterIndices=function(s){var l=s.columnIndex,u=s.rowIndex,c=s.shouldForceUpdate,d=c===void 0?!0:c;typeof l=="number"&&(o.lastMeasuredColumnIndex=Math.min(o.lastMeasuredColumnIndex,l-1)),typeof u=="number"&&(o.lastMeasuredRowIndex=Math.min(o.lastMeasuredRowIndex,u-1)),n._getItemStyleCache(-1),d&&n.forceUpdate()},o},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.columnWidth,e.rowHeight}}),Ic=150,xc=function(e,n){return e};function Oc(t){var e,n=t.getItemOffset,i=t.getEstimatedTotalSize,r=t.getItemSize,a=t.getOffsetForIndexAndAlignment,o=t.getStartIndexForOffset,s=t.getStopIndexForStartIndex,l=t.initInstanceProps,u=t.shouldResetStyleCacheOnItemSizeChange,c=t.validateProps;return e=function(d){ze(p,d);function p(_){var h;return h=d.call(this,_)||this,h._instanceProps=l(h.props,D(h)),h._outerRef=void 0,h._resetIsScrollingTimeoutId=null,h.state={instance:D(h),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof h.props.initialScrollOffset=="number"?h.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},h._callOnItemsRendered=void 0,h._callOnItemsRendered=pe(function(v,y,T,R){return h.props.onItemsRendered({overscanStartIndex:v,overscanStopIndex:y,visibleStartIndex:T,visibleStopIndex:R})}),h._callOnScroll=void 0,h._callOnScroll=pe(function(v,y,T){return h.props.onScroll({scrollDirection:v,scrollOffset:y,scrollUpdateWasRequested:T})}),h._getItemStyle=void 0,h._getItemStyle=function(v){var y=h.props,T=y.direction,R=y.itemSize,w=y.layout,m=h._getItemStyleCache(u&&R,u&&w,u&&T),b;if(m.hasOwnProperty(v))b=m[v];else{var E=n(h.props,v,h._instanceProps),I=r(h.props,v,h._instanceProps),O=T==="horizontal"||w==="horizontal",x=T==="rtl",z=O?E:0;m[v]=b={position:"absolute",left:x?void 0:z,right:x?z:void 0,top:O?0:E,height:O?"100%":I,width:O?I:"100%"}}return b},h._getItemStyleCache=void 0,h._getItemStyleCache=pe(function(v,y,T){return{}}),h._onScrollHorizontal=function(v){var y=v.currentTarget,T=y.clientWidth,R=y.scrollLeft,w=y.scrollWidth;h.setState(function(m){if(m.scrollOffset===R)return null;var b=h.props.direction,E=R;if(b==="rtl")switch(hn()){case"negative":E=-R;break;case"positive-descending":E=w-T-R;break}return E=Math.max(0,Math.min(E,w-T)),{isScrolling:!0,scrollDirection:m.scrollOffset<R?"forward":"backward",scrollOffset:E,scrollUpdateWasRequested:!1}},h._resetIsScrollingDebounced)},h._onScrollVertical=function(v){var y=v.currentTarget,T=y.clientHeight,R=y.scrollHeight,w=y.scrollTop;h.setState(function(m){if(m.scrollOffset===w)return null;var b=Math.max(0,Math.min(w,R-T));return{isScrolling:!0,scrollDirection:m.scrollOffset<b?"forward":"backward",scrollOffset:b,scrollUpdateWasRequested:!1}},h._resetIsScrollingDebounced)},h._outerRefSetter=function(v){var y=h.props.outerRef;h._outerRef=v,typeof y=="function"?y(v):y!=null&&typeof y=="object"&&y.hasOwnProperty("current")&&(y.current=v)},h._resetIsScrollingDebounced=function(){h._resetIsScrollingTimeoutId!==null&&dn(h._resetIsScrollingTimeoutId),h._resetIsScrollingTimeoutId=Es(h._resetIsScrolling,Ic)},h._resetIsScrolling=function(){h._resetIsScrollingTimeoutId=null,h.setState({isScrolling:!1},function(){h._getItemStyleCache(-1,null)})},h}p.getDerivedStateFromProps=function(h,v){return zc(h,v),c(h),null};var g=p.prototype;return g.scrollTo=function(h){h=Math.max(0,h),this.setState(function(v){return v.scrollOffset===h?null:{scrollDirection:v.scrollOffset<h?"forward":"backward",scrollOffset:h,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},g.scrollToItem=function(h,v){v===void 0&&(v="auto");var y=this.props.itemCount,T=this.state.scrollOffset;h=Math.max(0,Math.min(h,y-1)),this.scrollTo(a(this.props,h,v,T,this._instanceProps))},g.componentDidMount=function(){var h=this.props,v=h.direction,y=h.initialScrollOffset,T=h.layout;if(typeof y=="number"&&this._outerRef!=null){var R=this._outerRef;v==="horizontal"||T==="horizontal"?R.scrollLeft=y:R.scrollTop=y}this._callPropsCallbacks()},g.componentDidUpdate=function(){var h=this.props,v=h.direction,y=h.layout,T=this.state,R=T.scrollOffset,w=T.scrollUpdateWasRequested;if(w&&this._outerRef!=null){var m=this._outerRef;if(v==="horizontal"||y==="horizontal")if(v==="rtl")switch(hn()){case"negative":m.scrollLeft=-R;break;case"positive-ascending":m.scrollLeft=R;break;default:var b=m.clientWidth,E=m.scrollWidth;m.scrollLeft=E-b-R;break}else m.scrollLeft=R;else m.scrollTop=R}this._callPropsCallbacks()},g.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&dn(this._resetIsScrollingTimeoutId)},g.render=function(){var h=this.props,v=h.children,y=h.className,T=h.direction,R=h.height,w=h.innerRef,m=h.innerElementType,b=h.innerTagName,E=h.itemCount,I=h.itemData,O=h.itemKey,x=O===void 0?xc:O,z=h.layout,M=h.outerElementType,H=h.outerTagName,A=h.style,q=h.useIsScrolling,$=h.width,K=this.state.isScrolling,V=T==="horizontal"||z==="horizontal",N=V?this._onScrollHorizontal:this._onScrollVertical,C=this._getRangeToRender(),L=C[0],ee=C[1],De=[];if(E>0)for(var P=L;P<=ee;P++)De.push(Rt(v,{data:I,key:x(P,I),index:P,isScrolling:q?K:void 0,style:this._getItemStyle(P)}));var ne=i(this.props,this._instanceProps);return Rt(M||H||"div",{className:y,onScroll:N,ref:this._outerRefSetter,style:J({position:"relative",height:R,width:$,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:T},A)},Rt(m||b||"div",{children:De,ref:w,style:{height:V?"100%":ne,pointerEvents:K?"none":void 0,width:V?ne:"100%"}}))},g._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var h=this.props.itemCount;if(h>0){var v=this._getRangeToRender(),y=v[0],T=v[1],R=v[2],w=v[3];this._callOnItemsRendered(y,T,R,w)}}if(typeof this.props.onScroll=="function"){var m=this.state,b=m.scrollDirection,E=m.scrollOffset,I=m.scrollUpdateWasRequested;this._callOnScroll(b,E,I)}},g._getRangeToRender=function(){var h=this.props,v=h.itemCount,y=h.overscanCount,T=this.state,R=T.isScrolling,w=T.scrollDirection,m=T.scrollOffset;if(v===0)return[0,0,0,0];var b=o(this.props,m,this._instanceProps),E=s(this.props,b,m,this._instanceProps),I=!R||w==="backward"?Math.max(1,y):1,O=!R||w==="forward"?Math.max(1,y):1;return[Math.max(0,b-I),Math.max(0,Math.min(v-1,E+O)),b,E]},p}(Rs),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var zc=function(e,n){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,n.instance},Nc=50,bt=function(e,n,i){var r=e,a=r.itemSize,o=i.itemMetadataMap,s=i.lastMeasuredIndex;if(n>s){var l=0;if(s>=0){var u=o[s];l=u.offset+u.size}for(var c=s+1;c<=n;c++){var d=a(c);o[c]={offset:l,size:d},l+=d}i.lastMeasuredIndex=n}return o[n]},Dc=function(e,n,i){var r=n.itemMetadataMap,a=n.lastMeasuredIndex,o=a>0?r[a].offset:0;return o>=i?Os(e,n,a,0,i):Ac(e,n,Math.max(0,a),i)},Os=function(e,n,i,r,a){for(;r<=i;){var o=r+Math.floor((i-r)/2),s=bt(e,o,n).offset;if(s===a)return o;s<a?r=o+1:s>a&&(i=o-1)}return r>0?r-1:0},Ac=function(e,n,i,r){for(var a=e.itemCount,o=1;i<a&&bt(e,i,n).offset<r;)i+=o,o*=2;return Os(e,n,Math.min(i,a-1),Math.floor(i/2),r)},Pa=function(e,n){var i=e.itemCount,r=n.itemMetadataMap,a=n.estimatedItemSize,o=n.lastMeasuredIndex,s=0;if(o>=i&&(o=i-1),o>=0){var l=r[o];s=l.offset+l.size}var u=i-o-1,c=u*a;return s+c},Mc=Oc({getItemOffset:function(e,n,i){return bt(e,n,i).offset},getItemSize:function(e,n,i){return i.itemMetadataMap[n].size},getEstimatedTotalSize:Pa,getOffsetForIndexAndAlignment:function(e,n,i,r,a){var o=e.direction,s=e.height,l=e.layout,u=e.width,c=o==="horizontal"||l==="horizontal",d=c?u:s,p=bt(e,n,a),g=Pa(e,a),_=Math.max(0,Math.min(g-d,p.offset)),h=Math.max(0,p.offset-d+p.size);switch(i==="smart"&&(r>=h-d&&r<=_+d?i="auto":i="center"),i){case"start":return _;case"end":return h;case"center":return Math.round(h+(_-h)/2);case"auto":default:return r>=h&&r<=_?r:r<h?h:_}},getStartIndexForOffset:function(e,n,i){return Dc(e,i,n)},getStopIndexForStartIndex:function(e,n,i,r){for(var a=e.direction,o=e.height,s=e.itemCount,l=e.layout,u=e.width,c=a==="horizontal"||l==="horizontal",d=c?u:o,p=bt(e,n,r),g=i+d,_=p.offset+p.size,h=n;h<s-1&&_<g;)h++,_+=bt(e,h,r).size;return h},initInstanceProps:function(e,n){var i=e,r=i.estimatedItemSize,a={itemMetadataMap:{},estimatedItemSize:r||Nc,lastMeasuredIndex:-1};return n.resetAfterIndex=function(o,s){s===void 0&&(s=!0),a.lastMeasuredIndex=Math.min(a.lastMeasuredIndex,o-1),n._getItemStyleCache(-1),s&&n.forceUpdate()},a},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}}),Vc=Ts({getColumnOffset:function(e,n){var i=e.columnWidth;return n*i},getColumnWidth:function(e,n){var i=e.columnWidth;return i},getRowOffset:function(e,n){var i=e.rowHeight;return n*i},getRowHeight:function(e,n){var i=e.rowHeight;return i},getEstimatedTotalHeight:function(e){var n=e.rowCount,i=e.rowHeight;return i*n},getEstimatedTotalWidth:function(e){var n=e.columnCount,i=e.columnWidth;return i*n},getOffsetForColumnAndAlignment:function(e,n,i,r,a,o){var s=e.columnCount,l=e.columnWidth,u=e.width,c=Math.max(0,s*l-u),d=Math.min(c,n*l),p=Math.max(0,n*l-u+o+l);switch(i==="smart"&&(r>=p-u&&r<=d+u?i="auto":i="center"),i){case"start":return d;case"end":return p;case"center":var g=Math.round(p+(d-p)/2);return g<Math.ceil(u/2)?0:g>c+Math.floor(u/2)?c:g;case"auto":default:return r>=p&&r<=d?r:p>d||r<p?p:d}},getOffsetForRowAndAlignment:function(e,n,i,r,a,o){var s=e.rowHeight,l=e.height,u=e.rowCount,c=Math.max(0,u*s-l),d=Math.min(c,n*s),p=Math.max(0,n*s-l+o+s);switch(i==="smart"&&(r>=p-l&&r<=d+l?i="auto":i="center"),i){case"start":return d;case"end":return p;case"center":var g=Math.round(p+(d-p)/2);return g<Math.ceil(l/2)?0:g>c+Math.floor(l/2)?c:g;case"auto":default:return r>=p&&r<=d?r:p>d||r<p?p:d}},getColumnStartIndexForOffset:function(e,n){var i=e.columnWidth,r=e.columnCount;return Math.max(0,Math.min(r-1,Math.floor(n/i)))},getColumnStopIndexForStartIndex:function(e,n,i){var r=e.columnWidth,a=e.columnCount,o=e.width,s=n*r,l=Math.ceil((o+i-s)/r);return Math.max(0,Math.min(a-1,n+l-1))},getRowStartIndexForOffset:function(e,n){var i=e.rowHeight,r=e.rowCount;return Math.max(0,Math.min(r-1,Math.floor(n/i)))},getRowStopIndexForStartIndex:function(e,n,i){var r=e.rowHeight,a=e.rowCount,o=e.height,s=n*r,l=Math.ceil((o+i-s)/r);return Math.max(0,Math.min(a-1,n+l-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.columnWidth,e.rowHeight}});const Vn=window.React;var zs=function(t){ze(e,t);function e(i){var r;return r=t.call(this,i)||this,r.renderHeaderRow=r.renderHeaderRow.bind(D(r)),r.renderFrozenRow=r.renderFrozenRow.bind(D(r)),r._setRef=r._setRef.bind(D(r)),r}var n=e.prototype;return n.scrollTo=function(r){this.headerRef&&(this.headerRef.scrollLeft=r)},n.renderHeaderRow=function(r,a){var o=this.props,s=o.columns,l=o.headerRenderer;if(r<=0)return null;var u={width:"100%",height:r};return l({style:u,columns:s,headerIndex:a})},n.renderFrozenRow=function(r,a){var o=this.props,s=o.columns,l=o.rowHeight,u=o.rowRenderer,c={width:"100%",height:l},d=-a-1;return u({style:c,columns:s,rowData:r,rowIndex:d})},n.render=function(){var r=this.props,a=r.className,o=r.width,s=r.height,l=r.rowWidth,u=r.headerHeight,c=r.frozenData;if(s<=0)return null;var d={width:o,height:s,position:"relative",overflow:"hidden"},p={width:l,height:s},g=Array.isArray(u)?u:[u];return Vn.createElement("div",{role:"grid",ref:this._setRef,className:a,style:d},Vn.createElement("div",{role:"rowgroup",style:p},g.map(this.renderHeaderRow),c.map(this.renderFrozenRow)))},n._setRef=function(r){this.headerRef=r},e}(Vn.PureComponent);zs.propTypes={className:f.string,width:f.number.isRequired,height:f.number.isRequired,headerHeight:f.oneOfType([f.number,f.arrayOf(f.number)]).isRequired,rowWidth:f.number.isRequired,rowHeight:f.number.isRequired,columns:f.arrayOf(f.object).isRequired,data:f.array.isRequired,frozenData:f.array,headerRenderer:f.func.isRequired,rowRenderer:f.func.isRequired};function Ha(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Pc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ha(n,!0).forEach(function(i){j(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ha(n).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const Xt=window.React;function ut(t,e){return Xt.isValidElement(t)?e?Xt.cloneElement(t,e):t:typeof t=="function"?Xt.createElement(t,e):null}function Hc(t){var e=[];return Xt.Children.forEach(t,function(n){if(Xt.isValidElement(n)&&n.key){var i=Pc({},n.props,{key:n.key});e.push(i)}}),e}function Ns(t,e,n){if(n===void 0&&(n=!0),t===e||t===null&&e===null)return!0;if(t===null||e===null||typeof t!="object"||typeof e!="object")return!1;var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(var a=0;a<i.length;a++){var o=i[a];if(!(o==="_owner"&&t.$$typeof)){var s=t[o],l=e[o],u=typeof s;if(u!==typeof l)return!1;if(!(u==="function"&&n)){if(u==="object"){if(Ns(s,l,n))continue;return!1}if(s!==l)return!1}}}return!0}function Le(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return typeof t=="function"?t.apply(void 0,n):t}function Lc(t){return Array.isArray(t.children)&&t.children.length>0}function qc(t,e,n,i){if(n===void 0&&(n={}),i===void 0&&(i="id"),!e||!e.length)return t;var r=[],a=new Set;e.forEach(function(l){return a.add(l)});var o=[].concat(t);o.forEach(function(l){return n[l[i]]=0});for(var s=function(){var u=o.shift();r.push(u),a.has(u[i])&&Array.isArray(u.children)&&u.children.length>0&&(o=[].concat(u.children,o),u.children.forEach(function(c){return n[c[i]]=n[u[i]]+1}))};o.length>0;)s();return r}function Pn(t){return Array.isArray(t)?[].concat(t):[]}function ye(){}function kc(t){return typeof t=="string"?t:t==null?"":t.toString?t.toString():""}function Fc(t){for(var e=t.split("."),n=[],i=0;i<e.length;i++){for(var r=e[i];r[r.length-1]==="\\"&&e[i+1]!==void 0;)r=r.slice(0,-1)+".",r+=e[++i];n.push(r)}return n}function $c(t,e,n){if(t===null||typeof t!="object"||typeof e!="string")return n;for(var i=Fc(e),r=0;r<i.length;r++){if(!Object.prototype.propertyIsEnumerable.call(t,i[r]))return n;if(t=t[i[r]],t==null){if(r!==i.length-1)return n;break}}return t}var Wc=function(e,n){n===void 0&&(n=0);var i;return function(){for(var r=this,a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];clearTimeout(i),i=setTimeout(function(){return e.apply(r,o)},n)}},Bc=function(e,n){var i,r,a;return function(){var o=this,s=arguments;i?(clearTimeout(r),r=setTimeout(function(){Date.now()-a>=n&&(e.apply(o,s),a=Date.now())},Math.max(n-(Date.now()-a),0))):(e.apply(o,s),a=Date.now(),i=!0)}},xr;function jc(t){if((!xr&&xr!==0||t)&&typeof window!="undefined"&&window.document&&window.document.createElement){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),xr=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return xr}function Kc(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)"+e+"(?!\\S)"))||(t.className+=" "+e)}function Uc(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)"+e+"(?!\\S)","g"),"")}function Ds(t,e){return typeof e=="function"?t.reduce(function(n,i,r){return n+e({rowData:i,rowIndex:r})},0):t.length*e}function La(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Yc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?La(n,!0).forEach(function(i){j(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):La(n).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const Or=window.React;var Lr=function(t){ze(e,t);function e(i){var r;return r=t.call(this,i)||this,r._setHeaderRef=r._setHeaderRef.bind(D(r)),r._setBodyRef=r._setBodyRef.bind(D(r)),r._setInnerRef=r._setInnerRef.bind(D(r)),r._itemKey=r._itemKey.bind(D(r)),r._getBodyWidth=r._getBodyWidth.bind(D(r)),r._handleItemsRendered=r._handleItemsRendered.bind(D(r)),r._resetColumnWidthCache=pe(function(a){!r.props.estimatedRowHeight||r.bodyRef&&r.bodyRef.resetAfterColumnIndex(0,!1)}),r._getEstimatedTotalRowsHeight=pe(Ds),r.renderRow=r.renderRow.bind(D(r)),r}var n=e.prototype;return n.resetAfterRowIndex=function(r,a){r===void 0&&(r=0),!!this.props.estimatedRowHeight&&this.bodyRef&&this.bodyRef.resetAfterRowIndex(r,a)},n.forceUpdateTable=function(){this.headerRef&&this.headerRef.forceUpdate(),this.bodyRef&&this.bodyRef.forceUpdate()},n.scrollToPosition=function(r){this.headerRef&&this.headerRef.scrollTo(r.scrollLeft),this.bodyRef&&this.bodyRef.scrollTo(r)},n.scrollToTop=function(r){this.bodyRef&&this.bodyRef.scrollTo({scrollTop:r})},n.scrollToLeft=function(r){this.headerRef&&this.headerRef.scrollTo(r),this.bodyRef&&this.bodyRef.scrollToPosition({scrollLeft:r})},n.scrollToRow=function(r,a){r===void 0&&(r=0),a===void 0&&(a="auto"),this.bodyRef&&this.bodyRef.scrollToItem({rowIndex:r,align:a})},n.getTotalRowsHeight=function(){var r=this.props,a=r.data,o=r.rowHeight,s=r.estimatedRowHeight;return s?this.innerRef&&this.innerRef.clientHeight||this._getEstimatedTotalRowsHeight(a,s):a.length*o},n.renderRow=function(r){var a=this.props,o=a.data,s=a.columns,l=a.rowRenderer,u=o[r.rowIndex];return l(Yc({},r,{columns:s,rowData:u}))},n.render=function(){var r=this.props,a=r.containerStyle,o=r.classPrefix,s=r.className,l=r.data,u=r.frozenData,c=r.width,d=r.height,p=r.rowHeight,g=r.estimatedRowHeight,_=r.getRowHeight,h=r.headerWidth,v=r.bodyWidth,y=r.useIsScrolling,T=r.onScroll,R=r.hoveredRowKey,w=r.overscanRowCount;r.style,r.onScrollbarPresenceChange;var m=we(r,["containerStyle","classPrefix","className","data","frozenData","width","height","rowHeight","estimatedRowHeight","getRowHeight","headerWidth","bodyWidth","useIsScrolling","onScroll","hoveredRowKey","overscanRowCount","style","onScrollbarPresenceChange"]),b=this._getHeaderHeight(),E=u.length,I=p*E,O=Ue(o+"__table",s),x=a?{style:a}:null,z=g?Cc:Vc;return this._resetColumnWidthCache(v),Or.createElement("div",J({role:"table",className:O},x),Or.createElement(z,J({},m,{className:o+"__body",ref:this._setBodyRef,innerRef:this._setInnerRef,itemKey:this._itemKey,data:l,frozenData:u,width:c,height:Math.max(d-b-I,0),rowHeight:g?_:p,estimatedRowHeight:typeof g=="function"?void 0:g,rowCount:l.length,overscanRowCount:w,columnWidth:g?this._getBodyWidth:v,columnCount:1,overscanColumnCount:0,useIsScrolling:y,hoveredRowKey:R,onScroll:T,onItemsRendered:this._handleItemsRendered,children:this.renderRow})),b+I>0&&Or.createElement(zs,J({},m,{className:o+"__header",ref:this._setHeaderRef,data:l,frozenData:u,width:c,height:Math.min(b+I,d),rowWidth:h,rowHeight:p,headerHeight:this.props.headerHeight,headerRenderer:this.props.headerRenderer,rowRenderer:this.props.rowRenderer,hoveredRowKey:E>0?R:null})))},n._setHeaderRef=function(r){this.headerRef=r},n._setBodyRef=function(r){this.bodyRef=r},n._setInnerRef=function(r){this.innerRef=r},n._itemKey=function(r){var a=r.rowIndex,o=this.props,s=o.data,l=o.rowKey;return s[a][l]},n._getHeaderHeight=function(){var r=this.props.headerHeight;return Array.isArray(r)?r.reduce(function(a,o){return a+o},0):r},n._getBodyWidth=function(){return this.props.bodyWidth},n._handleItemsRendered=function(r){var a=r.overscanRowStartIndex,o=r.overscanRowStopIndex,s=r.visibleRowStartIndex,l=r.visibleRowStopIndex;this.props.onRowsRendered({overscanStartIndex:a,overscanStopIndex:o,startIndex:s,stopIndex:l})},e}(Or.PureComponent);Lr.propTypes={containerStyle:f.object,classPrefix:f.string,className:f.string,width:f.number.isRequired,height:f.number.isRequired,headerHeight:f.oneOfType([f.number,f.arrayOf(f.number)]).isRequired,headerWidth:f.number.isRequired,bodyWidth:f.number.isRequired,rowHeight:f.number.isRequired,estimatedRowHeight:f.oneOfType([f.func,f.number]),getRowHeight:f.func,columns:f.arrayOf(f.object).isRequired,data:f.array.isRequired,frozenData:f.array,rowKey:f.oneOfType([f.string,f.number]).isRequired,useIsScrolling:f.bool,overscanRowCount:f.number,hoveredRowKey:f.oneOfType([f.string,f.number]),style:f.object,onScrollbarPresenceChange:f.func,onScroll:f.func,onRowsRendered:f.func,headerRenderer:f.func.isRequired,rowRenderer:f.func.isRequired};const qa=window.React;var Bi=function(e){var n=e.className,i=e.style,r=e.columns,a=e.headerIndex,o=e.cellRenderer,s=e.headerRenderer,l=e.expandColumnKey,u=e.expandIcon,c=e.tagName,d=we(e,["className","style","columns","headerIndex","cellRenderer","headerRenderer","expandColumnKey","expandIcon","tagName"]),p=r.map(function(g,_){return o({columns:r,column:g,columnIndex:_,headerIndex:a,expandIcon:g.key===l&&qa.createElement(u,null)})});return s&&(p=ut(s,{cells:p,columns:r,headerIndex:a})),qa.createElement(c,J({},d,{className:n,style:i}),p)};Bi.defaultProps={tagName:"div"};Bi.propTypes={isScrolling:f.bool,className:f.string,style:f.object,columns:f.arrayOf(f.object).isRequired,headerIndex:f.number,cellRenderer:f.func,headerRenderer:f.oneOfType([f.func,f.element]),expandColumnKey:f.string,expandIcon:f.func,tagName:f.elementType};const Hn=window.React;var ji=function(t){ze(e,t);function e(i){var r;return r=t.call(this,i)||this,r.state={measured:!1},r._setRef=r._setRef.bind(D(r)),r._handleExpand=r._handleExpand.bind(D(r)),r}var n=e.prototype;return n.componentDidMount=function(){this.props.estimatedRowHeight&&this.props.rowIndex>=0&&this._measureHeight(!0)},n.componentDidUpdate=function(r,a){var o=this;this.props.estimatedRowHeight&&this.props.rowIndex>=0&&!this.props.getIsResetting()&&this.state.measured&&a.measured&&this.setState({measured:!1},function(){return o._measureHeight()})},n.render=function(){var r=this.props,a=r.isScrolling,o=r.className,s=r.style,l=r.columns,u=r.rowIndex,c=r.rowData,d=r.expandColumnKey,p=r.depth,g=r.rowEventHandlers,_=r.estimatedRowHeight,h=r.rowRenderer,v=r.cellRenderer,y=r.expandIconRenderer,T=r.tagName;r.rowKey,r.getIsResetting,r.onRowHover,r.onRowExpand,r.onRowHeightChange;var R=we(r,["isScrolling","className","style","columns","rowIndex","rowData","expandColumnKey","depth","rowEventHandlers","estimatedRowHeight","rowRenderer","cellRenderer","expandIconRenderer","tagName","rowKey","getIsResetting","onRowHover","onRowExpand","onRowHeightChange"]),w=y({rowData:c,rowIndex:u,depth:p,onExpand:this._handleExpand}),m=l.map(function(I,O){return v({isScrolling:a,columns:l,column:I,columnIndex:O,rowData:c,rowIndex:u,expandIcon:I.key===d&&w})});h&&(m=ut(h,{isScrolling:a,cells:m,columns:l,rowData:c,rowIndex:u,depth:p}));var b=this._getEventHandlers(g);if(_&&u>=0){s.height;var E=we(s,["height"]);return Hn.createElement(T,J({},R,{ref:this._setRef,className:o,style:this.state.measured?s:E},this.state.measured&&b),m)}return Hn.createElement(T,J({},R,{className:o,style:s},b),m)},n._setRef=function(r){this.ref=r},n._handleExpand=function(r){var a=this.props,o=a.onRowExpand,s=a.rowData,l=a.rowIndex,u=a.rowKey;o&&o({expanded:r,rowData:s,rowIndex:l,rowKey:u})},n._measureHeight=function(r){if(!!this.ref){var a=this.props,o=a.style,s=a.rowKey,l=a.onRowHeightChange,u=a.rowIndex,c=a.columns,d=this.ref.getBoundingClientRect().height;this.setState({measured:!0},function(){(r||d!==o.height)&&l(s,d,u,c[0]&&!c[0].__placeholder__&&c[0].frozen)})}},n._getEventHandlers=function(r){r===void 0&&(r={});var a=this.props,o=a.rowData,s=a.rowIndex,l=a.rowKey,u=a.onRowHover,c={};if(Object.keys(r).forEach(function(g){var _=r[g];typeof _=="function"&&(c[g]=function(h){_({rowData:o,rowIndex:s,rowKey:l,event:h})})}),u){var d=c.onMouseEnter;c.onMouseEnter=function(g){u({hovered:!0,rowData:o,rowIndex:s,rowKey:l,event:g}),d&&d(g)};var p=c.onMouseLeave;c.onMouseLeave=function(g){u({hovered:!1,rowData:o,rowIndex:s,rowKey:l,event:g}),p&&p(g)}}return c},e}(Hn.PureComponent);ji.defaultProps={tagName:"div"};ji.propTypes={isScrolling:f.bool,className:f.string,style:f.object,columns:f.arrayOf(f.object).isRequired,rowData:f.object.isRequired,rowIndex:f.number.isRequired,rowKey:f.oneOfType([f.string,f.number]),expandColumnKey:f.string,depth:f.number,rowEventHandlers:f.object,rowRenderer:f.oneOfType([f.func,f.element]),cellRenderer:f.func,expandIconRenderer:f.func,estimatedRowHeight:f.oneOfType([f.number,f.func]),getIsResetting:f.func,onRowHover:f.func,onRowExpand:f.func,onRowHeightChange:f.func,tagName:f.elementType};const Gc=window.React;var As=function(e){var n=e.className,i=e.column;return e.columnIndex,Gc.createElement("div",{className:n},i.title)};As.propTypes={className:f.string,column:f.object,columnIndex:f.number};const ka=window.React;var Ms=function(e){var n=e.className,i=e.cellData;return e.column,e.columnIndex,e.rowData,e.rowIndex,ka.createElement("div",{className:n},ka.isValidElement(i)?i:kc(i))};Ms.propTypes={className:f.string,cellData:f.any,column:f.object,columnIndex:f.number,rowData:f.object,rowIndex:f.number};const Xc=window.React;var Yt={LEFT:"left",CENTER:"center",RIGHT:"right"},ct={LEFT:"left",RIGHT:"right",DEFAULT:!0,NONE:!1},he=function(t){ze(e,t);function e(){return t.apply(this,arguments)||this}return e}(Xc.Component);he.propTypes={className:f.oneOfType([f.string,f.func]),headerClassName:f.oneOfType([f.string,f.func]),style:f.object,title:f.string,dataKey:f.string,dataGetter:f.func,align:f.oneOf(["left","center","right"]),flexGrow:f.number,flexShrink:f.number,width:f.number.isRequired,maxWidth:f.number,minWidth:f.number,frozen:f.oneOf(["left","right",!0,!1]),hidden:f.bool,resizable:f.bool,sortable:f.bool,cellRenderer:f.oneOfType([f.func,f.element]),headerRenderer:f.oneOfType([f.func,f.element])};he.Alignment=Yt;he.FrozenDirection=ct;var oe={ASC:"asc",DESC:"desc"};const Fa=window.React;var Ki=function(t){ze(e,t);function e(i){var r;return r=t.call(this,i)||this,r._handleClick=r._handleClick.bind(D(r)),r}var n=e.prototype;return n.render=function(){var r=this.props,a=r.expandable,o=r.expanded,s=r.indentSize,l=r.depth,u=r.onExpand,c=we(r,["expandable","expanded","indentSize","depth","onExpand"]);if(!a&&s===0)return null;var d=Ue("BaseTable__expand-icon",{"BaseTable__expand-icon--expanded":o});return Fa.createElement("div",J({},c,{className:d,onClick:a&&u?this._handleClick:null,style:{fontFamily:"initial",cursor:"pointer",userSelect:"none",width:"16px",minWidth:"16px",height:"16px",lineHeight:"16px",fontSize:"16px",textAlign:"center",transition:"transform 0.15s ease-out",transform:"rotate("+(a&&o?90:0)+"deg)",marginLeft:l*s}}),a&&"\u25B8")},n._handleClick=function(r){r.stopPropagation(),r.preventDefault();var a=this.props,o=a.onExpand,s=a.expanded;o(!s)},e}(Fa.PureComponent);Ki.defaultProps={depth:0,indentSize:16};Ki.propTypes={expandable:f.bool,expanded:f.bool,indentSize:f.number,depth:f.number,onExpand:f.func};function $a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Jc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$a(n,!0).forEach(function(i){j(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$a(n).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const Qc=window.React;var Vs=function(e){var n=e.sortOrder,i=e.className,r=e.style,a=Ue("BaseTable__sort-indicator",i,{"BaseTable__sort-indicator--descending":n===oe.DESC});return Qc.createElement("div",{className:a,style:Jc({userSelect:"none",width:"16px",height:"16px",lineHeight:"16px",textAlign:"center"},r)},n===oe.DESC?"\u2193":"\u2191")};Vs.propTypes={sortOrder:f.oneOf([oe.ASC,oe.DESC]),className:f.string,style:f.object};function Wa(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Zc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wa(n,!0).forEach(function(i){j(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wa(n).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const Ba=window.React;var Ln=null;function ed(t){if(!!t){var e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&Kc(t.body,"react-draggable-transparent-selection")}}function ja(t){if(!!t)try{if(t.body&&Uc(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{var e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}var qe={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},Qe=qe.mouse,Ui=function(t){ze(e,t);function e(i){var r;return r=t.call(this,i)||this,r.isDragging=!1,r.lastX=Ln,r.width=0,r._setHandleRef=r._setHandleRef.bind(D(r)),r._handleClick=r._handleClick.bind(D(r)),r._handleMouseDown=r._handleMouseDown.bind(D(r)),r._handleMouseUp=r._handleMouseUp.bind(D(r)),r._handleTouchStart=r._handleTouchStart.bind(D(r)),r._handleTouchEnd=r._handleTouchEnd.bind(D(r)),r._handleDragStart=r._handleDragStart.bind(D(r)),r._handleDragStop=r._handleDragStop.bind(D(r)),r._handleDrag=r._handleDrag.bind(D(r)),r}var n=e.prototype;return n.componentWillUnmount=function(){if(this.handleRef){var r=this.handleRef.ownerDocument;r.removeEventListener(qe.mouse.move,this._handleDrag),r.removeEventListener(qe.mouse.stop,this._handleDragStop),r.removeEventListener(qe.touch.move,this._handleDrag),r.removeEventListener(qe.touch.stop,this._handleDragStop),ja(r)}},n.render=function(){var r=this.props,a=r.style;r.column,r.onResizeStart,r.onResize,r.onResizeStop,r.minWidth;var o=we(r,["style","column","onResizeStart","onResize","onResizeStop","minWidth"]);return Ba.createElement("div",J({},o,{ref:this._setHandleRef,onClick:this._handleClick,onMouseDown:this._handleMouseDown,onMouseUp:this._handleMouseUp,onTouchStart:this._handleTouchStart,onTouchEnd:this._handleTouchEnd,style:Zc({userSelect:"none",touchAction:"none",position:"absolute",top:0,bottom:0,right:0,cursor:"col-resize"},a)}))},n._setHandleRef=function(r){this.handleRef=r},n._handleClick=function(r){r.stopPropagation()},n._handleMouseDown=function(r){Qe=qe.mouse,this._handleDragStart(r)},n._handleMouseUp=function(r){Qe=qe.mouse,this._handleDragStop(r)},n._handleTouchStart=function(r){Qe=qe.touch,this._handleDragStart(r)},n._handleTouchEnd=function(r){Qe=qe.touch,this._handleDragStop(r)},n._handleDragStart=function(r){if(!(typeof r.button=="number"&&r.button!==0)){this.isDragging=!0,this.lastX=Ln,this.width=this.props.column.width,this.props.onResizeStart(this.props.column);var a=this.handleRef.ownerDocument;ed(a),a.addEventListener(Qe.move,this._handleDrag),a.addEventListener(Qe.stop,this._handleDragStop)}},n._handleDragStop=function(r){if(!!this.isDragging){this.isDragging=!1,this.props.onResizeStop(this.props.column);var a=this.handleRef.ownerDocument;ja(a),a.removeEventListener(Qe.move,this._handleDrag),a.removeEventListener(Qe.stop,this._handleDragStop)}},n._handleDrag=function(r){var a=r.clientX;r.type===qe.touch.move&&(r.preventDefault(),r.targetTouches&&r.targetTouches[0]&&(a=r.targetTouches[0].clientX));var o=this.handleRef.offsetParent,s=o.getBoundingClientRect(),l=a+o.scrollLeft-s.left;if(this.lastX===Ln){this.lastX=l;return}var u=this.props,c=u.column,d=u.minWidth,p=c.width,g=c.maxWidth,_=c.minWidth,h=_===void 0?d:_,v=l-this.lastX;if(!!v){this.width=this.width+v,this.lastX=l;var y=this.width;g&&y>g?y=g:y<h&&(y=h),y!==p&&this.props.onResize(c,y)}},e}(Ba.PureComponent);Ui.defaultProps={onResizeStart:ye,onResize:ye,onResizeStop:ye,minWidth:30};Ui.propTypes={style:f.object,column:f.object,onResizeStart:f.func,onResize:f.func,onResizeStop:f.func,minWidth:f.number};function Ka(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function zr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ka(n,!0).forEach(function(i){j(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ka(n).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var Jt=function(){function t(n,i){this._origColumns=[],this.reset(n,i)}var e=t.prototype;return e._cache=function(i,r){return i in this._cached?this._cached[i]:(this._cached[i]=r(),this._cached[i])},e.reset=function(i,r){var a=this;this._columns=i.map(function(o){var s=o.width;if(o.resizable){var l=a._origColumns.findIndex(function(u){return u.key===o.key});l>=0&&a._origColumns[l].width===o.width&&(s=a._columns[l].width)}return zr({},o,{width:s})}),this._origColumns=i,this._fixed=r,this._cached={},this._columnStyles=this.recomputeColumnStyles()},e.resetCache=function(){this._cached={}},e.getOriginalColumns=function(){return this._origColumns},e.getColumns=function(){return this._columns},e.getVisibleColumns=function(){var i=this;return this._cache("visibleColumns",function(){return i._columns.filter(function(r){return!r.hidden})})},e.hasFrozenColumns=function(){var i=this;return this._cache("hasFrozenColumns",function(){return i._fixed&&i.getVisibleColumns().some(function(r){return!!r.frozen})})},e.hasLeftFrozenColumns=function(){var i=this;return this._cache("hasLeftFrozenColumns",function(){return i._fixed&&i.getVisibleColumns().some(function(r){return r.frozen===ct.LEFT||r.frozen===!0})})},e.hasRightFrozenColumns=function(){var i=this;return this._cache("hasRightFrozenColumns",function(){return i._fixed&&i.getVisibleColumns().some(function(r){return r.frozen===ct.RIGHT})})},e.getMainColumns=function(){var i=this;return this._cache("mainColumns",function(){var r=i.getVisibleColumns();if(!i.hasFrozenColumns())return r;var a=[];return i.getLeftFrozenColumns().forEach(function(o){var s;a.push(zr({},o,(s={},s[t.PlaceholderKey]=!0,s)))}),i.getVisibleColumns().forEach(function(o){o.frozen||a.push(o)}),i.getRightFrozenColumns().forEach(function(o){var s;a.push(zr({},o,(s={},s[t.PlaceholderKey]=!0,s)))}),a})},e.getLeftFrozenColumns=function(){var i=this;return this._cache("leftFrozenColumns",function(){return i._fixed?i.getVisibleColumns().filter(function(r){return r.frozen===ct.LEFT||r.frozen===!0}):[]})},e.getRightFrozenColumns=function(){var i=this;return this._cache("rightFrozenColumns",function(){return i._fixed?i.getVisibleColumns().filter(function(r){return r.frozen===ct.RIGHT}):[]})},e.getColumn=function(i){var r=this._columns.findIndex(function(a){return a.key===i});return this._columns[r]},e.getColumnsWidth=function(){var i=this;return this._cache("columnsWidth",function(){return i.recomputeColumnsWidth(i.getVisibleColumns())})},e.getLeftFrozenColumnsWidth=function(){var i=this;return this._cache("leftFrozenColumnsWidth",function(){return i.recomputeColumnsWidth(i.getLeftFrozenColumns())})},e.getRightFrozenColumnsWidth=function(){var i=this;return this._cache("rightFrozenColumnsWidth",function(){return i.recomputeColumnsWidth(i.getRightFrozenColumns())})},e.recomputeColumnsWidth=function(i){return i.reduce(function(r,a){return r+a.width},0)},e.setColumnWidth=function(i,r){var a=this.getColumn(i);a.width=r,this._cached={},this._columnStyles[a.key]=this.recomputeColumnStyle(a)},e.getColumnStyle=function(i){return this._columnStyles[i]},e.getColumnStyles=function(){return this._columnStyles},e.recomputeColumnStyle=function(i){var r=0,a=0;this._fixed||(r=typeof i.flexGrow=="number"?i.flexGrow:0,a=typeof i.flexShrink=="number"?i.flexShrink:1);var o=r+" "+a+" auto",s=zr({},i.style,{flex:o,msFlex:o,WebkitFlex:o,width:i.width,overflow:"hidden"});return!this._fixed&&i.maxWidth&&(s.maxWidth=i.maxWidth),!this._fixed&&i.minWidth&&(s.minWidth=i.minWidth),s},e.recomputeColumnStyles=function(){var i=this;return this._columns.reduce(function(r,a){return r[a.key]=i.recomputeColumnStyle(a),r},{})},t}();Jt.PlaceholderKey="__placeholder__";function Ua(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Nr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ua(n,!0).forEach(function(i){j(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ua(n).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const ie=window.React;var Ya=pe(function(t,e){return t||Hc(e)}),Ga=function(e,n,i){return{width:e,maxWidth:n,height:i,overflow:"hidden"}},td={TableCell:Ms,TableHeaderCell:As,ExpandIcon:Ki,SortIndicator:Vs},rd=50,nd=[],_r=function(t){ze(e,t);function e(i){var r;r=t.call(this,i)||this;var a=i.columns,o=i.children,s=i.defaultExpandedRowKeys;return r.state={scrollbarSize:0,hoveredRowKey:null,resizingKey:null,resizingWidth:0,expandedRowKeys:Pn(s)},r.columnManager=new Jt(Ya(a,o),i.fixed),r._setContainerRef=r._setContainerRef.bind(D(r)),r._setMainTableRef=r._setMainTableRef.bind(D(r)),r._setLeftTableRef=r._setLeftTableRef.bind(D(r)),r._setRightTableRef=r._setRightTableRef.bind(D(r)),r.renderExpandIcon=r.renderExpandIcon.bind(D(r)),r.renderRow=r.renderRow.bind(D(r)),r.renderRowCell=r.renderRowCell.bind(D(r)),r.renderHeader=r.renderHeader.bind(D(r)),r.renderHeaderCell=r.renderHeaderCell.bind(D(r)),r._handleScroll=r._handleScroll.bind(D(r)),r._handleVerticalScroll=r._handleVerticalScroll.bind(D(r)),r._handleRowsRendered=r._handleRowsRendered.bind(D(r)),r._handleRowHover=r._handleRowHover.bind(D(r)),r._handleRowExpand=r._handleRowExpand.bind(D(r)),r._handleColumnResize=Bc(r._handleColumnResize.bind(D(r)),rd),r._handleColumnResizeStart=r._handleColumnResizeStart.bind(D(r)),r._handleColumnResizeStop=r._handleColumnResizeStop.bind(D(r)),r._handleColumnSort=r._handleColumnSort.bind(D(r)),r._handleFrozenRowHeightChange=r._handleFrozenRowHeightChange.bind(D(r)),r._handleRowHeightChange=r._handleRowHeightChange.bind(D(r)),r._getLeftTableContainerStyle=pe(Ga),r._getRightTableContainerStyle=pe(Ga),r._flattenOnKeys=pe(function(l,u,c){return r._depthMap={},qc(l,u,r._depthMap,c)}),r._resetColumnManager=pe(function(l,u){r.columnManager.reset(l,u),r.props.estimatedRowHeight&&u&&(r.columnManager.hasLeftFrozenColumns()||(r._leftRowHeightMap={}),r.columnManager.hasRightFrozenColumns()||(r._rightRowHeightMap={}))},function(l,u){return Ns(l,u,r.props.ignoreFunctionInColumnCompare)}),r._isResetting=!1,r._resetIndex=null,r._rowHeightMap={},r._rowHeightMapBuffer={},r._mainRowHeightMap={},r._leftRowHeightMap={},r._rightRowHeightMap={},r._getEstimatedTotalRowsHeight=pe(Ds),r._getRowHeight=r._getRowHeight.bind(D(r)),r._updateRowHeights=Wc(function(){r._isResetting=!0,r._rowHeightMap=Nr({},r._rowHeightMap,{},r._rowHeightMapBuffer),r.resetAfterRowIndex(r._resetIndex,!1),r._rowHeightMapBuffer={},r._resetIndex=null,r.forceUpdateTable(),r.forceUpdate(),r._isResetting=!1},0),r._scroll={scrollLeft:0,scrollTop:0},r._scrollHeight=0,r._lastScannedRowIndex=-1,r._hasDataChangedSinceEndReached=!0,r._data=i.data,r._depthMap={},r._horizontalScrollbarSize=0,r._verticalScrollbarSize=0,r._scrollbarPresenceChanged=!1,r}var n=e.prototype;return n.getDOMNode=function(){return this.tableNode},n.getColumnManager=function(){return this.columnManager},n.getExpandedRowKeys=function(){var r=this.props.expandedRowKeys;return r!==void 0?r||nd:this.state.expandedRowKeys},n.getExpandedState=function(){return{expandedData:this._data,expandedRowKeys:this.getExpandedRowKeys(),expandedDepthMap:this._depthMap}},n.getTotalRowsHeight=function(){var r=this.props,a=r.rowHeight,o=r.estimatedRowHeight;return o?this.table?this.table.getTotalRowsHeight():this._getEstimatedTotalRowsHeight(this._data,o):this._data.length*a},n.getTotalColumnsWidth=function(){return this.columnManager.getColumnsWidth()},n.forceUpdateTable=function(){this.table&&this.table.forceUpdateTable(),this.leftTable&&this.leftTable.forceUpdateTable(),this.rightTable&&this.rightTable.forceUpdateTable()},n.resetAfterRowIndex=function(r,a){r===void 0&&(r=0),a===void 0&&(a=!0),this.props.estimatedRowHeight&&(this.table&&this.table.resetAfterRowIndex(r,a),this.leftTable&&this.leftTable.resetAfterRowIndex(r,a),this.rightTable&&this.rightTable.resetAfterRowIndex(r,a))},n.resetRowHeightCache=function(){!this.props.estimatedRowHeight||(this._resetIndex=null,this._rowHeightMapBuffer={},this._rowHeightMap={},this._mainRowHeightMap={},this._leftRowHeightMap={},this._rightRowHeightMap={})},n.scrollToPosition=function(r){this._scroll=r,this.table&&this.table.scrollToPosition(r),this.leftTable&&this.leftTable.scrollToTop(r.scrollTop),this.rightTable&&this.rightTable.scrollToTop(r.scrollTop)},n.scrollToTop=function(r){this._scroll.scrollTop=r,this.table&&this.table.scrollToPosition(this._scroll),this.leftTable&&this.leftTable.scrollToTop(r),this.rightTable&&this.rightTable.scrollToTop(r)},n.scrollToLeft=function(r){this._scroll.scrollLeft=r,this.table&&this.table.scrollToPosition(this._scroll)},n.scrollToRow=function(r,a){r===void 0&&(r=0),a===void 0&&(a="auto"),this.table&&this.table.scrollToRow(r,a),this.leftTable&&this.leftTable.scrollToRow(r,a),this.rightTable&&this.rightTable.scrollToRow(r,a)},n.setExpandedRowKeys=function(r){this.props.expandedRowKeys===void 0&&this.setState({expandedRowKeys:Pn(r)})},n.renderExpandIcon=function(r){var a=r.rowData,o=r.rowIndex,s=r.depth,l=r.onExpand,u=this.props,c=u.rowKey,d=u.expandColumnKey,p=u.expandIconProps;if(!d)return null;var g=o>=0&&Lc(a),_=o>=0&&this.getExpandedRowKeys().indexOf(a[c])>=0,h=Le(p,{rowData:a,rowIndex:o,depth:s,expandable:g,expanded:_}),v=this._getComponent("ExpandIcon");return ie.createElement(v,J({depth:s,expandable:g,expanded:_},h,{onExpand:l}))},n.renderRow=function(r){var a,o=r.isScrolling,s=r.columns,l=r.rowData,u=r.rowIndex,c=r.style,d=this.props,p=d.rowClassName,g=d.rowRenderer,_=d.rowEventHandlers,h=d.expandColumnKey,v=d.estimatedRowHeight,y=Le(p,{columns:s,rowData:l,rowIndex:u}),T=Le(this.props.rowProps,{columns:s,rowData:l,rowIndex:u}),R=l[this.props.rowKey],w=this._depthMap[R]||0,m=Ue(this._prefixClass("row"),y,(a={},a[this._prefixClass("row--depth-"+w)]=!!h&&u>=0,a[this._prefixClass("row--expanded")]=!!h&&this.getExpandedRowKeys().indexOf(R)>=0,a[this._prefixClass("row--hovered")]=!o&&R===this.state.hoveredRowKey,a[this._prefixClass("row--frozen")]=w===0&&u<0,a[this._prefixClass("row--customized")]=g,a)),b=this.columnManager.hasFrozenColumns(),E=Nr({},T,{role:"row",key:"row-"+R,isScrolling:o,className:m,style:c,columns:s,rowIndex:u,rowData:l,rowKey:R,expandColumnKey:h,depth:w,rowEventHandlers:_,rowRenderer:g,estimatedRowHeight:u>=0?v:void 0,getIsResetting:this._getIsResetting,cellRenderer:this.renderRowCell,expandIconRenderer:this.renderExpandIcon,onRowExpand:this._handleRowExpand,onRowHover:b?this._handleRowHover:null,onRowHeightChange:b?this._handleFrozenRowHeightChange:this._handleRowHeightChange});return ie.createElement(ji,E)},n.renderRowCell=function(r){var a,o=r.isScrolling,s=r.columns,l=r.column,u=r.columnIndex,c=r.rowData,d=r.rowIndex,p=r.expandIcon;if(l[Jt.PlaceholderKey])return ie.createElement("div",{key:"row-"+c[this.props.rowKey]+"-cell-"+l.key+"-placeholder",className:this._prefixClass("row-cell-placeholder"),style:this.columnManager.getColumnStyle(l.key)});var g=l.className,_=l.dataKey,h=l.dataGetter,v=l.cellRenderer,y=this._getComponent("TableCell"),T=h?h({columns:s,column:l,columnIndex:u,rowData:c,rowIndex:d}):$c(c,_),R={isScrolling:o,cellData:T,columns:s,column:l,columnIndex:u,rowData:c,rowIndex:d,container:this},w=ut(v||ie.createElement(y,{className:this._prefixClass("row-cell-text")}),R),m=Le(g,{cellData:T,columns:s,column:l,columnIndex:u,rowData:c,rowIndex:d}),b=Ue(this._prefixClass("row-cell"),m,(a={},a[this._prefixClass("row-cell--align-center")]=l.align===Yt.CENTER,a[this._prefixClass("row-cell--align-right")]=l.align===Yt.RIGHT,a)),E=Le(this.props.cellProps,{columns:s,column:l,columnIndex:u,rowData:c,rowIndex:d}),I=E||{},O=I.tagName,x=we(I,["tagName"]),z=O||"div";return ie.createElement(z,J({role:"gridcell",key:"row-"+c[this.props.rowKey]+"-cell-"+l.key},x,{className:b,style:this.columnManager.getColumnStyle(l.key)}),p,w)},n.renderHeader=function(r){var a,o=r.columns,s=r.headerIndex,l=r.style,u=this.props,c=u.headerClassName,d=u.headerRenderer,p=Le(c,{columns:o,headerIndex:s}),g=Le(this.props.headerProps,{columns:o,headerIndex:s}),_=Ue(this._prefixClass("header-row"),p,(a={},a[this._prefixClass("header-row--resizing")]=!!this.state.resizingKey,a[this._prefixClass("header-row--customized")]=d,a)),h=Nr({},g,{role:"row",key:"header-"+s,className:_,style:l,columns:o,headerIndex:s,headerRenderer:d,cellRenderer:this.renderHeaderCell,expandColumnKey:this.props.expandColumnKey,expandIcon:this._getComponent("ExpandIcon")});return ie.createElement(Bi,h)},n.renderHeaderCell=function(r){var a,o,s=r.columns,l=r.column,u=r.columnIndex,c=r.headerIndex,d=r.expandIcon;if(l[Jt.PlaceholderKey])return ie.createElement("div",{key:"header-"+c+"-cell-"+l.key+"-placeholder",className:this._prefixClass("header-cell-placeholder"),style:this.columnManager.getColumnStyle(l.key)});var p=l.headerClassName,g=l.headerRenderer,_=this.props,h=_.sortBy,v=_.sortState,y=_.headerCellProps,T=this._getComponent("TableHeaderCell"),R=this._getComponent("SortIndicator"),w={columns:s,column:l,columnIndex:u,headerIndex:c,container:this},m=ut(g||ie.createElement(T,{className:this._prefixClass("header-cell-text")}),w),b,E;if(v){var I=v[l.key];b=I===oe.ASC||I===oe.DESC,E=b?I:oe.ASC}else b=l.key===h.key,E=b?h.order:oe.ASC;var O=Le(p,{columns:s,column:l,columnIndex:u,headerIndex:c}),x=Ue(this._prefixClass("header-cell"),O,(a={},a[this._prefixClass("header-cell--align-center")]=l.align===Yt.CENTER,a[this._prefixClass("header-cell--align-right")]=l.align===Yt.RIGHT,a[this._prefixClass("header-cell--sortable")]=l.sortable,a[this._prefixClass("header-cell--sorting")]=b,a[this._prefixClass("header-cell--resizing")]=l.key===this.state.resizingKey,a)),z=Le(y,{columns:s,column:l,columnIndex:u,headerIndex:c}),M=z||{},H=M.tagName,A=we(M,["tagName"]),q=H||"div";return ie.createElement(q,J({role:"gridcell",key:"header-"+c+"-cell-"+l.key,onClick:l.sortable?this._handleColumnSort:null},A,{className:x,style:this.columnManager.getColumnStyle(l.key),"data-key":l.key}),d,m,l.sortable&&ie.createElement(R,{sortOrder:E,className:Ue(this._prefixClass("sort-indicator"),(o={},o[this._prefixClass("sort-indicator--descending")]=E===oe.DESC,o))}),l.resizable&&ie.createElement(Ui,{className:this._prefixClass("column-resizer"),column:l,onResizeStart:this._handleColumnResizeStart,onResizeStop:this._handleColumnResizeStop,onResize:this._handleColumnResize}))},n.renderMainTable=function(){var r=this.props,a=r.width,o=r.headerHeight,s=r.rowHeight,l=r.fixed,u=r.estimatedRowHeight,c=we(r,["width","headerHeight","rowHeight","fixed","estimatedRowHeight"]),d=this._getTableHeight(),p=a-this._verticalScrollbarSize;if(l){var g=this.columnManager.getColumnsWidth();p=Math.max(Math.round(g),p)}return ie.createElement(Lr,J({},c,this.state,{className:this._prefixClass("table-main"),ref:this._setMainTableRef,data:this._data,columns:this.columnManager.getMainColumns(),width:a,height:d,headerHeight:o,rowHeight:s,estimatedRowHeight:u,getRowHeight:u?this._getRowHeight:void 0,headerWidth:p+(l?this._verticalScrollbarSize:0),bodyWidth:p,headerRenderer:this.renderHeader,rowRenderer:this.renderRow,onScroll:this._handleScroll,onRowsRendered:this._handleRowsRendered}))},n.renderLeftTable=function(){if(!this.columnManager.hasLeftFrozenColumns())return null;var r=this.props,a=r.width,o=r.headerHeight,s=r.rowHeight,l=r.estimatedRowHeight,u=we(r,["width","headerHeight","rowHeight","estimatedRowHeight"]),c=this._getFrozenContainerHeight(),d=this._verticalScrollbarSize||20,p=this.columnManager.getLeftFrozenColumnsWidth();return ie.createElement(Lr,J({},u,this.state,{containerStyle:this._getLeftTableContainerStyle(p,a,c),className:this._prefixClass("table-frozen-left"),ref:this._setLeftTableRef,data:this._data,columns:this.columnManager.getLeftFrozenColumns(),initialScrollTop:this._scroll.scrollTop,width:p+d,height:c,headerHeight:o,rowHeight:s,estimatedRowHeight:l,getRowHeight:l?this._getRowHeight:void 0,headerWidth:p+d,bodyWidth:p+d,headerRenderer:this.renderHeader,rowRenderer:this.renderRow,onScroll:this._handleVerticalScroll,onRowsRendered:ye}))},n.renderRightTable=function(){if(!this.columnManager.hasRightFrozenColumns())return null;var r=this.props,a=r.width,o=r.headerHeight,s=r.rowHeight,l=r.estimatedRowHeight,u=we(r,["width","headerHeight","rowHeight","estimatedRowHeight"]),c=this._getFrozenContainerHeight(),d=this.columnManager.getRightFrozenColumnsWidth(),p=this._verticalScrollbarSize;return ie.createElement(Lr,J({},u,this.state,{containerStyle:this._getLeftTableContainerStyle(d+p,a,c),className:this._prefixClass("table-frozen-right"),ref:this._setRightTableRef,data:this._data,columns:this.columnManager.getRightFrozenColumns(),initialScrollTop:this._scroll.scrollTop,width:d+p,height:c,headerHeight:o,rowHeight:s,estimatedRowHeight:l,getRowHeight:l?this._getRowHeight:void 0,headerWidth:d+p,bodyWidth:d,headerRenderer:this.renderHeader,rowRenderer:this.renderRow,onScroll:this._handleVerticalScroll,onRowsRendered:ye}))},n.renderResizingLine=function(){var r=this.props,a=r.width,o=r.fixed,s=this.state.resizingKey;if(!o||!s)return null;var l=this.columnManager.getMainColumns(),u=l.findIndex(function(y){return y.key===s}),c=l[u],d=c.width,p=c.frozen,g=this.columnManager.recomputeColumnsWidth(l.slice(0,u)),_=g+d;if(!p)_-=this._scroll.scrollLeft;else if(p===ct.RIGHT){var h=this.columnManager.recomputeColumnsWidth(l.slice(u+1));h+d>a-this._verticalScrollbarSize?_=d:_=a-this._verticalScrollbarSize-h}var v={left:_,height:this._getTableHeight()-this._horizontalScrollbarSize};return ie.createElement("div",{className:this._prefixClass("resizing-line"),style:v})},n.renderFooter=function(){var r=this.props,a=r.footerHeight,o=r.footerRenderer;return a===0?null:ie.createElement("div",{className:this._prefixClass("footer"),style:{height:a}},ut(o))},n.renderEmptyLayer=function(){var r=this.props,a=r.data,o=r.frozenData,s=r.footerHeight,l=r.emptyRenderer;if(a&&a.length||o&&o.length)return null;var u=this._getHeaderHeight();return ie.createElement("div",{className:this._prefixClass("empty-layer"),style:{top:u,bottom:s}},ut(l))},n.renderOverlay=function(){var r=this.props.overlayRenderer;return ie.createElement("div",{className:this._prefixClass("overlay")},!!r&&ut(r))},n.render=function(){var r,a=this.props,o=a.columns,s=a.children,l=a.width,u=a.fixed,c=a.data,d=a.frozenData,p=a.expandColumnKey,g=a.disabled,_=a.className,h=a.style,v=a.footerHeight,y=a.classPrefix,T=a.estimatedRowHeight;this._resetColumnManager(Ya(o,s),u);var R=p?this._flattenOnKeys(c,this.getExpandedRowKeys(),this.props.rowKey):c;this._data!==R&&(this.resetAfterRowIndex(0,!1),this._data=R),this._calcScrollbarSizes(),this._totalRowsHeight=this.getTotalRowsHeight();var w=Nr({},h,{width:l,height:this._getTableHeight()+v,position:"relative"}),m=Ue(y,_,(r={},r[y+"--fixed"]=u,r[y+"--expandable"]=!!p,r[y+"--empty"]=c.length===0,r[y+"--has-frozen-rows"]=d.length>0,r[y+"--has-frozen-columns"]=this.columnManager.hasFrozenColumns(),r[y+"--disabled"]=g,r[y+"--dynamic"]=!!T,r));return ie.createElement("div",{ref:this._setContainerRef,className:m,style:w},this.renderFooter(),this.renderMainTable(),this.renderLeftTable(),this.renderRightTable(),this.renderResizingLine(),this.renderEmptyLayer(),this.renderOverlay())},n.componentDidMount=function(){var r=this.props.getScrollbarSize();r>0&&this.setState({scrollbarSize:r})},n.componentDidUpdate=function(r,a){var o=this.props,s=o.data,l=o.height,u=o.maxHeight,c=o.estimatedRowHeight;s!==r.data&&(this._lastScannedRowIndex=-1,this._hasDataChangedSinceEndReached=!0),(u!==r.maxHeight||l!==r.height)&&this._maybeCallOnEndReached(),this._maybeScrollbarPresenceChange(),c&&this.getTotalRowsHeight()!==this._totalRowsHeight&&this.forceUpdate()},n._prefixClass=function(r){return this.props.classPrefix+"__"+r},n._setContainerRef=function(r){this.tableNode=r},n._setMainTableRef=function(r){this.table=r},n._setLeftTableRef=function(r){this.leftTable=r},n._setRightTableRef=function(r){this.rightTable=r},n._getComponent=function(r){return this.props.components&&this.props.components[r]?this.props.components[r]:td[r]},n._getRowHeight=function(r){var a=this.props,o=a.estimatedRowHeight,s=a.rowKey;return this._rowHeightMap[this._data[r][s]]||Le(o,{rowData:this._data[r],rowIndex:r})},n._getIsResetting=function(){return this._isResetting},n._getHeaderHeight=function(){var r=this.props.headerHeight;return Array.isArray(r)?r.reduce(function(a,o){return a+o},0):r},n._getFrozenRowsHeight=function(){var r=this.props,a=r.frozenData,o=r.rowHeight;return a.length*o},n._getTableHeight=function(){var r=this.props,a=r.height,o=r.maxHeight,s=r.footerHeight,l=a-s;if(o>0){var u=this._getFrozenRowsHeight(),c=this.getTotalRowsHeight(),d=this._getHeaderHeight(),p=d+u+c+this._horizontalScrollbarSize;l=Math.min(p,o-s)}return l},n._getBodyHeight=function(){return this._getTableHeight()-this._getHeaderHeight()-this._getFrozenRowsHeight()},n._getFrozenContainerHeight=function(){var r=this.props.maxHeight,a=this._getTableHeight()-(this._data.length>0?this._horizontalScrollbarSize:0);if(r>0)return a;var o=this.getTotalRowsHeight()+this._getHeaderHeight()+this._getFrozenRowsHeight();return Math.min(a,o)},n._calcScrollbarSizes=function(){var r=this.props,a=r.fixed,o=r.width,s=this.state.scrollbarSize,l=this.getTotalRowsHeight(),u=this.getTotalColumnsWidth(),c=this._horizontalScrollbarSize,d=this._verticalScrollbarSize;s===0?(this._horizontalScrollbarSize=0,this._verticalScrollbarSize=0):!a||u<=o-s?(this._horizontalScrollbarSize=0,this._verticalScrollbarSize=l>this._getBodyHeight()?s:0):u>o?(this._horizontalScrollbarSize=s,this._verticalScrollbarSize=l>this._getBodyHeight()-this._horizontalScrollbarSize?s:0):(this._horizontalScrollbarSize=0,this._verticalScrollbarSize=0,l>this._getBodyHeight()&&(this._horizontalScrollbarSize=s,this._verticalScrollbarSize=s)),(c!==this._horizontalScrollbarSize||d!==this._verticalScrollbarSize)&&(this._scrollbarPresenceChanged=!0)},n._maybeScrollbarPresenceChange=function(){if(this._scrollbarPresenceChanged){var r=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,r({size:this.state.scrollbarSize,horizontal:this._horizontalScrollbarSize>0,vertical:this._verticalScrollbarSize>0})}},n._maybeCallOnEndReached=function(){var r=this.props,a=r.onEndReached,o=r.onEndReachedThreshold,s=this._scroll.scrollTop,l=this.getTotalRowsHeight(),u=this._getBodyHeight();if(!(!a||!u||!l)){var c=l-s-u+this._horizontalScrollbarSize;this._lastScannedRowIndex>=0&&c<=o&&(this._hasDataChangedSinceEndReached||l!==this._scrollHeight)&&(this._hasDataChangedSinceEndReached=!1,this._scrollHeight=l,a({distanceFromEnd:c}))}},n._handleScroll=function(r){var a=this._scroll.scrollTop;this.scrollToPosition(r),this.props.onScroll(r),r.scrollTop>a&&this._maybeCallOnEndReached()},n._handleVerticalScroll=function(r){var a=r.scrollTop,o=this._scroll.scrollTop;a!==o&&this.scrollToTop(a),a>o&&this._maybeCallOnEndReached()},n._handleRowsRendered=function(r){this.props.onRowsRendered(r),r.overscanStopIndex>this._lastScannedRowIndex&&(this._lastScannedRowIndex=r.overscanStopIndex,this._maybeCallOnEndReached())},n._handleRowHover=function(r){var a=r.hovered,o=r.rowKey;this.setState({hoveredRowKey:a?o:null})},n._handleRowExpand=function(r){var a=r.expanded,o=r.rowData,s=r.rowIndex,l=r.rowKey,u=Pn(this.getExpandedRowKeys());if(a)!u.indexOf(l)>=0&&u.push(l);else{var c=u.indexOf(l);c>-1&&u.splice(c,1)}this.props.expandedRowKeys===void 0&&this.setState({expandedRowKeys:u}),this.props.onRowExpand({expanded:a,rowData:o,rowIndex:s,rowKey:l}),this.props.onExpandedRowsChange(u)},n._handleColumnResize=function(r,a){var o=r.key;this.columnManager.setColumnWidth(o,a),this.setState({resizingWidth:a});var s=this.columnManager.getColumn(o);this.props.onColumnResize({column:s,width:a})},n._handleColumnResizeStart=function(r){var a=r.key;this.setState({resizingKey:a})},n._handleColumnResizeStop=function(){var r=this.state,a=r.resizingKey,o=r.resizingWidth;if(this.setState({resizingKey:null,resizingWidth:0}),!(!a||!o)){var s=this.columnManager.getColumn(a);this.props.onColumnResizeEnd({column:s,width:o})}},n._handleColumnSort=function(r){var a=r.currentTarget.dataset.key,o=this.props,s=o.sortBy,l=o.sortState,u=o.onColumnSort,c=oe.ASC;l?c=l[a]===oe.ASC?oe.DESC:oe.ASC:a===s.key&&(c=s.order===oe.ASC?oe.DESC:oe.ASC);var d=this.columnManager.getColumn(a);u({column:d,key:a,order:c})},n._handleFrozenRowHeightChange=function(r,a,o,s){s?s===ct.RIGHT?this._rightRowHeightMap[r]=a:this._leftRowHeightMap[r]=a:this._mainRowHeightMap[r]=a;var l=Math.max(this._mainRowHeightMap[r]||0,this._leftRowHeightMap[r]||0,this._rightRowHeightMap[r]||0);this._rowHeightMap[r]!==l&&this._handleRowHeightChange(r,l,o)},n._handleRowHeightChange=function(r,a,o){this._resetIndex===null?this._resetIndex=o:this._resetIndex>o&&(this._resetIndex=o),this._rowHeightMapBuffer[r]=a,this._updateRowHeights()},e}(ie.PureComponent);_r.Column=he;_r.PlaceholderKey=Jt.PlaceholderKey;_r.defaultProps={classPrefix:"BaseTable",rowKey:"id",data:[],frozenData:[],fixed:!1,headerHeight:50,rowHeight:50,footerHeight:0,defaultExpandedRowKeys:[],sortBy:{},useIsScrolling:!1,overscanRowCount:1,onEndReachedThreshold:500,getScrollbarSize:jc,ignoreFunctionInColumnCompare:!0,onScroll:ye,onRowsRendered:ye,onScrollbarPresenceChange:ye,onRowExpand:ye,onExpandedRowsChange:ye,onColumnSort:ye,onColumnResize:ye,onColumnResizeEnd:ye};_r.propTypes={classPrefix:f.string,className:f.string,style:f.object,children:f.node,columns:f.arrayOf(f.shape(he.propTypes)),data:f.array.isRequired,frozenData:f.array,rowKey:f.oneOfType([f.string,f.number]).isRequired,width:f.number.isRequired,height:f.number,maxHeight:f.number,rowHeight:f.number,estimatedRowHeight:f.oneOfType([f.number,f.func]),headerHeight:f.oneOfType([f.number,f.arrayOf(f.number)]).isRequired,footerHeight:f.number,fixed:f.bool,disabled:f.bool,overlayRenderer:f.oneOfType([f.func,f.element]),emptyRenderer:f.oneOfType([f.func,f.element]),footerRenderer:f.oneOfType([f.func,f.element]),headerRenderer:f.oneOfType([f.func,f.element]),rowRenderer:f.oneOfType([f.func,f.element]),headerClassName:f.oneOfType([f.string,f.func]),rowClassName:f.oneOfType([f.string,f.func]),headerProps:f.oneOfType([f.object,f.func]),headerCellProps:f.oneOfType([f.object,f.func]),rowProps:f.oneOfType([f.object,f.func]),cellProps:f.oneOfType([f.object,f.func]),expandIconProps:f.oneOfType([f.object,f.func]),expandColumnKey:f.string,defaultExpandedRowKeys:f.arrayOf(f.oneOfType([f.string,f.number])),expandedRowKeys:f.arrayOf(f.oneOfType([f.string,f.number])),onRowExpand:f.func,onExpandedRowsChange:f.func,sortBy:f.shape({key:f.string,order:f.oneOf([oe.ASC,oe.DESC])}),sortState:f.object,onColumnSort:f.func,onColumnResize:f.func,onColumnResizeEnd:f.func,useIsScrolling:f.bool,overscanRowCount:f.number,getScrollbarSize:f.func,onScroll:f.func,onEndReached:f.func,onEndReachedThreshold:f.number,onRowsRendered:f.func,onScrollbarPresenceChange:f.func,rowEventHandlers:f.object,ignoreFunctionInColumnCompare:f.bool,components:f.shape({TableCell:f.elementType,TableHeaderCell:f.elementType,ExpandIcon:f.elementType,SortIndicator:f.elementType})};const id=window.React.createElement,ad=window.React.PureComponent;var od=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},sd=function(){function t(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),ld=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ud=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Xa=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},cd=function(){function t(e,n){var i=[],r=!0,a=!1,o=void 0;try{for(var s=e[Symbol.iterator](),l;!(r=(l=s.next()).done)&&(i.push(l.value),!(n&&i.length===n));r=!0);}catch(u){a=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return i}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),xe=void 0;typeof window!="undefined"?xe=window:typeof self!="undefined"?xe=self:xe=global;var si=null,li=null,Ja=20,qn=xe.clearTimeout,Qa=xe.setTimeout,kn=xe.cancelAnimationFrame||xe.mozCancelAnimationFrame||xe.webkitCancelAnimationFrame,Za=xe.requestAnimationFrame||xe.mozRequestAnimationFrame||xe.webkitRequestAnimationFrame;kn==null||Za==null?(si=qn,li=function(e){return Qa(e,Ja)}):(si=function(e){var n=cd(e,2),i=n[0],r=n[1];kn(i),qn(r)},li=function(e){var n=Za(function(){qn(i),e()}),i=Qa(function(){kn(n),e()},Ja);return[n,i]});function dd(t){var e=void 0,n=void 0,i=void 0,r=void 0,a=void 0,o=void 0,s=void 0,l=typeof document!="undefined"&&document.attachEvent;if(!l){o=function(w){var m=w.__resizeTriggers__,b=m.firstElementChild,E=m.lastElementChild,I=b.firstElementChild;E.scrollLeft=E.scrollWidth,E.scrollTop=E.scrollHeight,I.style.width=b.offsetWidth+1+"px",I.style.height=b.offsetHeight+1+"px",b.scrollLeft=b.scrollWidth,b.scrollTop=b.scrollHeight},a=function(w){return w.offsetWidth!==w.__resizeLast__.width||w.offsetHeight!==w.__resizeLast__.height},s=function(w){if(!(w.target.className&&typeof w.target.className.indexOf=="function"&&w.target.className.indexOf("contract-trigger")<0&&w.target.className.indexOf("expand-trigger")<0)){var m=this;o(this),this.__resizeRAF__&&si(this.__resizeRAF__),this.__resizeRAF__=li(function(){a(m)&&(m.__resizeLast__.width=m.offsetWidth,m.__resizeLast__.height=m.offsetHeight,m.__resizeListeners__.forEach(function(I){I.call(m,w)}))})}};var u=!1,c="";i="animationstart";var d="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),g="";{var _=document.createElement("fakeelement");if(_.style.animationName!==void 0&&(u=!0),u===!1){for(var h=0;h<d.length;h++)if(_.style[d[h]+"AnimationName"]!==void 0){g=d[h],c="-"+g.toLowerCase()+"-",i=p[h],u=!0;break}}}n="resizeanim",e="@"+c+"keyframes "+n+" { from { opacity: 0; } to { opacity: 0; } } ",r=c+"animation: 1ms "+n+"; "}var v=function(w){if(!w.getElementById("detectElementResize")){var m=(e||"")+".resize-triggers { "+(r||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',b=w.head||w.getElementsByTagName("head")[0],E=w.createElement("style");E.id="detectElementResize",E.type="text/css",t!=null&&E.setAttribute("nonce",t),E.styleSheet?E.styleSheet.cssText=m:E.appendChild(w.createTextNode(m)),b.appendChild(E)}},y=function(w,m){if(l)w.attachEvent("onresize",m);else{if(!w.__resizeTriggers__){var b=w.ownerDocument,E=xe.getComputedStyle(w);E&&E.position==="static"&&(w.style.position="relative"),v(b),w.__resizeLast__={},w.__resizeListeners__=[],(w.__resizeTriggers__=b.createElement("div")).className="resize-triggers";var I=b.createElement("div");I.className="expand-trigger",I.appendChild(b.createElement("div"));var O=b.createElement("div");O.className="contract-trigger",w.__resizeTriggers__.appendChild(I),w.__resizeTriggers__.appendChild(O),w.appendChild(w.__resizeTriggers__),o(w),w.addEventListener("scroll",s,!0),i&&(w.__resizeTriggers__.__animationListener__=function(z){z.animationName===n&&o(w)},w.__resizeTriggers__.addEventListener(i,w.__resizeTriggers__.__animationListener__))}w.__resizeListeners__.push(m)}},T=function(w,m){if(l)w.detachEvent("onresize",m);else if(w.__resizeListeners__.splice(w.__resizeListeners__.indexOf(m),1),!w.__resizeListeners__.length){w.removeEventListener("scroll",s,!0),w.__resizeTriggers__.__animationListener__&&(w.__resizeTriggers__.removeEventListener(i,w.__resizeTriggers__.__animationListener__),w.__resizeTriggers__.__animationListener__=null);try{w.__resizeTriggers__=!w.removeChild(w.__resizeTriggers__)}catch{}}};return{addResizeListener:y,removeResizeListener:T}}var Yi=function(t){ud(e,t);function e(){var n,i,r,a;od(this,e);for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return a=(i=(r=Xa(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(s))),r),r.state={height:r.props.defaultHeight||0,width:r.props.defaultWidth||0},r._onResize=function(){var u=r.props,c=u.disableHeight,d=u.disableWidth,p=u.onResize;if(r._parentNode){var g=r._parentNode.offsetHeight||0,_=r._parentNode.offsetWidth||0,h=window.getComputedStyle(r._parentNode)||{},v=parseInt(h.paddingLeft,10)||0,y=parseInt(h.paddingRight,10)||0,T=parseInt(h.paddingTop,10)||0,R=parseInt(h.paddingBottom,10)||0,w=g-T-R,m=_-v-y;(!c&&r.state.height!==w||!d&&r.state.width!==m)&&(r.setState({height:g-T-R,width:_-v-y}),p({height:g,width:_}))}},r._setRef=function(u){r._autoSizer=u},i),Xa(r,a)}return sd(e,[{key:"componentDidMount",value:function(){var i=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=dd(i),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var i=this.props,r=i.children,a=i.className,o=i.disableHeight,s=i.disableWidth,l=i.style,u=this.state,c=u.height,d=u.width,p={overflow:"visible"},g={},_=!1;return o||(c===0&&(_=!0),p.height=0,g.height=c),s||(d===0&&(_=!0),p.width=0,g.width=d),id("div",{className:a,ref:this._setRef,style:ld({},p,l)},!_&&r(g))}}]),e}(ad);Yi.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}};const eo=window.React;var Ps=function(e){var n=e.className,i=e.width,r=e.height,a=e.children,o=e.onResize,s=typeof i=="number",l=typeof r=="number";return s&&l?eo.createElement("div",{className:n,style:{width:i,height:r,position:"relative"}},a({width:i,height:r})):eo.createElement(Yi,{className:n,disableWidth:s,disableHeight:l,onResize:o},function(u){return a({width:s?i:u.width,height:l?r:u.height})})};Ps.propTypes={className:f.string,width:f.number,height:f.number,children:f.func.isRequired,onResize:f.func};const hd=window.React.useEffect,Fn=window.React.useState,to=t=>t.benefactorAcl.resourceAccess.some(e=>e.principalId===Ys||e.principalId===Gs||e.principalId===Xs),Qt=t=>{var K,V,N;const{entityId:e,versionNumber:n,flexWrap:i="nowrap",justifyContent:r="flex-start",showIsPublicPrivate:a=!0,showHasLocalSharingSettings:o=!0,showHasAnnotations:s=!0,showHasWiki:l=!0,showHasDiscussionThread:u=!0,showUnlink:c=!0,onUnlink:d=()=>{},onUnlinkError:p=()=>{},canOpenModal:g}=t;let _;(C=>{C.NO_SCHEMA="",C.VALID="Valid",C.INVALID="Invalid",C.ANNOTATIONS_MISSING="Missing"})(_||(_={}));const{ref:h,inView:v}=vo(),{data:y}=it(e,void 0,n,{enabled:v,staleTime:60*1e3}),[T,R]=Fn(!1),[w,m]=Fn(!1),[b,E]=Fn(""),{isInExperimentalMode:I}=ht(),{data:O}=gl(e,{enabled:I&&v,staleTime:60*1e3}),{data:x}=_l(e,{enabled:I&&v&&!!O,staleTime:60*1e3}),z=10,M=(y==null?void 0:y.annotations)&&!Sl(y.annotations.annotations)?Object.keys(y.annotations.annotations).length:0;hd(()=>{I&&x&&(x.isValid?E("Valid"):E(M?"Invalid":"Missing"))},[x,I,M,y,"Valid","Invalid","Missing"]);const{mutate:H}=Us({onSuccess:(C,L)=>{d(L)},onError:p}),A=S(te,{children:y?Object.entries((V=(K=y.annotations)==null?void 0:K.annotations)!=null?V:[]).reduce((C,L,ee)=>ee<z||ee===z&&z===M?k(te,{children:[C,k("tr",{children:[S("td",{children:S("b",{children:L[0]})}),S("td",{children:L[1].value.join(", ")})]})]}):C,S(te,{})):""}),q=S(te,{children:I&&O?k("tr",{children:[S("td",{children:S("b",{children:"Validation Schema"})}),S("td",{children:O.jsonSchemaVersionInfo.schemaName})]}):""}),$=k("div",{className:"EntityBadgeTooltip",children:[x?k("p",{children:[b," Annotations"]}):"",k("table",{children:[A||"",q]}),M>z?k("p",{children:["and ",M-z," more"]}):""]});return S("div",{className:"EntityBadge",ref:h,style:{flexWrap:i,justifyContent:r},children:y&&k(te,{children:[S("div",{onClick:C=>C.stopPropagation(),children:S(yl,{entityId:e,show:T,showTabs:!1,onClose:()=>R(!1),initialTab:vl.ANNOTATIONS})}),a&&y.benefactorAcl&&to(y)?S(Ke,{title:"Public",enterNextDelay:100,placement:"right",children:S(ul,{"aria-hidden":!1,role:"img",className:"EntityBadge__Badge","data-testid":"is-public-icon"})}):null,a&&y.benefactorAcl&&!to(y)?S(Ke,{title:"Private",enterNextDelay:100,placement:"right",children:S(bl,{"aria-hidden":!1,role:"img",className:"EntityBadge__Badge","data-testid":"is-private-icon"})}):null,o&&y.benefactorAcl&&e===y.benefactorAcl.id?S(Ke,{title:"Sharing Settings have been set",enterNextDelay:100,placement:"right",children:S(Rl,{"aria-hidden":!1,role:"img",className:"EntityBadge__Badge","data-testid":"sharing-settings-icon"})}):null,s&&!!(M||x)&&S(Ke,{title:$,enterNextDelay:100,placement:"right",children:S(Vl,{"aria-hidden":!1,role:g?"button":"img",className:`EntityBadge__Badge ${b}`,style:g?{cursor:"pointer"}:void 0,onClick:g?()=>R(!0):void 0,"data-html":!0,"data-testid":"annotations-icon"})}),l&&y.rootWikiId&&S(Ke,{title:"Has a wiki",enterNextDelay:100,placement:"right",children:S(Dl,{"aria-hidden":!1,role:"img",className:"EntityBadge__Badge","data-testid":"wiki-icon"})}),u&&!!y.threadCount&&y.threadCount>0&&S(Ke,{title:"Has been mentioned in discussion",enterNextDelay:100,placement:"right",children:S(Nl,{"aria-hidden":!1,role:"img",className:"EntityBadge__Badge","data-testid":"discussion-icon"})}),c&&y.entityType===tt.LINK&&((N=y.permissions)==null?void 0:N.canDelete)&&k(te,{children:[S(wl,{show:w,title:"Confirm Unlink",modalBody:"Are you sure you want to remove this link? The original object will not be changed.",confirmButtonText:"Unlink",confirmButtonVariant:"danger",onConfirm:()=>{H(e),m(!1)},onCancel:()=>{m(!1)}}),S(Ke,{title:"Remove this link",enterNextDelay:100,placement:"right",children:S(Ml,{"aria-hidden":!1,role:"button",onClick:()=>m(!0),className:"EntityBadge__Badge Unlink","data-testid":"unlink-icon"})})]})]})})};try{Qt.displayName="EntityBadgeIcons",Qt.__docgenInfo={description:`Stateless component used to show icons that show an entity's status.
Adapted from https://github.com/Sage-Bionetworks/SynapseWebClient/blob/46b9b717636cda2421926d96365244bbb72a05b6/src/main/java/org/sagebionetworks/web/client/widget/entity/EntityBadge.java`,displayName:"EntityBadgeIcons",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}},flexWrap:{defaultValue:null,description:"",name:"flexWrap",required:!1,type:{name:"enum",value:[{value:'"inherit"'},{value:'"initial"'},{value:'"-moz-initial"'},{value:'"revert"'},{value:'"unset"'},{value:'"nowrap"'},{value:'"wrap"'},{value:'"wrap-reverse"'}]}},justifyContent:{defaultValue:null,description:"",name:"justifyContent",required:!1,type:{name:"string"}},showIsPublicPrivate:{defaultValue:null,description:"Shows an icon indicating if the entity is 'public' or 'private'. Default true",name:"showIsPublicPrivate",required:!1,type:{name:"boolean"}},showHasLocalSharingSettings:{defaultValue:null,description:"Shows an icon if the entity has sharing settings set on itself. Default true",name:"showHasLocalSharingSettings",required:!1,type:{name:"boolean"}},showHasAnnotations:{defaultValue:null,description:"Shows an icon if the entity has annotations, or if it has a validation schema (in experimental mode only). Default true",name:"showHasAnnotations",required:!1,type:{name:"boolean"}},showHasWiki:{defaultValue:null,description:"Shows an icon if the entity a wiki. Default true",name:"showHasWiki",required:!1,type:{name:"boolean"}},showHasDiscussionThread:{defaultValue:null,description:"Shows an icon if the entity has been mentioned in discussion threads. Default true",name:"showHasDiscussionThread",required:!1,type:{name:"boolean"}},showUnlink:{defaultValue:null,description:"",name:"showUnlink",required:!1,type:{name:"boolean"}},onUnlink:{defaultValue:null,description:"",name:"onUnlink",required:!1,type:{name:"((entityId: string) => void)"}},onUnlinkError:{defaultValue:null,description:"",name:"onUnlinkError",required:!1,type:{name:"((error: unknown) => void)"}},canOpenModal:{defaultValue:null,description:"Whether or not the badges (e.g. Annotations) can trigger opening a modal on click",name:"canOpenModal",required:!0,type:{name:"boolean"}},renderTooltipComponent:{defaultValue:null,description:"Whether this component should render a ReactTooltip or if an external component is managing it",name:"renderTooltipComponent",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/EntityBadgeIcons.tsx#EntityBadgeIcons"]={docgenInfo:Qt.__docgenInfo,name:"EntityBadgeIcons",path:"src/lib/containers/EntityBadgeIcons.tsx#EntityBadgeIcons"})}catch{}const Hs=window.React.useEffect,qr=({className:t,sortOrder:e})=>S(Il,{className:t,active:!0,role:"button",style:{height:"20px",marginLeft:"auto"},direction:e});function kr(t){return S(Qt,{entityId:t.rowData.entityId,versionNumber:t.rowData.versionNumber,showHasDiscussionThread:!1,showHasWiki:!1,showUnlink:!1,canOpenModal:!1,renderTooltipComponent:!1})}function Zt({cellData:t}){var e;return S(te,{children:(e=t&&xl(Cl(t)))!=null?e:S(te,{})})}function Fr(t){var i;const{data:e,isLoading:n}=it(t.rowData.entityId,void 0,t.rowData.versionNumber);return n?S(ft,{width:200}):S(Zt,{...t,cellData:(i=e==null?void 0:e.entity)==null?void 0:i.modifiedOn})}function $r(t){var i;const{data:e,isLoading:n}=it(t.rowData.entityId,void 0,t.rowData.versionNumber);return n?S(ft,{width:200}):S(Zt,{...t,cellData:(i=e==null?void 0:e.entity)==null?void 0:i.createdOn})}function $n(t){const{data:e,isLoading:n}=it(t.rowData.entityId,void 0,t.rowData.versionNumber);return n?S(ft,{width:200}):e?S(wo,{className:"EntityNameWithIconRenderer",entity:e.entity,link:!1}):S(te,{})}function Wn(t){var a;const{data:e,isLoading:n}=it(t.rowData.entityId,void 0,t.rowData.versionNumber),{data:i,isLoading:r}=ho((a=e==null?void 0:e.path.path[1].id)!=null?a:"",void 0,{enabled:!!e});return n||r?S(ft,{width:200}):i?S(wo,{entity:i}):S(te,{})}function Wr({cellData:t}){return S(Ol,{ownerId:t,size:Js,openLinkInNewTab:!0})}function Br(t){var i;const{data:e,isLoading:n}=it(t.rowData.entityId,void 0,t.rowData.versionNumber);return n?S(ft,{width:200}):S(Wr,{...t,cellData:(i=e==null?void 0:e.entity)==null?void 0:i.modifiedBy})}function fd(){return S("div",{className:"EntityFinderDetailsViewPlaceholder",children:S(ci,{size:30})})}function jr({rowData:t}){const{isSelected:e,isDisabled:n}=t;return!n&&S(di,{label:"",className:"SRC-pointer-events-none",checked:e,onChange:()=>{}})}function Kr({cellData:t}){return S(hi,{className:"EntityFinderTableCellEntityIcon",type:t})}function Ur({noResultsPlaceholder:t}){return S("div",{className:"EntityFinderDetailsViewPlaceholder",children:t||S("div",{children:"Empty"})})}const Bn=({rowData:t,toggleSelection:e})=>{var d;const{entityId:n,versionNumber:i}=t,{data:r,isError:a,fetchNextPage:o,isFetchingNextPage:s,hasNextPage:l}=fo(n,{staleTime:60*1e3}),u=(d=r==null?void 0:r.pages.flatMap(p=>p.results))!=null?d:[],c=!!u.find(p=>p.versionNumber===i);return Hs(()=>{!c&&l&&!s&&o()},[c,l,s,o]),a?S(te,{children:i}):S("div",{children:u&&u.length>0&&k(po.Control,{role:"listbox",size:"sm",as:"select",value:i,onClick:p=>{p.stopPropagation()},onChange:p=>{p.stopPropagation();const g=parseInt(p.target.value);e({entityId:n,versionNumber:g})},children:[!c&&!l&&!s&&k("option",{disabled:!0,value:i,children:[i," (Not Found)"]},i),u.map(p=>k("option",{value:p.versionNumber,children:[p.versionNumber,p.isLatestVersion&&" (Latest)"]},p.versionNumber))]})})},Yr=({rowData:t,mustSelectVersionNumber:e,latestVersionText:n,toggleSelection:i})=>{var c;const{id:r,isVersionableEntity:a,isSelected:o,currentSelectedVersion:s}=t,{data:l}=fo(r,{enabled:a,staleTime:60*1e3}),u=(c=l==null?void 0:l.pages.flatMap(d=>d.results))!=null?c:[];return Hs(()=>{o&&e&&s===We&&u.length>0&&i({targetId:r,targetVersionNumber:u[0].versionNumber})},[s,r,o,e,i,u]),S("div",{children:o&&u&&u.length>0&&k(po.Control,{role:"listbox",size:"sm",as:"select",value:s,onClick:d=>{d.stopPropagation()},onChange:d=>{d.stopPropagation();const p=parseInt(d.target.value);i({targetId:r,targetVersionNumber:p===We?void 0:p})},children:[!e&&S("option",{value:We,children:n}),u.map(d=>k("option",{value:d.versionNumber,children:["Version ",d.versionNumber]},d.versionNumber))]})})};function jn(t){const{isSelected:e,isDisabled:n,setSelected:i,entityId:r}=t.rowData;return!n&&S(di,{"data-testid":`dataset-editor-checkbox-${r}`,disabled:n,label:"",checked:e,onChange:a=>{i(a)}})}const Kn=t=>{const{entityId:e,versionNumber:n}=t.rowData,{error:i,isError:r}=ho(e,n);let a=i==null?void 0:i.reason;return(i==null?void 0:i.status)===403?a="You don't have permission to view this entity.":(i==null?void 0:i.status)===404&&(a="The entity or version does not exist. It may have been deleted."),r?S(Ke,{title:a!=null?a:"",placement:"right",className:"EntityBadgeTooltip",children:S("div",{className:"EntityErrorRenderer",children:S(Mr,{options:{icon:"warningOutlined"}})})}):S(te,{})};try{kr.displayName="BadgeIconsRenderer",kr.__docgenInfo={description:"Renders Entity Badges using the entity bundle.",displayName:"BadgeIconsRenderer",props:{cellData:{defaultValue:null,description:"",name:"cellData",required:!0,type:{name:"any"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"ColumnShape<EntityIdAndVersionNumber>[]"}},column:{defaultValue:null,description:"",name:"column",required:!0,type:{name:"ColumnShape<EntityIdAndVersionNumber>"}},columnIndex:{defaultValue:null,description:"",name:"columnIndex",required:!0,type:{name:"number"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"EntityIdAndVersionNumber"}},rowIndex:{defaultValue:null,description:"",name:"rowIndex",required:!0,type:{name:"number"}},container:{defaultValue:null,description:"",name:"container",required:!0,type:{name:"BaseTable<EntityIdAndVersionNumber>"}},isScrolling:{defaultValue:null,description:"",name:"isScrolling",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#BadgeIconsRenderer"]={docgenInfo:kr.__docgenInfo,name:"BadgeIconsRenderer",path:"src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#BadgeIconsRenderer"})}catch{}try{Zt.displayName="DateRenderer",Zt.__docgenInfo={description:"",displayName:"DateRenderer",props:{cellData:{defaultValue:null,description:"",name:"cellData",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#DateRenderer"]={docgenInfo:Zt.__docgenInfo,name:"DateRenderer",path:"src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#DateRenderer"})}catch{}try{Fr.displayName="ModifiedOnRenderer",Fr.__docgenInfo={description:"Renders 'modifiedOn' from the entity bundle.",displayName:"ModifiedOnRenderer",props:{cellData:{defaultValue:null,description:"",name:"cellData",required:!0,type:{name:"any"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"ColumnShape<EntityIdAndVersionNumber>[]"}},column:{defaultValue:null,description:"",name:"column",required:!0,type:{name:"ColumnShape<EntityIdAndVersionNumber>"}},columnIndex:{defaultValue:null,description:"",name:"columnIndex",required:!0,type:{name:"number"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"EntityIdAndVersionNumber"}},rowIndex:{defaultValue:null,description:"",name:"rowIndex",required:!0,type:{name:"number"}},container:{defaultValue:null,description:"",name:"container",required:!0,type:{name:"BaseTable<EntityIdAndVersionNumber>"}},isScrolling:{defaultValue:null,description:"",name:"isScrolling",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#ModifiedOnRenderer"]={docgenInfo:Fr.__docgenInfo,name:"ModifiedOnRenderer",path:"src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#ModifiedOnRenderer"})}catch{}try{$r.displayName="CreatedOnRenderer",$r.__docgenInfo={description:"Renders 'createdOn' from the entity bundle.",displayName:"CreatedOnRenderer",props:{cellData:{defaultValue:null,description:"",name:"cellData",required:!0,type:{name:"any"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"ColumnShape<EntityIdAndVersionNumber>[]"}},column:{defaultValue:null,description:"",name:"column",required:!0,type:{name:"ColumnShape<EntityIdAndVersionNumber>"}},columnIndex:{defaultValue:null,description:"",name:"columnIndex",required:!0,type:{name:"number"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"EntityIdAndVersionNumber"}},rowIndex:{defaultValue:null,description:"",name:"rowIndex",required:!0,type:{name:"number"}},container:{defaultValue:null,description:"",name:"container",required:!0,type:{name:"BaseTable<EntityIdAndVersionNumber>"}},isScrolling:{defaultValue:null,description:"",name:"isScrolling",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#CreatedOnRenderer"]={docgenInfo:$r.__docgenInfo,name:"CreatedOnRenderer",path:"src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#CreatedOnRenderer"})}catch{}try{$n.displayName="EntityNameRenderer",$n.__docgenInfo={description:"",displayName:"EntityNameRenderer",props:{cellData:{defaultValue:null,description:"",name:"cellData",required:!0,type:{name:"any"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"ColumnShape<EntityIdAndVersionNumber>[]"}},column:{defaultValue:null,description:"",name:"column",required:!0,type:{name:"ColumnShape<EntityIdAndVersionNumber>"}},columnIndex:{defaultValue:null,description:"",name:"columnIndex",required:!0,type:{name:"number"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"EntityIdAndVersionNumber"}},rowIndex:{defaultValue:null,description:"",name:"rowIndex",required:!0,type:{name:"number"}},container:{defaultValue:null,description:"",name:"container",required:!0,type:{name:"BaseTable<EntityIdAndVersionNumber>"}},isScrolling:{defaultValue:null,description:"",name:"isScrolling",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#EntityNameRenderer"]={docgenInfo:$n.__docgenInfo,name:"EntityNameRenderer",path:"src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#EntityNameRenderer"})}catch{}try{Wn.displayName="ProjectRenderer",Wn.__docgenInfo={description:"",displayName:"ProjectRenderer",props:{cellData:{defaultValue:null,description:"",name:"cellData",required:!0,type:{name:"any"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"ColumnShape<EntityIdAndVersionNumber>[]"}},column:{defaultValue:null,description:"",name:"column",required:!0,type:{name:"ColumnShape<EntityIdAndVersionNumber>"}},columnIndex:{defaultValue:null,description:"",name:"columnIndex",required:!0,type:{name:"number"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"EntityIdAndVersionNumber"}},rowIndex:{defaultValue:null,description:"",name:"rowIndex",required:!0,type:{name:"number"}},container:{defaultValue:null,description:"",name:"container",required:!0,type:{name:"BaseTable<EntityIdAndVersionNumber>"}},isScrolling:{defaultValue:null,description:"",name:"isScrolling",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#ProjectRenderer"]={docgenInfo:Wn.__docgenInfo,name:"ProjectRenderer",path:"src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#ProjectRenderer"})}catch{}try{Wr.displayName="UserCardRenderer",Wr.__docgenInfo={description:"",displayName:"UserCardRenderer",props:{cellData:{defaultValue:null,description:"",name:"cellData",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#UserCardRenderer"]={docgenInfo:Wr.__docgenInfo,name:"UserCardRenderer",path:"src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#UserCardRenderer"})}catch{}try{Br.displayName="ModifiedByRenderer",Br.__docgenInfo={description:"Renders 'modifiedBy' from the entity bundle.",displayName:"ModifiedByRenderer",props:{cellData:{defaultValue:null,description:"",name:"cellData",required:!0,type:{name:"any"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"ColumnShape<EntityIdAndVersionNumber>[]"}},column:{defaultValue:null,description:"",name:"column",required:!0,type:{name:"ColumnShape<EntityIdAndVersionNumber>"}},columnIndex:{defaultValue:null,description:"",name:"columnIndex",required:!0,type:{name:"number"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"EntityIdAndVersionNumber"}},rowIndex:{defaultValue:null,description:"",name:"rowIndex",required:!0,type:{name:"number"}},container:{defaultValue:null,description:"",name:"container",required:!0,type:{name:"BaseTable<EntityIdAndVersionNumber>"}},isScrolling:{defaultValue:null,description:"",name:"isScrolling",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#ModifiedByRenderer"]={docgenInfo:Br.__docgenInfo,name:"ModifiedByRenderer",path:"src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#ModifiedByRenderer"})}catch{}try{jr.displayName="DetailsViewCheckboxRenderer",jr.__docgenInfo={description:"",displayName:"DetailsViewCheckboxRenderer",props:{cellData:{defaultValue:null,description:"",name:"cellData",required:!0,type:{name:"any"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"ColumnShape<EntityFinderTableViewRowData>[]"}},column:{defaultValue:null,description:"",name:"column",required:!0,type:{name:"ColumnShape<EntityFinderTableViewRowData>"}},columnIndex:{defaultValue:null,description:"",name:"columnIndex",required:!0,type:{name:"number"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"EntityFinderTableViewRowData"}},rowIndex:{defaultValue:null,description:"",name:"rowIndex",required:!0,type:{name:"number"}},container:{defaultValue:null,description:"",name:"container",required:!0,type:{name:"BaseTable<EntityFinderTableViewRowData>"}},isScrolling:{defaultValue:null,description:"",name:"isScrolling",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#DetailsViewCheckboxRenderer"]={docgenInfo:jr.__docgenInfo,name:"DetailsViewCheckboxRenderer",path:"src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#DetailsViewCheckboxRenderer"})}catch{}try{Kr.displayName="TypeIconRenderer",Kr.__docgenInfo={description:"",displayName:"TypeIconRenderer",props:{cellData:{defaultValue:null,description:"",name:"cellData",required:!0,type:{name:"any"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"ColumnShape<EntityFinderTableViewRowData>[]"}},column:{defaultValue:null,description:"",name:"column",required:!0,type:{name:"ColumnShape<EntityFinderTableViewRowData>"}},columnIndex:{defaultValue:null,description:"",name:"columnIndex",required:!0,type:{name:"number"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"EntityFinderTableViewRowData"}},rowIndex:{defaultValue:null,description:"",name:"rowIndex",required:!0,type:{name:"number"}},container:{defaultValue:null,description:"",name:"container",required:!0,type:{name:"BaseTable<EntityFinderTableViewRowData>"}},isScrolling:{defaultValue:null,description:"",name:"isScrolling",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#TypeIconRenderer"]={docgenInfo:Kr.__docgenInfo,name:"TypeIconRenderer",path:"src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#TypeIconRenderer"})}catch{}try{Ur.displayName="EmptyRenderer",Ur.__docgenInfo={description:"",displayName:"EmptyRenderer",props:{noResultsPlaceholder:{defaultValue:null,description:"",name:"noResultsPlaceholder",required:!0,type:{name:"ReactNode"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#EmptyRenderer"]={docgenInfo:Ur.__docgenInfo,name:"EmptyRenderer",path:"src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#EmptyRenderer"})}catch{}try{jn.displayName="DatasetEditorCheckboxRenderer",jn.__docgenInfo={description:"",displayName:"DatasetEditorCheckboxRenderer",props:{cellData:{defaultValue:null,description:"",name:"cellData",required:!0,type:{name:"any"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"ColumnShape<EntityIdAndVersionNumber & { isSelected: boolean; isDisabled?: boolean | undefined; setSelected: (newValue: boolean) => void; }>[]"}},column:{defaultValue:null,description:"",name:"column",required:!0,type:{name:"ColumnShape<EntityIdAndVersionNumber & { isSelected: boolean; isDisabled?: boolean | undefined; setSelected: (newValue: boolean) => void; }>"}},columnIndex:{defaultValue:null,description:"",name:"columnIndex",required:!0,type:{name:"number"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"EntityIdAndVersionNumber & { isSelected: boolean; isDisabled?: boolean | undefined; setSelected: (newValue: boolean) => void; }"}},rowIndex:{defaultValue:null,description:"",name:"rowIndex",required:!0,type:{name:"number"}},container:{defaultValue:null,description:"",name:"container",required:!0,type:{name:"BaseTable<EntityIdAndVersionNumber & { isSelected: boolean; isDisabled?: boolean | undefined; setSelected: (newValue: boolean) => void; }>"}},isScrolling:{defaultValue:null,description:"",name:"isScrolling",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#DatasetEditorCheckboxRenderer"]={docgenInfo:jn.__docgenInfo,name:"DatasetEditorCheckboxRenderer",path:"src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#DatasetEditorCheckboxRenderer"})}catch{}try{qr.displayName="CustomSortIndicator",qr.__docgenInfo={description:"",displayName:"CustomSortIndicator",props:{className:{defaultValue:null,description:"",name:"className",required:!0,type:{name:"string"}},sortOrder:{defaultValue:null,description:"",name:"sortOrder",required:!0,type:{name:"enum",value:[{value:'"desc"'},{value:'"asc"'}]}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#CustomSortIndicator"]={docgenInfo:qr.__docgenInfo,name:"CustomSortIndicator",path:"src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#CustomSortIndicator"})}catch{}try{Bn.displayName="DatasetEditorVersionRenderer",Bn.__docgenInfo={description:"",displayName:"DatasetEditorVersionRenderer",props:{cellData:{defaultValue:null,description:"",name:"cellData",required:!0,type:{name:"any"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"ColumnShape<DatasetItemsEditorTableData>[]"}},column:{defaultValue:null,description:"",name:"column",required:!0,type:{name:"ColumnShape<DatasetItemsEditorTableData>"}},columnIndex:{defaultValue:null,description:"",name:"columnIndex",required:!0,type:{name:"number"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"DatasetItemsEditorTableData"}},rowIndex:{defaultValue:null,description:"",name:"rowIndex",required:!0,type:{name:"number"}},container:{defaultValue:null,description:"",name:"container",required:!0,type:{name:"BaseTable<DatasetItemsEditorTableData>"}},isScrolling:{defaultValue:null,description:"",name:"isScrolling",required:!1,type:{name:"boolean"}},toggleSelection:{defaultValue:null,description:"",name:"toggleSelection",required:!0,type:{name:"(entity: EntityRef) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#DatasetEditorVersionRenderer"]={docgenInfo:Bn.__docgenInfo,name:"DatasetEditorVersionRenderer",path:"src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#DatasetEditorVersionRenderer"})}catch{}try{Yr.displayName="DetailsViewVersionRenderer",Yr.__docgenInfo={description:"",displayName:"DetailsViewVersionRenderer",props:{cellData:{defaultValue:null,description:"",name:"cellData",required:!0,type:{name:"any"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"ColumnShape<EntityFinderTableViewRowData>[]"}},column:{defaultValue:null,description:"",name:"column",required:!0,type:{name:"ColumnShape<EntityFinderTableViewRowData>"}},columnIndex:{defaultValue:null,description:"",name:"columnIndex",required:!0,type:{name:"number"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"EntityFinderTableViewRowData"}},rowIndex:{defaultValue:null,description:"",name:"rowIndex",required:!0,type:{name:"number"}},container:{defaultValue:null,description:"",name:"container",required:!0,type:{name:"BaseTable<EntityFinderTableViewRowData>"}},isScrolling:{defaultValue:null,description:"",name:"isScrolling",required:!1,type:{name:"boolean"}},mustSelectVersionNumber:{defaultValue:null,description:"",name:"mustSelectVersionNumber",required:!0,type:{name:"boolean"}},latestVersionText:{defaultValue:null,description:"",name:"latestVersionText",required:!0,type:{name:"string"}},toggleSelection:{defaultValue:null,description:"",name:"toggleSelection",required:!0,type:{name:"(entity: Reference | Reference[]) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#DetailsViewVersionRenderer"]={docgenInfo:Yr.__docgenInfo,name:"DetailsViewVersionRenderer",path:"src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#DetailsViewVersionRenderer"})}catch{}try{Kn.displayName="EntityErrorRenderer",Kn.__docgenInfo={description:"",displayName:"EntityErrorRenderer",props:{cellData:{defaultValue:null,description:"",name:"cellData",required:!0,type:{name:"any"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"ColumnShape<EntityIdAndVersionNumber>[]"}},column:{defaultValue:null,description:"",name:"column",required:!0,type:{name:"ColumnShape<EntityIdAndVersionNumber>"}},columnIndex:{defaultValue:null,description:"",name:"columnIndex",required:!0,type:{name:"number"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"EntityIdAndVersionNumber"}},rowIndex:{defaultValue:null,description:"",name:"rowIndex",required:!0,type:{name:"number"}},container:{defaultValue:null,description:"",name:"container",required:!0,type:{name:"BaseTable<EntityIdAndVersionNumber>"}},isScrolling:{defaultValue:null,description:"",name:"isScrolling",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#EntityErrorRenderer"]={docgenInfo:Kn.__docgenInfo,name:"EntityErrorRenderer",path:"src/lib/containers/entity_finder/details/view/DetailsViewTableRenderers.tsx#EntityErrorRenderer"})}catch{}const pd=window.React.useCallback,md=window.React.useEffect,gd=window.React.useMemo,ro=window.React.useState,no=1200,_d=46,Fe=({entities:t,isLoading:e,hasNextPage:n,fetchNextPage:i,isFetchingNextPage:r,showVersionSelection:a,mustSelectVersionNumber:o,selectColumnType:s,selected:l,visibleTypes:u,selectableTypes:c,toggleSelection:d,sort:p,setSort:g,noResultsPlaceholder:_,enableSelectAll:h,selectAllIsChecked:v=!1,latestVersionText:y="Always Latest Version",getChildrenInfiniteRequestObject:T,totalEntities:R,setCurrentContainer:w})=>{const m=Qs(),{accessToken:b}=ht(),E=s!=="none",[I,O]=ro(!1),[x,z]=ro(!1),M=()=>{m.cancelQueries(["entitychildren",T]),z(!1),O(!1)},H=V=>u.includes(Re(V))?c.includes(Re(V))?l.has(V.id)?"selected":"default":"disabled":"hidden";md(()=>{async function V(){I&&(n&&i?(z(!0),r||i()):(d(v?t.filter(N=>l.has(N.id)).map(N=>{const C=l.get(N.id);return{targetId:N.id,targetVersionNumber:C===We?void 0:C}}):await Promise.all(t.filter(N=>{const C=Re(N);return!l.has(N.id)&&c.includes(C)&&u.includes(C)}).map(async N=>{var L;let C;return o&&Qi(Re(N))&&(Object.prototype.hasOwnProperty.call(N,"versionNumber")&&(C=N.versionNumber),C||(z(!0),C=(L=(await m.fetchQuery(["entity",N.id,"versions",{offset:0,limit:1}],()=>Zs(N.id,b,0,1))).results[0])==null?void 0:L.versionNumber)),{targetId:N.id,targetVersionNumber:C}}))),O(!1),z(!1)))}V()},[b,t,i,n,o,m,r,v,c,l,I,d,u]);const A=t.reduce((V,N)=>{const C=H(N);if(C!=="hidden"){const L=Re(N);V.push({...N,entityId:N.id,versionNumber:"versionNumber"in N?N.versionNumber:void 0,entityType:L,isSelected:C==="selected",isDisabled:C==="disabled",isVersionableEntity:Qi(L),currentSelectedVersion:l.get(N.id)})}return V},[]),q=gd(()=>{const V=n||t.filter(N=>c.includes(Re(N))&&u.includes(Re(N))).length>0;return h&&S("div",{"data-testid":"Select All",style:V?{cursor:"pointer"}:{cursor:"not-allowed"},onClick:()=>{V&&O(!0)},children:S(di,{label:"",className:"SRC-pointer-events-none",checked:v,disabled:!V,onChange:()=>{}})})},[h,t,n,v,c,u]),$=pd(V=>w&&_o(V.rowData.entityType)?S("span",{role:"link",className:"EntityFinderTableCellContainerLink",onClick:N=>{N.stopPropagation(),w(V.rowData.id)},children:V.rowData.name}):V.rowData.name,[w]),K={};return p&&(K[p.sortBy]=p.sortDirection.toLowerCase()),k("div",{className:"EntityFinderDetailsView bootstrap-4-backport",children:[S(fl,{show:x,currentProgress:t.length,totalProgress:R,hintText:R?`${t.length.toLocaleString()} of ${R==null?void 0:R.toLocaleString()}`:`Fetching ${t.length.toLocaleString()}`,headlineText:"Fetching selected items",onCancel:M}),S(Ps,{className:"DetailsViewAutosizer",children:({height:V,width:N})=>k(_r,{classPrefix:"DetailsViewTable",data:A,height:V,width:N>no?N:no,rowHeight:_d,overscanRowCount:5,rowClassName:({rowIndex:C})=>{let L="EntityFinderDetailsViewRow";return C%2===0&&(L+=" isEven"),L},rowProps:({rowData:C})=>({"aria-selected":C.isSelected,"aria-disabled":C.isDisabled}),headerCellProps:{role:"columnheader"},sortState:K,components:{SortIndicator:qr},onColumnSort:({key:C,order:L})=>{p&&g&&g(C,L==="asc"?Gn.ASC:Gn.DESC)},rowEventHandlers:{onClick:({rowData:C})=>{const{id:L,isDisabled:ee,isVersionableEntity:De}=C;let{currentSelectedVersion:P}=C;ee||(De&&o&&P==null&&Object.prototype.hasOwnProperty.call(C,"versionNumber")&&(P=C.versionNumber),d({targetId:L,targetVersionNumber:P===We?void 0:P}))}},onEndReached:()=>{n&&i&&!r&&i()},emptyRenderer:e?fd:()=>S(Ur,{noResultsPlaceholder:_}),children:[E&&S(he,{title:"",minWidth:50,maxWidth:50,width:50,dataKey:"isSelected",headerRenderer:q,cellRenderer:jr},"isSelected"),S(he,{title:"",minWidth:45,maxWidth:45,width:45,dataKey:"entityType",align:"center",cellRenderer:Kr},"type"),S(he,{title:"Name",width:800,sortable:p!=null,resizable:!0,cellRenderer:$},Vr.NAME),S(he,{title:"",width:75,maxWidth:75,minWidth:75,cellRenderer:kr},"badge"),S(he,{width:130,dataKey:"id",title:"ID",minWidth:130},"id"),a&&S(he,{minWidth:150,width:500,title:"Version",cellRenderer:C=>S(Yr,{mustSelectVersionNumber:o,toggleSelection:d,latestVersionText:y,...C}),headerRenderer:()=>k(te,{children:["Version",S(hl,{className:"SRC-margin-left-5",markdownText:"Allows you to choose which version of this item you would like to perform this action on."+(o?"":`If you would like the selected reference to update as new versions are created, choose "${y}"`),placement:"right"})]})},"version"),S(he,{sortable:p!=null,title:"Created On",width:220,minWidth:170,cellRenderer:$r},Vr.CREATED_ON),S(he,{title:"Modified On",width:220,minWidth:170,sortable:p!=null,cellRenderer:Fr},Vr.MODIFIED_ON),S(he,{title:"Modified By",width:500,resizable:!0,cellRenderer:Br},"modifiedBy")]})})]})};try{Fe.displayName="DetailsView",Fe.__docgenInfo={description:'Displays a list of entities in a table.\n\nIf the list of entities is paginated, the `hasNextPage` prop can be set to indicate that there is more data to load.\nWhen the view is ready to load more data, the `fetchNextPage` callback will be invoked. The view is designed to handle\nan "infinite scroll" pattern, so entities should not be removed from the list when loading the next page.',displayName:"DetailsView",props:{showVersionSelection:{defaultValue:null,description:"",name:"showVersionSelection",required:!0,type:{name:"boolean"}},mustSelectVersionNumber:{defaultValue:null,description:"",name:"mustSelectVersionNumber",required:!0,type:{name:"boolean"}},selectColumnType:{defaultValue:null,description:"",name:"selectColumnType",required:!0,type:{name:"enum",value:[{value:'"checkbox"'},{value:'"none"'}]}},enableSelectAll:{defaultValue:null,description:"",name:"enableSelectAll",required:!0,type:{name:"boolean"}},visibleTypes:{defaultValue:null,description:"",name:"visibleTypes",required:!0,type:{name:"EntityType[]"}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"Map<string, number>"}},selectableTypes:{defaultValue:null,description:"",name:"selectableTypes",required:!0,type:{name:"EntityType[]"}},toggleSelection:{defaultValue:null,description:"",name:"toggleSelection",required:!0,type:{name:"(entity: Reference | Reference[]) => void"}},latestVersionText:{defaultValue:{value:"Always Latest Version"},description:'The text to show for selecting the latest version, if it can be selected. Default is "Always Latest Version"',name:"latestVersionText",required:!1,type:{name:"string"}},setCurrentContainer:{defaultValue:null,description:"",name:"setCurrentContainer",required:!1,type:{name:"Dispatch<SetStateAction<EntityTreeContainer>>"}},entities:{defaultValue:null,description:"",name:"entities",required:!0,type:{name:"(EntityHeader | ProjectHeader | Hit)[]"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},hasNextPage:{defaultValue:null,description:"",name:"hasNextPage",required:!1,type:{name:"boolean"}},fetchNextPage:{defaultValue:null,description:"",name:"fetchNextPage",required:!1,type:{name:"(() => Promise<any>)"}},isFetchingNextPage:{defaultValue:null,description:"",name:"isFetchingNextPage",required:!1,type:{name:"boolean"}},sort:{defaultValue:null,description:"The current sort of the view. If the view cannot be sorted, set this to `undefined`",name:"sort",required:!1,type:{name:"{ sortBy: SortBy; sortDirection: Direction; }"}},setSort:{defaultValue:null,description:"If sortable, `setSort` will be invoked when the user tries to change the sort",name:"setSort",required:!1,type:{name:"((soryBy: SortBy, sortDirection: Direction) => void)"}},noResultsPlaceholder:{defaultValue:null,description:"",name:"noResultsPlaceholder",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},selectAllIsChecked:{defaultValue:{value:"false"},description:"We defer to the configuration component to determine this",name:"selectAllIsChecked",required:!1,type:{name:"boolean"}},getChildrenInfiniteRequestObject:{defaultValue:null,description:"This request object is only used to tell react-query to cancel fetching all children at once.",name:"getChildrenInfiniteRequestObject",required:!1,type:{name:"EntityChildrenRequest"}},totalEntities:{defaultValue:null,description:"The total number of entities that can be retrieved",name:"totalEntities",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/view/DetailsView.tsx#DetailsView"]={docgenInfo:Fe.__docgenInfo,name:"DetailsView",path:"src/lib/containers/entity_finder/details/view/DetailsView.tsx#DetailsView"})}catch{}const yd=window.React.useEffect,vd=window.React.useState;function Ls(t,e,n,i,r,a){if(t.length===0||e.size===0)return!1;{const o=t.every(s=>e.has(s.id)||!n.includes(Re(s)));if(o&&i&&r&&!a)return r(),!1;{if(a)return!1;const s=t.some(l=>n.includes(Re(l)));return o&&s}}}function Gi(t,e,n,i,r,a){const[o,s]=vd(!1);return yd(()=>{s(Ls(t,e,n,i,r,a))},[t,r,i,e,n,a]),o}const io=window.React.useState,Gr=({parentContainerId:t,...e})=>{var h;const[n,i]=io(Vr.NAME),[r,a]=io(Gn.ASC),o={parentId:t,includeTotalChildCount:!0,includeTypes:e.visibleTypes,sortBy:n,sortDirection:r},{data:s,isLoading:l,isFetchingNextPage:u,hasNextPage:c,fetchNextPage:d}=dl(o,{useErrorBoundary:!0}),p=(h=s==null?void 0:s.pages.flatMap(v=>v.page))!=null?h:[],g=s==null?void 0:s.pages[0].totalChildCount,_=Gi(p,e.selected,e.selectableTypes,c,d,u);return S(Fe,{entities:p,isLoading:l,hasNextPage:c,fetchNextPage:d,isFetchingNextPage:u,sort:{sortBy:n,sortDirection:r},setSort:(v,y)=>{i(v),a(y)},selectAllIsChecked:_,getChildrenInfiniteRequestObject:o,totalEntities:g,...e})};try{Gr.displayName="EntityChildrenDetails",Gr.__docgenInfo={description:"",displayName:"EntityChildrenDetails",props:{showVersionSelection:{defaultValue:null,description:"",name:"showVersionSelection",required:!0,type:{name:"boolean"}},mustSelectVersionNumber:{defaultValue:null,description:"",name:"mustSelectVersionNumber",required:!0,type:{name:"boolean"}},selectColumnType:{defaultValue:null,description:"",name:"selectColumnType",required:!0,type:{name:"enum",value:[{value:'"checkbox"'},{value:'"none"'}]}},enableSelectAll:{defaultValue:null,description:"",name:"enableSelectAll",required:!0,type:{name:"boolean"}},visibleTypes:{defaultValue:null,description:"",name:"visibleTypes",required:!0,type:{name:"EntityType[]"}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"Map<string, number>"}},selectableTypes:{defaultValue:null,description:"",name:"selectableTypes",required:!0,type:{name:"EntityType[]"}},toggleSelection:{defaultValue:null,description:"",name:"toggleSelection",required:!0,type:{name:"(entity: Reference | Reference[]) => void"}},latestVersionText:{defaultValue:null,description:"",name:"latestVersionText",required:!1,type:{name:"string"}},setCurrentContainer:{defaultValue:null,description:"",name:"setCurrentContainer",required:!1,type:{name:"Dispatch<SetStateAction<EntityTreeContainer>>"}},parentContainerId:{defaultValue:null,description:"",name:"parentContainerId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/configurations/EntityChildrenDetails.tsx#EntityChildrenDetails"]={docgenInfo:Gr.__docgenInfo,name:"EntityChildrenDetails",path:"src/lib/containers/entity_finder/details/configurations/EntityChildrenDetails.tsx#EntityChildrenDetails"})}catch{}const Xr=({...t})=>{var l;const{data:e,isLoading:n,hasNextPage:i,fetchNextPage:r,isFetchingNextPage:a}=zl({useErrorBoundary:!0}),o=(l=e==null?void 0:e.pages.flatMap(u=>u.results))!=null?l:[],s=Gi(o,t.selected,t.selectableTypes,i,r,a);return S(Fe,{entities:o,isLoading:n,hasNextPage:i,fetchNextPage:r,isFetchingNextPage:a,selectAllIsChecked:s,...t})};try{Xr.displayName="FavoritesDetails",Xr.__docgenInfo={description:"",displayName:"FavoritesDetails",props:{showVersionSelection:{defaultValue:null,description:"",name:"showVersionSelection",required:!0,type:{name:"boolean"}},mustSelectVersionNumber:{defaultValue:null,description:"",name:"mustSelectVersionNumber",required:!0,type:{name:"boolean"}},selectColumnType:{defaultValue:null,description:"",name:"selectColumnType",required:!0,type:{name:"enum",value:[{value:'"checkbox"'},{value:'"none"'}]}},enableSelectAll:{defaultValue:null,description:"",name:"enableSelectAll",required:!0,type:{name:"boolean"}},visibleTypes:{defaultValue:null,description:"",name:"visibleTypes",required:!0,type:{name:"EntityType[]"}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"Map<string, number>"}},selectableTypes:{defaultValue:null,description:"",name:"selectableTypes",required:!0,type:{name:"EntityType[]"}},toggleSelection:{defaultValue:null,description:"",name:"toggleSelection",required:!0,type:{name:"(entity: Reference | Reference[]) => void"}},latestVersionText:{defaultValue:null,description:"",name:"latestVersionText",required:!1,type:{name:"string"}},setCurrentContainer:{defaultValue:null,description:"",name:"setCurrentContainer",required:!1,type:{name:"Dispatch<SetStateAction<EntityTreeContainer>>"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/configurations/FavoritesDetails.tsx#FavoritesDetails"]={docgenInfo:Xr.__docgenInfo,name:"FavoritesDetails",path:"src/lib/containers/entity_finder/details/configurations/FavoritesDetails.tsx#FavoritesDetails"})}catch{}const Jr=({projectsParams:t,...e})=>{var u;const{data:n,isLoading:i,isFetchingNextPage:r,hasNextPage:a,fetchNextPage:o}=So(t,{useErrorBoundary:!0}),s=(u=n==null?void 0:n.pages.flatMap(c=>c.results))!=null?u:[],l=Gi(s,e.selected,e.selectableTypes,a,o,r);return S(Fe,{entities:s,isLoading:i,hasNextPage:a,fetchNextPage:o,isFetchingNextPage:r,selectAllIsChecked:l,...e})};try{Jr.displayName="ProjectListDetails",Jr.__docgenInfo={description:"",displayName:"ProjectListDetails",props:{showVersionSelection:{defaultValue:null,description:"",name:"showVersionSelection",required:!0,type:{name:"boolean"}},mustSelectVersionNumber:{defaultValue:null,description:"",name:"mustSelectVersionNumber",required:!0,type:{name:"boolean"}},selectColumnType:{defaultValue:null,description:"",name:"selectColumnType",required:!0,type:{name:"enum",value:[{value:'"checkbox"'},{value:'"none"'}]}},enableSelectAll:{defaultValue:null,description:"",name:"enableSelectAll",required:!0,type:{name:"boolean"}},visibleTypes:{defaultValue:null,description:"",name:"visibleTypes",required:!0,type:{name:"EntityType[]"}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"Map<string, number>"}},selectableTypes:{defaultValue:null,description:"",name:"selectableTypes",required:!0,type:{name:"EntityType[]"}},toggleSelection:{defaultValue:null,description:"",name:"toggleSelection",required:!0,type:{name:"(entity: Reference | Reference[]) => void"}},latestVersionText:{defaultValue:null,description:"",name:"latestVersionText",required:!1,type:{name:"string"}},setCurrentContainer:{defaultValue:null,description:"",name:"setCurrentContainer",required:!1,type:{name:"Dispatch<SetStateAction<EntityTreeContainer>>"}},projectsParams:{defaultValue:null,description:"",name:"projectsParams",required:!0,type:{name:"GetProjectsParameters"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/configurations/ProjectListDetails.tsx#ProjectListDetails"]={docgenInfo:Jr.__docgenInfo,name:"ProjectListDetails",path:"src/lib/containers/entity_finder/details/configurations/ProjectListDetails.tsx#ProjectListDetails"})}catch{}const Qr=({searchQuery:t,...e})=>{var s;const{data:n,isLoading:i,hasNextPage:r,fetchNextPage:a,isFetchingNextPage:o}=Pl(t,{enabled:!!t.queryTerm,useErrorBoundary:!0});return t.queryTerm?S(Fe,{entities:(s=n==null?void 0:n.pages.flatMap(l=>l.hits))!=null?s:[],isLoading:i,hasNextPage:r,fetchNextPage:a,isFetchingNextPage:o,noResultsPlaceholder:k(te,{children:[S("img",{className:"SearchPlaceholderImage",alt:"No results found",src:"https://s3.amazonaws.com/static.synapse.org/images/search-sad.svg"}),k("p",{children:["No results for \u201C",t.queryTerm.join(" "),"\u201D"]})]}),...e,enableSelectAll:!1}):S(Fe,{entities:[],isLoading:!1,hasNextPage:!1,noResultsPlaceholder:k(te,{children:[S("img",{className:"SearchPlaceholderImage",alt:"Begin searching",src:"https://s3.amazonaws.com/static.synapse.org/images/search-happy.svg"}),S("p",{children:"Enter a term or Synapse ID to start searching"})]}),...e,enableSelectAll:!1})};try{Qr.displayName="SearchDetails",Qr.__docgenInfo={description:"",displayName:"SearchDetails",props:{showVersionSelection:{defaultValue:null,description:"",name:"showVersionSelection",required:!0,type:{name:"boolean"}},mustSelectVersionNumber:{defaultValue:null,description:"",name:"mustSelectVersionNumber",required:!0,type:{name:"boolean"}},selectColumnType:{defaultValue:null,description:"",name:"selectColumnType",required:!0,type:{name:"enum",value:[{value:'"checkbox"'},{value:'"none"'}]}},enableSelectAll:{defaultValue:null,description:"",name:"enableSelectAll",required:!0,type:{name:"boolean"}},visibleTypes:{defaultValue:null,description:"",name:"visibleTypes",required:!0,type:{name:"EntityType[]"}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"Map<string, number>"}},selectableTypes:{defaultValue:null,description:"",name:"selectableTypes",required:!0,type:{name:"EntityType[]"}},toggleSelection:{defaultValue:null,description:"",name:"toggleSelection",required:!0,type:{name:"(entity: Reference | Reference[]) => void"}},latestVersionText:{defaultValue:null,description:"",name:"latestVersionText",required:!1,type:{name:"string"}},setCurrentContainer:{defaultValue:null,description:"",name:"setCurrentContainer",required:!1,type:{name:"Dispatch<SetStateAction<EntityTreeContainer>>"}},searchQuery:{defaultValue:null,description:"",name:"searchQuery",required:!0,type:{name:"SearchQuery"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/configurations/SearchDetails.tsx#SearchDetails"]={docgenInfo:Qr.__docgenInfo,name:"SearchDetails",path:"src/lib/containers/entity_finder/details/configurations/SearchDetails.tsx#SearchDetails"})}catch{}const wd=window.React.useState;var Ae=(t=>(t[t.HEADER_LIST=0]="HEADER_LIST",t[t.PARENT_CONTAINER=1]="PARENT_CONTAINER",t[t.USER_PROJECTS=2]="USER_PROJECTS",t[t.USER_FAVORITES=3]="USER_FAVORITES",t[t.ENTITY_SEARCH=4]="ENTITY_SEARCH",t[t.PROMPT=5]="PROMPT",t))(Ae||{});const er=({configuration:t,...e})=>{const[n,i]=wd(S(te,{}));return cl(()=>{i((a=>{var o;switch(a.type){case 1:return S(Gr,{parentContainerId:a.parentContainerId,...e});case 0:return S(Fe,{entities:a.headerList,isLoading:!1,hasNextPage:!1,...e,enableSelectAll:e.enableSelectAll,selectAllIsChecked:Ls((o=a.headerList)!=null?o:[],e.selected,e.selectableTypes)});case 3:return S(Xr,{...e});case 4:return S(Qr,{searchQuery:a.query,...e});case 2:return S(Jr,{projectsParams:a.getProjectParams,...e});case 5:return S(Fe,{entities:[],isLoading:!1,noResultsPlaceholder:S("div",{children:"Use the left panel to browse Synapse, then make a selection in this panel"}),...e,enableSelectAll:!1});default:return console.warn("The configuration type does not map to a known view type. No Details view will be rendered. Invalid configuration: ",a),S(te,{})}})(t))},[t,e]),S(mo,{children:n})};try{er.displayName="EntityDetailsList",er.__docgenInfo={description:"",displayName:"EntityDetailsList",props:{showVersionSelection:{defaultValue:null,description:"",name:"showVersionSelection",required:!0,type:{name:"boolean"}},mustSelectVersionNumber:{defaultValue:null,description:"",name:"mustSelectVersionNumber",required:!0,type:{name:"boolean"}},selectColumnType:{defaultValue:null,description:"",name:"selectColumnType",required:!0,type:{name:"enum",value:[{value:'"checkbox"'},{value:'"none"'}]}},enableSelectAll:{defaultValue:null,description:"",name:"enableSelectAll",required:!0,type:{name:"boolean"}},visibleTypes:{defaultValue:null,description:"",name:"visibleTypes",required:!0,type:{name:"EntityType[]"}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"Map<string, number>"}},selectableTypes:{defaultValue:null,description:"",name:"selectableTypes",required:!0,type:{name:"EntityType[]"}},toggleSelection:{defaultValue:null,description:"",name:"toggleSelection",required:!0,type:{name:"(entity: Reference | Reference[]) => void"}},latestVersionText:{defaultValue:null,description:"",name:"latestVersionText",required:!1,type:{name:"string"}},setCurrentContainer:{defaultValue:null,description:"",name:"setCurrentContainer",required:!1,type:{name:"Dispatch<SetStateAction<EntityTreeContainer>>"}},configuration:{defaultValue:null,description:"",name:"configuration",required:!0,type:{name:"EntityDetailsListDataConfiguration"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/details/EntityDetailsList.tsx#EntityDetailsList"]={docgenInfo:er.__docgenInfo,name:"EntityDetailsList",path:"src/lib/containers/entity_finder/details/EntityDetailsList.tsx#EntityDetailsList"})}catch{}const Sd=window.React.useEffect,Un=window.React.useState,Zr=({title:t,selectedEntities:e,toggleSelection:n})=>(typeof t=="function"&&(t=t(e.size)),k("div",{className:"EntityFinderSelectionPane alert alert-warning",children:[S(Zi,{variant:"headline3",display:"inline",children:t}),e.size<=200?S("div",{className:"EntityFinderSelectionPane__Items",children:Array.from(e.keys()).map(i=>{const r=e.get(i);return S("div",{children:S(bd,{entity:{targetId:i,targetVersionNumber:r!==We?r:void 0},toggleSelection:n})},`${i}${r!==We?`.${r}`:""}`)})}):S(Zi,{variant:"smallText1",children:"Too many items to show here"})]})),bd=({entity:t,toggleSelection:e})=>{const{data:n}=it(t.targetId,void 0,t.targetVersionNumber),[i,r]=Un(""),[a,o]=Un(""),[s,l]=Un("");return Sd(()=>{var u;if((u=n==null?void 0:n.path)!=null&&u.path){r(n.path.path[n.path.path.length-1].name);const c=n.path.path.slice(1,n.path.path.length-1);o(c.map(d=>d.name).join("/")),c.length<4?l(a):l(c[0].name+"/\u2026/"+c.slice(c.length-1).map(d=>d.name).join("/"))}},[n,a]),k("div",{className:"EntityFinderSelectionPane__Row",children:[n&&S(hi,{className:"EntityIcon",type:n.entityType}),S(Ke,{title:`${a}/${i}`,enterNextDelay:ml,placement:"top",children:S("span",{children:s?s+"/":""})}),i?S("span",{className:"EntityFinderSelectionPane__Row__EntityName",children:i}):S(ft,{width:500}),t.targetVersionNumber&&k("span",{children:[" (Version ",t.targetVersionNumber,")"]}),S(pl,{className:"EntityFinderSelectionPane__Row__DeselectButton",onClick:()=>{e(t)}})]})};try{Zr.displayName="SelectionPane",Zr.__docgenInfo={description:"",displayName:"SelectionPane",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string | ((count: number) => string)"}},selectedEntities:{defaultValue:null,description:"",name:"selectedEntities",required:!0,type:{name:"Map<string, number>"}},toggleSelection:{defaultValue:null,description:"",name:"toggleSelection",required:!0,type:{name:"(entity: Reference) => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/SelectionPane.tsx#SelectionPane"]={docgenInfo:Zr.__docgenInfo,name:"SelectionPane",path:"src/lib/containers/entity_finder/SelectionPane.tsx#SelectionPane"})}catch{}function Rd(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Yn=function(){},Ed=function(e,n){return n===void 0&&(n=null),{child:null,isShown:n?n.public.isOpen&&n.isShown:!0,parent:n,public:e,sibling:null,visited:!1}},Td=function(e,n){var i=n.getRecordData,r=i(e),a=r.data.id;return a};const Cd=window.React.createRef,Id=window.React.PureComponent;var xd=function(e){var n=e.index,i=e.data,r=i.component,a=i.getRecordData,o=i.treeData,s=e.style,l=e.isScrolling,u=a(n);return S(r,{...Object.assign({isScrolling:l,style:s,treeData:o},u)})},Od=function(e,n,i){var r=e.createRecord,a=n.buildingTaskTimeout,o=n.placeholder,s=n.async,l=s===void 0?!1:s,u=n.treeWalker,c=l&&i.records!==void 0,d=i.records,p=[],g=new Map,_=a?{timeout:a}:void 0,h=new WeakMap,v=u(),y=v.next(),T=y.value,R=r(T.data,i,void 0,c?d.get(T.data.id):void 0);g.set(R.public.data.id,R),h.set(R,T);var w=R,m=!0,b=R,E=o!==void 0&&!(o===null&&!i.order),I=E?function(x){return x.timeRemaining()>0}:function(){return!0},O=function x(z){for(;w!==null;){if(!I(z)){requestIdleCallback(x,_);return}if(w.visited)w.visited=!1,w=w.sibling!==null?w.sibling:w.parent,b=w;else{var M=v.next(h.get(w)),H=M.value;if(H===void 0){m?m=!1:(w.isShown&&p.push(w.public.data.id),w.visited=w.child!==null,w=w.child!==null?w.child:w.sibling!==null?w.sibling:w.parent),b=w;continue}var A=r(H.data,i,m?void 0:w,c?d.get(H.data.id):void 0);g.set(A.public.data.id,A),h.set(A,H),!m&&b===w?b.child=A:b.sibling=A,b=A}}E&&i.setState({order:p,records:g,updateRequest:{}})};return E?requestIdleCallback(O,_):O(),o!==void 0&&l&&i.order?i:{order:p,records:g}},ao=32768,zd=2,Nd=function(e,n){var i=e.order,r=e.records,a=n.opennessState;if(typeof a!="object")return null;for(var o in a)if(!!r.has(o)){var s=a[o],l=r.get(o),u=typeof s=="boolean"?{open:s}:s,c=u.open,d=u.subtreeCallback,p=d===void 0?Yn:d,g=Yn,_=Yn;l.isShown&&(c?function(){for(var v=i.indexOf(o),y=l;y!==null;){if(y.sibling!==null){y=y.sibling;break}y=y.parent}var T=y===null?i.length-1-v:i.indexOf(y.public.data.id)-1-v,R=[[v+1,T]];g=function(m){if(m.isShown=m.parent?m.parent.public.isOpen&&m.parent.isShown:!0,m.isShown){var b=R[R.length-1];b.push(m.public.data.id),b.length===ao+zd&&R.push([v+1+ao*R.length,0])}},_=function(){for(var m=0;m<R.length;m++){var b;(b=i).splice.apply(b,R[m])}}}():l.public.isOpen&&function(){var v=i.indexOf(o),y=0;g=function(R){R.isShown&&(y+=1),R.isShown=R.parent?R.parent.public.isOpen&&R.parent.isShown:!0},_=function(){i.splice(v+1,y)}}());for(var h=l;h!==null;)h.visited?(h.visited=!1,h=h===l?null:h.sibling!==null?h.sibling:h.parent):(h.public.isOpen=h===l?c:h.public.isOpen,p(h.public,l.public),h!==l&&g(h),h.visited=h.child!==null,h=h.child!==null?h.child:h===l?null:h.sibling!==null?h.sibling:h.parent);_()}return{order:i,records:r,updateRequest:{}}},Dd=function(e){return function(n,i,r){return r.refresh?Od(e,n,i):Nd(i,r)}},qs=function(t){ze(e,t),e.getDerivedStateFromProps=function(r,a){var o=r.listRef,s=o===void 0?null:o,l=r.treeWalker,u=a.computeTree,c=a.list,d=a.order,p=a.treeWalker;return J({attachRefs:Rd([c,s])},l!==p||!d?u(r,a,{refresh:!0}):null,{treeWalker:l})};function e(i,r){var a;return a=t.call(this,i,r)||this,a.getRecordData=a.getRecordData.bind(D(a)),a.state={list:Cd(),recomputeTree:a.recomputeTree.bind(D(a)),setState:a.setState.bind(D(a))},a}var n=e.prototype;return n.getItemData=function(){var r=this.props,a=r.children,o=r.itemData;return{component:a,getRecordData:this.getRecordData,treeData:o}},n.getRecordData=function(r){var a=this.state,o=a.order,s=a.records;return s.get(o[r]).public},n.recomputeTree=function(r){var a=this;return new Promise(function(o){a.setState(function(s){return s.computeTree(a.props,s,{opennessState:r})},o)})},n.scrollTo=function(r){var a;(a=this.state.list.current)==null||a.scrollTo(r)},n.scrollToItem=function(r,a){var o;(o=this.state.list.current)==null||o.scrollToItem(this.state.order.indexOf(r),a)},e}(Id);qs.defaultProps={rowComponent:xd};const Ad=window.React;var Md=Dd({createRecord:function(e,n,i,r){var a=n.recomputeTree,o=n.resetAfterId,s=Ed({data:e,height:r?r.public.height:e.defaultHeight,isOpen:r?r.public.isOpen:e.isOpenByDefault,resize:function(u,c){s.public.height=u,o(s.public.data.id,c)},setOpen:function(u){var c;return a((c={},c[e.id]=u,c))}},i);return s}}),Vd=function(t){ze(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.getItemSize=a.getItemSize.bind(D(a)),a.state=J({},a.state,{computeTree:Md,resetAfterId:a.resetAfterId.bind(D(a))}),a}var n=e.prototype;return n.resetAfterId=function(r,a){var o;a===void 0&&(a=!1);var s=this.state,l=s.list,u=s.order;(o=l.current)==null||o.resetAfterIndex(u.indexOf(r),a)},n.recomputeTree=function(r){var a=this;return t.prototype.recomputeTree.call(this,r).then(function(){var o;(o=a.state.list.current)==null||o.resetAfterIndex(0,!0)})},n.render=function(){var r=this.props;r.children;var a=r.placeholder,o=r.itemSize,s=r.rowComponent;r.treeWalker;var l=we(r,["children","placeholder","itemSize","rowComponent","treeWalker"]),u=this.state,c=u.attachRefs,d=u.order;return a&&d.length===0?a:Ad.createElement(Mc,Object.assign({},l,{itemCount:d.length,itemData:this.getItemData(),itemKey:Td,itemSize:o!=null?o:this.getItemSize,ref:c}),s)},n.getItemSize=function(r){return this.getRecordData(r).height},e}(qs);const en=window.React.useCallback,ui=window.React.useEffect,ks=window.React.useState;var $e=(t=>(t[t.SINGLE_PANE=0]="SINGLE_PANE",t[t.DUAL_PANE=1]="DUAL_PANE",t))($e||{});function Xi(t){return"__paginationNode"in t?"pagination":"id"in t?"entityHeader":"rootNodeConfiguration"}function yr(t){return Xi(t)==="pagination"}function oo(t){return Xi(t)==="entityHeader"}function ur(t){return Xi(t)==="rootNodeConfiguration"}function fn(t){return yr(t)?!0:ur(t)?t.hasNextPage:t.children==null||t.childrenNextPageToken!=null}function Pd(t){return yr(t)?!0:ur(t)?!1:!_o(Re(t))||t.children!=null&&t.children.length===0}const tr=t=>{const{node:e,nestingLevel:n,getNextPageOfChildren:i,setSelectedId:r,treeNodeType:a,selected:o,selectableTypes:s,autoExpand:l,defaultHeight:u,currentContainer:c}=t;if(yr(e))throw new Error("Cannot create data for a pagination node");const d=ur(e)?"root":e.id,p=a===0?o.has(d):c===d,g=!ur(e)&&!s.includes(Re(e)),_=l(d);return _&&e.children==null&&fn(e)&&i(),{data:{node:e,getNextPageOfChildren:i,id:d,isLeaf:Pd(e),isOpenByDefault:_,nestingLevel:n,setSelectedId:r,treeNodeType:a,isSelected:p,isDisabled:g,defaultHeight:u},nestingLevel:n,node:e}};function tn(t){const{data:{node:e,getNextPageOfChildren:n,isLeaf:i,id:r,nestingLevel:a,setSelectedId:o,treeNodeType:s,isSelected:l,isDisabled:u},isOpen:c,style:d,setOpen:p}=t,[g,_]=ks(!1),h=oo(e)?e.name:ur(e)?e.nodeText:S(ft,{width:100}),{ref:v,inView:y}=vo();ui(()=>{yr(e)&&y&&n()},[e,y,n]);const T=en(async()=>{fn(e)?(_(!0),await n(),await p(!c),_(!1)):await p(!c)},[n,e,c,p]);return ui(()=>{s===1&&l&&!c&&T()},[l]),"height"in d&&d.height===0?S(te,{}):k("div",{className:`Node ${s===0?"SelectNode":"BrowseNode"}`,"aria-selected":l,"aria-disabled":u,onClick:R=>{R.stopPropagation(),u||o(r)},style:{...d,paddingLeft:`${20+a*20}px`},children:[!i&&S("button",{className:"ExpandButton",type:"button",onClick:R=>{R.stopPropagation(),T()},children:g?S(ci,{size:10}):c?"\u25BE":"\u25B8"}),s===0&&S("div",{className:"EntityIcon",children:oo(e)&&S(hi,{type:Re(e)})}),S("div",{className:"EntityName",ref:v,children:h}),s===0&&S(Qt,{entityId:r,showHasDiscussionThread:!1,showHasWiki:!1,showUnlink:!1,canOpenModal:!1,renderTooltipComponent:!0})]})}function rn(t,e,n,i,r,a,o,s,l){return function*(){var c;for(yield tr({node:t,nestingLevel:0,getNextPageOfChildren:t.fetchNextPage,setSelectedId:e,treeNodeType:n,selected:i,selectableTypes:r,autoExpand:a,defaultHeight:o(),currentContainer:s});;){const d=yield;if(!yr(d.node)&&(d.node.children||fn(d.node))){for(let p=0;p<((c=d.node.children)!=null?c:[]).length;p++){const g=d.node.children[p];yield tr({node:g,nestingLevel:d.nestingLevel+1,getNextPageOfChildren:()=>l(g),setSelectedId:e,treeNodeType:n,selected:i,selectableTypes:r,autoExpand:a,defaultHeight:o(),currentContainer:s})}if(d.node.children!=null&&fn(d.node)){const p={__paginationNode:!0};yield{data:{id:d.data.id+"-pagination",node:p,isOpenByDefault:!1,getNextPageOfChildren:d.data.getNextPageOfChildren,isLeaf:!0,isSelected:!1,defaultHeight:o(),isDisabled:!0,nestingLevel:d.nestingLevel+1,setSelectedId:()=>{},treeNodeType:n},nestingLevel:d.nestingLevel+1,node:{__paginationNode:!0}}}}}}}const nn=t=>{const{rootNodeConfiguration:e,setSelectedId:n,treeNodeType:i,selected:r,currentContainer:a,selectableTypes:o,visibleTypes:s,autoExpand:l}=t,{accessToken:u}=ht(),[c,d]=ks(e);ui(()=>{d(e)},[e,e.children]);const p=en(h=>h===0&&!e.show?0:i===1?28:60,[i,e.show]),g=en(async h=>{const v=await el({parentId:h.id,nextPageToken:h.childrenNextPageToken,includeTypes:s},u);h.children?h.children.push(...v.page):h.children=v.page,h.childrenNextPageToken=v.nextPageToken,d(El(c))},[c,u,s]),_=en(rn(c,n,i,r,o,l,p,a,g),[c,n,i,r,o,l,a,g,p]);return S(Yi,{disableWidth:!0,children:({height:h})=>S(Vd,{treeWalker:_,itemSize:p,height:h,async:!0,width:"100%",children:tn})})};try{tn.displayName="Node",tn.__docgenInfo={description:"Node component for the react-vtree virtualized tree. Exported only for testing purposes",displayName:"Node",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"TreeData"}},setOpen:{defaultValue:null,description:"",name:"setOpen",required:!0,type:{name:"(state: boolean) => Promise<void>"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},resize:{defaultValue:null,description:"",name:"resize",required:!0,type:{name:"(height: number, shouldForceUpdate?: boolean | undefined) => void"}},treeData:{defaultValue:null,description:"The data provided by user via `itemData` Tree component property.",name:"treeData",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/tree/VirtualizedTree.tsx#Node"]={docgenInfo:tn.__docgenInfo,name:"Node",path:"src/lib/containers/entity_finder/tree/VirtualizedTree.tsx#Node"})}catch{}try{rn.displayName="getTreeWalkerFunction",rn.__docgenInfo={description:"Extracted from the React component for testing purposes",displayName:"getTreeWalkerFunction",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/tree/VirtualizedTree.tsx#getTreeWalkerFunction"]={docgenInfo:rn.__docgenInfo,name:"getTreeWalkerFunction",path:"src/lib/containers/entity_finder/tree/VirtualizedTree.tsx#getTreeWalkerFunction"})}catch{}try{$e.SINGLE_PANE.displayName="EntityTreeNodeType.SINGLE_PANE",$e.SINGLE_PANE.__docgenInfo={description:"The tree component's appearance and interactions will facilitate selection. Nodes will be larger and styles will indicate primary selection",displayName:"EntityTreeNodeType.SINGLE_PANE",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/tree/VirtualizedTree.tsx#EntityTreeNodeType.SINGLE_PANE"]={docgenInfo:$e.SINGLE_PANE.__docgenInfo,name:"EntityTreeNodeType.SINGLE_PANE",path:"src/lib/containers/entity_finder/tree/VirtualizedTree.tsx#EntityTreeNodeType.SINGLE_PANE"})}catch{}try{$e.DUAL_PANE.displayName="EntityTreeNodeType.DUAL_PANE",$e.DUAL_PANE.__docgenInfo={description:"The tree component's appearance and interactions will facilitate browsing. Nodes will be smaller and styles will indicate secondary selection",displayName:"EntityTreeNodeType.DUAL_PANE",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/tree/VirtualizedTree.tsx#EntityTreeNodeType.DUAL_PANE"]={docgenInfo:$e.DUAL_PANE.__docgenInfo,name:"EntityTreeNodeType.DUAL_PANE",path:"src/lib/containers/entity_finder/tree/VirtualizedTree.tsx#EntityTreeNodeType.DUAL_PANE"})}catch{}try{tr.displayName="getNodeData",tr.__docgenInfo={description:`Converts a TreeNode and related data into a TreeWalkerValue that react-vtree can use to render the tree.
Exported for testing purposes only.`,displayName:"getNodeData",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"TreeNode"}},nestingLevel:{defaultValue:null,description:"",name:"nestingLevel",required:!0,type:{name:"number"}},getNextPageOfChildren:{defaultValue:null,description:"",name:"getNextPageOfChildren",required:!0,type:{name:"() => Promise<void>"}},setSelectedId:{defaultValue:null,description:"",name:"setSelectedId",required:!0,type:{name:"(entityId: string) => void"}},treeNodeType:{defaultValue:null,description:"",name:"treeNodeType",required:!0,type:{name:"enum",value:[{value:"0"},{value:"1"}]}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"Map<string, number>"}},selectableTypes:{defaultValue:null,description:"",name:"selectableTypes",required:!0,type:{name:"EntityType[]"}},autoExpand:{defaultValue:null,description:"",name:"autoExpand",required:!0,type:{name:"(entityId: string) => boolean"}},defaultHeight:{defaultValue:null,description:"",name:"defaultHeight",required:!0,type:{name:"number"}},currentContainer:{defaultValue:null,description:"",name:"currentContainer",required:!1,type:{name:"string | null"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/tree/VirtualizedTree.tsx#getNodeData"]={docgenInfo:tr.__docgenInfo,name:"getNodeData",path:"src/lib/containers/entity_finder/tree/VirtualizedTree.tsx#getNodeData"})}catch{}try{nn.displayName="VirtualizedTree",nn.__docgenInfo={description:`Component that utilizes react-vtree to efficiently display a tree of entities. react-vtree utilizes react-window
to only render visible nodes, which eliminates performance issues as seen in SWC-5978.`,displayName:"VirtualizedTree",props:{treeNodeType:{defaultValue:null,description:"",name:"treeNodeType",required:!0,type:{name:"enum",value:[{value:"0"},{value:"1"}]}},rootNodeConfiguration:{defaultValue:null,description:"",name:"rootNodeConfiguration",required:!0,type:{name:"RootNodeConfiguration"}},setSelectedId:{defaultValue:null,description:"",name:"setSelectedId",required:!0,type:{name:"(entityId: string) => void"}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"Map<string, number>"}},currentContainer:{defaultValue:null,description:"",name:"currentContainer",required:!1,type:{name:"string | null"}},autoExpand:{defaultValue:null,description:"",name:"autoExpand",required:!0,type:{name:"(entityId: string) => boolean"}},selectableTypes:{defaultValue:null,description:"",name:"selectableTypes",required:!0,type:{name:"EntityType[]"}},visibleTypes:{defaultValue:null,description:"",name:"visibleTypes",required:!0,type:{name:"EntityType[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/tree/VirtualizedTree.tsx#VirtualizedTree"]={docgenInfo:nn.__docgenInfo,name:"VirtualizedTree",path:"src/lib/containers/entity_finder/tree/VirtualizedTree.tsx#VirtualizedTree"})}catch{}const Hd=window.React,so=window.React.useCallback,Dr=window.React.useEffect,Ld=window.React.useMemo,Ar=window.React.useState,qd=(t,e)=>{for(const n of e.path)if(t===n.id)return!0;return!1};var Fs=(t=>(t.CURRENT_PROJECT="Current Project",t.ALL_PROJECTS="All Projects",t.CREATED_BY_ME="Projects Created By Me",t.FAVORITES="My Favorites",t))(Fs||{});function kd(t){switch(t){case"My Favorites":return"root";case"Current Project":case"All Projects":case"Projects Created By Me":return null}}function Fd(t){switch(t){case"Current Project":case"All Projects":case"Projects Created By Me":return"Projects";case"My Favorites":return"Favorites"}}function rr(t){const{initialScope:e="Current Project",projectId:n,initialContainer:i=null,currentContainer:r,setCurrentContainer:a,visibleTypes:o=[tt.PROJECT,tt.FOLDER],toggleSelection:s,selectedEntities:l,setDetailsViewConfiguration:u,setBreadcrumbItems:c,showScopeAsRootNode:d=!0,treeNodeType:p,selectableTypes:g}=t,_={type:Ae.PROMPT},{accessToken:h}=ht(),[v,y]=Ar(!1),[T,R]=Ar([]),[w,m]=Ar(e),[b,E]=Ar(),I=go();Dr(()=>{u&&u(_)},[]);const O=so(C=>{s&&s({targetId:C}),a(C)},[a,s]),x=w==="All Projects"||w==="Projects Created By Me",{data:z,isSuccess:M,fetchNextPage:H,hasNextPage:A,isLoading:q}=So(w==="Projects Created By Me"?{filter:"CREATED",sort:"PROJECT_NAME",sortDirection:"ASC"}:{sort:"PROJECT_NAME",sortDirection:"ASC"},{enabled:x,refetchInterval:1/0}),{data:$,isSuccess:K}=it(r,void 0,void 0,{enabled:!!r&&r!=="root"});Dr(()=>{x&&M&&z!=null&&z.pages&&R(z.pages.flatMap(C=>C.results))},[x,M,z]),Dr(()=>{switch(y(!0),w){case"All Projects":case"Projects Created By Me":y(q);break;case"My Favorites":{nl(h).then(({results:C})=>{C=C.filter(L=>o.includes(sl(L.type))),R(C),y(!1)});break}case"Current Project":n?i!=null&&i.match(yo)?tl(i,h).then(C=>{C.path.map(L=>L.id).includes(n)||I(new Error(`An initial container (${i}) was provided but is not within or the same as the provided project (${n})`)),E(C),R([C.path[1]]),y(!1)}).catch(C=>I(C)):rl(n,h).then(C=>{R([C]),y(!1)}).catch(C=>I(C)):I(new Error("Cannot open current project because the current project is unknown"));break;default:I(new Error("No scope selected"))}},[h,w,i,I,o,q,n]),Dr(()=>{if(u||c){let C,L=[];if(r===null)C={type:Ae.PROMPT},L=[];else if(r==="root"){switch(w){case"All Projects":C={type:Ae.USER_PROJECTS};break;case"Projects Created By Me":C={type:Ae.USER_PROJECTS,getProjectParams:{filter:"CREATED"}};break;case"Current Project":C={type:Ae.HEADER_LIST,headerList:T};break;case"My Favorites":C={type:Ae.USER_FAVORITES};break}L=[{name:w,isCurrent:!0,action:()=>{a("root")}}]}else C={type:Ae.PARENT_CONTAINER,parentContainerId:r},K&&(L=[{name:w,isCurrent:!1,action:()=>{a("root")}},...$.path.path.slice(1).map(ee=>({name:ee.name,isCurrent:ee.id===r,action:()=>{a(ee.id)}}))]);u&&u(C),c&&c(L)}},[w,r,T,u,c,$,K,a]);const V=Ld(()=>({show:d,nodeText:Fd(w),children:T,fetchNextPage:async()=>{await H()},hasNextPage:x&&A&&!q}),[d,w,T,x,A,q,H]),N=so(C=>C==="root"?!0:!!(w==="Current Project"&&b&&qd(C,b)),[w,b]);return k("div",{className:`TreeView ${p===$e.SINGLE_PANE?"SelectTree":"BrowseTree"}`,children:[k("div",{className:"Header",children:[S("div",{className:"Browse",children:"Browse:"}),S("div",{onClick:C=>C.stopPropagation(),children:k(wr,{children:[S(wr.Toggle,{variant:"gray-primary-500",id:"dropdown-basic",children:w}),S(wr.Menu,{role:"menu",children:Object.values(Fs).map(C=>C==="Current Project"&&n==null?S(Hd.Fragment,{},C):S(wr.Item,{role:"menuitem",onClick:L=>{L.stopPropagation(),w!==C&&(m(C),a(kd(C)))},children:C},C))})]})})]}),v?S("div",{className:"Placeholder",children:S(ci,{size:30})}):S("div",{className:"Tree",role:"tree",children:S(nn,{selected:l,visibleTypes:o,autoExpand:N,rootNodeConfiguration:V,treeNodeType:p,selectableTypes:g,currentContainer:r,setSelectedId:O})})]})}try{rr.displayName="EntityTree",rr.__docgenInfo={description:"The TreeView displays a user's entities hierarchically, allowing a user to quickly dive into an entity tree.\n\nThe tree view currently can only be used to drive a DetailsView using the `setDetailsViewConfiguration` property.",displayName:"EntityTree",props:{initialScope:{defaultValue:null,description:"",name:"initialScope",required:!1,type:{name:"enum",value:[{value:'"Current Project"'},{value:'"All Projects"'},{value:'"Projects Created By Me"'},{value:'"My Favorites"'}]}},projectId:{defaultValue:null,description:"To show the current project, projectId must be defined",name:"projectId",required:!1,type:{name:"string"}},initialContainer:{defaultValue:null,description:"",name:"initialContainer",required:!0,type:{name:"EntityTreeContainer"}},currentContainer:{defaultValue:null,description:"",name:"currentContainer",required:!0,type:{name:"EntityTreeContainer"}},setCurrentContainer:{defaultValue:null,description:"",name:"setCurrentContainer",required:!0,type:{name:"Dispatch<SetStateAction<EntityTreeContainer>>"}},showDropdown:{defaultValue:null,description:"",name:"showDropdown",required:!0,type:{name:"boolean"}},selectedEntities:{defaultValue:null,description:"",name:"selectedEntities",required:!0,type:{name:"Map<string, number>"}},visibleTypes:{defaultValue:null,description:"",name:"visibleTypes",required:!1,type:{name:"EntityType[]"}},toggleSelection:{defaultValue:null,description:"",name:"toggleSelection",required:!1,type:{name:"((entity: Reference) => void)"}},setDetailsViewConfiguration:{defaultValue:null,description:"",name:"setDetailsViewConfiguration",required:!1,type:{name:"((configuration: EntityDetailsListDataConfiguration) => void)"}},setBreadcrumbItems:{defaultValue:null,description:"",name:"setBreadcrumbItems",required:!1,type:{name:"((items: BreadcrumbItem[]) => void)"}},showScopeAsRootNode:{defaultValue:null,description:"Determines whether to show the root node corresponding to the selected scope",name:"showScopeAsRootNode",required:!1,type:{name:"boolean"}},treeNodeType:{defaultValue:null,description:"",name:"treeNodeType",required:!0,type:{name:"enum",value:[{value:"0"},{value:"1"}]}},selectableTypes:{defaultValue:null,description:"The entity types that may be selected.",name:"selectableTypes",required:!0,type:{name:"EntityType[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/tree/EntityTree.tsx#EntityTree"]={docgenInfo:rr.__docgenInfo,name:"EntityTree",path:"src/lib/containers/entity_finder/tree/EntityTree.tsx#EntityTree"})}catch{}const $d=window.React.useCallback,lo=window.React.useEffect,uo=window.React.useMemo,Wd=window.React.useReducer,Bd=window.React.useRef,st=window.React.useState,jd=Object.values(tt),Kd=Object.values(tt),Ud=[tt.PROJECT,tt.FOLDER],We=-1,Yd=t=>Object.values(tt).filter(i=>!t.includes(i)).map(i=>({key:"node_type",value:i.toString(),not:!0})),an=({initialScope:t,projectId:e,initialContainer:n=null,selectMultiple:i,onSelectedChange:r,showVersionSelection:a=!0,mustSelectVersionNumber:o=!1,selectableTypes:s=jd,visibleTypesInList:l=Kd,visibleTypesInTree:u=Ud,selectedCopy:c=i?g=>`Selected (${g})`:"Selected",treeOnly:d=!1,latestVersionText:p})=>{const{accessToken:g}=ht(),[_,h]=st(!1),[v,y]=st(),[T,R]=st(),[w,m]=st({items:[]}),[b,E]=st([]),[I,O]=st({type:Ae.PROMPT}),x=Bd(null),z=uo(()=>[...u,...s],[u,s]),M=uo(()=>[...l,...s],[l,s]),[H,A]=st(n),q=go(),$=$d(P=>{m({items:P})},[m]);function K(P,ne){const yt=ne.get(P.targetId);return yt==null?!1:yt===We?P.targetVersionNumber===void 0:yt===P.targetVersionNumber}function V(P,ne){return P.withMutations(vt=>{Array.isArray(ne)||(ne=[ne]),ne.forEach(wt=>{var vr;K(wt,P)?vt.delete(wt.targetId):(i||vt.clear(),vt.set(wt.targetId,(vr=wt.targetVersionNumber)!=null?vr:We))})})}const[N,C]=Wd(V,mt());lo(()=>{r(N.toArray().map(([P,ne])=>({targetId:P,targetVersionNumber:ne===We?void 0:ne})))},[N,r]),lo(()=>{if((T==null?void 0:T.length)===1){const P=yo.exec(T[0]);P&&il([{targetId:P[1],targetVersionNumber:P[2]?parseInt(P[2]):void 0}],g).then(ne=>{E(ne.results)}).catch(ne=>q(ne))}else E([])},[g,T,q]);const L=_?"MainPanelSearch":d?"MainPanelSinglePane":"MainPanelDualPane";let ee;const De=["table","entityview","materializedview","submissionview","dataset"];return s.length===1?ee=`Search for ${zu(ll(s[0]))}`:s.every(P=>De.includes(P))?ee="Search for Tables":ee="Search all of Synapse",S(mo,{children:k("div",{className:"bootstrap-4-backport EntityFinder",children:[S("div",{className:"EntityFinder__Search","data-active":_,children:k(te,{children:[_?k(ea,{variant:"gray-primary-500",onClick:()=>{h(!1),y(""),R(void 0)},children:[S(ol,{arrowDirection:"left",style:{height:"16px"}}),"Back to Browse"]}):k(ea,{variant:"sds-primary",className:"EntityFinder__Search__SearchButton",onClick:()=>{h(!0),x.current.focus()},children:[S(Mr,{options:{icon:"search"}}),ee]}),S("span",{className:"SearchIcon",children:S(Mr,{options:{icon:"search"}})}),S(Tl,{role:"textbox",ref:x,"aria-hidden":!_,className:"EntityFinder__Search__Input",type:"search",placeholder:"Search by name, Wiki contents, or Synapse ID",value:v,onChange:P=>{y(P.target.value)},onKeyDown:P=>{P.key==="Enter"&&(P.target.value===""?R(void 0):R(P.target.value.trim().split(" ")))}}),v&&S("span",{className:"ClearSearchIcon",onClick:()=>{y(""),R(void 0)},children:S(Mr,{options:{icon:"close",label:"Clear Search"}})})]})}),k("div",{className:`EntityFinder__MainPanel ${L}`,children:[_&&S(er,{configuration:b&&b.length>0?{type:Ae.HEADER_LIST,headerList:b}:{type:Ae.ENTITY_SEARCH,query:{queryTerm:T,booleanQuery:Yd(s)}},showVersionSelection:a,mustSelectVersionNumber:o,selectColumnType:i?"checkbox":"none",selected:N,visibleTypes:s,selectableTypes:s,toggleSelection:C,enableSelectAll:i,latestVersionText:p,setCurrentContainer:void 0}),S("div",{style:_?{display:"none"}:{},children:d?S("div",{children:S(rr,{toggleSelection:C,showDropdown:!0,visibleTypes:z,initialScope:t,selectedEntities:N,projectId:e,initialContainer:n,currentContainer:H,setCurrentContainer:A,showScopeAsRootNode:!1,treeNodeType:$e.SINGLE_PANE,selectableTypes:s})}):S("div",{className:"EntityFinderReflexContainer",children:S(al.SizeMe,{children:({size:P})=>k(Fi,{orientation:"vertical",windowResizeAware:!0,children:[S(Na,{className:"TreeViewReflexElement",flex:.24,children:S(rr,{selectedEntities:N,setDetailsViewConfiguration:O,showDropdown:!0,visibleTypes:u,initialScope:t,projectId:e,initialContainer:n,currentContainer:H,setCurrentContainer:A,treeNodeType:$e.DUAL_PANE,setBreadcrumbItems:$,selectableTypes:u})}),S(Ee,{}),k(Na,{className:"DetailsViewReflexElement",children:[S(er,{configuration:I,mustSelectVersionNumber:o,showVersionSelection:a,selected:N,visibleTypes:M,selectableTypes:s,selectColumnType:i?"checkbox":"none",toggleSelection:C,enableSelectAll:i,latestVersionText:p,setCurrentContainer:A}),S(Hr,{...w})]})]},(!!P.width).toString())})})})]}),N.size>0&&S(Zr,{title:c,selectedEntities:N,toggleSelection:C})]})})};var qh=an;try{an.displayName="EntityFinder",an.__docgenInfo={description:"",displayName:"EntityFinder",props:{selectMultiple:{defaultValue:null,description:"Whether or not it is possible to select multiple entities",name:"selectMultiple",required:!0,type:{name:"boolean"}},onSelectedChange:{defaultValue:null,description:"Callback invoked when the selection changes",name:"onSelectedChange",required:!0,type:{name:"(selected: Reference[]) => void"}},initialScope:{defaultValue:null,description:'The initial appearance of the entity finder. Possible values include "Current Project", "All Projects", "Projects Created By Me", "My Favorites"',name:"initialScope",required:!0,type:{name:"enum",value:[{value:'"Current Project"'},{value:'"All Projects"'},{value:'"Projects Created By Me"'},{value:'"My Favorites"'}]}},projectId:{defaultValue:null,description:`The SynID of the 'Current Project'. If this is not a defined, then the scope cannot be "Current Project"`,name:"projectId",required:!1,type:{name:"string"}},initialContainer:{defaultValue:{value:"null"},description:"The SynID of the entity that should open by default. If this is a Syn ID, then it must be in the project specified in `projectId`",name:"initialContainer",required:!1,type:{name:"string | null"}},showVersionSelection:{defaultValue:{value:"true"},description:"Whether or not versions may be specified when selecting applicable entities",name:"showVersionSelection",required:!1,type:{name:"boolean"}},mustSelectVersionNumber:{defaultValue:{value:"false"},description:"For versionable entities, require the user to select a numbered version of an entity. This disallows selecting 'Always Latest Version'. Note that the latest version may still be mutable. Default true.",name:"mustSelectVersionNumber",required:!1,type:{name:"boolean"}},visibleTypesInList:{defaultValue:{value:"Object.values(EntityType)"},description:"The entity types to show in the details view (right pane). Any types specified in `selectableTypes` will automatically be included.",name:"visibleTypesInList",required:!1,type:{name:"EntityType[]"}},selectableTypes:{defaultValue:{value:"Object.values(EntityType)"},description:"The entity types that may be selected. Types in `visibleTypesInList` that are not in `selectableTypes` will appear as disabled options. Only the types in `selectableTypes` will appear in search",name:"selectableTypes",required:!1,type:{name:"EntityType[]"}},visibleTypesInTree:{defaultValue:{value:"[EntityType.PROJECT, EntityType.FOLDER]"},description:"The types to show in the tree used to navigate. If `treeOnly` is true, any types specified in `selectableTypes` will automatically be included.",name:"visibleTypesInTree",required:!1,type:{name:"EntityType[]"}},selectedCopy:{defaultValue:{value:"selectMultiple ? count => `Selected (${count})` : 'Selected'"},description:"The text to show before the list of selected entities",name:"selectedCopy",required:!1,type:{name:"string | ((count: number) => string)"}},treeOnly:{defaultValue:{value:"false"},description:"Whether to show only the tree. If `true`, the tree will be used to make selections",name:"treeOnly",required:!1,type:{name:"boolean"}},latestVersionText:{defaultValue:null,description:'Text shown for the latest version, if selectable by the user. Defaults to "Always Latest Version"',name:"latestVersionText",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/entity_finder/EntityFinder.tsx#EntityFinder"]={docgenInfo:an.__docgenInfo,name:"EntityFinder",path:"src/lib/containers/entity_finder/EntityFinder.tsx#EntityFinder"})}catch{}export{Ps as A,_r as B,$r as C,jn as D,qh as E,Fs as F,Fr as M,Wn as P,Kn as a,$n as b,kr as c,Br as d,Bn as e};
//# sourceMappingURL=EntityFinder.493e2111.js.map
