import{_}from"./objectWithoutProperties.07f8cd75.js";import{a as S}from"./toConsumableArray.8f496188.js";import{m as V,_ as L,h as I,a as l,S as A}from"./stateManager-845a3300.esm.e37b74c8.js";import{_ as D}from"./classCallCheck.8304ed06.js";import{c as k}from"./createClass.67a84016.js";import{_ as E}from"./inherits.0fdbf119.js";import{j as P}from"./jsx-runtime.2e925369.js";const R=window.React.Component;var q={cacheOptions:!1,defaultOptions:!1,filterOption:null,isLoading:!1},j=function(O){var c,h;return h=c=function(m){E(u,m);var v=L(u);function u(n){var t;return D(this,u),t=v.call(this),t.select=void 0,t.lastRequest=void 0,t.mounted=!1,t.handleInputChange=function(e,o){var a=t.props,i=a.cacheOptions,d=a.onInputChange,s=I(e,o,d);if(!s){delete t.lastRequest,t.setState({inputValue:"",loadedInputValue:"",loadedOptions:[],isLoading:!1,passEmptyOptions:!1});return}if(i&&t.state.optionsCache[s])t.setState({inputValue:s,loadedInputValue:s,loadedOptions:t.state.optionsCache[s],isLoading:!1,passEmptyOptions:!1});else{var f=t.lastRequest={};t.setState({inputValue:s,isLoading:!0,passEmptyOptions:!t.state.loadedInputValue},function(){t.loadOptions(s,function(p){!t.mounted||f===t.lastRequest&&(delete t.lastRequest,t.setState(function(r){return{isLoading:!1,loadedInputValue:s,loadedOptions:p||[],passEmptyOptions:!1,optionsCache:p?l(l({},r.optionsCache),{},S({},s,p)):r.optionsCache}}))})})}return s},t.state={defaultOptions:Array.isArray(n.defaultOptions)?n.defaultOptions:void 0,inputValue:typeof n.inputValue!="undefined"?n.inputValue:"",isLoading:n.defaultOptions===!0,loadedOptions:[],passEmptyOptions:!1,optionsCache:{},prevDefaultOptions:void 0,prevCacheOptions:void 0},t}return k(u,[{key:"componentDidMount",value:function(){var t=this;this.mounted=!0;var e=this.props.defaultOptions,o=this.state.inputValue;e===!0&&this.loadOptions(o,function(a){if(!!t.mounted){var i=!!t.lastRequest;t.setState({defaultOptions:a||[],isLoading:i})}})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"loadOptions",value:function(t,e){var o=this.props.loadOptions;if(!o)return e();var a=o(t,e);a&&typeof a.then=="function"&&a.then(e,function(){return e()})}},{key:"render",value:function(){var t=this,e=this.props;e.loadOptions;var o=e.isLoading,a=_(e,["loadOptions","isLoading"]),i=this.state,d=i.defaultOptions,s=i.inputValue,f=i.isLoading,p=i.loadedInputValue,r=i.loadedOptions,y=i.passEmptyOptions,g=y?[]:s&&p?r:d||[];return P(O,{...a,ref:function(C){t.select=C},options:g,isLoading:f||o,onInputChange:this.handleInputChange})}}],[{key:"getDerivedStateFromProps",value:function(t,e){var o=t.cacheOptions!==e.prevCacheOptions?{prevCacheOptions:t.cacheOptions,optionsCache:{}}:{},a=t.defaultOptions!==e.prevDefaultOptions?{prevDefaultOptions:t.defaultOptions,defaultOptions:Array.isArray(t.defaultOptions)?t.defaultOptions:void 0}:{};return l(l({},o),a)}}]),u}(R),c.defaultProps=q,h},w=V(A),W=j(w),H=W;export{H as A};
//# sourceMappingURL=react-select.esm.d3dc6345.js.map
