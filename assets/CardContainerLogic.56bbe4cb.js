import{h as le,j as zm,k as js,l as Ym,m as nf,n as Ws,o as nr,p as jm,q as Wm,r as Gm,t as Wl,v as Sa,F as Me,w as wn,x as fr,B as pr,y as rf,z as Km,A as Qm,C as hr,D as Gs,H as Xm,I as Zm,J as Jm,K as eg,L as tg,M as ng,N as rg,Q as Gl,R as of,T as wa,V as af,W as og,X as ag,Y as fe,Z as ig,_ as sg,$ as lg,a0 as cg,a1 as dg,U as ug,f as fg,a2 as pg,a3 as hg,a4 as Ks,a5 as mg,a6 as sf,a7 as gg,a8 as yg,a9 as vg,aa as bg,ab as Sg,ac as Kl,ad as Tr,ae as wg,af as Cg,ag as Qs,ah as lf,ai as Xs,aj as Zs,ak as Js,al as _g,am as Eg,E as cf,an as df,ao as xg,ap as uf,O as Ma,aq as Ql,G as Tg,ar as Og}from"./index.a37d8dd7.js";import{p as Cn,i as Ng,f as Ig,a as Rg,b as el,S as ff,D as Ag}from"./sqlFunctions.02978512.js";import{u as pf}from"./useGetInfoFromIds.086a064f.js";import{C as re}from"./ColumnType.744125d2.js";import{j as u,a as N,F as U,r as T,R as ge}from"./jsx-runtime.05444945.js";import{c as hf,E as Ss,a as Xl,i as kg,b as sn,d as Lg,e as yn,f as qg,g as mf,h as Dg,j as gf,k as yf}from"./EntityIcon.ef6419ba.js";import{P as qe,g as Pg,B as Mg}from"./getEndpoint.bb7ded34.js";import{u as Rt,E as Ca,I as _a,C as tl,a as Vg,S as Bg}from"./ElementWithTooltip.7f3d40d3.js";import{u as Fg,T as ze}from"./Tooltip.e02d1bf4.js";import{S as Va,Q as _n,a as En,u as wt,b as mr,c as $g,d as Hg,i as Ug,e as zg,C as Yg,f as jg,g as Wg,E as Gg,h as Kg,j as Qg,k as nl,l as rl,m as vf,n as Xg,o as Zg,F as Jg,p as bf,T as Sf,q as ey}from"./FacetNav.c72e1ef0.js";import{u as wf,a as ty,i as ny,r as ry}from"./queryUtils.517a1103.js";import{u as ol}from"./useEntity.44d8fc6d.js";import{T as vt}from"./Typography.9965ffbe.js";import{S as oy}from"./react-select.esm.88a0d1b6.js";import{i as ay,u as iy,f as sy,C as ly}from"./CustomSelectWidget.69493359.js";import{B as be}from"./Button.0b1296fc.js";import{u as xn}from"./react-intersection-observer.esm.91822557.js";import{u as Cf}from"./useInfiniteQuery.f58a924e.js";import{U as Wt,a as al,g as cy}from"./UserCard.42f90b17.js";import{f as il}from"./DateFormatter.d42d6702.js";import{h as gr}from"./moment.a565bb48.js";import{S as _f}from"./SkeletonTable.62b12d1a.js";import{S as ws}from"./Skeleton.7e3a4321.js";import{I as he,H as dy,S as uy,t as fy}from"./IconSvg.abab09ee.js";import{A as Ea,c as sl,B as Qt,C as py,j as yr,D as hy,G as Ef,H as my,J as gy,K as yy,L as vy,M as by,O as xf,P as Sy,Q as wy,R as Cy,e as Tf,T as Of,U as _y,V as ll,W as Nf,X as If,Y as Ey,Z as xy,$ as Rf,a0 as Ty,a1 as Oy,a2 as Ny,a3 as Iy,m as Ry,a4 as Ay,g as ky}from"./iframe.ff4ba921.js";import{_ as Ly,f as Af,a as kf,b as qy,c as Dy,d as Py,e as My,g as Vy,h as By,i as Fy,j as $y,k as Hy,l as Uy,s as zy,F as Yy}from"./core.esm.b50696ea.js";import{i as jy}from"./isString.519849ac.js";import{_ as Wy}from"./index.browser.b6f8f8d7.js";import{r as Gy}from"./index.849f5f8d.js";import{i as Lf,g as qf,p as Ky,e as Qy,a as Xy,c as Zy,o as Jy,f as ev,b as tv,d as nv,h as rv}from"./usePopperMarginModifiers.19dcb48e.js";import{C as Df,d as Gt}from"./ToastMessage.1a804d30.js";import{d as ov,s as av}from"./union.7a7b547b.js";import{i as iv}from"./isEqual.569c8d60.js";import{w as cl,b as xa,d as rr,e as Hr,_ as or,g as Mt}from"./withStyles.2a0b3149.js";import{c as sv,P as lv}from"./factory.e3a5734d.js";import{T as na,N as cv,I as Zl}from"./SynapseTableConstants.07ecdebd.js";import{u as Cs}from"./use-deep-compare-effect.esm.c3934740.js";import{u as dv}from"./useGetDownloadListStatistics.7a7fb0e6.js";import{e as dl}from"./queryKeys.e0d3085f.js";import{A as vr}from"./Alert.1016cb8e.js";import{C as ul}from"./Collapse.3aa549d7.js";import{M as ae,a as uv,b as fv}from"./Modal.45a88cca.js";import{D as Nt}from"./Dropdown.c0afb78a.js";import{Q as pv}from"./QueryCount.8f76a005.js";import{c as Xt}from"./createSvgIcon.49bfc951.js";import{c as ln}from"./cloneDeep.9c8853b8.js";import{N as hv}from"./NoData.b3a8e6f2.js";import{i as mv}from"./TypeUtils.a2c41307.js";import{u as Pf}from"./useGetAccessRequirement.aff2243e.js";import{B as gv,S as Ae}from"./ManagedACTAccessRequirementStatus.7aa6b053.js";import{F as Ba}from"./FileUpload.f33eac52.js";import{U as yv}from"./UserSearchBox.e85629df.js";import{R as vv}from"./RadioGroup.54d38b7b.js";import{S as bv,l as Mf}from"./LoadingScreen.fb5f4d08.js";import{E as _s}from"./EntityLink.eabec8c9.js";import{n as Sv}from"./uniq.9715b41f.js";import{C as wv}from"./Checkbox.d8bed1f5.js";import{s as Cv}from"./NoSearchResults.c8563c37.js";import{d as ct}from"./toConsumableArray.c4898ee4.js";import{_ as _v}from"./slicedToArray.e72f11da.js";import{u as Ev}from"./useTheme.48f15230.js";import{S as xv}from"./SynapseVideo.1f3e14b2.js";import{I as Tv}from"./IconList.d0325451.js";import{i as Ov}from"./isEmpty.2928b40e.js";import{U as Nv}from"./UserCardList.80e4d56d.js";const Iv=Xt(u("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})),Rv=Xt(N(U,{children:[u("path",{d:"M6 20h12V10H6v10zm6-7c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z",opacity:".3"}),u("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"})]})),Av=Xt(u("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}));var Ct=44,kv=function(t){return{root:{display:"inline-block"},static:{transition:t.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:t.transitions.create("transform")},colorPrimary:{color:t.palette.primary.main},colorSecondary:{color:t.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:t.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:t.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}},Lv=T.exports.forwardRef(function(t,n){var r=t.classes,o=t.className,a=t.color,i=a===void 0?"primary":a,s=t.disableShrink,l=s===void 0?!1:s,d=t.size,c=d===void 0?40:d,f=t.style,p=t.thickness,g=p===void 0?3.6:p,h=t.value,m=h===void 0?0:h,v=t.variant,b=v===void 0?"indeterminate":v,C=xa(t,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),S={},y={},w={};if(b==="determinate"||b==="static"){var _=2*Math.PI*((Ct-g)/2);S.strokeDasharray=_.toFixed(3),w["aria-valuenow"]=Math.round(m),S.strokeDashoffset="".concat(((100-m)/100*_).toFixed(3),"px"),y.transform="rotate(-90deg)"}return u("div",{className:rr(r.root,o,i!=="inherit"&&r["color".concat(Hr(i))],{determinate:r.determinate,indeterminate:r.indeterminate,static:r.static}[b]),style:or({width:c,height:c},y,f),ref:n,role:"progressbar",...w,...C,children:u("svg",{className:r.svg,viewBox:"".concat(Ct/2," ").concat(Ct/2," ").concat(Ct," ").concat(Ct),children:u("circle",{className:rr(r.circle,l&&r.circleDisableShrink,{determinate:r.circleDeterminate,indeterminate:r.circleIndeterminate,static:r.circleStatic}[b]),style:S,cx:Ct,cy:Ct,r:(Ct-g)/2,fill:"none",strokeWidth:g})})})});const qv=cl(kv,{name:"MuiCircularProgress",flip:!1})(Lv);var fl=(e=>(e.APPROVED="APPROVED",e.REVOKED="REVOKED",e))(fl||{}),Dv=(e=>(e.MODIFIED_ON="MODIFIED_ON",e.EXPIRED_ON="EXPIRED_ON",e))(Dv||{}),ft=(e=>(e.GAIN_ACCESS="GAIN_ACCESS",e.RENEW_ACCESS="RENEW_ACCESS",e.REVOKE_ACCESS="REVOKE_ACCESS",e))(ft||{});const Pv="org.sagebionetworks.repo.model.file.ExternalFileHandle",Mv="org.sagebionetworks.repo.model.file.ExternalObjectStoreFileHandle",Vv="org.sagebionetworks.repo.model.file.ProxyFileHandle",Bv=mv(Vv,Mv,Pv);var Ta=(e=>(e.ENTITY="ENTITY",e.EVALUATION="EVALUATION",e.TEAM="TEAM",e))(Ta||{}),Vf=(e=>(e.OPEN="OPEN",e.RESTRICTED_BY_TERMS_OF_USE="RESTRICTED_BY_TERMS_OF_USE",e.CONTROLLED_BY_ACT="CONTROLLED_BY_ACT",e))(Vf||{});function Fv(e,t){const{accessToken:n}=le(),r={accessRequirementId:e};return Cf(["approvedSubmissionInfo",r],async o=>await zm({...r,nextPageToken:o.pageParam},n),{...t,getNextPageParam:o=>o.nextPageToken})}const $v={includeEntity:!0,includeEntityPath:!0,includeAnnotations:!0,includePermissions:!0,includeHasChildren:!0,includeAccessControlList:!0,includeFileHandles:!0,includeTableBundle:!0,includeRootWikiId:!0,includeBenefactorACL:!0,includeDOIAssociation:!0,includeFileName:!0,includeThreadCount:!0,includeRestrictionInformation:!0};function Hv(e,t=$v,n,r){const{accessToken:o}=le();return js(dl.bundle(e,n,t),()=>Ym(e,t,n,o),r)}function Uv(e,t){const{accessToken:n}=le();return js(dl.children(e,!1),()=>nf(e,n),t)}function YR(e,t){const{accessToken:n}=le();return Cf(dl.children(e,!0),async r=>await nf({...e,includeTotalChildCount:r.pageParam?!1:e.includeTotalChildCount,nextPageToken:r.pageParam},n,r.signal),{...t,getNextPageParam:r=>r.nextPageToken})}function zv(e,t){const{accessToken:n}=le();return js(["entityHeaders",n,e],()=>Ws(e,n),t)}var Es={exports:{}},Se={},ar={exports:{}},Zt={};function Bf(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function Yv(e,t,n){}function jv(e,t,n){}var Wv=/javascript\s*\:/img;function Gv(e,t){return Wv.test(t)?"":t}Zt.whiteList=Bf();Zt.getDefaultWhiteList=Bf;Zt.onAttr=Yv;Zt.onIgnoreAttr=jv;Zt.safeAttrValue=Gv;var Kv={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},On=Kv;function Qv(e,t){e=On.trimRight(e),e[e.length-1]!==";"&&(e+=";");var n=e.length,r=!1,o=0,a=0,i="";function s(){if(!r){var c=On.trim(e.slice(o,a)),f=c.indexOf(":");if(f!==-1){var p=On.trim(c.slice(0,f)),g=On.trim(c.slice(f+1));if(p){var h=t(o,i.length,p,g,c);h&&(i+=h+"; ")}}}o=a+1}for(;a<n;a++){var l=e[a];if(l==="/"&&e[a+1]==="*"){var d=e.indexOf("*/",a+2);if(d===-1)break;a=d+1,o=a+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||s():l===`
`&&s()}return On.trim(i)}var Xv=Qv,Or=Zt,Zv=Xv;function Jl(e){return e==null}function Jv(e){var t={};for(var n in e)t[n]=e[n];return t}function Ff(e){e=Jv(e||{}),e.whiteList=e.whiteList||Or.whiteList,e.onAttr=e.onAttr||Or.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Or.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Or.safeAttrValue,this.options=e}Ff.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,o=n.onAttr,a=n.onIgnoreAttr,i=n.safeAttrValue,s=Zv(e,function(l,d,c,f,p){var g=r[c],h=!1;if(g===!0?h=g:typeof g=="function"?h=g(f):g instanceof RegExp&&(h=g.test(f)),h!==!0&&(h=!1),f=i(c,f),!!f){var m={position:d,sourcePosition:l,source:p,isWhite:h};if(h){var v=o(c,f,m);return Jl(v)?c+":"+f:v}else{var v=a(c,f,m);if(!Jl(v))return v}}});return s};var eb=Ff;(function(e,t){var n=Zt,r=eb;function o(i,s){var l=new r(s);return l.process(i)}t=e.exports=o,t.FilterCSS=r;for(var a in n)t[a]=n[a];typeof window<"u"&&(window.filterCSS=e.exports)})(ar,ar.exports);var pl={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,n=t.exec(e);return n?n.index:-1}},tb=ar.exports.FilterCSS,nb=ar.exports.getDefaultWhiteList,ra=pl;function $f(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Hf=new tb;function rb(e,t,n){}function ob(e,t,n){}function ab(e,t,n){}function ib(e,t,n){}function Uf(e){return e.replace(lb,"&lt;").replace(cb,"&gt;")}function sb(e,t,n,r){if(n=Kf(n),t==="href"||t==="src"){if(n=ra.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(t==="background"){if(Nr.lastIndex=0,Nr.test(n))return""}else if(t==="style"){if(ec.lastIndex=0,ec.test(n)||(tc.lastIndex=0,tc.test(n)&&(Nr.lastIndex=0,Nr.test(n))))return"";r!==!1&&(r=r||Hf,n=r.process(n))}return n=Qf(n),n}var lb=/</g,cb=/>/g,db=/"/g,ub=/&quot;/g,fb=/&#([a-zA-Z0-9]*);?/gim,pb=/&colon;?/gim,hb=/&newline;?/gim,Nr=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,ec=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,tc=/u\s*r\s*l\s*\(.*/gi;function zf(e){return e.replace(db,"&quot;")}function Yf(e){return e.replace(ub,'"')}function jf(e){return e.replace(fb,function(n,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function Wf(e){return e.replace(pb,":").replace(hb," ")}function Gf(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return ra.trim(t)}function Kf(e){return e=Yf(e),e=jf(e),e=Wf(e),e=Gf(e),e}function Qf(e){return e=zf(e),e=Uf(e),e}function mb(){return""}function gb(e,t){typeof t!="function"&&(t=function(){});var n=!Array.isArray(e);function r(i){return n?!0:ra.indexOf(e,i)!==-1}var o=[],a=!1;return{onIgnoreTag:function(i,s,l){if(r(i))if(l.isClosing){var d="[/removed]",c=l.position+d.length;return o.push([a!==!1?a:l.position,c]),a=!1,d}else return a||(a=l.position),"[removed]";else return t(i,s,l)},remove:function(i){var s="",l=0;return ra.forEach(o,function(d){s+=i.slice(l,d[0]),l=d[1]}),s+=i.slice(l),s}}}function yb(e){for(var t="",n=0;n<e.length;){var r=e.indexOf("<!--",n);if(r===-1){t+=e.slice(n);break}t+=e.slice(n,r);var o=e.indexOf("-->",r);if(o===-1)break;n=o+3}return t}function vb(e){var t=e.split("");return t=t.filter(function(n){var r=n.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}Se.whiteList=$f();Se.getDefaultWhiteList=$f;Se.onTag=rb;Se.onIgnoreTag=ob;Se.onTagAttr=ab;Se.onIgnoreTagAttr=ib;Se.safeAttrValue=sb;Se.escapeHtml=Uf;Se.escapeQuote=zf;Se.unescapeQuote=Yf;Se.escapeHtmlEntities=jf;Se.escapeDangerHtml5Entities=Wf;Se.clearNonPrintableCharacter=Gf;Se.friendlyAttrValue=Kf;Se.escapeAttrValue=Qf;Se.onIgnoreTagStripAll=mb;Se.StripTagBody=gb;Se.stripCommentTag=yb;Se.stripBlankChar=vb;Se.cssFilter=Hf;Se.getDefaultCSSWhiteList=nb;var Oa={},xt=pl;function bb(e){var t=xt.spaceIndex(e),n;return t===-1?n=e.slice(1,-1):n=e.slice(1,t+1),n=xt.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function Sb(e){return e.slice(0,2)==="</"}function wb(e,t,n){var r="",o=0,a=!1,i=!1,s=0,l=e.length,d="",c="";e:for(s=0;s<l;s++){var f=e.charAt(s);if(a===!1){if(f==="<"){a=s;continue}}else if(i===!1){if(f==="<"){r+=n(e.slice(o,s)),a=s,o=s;continue}if(f===">"||s===l-1){r+=n(e.slice(o,a)),c=e.slice(a,s+1),d=bb(c),r+=t(a,r.length,d,c,Sb(c)),o=s+1,a=!1;continue}if(f==='"'||f==="'")for(var p=1,g=e.charAt(s-p);g.trim()===""||g==="=";){if(g==="="){i=f;continue e}g=e.charAt(s-++p)}}else if(f===i){i=!1;continue}}return o<l&&(r+=n(e.substr(o))),r}var Cb=/[^a-zA-Z0-9\\_:.-]/gim;function _b(e,t){var n=0,r=0,o=[],a=!1,i=e.length;function s(p,g){if(p=xt.trim(p),p=p.replace(Cb,"").toLowerCase(),!(p.length<1)){var h=t(p,g||"");h&&o.push(h)}}for(var l=0;l<i;l++){var d=e.charAt(l),c,f;if(a===!1&&d==="="){a=e.slice(n,l),n=l+1,r=e.charAt(n)==='"'||e.charAt(n)==="'"?n:xb(e,l+1);continue}if(a!==!1&&l===r){if(f=e.indexOf(d,l+1),f===-1)break;c=xt.trim(e.slice(r+1,f)),s(a,c),a=!1,l=f,n=l+1;continue}if(/\s|\n|\t/.test(d))if(e=e.replace(/\s|\n|\t/g," "),a===!1)if(f=Eb(e,l),f===-1){c=xt.trim(e.slice(n,l)),s(c),a=!1,n=l+1;continue}else{l=f-1;continue}else if(f=Tb(e,l-1),f===-1){c=xt.trim(e.slice(n,l)),c=nc(c),s(a,c),a=!1,n=l+1;continue}else continue}return n<e.length&&(a===!1?s(e.slice(n)):s(a,nc(xt.trim(e.slice(n))))),xt.trim(o.join(" "))}function Eb(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="="?t:-1}}function xb(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="'"||n==='"'?t:-1}}function Tb(e,t){for(;t>0;t--){var n=e[t];if(n!==" ")return n==="="?t:-1}}function Ob(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function nc(e){return Ob(e)?e.substr(1,e.length-2):e}Oa.parseTag=wb;Oa.parseAttr=_b;var Nb=ar.exports.FilterCSS,Ge=Se,Xf=Oa,Ib=Xf.parseTag,Rb=Xf.parseAttr,Ur=pl;function Ir(e){return e==null}function Ab(e){var t=Ur.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=Ur.trim(e.slice(t+1,-1));var n=e[e.length-1]==="/";return n&&(e=Ur.trim(e.slice(0,-1))),{html:e,closing:n}}function kb(e){var t={};for(var n in e)t[n]=e[n];return t}function Lb(e){var t={};for(var n in e)Array.isArray(e[n])?t[n.toLowerCase()]=e[n].map(function(r){return r.toLowerCase()}):t[n.toLowerCase()]=e[n];return t}function Zf(e){e=kb(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Ge.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=Lb(e.whiteList||e.allowList):e.whiteList=Ge.whiteList,e.onTag=e.onTag||Ge.onTag,e.onTagAttr=e.onTagAttr||Ge.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Ge.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Ge.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Ge.safeAttrValue,e.escapeHtml=e.escapeHtml||Ge.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Nb(e.css))}Zf.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,o=n.onTag,a=n.onIgnoreTag,i=n.onTagAttr,s=n.onIgnoreTagAttr,l=n.safeAttrValue,d=n.escapeHtml,c=t.cssFilter;n.stripBlankChar&&(e=Ge.stripBlankChar(e)),n.allowCommentTag||(e=Ge.stripCommentTag(e));var f=!1;n.stripIgnoreTagBody&&(f=Ge.StripTagBody(n.stripIgnoreTagBody,a),a=f.onIgnoreTag);var p=Ib(e,function(g,h,m,v,b){var C={sourcePosition:g,position:h,isClosing:b,isWhite:Object.prototype.hasOwnProperty.call(r,m)},S=o(m,v,C);if(!Ir(S))return S;if(C.isWhite){if(C.isClosing)return"</"+m+">";var y=Ab(v),w=r[m],_=Rb(y.html,function(x,O){var I=Ur.indexOf(w,x)!==-1,L=i(m,x,O,I);return Ir(L)?I?(O=l(m,x,O,c),O?x+'="'+O+'"':x):(L=s(m,x,O,I),Ir(L)?void 0:L):L});return v="<"+m,_&&(v+=" "+_),y.closing&&(v+=" /"),v+=">",v}else return S=a(m,v,C),Ir(S)?d(v):S},d);return f&&(p=f.remove(p)),p};var qb=Zf;(function(e,t){var n=Se,r=Oa,o=qb;function a(s,l){var d=new o(l);return d.process(s)}t=e.exports=a,t.filterXSS=a,t.FilterXSS=o,function(){for(var s in n)t[s]=n[s];for(var l in r)t[l]=r[l]}(),typeof window<"u"&&(window.filterXSS=e.exports);function i(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}i()&&(self.filterXSS=e.exports)})(Es,Es.exports);const Db=Es.exports,Pb={whiteList:{a:["target","href","title","ref"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],body:[],br:[],button:["class"],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:["class"],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],g:[],h1:["toc"],h2:["toc"],h3:["toc"],h4:["toc"],h5:["toc"],h6:["toc"],head:[],header:[],hr:[],html:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:["class"],mark:[],nav:[],noscript:[],ol:["class"],p:[],pre:[],s:[],section:[],small:[],span:["data-widgetparams","class","id"],sub:[],summary:[],sup:[],strong:[],svg:[],table:["width","border","align","valign","class"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign","class"],thead:["class","align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:["class"],video:["autoplay","controls","loop","preload","src","height","width"]},stripIgnoreTagBody:!0,allowCommentTag:!1,css:!1,onIgnoreTag:function(e,t,n){if(e==="!doctype")return t},safeAttrValue:function(e,t,n){return e==="img"&&t==="src"?n&&(n.startsWith("data:image/")||n.startsWith("http"))?n:"":n}};function zr(e){let t="pill-xl ";const{align:n="",highlight:r=""}=e,o=n.toLowerCase();o==="left"&&(t+="floatLeft "),o==="right"&&(t+="floatright ");const a=r==="true"?"secondary":"light-secondary";return o==="center"?u("div",{className:"bootstrap-4-backport",style:{textAlign:"center"},children:u(be,{href:e.url,className:t,variant:a,children:e.text})}):u("span",{className:"bootstrap-4-backport",children:u(be,{href:e.url,className:t,variant:a,children:e.text})})}try{zr.displayName="MarkdownButton",zr.__docgenInfo={description:"",displayName:"MarkdownButton",props:{align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"string"}},highlight:{defaultValue:null,description:"",name:"highlight",required:!1,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownButton.tsx#MarkdownButton"]={docgenInfo:zr.__docgenInfo,name:"MarkdownButton",path:"src/lib/containers/markdown/widget/MarkdownButton.tsx#MarkdownButton"})}catch{}function Mb(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.boundaryCount,n=t===void 0?1:t,r=e.componentName,o=r===void 0?"usePagination":r,a=e.count,i=a===void 0?1:a,s=e.defaultPage,l=s===void 0?1:s,d=e.disabled,c=d===void 0?!1:d,f=e.hideNextButton,p=f===void 0?!1:f,g=e.hidePrevButton,h=g===void 0?!1:g,m=e.onChange,v=e.page,b=e.showFirstButton,C=b===void 0?!1:b,S=e.showLastButton,y=S===void 0?!1:S,w=e.siblingCount,_=w===void 0?1:w,x=xa(e,["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"]),O=Fg({controlled:v,default:l,name:o,state:"page"}),I=_v(O,2),L=I[0],D=I[1],M=function(j,q){v||D(q),m&&m(j,q)},V=function(j,q){var A=q-j+1;return Array.from({length:A},function($,Y){return j+Y})},E=V(1,Math.min(n,i)),k=V(Math.max(i-n+1,n+1),i),R=Math.max(Math.min(L-_,i-n-_*2-1),n+2),P=Math.min(Math.max(L+_,n+_*2+2),k[0]-2),B=[].concat(ct(C?["first"]:[]),ct(h?[]:["previous"]),ct(E),ct(R>n+2?["start-ellipsis"]:n+1<i-n?[n+1]:[]),ct(V(R,P)),ct(P<i-n-1?["end-ellipsis"]:i-n>n?[i-n]:[]),ct(k),ct(p?[]:["next"]),ct(y?["last"]:[])),H=function(j){switch(j){case"first":return 1;case"previous":return L-1;case"next":return L+1;case"last":return i;default:return null}},F=B.map(function(z){return typeof z=="number"?{onClick:function(q){M(q,z)},type:"page",page:z,selected:z===L,disabled:c,"aria-current":z===L?"true":void 0}:{onClick:function(q){M(q,H(z))},type:z,page:H(z),selected:!1,disabled:c||z.indexOf("ellipsis")===-1&&(z==="next"||z==="last"?L>=i:L<=1)}});return or({items:F},x)}const rc=Xt(u("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"})),oc=Xt(u("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"})),ac=Xt(u("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),ic=Xt(u("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}));var Vb=function(t){return{root:or({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:t.palette.text.primary}),page:{transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:t.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&$focusVisible":{backgroundColor:t.palette.action.focus},"&$selected":{backgroundColor:t.palette.action.selected,"&:hover, &$focusVisible":{backgroundColor:Mt(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.palette.action.selected}},"&$disabled":{opacity:1,color:t.palette.action.disabled,backgroundColor:t.palette.action.selected}},"&$disabled":{opacity:t.palette.action.disabledOpacity}},sizeSmall:{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px","& $icon":{fontSize:t.typography.pxToRem(18)}},sizeLarge:{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15),"& $icon":{fontSize:t.typography.pxToRem(22)}},textPrimary:{"&$selected":{color:t.palette.primary.contrastText,backgroundColor:t.palette.primary.main,"&:hover, &$focusVisible":{backgroundColor:t.palette.primary.dark,"@media (hover: none)":{backgroundColor:t.palette.primary.main}},"&$disabled":{color:t.palette.action.disabled}}},textSecondary:{"&$selected":{color:t.palette.secondary.contrastText,backgroundColor:t.palette.secondary.main,"&:hover, &$focusVisible":{backgroundColor:t.palette.secondary.dark,"@media (hover: none)":{backgroundColor:t.palette.secondary.main}},"&$disabled":{color:t.palette.action.disabled}}},outlined:{border:"1px solid ".concat(t.palette.type==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$selected":{"&$disabled":{border:"1px solid ".concat(t.palette.action.disabledBackground)}}},outlinedPrimary:{"&$selected":{color:t.palette.primary.main,border:"1px solid ".concat(Mt(t.palette.primary.main,.5)),backgroundColor:Mt(t.palette.primary.main,t.palette.action.activatedOpacity),"&:hover, &$focusVisible":{backgroundColor:Mt(t.palette.primary.main,t.palette.action.activatedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{color:t.palette.action.disabled}}},outlinedSecondary:{"&$selected":{color:t.palette.secondary.main,border:"1px solid ".concat(Mt(t.palette.secondary.main,.5)),backgroundColor:Mt(t.palette.secondary.main,t.palette.action.activatedOpacity),"&:hover, &$focusVisible":{backgroundColor:Mt(t.palette.secondary.main,t.palette.action.activatedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{color:t.palette.action.disabled}}},rounded:{borderRadius:t.shape.borderRadius},ellipsis:{height:"auto","&$disabled":{opacity:t.palette.action.disabledOpacity}},focusVisible:{},disabled:{},selected:{},icon:{fontSize:t.typography.pxToRem(20),margin:"0 -8px"}}},Bb=T.exports.forwardRef(function(t,n){var r=t.classes,o=t.className,a=t.color,i=a===void 0?"standard":a,s=t.component,l=t.disabled,d=l===void 0?!1:l,c=t.page,f=t.selected,p=f===void 0?!1:f,g=t.shape,h=g===void 0?"round":g,m=t.size,v=m===void 0?"medium":m,b=t.type,C=b===void 0?"page":b,S=t.variant,y=S===void 0?"text":S,w=xa(t,["classes","className","color","component","disabled","page","selected","shape","size","type","variant"]),_=Ev(),x=_.direction==="rtl"?{previous:ic,next:ac,last:rc,first:oc}:{previous:ac,next:ic,first:rc,last:oc},O=x[C];return C==="start-ellipsis"||C==="end-ellipsis"?u("div",{ref:n,className:rr(r.root,r.ellipsis,d&&r.disabled,v!=="medium"&&r["size".concat(Hr(v))]),children:"\u2026"}):N(gv,{ref:n,component:s,disabled:d,focusVisibleClassName:r.focusVisible,className:rr(r.root,r.page,r[y],r[h],o,i!=="standard"&&r["".concat(y).concat(Hr(i))],d&&r.disabled,p&&r.selected,v!=="medium"&&r["size".concat(Hr(v))]),...w,children:[C==="page"&&c,O?u(O,{className:r.icon}):null]})});const Fb=cl(Vb,{name:"MuiPaginationItem"})(Bb);var $b={root:{},ul:{display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}};function Hb(e,t,n){return e==="page"?"".concat(n?"":"Go to ","page ").concat(t):"Go to ".concat(e," page")}var Ub=T.exports.forwardRef(function(t,n){t.boundaryCount;var r=t.classes,o=t.className,a=t.color,i=a===void 0?"standard":a;t.count,t.defaultPage,t.disabled;var s=t.getItemAriaLabel,l=s===void 0?Hb:s;t.hideNextButton,t.hidePrevButton,t.onChange,t.page;var d=t.renderItem,c=d===void 0?function(y){return u(Fb,{...y})}:d,f=t.shape,p=f===void 0?"round":f;t.showFirstButton,t.showLastButton,t.siblingCount;var g=t.size,h=g===void 0?"medium":g,m=t.variant,v=m===void 0?"text":m,b=xa(t,["boundaryCount","classes","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"]),C=Mb(or({},t,{componentName:"Pagination"})),S=C.items;return u("nav",{"aria-label":"pagination navigation",className:rr(r.root,o),ref:n,...b,children:u("ul",{className:r.ul,children:S.map(function(y,w){return u("li",{children:c(or({},y,{color:i,"aria-label":l(y.type,y.page,y.selected),shape:p,size:h,variant:v}))},w)})})})});const zb=cl($b,{name:"MuiPagination"})(Ub),Yr=({info:e})=>u(U,{children:e&&N("p",{className:"SubmissionInfoCard",children:[u("strong",{children:" Project Lead: "})," ",u("span",{children:e.projectLead})," ",u("br",{}),u("strong",{children:" Institution: "})," ",u("span",{children:e.institution})," ",u("br",{}),u("strong",{children:" Data Access Request Submitted By: "})," ",u(Wt,{ownerId:e.submittedBy,size:nr})," ",u("br",{}),N("strong",{children:[" ","Intended Data Use Statement (accepted on"," ",il(gr(e.modifiedOn),"M/D/YYYY"),"):"]}),u("div",{children:e.intendedDataUseStatement}),e.accessorChanges&&e.accessorChanges.map(t=>N("div",{children:[u(Wt,{ownerId:t.userId,size:nr})," ",t.type]},`${t.userId}-${t.type}`))]})}),Bn=()=>N("p",{className:"SubmissionInfoCard",children:[u(_f,{numCols:1,numRows:4}),u(ws,{variant:"rect",width:"100%",height:80})]});try{Yr.displayName="SubmissionInfoCard",Yr.__docgenInfo={description:"",displayName:"SubmissionInfoCard",props:{info:{defaultValue:null,description:"",name:"info",required:!0,type:{name:"SubmissionInfo"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReportSubmissionInfo.tsx#SubmissionInfoCard"]={docgenInfo:Yr.__docgenInfo,name:"SubmissionInfoCard",path:"src/lib/containers/IDUReportSubmissionInfo.tsx#SubmissionInfoCard"})}catch{}try{Bn.displayName="LoadingSubmissionInfoCard",Bn.__docgenInfo={description:"",displayName:"LoadingSubmissionInfoCard",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReportSubmissionInfo.tsx#LoadingSubmissionInfoCard"]={docgenInfo:Bn.__docgenInfo,name:"LoadingSubmissionInfoCard",path:"src/lib/containers/IDUReportSubmissionInfo.tsx#LoadingSubmissionInfoCard"})}catch{}const jr=e=>{var f;const{accessRequirementId:t}=e,{ref:n,inView:r}=xn(),{data:o,status:a,isLoading:i,hasNextPage:s,isFetchingNextPage:l,fetchNextPage:d}=Fv(t,{useErrorBoundary:!0});T.exports.useEffect(()=>{a==="success"&&!l&&s&&d&&r&&d()},[a,s,l,d,r]);const c=(f=o==null?void 0:o.pages.flatMap(p=>p.results))!=null?f:[];return N(U,{children:[c.length>0&&N("div",{className:"IDUReport",children:[c.map(p=>N(ge.Fragment,{children:[u(Yr,{info:p}),u("hr",{})]},JSON.stringify(p))),u("div",{ref:n})]}),(i||l)&&N(U,{children:[u(Bn,{}),u(Bn,{})]})]})},Yb=jr;try{jr.displayName="IDUReport",jr.__docgenInfo={description:"",displayName:"IDUReport",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReport.tsx#IDUReport"]={docgenInfo:jr.__docgenInfo,name:"IDUReport",path:"src/lib/containers/IDUReport.tsx#IDUReport"})}catch{}function Wr(e){const{accessRestrictionId:t}=e;return u(Yb,{accessRequirementId:t})}try{Wr.displayName="MarkdownIDUReport",Wr.__docgenInfo={description:"",displayName:"MarkdownIDUReport",props:{accessRestrictionId:{defaultValue:null,description:"",name:"accessRestrictionId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownIDUReport.tsx#MarkdownIDUReport"]={docgenInfo:Wr.__docgenInfo,name:"MarkdownIDUReport",path:"src/lib/containers/markdown/widget/MarkdownIDUReport.tsx#MarkdownIDUReport"})}catch{}function jb(e){let t;const n=new Set,r=(d,c)=>{const f=typeof d=="function"?d(t):d;if(f!==t){const p=t;t=c?f:Object.assign({},t,f),n.forEach(g=>g(t,p))}},o=()=>t,a=(d,c=o,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=c(t);function g(){const h=c(t);if(!f(p,h)){const m=p;d(p=h,m)}}return n.add(g),()=>n.delete(g)},l={setState:r,getState:o,subscribe:(d,c,f)=>c||f?a(d,c,f):(n.add(d),()=>n.delete(d)),destroy:()=>n.clear()};return t=e(r,o,l),l}const Wb=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),sc=Wb?T.exports.useEffect:T.exports.useLayoutEffect;function Gb(e){const t=typeof e=="function"?jb(e):e,n=(r=t.getState,o=Object.is)=>{const[,a]=T.exports.useReducer(v=>v+1,0),i=t.getState(),s=T.exports.useRef(i),l=T.exports.useRef(r),d=T.exports.useRef(o),c=T.exports.useRef(!1),f=T.exports.useRef();f.current===void 0&&(f.current=r(i));let p,g=!1;(s.current!==i||l.current!==r||d.current!==o||c.current)&&(p=r(i),g=!o(f.current,p)),sc(()=>{g&&(f.current=p),s.current=i,l.current=r,d.current=o,c.current=!1});const h=T.exports.useRef(i);sc(()=>{const v=()=>{try{const C=t.getState(),S=l.current(C);d.current(f.current,S)||(s.current=C,f.current=S,a())}catch{c.current=!0,a()}},b=t.subscribe(v);return t.getState()!==h.current&&v(),b},[]);const m=g?p:f.current;return T.exports.useDebugValue(m),m};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,t];return{next(){const o=r.length<=0;return{value:r.shift(),done:o}}}},n}function Kb(){const e=T.exports.createContext(void 0);return{Provider:({initialStore:o,createStore:a,children:i})=>{const s=T.exports.useRef();return s.current||(o&&(console.warn("Provider initialStore is deprecated and will be removed in the next version."),a||(a=()=>o)),s.current=a()),T.exports.createElement(e.Provider,{value:s.current},i)},useStore:(o,a=Object.is)=>{const i=T.exports.useContext(e);if(!i)throw new Error("Seems like you have not used zustand provider as an ancestor.");return i(o,a)},useStoreApi:()=>{const o=T.exports.useContext(e);if(!o)throw new Error("Seems like you have not used zustand provider as an ancestor.");return T.exports.useMemo(()=>({getState:o.getState,setState:o.setState,subscribe:o.subscribe,destroy:o.destroy}),[o])}}}var Qb={value:()=>{}};function Na(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Gr(n)}function Gr(e){this._=e}function Xb(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Gr.prototype=Na.prototype={constructor:Gr,on:function(e,t){var n=this._,r=Xb(e+"",n),o,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((o=(e=r[a]).type)&&(o=Zb(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(o=(e=r[a]).type)n[o]=lc(n[o],e.name,t);else if(t==null)for(o in n)n[o]=lc(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Gr(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,a;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,o=a.length;r<o;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};function Zb(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function lc(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Qb,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var xs="http://www.w3.org/1999/xhtml";const cc={svg:"http://www.w3.org/2000/svg",xhtml:xs,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ia(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),cc.hasOwnProperty(t)?{space:cc[t],local:e}:e}function Jb(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===xs&&t.documentElement.namespaceURI===xs?t.createElement(e):t.createElementNS(n,e)}}function eS(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Jf(e){var t=Ia(e);return(t.local?eS:Jb)(t)}function tS(){}function hl(e){return e==null?tS:function(){return this.querySelector(e)}}function nS(e){typeof e!="function"&&(e=hl(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=new Array(i),l,d,c=0;c<i;++c)(l=a[c])&&(d=e.call(l,l.__data__,c,a))&&("__data__"in l&&(d.__data__=l.__data__),s[c]=d);return new Be(r,this._parents)}function rS(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function oS(){return[]}function ep(e){return e==null?oS:function(){return this.querySelectorAll(e)}}function aS(e){return function(){return rS(e.apply(this,arguments))}}function iS(e){typeof e=="function"?e=aS(e):e=ep(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i=t[a],s=i.length,l,d=0;d<s;++d)(l=i[d])&&(r.push(e.call(l,l.__data__,d,i)),o.push(l));return new Be(r,o)}function tp(e){return function(){return this.matches(e)}}function np(e){return function(t){return t.matches(e)}}var sS=Array.prototype.find;function lS(e){return function(){return sS.call(this.children,e)}}function cS(){return this.firstElementChild}function dS(e){return this.select(e==null?cS:lS(typeof e=="function"?e:np(e)))}var uS=Array.prototype.filter;function fS(){return Array.from(this.children)}function pS(e){return function(){return uS.call(this.children,e)}}function hS(e){return this.selectAll(e==null?fS:pS(typeof e=="function"?e:np(e)))}function mS(e){typeof e!="function"&&(e=tp(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],l,d=0;d<i;++d)(l=a[d])&&e.call(l,l.__data__,d,a)&&s.push(l);return new Be(r,this._parents)}function rp(e){return new Array(e.length)}function gS(){return new Be(this._enter||this._groups.map(rp),this._parents)}function oa(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}oa.prototype={constructor:oa,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function yS(e){return function(){return e}}function vS(e,t,n,r,o,a){for(var i=0,s,l=t.length,d=a.length;i<d;++i)(s=t[i])?(s.__data__=a[i],r[i]=s):n[i]=new oa(e,a[i]);for(;i<l;++i)(s=t[i])&&(o[i]=s)}function bS(e,t,n,r,o,a,i){var s,l,d=new Map,c=t.length,f=a.length,p=new Array(c),g;for(s=0;s<c;++s)(l=t[s])&&(p[s]=g=i.call(l,l.__data__,s,t)+"",d.has(g)?o[s]=l:d.set(g,l));for(s=0;s<f;++s)g=i.call(e,a[s],s,a)+"",(l=d.get(g))?(r[s]=l,l.__data__=a[s],d.delete(g)):n[s]=new oa(e,a[s]);for(s=0;s<c;++s)(l=t[s])&&d.get(p[s])===l&&(o[s]=l)}function SS(e){return e.__data__}function wS(e,t){if(!arguments.length)return Array.from(this,SS);var n=t?bS:vS,r=this._parents,o=this._groups;typeof e!="function"&&(e=yS(e));for(var a=o.length,i=new Array(a),s=new Array(a),l=new Array(a),d=0;d<a;++d){var c=r[d],f=o[d],p=f.length,g=CS(e.call(c,c&&c.__data__,d,r)),h=g.length,m=s[d]=new Array(h),v=i[d]=new Array(h),b=l[d]=new Array(p);n(c,f,m,v,b,g,t);for(var C=0,S=0,y,w;C<h;++C)if(y=m[C]){for(C>=S&&(S=C+1);!(w=v[S])&&++S<h;);y._next=w||null}}return i=new Be(i,r),i._enter=s,i._exit=l,i}function CS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _S(){return new Be(this._exit||this._groups.map(rp),this._parents)}function ES(e,t,n){var r=this.enter(),o=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?a.remove():n(a),r&&o?r.merge(o).order():o}function xS(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),s=new Array(o),l=0;l<i;++l)for(var d=n[l],c=r[l],f=d.length,p=s[l]=new Array(f),g,h=0;h<f;++h)(g=d[h]||c[h])&&(p[h]=g);for(;l<o;++l)s[l]=n[l];return new Be(s,this._parents)}function TS(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,a=r[o],i;--o>=0;)(i=r[o])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function OS(e){e||(e=NS);function t(f,p){return f&&p?e(f.__data__,p.__data__):!f-!p}for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i=n[a],s=i.length,l=o[a]=new Array(s),d,c=0;c<s;++c)(d=i[c])&&(l[c]=d);l.sort(t)}return new Be(o,this._parents).order()}function NS(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function IS(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function RS(){return Array.from(this)}function AS(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null}function kS(){let e=0;for(const t of this)++e;return e}function LS(){return!this.node()}function qS(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],a=0,i=o.length,s;a<i;++a)(s=o[a])&&e.call(s,s.__data__,a,o);return this}function DS(e){return function(){this.removeAttribute(e)}}function PS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function MS(e,t){return function(){this.setAttribute(e,t)}}function VS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function BS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function FS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function $S(e,t){var n=Ia(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?PS:DS:typeof t=="function"?n.local?FS:BS:n.local?VS:MS)(n,t))}function op(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function HS(e){return function(){this.style.removeProperty(e)}}function US(e,t,n){return function(){this.style.setProperty(e,t,n)}}function zS(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function YS(e,t,n){return arguments.length>1?this.each((t==null?HS:typeof t=="function"?zS:US)(e,t,n==null?"":n)):vn(this.node(),e)}function vn(e,t){return e.style.getPropertyValue(t)||op(e).getComputedStyle(e,null).getPropertyValue(t)}function jS(e){return function(){delete this[e]}}function WS(e,t){return function(){this[e]=t}}function GS(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function KS(e,t){return arguments.length>1?this.each((t==null?jS:typeof t=="function"?GS:WS)(e,t)):this.node()[e]}function ap(e){return e.trim().split(/^|\s+/)}function ml(e){return e.classList||new ip(e)}function ip(e){this._node=e,this._names=ap(e.getAttribute("class")||"")}ip.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function sp(e,t){for(var n=ml(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function lp(e,t){for(var n=ml(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function QS(e){return function(){sp(this,e)}}function XS(e){return function(){lp(this,e)}}function ZS(e,t){return function(){(t.apply(this,arguments)?sp:lp)(this,e)}}function JS(e,t){var n=ap(e+"");if(arguments.length<2){for(var r=ml(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?ZS:t?QS:XS)(n,t))}function ew(){this.textContent=""}function tw(e){return function(){this.textContent=e}}function nw(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function rw(e){return arguments.length?this.each(e==null?ew:(typeof e=="function"?nw:tw)(e)):this.node().textContent}function ow(){this.innerHTML=""}function aw(e){return function(){this.innerHTML=e}}function iw(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function sw(e){return arguments.length?this.each(e==null?ow:(typeof e=="function"?iw:aw)(e)):this.node().innerHTML}function lw(){this.nextSibling&&this.parentNode.appendChild(this)}function cw(){return this.each(lw)}function dw(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function uw(){return this.each(dw)}function fw(e){var t=typeof e=="function"?e:Jf(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function pw(){return null}function hw(e,t){var n=typeof e=="function"?e:Jf(e),r=t==null?pw:typeof t=="function"?t:hl(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function mw(){var e=this.parentNode;e&&e.removeChild(this)}function gw(){return this.each(mw)}function yw(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function vw(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function bw(e){return this.select(e?vw:yw)}function Sw(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ww(e){return function(t){e.call(this,t,this.__data__)}}function Cw(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function _w(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,o=t.length,a;n<o;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function Ew(e,t,n){return function(){var r=this.__on,o,a=ww(t);if(r){for(var i=0,s=r.length;i<s;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),o.value=t;return}}this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(o):this.__on=[o]}}function xw(e,t,n){var r=Cw(e+""),o,a=r.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,d=s.length,c;l<d;++l)for(o=0,c=s[l];o<a;++o)if((i=r[o]).type===c.type&&i.name===c.name)return c.value}return}for(s=t?Ew:_w,o=0;o<a;++o)this.each(s(r[o],t,n));return this}function cp(e,t,n){var r=op(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Tw(e,t){return function(){return cp(this,e,t)}}function Ow(e,t){return function(){return cp(this,e,t.apply(this,arguments))}}function Nw(e,t){return this.each((typeof t=="function"?Ow:Tw)(e,t))}function*Iw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length,i;o<a;++o)(i=r[o])&&(yield i)}var dp=[null];function Be(e,t){this._groups=e,this._parents=t}function br(){return new Be([[document.documentElement]],dp)}function Rw(){return this}Be.prototype=br.prototype={constructor:Be,select:nS,selectAll:iS,selectChild:dS,selectChildren:hS,filter:mS,data:wS,enter:gS,exit:_S,join:ES,merge:xS,selection:Rw,order:TS,sort:OS,call:IS,nodes:RS,node:AS,size:kS,empty:LS,each:qS,attr:$S,style:YS,property:KS,classed:JS,text:rw,html:sw,raise:cw,lower:uw,append:fw,insert:hw,remove:gw,clone:bw,datum:Sw,on:xw,dispatch:Nw,[Symbol.iterator]:Iw};function Ke(e){return typeof e=="string"?new Be([[document.querySelector(e)]],[document.documentElement]):new Be([[e]],dp)}function Aw(e){let t;for(;t=e.sourceEvent;)e=t;return e}function tt(e,t){if(e=Aw(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const kw={passive:!1},ir={capture:!0,passive:!1};function Fa(e){e.stopImmediatePropagation()}function un(e){e.preventDefault(),e.stopImmediatePropagation()}function up(e){var t=e.document.documentElement,n=Ke(e).on("dragstart.drag",un,ir);"onselectstart"in t?n.on("selectstart.drag",un,ir):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function fp(e,t){var n=e.document.documentElement,r=Ke(e).on("dragstart.drag",null);t&&(r.on("click.drag",un,ir),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Rr=e=>()=>e;function Ts(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:a,x:i,y:s,dx:l,dy:d,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:c}})}Ts.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Lw(e){return!e.ctrlKey&&!e.button}function qw(){return this.parentNode}function Dw(e,t){return t==null?{x:e.x,y:e.y}:t}function Pw(){return navigator.maxTouchPoints||"ontouchstart"in this}function Mw(){var e=Lw,t=qw,n=Dw,r=Pw,o={},a=Na("start","drag","end"),i=0,s,l,d,c,f=0;function p(y){y.on("mousedown.drag",g).filter(r).on("touchstart.drag",v).on("touchmove.drag",b,kw).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(y,w){if(!(c||!e.call(this,y,w))){var _=S(this,t.call(this,y,w),y,w,"mouse");!_||(Ke(y.view).on("mousemove.drag",h,ir).on("mouseup.drag",m,ir),up(y.view),Fa(y),d=!1,s=y.clientX,l=y.clientY,_("start",y))}}function h(y){if(un(y),!d){var w=y.clientX-s,_=y.clientY-l;d=w*w+_*_>f}o.mouse("drag",y)}function m(y){Ke(y.view).on("mousemove.drag mouseup.drag",null),fp(y.view,d),un(y),o.mouse("end",y)}function v(y,w){if(!!e.call(this,y,w)){var _=y.changedTouches,x=t.call(this,y,w),O=_.length,I,L;for(I=0;I<O;++I)(L=S(this,x,y,w,_[I].identifier,_[I]))&&(Fa(y),L("start",y,_[I]))}}function b(y){var w=y.changedTouches,_=w.length,x,O;for(x=0;x<_;++x)(O=o[w[x].identifier])&&(un(y),O("drag",y,w[x]))}function C(y){var w=y.changedTouches,_=w.length,x,O;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),x=0;x<_;++x)(O=o[w[x].identifier])&&(Fa(y),O("end",y,w[x]))}function S(y,w,_,x,O,I){var L=a.copy(),D=tt(I||_,w),M,V,E;if((E=n.call(y,new Ts("beforestart",{sourceEvent:_,target:p,identifier:O,active:i,x:D[0],y:D[1],dx:0,dy:0,dispatch:L}),x))!=null)return M=E.x-D[0]||0,V=E.y-D[1]||0,function k(R,P,B){var H=D,F;switch(R){case"start":o[O]=k,F=i++;break;case"end":delete o[O],--i;case"drag":D=tt(B||P,w),F=i;break}L.call(R,y,new Ts(R,{sourceEvent:P,subject:E,target:p,identifier:O,active:F,x:D[0]+M,y:D[1]+V,dx:D[0]-H[0],dy:D[1]-H[1],dispatch:L}),x)}}return p.filter=function(y){return arguments.length?(e=typeof y=="function"?y:Rr(!!y),p):e},p.container=function(y){return arguments.length?(t=typeof y=="function"?y:Rr(y),p):t},p.subject=function(y){return arguments.length?(n=typeof y=="function"?y:Rr(y),p):n},p.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:Rr(!!y),p):r},p.on=function(){var y=a.on.apply(a,arguments);return y===a?p:y},p.clickDistance=function(y){return arguments.length?(f=(y=+y)*y,p):Math.sqrt(f)},p}function gl(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function pp(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Sr(){}var sr=.7,aa=1/sr,fn="\\s*([+-]?\\d+)\\s*",lr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vw=/^#([0-9a-f]{3,8})$/,Bw=new RegExp(`^rgb\\(${fn},${fn},${fn}\\)$`),Fw=new RegExp(`^rgb\\(${rt},${rt},${rt}\\)$`),$w=new RegExp(`^rgba\\(${fn},${fn},${fn},${lr}\\)$`),Hw=new RegExp(`^rgba\\(${rt},${rt},${rt},${lr}\\)$`),Uw=new RegExp(`^hsl\\(${lr},${rt},${rt}\\)$`),zw=new RegExp(`^hsla\\(${lr},${rt},${rt},${lr}\\)$`),dc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gl(Sr,cr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:uc,formatHex:uc,formatHex8:Yw,formatHsl:jw,formatRgb:fc,toString:fc});function uc(){return this.rgb().formatHex()}function Yw(){return this.rgb().formatHex8()}function jw(){return hp(this).formatHsl()}function fc(){return this.rgb().formatRgb()}function cr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Vw.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?pc(t):n===3?new Le(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ar(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ar(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Bw.exec(e))?new Le(t[1],t[2],t[3],1):(t=Fw.exec(e))?new Le(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$w.exec(e))?Ar(t[1],t[2],t[3],t[4]):(t=Hw.exec(e))?Ar(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Uw.exec(e))?gc(t[1],t[2]/100,t[3]/100,1):(t=zw.exec(e))?gc(t[1],t[2]/100,t[3]/100,t[4]):dc.hasOwnProperty(e)?pc(dc[e]):e==="transparent"?new Le(NaN,NaN,NaN,0):null}function pc(e){return new Le(e>>16&255,e>>8&255,e&255,1)}function Ar(e,t,n,r){return r<=0&&(e=t=n=NaN),new Le(e,t,n,r)}function Ww(e){return e instanceof Sr||(e=cr(e)),e?(e=e.rgb(),new Le(e.r,e.g,e.b,e.opacity)):new Le}function Os(e,t,n,r){return arguments.length===1?Ww(e):new Le(e,t,n,r==null?1:r)}function Le(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}gl(Le,Os,pp(Sr,{brighter(e){return e=e==null?aa:Math.pow(aa,e),new Le(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?sr:Math.pow(sr,e),new Le(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Le(Ht(this.r),Ht(this.g),Ht(this.b),ia(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hc,formatHex:hc,formatHex8:Gw,formatRgb:mc,toString:mc}));function hc(){return`#${Bt(this.r)}${Bt(this.g)}${Bt(this.b)}`}function Gw(){return`#${Bt(this.r)}${Bt(this.g)}${Bt(this.b)}${Bt((isNaN(this.opacity)?1:this.opacity)*255)}`}function mc(){const e=ia(this.opacity);return`${e===1?"rgb(":"rgba("}${Ht(this.r)}, ${Ht(this.g)}, ${Ht(this.b)}${e===1?")":`, ${e})`}`}function ia(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ht(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Bt(e){return e=Ht(e),(e<16?"0":"")+e.toString(16)}function gc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Qe(e,t,n,r)}function hp(e){if(e instanceof Qe)return new Qe(e.h,e.s,e.l,e.opacity);if(e instanceof Sr||(e=cr(e)),!e)return new Qe;if(e instanceof Qe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,s=a-o,l=(a+o)/2;return s?(t===a?i=(n-r)/s+(n<r)*6:n===a?i=(r-t)/s+2:i=(t-n)/s+4,s/=l<.5?a+o:2-a-o,i*=60):s=l>0&&l<1?0:i,new Qe(i,s,l,e.opacity)}function Kw(e,t,n,r){return arguments.length===1?hp(e):new Qe(e,t,n,r==null?1:r)}function Qe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}gl(Qe,Kw,pp(Sr,{brighter(e){return e=e==null?aa:Math.pow(aa,e),new Qe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?sr:Math.pow(sr,e),new Qe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Le($a(e>=240?e-240:e+120,o,r),$a(e,o,r),$a(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Qe(yc(this.h),kr(this.s),kr(this.l),ia(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ia(this.opacity);return`${e===1?"hsl(":"hsla("}${yc(this.h)}, ${kr(this.s)*100}%, ${kr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function yc(e){return e=(e||0)%360,e<0?e+360:e}function kr(e){return Math.max(0,Math.min(1,e||0))}function $a(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const mp=e=>()=>e;function Qw(e,t){return function(n){return e+n*t}}function Xw(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Zw(e){return(e=+e)==1?gp:function(t,n){return n-t?Xw(t,n,e):mp(isNaN(t)?n:t)}}function gp(e,t){var n=t-e;return n?Qw(e,n):mp(isNaN(e)?t:e)}const vc=function e(t){var n=Zw(t);function r(o,a){var i=n((o=Os(o)).r,(a=Os(a)).r),s=n(o.g,a.g),l=n(o.b,a.b),d=gp(o.opacity,a.opacity);return function(c){return o.r=i(c),o.g=s(c),o.b=l(c),o.opacity=d(c),o+""}}return r.gamma=e,r}(1);function Tt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ns=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ha=new RegExp(Ns.source,"g");function Jw(e){return function(){return e}}function eC(e){return function(t){return e(t)+""}}function tC(e,t){var n=Ns.lastIndex=Ha.lastIndex=0,r,o,a,i=-1,s=[],l=[];for(e=e+"",t=t+"";(r=Ns.exec(e))&&(o=Ha.exec(t));)(a=o.index)>n&&(a=t.slice(n,a),s[i]?s[i]+=a:s[++i]=a),(r=r[0])===(o=o[0])?s[i]?s[i]+=o:s[++i]=o:(s[++i]=null,l.push({i,x:Tt(r,o)})),n=Ha.lastIndex;return n<t.length&&(a=t.slice(n),s[i]?s[i]+=a:s[++i]=a),s.length<2?l[0]?eC(l[0].x):Jw(t):(t=l.length,function(d){for(var c=0,f;c<t;++c)s[(f=l[c]).i]=f.x(d);return s.join("")})}var bc=180/Math.PI,Is={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yp(e,t,n,r,o,a){var i,s,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*bc,skewX:Math.atan(l)*bc,scaleX:i,scaleY:s}}var Lr;function nC(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Is:yp(t.a,t.b,t.c,t.d,t.e,t.f)}function rC(e){return e==null||(Lr||(Lr=document.createElementNS("http://www.w3.org/2000/svg","g")),Lr.setAttribute("transform",e),!(e=Lr.transform.baseVal.consolidate()))?Is:(e=e.matrix,yp(e.a,e.b,e.c,e.d,e.e,e.f))}function vp(e,t,n,r){function o(d){return d.length?d.pop()+" ":""}function a(d,c,f,p,g,h){if(d!==f||c!==p){var m=g.push("translate(",null,t,null,n);h.push({i:m-4,x:Tt(d,f)},{i:m-2,x:Tt(c,p)})}else(f||p)&&g.push("translate("+f+t+p+n)}function i(d,c,f,p){d!==c?(d-c>180?c+=360:c-d>180&&(d+=360),p.push({i:f.push(o(f)+"rotate(",null,r)-2,x:Tt(d,c)})):c&&f.push(o(f)+"rotate("+c+r)}function s(d,c,f,p){d!==c?p.push({i:f.push(o(f)+"skewX(",null,r)-2,x:Tt(d,c)}):c&&f.push(o(f)+"skewX("+c+r)}function l(d,c,f,p,g,h){if(d!==f||c!==p){var m=g.push(o(g)+"scale(",null,",",null,")");h.push({i:m-4,x:Tt(d,f)},{i:m-2,x:Tt(c,p)})}else(f!==1||p!==1)&&g.push(o(g)+"scale("+f+","+p+")")}return function(d,c){var f=[],p=[];return d=e(d),c=e(c),a(d.translateX,d.translateY,c.translateX,c.translateY,f,p),i(d.rotate,c.rotate,f,p),s(d.skewX,c.skewX,f,p),l(d.scaleX,d.scaleY,c.scaleX,c.scaleY,f,p),d=c=null,function(g){for(var h=-1,m=p.length,v;++h<m;)f[(v=p[h]).i]=v.x(g);return f.join("")}}}var oC=vp(nC,"px, ","px)","deg)"),aC=vp(rC,", ",")",")"),iC=1e-12;function Sc(e){return((e=Math.exp(e))+1/e)/2}function sC(e){return((e=Math.exp(e))-1/e)/2}function lC(e){return((e=Math.exp(2*e))-1)/(e+1)}const cC=function e(t,n,r){function o(a,i){var s=a[0],l=a[1],d=a[2],c=i[0],f=i[1],p=i[2],g=c-s,h=f-l,m=g*g+h*h,v,b;if(m<iC)b=Math.log(p/d)/t,v=function(x){return[s+x*g,l+x*h,d*Math.exp(t*x*b)]};else{var C=Math.sqrt(m),S=(p*p-d*d+r*m)/(2*d*n*C),y=(p*p-d*d-r*m)/(2*p*n*C),w=Math.log(Math.sqrt(S*S+1)-S),_=Math.log(Math.sqrt(y*y+1)-y);b=(_-w)/t,v=function(x){var O=x*b,I=Sc(w),L=d/(n*C)*(I*lC(t*O+w)-sC(w));return[s+L*g,l+L*h,d*I/Sc(t*O+w)]}}return v.duration=b*1e3*t/Math.SQRT2,v}return o.rho=function(a){var i=Math.max(.001,+a),s=i*i,l=s*s;return e(i,s,l)},o}(Math.SQRT2,2,4);var bn=0,Ln=0,Nn=0,bp=1e3,sa,qn,la=0,Kt=0,Ra=0,dr=typeof performance=="object"&&performance.now?performance:Date,Sp=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function yl(){return Kt||(Sp(dC),Kt=dr.now()+Ra)}function dC(){Kt=0}function ca(){this._call=this._time=this._next=null}ca.prototype=wp.prototype={constructor:ca,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?yl():+n)+(t==null?0:+t),!this._next&&qn!==this&&(qn?qn._next=this:sa=this,qn=this),this._call=e,this._time=n,Rs()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rs())}};function wp(e,t,n){var r=new ca;return r.restart(e,t,n),r}function uC(){yl(),++bn;for(var e=sa,t;e;)(t=Kt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--bn}function wc(){Kt=(la=dr.now())+Ra,bn=Ln=0;try{uC()}finally{bn=0,pC(),Kt=0}}function fC(){var e=dr.now(),t=e-la;t>bp&&(Ra-=t,la=e)}function pC(){for(var e,t=sa,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:sa=n);qn=e,Rs(r)}function Rs(e){if(!bn){Ln&&(Ln=clearTimeout(Ln));var t=e-Kt;t>24?(e<1/0&&(Ln=setTimeout(wc,e-dr.now()-Ra)),Nn&&(Nn=clearInterval(Nn))):(Nn||(la=dr.now(),Nn=setInterval(fC,bp)),bn=1,Sp(wc))}}function Cc(e,t,n){var r=new ca;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var hC=Na("start","end","cancel","interrupt"),mC=[],Cp=0,_c=1,As=2,Kr=3,Ec=4,ks=5,Qr=6;function Aa(e,t,n,r,o,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;gC(e,n,{name:t,index:r,group:o,on:hC,tween:mC,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Cp})}function vl(e,t){var n=Xe(e,t);if(n.state>Cp)throw new Error("too late; already scheduled");return n}function at(e,t){var n=Xe(e,t);if(n.state>Kr)throw new Error("too late; already running");return n}function Xe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function gC(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=wp(a,0,n.time);function a(d){n.state=_c,n.timer.restart(i,n.delay,n.time),n.delay<=d&&i(d-n.delay)}function i(d){var c,f,p,g;if(n.state!==_c)return l();for(c in r)if(g=r[c],g.name===n.name){if(g.state===Kr)return Cc(i);g.state===Ec?(g.state=Qr,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[c]):+c<t&&(g.state=Qr,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[c])}if(Cc(function(){n.state===Kr&&(n.state=Ec,n.timer.restart(s,n.delay,n.time),s(d))}),n.state=As,n.on.call("start",e,e.__data__,n.index,n.group),n.state===As){for(n.state=Kr,o=new Array(p=n.tween.length),c=0,f=-1;c<p;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++f]=g);o.length=f+1}}function s(d){for(var c=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(l),n.state=ks,1),f=-1,p=o.length;++f<p;)o[f].call(e,c);n.state===ks&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Qr,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function Xr(e,t){var n=e.__transition,r,o,a=!0,i;if(!!n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){a=!1;continue}o=r.state>As&&r.state<ks,r.state=Qr,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}a&&delete e.__transition}}function yC(e){return this.each(function(){Xr(this,e)})}function vC(e,t){var n,r;return function(){var o=at(this,e),a=o.tween;if(a!==n){r=n=a;for(var i=0,s=r.length;i<s;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function bC(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var a=at(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var s={name:t,value:n},l=0,d=o.length;l<d;++l)if(o[l].name===t){o[l]=s;break}l===d&&o.push(s)}a.tween=o}}function SC(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Xe(this.node(),n).tween,o=0,a=r.length,i;o<a;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?vC:bC)(n,e,t))}function bl(e,t,n){var r=e._id;return e.each(function(){var o=at(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Xe(o,r).value[t]}}function _p(e,t){var n;return(typeof t=="number"?Tt:t instanceof cr?vc:(n=cr(t))?(t=n,vc):tC)(e,t)}function wC(e){return function(){this.removeAttribute(e)}}function CC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _C(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttribute(e);return i===o?null:i===r?a:a=t(r=i,n)}}function EC(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?a:a=t(r=i,n)}}function xC(e,t,n){var r,o,a;return function(){var i,s=n(this),l;return s==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=s+"",i===l?null:i===r&&l===o?a:(o=l,a=t(r=i,s)))}}function TC(e,t,n){var r,o,a;return function(){var i,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=s+"",i===l?null:i===r&&l===o?a:(o=l,a=t(r=i,s)))}}function OC(e,t){var n=Ia(e),r=n==="transform"?aC:_p;return this.attrTween(e,typeof t=="function"?(n.local?TC:xC)(n,r,bl(this,"attr."+e,t)):t==null?(n.local?CC:wC)(n):(n.local?EC:_C)(n,r,t))}function NC(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function IC(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function RC(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&IC(e,a)),n}return o._value=t,o}function AC(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&NC(e,a)),n}return o._value=t,o}function kC(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ia(e);return this.tween(n,(r.local?RC:AC)(r,t))}function LC(e,t){return function(){vl(this,e).delay=+t.apply(this,arguments)}}function qC(e,t){return t=+t,function(){vl(this,e).delay=t}}function DC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?LC:qC)(t,e)):Xe(this.node(),t).delay}function PC(e,t){return function(){at(this,e).duration=+t.apply(this,arguments)}}function MC(e,t){return t=+t,function(){at(this,e).duration=t}}function VC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?PC:MC)(t,e)):Xe(this.node(),t).duration}function BC(e,t){if(typeof t!="function")throw new Error;return function(){at(this,e).ease=t}}function FC(e){var t=this._id;return arguments.length?this.each(BC(t,e)):Xe(this.node(),t).ease}function $C(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;at(this,e).ease=n}}function HC(e){if(typeof e!="function")throw new Error;return this.each($C(this._id,e))}function UC(e){typeof e!="function"&&(e=tp(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],l,d=0;d<i;++d)(l=a[d])&&e.call(l,l.__data__,d,a)&&s.push(l);return new bt(r,this._parents,this._name,this._id)}function zC(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),s=0;s<a;++s)for(var l=t[s],d=n[s],c=l.length,f=i[s]=new Array(c),p,g=0;g<c;++g)(p=l[g]||d[g])&&(f[g]=p);for(;s<r;++s)i[s]=t[s];return new bt(i,this._parents,this._name,this._id)}function YC(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function jC(e,t,n){var r,o,a=YC(t)?vl:at;return function(){var i=a(this,e),s=i.on;s!==r&&(o=(r=s).copy()).on(t,n),i.on=o}}function WC(e,t){var n=this._id;return arguments.length<2?Xe(this.node(),n).on.on(e):this.each(jC(n,e,t))}function GC(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function KC(){return this.on("end.remove",GC(this._id))}function QC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hl(e));for(var r=this._groups,o=r.length,a=new Array(o),i=0;i<o;++i)for(var s=r[i],l=s.length,d=a[i]=new Array(l),c,f,p=0;p<l;++p)(c=s[p])&&(f=e.call(c,c.__data__,p,s))&&("__data__"in c&&(f.__data__=c.__data__),d[p]=f,Aa(d[p],t,n,p,d,Xe(c,n)));return new bt(a,this._parents,t,n)}function XC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ep(e));for(var r=this._groups,o=r.length,a=[],i=[],s=0;s<o;++s)for(var l=r[s],d=l.length,c,f=0;f<d;++f)if(c=l[f]){for(var p=e.call(c,c.__data__,f,l),g,h=Xe(c,n),m=0,v=p.length;m<v;++m)(g=p[m])&&Aa(g,t,n,m,p,h);a.push(p),i.push(c)}return new bt(a,i,t,n)}var ZC=br.prototype.constructor;function JC(){return new ZC(this._groups,this._parents)}function e_(e,t){var n,r,o;return function(){var a=vn(this,e),i=(this.style.removeProperty(e),vn(this,e));return a===i?null:a===n&&i===r?o:o=t(n=a,r=i)}}function Ep(e){return function(){this.style.removeProperty(e)}}function t_(e,t,n){var r,o=n+"",a;return function(){var i=vn(this,e);return i===o?null:i===r?a:a=t(r=i,n)}}function n_(e,t,n){var r,o,a;return function(){var i=vn(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),vn(this,e))),i===l?null:i===r&&l===o?a:(o=l,a=t(r=i,s))}}function r_(e,t){var n,r,o,a="style."+t,i="end."+a,s;return function(){var l=at(this,e),d=l.on,c=l.value[a]==null?s||(s=Ep(t)):void 0;(d!==n||o!==c)&&(r=(n=d).copy()).on(i,o=c),l.on=r}}function o_(e,t,n){var r=(e+="")=="transform"?oC:_p;return t==null?this.styleTween(e,e_(e,r)).on("end.style."+e,Ep(e)):typeof t=="function"?this.styleTween(e,n_(e,r,bl(this,"style."+e,t))).each(r_(this._id,e)):this.styleTween(e,t_(e,r,t),n).on("end.style."+e,null)}function a_(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function i_(e,t,n){var r,o;function a(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&a_(e,i,n)),r}return a._value=t,a}function s_(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,i_(e,t,n==null?"":n))}function l_(e){return function(){this.textContent=e}}function c_(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function d_(e){return this.tween("text",typeof e=="function"?c_(bl(this,"text",e)):l_(e==null?"":e+""))}function u_(e){return function(t){this.textContent=e.call(this,t)}}function f_(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&u_(o)),t}return r._value=e,r}function p_(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,f_(e))}function h_(){for(var e=this._name,t=this._id,n=xp(),r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,l,d=0;d<s;++d)if(l=i[d]){var c=Xe(l,t);Aa(l,e,n,d,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new bt(r,this._parents,e,n)}function m_(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(a,i){var s={value:i},l={value:function(){--o===0&&a()}};n.each(function(){var d=at(this,r),c=d.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),d.on=t}),o===0&&a()})}var g_=0;function bt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function xp(){return++g_}var dt=br.prototype;bt.prototype={constructor:bt,select:QC,selectAll:XC,selectChild:dt.selectChild,selectChildren:dt.selectChildren,filter:UC,merge:zC,selection:JC,transition:h_,call:dt.call,nodes:dt.nodes,node:dt.node,size:dt.size,empty:dt.empty,each:dt.each,on:WC,attr:OC,attrTween:kC,style:o_,styleTween:s_,text:d_,textTween:p_,remove:KC,tween:SC,delay:DC,duration:VC,ease:FC,easeVarying:HC,end:m_,[Symbol.iterator]:dt[Symbol.iterator]};function y_(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var v_={time:null,delay:0,duration:250,ease:y_};function b_(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function S_(e){var t,n;e instanceof bt?(t=e._id,e=e._name):(t=xp(),(n=v_).time=yl(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,l,d=0;d<s;++d)(l=i[d])&&Aa(l,e,t,d,i,n||b_(l,t));return new bt(r,this._parents,e,t)}br.prototype.interrupt=yC;br.prototype.transition=S_;const qr=e=>()=>e;function w_(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function ht(e,t,n){this.k=e,this.x=t,this.y=n}ht.prototype={constructor:ht,scale:function(e){return e===1?this:new ht(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ht(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ut=new ht(1,0,0);ht.prototype;function Ua(e){e.stopImmediatePropagation()}function In(e){e.preventDefault(),e.stopImmediatePropagation()}function C_(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function __(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function xc(){return this.__zoom||Ut}function E_(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function x_(){return navigator.maxTouchPoints||"ontouchstart"in this}function T_(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function O_(){var e=C_,t=__,n=T_,r=E_,o=x_,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,l=cC,d=Na("start","zoom","end"),c,f,p,g=500,h=150,m=0,v=10;function b(E){E.property("__zoom",xc).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",L).filter(o).on("touchstart.zoom",D).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(E,k,R,P){var B=E.selection?E.selection():E;B.property("__zoom",xc),E!==B?w(E,k,R,P):B.interrupt().each(function(){_(this,arguments).event(P).start().zoom(null,typeof k=="function"?k.apply(this,arguments):k).end()})},b.scaleBy=function(E,k,R,P){b.scaleTo(E,function(){var B=this.__zoom.k,H=typeof k=="function"?k.apply(this,arguments):k;return B*H},R,P)},b.scaleTo=function(E,k,R,P){b.transform(E,function(){var B=t.apply(this,arguments),H=this.__zoom,F=R==null?y(B):typeof R=="function"?R.apply(this,arguments):R,z=H.invert(F),j=typeof k=="function"?k.apply(this,arguments):k;return n(S(C(H,j),F,z),B,i)},R,P)},b.translateBy=function(E,k,R,P){b.transform(E,function(){return n(this.__zoom.translate(typeof k=="function"?k.apply(this,arguments):k,typeof R=="function"?R.apply(this,arguments):R),t.apply(this,arguments),i)},null,P)},b.translateTo=function(E,k,R,P,B){b.transform(E,function(){var H=t.apply(this,arguments),F=this.__zoom,z=P==null?y(H):typeof P=="function"?P.apply(this,arguments):P;return n(Ut.translate(z[0],z[1]).scale(F.k).translate(typeof k=="function"?-k.apply(this,arguments):-k,typeof R=="function"?-R.apply(this,arguments):-R),H,i)},P,B)};function C(E,k){return k=Math.max(a[0],Math.min(a[1],k)),k===E.k?E:new ht(k,E.x,E.y)}function S(E,k,R){var P=k[0]-R[0]*E.k,B=k[1]-R[1]*E.k;return P===E.x&&B===E.y?E:new ht(E.k,P,B)}function y(E){return[(+E[0][0]+ +E[1][0])/2,(+E[0][1]+ +E[1][1])/2]}function w(E,k,R,P){E.on("start.zoom",function(){_(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(P).end()}).tween("zoom",function(){var B=this,H=arguments,F=_(B,H).event(P),z=t.apply(B,H),j=R==null?y(z):typeof R=="function"?R.apply(B,H):R,q=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),A=B.__zoom,$=typeof k=="function"?k.apply(B,H):k,Y=l(A.invert(j).concat(q/A.k),$.invert(j).concat(q/$.k));return function(G){if(G===1)G=$;else{var Z=Y(G),Q=q/Z[2];G=new ht(Q,j[0]-Z[0]*Q,j[1]-Z[1]*Q)}F.zoom(null,G)}})}function _(E,k,R){return!R&&E.__zooming||new x(E,k)}function x(E,k){this.that=E,this.args=k,this.active=0,this.sourceEvent=null,this.extent=t.apply(E,k),this.taps=0}x.prototype={event:function(E){return E&&(this.sourceEvent=E),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(E,k){return this.mouse&&E!=="mouse"&&(this.mouse[1]=k.invert(this.mouse[0])),this.touch0&&E!=="touch"&&(this.touch0[1]=k.invert(this.touch0[0])),this.touch1&&E!=="touch"&&(this.touch1[1]=k.invert(this.touch1[0])),this.that.__zoom=k,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(E){var k=Ke(this.that).datum();d.call(E,this.that,new w_(E,{sourceEvent:this.sourceEvent,target:b,type:E,transform:this.that.__zoom,dispatch:d}),k)}};function O(E,...k){if(!e.apply(this,arguments))return;var R=_(this,k).event(E),P=this.__zoom,B=Math.max(a[0],Math.min(a[1],P.k*Math.pow(2,r.apply(this,arguments)))),H=tt(E);if(R.wheel)(R.mouse[0][0]!==H[0]||R.mouse[0][1]!==H[1])&&(R.mouse[1]=P.invert(R.mouse[0]=H)),clearTimeout(R.wheel);else{if(P.k===B)return;R.mouse=[H,P.invert(H)],Xr(this),R.start()}In(E),R.wheel=setTimeout(F,h),R.zoom("mouse",n(S(C(P,B),R.mouse[0],R.mouse[1]),R.extent,i));function F(){R.wheel=null,R.end()}}function I(E,...k){if(p||!e.apply(this,arguments))return;var R=E.currentTarget,P=_(this,k,!0).event(E),B=Ke(E.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",q,!0),H=tt(E,R),F=E.clientX,z=E.clientY;up(E.view),Ua(E),P.mouse=[H,this.__zoom.invert(H)],Xr(this),P.start();function j(A){if(In(A),!P.moved){var $=A.clientX-F,Y=A.clientY-z;P.moved=$*$+Y*Y>m}P.event(A).zoom("mouse",n(S(P.that.__zoom,P.mouse[0]=tt(A,R),P.mouse[1]),P.extent,i))}function q(A){B.on("mousemove.zoom mouseup.zoom",null),fp(A.view,P.moved),In(A),P.event(A).end()}}function L(E,...k){if(!!e.apply(this,arguments)){var R=this.__zoom,P=tt(E.changedTouches?E.changedTouches[0]:E,this),B=R.invert(P),H=R.k*(E.shiftKey?.5:2),F=n(S(C(R,H),P,B),t.apply(this,k),i);In(E),s>0?Ke(this).transition().duration(s).call(w,F,P,E):Ke(this).call(b.transform,F,P,E)}}function D(E,...k){if(!!e.apply(this,arguments)){var R=E.touches,P=R.length,B=_(this,k,E.changedTouches.length===P).event(E),H,F,z,j;for(Ua(E),F=0;F<P;++F)z=R[F],j=tt(z,this),j=[j,this.__zoom.invert(j),z.identifier],B.touch0?!B.touch1&&B.touch0[2]!==j[2]&&(B.touch1=j,B.taps=0):(B.touch0=j,H=!0,B.taps=1+!!c);c&&(c=clearTimeout(c)),H&&(B.taps<2&&(f=j[0],c=setTimeout(function(){c=null},g)),Xr(this),B.start())}}function M(E,...k){if(!!this.__zooming){var R=_(this,k).event(E),P=E.changedTouches,B=P.length,H,F,z,j;for(In(E),H=0;H<B;++H)F=P[H],z=tt(F,this),R.touch0&&R.touch0[2]===F.identifier?R.touch0[0]=z:R.touch1&&R.touch1[2]===F.identifier&&(R.touch1[0]=z);if(F=R.that.__zoom,R.touch1){var q=R.touch0[0],A=R.touch0[1],$=R.touch1[0],Y=R.touch1[1],G=(G=$[0]-q[0])*G+(G=$[1]-q[1])*G,Z=(Z=Y[0]-A[0])*Z+(Z=Y[1]-A[1])*Z;F=C(F,Math.sqrt(G/Z)),z=[(q[0]+$[0])/2,(q[1]+$[1])/2],j=[(A[0]+Y[0])/2,(A[1]+Y[1])/2]}else if(R.touch0)z=R.touch0[0],j=R.touch0[1];else return;R.zoom("touch",n(S(F,z,j),R.extent,i))}}function V(E,...k){if(!!this.__zooming){var R=_(this,k).event(E),P=E.changedTouches,B=P.length,H,F;for(Ua(E),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),H=0;H<B;++H)F=P[H],R.touch0&&R.touch0[2]===F.identifier?delete R.touch0:R.touch1&&R.touch1[2]===F.identifier&&delete R.touch1;if(R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1),R.touch0)R.touch0[1]=this.__zoom.invert(R.touch0[0]);else if(R.end(),R.taps===2&&(F=tt(F,this),Math.hypot(f[0]-F[0],f[1]-F[1])<v)){var z=Ke(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return b.wheelDelta=function(E){return arguments.length?(r=typeof E=="function"?E:qr(+E),b):r},b.filter=function(E){return arguments.length?(e=typeof E=="function"?E:qr(!!E),b):e},b.touchable=function(E){return arguments.length?(o=typeof E=="function"?E:qr(!!E),b):o},b.extent=function(E){return arguments.length?(t=typeof E=="function"?E:qr([[+E[0][0],+E[0][1]],[+E[1][0],+E[1][1]]]),b):t},b.scaleExtent=function(E){return arguments.length?(a[0]=+E[0],a[1]=+E[1],b):[a[0],a[1]]},b.translateExtent=function(E){return arguments.length?(i[0][0]=+E[0][0],i[1][0]=+E[1][0],i[0][1]=+E[0][1],i[1][1]=+E[1][1],b):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},b.constrain=function(E){return arguments.length?(n=E,b):n},b.duration=function(E){return arguments.length?(s=+E,b):s},b.interpolate=function(E){return arguments.length?(l=E,b):l},b.on=function(){var E=d.on.apply(d,arguments);return E===d?b:E},b.clickDistance=function(E){return arguments.length?(m=(E=+E)*E,b):Math.sqrt(m)},b.tapDistance=function(E){return arguments.length?(v=+E,b):v},b}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ls(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tp(e,t){if(!!e){if(typeof e=="string")return Ls(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ls(e,t)}}function N_(e){if(Array.isArray(e))return e}function I_(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,a=!1,i,s;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));o=!0);}catch(l){a=!0,s=l}finally{try{!o&&n.return!=null&&n.return()}finally{if(a)throw s}}return r}}function R_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ie(e,t){return N_(e)||I_(e,t)||Tp(e,t)||R_()}var Sn;(function(e){e.Strict="strict",e.Loose="loose"})(Sn||(Sn={}));var Tc;(function(e){e.Lines="lines",e.Dots="dots"})(Tc||(Tc={}));var pn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(pn||(pn={}));var pt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(pt||(pt={}));var ur;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ur||(ur={}));var W;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(W||(W={}));var Sl=function(t){return{width:t.offsetWidth,height:t.offsetHeight}},hn=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(t,n),r)},Op=function(t,n){return{x:hn(t.x,n[0][0],n[1][0]),y:hn(t.y,n[0][1],n[1][1])}},Np=function(t){var n,r;return((n=t.getRootNode)===null||n===void 0?void 0:n.call(t))||((r=window)===null||r===void 0?void 0:r.document)},A_=function(t,n){return{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x2,n.x2),y2:Math.max(t.y2,n.y2)}},da=function(t){var n=t.x,r=t.y,o=t.width,a=t.height;return{x:n,y:r,x2:n+o,y2:r+a}},k_=function(t){var n=t.x,r=t.y,o=t.x2,a=t.y2;return{x:n,y:r,width:o-n,height:a-r}},Ip=function(t){return!isNaN(t)&&isFinite(t)},Ee=Symbol("internals");function Oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Oc(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nc(e,t){var n=e.find(function(d){return d.id===t.parentNode});if(n){var r=t.position.x+t.width-n.width,o=t.position.y+t.height-n.height;if(r>0||o>0||t.position.x<0||t.position.y<0){var a,i;if(n.style=Dn({},n.style)||{},n.style.width=(a=n.style.width)!==null&&a!==void 0?a:n.width,n.style.height=(i=n.style.height)!==null&&i!==void 0?i:n.height,r>0&&(n.style.width+=r),o>0&&(n.style.height+=o),t.position.x<0){var s=Math.abs(t.position.x);n.position.x=n.position.x-s,n.style.width+=s,t.position.x=0}if(t.position.y<0){var l=Math.abs(t.position.y);n.position.y=n.position.y-l,n.style.height+=l,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Rp(e,t){if(e.some(function(r){return r.type==="reset"}))return e.filter(function(r){return r.type==="reset"}).map(function(r){return r.item});var n=e.filter(function(r){return r.type==="add"}).map(function(r){return r.item});return t.reduce(function(r,o){var a=e.find(function(l){return l.id===o.id});if(a)switch(a.type){case"select":return r.push(Dn(Dn({},o),{},{selected:a.selected})),r;case"position":{var i=Dn({},o);return typeof a.position<"u"&&(i.position=a.position),typeof a.positionAbsolute<"u"&&(i.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(i.dragging=a.dragging),i.expandParent&&Nc(r,i),r.push(i),r}case"dimensions":{var s=Dn({},o);return typeof a.dimensions<"u"&&(s.width=a.dimensions.width,s.height=a.dimensions.height),s.expandParent&&Nc(r,s),r.push(s),r}case"remove":return r}return r.push(o),r},n)}function Ap(e,t){return Rp(e,t)}function L_(e,t){return Rp(e,t)}var Ot=function(t,n){return{id:t,type:"select",selected:n}};function cn(e,t){return e.reduce(function(n,r){var o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(Ot(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(Ot(r.id,!1))),n},[])}function Ic(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function kp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ic(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ic(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Rc=function(t,n,r){var o=n.querySelectorAll(t);if(!o||!o.length)return null;var a=Array.from(o),i=n.getBoundingClientRect();return a.map(function(s){var l=s.getBoundingClientRect();return kp({id:s.getAttribute("data-handleid"),position:s.getAttribute("data-handlepos"),x:(l.left-i.left)/r,y:(l.top-i.top)/r},Sl(s))})};function Rn(e,t,n){return n===void 0?n:function(r){var o=t().nodeInternals.get(e);n(r,kp({},o))}}function Lp(e){var t=e.id,n=e.store,r=n.getState(),o=r.addSelectedNodes,a=r.unselectNodesAndEdges,i=r.multiSelectionActive,s=r.nodeInternals,l=s.get(t);n.setState({nodesSelectionActive:!1}),l.selected?l.selected&&i&&a({nodes:[l]}):o([t])}function Ac(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Fn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ac(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ac(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var q_=function(t){return"id"in t&&"source"in t&&"target"in t},D_=function(t){var n=t.source,r=t.sourceHandle,o=t.target,a=t.targetHandle;return"reactflow__edge-".concat(n).concat(r||"","-").concat(o).concat(a||"")},qs=function(t,n){if(typeof t>"u")return"";if(typeof t=="string")return t;var r=n?"".concat(n,"__"):"";return"".concat(r).concat(Object.keys(t).sort().map(function(o){return"".concat(o,"=").concat(t[o])}).join("&"))},P_=function(t,n){return n.some(function(r){return r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)})},M_=function(t,n){if(!t.source||!t.target)return n;var r;return q_(t)?r=Fn({},t):r=Fn(Fn({},t),{},{id:D_(t)}),P_(r,n)?n:n.concat(r)},qp=function(t,n,r,o){var a=t.x,i=t.y,s=ie(n,3),l=s[0],d=s[1],c=s[2],f=ie(o,2),p=f[0],g=f[1],h={x:(a-l)/c,y:(i-d)/c};return r?{x:p*Math.round(h.x/p),y:g*Math.round(h.y/g)}:h},wl=function(t){if(t.length===0)return{x:0,y:0,width:0,height:0};var n=t.reduce(function(r,o){var a=o.positionAbsolute,i=o.position,s=o.width,l=o.height;return A_(r,da({x:a?a.x:i.x,y:a?a.y:i.y,width:s||0,height:l||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return k_(n)},Dp=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,1],o=ie(r,3),a=o[0],i=o[1],s=o[2],l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,c=da({x:(n.x-a)/s,y:(n.y-i)/s,width:n.width/s,height:n.height/s}),f=[];return t.forEach(function(p){var g=p.positionAbsolute,h=p.width,m=p.height,v=p.selectable,b=v===void 0?!0:v;if(d&&!b)return!1;var C=da(Fn(Fn({},g),{},{width:h||0,height:m||0})),S=Math.max(0,Math.min(c.x2,C.x2)-Math.max(c.x,C.x)),y=Math.max(0,Math.min(c.y2,C.y2)-Math.max(c.y,C.y)),w=Math.ceil(S*y),_=typeof h>"u"||typeof m>"u"||h===null||m===null,x=l&&w>0,O=(h||0)*(m||0),I=_||x||w>=O;I&&f.push(p)}),f},Cl=function(t,n){var r=t.map(function(o){return o.id});return n.filter(function(o){return r.includes(o.source)||r.includes(o.target)})},Pp=function(t,n,r,o,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:.1,s=n/(t.width*(1+i)),l=r/(t.height*(1+i)),d=Math.min(s,l),c=hn(d,o,a),f=t.x+t.width/2,p=t.y+t.height/2,g=n/2-f*c,h=r/2-p*c;return[g,h,c]},Vt=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.transition().duration(n)};function kc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kc(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mp(e,t,n,r){var o,a,i,s,l,d,c,f,p,g,h,m;if(!e.parentNode)return r;var v=t.get(e.parentNode);return Mp(v,t,n,{x:((o=r.x)!==null&&o!==void 0?o:0)+((a=(i=v.position)===null||i===void 0?void 0:i.x)!==null&&a!==void 0?a:0),y:((s=r.y)!==null&&s!==void 0?s:0)+((l=(d=v.position)===null||d===void 0?void 0:d.y)!==null&&l!==void 0?l:0),z:((c=(f=v[Ee])===null||f===void 0?void 0:f.z)!==null&&c!==void 0?c:0)>((p=r.z)!==null&&p!==void 0?p:0)?(g=(h=v[Ee])===null||h===void 0?void 0:h.z)!==null&&g!==void 0?g:0:(m=r.z)!==null&&m!==void 0?m:0})}function za(e,t){var n=new Map,r={};return e.forEach(function(o){var a,i=Ip(o.zIndex)?o.zIndex:o.selected?1e3:0,s=t.get(o.id),l=dn(dn({width:s==null?void 0:s.width,height:s==null?void 0:s.height},o),{},{positionAbsolute:{x:o.position.x,y:o.position.y}});o.parentNode&&(l.parentNode=o.parentNode,r[o.parentNode]=!0),Object.defineProperty(l,Ee,{enumerable:!1,value:{handleBounds:s==null||(a=s[Ee])===null||a===void 0?void 0:a.handleBounds,z:i}}),n.set(o.id,l)}),n.forEach(function(o){if(o.parentNode&&!n.has(o.parentNode))throw new Error("Parent node ".concat(o.parentNode," not found"));if(o.parentNode||r[o.id]){var a,i,s=Mp(o,n,r,dn(dn({},o.position),{},{z:(a=(i=o[Ee])===null||i===void 0?void 0:i.z)!==null&&a!==void 0?a:0})),l=s.x,d=s.y,c=s.z;o.positionAbsolute={x:l,y:d},o[Ee].z=c,r[o.id]&&(o[Ee].isParent=!0)}}),n}function Vp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e(),r=n.nodeInternals,o=n.width,a=n.height,i=n.minZoom,s=n.maxZoom,l=n.d3Zoom,d=n.d3Selection,c=n.fitViewOnInitDone,f=n.fitViewOnInit;if((t.initial&&!c&&f||!t.initial)&&l&&d){var p=Array.from(r.values()).filter(function(O){return t.includeHiddenNodes?O.width&&O.height:!O.hidden}),g=p.every(function(O){return O.width&&O.height});if(p.length>0&&g){var h,m,v,b=wl(p),C=Pp(b,o,a,(h=t.minZoom)!==null&&h!==void 0?h:i,(m=t.maxZoom)!==null&&m!==void 0?m:s,(v=t.padding)!==null&&v!==void 0?v:.1),S=ie(C,3),y=S[0],w=S[1],_=S[2],x=Ut.translate(y,w).scale(_);return typeof t.duration=="number"&&t.duration>0?l.transform(Vt(d,t.duration),x):l.transform(d,x),!0}}return!1}function V_(e,t){return e.forEach(function(n){var r=t.get(n.id);if(r){var o;t.set(r.id,dn(dn({},r),{},(o={},ue(o,Ee,r[Ee]),ue(o,"selected",n.selected),o)))}}),new Map(t)}function B_(e,t){return t.map(function(n){var r=e.find(function(o){return o.id===n.id});return r&&(n.selected=r.selected),n})}function Dr(e){var t=e.changedNodes,n=e.changedEdges,r=e.get,o=e.set,a=r(),i=a.nodeInternals,s=a.edges,l=a.onNodesChange,d=a.onEdgesChange,c=a.hasDefaultNodes,f=a.hasDefaultEdges;t!=null&&t.length&&(c&&o({nodeInternals:V_(t,i)}),l==null||l(t)),n!=null&&n.length&&(f&&o({edges:B_(n,s)}),d==null||d(n))}var Lc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],qc={width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Lc,nodeExtent:Lc,nodesSelectionActive:!1,userSelectionActive:!1,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:Sn.Strict,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,reactFlowVersion:"10.3.11",connectionStartHandle:null,connectOnClick:!0};function Dc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dc(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var _l=Kb(),Bp=_l.Provider,Ce=_l.useStore,Ie=_l.useStoreApi,Fp=function(){return Gb(function(t,n){return et(et({},qc),{},{setNodes:function(o){t({nodeInternals:za(o,n().nodeInternals)})},setEdges:function(o){var a=n(),i=a.defaultEdgeOptions,s=i===void 0?{}:i;t({edges:o.map(function(l){return et(et({},s),l)})})},setDefaultNodesAndEdges:function(o,a){var i=typeof o<"u",s=typeof a<"u",l=i?za(o,new Map):new Map,d=s?a:[];t({nodeInternals:l,edges:d,hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:function(o){var a=n(),i=a.onNodesChange,s=a.nodeInternals,l=a.fitViewOnInit,d=a.fitViewOnInitDone,c=a.fitViewOnInitOptions,f=window.getComputedStyle(document.querySelector(".react-flow__viewport")),p=new window.DOMMatrixReadOnly(f.transform),g=p.m22,h=o.reduce(function(v,b){var C=s.get(b.id);if(C){var S=Sl(b.nodeElement),y=!!(S.width&&S.height&&(C.width!==S.width||C.height!==S.height||b.forceUpdate));y&&(s.set(C.id,et(et({},C),{},ue({},Ee,et(et({},C[Ee]),{},{handleBounds:{source:Rc(".source",b.nodeElement,g),target:Rc(".target",b.nodeElement,g)}})),S)),v.push({id:C.id,type:"dimensions",dimensions:S}))}return v},[]),m=d||l&&!d&&Vp(n,et({initial:!0},c));t({nodeInternals:new Map(s),fitViewOnInitDone:m}),(h==null?void 0:h.length)>0&&(i==null||i(h))},updateNodePositions:function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=n(),l=s.onNodesChange,d=s.nodeInternals,c=s.hasDefaultNodes;if(c||l){var f=o.map(function(h){var m={id:h.id,type:"position",dragging:i};return a&&(m.positionAbsolute=h.positionAbsolute,m.position=h.position),m});if(f!=null&&f.length){if(c){var p=Ap(f,Array.from(d.values())),g=za(p,d);t({nodeInternals:g})}l==null||l(f)}}},addSelectedNodes:function(o){var a=n(),i=a.multiSelectionActive,s=a.nodeInternals,l=a.edges,d,c=null;i?d=o.map(function(f){return Ot(f,!0)}):(d=cn(Array.from(s.values()),o),c=cn(l,[])),Dr({changedNodes:d,changedEdges:c,get:n,set:t})},addSelectedEdges:function(o){var a=n(),i=a.multiSelectionActive,s=a.edges,l=a.nodeInternals,d,c=null;i?d=o.map(function(f){return Ot(f,!0)}):(d=cn(s,o),c=cn(Array.from(l.values()),[])),Dr({changedNodes:c,changedEdges:d,get:n,set:t})},unselectNodesAndEdges:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=o.nodes,i=o.edges,s=n(),l=s.nodeInternals,d=s.edges,c=a||Array.from(l.values()),f=i||d,p=c.map(function(h){return h.selected=!1,Ot(h.id,!1)}),g=f.map(function(h){return Ot(h.id,!1)});Dr({changedNodes:p,changedEdges:g,get:n,set:t})},setMinZoom:function(o){var a=n(),i=a.d3Zoom,s=a.maxZoom;i==null||i.scaleExtent([o,s]),t({minZoom:o})},setMaxZoom:function(o){var a=n(),i=a.d3Zoom,s=a.minZoom;i==null||i.scaleExtent([s,o]),t({maxZoom:o})},setTranslateExtent:function(o){var a=n(),i=a.d3Zoom;i==null||i.translateExtent(o),t({translateExtent:o})},resetSelectedElements:function(){var o=n(),a=o.nodeInternals,i=o.edges,s=Array.from(a.values()),l=s.filter(function(c){return c.selected}).map(function(c){return Ot(c.id,!1)}),d=i.filter(function(c){return c.selected}).map(function(c){return Ot(c.id,!1)});Dr({changedNodes:l,changedEdges:d,get:n,set:t})},setNodeExtent:function(o){var a=n(),i=a.nodeInternals;i.forEach(function(s){s.positionAbsolute=Op(s.position,o)}),t({nodeExtent:o,nodeInternals:new Map(i)})},reset:function(){return t(et({},qc))}})})};function Fe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}function F_(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function wr(e,t){if(e==null)return{};var n=F_(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(n[r]=e[r]))}return n}function $_(e){if(Array.isArray(e))return Ls(e)}function H_(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function U_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zt(e){return $_(e)||H_(e)||Tp(e)||U_()}var z_={zoomIn:function(){},zoomOut:function(){},zoomTo:function(t){},getZoom:function(){return 1},setViewport:function(t){},getViewport:function(){return{x:0,y:0,zoom:1}},fitView:function(){},setCenter:function(t,n){},fitBounds:function(t){},project:function(t){return t},initialized:!1},Y_=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}},j_=function(){var t=Ie(),n=Ce(Y_,Fe),r=n.d3Zoom,o=n.d3Selection,a=T.exports.useMemo(function(){return o&&r?{zoomIn:function(s){return r.scaleBy(Vt(o,s==null?void 0:s.duration),1.2)},zoomOut:function(s){return r.scaleBy(Vt(o,s==null?void 0:s.duration),1/1.2)},zoomTo:function(s,l){return r.scaleTo(Vt(o,l==null?void 0:l.duration),s)},getZoom:function(){return t.getState().transform[2]},setViewport:function(s,l){var d,c,f,p=ie(t.getState().transform,3),g=p[0],h=p[1],m=p[2],v=Ut.translate((d=s.x)!==null&&d!==void 0?d:g,(c=s.y)!==null&&c!==void 0?c:h).scale((f=s.zoom)!==null&&f!==void 0?f:m);r.transform(Vt(o,l==null?void 0:l.duration),v)},getViewport:function(){var s=ie(t.getState().transform,3),l=s[0],d=s[1],c=s[2];return{x:l,y:d,zoom:c}},fitView:function(s){return Vp(t.getState,s)},setCenter:function(s,l,d){var c=t.getState(),f=c.width,p=c.height,g=c.maxZoom,h=typeof(d==null?void 0:d.zoom)<"u"?d.zoom:g,m=f/2-s*h,v=p/2-l*h,b=Ut.translate(m,v).scale(h);r.transform(Vt(o,d==null?void 0:d.duration),b)},fitBounds:function(s,l){var d,c=t.getState(),f=c.width,p=c.height,g=c.minZoom,h=c.maxZoom,m=Pp(s,f,p,g,h,(d=l==null?void 0:l.padding)!==null&&d!==void 0?d:.1),v=ie(m,3),b=v[0],C=v[1],S=v[2],y=Ut.translate(b,C).scale(S);r.transform(Vt(o,l==null?void 0:l.duration),y)},project:function(s){var l=t.getState(),d=l.transform,c=l.snapToGrid,f=l.snapGrid;return qp(s,d,c,f)},initialized:!0}:z_},[r,o]);return a},W_=["initialized"];function Pc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pc(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function El(){var e=j_(),t=e.initialized,n=wr(e,W_),r=Ie(),o=T.exports.useCallback(function(){var g=r.getState(),h=g.nodeInternals,m=Array.from(h.values());return m.map(function(v){return tn({},v)})},[]),a=T.exports.useCallback(function(g){var h=r.getState(),m=h.nodeInternals;return m.get(g)},[]),i=T.exports.useCallback(function(){var g=r.getState(),h=g.edges,m=h===void 0?[]:h;return m.map(function(v){return tn({},v)})},[]),s=T.exports.useCallback(function(g){var h=r.getState(),m=h.edges,v=m===void 0?[]:m;return v.find(function(b){return b.id===g})},[]),l=T.exports.useCallback(function(g){var h=r.getState(),m=h.nodeInternals,v=h.setNodes,b=h.hasDefaultNodes,C=h.onNodesChange,S=Array.from(m.values()),y=typeof g=="function"?g(S):g;if(b)v(y);else if(C){var w=y.length===0?S.map(function(_){return{type:"remove",id:_.id}}):y.map(function(_){return{item:_,type:"reset"}});C(w)}},[]),d=T.exports.useCallback(function(g){var h=r.getState(),m=h.edges,v=m===void 0?[]:m,b=h.setEdges,C=h.hasDefaultEdges,S=h.onEdgesChange,y=typeof g=="function"?g(v):g;if(C)b(y);else if(S){var w=y.length===0?v.map(function(_){return{type:"remove",id:_.id}}):y.map(function(_){return{item:_,type:"reset"}});S(w)}},[]),c=T.exports.useCallback(function(g){var h=Array.isArray(g)?g:[g],m=r.getState(),v=m.nodeInternals,b=m.setNodes,C=m.hasDefaultNodes,S=m.onNodesChange;if(C){var y=Array.from(v.values()),w=[].concat(y,zt(h));b(w)}else if(S){var _=h.map(function(x){return{item:x,type:"add"}});S(_)}},[]),f=T.exports.useCallback(function(g){var h=Array.isArray(g)?g:[g],m=r.getState(),v=m.edges,b=v===void 0?[]:v,C=m.setEdges,S=m.hasDefaultEdges,y=m.onEdgesChange;if(S)C([].concat(zt(b),zt(h)));else if(y){var w=h.map(function(_){return{item:_,type:"add"}});y(w)}},[]),p=T.exports.useCallback(function(){var g=r.getState(),h=g.nodeInternals,m=g.edges,v=m===void 0?[]:m,b=g.transform,C=Array.from(h.values()),S=ie(b,3),y=S[0],w=S[1],_=S[2];return{nodes:C.map(function(x){return tn({},x)}),edges:v.map(function(x){return tn({},x)}),viewport:{x:y,y:w,zoom:_}}},[]);return tn(tn({},n),{},{viewportInitialized:t,getNodes:o,getNode:a,getEdges:i,getEdge:s,setNodes:l,setEdges:d,addNodes:c,addEdges:f,toObject:p})}function Ye(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Ye(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}function G_(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:u("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function K_(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:u("path",{d:"M0 0h32v4.2H0z"})})}function Q_(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:u("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function X_(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Z_(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}var J_=["children","className"];function Mc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function e0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mc(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Pr=function(t){var n=t.children,r=t.className,o=wr(t,J_);return u("button",{...e0({type:"button",className:Ye(["react-flow__controls-button",r])},o),children:n})},t0=function(t){return t.nodesDraggable&&t.nodesConnectable&&t.elementsSelectable},$p=function(t){var n=t.style,r=t.showZoom,o=r===void 0?!0:r,a=t.showFitView,i=a===void 0?!0:a,s=t.showInteractive,l=s===void 0?!0:s,d=t.fitViewOptions,c=t.onZoomIn,f=t.onZoomOut,p=t.onFitView,g=t.onInteractiveChange,h=t.className,m=t.children,v=Ie(),b=T.exports.useState(!1),C=ie(b,2),S=C[0],y=C[1],w=Ce(t0),_=El(),x=_.zoomIn,O=_.zoomOut,I=_.fitView;if(T.exports.useEffect(function(){y(!0)},[]),!S)return null;var L=function(){x==null||x(),c==null||c()},D=function(){O==null||O(),f==null||f()},M=function(){I==null||I(d),p==null||p()},V=function(){v.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),g==null||g(!w)};return N("div",{className:Ye(["react-flow__controls",h]),style:n,children:[o&&N(U,{children:[u(Pr,{onClick:L,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",children:u(G_,{})}),u(Pr,{onClick:D,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",children:u(K_,{})})]}),i&&u(Pr,{className:"react-flow__controls-fitview",onClick:M,title:"fit view","aria-label":"fit view",children:u(Q_,{})}),l&&u(Pr,{className:"react-flow__controls-interactive",onClick:V,title:"toggle interactivity","aria-label":"toggle interactivity",children:w?u(Z_,{}):u(X_,{})}),m]})};$p.displayName="Controls";var n0=T.exports.memo($p),r0=["paid-pro","paid-sponsor","paid-enterprise","paid-custom"];function o0(e){var t=e.proOptions,n=e.position,r=n===void 0?"bottom-right":n;if(t!=null&&t.account&&r0.includes(t==null?void 0:t.account)&&t!==null&&t!==void 0&&t.hideAttribution)return null;var o="".concat(r).split("-");return u("div",{className:Ye(["react-flow__attribution"].concat(zt(o))),"data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev/pricing",children:u("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer",children:"React Flow"})})}var a0=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"];function Vc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function i0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vc(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var s0=function(t){var n=t.x,r=t.y,o=t.label,a=t.labelStyle,i=a===void 0?{}:a,s=t.labelShowBg,l=s===void 0?!0:s,d=t.labelBgStyle,c=d===void 0?{}:d,f=t.labelBgPadding,p=f===void 0?[2,4]:f,g=t.labelBgBorderRadius,h=g===void 0?2:g,m=t.children,v=t.className,b=wr(t,a0),C=T.exports.useRef(null),S=T.exports.useState({x:0,y:0,width:0,height:0}),y=ie(S,2),w=y[0],_=y[1],x=Ye(["react-flow__edge-textwrapper",v]);return T.exports.useEffect(function(){if(C.current){var O=C.current.getBBox();_({x:O.x,y:O.y,width:O.width,height:O.height})}},[o]),typeof o>"u"||!o?null:N("g",{...i0({transform:"translate(".concat(n-w.width/2," ").concat(r-w.height/2,")"),className:x},b),children:[l&&u("rect",{width:w.width+2*p[0],x:-p[0],y:-p[1],height:w.height+2*p[1],className:"react-flow__edge-textbg",style:c,rx:h,ry:h}),u("text",{className:"react-flow__edge-text",y:w.height/2,dy:"0.3em",ref:C,style:i,children:o}),m]})},l0=T.exports.memo(s0),ka=function(e){var t=e.path,n=e.centerX,r=e.centerY,o=e.label,a=e.labelStyle,i=e.labelShowBg,s=e.labelBgStyle,l=e.labelBgPadding,d=e.labelBgBorderRadius,c=e.style,f=e.markerEnd,p=e.markerStart,g=o?u(l0,{x:n,y:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:d}):null;return N(U,{children:[u("path",{style:c,d:t,className:"react-flow__edge-path",markerEnd:f,markerStart:p}),g]})};function ua(e){var t=e.pos,n=e.x1,r=e.y1,o=e.x2,a=e.y2,i,s;switch(t){case W.Left:case W.Right:i=.5*(n+o),s=r;break;case W.Top:case W.Bottom:i=n,s=.5*(r+a);break}return[i,s]}function Hp(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=ua({pos:o,x1:t,y1:n,x2:a,y2:i}),c=ie(d,2),f=c[0],p=c[1],g=ua({pos:l,x1:a,y1:i,x2:t,y2:n}),h=ie(g,2),m=h[0],v=h[1];return"M".concat(t,",").concat(n," C").concat(f,",").concat(p," ").concat(m,",").concat(v," ").concat(a,",").concat(i)}function c0(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=ua({pos:o,x1:t,y1:n,x2:a,y2:i}),c=ie(d,2),f=c[0],p=c[1],g=ua({pos:l,x1:a,y1:i,x2:t,y2:n}),h=ie(g,2),m=h[0],v=h[1],b=t*.125+f*.375+m*.375+a*.125,C=n*.125+p*.375+v*.375+i*.125,S=Math.abs(b-t),y=Math.abs(C-n);return[b,C,S,y]}var Up=T.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.sourcePosition,i=a===void 0?W.Bottom:a,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.label,c=e.labelStyle,f=e.labelShowBg,p=e.labelBgStyle,g=e.labelBgPadding,h=e.labelBgBorderRadius,m=e.style,v=e.markerEnd,b=e.markerStart,C={sourceX:t,sourceY:n,sourcePosition:i,targetX:r,targetY:o,targetPosition:l},S=Hp(C),y=c0(C),w=ie(y,2),_=w[0],x=w[1];return u(ka,{path:S,centerX:_,centerY:x,label:d,labelStyle:c,labelShowBg:f,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:h,style:m,markerEnd:v,markerStart:b})});function Bc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function d0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bc(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Fc=[W.Left,W.Right],zp=function(t){var n=t.sourceX,r=t.sourceY,o=t.targetX,a=t.targetY,i=t.sourcePosition,s=i===void 0?W.Bottom:i,l=t.targetPosition,d=l===void 0?W.Top:l,c=Fc.includes(s),f=Fc.includes(d),p=c&&!f||f&&!c;if(p){var g=c?Math.abs(o-n):0,h=n>o?n-g:n+g,m=c?0:Math.abs(a-r),v=r<a?r+m:r-m;return[h,v,g,m]}var b=Math.abs(o-n)/2,C=o<n?o+b:o-b,S=Math.abs(a-r)/2,y=a<r?a+S:a-S;return[C,y,b,S]};function An(e,t,n){return n===void 0?n:function(r){var o=t().edges.find(function(a){return a.id===e});n(r,d0({},o))}}var Ya=function(t,n,r){return"L ".concat(t,",").concat(n-r,"Q ").concat(t,",").concat(n," ").concat(t+r,",").concat(n)},ja=function(t,n,r){return"L ".concat(t+r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-r)},Wa=function(t,n,r){return"L ".concat(t,",").concat(n-r,"Q ").concat(t,",").concat(n," ").concat(t-r,",").concat(n)},Ga=function(t,n,r){return"L ".concat(t-r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-r)},Ka=function(t,n,r){return"L ".concat(t+r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+r)},Qa=function(t,n,r){return"L ".concat(t,",").concat(n+r,"Q ").concat(t,",").concat(n," ").concat(t+r,",").concat(n)},Xa=function(t,n,r){return"L ".concat(t,",").concat(n+r,"Q ").concat(t,",").concat(n," ").concat(t-r,",").concat(n)},Za=function(t,n,r){return"L ".concat(t-r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+r)};function Ds(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.borderRadius,c=d===void 0?5:d,f=e.centerX,p=e.centerY,g=zp({sourceX:t,sourceY:n,targetX:a,targetY:i}),h=ie(g,4),m=h[0],v=h[1],b=h[2],C=h[3],S=Math.min(c,Math.abs(a-t)),y=Math.min(c,Math.abs(i-n)),w=Math.min(S,y,b,C),_=[W.Left,W.Right],x=typeof f<"u"?f:m,O=typeof p<"u"?p:v,I=null,L=null;return t<=a?(I=n<=i?Ya(t,O,w):Qa(t,O,w),L=n<=i?Za(a,O,w):Ga(a,O,w)):(I=n<i?Wa(t,O,w):Xa(t,O,w),L=n<i?Ka(a,O,w):ja(a,O,w)),_.includes(o)&&_.includes(l)?t<=a?(I=n<=i?Za(x,n,w):Ga(x,n,w),L=n<=i?Ya(x,i,w):Qa(x,i,w)):(o===W.Right&&l===W.Left||o===W.Left&&l===W.Right||o===W.Left&&l===W.Left)&&(I=n<=i?Ka(x,n,w):ja(x,n,w),L=n<=i?Wa(x,i,w):Xa(x,i,w)):_.includes(o)&&!_.includes(l)?(t<=a?I=n<=i?Za(a,n,w):Ga(a,n,w):I=n<=i?Ka(a,n,w):ja(a,n,w),L=""):!_.includes(o)&&_.includes(l)&&(t<=a?I=n<=i?Ya(t,i,w):Qa(t,i,w):I=n<=i?Wa(t,i,w):Xa(t,i,w),L=""),"M ".concat(t,",").concat(n).concat(I).concat(L,"L ").concat(a,",").concat(i)}var xl=T.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.label,i=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,d=e.labelBgPadding,c=e.labelBgBorderRadius,f=e.style,p=e.sourcePosition,g=p===void 0?W.Bottom:p,h=e.targetPosition,m=h===void 0?W.Top:h,v=e.markerEnd,b=e.markerStart,C=e.borderRadius,S=C===void 0?5:C,y=zp({sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:g,targetPosition:m}),w=ie(y,2),_=w[0],x=w[1],O=Ds({sourceX:t,sourceY:n,sourcePosition:g,targetX:r,targetY:o,targetPosition:m,borderRadius:S});return u(ka,{path:O,centerX:_,centerY:x,label:a,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:c,style:f,markerEnd:v,markerStart:b})});function $c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Hc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$c(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$c(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Yp=T.exports.memo(function(e){return u(xl,{...Hc(Hc({},e),{},{borderRadius:0})})}),jp=T.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.label,i=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,d=e.labelBgPadding,c=e.labelBgBorderRadius,f=e.style,p=e.markerEnd,g=e.markerStart,h=Math.abs(o-n)/2,m=o<n?o+h:o-h,v=Math.abs(r-t)/2,b=r<t?r+v:r-v,C="M ".concat(t,",").concat(n,"L ").concat(r,",").concat(o);return u(ka,{path:C,centerX:b,centerY:m,label:a,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:c,style:f,markerEnd:p,markerStart:g})});function Mr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function fa(e){var t=e.pos,n=e.x1,r=e.y1,o=e.x2,a=e.y2,i=e.c,s,l;switch(t){case W.Left:s=n-Mr(n-o,i),l=r;break;case W.Right:s=n+Mr(o-n,i),l=r;break;case W.Top:s=n,l=r-Mr(r-a,i);break;case W.Bottom:s=n,l=r+Mr(a-r,i);break}return[s,l]}function Wp(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.curvature,c=d===void 0?.25:d,f=fa({pos:o,x1:t,y1:n,x2:a,y2:i,c}),p=ie(f,2),g=p[0],h=p[1],m=fa({pos:l,x1:a,y1:i,x2:t,y2:n,c}),v=ie(m,2),b=v[0],C=v[1];return"M".concat(t,",").concat(n," C").concat(g,",").concat(h," ").concat(b,",").concat(C," ").concat(a,",").concat(i)}function u0(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.curvature,c=d===void 0?.25:d,f=fa({pos:o,x1:t,y1:n,x2:a,y2:i,c}),p=ie(f,2),g=p[0],h=p[1],m=fa({pos:l,x1:a,y1:i,x2:t,y2:n,c}),v=ie(m,2),b=v[0],C=v[1],S=t*.125+g*.375+b*.375+a*.125,y=n*.125+h*.375+C*.375+i*.125,w=Math.abs(S-t),_=Math.abs(y-n);return[S,y,w,_]}var Ps=T.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.sourcePosition,i=a===void 0?W.Bottom:a,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.label,c=e.labelStyle,f=e.labelShowBg,p=e.labelBgStyle,g=e.labelBgPadding,h=e.labelBgBorderRadius,m=e.style,v=e.markerEnd,b=e.markerStart,C=e.curvature,S={sourceX:t,sourceY:n,sourcePosition:i,targetX:r,targetY:o,targetPosition:l,curvature:C},y=Wp(S),w=u0(S),_=ie(w,2),x=_[0],O=_[1];return u(ka,{path:y,centerX:x,centerY:O,label:d,labelStyle:c,labelShowBg:f,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:h,style:m,markerEnd:v,markerStart:b})}),Tl=T.exports.createContext(null),f0=Tl.Provider;Tl.Consumer;function Ms(e,t,n,r,o,a,i){var s=i.elementFromPoint(e.clientX,e.clientY),l=(s==null?void 0:s.classList.contains("target"))||!1,d=(s==null?void 0:s.classList.contains("source"))||!1,c={elementBelow:s,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(s&&(l||d)){c.isHoveringHandle=!0;var f=s.getAttribute("data-nodeid"),p=s.getAttribute("data-handleid"),g=n?{source:f,sourceHandle:p,target:r,targetHandle:o}:{source:r,sourceHandle:o,target:f,targetHandle:p};c.connection=g;var h=t===Sn.Strict?n&&d||!n&&l:!0;h&&(c.isValid=a(g))}return c}function Uc(e){e==null||e.classList.remove("react-flow__handle-valid"),e==null||e.classList.remove("react-flow__handle-connecting")}function Gp(e){var t=e.event,n=e.handleId,r=e.nodeId,o=e.onConnect,a=e.isTarget,i=e.getState,s=e.setState,l=e.isValidConnection,d=e.elementEdgeUpdaterType,c=e.onEdgeUpdateEnd,f=t.target.closest(".react-flow"),p=Np(t.target);if(!p)return;var g=p.elementFromPoint(t.clientX,t.clientY),h=g==null?void 0:g.classList.contains("target"),m=g==null?void 0:g.classList.contains("source");if(!f||!h&&!m&&!d)return;var v=i(),b=v.onConnectStart,C=v.connectionMode,S=d||(h?"target":"source"),y=f.getBoundingClientRect(),w;s({connectionPosition:{x:t.clientX-y.left,y:t.clientY-y.top},connectionNodeId:r,connectionHandleId:n,connectionHandleType:S}),b==null||b(t,{nodeId:r,handleId:n,handleType:S});function _(O){s({connectionPosition:{x:O.clientX-y.left,y:O.clientY-y.top}});var I=Ms(O,C,a,r,n,l,p),L=I.connection,D=I.elementBelow,M=I.isValid,V=I.isHoveringHandle;if(!V)return Uc(w);L.source!==L.target&&D&&(w=D,D.classList.add("react-flow__handle-connecting"),D.classList.toggle("react-flow__handle-valid",M))}function x(O){var I=i(),L=I.onConnectStop,D=I.onConnectEnd,M=Ms(O,C,a,r,n,l,p),V=M.connection,E=M.isValid;L==null||L(O),E&&(o==null||o(V)),D==null||D(O),d&&c&&c(O),Uc(w),s({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),p.removeEventListener("mousemove",_),p.removeEventListener("mouseup",x)}p.addEventListener("mousemove",_),p.addEventListener("mouseup",x)}var p0=["type","position","isValidConnection","isConnectable","id","onConnect","children","className","onMouseDown"];function zc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ja(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zc(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var h0=function(){return!0},m0=function(t){return{connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick}},Kp=T.exports.forwardRef(function(e,t){var n=e.type,r=n===void 0?"source":n,o=e.position,a=o===void 0?W.Top:o,i=e.isValidConnection,s=i===void 0?h0:i,l=e.isConnectable,d=l===void 0?!0:l,c=e.id,f=e.onConnect,p=e.children,g=e.className,h=e.onMouseDown,m=wr(e,p0),v=Ie(),b=T.exports.useContext(Tl),C=Ce(m0,Fe),S=C.connectionStartHandle,y=C.connectOnClick,w=c||null,_=r==="target",x=function(D){var M=v.getState(),V=M.defaultEdgeOptions,E=M.onConnect,k=M.hasDefaultEdges,R=Ja(Ja({},V),D);if(k){var P=v.getState(),B=P.edges;v.setState({edges:M_(R,B)})}E==null||E(R),f==null||f(R)},O=function(D){D.button===0&&Gp({event:D,handleId:w,nodeId:b,onConnect:x,isTarget:_,getState:v.getState,setState:v.setState,isValidConnection:s}),h==null||h(D)},I=function(D){var M=v.getState(),V=M.onClickConnectStart,E=M.onClickConnectStop,k=M.onClickConnectEnd,R=M.connectionMode;if(!S){V==null||V(D,{nodeId:b,handleId:w,handleType:r}),v.setState({connectionStartHandle:{nodeId:b,type:r,handleId:w}});return}var P=Np(D.target),B=Ms(D,R,S.type==="target",S.nodeId,S.handleId||null,s,P),H=B.connection,F=B.isValid;E==null||E(D),F&&x(H),k==null||k(D),v.setState({connectionStartHandle:null})};return u("div",{...Ja({"data-handleid":w,"data-nodeid":b,"data-handlepos":a,className:Ye(["react-flow__handle","react-flow__handle-".concat(a),"nodrag",g,{source:!_,target:_,connectable:d,connecting:(S==null?void 0:S.nodeId)===b&&(S==null?void 0:S.handleId)===w&&(S==null?void 0:S.type)===r}]),onMouseDown:O,onClick:y?I:void 0,ref:t},m),children:p})});Kp.displayName="Handle";var pa=T.exports.memo(Kp),Qp=function(t){var n=t.data,r=t.isConnectable,o=t.targetPosition,a=o===void 0?W.Top:o,i=t.sourcePosition,s=i===void 0?W.Bottom:i;return N(U,{children:[u(pa,{type:"target",position:a,isConnectable:r}),n==null?void 0:n.label,u(pa,{type:"source",position:s,isConnectable:r})]})};Qp.displayName="DefaultNode";var Vs=T.exports.memo(Qp),Xp=function(t){var n=t.data,r=t.isConnectable,o=t.sourcePosition,a=o===void 0?W.Bottom:o;return N(U,{children:[n==null?void 0:n.label,u(pa,{type:"source",position:a,isConnectable:r})]})};Xp.displayName="InputNode";var Zp=T.exports.memo(Xp),Jp=function(t){var n=t.data,r=t.isConnectable,o=t.targetPosition,a=o===void 0?W.Top:o;return N(U,{children:[u(pa,{type:"target",position:a,isConnectable:r}),n==null?void 0:n.label]})};Jp.displayName="OutputNode";var eh=T.exports.memo(Jp),g0=function(t){return{selectedNodes:Array.from(t.nodeInternals.values()).filter(function(n){return n.selected}),selectedEdges:t.edges.filter(function(n){return n.selected})}},y0=function(t,n){var r=t.selectedNodes.map(function(s){return s.id}),o=n.selectedNodes.map(function(s){return s.id}),a=t.selectedEdges.map(function(s){return s.id}),i=n.selectedEdges.map(function(s){return s.id});return Fe(r,o)&&Fe(a,i)};function v0(e){var t=e.onSelectionChange,n=Ce(g0,y0),r=n.selectedNodes,o=n.selectedEdges;return T.exports.useEffect(function(){t({nodes:r,edges:o})},[r,o]),null}var b0=T.exports.memo(v0),S0=function(t){return{setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset}};function _t(e,t){T.exports.useEffect(function(){typeof e<"u"&&t(e)},[e])}function pe(e,t,n){T.exports.useEffect(function(){typeof t<"u"&&n(ue({},e,t))},[t])}var w0=function(t){var n=t.nodes,r=t.edges,o=t.defaultNodes,a=t.defaultEdges,i=t.onConnect,s=t.onConnectStart,l=t.onConnectStop,d=t.onConnectEnd,c=t.onClickConnectStart,f=t.onClickConnectStop,p=t.onClickConnectEnd,g=t.nodesDraggable,h=t.nodesConnectable,m=t.minZoom,v=t.maxZoom,b=t.nodeExtent,C=t.onNodesChange,S=t.onEdgesChange,y=t.elementsSelectable,w=t.connectionMode,_=t.snapGrid,x=t.snapToGrid,O=t.translateExtent,I=t.connectOnClick,L=t.defaultEdgeOptions,D=t.fitView,M=t.fitViewOptions,V=t.onNodesDelete,E=t.onEdgesDelete,k=t.onNodeDrag,R=t.onNodeDragStart,P=t.onNodeDragStop,B=t.onSelectionDrag,H=t.onSelectionDragStart,F=t.onSelectionDragStop,z=Ce(S0,Fe),j=z.setNodes,q=z.setEdges,A=z.setDefaultNodesAndEdges,$=z.setMinZoom,Y=z.setMaxZoom,G=z.setTranslateExtent,Z=z.setNodeExtent,Q=z.reset,K=Ie();return T.exports.useEffect(function(){return A(o,a),function(){Q()}},[]),pe("defaultEdgeOptions",L,K.setState),pe("connectionMode",w,K.setState),pe("onConnect",i,K.setState),pe("onConnectStart",s,K.setState),pe("onConnectStop",l,K.setState),pe("onConnectEnd",d,K.setState),pe("onClickConnectStart",c,K.setState),pe("onClickConnectStop",f,K.setState),pe("onClickConnectEnd",p,K.setState),pe("nodesDraggable",g,K.setState),pe("nodesConnectable",h,K.setState),pe("elementsSelectable",y,K.setState),pe("snapToGrid",x,K.setState),pe("snapGrid",_,K.setState),pe("onNodesChange",C,K.setState),pe("onEdgesChange",S,K.setState),pe("connectOnClick",I,K.setState),pe("fitViewOnInit",D,K.setState),pe("fitViewOnInitOptions",M,K.setState),pe("onNodesDelete",V,K.setState),pe("onEdgesDelete",E,K.setState),pe("onNodeDrag",k,K.setState),pe("onNodeDragStart",R,K.setState),pe("onNodeDragStop",P,K.setState),pe("onSelectionDrag",B,K.setState),pe("onSelectionDragStart",H,K.setState),pe("onSelectionDragStop",F,K.setState),_t(n,j),_t(r,q),_t(o,j),_t(a,q),_t(m,$),_t(v,Y),_t(O,G),_t(b,Z),null},C0=".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__container{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__viewport{pointer-events:none;transform-origin:0 0;z-index:2}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow .react-flow__edges{overflow:visible;pointer-events:none}.react-flow .react-flow__connectionline{z-index:1001}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{box-sizing:border-box;pointer-events:all;position:absolute;transform-origin:0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{pointer-events:none;transform-origin:left top;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none;position:absolute}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__controls{bottom:20px;left:15px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:20px;position:absolute;right:15px;z-index:5}.react-flow__attribution{background:hsla(0,0%,100%,.5);color:#999;font-size:10px;padding:2px 3px;position:absolute;z-index:1000}.react-flow__attribution a{color:#555;text-decoration:none}.react-flow__attribution.top{top:0}.react-flow__attribution.bottom{bottom:0}.react-flow__attribution.left{left:0}.react-flow__attribution.right{right:0}.react-flow__attribution.center{left:50%;transform:translateX(-50%)}",_0=C0,E0=".react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-group,.react-flow__node-input,.react-flow__node-output{background:#fff;border:1px solid #1a192b;border-radius:3px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selected,.react-flow__node-group.selected,.react-flow__node-input.selected,.react-flow__node-output.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle,.react-flow__node-group .react-flow__handle,.react-flow__node-input .react-flow__handle,.react-flow__node-output .react-flow__handle{background:#1a192b}.react-flow__node-default.selectable:hover,.react-flow__node-group.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-default.selectable.selected,.react-flow__node-group.selectable.selected,.react-flow__node-input.selectable.selected,.react-flow__node-output.selectable.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-group{background:hsla(0,0%,94%,.25);border-color:#1a192b}.react-flow__nodesselection-rect,.react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}",x0=E0,T0=function(t,n,r){return r===W.Left?t-n:r===W.Right?t+n:t},O0=function(t,n,r){return r===W.Top?t-n:r===W.Bottom?t+n:t},Yc=function(t){var n=t.className,r=t.position,o=t.centerX,a=t.centerY,i=t.radius,s=i===void 0?10:i;return u("circle",{className:Ye(["react-flow__edgeupdater",n]),cx:T0(o,s,r),cy:O0(a,s,r),r:s,stroke:"transparent",fill:"transparent"})},nn=function(e){var t=function(r){var o=r.id,a=r.className,i=r.type,s=r.data,l=r.onClick,d=r.onEdgeDoubleClick,c=r.selected,f=r.animated,p=r.label,g=r.labelStyle,h=r.labelShowBg,m=r.labelBgStyle,v=r.labelBgPadding,b=r.labelBgBorderRadius,C=r.style,S=r.source,y=r.target,w=r.sourceX,_=r.sourceY,x=r.targetX,O=r.targetY,I=r.sourcePosition,L=r.targetPosition,D=r.elementsSelectable,M=r.hidden,V=r.sourceHandleId,E=r.targetHandleId,k=r.onContextMenu,R=r.onMouseEnter,P=r.onMouseMove,B=r.onMouseLeave,H=r.edgeUpdaterRadius,F=r.onEdgeUpdate,z=r.onEdgeUpdateStart,j=r.onEdgeUpdateEnd,q=r.markerEnd,A=r.markerStart,$=r.rfId,Y=T.exports.useState(!1),G=ie(Y,2),Z=G[0],Q=G[1],K=Ie(),ce=function(oe){var Oe=K.getState(),xe=Oe.edges,lt=Oe.addSelectedEdges,Je=xe.find(function(en){return en.id===o});D&&(K.setState({nodesSelectionActive:!1}),lt([o])),l==null||l(oe,Je)},ve=An(o,K.getState,d),we=An(o,K.getState,k),_e=An(o,K.getState,R),We=An(o,K.getState,P),Re=An(o,K.getState,B),$e=function(oe,Oe){var xe=Oe?y:S,lt=(Oe?E:V)||null,Je=Oe?"target":"source",en=function(){return!0},Da=Oe,Tn=K.getState().edges.find(function(Pt){return Pt.id===o});z==null||z(oe,Tn,Je);var _r=j?function(Pt){return j(Pt,Tn,Je)}:void 0,Pa=function(Er){return F==null?void 0:F(Tn,Er)};Gp({event:oe,handleId:lt,nodeId:xe,onConnect:Pa,isTarget:Da,getState:K.getState,setState:K.setState,isValidConnection:en,elementEdgeUpdaterType:Je,onEdgeUpdateEnd:_r})},it=function(oe){return $e(oe,!0)},Te=function(oe){return $e(oe,!1)},He=function(){return Q(!0)},st=function(){return Q(!1)},J=T.exports.useMemo(function(){return"url(#".concat(qs(A,$),")")},[A,$]),se=T.exports.useMemo(function(){return"url(#".concat(qs(q,$),")")},[q,$]);if(M)return null;var ee=!D&&!l,me=typeof F<"u",ne=Ye(["react-flow__edge","react-flow__edge-".concat(i),a,{selected:c,animated:f,inactive:ee,updating:Z}]);return N("g",{className:ne,onClick:ce,onDoubleClick:ve,onContextMenu:we,onMouseEnter:_e,onMouseMove:We,onMouseLeave:Re,children:[u(e,{id:o,source:S,target:y,selected:c,animated:f,label:p,labelStyle:g,labelShowBg:h,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:b,data:s,style:C,sourceX:w,sourceY:_,targetX:x,targetY:O,sourcePosition:I,targetPosition:L,sourceHandleId:V,targetHandleId:E,markerStart:J,markerEnd:se}),me&&u("g",{onMouseDown:it,onMouseEnter:He,onMouseOut:st,children:u(Yc,{position:I,centerX:w,centerY:_,radius:H})}),me&&u("g",{onMouseDown:Te,onMouseEnter:He,onMouseOut:st,children:u(Yc,{position:L,centerX:x,centerY:O,radius:H})})]})};return t.displayName="EdgeWrapper",T.exports.memo(t)};function jc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Wc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jc(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function N0(e){var t={default:nn(e.default||Ps),straight:nn(e.bezier||jp),step:nn(e.step||Yp),smoothstep:nn(e.step||xl),simplebezier:nn(e.simplebezier||Up)},n={},r=Object.keys(e).filter(function(o){return!["default","bezier"].includes(o)}).reduce(function(o,a){return o[a]=nn(e[a]||Ps),o},n);return Wc(Wc({},t),r)}function Gc(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,a=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case W.Top:return{x:r+a/2,y:o};case W.Right:return{x:r+a,y:o+i/2};case W.Bottom:return{x:r+a/2,y:o+i};case W.Left:return{x:r,y:o+i/2}}}function Kc(e,t){if(!e)return null;var n=null;return e.length===1||!t?n=e[0]:t&&(n=e.find(function(r){return r.id===t})),typeof n>"u"?null:n}var I0=function(t,n,r,o,a,i){var s=Gc(r,t,n),l=Gc(i,o,a);return{sourceX:s.x,sourceY:s.y,targetX:l.x,targetY:l.y}};function R0(e){var t=e.sourcePos,n=e.targetPos,r=e.sourceWidth,o=e.sourceHeight,a=e.targetWidth,i=e.targetHeight,s=e.width,l=e.height,d=e.transform,c={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+r,n.x+a),y2:Math.max(t.y+o,n.y+i)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);var f=da({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:s/d[2],height:l/d[2]}),p=Math.max(0,Math.min(f.x2,c.x2)-Math.max(f.x,c.x)),g=Math.max(0,Math.min(f.y2,c.y2)-Math.max(f.y,c.y)),h=Math.ceil(p*g);return h>0}function Qc(e,t){var n,r,o,a,i,s=e.get(t),l=(s==null||(n=s[Ee])===null||n===void 0?void 0:n.handleBounds)||null,d=!s||!l||!s.width||!s.height||typeof((r=s.positionAbsolute)===null||r===void 0?void 0:r.x)>"u"||typeof((o=s.positionAbsolute)===null||o===void 0?void 0:o.y)>"u";return[{x:(s==null||(a=s.positionAbsolute)===null||a===void 0?void 0:a.x)||0,y:(s==null||(i=s.positionAbsolute)===null||i===void 0?void 0:i.y)||0,width:(s==null?void 0:s.width)||0,height:(s==null?void 0:s.height)||0},l,!d]}var A0=typeof document<"u"?document:null,ha=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{target:A0},n=T.exports.useState(!1),r=ie(n,2),o=r[0],a=r[1],i=T.exports.useRef(new Set([])),s=T.exports.useMemo(function(){if(e!==null){var f=Array.isArray(e)?e:[e],p=f.filter(function(h){return typeof h=="string"}).map(function(h){return h.split("+")}),g=p.reduce(function(h,m){return h.concat.apply(h,zt(m))},[]);return[p,g]}return[[],[]]},[e]),l=ie(s,2),d=l[0],c=l[1];return T.exports.useEffect(function(){if(e!==null){var f,p,g=function(b){if(Jc(b))return!1;var C=Zc(b.code,c);i.current.add(b[C]),Xc(d,i.current,!1)&&(b.preventDefault(),a(!0))},h=function(b){if(Jc(b))return!1;var C=Zc(b.code,c);Xc(d,i.current,!0)?(a(!1),i.current.clear()):i.current.delete(b[C])},m=function(){i.current.clear(),a(!1)};return t==null||(f=t.target)===null||f===void 0||f.addEventListener("keydown",g),t==null||(p=t.target)===null||p===void 0||p.addEventListener("keyup",h),window.addEventListener("blur",m),function(){var v,b;t==null||(v=t.target)===null||v===void 0||v.removeEventListener("keydown",g),t==null||(b=t.target)===null||b===void 0||b.removeEventListener("keyup",h),window.removeEventListener("blur",m)}}},[e,a]),o};function Xc(e,t,n){return e.filter(function(r){return n||r.length===t.size}).some(function(r){return r.every(function(o){return t.has(o)})})}function Zc(e,t){return t.includes(e)?"code":"key"}function Jc(e){var t=e.target;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))}var k0=function(t){return{onNodesChange:t.onNodesChange,onEdgesChange:t.onEdgesChange}},L0=function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,r=Ie(),o=Ce(k0,Fe),a=o.onNodesChange,i=o.onEdgesChange,s=ha(t),l=ha(n);T.exports.useEffect(function(){var d=r.getState(),c=d.nodeInternals,f=d.edges,p=d.hasDefaultNodes,g=d.hasDefaultEdges,h=d.onNodesDelete,m=d.onEdgesDelete,v=Array.from(c.values()),b=v.reduce(function(O,I){return(!I.selected&&I.parentNode&&O.find(function(L){return L.id===I.parentNode})||I.selected)&&O.push(I),O},[]),C=f.filter(function(O){return O.selected});if(s&&(b||C)){var S=Cl(b,f),y=[].concat(zt(C),zt(S)),w=y.reduce(function(O,I){return O.includes(I.id)||O.push(I.id),O},[]);if((g||p)&&(g&&r.setState({edges:f.filter(function(O){return!w.includes(O.id)})}),p&&(b.forEach(function(O){c.delete(O.id)}),r.setState({nodeInternals:new Map(c)}))),w.length>0&&(m==null||m(y),i)){var _=w.map(function(O){return{id:O,type:"remove"}});i(_)}if(b.length>0&&(h==null||h(b),a)){var x=b.map(function(O){return{id:O.id,type:"remove"}});a(x)}r.setState({nodesSelectionActive:!1})}},[s,a,i]),T.exports.useEffect(function(){r.setState({multiSelectionActive:l})},[l])};function q0(e){var t=Ie();T.exports.useEffect(function(){var n,r=function(){if(!!e.current){var a=Sl(e.current);t.setState({width:a.width||500,height:a.height||500})}};return r(),window.onresize=r,e.current&&(n=new ResizeObserver(function(){return r()}),n.observe(e.current)),function(){window.onresize=null,n&&e.current&&n.unobserve(e.current)}},[])}var D0=function(t,n){return t.x!==n.x||t.y!==n.y||t.zoom!==n.k},ei=function(t){return{x:t.x,y:t.y,zoom:t.k}},Vr=function(t,n){return t.target.closest(".".concat(n))},P0=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler}},M0=function(t){var n=t.onMove,r=t.onMoveStart,o=t.onMoveEnd,a=t.zoomOnScroll,i=a===void 0?!0:a,s=t.zoomOnPinch,l=s===void 0?!0:s,d=t.panOnScroll,c=d===void 0?!1:d,f=t.panOnScrollSpeed,p=f===void 0?.5:f,g=t.panOnScrollMode,h=g===void 0?pn.Free:g,m=t.zoomOnDoubleClick,v=m===void 0?!0:m,b=t.selectionKeyPressed,C=t.elementsSelectable,S=t.panOnDrag,y=S===void 0?!0:S,w=t.defaultPosition,_=w===void 0?[0,0]:w,x=t.defaultZoom,O=x===void 0?1:x,I=t.zoomActivationKeyCode,L=t.preventScrolling,D=L===void 0?!0:L,M=t.children,V=t.noWheelClassName,E=t.noPanClassName,k=Ie(),R=T.exports.useRef(!1),P=T.exports.useRef(null),B=T.exports.useRef({x:0,y:0,zoom:0}),H=Ce(P0,Fe),F=H.d3Zoom,z=H.d3Selection,j=H.d3ZoomHandler,q=ha(I);return q0(P),T.exports.useEffect(function(){if(P.current){var A=k.getState(),$=A.minZoom,Y=A.maxZoom,G=A.translateExtent,Z=O_().scaleExtent([$,Y]).translateExtent(G),Q=Ke(P.current).call(Z),K=hn(_[0],G[0][0],G[1][0]),ce=hn(_[1],G[0][1],G[1][1]),ve=hn(O,$,Y),we=Ut.translate(K,ce).scale(ve);Z.transform(Q,we),k.setState({d3Zoom:Z,d3Selection:Q,d3ZoomHandler:Q.on("wheel.zoom"),transform:[K,ce,ve]})}},[]),T.exports.useEffect(function(){z&&F&&(c&&!q?z.on("wheel",function(A){if(Vr(A,V))return!1;A.preventDefault(),A.stopImmediatePropagation();var $=z.property("__zoom").k||1;if(A.ctrlKey&&l){var Y=tt(A),G=-A.deltaY*(A.deltaMode===1?.05:A.deltaMode?1:.002)*10,Z=$*Math.pow(2,G);F.scaleTo(z,Z,Y);return}var Q=A.deltaMode===1?20:1,K=h===pn.Vertical?0:A.deltaX*Q,ce=h===pn.Horizontal?0:A.deltaY*Q;F.translateBy(z,-(K/$)*p,-(ce/$)*p)}).on("wheel.zoom",null):typeof j<"u"&&z.on("wheel",function(A){if(!D||Vr(A,V))return null;A.preventDefault()}).on("wheel.zoom",j))},[c,h,z,F,j,q,l,D,V]),T.exports.useEffect(function(){F&&(b&&!R.current?F.on("zoom",null):b||F.on("zoom",function(A){if(k.setState({transform:[A.transform.x,A.transform.y,A.transform.k]}),n){var $=ei(A.transform);n(A.sourceEvent,$)}}))},[b,F,n]),T.exports.useEffect(function(){F&&F.on("start",function(A){if(R.current=!0,r){var $=ei(A.transform);B.current=$,r(A.sourceEvent,$)}})},[F,r]),T.exports.useEffect(function(){F&&F.on("end",function(A){if(R.current=!1,o&&D0(B.current,A.transform)){var $=ei(A.transform);B.current=$,o(A.sourceEvent,$)}})},[F,o]),T.exports.useEffect(function(){F&&F.filter(function(A){var $=q||i,Y=l&&A.ctrlKey;return!y&&!$&&!c&&!v&&!l||b||!v&&A.type==="dblclick"||Vr(A,V)&&A.type==="wheel"||Vr(A,E)&&A.type!=="wheel"||!l&&A.ctrlKey&&A.type==="wheel"||!$&&!c&&!Y&&A.type==="wheel"||!y&&(A.type==="mousedown"||A.type==="touchstart")?!1:(!A.ctrlKey||A.type==="wheel")&&!A.button})},[F,i,l,c,v,y,b,C,q]),u("div",{className:"react-flow__renderer react-flow__container",ref:P,children:M})};function ed(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function td(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ed(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ed(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nd(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}var V0=function(t){return{userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable}},rd={startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},B0=T.exports.memo(function(e){var t=e.selectionKeyPressed,n=Ie(),r=T.exports.useRef(0),o=T.exports.useRef(0),a=T.exports.useRef(),i=T.exports.useState(rd),s=ie(i,2),l=s[0],d=s[1],c=Ce(V0,Fe),f=c.userSelectionActive,p=c.elementsSelectable,g=f||t;if(!p||!g)return null;var h=function(){d(rd),n.setState({userSelectionActive:!1}),r.current=0,o.current=0},m=function(y){var w=y.target.closest(".react-flow");a.current=w.getBoundingClientRect();var _=nd(y,a.current);d({width:0,height:0,startX:_.x,startY:_.y,x:_.x,y:_.y,draw:!0}),n.setState({userSelectionActive:!0,nodesSelectionActive:!1})},v=function(y){var w,_;if(!(!t||!l.draw||!a.current)){var x=nd(y,a.current),O=(w=l.startX)!==null&&w!==void 0?w:0,I=(_=l.startY)!==null&&_!==void 0?_:0,L=td(td({},l),{},{x:x.x<O?x.x:O,y:x.y<I?x.y:I,width:Math.abs(x.x-O),height:Math.abs(x.y-I)}),D=n.getState(),M=D.nodeInternals,V=D.edges,E=D.transform,k=D.onNodesChange,R=D.onEdgesChange,P=Array.from(M.values()),B=Dp(M,L,E,!1,!0),H=Cl(B,V).map(function(q){return q.id}),F=B.map(function(q){return q.id});if(r.current!==F.length){r.current=F.length;var z=cn(P,F);z.length&&(k==null||k(z))}if(o.current!==H.length){o.current=H.length;var j=cn(V,H);j.length&&(R==null||R(j))}d(L)}},b=function(){n.setState({nodesSelectionActive:r.current>0}),h()},C=function(){n.setState({nodesSelectionActive:!1}),h()};return u("div",{className:"react-flow__selectionpane react-flow__container",onMouseDown:m,onMouseMove:v,onMouseUp:b,onMouseLeave:C,children:l.draw&&u("div",{className:"react-flow__selection react-flow__container",style:{width:l.width,height:l.height,transform:"translate(".concat(l.x,"px, ").concat(l.y,"px)")}})})});function od(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ad(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?od(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):od(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function th(e,t){if(!e.parentNode)return!1;var n=t.get(e.parentNode);return n?n.selected?!0:th(n,t):!1}function id(e,t,n){var r=e;do{var o;if((o=r)!==null&&o!==void 0&&o.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function F0(e,t,n){return Array.from(e.values()).filter(function(r){return(r.selected||r.id===n)&&(!r.parentNode||!th(r,e))}).map(function(r){var o,a,i,s;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:t.x-((o=(a=r.positionAbsolute)===null||a===void 0?void 0:a.x)!==null&&o!==void 0?o:0),y:t.y-((i=(s=r.positionAbsolute)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode,width:r.width,height:r.height}})}function $0(e,t,n,r){var o=e.extent||r,a={x:t.x-e.distance.x,y:t.y-e.distance.y};if(e.extent==="parent")if(e.parentNode&&e.width&&e.height){var i=n.get(e.parentNode);o=i!=null&&i.positionAbsolute&&i!==null&&i!==void 0&&i.width&&i!==null&&i!==void 0&&i.height?[[i.positionAbsolute.x,i.positionAbsolute.y],[i.positionAbsolute.x+i.width-e.width,i.positionAbsolute.y+i.height-e.height]]:o}else o=r;else if(e.extent&&e.parentNode){var s,l,d,c,f=n.get(e.parentNode),p=(s=f==null||(l=f.positionAbsolute)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,g=(d=f==null||(c=f.positionAbsolute)===null||c===void 0?void 0:c.y)!==null&&d!==void 0?d:0;o=[[e.extent[0][0]+p,e.extent[0][1]+g],[e.extent[1][0]+p,e.extent[1][1]+g]]}var h={x:0,y:0};if(e.parentNode){var m,v,b,C,S=n.get(e.parentNode);h={x:(m=S==null||(v=S.positionAbsolute)===null||v===void 0?void 0:v.x)!==null&&m!==void 0?m:0,y:(b=S==null||(C=S.positionAbsolute)===null||C===void 0?void 0:C.y)!==null&&b!==void 0?b:0}}return e.positionAbsolute=o?Op(a,o):a,e.position={x:e.positionAbsolute.x-h.x,y:e.positionAbsolute.y-h.y},e}function ti(e){var t=e.nodeId,n=e.dragItems,r=e.nodeInternals,o=n.map(function(a){var i=r.get(a.id);return ad(ad({},i),{},{position:a.position,positionAbsolute:a.positionAbsolute})});return[t?o.find(function(a){return a.id===t}):o[0],o]}function ni(e){return function(t,n,r){return e==null?void 0:e(t,r)}}function nh(e){var t=e.nodeRef,n=e.disabled,r=n===void 0?!1:n,o=e.noDragClassName,a=e.handleSelector,i=e.nodeId,s=e.isSelectable,l=e.selectNodesOnDrag,d=T.exports.useState(!1),c=ie(d,2),f=c[0],p=c[1],g=Ie(),h=T.exports.useRef(),m=T.exports.useRef({x:null,y:null}),v=T.exports.useCallback(function(b){var C=b.sourceEvent,S=g.getState(),y=S.transform,w=S.snapGrid,_=S.snapToGrid,x=C.touches?C.touches[0].clientX:C.clientX,O=C.touches?C.touches[0].clientY:C.clientY,I=qp({x,y:O},y,_,w);return I},[]);return T.exports.useEffect(function(){if(t!=null&&t.current){var b=Ke(t.current);if(r)b.on(".drag",null);else{var C=Mw().on("start",function(S){var y=g.getState(),w=y.nodeInternals,_=y.multiSelectionActive,x=y.unselectNodesAndEdges,O=y.onNodeDragStart,I=y.onSelectionDragStart,L=i?O:ni(I);if(!l&&!_&&i){var D;(D=w.get(i))!==null&&D!==void 0&&D.selected||x()}i&&s&&l&&Lp({id:i,store:g});var M=v(S);if(m.current=M,h.current=F0(w,M,i),L&&h.current){var V=ti({nodeId:i,dragItems:h.current,nodeInternals:w}),E=ie(V,2),k=E[0],R=E[1];L(S.sourceEvent,k,R)}}).on("drag",function(S){var y=g.getState(),w=y.updateNodePositions,_=y.nodeInternals,x=y.nodeExtent,O=y.onNodeDrag,I=y.onSelectionDrag,L=v(S);if((m.current.x!==L.x||m.current.y!==L.y)&&h.current){m.current=L,h.current=h.current.map(function(R){return $0(R,L,_,x)});var D=i?O:ni(I);if(w(h.current,!0,!0),p(!0),D){var M=ti({nodeId:i,dragItems:h.current,nodeInternals:_}),V=ie(M,2),E=V[0],k=V[1];D(S.sourceEvent,E,k)}}S.on("end",function(R){if(p(!1),h.current){var P=g.getState(),B=P.updateNodePositions,H=P.nodeInternals,F=P.onNodeDragStop,z=P.onSelectionDragStop,j=i?F:ni(z);if(B(h.current,!1,!1),j){var q=ti({nodeId:i,dragItems:h.current,nodeInternals:H}),A=ie(q,2),$=A[0],Y=A[1];j(R.sourceEvent,$,Y)}}})}).filter(function(S){var y=S.target,w=!S.button&&(!o||!id(y,".".concat(o),t))&&(!a||id(y,a,t));return w});return b.call(C),function(){b.on(".drag",null)}}}},[t,r,o,a,s,g,i,l,v]),f}function sd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function H0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var U0=function(t){return H0({transformString:"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")"),userSelectionActive:t.userSelectionActive},wl(Array.from(t.nodeInternals.values()).filter(function(n){return n.selected})))},z0=function(t){var n=Array.from(t.nodeInternals.values()).filter(function(r){return r.selected});return wl(n)};function Y0(e){var t=e.onSelectionContextMenu,n=e.noPanClassName,r=Ie(),o=Ce(U0,Fe),a=o.transformString,i=o.userSelectionActive,s=Ce(z0,Fe),l=s.width,d=s.height,c=s.x,f=s.y,p=T.exports.useRef(null);if(nh({nodeRef:p}),i||!l||!d)return null;var g=t?function(h){var m=Array.from(r.getState().nodeInternals.values()).filter(function(v){return v.selected});t(h,m)}:void 0;return u("div",{className:Ye(["react-flow__nodesselection","react-flow__container",n]),style:{transform:a},children:u("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:g,style:{width:l,height:d,top:f,left:c}})})}var j0=T.exports.memo(Y0),W0=function(t){return t.nodesSelectionActive},rh=function(t){var n=t.children,r=t.onPaneClick,o=t.onPaneContextMenu,a=t.onPaneScroll,i=t.deleteKeyCode,s=t.onMove,l=t.onMoveStart,d=t.onMoveEnd,c=t.selectionKeyCode,f=t.multiSelectionKeyCode,p=t.zoomActivationKeyCode,g=t.elementsSelectable,h=t.zoomOnScroll,m=t.zoomOnPinch,v=t.panOnScroll,b=t.panOnScrollSpeed,C=t.panOnScrollMode,S=t.zoomOnDoubleClick,y=t.panOnDrag,w=t.defaultPosition,_=t.defaultZoom,x=t.preventScrolling,O=t.onSelectionContextMenu,I=t.noWheelClassName,L=t.noPanClassName,D=Ie(),M=Ce(W0),V=ha(c);L0({deleteKeyCode:i,multiSelectionKeyCode:f});var E=function(B){r==null||r(B),D.getState().resetSelectedElements(),D.setState({nodesSelectionActive:!1})},k=o?function(P){return o(P)}:void 0,R=a?function(P){return a(P)}:void 0;return N(M0,{onMove:s,onMoveStart:l,onMoveEnd:d,selectionKeyPressed:V,elementsSelectable:g,zoomOnScroll:h,zoomOnPinch:m,panOnScroll:v,panOnScrollSpeed:b,panOnScrollMode:C,zoomOnDoubleClick:S,panOnDrag:y,defaultPosition:w,defaultZoom:_,zoomActivationKeyCode:p,preventScrolling:x,noWheelClassName:I,noPanClassName:L,children:[n,u(B0,{selectionKeyPressed:V}),M&&u(j0,{onSelectionContextMenu:O,noPanClassName:L}),u("div",{className:"react-flow__pane react-flow__container",onClick:E,onContextMenu:k,onWheel:R})]})};rh.displayName="FlowRenderer";var G0=T.exports.memo(rh);function K0(e){var t=Ce(T.exports.useCallback(function(n){return e?Dp(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):Array.from(n.nodeInternals.values())},[e]));return t}var Q0=function(t){return{nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions}},oh=function(t){var n=Ce(Q0,Fe),r=n.nodesDraggable,o=n.nodesConnectable,a=n.elementsSelectable,i=n.updateNodeDimensions,s=K0(t.onlyRenderVisibleElements),l=T.exports.useRef(),d=T.exports.useMemo(function(){if(typeof ResizeObserver>"u")return null;var c=new ResizeObserver(function(f){var p=f.map(function(g){return{id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}});i(p)});return l.current=c,c},[]);return T.exports.useEffect(function(){return function(){var c;l==null||(c=l.current)===null||c===void 0||c.disconnect()}},[]),u("div",{className:"react-flow__nodes react-flow__container",children:s.map(function(c){var f,p,g,h,m,v,b,C=c.type||"default";t.nodeTypes[C]||(C="default");var S=t.nodeTypes[C]||t.nodeTypes.default,y=!!(c.draggable||r&&typeof c.draggable>"u"),w=!!(c.selectable||a&&typeof c.selectable>"u"),_=!!(c.connectable||o&&typeof c.connectable>"u");return u(S,{id:c.id,className:c.className,style:c.style,type:C,data:c.data,sourcePosition:c.sourcePosition||W.Bottom,targetPosition:c.targetPosition||W.Top,hidden:c.hidden,xPos:(f=(p=c.positionAbsolute)===null||p===void 0?void 0:p.x)!==null&&f!==void 0?f:0,yPos:(g=(h=c.positionAbsolute)===null||h===void 0?void 0:h.y)!==null&&g!==void 0?g:0,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!c.selected,isDraggable:y,isSelectable:w,isConnectable:_,resizeObserver:d,dragHandle:c.dragHandle,zIndex:(m=(v=c[Ee])===null||v===void 0?void 0:v.z)!==null&&m!==void 0?m:0,isParent:!!((b=c[Ee])!==null&&b!==void 0&&b.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!c.width&&!!c.height},c.id)})})};oh.displayName="NodeRenderer";var X0=T.exports.memo(oh),rn;function ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function cd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ld(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ld(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Z0=(rn={},ue(rn,W.Left,W.Right),ue(rn,W.Right,W.Left),ue(rn,W.Top,W.Bottom),ue(rn,W.Bottom,W.Top),rn),J0=function(e){var t,n,r,o,a,i=e.connectionNodeId,s=e.connectionHandleType,l=e.connectionLineStyle,d=e.connectionLineType,c=d===void 0?pt.Bezier:d,f=e.isConnectable,p=e.CustomConnectionLineComponent,g=Ce(T.exports.useCallback(function(H){return{fromNode:H.nodeInternals.get(i),handleId:H.connectionHandleId,toX:(H.connectionPosition.x-H.transform[0])/H.transform[2],toY:(H.connectionPosition.y-H.transform[1])/H.transform[2]}},[i]),Fe),h=g.fromNode,m=g.handleId,v=g.toX,b=g.toY,C=h==null||(t=h[Ee])===null||t===void 0?void 0:t.handleBounds;if(!h||!f||!(C!=null&&C[s]))return null;var S=C[s],y=m?S.find(function(H){return H.id===m}):S[0],w=y?y.x+y.width/2:((n=h==null?void 0:h.width)!==null&&n!==void 0?n:0)/2,_=y?y.y+y.height/2:(r=h==null?void 0:h.height)!==null&&r!==void 0?r:0,x=((h==null||(o=h.positionAbsolute)===null||o===void 0?void 0:o.x)||0)+w,O=((h==null||(a=h.positionAbsolute)===null||a===void 0?void 0:a.y)||0)+_,I=y==null?void 0:y.position;if(!I)return null;var L=Z0[I],D,M,V,E,k,R;switch(s){case"source":D=x,M=O,V=I,E=v,k=b,R=L;break;case"target":D=v,M=b,V=L,E=x,k=O,R=I;break}if(p)return u("g",{className:"react-flow__connection",children:u(p,{connectionLineType:c,connectionLineStyle:l,fromNode:h,fromHandle:y,fromX:x,fromY:O,toX:v,toY:b,fromPosition:I,toPosition:L,sourcePosition:V,targetPosition:R,sourceNode:h,sourceHandle:y,targetX:E,targetY:k,sourceX:D,sourceY:M})});var P="",B={sourceX:D,sourceY:M,sourcePosition:V,targetX:E,targetY:k,targetPosition:R};return c===pt.Bezier?P=Wp(B):c===pt.Step?P=Ds(cd(cd({},B),{},{borderRadius:0})):c===pt.SmoothStep?P=Ds(B):c===pt.SimpleBezier?P=Hp(B):P="M".concat(D,",").concat(M," ").concat(E,",").concat(k),u("g",{className:"react-flow__connection",children:u("path",{d:P,className:"react-flow__connection-path",style:l})})};function Bs(e){return Bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bs(e)}var Br,eE=function(t){var n=t.color,r=n===void 0?"none":n,o=t.strokeWidth,a=o===void 0?1:o;return u("polyline",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:a,fill:"none",points:"-5,-4 0,0 -5,4"})},tE=function(t){var n=t.color,r=n===void 0?"none":n,o=t.strokeWidth,a=o===void 0?1:o;return u("polyline",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:a,fill:r,points:"-5,-4 0,0 -5,4 -5,-4"})},dd=(Br={},ue(Br,ur.Arrow,eE),ue(Br,ur.ArrowClosed,tE),Br);function nE(e){var t=T.exports.useMemo(function(){var n=dd.hasOwnProperty(e);return n?dd[e]:function(){return null}},[e]);return t}function ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function rE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ud(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ud(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var oE=function(t){var n=t.id,r=t.type,o=t.color,a=t.width,i=a===void 0?12.5:a,s=t.height,l=s===void 0?12.5:s,d=t.markerUnits,c=d===void 0?"strokeWidth":d,f=t.strokeWidth,p=t.orient,g=p===void 0?"auto":p,h=nE(r);return ge.createElement("marker",{className:"react-flow__arrowhead",id:n,markerWidth:"".concat(i),markerHeight:"".concat(l),viewBox:"-10 -10 20 20",markerUnits:c,orient:g,refX:"0",refY:"0"},ge.createElement(h,{color:o,strokeWidth:f}))},aE=function(t){var n=t.defaultColor,r=t.rfId;return function(o){var a=[];return o.edges.reduce(function(i,s){return[s.markerStart,s.markerEnd].forEach(function(l){if(l&&Bs(l)==="object"){var d=qs(l,r);a.includes(d)||(i.push(rE({id:d,color:l.color||n},l)),a.push(d))}}),i},[]).sort(function(i,s){return i.id.localeCompare(s.id)})}},ah=function(t){var n=t.defaultColor,r=t.rfId,o=Ce(T.exports.useCallback(aE({defaultColor:n,rfId:r}),[n,r]),function(a,i){return!(a.length!==i.length||a.some(function(s,l){return s.id!==i[l].id}))});return u("defs",{children:o.map(function(a){return u(oE,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id)})})};ah.displayName="MarkerDefinitions";var iE=T.exports.memo(ah),sE=[{level:0,isMaxLevel:!0,edges:[]}];function lE(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=-1,o=e.reduce(function(i,s){var l=Ip(s.zIndex),d=l?s.zIndex:0;if(n){var c,f,p,g;d=l?s.zIndex:Math.max(((c=t.get(s.source))===null||c===void 0||(f=c[Ee])===null||f===void 0?void 0:f.z)||0,((p=t.get(s.target))===null||p===void 0||(g=p[Ee])===null||g===void 0?void 0:g.z)||0)}return i[d]?i[d].push(s):i[d]=[s],r=d>r?d:r,i},{}),a=Object.entries(o).map(function(i){var s=ie(i,2),l=s[0],d=s[1],c=+l;return{edges:d,level:c,isMaxLevel:c===r}});return a.length===0?sE:a}function cE(e,t,n){var r=Ce(T.exports.useCallback(function(o){return e?o.edges.filter(function(a){var i=t.get(a.source),s=t.get(a.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&R0({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:s.width,targetHeight:s.height,width:o.width,height:o.height,transform:o.transform})}):o.edges},[e,t]));return lE(r,t,n)}var dE=function(t){return{connectionNodeId:t.connectionNodeId,connectionHandleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals}},ih=function(t){var n=Ce(dE,Fe),r=n.connectionNodeId,o=n.connectionHandleType,a=n.nodesConnectable,i=n.elementsSelectable,s=n.width,l=n.height,d=n.connectionMode,c=n.nodeInternals,f=cE(t.onlyRenderVisibleElements,c,t.elevateEdgesOnSelect);if(!s)return null;var p=t.connectionLineType,g=t.defaultMarkerColor,h=t.connectionLineStyle,m=t.connectionLineComponent,v=t.connectionLineContainerStyle,b=r&&o;return N(U,{children:[f.map(function(C){var S=C.level,y=C.edges,w=C.isMaxLevel;return N("svg",{style:{zIndex:S},width:s,height:l,className:"react-flow__edges react-flow__container",children:[w&&u(iE,{defaultColor:g,rfId:t.rfId}),u("g",{children:y.map(function(_){var x=Qc(c,_.source),O=ie(x,3),I=O[0],L=O[1],D=O[2],M=Qc(c,_.target),V=ie(M,3),E=V[0],k=V[1],R=V[2];if(!D||!R)return null;var P=_.type||"default",B=t.edgeTypes[P]||t.edgeTypes.default,H=d===Sn.Strict?k.target:k.target||k.source,F=Kc(L.source,_.sourceHandle||null),z=Kc(H,_.targetHandle||null),j=(F==null?void 0:F.position)||W.Bottom,q=(z==null?void 0:z.position)||W.Top;if(!F||!z)return null;var A=I0(I,F,j,E,z,q),$=A.sourceX,Y=A.sourceY,G=A.targetX,Z=A.targetY;return u(B,{id:_.id,className:Ye([_.className,t.noPanClassName]),type:P,data:_.data,selected:!!_.selected,animated:!!_.animated,hidden:!!_.hidden,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,style:_.style,source:_.source,target:_.target,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerEnd:_.markerEnd,markerStart:_.markerStart,sourceX:$,sourceY:Y,targetX:G,targetY:Z,sourcePosition:j,targetPosition:q,elementsSelectable:i,onEdgeUpdate:t.onEdgeUpdate,onContextMenu:t.onEdgeContextMenu,onMouseEnter:t.onEdgeMouseEnter,onMouseMove:t.onEdgeMouseMove,onMouseLeave:t.onEdgeMouseLeave,onClick:t.onEdgeClick,edgeUpdaterRadius:t.edgeUpdaterRadius,onEdgeDoubleClick:t.onEdgeDoubleClick,onEdgeUpdateStart:t.onEdgeUpdateStart,onEdgeUpdateEnd:t.onEdgeUpdateEnd,rfId:t.rfId},_.id)})})]},S)}),b&&u("svg",{style:v,width:s,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container",children:u(J0,{connectionNodeId:r,connectionHandleType:o,connectionLineStyle:h,connectionLineType:p,isConnectable:a,CustomConnectionLineComponent:m})})]})};ih.displayName="EdgeRenderer";var uE=T.exports.memo(ih),fE=function(t){return"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")")};function pE(e){var t=e.children,n=Ce(fE);return u("div",{className:"react-flow__viewport react-flow__container",style:{transform:n},children:t})}function hE(e){var t=El(),n=T.exports.useRef(!1);T.exports.useEffect(function(){!n.current&&t.viewportInitialized&&e&&(setTimeout(function(){return e(t)},1),n.current=!0)},[e,t.viewportInitialized])}var sh=function(t){var n=t.nodeTypes,r=t.edgeTypes,o=t.onMove,a=t.onMoveStart,i=t.onMoveEnd,s=t.onInit,l=t.onNodeClick,d=t.onEdgeClick,c=t.onNodeDoubleClick,f=t.onEdgeDoubleClick,p=t.onNodeMouseEnter,g=t.onNodeMouseMove,h=t.onNodeMouseLeave,m=t.onNodeContextMenu,v=t.onSelectionContextMenu,b=t.connectionLineType,C=t.connectionLineStyle,S=t.connectionLineComponent,y=t.connectionLineContainerStyle,w=t.selectionKeyCode,_=t.multiSelectionKeyCode,x=t.zoomActivationKeyCode,O=t.deleteKeyCode,I=t.onlyRenderVisibleElements,L=t.elementsSelectable,D=t.selectNodesOnDrag,M=t.defaultZoom,V=t.defaultPosition,E=t.preventScrolling,k=t.defaultMarkerColor,R=t.zoomOnScroll,P=t.zoomOnPinch,B=t.panOnScroll,H=t.panOnScrollSpeed,F=t.panOnScrollMode,z=t.zoomOnDoubleClick,j=t.panOnDrag,q=t.onPaneClick,A=t.onPaneScroll,$=t.onPaneContextMenu,Y=t.onEdgeUpdate,G=t.onEdgeContextMenu,Z=t.onEdgeMouseEnter,Q=t.onEdgeMouseMove,K=t.onEdgeMouseLeave,ce=t.edgeUpdaterRadius,ve=t.onEdgeUpdateStart,we=t.onEdgeUpdateEnd,_e=t.noDragClassName,We=t.noWheelClassName,Re=t.noPanClassName,$e=t.elevateEdgesOnSelect,it=t.id;return hE(s),u(G0,{onPaneClick:q,onPaneContextMenu:$,onPaneScroll:A,deleteKeyCode:O,selectionKeyCode:w,multiSelectionKeyCode:_,zoomActivationKeyCode:x,elementsSelectable:L,onMove:o,onMoveStart:a,onMoveEnd:i,zoomOnScroll:R,zoomOnPinch:P,zoomOnDoubleClick:z,panOnScroll:B,panOnScrollSpeed:H,panOnScrollMode:F,panOnDrag:j,defaultPosition:V,defaultZoom:M,onSelectionContextMenu:v,preventScrolling:E,noDragClassName:_e,noWheelClassName:We,noPanClassName:Re,children:N(pE,{children:[u(uE,{edgeTypes:r,onEdgeClick:d,onEdgeDoubleClick:f,connectionLineType:b,connectionLineStyle:C,connectionLineComponent:S,connectionLineContainerStyle:y,onEdgeUpdate:Y,onlyRenderVisibleElements:I,onEdgeContextMenu:G,onEdgeMouseEnter:Z,onEdgeMouseMove:Q,onEdgeMouseLeave:K,onEdgeUpdateStart:ve,onEdgeUpdateEnd:we,edgeUpdaterRadius:ce,defaultMarkerColor:k,noPanClassName:Re,elevateEdgesOnSelect:!!$e,rfId:it}),u(X0,{nodeTypes:n,onNodeClick:l,onNodeDoubleClick:c,onNodeMouseEnter:p,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:m,selectNodesOnDrag:D,onlyRenderVisibleElements:I,noPanClassName:Re,noDragClassName:_e})]})})};sh.displayName="GraphView";var mE=T.exports.memo(sh),lh=function(){return null};lh.displayName="GroupNode";function fd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function pd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var kn=function(e){var t=function(r){var o=r.id,a=r.type,i=r.data,s=r.xPos,l=r.yPos,d=r.selected,c=r.onClick,f=r.onMouseEnter,p=r.onMouseMove,g=r.onMouseLeave,h=r.onContextMenu,m=r.onDoubleClick,v=r.style,b=r.className,C=r.isDraggable,S=r.isSelectable,y=r.isConnectable,w=r.selectNodesOnDrag,_=r.sourcePosition,x=r.targetPosition,O=r.hidden,I=r.resizeObserver,L=r.dragHandle,D=r.zIndex,M=r.isParent,V=r.noPanClassName,E=r.noDragClassName,k=r.initialized,R=Ie(),P=T.exports.useRef(null),B=T.exports.useRef(_),H=T.exports.useRef(x),F=T.exports.useRef(a),z=S||C||c||f||p||g,j=Rn(o,R.getState,f),q=Rn(o,R.getState,p),A=Rn(o,R.getState,g),$=Rn(o,R.getState,h),Y=Rn(o,R.getState,m),G=function(K){if(S&&(!w||!C)&&Lp({id:o,store:R}),c){var ce=R.getState().nodeInternals.get(o);c(K,pd({},ce))}};T.exports.useEffect(function(){if(P.current&&!O){var Q=P.current;return I==null||I.observe(Q),function(){return I==null?void 0:I.unobserve(Q)}}},[O]),T.exports.useEffect(function(){var Q=F.current!==a,K=B.current!==_,ce=H.current!==x;P.current&&(Q||K||ce)&&(Q&&(F.current=a),K&&(B.current=_),ce&&(H.current=x),R.getState().updateNodeDimensions([{id:o,nodeElement:P.current,forceUpdate:!0}]))},[o,a,_,x]);var Z=nh({nodeRef:P,disabled:O||!C,noDragClassName:E,handleSelector:L,nodeId:o,isSelectable:S,selectNodesOnDrag:w});return O?null:u("div",{className:Ye(["react-flow__node","react-flow__node-".concat(a),V,b,{selected:d,selectable:S,parent:M}]),ref:P,style:pd({zIndex:D,transform:"translate(".concat(s,"px,").concat(l,"px)"),pointerEvents:z?"all":"none",visibility:k?"visible":"hidden"},v),onMouseEnter:j,onMouseMove:q,onMouseLeave:A,onContextMenu:$,onClick:G,onDoubleClick:Y,"data-id":o,children:u(f0,{value:o,children:u(e,{id:o,data:i,type:a,xPos:s,yPos:l,selected:d,isConnectable:y,sourcePosition:_,targetPosition:x,dragging:Z,dragHandle:L,zIndex:D})})})};return t.displayName="NodeWrapper",T.exports.memo(t)};function hd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function md(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gE(e){var t={input:kn(e.input||Zp),default:kn(e.default||Vs),output:kn(e.output||eh),group:kn(e.group||lh)},n={},r=Object.keys(e).filter(function(o){return!["input","default","output","group"].includes(o)}).reduce(function(o,a){return o[a]=kn(e[a]||Vs),o},n);return md(md({},t),r)}function gd(e,t){T.exports.useRef(null);var n=T.exports.useMemo(function(){return t(e)},[e]);return n}function yd(e){if(!(!e||typeof document>"u")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");t.appendChild(n),n.appendChild(document.createTextNode(e))}}var ch=function(t){var n=t.children,r=!0;try{Ie()}catch{r=!1}return r?u(U,{children:n}):u(Bp,{createStore:Fp,children:n})};ch.displayName="ReactFlowWrapper";var yE=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectStop","onConnectEnd","onClickConnectStart","onClickConnectStop","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateEdgesOnSelect"];function vd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function bd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}yd(_0),yd(x0);var vE={input:Zp,default:Vs,output:eh},bE={default:Ps,straight:jp,step:Yp,smoothstep:xl,simplebezier:Up},SE=[15,15],wE=[0,0],dh=T.exports.forwardRef(function(e,t){var n=e.nodes,r=e.edges,o=e.defaultNodes,a=e.defaultEdges,i=e.className,s=e.nodeTypes,l=s===void 0?vE:s,d=e.edgeTypes,c=d===void 0?bE:d,f=e.onNodeClick,p=e.onEdgeClick,g=e.onInit,h=e.onMove,m=e.onMoveStart,v=e.onMoveEnd,b=e.onConnect,C=e.onConnectStart,S=e.onConnectStop,y=e.onConnectEnd,w=e.onClickConnectStart,_=e.onClickConnectStop,x=e.onClickConnectEnd,O=e.onNodeMouseEnter,I=e.onNodeMouseMove,L=e.onNodeMouseLeave,D=e.onNodeContextMenu,M=e.onNodeDoubleClick,V=e.onNodeDragStart,E=e.onNodeDrag,k=e.onNodeDragStop,R=e.onNodesDelete,P=e.onEdgesDelete,B=e.onSelectionChange,H=e.onSelectionDragStart,F=e.onSelectionDrag,z=e.onSelectionDragStop,j=e.onSelectionContextMenu,q=e.connectionMode,A=q===void 0?Sn.Strict:q,$=e.connectionLineType,Y=$===void 0?pt.Bezier:$,G=e.connectionLineStyle,Z=e.connectionLineComponent,Q=e.connectionLineContainerStyle,K=e.deleteKeyCode,ce=K===void 0?"Backspace":K,ve=e.selectionKeyCode,we=ve===void 0?"Shift":ve,_e=e.multiSelectionKeyCode,We=_e===void 0?"Meta":_e,Re=e.zoomActivationKeyCode,$e=Re===void 0?"Meta":Re,it=e.snapToGrid,Te=it===void 0?!1:it,He=e.snapGrid,st=He===void 0?SE:He,J=e.onlyRenderVisibleElements,se=J===void 0?!1:J,ee=e.selectNodesOnDrag,me=ee===void 0?!0:ee,ne=e.nodesDraggable,Ue=e.nodesConnectable,oe=e.elementsSelectable,Oe=e.minZoom,xe=e.maxZoom,lt=e.defaultZoom,Je=lt===void 0?1:lt,en=e.defaultPosition,Da=en===void 0?wE:en,Tn=e.translateExtent,_r=e.preventScrolling,Pa=_r===void 0?!0:_r,Pt=e.nodeExtent,Er=e.defaultMarkerColor,lm=Er===void 0?"#b1b1b7":Er,Ll=e.zoomOnScroll,cm=Ll===void 0?!0:Ll,ql=e.zoomOnPinch,dm=ql===void 0?!0:ql,Dl=e.panOnScroll,um=Dl===void 0?!1:Dl,Pl=e.panOnScrollSpeed,fm=Pl===void 0?.5:Pl,Ml=e.panOnScrollMode,pm=Ml===void 0?pn.Free:Ml,Vl=e.zoomOnDoubleClick,hm=Vl===void 0?!0:Vl,Bl=e.panOnDrag,mm=Bl===void 0?!0:Bl,gm=e.onPaneClick,ym=e.onPaneScroll,vm=e.onPaneContextMenu,bm=e.children,Sm=e.onEdgeUpdate,wm=e.onEdgeContextMenu,Cm=e.onEdgeDoubleClick,_m=e.onEdgeMouseEnter,Em=e.onEdgeMouseMove,xm=e.onEdgeMouseLeave,Tm=e.onEdgeUpdateStart,Om=e.onEdgeUpdateEnd,Fl=e.edgeUpdaterRadius,Nm=Fl===void 0?10:Fl,Im=e.onNodesChange,Rm=e.onEdgesChange,$l=e.noDragClassName,Am=$l===void 0?"nodrag":$l,Hl=e.noWheelClassName,km=Hl===void 0?"nowheel":Hl,Ul=e.noPanClassName,Lm=Ul===void 0?"nopan":Ul,zl=e.fitView,qm=zl===void 0?!1:zl,Dm=e.fitViewOptions,Yl=e.connectOnClick,Pm=Yl===void 0?!0:Yl,Mm=e.attributionPosition,Vm=e.proOptions,Bm=e.defaultEdgeOptions,jl=e.elevateEdgesOnSelect,Fm=jl===void 0?!1:jl,xr=wr(e,yE),$m=gd(l,gE),Hm=gd(c,N0),Um=Ye(["react-flow",i]);return u("div",{...bd(bd({},xr),{},{ref:t,className:Um}),children:N(ch,{children:[u(mE,{onInit:g,onMove:h,onMoveStart:m,onMoveEnd:v,onNodeClick:f,onEdgeClick:p,onNodeMouseEnter:O,onNodeMouseMove:I,onNodeMouseLeave:L,onNodeContextMenu:D,onNodeDoubleClick:M,nodeTypes:$m,edgeTypes:Hm,connectionLineType:Y,connectionLineStyle:G,connectionLineComponent:Z,connectionLineContainerStyle:Q,selectionKeyCode:we,deleteKeyCode:ce,multiSelectionKeyCode:We,zoomActivationKeyCode:$e,onlyRenderVisibleElements:se,selectNodesOnDrag:me,defaultZoom:Je,defaultPosition:Da,preventScrolling:Pa,zoomOnScroll:cm,zoomOnPinch:dm,zoomOnDoubleClick:hm,panOnScroll:um,panOnScrollSpeed:fm,panOnScrollMode:pm,panOnDrag:mm,onPaneClick:gm,onPaneScroll:ym,onPaneContextMenu:vm,onSelectionContextMenu:j,onEdgeUpdate:Sm,onEdgeContextMenu:wm,onEdgeDoubleClick:Cm,onEdgeMouseEnter:_m,onEdgeMouseMove:Em,onEdgeMouseLeave:xm,onEdgeUpdateStart:Tm,onEdgeUpdateEnd:Om,edgeUpdaterRadius:Nm,defaultMarkerColor:lm,noDragClassName:Am,noWheelClassName:km,noPanClassName:Lm,elevateEdgesOnSelect:Fm,id:xr==null?void 0:xr.id}),u(w0,{nodes:n,edges:r,defaultNodes:o,defaultEdges:a,onConnect:b,onConnectStart:C,onConnectStop:S,onConnectEnd:y,onClickConnectStart:w,onClickConnectStop:_,onClickConnectEnd:x,nodesDraggable:ne,nodesConnectable:Ue,elementsSelectable:oe,minZoom:Oe,maxZoom:xe,nodeExtent:Pt,onNodesChange:Im,onEdgesChange:Rm,snapToGrid:Te,snapGrid:st,connectionMode:A,translateExtent:Tn,connectOnClick:Pm,defaultEdgeOptions:Bm,fitView:qm,fitViewOptions:Dm,onNodesDelete:R,onEdgesDelete:P,onNodeDragStart:V,onNodeDrag:E,onNodeDragStop:k,onSelectionDrag:F,onSelectionDragStart:H,onSelectionDragStop:z}),B&&u(b0,{onSelectionChange:B}),bm,u(o0,{proOptions:Vm,position:Mm})]})})});dh.displayName="ReactFlow";var uh=function(t){var n=t.children;return u(Bp,{createStore:Fp,children:n})};uh.displayName="ReactFlowProvider";function fh(e){return function(t){var n=T.exports.useState(t),r=ie(n,2),o=r[0],a=r[1],i=T.exports.useCallback(function(s){return a(function(l){return e(s,l)})},[]);return[o,a,i]}}var CE=fh(Ap),_E=fh(L_);const Zr=e=>{const{data:t}=jm(e.modifiedBy),n=il(gr(e.modifiedOn)),{name:r,description:o}=e;return T.exports.useMemo(()=>N(U,{children:[r&&u(ze,{title:r,placement:"top",enterNextDelay:200,children:u("span",{children:u(vt,{variant:"smallText1",className:"name",children:r})})}),o&&u(ze,{title:o,placement:"top",enterNextDelay:200,children:u("span",{children:u(vt,{variant:"smallText1",className:"description",children:o})})}),t&&u(al,{userProfile:t}),u("div",{children:n})]}),[r,o,t,n])};try{Zr.displayName="ActivityNodeLabel",Zr.__docgenInfo={description:"",displayName:"ActivityNodeLabel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},etag:{defaultValue:null,description:"",name:"etag",required:!0,type:{name:"string"}},createdOn:{defaultValue:null,description:"",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"",name:"modifiedBy",required:!0,type:{name:"string"}},used:{defaultValue:null,description:"",name:"used",required:!1,type:{name:"(UsedURL | UsedEntity)[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ActivityNodeLabel.tsx#ActivityNodeLabel"]={docgenInfo:Zr.__docgenInfo,name:"ActivityNodeLabel",path:"src/lib/containers/provenance/ActivityNodeLabel.tsx#ActivityNodeLabel"})}catch{}const EE=new Set([".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx",".cwl",".wdl",".json"]),Jr=e=>{const{entityHeader:t}=e;if(t){const n=hf(t==null?void 0:t.type);if(n==Ss.FILE){const r=t.name.lastIndexOf(".");if(r>-1){const o=t.name.slice(r);if(EE.has(o.toLowerCase()))return u(he,{options:{icon:"code"}})}}else return u(Xl,{type:n,includeTooltip:!1})}return u(Xl,{type:Ss.FILE,includeTooltip:!1})};try{Jr.displayName="ProvenanceEntityIcon",Jr.__docgenInfo={description:"",displayName:"ProvenanceEntityIcon",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!1,type:{name:"EntityHeader"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceEntityIcon.tsx#ProvenanceEntityIcon"]={docgenInfo:Jr.__docgenInfo,name:"ProvenanceEntityIcon",path:"src/lib/containers/provenance/ProvenanceEntityIcon.tsx#ProvenanceEntityIcon"})}catch{}const eo=e=>{const t=e.versionNumber?`.${e.versionNumber}`:"",n=`${e.id}${t}`;return T.exports.useMemo(()=>N(U,{children:[u("div",{children:u(Jr,{entityHeader:e})}),N(U,{children:[u("div",{children:u(ze,{title:e.name,placement:"top",enterNextDelay:300,children:u("a",{href:`${qe.PORTAL}#!Synapse:${n}`,children:e.name})})}),kg(hf(e.type))&&N("div",{children:[N("div",{children:["v.",e.versionNumber]}),!e.isLatestVersion&&u("div",{children:"(old version)"})]})]})]}),[e,n])};try{eo.displayName="EntityNodeLabel",eo.__docgenInfo={description:"",displayName:"EntityNodeLabel",props:{name:{defaultValue:null,description:"The name of the entity",name:"name",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"The id of the entity",name:"id",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"The type of the entity",name:"type",required:!0,type:{name:"enum",value:[{value:'"org.sagebionetworks.repo.model.table.EntityView"'},{value:'"org.sagebionetworks.repo.model.table.SubmissionView"'},{value:'"org.sagebionetworks.repo.model.table.Dataset"'},{value:'"org.sagebionetworks.repo.model.table.DatasetCollection"'},{value:'"org.sagebionetworks.repo.model.Link"'},{value:'"org.sagebionetworks.repo.model.docker.DockerRepository"'},{value:'"org.sagebionetworks.repo.model.FileEntity"'},{value:'"org.sagebionetworks.repo.model.table.TableEntity"'},{value:'"org.sagebionetworks.repo.model.table.MaterializedView"'},{value:'"org.sagebionetworks.repo.model.Folder"'},{value:'"org.sagebionetworks.repo.model.Project"'}]}},versionNumber:{defaultValue:null,description:"The version number of the entity",name:"versionNumber",required:!1,type:{name:"number"}},versionLabel:{defaultValue:null,description:"The user defined version label of the entity",name:"versionLabel",required:!1,type:{name:"string"}},benefactorId:{defaultValue:null,description:"The ID of the entity that this Entity's ACL is inherited from.",name:"benefactorId",required:!0,type:{name:"number"}},createdOn:{defaultValue:null,description:"The date this entity was created.",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"The date this entity was last modified.",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"The ID of the user that created this entity.",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"The ID of the user that last modified this entity.",name:"modifiedBy",required:!0,type:{name:"string"}},isLatestVersion:{defaultValue:null,description:"If this version is the latest version of the entity",name:"isLatestVersion",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/EntityNodeLabel.tsx#EntityNodeLabel"]={docgenInfo:eo.__docgenInfo,name:"EntityNodeLabel",path:"src/lib/containers/provenance/EntityNodeLabel.tsx#EntityNodeLabel"})}catch{}var ph={exports:{}};(function(e,t){(function(n,r){typeof Ea=="function"&&!0?e.exports=r():n.pluralize=r()})(sl,function(){var n=[],r=[],o={},a={},i={};function s(m){return typeof m=="string"?new RegExp("^"+m+"$","i"):m}function l(m,v){return m===v?v:m===m.toLowerCase()?v.toLowerCase():m===m.toUpperCase()?v.toUpperCase():m[0]===m[0].toUpperCase()?v.charAt(0).toUpperCase()+v.substr(1).toLowerCase():v.toLowerCase()}function d(m,v){return m.replace(/\$(\d{1,2})/g,function(b,C){return v[C]||""})}function c(m,v){return m.replace(v[0],function(b,C){var S=d(v[1],arguments);return l(b===""?m[C-1]:b,S)})}function f(m,v,b){if(!m.length||o.hasOwnProperty(m))return v;for(var C=b.length;C--;){var S=b[C];if(S[0].test(v))return c(v,S)}return v}function p(m,v,b){return function(C){var S=C.toLowerCase();return v.hasOwnProperty(S)?l(C,S):m.hasOwnProperty(S)?l(C,m[S]):f(S,C,b)}}function g(m,v,b,C){return function(S){var y=S.toLowerCase();return v.hasOwnProperty(y)?!0:m.hasOwnProperty(y)?!1:f(y,y,b)===y}}function h(m,v,b){var C=v===1?h.singular(m):h.plural(m);return(b?v+" ":"")+C}return h.plural=p(i,a,n),h.isPlural=g(i,a,n),h.singular=p(a,i,r),h.isSingular=g(a,i,r),h.addPluralRule=function(m,v){n.push([s(m),v])},h.addSingularRule=function(m,v){r.push([s(m),v])},h.addUncountableRule=function(m){if(typeof m=="string"){o[m.toLowerCase()]=!0;return}h.addPluralRule(m,"$0"),h.addSingularRule(m,"$0")},h.addIrregularRule=function(m,v){v=v.toLowerCase(),m=m.toLowerCase(),i[m]=v,a[v]=m},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(m){return h.addIrregularRule(m[0],m[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(m){return h.addPluralRule(m[0],m[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(m){return h.addSingularRule(m[0],m[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[e]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(h.addUncountableRule),h})})(ph);const xE=ph.exports,to=e=>{const{itemCount:t}=e;return T.exports.useMemo(()=>u(U,{children:N("a",{children:["Show ",t," ",xE("item",t),"\u2026"]})}),[t])};try{to.displayName="ExpandGraphNodeLabel",to.__docgenInfo={description:"",displayName:"ExpandGraphNodeLabel",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!0,type:{name:"EntityHeader"}},itemCount:{defaultValue:null,description:"",name:"itemCount",required:!0,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ExpandGraphNodeLabel.tsx#ExpandGraphNodeLabel"]={docgenInfo:to.__docgenInfo,name:"ExpandGraphNodeLabel",path:"src/lib/containers/provenance/ExpandGraphNodeLabel.tsx#ExpandGraphNodeLabel"})}catch{}const TE=/^(.+?\.)?github\.com$/,OE=/^(.+?\.)?githubusercontent\.com$/,no=e=>{const{url:t}=e;let n="link";const r=new URL(t),{hostname:o}=r;return(o.match(TE)||o.match(OE))&&(n="github"),u(he,{options:{icon:n}})};try{no.displayName="ProvenanceExternalIcon",no.__docgenInfo={description:"",displayName:"ProvenanceExternalIcon",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceExternalIcon.tsx#ProvenanceExternalIcon"]={docgenInfo:no.__docgenInfo,name:"ProvenanceExternalIcon",path:"src/lib/containers/provenance/ProvenanceExternalIcon.tsx#ProvenanceExternalIcon"})}catch{}const ro=e=>T.exports.useMemo(()=>N(U,{children:[u("div",{children:u(no,{url:e.url})}),u(ze,{title:e.name,placement:"top",enterNextDelay:300,children:u("a",{href:e.url,rel:"noopener noreferrer",children:e.name})})]}),[e.name,e.url]);try{ro.displayName="ExternalGraphNodeLabel",ro.__docgenInfo={description:"",displayName:"ExternalGraphNodeLabel",props:{concreteType:{defaultValue:null,description:"",name:"concreteType",required:!0,type:{name:'"org.sagebionetworks.repo.model.provenance.UsedURL"'}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},wasExecuted:{defaultValue:null,description:"",name:"wasExecuted",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ExternalGraphNodeLabel.tsx#ExternalGraphNodeLabel"]={docgenInfo:ro.__docgenInfo,name:"ExternalGraphNodeLabel",path:"src/lib/containers/provenance/ExternalGraphNodeLabel.tsx#ExternalGraphNodeLabel"})}catch{}var ri,Sd;function NE(){if(Sd)return ri;Sd=1;var e=Ly,t=4;function n(r){return e(r,t)}return ri=n,ri}var oi={exports:{}},wd;function hh(){return wd||(wd=1,function(e){e.exports=Af}(oi)),oi.exports}var ai,Cd;function IE(){if(Cd)return ai;Cd=1;var e=kf;function t(n,r){var o=[];return e(n,function(a,i,s){r(a,i,s)&&o.push(a)}),o}return ai=t,ai}var ii,_d;function mh(){if(_d)return ii;_d=1;var e=py,t=IE(),n=Qt,r=yr;function o(a,i){var s=r(a)?e:t;return s(a,n(i))}return ii=o,ii}var si,Ed;function RE(){if(Ed)return si;Ed=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,o){return r!=null&&t.call(r,o)}return si=n,si}var li,xd;function gh(){if(xd)return li;xd=1;var e=RE(),t=hy;function n(r,o){return r!=null&&t(r,o,e)}return li=n,li}var ci,Td;function yh(){if(Td)return ci;Td=1;function e(t){return t===void 0}return ci=e,ci}var di,Od;function vh(){if(Od)return di;Od=1;var e=Ef,t=Qt,n=qy,r=yr;function o(a,i){var s=r(a)?e:n;return s(a,t(i))}return di=o,di}var ui,Nd;function AE(){if(Nd)return ui;Nd=1;function e(t,n,r,o,a){return a(t,function(i,s,l){r=o?(o=!1,i):n(r,i,s,l)}),r}return ui=e,ui}var fi,Id;function bh(){if(Id)return fi;Id=1;var e=my,t=kf,n=Qt,r=AE(),o=yr;function a(i,s,l){var d=o(i)?e:r,c=arguments.length<3;return d(i,n(s),l,c,t)}return fi=a,fi}var pi,Rd;function kE(){if(Rd)return pi;Rd=1;var e=gy,t=e("length");return pi=t,pi}var hi,Ad;function LE(){if(Ad)return hi;Ad=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",i="["+e+"]",s="["+o+"]",l="\\ud83c[\\udffb-\\udfff]",d="(?:"+s+"|"+l+")",c="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",h=d+"?",m="["+a+"]?",v="(?:"+g+"(?:"+[c,f,p].join("|")+")"+m+h+")*",b=m+h+v,C="(?:"+[c+s+"?",s,f,p,i].join("|")+")",S=RegExp(l+"(?="+l+")|"+C+b,"g");function y(w){for(var _=S.lastIndex=0;S.test(w);)++_;return _}return hi=y,hi}var mi,kd;function qE(){if(kd)return mi;kd=1;var e=kE(),t=yy,n=LE();function r(o){return t(o)?n(o):e(o)}return mi=r,mi}var gi,Ld;function DE(){if(Ld)return gi;Ld=1;var e=vy,t=by,n=xf,r=jy,o=qE(),a="[object Map]",i="[object Set]";function s(l){if(l==null)return 0;if(n(l))return r(l)?o(l):l.length;var d=t(l);return d==a||d==i?l.size:e(l).length}return gi=s,gi}var yi,qd;function PE(){if(qd)return yi;qd=1;var e=Dy,t=Py,n=Sy,r=Qt,o=wy,a=yr,i=Cy.exports,s=Tf,l=Of,d=_y;function c(f,p,g){var h=a(f),m=h||i(f)||d(f);if(p=r(p),g==null){var v=f&&f.constructor;m?g=h?new v:[]:l(f)?g=s(v)?t(o(f)):{}:g={}}return(m?e:n)(f,function(b,C,S){return p(g,b,C,S)}),g}return yi=c,yi}var vi,Dd;function ME(){if(Dd)return vi;Dd=1;var e=Ef;function t(n,r){return e(r,function(o){return n[o]})}return vi=t,vi}var bi,Pd;function Sh(){if(Pd)return bi;Pd=1;var e=ME(),t=ll;function n(r){return r==null?[]:e(r,t(r))}return bi=n,bi}var Si,Md;function je(){if(Md)return Si;Md=1;var e;if(typeof Ea=="function")try{e={clone:NE(),constant:Nf,each:hh(),filter:mh(),has:gh(),isArray:yr,isEmpty:ay,isFunction:Tf,isUndefined:yh(),keys:ll,map:vh(),reduce:bh(),size:DE(),transform:PE(),union:iy,values:Sh()}}catch{}return e||(e=window._),Si=e,Si}var wi,Vd;function Ol(){if(Vd)return wi;Vd=1;var e=je();wi=o;var t="\0",n="\0",r="";function o(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(c){return this._label=c,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return e.keys(this._nodes)},o.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(f){return e.isEmpty(c._in[f])})},o.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(f){return e.isEmpty(c._out[f])})},o.prototype.setNodes=function(c,f){var p=arguments,g=this;return e.each(c,function(h){p.length>1?g.setNode(h,f):g.setNode(h)}),this},o.prototype.setNode=function(c,f){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=f),this):(this._nodes[c]=arguments.length>1?f:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},o.prototype.node=function(c){return this._nodes[c]},o.prototype.hasNode=function(c){return e.has(this._nodes,c)},o.prototype.removeNode=function(c){var f=this;if(e.has(this._nodes,c)){var p=function(g){f.removeEdge(f._edgeObjs[g])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(g){f.setParent(g)}),delete this._children[c]),e.each(e.keys(this._in[c]),p),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),p),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},o.prototype.setParent=function(c,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=n;else{f+="";for(var p=f;!e.isUndefined(p);p=this.parent(p))if(p===c)throw new Error("Setting "+f+" as parent of "+c+" would create a cycle");this.setNode(f)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=f,this._children[f][c]=!0,this},o.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},o.prototype.parent=function(c){if(this._isCompound){var f=this._parent[c];if(f!==n)return f}},o.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var f=this._children[c];if(f)return e.keys(f)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},o.prototype.predecessors=function(c){var f=this._preds[c];if(f)return e.keys(f)},o.prototype.successors=function(c){var f=this._sucs[c];if(f)return e.keys(f)},o.prototype.neighbors=function(c){var f=this.predecessors(c);if(f)return e.union(f,this.successors(c))},o.prototype.isLeaf=function(c){var f;return this.isDirected()?f=this.successors(c):f=this.neighbors(c),f.length===0},o.prototype.filterNodes=function(c){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var p=this;e.each(this._nodes,function(m,v){c(v)&&f.setNode(v,m)}),e.each(this._edgeObjs,function(m){f.hasNode(m.v)&&f.hasNode(m.w)&&f.setEdge(m,p.edge(m))});var g={};function h(m){var v=p.parent(m);return v===void 0||f.hasNode(v)?(g[m]=v,v):v in g?g[v]:h(v)}return this._isCompound&&e.each(f.nodes(),function(m){f.setParent(m,h(m))}),f},o.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return e.values(this._edgeObjs)},o.prototype.setPath=function(c,f){var p=this,g=arguments;return e.reduce(c,function(h,m){return g.length>1?p.setEdge(h,m,f):p.setEdge(h,m),m}),this},o.prototype.setEdge=function(){var c,f,p,g,h=!1,m=arguments[0];typeof m=="object"&&m!==null&&"v"in m?(c=m.v,f=m.w,p=m.name,arguments.length===2&&(g=arguments[1],h=!0)):(c=m,f=arguments[1],p=arguments[3],arguments.length>2&&(g=arguments[2],h=!0)),c=""+c,f=""+f,e.isUndefined(p)||(p=""+p);var v=s(this._isDirected,c,f,p);if(e.has(this._edgeLabels,v))return h&&(this._edgeLabels[v]=g),this;if(!e.isUndefined(p)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this._edgeLabels[v]=h?g:this._defaultEdgeLabelFn(c,f,p);var b=l(this._isDirected,c,f,p);return c=b.v,f=b.w,Object.freeze(b),this._edgeObjs[v]=b,a(this._preds[f],c),a(this._sucs[c],f),this._in[f][v]=b,this._out[c][v]=b,this._edgeCount++,this},o.prototype.edge=function(c,f,p){var g=arguments.length===1?d(this._isDirected,arguments[0]):s(this._isDirected,c,f,p);return this._edgeLabels[g]},o.prototype.hasEdge=function(c,f,p){var g=arguments.length===1?d(this._isDirected,arguments[0]):s(this._isDirected,c,f,p);return e.has(this._edgeLabels,g)},o.prototype.removeEdge=function(c,f,p){var g=arguments.length===1?d(this._isDirected,arguments[0]):s(this._isDirected,c,f,p),h=this._edgeObjs[g];return h&&(c=h.v,f=h.w,delete this._edgeLabels[g],delete this._edgeObjs[g],i(this._preds[f],c),i(this._sucs[c],f),delete this._in[f][g],delete this._out[c][g],this._edgeCount--),this},o.prototype.inEdges=function(c,f){var p=this._in[c];if(p){var g=e.values(p);return f?e.filter(g,function(h){return h.v===f}):g}},o.prototype.outEdges=function(c,f){var p=this._out[c];if(p){var g=e.values(p);return f?e.filter(g,function(h){return h.w===f}):g}},o.prototype.nodeEdges=function(c,f){var p=this.inEdges(c,f);if(p)return p.concat(this.outEdges(c,f))};function a(c,f){c[f]?c[f]++:c[f]=1}function i(c,f){--c[f]||delete c[f]}function s(c,f,p,g){var h=""+f,m=""+p;if(!c&&h>m){var v=h;h=m,m=v}return h+r+m+r+(e.isUndefined(g)?t:g)}function l(c,f,p,g){var h=""+f,m=""+p;if(!c&&h>m){var v=h;h=m,m=v}var b={v:h,w:m};return g&&(b.name=g),b}function d(c,f){return s(c,f.v,f.w,f.name)}return wi}var Ci,Bd;function VE(){return Bd||(Bd=1,Ci="2.1.8"),Ci}var _i,Fd;function BE(){return Fd||(Fd=1,_i={Graph:Ol(),version:VE()}),_i}var Ei,$d;function FE(){if($d)return Ei;$d=1;var e=je(),t=Ol();Ei={write:n,read:a};function n(i){var s={options:{directed:i.isDirected(),multigraph:i.isMultigraph(),compound:i.isCompound()},nodes:r(i),edges:o(i)};return e.isUndefined(i.graph())||(s.value=e.clone(i.graph())),s}function r(i){return e.map(i.nodes(),function(s){var l=i.node(s),d=i.parent(s),c={v:s};return e.isUndefined(l)||(c.value=l),e.isUndefined(d)||(c.parent=d),c})}function o(i){return e.map(i.edges(),function(s){var l=i.edge(s),d={v:s.v,w:s.w};return e.isUndefined(s.name)||(d.name=s.name),e.isUndefined(l)||(d.value=l),d})}function a(i){var s=new t(i.options).setGraph(i.value);return e.each(i.nodes,function(l){s.setNode(l.v,l.value),l.parent&&s.setParent(l.v,l.parent)}),e.each(i.edges,function(l){s.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),s}return Ei}var xi,Hd;function $E(){if(Hd)return xi;Hd=1;var e=je();xi=t;function t(n){var r={},o=[],a;function i(s){e.has(r,s)||(r[s]=!0,a.push(s),e.each(n.successors(s),i),e.each(n.predecessors(s),i))}return e.each(n.nodes(),function(s){a=[],i(s),a.length&&o.push(a)}),o}return xi}var Ti,Ud;function wh(){if(Ud)return Ti;Ud=1;var e=je();Ti=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var o=this._keyIndices;if(n=String(n),!e.has(o,n)){var a=this._arr,i=a.length;return o[n]=i,a.push({key:n,priority:r}),this._decrease(i),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var o=this._keyIndices[n];if(r>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[o].priority+" New: "+r);this._arr[o].priority=r,this._decrease(o)},t.prototype._heapify=function(n){var r=this._arr,o=2*n,a=o+1,i=n;o<r.length&&(i=r[o].priority<r[i].priority?o:i,a<r.length&&(i=r[a].priority<r[i].priority?a:i),i!==n&&(this._swap(n,i),this._heapify(i)))},t.prototype._decrease=function(n){for(var r=this._arr,o=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<o));)this._swap(n,a),n=a},t.prototype._swap=function(n,r){var o=this._arr,a=this._keyIndices,i=o[n],s=o[r];o[n]=s,o[r]=i,a[s.key]=n,a[i.key]=r},Ti}var Oi,zd;function Ch(){if(zd)return Oi;zd=1;var e=je(),t=wh();Oi=r;var n=e.constant(1);function r(a,i,s,l){return o(a,String(i),s||n,l||function(d){return a.outEdges(d)})}function o(a,i,s,l){var d={},c=new t,f,p,g=function(h){var m=h.v!==f?h.v:h.w,v=d[m],b=s(h),C=p.distance+b;if(b<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+b);C<v.distance&&(v.distance=C,v.predecessor=f,c.decrease(m,C))};for(a.nodes().forEach(function(h){var m=h===i?0:Number.POSITIVE_INFINITY;d[h]={distance:m},c.add(h,m)});c.size()>0&&(f=c.removeMin(),p=d[f],p.distance!==Number.POSITIVE_INFINITY);)l(f).forEach(g);return d}return Oi}var Ni,Yd;function HE(){if(Yd)return Ni;Yd=1;var e=Ch(),t=je();Ni=n;function n(r,o,a){return t.transform(r.nodes(),function(i,s){i[s]=e(r,s,o,a)},{})}return Ni}var Ii,jd;function _h(){if(jd)return Ii;jd=1;var e=je();Ii=t;function t(n){var r=0,o=[],a={},i=[];function s(l){var d=a[l]={onStack:!0,lowlink:r,index:r++};if(o.push(l),n.successors(l).forEach(function(p){e.has(a,p)?a[p].onStack&&(d.lowlink=Math.min(d.lowlink,a[p].index)):(s(p),d.lowlink=Math.min(d.lowlink,a[p].lowlink))}),d.lowlink===d.index){var c=[],f;do f=o.pop(),a[f].onStack=!1,c.push(f);while(l!==f);i.push(c)}}return n.nodes().forEach(function(l){e.has(a,l)||s(l)}),i}return Ii}var Ri,Wd;function UE(){if(Wd)return Ri;Wd=1;var e=je(),t=_h();Ri=n;function n(r){return e.filter(t(r),function(o){return o.length>1||o.length===1&&r.hasEdge(o[0],o[0])})}return Ri}var Ai,Gd;function zE(){if(Gd)return Ai;Gd=1;var e=je();Ai=n;var t=e.constant(1);function n(o,a,i){return r(o,a||t,i||function(s){return o.outEdges(s)})}function r(o,a,i){var s={},l=o.nodes();return l.forEach(function(d){s[d]={},s[d][d]={distance:0},l.forEach(function(c){d!==c&&(s[d][c]={distance:Number.POSITIVE_INFINITY})}),i(d).forEach(function(c){var f=c.v===d?c.w:c.v,p=a(c);s[d][f]={distance:p,predecessor:d}})}),l.forEach(function(d){var c=s[d];l.forEach(function(f){var p=s[f];l.forEach(function(g){var h=p[d],m=c[g],v=p[g],b=h.distance+m.distance;b<v.distance&&(v.distance=b,v.predecessor=m.predecessor)})})}),s}return Ai}var ki,Kd;function Eh(){if(Kd)return ki;Kd=1;var e=je();ki=t,t.CycleException=n;function t(r){var o={},a={},i=[];function s(l){if(e.has(a,l))throw new n;e.has(o,l)||(a[l]=!0,o[l]=!0,e.each(r.predecessors(l),s),delete a[l],i.push(l))}if(e.each(r.sinks(),s),e.size(o)!==r.nodeCount())throw new n;return i}function n(){}return n.prototype=new Error,ki}var Li,Qd;function YE(){if(Qd)return Li;Qd=1;var e=Eh();Li=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Li}var qi,Xd;function xh(){if(Xd)return qi;Xd=1;var e=je();qi=t;function t(r,o,a){e.isArray(o)||(o=[o]);var i=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],l={};return e.each(o,function(d){if(!r.hasNode(d))throw new Error("Graph does not have node: "+d);n(r,d,a==="post",l,i,s)}),s}function n(r,o,a,i,s,l){e.has(i,o)||(i[o]=!0,a||l.push(o),e.each(s(o),function(d){n(r,d,a,i,s,l)}),a&&l.push(o))}return qi}var Di,Zd;function jE(){if(Zd)return Di;Zd=1;var e=xh();Di=t;function t(n,r){return e(n,r,"post")}return Di}var Pi,Jd;function WE(){if(Jd)return Pi;Jd=1;var e=xh();Pi=t;function t(n,r){return e(n,r,"pre")}return Pi}var Mi,eu;function GE(){if(eu)return Mi;eu=1;var e=je(),t=Ol(),n=wh();Mi=r;function r(o,a){var i=new t,s={},l=new n,d;function c(p){var g=p.v===d?p.w:p.v,h=l.priority(g);if(h!==void 0){var m=a(p);m<h&&(s[g]=d,l.decrease(g,m))}}if(o.nodeCount()===0)return i;e.each(o.nodes(),function(p){l.add(p,Number.POSITIVE_INFINITY),i.setNode(p)}),l.decrease(o.nodes()[0],0);for(var f=!1;l.size()>0;){if(d=l.removeMin(),e.has(s,d))i.setEdge(d,s[d]);else{if(f)throw new Error("Input graph is not connected: "+o);f=!0}o.nodeEdges(d).forEach(c)}return i}return Mi}var Vi,tu;function KE(){return tu||(tu=1,Vi={components:$E(),dijkstra:Ch(),dijkstraAll:HE(),findCycles:UE(),floydWarshall:zE(),isAcyclic:YE(),postorder:jE(),preorder:WE(),prim:GE(),tarjan:_h(),topsort:Eh()}),Vi}var Bi,nu;function QE(){if(nu)return Bi;nu=1;var e=BE();return Bi={Graph:e.Graph,json:FE(),alg:KE(),version:e.version},Bi}var ma;if(typeof Ea=="function")try{ma=QE()}catch{}ma||(ma=window.graphlib);var Ze=ma,Fi,ru;function XE(){if(ru)return Fi;ru=1;var e=Qt,t=xf,n=ll;function r(o){return function(a,i,s){var l=Object(a);if(!t(a)){var d=e(i);a=n(a),i=function(f){return d(l[f],f,l)}}var c=o(a,i,s);return c>-1?l[d?a[c]:c]:void 0}}return Fi=r,Fi}var $i,ou;function ZE(){if(ou)return $i;ou=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return $i=t,$i}var Hi,au;function JE(){if(au)return Hi;au=1;var e=ZE(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Hi=n,Hi}var Ui,iu;function ex(){if(iu)return Ui;iu=1;var e=JE(),t=Of,n=If,r=0/0,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt;function l(d){if(typeof d=="number")return d;if(n(d))return r;if(t(d)){var c=typeof d.valueOf=="function"?d.valueOf():d;d=t(c)?c+"":c}if(typeof d!="string")return d===0?d:+d;d=e(d);var f=a.test(d);return f||i.test(d)?s(d.slice(2),f?2:8):o.test(d)?r:+d}return Ui=l,Ui}var zi,su;function Th(){if(su)return zi;su=1;var e=ex(),t=1/0,n=17976931348623157e292;function r(o){if(!o)return o===0?o:0;if(o=e(o),o===t||o===-t){var a=o<0?-1:1;return a*n}return o===o?o:0}return zi=r,zi}var Yi,lu;function tx(){if(lu)return Yi;lu=1;var e=Th();function t(n){var r=e(n),o=r%1;return r===r?o?r-o:r:0}return Yi=t,Yi}var ji,cu;function nx(){if(cu)return ji;cu=1;var e=Wy,t=Qt,n=tx(),r=Math.max;function o(a,i,s){var l=a==null?0:a.length;if(!l)return-1;var d=s==null?0:n(s);return d<0&&(d=r(l+d,0)),e(a,t(i),d)}return ji=o,ji}var Wi,du;function rx(){if(du)return Wi;du=1;var e=XE(),t=nx(),n=e(t);return Wi=n,Wi}var Gi,uu;function ox(){if(uu)return Gi;uu=1;var e=Ey,t=My,n=xy;function r(o,a){return o==null?o:e(o,t(a),n)}return Gi=r,Gi}var Ki,fu;function Nl(){if(fu)return Ki;fu=1;var e=If;function t(n,r,o){for(var a=-1,i=n.length;++a<i;){var s=n[a],l=r(s);if(l!=null&&(d===void 0?l===l&&!e(l):o(l,d)))var d=l,c=s}return c}return Ki=t,Ki}var Qi,pu;function ax(){if(pu)return Qi;pu=1;function e(t,n){return t>n}return Qi=e,Qi}var Xi,hu;function ix(){if(hu)return Xi;hu=1;var e=Nl(),t=ax(),n=Rf;function r(o){return o&&o.length?e(o,n,t):void 0}return Xi=r,Xi}var Zi,mu;function sx(){if(mu)return Zi;mu=1;var e=By,t=Vy,n=t(function(r,o,a){e(r,o,a)});return Zi=n,Zi}var Ji,gu;function Oh(){if(gu)return Ji;gu=1;function e(t,n){return t<n}return Ji=e,Ji}var es,yu;function lx(){if(yu)return es;yu=1;var e=Nl(),t=Oh(),n=Rf;function r(o){return o&&o.length?e(o,n,t):void 0}return es=r,es}var ts,vu;function cx(){if(vu)return ts;vu=1;var e=Nl(),t=Qt,n=Oh();function r(o,a){return o&&o.length?e(o,t(a),n):void 0}return ts=r,ts}var ns,bu;function dx(){if(bu)return ns;bu=1;var e=Ty,t=function(){return e.Date.now()};return ns=t,ns}var rs,Su;function ux(){if(Su)return rs;Su=1;var e=Math.ceil,t=Math.max;function n(r,o,a,i){for(var s=-1,l=t(e((o-r)/(a||1)),0),d=Array(l);l--;)d[i?l:++s]=r,r+=a;return d}return rs=n,rs}var os,wu;function fx(){if(wu)return os;wu=1;var e=ux(),t=Fy,n=Th();function r(o){return function(a,i,s){return s&&typeof s!="number"&&t(a,i,s)&&(i=s=void 0),a=n(a),i===void 0?(i=a,a=0):i=n(i),s=s===void 0?a<i?1:-1:n(s),e(a,i,s,o)}}return os=r,os}var as,Cu;function px(){if(Cu)return as;Cu=1;var e=fx(),t=e();return as=t,as}var is,_u;function hx(){if(_u)return is;_u=1;var e=Oy,t=0;function n(r){var o=++t;return e(r)+o}return is=n,is}var ss,Eu;function mx(){if(Eu)return ss;Eu=1;function e(t,n,r){for(var o=-1,a=t.length,i=n.length,s={};++o<a;){var l=o<i?n[o]:void 0;r(s,t[o],l)}return s}return ss=e,ss}var ls,xu;function gx(){if(xu)return ls;xu=1;var e=Ny,t=mx();function n(r,o){return t(r||[],o||[],e)}return ls=n,ls}var ga;if(typeof Ea=="function")try{ga={cloneDeep:$y,constant:Nf,defaults:Hy,each:hh(),filter:mh(),find:rx(),flatten:Iy,forEach:Af,forIn:ox(),has:gh(),isUndefined:yh(),last:Uy,map:vh(),mapValues:Ry,max:ix(),merge:sx(),min:lx(),minBy:cx(),now:dx(),pick:Ay,range:px(),reduce:bh(),sortBy:zy,uniqueId:hx(),values:Sh(),zipObject:gx()}}catch{}ga||(ga=window._);var ye=ga,yx=La;function La(){var e={};e._next=e._prev=e,this._sentinel=e}La.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Nh(t),t};La.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Nh(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};La.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,vx)),n=n._prev;return"["+e.join(", ")+"]"};function Nh(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function vx(e,t){if(e!=="_next"&&e!=="_prev")return t}var mt=ye,bx=Ze.Graph,Sx=yx,wx=_x,Cx=mt.constant(1);function _x(e,t){if(e.nodeCount()<=1)return[];var n=xx(e,t||Cx),r=Ex(n.graph,n.buckets,n.zeroIdx);return mt.flatten(mt.map(r,function(o){return e.outEdges(o.v,o.w)}),!0)}function Ex(e,t,n){for(var r=[],o=t[t.length-1],a=t[0],i;e.nodeCount();){for(;i=a.dequeue();)cs(e,t,n,i);for(;i=o.dequeue();)cs(e,t,n,i);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(i=t[s].dequeue(),i){r=r.concat(cs(e,t,n,i,!0));break}}}return r}function cs(e,t,n,r,o){var a=o?[]:void 0;return mt.forEach(e.inEdges(r.v),function(i){var s=e.edge(i),l=e.node(i.v);o&&a.push({v:i.v,w:i.w}),l.out-=s,Fs(t,n,l)}),mt.forEach(e.outEdges(r.v),function(i){var s=e.edge(i),l=i.w,d=e.node(l);d.in-=s,Fs(t,n,d)}),e.removeNode(r.v),a}function xx(e,t){var n=new bx,r=0,o=0;mt.forEach(e.nodes(),function(s){n.setNode(s,{v:s,in:0,out:0})}),mt.forEach(e.edges(),function(s){var l=n.edge(s.v,s.w)||0,d=t(s),c=l+d;n.setEdge(s.v,s.w,c),o=Math.max(o,n.node(s.v).out+=d),r=Math.max(r,n.node(s.w).in+=d)});var a=mt.range(o+r+3).map(function(){return new Sx}),i=r+1;return mt.forEach(n.nodes(),function(s){Fs(a,i,n.node(s))}),{graph:n,buckets:a,zeroIdx:i}}function Fs(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var Ft=ye,Tx=wx,Ox={run:Nx,undo:Rx};function Nx(e){var t=e.graph().acyclicer==="greedy"?Tx(e,n(e)):Ix(e);Ft.forEach(t,function(r){var o=e.edge(r);e.removeEdge(r),o.forwardName=r.name,o.reversed=!0,e.setEdge(r.w,r.v,o,Ft.uniqueId("rev"))});function n(r){return function(o){return r.edge(o).weight}}}function Ix(e){var t=[],n={},r={};function o(a){Ft.has(r,a)||(r[a]=!0,n[a]=!0,Ft.forEach(e.outEdges(a),function(i){Ft.has(n,i.w)?t.push(i):o(i.w)}),delete n[a])}return Ft.forEach(e.nodes(),o),t}function Rx(e){Ft.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var de=ye,Ih=Ze.Graph,De={addDummyNode:Rh,simplify:Ax,asNonCompoundGraph:kx,successorWeights:Lx,predecessorWeights:qx,intersectRect:Dx,buildLayerMatrix:Px,normalizeRanks:Mx,removeEmptyRanks:Vx,addBorderNode:Bx,maxRank:Ah,partition:Fx,time:$x,notime:Hx};function Rh(e,t,n,r){var o;do o=de.uniqueId(r);while(e.hasNode(o));return n.dummy=t,e.setNode(o,n),o}function Ax(e){var t=new Ih().setGraph(e.graph());return de.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),de.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})}),t}function kx(e){var t=new Ih({multigraph:e.isMultigraph()}).setGraph(e.graph());return de.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),de.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function Lx(e){var t=de.map(e.nodes(),function(n){var r={};return de.forEach(e.outEdges(n),function(o){r[o.w]=(r[o.w]||0)+e.edge(o).weight}),r});return de.zipObject(e.nodes(),t)}function qx(e){var t=de.map(e.nodes(),function(n){var r={};return de.forEach(e.inEdges(n),function(o){r[o.v]=(r[o.v]||0)+e.edge(o).weight}),r});return de.zipObject(e.nodes(),t)}function Dx(e,t){var n=e.x,r=e.y,o=t.x-n,a=t.y-r,i=e.width/2,s=e.height/2;if(!o&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var l,d;return Math.abs(a)*i>Math.abs(o)*s?(a<0&&(s=-s),l=s*o/a,d=s):(o<0&&(i=-i),l=i,d=i*a/o),{x:n+l,y:r+d}}function Px(e){var t=de.map(de.range(Ah(e)+1),function(){return[]});return de.forEach(e.nodes(),function(n){var r=e.node(n),o=r.rank;de.isUndefined(o)||(t[o][r.order]=n)}),t}function Mx(e){var t=de.min(de.map(e.nodes(),function(n){return e.node(n).rank}));de.forEach(e.nodes(),function(n){var r=e.node(n);de.has(r,"rank")&&(r.rank-=t)})}function Vx(e){var t=de.min(de.map(e.nodes(),function(a){return e.node(a).rank})),n=[];de.forEach(e.nodes(),function(a){var i=e.node(a).rank-t;n[i]||(n[i]=[]),n[i].push(a)});var r=0,o=e.graph().nodeRankFactor;de.forEach(n,function(a,i){de.isUndefined(a)&&i%o!==0?--r:r&&de.forEach(a,function(s){e.node(s).rank+=r})})}function Bx(e,t,n,r){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=r),Rh(e,"border",o,t)}function Ah(e){return de.max(de.map(e.nodes(),function(t){var n=e.node(t).rank;if(!de.isUndefined(n))return n}))}function Fx(e,t){var n={lhs:[],rhs:[]};return de.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function $x(e,t){var n=de.now();try{return t()}finally{console.log(e+" time: "+(de.now()-n)+"ms")}}function Hx(e,t){return t()}var kh=ye,Ux=De,zx={run:Yx,undo:Wx};function Yx(e){e.graph().dummyChains=[],kh.forEach(e.edges(),function(t){jx(e,t)})}function jx(e,t){var n=t.v,r=e.node(n).rank,o=t.w,a=e.node(o).rank,i=t.name,s=e.edge(t),l=s.labelRank;if(a!==r+1){e.removeEdge(t);var d,c,f;for(f=0,++r;r<a;++f,++r)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:t,rank:r},d=Ux.addDummyNode(e,"edge",c,"_d"),r===l&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),e.setEdge(n,d,{weight:s.weight},i),f===0&&e.graph().dummyChains.push(d),n=d;e.setEdge(n,o,{weight:s.weight},i)}}function Wx(e){kh.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,o;for(e.setEdge(n.edgeObj,r);n.dummy;)o=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=o,n=e.node(t)})}var Fr=ye,qa={longestPath:Gx,slack:Kx};function Gx(e){var t={};function n(r){var o=e.node(r);if(Fr.has(t,r))return o.rank;t[r]=!0;var a=Fr.min(Fr.map(e.outEdges(r),function(i){return n(i.w)-e.edge(i).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),o.rank=a}Fr.forEach(e.sources(),n)}function Kx(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var ya=ye,Qx=Ze.Graph,va=qa.slack,Lh=Xx;function Xx(e){var t=new Qx({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var o,a;Zx(t,e)<r;)o=Jx(t,e),a=t.hasNode(o.v)?va(e,o):-va(e,o),eT(t,e,a);return t}function Zx(e,t){function n(r){ya.forEach(t.nodeEdges(r),function(o){var a=o.v,i=r===a?o.w:a;!e.hasNode(i)&&!va(t,o)&&(e.setNode(i,{}),e.setEdge(r,i,{}),n(i))})}return ya.forEach(e.nodes(),n),e.nodeCount()}function Jx(e,t){return ya.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return va(t,n)})}function eT(e,t,n){ya.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var St=ye,tT=Lh,nT=qa.slack,rT=qa.longestPath,oT=Ze.alg.preorder,aT=Ze.alg.postorder,iT=De.simplify,sT=Jt;Jt.initLowLimValues=Rl;Jt.initCutValues=Il;Jt.calcCutValue=qh;Jt.leaveEdge=Ph;Jt.enterEdge=Mh;Jt.exchangeEdges=Vh;function Jt(e){e=iT(e),rT(e);var t=tT(e);Rl(t),Il(t,e);for(var n,r;n=Ph(t);)r=Mh(t,e,n),Vh(t,e,n,r)}function Il(e,t){var n=aT(e,e.nodes());n=n.slice(0,n.length-1),St.forEach(n,function(r){lT(e,t,r)})}function lT(e,t,n){var r=e.node(n),o=r.parent;e.edge(n,o).cutvalue=qh(e,t,n)}function qh(e,t,n){var r=e.node(n),o=r.parent,a=!0,i=t.edge(n,o),s=0;return i||(a=!1,i=t.edge(o,n)),s=i.weight,St.forEach(t.nodeEdges(n),function(l){var d=l.v===n,c=d?l.w:l.v;if(c!==o){var f=d===a,p=t.edge(l).weight;if(s+=f?p:-p,dT(e,n,c)){var g=e.edge(n,c).cutvalue;s+=f?-g:g}}}),s}function Rl(e,t){arguments.length<2&&(t=e.nodes()[0]),Dh(e,{},1,t)}function Dh(e,t,n,r,o){var a=n,i=e.node(r);return t[r]=!0,St.forEach(e.neighbors(r),function(s){St.has(t,s)||(n=Dh(e,t,n,s,r))}),i.low=a,i.lim=n++,o?i.parent=o:delete i.parent,n}function Ph(e){return St.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Mh(e,t,n){var r=n.v,o=n.w;t.hasEdge(r,o)||(r=n.w,o=n.v);var a=e.node(r),i=e.node(o),s=a,l=!1;a.lim>i.lim&&(s=i,l=!0);var d=St.filter(t.edges(),function(c){return l===Tu(e,e.node(c.v),s)&&l!==Tu(e,e.node(c.w),s)});return St.minBy(d,function(c){return nT(t,c)})}function Vh(e,t,n,r){var o=n.v,a=n.w;e.removeEdge(o,a),e.setEdge(r.v,r.w,{}),Rl(e),Il(e,t),cT(e,t)}function cT(e,t){var n=St.find(e.nodes(),function(o){return!t.node(o).parent}),r=oT(e,n);r=r.slice(1),St.forEach(r,function(o){var a=e.node(o).parent,i=t.edge(o,a),s=!1;i||(i=t.edge(a,o),s=!0),t.node(o).rank=t.node(a).rank+(s?i.minlen:-i.minlen)})}function dT(e,t,n){return e.hasEdge(t,n)}function Tu(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var uT=qa,Bh=uT.longestPath,fT=Lh,pT=sT,hT=mT;function mT(e){switch(e.graph().ranker){case"network-simplex":Ou(e);break;case"tight-tree":yT(e);break;case"longest-path":gT(e);break;default:Ou(e)}}var gT=Bh;function yT(e){Bh(e),fT(e)}function Ou(e){pT(e)}var $s=ye,vT=bT;function bT(e){var t=wT(e);$s.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),o=r.edgeObj,a=ST(e,t,o.v,o.w),i=a.path,s=a.lca,l=0,d=i[l],c=!0;n!==o.w;){if(r=e.node(n),c){for(;(d=i[l])!==s&&e.node(d).maxRank<r.rank;)l++;d===s&&(c=!1)}if(!c){for(;l<i.length-1&&e.node(d=i[l+1]).minRank<=r.rank;)l++;d=i[l]}e.setParent(n,d),n=e.successors(n)[0]}})}function ST(e,t,n,r){var o=[],a=[],i=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim),l,d;l=n;do l=e.parent(l),o.push(l);while(l&&(t[l].low>i||s>t[l].lim));for(d=l,l=r;(l=e.parent(l))!==d;)a.push(l);return{path:o.concat(a.reverse()),lca:d}}function wT(e){var t={},n=0;function r(o){var a=n;$s.forEach(e.children(o),r),t[o]={low:a,lim:n++}}return $s.forEach(e.children(),r),t}var gt=ye,Hs=De,CT={run:_T,cleanup:TT};function _T(e){var t=Hs.addDummyNode(e,"root",{},"_root"),n=ET(e),r=gt.max(gt.values(n))-1,o=2*r+1;e.graph().nestingRoot=t,gt.forEach(e.edges(),function(i){e.edge(i).minlen*=o});var a=xT(e)+1;gt.forEach(e.children(),function(i){Fh(e,t,o,a,r,n,i)}),e.graph().nodeRankFactor=o}function Fh(e,t,n,r,o,a,i){var s=e.children(i);if(!s.length){i!==t&&e.setEdge(t,i,{weight:0,minlen:n});return}var l=Hs.addBorderNode(e,"_bt"),d=Hs.addBorderNode(e,"_bb"),c=e.node(i);e.setParent(l,i),c.borderTop=l,e.setParent(d,i),c.borderBottom=d,gt.forEach(s,function(f){Fh(e,t,n,r,o,a,f);var p=e.node(f),g=p.borderTop?p.borderTop:f,h=p.borderBottom?p.borderBottom:f,m=p.borderTop?r:2*r,v=g!==h?1:o-a[i]+1;e.setEdge(l,g,{weight:m,minlen:v,nestingEdge:!0}),e.setEdge(h,d,{weight:m,minlen:v,nestingEdge:!0})}),e.parent(i)||e.setEdge(t,l,{weight:0,minlen:o+a[i]})}function ET(e){var t={};function n(r,o){var a=e.children(r);a&&a.length&&gt.forEach(a,function(i){n(i,o+1)}),t[r]=o}return gt.forEach(e.children(),function(r){n(r,1)}),t}function xT(e){return gt.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function TT(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,gt.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var ds=ye,OT=De,NT=IT;function IT(e){function t(n){var r=e.children(n),o=e.node(n);if(r.length&&ds.forEach(r,t),ds.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var a=o.minRank,i=o.maxRank+1;a<i;++a)Nu(e,"borderLeft","_bl",n,o,a),Nu(e,"borderRight","_br",n,o,a)}}ds.forEach(e.children(),t)}function Nu(e,t,n,r,o,a){var i={width:0,height:0,rank:a,borderType:t},s=o[t][a-1],l=OT.addDummyNode(e,"border",i,n);o[t][a]=l,e.setParent(l,r),s&&e.setEdge(s,l,{weight:1})}var nt=ye,RT={adjust:AT,undo:kT};function AT(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&$h(e)}function kT(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&LT(e),(t==="lr"||t==="rl")&&(qT(e),$h(e))}function $h(e){nt.forEach(e.nodes(),function(t){Iu(e.node(t))}),nt.forEach(e.edges(),function(t){Iu(e.edge(t))})}function Iu(e){var t=e.width;e.width=e.height,e.height=t}function LT(e){nt.forEach(e.nodes(),function(t){us(e.node(t))}),nt.forEach(e.edges(),function(t){var n=e.edge(t);nt.forEach(n.points,us),nt.has(n,"y")&&us(n)})}function us(e){e.y=-e.y}function qT(e){nt.forEach(e.nodes(),function(t){fs(e.node(t))}),nt.forEach(e.edges(),function(t){var n=e.edge(t);nt.forEach(n.points,fs),nt.has(n,"x")&&fs(n)})}function fs(e){var t=e.x;e.x=e.y,e.y=t}var ut=ye,DT=PT;function PT(e){var t={},n=ut.filter(e.nodes(),function(s){return!e.children(s).length}),r=ut.max(ut.map(n,function(s){return e.node(s).rank})),o=ut.map(ut.range(r+1),function(){return[]});function a(s){if(!ut.has(t,s)){t[s]=!0;var l=e.node(s);o[l.rank].push(s),ut.forEach(e.successors(s),a)}}var i=ut.sortBy(n,function(s){return e.node(s).rank});return ut.forEach(i,a),o}var Et=ye,MT=VT;function VT(e,t){for(var n=0,r=1;r<t.length;++r)n+=BT(e,t[r-1],t[r]);return n}function BT(e,t,n){for(var r=Et.zipObject(n,Et.map(n,function(d,c){return c})),o=Et.flatten(Et.map(t,function(d){return Et.sortBy(Et.map(e.outEdges(d),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var i=2*a-1;a-=1;var s=Et.map(new Array(i),function(){return 0}),l=0;return Et.forEach(o.forEach(function(d){var c=d.pos+a;s[c]+=d.weight;for(var f=0;c>0;)c%2&&(f+=s[c+1]),c=c-1>>1,s[c]+=d.weight;l+=d.weight*f})),l}var Ru=ye,FT=$T;function $T(e,t){return Ru.map(t,function(n){var r=e.inEdges(n);if(r.length){var o=Ru.reduce(r,function(a,i){var s=e.edge(i),l=e.node(i.v);return{sum:a.sum+s.weight*l.order,weight:a.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:n}})}var Pe=ye,HT=UT;function UT(e,t){var n={};Pe.forEach(e,function(o,a){var i=n[o.v]={indegree:0,in:[],out:[],vs:[o.v],i:a};Pe.isUndefined(o.barycenter)||(i.barycenter=o.barycenter,i.weight=o.weight)}),Pe.forEach(t.edges(),function(o){var a=n[o.v],i=n[o.w];!Pe.isUndefined(a)&&!Pe.isUndefined(i)&&(i.indegree++,a.out.push(n[o.w]))});var r=Pe.filter(n,function(o){return!o.indegree});return zT(r)}function zT(e){var t=[];function n(a){return function(i){i.merged||(Pe.isUndefined(i.barycenter)||Pe.isUndefined(a.barycenter)||i.barycenter>=a.barycenter)&&YT(a,i)}}function r(a){return function(i){i.in.push(a),--i.indegree===0&&e.push(i)}}for(;e.length;){var o=e.pop();t.push(o),Pe.forEach(o.in.reverse(),n(o)),Pe.forEach(o.out,r(o))}return Pe.map(Pe.filter(t,function(a){return!a.merged}),function(a){return Pe.pick(a,["vs","i","barycenter","weight"])})}function YT(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var Pn=ye,jT=De,WT=GT;function GT(e,t){var n=jT.partition(e,function(c){return Pn.has(c,"barycenter")}),r=n.lhs,o=Pn.sortBy(n.rhs,function(c){return-c.i}),a=[],i=0,s=0,l=0;r.sort(KT(!!t)),l=Au(a,o,l),Pn.forEach(r,function(c){l+=c.vs.length,a.push(c.vs),i+=c.barycenter*c.weight,s+=c.weight,l=Au(a,o,l)});var d={vs:Pn.flatten(a,!0)};return s&&(d.barycenter=i/s,d.weight=s),d}function Au(e,t,n){for(var r;t.length&&(r=Pn.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function KT(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var It=ye,QT=FT,XT=HT,ZT=WT,JT=Hh;function Hh(e,t,n,r){var o=e.children(t),a=e.node(t),i=a?a.borderLeft:void 0,s=a?a.borderRight:void 0,l={};i&&(o=It.filter(o,function(h){return h!==i&&h!==s}));var d=QT(e,o);It.forEach(d,function(h){if(e.children(h.v).length){var m=Hh(e,h.v,n,r);l[h.v]=m,It.has(m,"barycenter")&&tO(h,m)}});var c=XT(d,n);eO(c,l);var f=ZT(c,r);if(i&&(f.vs=It.flatten([i,f.vs,s],!0),e.predecessors(i).length)){var p=e.node(e.predecessors(i)[0]),g=e.node(e.predecessors(s)[0]);It.has(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+p.order+g.order)/(f.weight+2),f.weight+=2}return f}function eO(e,t){It.forEach(e,function(n){n.vs=It.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function tO(e,t){It.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var Mn=ye,nO=Ze.Graph,rO=oO;function oO(e,t,n){var r=aO(e),o=new nO({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(a){return e.node(a)});return Mn.forEach(e.nodes(),function(a){var i=e.node(a),s=e.parent(a);(i.rank===t||i.minRank<=t&&t<=i.maxRank)&&(o.setNode(a),o.setParent(a,s||r),Mn.forEach(e[n](a),function(l){var d=l.v===a?l.w:l.v,c=o.edge(d,a),f=Mn.isUndefined(c)?0:c.weight;o.setEdge(d,a,{weight:e.edge(l).weight+f})}),Mn.has(i,"minRank")&&o.setNode(a,{borderLeft:i.borderLeft[t],borderRight:i.borderRight[t]}))}),o}function aO(e){for(var t;e.hasNode(t=Mn.uniqueId("_root")););return t}var iO=ye,sO=lO;function lO(e,t,n){var r={},o;iO.forEach(n,function(a){for(var i=e.parent(a),s,l;i;){if(s=e.parent(i),s?(l=r[s],r[s]=i):(l=o,o=i),l&&l!==i){t.setEdge(l,i);return}i=s}})}var At=ye,cO=DT,dO=MT,uO=JT,fO=rO,pO=sO,hO=Ze.Graph,ku=De,mO=gO;function gO(e){var t=ku.maxRank(e),n=Lu(e,At.range(1,t+1),"inEdges"),r=Lu(e,At.range(t-1,-1,-1),"outEdges"),o=cO(e);qu(e,o);for(var a=Number.POSITIVE_INFINITY,i,s=0,l=0;l<4;++s,++l){yO(s%2?n:r,s%4>=2),o=ku.buildLayerMatrix(e);var d=dO(e,o);d<a&&(l=0,i=At.cloneDeep(o),a=d)}qu(e,i)}function Lu(e,t,n){return At.map(t,function(r){return fO(e,r,n)})}function yO(e,t){var n=new hO;At.forEach(e,function(r){var o=r.graph().root,a=uO(r,o,n,t);At.forEach(a.vs,function(i,s){r.node(i).order=s}),pO(r,n,a.vs)})}function qu(e,t){At.forEach(t,function(n){At.forEach(n,function(r,o){e.node(r).order=o})})}var X=ye,vO=Ze.Graph,bO=De,SO={positionX:_O,findType1Conflicts:Uh,findType2Conflicts:zh,addConflict:Al,hasConflict:Yh,verticalAlignment:jh,horizontalCompaction:Wh,alignCoordinates:Kh,findSmallestWidthAlignment:Gh,balance:Qh};function Uh(e,t){var n={};function r(o,a){var i=0,s=0,l=o.length,d=X.last(a);return X.forEach(a,function(c,f){var p=wO(e,c),g=p?e.node(p).order:l;(p||c===d)&&(X.forEach(a.slice(s,f+1),function(h){X.forEach(e.predecessors(h),function(m){var v=e.node(m),b=v.order;(b<i||g<b)&&!(v.dummy&&e.node(h).dummy)&&Al(n,m,h)})}),s=f+1,i=g)}),a}return X.reduce(t,r),n}function zh(e,t){var n={};function r(a,i,s,l,d){var c;X.forEach(X.range(i,s),function(f){c=a[f],e.node(c).dummy&&X.forEach(e.predecessors(c),function(p){var g=e.node(p);g.dummy&&(g.order<l||g.order>d)&&Al(n,p,c)})})}function o(a,i){var s=-1,l,d=0;return X.forEach(i,function(c,f){if(e.node(c).dummy==="border"){var p=e.predecessors(c);p.length&&(l=e.node(p[0]).order,r(i,d,f,s,l),d=f,s=l)}r(i,d,i.length,l,a.length)}),i}return X.reduce(t,o),n}function wO(e,t){if(e.node(t).dummy)return X.find(e.predecessors(t),function(n){return e.node(n).dummy})}function Al(e,t,n){if(t>n){var r=t;t=n,n=r}var o=e[t];o||(e[t]=o={}),o[n]=!0}function Yh(e,t,n){if(t>n){var r=t;t=n,n=r}return X.has(e[t],n)}function jh(e,t,n,r){var o={},a={},i={};return X.forEach(t,function(s){X.forEach(s,function(l,d){o[l]=l,a[l]=l,i[l]=d})}),X.forEach(t,function(s){var l=-1;X.forEach(s,function(d){var c=r(d);if(c.length){c=X.sortBy(c,function(m){return i[m]});for(var f=(c.length-1)/2,p=Math.floor(f),g=Math.ceil(f);p<=g;++p){var h=c[p];a[d]===d&&l<i[h]&&!Yh(n,d,h)&&(a[h]=d,a[d]=o[d]=o[h],l=i[h])}}})}),{root:o,align:a}}function Wh(e,t,n,r,o){var a={},i=CO(e,t,n,o),s=o?"borderLeft":"borderRight";function l(f,p){for(var g=i.nodes(),h=g.pop(),m={};h;)m[h]?f(h):(m[h]=!0,g.push(h),g=g.concat(p(h))),h=g.pop()}function d(f){a[f]=i.inEdges(f).reduce(function(p,g){return Math.max(p,a[g.v]+i.edge(g))},0)}function c(f){var p=i.outEdges(f).reduce(function(h,m){return Math.min(h,a[m.w]-i.edge(m))},Number.POSITIVE_INFINITY),g=e.node(f);p!==Number.POSITIVE_INFINITY&&g.borderType!==s&&(a[f]=Math.max(a[f],p))}return l(d,i.predecessors.bind(i)),l(c,i.successors.bind(i)),X.forEach(r,function(f){a[f]=a[n[f]]}),a}function CO(e,t,n,r){var o=new vO,a=e.graph(),i=EO(a.nodesep,a.edgesep,r);return X.forEach(t,function(s){var l;X.forEach(s,function(d){var c=n[d];if(o.setNode(c),l){var f=n[l],p=o.edge(f,c);o.setEdge(f,c,Math.max(i(e,d,l),p||0))}l=d})}),o}function Gh(e,t){return X.minBy(X.values(t),function(n){var r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return X.forIn(n,function(a,i){var s=xO(e,i)/2;r=Math.max(a+s,r),o=Math.min(a-s,o)}),r-o})}function Kh(e,t){var n=X.values(t),r=X.min(n),o=X.max(n);X.forEach(["u","d"],function(a){X.forEach(["l","r"],function(i){var s=a+i,l=e[s],d;if(l!==t){var c=X.values(l);d=i==="l"?r-X.min(c):o-X.max(c),d&&(e[s]=X.mapValues(l,function(f){return f+d}))}})})}function Qh(e,t){return X.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var o=X.sortBy(X.map(e,r));return(o[1]+o[2])/2})}function _O(e){var t=bO.buildLayerMatrix(e),n=X.merge(Uh(e,t),zh(e,t)),r={},o;X.forEach(["u","d"],function(i){o=i==="u"?t:X.values(t).reverse(),X.forEach(["l","r"],function(s){s==="r"&&(o=X.map(o,function(f){return X.values(f).reverse()}));var l=(i==="u"?e.predecessors:e.successors).bind(e),d=jh(e,o,n,l),c=Wh(e,o,d.root,d.align,s==="r");s==="r"&&(c=X.mapValues(c,function(f){return-f})),r[i+s]=c})});var a=Gh(e,r);return Kh(r,a),Qh(r,e.graph().align)}function EO(e,t,n){return function(r,o,a){var i=r.node(o),s=r.node(a),l=0,d;if(l+=i.width/2,X.has(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":d=-i.width/2;break;case"r":d=i.width/2;break}if(d&&(l+=n?d:-d),d=0,l+=(i.dummy?t:e)/2,l+=(s.dummy?t:e)/2,l+=s.width/2,X.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":d=s.width/2;break;case"r":d=-s.width/2;break}return d&&(l+=n?d:-d),d=0,l}}function xO(e,t){return e.node(t).width}var Vn=ye,Xh=De,TO=SO.positionX,OO=NO;function NO(e){e=Xh.asNonCompoundGraph(e),IO(e),Vn.forEach(TO(e),function(t,n){e.node(n).x=t})}function IO(e){var t=Xh.buildLayerMatrix(e),n=e.graph().ranksep,r=0;Vn.forEach(t,function(o){var a=Vn.max(Vn.map(o,function(i){return e.node(i).height}));Vn.forEach(o,function(i){e.node(i).y=r+a/2}),r+=a+n})}var te=ye,Du=Ox,Pu=zx,RO=hT,AO=De.normalizeRanks,kO=vT,LO=De.removeEmptyRanks,Mu=CT,qO=NT,Vu=RT,DO=mO,PO=OO,Dt=De,MO=Ze.Graph,VO=BO;function BO(e,t){var n=t&&t.debugTiming?Dt.time:Dt.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return QO(e)});n("  runLayout",function(){FO(r,n)}),n("  updateInputGraph",function(){$O(e,r)})})}function FO(e,t){t("    makeSpaceForEdgeLabels",function(){XO(e)}),t("    removeSelfEdges",function(){iN(e)}),t("    acyclic",function(){Du.run(e)}),t("    nestingGraph.run",function(){Mu.run(e)}),t("    rank",function(){RO(Dt.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){ZO(e)}),t("    removeEmptyRanks",function(){LO(e)}),t("    nestingGraph.cleanup",function(){Mu.cleanup(e)}),t("    normalizeRanks",function(){AO(e)}),t("    assignRankMinMax",function(){JO(e)}),t("    removeEdgeLabelProxies",function(){eN(e)}),t("    normalize.run",function(){Pu.run(e)}),t("    parentDummyChains",function(){kO(e)}),t("    addBorderSegments",function(){qO(e)}),t("    order",function(){DO(e)}),t("    insertSelfEdges",function(){sN(e)}),t("    adjustCoordinateSystem",function(){Vu.adjust(e)}),t("    position",function(){PO(e)}),t("    positionSelfEdges",function(){lN(e)}),t("    removeBorderNodes",function(){aN(e)}),t("    normalize.undo",function(){Pu.undo(e)}),t("    fixupEdgeLabelCoords",function(){rN(e)}),t("    undoCoordinateSystem",function(){Vu.undo(e)}),t("    translateGraph",function(){tN(e)}),t("    assignNodeIntersects",function(){nN(e)}),t("    reversePoints",function(){oN(e)}),t("    acyclic.undo",function(){Du.undo(e)})}function $O(e,t){te.forEach(e.nodes(),function(n){var r=e.node(n),o=t.node(n);r&&(r.x=o.x,r.y=o.y,t.children(n).length&&(r.width=o.width,r.height=o.height))}),te.forEach(e.edges(),function(n){var r=e.edge(n),o=t.edge(n);r.points=o.points,te.has(o,"x")&&(r.x=o.x,r.y=o.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var HO=["nodesep","edgesep","ranksep","marginx","marginy"],UO={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},zO=["acyclicer","ranker","rankdir","align"],YO=["width","height"],jO={width:0,height:0},WO=["minlen","weight","width","height","labeloffset"],GO={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},KO=["labelpos"];function QO(e){var t=new MO({multigraph:!0,compound:!0}),n=hs(e.graph());return t.setGraph(te.merge({},UO,ps(n,HO),te.pick(n,zO))),te.forEach(e.nodes(),function(r){var o=hs(e.node(r));t.setNode(r,te.defaults(ps(o,YO),jO)),t.setParent(r,e.parent(r))}),te.forEach(e.edges(),function(r){var o=hs(e.edge(r));t.setEdge(r,te.merge({},GO,ps(o,WO),te.pick(o,KO)))}),t}function XO(e){var t=e.graph();t.ranksep/=2,te.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function ZO(e){te.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),o=e.node(t.w),a={rank:(o.rank-r.rank)/2+r.rank,e:t};Dt.addDummyNode(e,"edge-proxy",a,"_ep")}})}function JO(e){var t=0;te.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=te.max(t,r.maxRank))}),e.graph().maxRank=t}function eN(e){te.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function tN(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,o=0,a=e.graph(),i=a.marginx||0,s=a.marginy||0;function l(d){var c=d.x,f=d.y,p=d.width,g=d.height;t=Math.min(t,c-p/2),n=Math.max(n,c+p/2),r=Math.min(r,f-g/2),o=Math.max(o,f+g/2)}te.forEach(e.nodes(),function(d){l(e.node(d))}),te.forEach(e.edges(),function(d){var c=e.edge(d);te.has(c,"x")&&l(c)}),t-=i,r-=s,te.forEach(e.nodes(),function(d){var c=e.node(d);c.x-=t,c.y-=r}),te.forEach(e.edges(),function(d){var c=e.edge(d);te.forEach(c.points,function(f){f.x-=t,f.y-=r}),te.has(c,"x")&&(c.x-=t),te.has(c,"y")&&(c.y-=r)}),a.width=n-t+i,a.height=o-r+s}function nN(e){te.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),o=e.node(t.w),a,i;n.points?(a=n.points[0],i=n.points[n.points.length-1]):(n.points=[],a=o,i=r),n.points.unshift(Dt.intersectRect(r,a)),n.points.push(Dt.intersectRect(o,i))})}function rN(e){te.forEach(e.edges(),function(t){var n=e.edge(t);if(te.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function oN(e){te.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function aN(e){te.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),o=e.node(n.borderBottom),a=e.node(te.last(n.borderLeft)),i=e.node(te.last(n.borderRight));n.width=Math.abs(i.x-a.x),n.height=Math.abs(o.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}}),te.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function iN(e){te.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function sN(e){var t=Dt.buildLayerMatrix(e);te.forEach(t,function(n){var r=0;te.forEach(n,function(o,a){var i=e.node(o);i.order=a+r,te.forEach(i.selfEdges,function(s){Dt.addDummyNode(e,"selfedge",{width:s.label.width,height:s.label.height,rank:i.rank,order:a+ ++r,e:s.e,label:s.label},"_se")}),delete i.selfEdges})})}function lN(e){te.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),o=r.x+r.width/2,a=r.y,i=n.x-o,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:o+2*i/3,y:a-s},{x:o+5*i/6,y:a-s},{x:o+i,y:a},{x:o+5*i/6,y:a+s},{x:o+2*i/3,y:a+s}],n.label.x=n.x,n.label.y=n.y}})}function ps(e,t){return te.mapValues(te.pick(e,t),Number)}function hs(e){var t={};return te.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var $r=ye,cN=De,dN=Ze.Graph,uN={debugOrdering:fN};function fN(e){var t=cN.buildLayerMatrix(e),n=new dN({compound:!0,multigraph:!0}).setGraph({});return $r.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),$r.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),$r.forEach(t,function(r,o){var a="layer"+o;n.setNode(a,{rank:"same"}),$r.reduce(r,function(i,s){return n.setEdge(i,s,{style:"invis"}),s})}),n}var pN="0.8.5",Zh={graphlib:Ze,layout:VO,debug:uN,util:{time:De.time,notime:De.notime},version:pN},Bu=function(t){return t.reduce(function(n,r){var o=r[0],a=r[1];return n[o]=a,n},{})},Fu=typeof window<"u"&&window.document&&window.document.createElement?T.exports.useLayoutEffect:T.exports.useEffect;function hN(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},o=t.attributes[n]||{},a=t.elements[n];!Lf(a)||!qf(a)||(Object.assign(a.style,r),Object.keys(o).forEach(function(i){var s=o[i];s===!1?a.removeAttribute(i):a.setAttribute(i,s===!0?"":s)}))})}function mN(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var o=t.elements[r],a=t.attributes[r]||{},i=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),s=i.reduce(function(l,d){return l[d]="",l},{});!Lf(o)||!qf(o)||(Object.assign(o.style,s),Object.keys(a).forEach(function(l){o.removeAttribute(l)}))})}}const gN={name:"applyStyles",enabled:!0,phase:"write",fn:hN,effect:mN,requires:["computeStyles"]};var yN=[Qy,Xy,Zy,gN,Jy,ev,tv,nv,rv],vN=Ky({defaultModifiers:yN}),bN=typeof Element<"u",SN=typeof Map=="function",wN=typeof Set=="function",CN=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function oo(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,o;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!oo(e[r],t[r]))return!1;return!0}var a;if(SN&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a=e.entries();!(r=a.next()).done;)if(!t.has(r.value[0]))return!1;for(a=e.entries();!(r=a.next()).done;)if(!oo(r.value[1],t.get(r.value[0])))return!1;return!0}if(wN&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a=e.entries();!(r=a.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(CN&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[r]))return!1;if(bN&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((o[r]==="_owner"||o[r]==="__v"||o[r]==="__o")&&e.$$typeof)&&!oo(e[o[r]],t[o[r]]))return!1;return!0}return e!==e&&t!==t}var _N=function(t,n){try{return oo(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}},EN=[],xN=function(t,n,r){r===void 0&&(r={});var o=T.exports.useRef(null),a={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||EN},i=T.exports.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=i[0],l=i[1],d=T.exports.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(g){var h=g.state,m=Object.keys(h.elements);Gy.exports.flushSync(function(){l({styles:Bu(m.map(function(v){return[v,h.styles[v]||{}]})),attributes:Bu(m.map(function(v){return[v,h.attributes[v]]}))})})},requires:["computeStyles"]}},[]),c=T.exports.useMemo(function(){var p={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[d,{name:"applyStyles",enabled:!1}])};return _N(o.current,p)?o.current||p:(o.current=p,p)},[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,d]),f=T.exports.useRef();return Fu(function(){f.current&&f.current.setOptions(c)},[c]),Fu(function(){if(!(t==null||n==null)){var p=r.createPopper||vN,g=p(t,n,c);return f.current=g,function(){g.destroy(),f.current=null}}},[t,n,r.createPopper]),{state:f.current?f.current.state:null,styles:s.styles,attributes:s.attributes,update:f.current?f.current.update:null,forceUpdate:f.current?f.current.forceUpdate:null}};const ao=({children:e,contentProps:t,placement:n,showCloseButton:r=!0,actionButton:o,strategy:a,style:i})=>{var C;n=n!=null?n:"bottom-start";const[s,l]=T.exports.useState(!1),[d,c]=T.exports.useState(null),[f,p]=T.exports.useState(null),[g,h]=T.exports.useState(null),{styles:m,attributes:v}=xN(d,f,{placement:n,strategy:a,modifiers:[{name:"arrow",options:{element:g}},{name:"offset",options:{offset:[0,10]}}]}),b=u(Df,{in:s,timeout:200,classNames:"fade-in-out",mountOnEnter:!0,children:N("div",{className:"Tooltip SRC-popover bootstrap-4-backport",style:{...i,...m.popper},ref:p,...v.popper,children:[u(vt,{variant:"body1",children:u(Ve,{...t})}),N("div",{className:"TooltipButtonContainer",children:[o&&u(be,{variant:(C=o.variant)!=null?C:"primary-500",className:"pill",onClick:()=>{o.onClick(),o.closePopoverOnClick&&l(!1)},children:o.content}),r&&u(be,{variant:"light",className:"pill",onClick:()=>l(!1),children:"Close"})]}),u("div",{className:"arrow","data-popper-arrow":!0,ref:h,style:m.arrow})]})});return N(U,{children:[u("span",{role:"button",className:"PopoverContainer bootstrap-4-backport",onClick:()=>l(S=>!S),ref:c,children:e}),b]})};try{ao.displayName="MarkdownPopover",ao.__docgenInfo={description:"",displayName:"MarkdownPopover",props:{contentProps:{defaultValue:null,description:"",name:"contentProps",required:!0,type:{name:"MarkdownSynapseProps"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},placement:{defaultValue:null,description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"bottom"'},{value:'"right"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},actionButton:{defaultValue:null,description:"",name:"actionButton",required:!1,type:{name:"{ content: ReactElement<any, string | JSXElementConstructor<any>>; variant: string; onClick: () => void; closePopoverOnClick: boolean; }"}},strategy:{defaultValue:null,description:"",name:"strategy",required:!1,type:{name:"enum",value:[{value:'"absolute"'},{value:'"fixed"'}]}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/MarkdownPopover.tsx#MarkdownPopover"]={docgenInfo:ao.__docgenInfo,name:"MarkdownPopover",path:"src/lib/containers/MarkdownPopover.tsx#MarkdownPopover"})}catch{}const kt=({markdownText:e,helpUrl:t,placement:n="bottom",showCloseButton:r=!0,className:o=""})=>u(U,{children:u(ao,{contentProps:{markdown:e},placement:n,actionButton:t?{content:u(U,{children:"More info"}),closePopoverOnClick:!0,onClick:()=>window.open(t,"_blank"),variant:"primary"}:void 0,showCloseButton:r,strategy:"fixed",style:{maxWidth:"350px"},children:u(dy,{className:`HelpButton ${o}`})})});try{kt.displayName="HelpPopover",kt.__docgenInfo={description:"",displayName:"HelpPopover",props:{markdownText:{defaultValue:null,description:"",name:"markdownText",required:!0,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}},placement:{defaultValue:{value:"bottom"},description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"bottom"'},{value:'"right"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HelpPopover.tsx#HelpPopover"]={docgenInfo:kt.__docgenInfo,name:"HelpPopover",path:"src/lib/containers/HelpPopover.tsx#HelpPopover"})}catch{}const TN=()=>N(U,{children:[u(vt,{variant:"smallText1",className:"description",children:"Undefined"}),u(kt,{placement:"top",markdownText:"Provenance tracks the relationship  between data, code and analytical results.",helpUrl:"https://help.synapse.org/docs/Provenance.1972470373.html"})]}),io=e=>{const t=e.targetVersionNumber?`.${e.targetVersionNumber}`:"",n=`${e.targetId}${t}`;return T.exports.useMemo(()=>N(U,{children:[u("div",{children:u(he,{options:{icon:"fileOutlined"}})}),u("span",{children:n})]}),[n])};try{io.displayName="EntityPlaceholderNodeLabel",io.__docgenInfo={description:"This node type is used if the user cannot access the entity for some reason",displayName:"EntityPlaceholderNodeLabel",props:{targetId:{defaultValue:null,description:"",name:"targetId",required:!0,type:{name:"string"}},targetVersionNumber:{defaultValue:null,description:"",name:"targetVersionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/EntityPlaceholderNodeLabel.tsx#EntityPlaceholderNodeLabel"]={docgenInfo:io.__docgenInfo,name:"EntityPlaceholderNodeLabel",path:"src/lib/containers/provenance/EntityPlaceholderNodeLabel.tsx#EntityPlaceholderNodeLabel"})}catch{}var Ne=(e=>(e.ENTITY="EntityNode",e.ENTITY_PLACEHOLDER="EntityPlaceholderNode",e.EXTERNAL="ExternalNode",e.ACTIVITY="ActivityNode",e.EXPAND="ExpandNode",e.UNDEFINED="UndefinedNode",e))(Ne||{});const $n=e=>{const{type:t,data:n}=e;let r;switch(t){case"EntityNode":r=u(eo,{...n});break;case"EntityPlaceholderNode":r=u(io,{...n});break;case"ExternalNode":r=u(ro,{...n});break;case"ActivityNode":r=u(Zr,{...n});break;case"ExpandNode":r=u(to,{...n});break;case"UndefinedNode":r=u(TN,{});break;default:r=N("p",{children:["Unrecognized node type: ",t]});break}const o={label:r,props:n,type:t};return{id:ot(e),position:{x:100,y:100},data:o,connectable:!1,draggable:!1,className:`${t}`}},Jh=(e,t)=>{const n=ot(e),r=ot(t);return{id:`${n}-${r}`,source:n,target:r,animated:!0,type:pt.SimpleBezier,markerEnd:{type:ur.ArrowClosed}}},ot=e=>{var r,o,a,i;const{type:t,data:n}=e;switch(t){case"EntityNode":return`${n.id}.${(r=n.versionNumber)!=null?r:"latest"}`;case"EntityPlaceholderNode":return`${n.targetId}.${(o=n.targetVersionNumber)!=null?o:"latest"}`;case"ExternalNode":return`${n.url}`;case"ActivityNode":return`${n.id}`;case"ExpandNode":return`expand.node.${n.entityHeader.id}.${(a=n.entityHeader.versionNumber)!=null?a:"latest"}`;case"UndefinedNode":return`undefined.dummy.node.${n.id}.${(i=n.versionNumber)!=null?i:"latest"}`}},an=new Zh.graphlib.Graph;an.setDefaultEdgeLabel(()=>({}));const $u=e=>e.data.type=="ExpandNode"?30:100,Hu=e=>e.data.type=="ExpandNode"?30:172,ON=(e,t,n)=>{const r=n==="LR";return an.setGraph({rankdir:n}),e.forEach(o=>{an.setNode(o.id,{width:Hu(o),height:$u(o)})}),t.forEach(o=>{an.setEdge(o.source,o.target)}),Zh.layout(an),e.forEach(o=>{const a=an.node(o.id);return o.targetPosition=r?W.Left:W.Top,o.sourcePosition=r?W.Right:W.Bottom,o.position={x:a.x-Hu(o)/2,y:a.y-$u(o)/2},o}),{nodes:e,edges:t}},Uu=(e,t)=>ov(e,t,iv).length==0;try{$n.displayName="getProvenanceNode",$n.__docgenInfo={description:"",displayName:"getProvenanceNode",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceUtils.tsx#getProvenanceNode"]={docgenInfo:$n.__docgenInfo,name:"getProvenanceNode",path:"src/lib/containers/provenance/ProvenanceUtils.tsx#getProvenanceNode"})}catch{}try{ot.displayName="getNodeId",ot.__docgenInfo={description:"",displayName:"getNodeId",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceUtils.tsx#getNodeId"]={docgenInfo:ot.__docgenInfo,name:"getNodeId",path:"src/lib/containers/provenance/ProvenanceUtils.tsx#getNodeId"})}catch{}const NN="org.sagebionetworks.repo.model.provenance.UsedEntity",zu=e=>{const{entityHeader:t,rootEntityHeaders:n}=e;return(n==null?void 0:n.find(o=>t.id==o.id&&t.versionNumber==o.versionNumber))!==void 0},em=(e,t)=>t.find(r=>r.id===ot(e))===void 0,IN=(e,t)=>{const n={type:Ne.ENTITY,data:e};return t.find(r=>r.id===ot(n))},RN=(e,t,n)=>n.find(o=>o.source===ot(e)&&o.target===ot(t))===void 0,Cr=e=>{const{newNodeProps:t,existingNodeProps:n,nodesCopy:r,edgesCopy:o}=e;em(t,r)&&r.push($n(t)),RN(t,n,o)&&o.push(Jh(t,n))},AN=e=>{const{activity:t,entityHeader:n,nodesCopy:r,edgesCopy:o}=e,a={type:Ne.ACTIVITY,data:t},i={type:Ne.ENTITY,data:n};Cr({newNodeProps:a,existingNodeProps:i,nodesCopy:r,edgesCopy:o})},kN=e=>{const{entityHeader:t,itemCount:n=0,nodesCopy:r,edgesCopy:o}=e,a={type:Ne.EXPAND,data:{itemCount:n,entityHeader:t}},i={type:Ne.ENTITY,data:t};Cr({newNodeProps:a,existingNodeProps:i,nodesCopy:r,edgesCopy:o})},LN=e=>{const{ref:t,activity:n,nodesCopy:r,edgesCopy:o}=e,a={type:Ne.ENTITY_PLACEHOLDER,data:t},i={type:Ne.ACTIVITY,data:n};Cr({newNodeProps:a,existingNodeProps:i,nodesCopy:r,edgesCopy:o})},qN=e=>{const{entityHeader:t,nodesCopy:n,edgesCopy:r}=e,o={type:Ne.UNDEFINED,data:t},a={type:Ne.ENTITY,data:t};Cr({newNodeProps:o,existingNodeProps:a,nodesCopy:n,edgesCopy:r})},DN=e=>{const{usedURL:t,activity:n,nodesCopy:r,edgesCopy:o}=e,a={type:Ne.ACTIVITY,data:n},i={type:Ne.EXTERNAL,data:t};Cr({newNodeProps:i,existingNodeProps:a,nodesCopy:r,edgesCopy:o})},PN=e=>{const{entityHeader:t,activity:n,nodesCopy:r,edgesCopy:o}=e,a={type:Ne.ENTITY,data:t};if(em(a,r)&&(r.push($n(a)),n)){const i={type:Ne.ACTIVITY,data:n};o.push(Jh(a,i))}},ms=400,gs=.85,MN=e=>{const{entityRefs:t,containerHeight:n="200px",initialNodes:r=[],initialEdges:o=[],onNodesChangedListener:a,onEdgesChangedListener:i}=e,{accessToken:s}=le(),[l,d]=ge.useState(r),[c,f]=ge.useState(o),[p,g,h]=CE([]),[m,v,b]=_E([]),[C,S]=T.exports.useState(),y=Gm(),{data:w,isSuccess:_}=zv(t,{useErrorBoundary:!0});if(_&&w.totalNumberOfResults==0){const E=t.map(k=>k.targetId).join(",");y(`Unable to load provenance for the given Synapse IDs: ${E}`)}const x=w==null?void 0:w.results,[O,I]=ge.useState(!1),L=El(),D=T.exports.useCallback((E,k)=>{S(k)},[]),M=T.exports.useCallback(async E=>{var H;const{entityHeader:k,nodesCopy:R,edgesCopy:P,usedInActivity:B}=E;PN({entityHeader:k,activity:B,nodesCopy:R,edgesCopy:P});try{const F=await Wl(k.id,k.versionNumber,s);(!zu({entityHeader:k,rootEntityHeaders:x})||F.used&&F.used.length>=ms)&&kN({entityHeader:k,itemCount:(H=F.used)==null?void 0:H.length,nodesCopy:R,edgesCopy:P})}catch(F){console.error(F),zu({entityHeader:k,rootEntityHeaders:x})&&qN({entityHeader:k,nodesCopy:R,edgesCopy:P})}},[s,x]);T.exports.useEffect(()=>{!O&&p.length>0&&setTimeout(()=>{if(x){const E=IN(x[0],p);if(E){const k=L.getZoom(),R=k>gs?gs:k;L==null||L.setCenter(E.position.x+150,E.position.y-30,{zoom:R,duration:0})}I(!0)}})},[O,p,L,x]);const V=T.exports.useCallback(async E=>{const{entityHeader:k,nodesCopy:R,edgesCopy:P}=E;try{const B=await Wl(k.id,k.versionNumber,s);if(AN({activity:B,entityHeader:k,nodesCopy:R,edgesCopy:P}),B.used&&B.used.length<ms){const H=[];B.used.forEach(A=>{A.concreteType==NN?H.push(A.reference):DN({usedURL:A,activity:B,nodesCopy:R,edgesCopy:P})});const F=await Ws(H,s),{results:z}=F;H.filter(A=>z.find($=>$.id==A.targetId)==null).forEach(A=>{LN({ref:A,activity:B,nodesCopy:R,edgesCopy:P})});const q=[];z.forEach(A=>{q.push(M({entityHeader:A,nodesCopy:R,edgesCopy:P,usedInActivity:B}))}),await Promise.allSettled(q)}}catch(B){console.error(B)}},[s,M]);return T.exports.useEffect(()=>{if(x&&l.length==0){const E=[...l],k=[...c],R=[];x.forEach(P=>{const B=M({entityHeader:P,nodesCopy:E,edgesCopy:k});R.push(B);const H=V({entityHeader:P,nodesCopy:E,edgesCopy:k});R.push(H)}),Promise.allSettled(R).finally(()=>{d(E),f(k)})}},[M,y,V,x,t,c,l]),T.exports.useEffect(()=>{const E=C==null?void 0:C.data;if(C&&(E==null?void 0:E.type)==Ne.EXPAND){const k=E.props;if(k.itemCount>ms){Gt("Web visualization does not support expanding this many items at this time.","danger");return}else{E.label=u(qv,{size:30});const R=l.filter(H=>H.id!=C.id),P=Cl([C],c)[0],B=c.filter(H=>H!=P);V({entityHeader:k.entityHeader,nodesCopy:R,edgesCopy:B}).finally(()=>{d(R),f(B)})}S(void 0)}},[C,l,c,V]),T.exports.useEffect(()=>{const{nodes:E,edges:k}=ON(l,c,"TB");Uu(E,p)||(g(E),a&&a(E)),Uu(k,m)||(v(k),i&&i(k))},[l,c,p,m,g,v,O,L,t,a,i]),u("div",{className:"bootstrap-4-backport ProvenanceWidget",role:"graphics-doc",style:{width:"100%",height:n},children:u(dh,{defaultZoom:gs,nodes:p,edges:m,onNodeClick:D,onNodesChange:h,onEdgesChange:b,attributionPosition:"bottom-right",onConnect:void 0,children:u(n0,{})})})},so=e=>u(Wm,{children:u(uh,{children:u(MN,{...e})})}),VN=so;try{so.displayName="ProvenanceGraph",so.__docgenInfo={description:"",displayName:"ProvenanceGraph",props:{entityRefs:{defaultValue:null,description:"",name:"entityRefs",required:!0,type:{name:"ReferenceList"}},containerHeight:{defaultValue:null,description:"",name:"containerHeight",required:!1,type:{name:"string"}},initialNodes:{defaultValue:null,description:"",name:"initialNodes",required:!1,type:{name:"Node<any>[]"}},initialEdges:{defaultValue:null,description:"",name:"initialEdges",required:!1,type:{name:"Edge<any>[]"}},onNodesChangedListener:{defaultValue:null,description:"",name:"onNodesChangedListener",required:!1,type:{name:"((nodes: Node<any>[]) => void)"}},onEdgesChangedListener:{defaultValue:null,description:"",name:"onEdgesChangedListener",required:!1,type:{name:"((edges: Edge<any>[]) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceGraph.tsx#ProvenanceGraph"]={docgenInfo:so.__docgenInfo,name:"ProvenanceGraph",path:"src/lib/containers/provenance/ProvenanceGraph.tsx#ProvenanceGraph"})}catch{}function lo(e){const{entityList:t,displayHeightPx:n}=e,r=t.split(",").map(a=>{const i=a.split("/version/");return{targetId:i[0],targetVersionNumber:i.length>1?parseInt(i[1]):void 0}}),o=n?`${n}px`:void 0;return u(VN,{entityRefs:r,containerHeight:o})}try{lo.displayName="MarkdownProvenanceGraph",lo.__docgenInfo={description:"",displayName:"MarkdownProvenanceGraph",props:{entityList:{defaultValue:null,description:"",name:"entityList",required:!0,type:{name:"string"}},displayHeightPx:{defaultValue:null,description:"",name:"displayHeightPx",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownProvenanceGraph.tsx#MarkdownProvenanceGraph"]={docgenInfo:lo.__docgenInfo,name:"MarkdownProvenanceGraph",path:"src/lib/containers/markdown/widget/MarkdownProvenanceGraph.tsx#MarkdownProvenanceGraph"})}catch{}class Hn extends T.exports.Component{constructor(t){super(t),this.getEntity=this.getEntity.bind(this),this.getSynapseFiles=this.getSynapseFiles.bind(this),this.state={preSignedURL:""}}getEntity(){const{synapseId:t}=this.props;t&&Sa(this.context.accessToken,t).then(n=>{const r=[{associateObjectId:t,associateObjectType:Me.FileEntity,fileHandleId:n.dataFileHandleId}];this.getSynapseFiles(r,n.dataFileHandleId)})}getSynapseFiles(t,n){wn({includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:t},this.context.accessToken).then(o=>{const{preSignedURL:a}=o.requestedFiles.filter(i=>i.fileHandleId===n)[0];this.setState({preSignedURL:a})}).catch(o=>{console.error("Error on getting image ",o)})}componentDidMount(){if(!this.props.wikiId)this.getEntity();else{const{fileName:t,fileResults:n=[]}=this.props,{id:r}=n.filter(a=>a.fileName===t)[0],o=[{associateObjectId:this.props.wikiId,associateObjectType:Me.WikiAttachment,fileHandleId:r}];this.getSynapseFiles(o,r)}}render(){const{params:t}=this.props,{align:n="",altText:r="synapse image"}=t;let o="auto";t.scale&&t.scale!=="100"&&(o=`${Number(t.scale)}%`);const a=n.toLowerCase();let i="";a==="left"&&(i="floatLeft"),a==="right"&&(i="floatright"),a==="center"&&(i="align-center");let s={width:o,height:o};return this.state.preSignedURL?u(T.exports.Fragment,{children:u("img",{alt:r,className:"img-fluid  "+i,src:this.state.preSignedURL,style:s})}):null}}Hn.contextType=fr;const Yu=Hn;try{Hn.displayName="SynapseImage",Hn.__docgenInfo={description:"",displayName:"SynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},fileResults:{defaultValue:null,description:"",name:"fileResults",required:!1,type:{name:"FileHandle[]"}},params:{defaultValue:null,description:"",name:"params",required:!0,type:{name:"{ align: string; scale: string; responsive: string; altText: string; }"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/SynapseImage.tsx#SynapseImage"]={docgenInfo:Hn.__docgenInfo,name:"SynapseImage",path:"src/lib/containers/widgets/SynapseImage.tsx#SynapseImage"})}catch{}const mn=ge.createContext(void 0),co=({children:e,wikiContext:t})=>u(mn.Provider,{value:t,children:e}),ys=mn.Consumer;function tm(){const e=T.exports.useContext(mn);return e!=null?e:{}}try{mn.displayName="SynapseWikiContext",mn.__docgenInfo={description:"This must be exported to use the context in class components.",displayName:"SynapseWikiContext",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContext"]={docgenInfo:mn.__docgenInfo,name:"SynapseWikiContext",path:"src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContext"})}catch{}try{co.displayName="SynapseWikiContextProvider",co.__docgenInfo={description:"Provides context related to Synapse Wikis",displayName:"SynapseWikiContextProvider",props:{wikiContext:{defaultValue:null,description:"",name:"wikiContext",required:!1,type:{name:"SynapseWikiContextType"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextProvider"]={docgenInfo:co.__docgenInfo,name:"SynapseWikiContextProvider",path:"src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextProvider"})}catch{}try{ys.displayName="SynapseWikiContextConsumer",ys.__docgenInfo={description:"",displayName:"SynapseWikiContextConsumer",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextConsumer"]={docgenInfo:ys.__docgenInfo,name:"SynapseWikiContextConsumer",path:"src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextConsumer"})}catch{}function uo(e){const{wikiId:t,wikiPage:n,fileHandles:r}=tm();return e.fileName?r?u(Yu,{params:e,fileName:e.fileName,wikiId:t||(n==null?void 0:n.id),fileResults:r.list}):u(U,{}):e.synapseId?u(Yu,{params:e,synapseId:e.synapseId}):u(U,{})}try{uo.displayName="MarkdownSynapseImage",uo.__docgenInfo={description:"",displayName:"MarkdownSynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},align:{defaultValue:null,description:"",name:"align",required:!0,type:{name:"string"}},scale:{defaultValue:null,description:"",name:"scale",required:!0,type:{name:"string"}},responsive:{defaultValue:null,description:"",name:"responsive",required:!0,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownSynapseImage.tsx#MarkdownSynapseImage"]={docgenInfo:uo.__docgenInfo,name:"MarkdownSynapseImage",path:"src/lib/containers/markdown/widget/MarkdownSynapseImage.tsx#MarkdownSynapseImage"})}catch{}const BN=sv(lv);class Un extends T.exports.Component{constructor(t){super(t),this.state={isLoaded:!1,queryData:{}},this.fetchPlotlyData=this.fetchPlotlyData.bind(this),this.showPlot=this.showPlot.bind(this)}componentDidMount(){this.fetchPlotlyData()}fetchPlotlyData(){const{query:t}=this.props.widgetparamsMapped,n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:pr,entityId:Cn(t),query:{sql:t}};rf(n,this.context.accessToken).then(r=>{this.setState({isLoaded:!0,queryData:r})}).catch(r=>{console.log("Error on full table query ",r)})}showPlot(){var g,h,m,v;if(!this.state.isLoaded)return;const{title:t,xtitle:n,ytitle:r,type:o,xaxistype:a,showlegend:i}=this.props.widgetparamsMapped,s=this.state,l=this.props.widgetparamsMapped.horizontal.toLowerCase(),d={showlegend:i,title:t};n&&(d.xaxis={title:n}),a&&(d.xaxis={...d.xaxis,xaxistype:a.toLowerCase()}),r&&(d.yaxis={title:r});const c=[],f=l?"v":"h",p=(h=(g=s.queryData.queryResult)==null?void 0:g.queryResults.headers)!=null?h:[];for(let b=0;b<p.length-1;b+=1)c[b]={orientation:f,name:p[b+1].name,type:o.toLowerCase(),x:[],y:[]};for(const b of(v=(m=s.queryData.queryResult)==null?void 0:m.queryResults.rows)!=null?v:[])for(let C=1;C<b.values.length;C+=1){const S=b.values;c[C-1].x.push(S[0]),c[C-1].y.push(S[C])}return u(BN,{layout:d,data:c})}render(){return this.state.isLoaded?this.showPlot():null}}Un.contextType=fr;const FN=Un;try{Un.displayName="SynapsePlot",Un.__docgenInfo={description:"",displayName:"SynapsePlot",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},widgetparamsMapped:{defaultValue:null,description:"",name:"widgetparamsMapped",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/SynapsePlot.tsx#SynapsePlot"]={docgenInfo:Un.__docgenInfo,name:"SynapsePlot",path:"src/lib/containers/widgets/SynapsePlot.tsx#SynapsePlot"})}catch{}function fo(e){const{ownerId:t,wikiId:n,wikiPage:r}=tm();return u(FN,{ownerId:t,wikiId:n||(r==null?void 0:r.id),widgetparamsMapped:e})}try{fo.displayName="MarkdownSynapsePlot",fo.__docgenInfo={description:"",displayName:"MarkdownSynapsePlot",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownSynapsePlot.tsx#MarkdownSynapsePlot"]={docgenInfo:fo.__docgenInfo,name:"MarkdownSynapsePlot",path:"src/lib/containers/markdown/widget/MarkdownSynapsePlot.tsx#MarkdownSynapsePlot"})}catch{}const $N=200,ju="ESTIMATED_DOWNLOAD_SPEED_EXPIRE_TIME",Wu="ESTIMATED_DOWNLOAD_SPEED",HN="syn12600511",UN=e=>new Promise((t,n)=>{const r=localStorage.getItem(ju),o=localStorage.getItem(Wu);if(r&&o&&new Date().getTime()<Number(r)){t(Number(o));return}Sa(e,HN).then(a=>{const i=a,s=[{associateObjectId:i.id,associateObjectType:Me.FileEntity,fileHandleId:i.dataFileHandleId}];wn({includeFileHandles:!0,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:s},e).then(d=>{const c=d.requestedFiles[0].preSignedURL,f=d.requestedFiles[0].fileHandle,p=new Date().getTime();return Km(f,c).then(()=>{const g=f.contentSize/((new Date().getTime()-p-$N)/1e3),h=new Date().getTime();localStorage.setItem(ju,(h+1e3*60*5).toString()),localStorage.setItem(Wu,g.toString()),t(g)})})}).catch(a=>n(a))}),zN=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];function nm(e){if(!e)return"";const t=Math.floor(Math.log(e)/Math.log(1024));return!e&&"0 Bytes"||(e/Math.pow(1024,t)).toFixed(2)+" "+zN[t]}function po(e){const{numFiles:t,numBytes:n}=e,{accessToken:r}=le(),[o,a]=T.exports.useState({isLoading:!!n,downloadSpeed:0}),{isLoading:i,downloadSpeed:s}=o;T.exports.useEffect(()=>{r&&UN(r).then(h=>{a({isLoading:!1,downloadSpeed:h})})},[r]);const l=i||s===0||!n?0:n/s,d=l===0,c=d?"":gr.duration(l,"seconds").humanize(),f=t===0,p=f?"SRC-inactive":"SRC-primary-text-color",g=d?"SRC-inactive":"SRC-primary-text-color";return N("span",{className:"download-details-container",children:[N("span",{children:[u("span",{className:p,children:u(he,{options:{icon:"file"}})}),f?u(Va,{width:50}):N(U,{children:[" ",t,"\xA0files "]})]}),n&&u(ze,{title:"This is the total size of all files. Zipped package(s) will likely be smaller.",enterNextDelay:na,placement:"top",children:N("span",{"data-testid":"numBytesUI",children:[u("span",{className:g,children:u(he,{options:{icon:"database"}})}),d?u(Va,{width:50}):nm(n)]})}),n&&u(ze,{title:"This is an estimate of how long package download will take.",enterNextDelay:na,placement:"top",children:N("span",{"data-testid":"downloadTimeEstimateUI",children:[u("span",{className:g,children:u(he,{options:{icon:"clock"}})}),i&&t>0?u(Va,{width:50}):c]})})]})}try{po.displayName="DownloadDetails",po.__docgenInfo={description:`Displays download information including number of files, size of download, and time to download.
Prefer to use {@link download_list_v2 /DownloadDetails} instead, particularly when you have information about file packaging in/eligibility`,displayName:"DownloadDetails",props:{numFiles:{defaultValue:null,description:"",name:"numFiles",required:!0,type:{name:"number"}},numBytes:{defaultValue:null,description:"",name:"numBytes",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/download_list/DownloadDetails.tsx#DownloadDetails"]={docgenInfo:po.__docgenInfo,name:"DownloadDetails",path:"src/lib/containers/download_list/DownloadDetails.tsx#DownloadDetails"})}catch{}async function YN(e,t,n,r,o){try{const a={query:n==null?void 0:n.query,concreteType:"org.sagebionetworks.repo.model.download.AddToDownloadListRequest",parentId:r};return await Xm(a,e),Gt("File(s) were successfully added to your Download Cart.","success",{primaryButtonConfig:{text:"View Download Cart",onClick:o}}),t(),[0,""]}catch(a){return Gt("danger",void 0,a.reason),t(),[0,""]}}const zn={[2]:{className:"alert-info",infoText:"Would you like to add all files to the download cart?",closeText:"Cancel"},[3]:{className:"alert-info",infoText:N(U,{children:["Note: Files that you add will be mixed in with the files already in your download cart.",u("br",{}),"If you don\u2019t want to mix these files, clear your download cart before continuing."]}),closeText:"Cancel"},[1]:{className:"alert-info",infoText:"Adding Files To List",closeText:"Cancel"},[0]:{className:"alert-info",infoText:"Calculating File Size",closeText:"Cancel"},[4]:{className:"alert-danger",closeText:"Close",infoText:N(U,{children:["Please ",u(Qm,{style:{color:"#337ab7"}})," to add files to your download cart."]})}},jN=e=>{switch(e.status){case 0:case 1:return N("div",{children:[u("span",{className:"spinner white"}),u("span",{className:"spinner__text",children:zn[e.status].infoText})]});case 4:return u(U,{children:zn[e.status].infoText});case 2:case 3:return N(U,{children:[u(po,{numFiles:e.fileCount,numBytes:e.fileSize}),u("span",{className:"download-confirmation-infoText",children:zn[e.status].infoText})]});default:return u(U,{})}},ho=({getLastQueryRequest:e,folderId:t,fnClose:n,setTopLevelControlsState:r,topLevelControlsState:o})=>{const{accessToken:a,downloadCartPageUrl:i}=le(),{showDownloadConfirmation:s=!0}=o!=null?o:{},[l,d]=T.exports.useState(a?0:4),[c,f]=T.exports.useState(0),[p,g]=T.exports.useState(),{data:h,refetch:m}=dv(),v=e(),[b,C]=T.exports.useState(!1),S=T.exports.useCallback((M,V,E)=>{if(a&&E){const k=E.totalNumberOfFiles>0,R=M!=null?M:0;d(k?3:2),f(R),g(V)}},[a]),{data:y,isSuccess:w}=Uv({parentId:t,includeSumFileSizes:!0,includeTotalChildCount:!0,includeTypes:[Ss.FILE]});Cs(()=>{w&&y&&h&&S(y.totalChildCount,y.sumFileSizesBytes,h)},[S,t,w,y,h]);const _=hr|Gs,x={...v,partMask:_},{data:O}=wf(x);Cs(()=>{var M,V;if(O&&h){const E=(M=O.sumFileSizes)==null?void 0:M.greaterThan;S(O.queryCount,E||(V=O.sumFileSizes)==null?void 0:V.sumFileSizesBytes,h)}},[S,v,O,h]);const I=n?()=>n():()=>{r&&r(M=>({...M,showDownloadConfirmation:!1}))},L=async()=>{if(!a)d(4);else{d(1);const E=(await YN(a,I,v,t,()=>C(!0)))[0];d(E),m()}};b&&(window.location.href=i);const D=o==null?void 0:o.showFacetFilter;return u(U,{children:N(vr,{dismissible:!1,show:!0,variant:"info",transition:!1,className:`download-confirmation ${zn[l].className} ${s?"":"hidden"}
          ${D?_n:En}
        `,children:[u(jN,{status:l,fileCount:c,fileSize:p}),N("div",{className:"download-confirmation-action",children:[l!==1&&u("button",{className:"btn btn-link",onClick:I,children:zn[l].closeText}),(l===2||l===3)&&u("button",{type:"button",className:"btn btn-primary",onClick:L,children:"Add"})]})]})})};try{ho.displayName="DownloadConfirmation",ho.__docgenInfo={description:"",displayName:"DownloadConfirmation",props:{fnClose:{defaultValue:null,description:"",name:"fnClose",required:!1,type:{name:"(() => void)"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},folderId:{defaultValue:null,description:"",name:"folderId",required:!1,type:{name:"string"}},topLevelControlsState:{defaultValue:null,description:"",name:"topLevelControlsState",required:!1,type:{name:"TopLevelControlsState"}},setTopLevelControlsState:{defaultValue:null,description:"",name:"setTopLevelControlsState",required:!1,type:{name:"Dispatch<SetStateAction<TopLevelControlsState>>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/download_list/DownloadConfirmation.tsx#DownloadConfirmation"]={docgenInfo:ho.__docgenInfo,name:"DownloadConfirmation",path:"src/lib/containers/download_list/DownloadConfirmation.tsx#DownloadConfirmation"})}catch{}const vs=3,Yn=({helpMessage:e="This search bar is powered by MySQL Full Text Search.",helpUrl:t})=>{const{executeQueryRequest:n,getLastQueryRequest:r}=wt(),{topLevelControlsState:{showSearchBar:o,showFacetFilter:a}}=mr(),[i,s]=T.exports.useState(""),l=T.exports.useRef(null),d=f=>{var p;if(f.preventDefault(),i.trim().length<vs)(p=l.current)==null||p.setCustomValidity(`Search term must have a minimum of ${vs} characters`);else{const g=r(),{additionalFilters:h=[]}=g.query,m={concreteType:"org.sagebionetworks.repo.model.table.TextMatchesQueryFilter",searchExpression:i};if(h.find(b=>b.concreteType==m.concreteType&&b.searchExpression==m.searchExpression))return;h.push(m),g.query.additionalFilters=h,n(g),s("")}},c=f=>{var p;(p=l.current)==null||p.setCustomValidity(""),s(f.currentTarget.value)};return u("div",{className:`QueryWrapperSearchInput ${a?_n:En}`,children:u(ul,{in:o,timeout:{enter:300,exit:300},children:N("div",{className:"QueryWrapperSearchInput__helppopoverwrapper",children:[N("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:d,children:[u("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:u(he,{options:{icon:"search"}})}),u("input",{ref:l,minLength:vs,onChange:c,placeholder:"Enter Search Terms",value:i,type:"text"}),i.length>0&&u("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{s("")},children:u(he,{options:{icon:"close"}})})]}),u("div",{className:"QueryWrapperSearchInput__helppopover",children:u(kt,{markdownText:e,helpUrl:t,placement:"left"})})]})})})};try{Yn.displayName="FullTextSearch",Yn.__docgenInfo={description:"",displayName:"FullTextSearch",props:{helpMessage:{defaultValue:{value:"This search bar is powered by MySQL Full Text Search."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FullTextSearch.tsx#FullTextSearch"]={docgenInfo:Yn.__docgenInfo,name:"FullTextSearch",path:"src/lib/containers/FullTextSearch.tsx#FullTextSearch"})}catch{}const Us="First line is the columns names.",zs="Include row metadata (Row Id and Row Version).",ba="Comma Separated Values (CSV)",Gu="Tab Separated Values (TSV)",WN={title:"Download query results",type:"object",properties:{"File Type":{type:"string",oneOf:[{const:ba,title:ba},{const:Gu,title:Gu}]},Contents:{type:"array",title:"Contents",items:{type:"string",enum:[Us,zs]},uniqueItems:!0}}},GN={"File Type":{"ui:widget":"radio"},Contents:{"ui:widget":"checkboxes"}},KN={title:"Download query results",description:"File is ready for download. Select the download button to download the file.",type:"object"},QN={},XN=[WN,KN],ZN=[GN,QN];class Yt extends T.exports.Component{constructor(t){super(t),this.handleSubmit=n=>{this.state.step===0?this.handleDownloadSetup(n):this.onDownload()},this.handleDownloadSetup=n=>{this.setState({isLoading:!0});const{formData:r}=n,o=r["File Type"],a=r.Contents,{queryBundleRequest:i,getLastQueryRequest:s}=this.props,l=o===ba?",":"	",d=a.includes(Us),c=a.includes(zs),f=i!=null?i:s(),p=f.query.sql,g={sql:p,entityId:Cn(p),selectedFacets:f.query.selectedFacets,concreteType:"org.sagebionetworks.repo.model.table.DownloadFromTableRequest",writeHeader:d,includeRowIdAndRowVersion:c,csvTableDescriptor:{separator:l},additionalFilters:f.query.additionalFilters};Zm(g,this.context.accessToken).then(h=>{this.setState({isLoading:!1,step:1,data:h})}).catch(h=>{console.log("Error getDownloadFromTableRequest: ",h)})},this.onDownload=()=>{const{data:n}=this.state;Jm(n.resultsFileHandleId,this.context.accessToken).then(r=>{window.location.href=r,this.props.onClose()})},this.handleChange=n=>{const{formData:r}=n;this.setState({formData:r})},this.state={isLoading:!1,step:0,formData:{"File Type":ba,Contents:[Us,zs]}}}render(){const t={position:"absolute",top:10,right:10,zIndex:10},n={height:50,width:50,backgroundSize:50};return u(ae,{animation:!1,show:!0,onHide:this.props.onClose,backdrop:"static",children:N(ae.Body,{children:[u("button",{style:t,onClick:this.props.onClose,children:u(he,{options:{icon:"close"}})}),N(Yy,{schema:XN[this.state.step],uiSchema:ZN[this.state.step],onChange:this.handleChange,formData:this.state.formData,onSubmit:this.handleSubmit,children:[this.state.isLoading&&u("div",{className:"SRC-centerAndJustifyContent",children:N("div",{className:"SRC-center-text",children:[u("p",{children:" Creating the File "}),u("div",{style:n,className:"spinner"}),u("p",{children:" Loading... "})]})}),N("div",{style:{textAlign:"right"},children:[u(be,{variant:"default",onClick:this.props.onClose,style:{marginRight:"5px"},children:"Cancel"}),u(be,{type:"submit",variant:"primary",children:this.state.step===0?"Next":"Download"})]})]})]})})}}Yt.contextType=fr;try{Yt.displayName="ModalDownload",Yt.__docgenInfo={description:"",displayName:"ModalDownload",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(...args: any[]) => void"}},includeEntityEtag:{defaultValue:null,description:"",name:"includeEntityEtag",required:!1,type:{name:"boolean"}},queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!1,type:{name:"QueryBundleRequest"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},sort:{defaultValue:null,description:"",name:"sort",required:!1,type:{name:"SortItem[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/ModalDownload.tsx#ModalDownload"]={docgenInfo:Yt.__docgenInfo,name:"ModalDownload",path:"src/lib/containers/ModalDownload.tsx#ModalDownload"})}catch{}function jn(e){const{initQueryRequest:t,onQueryChange:n,onQueryResultBundleChange:r,lockedColumn:o,componentIndex:a,shouldDeepLink:i}=e,[s,l]=T.exports.useState(void 0),{entityId:d,versionNumber:c,getInitQueryRequest:f,getLastQueryRequest:p,setQuery:g}=$g({initQueryRequest:t,componentIndex:a,shouldDeepLink:i,onQueryChange:n}),h=T.exports.useMemo(()=>p(),[p]),{data:m,hasNextPage:v,fetchPreviousPage:b,fetchNextPage:C,isFetchingNextPage:S,isLoading:y,error:w,isPreviousData:_}=ty(h,{keepPreviousData:!0},l),x=y||_,{data:O}=ol(d,c),[I,L]=T.exports.useState(0);async function D(){if(!v)throw new Error("Called appendNextPageToResults when there is no next page");await C(),L("ALL")}async function M(){if(!v)throw new Error("Called goToNextPage when there is no next page");if(I==="ALL")throw new Error("Cannot go to next page when all pages are displayed");await C(),L(I+1)}const V=I!=="ALL"&&I>0;async function E(){if(I==="ALL")throw new Error("Cannot go to previous page when all pages are displayed");if(!V)throw new Error("Called goToNextPage when there is no next page");await b(),L(I-1)}const k=T.exports.useMemo(()=>{var z,j,q,A;if(!(m==null||m.pages.length===0||m.pages[0].responseBody==null))return I==="ALL"?{...m==null?void 0:m.pages[0].responseBody,queryResult:{...(z=m==null?void 0:m.pages[0].responseBody)==null?void 0:z.queryResult,queryResults:{...(q=(j=m==null?void 0:m.pages[0].responseBody)==null?void 0:j.queryResult)==null?void 0:q.queryResults,rows:(A=m.pages.flatMap($=>{var Y;return(Y=$.responseBody.queryResult)==null?void 0:Y.queryResults.rows}))!=null?A:[]}}}:m==null?void 0:m.pages[I].responseBody},[I,m]);T.exports.useEffect(()=>{k&&r&&r(JSON.stringify(k))},[k,r]);const R=k?ny(k.facets,k.selectColumns):!0,B={data:T.exports.useMemo(()=>ry(k,o),[k,o]),isLoadingNewPage:S,hasNextPage:!!v,hasPreviousPage:!!V,isLoadingNewBundle:x,getLastQueryRequest:p,getInitQueryRequest:f,error:w,entity:O,executeQueryRequest:g,isFacetsAvailable:R,asyncJobStatus:s,appendNextPageToResults:D,goToNextPage:M,goToPreviousPage:E},{children:H}=e;return u(Hg,{queryContext:B,children:u("div",{className:`SRC-wrapper ${x||S?"SRC-logo-cursor":""} ${R?"has-facets":""}`,children:H})})}try{jn.displayName="InfiniteQueryWrapper",jn.__docgenInfo={description:"Component that manages the state of a Synapse table query. Data can be accessed via QueryContext using\neither `useQueryContext` or `QueryContextConsumer`.",displayName:"InfiniteQueryWrapper",props:{initQueryRequest:{defaultValue:null,description:"",name:"initQueryRequest",required:!0,type:{name:"QueryBundleRequest"}},componentIndex:{defaultValue:null,description:"",name:"componentIndex",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/InfiniteQueryWrapper.tsx#InfiniteQueryWrapper"]={docgenInfo:jn.__docgenInfo,name:"InfiniteQueryWrapper",path:"src/lib/containers/InfiniteQueryWrapper.tsx#InfiniteQueryWrapper"})}catch{}class Wn extends ge.Component{constructor(t){var n;super(t),this.handleClickOutsideForm=r=>{var o,a;!((o=this.searchFormRef.current)!=null&&o.contains(r==null?void 0:r.target))&&!((a=this.radioFormRef.current)!=null&&a.contains(r==null?void 0:r.target))&&(this.state.didUpdateRanLast?this.setState({didUpdateRanLast:!1}):this.setState({show:!1}))},this.search=r=>{var g,h,m,v,b,C,S;r.preventDefault();const{searchText:o}=this.state;let{columnName:a}=this.state;const{searchable:i,lockedColumn:s}=this.props;if(a==="")if(i)a=i.filter(y=>y!==(s==null?void 0:s.columnName))[0];else{const y=(m=(h=(g=this.props.queryContext)==null?void 0:g.data)==null?void 0:h.columnModels)==null?void 0:m.filter(w=>w.name!==(s==null?void 0:s.columnName)).filter(w=>this.isSupportedColumn(w));a=(v=y==null?void 0:y[0].name)!=null?v:""}this.setState({show:!1});const{executeQueryRequest:l,getLastQueryRequest:d}=this.props.queryContext,c=d(),{additionalFilters:f=[]}=c.query,p=f.findIndex(y=>!!(Ug(y)||zg(y)&&y.columnName===a));if(p===-1){const y=(S=(C=(b=this.props.queryContext)==null?void 0:b.data)==null?void 0:C.columnModels)==null?void 0:S.filter(w=>w.name===a)[0];if(y!=null&&y.columnType.endsWith("_LIST")){const w={columnName:a,function:Yg.HAS_LIKE,values:[`%${o}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnMultiValueFunctionQueryFilter"};f.push(w)}else{const w={columnName:a,operator:jg.LIKE,values:[`%${o}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnSingleValueQueryFilter"};f.push(w)}}else f[p].values.push(`%${o}%`);c.query.additionalFilters=f,l(c)},this.handleChange=r=>{this.setState({searchText:r.currentTarget.value})},this.isSupportedColumn=r=>{switch(r==null?void 0:r.columnType){case re.FILEHANDLEID:case re.ENTITYID:case re.DATE:case re.DATE_LIST:case re.USERID:return!1;default:return!0}},this.isSupportedColumnAndInProps=r=>{if(this.isSupportedColumn(r)){const{searchable:o}=this.props;return o==null?void 0:o.some(a=>a===(r==null?void 0:r.name))}return!1},this.state={show:!1,didUpdateRanLast:!1,searchText:"",columnName:(n=this.props.defaultColumn)!=null?n:""},this.searchFormRef=ge.createRef(),this.radioFormRef=ge.createRef()}componentDidMount(){document.addEventListener("click",this.handleClickOutsideForm)}componentDidUpdate(t){var n,r,o,a,i;!((n=t.queryVisualizationContext)!=null&&n.topLevelControlsState.showSearchBar)&&((r=this.props.queryVisualizationContext)==null?void 0:r.topLevelControlsState.showSearchBar)&&(this.setState({show:!0,didUpdateRanLast:!0}),(i=(a=(o=this.searchFormRef)==null?void 0:o.current)==null?void 0:a.querySelector("input"))==null||i.focus())}componentWillUnmount(){document.removeEventListener("click",this.handleClickOutsideForm)}render(){var f;const{searchable:t,lockedColumn:n,queryContext:{data:r},queryVisualizationContext:{topLevelControlsState:o,facetAliases:a}}=this.props,{searchText:i,show:s,columnName:l}=this.state;let d=[];t?d=t.map(p=>{var g;return(g=r==null?void 0:r.columnModels)==null?void 0:g.find(h=>h.name===p)}).filter(this.isSupportedColumnAndInProps).map(p=>p.name):r!=null&&r.columnModels&&(d=(f=r.columnModels)==null?void 0:f.filter(this.isSupportedColumn).map(p=>p.name)),d.length&&(n==null?void 0:n.columnName)&&(d=d.filter(p=>p!==(n==null?void 0:n.columnName)));const c=o==null?void 0:o.showFacetFilter;return N("div",{className:`QueryWrapperSearchInput ${c?_n:En}`,children:[u(ul,{in:o==null?void 0:o.showSearchBar,children:N("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:this.search,onClick:()=>{this.setState({show:!0})},ref:this.searchFormRef,children:[u("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:u(he,{options:{icon:"search"}})}),u("input",{onChange:this.handleChange,onClick:()=>{this.setState({show:!0})},placeholder:"Enter Search Terms",value:i,type:"text"}),this.state.searchText.length>0&&u("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{this.setState({searchText:""})},children:u(he,{options:{icon:"close"}})})]})}),u("div",{className:"QueryWrapperSearchInput__dropdown_pos",children:u(Df,{in:s,classNames:"QueryWrapperSearchInput__animate_dropdown",timeout:{enter:0,exit:300},children:N("form",{ref:this.radioFormRef,className:"QueryWrapperSearchInput__column-select QueryWrapperSearchInput__animate_height",children:[u("p",{className:"deemphasized",children:u("i",{children:" Search In Field: "})}),d.map((p,g)=>{const h=Rt(p,a);return u("div",{className:"radio",children:u("label",{children:N("span",{children:[u("input",{id:p,type:"radio",value:p,checked:l===""&&g===0||l===p,onClick:()=>{var v,b,C;(C=(b=(v=this.searchFormRef)==null?void 0:v.current)==null?void 0:b.querySelector("input"))==null||C.focus(),this.setState({columnName:p})}}),u("span",{children:h})]})})},`search-field-${p}-${g}`)})]})})})]})}}try{Wn.displayName="Search",Wn.__docgenInfo={description:"",displayName:"Search",props:{queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},isQueryWrapperMenuChild:{defaultValue:null,description:"",name:"isQueryWrapperMenuChild",required:!1,type:{name:"boolean"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},searchable:{defaultValue:null,description:"",name:"searchable",required:!1,type:{name:"SearchableColumnsV2"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},fullTextSearchHelpURL:{defaultValue:null,description:"",name:"fullTextSearchHelpURL",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/SearchV2.tsx#Search"]={docgenInfo:Wn.__docgenInfo,name:"Search",path:"src/lib/containers/SearchV2.tsx#Search"})}catch{}const JN="The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients.",eI="https://help.synapse.org/docs/Searching-Tables-and-Views.2009596168.html#SearchingTablesandViews-UsingAdvancedSearchQueries",Gn=({helpMessage:e=JN,helpUrl:t=eI})=>{const{executeQueryRequest:n,getLastQueryRequest:r}=wt(),{topLevelControlsState:{showSqlEditor:o,showFacetFilter:a}}=mr(),[i,s]=T.exports.useState(""),l=T.exports.useRef(null);T.exports.useEffect(()=>{var f;if(o){const p=r().query.sql;s(p),(f=l.current)==null||f.focus()}},[o,r]);const d=f=>{f.preventDefault();const p=r();p.query.sql=i,p.query.offset=0,p.query.additionalFilters=[],p.query.selectedFacets=[],n(p)},c=f=>{var p;(p=l.current)==null||p.setCustomValidity(""),s(f.currentTarget.value)};return u("div",{className:`QueryWrapperSqlEditorInput ${a?_n:En}`,children:u(ul,{in:o,timeout:{enter:300,exit:300},children:N("div",{className:"QueryWrapperSqlEditorInput__helppopoverwrapper",children:[N("form",{className:"QueryWrapperSqlEditorInput__searchbar",onSubmit:d,children:[u(uy,{className:"QueryWrapperSqlEditorInput__searchbar__searchicon"}),u("input",{ref:l,onChange:c,placeholder:"Enter Query",value:i,type:"text"})]}),u("div",{className:"QueryWrapperSqlEditorInput__helppopover",children:u(kt,{markdownText:e,helpUrl:t,placement:"right"})})]})})})};try{Gn.displayName="SqlEditor",Gn.__docgenInfo={description:"",displayName:"SqlEditor",props:{helpMessage:{defaultValue:{value:"The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:{value:"https://help.synapse.org/docs/Searching-Tables-and-Views.2009596168.html#SearchingTablesandViews-UsingAdvancedSearchQueries"},description:"",name:"helpUrl",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/SqlEditor.tsx#SqlEditor"]={docgenInfo:Gn.__docgenInfo,name:"SqlEditor",path:"src/lib/containers/SqlEditor.tsx#SqlEditor"})}catch{}const mo=e=>N(ae,{animation:!1,show:!0,onHide:()=>e.onHide(),backdrop:"static",children:[u(ae.Header,{closeButton:!0,children:u("span",{style:{fontWeight:"bold",color:"#515359",fontSize:"1.5em"},children:"Sign In Required"})}),N(uv,{children:[u("p",{children:"Anyone can browse public content on the Synapse website, but in order to download and create content you will need to register for an account using an email address."}),N("p",{children:["To find out more see\xA0",u("a",{href:"https://help.synapse.org/docs/Managing-your-account.2055405596.html",target:"_blank",rel:"noopener noreferrer",children:"User Accounts"}),u("span",{children:" and "}),u("a",{href:"https://help.synapse.org/docs/Synapse-Governance.2004255211.html",rel:"noopener noreferrer",target:"_blank",children:"Governance Overview"}),"."]})]}),N(fv,{children:[u(be,{variant:"secondary",onClick:()=>e.onHide(),children:"CANCEL"}),u(be,{className:"SRC-SIGN-IN-CLASS",variant:"primary",onClick:()=>e.onHide(),children:"Sign in"})]})]});try{mo.displayName="DownloadLoginModal",mo.__docgenInfo={description:"",displayName:"DownloadLoginModal",props:{showModal:{defaultValue:null,description:"",name:"showModal",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/DownloadLoginModal.tsx#DownloadLoginModal"]={docgenInfo:mo.__docgenInfo,name:"DownloadLoginModal",path:"src/lib/containers/table/table-top/DownloadLoginModal.tsx#DownloadLoginModal"})}catch{}const go=({show:e,title:t,onClose:n,pythonNotes:r,pythonCode:o,rNotes:a,rCode:i,cliNotes:s,cliCode:l,helpMarkdown:d,helpUrl:c})=>{let f;l?f="Command Line":o?f="Python":f="R";const[p,g]=T.exports.useState(f),h=N("p",{children:["Installation instructions are available at our"," ",u("a",{className:"ProgrammaticOptions__docslink",href:"https://help.synapse.org/docs/Installing-Synapse-API-Clients.1985249668.html",target:"_blank",rel:"noopener noreferrer",children:"Synapse API Documentation Site"}),"."]});return N(ae,{className:"bootstrap-4-backport ProgrammaticOptions",backdrop:"static",animation:!1,show:e,onHide:n,size:"lg",children:[u(ae.Header,{closeButton:!0,children:N(ae.Title,{children:[t,"\xA0",d&&u(kt,{markdownText:d,helpUrl:c})]})}),N(ae.Body,{children:[N("div",{className:"Tabs",children:[l&&u("div",{className:"Tab",role:"tab",onClick:m=>{m.stopPropagation(),g("Command Line")},"aria-selected":p==="Command Line",children:"Command Line"}),i&&u("div",{className:"Tab",role:"tab",onClick:m=>{m.stopPropagation(),g("R")},"aria-selected":p==="R",children:"R"}),o&&u("div",{className:"Tab",role:"tab",onClick:m=>{m.stopPropagation(),g("Python")},"aria-selected":p==="Python",children:"Python"})]}),N("div",{className:"TabContent",children:[p==="Command Line"&&N(U,{children:[u("p",{children:s}),h,N("pre",{children:[" ",l," "]})]}),p==="R"&&N(U,{children:[u("p",{children:a}),h,u("pre",{children:i})]}),p==="Python"&&N(U,{children:[u("p",{children:r}),h,u("pre",{children:o})]})]})]}),u(ae.Footer,{children:u(be,{variant:"primary",onClick:n,children:"OK"})})]})};try{go.displayName="ProgrammaticInstructionsModal",go.__docgenInfo={description:"Modal used to show programmatic instructions",displayName:"ProgrammaticInstructionsModal",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},pythonNotes:{defaultValue:null,description:"",name:"pythonNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},pythonCode:{defaultValue:null,description:"",name:"pythonCode",required:!1,type:{name:"string"}},rNotes:{defaultValue:null,description:"",name:"rNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},rCode:{defaultValue:null,description:"",name:"rCode",required:!1,type:{name:"string"}},cliNotes:{defaultValue:null,description:"",name:"cliNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},cliCode:{defaultValue:null,description:"",name:"cliCode",required:!1,type:{name:"string"}},helpMarkdown:{defaultValue:null,description:"",name:"helpMarkdown",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/ProgrammaticInstructionsModal.tsx#ProgrammaticInstructionsModal"]={docgenInfo:go.__docgenInfo,name:"ProgrammaticInstructionsModal",path:"src/lib/containers/ProgrammaticInstructionsModal.tsx#ProgrammaticInstructionsModal"})}catch{}function yo({queryBundleRequest:e,queryResultBundle:t,onHide:n}){const[r,o]=T.exports.useState("");Cs(()=>{(async()=>{const{query:l}=e,{sql:d,selectedFacets:c=[]}=l,{columnModels:f}=t;f||console.error("Column Models must be included to complete transform sql request");const p={concreteType:"org.sagebionetworks.repo.model.table.TransformSqlWithFacetsRequest",sqlToTransform:d,selectedFacets:c,schema:f};try{const g=await eg(p),h=g.transformedSql.toUpperCase().indexOf("FROM SYN"),m=`SELECT * ${g.transformedSql.substring(h)}`;o(m)}catch(g){console.error("Error on getTransformSqlWithFacetsRequest ",g)}})()},[e,t]);const a=T.exports.useMemo(()=>r.replace(/(["`])/g,"\\$1"),[r]),i=T.exports.useMemo(()=>r.replace(/"/g,'\\"'),[r]);return u(go,{show:!0,onClose:n,title:"Download Programmatically",cliNotes:u(U,{children:"This command line code will download Synapse files AND file annotations to your working directory."}),cliCode:`synapse get -q "${a}"`,rNotes:N(U,{children:["This R code will download file annotations only. Use"," ",N("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:["synGet","()"]})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),rCode:`query <- synTableQuery("${i}")
read.table(query$filepath, sep = ",")`,pythonNotes:N(U,{children:["This Python code will download file annotations only. Use"," ",u("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:"syn.get"})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),pythonCode:`query = syn.tableQuery("${i}")
query.asDataFrame()`})}try{yo.displayName="ProgrammaticOptions",yo.__docgenInfo={description:"",displayName:"ProgrammaticOptions",props:{queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!0,type:{name:"QueryBundleRequest"}},queryResultBundle:{defaultValue:null,description:"",name:"queryResultBundle",required:!0,type:{name:"QueryResultBundle"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/ProgrammaticTableDownload.tsx#ProgrammaticOptions"]={docgenInfo:yo.__docgenInfo,name:"ProgrammaticOptions",path:"src/lib/containers/table/table-top/ProgrammaticTableDownload.tsx#ProgrammaticOptions"})}catch{}const tI="Add To Download Cart",nI="download",vo=e=>{const{accessToken:t}=le(),{entity:n,data:r,getLastQueryRequest:o}=wt(),a=o(),[i,s]=T.exports.useState(!1),[l,d]=T.exports.useState(!1),[c,f]=T.exports.useState(!1),{onDownloadFiles:p,darkTheme:g=!0}=e,h=n&&(sn(n)&&Lg(n)||yn(n)),m=n&&yn(n)&&n.isLatestVersion;return N(T.exports.Fragment,{children:[N(Nt,{as:"span",children:[u(Ca,{idForToolTip:nI,tooltipText:"Download Options",size:"lg",darkTheme:g,icon:"download"}),N(Nt.Menu,{className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:[u(Nt.Item,{onClick:()=>{d(!0)},children:"Export Table"}),h&&u(ze,{title:"A draft version of a dataset cannot be added to the Download Cart",placement:"left",enterNextDelay:300,disableHoverListener:!m,children:u(Nt.Item,{className:m?"ignoreLink":void 0,disabled:m,style:m?{pointerEvents:"auto"}:{},onClick:()=>t?p():s(!0),children:tI})}),u(ze,{title:"A draft version of a dataset cannot be downloaded programmatically",placement:"left",enterNextDelay:300,disableHoverListener:!m,children:u(Nt.Item,{className:m?"ignoreLink":void 0,disabled:m,style:m?{pointerEvents:"auto"}:{},onClick:()=>f(!0),children:"Programmatic Options"})})]})]}),i&&u(mo,{showModal:i,onHide:()=>s(!1)}),l&&u(Yt,{onClose:()=>d(!1),queryBundleRequest:a}),c&&r&&u(yo,{onHide:()=>f(!1),queryBundleRequest:a,queryResultBundle:r})]})};try{vo.displayName="DownloadOptions",vo.__docgenInfo={description:"",displayName:"DownloadOptions",props:{onDownloadFiles:{defaultValue:null,description:"",name:"onDownloadFiles",required:!0,type:{name:"() => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/DownloadOptions.tsx#DownloadOptions"]={docgenInfo:vo.__docgenInfo,name:"DownloadOptions",path:"src/lib/containers/table/table-top/DownloadOptions.tsx#DownloadOptions"})}catch{}const Ku="addAndRemoveColumns",bo=e=>{const{headers:t,isColumnSelected:n,toggleColumnSelection:r,darkTheme:o,facetAliases:a}=e,[i,s]=T.exports.useState(!1),l=(d,c,f)=>{f.source==="rootClose"?s(!1):s(!0)};return N(Nt,{as:"span",onToggle:(d,c,f)=>l(d,c,f),show:i,drop:"down",children:[u(Ca,{idForToolTip:Ku,tooltipText:"Show/Hide Columns",icon:o?"columnsdark":"columns",darkTheme:o}),u(Nt.Menu,{id:`${Ku}-dropdown`,className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:t==null?void 0:t.map(d=>{const{name:c}=d,f=n.includes(c),p={width:"11px",marginRight:"10px",visibility:f?void 0:"hidden"},g=f?"SRC-primary-text-color":"";return N(Nt.Item,{onClick:()=>r(c),children:[u("span",{className:g,style:p,children:u(he,{options:{icon:"check",size:"14px"}})}),Rt(c,a)]},c)})})]})};try{bo.displayName="ColumnSelection",bo.__docgenInfo={description:"",displayName:"ColumnSelection",props:{headers:{defaultValue:null,description:"",name:"headers",required:!1,type:{name:"SelectColumn[]"}},isColumnSelected:{defaultValue:null,description:"",name:"isColumnSelected",required:!0,type:{name:"string[]"}},show:{defaultValue:null,description:"",name:"show",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(() => void)"}},toggleColumnSelection:{defaultValue:null,description:"",name:"toggleColumnSelection",required:!0,type:{name:"(name: string) => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/ColumnSelection.tsx#ColumnSelection"]={docgenInfo:bo.__docgenInfo,name:"ColumnSelection",path:"src/lib/containers/table/table-top/ColumnSelection.tsx#ColumnSelection"})}catch{}const rI="Files may be unavailable because you do not have permission to see them, they have been deleted, or the Dataset has been misconfigured.",oI="Files may be unavailable because you do not have permission to see them or the Dataset was misconfigured.",So=({entity:e})=>{var o,a;const t=e&&yn(e),n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:`SELECT * FROM ${e.id}${!e.isLatestVersion&&e.versionNumber?`.${e.versionNumber}`:""}`},entityId:e.id,partMask:hr},{data:r}=wf(n,{enabled:t});if(t&&r&&e){const i=r.queryCount,s=(a=(o=e.items)==null?void 0:o.length)!=null?a:0;if(i===s)return u(U,{});const l=s-i;let d="";return e.isLatestVersion?d=rI:d=oI,N(vt,{className:"SRC-centerContent",style:{marginLeft:10},variant:"smallText1",color:"textSecondary",children:[u(Av,{className:"SRC-color-warning",style:{fontSize:"16px"}}),l.toLocaleString()+" Unavailable",u(kt,{className:"SRC-margin-left-5",markdownText:d,placement:"right"})]})}else return u(U,{})};try{So.displayName="MissingQueryResultsWarning",So.__docgenInfo={description:`If possible, this component will render a warning message if results may be missing from the query due to user permissions or
entities being deleted. If not possible, it will render an empty fragment.`,displayName:"MissingQueryResultsWarning",props:{entity:{defaultValue:null,description:"",name:"entity",required:!0,type:{name:"Table"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/MissingQueryResultsWarning.tsx#MissingQueryResultsWarning"]={docgenInfo:So.__docgenInfo,name:"MissingQueryResultsWarning",path:"src/lib/containers/MissingQueryResultsWarning.tsx#MissingQueryResultsWarning"})}catch{}const aI=[{icon:"search",key:"showSearchBar",tooltipText:"Show / Hide Search Bar"},{icon:"chart",key:"showFacetVisualization",tooltipText:"Show / Hide Visualizations"},{icon:"download",key:"showDownloadConfirmation",tooltipText:"Show options for download"},{icon:tg,key:"showSqlEditor",tooltipText:"Show / Hide the Advanced Query Editor"}],Kn=e=>{const{name:t,showColumnSelection:n=!1,hideDownload:r=!1,hideVisualizationsControl:o=!1,hideFacetFilterControl:a=!1,hideQueryCount:i=!1,hideSqlEditorControl:s=!0,customControls:l}=e,{data:d,entity:c,executeQueryRequest:f,getLastQueryRequest:p,getInitQueryRequest:g}=wt(),{topLevelControlsState:h,setTopLevelControlsState:m,columnsToShowInTable:v,selectedRowIndices:b,facetAliases:C,setColumnsToShowInTable:S}=mr(),y=O=>{const I={[O]:!h[O]};O==="showSearchBar"&&(I.showDownloadConfirmation=!1),O==="showDownloadConfirmation"&&(I.showSearchBar=!1),m(L=>({...L,...I}))},w=()=>{f(p())},_=O=>{let I=ln(v);I.includes(O)?I=I.filter(L=>L!==O):I.push(O),S(I)},x=h==null?void 0:h.showFacetFilter;return u("div",{className:`TopLevelControls ${x?_n:En}`,"data-testid":"TopLevelControls",children:N("div",{children:[N("div",{className:"TopLevelControls__querycount",children:[t&&N(U,{children:[N(vt,{variant:"sectionTitle",role:"heading",children:[t," ",!i&&u(pv,{sql:g().query.sql,parens:!0})]}),!i&&c&&u(So,{entity:c})]}),!a&&N("a",{onClick:()=>y("showFacetFilter"),className:"TopLevelControls__querycount__facetFilterLink SRC-no-underline-on-hover",children:[u(_a,{type:h.showFacetFilter?"close":"filter"}),N("span",{className:"TopLevelControls__querycount__facetFilterLink__text",children:[h.showFacetFilter?"Hide":"Show"," ","filters"]})]})]}),N("div",{className:"TopLevelControls__actions",children:[l&&l.map(O=>{var I;return N("button",{className:`btn SRC-roundBorder SRC-primary-background-color SRC-whiteText ${(I=O.classNames)!=null?I:""}`,style:{marginRight:"5px"},type:"button",onClick:()=>O.onClick({data:d,selectedRowIndices:b,refresh:w}),children:[O.icon,"\xA0",O.buttonText]},O.buttonText)}),aI.map(O=>{const{key:I,icon:L,tooltipText:D}=O;return I==="showDownloadConfirmation"&&r||I==="showFacetVisualization"&&o||I==="showSqlEditor"&&s?u(ge.Fragment,{},I):I==="showDownloadConfirmation"?u(vo,{darkTheme:!0,onDownloadFiles:()=>y(I)},I):u(Ca,{idForToolTip:I,tooltipText:D,callbackFn:()=>y(I),darkTheme:!0,icon:L},I)}),n&&u(bo,{headers:d==null?void 0:d.selectColumns,isColumnSelected:v,toggleColumnSelection:_,darkTheme:!0,facetAliases:C})]})]})})};try{Kn.displayName="TopLevelControls",Kn.__docgenInfo={description:"",displayName:"TopLevelControls",props:{name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/TopLevelControls.tsx#TopLevelControls"]={docgenInfo:Kn.__docgenInfo,name:"TopLevelControls",path:"src/lib/containers/table/TopLevelControls.tsx#TopLevelControls"})}catch{}var rm={exports:{}};(function(e,t){(function(r,o){e.exports=o()})(sl,function(){return(()=>{var n={67:(a,i,s)=>{s.r(i),s.d(i,{default:()=>h});var l=s(887),d=s.n(l);function c(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function f(m,v,b){return v in m?Object.defineProperty(m,v,{value:b,enumerable:!0,configurable:!0,writable:!0}):m[v]=b,m}var p,g=(p=0,function(){return p++}),h=function m(v){var b=this,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c(this,m),f(this,"ID","id"),f(this,"PX","px"),f(this,"RESIZABLE","grip-resizable"),f(this,"FLEX","grip-flex"),f(this,"legacyIE",navigator.userAgent.indexOf("Trident/4.0")>0),f(this,"reset",function(S){return b.init(S)}),f(this,"onResize",function(){var S=b.tb;if(S.classList.remove(b.RESIZABLE),S.opt.fixed){S.tableWidth=Number(window.getComputedStyle(S).width.replace(/px/,"")).valueOf();for(var y=0,w=0;w<S.columnCnt;w++)y+=S.columns[w].w;for(var _=0;_<S.columnCnt;_++)S.columns[_].style.width=Math.round(1e3*S.columns[_].w/y)/10+"%",S.columns[_].locked=!0}else b.applyBounds(),S.opt.resizeMode==="flex"&&S.opt.serialize&&b.serializeStore();S.classList.add(b.RESIZABLE),b.syncGrips()}),f(this,"onGripMouseDown",function(S){var y=S.target.parentNode.data,w=b.tb,_=w.grips[y.i],x=S.touches;if(_.ox=x?x[0].pageX:S.pageX,_.l=_.offsetLeft,_.x=_.l,b.createStyle(document.querySelector("head"),"*{cursor:"+w.opt.dragCursor+"!important}"),document.addEventListener("touchmove",b.onGripDrag),document.addEventListener("mousemove",b.onGripDrag),document.addEventListener("touchend",b.onGripDragOver),document.addEventListener("mouseup",b.onGripDragOver),_.classList.add(w.opt.draggingClass),b.grip=_,w.columns[y.i].locked)for(var O,I=0;I<w.columnCnt;I++)(O=w.columns[I]).locked=!1,O.w=Number(window.getComputedStyle(O).width.replace(/px/,"")).valueOf();S.preventDefault()}),f(this,"onGripDrag",function(S){var y=b.grip;if(y){var w=y.t,_=S.touches,x=(_?_[0].pageX:S.pageX)-y.ox+y.l,O=w.opt.minWidth,I=y.i,L=1.5*w.cellSpace+O+w.borderSpace,D=I===w.columnCnt-1,M=I?w.grips[I-1].offsetLeft+w.cellSpace+O:L,V=w.opt.fixed?I===w.columnCnt-1?w.tableWidth-L:w.grips[I+1].offsetLeft-w.cellSpace-O:1/0;if(x=Math.max(M,Math.min(V,x)),y.x=x,y.style.left=x+b.PX,D&&(y.w=w.columns[I].w+x-y.l),w.opt.liveDrag){D?(w.columns[I].style.width=y.w+b.PX,!w.opt.fixed&&w.opt.overflow?w.style.minWidth=w.tableWidth+x-y.l+b.PX:w.tableWidth=Number(window.getComputedStyle(w).width.replace(/px/,"")).valueOf()):b.syncCols(w,I,!1,w.opt),b.syncGrips();var E=w.opt.onDrag;E&&E(S)}S.preventDefault()}}),f(this,"onGripDragOver",function(S){var y=b.grip;document.removeEventListener("touchend",b.onGripDragOver),document.removeEventListener("mouseup",b.onGripDragOver),document.removeEventListener("touchmove",b.onGripDrag),document.removeEventListener("mousemove",b.onGripDrag);var w=document.querySelector("head").lastChild;if(w.parentNode.removeChild(w),y){if(y.classList.remove(y.t.opt.draggingClass),y.x-y.l!=0){var _=y.t,x=_.opt.onResize,O=y.i;if(O===_.columnCnt-1){var I=_.columns[O];I.style.width=y.w+b.PX,I.w=y.w}else b.syncCols(_,O,!0,_.opt);_.opt.fixed||b.applyBounds(),b.syncGrips(),x&&x(S),_.opt.serialize&&b.serializeStore()}b.grip=null}}),f(this,"init",function(S){if(S.disable)return b.destroy();var y=b.tb,w=y.getAttribute(b.ID)||b.RESIZABLE+g();if(!y.matches("table")||y.extended&&!S.partialRefresh)return null;var _=document.querySelector("head");if(b.createStyle(_," .grip-resizable{table-layout:fixed;} .grip-resizable > tbody > tr > td, .grip-resizable > tbody > tr > th{overflow:hidden} .grip-padding > tbody > tr > td, .grip-padding > tbody > tr > th{padding-left:0!important; padding-right:0!important;} .grip-container{ height:0px; position:relative;} .grip-handle{margin-left:-5px; position:absolute; z-index:5; } .grip-handle .grip-resizable{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;cursor: col-resize;top:0px} .grip-lastgrip{position:absolute; width:1px; } .grip-drag{ border-left:1px dotted black;	} .grip-flex{width:auto!important;} .grip-handle.grip-disabledgrip .grip-resizable{cursor:default; display:none;}"),S.hoverCursor&&S.hoverCursor!=="col-resize"){var x=".grip-handle .grip-resizable:hover{cursor:"+S.hoverCursor+"!important}";b.createStyle(_,x)}y.setAttribute(b.ID,w);var O=y.opt;y.opt=b.extendOptions(S);var I=b.getTableHeaders(y);if(b.extendTable(I),S.remoteTable&&S.remoteTable.matches("table")){var L=b.getTableHeaders(y.opt.remoteTable);I.length===L.length?b.extendRemoteTable(y.opt.remoteTable,L,y):console.warn("column count for remote table did not match")}return O}),f(this,"applyBounds",function(){var S=b.tb,y=S.columns.map(function(w){return window.getComputedStyle(w).width});S.style.width=window.getComputedStyle(S).width,S.tableWidth=Number(S.style.width.replace(/px/,"")).valueOf(),S.classList.remove(b.FLEX),S.columns.forEach(function(w,_){w.style.width=y[_],w.w=Number(y[_].replace(/px/,"")).valueOf()}),S.classList.add(b.FLEX)}),f(this,"serializeStore",function(){var S=b.store,y=b.tb;S[y.getAttribute(b.ID)]="";for(var w=0,_=0;_<y.columns.length;_++){var x=window.getComputedStyle(y.columns[_]).width.replace(/px/,"");S[y.getAttribute(b.ID)]+=x+";",w+=Number(x).valueOf()}S[y.getAttribute(b.ID)]+=w.toString(),y.opt.fixed||(S[y.getAttribute(b.ID)]+=";"+window.getComputedStyle(y).width.replace(/px/,""))}),f(this,"syncGrips",function(){var S=b.tb;S.gripContainer.style.width=S.tableWidth+b.PX;for(var y=0;y<S.columnCnt;y++){var w=S.columns[y],_=w.getBoundingClientRect(),x=S.getBoundingClientRect();S.grips[y].style.left=_.left-x.left+w.offsetWidth+S.cellSpace/2+b.PX,S.grips[y].style.height=(S.opt.headerOnly?S.columns[0].offsetHeight:S.offsetHeight)+b.PX}}),f(this,"destroy",function(){var S=b.tb,y=S.getAttribute(b.ID);return y?(b.store[y]="",S.classList.remove(b.RESIZABLE),S.classList.remove(b.FLEX),S.remote&&(S.remote.classList.remove(b.RESIZABLE),S.remote.classList.remove(b.FLEX)),S.gripContainer&&S.gripContainer.parentNode&&S.gripContainer.parentNode.removeChild(S.gripContainer),delete S.extended,S.opt):null}),f(this,"createStyle",function(S,y){var w=d()(y).toString(),_=S.querySelectorAll("style");if(!Array.from(_).filter(function(O){return O.gripid===w}).length){var x=document.createElement("style");x.type="text/css",x.gripid=w,x.styleSheet?x.styleSheet.cssText=y:x.appendChild(document.createTextNode(y)),S.appendChild(x)}}),f(this,"extendOptions",function(S){var y=Object.assign({},m.DEFAULTS,S);switch(y.fixed=!0,y.overflow=!1,y.resizeMode){case"flex":y.fixed=!1;break;case"overflow":y.fixed=!1,y.overflow=!0}return y}),f(this,"getTableHeaders",function(S){var y="#"+S.id,w=Array.from(S.querySelectorAll(y+">thead>tr:nth-of-type(1)>th"));return(w=w.concat(Array.from(S.querySelectorAll(y+">thead>tr:nth-of-type(1)>td")))).length||(w=(w=(w=(w=Array.from(S.querySelectorAll(y+">tbody>tr:nth-of-type(1)>th"))).concat(Array.from(S.querySelectorAll(y+">tr:nth-of-type(1)>th")))).concat(Array.from(S.querySelectorAll(y+">tbody>tr:nth-of-type(1)>td")))).concat(Array.from(S.querySelectorAll(y+">tr:nth-of-type(1)>td")))),b.filterInvisible(w,!1)}),f(this,"filterInvisible",function(S,y){return S.filter(function(w){var _=y?-1:w.offsetWidth,x=y?-1:w.offsetHeight;return!(_===0&&x===0||w.style&&w.style.display&&window.getComputedStyle(w).display==="none")})}),f(this,"extendTable",function(S){var y=b.tb;y.opt.removePadding&&y.classList.add("grip-padding"),y.classList.add(b.RESIZABLE),y.insertAdjacentHTML("beforebegin",'<div class="grip-container"/>'),y.grips=[],y.columns=[],y.tableWidth=Number(window.getComputedStyle(y).width.replace(/px/,"")).valueOf(),y.gripContainer=y.previousElementSibling,y.opt.marginLeft&&(y.gripContainer.style.marginLeft=y.opt.marginLeft),y.opt.marginRight&&(y.gripContainer.style.marginRight=y.opt.marginRight),y.cellSpace=parseInt(b.legacyIE?y.cellSpacing||y.currentStyle.borderSpacing:window.getComputedStyle(y).borderSpacing.split(" ")[0].replace(/px/,""))||2,y.borderSpace=parseInt(b.legacyIE?y.border||y.currentStyle.borderLeftWidth:window.getComputedStyle(y).borderLeftWidth.replace(/px/,""))||1,y.extended=!0,b.createGrips(S)}),f(this,"extendRemoteTable",function(S,y,w){w.opt.removePadding&&S.classList.add("grip-padding"),S.classList.add(b.RESIZABLE),S.getAttribute(b.ID)||S.setAttribute(b.ID,w.getAttribute(b.ID)+"remote"),S.columns=[],y.forEach(function(x,O){var I=y[O];I.w=w.columns[O].w,I.style.width=I.w+b.PX,I.removeAttribute("width"),S.columns.push(I)}),S.tableWidth=w.tableWidth,S.cellSpace=w.cellSpace,S.borderSpace=w.borderSpace;var _=Array.from(S.querySelectorAll("col"));S.columnGrp=b.filterInvisible(_,!0),S.columnGrp.forEach(function(x,O){x.removeAttribute("width"),x.style.width=w.columnGrp[O].style.width}),w.remote=S}),f(this,"createGrips",function(S){var y=b.tb;y.columnGrp=b.filterInvisible(Array.from(y.querySelectorAll("col")),!0),y.columnGrp.forEach(function(x){x.removeAttribute("width")}),y.columnCnt=S.length;var w=!1;b.store[y.getAttribute(b.ID)]&&(b.deserializeStore(S),w=!0),y.opt.widths||(y.opt.widths=[]),S.forEach(function(x,O){var I=S[O],L=y.opt.disabledColumns.indexOf(O)!==-1;b.createDiv(y.gripContainer,"grip-handle");var D=y.gripContainer.lastChild;!L&&y.opt.gripInnerHtml&&(D.innerHTML=y.opt.gripInnerHtml),b.createDiv(D,b.RESIZABLE),O===y.columnCnt-1&&(D.classList.add("grip-lastgrip"),y.opt.fixed&&(D.innerHTML="")),D.addEventListener("touchstart",b.onGripMouseDown,{capture:!0,passive:!0}),D.addEventListener("mousedown",b.onGripMouseDown,!0),L?D.classList.add("grip-disabledgrip"):(D.classList.remove("grip-disabledgrip"),D.addEventListener("touchstart",b.onGripMouseDown,{capture:!0,passive:!0}),D.addEventListener("mousedown",b.onGripMouseDown,!0)),D.t=y,D.i=O,y.opt.widths[O]?I.w=y.opt.widths[O]:I.w=w?Number(I.style.width.replace(/px/,"")).valueOf():Number(window.getComputedStyle(I).width.replace(/px/,"")).valueOf(),I.style.width=I.w+b.PX,I.removeAttribute("width"),D.data={i:O,t:y.getAttribute(b.ID),last:O===y.columnCnt-1},y.grips.push(D),y.columns.push(I)});var _=Array.from(y.querySelectorAll("td"));_.concat(Array.from(y.querySelectorAll("th"))),(_=(_=_.filter(function(x){for(var O=0;O<S.length;O++)if(S[O]===x)return!1;return!0})).filter(function(x){return!(x.querySelectorAll("table th").length||x.querySelectorAll("table td").length)})).forEach(function(x){x.removeAttribute("width")}),y.opt.fixed||(y.removeAttribute("width"),y.classList.add(b.FLEX)),b.syncGrips()}),f(this,"deserializeStore",function(S){var y=b.tb;if(y.columnGrp.forEach(function(O){O.removeAttribute("width")}),y.opt.flush)b.store[y.getAttribute(b.ID)]="";else{var w=b.store[y.getAttribute(b.ID)].split(";"),_=w[y.columnCnt+1];!y.opt.fixed&&_&&(y.style.width=_+b.PX,y.opt.overflow&&(y.style.minWidth=_+b.PX,y.tableWidth=Number(_).valueOf()));for(var x=0;x<y.columnCnt;x++)S[x].style.width=w[x]+b.PX,y.columnGrp[x]&&(y.columnGrp[x].style.width=100*Number(w[x]).valueOf()/Number(w[y.columnCnt]).valueOf()+"%")}}),f(this,"createDiv",function(S,y,w){var _=document.createElement("div");_.classList.add(y),w&&(_.innerHTML=w),S.appendChild(_)}),f(this,"syncCols",function(S,y,w,_){var x=S.remote,O=b.grip.x-b.grip.l,I=S.columns[y],L=S.columns[y+1];if(I&&L){var D=I.w+O,M=L.w-O,V=D+b.PX;if(I.style.width=V,S.columnGrp[y]&&S.columnGrp[y].style.width&&(S.columnGrp[y].style.width=V),x&&(x.columns[y].style.width=V,x.columnGrp[y]&&x.columnGrp[y].style.width&&(x.columnGrp[y].style.width=V)),_.fixed){var E=M+b.PX;L.style.width=E,S.columnGrp[y+1]&&S.columnGrp[y+1].style.width&&(S.columnGrp[y+1].style.width=E),x&&(x.columns[y+1].style.width=E,x.columnGrp[y+1]&&x.columnGrp[y+1].style.width&&(x.columnGrp[y+1].style.width=E))}else _.overflow&&(S.style.minWidth=S.tableWidth+O+b.PX);w&&(I.w=D,L.w=_.fixed?M:L.w,x&&(x.columns[y].w=D,x.columns[y+1].w=_.fixed?M:L.w))}});try{this.store=sessionStorage}catch{this.store={}}this.grip=null,this.tb=v,window.addEventListener("resize",this.onResize),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),this.init(C)};h.DEFAULTS={resizeMode:"fit",draggingClass:"grip-drag",gripInnerHtml:"",liveDrag:!1,minWidth:15,headerOnly:!1,hoverCursor:"col-resize",dragCursor:"col-resize",flush:!1,marginLeft:null,marginRight:null,remoteTable:null,disable:!1,partialRefresh:!1,disabledColumns:[],removePadding:!0,widths:[],serialize:!0,onDrag:null,onResize:null}},887:a=>{a.exports=function(s){for(var l=5381,d=s.length;d;)l=33*l^s.charCodeAt(--d);return l>>>0}}},r={};function o(a){if(r[a])return r[a].exports;var i=r[a]={exports:{}};return n[a](i,i.exports,o),i.exports}return o.n=a=>{var i=a&&a.__esModule?()=>a.default:()=>a;return o.d(i,{a:i}),i},o.d=(a,i)=>{for(var s in i)o.o(i,s)&&!o.o(a,s)&&Object.defineProperty(a,s,{enumerable:!0,get:i[s]})},o.o=(a,i)=>Object.prototype.hasOwnProperty.call(a,i),o.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o(67)})()})})(rm);const iI=ky(rm.exports),wo=e=>{const{entityId:t,entityVersionNumber:n}=e,{accessToken:r}=le(),o=ng();return r?u(U,{children:u(ze,{title:"Add this file to your Download Cart",placement:"right",enterNextDelay:300,children:u("a",{"data-testid":"AddToDownloadListV2",onClick:async()=>{try{await rg(t,n,r),o.invalidateQueries(["downloadliststatsv2"]);const i=await Sa(r,t,n?n==null?void 0:n.toString():void 0);Gt(`${i.name} was successfully added to your Download Cart.`,"success")}catch(i){Gt(`Unable to add the file to your Download Cart. ${i}`,"danger")}},className:"ignoreLink",children:u(he,{options:{icon:"addToCart"}})})})}):u(U,{})};try{wo.displayName="AddToDownloadListV2",wo.__docgenInfo={description:"",displayName:"AddToDownloadListV2",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/AddToDownloadListV2.tsx#AddToDownloadListV2"]={docgenInfo:wo.__docgenInfo,name:"AddToDownloadListV2",path:"src/lib/containers/AddToDownloadListV2.tsx#AddToDownloadListV2"})}catch{}var Ys={exports:{}};(function(e,t){(function(n,r){var o="1.0.2",a="",i="?",s="function",l="undefined",d="object",c="string",f="major",p="model",g="name",h="type",m="vendor",v="version",b="architecture",C="console",S="mobile",y="tablet",w="smarttv",_="wearable",x="embedded",O=255,I="Amazon",L="Apple",D="ASUS",M="BlackBerry",V="Browser",E="Chrome",k="Edge",R="Firefox",P="Google",B="Huawei",H="LG",F="Microsoft",z="Motorola",j="Opera",q="Samsung",A="Sony",$="Xiaomi",Y="Zebra",G="Facebook",Z=function(J,se){var ee={};for(var me in J)se[me]&&se[me].length%2===0?ee[me]=se[me].concat(J[me]):ee[me]=J[me];return ee},Q=function(J){for(var se={},ee=0;ee<J.length;ee++)se[J[ee].toUpperCase()]=J[ee];return se},K=function(J,se){return typeof J===c?ce(se).indexOf(ce(J))!==-1:!1},ce=function(J){return J.toLowerCase()},ve=function(J){return typeof J===c?J.replace(/[^\d\.]/g,a).split(".")[0]:r},we=function(J,se){if(typeof J===c)return J=J.replace(/^\s\s*/,a).replace(/\s\s*$/,a),typeof se===l?J:J.substring(0,O)},_e=function(J,se){for(var ee=0,me,ne,Ue,oe,Oe,xe;ee<se.length&&!Oe;){var lt=se[ee],Je=se[ee+1];for(me=ne=0;me<lt.length&&!Oe;)if(Oe=lt[me++].exec(J),Oe)for(Ue=0;Ue<Je.length;Ue++)xe=Oe[++ne],oe=Je[Ue],typeof oe===d&&oe.length>0?oe.length===2?typeof oe[1]==s?this[oe[0]]=oe[1].call(this,xe):this[oe[0]]=oe[1]:oe.length===3?typeof oe[1]===s&&!(oe[1].exec&&oe[1].test)?this[oe[0]]=xe?oe[1].call(this,xe,oe[2]):r:this[oe[0]]=xe?xe.replace(oe[1],oe[2]):r:oe.length===4&&(this[oe[0]]=xe?oe[3].call(this,xe.replace(oe[1],oe[2])):r):this[oe]=xe||r;ee+=2}},We=function(J,se){for(var ee in se)if(typeof se[ee]===d&&se[ee].length>0){for(var me=0;me<se[ee].length;me++)if(K(se[ee][me],J))return ee===i?r:ee}else if(K(se[ee],J))return ee===i?r:ee;return J},Re={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},$e={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},it={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[g,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,v],[/opios[\/ ]+([\w\.]+)/i],[v,[g,j+" Mini"]],[/\bopr\/([\w\.]+)/i],[v,[g,j]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[g,v],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[g,"UC"+V]],[/\bqbcore\/([\w\.]+)/i],[v,[g,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[v,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[g,"IE"]],[/yabrowser\/([\w\.]+)/i],[v,[g,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure "+V],v],[/\bfocus\/([\w\.]+)/i],[v,[g,R+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[g,j+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[g,j+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[g,"MIUI "+V]],[/fxios\/([-\w\.]+)/i],[v,[g,R]],[/\bqihu|(qi?ho?o?|360)browser/i],[[g,"360 "+V]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1 "+V],v],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[g,v],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,G],v],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[g,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[g,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[g,E+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,E+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[g,"Android "+V]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,v],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[v,[g,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[v,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[v,We,Re]],[/(webkit|khtml)\/([\w\.]+)/i],[g,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[g,R+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[g,v]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[b,"amd64"]],[/(ia32(?=;))/i],[[b,ce]],[/((?:i[346]|x)86)[;\)]/i],[[b,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[b,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[b,"armhf"]],[/windows (ce|mobile); ppc;/i],[[b,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[b,/ower/,a,ce]],[/(sun4\w)[;\)]/i],[[b,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[b,ce]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[p,[m,q],[h,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[p,[m,q],[h,S]],[/\((ip(?:hone|od)[\w ]*);/i],[p,[m,L],[h,S]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[p,[m,L],[h,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[p,[m,B],[h,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[p,[m,B],[h,S]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[p,/_/g," "],[m,$],[h,S]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[p,/_/g," "],[m,$],[h,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[p,[m,"OPPO"],[h,S]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[p,[m,"Vivo"],[h,S]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[p,[m,"Realme"],[h,S]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[p,[m,z],[h,S]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[p,[m,z],[h,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[p,[m,H],[h,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[p,[m,H],[h,S]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[p,[m,"Lenovo"],[h,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[p,/_/g," "],[m,"Nokia"],[h,S]],[/(pixel c)\b/i],[p,[m,P],[h,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[p,[m,P],[h,S]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[m,A],[h,S]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[p,"Xperia Tablet"],[m,A],[h,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[p,[m,"OnePlus"],[h,S]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[p,[m,I],[h,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[p,/(.+)/g,"Fire Phone $1"],[m,I],[h,S]],[/(playbook);[-\w\),; ]+(rim)/i],[p,m,[h,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[p,[m,M],[h,S]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[p,[m,D],[h,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[p,[m,D],[h,S]],[/(nexus 9)/i],[p,[m,"HTC"],[h,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[m,[p,/_/g," "],[h,S]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[p,[m,"Acer"],[h,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[p,[m,"Meizu"],[h,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[p,[m,"Sharp"],[h,S]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,p,[h,S]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,p,[h,y]],[/(surface duo)/i],[p,[m,F],[h,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[p,[m,"Fairphone"],[h,S]],[/(u304aa)/i],[p,[m,"AT&T"],[h,S]],[/\bsie-(\w*)/i],[p,[m,"Siemens"],[h,S]],[/\b(rct\w+) b/i],[p,[m,"RCA"],[h,y]],[/\b(venue[\d ]{2,7}) b/i],[p,[m,"Dell"],[h,y]],[/\b(q(?:mv|ta)\w+) b/i],[p,[m,"Verizon"],[h,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[p,[m,"Barnes & Noble"],[h,y]],[/\b(tm\d{3}\w+) b/i],[p,[m,"NuVision"],[h,y]],[/\b(k88) b/i],[p,[m,"ZTE"],[h,y]],[/\b(nx\d{3}j) b/i],[p,[m,"ZTE"],[h,S]],[/\b(gen\d{3}) b.+49h/i],[p,[m,"Swiss"],[h,S]],[/\b(zur\d{3}) b/i],[p,[m,"Swiss"],[h,y]],[/\b((zeki)?tb.*\b) b/i],[p,[m,"Zeki"],[h,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],p,[h,y]],[/\b(ns-?\w{0,9}) b/i],[p,[m,"Insignia"],[h,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[p,[m,"NextBook"],[h,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],p,[h,S]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],p,[h,S]],[/\b(ph-1) /i],[p,[m,"Essential"],[h,S]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[p,[m,"Envizen"],[h,y]],[/\b(trio[-\w\. ]+) b/i],[p,[m,"MachSpeed"],[h,y]],[/\btu_(1491) b/i],[p,[m,"Rotor"],[h,y]],[/(shield[\w ]+) b/i],[p,[m,"Nvidia"],[h,y]],[/(sprint) (\w+)/i],[m,p,[h,S]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[m,F],[h,S]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[p,[m,Y],[h,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[p,[m,Y],[h,S]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,p,[h,C]],[/droid.+; (shield) bui/i],[p,[m,"Nvidia"],[h,C]],[/(playstation [345portablevi]+)/i],[p,[m,A],[h,C]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[p,[m,F],[h,C]],[/smart-tv.+(samsung)/i],[m,[h,w]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[m,q],[h,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,H],[h,w]],[/(apple) ?tv/i],[m,[p,L+" TV"],[h,w]],[/crkey/i],[[p,E+"cast"],[m,P],[h,w]],[/droid.+aft(\w)( bui|\))/i],[p,[m,I],[h,w]],[/\(dtv[\);].+(aquos)/i],[p,[m,"Sharp"],[h,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[m,we],[p,we],[h,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,w]],[/((pebble))app/i],[m,p,[h,_]],[/droid.+; (glass) \d/i],[p,[m,P],[h,_]],[/droid.+; (wt63?0{2,3})\)/i],[p,[m,Y],[h,_]],[/(quest( 2)?)/i],[p,[m,G],[h,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[h,x]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[p,[h,S]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[p,[h,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,y]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[h,S]],[/(android[-\w\. ]{0,9});.+buil/i],[p,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[g,k+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[g,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,v],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[g,[v,We,$e]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[g,"Windows"],[v,We,$e]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,"Mac OS"],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[v,g],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[g,v],[/\(bb(10);/i],[v,[g,M]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[g,R+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[g,"webOS"]],[/crkey\/([\d\.]+)/i],[v,[g,E+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[g,"Chromium OS"],v],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,v],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[g,v]]},Te=function(J,se){if(typeof J===d&&(se=J,J=r),!(this instanceof Te))return new Te(J,se).getResult();var ee=J||(typeof n!==l&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:a),me=se?Z(it,se):it;return this.getBrowser=function(){var ne={};return ne[g]=r,ne[v]=r,_e.call(ne,ee,me.browser),ne.major=ve(ne.version),ne},this.getCPU=function(){var ne={};return ne[b]=r,_e.call(ne,ee,me.cpu),ne},this.getDevice=function(){var ne={};return ne[m]=r,ne[p]=r,ne[h]=r,_e.call(ne,ee,me.device),ne},this.getEngine=function(){var ne={};return ne[g]=r,ne[v]=r,_e.call(ne,ee,me.engine),ne},this.getOS=function(){var ne={};return ne[g]=r,ne[v]=r,_e.call(ne,ee,me.os),ne},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ee},this.setUA=function(ne){return ee=typeof ne===c&&ne.length>O?we(ne,O):ne,this},this.setUA(ee),this};Te.VERSION=o,Te.BROWSER=Q([g,v,f]),Te.CPU=Q([b]),Te.DEVICE=Q([p,m,h,C,S,w,y,_,x]),Te.ENGINE=Te.OS=Q([g,v]),e.exports&&(t=e.exports=Te),t.UAParser=Te;var He=typeof n!==l&&(n.jQuery||n.Zepto);if(He&&!He.ua){var st=new Te;He.ua=st.getResult(),He.ua.get=function(){return st.getUA()},He.ua.set=function(J){st.setUA(J);var se=st.getResult();for(var ee in se)He.ua[ee]=se[ee]}}})(typeof window=="object"?window:sl)})(Ys,Ys.exports);const Qn=e=>{const{accessToken:t}=le(),{associatedObjectId:n,entityVersionNumber:r,associatedObjectType:o,fileHandleId:a,displayFileName:i,onClickCallback:s}=e,{ref:l,inView:d}=xn(),[c,f]=T.exports.useState(!1),[p,g]=T.exports.useState(!1),[h,m]=T.exports.useState(),[v,b]=T.exports.useState(),[C,S]=T.exports.useState("");let y=!0;T.exports.useEffect(()=>(y&&d&&O(),()=>{y=!1}),[t,d]);const w=async()=>{let L;const M=new Ys.exports.UAParser().getBrowser().name=="Safari";let V=null;M&&(V=window.open("","Safari Download","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,popup,width=600,height=200"),V.document.body.innerHTML="Downloading file on Safari...");try{o===Me.TableEntity?L=(await x(!0)).requestedFiles[0].preSignedURL:L=(await Gl(h,t,!1,!0)).preSignedURL}catch(E){console.log("Fail to get file download link: ",E)}L?(M&&V?(V.location=L,setTimeout(()=>{V&&V.close()},1e4)):window.open(L),s&&s(c)):(V==null||V.close(),console.log("Fail to get file download link"))},_=L=>L&&!L.isPreview?(g(!0),!0):(g(!1),!1),x=(L=!1)=>wn({includeFileHandles:!0,includePreSignedURLs:L,includePreviewPreSignedURLs:!1,requestedFiles:[{associateObjectId:n,associateObjectType:o,fileHandleId:a}]},t),O=()=>Sa(t,n,r).then(async L=>{if(L.hasOwnProperty("dataFileHandleId"))return m(L),Gl(L,t,!0).then(D=>{const M=D.fileHandle;M&&_(M)&&Bv(M)&&(f(!0),b(M.externalURL))}).catch(D=>{console.log("Error on getFileEntityFileHandle = ",D)});if(o===Me.TableEntity){const M=(await x()).requestedFiles[0].fileHandle;i&&M&&_(M)&&S(M.fileName)}return Promise.resolve()}).catch(L=>{console.log("Error on getEntity = ",L)});return u(ze,{title:c?"Navigate to external link":"Download this file individually",enterNextDelay:na,placement:"left",children:u("span",{ref:l,children:(()=>c?u("button",{className:"btn-download-icon",onClick:()=>{s&&s(c)},children:u("a",{className:"ignoreLink",rel:"noreferrer",href:v,target:"_blank",children:u(he,{options:{icon:"openInNewWindow"}})})}):p?N("button",{className:"btn-download-icon",onClick:w,children:[u(he,{options:{icon:"download"}}),i&&C?C:""]}):u(U,{}))()})})};try{Qn.displayName="DirectDownload",Qn.__docgenInfo={description:"",displayName:"DirectDownload",props:{associatedObjectId:{defaultValue:null,description:"",name:"associatedObjectId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},associatedObjectType:{defaultValue:null,description:"",name:"associatedObjectType",required:!1,type:{name:"enum",value:[{value:'"FileEntity"'},{value:'"TableEntity"'},{value:'"WikiAttachment"'},{value:'"WikiMarkdown"'},{value:'"UserProfileAttachment"'},{value:'"MessageAttachment"'},{value:'"TeamAttachment"'},{value:'"SubmissionAttachment"'},{value:'"VerificationSubmission"'},{value:'"AccessRequirementAttachment"'},{value:'"DataAccessRequestAttachment"'},{value:'"DataAccessSubmissionAttachment"'}]}},fileHandleId:{defaultValue:null,description:"",name:"fileHandleId",required:!1,type:{name:"string"}},displayFileName:{defaultValue:null,description:"",name:"displayFileName",required:!1,type:{name:"boolean"}},onClickCallback:{defaultValue:null,description:"",name:"onClickCallback",required:!1,type:{name:"((isExternalLink: boolean) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DirectDownload.tsx#DirectDownload"]={docgenInfo:Qn.__docgenInfo,name:"DirectDownload",path:"src/lib/containers/DirectDownload.tsx#DirectDownload"})}catch{}const sI=e=>{const t=T.exports.useRef();return T.exports.useEffect(()=>{t.current=e}),t.current},lI=e=>sI(e)!==e;function Lt({isCompleted:e}){return u("div",{"data-testid":`AccessApprovalCheckMark-${e}`,className:`check-mark-container ${e?"green":"orange"}`,children:e?u(Iv,{}):u(Rv,{})})}try{Lt.displayName="AccessApprovalCheckMark",Lt.__docgenInfo={description:"",displayName:"AccessApprovalCheckMark",props:{isCompleted:{defaultValue:null,description:"",name:"isCompleted",required:!0,type:{name:"boolean | undefined"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AccessApprovalCheckMark.tsx#AccessApprovalCheckMark"]={docgenInfo:Lt.__docgenInfo,name:"AccessApprovalCheckMark",path:"src/lib/containers/access_requirement_list/AccessApprovalCheckMark.tsx#AccessApprovalCheckMark"})}catch{}function gn({user:e,wikiPage:t,accessRequirement:n,accessRequirementStatus:r,showButton:o=!0,entityId:a,onHide:i}){const{accessToken:s}=le(),[l,d]=T.exports.useState(!0),c=r==null?void 0:r.isApproved,[f,p]=T.exports.useState(c);let g="";n.concreteType===ke.ManagedACTAccessRequirement||n.concreteType===ke.ACTAccessRequirement?window.location.hostname==="www.synapse.org"||window.location.hostname==="staging.synapse.org"?g="Request access":g="Request access via Synapse.org":g="I Accept Terms of Use",T.exports.useEffect(()=>{p(c)},[c]);const h=()=>{window.open(`${qe.PORTAL}#!AccessRequirement:AR_ID=${n.id}&TYPE=ENTITY&ID=${a}`)},m=()=>{if(n.concreteType===ke.ManagedACTAccessRequirement||n.concreteType===ke.ACTAccessRequirement)h(),i==null||i();else if(!f){const O={requirementId:n==null?void 0:n.id,submitterId:e==null?void 0:e.ownerId,accessorId:e==null?void 0:e.ownerId,state:fl.APPROVED};of(s,O).then(I=>{p(!0)}).catch(I=>console.error("Error on post access approval: ",I))}},v=n.termsOfUse,b=n.actContactInfo,C=n.concreteType===ke.TermsOfUseAccessRequirement,S=n.concreteType===ke.ACTAccessRequirement,y=C&&v||S&&b;let w=u(U,{});t?w=u("div",{className:"AcceptRequirementsMarkdown",children:u(Ve,{wikiId:t==null?void 0:t.wikiPageId,ownerId:t==null?void 0:t.ownerObjectId,objectType:t==null?void 0:t.ownerObjectType})}):y&&(w=u(Ve,{markdown:C?v:b}));const _=n.concreteType===ke.ManagedACTAccessRequirement;return u(U,{children:N("div",{"data-testid":"AcceptedRequirements",className:"requirement-container",children:[u(Lt,{isCompleted:f}),N("div",{className:"terms-of-use-content",children:[f?N("div",{children:[N("p",{children:[_?"Your data access request has been approved.":"You have accepted the terms of use.",_&&u("a",{className:"update-request-button",onClick:()=>{h()},children:"Update Request"}),u("a",{className:"view-terms-button",onClick:()=>{d(!l)},children:"View Terms"})]}),u("div",{className:`view-terms ${l?"hidden":"show"}`,children:w})]}):w,s&&o&&N("div",{className:`button-container ${f?"hide":"default"}`,children:[u("div",{className:"accept-button-container",children:u("button",{className:"accept-button",onClick:m,children:g})}),u("div",{className:"not-accept-button-container",children:u("button",{className:"not-accpet-button",onClick:()=>i==null?void 0:i(),children:"I do not accept"})})]})]})]})})}try{gn.displayName="AcceptedRequirements",gn.__docgenInfo={description:"",displayName:"AcceptedRequirements",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPageKey | undefined"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement | ManagedACTAccessRequirement | SelfSignAccessRequirement | TermsOfUseAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus | undefined"}},showButton:{defaultValue:{value:"true"},description:"",name:"showButton",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AcceptedRequirements.tsx#AcceptedRequirements"]={docgenInfo:gn.__docgenInfo,name:"AcceptedRequirements",path:"src/lib/containers/access_requirement_list/AcceptedRequirements.tsx#AcceptedRequirements"})}catch{}function cI({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:o}){const{accessToken:a}=le(),[i,s]=T.exports.useState();return T.exports.useEffect(()=>{(async()=>{try{const d=await wa(a,e.id);s(d)}catch(d){console.error("Error on get ACTAccessRequirement",d)}})()},[a,e]),u(gn,{accessRequirement:e,accessRequirementStatus:r,user:t,wikiPage:i,onHide:n,entityId:o})}try{ACTAccessRequirement.displayName="ACTAccessRequirement",ACTAccessRequirement.__docgenInfo={description:"",displayName:"ACTAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/ACTAccessRequirement.tsx#ACTAccessRequirement"]={docgenInfo:ACTAccessRequirement.__docgenInfo,name:"ACTAccessRequirement",path:"src/lib/containers/access_requirement_list/ACTAccessRequirement.tsx#ACTAccessRequirement"})}catch{}const Co=e=>{const{accessToken:t}=le(),{formSubmitRequestObject:n,onHide:r}=e,[o,a]=T.exports.useState(),[i,s]=T.exports.useState(!1),l=async()=>{if(n)try{await af(n,t)?r==null||r():(a({key:"danger",message:"Sorry, there is an error in submitting your request. Please close this dialog and try again later."}),s(!0))}catch(d){console.log("CancelRequestDataAccess: Error updating form",d),a({key:"danger",message:`Sorry, there is an error in submitting your request. ${d.reason||""}. Please close this dialog and try again later`}),s(!0)}};return N(U,{children:[u(ae.Header,{closeButton:!0,children:u(ae.Title,{className:"AccessRequirementList__title",children:"Save Changes"})}),N(ae.Body,{children:[u("p",{children:"Would you like to save your recent changes?"}),o&&u(vr,{variant:o.key,children:o.message})]}),N(ae.Footer,{children:[!i&&N(U,{children:[u(be,{variant:"link",onClick:()=>r==null?void 0:r(),children:"Cancel"}),u(be,{variant:"primary",onClick:()=>l(),children:"Save changes"})]}),i&&u(be,{variant:"primary",onClick:()=>r==null?void 0:r(),children:"Close"})]})]})};try{Co.displayName="CancelRequestDataAccess",Co.__docgenInfo={description:"",displayName:"CancelRequestDataAccess",props:{formSubmitRequestObject:{defaultValue:null,description:"",name:"formSubmitRequestObject",required:!0,type:{name:"RequestInterface | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/CancelRequestDataAccess.tsx#CancelRequestDataAccess"]={docgenInfo:Co.__docgenInfo,name:"CancelRequestDataAccess",path:"src/lib/containers/access_requirement_list/managedACTAccess/CancelRequestDataAccess.tsx#CancelRequestDataAccess"})}catch{}const _o=e=>{const{user:t,wikiPage:n,accessRequirementStatus:r,accessRequirement:o,showButton:a=!0,onHide:i,requestDataStepCallback:s}=e,{accessToken:l}=le(),[d,c]=T.exports.useState(!0),f=r==null?void 0:r.isApproved,[p,g]=T.exports.useState(f),[h,m]=T.exports.useState(),[v,b]=T.exports.useState(),[C,S]=T.exports.useState(!1);T.exports.useEffect(()=>{g(f),r!=null&&r.currentSubmissionStatus&&(m(r.currentSubmissionStatus.state),x(r.currentSubmissionStatus))},[f]);const y=()=>{s==null||s({managedACTAccessRequirement:o,step:1})},w=async()=>{if(o.concreteType===ke.ManagedACTAccessRequirement)if(l)if(h===Ae.SUBMITTED&&!C){const R={key:"danger",message:N(U,{children:[u("strong",{children:"Error canceling your data access request."}),u("br",{}),"Please try again later."]})};try{(await og(r==null?void 0:r.currentSubmissionStatus.submissionId,l)).state===Ae.CANCELLED?(b({key:"success",message:u("strong",{children:"Your data access request has been canceled."})}),S(!0)):b(R)}catch(P){console.log("RequestDataAccess: error canceling data access request:",P),b(R)}}else y();else s==null||s({managedACTAccessRequirement:o,step:4});else if(!p){const R={requirementId:o==null?void 0:o.id,submitterId:t==null?void 0:t.ownerId,accessorId:t==null?void 0:t.ownerId,state:fl.APPROVED};of(l,R).then(P=>{g(!0)}).catch(P=>console.error("Error on post access approval: ",P))}},_=()=>{if(o.concreteType===ke.ManagedACTAccessRequirement||o.concreteType===ke.ACTAccessRequirement)if(h){let R;switch(h){case Ae.SUBMITTED:R=C?"Update Request":"Cancel Request";break;case Ae.APPROVED:case Ae.REJECTED:case Ae.CANCELLED:R="Update Request"}return R}else return"Request access";else return"I Accept Terms of Use"},x=R=>{switch(R.state){case Ae.SUBMITTED:b({key:"primary",message:u("strong",{children:"You have submitted a data access request."})});break;case Ae.APPROVED:b({key:"success",message:u("strong",{children:"Your data access request has been approved."})});break;case Ae.REJECTED:b({key:"danger",message:N(U,{children:[u("strong",{children:"Your data access request has been rejected."}),u("br",{}),R.rejectedReason||""]})});break}return u(U,{})},O=o.termsOfUse,I=o.actContactInfo,L=o.concreteType===ke.TermsOfUseAccessRequirement,D=o.concreteType===ke.ACTAccessRequirement,M=L&&O||D&&I;let V=u(U,{});n?V=N("div",{className:"AcceptRequirementsMarkdown",children:[n&&u(Ve,{wikiId:n==null?void 0:n.wikiPageId,ownerId:n==null?void 0:n.ownerObjectId,objectType:n==null?void 0:n.ownerObjectType}),v&&u(vr,{className:"access-requirement-list-alert",variant:v.key,children:v.message})]}):M&&(V=u(Ve,{markdown:L?O:I}));const E=o.concreteType===ke.ManagedACTAccessRequirement;return u(U,{children:N("div",{"data-testid":"RequestDataAccess",className:"requirement-container",children:[u(Lt,{isCompleted:p}),N("div",{className:"terms-of-use-content",children:[p?N("div",{children:[u("p",{children:E?"Your data access request has been approved.":"You have accepted the terms of use."}),N("p",{style:{marginBottom:"0"},children:[E&&u("button",{className:"update-request-button",onClick:()=>{y()},style:{paddingLeft:"0",marginRight:"2rem"},children:_()}),u("a",{onClick:()=>{c(!d)},children:"View Terms"})]}),u("div",{className:`view-terms ${d?"hidden":"show"}`,children:V})]}):V,a&&N("div",{className:`button-container ${p?"hide":"default"}`,children:[u("div",{className:"accept-button-container",children:u("button",{className:"accept-button",onClick:w,children:_()})}),u("div",{className:"not-accept-button-container",children:u("button",{className:"not-accpet-button",onClick:()=>i==null?void 0:i(),children:"I do not accept"})})]})]})]})})};try{_o.displayName="RequestDataAccess",_o.__docgenInfo={description:"",displayName:"RequestDataAccess",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPageKey | undefined"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement | ManagedACTAccessRequirement | SelfSignAccessRequirement | TermsOfUseAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!1,type:{name:"ManagedACTAccessRequirementStatus"}},showButton:{defaultValue:null,description:"",name:"showButton",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccess.tsx#RequestDataAccess"]={docgenInfo:_o.__docgenInfo,name:"RequestDataAccess",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccess.tsx#RequestDataAccess"})}catch{}const dI=e=>{const{entityId:t,user:n,accessRequirement:r,accessRequirementStatus:o,onHide:a,requestDataStepCallback:i}=e,{accessToken:s}=le(),[l,d]=T.exports.useState();return T.exports.useEffect(()=>{(async()=>{try{const f=await wa(s,r.id);d(f)}catch(f){console.error("Error on get ManagedACTAccessRequirement",f)}})()},[s,r]),u(_o,{accessRequirement:r,accessRequirementStatus:o,entityId:t,user:n,wikiPage:l,onHide:a,requestDataStepCallback:i})};try{ManagedACTAccessRequirement.displayName="ManagedACTAccessRequirement",ManagedACTAccessRequirement.__docgenInfo={description:"",displayName:"ManagedACTAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"ManagedACTAccessRequirementStatus"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((props: requestDataStepCallbackProps) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/ManagedACTAccessRequirement.tsx#ManagedACTAccessRequirement"]={docgenInfo:ManagedACTAccessRequirement.__docgenInfo,name:"ManagedACTAccessRequirement",path:"src/lib/containers/access_requirement_list/managedACTAccess/ManagedACTAccessRequirement.tsx#ManagedACTAccessRequirement"})}catch{}const Eo=e=>{const{requestDataStepCallback:t,managedACTAccessRequirement:n,onHide:r}=e,{accessToken:o}=le(),[a,i]=T.exports.useState(""),[s,l]=T.exports.useState(""),[d,c]=T.exports.useState(""),[f,p]=T.exports.useState(),g=T.exports.useRef({});let h=!0;T.exports.useEffect(()=>(h&&(p(void 0),m()),()=>{h=!1}),[o]);const m=async()=>{try{const C=await ag(String(n.id),o);C.id&&(g.current=C,i(C.projectLead),l(C.institution),c(C.intendedDataUseStatement))}catch(C){console.log("RequestDataAccessStep1: Error getting research project data: ",C)}},v=(C="")=>N(U,{children:[u("strong",{children:"Unable to update research project data."}),u("br",{}),C]});return u(U,{children:N(fe,{className:"access-request-form1",onSubmit:C=>{C.preventDefault();const S=Object.assign({},g.current,{accessRequirementId:String(n.id),institution:s,projectLead:a,intendedDataUseStatement:d});try{ig(S,o).then(y=>{t==null||t({managedACTAccessRequirement:n,step:2,researchProjectId:y.id})}).catch(y=>{console.log("RequestDataAccessStep1: Error updating research project data: ",y),p({key:"danger",message:v(y.reason)})})}catch(y){console.log("RequestDataAccessStep1: Error updating research project data: ",y),p({key:"danger",message:v(y.reason)})}},children:[u(ae.Header,{closeButton:!0,children:u(ae.Title,{className:"AccessRequirementList__title",children:"Request Access"})}),N(ae.Body,{children:[u("p",{children:"Please tell us about your project."}),N(fe.Group,{children:[u(fe.Label,{htmlFor:"project-lead",children:"Project Lead"}),u(fe.Control,{id:"project-lead",type:"text",value:a,required:!0,onChange:C=>i(C.target.value)})]}),N(fe.Group,{children:[u(fe.Label,{htmlFor:"institution",children:"Institution"}),u(fe.Control,{id:"institution",type:"text",value:s,required:!0,onChange:C=>l(C.target.value)})]}),n.isIDURequired&&N(fe.Group,{children:[N(fe.Label,{htmlFor:"data-use",children:["Intended Data Use Statement -",n.isIDUPublic&&u("i",{id:"idu-visible",children:"this will be visible to the public"})]}),u(fe.Control,{id:"data-use",as:"textarea",value:d,rows:10,required:!0,onChange:C=>c(C.target.value)})]}),f&&u(vr,{variant:f.key,children:f.message})]}),N(ae.Footer,{children:[u(be,{variant:"link",onClick:()=>r==null?void 0:r(),children:"Cancel"}),u(be,{variant:"primary",type:"submit",children:"Save changes"})]})]})})};try{Eo.displayName="RequestDataAccessStep1",Eo.__docgenInfo={description:"",displayName:"RequestDataAccessStep1",props:{requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((props: requestDataStepCallbackProps) => void)"}},managedACTAccessRequirement:{defaultValue:null,description:"",name:"managedACTAccessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep1.tsx#RequestDataAccessStep1"]={docgenInfo:Eo.__docgenInfo,name:"RequestDataAccessStep1",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep1.tsx#RequestDataAccessStep1"})}catch{}const $t=e=>{const{id:t,fileHandleAssociation:n,className:r,variant:o,fileName:a}=e,{accessToken:i}=le(),s=async()=>{if(!n.fileHandleId||!i)return;const l={requestedFiles:[n],includePreSignedURLs:!0,includeFileHandles:!1,includePreviewPreSignedURLs:!1};try{const c=(await wn(l,i)).requestedFiles[0].preSignedURL;c?window.open(c):console.log("Fail to get file download link")}catch(d){console.log("Fail to get file download link",d)}};return u(U,{children:u(be,{id:t,variant:o,className:r,onClick:l=>s(),children:a})})};try{$t.displayName="DirectDownloadButton",$t.__docgenInfo={description:"",displayName:"DirectDownloadButton",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!0,type:{name:"string | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DirectDownloadButton.tsx#DirectDownloadButton"]={docgenInfo:$t.__docgenInfo,name:"DirectDownloadButton",path:"src/lib/containers/DirectDownloadButton.tsx#DirectDownloadButton"})}catch{}const xo=e=>{const{requestDataStepCallback:t,managedACTAccessRequirement:n,entityId:r,user:o,researchProjectId:a}=e,{accessToken:i}=le(),[s,l]=T.exports.useState(),[d,c]=T.exports.useState(),[f,p]=T.exports.useState(),[g,h]=T.exports.useState([]),[m,v]=T.exports.useState(),[b,C]=T.exports.useState(),[S,y]=T.exports.useState(!1),[w,_]=T.exports.useState([]),x={},O={requestedFiles:[],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1};let I=!0;T.exports.useEffect(()=>(I&&(C(void 0),L()),()=>{I=!1}),[i,a]);const L=async()=>{const q=await sg(String(n.id),i);if(q.accessorChanges){const A=new Set;q.accessorChanges=q.accessorChanges.filter($=>A.has($.userId)?!1:A.add($.userId))}q.concreteType==="org.sagebionetworks.repo.model.dataaccess.Renewal"&&y(!0),q.researchProjectId=a,v(q),D(q),M(q)},D=q=>{const A=q.accessorChanges,$=[];!A||!A.length?($.push(o.ownerId),v(G=>Object.assign({},G,{accessorChanges:[{userId:o.ownerId,type:ft.GAIN_ACCESS}]}))):A.forEach(G=>{$.push(G.userId)});const Y=$.map(G=>lg(i,G));Promise.all(Y).then(G=>{const Z=G.map((Q,K)=>{var ve;const ce=A&&((ve=A[K])==null?void 0:ve.type)?A[K].type:ft.GAIN_ACCESS;return{profile:Q,accessType:ce}});_(Z)})},M=q=>{if(n.isDUCRequired&&n.ducTemplateFileHandleId){const A={associateObjectId:String(n.id),associateObjectType:Me.AccessRequirementAttachment,fileHandleId:n.ducTemplateFileHandleId};O.requestedFiles.push(A),x[n.ducTemplateFileHandleId]||(x[n.ducTemplateFileHandleId]=[]),x[n.ducTemplateFileHandleId].push("DUCTemplate"),l(A)}if(n.isDUCRequired&&q.ducFileHandleId){const A={associateObjectId:q.id,associateObjectType:Me.DataAccessRequestAttachment,fileHandleId:q.ducFileHandleId};O.requestedFiles.push(A),x[q.ducFileHandleId]||(x[q.ducFileHandleId]=[]),x[q.ducFileHandleId].push("DUC"),c(A)}if(n.isIRBApprovalRequired&&q.irbFileHandleId){const A={associateObjectId:q.id,associateObjectType:Me.DataAccessRequestAttachment,fileHandleId:q.irbFileHandleId};O.requestedFiles.push(A),x[q.irbFileHandleId]||(x[q.irbFileHandleId]=[]),x[q.irbFileHandleId].push("IRB"),p(A)}q.attachments&&q.attachments.length&&q.attachments.forEach(A=>{O.requestedFiles.push({associateObjectId:q.id,associateObjectType:Me.DataAccessRequestAttachment,fileHandleId:A}),x[A]||(x[A]=[]),x[A].push("attachments")}),O.requestedFiles.length&&wn(O,i).then(A=>{A.requestedFiles.forEach($=>{const Y=$.fileHandle.fileName,G=x[$.fileHandleId];G.forEach(Z=>{switch(Z){case"DUCTemplate":l(Q=>Object.assign({},Q,{fileName:Y})),x[$.fileHandleId].splice(G.indexOf("DUCTemplate"),1);break;case"DUC":c(Q=>Object.assign({},Q,{fileName:Y})),x[$.fileHandleId].splice(G.indexOf("DUC"),1);break;case"IRB":p(Q=>Object.assign({},Q,{fileName:Y})),x[$.fileHandleId].splice(G.indexOf("IRB"),1);break;case"attachments":h(Q=>[...Q,{fileName:Y,associateObjectId:q.id,associateObjectType:Me.DataAccessRequestAttachment,fileHandleId:$.fileHandleId}]),x[$.fileHandleId].splice(G.indexOf("attachments"),1);break}})})})},V=async()=>{if(m)try{const q=await af(m,i);if(q&&q.etag){const A={requestId:q.id,requestEtag:q.etag,subjectId:r,subjectType:Ta.ENTITY};v(G=>Object.assign({},G,{etag:q.etag}));const $=await dg(A,i),Y=k($);$.state===Ae.REJECTED?C({key:"danger",message:Y}):t==null||t({step:5})}else C({key:"danger",message:E()})}catch(q){console.log("RequestDataAccessStep2: Error updating form",q),C({key:"danger",message:E(q.reason)})}},E=(q="")=>N(U,{children:[u("strong",{children:"Sorry, there is an error in submitting your request."}),u("br",{}),q]}),k=q=>{const A="The information has been ";switch(q.state){case Ae.SUBMITTED:return N("strong",{children:[A," submitted."]});case Ae.APPROVED:return N("strong",{children:[A," approved."]});case Ae.CANCELLED:return N("strong",{children:[A," canceled."]});case Ae.REJECTED:return N(U,{children:[N("strong",{children:[A," rejected."]})," ",q.rejectedReason,". Please close this dialog and try again later."]});default:return u(U,{})}},R=q=>{const A=w.filter(Y=>Y.profile.ownerId!==q);_(A);const $=A.map(Y=>({userId:Y.profile.ownerId,type:Y.accessType}));v(Y=>Object.assign({},Y,{accessorChanges:$}))},P=q=>{const A=g.filter(Y=>Y.fileHandleId!==q);h(A);const $=A.map(Y=>Y.fileHandleId);v(Y=>Object.assign({},Y,{attachments:$}))},B=q=>{if(q.resp&&q.success){const A=q.resp;if(q.context==="attachments"){const $=m!=null&&m.attachments?m==null?void 0:m.attachments:[];$==null||$.push(A.fileHandleId),v(Y=>Object.assign({},Y,{attachments:$})),h(Y=>[...Y,{fileName:A.fileName,fileHandleId:A.fileHandleId}])}else v($=>Object.assign({},$,{[q.context]:A.fileHandleId})),q.context==="ducFileHandleId"&&c($=>Object.assign({},$,{fileName:A.fileName,fileHandleId:A.fileHandleId})),q.context==="irbFileHandleId"&&p($=>Object.assign({},$,{fileName:A.fileName,fileHandleId:A.fileHandleId}))}else!q.success&&q.error&&(console.log("RequestDataAccessStep2: Error uploading the file",q.error),C({key:"danger",message:E(q.error.reason)}))},H=q=>{if(!w.map($=>$.profile.ownerId).includes(q.ownerId)){_(G=>{var Z,Q;return[...G,{profile:{ownerId:q.ownerId,firstName:(Z=q.firstName)!=null?Z:"",lastName:(Q=q.lastName)!=null?Q:"",userName:q.userName},accessType:ft.GAIN_ACCESS}]});const $={userId:q.ownerId,type:ft.GAIN_ACCESS},Y=(m==null?void 0:m.accessorChanges)||[];Y.push($),v(G=>Object.assign({},G,{accessorChanges:Y}))}},F=(q,A)=>{const $=q.target.value;switch(A){case"publications":v(Y=>Object.assign({},Y,{publication:$}));break;case"summaryOfUse":v(Y=>Object.assign({},Y,{summaryOfUse:$}));break}},z=(q,A)=>{const $=[...w],Y=$.findIndex(Q=>Q.profile.ownerId===A);$[Y].accessType=q,_($);const G=(m==null?void 0:m.accessorChanges)||[],Z=G.findIndex(Q=>Q.userId===A);G[Z].type=q,v(Q=>Object.assign({},Q,{accessorChanges:G}))},j=()=>{let q="",A="";return n.isCertifiedUserRequired&&(q="https://help.synapse.org/docs/User-Types.2007072795.html#UserAccountTiers-CertifiedUsers",A="All data requesters must be a certified user."),n.isValidatedProfileRequired&&(q="https://help.synapse.org/docs/User-Types.2007072795.html#UserAccountTiers-ValidatedUsers",A="All data requesters must have a validated user profile."),q&&A?N(U,{children:[A,u("a",{href:q,target:"_blank",rel:"noreferrer",children:u(he,{options:{icon:"info"}})})]}):u(U,{})};return u(U,{children:N(fe,{className:"access-request-form2",onSubmit:q=>q.preventDefault(),children:[u(ae.Header,{closeButton:!0,children:u(ae.Title,{className:"AccessRequirementList__title",children:"Request Access"})}),N(ae.Body,{children:[u("p",{children:"Please provide the information below to submit the request for access."}),N(fe.Group,{children:[u(fe.Label,{htmlFor:"requesters",style:{margin:"0"},children:"Data Requesters"}),u("br",{}),N("span",{className:"requester-label",children:[n.isDUCRequired&&N(U,{children:["This list should match those listed on your DUC.",u("br",{})]}),j()]}),u(yv,{id:"requesters",typeFilter:cg.USERS_ONLY,onSelectCallback:H,filterUserIds:w.map(q=>q.profile.ownerId)})]}),u(fe.Group,{style:{marginBottom:"4rem"},children:w.map((q,A)=>N("div",{className:"list-items",children:[u(al,{userProfile:q.profile,showAccountLevelIcon:!0,disableLink:!0,showFullName:!0}),o.ownerId!==q.profile.ownerId&&q.accessType===ft.GAIN_ACCESS&&u(be,{className:"clear-x",variant:"link",onClick:()=>R(q.profile.ownerId),children:u(he,{options:{icon:"clear"}})}),S&&q.accessType!==ft.GAIN_ACCESS&&u(U,{children:u(vv,{id:`accessor-renewal-${q.profile.ownerId}`,value:q.accessType,options:[{label:"Renew",value:ft.RENEW_ACCESS},{label:"Revoke",value:ft.REVOKE_ACCESS}],onChange:$=>z($,q.profile.ownerId)})})]},`accessor-${A}`))}),(n==null?void 0:n.isDUCRequired)&&N(U,{children:[N(fe.Group,{children:[u(fe.Label,{htmlFor:"duc-temp",className:"SRC-noMargin",children:"DUC template"}),u("br",{}),s&&u("div",{children:u($t,{fileHandleAssociation:{associateObjectId:s==null?void 0:s.associateObjectId,associateObjectType:s.associateObjectType,fileHandleId:s.fileHandleId},fileName:s.fileName,id:"duc-temp",variant:"link",className:"SRC-noPadding"})})]}),N(fe.Group,{children:[u(fe.Label,{htmlFor:"duc",className:"SRC-noMargin",children:"Upload DUC"}),u("br",{}),d&&u("div",{children:u($t,{fileHandleAssociation:{associateObjectId:d.associateObjectId,associateObjectType:d.associateObjectType,fileHandleId:d.fileHandleId},fileName:d==null?void 0:d.fileName,id:"duc-download",variant:"link",className:"SRC-noPadding"})}),u(Ba,{id:"duc-browse",variant:"light-primary-base",uploadCallback:B,context:"ducFileHandleId"})]})]}),(n==null?void 0:n.isIRBApprovalRequired)&&N(fe.Group,{children:[u(fe.Label,{htmlFor:"irb",className:"SRC-noMargin",children:"Upload IRB approval"}),u("br",{}),f&&u("div",{children:u($t,{fileHandleAssociation:{associateObjectId:f.associateObjectId,associateObjectType:f.associateObjectType,fileHandleId:f.fileHandleId},fileName:f==null?void 0:f.fileName,id:"irb-download",variant:"link",className:"SRC-noPadding"})}),u(Ba,{id:"irb-browse",variant:"light-primary-base",uploadCallback:B,context:"irbFileHandleId"})]}),(n==null?void 0:n.areOtherAttachmentsRequired)&&N(fe.Group,{children:[u(fe.Label,{className:"SRC-noMargin",children:"Upload other required documents"}),u("br",{}),g.map((q,A)=>N("div",{className:"list-items",children:[u($t,{fileHandleAssociation:{associateObjectId:q.associateObjectId,associateObjectType:q.associateObjectType,fileHandleId:q.fileHandleId},fileName:q==null?void 0:q.fileName,variant:"link",className:"SRC-noPadding attachment-download"}),u(be,{className:"clear-x",variant:"link",onClick:()=>P(q.fileHandleId),children:u(he,{options:{icon:"clear"}})})]},`file-attachment-${A}`)),u(Ba,{id:"attachment-browse",variant:"light-primary-base",uploadCallback:B,context:"attachments"})]}),S&&N(U,{children:[N(fe.Group,{children:[u(fe.Label,{htmlFor:"publications",className:"SRC-noMargin",children:"Publication(s)"}),u(fe.Control,{id:"publications",as:"textarea",rows:3,onChange:q=>F(q,"publications")})]}),N(fe.Group,{children:[u(fe.Label,{htmlFor:"summaryOfUse",className:"SRC-noMargin",children:"Summary of use"}),u(fe.Control,{id:"summaryOfUse",as:"textarea",rows:3,onChange:q=>F(q,"summaryOfUse")})]})]}),b&&u(vr,{variant:b.key,children:b.message})]}),u(ae.Footer,{children:N(U,{children:[u(be,{variant:"link",onClick:()=>t==null?void 0:t({step:3,formSubmitRequestObject:m}),children:"Cancel"}),u(be,{variant:"primary",onClick:()=>V(),children:"Submit"})]})})]})})};try{xo.displayName="RequestDataAccessStep2",xo.__docgenInfo={description:"",displayName:"RequestDataAccessStep2",props:{managedACTAccessRequirement:{defaultValue:null,description:"",name:"managedACTAccessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!0,type:{name:"(props: requestDataStepCallbackProps) => void"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile"}},researchProjectId:{defaultValue:null,description:"",name:"researchProjectId",required:!0,type:{name:"string"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep2.tsx#RequestDataAccessStep2"]={docgenInfo:xo.__docgenInfo,name:"RequestDataAccessStep2",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep2.tsx#RequestDataAccessStep2"})}catch{}const To=e=>{const{onHide:t}=e;return N(U,{children:[u(ae.Header,{closeButton:!0,children:u(ae.Title,{className:"AccessRequirementList__title",children:"Your Data Access Request Has Been Submitted!"})}),u(ae.Body,{children:u("p",{style:{margin:"2rem 0"},children:"Your data access request been submitted and is currently being reviewed. Please allow for up to 2 weeks for your request to be reviewed and approved."})}),u(ae.Footer,{children:u(be,{variant:"primary",onClick:()=>t==null?void 0:t(),children:"Finish"})})]})};try{To.displayName="RequestDataAccessSuccess",To.__docgenInfo={description:"",displayName:"RequestDataAccessSuccess",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessSuccess.tsx#RequestDataAccessSuccess"]={docgenInfo:To.__docgenInfo,name:"RequestDataAccessSuccess",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessSuccess.tsx#RequestDataAccessSuccess"})}catch{}function uI({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:o}){const{accessToken:a}=le(),[i,s]=T.exports.useState(void 0),[l,d]=T.exports.useState(void 0),[c,f]=T.exports.useState(!1);return T.exports.useEffect(()=>{(async()=>{try{f(!0);const g=await wa(a,e.id);s(g);const h=ug|fg;if(t!=null&&t.ownerId){const m=await pg(t.ownerId,h,a);d(m)}}catch(g){console.error("Error on get Self Sign Access Requirement: ",g)}finally{f(!1)}})()},[e,a,t]),N(U,{children:[e.isCertifiedUserRequired&&N("div",{className:"requirement-container",children:[u(Lt,{isCompleted:l==null?void 0:l.isCertified}),N("div",{children:[N("p",{className:"self-sign-access-title bold-text",children:["You must first become a",u("a",{className:"self-sign-access-certified bold-text",href:`${qe.PORTAL}#!Quiz:`,children:"\xA0certified user"})]}),c&&u("span",{className:"spinner"}),u("p",{className:`self-sign-access-certified-success-text ${l!=null&&l.isCertified?"show":"hidden"}`,children:"You are a certified user"})]})]}),e.isValidatedProfileRequired&&N("div",{className:"requirement-container",children:[u(Lt,{isCompleted:l==null?void 0:l.isVerified}),N("div",{children:[N("p",{className:"self-sign-access-title bold-text",children:["You must first apply to have your",u("a",{className:"self-sign-access-validated bold-text",href:`${qe.PORTAL}#!Profile:v/settings`,children:"\xA0user profile validated"})]}),c&&u("span",{className:"spinner"}),u("p",{className:`self-sign-access-verified-success-text ${l!=null&&l.isVerified?"show":"hidden"}`,children:"You have applied to have user profile valiadation successfully"})]})]}),u(gn,{user:t,wikiPage:i,accessRequirement:e,accessRequirementStatus:r,onHide:n,entityId:o})]})}try{SelfSignAccessRequirement.displayName="SelfSignAccessRequirement",SelfSignAccessRequirement.__docgenInfo={description:"",displayName:"SelfSignAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"SelfSignAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/SelfSignAccessRequirement.tsx#SelfSignAccessRequirement"]={docgenInfo:SelfSignAccessRequirement.__docgenInfo,name:"SelfSignAccessRequirement",path:"src/lib/containers/access_requirement_list/SelfSignAccessRequirement.tsx#SelfSignAccessRequirement"})}catch{}function fI({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:o}){const{accessToken:a}=le(),[i,s]=T.exports.useState(void 0),[l,d]=T.exports.useState(!1);return T.exports.useEffect(()=>{(async()=>{d(!0);try{const f=await wa(a,e.id);s(f)}catch(f){console.error("Error on prepare terms of use ",f)}finally{d(!1)}})()},[a,e]),N(U,{children:[l&&u("span",{className:"spinner"}),u(gn,{user:t,wikiPage:i,accessRequirement:e,accessRequirementStatus:r,onHide:n,entityId:o})]})}try{TermsOfUseAccessRequirement.displayName="TermsOfUseAccessRequirement",TermsOfUseAccessRequirement.__docgenInfo={description:"",displayName:"TermsOfUseAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"TermsOfUseAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/TermsOfUseAccessRequirement.tsx#TermsOfUseAccessRequirement"]={docgenInfo:TermsOfUseAccessRequirement.__docgenInfo,name:"TermsOfUseAccessRequirement",path:"src/lib/containers/access_requirement_list/TermsOfUseAccessRequirement.tsx#TermsOfUseAccessRequirement"})}catch{}var ke=(e=>(e.SelfSignAccessRequirement="org.sagebionetworks.repo.model.SelfSignAccessRequirement",e.TermsOfUseAccessRequirement="org.sagebionetworks.repo.model.TermsOfUseAccessRequirement",e.ManagedACTAccessRequirement="org.sagebionetworks.repo.model.ManagedACTAccessRequirement",e.ACTAccessRequirement="org.sagebionetworks.repo.model.ACTAccessRequirement",e))(ke||{});const Oo=e=>e.filter(pI).length>0,pI=e=>{switch(e.concreteType){case"org.sagebionetworks.repo.model.ACTAccessRequirement":case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":return!1;default:return!0}},Qu=async(e,t)=>{const n=t.map(i=>gg(e,i.id)),r=await Promise.all(n),o=t.map(i=>({accessRequirement:i,accessRequirementStatus:r.find(s=>Number(s.accessRequirementId)===i.id)}));return av(o,i=>-1*Number(i.accessRequirementStatus.isApproved))};function No({entityId:e,onHide:t,accessRequirementFromProps:n,renderAsModal:r,numberOfFilesAffected:o}){var L;const{accessToken:a}=le(),[i,s]=T.exports.useState(void 0),[l,d]=T.exports.useState(),[c,f]=T.exports.useState(),[p,g]=T.exports.useState(""),[h,m]=T.exports.useState(),v={ids:[e],type:"ENTITY_HEADER"},C=lI(a)||!i,S=pf(v),{data:y}=hg();T.exports.useEffect(()=>{let D=!1;return(async()=>{try{if(!C)return;if(n){const V=await Qu(a,n);D||s(V)}else{const V=await sf(a,e),E=await Qu(a,V);D||s(E)}}catch(V){console.error("Error on get access requirements: ",V)}})(),()=>{D=!0}},[a,e,n,C]);const w=Boolean(a),_=(D,M)=>{switch(D.concreteType){case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":return u(uI,{accessRequirement:D,accessRequirementStatus:M,user:y,onHide:t,entityId:e});case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":return u(fI,{accessRequirement:D,accessRequirementStatus:M,user:y,onHide:t,entityId:e});case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":return u(dI,{accessRequirement:D,accessRequirementStatus:M,user:y,onHide:t,entityId:e,requestDataStepCallback:x});case"org.sagebionetworks.repo.model.ACTAccessRequirement":return u(cI,{accessRequirement:D,accessRequirementStatus:M,user:y,onHide:t,entityId:e});default:return}},x=D=>{const{managedACTAccessRequirement:M,step:V,researchProjectId:E,formSubmitRequestObject:k}=D;M&&f(M),E&&g(E),k&&m(k),d(V)},O=N(U,{children:[u(ae.Header,{closeButton:!0,children:u(ae.Title,{className:"AccessRequirementList__title",children:"Data Access Request"})}),u(ae.Body,{children:N("div",{children:[u("h4",{className:"AccessRequirementList__instruction AccessRequirementList__access",children:"Access For:"}),u("span",{className:"AccessRequirementList__file-icon-container",children:u(he,{options:{icon:"file",size:"30px"}})}),"\xA0",o&&N("span",{children:[o," File(s)"]}),!o&&u("a",{className:"AccessRequirementList__register-text-link",href:`${qe.PORTAL}#!Synapse:${e}`,children:(L=S[0])==null?void 0:L.name}),u("h4",{className:"AccessRequirementList__instruction",style:{marginTop:"3rem"},children:"What do I need to do?"}),N("div",{className:"requirement-container",children:[u(Lt,{isCompleted:w}),N("div",{children:[!w&&N(U,{children:[N("p",{className:"AccessRequirementList__signin",children:[u("a",{className:`${Ks} SRC-boldText `,children:"Sign in\xA0"}),"with a Sage Platform (Synapse) user account."]}),N("p",{children:["If you do not have a Sage Account, you can",u("a",{className:"register-text-link bold-text",href:`${qe.PORTAL}#!RegisterAccount:0`,children:"\xA0Register for free."})]})]}),w&&N("p",{children:["You have signed in with the Sage Platform (Synapse) user account ",N("b",{children:[y==null?void 0:y.userName,"@synapse.org"]})]})]})]}),i==null?void 0:i.map(({accessRequirement:D,accessRequirementStatus:M})=>u(ge.Fragment,{children:_(D,M)},D.id))]})})]});let I=O;if(r){switch(l){case 1:I=u(Eo,{managedACTAccessRequirement:c,requestDataStepCallback:x,onHide:()=>t==null?void 0:t()});break;case 2:I=u(xo,{user:y,researchProjectId:p,managedACTAccessRequirement:c,entityId:e,requestDataStepCallback:x,onHide:()=>t==null?void 0:t()});break;case 3:I=u(Co,{formSubmitRequestObject:h,onHide:()=>t==null?void 0:t()});break;case 4:I=N(U,{children:[u(ae.Header,{closeButton:!1,children:u(ae.Title,{className:"AccessRequirementList__title",children:"Please Log In"})}),u(ae.Body,{className:"AccessRequirementList login-modal ",children:u(mg,{sessionCallback:()=>{window.location.reload()}})})]});break;case 5:I=u(To,{onHide:()=>t==null?void 0:t()});break;default:I=O}return u(ae,{className:l?"bootstrap-4-backport AccessRequirementList modal-auto-height":"bootstrap-4-backport AccessRequirementList",onHide:()=>t==null?void 0:t(),show:!0,animation:!1,centered:!0,scrollable:!0,size:"lg",children:I})}return u("div",{className:"AccessRequirementList",children:I})}try{No.displayName="AccessRequirementList",No.__docgenInfo={description:"",displayName:"AccessRequirementList",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirementFromProps:{defaultValue:null,description:"",name:"accessRequirementFromProps",required:!1,type:{name:"AccessRequirement[]"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},renderAsModal:{defaultValue:null,description:"",name:"renderAsModal",required:!1,type:{name:"boolean"}},numberOfFilesAffected:{defaultValue:null,description:"",name:"numberOfFilesAffected",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AccessRequirementList.tsx#AccessRequirementList"]={docgenInfo:No.__docgenInfo,name:"AccessRequirementList",path:"src/lib/containers/access_requirement_list/AccessRequirementList.tsx#AccessRequirementList"})}catch{}try{Oo.displayName="checkHasUnsportedRequirement",Oo.__docgenInfo={description:"",displayName:"checkHasUnsportedRequirement",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AccessRequirementList.tsx#checkHasUnsportedRequirement"]={docgenInfo:Oo.__docgenInfo,name:"checkHasUnsportedRequirement",path:"src/lib/containers/access_requirement_list/AccessRequirementList.tsx#checkHasUnsportedRequirement"})}catch{}const hI={AccessBlockedToAnonymous:{icon:"accessClosed",color:e=>e.colors.warning,tooltipText:"You must sign in to access this file."},AccessBlockedByRestriction:{icon:"accessClosed",color:e=>e.colors.warning,tooltipText:"You must request access to this restricted file."},AccessBlockedByACL:{icon:"accessClosed",color:e=>e.colors.warning,tooltipText:"You do not have download access for this item."},Accessible:{icon:"accessOpen",color:e=>e.colors.success,tooltipText:""},NoFileHandle:{icon:"accessOpen",color:e=>e.colors.success,tooltipText:""}};function Xu(e){const{downloadType:t}=e;if(t){const n=hI[t];return u(yg.Consumer,{children:r=>u(he,{options:{icon:n.icon,color:n.color(r),label:n.tooltipText}})})}return u(U,{})}function Io(e,t){const[n,r]=ge.useState(),{accessToken:o}=le(),{data:a,error:i}=Hv(e,{includeEntity:!0,includePermissions:!0},parseInt(t!=null?t:"")),s=ge.useMemo(()=>({restrictableObjectType:Ta.ENTITY,objectId:e}),[e]),{data:l}=Pf(s),d=a==null?void 0:a.entity,c=a==null?void 0:a.permissions;return ge.useEffect(()=>{l&&l.hasUnmetAccessRequirement?r("AccessBlockedByRestriction"):d&&(c==null?void 0:c.canDownload)?qg(d)&&d.dataFileHandleId?r("Accessible"):r("NoFileHandle"):c&&!c.canDownload&&r(o?"AccessBlockedByACL":"AccessBlockedToAnonymous")},[o,d,i,c,l]),n}function Ro(e){const[t,n]=ge.useState(!1),[r,o]=ge.useState([]),{entityId:a,entityVersionNumber:i}=e,s=Io(a,i),{accessToken:l}=le(),d=ge.useMemo(()=>({restrictableObjectType:Ta.ENTITY,objectId:a}),[a]),{data:c}=Pf(d),f=()=>{sf(l,a).then(h=>{Oo(h)?window.open(`${Pg(Mg.PORTAL_ENDPOINT)}#!AccessRequirements:ID=${a}&TYPE=ENTITY`,"_blank"):(o(h),n(!0))})},p=T.exports.useMemo(()=>{if(!c)return u(U,{});const h=c==null?void 0:c.hasUnmetAccessRequirement,m=c==null?void 0:c.restrictionLevel;let v="";if(h)v="Request Access";else{if(Vf.OPEN===m)return u(U,{});v="View Terms"}return N(U,{children:[u("a",{style:{fontSize:"14px",cursor:"pointer",marginLeft:"5px",verticalAlign:"middle"},className:e.className,onClick:f,children:v}),t&&u(No,{entityId:a,accessRequirementFromProps:r,renderAsModal:!0,onHide:()=>{n(!1)}})]})},[a,c,r,t]);return s===void 0?u(U,{}):N("span",{style:{whiteSpace:"nowrap"},children:[s==="AccessBlockedToAnonymous"?u("button",{type:"button",className:Ks,onClick:h=>{if(h.isTrusted){const m=new MouseEvent("click",{bubbles:!0});h.currentTarget.dispatchEvent(m)}},children:u(Xu,{downloadType:s})}):u(Xu,{downloadType:s}),p]})}try{Io.displayName="useGetFileHandleDownloadType",Io.__docgenInfo={description:`Determines whether an Entity is accessible for download, or if it is blocked by the ACL or unmet Access Requirements.

To make download available, and determine if the file is downloadable via the web, see {@link DirectDownload.tsx }`,displayName:"useGetFileHandleDownloadType",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HasAccessV2.tsx#useGetFileHandleDownloadType"]={docgenInfo:Io.__docgenInfo,name:"useGetFileHandleDownloadType",path:"src/lib/containers/HasAccessV2.tsx#useGetFileHandleDownloadType"})}catch{}try{Ro.displayName="HasAccessV2",Ro.__docgenInfo={description:`HasAccess shows if the user has access to the file or not.

The component's behavior changes whether it's passed in a FileHandle or not.
If passed a file handle then it will give more detailed information about the download.`,displayName:"HasAccessV2",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HasAccessV2.tsx#HasAccessV2"]={docgenInfo:Ro.__docgenInfo,name:"HasAccessV2",path:"src/lib/containers/HasAccessV2.tsx#HasAccessV2"})}catch{}const Ao=e=>{const{accessToken:t}=le(),{entityIdList:n}=e,[r,o]=T.exports.useState([u(U,{})]),{ref:a,inView:i}=xn();let s=!0;T.exports.useEffect(()=>(i&&l(),()=>{s=!1}),[n,i]);const l=()=>{!n.length||vg(n,t).then(d=>{if(s){const c=d.results.map(f=>u("p",{children:u(_s,{entity:f,displayTextField:"name"})},f.id));o(c)}}).catch(d=>{console.log("EntityIdList: Error getting entity headers",d)})};return u("span",{ref:a,children:r})};try{Ao.displayName="EntityIdList",Ao.__docgenInfo={description:"",displayName:"EntityIdList",props:{entityIdList:{defaultValue:null,description:"",name:"entityIdList",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/EntityIdList.tsx#EntityIdList"]={docgenInfo:Ao.__docgenInfo,name:"EntityIdList",path:"src/lib/containers/EntityIdList.tsx#EntityIdList"})}catch{}const ko=e=>{const{accessToken:t}=le(),{evaluationId:n}=e,[r,o]=T.exports.useState(),{ref:a,inView:i}=xn();let s=!0;T.exports.useEffect(()=>(s&&i&&l(),()=>{s=!1}),[n,i]);const l=()=>{!n||bg(n,t).then(d=>{o(d.name)}).catch(d=>{console.log("EvaluationIdListRenderer: Error getting evaluation queue names",d)})};return u("span",{ref:a,children:r})};try{ko.displayName="EvaluationIdRenderer",ko.__docgenInfo={description:"",displayName:"EvaluationIdRenderer",props:{evaluationId:{defaultValue:null,description:"",name:"evaluationId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/EvaluationIdRenderer.tsx#EvaluationIdRenderer"]={docgenInfo:ko.__docgenInfo,name:"EvaluationIdRenderer",path:"src/lib/containers/EvaluationIdRenderer.tsx#EvaluationIdRenderer"})}catch{}const Lo=e=>{const{accessToken:t}=le(),{userIds:n}=e,[r,o]=T.exports.useState(),{ref:a,inView:i}=xn();let s=!0;T.exports.useEffect(()=>(s&&i&&l(),()=>{s=!1}),[n,i]);const l=()=>{!n.length||Sg(n,t).then(d=>{const c=d.list.map(f=>u(al,{userProfile:f,className:"SRC-marginFifteen"},f.ownerId));o(c)}).catch(d=>{console.log("UserIdList: Error getting user profiles",d)})};return u("span",{ref:a,children:r})};try{Lo.displayName="UserIdList",Lo.__docgenInfo={description:"",displayName:"UserIdList",props:{userIds:{defaultValue:null,description:"",name:"userIds",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/UserIdList.tsx#UserIdList"]={docgenInfo:Lo.__docgenInfo,name:"UserIdList",path:"src/lib/containers/UserIdList.tsx#UserIdList"})}catch{}const qo=({columnType:e,columnValue:t,isBold:n,mapEntityIdToHeader:r,mapUserIdToHeader:o,columnLinkConfig:a,rowIndex:i,columnName:s,selectColumns:l,columnModels:d,rowData:c,rowId:f,rowVersionNumber:p})=>{const{entity:g}=wt(),h=(m,v=20)=>!m||m.length<=v;if(!t)return N("p",{className:"SRC-center-text SRC-inactive",children:[" ",cv]});if(a)return u(Jn,{value:t,columnName:s,selectColumns:l,columnModels:d,isHeader:!1,labelLink:a,rowData:c});if(g&&(sn(g)||yn(g)||mf(g))&&(s==="id"||s==="name")&&f&&p){const m=`syn${f.toString()}`;if(Object.prototype.hasOwnProperty.call(r,m))return u("p",{children:u(_s,{entity:r[m],versionNumber:p,className:`${n}`,showIcon:!1,displayTextField:s})})}switch(e){case re.ENTITYID:if(Object.prototype.hasOwnProperty.call(r,t))return u("p",{children:u(_s,{entity:r[t],className:`${n}`,displayTextField:"name"})});break;case re.DATE_LIST:{const m=JSON.parse(t);return N("p",{children:[m.map((v,b)=>N("span",{className:n,children:[new Date(v).toLocaleString(),b!==m.length-1?", ":""]},b))," "]})}case re.BOOLEAN_LIST:{const m=JSON.parse(t);return u("p",{children:m.map((v,b)=>N("span",{className:n,children:[v?"true":"false",b!==m.length-1?", ":""]},b))})}case re.FILEHANDLEID:return u(U,{children:g&&u(Qn,{associatedObjectId:g.id,associatedObjectType:Me.TableEntity,fileHandleId:t,displayFileName:!0})});case re.ENTITYID_LIST:{const m=JSON.parse(t);return u(Ao,{entityIdList:m})}case re.USERID_LIST:{const m=JSON.parse(t);return u(Lo,{userIds:m})}case re.STRING_LIST:case re.INTEGER_LIST:{const m=JSON.parse(t);return u("p",{children:m.map((v,b)=>N("span",{className:n,children:[v,b!==m.length-1?", ":""]},v))})}case re.EVALUATIONID:return u(ko,{evaluationId:t});case re.DATE:return u("p",{className:n,children:new Date(Number(t)).toLocaleString()});case re.USERID:if(Object.prototype.hasOwnProperty.call(o,t)){const{ownerId:m,userName:v}=o[t];if(o[t].isIndividual===!1){const b=v===Kl?"public":"people";return v===Kl?N("span",{children:[u(he,{options:{icon:b}})," All registered Synapse users"]}):N("a",{target:"_blank",rel:"noopener noreferrer",href:`${qe.PORTAL}#!Team:${m}`,children:[u(he,{options:{icon:b}})," ",v]})}else return u(Wt,{userProfile:o[t],preSignedURL:o[t].clientPreSignedURL,size:"SMALL USER CARD"})}break;case re.LINK:return u("a",{target:"_blank",rel:"noopener noreferrer",href:t,children:t});case re.STRING:case re.DOUBLE:case re.INTEGER:case re.BOOLEAN:case re.LARGETEXT:return h(t)?N("p",{className:n,children:[" ",t]}):u("div",{className:n,children:u(Ca,{tooltipText:t,callbackFn:Sv,idForToolTip:`${s}_${i}`,children:N("p",{className:n,children:[" ",t]})})});default:return console.warn(`ColumnType ${e} has unspecified handler. Rendering the column value.`),u("p",{className:n,children:t})}return u("p",{className:n,children:t})};try{qo.displayName="SynapseTableCell",qo.__docgenInfo={description:"",displayName:"SynapseTableCell",props:{columnType:{defaultValue:null,description:"",name:"columnType",required:!0,type:{name:"enum",value:[{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'}]}},columnValue:{defaultValue:null,description:"",name:"columnValue",required:!0,type:{name:"string"}},isBold:{defaultValue:null,description:"",name:"isBold",required:!0,type:{name:"string"}},columnLinkConfig:{defaultValue:null,description:"",name:"columnLinkConfig",required:!1,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink"}},mapEntityIdToHeader:{defaultValue:null,description:"",name:"mapEntityIdToHeader",required:!0,type:{name:"Record<string, EntityHeader>"}},mapUserIdToHeader:{defaultValue:null,description:"",name:"mapUserIdToHeader",required:!0,type:{name:"Partial<UserGroupHeader & UserProfile>"}},rowIndex:{defaultValue:null,description:"",name:"rowIndex",required:!1,type:{name:"number"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}},rowVersionNumber:{defaultValue:null,description:"",name:"rowVersionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_table_functions/SynapseTableCell.tsx#SynapseTableCell"]={docgenInfo:qo.__docgenInfo,name:"SynapseTableCell",path:"src/lib/containers/synapse_table_functions/SynapseTableCell.tsx#SynapseTableCell"})}catch{}function om(){return N("div",{className:"text-center",children:[Cv,u("h4",{children:"No Matching Results"}),u("p",{children:"Try checking the spelling or removing filters."})]})}const am=window.SQLParser.lexer,Zu=(e,...t)=>{var r;const n=[];return(r=e==null?void 0:e.selectColumns)==null||r.forEach((o,a)=>{t.includes(o.columnType)&&n.push(a)}),n},Ju=(e,t,n)=>{var o;const r=new Set;return(o=e.queryResult)==null||o.queryResults.rows.forEach(a=>{a.values.forEach((i,s)=>{n.includes(s)&&!Object.prototype.hasOwnProperty.call(t,i)&&i&&r.add(i)})}),r};function mI(e){const t=[];if(Ng(e)){const n=am.tokenize(e),r=n.findIndex(i=>i[0]==="SELECT"),o=n.findIndex(i=>i[0]==="FROM");let a=0;for(let i=r+1;i<o-r-1;i+=1){const s=n[i];s[0]==="FUNCTION"&&s[1].toLowerCase()==="count"?t.push(a):s[0]==="SEPARATOR"&&(a+=1)}}return t}function gI(e,t,n){let r=am.tokenize(t);const o=r.findIndex(f=>f[0]==="SELECT"),a=r.findIndex(f=>f[0]==="FROM"),i=[];let s=0,l=!1;for(let f=o+1;f<a-o-1;f+=1){const p=r[f];p[0]==="FUNCTION"||p[1].toLocaleLowerCase()==="concat"?l=!0:p[0]==="LITERAL"&&!l?i.push({index:s,name:p[1]}):p[0]==="SEPARATOR"&&(s+=1,l=!1)}if(r=r.slice(0,r.findIndex(f=>f[0]==="GROUP")),r.splice(o+1,a-o-1,["STAR","*","1"]),n===void 0)return{synId:"",newSql:""};r.findIndex(f=>f[0]==="WHERE")===-1?r.push(["WHERE","WHERE","1"]):r.push(["CONDITIONAL","AND","1"]),i.forEach((f,p)=>{const g=e.values[f.index];g?r.push(["LITERAL",f.name,"1"],["OPERATOR","=","1"],["STRING",g,"1"],["CONDITIONAL","AND","1"]):r.push(["LITERAL",f.name,"1"],["OPERATOR","IS","1"],["BOOLEAN","null","1"],["CONDITIONAL","AND","1"])}),r.pop();const c=r[r.findIndex(f=>f[0]==="FROM")+1][1];return r.push(["EOF","","1"]),{synId:c,newSql:Ig(r)}}const yI=()=>{const{data:e,goToPage:t,pageSize:n,setPageSize:r,currentPage:o}=Wg(),a=e==null?void 0:e.queryCount,i=(l,d)=>{t(d)},s=l=>{const d=l.target.value;r(d)};return o==1&&a&&a<10?u(U,{}):N("div",{children:[u(zb,{page:o,count:Math.ceil(a/n),color:"secondary",onChange:i,style:{display:"inline-block",float:"left"}}),u(vt,{variant:"body1",style:{display:"inline-block"},children:`${a==null?void 0:a.toLocaleString()} total rows /`}),N("select",{name:"page size",onChange:s,style:{padding:"4px",marginLeft:"4px"},value:n,children:[u("option",{value:10,children:"10 per page"}),u("option",{value:25,children:"25 per page"}),u("option",{value:100,children:"100 per page"}),u("option",{value:500,children:"500 per page"})]})]})};function im(){return N(U,{children:[u("p",{className:"SRC-no-results-title",children:"There is currently no content here."}),u("p",{className:"SRC-no-results-description",children:"Information is always being updated, so check back later to see if content has been added."})]})}const Do=e=>{const{onCopy:t}=e;return u(ze,{title:"Copy IDs to the clipboard",enterNextDelay:na,placement:"right",children:u("span",{children:u("button",{"data-testid":"copySynIdsButton",onClick:t,children:u("span",{style:{height:15,marginTop:-1},children:u(he,{options:{icon:"contentCopy"}})})})})})};try{Do.displayName="InteractiveCopyIdsIcon",Do.__docgenInfo={description:"",displayName:"InteractiveCopyIdsIcon",props:{onCopy:{defaultValue:null,description:"",name:"onCopy",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/InteractiveCopyIdsIcon.tsx#InteractiveCopyIdsIcon"]={docgenInfo:Do.__docgenInfo,name:"InteractiveCopyIdsIcon",path:"src/lib/containers/InteractiveCopyIdsIcon.tsx#InteractiveCopyIdsIcon"})}catch{}const vI=()=>{const e=le(),t=wt(),[n,r]=T.exports.useState(!1),[o,a]=T.exports.useState(),[i,s]=T.exports.useState();T.exports.useEffect(()=>(i||s(new AbortController),()=>{i&&i.abort()}),[i]);const l=()=>{r(!0);const{getLastQueryRequest:d}=t,c=d(),{sql:f}=c.query,{entityId:p,versionNumber:g}=Rg(f),h=g?`.${g}`:"";c.partMask=pr,c.query={sql:`select id from ${p}${h}`},rf(c,e.accessToken,i==null?void 0:i.signal).then(m=>{a(m)}).catch(m=>{console.error(m),Gt("Unable to query for all Synapse IDs to copy","danger")}).finally(()=>{r(!1)})};return T.exports.useEffect(()=>{if(o){const{rows:d}=o.queryResult.queryResults,c=d.map(f=>`${f.values[0]}`).join(`
`);navigator.clipboard.writeText(c).then(()=>{Gt("Successfully copied to clipboard"),a(void 0)})}},[o]),n?u(bv,{size:25}):u(Do,{onCopy:()=>{l()}})},bI={id:"",name:"",type:"org.sagebionetworks.repo.model.FileEntity",versionNumber:-1,versionLabel:"",benefactorId:-1,createdBy:"",createdOn:"",modifiedBy:"",modifiedOn:"",isLatestVersion:!0},SI=["","DESC","ASC"],ef={resizeMode:"overflow",partialRefresh:"true",liveDrag:!0,headerOnly:"true"};class Xn extends T.exports.Component{constructor(t){super(t),this.tableElement=void 0,this.showGroupRowData=n=>{const r=this.props.queryContext.getLastQueryRequest().query,o=gI(n,r.sql,this.props.queryContext.data);r.sql=o.newSql;const a=JSON.stringify(r),i=btoa(a);return`${qe.PORTAL}#!Synapse:${o.synId}/tables/query/${i}`},this.renderTable=(n,r,o,a)=>{var b,C;const i=(C=(b=this.props.queryContext).getLastQueryRequest)==null?void 0:C.call(b),{queryContext:{entity:s},showAccessColumn:l,showDownloadColumn:d,isRowSelectionVisible:c}=this.props,f=s&&(sn(s)&&Dg(s)||yn(s)),p=l&&s&&this.isEntityViewOrDataset()&&this.allRowsHaveId(),g=!!this.props.synapseContext.accessToken,h=s&&f&&g&&this.allRowsHaveId(),m=!!(h&&!this.props.hideDownload),v=h&&d;return N("div",{className:"SynapseTable SRC-overflowAuto","data-testid":"SynapseTable",children:[N("table",{ref:S=>this.tableElement=S,className:"table table-striped table-condensed",children:[u("thead",{className:"SRC_bordered",children:u("tr",{children:this.createTableHeader(n,r,o,p,v,m,c,i)})}),u("tbody",{children:this.createTableRows(a,n,p,v,m,c)})]}),u("div",{className:"bootstrap-4-backport",style:{textAlign:"right"},children:u(yI,{})})]})},this.handleColumnSortPress=n=>r=>{let o=ln(this.state.columnIconSortState);o.length===0&&(o=Array(this.getLengthOfPropsData()).fill(0));const a=ln(this.state.sortedColumnSelection),i=this.findSelectionIndex(a,n.name);i!==-1&&a.splice(i,1),o[n.index]=(o[n.index]+1)%Zl.length,o[n.index]>0&&a.unshift({column:n.name,direction:SI[o[n.index]]});const s=this.props.queryContext.getLastQueryRequest();s.query.sort=a,s.query.offset=0,this.props.queryContext.executeQueryRequest(s),this.setState({columnIconSortState:o,sortedColumnSelection:a})},this.applyChangesFromQueryFilter=n=>{const r=this.props.queryContext.getLastQueryRequest();r.query.selectedFacets=n,r.query.offset=0,this.props.queryContext.executeQueryRequest(r)},this.componentDidMount=this.componentDidMount.bind(this),this.componentWillUnmount=this.componentWillUnmount.bind(this),this.componentDidUpdate=this.componentDidUpdate.bind(this),this.shouldComponentUpdate=this.shouldComponentUpdate.bind(this),this.handleColumnSortPress=this.handleColumnSortPress.bind(this),this.findSelectionIndex=this.findSelectionIndex.bind(this),this.advancedSearch=this.advancedSearch.bind(this),this.getLengthOfPropsData=this.getLengthOfPropsData.bind(this),this.configureFacetDropdown=this.configureFacetDropdown.bind(this),this.enableResize=this.enableResize.bind(this),this.disableResize=this.disableResize.bind(this),this.isEntityViewOrDataset=this.isEntityViewOrDataset.bind(this),this.allRowsHaveId=this.allRowsHaveId.bind(this),this.state={columnIconSortState:[],isExportTableDownloadOpen:!1,isExpanded:!1,isColumnSelectionOpen:!1,sortedColumnSelection:[],mapEntityIdToHeader:{},mapUserIdToHeader:{},isFetchingEntityHeaders:!1},this.getEntityHeadersInData=this.getEntityHeadersInData.bind(this)}componentWillUnmount(){this.disableResize()}componentDidMount(){this.getEntityHeadersInData(!0),this.enableResize()}shouldComponentUpdate(t,n){const{isFetchingEntityHeaders:r,...o}=this.state,{isFetchingEntityHeaders:a,...i}=n,s=!Tr(this.props,t),l=!Tr(o,i),d=s||l;return d&&this.disableResize(),d}componentDidUpdate(t,n){Tr(t.queryContext.data,this.props.queryContext.data)?t.queryContext.entity&&this.props.queryContext.entity&&!Tr(sn(t.queryContext.entity),sn(this.props.queryContext.entity))&&this.getEntityHeadersInData(!0):this.getEntityHeadersInData(!1),this.enableResize()}enableResize(){this.resizer?setTimeout(()=>{this.resizer.reset(ef)},1e3):this.tableElement&&this.getLengthOfPropsData()>1&&(this.resizer=new iI(this.tableElement,ef))}disableResize(){this.resizer&&this.resizer.reset({disable:!0})}async getEntityHeadersInData(t){var f,p,g;const{data:n,entity:r}=this.props.queryContext;if(!n||!r)return;if(this.state.isFetchingEntityHeaders&&!t)return;const o=ln(this.state.mapEntityIdToHeader),a=ln(this.state.mapUserIdToHeader),i=Zu(n,re.ENTITYID),s=Zu(n,re.USERID),l=Ju(n,o,i);(this.isEntityViewOrDataset()||r&&mf(r))&&this.allRowsHaveId()&&((g=(p=(f=n.queryResult)==null?void 0:f.queryResults)==null?void 0:p.rows)!=null?g:[]).forEach(m=>{const v=`syn${m.rowId}`;l.add(v)});const d=Ju(n,a,s);if(l.size===0&&d.size===0)return;if(this.setState({isFetchingEntityHeaders:!0}),l.size>0){const h=Array.from(l).map(m=>({targetId:m}));try{h.forEach(b=>{o[b.targetId]=bI});const m=await Ws(h,this.props.synapseContext.accessToken),{results:v}=m;v.forEach(b=>{o[b.id]=b})}catch(m){console.error("Error on retrieving entity header list , ",m)}}const c=[];if(d.size>0){const h=Array.from(d);try{(await wg(h,this.props.synapseContext.accessToken)).children.forEach(v=>{v.isIndividual?c.push(v.ownerId):a[v.ownerId]=v})}catch(m){console.error("Error on getGroupHeaders batch: ",m)}}if(c.length>0)try{(await cy(c)).list.forEach(m=>{a[m.ownerId]=m})}catch(h){console.error("Error on getUserProfile : ",h)}this.setState({mapEntityIdToHeader:o,mapUserIdToHeader:a,isFetchingEntityHeaders:!1})}render(){var m,v;if(!this.props.queryContext.data&&this.props.queryContext.isLoadingNewBundle)return Mf;if(!this.props.queryContext.data)return u(U,{});const{queryContext:{data:t},showNoContentAvailableWhenEmpty:n}=this.props,{queryResult:r,columnModels:o=[]}=t,{facets:a=[]}=t,{isExpanded:i,isExportTableDownloadOpen:s}=this.state,l=this.props.queryContext.getLastQueryRequest();let d="";if(!(((v=(m=t.queryResult)==null?void 0:m.queryResults.rows.length)!=null?v:0)>0)&&l.query.offset===0)return l.query.additionalFilters?u(om,{}):n?u(im,{}):N("div",{className:"text-center SRCBorderedPanel SRCBorderedPanel--padded2x",children:[hv,u("div",{style:{marginTop:"20px",fontStyle:"italic"},children:"This table is currently empty"})]});const{rows:f,headers:p}=r.queryResults,g=u("div",{children:this.renderTable(p,o,a,f)}),h=u(U,{children:N("div",{className:d,children:[s&&u(Yt,{onClose:()=>{this.setState({isExportTableDownloadOpen:!1})},queryBundleRequest:l}),u("div",{children:g})]})});return N(T.exports.Fragment,{children:[i&&N(ae,{animation:!1,show:!0,onHide:()=>this.setState({isExpanded:!1}),dialogClassName:"modal-90w",backdrop:"static",children:[u(ae.Header,{onHide:()=>this.setState({isExpanded:!1}),closeButton:!0}),u(ae.Body,{children:h})]}),!i&&h]})}allRowsHaveId(){var n,r;const{queryContext:{data:t}}=this.props;return(r=(n=t==null?void 0:t.queryResult)==null?void 0:n.queryResults.rows.every(o=>!!o.rowId))!=null?r:!1}isEntityViewOrDataset(){var n;const{queryContext:{entity:t}}=this.props;return(n=t&&(sn(t)||yn(t)))!=null?n:!1}createTableRows(t,n,r,o,a,i){const s=[],{queryContext:{data:l},queryVisualizationContext:{columnsToShowInTable:d,selectedRowIndices:c,setSelectedRowIndices:f},columnLinks:p=[],linkCountToDisaggregatedQuery:g=!1}=this.props,{selectColumns:h=[],columnModels:m=[]}=l,{mapEntityIdToHeader:v,mapUserIdToHeader:b}=this.state,C=mI(this.props.queryContext.getLastQueryRequest().query.sql);return t.forEach((S,y)=>{var L,D,M;const w=(L=S.versionNumber)==null?void 0:L.toString(),_=`syn${S.rowId}`,x=S.values.map((V,E)=>{const k=n[E].name,R=d.includes(k),P=p.find(j=>j.matchColumnName===k),B=this.findSelectionIndex(this.state.sortedColumnSelection,k),F=C.includes(E)&&g,z=B===-1?"":"SRC-boldText";return R?u("td",{className:"SRC_noBorderTop SRC-synapseTableTd",children:F?u("a",{href:this.showGroupRowData(S),target:"_blank",rel:"noopener noreferrer",children:u("p",{className:z,children:V})}):u(qo,{columnType:n[E].columnType,columnValue:V,isBold:z,mapEntityIdToHeader:v,mapUserIdToHeader:b,rowIndex:y,columnLinkConfig:P,columnName:k,rowData:S.values,selectColumns:h,columnModels:m,rowId:S.rowId,rowVersionNumber:S.versionNumber})},`(${y}${V}${E})`):u("td",{className:"SRC-hidden"},`(${y},${E})`)});r&&x.unshift(u("td",{className:"SRC_noBorderTop",children:u(Ro,{entityId:_,entityVersionNumber:w},_)},_));const O=((D=v[_])==null?void 0:D.type)=="org.sagebionetworks.repo.model.FileEntity";o&&x.unshift(u("td",{className:"SRC_noBorderTop direct-download",children:O&&u(Qn,{associatedObjectId:_,entityVersionNumber:w})},`direct-download-${_}`)),a&&x.unshift(u("td",{className:"SRC_noBorderTop add-to-download-list-v2",children:O&&u(wo,{entityId:_,entityVersionNumber:parseInt(w)})},`add-to-download-list-v2-${_}`)),i&&c&&x.unshift(u("td",{className:"SRC_noBorderTop",children:u(wv,{label:"",checked:c.includes(y),onChange:V=>{const E=[...c];if(V)E.push(y);else{const k=E.indexOf(y);k>-1&&E.splice(k,1)}f(E)}})},`(${y},rowSelectColumn)`));const I=u("tr",{children:x},(M=S.rowId)!=null?M:y);s.push(I)}),s}isSortableColumn(t){switch(t){case re.USERID:case re.ENTITYID:case re.FILEHANDLEID:case re.STRING_LIST:case re.INTEGER_LIST:case re.BOOLEAN_LIST:case re.DATE_LIST:case re.USERID_LIST:case re.ENTITYID_LIST:return!1;default:return!0}}createTableHeader(t,n,r,o,a,i,s,l){const{sortedColumnSelection:d,columnIconSortState:c}=this.state,{queryVisualizationContext:{facetAliases:f={},columnsToShowInTable:p},queryContext:{lockedColumn:g}}=this.props,h=t.map((m,v)=>{var C;if(p.includes(m.name)){const S=this.findSelectionIndex(d,m.name)!==-1,y=c[v]===void 0?0:c[v],w=r.findIndex(k=>k.columnName===m.name),_=w!==-1&&r[w].facetType==="enumeration",x=r[w],O=S?"SRC-primary-background-color SRC-anchor-light":"",I=S?"SRC-selected-table-icon tool-icon":"SRC-primary-text-color tool-icon",L=`SRC-tableHead SRC-hand-cursor SRC-sortPadding SRC-primary-background-color-hover  ${O}`,D=Rt(m.name,f),M=n.find(k=>k.name===m.name),V=m.name.toLowerCase()===((C=g==null?void 0:g.columnName)==null?void 0:C.toLowerCase()),E=M&&M.name=="id"&&M.columnType==re.ENTITYID;return u("th",{children:N("div",{className:"SRC-split",children:[u("span",{style:{whiteSpace:"nowrap"},children:D}),N("div",{className:"SRC-centerContent",children:[_&&!V&&this.configureFacetDropdown(x,M,l,f),this.isSortableColumn(m.columnType)&&u("span",{role:"button","aria-label":"sort",tabIndex:0,className:L,onKeyPress:this.handleColumnSortPress({index:v,name:m.name}),onClick:this.handleColumnSortPress({index:v,name:m.name}),children:u(_a,{type:Zl[y],cssClass:I})}),E&&u(vI,{})]})]})},m.name)}else return u("th",{className:"SRC-hidden"},m.name)});return o&&h.unshift(u("th",{children:u("div",{className:"SRC-centerContent",children:u("span",{style:{whiteSpace:"nowrap"},children:"Access"})})},"accessColumn")),a&&h.unshift(u("th",{children:u("div",{className:"SRC-centerContent",children:"\xA0"})},"downloadColumn")),i&&h.unshift(u("th",{"data-testid":"AddToDownloadListV2ColumnHeader",children:u("div",{className:"SRC-centerContent",children:"\xA0"})},"addToV2DownloadListColumn")),s&&h.unshift(u("th",{children:u("div",{className:"SRC-centerContent"})},"rowSelectionColumn")),h}findSelectionIndex(t,n){return t.length!==0?t.findIndex(r=>r.column===n):-1}advancedSearch(t){t&&t.preventDefault();const n=this.props.queryContext.getLastQueryRequest(),{query:r}=n,o=btoa(JSON.stringify(r)),a=n.entityId;window.open(`${qe.PORTAL}#!Synapse:${a}/tables/query/${o}`,"_blank")}getLengthOfPropsData(){var n,r;const{data:t}=this.props.queryContext;return(r=(n=t==null?void 0:t.queryResult)==null?void 0:n.queryResults.headers.length)!=null?r:0}configureFacetDropdown(t,n,r,o){return u(Gg,{containerAs:"Dropdown",facetValues:t.facetValues,columnModel:n,facetAliases:o,onChange:a=>{Kg(r,t,this.applyChangesFromQueryFilter,a)},onClear:()=>{Qg(r,t,this.applyChangesFromQueryFilter)}})}}try{Xn.displayName="SynapseTable",Xn.__docgenInfo={description:"",displayName:"SynapseTable",props:{synapseContext:{defaultValue:null,description:"",name:"synapseContext",required:!0,type:{name:"SynapseContextType"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},linkCountToDisaggregatedQuery:{defaultValue:null,description:`If true, columns created by the COUNT function will render with a link to Synapse that opens the disaggregated query results filtered by the conditions of that row.
Note that this is very brittle and only supports one column at a time. See SWC-6075 for more information. Default false.`,name:"linkCountToDisaggregatedQuery",required:!1,type:{name:"boolean"}},showNoContentAvailableWhenEmpty:{defaultValue:null,description:"",name:"showNoContentAvailableWhenEmpty",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/SynapseTable.tsx#SynapseTable"]={docgenInfo:Xn.__docgenInfo,name:"SynapseTable",path:"src/lib/containers/table/SynapseTable.tsx#SynapseTable"})}catch{}function sm(){const{data:e}=wt(),{showLastUpdatedOn:t}=mr();return t&&e&&e.lastUpdatedOn?u("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:N(vt,{variant:"body2",children:["Last updated on ",il(gr(e.lastUpdatedOn))]})}):u(U,{})}const Po=e=>{const{tableConfiguration:t,cardConfiguration:n,hideDownload:r}=e,o=le(),a=wt(),i=mr();return N("div",{className:`FilterAndView ${i.topLevelControlsState.showFacetFilter?_n:En}`,children:[t?u(Xn,{...t,synapseContext:o,queryContext:a,queryVisualizationContext:i,hideDownload:r}):u(U,{}),n?u(tr,{...n}):u(U,{}),u(sm,{})]})};try{Po.displayName="FilterAndView",Po.__docgenInfo={description:"",displayName:"FilterAndView",props:{tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!0,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext"> | undefined'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!0,type:{name:"CardConfiguration | undefined"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/query_wrapper_plot_nav/FilterAndView.tsx#FilterAndView"]={docgenInfo:Po.__docgenInfo,name:"FilterAndView",path:"src/lib/containers/query_wrapper_plot_nav/FilterAndView.tsx#FilterAndView"})}catch{}const wI="isShowingFacetFilters",CI="isHidingFacetFilters",Mo=e=>{const[t,n]=T.exports.useState(!1),{searchParams:r,sql:o,sqlOperator:a,tableConfiguration:i,name:s,cardConfiguration:l,facetsToPlot:d,facetsToFilter:c,hideDownload:f,hideQueryCount:p,hideSqlEditorControl:g,searchConfiguration:h,limit:m=Cg,initQueryJson:v,showLastUpdatedOn:b}=e,C=el(o,r,a),S=v?JSON.parse(v):{sql:C,limit:m,offset:0},y=Cn(S.sql),{data:w}=ol(y),_=w&&gf(w)&&w.isSearchEnabled,x={entityId:y,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:pr|hr|Qs|lf|Xs|Zs|Gs|Js,query:S};return u("div",{className:"QueryWrapperPlotNav",children:u(i?bf:jn,{...e,initQueryRequest:x,children:u(nl,{unitDescription:"results",rgbIndex:e.rgbIndex,facetAliases:e.facetAliases,visibleColumnCount:e.visibleColumnCount,defaultShowFacetVisualization:e.defaultShowFacetVisualization,defaultShowSearchBar:e.defaultShowSearchBox||_,showLastUpdatedOn:b,children:u(rl,{children:I=>{if(I===void 0)throw new Error("No queryContext found when using QueryContextConsumer");const L=I==null?void 0:I.isFacetsAvailable;return u(vf,{children:D=>{if(D===void 0)throw new Error("No queryVisualizationContext found when using QueryVisualizationContextConsumer");const M=(D==null?void 0:D.topLevelControlsState.showFacetFilter)||(D==null?void 0:D.topLevelControlsState.showFacetFilter)===void 0;return N(U,{children:[u("div",{className:`ErrorBannerWrapper ${M?wI:CI}`,children:u(Xg,{})}),_?u(Yn,{helpUrl:h==null?void 0:h.fullTextSearchHelpURL}):u(Wn,{...h,queryContext:I,queryVisualizationContext:D}),u(Gn,{}),u(ho,{getLastQueryRequest:I.getLastQueryRequest,topLevelControlsState:D.topLevelControlsState,setTopLevelControlsState:D.setTopLevelControlsState}),u(Kn,{showColumnSelection:i!==void 0,name:s,hideDownload:f,hideQueryCount:p,hideFacetFilterControl:!L,hideVisualizationsControl:!L,hideSqlEditorControl:g}),L&&u(U,{children:u(Zg,{facetsToFilter:c})}),u(Jg,{facetsToPlot:d}),u(Po,{tableConfiguration:i,hideDownload:f,cardConfiguration:l}),t&&u(Yt,{getLastQueryRequest:I.getLastQueryRequest,onClose:()=>n(!1)})]})}})}})})})})},_I=Mo;try{Mo.displayName="QueryWrapperPlotNav",Mo.__docgenInfo={description:"",displayName:"QueryWrapperPlotNav",props:{searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},facetsToPlot:{defaultValue:null,description:"",name:"facetsToPlot",required:!1,type:{name:"string[]"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"If onQueryChange is set, the callback will be invoked when the Query changes",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"If onQueryResultBundleChange is set, the callback will be invoked when the QueryResultBundle changes",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},initQueryJson:{defaultValue:null,description:"If initQueryJson is set, it will be the Query used in the initial QueryBundleRequest",name:"initQueryJson",required:!1,type:{name:"string"}},tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!1,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext">'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!1,type:{name:"CardConfiguration"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},facetsToFilter:{defaultValue:null,description:"",name:"facetsToFilter",required:!1,type:{name:"string[]"}},visibleColumnCount:{defaultValue:null,description:"",name:"visibleColumnCount",required:!1,type:{name:"number"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},defaultShowFacetVisualization:{defaultValue:null,description:"",name:"defaultShowFacetVisualization",required:!1,type:{name:"boolean"}},defaultShowSearchBox:{defaultValue:null,description:"",name:"defaultShowSearchBox",required:!1,type:{name:"boolean"}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/query_wrapper_plot_nav/QueryWrapperPlotNav.tsx#QueryWrapperPlotNav"]={docgenInfo:Mo.__docgenInfo,name:"QueryWrapperPlotNav",path:"src/lib/containers/query_wrapper_plot_nav/QueryWrapperPlotNav.tsx#QueryWrapperPlotNav"})}catch{}const EI=e=>ln({partMask:Zs|hr|Qs|Xs|pr|Js,entityId:Cn(e),concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:e,limit:25,offset:0}}),Vo=e=>{const{title:t,searchParams:n,sqlOperator:r,showAccessColumn:o,sql:a,hideDownload:i,hideQueryCount:s,name:l,showTopLevelControls:d=!1,searchConfiguration:c,unitDescription:f="Results",rgbIndex:p,showLastUpdatedOn:g,...h}=e,m=EI(a);n&&(m.query.sql=el(m.query.sql,n,r));const v=le(),b=Cn(a),{data:C}=ol(b);return u(bf,{...h,initQueryRequest:m,children:u(nl,{rgbIndex:p,unitDescription:f,showLastUpdatedOn:g,...h,children:u(rl,{children:S=>{if(S===void 0)throw new Error("No queryContext found when calling QueryContextConsumer");return u(vf,{children:y=>{if(y===void 0)throw new Error("No queryVisualizationContext found when calling QueryVisualizationContextConsumer");return N(U,{children:[d&&u(Kn,{showColumnSelection:!0,name:l,hideDownload:i,hideQueryCount:s,hideFacetFilterControl:!0,hideVisualizationsControl:!0}),C&&gf(C)&&C.isSearchEnabled?u(Yn,{helpUrl:c==null?void 0:c.fullTextSearchHelpURL}):u(Wn,{...c,queryContext:S,queryVisualizationContext:y}),u(Gn,{}),d&&u(Sf,{frontText:""}),u(Xn,{synapseContext:v,queryContext:S,queryVisualizationContext:y,showAccessColumn:o,title:t,"data-testid":"SynapseTable",...h}),u(sm,{})]})}})}})})})},xI=Vo;try{Vo.displayName="StandaloneQueryWrapper",Vo.__docgenInfo={description:`This component was initially implemented on the portal side. It renders a SynapseTable if a title is provided.
If showTopLevelControls is set to true, then the SynapseTable will also include the TopLevelControls (search, export table, column selection).`,displayName:"StandaloneQueryWrapper",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},linkCountToDisaggregatedQuery:{defaultValue:null,description:`If true, columns created by the COUNT function will render with a link to Synapse that opens the disaggregated query results filtered by the conditions of that row.
Note that this is very brittle and only supports one column at a time. See SWC-6075 for more information. Default false.`,name:"linkCountToDisaggregatedQuery",required:!1,type:{name:"boolean"}},showNoContentAvailableWhenEmpty:{defaultValue:null,description:"",name:"showNoContentAvailableWhenEmpty",required:!1,type:{name:"boolean"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},showTopLevelControls:{defaultValue:null,description:"",name:"showTopLevelControls",required:!1,type:{name:"boolean"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/StandaloneQueryWrapper.tsx#StandaloneQueryWrapper"]={docgenInfo:Vo.__docgenInfo,name:"StandaloneQueryWrapper",path:"src/lib/containers/table/StandaloneQueryWrapper.tsx#StandaloneQueryWrapper"})}catch{}function Bo(e){const{query:t,showquery:n,tableonly:r}=e,o=n==="true",a=r==="true",i="Items";return a?u(xI,{sql:t,name:i}):u(_I,{sql:t,hideSqlEditorControl:!o,name:i,defaultShowFacetVisualization:!1,tableConfiguration:{}})}try{Bo.displayName="MarkdownSynapseTable",Bo.__docgenInfo={description:"",displayName:"MarkdownSynapseTable",props:{query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"string"}},showquery:{defaultValue:null,description:"",name:"showquery",required:!0,type:{name:"string"}},tableonly:{defaultValue:null,description:"",name:"tableonly",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownSynapseTable.tsx#MarkdownSynapseTable"]={docgenInfo:Bo.__docgenInfo,name:"MarkdownSynapseTable",path:"src/lib/containers/markdown/widget/MarkdownSynapseTable.tsx#MarkdownSynapseTable"})}catch{}const TI={1:"toc-indent1",2:"toc-indent2",3:"toc-indent3",4:"toc-indent4",5:"toc-indent5",6:"toc-indent6"};function Fo(e){const{originalMarkup:t}=e,n=[],r=/<h([1-6]) id="(.*)" .*toc="true">(.*)<\/h[1-6]>/gm;let o="";return t.replace(r,(a,i,s,l)=>(o+=l,n.push(u("div",{children:u("a",{role:"link",className:`link ${TI[Number(i)]}`,"data-anchor":s,children:l})},l)),"")),u("div",{children:n},o)}try{Fo.displayName="MarkdownTableOfContents",Fo.__docgenInfo={description:"",displayName:"MarkdownTableOfContents",props:{originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownTableOfContents.tsx#MarkdownTableOfContents"]={docgenInfo:Fo.__docgenInfo,name:"MarkdownTableOfContents",path:"src/lib/containers/markdown/widget/MarkdownTableOfContents.tsx#MarkdownTableOfContents"})}catch{}function $o(e){const{alias:t}=e;return u(Wt,{alias:t,size:nr})}try{$o.displayName="MarkdownUserBadge",$o.__docgenInfo={description:"",displayName:"MarkdownUserBadge",props:{alias:{defaultValue:null,description:"",name:"alias",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownUserBadge.tsx#MarkdownUserBadge"]={docgenInfo:$o.__docgenInfo,name:"MarkdownUserBadge",path:"src/lib/containers/markdown/widget/MarkdownUserBadge.tsx#MarkdownUserBadge"})}catch{}function Ho(e){return u(xv,{params:e})}try{Ho.displayName="MarkdownVideo",Ho.__docgenInfo={description:"",displayName:"MarkdownVideo",props:{width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"string"}},videoId:{defaultValue:null,description:"",name:"videoId",required:!1,type:{name:"string"}},vimeoId:{defaultValue:null,description:"",name:"vimeoId",required:!1,type:{name:"string"}},oggSynapseId:{defaultValue:null,description:"",name:"oggSynapseId",required:!1,type:{name:"string"}},mp4SynapseId:{defaultValue:null,description:"",name:"mp4SynapseId",required:!1,type:{name:"string"}},webmSynapseId:{defaultValue:null,description:"",name:"webmSynapseId",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownVideo.tsx#MarkdownVideo"]={docgenInfo:Ho.__docgenInfo,name:"MarkdownVideo",path:"src/lib/containers/markdown/widget/MarkdownVideo.tsx#MarkdownVideo"})}catch{}function Zn(e){const{widgetType:t,widgetParamsMapped:n,originalMarkup:r}=e;switch(t){case"buttonlink":return u(zr,{...n});case"image":return u(uo,{...n});case"plot":return u(fo,{...n});case"toc":return u(Fo,{originalMarkup:r});case"badge":return u($o,{...n});case"iduReport":return u(Wr,{...n});case"video":case"vimeo":case"youtube":return u(Ho,{...n});case"synapsetable":return u(Bo,{...n});case"provenance":return u(lo,{...n});default:return console.warn(`Unsupported widget: ${t}.`),u(U,{})}}try{Zn.displayName="MarkdownWidget",Zn.__docgenInfo={description:"",displayName:"MarkdownWidget",props:{widgetType:{defaultValue:null,description:"",name:"widgetType",required:!0,type:{name:"enum",value:[{value:'"image"'},{value:'"video"'},{value:'"buttonlink"'},{value:'"plot"'},{value:'"toc"'},{value:'"badge"'},{value:'"iduReport"'},{value:'"vimeo"'},{value:'"youtube"'},{value:'"synapsetable"'},{value:'"provenance"'}]}},widgetParamsMapped:{defaultValue:null,description:"",name:"widgetParamsMapped",required:!0,type:{name:"any"}},originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/MarkdownWidget.tsx#MarkdownWidget"]={docgenInfo:Zn.__docgenInfo,name:"MarkdownWidget",path:"src/lib/containers/markdown/MarkdownWidget.tsx#MarkdownWidget"})}catch{}class Uo extends T.exports.Component{constructor(t){super(t),this.renderBookmarks=this.renderBookmarks.bind(this)}renderBookmarks(){const t=String(this.props.footnotes),n=/Synapse widget&gt;<\/span>(.*)</g;let r;const o=[];for(;r=n.exec(t);)o.push(r[1]);return o.map((a,i)=>{const s=i<o.length-1;return N(T.exports.Fragment,{children:[N("button",{className:"SRC-markdown-bookmark",id:`bookmark${i}`,children:["[",i+1,"]"]}),u("span",{dangerouslySetInnerHTML:{__html:a}}),s&&u("br",{})]},i)})}render(){return N(T.exports.Fragment,{children:[u("hr",{}),this.renderBookmarks()]})}}const OI=Uo;try{Uo.displayName="Bookmarks",Uo.__docgenInfo={description:"",displayName:"Bookmarks",props:{footnotes:{defaultValue:null,description:"",name:"footnotes",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/Bookmarks.tsx#Bookmarks"]={docgenInfo:Uo.__docgenInfo,name:"Bookmarks",path:"src/lib/containers/markdown/widget/Bookmarks.tsx#Bookmarks"})}catch{}const bs=markdownit({html:!0});class Ve extends ge.Component{constructor(t){super(t),markdownitSynapse.init_markdown_it(bs,markdownitSub,markdownitSup,markdownitCentertext,markdownitSynapseHeading,markdownitSynapseTable,markdownitStrikethroughAlt,markdownitContainer,markdownitEmphasisAlt,markdownitInlineComments,markdownitBr);const n="";bs.use(markdownitSynapse,n,"https://synapse.org").use(markdownitMath,n);const r={};this.props.markdown&&(r.markdown=this.props.markdown),this.state={md:bs,error:void 0,fileHandles:void 0,data:r,isLoading:!0},this.markupRef=ge.createRef(),this.handleLinkClicks=this.handleLinkClicks.bind(this),this.renderMarkdown=this.renderMarkdown.bind(this),this.recursiveRender=this.recursiveRender.bind(this),this.processMath=this.processMath.bind(this),this.getWikiAttachments=this.getWikiAttachments.bind(this),this.getWikiPageMarkdown=this.getWikiPageMarkdown.bind(this),this.createHTML=this.createHTML.bind(this),this.addBookmarks=this.addBookmarks.bind(this),this.addIdsToReferenceWidgets=this.addIdsToReferenceWidgets.bind(this),this.addIdsToTocWidgets=this.addIdsToTocWidgets.bind(this)}componentWillUnmount(){this.markupRef.current&&this.markupRef.current.removeEventListener("click",this.handleLinkClicks)}handleLinkClicks(t){const n=t.target;if(n.tagName==="A"||n.tagName==="BUTTON"){const r=t.target;if(r.id.substring(0,3)==="ref"){t.preventDefault();const o=Number(t.currentTarget.id.substring(3)),a=this.markupRef.current.querySelector(`#bookmark${o}`);try{a.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(i){console.log("error on scroll",i)}}else if(t.currentTarget.id!==null&&r.getAttribute("data-anchor")){t.preventDefault();const o=r.getAttribute("data-anchor"),a=this.markupRef.current.querySelector(`#${o}`);try{a.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(i){console.log("error on scroll",i)}}}}createHTML(t){if(!t)return{__html:""};const n=this.props.renderInline?this.state.md.renderInline(t):this.state.md.render(t);return{__html:Db(n,Pb)}}processMath(){if(!this.markupRef.current)return;const t=this.markupRef.current.querySelectorAll('[id^="mathjax-"]'),n=new RegExp(/\\[()[\]]/,"g");t.forEach(r=>{if(r.textContent&&!r.getAttribute("processed")){r.setAttribute("processed","true");const o=r.textContent.replace(n,"");return katex.render(o,r,{output:"html",throwOnError:!1})}})}addBookmarks(){markdownitSynapse.resetFootnotes(),this.createHTML(this.state.data.markdown);const t=this.createHTML(markdownitSynapse.footnotes()).__html;if(t.length>0)return u(OI,{footnotes:t})}async getWikiPageMarkdown(){const{ownerId:t,wikiId:n,objectType:r}=this.props;if(!(!t&&!n))try{const o=await _g(this.context.accessToken,t,n,r);try{const a=await this.getWikiAttachments(n||o.id);this.setState({data:o,fileHandles:a,error:void 0})}catch(a){console.error("fileHandlesErr = ",a)}}catch(o){console.error(`Error on wiki markdown load
`,o),this.setState({error:o})}}async getWikiAttachments(t){const{ownerId:n,objectType:r}=this.props;if(!n){console.error("Cannot get wiki attachments without ownerId on Markdown Component");return}return await Eg(this.context.accessToken,n,t,r).then(o=>o).catch(o=>{console.error("Error on wiki attachment load ",o)})}addIdsToReferenceWidgets(t){const n=/<span id="wikiReference.*?<span data-widgetparams.*?span>/g;let r=1;return t.replace(n,()=>{const o=r;return r+=1,`<a href="" id="ref${o}">[${o}]</a>`})}addIdsToTocWidgets(t){const n="SRC-header-";let r=1;const o=/<h[1-6] toc="true">.*<\/h[1-6]>/gm;return t.replace(o,a=>{const i=r;return r+=1,`${a.substring(0,3)} id="${n}${i}"${a.substring(3)}`})}renderMarkdown(){let t=this.createHTML(this.state.data.markdown).__html;if(t=this.addIdsToReferenceWidgets(t),t=this.addIdsToTocWidgets(t),t.length>0){const r=new DOMParser().parseFromString(t,"text/html");return u(U,{children:this.recursiveRender(r.body,t)})}}recursiveRender(t,n){if(t.nodeType===Node.TEXT_NODE)return N(U,{children:[" ",t.textContent," "]});if(t.nodeType===Node.ELEMENT_NODE&&t instanceof HTMLElement){const r=t.tagName.toLowerCase()==="body"?"span":t.tagName.toLowerCase(),o=t.getAttribute("data-widgetparams");if(o)return this.processHTMLWidgetMapping(o,n);const a=t.attributes,i={};for(let l=0;l<a.length;l++){let d="",c="";const f=a.item(l);f&&(d=f.name,c=f.value),d&&c&&(i[d]=c)}if(t.childNodes.length===0)return u(r,{...i});const s=Array.from(t.childNodes).map((l,d)=>u(ge.Fragment,{children:this.recursiveRender(l,n)},d));return u(r,{...i,children:s})}}decodeXml(t){const n={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'};return t.replace(/(&quot;|&lt;|&gt;|&amp;)/g,(r,o)=>n[o])}processHTMLWidgetMapping(t,n){const r=this.decodeXml(t),o=r.indexOf("?");if(o===-1)return u(Zn,{widgetType:r,widgetParamsMapped:{},originalMarkup:n},JSON.stringify(r));const a=r.substring(0,o),i={};return r.substring(o+1).split("&").forEach(s=>{let[l,d]=s.split("=");d=decodeURIComponent(d),i[l]=d}),u(Zn,{widgetType:a,widgetParamsMapped:i,originalMarkup:n},JSON.stringify(r))}async componentDidMount(){if(this.state.data.markdown){this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current);return}this.markupRef.current&&this.markupRef.current.addEventListener("click",this.handleLinkClicks),await this.getWikiPageMarkdown(),this.processMath(),this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current)}async componentDidUpdate(t){let n=this.props.ownerId!==t.ownerId;n=n||this.props.wikiId!==t.wikiId,n&&await this.getWikiPageMarkdown(),this.processMath()}render(){const{renderInline:t}=this.props,{isLoading:n,error:r}=this.state,o={ownerId:this.props.ownerId,wikiId:this.props.wikiId,wikiPage:this.state.data,fileHandles:this.state.fileHandles};if(r)return u(cf,{error:r});const a=this.addBookmarks(),i=N(co,{wikiContext:o,children:[n&&u("span",{className:"spinner"}),this.renderMarkdown(),a&&u("div",{children:this.addBookmarks()})]});return t?u("span",{className:"markdown markdown-inline",ref:this.markupRef,children:i}):u("div",{className:"markdown",ref:this.markupRef,children:i})}}Ve.contextType=fr;try{Ve.displayName="MarkdownSynapse",Ve.__docgenInfo={description:"Basic Markdown functionality for Synapse, supporting Images/Plots/References/Bookmarks/buttonlinks",displayName:"MarkdownSynapse",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},markdown:{defaultValue:null,description:"",name:"markdown",required:!1,type:{name:"string"}},renderInline:{defaultValue:null,description:"",name:"renderInline",required:!1,type:{name:"boolean"}},objectType:{defaultValue:null,description:"",name:"objectType",required:!1,type:{name:"enum",value:[{value:'"ENTITY"'},{value:'"ENTITY_CONTAINER"'},{value:'"PRINCIPAL"'},{value:'"ACTIVITY"'},{value:'"EVALUATION"'},{value:'"SUBMISSION"'},{value:'"EVALUATION_SUBMISSIONS"'},{value:'"FILE"'},{value:'"MESSAGE"'},{value:'"WIKI"'},{value:'"FAVORITE"'},{value:'"ACCESS_REQUIREMENT"'},{value:'"ACCESS_APPROVAL"'},{value:'"TEAM"'},{value:'"TABLE"'},{value:'"ACCESS_CONTROL_LIST"'},{value:'"PROJECT_SETTING"'},{value:'"VERIFICATION_SUBMISSION"'},{value:'"CERTIFIED_USER_PASSING_RECORD"'},{value:'"FORUM"'},{value:'"THREAD"'},{value:'"REPLY"'},{value:'"FORM_GROUP"'},{value:'"FORM_DATA"'},{value:'"ENTITY_VIEW"'},{value:'"USER_PROFILE"'},{value:'"DATA_ACCESS_REQUEST"'},{value:'"DATA_ACCESS_SUBMISSION"'},{value:'"DATA_ACCESS_SUBMISSION_STATUS"'},{value:'"MEMBERSHIP_INVITATION"'}]}},onMarkdownProcessingDone:{defaultValue:null,description:"",name:"onMarkdownProcessingDone",required:!1,type:{name:"((ref: HTMLInputElement | null) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/MarkdownSynapse.tsx#MarkdownSynapse"]={docgenInfo:Ve.__docgenInfo,name:"MarkdownSynapse",path:"src/lib/containers/markdown/MarkdownSynapse.tsx#MarkdownSynapse"})}catch{}const zo=({type:e,title:t,subTitle:n="",description:r,values:o,secondaryLabelLimit:a,isAlignToLeftNav:i,descriptionConfig:s,href:l,target:d,rgbIndex:c,icon:f})=>{const p=document.querySelector('meta[name="description"]'),[g]=T.exports.useState(document.title),[h]=T.exports.useState(p?p.getAttribute("content"):"");return T.exports.useEffect(()=>(t&&document.title!==t&&(document.title=t),(r||n)&&(p==null||p.setAttribute("content",r||n)),function(){document.title=g,p==null||p.setAttribute("content",h)})),u("div",{className:`SRC-portalCard SRC-portalCardHeader ${i?"isAlignToLeftNav":""}`,children:u("div",{className:"container-fluid container-full-width",children:u("div",{className:"row",children:u("div",{className:"col-md-offset-1 col-md-10",children:N("div",{className:"SRC-portalCardMain",children:[f,N("div",{style:{width:"100%"},children:[N("div",{className:"SRC-cardContent",style:{marginLeft:"15px"},children:[u("div",{className:"SRC-type",children:e}),u("div",{children:u("h3",{className:"SRC-boldText",style:{margin:"none"},children:l?u("a",{target:d,href:l,className:"highlight-link",children:t}):N("span",{children:[" ",t," "]})})}),n&&N("div",{className:"SRC-author",children:[" ",n," "]}),r&&u("span",{className:"SRC-font-size-base",children:s!=null&&s.isMarkdown?u(Ve,{markdown:r}):r})]}),u("div",{style:{borderTop:"1px solid rgba(26, 28, 41, 0.2)",marginTop:"15px",paddingTop:"5px"}}),u("div",{className:"SRC-cardContent",children:o&&u(tl,{isHeader:!0,secondaryLabelLimit:a,values:o})})]})]})})})})})};try{zo.displayName="HeaderCard",zo.__docgenInfo={description:"",displayName:"HeaderCard",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subTitle:{defaultValue:{value:""},description:"",name:"subTitle",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[][]"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},href:{defaultValue:null,description:"",name:"href",required:!1,type:{name:"string"}},target:{defaultValue:null,description:"",name:"target",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"Element"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HeaderCard.tsx#HeaderCard"]={docgenInfo:zo.__docgenInfo,name:"HeaderCard",path:"src/lib/containers/HeaderCard.tsx#HeaderCard"})}catch{}const Yo=e=>{var d,c;const{fileHandleAssociation:t,showDownloadIcon:n,redirect:r=!1,displayValue:o}=e,{accessToken:a}=le(),[i,s]=T.exports.useState();T.exports.useEffect(()=>{o===void 0&&(async()=>s(await wn({requestedFiles:[t],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1},a)))()},[a,o,t]);let l;return i&&(l=(d=i.requestedFiles[0].fileHandle)==null?void 0:d.fileName),N("button",{onClick:()=>{a&&t&&df(t.fileHandleId,a,t.associateObjectType,t.associateObjectId,r).then(f=>{window.open(f,"_blank")}).catch(f=>{console.error("Error on retrieving file handle url ",f)})},className:`SRC-primary-text-color ${Ks}`,type:"button",style:{padding:0},children:[(c=o!=null?o:l)!=null?c:t.fileHandleId,n&&u(he,{options:{icon:"download"}})]})};try{Yo.displayName="FileHandleLink",Yo.__docgenInfo={description:"",displayName:"FileHandleLink",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},redirect:{defaultValue:null,description:"",name:"redirect",required:!1,type:{name:"boolean"}},showDownloadIcon:{defaultValue:null,description:"",name:"showDownloadIcon",required:!0,type:{name:"boolean"}},displayValue:{defaultValue:null,description:"",name:"displayValue",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/FileHandleLink.tsx#FileHandleLink"]={docgenInfo:Yo.__docgenInfo,name:"FileHandleLink",path:"src/lib/containers/widgets/FileHandleLink.tsx#FileHandleLink"})}catch{}const jo=e=>{const{fileHandleAssociation:{fileHandleId:t,associateObjectId:n,associateObjectType:r}}=e,{accessToken:o}=le(),[a,i]=T.exports.useState(),{ref:s,inView:l}=xn({triggerOnce:!0,rootMargin:"500px 0px"});return T.exports.useEffect(()=>{(()=>{t&&n&&r&&l&&df(t,o,r,n,!1).then(c=>{i(c)}).catch(c=>{console.error("Error on retrieving file handle url ",c)})})()},[l,t,n,o,r]),u("span",{ref:s,children:a&&u("img",{src:a,alt:"",className:"ImageFileHandle",loading:"lazy"})})};try{jo.displayName="ImageFileHandle",jo.__docgenInfo={description:"",displayName:"ImageFileHandle",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"]={docgenInfo:jo.__docgenInfo,name:"ImageFileHandle",path:"src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"})}catch{}const kl=400,NI="SRC-short-description",II="SRC-long-description",Wo=e=>{let t="";const n=e.split(" ");let r=0;for(;t.length<kl&&r<n.length;)t+=`${n[r]} `,r+=1;return t=t.trim(),{previewText:t}},RI=(e,t,n)=>{var o;let r;return e&&t&&(yf(e)?r={fileHandleId:t,associateObjectId:(o=e==null?void 0:e.id)!=null?o:"",associateObjectType:Me.TableEntity}:n&&(r={fileHandleId:t,associateObjectId:n,associateObjectType:Me.FileEntity})),r},qt=({columnName:e,value:t,selectColumns:n,columnModels:r})=>{if(!t)return{str:"",strList:void 0,columnModelType:void 0};const o=(n==null?void 0:n.find(i=>i.name===e))||(r==null?void 0:r.find(i=>i.name===e));if(o==null?void 0:o.columnType.endsWith("_LIST")){let i=t,s;try{return s=JSON.parse(i),i=s.join(", "),{strList:s,str:i,columnModelType:o==null?void 0:o.columnType}}catch(l){console.error("Could not parse multivalue string ",i," caught err ",l)}}return{str:t,columnModelType:o==null?void 0:o.columnType}},AI=(e,t,n)=>(t==null?void 0:t.findIndex(r=>r.name===e))||(n==null?void 0:n.findIndex(r=>r.name===e)),Go=e=>{const{synapseId:t,version:n}=e;return N("span",{children:[n,"\xA0\xA0",u("a",{target:yt.NEW_WINDOW,rel:"noopener noreferrer",href:`${qe.PORTAL}#!Synapse:${t}.${n}`,children:"(Show Version History on Synapse)"})]})},Jn=e=>{const{value:t,columnName:n,labelLink:r,selectColumns:o,columnModels:a,isHeader:i,className:s,rowData:l}=e;if(!t)return u(U,{children:t});const{strList:d,str:c,columnModelType:f}=qt({columnName:n,value:t,selectColumns:o,columnModels:a});if(!c)return u(U,{children:c});let p=s;const g={};if(i&&(p=s==null?void 0:s.concat(" ","SRC-lightLink")),f===re.USERID_LIST&&d)return u(U,{children:d.map((m,v)=>N("span",{children:[u(Wt,{ownerId:m,size:nr,className:p}),v<d.length-1&&",\xA0\xA0"]},m))});if(f===re.USERID&&c)return u(Wt,{ownerId:c,size:nr,className:p});if(!r)return c.match(ff)?u("a",{target:yt.NEW_WINDOW,rel:"noopener noreferrer",href:`${qe.PORTAL}#!Synapse:${c}`,className:p,children:c}):u(U,{children:c});let h;if(r.isMarkdown)d?h=u(U,{children:d.map((m,v)=>N("span",{children:[u(Ve,{renderInline:!0,markdown:m},m),v<d.length-1&&",\xA0\xA0"]},m))}):h=u(Ve,{renderInline:!0,markdown:t});else{const m=d||c.split(",");let v;if("target"in r&&(v=r.target),"linkColumnName"in r){const b=AI(r.linkColumnName,o,a);if(b==null)console.warn(`Could not determine column index of ${r.linkColumnName}`),h=u(U,{children:t});else{const C=l[b];Ov(C)?h=u(U,{children:t}):h=u(U,{children:m.map((S,y)=>N(ge.Fragment,{children:[u("a",{href:C!=null?C:void 0,target:v!=null?v:yt.NEW_WINDOW,rel:"noopener noreferrer",className:p,style:g,children:S},S),y<m.length-1&&u("span",{style:{marginRight:4},children:", "})]},S))})}}else h=u(U,{children:m.map((b,C)=>{const{baseURL:S,URLColumnName:y,wrapValueWithParens:w}=r,_=w?`(${b})`:b,x=`/${S}?${y}=${_}`;return N(ge.Fragment,{children:[u("a",{href:x,className:p,style:g,target:v!=null?v:yt.CURRENT_WINDOW,children:b},b),C<m.length-1&&u("span",{style:{marginRight:4},children:", "})]},b)})})}return r.tooltipText?u(ze,{title:r.tooltipText,enterNextDelay:300,children:u("span",{children:h})}):h};function kI(e,t,n){if(e){if(!t||!n)throw Error("Must specify CardLink and data for linking to work");const{matchColumnName:r,URLColumnName:o,overrideLinkURLColumnName:a}=e;if(a&&n[a]){const s=n[a],l=t[s];if(l)return l}const i=n[r];if(i===void 0)console.error(`Could not find match for data: ${t} with columnName ${r}`);else{const s=t[i];if(s)return`/${e.baseURL}?${o}=${s}`}}}function tf(e,t,n,r){var s,l;e=e.trim();let o=e,a=yt.CURRENT_WINDOW;e.match(ff)?o=`${qe.PORTAL}#!Synapse:${e}`:e.match(Ag)?(a=yt.NEW_WINDOW,o=`https://dx.doi.org/${e}`):t?t&&(o=(s=kI(t,n,r))!=null?s:"",o.includes("/DetailsPage")&&(a=yt.NEW_WINDOW)):a=yt.NEW_WINDOW;const i=(l=t==null?void 0:t.target)!=null?l:a;return{href:o,target:i}}function Ko(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:r,descriptionConfig:o}=e;let a=t;o!=null&&o.isMarkdown&&(a=u(Ve,{markdown:a}));const i=n||(o==null?void 0:o.showFullDescriptionByDefault);return u("div",{className:i?"":"SRC-hidden",children:u("span",{"data-search-handle":r,className:`SRC-font-size-base ${II}`,children:a})})}function Qo(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:r,descriptionConfig:o,toggleShowMore:a}=e;return o!=null&&o.showFullDescriptionByDefault?u(U,{}):N("div",{className:n?"SRC-hidden":"",children:[u("span",{"data-search-handle":r,className:`SRC-font-size-base ${NI} SRC-short-description`,children:Wo(t).previewText}),t.length>=kl&&u("a",{style:{fontSize:"16px",cursor:"pointer",marginLeft:"5px"},className:"highlight-link",onClick:a,children:"...Show More"})]})}class er extends ge.Component{constructor(t){super(t),this.getCutoff=n=>{let r="";const o=n.split(" ");let a=0;for(;r.length<kl&&a<o.length;)r+=`${o[a]} `,a+=1;return r=r.trim(),{previewText:r}},this.toggleShowMore=()=>{this.setState({hasClickedShowMore:!0})},this.renderTitle=({href:n,target:r,titleSearchHandle:o,title:a})=>n?u("a",{"data-search-handle":o,target:r,href:n,className:"highlight-link",children:a}):N("span",{"data-search-handle":o,children:[" ",a," "]}),this.state={hasClickedShowMore:!1}}render(){var K;const{schema:t,data:n,genericCardSchema:r,secondaryLabelLimit:o,selectColumns:a,columnModels:i,iconOptions:s,useTypeColumnForIcon:l=!1,isHeader:d=!1,titleLinkConfig:c,ctaLinkConfig:f,labelLinkConfig:p,facetAliases:g={},descriptionConfig:h,rgbIndex:m,columnIconOptions:v,queryContext:{entity:b}}=this.props,C=r,{hasClickedShowMore:S}=this.state,{link:y="",type:w}=C,_=n[t[C.title]];let x=C.subTitle&&n[t[C.subTitle]];x=(C==null?void 0:C.subTitle)&&qt({value:x,columnName:C==null?void 0:C.subTitle,selectColumns:a,columnModels:i}).str;const O=n[t[C.description||""]],I=n[t[C.icon||""]],L=n[t[C.dataTypeIconNames||""]],D=n[t[C.imageFileHandleColumnName||""]],M=i==null?void 0:i.find(ce=>C.link===ce.name),V=M==null?void 0:M.columnType,E=n[t[y]]||"",{href:k,target:R}=tf(E,c,n,t),P=[],{secondaryLabels:B=[]}=C,H=b&&!yf(b);for(let ce=0;ce<B.length;ce+=1){const ve=B[ce];let we=n[t[ve]],_e;if(we){if(H&&ve==="currentVersion"){const Re=n[t.id];we=Go({synapseId:Re,version:we}),_e="Version"}else{const Re=p==null?void 0:p.find($e=>$e.matchColumnName===ve);we=u(Jn,{value:we,columnName:ve,labelLink:Re,isHeader:d,selectColumns:a,columnModels:i,rowData:n}),_e=Rt(ve,g)}const We=[_e,we,ve];P.push(We)}}const z=RI(b,D||E,n[t.id]),j=P.length>0,q={marginTop:d?"0px":void 0,marginBottom:d?"0px":void 0,paddingBottom:j||D?void 0:"15px"},A=N(U,{children:[!l&&D&&u("div",{className:"SRC-imageThumbnail",style:{padding:C.thumbnailRequiresPadding?"21px":void 0},children:z&&u(jo,{fileHandleAssociation:z})}),!l&&!D&&u("div",{className:"SRC-cardThumbnail",children:u(_a,{iconOptions:s,value:I,type:w})}),l&&u("div",{className:"SRC-cardThumbnail",children:u(he,{options:{icon:fy[n[t.type]]}})})]});if(d)return u(zo,{descriptionConfig:h,title:_,subTitle:x,description:O,type:w,icon:A,values:P,href:k,target:R,isAlignToLeftNav:!0,secondaryLabelLimit:o,rgbIndex:m});const $=Rt(C.title,g),Y=Rt(C.subTitle,g),G=Rt(C.description,g);let Z,Q;if(f){const ce=n[t[f.link]]||"",{href:ve,target:we}=tf(ce,void 0,n,t);Z=ve,Q=we}return N("div",{style:q,className:"SRC-portalCard",children:[N("div",{className:"SRC-portalCardMain",children:[A,N("div",{className:"SRC-cardContent",children:[u("div",{className:"SRC-type",children:w}),((K=v==null?void 0:v.columns)==null?void 0:K.dataType)&&(L==null?void 0:L.length)&&u("div",{style:{marginTop:"20px"},children:u(Tv,{iconConfigs:v.columns.dataType,iconNames:JSON.parse(L),useBackground:!0,useTheme:!0})}),u("div",{children:u("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"},children:!c&&V===re.FILEHANDLEID&&z?u(Yo,{fileHandleAssociation:z,showDownloadIcon:w!==xg,displayValue:_}):this.renderTitle({href:k,target:R,titleSearchHandle:$,title:_})})}),x&&u("div",{"data-search-handle":Y,className:"SRC-author",children:x}),O&&u(Qo,{description:O,hasClickedShowMore:S,descriptionSubTitle:G,descriptionConfig:h,toggleShowMore:this.toggleShowMore}),O&&u(Ko,{description:O,hasClickedShowMore:S,descriptionSubTitle:G,descriptionConfig:h}),f&&Z&&Q&&u("div",{className:"SRC-portalCardCTALink bootstrap-4-backport",children:u("a",{target:Q,rel:"noopener noreferrer",href:Z,children:f.text})})]})]}),j&&u(tl,{isHeader:!1,secondaryLabelLimit:o,values:P,columnIconOptions:v,className:`${D?"hasImage":"hasIcon"}`})]})}}er.contextType=fr;try{Ko.displayName="LongDescription",Ko.__docgenInfo={description:"",displayName:"LongDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#LongDescription"]={docgenInfo:Ko.__docgenInfo,name:"LongDescription",path:"src/lib/containers/GenericCard.tsx#LongDescription"})}catch{}try{Qo.displayName="ShortDescription",Qo.__docgenInfo={description:"",displayName:"ShortDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},toggleShowMore:{defaultValue:null,description:"",name:"toggleShowMore",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#ShortDescription"]={docgenInfo:Qo.__docgenInfo,name:"ShortDescription",path:"src/lib/containers/GenericCard.tsx#ShortDescription"})}catch{}try{Wo.displayName="getCutoff",Wo.__docgenInfo={description:"",displayName:"getCutoff",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getCutoff"]={docgenInfo:Wo.__docgenInfo,name:"getCutoff",path:"src/lib/containers/GenericCard.tsx#getCutoff"})}catch{}try{qt.displayName="getValueOrMultiValue",qt.__docgenInfo={description:"",displayName:"getValueOrMultiValue",props:{columnName:{defaultValue:null,description:"",name:"columnName",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getValueOrMultiValue"]={docgenInfo:qt.__docgenInfo,name:"getValueOrMultiValue",path:"src/lib/containers/GenericCard.tsx#getValueOrMultiValue"})}catch{}try{Go.displayName="VersionLabel",Go.__docgenInfo={description:"",displayName:"VersionLabel",props:{synapseId:{defaultValue:null,description:"",name:"synapseId",required:!0,type:{name:"string"}},version:{defaultValue:null,description:"",name:"version",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#VersionLabel"]={docgenInfo:Go.__docgenInfo,name:"VersionLabel",path:"src/lib/containers/GenericCard.tsx#VersionLabel"})}catch{}try{Jn.displayName="SynapseCardLabel",Jn.__docgenInfo={description:"",displayName:"SynapseCardLabel",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},labelLink:{defaultValue:null,description:"",name:"labelLink",required:!0,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink | undefined"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!0,type:{name:"SelectColumn[] | undefined"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!0,type:{name:"ColumnModel[] | undefined"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#SynapseCardLabel"]={docgenInfo:Jn.__docgenInfo,name:"SynapseCardLabel",path:"src/lib/containers/GenericCard.tsx#SynapseCardLabel"})}catch{}try{er.displayName="GenericCard",er.__docgenInfo={description:"Renders a card from a table query",displayName:"GenericCard",props:{selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},useTypeColumnForIcon:{defaultValue:null,description:"",name:"useTypeColumnForIcon",required:!1,type:{name:"boolean"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"Record<string, number>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"string[]"}},tableId:{defaultValue:null,description:"",name:"tableId",required:!0,type:{name:"string | undefined"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#GenericCard"]={docgenInfo:er.__docgenInfo,name:"GenericCard",path:"src/lib/containers/GenericCard.tsx#GenericCard"})}catch{}class jt extends T.exports.Component{constructor(t){super(t),this.handleLinkClick=n=>r=>{r.preventDefault(),window.open(`${qe.PORTAL}#!Synapse:${n}`,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:t,schema:n,selectColumns:r,columnModels:o}=this.props,a=t[n.datasetName],i=t[n.summary],s=qt({columnName:"tumorType",value:t[n.tumorType],selectColumns:r,columnModels:o}).str,l=qt({columnName:"diseaseFocus",value:t[n.diseaseFocus],selectColumns:r,columnModels:o}).str,d=t[n.id],c=t[n.fundingAgency],f=t[n.fileCount],p=nm(t[n.fileSize]),g=[["FUNDER",qt({columnName:"fundingAgency",value:c,selectColumns:r,columnModels:o}).str],["SIZE",p],["FILES",f]];return N("div",{className:"SRC-portalCard SRC-typeDataset  ",children:[N("div",{className:"SRC-cardThumbnail",children:[u(_a,{type:uf}),u("div",{children:p})]}),N("div",{className:"SRC-cardContent SRC-dataset",children:[u("div",{className:"SRC-type",children:"Dataset "}),u("div",{children:u("h3",{children:u("a",{target:"_self",href:`${qe.PORTAL}#!Synapse:${d}`,children:a})})}),N("div",{className:"SRC-description-dataset",children:[u("p",{className:"SRC-description-text",children:i}),u("div",{className:"SRC-cardAction bootstrap-4-backport",children:u(be,{className:"pill SRC-datasetButton",onClick:this.handleLinkClick(d),variant:"secondary",children:"Download Dataset"})})]}),u("div",{className:"SRC-cardAnnotations",children:u(Vg,{chips:[s,l]})})]}),u(tl,{isHeader:!1,secondaryLabelLimit:this.props.secondaryLabelLimit,values:g})]})}}try{jt.displayName="Dataset",jt.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/Dataset.tsx#Dataset"]={docgenInfo:jt.__docgenInfo,name:"Dataset",path:"src/lib/containers/row_renderers/Dataset.tsx#Dataset"})}catch{}class Xo extends T.exports.Component{constructor(t){super(t),this.handleLinkClick=n=>r=>{r.preventDefault(),window.open(n,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:t,schema:n}=this.props,r=t[n.organizationName],o=t[n.organizationPath],a=t[n.summary],i=t[n.website],s=t[n.logo];let l=i.replace("https://","");l=l.replace("http://",""),l.charAt(l.length-1)==="/"&&(l=l.substring(0,l.length-1));const d=window.location.hash.substring(1)===o,c={};let f;return d?c.paddingBottom="42px":f=u("div",{className:"SRC-marginAuto SRC-cardAction bootstrap-4-backport",children:u(be,{className:"pill-xl",href:o,variant:"secondary",children:"View Funded Research"})}),N("div",{className:"SRC-portalCard SRC-typeFunder ",style:c,children:[N("div",{className:"SRC-cardContent",children:[u("div",{className:"SRC-type",children:"Organization"}),s&&u("div",{className:"SRC-cardThumbnail",children:u("img",{alt:"funder logo",className:"SRC-logo",src:s})}),u("div",{children:N("h3",{children:[d&&r,!d&&u("a",{href:o,children:r})]})}),u("div",{className:"SRC-website",children:u("a",{rel:"noopener noreferrer",target:"_blank",href:i,children:l})}),u("div",{className:"SRC-description",children:a})]}),f]})}}try{Xo.displayName="Funder",Xo.__docgenInfo={description:"",displayName:"Funder",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/Funder.tsx#Funder"]={docgenInfo:Xo.__docgenInfo,name:"Funder",path:"src/lib/containers/row_renderers/Funder.tsx#Funder"})}catch{}try{jt.displayName="Dataset",jt.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/index.tsx#Dataset"]={docgenInfo:jt.__docgenInfo,name:"Dataset",path:"src/lib/containers/row_renderers/index.tsx#Dataset"})}catch{}try{rowrenderers.displayName="rowrenderers",rowrenderers.__docgenInfo={description:"",displayName:"rowrenderers",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/index.tsx#rowrenderers"]={docgenInfo:rowrenderers.__docgenInfo,name:"rowrenderers",path:"src/lib/containers/row_renderers/index.tsx#rowrenderers"})}catch{}const on=(e,t)=>e>0?`${e} ${t}${e>1?"s":""} `:"",LI=(e,t)=>{const n=gr.duration(e,t),r=n.years(),o=n.months()%12,a=n.days()%31,i=n.hours()%24,s=n.minutes()%60,l=n.seconds()%60;return`${on(r,"year")}${on(o,"month")}${on(a,"day")}${on(i,"hour")}${on(s,"minute")}${on(l,"second")}`.trim()},Zo=({data:e,schema:t})=>{const n=e[t.submitterName],r=e[t.submitterUserId],o=e[t.time],a=e[t.timeUnits],i=e[t.text],s=e[t.tag];return N("div",{className:"SRC-portalCard ObservationCard",children:[N("div",{className:"ObservationCard__submitter",children:[!r&&u("div",{children:n}),r&&u(Wt,{size:"SMALL USER CARD",ownerId:r})]}),o&&N("div",{className:"ObservationCard__time",children:[u(he,{options:{icon:"time"}}),u("span",{children:LI(o,a)})]}),u("div",{className:"ObservationCard__text",children:u(Bg,{summary:i})}),u("div",{className:"ObservationCard__tags",children:s&&u("span",{className:"SRC-tag",children:s})})]})},Jo=()=>N("div",{className:"SRC-portalCard ObservationCard",children:[u("div",{className:"ObservationCard__submitter",children:u("span",{children:u(ws,{width:"100px"})})}),u("div",{className:"ObservationCard__time",children:u(he,{options:{icon:"time"}})}),u("div",{className:"ObservationCard__text",children:u(_f,{numCols:1,numRows:4})}),u("div",{className:"ObservationCard__tags",children:u(ws,{width:"80px"})})]});try{Zo.displayName="ObservationCard",Zo.__docgenInfo={description:`Specialized Observation Card, initially implemented for the NF portal.
Expects the following columns: submitterName, submitterUserId, time, timeUnits, text, and tag.`,displayName:"ObservationCard",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"ObservationCardSchema"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"Record<string, string>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/ObservationCard.tsx#ObservationCard"]={docgenInfo:Zo.__docgenInfo,name:"ObservationCard",path:"src/lib/containers/row_renderers/ObservationCard.tsx#ObservationCard"})}catch{}try{Jo.displayName="LoadingObservationCard",Jo.__docgenInfo={description:"",displayName:"LoadingObservationCard",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/ObservationCard.tsx#LoadingObservationCard"]={docgenInfo:Jo.__docgenInfo,name:"LoadingObservationCard",path:"src/lib/containers/row_renderers/ObservationCard.tsx#LoadingObservationCard"})}catch{}const tr=e=>{const{isHeader:t=!1,unitDescription:n,type:r,isLoading:o,secondaryLabelLimit:a=3,title:i,...s}=e,l=ey(),{data:d,getLastQueryRequest:c,appendNextPageToResults:f,hasNextPage:p}=l,g=c(),h=(y,w)=>{switch(w){case uf:return u(jt,{...y});case Og:return u(Xo,{...y});case Tg:return u(er,{...y,queryContext:l});case Ma:return u(Zo,{...y});default:return u("div",{},y.key)}},m=d!=null&&d.queryResult.queryResults.tableId?[d==null?void 0:d.queryResult.queryResults.tableId]:[],v=pf({ids:m,type:"ENTITY_HEADER"});if(d){if(d&&d.queryResult.queryResults.rows.length===0)return g.query.additionalFilters?u(om,{}):u(im,{})}else return N("div",{children:[o&&r===Ma&&u(Jo,{}),o&&r!==Ma&&Mf]});const b={};d.queryResult.queryResults.headers.forEach((y,w)=>{b[y.name]=w});const C=p&&u("div",{className:"SRC-viewMore bootstrap-4-backport",children:u(be,{variant:"secondary",className:"pill-xl",onClick:()=>{f()},children:"View More"})});let S;if(r===Ql){const y=d.queryResult.queryResults.headers.findIndex(_=>_.columnType===re.USERID);if(y===-1)throw Error("Type MEDIUM_USER_CARD specified but no columnType USERID found");const w=d.queryResult.queryResults.rows.map(_=>_.values.filter(x=>x!==null)[y]);S=u(Nv,{data:d,list:w,size:Ql})}else{const y=d.queryResult.queryResults.rows;S=y.length?y.map(w=>{const x={key:JSON.stringify(w.values),type:r,schema:b,isHeader:t,secondaryLabelLimit:a,data:w.values,selectColumns:d.selectColumns,columnModels:d.columnModels,tableEntityConcreteType:v[0]&&v[0].type,tableId:d==null?void 0:d.queryResult.queryResults.tableId,...s};return h(x,r)}):u(U,{})}return N("div",{role:"list",children:[i&&u("h2",{className:"SRC-card-overview-title",children:i}),!i&&n&&u(Sf,{frontText:"Displaying"}),S,C]})};try{tr.displayName="CardContainer",tr.__docgenInfo={description:"",displayName:"CardContainer",props:{isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/CardContainer.tsx#CardContainer"]={docgenInfo:tr.__docgenInfo,name:"CardContainer",path:"src/lib/containers/CardContainer.tsx#CardContainer"})}catch{}const ea=({sortConfig:e,facetAliases:t})=>{const{defaultColumn:n,defaultDirection:r,sortableColumns:o}=e,a=wt(),{getLastQueryRequest:i,executeQueryRequest:s}=a,[l,d]=T.exports.useState(n),[c,f]=T.exports.useState(r),p=o.map(h=>({value:h,label:Rt(h,t)})),g=h=>{const m=i();let v="ASC";h===l&&(v=c==="ASC"?"DESC":"ASC");const b=h?[{column:h,direction:v}]:void 0;m.query.sort=b,s(m),d(h),f(v)};return N("div",{className:"QuerySortSelector bootstrap-4-backport",children:[u(vt,{variant:"label",className:"sort-by-label SRC-inlineBlock",children:"Sort by"}),u(oy,{className:"react-select-container SRC-inlineBlock",value:sy(l,p),options:p,onChange:h=>g(h==null?void 0:h.value),components:{Control:ly},styles:{control:h=>({...h,marginLeft:"15px"})}})]})};try{ea.displayName="QuerySortSelector",ea.__docgenInfo={description:"",displayName:"QuerySortSelector",props:{sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!0,type:{name:"SortConfiguration"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/QuerySortSelector.tsx#QuerySortSelector"]={docgenInfo:ea.__docgenInfo,name:"QuerySortSelector",path:"src/lib/containers/QuerySortSelector.tsx#QuerySortSelector"})}catch{}var yt=(e=>(e.CURRENT_WINDOW="_self",e.NEW_WINDOW="_blank",e.PARENT_FRAME="_parent",e.FULL_WINDOW_BODY="_top",e))(yt||{});const ta=e=>{const t=el(e.sql,e.searchParams,e.sqlOperator),{sortConfig:n,facetAliases:r}=e,o=n?[{column:n.defaultColumn,direction:n.defaultDirection}]:void 0,a={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:Cn(t),query:{sql:t,limit:e.limit,sort:o},partMask:pr|hr|Qs|lf|Xs|Zs|Gs|Js};return u(jn,{...e,initQueryRequest:a,children:N(nl,{rgbIndex:e.rgbIndex,unitDescription:e.unitDescription,facetAliases:e.facetAliases,children:[n&&u(ea,{sortConfig:n,facetAliases:r}),u(tr,{...e}),u(rl,{children:i=>u(cf,{error:i==null?void 0:i.error})})]})})},jR=ta;try{ta.displayName="CardContainerLogic",ta.__docgenInfo={description:"Class wraps around CardContainer and serves as a standalone logic container for rendering cards.",displayName:"CardContainerLogic",props:{limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"KeyValue"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!1,type:{name:"SortConfiguration"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/CardContainerLogic.tsx#CardContainerLogic"]={docgenInfo:ta.__docgenInfo,name:"CardContainerLogic",path:"src/lib/containers/CardContainerLogic.tsx#CardContainerLogic"})}catch{}export{Dv as A,jR as C,Qn as D,Pv as E,Yo as F,kt as H,Do as I,Rv as L,ao as M,Vv as P,_I as Q,ke as S,Ve as a,Iv as b,YR as c,Mv as d,go as e,nm as f,No as g,zv as h,Ro as i,jo as j,tf as k,RI as l,VN as m,xI as n,xE as p,Hv as u};
