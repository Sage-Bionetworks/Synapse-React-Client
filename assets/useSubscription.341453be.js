import{f as c,by as g,j as S,bz as A,bA as I,I as C,bB as E,bC as l,bD as b}from"./index.97694b3a.js";import{u as f}from"./useInfiniteQuery.103bebeb.js";import{u as D}from"./useMutation.89b98481.js";import{D as m}from"./EntityChildren.50133102.js";import{r as R}from"./jsx-runtime.e32e0509.js";function k(s,n,e,t,r,u){const{accessToken:i}=c();return f(["forumthread","infinite",s,n,r,e,t],async a=>g(i,s,a.pageParam,n,e,t,r),{...u,getNextPageParam:(a,o)=>{if(a.results.length>0)return o.length*n}})}function M(s,n){const{accessToken:e}=c();return S(["thread",s],()=>A(s,e),n)}function v(s,n,e,t,r,u){const{accessToken:i}=c();return f(["forumthread","infinite",s,e,r,t,n],async a=>I(i,s,e,a.pageParam,t,n,r),{...u,getNextPageParam:(a,o)=>{if(a.results.length>0)return o.length*e}})}var d=(s=>(s.FORUM="FORUM",s.THREAD="THREAD",s.DATA_ACCESS_SUBMISSION="DATA_ACCESS_SUBMISSION",s.DATA_ACCESS_SUBMISSION_STATUS="DATA_ACCESS_SUBMISSION_STATUS",s))(d||{}),T=(s=>(s.SUBSCRIPTION_ID="SUBSCRIPTION_ID",s.SUBSCRIBER_ID="SUBSCRIBER_ID",s.OBJECT_ID="OBJECT_ID",s.OBJECT_TYPE="OBJECT_TYPE",s.CREATED_ON="CREATED_ON",s))(T||{});function B(s,n,e){const{accessToken:t}=c();return S([t,"subscription",s,n],async()=>{const u={objectType:n,idList:[s],sortByType:T.OBJECT_ID,sortDirection:m.ASC};return(await b(t,u)).results[0]},e)}function O(s){const n=C(),{accessToken:e}=c();return D(t=>E(e,t),{...s,onSuccess:async(t,r,u)=>{await n.invalidateQueries([e,"subscription"]),s!=null&&s.onSuccess&&await s.onSuccess(t,r,u)}})}function P(s){const n=C(),{accessToken:e}=c();return D(t=>l(e,t),{...s,onSuccess:async(t,r,u)=>{await n.invalidateQueries([e,"subscription"]),s!=null&&s.onSuccess&&await s.onSuccess(t,r,u)}})}const F=(s,n)=>{const{data:e,isLoading:t}=B(s,n),{mutate:r,isLoading:u}=O(),{mutate:i,isLoading:a}=P(),o=t||u||a,_=R.exports.useCallback(()=>{e?i(e.subscriptionId):r({objectId:s,objectType:n})},[i,s,n,r,e]);return{isLoading:o,subscription:e,toggleSubscribed:_}};export{d as S,F as a,v as b,k as c,M as u};
