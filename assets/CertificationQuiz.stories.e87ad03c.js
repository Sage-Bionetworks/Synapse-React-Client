import{w as b,aV as k,aW as E,aX as N}from"./index.6da2bee4.js";import{k as d}from"./ToastMessage.0ffd35ff.js";import{M as O}from"./MarkdownPopover.8b990f1b.js";import{T as m}from"./Typography.9748340b.js";import{a as n,j as t,F as B}from"./jsx-runtime.00d70968.js";import{B as g}from"./Button.fda23eee.js";import{H as w}from"./IconSvg.45071707.js";import"./withStyles.d6b2de44.js";import"./objectWithoutProperties.a0dea5ce.js";import"./objectWithoutPropertiesLoose.5e7699d1.js";import"./toConsumableArray.8f496188.js";import"./createClass.67a84016.js";import"./FullWidthAlert.a73af62a.js";import"./Tooltip.02f85a09.js";import"./SvgIcon.5d5878ed.js";import"./slicedToArray.e9a7fa03.js";import"./makeStyles.2422b359.js";import"./index.57d09176.js";import"./index.35ce73ec.js";import"./assert.d4810e08.js";import"./iframe.abd6b882.js";import"./getEndpoint.bb7ded34.js";import"./usePopperMarginModifiers.1c4b2def.js";import"./useWaitForDOMRef.d07b3a07.js";import"./MarkdownSynapse.d86f7b16.js";import"./UserCard.0e5c85b8.js";import"./IconCopy.095bf867.js";import"./SkeletonTable.3566e849.js";import"./times.5e760663.js";import"./toInteger.73b1b5d3.js";import"./Skeleton.88496afb.js";import"./Overlay.3297046e.js";import"./factory.13751b6d.js";import"./sqlFunctions.b49ac766.js";import"./SynapseVideo.59d1e4cc.js";import"./react-intersection-observer.esm.e445ee86.js";import"./DateFormatter.e7e66a00.js";import"./moment.a565bb48.js";import"./InfoOutlined.303a7ed9.js";const L="org.sagebionetworks.repo.model.quiz.MultichoiceResponse",M=window.React,H=window.React.useEffect,u=window.React.useState,p=()=>{const{accessToken:a}=b(),z=k(),[i,T]=u(),[l,f]=u([]),[r,h]=u(),C=M.useRef(null),_="https://help.synapse.org/docs/Getting-Started.2055471150.html",y=async()=>{try{T(await E(a))}catch(e){z(e)}};H(()=>{y()},[a]);const x=(e,s)=>{const c=[...l.filter(o=>o.questionIndex!==e),{questionIndex:e,answerIndex:[s],concreteType:L}];f(c)},S=()=>{var e;(e=C.current)==null||e.reset(),f([]),h(void 0),y()},R=async()=>{try{if(i&&i.questions.length===l.length){const e={quizId:i.id,questionResponses:l},s=await N(a,e);h(s),window.scrollTo(0,0)}else d("Please answer all of the questions and try again.","warning")}catch(e){d(e.reason,"danger")}},v=e=>e?{content:t(B,{children:"More info"}),closePopoverOnClick:!0,onClick:()=>window.open(e,"_blank"),variant:"primary"}:void 0;return n("div",{className:"bootstrap-4-backport CertificationQuiz",children:[r&&n("div",{children:[!r.passed&&t("div",{className:"failBanner",children:"Quiz Failed"}),n(m,{variant:"hintText",children:["Score: ",r.score," / ",i==null?void 0:i.questions.length]}),r.passed?d(`You passed the Synapse Certification Quiz on ${r.passedOn}`,"success"):n(m,{variant:"body1",children:["Please review the items shown in red below, and"," ",t("a",{href:"#",onClick:e=>{e.preventDefault(),S()},children:"try again"}),"."]})]}),n("div",{className:"CertificationQuiz__container",children:[n(g,{onClick:()=>window.open(_,"_blank"),className:"help-button",variant:"light-secondary",children:[t(w,{className:"HelpButton",style:{marginRight:"4px"}}),"Help"]}),i?t("div",{dangerouslySetInnerHTML:{__html:i.header}}):"",t("form",{ref:C,onSubmit:e=>e.preventDefault(),children:t("ol",{children:i==null?void 0:i.questions.map(e=>{var s,c;return n("li",{role:e.exclusive?"radiogroup":void 0,children:[t("div",{dangerouslySetInnerHTML:{__html:e.prompt},className:r&&((c=(s=r.corrections)==null?void 0:s.find(o=>o.question.questionIndex===e.questionIndex))!=null&&c.isCorrect?"":"incorrectQuestion")}),e.answers.map(o=>n("div",{children:[t("input",{id:`${e.questionIndex}-${o.answerIndex}`,name:`${e.questionIndex}`,type:e.exclusive?"radio":"checkbox",value:o.answerIndex,onClick:I=>x(e.questionIndex,Number(I.currentTarget.value)),disabled:!!r}),t("label",{style:{fontWeight:400},htmlFor:`${e.questionIndex}-${o.answerIndex}`,children:o.prompt})]},`${e.questionIndex}-${o.answerIndex}`)),t(O,{contentProps:{markdown:e.helpText},placement:"right",actionButton:v(e.docLink),showCloseButton:!0,children:n(m,{variant:"hintText",color:"primary",children:[t(w,{className:"HelpButton",style:{marginRight:"4px"}}),"Need help answering this question?"]})})]},e.questionIndex)})})}),t(g,{className:"help-button",variant:"primary",onClick:()=>R(),children:"Submit"})]})]})},Q=p;try{p.displayName="CertificationQuiz",p.__docgenInfo={description:"",displayName:"CertificationQuiz",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/CertificationQuiz.tsx#CertificationQuiz"]={docgenInfo:p.__docgenInfo,name:"CertificationQuiz",path:"src/lib/containers/CertificationQuiz.tsx#CertificationQuiz"})}catch{}const Se={parameters:{storySource:{source:`import React from 'react'
import { ComponentStory, ComponentMeta } from '@storybook/react'

import CertificationQuiz from './CertificationQuiz'

export default {
  title: 'Synapse/CertifcationQuiz',
  component: CertificationQuiz,
  argTypes: {},
} as ComponentMeta<typeof CertificationQuiz>

const Template: ComponentStory<typeof CertificationQuiz> = args => (
  <CertificationQuiz {...args} />
)

export const CertificationQuizDemo = Template.bind({})
CertificationQuizDemo.args = {}
`,locationsMap:{"certification-quiz-demo":{startLoc:{col:59,line:12},endLoc:{col:1,line:14},startBody:{col:59,line:12},endBody:{col:1,line:14}}}}},title:"Synapse/CertifcationQuiz",component:Q,argTypes:{}},$=a=>t(Q,{...a}),P=$.bind({});P.args={};const Re=["CertificationQuizDemo"];export{P as CertificationQuizDemo,Re as __namedExportsOrder,Se as default};
