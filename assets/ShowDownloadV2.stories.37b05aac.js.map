{"version":3,"file":"ShowDownloadV2.stories.37b05aac.js","sources":["../../src/lib/containers/download_list_v2/ShowDownloadV2.tsx"],"sourcesContent":["import React, { useEffect } from 'react'\nimport { TOOLTIP_DELAY_SHOW } from '../table/SynapseTableConstants'\nimport { useSynapseContext } from '../../utils/SynapseContext'\nimport { useErrorHandler } from 'react-error-boundary'\nimport { useGetDownloadListStatistics } from '../../utils/hooks/SynapseAPI/download/useGetDownloadListStatistics'\nimport IconSvg from '../IconSvg'\nimport Tooltip from '../../utils/tooltip/Tooltip'\n\nexport type ShowDownloadV2Props = {\n  to: string\n  className?: string\n}\n\n/**\n * Nav bar item, displayed when files have been added to the Download Cart.\n * This must be configured with the URL of a page dedicated to showing the Download Cart.\n */\nfunction ShowDownloadV2({ to, className = '' }: ShowDownloadV2Props) {\n  const { accessToken } = useSynapseContext()\n  const handleError = useErrorHandler()\n  const tooltipText = 'Click to view items in your download cart.'\n\n  const {\n    data,\n    isLoading,\n    isError,\n    error: newError,\n  } = useGetDownloadListStatistics()\n\n  useEffect(() => {\n    if (isError && newError && accessToken) {\n      handleError(newError)\n    }\n  }, [isError, newError, handleError, accessToken])\n\n  if (!accessToken || isLoading) {\n    return <></>\n  }\n\n  const size = data?.totalNumberOfFiles ?? 0\n  if (size === 0) {\n    return <></>\n  }\n  const content = (\n    <Tooltip\n      title={tooltipText}\n      placement=\"bottom\"\n      enterNextDelay={TOOLTIP_DELAY_SHOW}\n    >\n      <span>\n        <span className=\"SRC-primary-text-color\">\n          <IconSvg\n            options={{\n              icon: 'cart',\n            }}\n          />\n        </span>\n        <span className={`download-cart-size`}>{size}</span>\n      </span>\n    </Tooltip>\n  )\n  return (\n    <a\n      className={`Download-Link v2 ${className}`}\n      href={to}\n      rel=\"noopener noreferrer\"\n    >\n      {content}\n    </a>\n  )\n}\n\nexport default ShowDownloadV2\n"],"names":["to","accessToken","data","isLoading","isError","newError","useEffect","handleError","_jsx","_Fragment","tooltipText","TOOLTIP_DELAY_SHOW","size","className","content"],"mappings":"43BAAA,KAAA,GAAA,OAAA,MAAA,UAiBA,WAAA,CAAwB,KAAEA,YAAAA,IAAgB,OACxC,KAAA,CAAM,eAAEC,EAAAA,EACR,EAAA,IACA,EAAA,6CAEA,CAAM,OACJC,YACAC,UACAC,MAAAA,GACOC,EAAAA,EAST,GANAC,EAAAA,IAAAA,CACE,AAAA,GAAA,GAAA,GACEC,EAAAA,CAAAA,CACD,EAAA,CAAA,EAAA,EAAA,EAAA,CAAA,CAAA,EAGH,CAAA,GAAA,EACE,MAAAC,GAAAC,EAAA,CAAA,CAAA,EAGF,KAAA,GAAA,oBAAA,qBAAA,OAAA,EACA,GAAA,IAAA,EACE,MAAAD,GAAAC,EAAA,CAAA,CAAA,EAEF,KAAA,GAAAD,EAAA,EAAA,CACE,MAAA,EACSE,UAAAA,SACG,eAAA,EACMC,SAAAA,EAAAA,OAAAA,CAEhB,SAAA,CAAAH,EAAA,OAAA,CACE,UAAA,yBAAgB,SAAAA,EAAA,EAAA,CACd,QAAA,CACW,KAAA,MACD,CADC,CAAA,CADX,CAAA,EAAAA,EAAA,OAAA,CAMF,UAAA,qBAAkB,SAAA,CAAsBI,CAAAA,CAAAA,CAR1C,CAAA,CAAA,CAAA,EAYJ,MAAAJ,GAAA,IAAA,CACE,UAAA,oBAAA,IACiCK,KAAAA,EACzBb,IAAAA,sBACF,SAAA,CAEHc,CAAAA,CAGN;;;;;;;;;;;;;;;;;;"}