{"version":3,"file":"OAuthManagement.stories.592dac44.js","sources":["../../src/lib/utils/hooks/SynapseAPI/oauth/useOAuthClient.ts","../../src/lib/containers/oauth/OAuthManagement.tsx"],"sourcesContent":["import { useInfiniteQuery, UseInfiniteQueryOptions } from 'react-query'\nimport { SynapseClient } from '../../..'\nimport { SynapseClientError } from '../../../SynapseClientError'\nimport { useSynapseContext } from '../../../SynapseContext'\nimport { OAuthClientList } from '../../../synapseTypes/OAuthClient'\n\nexport function useGetOAuthClientInfinite(\n  options?: UseInfiniteQueryOptions<OAuthClientList, SynapseClientError>,\n) {\n  const { accessToken } = useSynapseContext()\n\n  return useInfiniteQuery<OAuthClientList, SynapseClientError>(\n    ['oAuthClient', accessToken],\n    async context =>\n      await SynapseClient.getOAuth2(accessToken!, context.pageParam),\n    {\n      ...options,\n      getNextPageParam: page => page.nextPageToken,\n    },\n  )\n}\n","import React from 'react'\nimport { Table } from 'react-bootstrap'\nimport { formatDate } from '../../utils/functions/DateFormatter'\nimport moment from 'moment'\nimport { Button } from 'react-bootstrap'\nimport { useGetOAuthClientInfinite } from '../../utils/hooks/SynapseAPI'\n\nexport const OAuthManagement: React.FunctionComponent = () => {\n  const { data, hasNextPage, fetchNextPage } = useGetOAuthClientInfinite()\n  const oAuthClientList = data?.pages.flatMap(page => page.results) ?? []\n\n  return (\n    <div className=\"bootstrap-4-backport\">\n      <Table striped>\n        <thead>\n          <tr>\n            <th>Created</th>\n            <th>Modified</th>\n            <th>Client</th>\n            <th>Verified</th>\n            <th>App Secret</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {oAuthClientList.map(item => {\n            return (\n              <tr key={item.client_id}>\n                <td>{formatDate(moment(item.createdOn))}</td>\n                <td>{formatDate(moment(item.modifiedOn))}</td>\n                <td>{item.client_name}</td>\n                <td>\n                  {item.verified ? 'Yes' : 'SUBMIT_VERIFICATION_PLACE_HOLDER'}\n                </td>\n                <td>GENERATE_PLACEHOLDER</td>\n                <td>ACTIONS_PLACEHOLDER</td>\n              </tr>\n            )\n          })}\n        </tbody>\n      </Table>\n      {hasNextPage && (\n        <div className=\"text-center\">\n          <Button variant=\"primary\" onClick={() => fetchNextPage()}>\n            Load more\n          </Button>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":["SynapseClient.getOAuth2","data","hasNextPage","fetchNextPage","_jsxs","_jsx","moment","client_name"],"mappings":"4rBAMO,WACL,EACA,CACM,KAAA,CAAE,eAAgB,IAExB,MAAO,GACL,CAAC,cAAe,CAAW,EAC3B,KAAM,IACJ,KAAMA,GAAwB,EAAc,EAAQ,SAAS,EAC/D,CACE,GAAG,EACH,iBAAkB,GAAQ,EAAK,aAAA,CAEnC,CACF,CCbO,KAAA,GAAA,IAAA,OACL,KAAA,CAAM,OAAEC,cAAMC,iBAAaC,EAAAA,EAC3B,EAAA,oBAAA,MAAA,QAAA,AAAA,GAAA,EAAA,WAAA,OAAA,GAEA,MAAAC,GAAA,MAAA,CACE,UAAA,uBAAe,SAAA,CAAAA,EAAA,EAAA,CACb,QAAA,GAAA,SAAA,CAAAC,EAAA,QAAA,CACE,SAAAD,EAAA,KAAA,CACE,SAAA,CAAAC,EAAA,KAAA,CACE,SAAA,SAAA,CAAA,EAAAA,EAAA,KAAA,CACA,SAAA,UAAA,CAAA,EAAAA,EAAA,KAAA,CACA,SAAA,QAAA,CAAA,EAAAA,EAAA,KAAA,CACA,SAAA,UAAA,CAAA,EAAAA,EAAA,KAAA,CACA,SAAA,YAAA,CAAA,EAAAA,EAAA,KAAA,CACA,SAAA,SAAA,CAAA,CAAA,CANF,CAAA,CAAA,CAAA,EAAAA,EAAA,QAAA,CASF,SAAA,EAAA,IAAA,AAAA,GAEID,EAAA,KAAA,CACE,SAAA,CAAAC,EAAA,KAAA,CACE,SAAA,EAAAC,EAAA,EAAA,SAAA,CAAA,CAAe,CAAA,EAAAD,EAAA,KAAA,CACf,SAAA,EAAAC,EAAA,EAAA,UAAA,CAAA,CAAe,CAAA,EAAAD,EAAA,KAAA,CACf,SAAA,EAAA,WAAUE,CAAAA,EAAAA,EAAAA,KAAAA,CACV,SAAA,EAAA,SAAA,MAAA,kCAC2B,CAAA,EAAAF,EAAA,KAAA,CAE3B,SAAA,sBAAA,CAAA,EAAAA,EAAA,KAAA,CACA,SAAA,qBAAA,CAAA,CAAA,CARF,EAAA,EAAA,SAAA,CAAA,CAFH,CAAA,CAAA,CAZL,CAAA,EAAA,GAAAA,EAAA,MAAA,CA6BE,UAAA,cAAe,SAAAA,EAAA,EAAA,CACb,QAAA,UAAgB,QAAA,IAAA,EAAA,EAAhB,SAAA,WAAA,CAAA,CAAA,CAAA,CAAA,CA/BN,CAAA,CAsCH;;;;;;;;;;;;;;;;;"}