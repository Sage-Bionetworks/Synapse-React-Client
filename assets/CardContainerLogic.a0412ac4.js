import{f as Ke,h as We,j as Ge,k as ze,F as we,l as Ve,D as He,O as Le,M as xe,G as je,m as Je,n as Xe,o as Ze,B as en,p as nn,q as an,r as tn,s as rn,t as sn,v as on,w as ln,E as dn}from"./index.6ac6fc35.js";import{S as Qe,D as cn,p as un,i as pn,a as mn}from"./sqlFunctions.59c64146.js";import{u as fn}from"./useGetInfoFromIds.a1bfd431.js";import{C as Ce}from"./ColumnType.744125d2.js";import"./assert.28421ae9.js";import{i as Pe}from"./EntityTypeUtils.2e1e059f.js";import{P as G}from"./getEndpoint.bb7ded34.js";import{u as ne}from"./ElementWithTooltip.818590d5.js";import{d as yn}from"./Tooltip.006e7cf4.js";import{u as Cn,T as gn,g as hn,Q as _n,a as Sn,b as Rn,c as Ln}from"./TotalQueryResults.9688f412.js";import{u as bn}from"./use-deep-compare-effect.esm.76673280.js";import{i as Nn}from"./queryUtils.6a2e997c.js";import{j as e,a as u,F as T}from"./jsx-runtime.00d70968.js";import{c as ae}from"./cloneDeep.ca633d44.js";import{C as Ie,I as Ue,a as On,S as In}from"./index.06cfde76.js";import{M as ge}from"./MarkdownSynapse.d883b932.js";import{I as Tn}from"./IconList.47bd9f12.js";import{I as Te,t as vn}from"./IconSvg.e3afc045.js";import{U as Ne}from"./UserCard.103461a8.js";import{F as qn}from"./FileHandleLink.af421764.js";import{u as An}from"./react-intersection-observer.esm.e445ee86.js";import{i as En}from"./isEmpty.060e5fe4.js";import{l as wn}from"./LoadingScreen.b468edab.js";import{c as Vn}from"./calculateFriendlyFileSize.9c20c573.js";import{B as ve}from"./Button.fda23eee.js";import{h as xn}from"./moment.a565bb48.js";import{S as kn}from"./SkeletonTable.9c89f8b3.js";import{S as ke}from"./Skeleton.c897a2bf.js";import{s as Dn}from"./NoSearchResults.a01d676d.js";import{U as Fn}from"./UserCardList.d72736a1.js";const De=window.React.useState,Mn=window.React.useEffect,te=({type:a,title:n,subTitle:t="",description:r,values:i,secondaryLabelLimit:l,isAlignToLeftNav:d,descriptionConfig:c,href:s,target:o,rgbIndex:f,icon:h})=>{const m=document.querySelector('meta[name="description"]'),[b]=De(document.title),[_]=De(m?m.getAttribute("content"):"");return Mn(()=>(n&&document.title!==n&&(document.title=n),(r||t)&&(m==null||m.setAttribute("content",r||t)),function(){document.title=b,m==null||m.setAttribute("content",_)})),e("div",{className:`SRC-portalCard SRC-portalCardHeader ${d?"isAlignToLeftNav":""}`,children:e("div",{className:"container-fluid container-full-width",children:e("div",{className:"row",children:e("div",{className:"col-md-offset-1 col-md-10",children:u("div",{className:"SRC-portalCardMain",children:[h,u("div",{style:{width:"100%"},children:[u("div",{className:"SRC-cardContent",style:{marginLeft:"15px"},children:[e("div",{className:"SRC-type",children:a}),e("div",{children:e("h3",{className:"SRC-boldText",style:{margin:"none"},children:s?e("a",{target:o,href:s,className:"highlight-link",children:n}):u("span",{children:[" ",n," "]})})}),t&&u("div",{className:"SRC-author",children:[" ",t," "]}),r&&e("span",{className:"SRC-font-size-base",children:c!=null&&c.isMarkdown?e(ge,{markdown:r}):r})]}),e("div",{style:{borderTop:"1px solid rgba(26, 28, 41, 0.2)",marginTop:"15px",paddingTop:"5px"}}),e("div",{className:"SRC-cardContent",children:i&&e(Ie,{isHeader:!0,secondaryLabelLimit:l,values:i})})]})]})})})})})};try{te.displayName="HeaderCard",te.__docgenInfo={description:"",displayName:"HeaderCard",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subTitle:{defaultValue:{value:""},description:"",name:"subTitle",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[][]"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},href:{defaultValue:null,description:"",name:"href",required:!1,type:{name:"string"}},target:{defaultValue:null,description:"",name:"target",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"Element"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HeaderCard.tsx#HeaderCard"]={docgenInfo:te.__docgenInfo,name:"HeaderCard",path:"src/lib/containers/HeaderCard.tsx#HeaderCard"})}catch{}const Bn=window.React.useEffect,Hn=window.React.useState,re=a=>{const{fileHandleAssociation:{fileHandleId:n,associateObjectId:t,associateObjectType:r}}=a,{accessToken:i}=Ke(),[l,d]=Hn(),{ref:c,inView:s}=An({triggerOnce:!0,rootMargin:"500px 0px"});return Bn(()=>{(()=>{n&&t&&r&&s&&We(n,i,r,t,!1).then(f=>{d(f)}).catch(f=>{console.error("Error on retrieving file handle url ",f)})})()},[s,n,t,i,r]),e("span",{ref:c,children:l&&e("img",{src:l,alt:"",className:"ImageFileHandle",loading:"lazy"})})};try{re.displayName="ImageFileHandle",re.__docgenInfo={description:"",displayName:"ImageFileHandle",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"]={docgenInfo:re.__docgenInfo,name:"ImageFileHandle",path:"src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"})}catch{}const Oe=window.React,qe=400,Qn="SRC-short-description",Pn="SRC-long-description",ie=a=>{let n="";const t=a.split(" ");let r=0;for(;n.length<qe&&r<t.length;)n+=`${t[r]} `,r+=1;return n=n.trim(),{previewText:n}},Un=(a,n,t)=>{var i;let r;return a&&n&&(Pe(a)?r={fileHandleId:n,associateObjectId:(i=a==null?void 0:a.id)!=null?i:"",associateObjectType:we.TableEntity}:t&&(r={fileHandleId:n,associateObjectId:t,associateObjectType:we.FileEntity})),r},D=({columnName:a,value:n,selectColumns:t,columnModels:r})=>{if(!n)return{str:"",strList:void 0,columnModelType:void 0};const i=(t==null?void 0:t.find(d=>d.name===a))||(r==null?void 0:r.find(d=>d.name===a));if(i==null?void 0:i.columnType.endsWith("_LIST")){let d=n,c;try{return c=JSON.parse(d),d=c.join(", "),{strList:c,str:d,columnModelType:i==null?void 0:i.columnType}}catch(s){console.error("Could not parse multivalue string ",d," caught err ",s)}}return{str:n,columnModelType:i==null?void 0:i.columnType}},Yn=(a,n,t)=>(n==null?void 0:n.findIndex(r=>r.name===a))||(t==null?void 0:t.findIndex(r=>r.name===a)),se=a=>{const{synapseId:n,version:t}=a;return u("span",{children:[t,"\xA0\xA0",e("a",{target:w.NEW_WINDOW,rel:"noopener noreferrer",href:`${G.PORTAL}#!Synapse:${n}.${t}`,children:"(Show Version History on Synapse)"})]})},oe=a=>{const{value:n,columnName:t,labelLink:r,selectColumns:i,columnModels:l,isHeader:d,className:c,rowData:s}=a;if(!n)return e(T,{children:n});const{strList:o,str:f,columnModelType:h}=D({columnName:t,value:n,selectColumns:i,columnModels:l});if(!f)return e(T,{children:f});let m=c;const b={};if(d&&(m=c==null?void 0:c.concat(" ","SRC-lightLink")),h===Ce.USERID_LIST&&o)return e(T,{children:o.map((S,C)=>u("span",{children:[e(Ne,{ownerId:S,size:Ve,className:m}),C<o.length-1&&",\xA0\xA0"]},S))});if(h===Ce.USERID&&f)return e(Ne,{ownerId:f,size:Ve,className:m});if(!r)return f.match(Qe)?e("a",{target:w.NEW_WINDOW,rel:"noopener noreferrer",href:`${G.PORTAL}#!Synapse:${f}`,className:m,children:f}):e(T,{children:f});let _;if(r.isMarkdown)o?_=e(T,{children:o.map((S,C)=>u("span",{children:[e(ge,{renderInline:!0,markdown:S},S),C<o.length-1&&",\xA0\xA0"]},S))}):_=e(ge,{renderInline:!0,markdown:n});else{const S=o||f.split(",");let C;if("target"in r&&(C=r.target),"linkColumnName"in r){const R=Yn(r.linkColumnName,i,l);if(R==null)console.warn(`Could not determine column index of ${r.linkColumnName}`),_=e(T,{children:n});else{const p=s[R];En(p)?_=e(T,{children:n}):_=e(T,{children:S.map((O,g)=>u(Oe.Fragment,{children:[e("a",{href:p!=null?p:void 0,target:C!=null?C:w.NEW_WINDOW,rel:"noopener noreferrer",className:m,style:b,children:O},O),g<S.length-1&&e("span",{style:{marginRight:4},children:", "})]},O))})}}else _=e(T,{children:S.map((R,p)=>{const{baseURL:O,URLColumnName:g,wrapValueWithParens:y}=r,N=y?`(${R})`:R,I=`/${O}?${g}=${N}`;return u(Oe.Fragment,{children:[e("a",{href:I,className:m,style:b,target:C!=null?C:w.CURRENT_WINDOW,children:R},R),p<S.length-1&&e("span",{style:{marginRight:4},children:", "})]},R)})})}return r.tooltipText?e(yn,{title:r.tooltipText,enterNextDelay:300,children:e("span",{children:_})}):_};function $n(a,n,t){if(a){if(!n||!t)throw Error("Must specify CardLink and data for linking to work");const{matchColumnName:r,URLColumnName:i,overrideLinkURLColumnName:l}=a;if(l&&t[l]){const c=t[l],s=n[c];if(s)return s}const d=t[r];if(d===void 0)console.error(`Could not find match for data: ${n} with columnName ${r}`);else{const c=n[d];if(c)return`/${a.baseURL}?${i}=${c}`}}}function Fe(a,n,t,r){var c,s;a=a.trim();let i=a,l=w.CURRENT_WINDOW;a.match(Qe)?i=`${G.PORTAL}#!Synapse:${a}`:a.match(cn)?(l=w.NEW_WINDOW,i=`https://dx.doi.org/${a}`):n?n&&(i=(c=$n(n,t,r))!=null?c:"",i.includes("/DetailsPage")&&(l=w.NEW_WINDOW)):l=w.NEW_WINDOW;const d=(s=n==null?void 0:n.target)!=null?s:l;return{href:i,target:d}}function le(a){const{description:n,hasClickedShowMore:t,descriptionSubTitle:r,descriptionConfig:i}=a;let l=n;i!=null&&i.isMarkdown&&(l=e(ge,{markdown:l}));const d=t||(i==null?void 0:i.showFullDescriptionByDefault);return e("div",{className:d?"":"SRC-hidden",children:e("span",{"data-search-handle":r,className:`SRC-font-size-base ${Pn}`,children:l})})}function de(a){const{description:n,hasClickedShowMore:t,descriptionSubTitle:r,descriptionConfig:i,toggleShowMore:l}=a;return i!=null&&i.showFullDescriptionByDefault?e(T,{}):u("div",{className:t?"SRC-hidden":"",children:[e("span",{"data-search-handle":r,className:`SRC-font-size-base ${Qn} SRC-short-description`,children:ie(n).previewText}),n.length>=qe&&e("a",{style:{fontSize:"16px",cursor:"pointer",marginLeft:"5px"},className:"highlight-link",onClick:l,children:"...Show More"})]})}class W extends Oe.Component{constructor(n){super(n),this.getCutoff=t=>{let r="";const i=t.split(" ");let l=0;for(;r.length<qe&&l<i.length;)r+=`${i[l]} `,l+=1;return r=r.trim(),{previewText:r}},this.toggleShowMore=()=>{this.setState({hasClickedShowMore:!0})},this.renderTitle=({href:t,target:r,titleSearchHandle:i,title:l})=>t?e("a",{"data-search-handle":i,target:r,href:t,className:"highlight-link",children:l}):u("span",{"data-search-handle":i,children:[" ",l," "]}),this.state={hasClickedShowMore:!1}}render(){var Ae;const{schema:n,data:t,genericCardSchema:r,secondaryLabelLimit:i,selectColumns:l,columnModels:d,iconOptions:c,useTypeColumnForIcon:s=!1,isHeader:o=!1,titleLinkConfig:f,ctaLinkConfig:h,labelLinkConfig:m,facetAliases:b={},descriptionConfig:_,rgbIndex:S,columnIconOptions:C,queryContext:{entity:R}}=this.props,p=r,{hasClickedShowMore:O}=this.state,{link:g="",type:y}=p,N=t[n[p.title]];let I=p.subTitle&&t[n[p.subTitle]];I=(p==null?void 0:p.subTitle)&&D({value:I,columnName:p==null?void 0:p.subTitle,selectColumns:l,columnModels:d}).str;const F=t[n[p.description||""]],z=t[n[p.icon||""]],Q=t[n[p.dataTypeIconNames||""]],L=t[n[p.imageFileHandleColumnName||""]],P=d==null?void 0:d.find(B=>p.link===B.name),j=P==null?void 0:P.columnType,J=t[n[g]]||"",{href:X,target:Z}=Fe(J,f,t,n),$=[],{secondaryLabels:ee=[]}=p,he=R&&!Pe(R);for(let B=0;B<ee.length;B+=1){const x=ee[B];let k=t[n[x]],Se;if(k){if(he&&x==="currentVersion"){const Re=t[n.id];k=se({synapseId:Re,version:k}),Se="Version"}else{const Re=m==null?void 0:m.find(Ee=>Ee.matchColumnName===x);k=e(oe,{value:k,columnName:x,labelLink:Re,isHeader:o,selectColumns:l,columnModels:d,rowData:t}),Se=ne(x,b)}const $e=[Se,k,x];$.push($e)}}const M=Un(R,L||J,t[n.id]),K=$.length>0,v={marginTop:o?"0px":void 0,marginBottom:o?"0px":void 0,paddingBottom:K||L?void 0:"15px"},q=u(T,{children:[!s&&L&&e("div",{className:"SRC-imageThumbnail",style:{padding:p.thumbnailRequiresPadding?"21px":void 0},children:M&&e(re,{fileHandleAssociation:M})}),!s&&!L&&e("div",{className:"SRC-cardThumbnail",children:e(Ue,{iconOptions:c,value:z,type:y})}),s&&e("div",{className:"SRC-cardThumbnail",children:e(Te,{options:{icon:vn[t[n.type]]}})})]});if(o)return e(te,{descriptionConfig:_,title:N,subTitle:I,description:F,type:y,icon:q,values:$,href:X,target:Z,isAlignToLeftNav:!0,secondaryLabelLimit:i,rgbIndex:S});const A=ne(p.title,b),E=ne(p.subTitle,b),U=ne(p.description,b);let V,_e;if(h){const B=t[n[h.link]]||"",{href:x,target:k}=Fe(B,void 0,t,n);V=x,_e=k}return u("div",{style:v,className:"SRC-portalCard",children:[u("div",{className:"SRC-portalCardMain",children:[q,u("div",{className:"SRC-cardContent",children:[e("div",{className:"SRC-type",children:y}),((Ae=C==null?void 0:C.columns)==null?void 0:Ae.dataType)&&(Q==null?void 0:Q.length)&&e("div",{style:{marginTop:"20px"},children:e(Tn,{iconConfigs:C.columns.dataType,iconNames:JSON.parse(Q),useBackground:!0,useTheme:!0})}),e("div",{children:e("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"},children:!f&&j===Ce.FILEHANDLEID&&M?e(qn,{fileHandleAssociation:M,showDownloadIcon:y!==Ge,displayValue:N}):this.renderTitle({href:X,target:Z,titleSearchHandle:A,title:N})})}),I&&e("div",{"data-search-handle":E,className:"SRC-author",children:I}),F&&e(de,{description:F,hasClickedShowMore:O,descriptionSubTitle:U,descriptionConfig:_,toggleShowMore:this.toggleShowMore}),F&&e(le,{description:F,hasClickedShowMore:O,descriptionSubTitle:U,descriptionConfig:_}),h&&V&&_e&&e("div",{className:"SRC-portalCardCTALink bootstrap-4-backport",children:e("a",{target:_e,rel:"noopener noreferrer",href:V,children:h.text})})]})]}),K&&e(Ie,{isHeader:!1,secondaryLabelLimit:i,values:$,columnIconOptions:C,className:`${L?"hasImage":"hasIcon"}`})]})}}W.contextType=ze;try{le.displayName="LongDescription",le.__docgenInfo={description:"",displayName:"LongDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#LongDescription"]={docgenInfo:le.__docgenInfo,name:"LongDescription",path:"src/lib/containers/GenericCard.tsx#LongDescription"})}catch{}try{de.displayName="ShortDescription",de.__docgenInfo={description:"",displayName:"ShortDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},toggleShowMore:{defaultValue:null,description:"",name:"toggleShowMore",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#ShortDescription"]={docgenInfo:de.__docgenInfo,name:"ShortDescription",path:"src/lib/containers/GenericCard.tsx#ShortDescription"})}catch{}try{ie.displayName="getCutoff",ie.__docgenInfo={description:"",displayName:"getCutoff",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getCutoff"]={docgenInfo:ie.__docgenInfo,name:"getCutoff",path:"src/lib/containers/GenericCard.tsx#getCutoff"})}catch{}try{D.displayName="getValueOrMultiValue",D.__docgenInfo={description:"",displayName:"getValueOrMultiValue",props:{columnName:{defaultValue:null,description:"",name:"columnName",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getValueOrMultiValue"]={docgenInfo:D.__docgenInfo,name:"getValueOrMultiValue",path:"src/lib/containers/GenericCard.tsx#getValueOrMultiValue"})}catch{}try{se.displayName="VersionLabel",se.__docgenInfo={description:"",displayName:"VersionLabel",props:{synapseId:{defaultValue:null,description:"",name:"synapseId",required:!0,type:{name:"string"}},version:{defaultValue:null,description:"",name:"version",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#VersionLabel"]={docgenInfo:se.__docgenInfo,name:"VersionLabel",path:"src/lib/containers/GenericCard.tsx#VersionLabel"})}catch{}try{oe.displayName="SynapseCardLabel",oe.__docgenInfo={description:"",displayName:"SynapseCardLabel",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},labelLink:{defaultValue:null,description:"",name:"labelLink",required:!0,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink | undefined"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!0,type:{name:"SelectColumn[] | undefined"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!0,type:{name:"ColumnModel[] | undefined"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#SynapseCardLabel"]={docgenInfo:oe.__docgenInfo,name:"SynapseCardLabel",path:"src/lib/containers/GenericCard.tsx#SynapseCardLabel"})}catch{}try{W.displayName="GenericCard",W.__docgenInfo={description:"Renders a card from a table query",displayName:"GenericCard",props:{selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},useTypeColumnForIcon:{defaultValue:null,description:"",name:"useTypeColumnForIcon",required:!1,type:{name:"boolean"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"Record<string, number>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"string[]"}},tableId:{defaultValue:null,description:"",name:"tableId",required:!0,type:{name:"string | undefined"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#GenericCard"]={docgenInfo:W.__docgenInfo,name:"GenericCard",path:"src/lib/containers/GenericCard.tsx#GenericCard"})}catch{}const Kn=window.React;class H extends Kn.Component{constructor(n){super(n),this.handleLinkClick=t=>r=>{r.preventDefault(),window.open(`${G.PORTAL}#!Synapse:${t}`,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:n,schema:t,selectColumns:r,columnModels:i}=this.props,l=n[t.datasetName],d=n[t.summary],c=D({columnName:"tumorType",value:n[t.tumorType],selectColumns:r,columnModels:i}).str,s=D({columnName:"diseaseFocus",value:n[t.diseaseFocus],selectColumns:r,columnModels:i}).str,o=n[t.id],f=n[t.fundingAgency],h=n[t.fileCount],m=Vn(n[t.fileSize]),b=[["FUNDER",D({columnName:"fundingAgency",value:f,selectColumns:r,columnModels:i}).str],["SIZE",m],["FILES",h]];return u("div",{className:"SRC-portalCard SRC-typeDataset  ",children:[u("div",{className:"SRC-cardThumbnail",children:[e(Ue,{type:He}),e("div",{children:m})]}),u("div",{className:"SRC-cardContent SRC-dataset",children:[e("div",{className:"SRC-type",children:"Dataset "}),e("div",{children:e("h3",{children:e("a",{target:"_self",href:`${G.PORTAL}#!Synapse:${o}`,children:l})})}),u("div",{className:"SRC-description-dataset",children:[e("p",{className:"SRC-description-text",children:d}),e("div",{className:"SRC-cardAction bootstrap-4-backport",children:e(ve,{className:"pill SRC-datasetButton",onClick:this.handleLinkClick(o),variant:"secondary",children:"Download Dataset"})})]}),e("div",{className:"SRC-cardAnnotations",children:e(On,{chips:[c,s]})})]}),e(Ie,{isHeader:!1,secondaryLabelLimit:this.props.secondaryLabelLimit,values:b})]})}}try{H.displayName="Dataset",H.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/Dataset.tsx#Dataset"]={docgenInfo:H.__docgenInfo,name:"Dataset",path:"src/lib/containers/row_renderers/Dataset.tsx#Dataset"})}catch{}const Wn=window.React;class ce extends Wn.Component{constructor(n){super(n),this.handleLinkClick=t=>r=>{r.preventDefault(),window.open(t,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:n,schema:t}=this.props,r=n[t.organizationName],i=n[t.organizationPath],l=n[t.summary],d=n[t.website],c=n[t.logo];let s=d.replace("https://","");s=s.replace("http://",""),s.charAt(s.length-1)==="/"&&(s=s.substring(0,s.length-1));const o=window.location.hash.substring(1)===i,f={};let h;return o?f.paddingBottom="42px":h=e("div",{className:"SRC-marginAuto SRC-cardAction bootstrap-4-backport",children:e(ve,{className:"pill-xl",href:i,variant:"secondary",children:"View Funded Research"})}),u("div",{className:"SRC-portalCard SRC-typeFunder ",style:f,children:[u("div",{className:"SRC-cardContent",children:[e("div",{className:"SRC-type",children:"Organization"}),c&&e("div",{className:"SRC-cardThumbnail",children:e("img",{alt:"funder logo",className:"SRC-logo",src:c})}),e("div",{children:u("h3",{children:[o&&r,!o&&e("a",{href:i,children:r})]})}),e("div",{className:"SRC-website",children:e("a",{rel:"noopener noreferrer",target:"_blank",href:d,children:s})}),e("div",{className:"SRC-description",children:l})]}),h]})}}try{ce.displayName="Funder",ce.__docgenInfo={description:"",displayName:"Funder",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/Funder.tsx#Funder"]={docgenInfo:ce.__docgenInfo,name:"Funder",path:"src/lib/containers/row_renderers/Funder.tsx#Funder"})}catch{}try{H.displayName="Dataset",H.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/index.tsx#Dataset"]={docgenInfo:H.__docgenInfo,name:"Dataset",path:"src/lib/containers/row_renderers/index.tsx#Dataset"})}catch{}try{rowrenderers.displayName="rowrenderers",rowrenderers.__docgenInfo={description:"",displayName:"rowrenderers",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/index.tsx#rowrenderers"]={docgenInfo:rowrenderers.__docgenInfo,name:"rowrenderers",path:"src/lib/containers/row_renderers/index.tsx#rowrenderers"})}catch{}const Y=(a,n)=>a>0?`${a} ${n}${a>1?"s":""} `:"",Gn=(a,n)=>{const t=xn.duration(a,n),r=t.years(),i=t.months()%12,l=t.days()%31,d=t.hours()%24,c=t.minutes()%60,s=t.seconds()%60;return`${Y(r,"year")}${Y(i,"month")}${Y(l,"day")}${Y(d,"hour")}${Y(c,"minute")}${Y(s,"second")}`.trim()},ue=({data:a,schema:n})=>{const t=a[n.submitterName],r=a[n.submitterUserId],i=a[n.time],l=a[n.timeUnits],d=a[n.text],c=a[n.tag];return u("div",{className:"SRC-portalCard ObservationCard",children:[u("div",{className:"ObservationCard__submitter",children:[!r&&e("div",{children:t}),r&&e(Ne,{size:"SMALL USER CARD",ownerId:r})]}),i&&u("div",{className:"ObservationCard__time",children:[e(Te,{options:{icon:"time"}}),e("span",{children:Gn(i,l)})]}),e("div",{className:"ObservationCard__text",children:e(In,{summary:d})}),e("div",{className:"ObservationCard__tags",children:c&&e("span",{className:"SRC-tag",children:c})})]})},pe=()=>u("div",{className:"SRC-portalCard ObservationCard",children:[e("div",{className:"ObservationCard__submitter",children:e("span",{children:e(ke,{width:"100px"})})}),e("div",{className:"ObservationCard__time",children:e(Te,{options:{icon:"time"}})}),e("div",{className:"ObservationCard__text",children:e(kn,{numCols:1,numRows:4})}),e("div",{className:"ObservationCard__tags",children:e(ke,{width:"80px"})})]});try{ue.displayName="ObservationCard",ue.__docgenInfo={description:`Specialized Observation Card, initially implemented for the NF portal.
Expects the following columns: submitterName, submitterUserId, time, timeUnits, text, and tag.`,displayName:"ObservationCard",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"ObservationCardSchema"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"Record<string, string>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/ObservationCard.tsx#ObservationCard"]={docgenInfo:ue.__docgenInfo,name:"ObservationCard",path:"src/lib/containers/row_renderers/ObservationCard.tsx#ObservationCard"})}catch{}try{pe.displayName="LoadingObservationCard",pe.__docgenInfo={description:"",displayName:"LoadingObservationCard",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/ObservationCard.tsx#LoadingObservationCard"]={docgenInfo:pe.__docgenInfo,name:"LoadingObservationCard",path:"src/lib/containers/row_renderers/ObservationCard.tsx#LoadingObservationCard"})}catch{}function zn(){return u(T,{children:[e("p",{className:"SRC-no-results-title",children:"There is currently no content here."}),e("p",{className:"SRC-no-results-description",children:"Information is always being updated, so check back later to see if content has been added."})]})}function jn(){return u("div",{className:"text-center",children:[Dn,e("h4",{children:"No Matching Results"}),e("p",{children:"Try checking the spelling or removing filters."})]})}const me=a=>{const{isHeader:n=!1,unitDescription:t,type:r,isLoading:i,secondaryLabelLimit:l=3,title:d,...c}=a,s=Cn(),{data:o,getLastQueryRequest:f,appendNextPageToResults:h,hasNextPage:m}=s,b=f(),_=(g,y)=>{switch(y){case He:return e(H,{...g});case Je:return e(ce,{...g});case je:return e(W,{...g,queryContext:s});case Le:return e(ue,{...g});default:return e("div",{},g.key)}},S=o!=null&&o.queryResult.queryResults.tableId?[o==null?void 0:o.queryResult.queryResults.tableId]:[],C=fn({ids:S,type:"ENTITY_HEADER"});if(o){if(o&&o.queryResult.queryResults.rows.length===0)return b.query.additionalFilters?e(jn,{}):e(zn,{})}else return u("div",{children:[i&&r===Le&&e(pe,{}),i&&r!==Le&&wn]});const R={};o.queryResult.queryResults.headers.forEach((g,y)=>{R[g.name]=y});const p=m&&e("div",{className:"SRC-viewMore bootstrap-4-backport",children:e(ve,{variant:"secondary",className:"pill-xl",onClick:()=>{h()},children:"View More"})});let O;if(r===xe){const g=o.queryResult.queryResults.headers.findIndex(N=>N.columnType===Ce.USERID);if(g===-1)throw Error("Type MEDIUM_USER_CARD specified but no columnType USERID found");const y=o.queryResult.queryResults.rows.map(N=>N.values.filter(I=>I!==null)[g]);O=e(Fn,{data:o,list:y,size:xe})}else{const g=o.queryResult.queryResults.rows;O=g.length?g.map(y=>{const I={key:JSON.stringify(y.values),type:r,schema:R,isHeader:n,secondaryLabelLimit:l,data:y.values,selectColumns:o.selectColumns,columnModels:o.columnModels,tableEntityConcreteType:C[0]&&C[0].type,tableId:o==null?void 0:o.queryResult.queryResults.tableId,...c};return _(I,r)}):e(T,{})}return u("div",{role:"list",children:[d&&e("h2",{className:"SRC-card-overview-title",children:d}),!d&&t&&e(gn,{frontText:"Displaying"}),O,p]})};try{me.displayName="CardContainer",me.__docgenInfo={description:"",displayName:"CardContainer",props:{isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/CardContainer.tsx#CardContainer"]={docgenInfo:me.__docgenInfo,name:"CardContainer",path:"src/lib/containers/CardContainer.tsx#CardContainer"})}catch{}const Jn=window.React,Me=window.React.useEffect,Be=window.React.useMemo,be=window.React.useState;function fe(a){var M,K;const{initQueryRequest:n,onQueryChange:t,onQueryResultBundleChange:r}=a,[i,l]=be(n),[d,c]=be(void 0),{data:s,hasNextPage:o,fetchPreviousPage:f,fetchNextPage:h,isFetchingNextPage:m,isLoading:b,error:_,isPreviousData:S,remove:C}=Xe(i,{keepPreviousData:!0},c),R=b||S,{entityId:p,versionNumber:O}=un(i.query.sql),{data:g}=Ze(p,O),[y,N]=be(0);async function I(){if(!o)throw new Error("Called appendNextPageToResults when there is no next page");await h(),N("ALL")}async function F(){if(!o)throw new Error("Called goToNextPage when there is no next page");if(y==="ALL")throw new Error("Cannot go to next page when all pages are displayed");await h(),N(y+1)}const z=y!=="ALL"&&y>0;async function Q(){if(y==="ALL")throw new Error("Cannot go to previous page when all pages are displayed");if(!z)throw new Error("Called goToNextPage when there is no next page");await f(),N(y-1)}const L=Be(()=>{var v,q,A,E;if(!(s==null||s.pages.length===0||s.pages[0].responseBody==null))return y==="ALL"?{...s==null?void 0:s.pages[0].responseBody,queryResult:{...(v=s==null?void 0:s.pages[0].responseBody)==null?void 0:v.queryResult,queryResults:{...(A=(q=s==null?void 0:s.pages[0].responseBody)==null?void 0:q.queryResult)==null?void 0:A.queryResults,rows:(E=s.pages.flatMap(U=>{var V;return(V=U.responseBody.queryResult)==null?void 0:V.queryResults.rows}))!=null?E:[]}}}:s==null?void 0:s.pages[y].responseBody},[y,s]);bn(()=>{t&&t(JSON.stringify(i.query))},[t,i.query]),Me(()=>{L&&r&&r(JSON.stringify(L))},[L,r]);const P=(M=a.componentIndex)!=null?M:0,j=L?Nn(L.facets,L.selectColumns):!0;Me(()=>{const v=hn("QueryWrapper",P);v&&l(v)},[]);const J=Jn.useCallback(()=>ae(i),[i]);function X(){return ae(a.initQueryRequest)}function Z(v){const q=ae(v);if(l(q),N(0),q.query){const A=JSON.stringify(q.query),E=encodeURIComponent(A);a.shouldDeepLink&&(a.onQueryChange?a.onQueryChange(A):Sn("QueryWrapper",P,E))}C()}const ee={data:Be(()=>{var q,A;const v=(q=a.lockedFacet)==null?void 0:q.facet;if(v&&L){const E=ae(L),U=(A=E.facets)==null?void 0:A.filter(V=>V.columnName.toLowerCase()!==v.toLowerCase());return E.facets=U,E}else return L},[L,(K=a.lockedFacet)==null?void 0:K.facet]),isLoadingNewPage:m,hasNextPage:!!o,hasPreviousPage:!!z,isLoadingNewBundle:R,getLastQueryRequest:J,getInitQueryRequest:X,error:_,entity:g,executeQueryRequest:Z,isFacetsAvailable:j,asyncJobStatus:d,appendNextPageToResults:I,goToNextPage:F,goToPreviousPage:Q},{children:he}=a;return e(_n,{queryContext:ee,children:e("div",{className:`SRC-wrapper ${R||m?"SRC-logo-cursor":""} ${j?"has-facets":""}`,children:he})})}try{fe.displayName="InfiniteQueryWrapper",fe.__docgenInfo={description:"Component that manages the state of a Synapse table query. Data can be accessed via QueryContext using\neither `useQueryContext` or `QueryContextConsumer`.",displayName:"InfiniteQueryWrapper",props:{initQueryRequest:{defaultValue:null,description:"",name:"initQueryRequest",required:!0,type:{name:"QueryBundleRequest"}},componentIndex:{defaultValue:null,description:"",name:"componentIndex",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},lockedFacet:{defaultValue:null,description:"",name:"lockedFacet",required:!1,type:{name:"LockedFacet"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/InfiniteQueryWrapper.tsx#InfiniteQueryWrapper"]={docgenInfo:fe.__docgenInfo,name:"InfiniteQueryWrapper",path:"src/lib/containers/InfiniteQueryWrapper.tsx#InfiniteQueryWrapper"})}catch{}var w=(a=>(a.CURRENT_WINDOW="_self",a.NEW_WINDOW="_blank",a.PARENT_FRAME="_parent",a.FULL_WINDOW_BODY="_top",a))(w||{});const ye=a=>{const n=pn(a.sql,a.searchParams,a.sqlOperator),t={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:mn(n),query:{sql:n,limit:a.limit},partMask:en|nn|an|tn|rn|sn|on|ln};return e(fe,{...a,initQueryRequest:t,children:u(Rn,{rgbIndex:a.rgbIndex,unitDescription:a.unitDescription,facetAliases:a.facetAliases,children:[e(me,{...a}),e(Ln,{children:r=>e(dn,{error:r==null?void 0:r.error})})]})})},va=ye;try{ye.displayName="CardContainerLogic",ye.__docgenInfo={description:"Class wraps around CardContainer and serves as a standalone logic container for rendering cards.",displayName:"CardContainerLogic",props:{limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"KeyValue"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/CardContainerLogic.tsx#CardContainerLogic"]={docgenInfo:ye.__docgenInfo,name:"CardContainerLogic",path:"src/lib/containers/CardContainerLogic.tsx#CardContainerLogic"})}catch{}export{va as C,re as I,zn as N,oe as S,Un as a,me as b,fe as c,jn as d,Fe as g};
