import{r as o,j as e,a as m,F as U}from"./jsx-runtime.4eaffca0.js";import{f as A,bz as E,bE as N,bw as b,U as R,bx as M}from"./index.e08ca228.js";import{h as L}from"./moment.a565bb48.js";import{T as _}from"./Typography.95636964.js";import{U as v}from"./UserCard.73a822b2.js";import{h as K}from"./SynapseConstants.b6aa8bf5.js";import{I as T}from"./IconSvg.9da8b4b8.js";import{S as k}from"./SkeletonTable.862e92ab.js";import{P}from"./getEndpoint.bb7ded34.js";import{R as j}from"./Row.bd38246b.js";import{C as I}from"./isArray.33858a1d.js";import{S as Y}from"./Skeleton.3c162426.js";const d=async i=>(await fetch(i,{method:"GET",headers:{Accept:"*/*","Access-Control-Request-Headers":"authorization","Content-Type":"text/plain; charset=utf-8"}})).text(),h=i=>{const{threadId:u,replyId:l}=i,{accessToken:t}=A(),[s,x]=o.exports.useState(),[O,C]=o.exports.useState(""),[a,w]=o.exports.useState(),[p,g]=o.exports.useState(),[f,S]=o.exports.useState(!1),D=async()=>{let n;const c=await E(u,t);if(S(!0),l){const r=await N(l,t);n=await b(r.messageKey,t),g(await R(t,r.createdBy)),w(r)}else g(await R(t,c.createdBy)),n=await M(c.messageKey,t);C(await d(n.messageUrl)),x(c),S(!1)};return o.exports.useEffect(()=>{D()},[]),e("div",{className:"search-result-container",children:m(j,{children:[e(I,{xs:1,children:f?e(Y,{variant:"circle",width:"40px",height:"40px"}):l?e(T,{options:{icon:"replyTwoTone"}}):e(T,{options:{icon:"chatTwoTone"}})}),e(I,{xs:11,children:f?e(k,{numCols:1,numRows:4}):m(U,{children:[e(_,{variant:"headline3",children:e("a",{className:"link",href:((n,c,r)=>{let y=`${P.PORTAL}#!Synapse:${c}/discussion/threadId=${n}`;return r&&(y+=`&replyId=${r}`),y})(s==null?void 0:s.id,s==null?void 0:s.projectId,a==null?void 0:a.id),children:s==null?void 0:s.title})}),e("div",{className:"truncated",children:e(_,{variant:"body1",children:O})}),m("div",{className:"search-result-footer",children:[l?"Reply":"Thread"," by"," ",e(v,{size:K,ownerId:p==null?void 0:p.ownerId})," ",L(a==null?void 0:a.createdOn).format("l LT")]})]})})]})})};try{d.displayName="getMessage",d.__docgenInfo={description:"",displayName:"getMessage",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DiscussionSearchResult.tsx#getMessage"]={docgenInfo:d.__docgenInfo,name:"getMessage",path:"src/lib/containers/DiscussionSearchResult.tsx#getMessage"})}catch{}try{h.displayName="DiscussionSearchResult",h.__docgenInfo={description:"",displayName:"DiscussionSearchResult",props:{threadId:{defaultValue:null,description:"",name:"threadId",required:!0,type:{name:"string"}},replyId:{defaultValue:null,description:"",name:"replyId",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DiscussionSearchResult.tsx#DiscussionSearchResult"]={docgenInfo:h.__docgenInfo,name:"DiscussionSearchResult",path:"src/lib/containers/DiscussionSearchResult.tsx#DiscussionSearchResult"})}catch{}export{h as D,d as g};
