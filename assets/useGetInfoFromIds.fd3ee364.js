import{u as O}from"./use-deep-compare-effect.esm.9d3fc03b.js";import{V as R,C as y,H as h,y as U,E as F}from"./index.87d1c7b9.js";import{a as _}from"./useUserBundle.1ce41d85.js";import{u as T,c as D}from"./uniq.c5e688cd.js";import{w as N}from"./without.541f6c3d.js";const k=window.React.useState,H={ownerId:"",firstName:"Unknown",lastName:"Unknown",userName:"Unknown",isIndividual:!1},P={name:"Unknown",id:"unknown",type:"org.sagebionetworks.repo.model.FileEntity",versionNumber:0,versionLabel:"placeholder",benefactorId:0,createdOn:"null",modifiedOn:"null",createdBy:"null",modifiedBy:"null"},A=async(s,c)=>{const n=await y(s,c),t=s.filter(o=>n.results.map(m=>m.id).indexOf(o.targetId)===-1).map(o=>({...P,id:o.targetId,name:`${o.targetId}`}));return[...n.results,...t]},L=async s=>{const c=(await h(s)).children,l=s.filter(t=>c.map(o=>o.ownerId).indexOf(t)===-1).map(t=>({...H,ownerId:t,name:`Unknown User (${t})`}));return[...c,...l]};function B(s){const{ids:c,type:n}=s,{accessToken:l}=_(),[t,o]=k([]),m=e=>e==="USER_PROFILE"?"ownerId":"id",f=e=>e==="USER_PROFILE"?U:F,g=t.map(e=>e[m(n)]),E=c.filter(e=>e!==R),w=T(N(E,...g)),p=(e,i)=>{if(!e.length)return;const a=sessionStorage.getItem(f(i));try{const d=a?JSON.parse(a):[],I=d.map(r=>r[m(i)]);for(const r of e)I.includes(r[m(i)])||d.push(r);sessionStorage.setItem(f(i),JSON.stringify(d))}catch{sessionStorage.setItem(f(i),JSON.stringify(e))}};return O(()=>{let e=!1;return(async()=>{if(w.length>0)try{const a=Array.from(w),d=n==="USER_PROFILE"?a:a.map(u=>({targetId:u})),I=D(d,45),r=[];for(const u of I){const S=n==="USER_PROFILE"?await L(u):await A(u,l);r.push(...S)}e||o(u=>u.concat(...r))}catch(a){console.error("Error on data retrieval",a)}p(t,n)})(),()=>{e=!0}},[l,n,w]),t}export{B as u};
//# sourceMappingURL=useGetInfoFromIds.fd3ee364.js.map
