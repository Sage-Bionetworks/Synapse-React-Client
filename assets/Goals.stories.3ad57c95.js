import"./assert.21750f9f.js";import{f as w,cs as B,E as V,q as F,B as U,F as H,X as K}from"./index.06387a94.js";import{u as P}from"./useShowDesktop.8d2905d9.js";import{E as Y}from"./ExpandableContent.e49e338c.js";import{Q as O}from"./QueryCount.67c6f6ba.js";import{j as t,a as n}from"./jsx-runtime.00d70968.js";import{B as T}from"./Button.fda23eee.js";import{g as d}from"./queryUtils.573c0777.js";import"./iframe.e4cf7ff9.js";import"./withStyles.d50e1a5a.js";import"./objectWithoutPropertiesLoose.5e7699d1.js";import"./toConsumableArray.c4898ee4.js";import"./FullWidthAlert.9ae706f1.js";import"./Typography.e0d7a65e.js";import"./index.57d09176.js";import"./makeStyles.733638f6.js";import"./Tooltip.006e7cf4.js";import"./SvgIcon.53be2b5b.js";import"./slicedToArray.e72f11da.js";import"./index.35ce73ec.js";import"./ToastMessage.72011e3e.js";import"./getEndpoint.bb7ded34.js";import"./IconSvg.e3afc045.js";import"./InfoOutlined.31277c73.js";import"./sqlFunctions.b49ac766.js";import"./cloneDeep.4971235f.js";function _({link:a,summary:l,countSql:i,title:r}){return t(Y,{title:n("div",{className:"Goals__Mobile__Header",children:[i&&t("span",{className:"Goals__Mobile__Header__Count",children:t(O,{parens:!1,sql:i})}),n("span",{className:"Goals__Mobile__Header__Title",children:[" ",r," "]})]}),content:n("div",{className:"Goals__Mobile__Content bootstrap-4-backport",children:[t("p",{children:l}),t(T,{variant:"secondary",className:"pill Goals__Mobile__Content__Link",href:a,children:"EXPLORE"})]})})}try{_.displayName="GoalsMobile",_.__docgenInfo={description:"",displayName:"GoalsMobile",props:{countSql:{defaultValue:null,description:"",name:"countSql",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"string"}},link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},asset:{defaultValue:null,description:"",name:"asset",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/home_page/goals/Goals.Mobile.tsx#GoalsMobile"]={docgenInfo:_.__docgenInfo,name:"GoalsMobile",path:"src/lib/containers/home_page/goals/Goals.Mobile.tsx#GoalsMobile"})}catch{}function f({asset:a,link:l,summary:i,countSql:r,title:m}){return n("div",{className:"Goals__Card bootstrap-4-backport",children:[t("div",{className:"Goals__Card__header",style:{background:`url('${a}')`},children:n("p",{children:[n("span",{className:"Goals__Card__header__title",children:[" ",m," "]}),r&&t("span",{className:"Goals__Card__header__count",children:t(O,{parens:!1,sql:r})})]})}),n("div",{className:"Goals__Card__summary",children:[n("p",{children:[" ",i," "]}),t(T,{className:"pill Goals__Card__summary__link",variant:"secondary",href:l,children:"EXPLORE"})]})]})}try{f.displayName="GoalsDesktop",f.__docgenInfo={description:"",displayName:"GoalsDesktop",props:{countSql:{defaultValue:null,description:"",name:"countSql",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"string"}},link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},asset:{defaultValue:null,description:"",name:"asset",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/home_page/goals/Goals.Desktop.tsx#GoalsDesktop"]={docgenInfo:f.__docgenInfo,name:"GoalsDesktop",path:"src/lib/containers/home_page/goals/Goals.Desktop.tsx#GoalsDesktop"})}catch{}const Q=window.React.useEffect,I=window.React.useState,y=a=>{const{entityId:l}=a,{accessToken:i}=w(),[r,m]=I(),[g,h]=I(),b=P(),L={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:l,partMask:F|U,query:{sql:`select * from ${l} order by ItemOrder`}},{data:e}=B(L);Q(()=>{(async()=>{var u;try{const o=d("Asset",e);let c=(u=e==null?void 0:e.queryResult.queryResults.rows.map(s=>s.values[o]))!=null?u:[];if(c.some(s=>s===null)&&console.warn("Row has null value(s) when no nulls expected"),c.length===0)return;const p=c.map(s=>({associateObjectId:l,associateObjectType:H.TableEntity,fileHandleId:s})),G=await K({includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:p},i);h(void 0),m(G.requestedFiles.filter(s=>s.preSignedURL!==void 0).map(s=>s.preSignedURL))}catch(o){console.error("Error on get data",o),h(o)}})()},[l,i,e]);const C=d("TableId",e),S=d("CountSql",e),M=d("Title",e),N=d("Summary",e),D=d("Link",e);return n("div",{className:`Goals${b?"__Desktop":""}`,children:[g&&t(V,{error:g}),e==null?void 0:e.queryResult.queryResults.rows.map((E,u)=>{var k;const o=E.values;o.some(v=>v===null)&&console.warn("Row has null value(s) when no nulls expected");const c=C>-1?o[C]:void 0;let p;S>-1&&o[S]?p=o[S]:c&&(p=`SELECT * FROM ${c}`);const R=o[M],G=o[N],s=o[D],A=(k=r==null?void 0:r[u])!=null?k:"",q={countSql:p,title:R,summary:G,link:s,asset:A};return b?t(f,{...q}):t(_,{...q})})]})},x=y;try{y.displayName="Goals",y.__docgenInfo={description:"",displayName:"Goals",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/home_page/goals/Goals.tsx#Goals"]={docgenInfo:y.__docgenInfo,name:"Goals",path:"src/lib/containers/home_page/goals/Goals.tsx#Goals"})}catch{}const be={parameters:{storySource:{source:`import React from 'react'
import { ComponentStory, ComponentMeta } from '@storybook/react'
import Goals from './Goals'

export default {
  title: 'Home Page/Goals',
  component: Goals,
} as ComponentMeta<typeof Goals>

const Template: ComponentStory<typeof Goals> = args => <Goals {...args} />

export const Demo = Template.bind({})
Demo.args = {
  entityId: 'syn22315959',
}
`,locationsMap:{demo:{startLoc:{col:47,line:10},endLoc:{col:74,line:10},startBody:{col:47,line:10},endBody:{col:74,line:10}}}}},title:"Home Page/Goals",component:x},j=a=>t(x,{...a}),$=j.bind({});$.args={entityId:"syn22315959"};const Ce=["Demo"];export{$ as Demo,Ce as __namedExportsOrder,be as default};
