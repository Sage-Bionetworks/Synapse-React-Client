import{g as p,U as c}from"./UserCard.7f39e657.js";import{M as f}from"./index.87d1c7b9.js";import{C as R}from"./ColumnType.744125d2.js";import"./assert.ee5a549a.js";import{j as o}from"./jsx-runtime.2e925369.js";import{w as h}from"./without.541f6c3d.js";const y=window.React;class d extends y.Component{constructor(e){super(e),this.state={userProfileMap:{}},this.update=this.update.bind(this)}componentDidMount(){const{list:e}=this.props;this.update(e)}componentDidUpdate(e){const t=e.list,r=h(this.props.list.filter(a=>a),...t);r.length>0&&this.update(r)}update(e){p(e.filter(t=>t)).then(t=>{const r={};t.list.forEach(a=>{const{ownerId:n}=a;r[n]=a}),this.setState({userProfileMap:{...this.state.userProfileMap,...r}})}).catch(t=>{console.log("Error on batch call =",t)})}manuallyExtractData(e){const t=e.queryResult.queryResults.headers.findIndex(s=>s.name==="firstName"),r=e.queryResult.queryResults.headers.findIndex(s=>s.name==="lastName"),a=e.queryResult.queryResults.headers.findIndex(s=>s.name==="institution"),n=e.queryResult.queryResults.headers.findIndex(s=>s.columnType===R.USERID);return e.queryResult.queryResults.rows.filter(s=>!s.values[n]).map(s=>{const i=s.values;return{firstName:i[t],lastName:i[r],company:i[a],ownerId:"",userName:i[t][0]}})}render(){const{size:e=f,data:t,list:r}=this.props,{userProfileMap:a={}}=this.state,n=t&&this.manuallyExtractData(t);let l=0;return o("div",{className:"SRC-card-grid-row",children:r.map(s=>{const i=a[s];if(i)return o("div",{className:"SRC-grid-item SRC-narrow-grid-item",children:o(c,{size:e,preSignedURL:i.clientPreSignedURL,userProfile:i})},JSON.stringify(i));const u=n&&n[l];return u?(l+=1,o("div",{className:"SRC-grid-item SRC-narrow-grid-item",children:o(c,{disableLink:!0,hideEmail:!0,size:e,userProfile:u})},JSON.stringify(u))):!1})})}}try{d.displayName="UserCardList",d.__docgenInfo={description:"",displayName:"UserCardList",props:{list:{defaultValue:null,description:"",name:"list",required:!0,type:{name:"string[]"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"AVATAR"'},{value:'"SMALL USER CARD"'},{value:'"MEDIUM USER CARD"'},{value:'"LARGE USER CARD"'}]}},data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"QueryResultBundle"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/UserCardList.tsx#UserCardList"]={docgenInfo:d.__docgenInfo,name:"UserCardList",path:"src/lib/containers/UserCardList.tsx#UserCardList"})}catch{}export{d as U};
//# sourceMappingURL=UserCardList.b1be8dc4.js.map
