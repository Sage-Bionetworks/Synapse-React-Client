import{R as h,j as o}from"./jsx-runtime.076c7567.js";import{g as y,U as p}from"./UserCard.51dc49e5.js";import{w as C}from"./SynapseConstants.290eab74.js";import{C as U}from"./ColumnType.744125d2.js";import{w as S}from"./without.87978f51.js";class d extends h.Component{constructor(e){super(e),this.state={userProfileMap:{}},this.update=this.update.bind(this)}componentDidMount(){const{list:e}=this.props;this.update(e)}componentDidUpdate(e){const s=e.list,i=S(this.props.list.filter(a=>a),...s);i.length>0&&this.update(i)}update(e){y(e.filter(s=>!!s)).then(s=>{const i={};s.list.forEach(a=>{const{ownerId:n}=a;i[n]=a}),this.setState({userProfileMap:{...this.state.userProfileMap,...i}})}).catch(s=>{console.error("Error on batch call =",s)})}manuallyExtractData(e){const s=e.queryResult.queryResults.headers.findIndex(t=>t.name==="firstName"),i=e.queryResult.queryResults.headers.findIndex(t=>t.name==="lastName"),a=e.queryResult.queryResults.headers.findIndex(t=>t.name==="institution"),n=e.queryResult.queryResults.headers.findIndex(t=>t.columnType===U.USERID);return e.queryResult.queryResults.rows.filter(t=>!t.values[n]).map(t=>{var l,c,f,m;const r=t.values;return{firstName:(l=r[s])!=null?l:"",lastName:(c=r[i])!=null?c:"",company:(f=r[a])!=null?f:void 0,ownerId:null,userName:r[s]&&(m=r[s][0])!=null?m:""}})}render(){const{size:e=C,data:s,list:i}=this.props,{userProfileMap:a={}}=this.state,n=s&&this.manuallyExtractData(s);let u=0;return o("div",{className:"SRC-card-grid-row",children:i.map(t=>{const r=t!=null?a[t]:null;if(r)return o("div",{className:"SRC-grid-item SRC-narrow-grid-item",children:o(p,{size:e,preSignedURL:r.clientPreSignedURL,userProfile:r})},JSON.stringify(r));const l=n&&n[u];return l?(u+=1,o("div",{className:"SRC-grid-item SRC-narrow-grid-item",children:o(p,{disableLink:!0,hideEmail:!0,size:e,userProfile:l})},JSON.stringify(l))):!1})})}}try{d.displayName="UserCardList",d.__docgenInfo={description:"",displayName:"UserCardList",props:{list:{defaultValue:null,description:"",name:"list",required:!0,type:{name:"(string | null)[]"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"AVATAR"'},{value:'"SMALL USER CARD"'},{value:'"MEDIUM USER CARD"'},{value:'"LARGE USER CARD"'}]}},data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"QueryResultBundle"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/UserCardList.tsx#UserCardList"]={docgenInfo:d.__docgenInfo,name:"UserCardList",path:"src/lib/containers/UserCardList.tsx#UserCardList"})}catch{}export{d as U};
