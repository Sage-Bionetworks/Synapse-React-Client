import{h as z,j as jr,k as Xa,l as Xr,m as Ja,n as wt,o as Pn,F as fe,p as Ge,q as Tt,B as vt,r as Za,t as Jr,v as Zr,w as At,x as ia,y as es,z as ts,A as ns,C as as,D as rs,H as ss,I as is,J as Ra,K as er,L as Mn,M as tr,N as os,Q as ls,R as j,T as cs,V as ds,W as us,X as ps,Y as fs,U as ms,f as hs,Z as gs,_ as ys,$ as oa,a0 as Ss,a1 as nr,a2 as bs,a3 as Cs,a4 as ws,a5 as _s,a6 as Ts,a7 as Ia,a8 as xt,a9 as vs,aa as As,ab as Rs,ac as la,ad as ar,ae as ca,af as da,ag as ua,ah as Is,ai as Es,E as rr,aj as sr,ak as qs,al as ir,O as Yn,am as Ea,G as xs,an as Os}from"./index.68dc45f9.js";import{p as je,i as ks,f as Ls,a as Ns,b as pa,S as or,D as Ds}from"./sqlFunctions.02978512.js";import{u as lr}from"./useGetInfoFromIds.37160ba9.js";import{C as M}from"./ColumnType.744125d2.js";import{j as a,a as w,F as x,r as v,R as se}from"./jsx-runtime.6c466647.js";import{E as Vs,i as We,a as Fs,b as ze,c as Ps,d as cr,h as Ms,e as dr,f as ur}from"./EntityIcon.cdc6f276.js";import{P as he,g as Bs,B as Us}from"./getEndpoint.bb7ded34.js";import{u as qe,E as Bn,I as Un,C as fa,a as Hs,S as Ws}from"./ElementWithTooltip.e718efbb.js";import{u as Qs,T as ke}from"./Tooltip.a8448a48.js";import{S as $n,Q as Xe,a as Je,u as Ae,b as Rt,c as Ys,d as $s,i as zs,e as Ks,C as Gs,f as js,g as Xs,E as Js,h as Zs,j as ei,k as ma,l as ha,m as pr,n as ti,o as ni,F as ai,p as fr,T as mr,q as ri}from"./FacetNav.e18544db.js";import{u as hr,a as si,i as ii,r as oi}from"./queryUtils.798bc848.js";import{u as ga}from"./useEntity.186b0ec3.js";import{T as Ze}from"./Typography.88b87e8c.js";import{S as li}from"./react-select.esm.6182fa0f.js";import{f as ci,C as di}from"./CustomSelectWidget.8cf0fafc.js";import{B as ne}from"./Button.6bac135e.js";import{u as et}from"./react-intersection-observer.esm.ed481dc5.js";import{u as gr}from"./useInfiniteQuery.1c313722.js";import{U as Pe,a as yr,g as ui}from"./UserCard.36c5101f.js";import{f as Sr}from"./DateFormatter.dd69913a.js";import{h as Hn}from"./moment.a565bb48.js";import{S as br}from"./SkeletonTable.a7c50e8f.js";import{S as Jn}from"./Skeleton.78629bcd.js";import{c as pi,P as fi}from"./factory.c42f2560.js";import{T as Nn,N as mi,I as qa}from"./SynapseTableConstants.07ecdebd.js";import{I as Z,H as hi,S as gi,t as yi}from"./IconSvg.d55eaa4b.js";import{u as Zn}from"./use-deep-compare-effect.esm.59a8a695.js";import{u as Si}from"./useGetDownloadListStatistics.5bb3ee43.js";import{e as ya}from"./queryKeys.e0d3085f.js";import{d as Ke,C as Cr}from"./ToastMessage.f1ac94ca.js";import{A as It}from"./Alert.6302caff.js";import{r as bi}from"./index.836cff5f.js";import{i as wr,g as _r,p as Ci,e as wi,a as _i,c as Ti,o as vi,f as Ai,b as Ri,d as Ii,h as Ei}from"./usePopperMarginModifiers.29aa4eae.js";import{C as Sa}from"./Collapse.3ec40aa5.js";import{F as qi}from"./core.esm.529435ff.js";import{M as W,a as xi,b as Oi}from"./Modal.e870b920.js";import{D as Ee}from"./Dropdown.789504d1.js";import{Q as ki}from"./QueryCount.4656ccb2.js";import{c as Me}from"./createSvgIcon.aebcdc24.js";import{c as Qe}from"./cloneDeep.00031296.js";import{c as Tr,g as Li}from"./iframe.d58db294.js";import{N as Ni}from"./NoData.a418d2e8.js";import{u as vr}from"./useGetAccessRequirement.5608db0c.js";import{B as Di,S as ce}from"./ManagedACTAccessRequirementStatus.b88b720b.js";import{F as zn}from"./FileUpload.ea555d14.js";import{U as Vi}from"./UserSearchBox.2aae51b4.js";import{R as Fi}from"./RadioGroup.3681d686.js";import{s as Pi}from"./union.16449719.js";import{S as Mi,l as Ar}from"./LoadingScreen.ad9a5942.js";import{E as ea}from"./EntityLink.37d6739c.js";import{n as Bi}from"./uniq.881ae797.js";import{C as Ui}from"./Checkbox.d30401c0.js";import{s as Hi}from"./NoSearchResults.38aa00d2.js";import{b as ba,_ as Dn,w as Rr,g as Le,d as ta,e as Kn}from"./withStyles.7bec7826.js";import{d as _e}from"./toConsumableArray.c4898ee4.js";import{_ as Wi}from"./slicedToArray.e72f11da.js";import{u as Qi}from"./useTheme.94a4bd67.js";import{S as Yi}from"./SynapseVideo.3b575d65.js";import{I as $i}from"./IconList.ba0edab6.js";import{i as zi}from"./isEmpty.e86902c5.js";import{U as Ki}from"./UserCardList.3c8411ce.js";const Gi=Me(a("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})),ji=Me(w(x,{children:[a("path",{d:"M6 20h12V10H6v10zm6-7c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z",opacity:".3"}),a("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"})]})),Xi=Me(a("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}));var Ca=(e=>(e.APPROVED="APPROVED",e.REVOKED="REVOKED",e))(Ca||{}),Ji=(e=>(e.MODIFIED_ON="MODIFIED_ON",e.EXPIRED_ON="EXPIRED_ON",e))(Ji||{}),Te=(e=>(e.GAIN_ACCESS="GAIN_ACCESS",e.RENEW_ACCESS="RENEW_ACCESS",e.REVOKE_ACCESS="REVOKE_ACCESS",e))(Te||{}),Ir=(e=>(e.ProxyFileHandle="org.sagebionetworks.repo.model.file.ProxyFileHandle",e.ExternalObjectStoreFileHandle="org.sagebionetworks.repo.model.file.ExternalObjectStoreFileHandle",e.ExternalFileHandle="org.sagebionetworks.repo.model.file.ExternalFileHandle",e))(Ir||{});function Zi(e){return Object.values(Ir).includes(e.concreteType)}var Wn=(e=>(e.ENTITY="ENTITY",e.EVALUATION="EVALUATION",e.TEAM="TEAM",e))(Wn||{}),Er=(e=>(e.OPEN="OPEN",e.RESTRICTED_BY_TERMS_OF_USE="RESTRICTED_BY_TERMS_OF_USE",e.CONTROLLED_BY_ACT="CONTROLLED_BY_ACT",e))(Er||{});function eo(e,t){const{accessToken:n}=z(),r={accessRequirementId:e};return gr(["approvedSubmissionInfo",r],async s=>await jr({...r,nextPageToken:s.pageParam},n),{...t,getNextPageParam:s=>s.nextPageToken})}const to={includeEntity:!0,includeEntityPath:!0,includeAnnotations:!0,includePermissions:!0,includeHasChildren:!0,includeAccessControlList:!0,includeFileHandles:!0,includeTableBundle:!0,includeRootWikiId:!0,includeBenefactorACL:!0,includeDOIAssociation:!0,includeFileName:!0,includeThreadCount:!0,includeRestrictionInformation:!0};function no(e,t=to,n,r){const{accessToken:s}=z();return Xa(ya.bundle(e,n,t),()=>Xr(e,t,n,s),r)}function ao(e,t){const{accessToken:n}=z();return Xa(ya.children(e,!1),()=>Ja(e,n),t)}function Cd(e,t){const{accessToken:n}=z();return gr(ya.children(e,!0),async r=>await Ja({...e,includeTotalChildCount:r.pageParam?!1:e.includeTotalChildCount,nextPageToken:r.pageParam},n,r.signal),{...t,getNextPageParam:r=>r.nextPageToken})}var na={exports:{}},ae={},_t={exports:{}},Be={};function qr(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function ro(e,t,n){}function so(e,t,n){}var io=/javascript\s*\:/img;function oo(e,t){return io.test(t)?"":t}Be.whiteList=qr();Be.getDefaultWhiteList=qr;Be.onAttr=ro;Be.onIgnoreAttr=so;Be.safeAttrValue=oo;var lo={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,s;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,s=e.length;r<s;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},st=lo;function co(e,t){e=st.trimRight(e),e[e.length-1]!==";"&&(e+=";");var n=e.length,r=!1,s=0,i=0,o="";function d(){if(!r){var C=st.trim(e.slice(s,i)),m=C.indexOf(":");if(m!==-1){var u=st.trim(C.slice(0,m)),b=st.trim(C.slice(m+1));if(u){var f=t(s,o.length,u,b,C);f&&(o+=f+"; ")}}}s=i+1}for(;i<n;i++){var p=e[i];if(p==="/"&&e[i+1]==="*"){var h=e.indexOf("*/",i+2);if(h===-1)break;i=h+1,s=i+1,r=!1}else p==="("?r=!0:p===")"?r=!1:p===";"?r||d():p===`
`&&d()}return st.trim(o)}var uo=co,Ot=Be,po=uo;function xa(e){return e==null}function fo(e){var t={};for(var n in e)t[n]=e[n];return t}function xr(e){e=fo(e||{}),e.whiteList=e.whiteList||Ot.whiteList,e.onAttr=e.onAttr||Ot.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Ot.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Ot.safeAttrValue,this.options=e}xr.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,s=n.onAttr,i=n.onIgnoreAttr,o=n.safeAttrValue,d=po(e,function(p,h,C,m,u){var b=r[C],f=!1;if(b===!0?f=b:typeof b=="function"?f=b(m):b instanceof RegExp&&(f=b.test(m)),f!==!0&&(f=!1),m=o(C,m),!!m){var c={position:h,sourcePosition:p,source:u,isWhite:f};if(f){var y=s(C,m,c);return xa(y)?C+":"+m:y}else{var y=i(C,m,c);if(!xa(y))return y}}});return d};var mo=xr;(function(e,t){var n=Be,r=mo;function s(o,d){var p=new r(d);return p.process(o)}t=e.exports=s,t.FilterCSS=r;for(var i in n)t[i]=n[i];typeof window<"u"&&(window.filterCSS=e.exports)})(_t,_t.exports);var wa={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,s;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,s=e.length;r<s;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,n=t.exec(e);return n?n.index:-1}},ho=_t.exports.FilterCSS,go=_t.exports.getDefaultWhiteList,Vn=wa;function Or(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var kr=new ho;function yo(e,t,n){}function So(e,t,n){}function bo(e,t,n){}function Co(e,t,n){}function Lr(e){return e.replace(_o,"&lt;").replace(To,"&gt;")}function wo(e,t,n,r){if(n=Mr(n),t==="href"||t==="src"){if(n=Vn.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(t==="background"){if(kt.lastIndex=0,kt.test(n))return""}else if(t==="style"){if(Oa.lastIndex=0,Oa.test(n)||(ka.lastIndex=0,ka.test(n)&&(kt.lastIndex=0,kt.test(n))))return"";r!==!1&&(r=r||kr,n=r.process(n))}return n=Br(n),n}var _o=/</g,To=/>/g,vo=/"/g,Ao=/&quot;/g,Ro=/&#([a-zA-Z0-9]*);?/gim,Io=/&colon;?/gim,Eo=/&newline;?/gim,kt=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Oa=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,ka=/u\s*r\s*l\s*\(.*/gi;function Nr(e){return e.replace(vo,"&quot;")}function Dr(e){return e.replace(Ao,'"')}function Vr(e){return e.replace(Ro,function(n,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function Fr(e){return e.replace(Io,":").replace(Eo," ")}function Pr(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return Vn.trim(t)}function Mr(e){return e=Dr(e),e=Vr(e),e=Fr(e),e=Pr(e),e}function Br(e){return e=Nr(e),e=Lr(e),e}function qo(){return""}function xo(e,t){typeof t!="function"&&(t=function(){});var n=!Array.isArray(e);function r(o){return n?!0:Vn.indexOf(e,o)!==-1}var s=[],i=!1;return{onIgnoreTag:function(o,d,p){if(r(o))if(p.isClosing){var h="[/removed]",C=p.position+h.length;return s.push([i!==!1?i:p.position,C]),i=!1,h}else return i||(i=p.position),"[removed]";else return t(o,d,p)},remove:function(o){var d="",p=0;return Vn.forEach(s,function(h){d+=o.slice(p,h[0]),p=h[1]}),d+=o.slice(p),d}}}function Oo(e){for(var t="",n=0;n<e.length;){var r=e.indexOf("<!--",n);if(r===-1){t+=e.slice(n);break}t+=e.slice(n,r);var s=e.indexOf("-->",r);if(s===-1)break;n=s+3}return t}function ko(e){var t=e.split("");return t=t.filter(function(n){var r=n.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}ae.whiteList=Or();ae.getDefaultWhiteList=Or;ae.onTag=yo;ae.onIgnoreTag=So;ae.onTagAttr=bo;ae.onIgnoreTagAttr=Co;ae.safeAttrValue=wo;ae.escapeHtml=Lr;ae.escapeQuote=Nr;ae.unescapeQuote=Dr;ae.escapeHtmlEntities=Vr;ae.escapeDangerHtml5Entities=Fr;ae.clearNonPrintableCharacter=Pr;ae.friendlyAttrValue=Mr;ae.escapeAttrValue=Br;ae.onIgnoreTagStripAll=qo;ae.StripTagBody=xo;ae.stripCommentTag=Oo;ae.stripBlankChar=ko;ae.cssFilter=kr;ae.getDefaultCSSWhiteList=go;var Qn={},Ie=wa;function Lo(e){var t=Ie.spaceIndex(e),n;return t===-1?n=e.slice(1,-1):n=e.slice(1,t+1),n=Ie.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function No(e){return e.slice(0,2)==="</"}function Do(e,t,n){var r="",s=0,i=!1,o=!1,d=0,p=e.length,h="",C="";e:for(d=0;d<p;d++){var m=e.charAt(d);if(i===!1){if(m==="<"){i=d;continue}}else if(o===!1){if(m==="<"){r+=n(e.slice(s,d)),i=d,s=d;continue}if(m===">"||d===p-1){r+=n(e.slice(s,i)),C=e.slice(i,d+1),h=Lo(C),r+=t(i,r.length,h,C,No(C)),s=d+1,i=!1;continue}if(m==='"'||m==="'")for(var u=1,b=e.charAt(d-u);b.trim()===""||b==="=";){if(b==="="){o=m;continue e}b=e.charAt(d-++u)}}else if(m===o){o=!1;continue}}return s<p&&(r+=n(e.substr(s))),r}var Vo=/[^a-zA-Z0-9\\_:.-]/gim;function Fo(e,t){var n=0,r=0,s=[],i=!1,o=e.length;function d(u,b){if(u=Ie.trim(u),u=u.replace(Vo,"").toLowerCase(),!(u.length<1)){var f=t(u,b||"");f&&s.push(f)}}for(var p=0;p<o;p++){var h=e.charAt(p),C,m;if(i===!1&&h==="="){i=e.slice(n,p),n=p+1,r=e.charAt(n)==='"'||e.charAt(n)==="'"?n:Mo(e,p+1);continue}if(i!==!1&&p===r){if(m=e.indexOf(h,p+1),m===-1)break;C=Ie.trim(e.slice(r+1,m)),d(i,C),i=!1,p=m,n=p+1;continue}if(/\s|\n|\t/.test(h))if(e=e.replace(/\s|\n|\t/g," "),i===!1)if(m=Po(e,p),m===-1){C=Ie.trim(e.slice(n,p)),d(C),i=!1,n=p+1;continue}else{p=m-1;continue}else if(m=Bo(e,p-1),m===-1){C=Ie.trim(e.slice(n,p)),C=La(C),d(i,C),i=!1,n=p+1;continue}else continue}return n<e.length&&(i===!1?d(e.slice(n)):d(i,La(Ie.trim(e.slice(n))))),Ie.trim(s.join(" "))}function Po(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="="?t:-1}}function Mo(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="'"||n==='"'?t:-1}}function Bo(e,t){for(;t>0;t--){var n=e[t];if(n!==" ")return n==="="?t:-1}}function Uo(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function La(e){return Uo(e)?e.substr(1,e.length-2):e}Qn.parseTag=Do;Qn.parseAttr=Fo;var Ho=_t.exports.FilterCSS,be=ae,Ur=Qn,Wo=Ur.parseTag,Qo=Ur.parseAttr,Nt=wa;function Lt(e){return e==null}function Yo(e){var t=Nt.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=Nt.trim(e.slice(t+1,-1));var n=e[e.length-1]==="/";return n&&(e=Nt.trim(e.slice(0,-1))),{html:e,closing:n}}function $o(e){var t={};for(var n in e)t[n]=e[n];return t}function zo(e){var t={};for(var n in e)Array.isArray(e[n])?t[n.toLowerCase()]=e[n].map(function(r){return r.toLowerCase()}):t[n.toLowerCase()]=e[n];return t}function Hr(e){e=$o(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=be.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=zo(e.whiteList||e.allowList):e.whiteList=be.whiteList,e.onTag=e.onTag||be.onTag,e.onTagAttr=e.onTagAttr||be.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||be.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||be.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||be.safeAttrValue,e.escapeHtml=e.escapeHtml||be.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Ho(e.css))}Hr.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,s=n.onTag,i=n.onIgnoreTag,o=n.onTagAttr,d=n.onIgnoreTagAttr,p=n.safeAttrValue,h=n.escapeHtml,C=t.cssFilter;n.stripBlankChar&&(e=be.stripBlankChar(e)),n.allowCommentTag||(e=be.stripCommentTag(e));var m=!1;n.stripIgnoreTagBody&&(m=be.StripTagBody(n.stripIgnoreTagBody,i),i=m.onIgnoreTag);var u=Wo(e,function(b,f,c,y,S){var R={sourcePosition:b,position:f,isClosing:S,isWhite:Object.prototype.hasOwnProperty.call(r,c)},g=s(c,y,R);if(!Lt(g))return g;if(R.isWhite){if(R.isClosing)return"</"+c+">";var l=Yo(y),_=r[c],A=Qo(l.html,function(T,q){var I=Nt.indexOf(_,T)!==-1,O=o(c,T,q,I);return Lt(O)?I?(q=p(c,T,q,C),q?T+'="'+q+'"':T):(O=d(c,T,q,I),Lt(O)?void 0:O):O});return y="<"+c,A&&(y+=" "+A),l.closing&&(y+=" /"),y+=">",y}else return g=i(c,y,R),Lt(g)?h(y):g},h);return m&&(u=m.remove(u)),u};var Ko=Hr;(function(e,t){var n=ae,r=Qn,s=Ko;function i(d,p){var h=new s(p);return h.process(d)}t=e.exports=i,t.filterXSS=i,t.FilterXSS=s,function(){for(var d in n)t[d]=n[d];for(var p in r)t[p]=r[p]}(),typeof window<"u"&&(window.filterXSS=e.exports);function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(na,na.exports);const Go=na.exports,jo={whiteList:{a:["target","href","title","ref"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],body:[],br:[],button:["class"],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:["class"],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],g:[],h1:["toc"],h2:["toc"],h3:["toc"],h4:["toc"],h5:["toc"],h6:["toc"],head:[],header:[],hr:[],html:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:["class"],mark:[],nav:[],noscript:[],ol:["class"],p:[],pre:[],s:[],section:[],small:[],span:["data-widgetparams","class","id"],sub:[],summary:[],sup:[],strong:[],svg:[],table:["width","border","align","valign","class"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign","class"],thead:["class","align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:["class"],video:["autoplay","controls","loop","preload","src","height","width"]},stripIgnoreTagBody:!0,allowCommentTag:!1,css:!1,onIgnoreTag:function(e,t,n){if(e==="!doctype")return t},safeAttrValue:function(e,t,n){return e==="img"&&t==="src"?n&&(n.startsWith("data:image/")||n.startsWith("http"))?n:"":n}};function Dt(e){let t="pill-xl ";const{align:n="",highlight:r=""}=e,s=n.toLowerCase();s==="left"&&(t+="floatLeft "),s==="right"&&(t+="floatright ");const i=r==="true"?"secondary":"light-secondary";return s==="center"?a("div",{className:"bootstrap-4-backport",style:{textAlign:"center"},children:a(ne,{href:e.url,className:t,variant:i,children:e.text})}):a("span",{className:"bootstrap-4-backport",children:a(ne,{href:e.url,className:t,variant:i,children:e.text})})}try{Dt.displayName="MarkdownButton",Dt.__docgenInfo={description:"",displayName:"MarkdownButton",props:{align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"string"}},highlight:{defaultValue:null,description:"",name:"highlight",required:!1,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownButton.tsx#MarkdownButton"]={docgenInfo:Dt.__docgenInfo,name:"MarkdownButton",path:"src/lib/containers/markdown/widget/MarkdownButton.tsx#MarkdownButton"})}catch{}function Xo(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.boundaryCount,n=t===void 0?1:t,r=e.componentName,s=r===void 0?"usePagination":r,i=e.count,o=i===void 0?1:i,d=e.defaultPage,p=d===void 0?1:d,h=e.disabled,C=h===void 0?!1:h,m=e.hideNextButton,u=m===void 0?!1:m,b=e.hidePrevButton,f=b===void 0?!1:b,c=e.onChange,y=e.page,S=e.showFirstButton,R=S===void 0?!1:S,g=e.showLastButton,l=g===void 0?!1:g,_=e.siblingCount,A=_===void 0?1:_,T=ba(e,["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"]),q=Qs({controlled:y,default:p,name:s,state:"page"}),I=Wi(q,2),O=I[0],k=I[1],N=function(te,E){y||k(E),c&&c(te,E)},D=function(te,E){var L=E-te+1;return Array.from({length:L},function(F,P){return te+P})},V=D(1,Math.min(n,o)),B=D(Math.max(o-n+1,n+1),o),Y=Math.max(Math.min(O-A,o-n-A*2-1),n+2),ee=Math.min(Math.max(O+A,n+A*2+2),B[0]-2),ie=[].concat(_e(R?["first"]:[]),_e(f?[]:["previous"]),_e(V),_e(Y>n+2?["start-ellipsis"]:n+1<o-n?[n+1]:[]),_e(D(Y,ee)),_e(ee<o-n-1?["end-ellipsis"]:o-n>n?[o-n]:[]),_e(B),_e(u?[]:["next"]),_e(l?["last"]:[])),ue=function(te){switch(te){case"first":return 1;case"previous":return O-1;case"next":return O+1;case"last":return o;default:return null}},ge=ie.map(function($){return typeof $=="number"?{onClick:function(E){N(E,$)},type:"page",page:$,selected:$===O,disabled:C,"aria-current":$===O?"true":void 0}:{onClick:function(E){N(E,ue($))},type:$,page:ue($),selected:!1,disabled:C||$.indexOf("ellipsis")===-1&&($==="next"||$==="last"?O>=o:O<=1)}});return Dn({items:ge},T)}const Na=Me(a("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"})),Da=Me(a("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"})),Va=Me(a("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),Fa=Me(a("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}));var Jo=function(t){return{root:Dn({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:t.palette.text.primary}),page:{transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:t.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&$focusVisible":{backgroundColor:t.palette.action.focus},"&$selected":{backgroundColor:t.palette.action.selected,"&:hover, &$focusVisible":{backgroundColor:Le(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.palette.action.selected}},"&$disabled":{opacity:1,color:t.palette.action.disabled,backgroundColor:t.palette.action.selected}},"&$disabled":{opacity:t.palette.action.disabledOpacity}},sizeSmall:{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px","& $icon":{fontSize:t.typography.pxToRem(18)}},sizeLarge:{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15),"& $icon":{fontSize:t.typography.pxToRem(22)}},textPrimary:{"&$selected":{color:t.palette.primary.contrastText,backgroundColor:t.palette.primary.main,"&:hover, &$focusVisible":{backgroundColor:t.palette.primary.dark,"@media (hover: none)":{backgroundColor:t.palette.primary.main}},"&$disabled":{color:t.palette.action.disabled}}},textSecondary:{"&$selected":{color:t.palette.secondary.contrastText,backgroundColor:t.palette.secondary.main,"&:hover, &$focusVisible":{backgroundColor:t.palette.secondary.dark,"@media (hover: none)":{backgroundColor:t.palette.secondary.main}},"&$disabled":{color:t.palette.action.disabled}}},outlined:{border:"1px solid ".concat(t.palette.type==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$selected":{"&$disabled":{border:"1px solid ".concat(t.palette.action.disabledBackground)}}},outlinedPrimary:{"&$selected":{color:t.palette.primary.main,border:"1px solid ".concat(Le(t.palette.primary.main,.5)),backgroundColor:Le(t.palette.primary.main,t.palette.action.activatedOpacity),"&:hover, &$focusVisible":{backgroundColor:Le(t.palette.primary.main,t.palette.action.activatedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{color:t.palette.action.disabled}}},outlinedSecondary:{"&$selected":{color:t.palette.secondary.main,border:"1px solid ".concat(Le(t.palette.secondary.main,.5)),backgroundColor:Le(t.palette.secondary.main,t.palette.action.activatedOpacity),"&:hover, &$focusVisible":{backgroundColor:Le(t.palette.secondary.main,t.palette.action.activatedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{color:t.palette.action.disabled}}},rounded:{borderRadius:t.shape.borderRadius},ellipsis:{height:"auto","&$disabled":{opacity:t.palette.action.disabledOpacity}},focusVisible:{},disabled:{},selected:{},icon:{fontSize:t.typography.pxToRem(20),margin:"0 -8px"}}},Zo=v.exports.forwardRef(function(t,n){var r=t.classes,s=t.className,i=t.color,o=i===void 0?"standard":i,d=t.component,p=t.disabled,h=p===void 0?!1:p,C=t.page,m=t.selected,u=m===void 0?!1:m,b=t.shape,f=b===void 0?"round":b,c=t.size,y=c===void 0?"medium":c,S=t.type,R=S===void 0?"page":S,g=t.variant,l=g===void 0?"text":g,_=ba(t,["classes","className","color","component","disabled","page","selected","shape","size","type","variant"]),A=Qi(),T=A.direction==="rtl"?{previous:Fa,next:Va,last:Na,first:Da}:{previous:Va,next:Fa,first:Na,last:Da},q=T[R];return R==="start-ellipsis"||R==="end-ellipsis"?a("div",{ref:n,className:ta(r.root,r.ellipsis,h&&r.disabled,y!=="medium"&&r["size".concat(Kn(y))]),children:"\u2026"}):w(Di,{ref:n,component:d,disabled:h,focusVisibleClassName:r.focusVisible,className:ta(r.root,r.page,r[l],r[f],s,o!=="standard"&&r["".concat(l).concat(Kn(o))],h&&r.disabled,u&&r.selected,y!=="medium"&&r["size".concat(Kn(y))]),..._,children:[R==="page"&&C,q?a(q,{className:r.icon}):null]})});const el=Rr(Jo,{name:"MuiPaginationItem"})(Zo);var tl={root:{},ul:{display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}};function nl(e,t,n){return e==="page"?"".concat(n?"":"Go to ","page ").concat(t):"Go to ".concat(e," page")}var al=v.exports.forwardRef(function(t,n){t.boundaryCount;var r=t.classes,s=t.className,i=t.color,o=i===void 0?"standard":i;t.count,t.defaultPage,t.disabled;var d=t.getItemAriaLabel,p=d===void 0?nl:d;t.hideNextButton,t.hidePrevButton,t.onChange,t.page;var h=t.renderItem,C=h===void 0?function(l){return a(el,{...l})}:h,m=t.shape,u=m===void 0?"round":m;t.showFirstButton,t.showLastButton,t.siblingCount;var b=t.size,f=b===void 0?"medium":b,c=t.variant,y=c===void 0?"text":c,S=ba(t,["boundaryCount","classes","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"]),R=Xo(Dn({},t,{componentName:"Pagination"})),g=R.items;return a("nav",{"aria-label":"pagination navigation",className:ta(r.root,s),ref:n,...S,children:a("ul",{className:r.ul,children:g.map(function(l,_){return a("li",{children:C(Dn({},l,{color:o,"aria-label":p(l.type,l.page,l.selected),shape:u,size:f,variant:y}))},_)})})})});const rl=Rr(tl,{name:"MuiPagination"})(al),Vt=({info:e})=>a(x,{children:e&&w("p",{className:"SubmissionInfoCard",children:[a("strong",{children:" Project Lead: "})," ",a("span",{children:e.projectLead})," ",a("br",{}),a("strong",{children:" Institution: "})," ",a("span",{children:e.institution})," ",a("br",{}),a("strong",{children:" Data Access Request Submitted By: "})," ",a(Pe,{ownerId:e.submittedBy,size:wt})," ",a("br",{}),w("strong",{children:[" ","Intended Data Use Statement (accepted on"," ",Sr(Hn(e.modifiedOn),"M/D/YYYY"),"):"]}),a("div",{children:e.intendedDataUseStatement}),e.accessorChanges&&e.accessorChanges.map(t=>w("div",{children:[a(Pe,{ownerId:t.userId,size:wt})," ",t.type]},`${t.userId}-${t.type}`))]})}),it=()=>w("p",{className:"SubmissionInfoCard",children:[a(br,{numCols:1,numRows:4}),a(Jn,{variant:"rect",width:"100%",height:80})]});try{Vt.displayName="SubmissionInfoCard",Vt.__docgenInfo={description:"",displayName:"SubmissionInfoCard",props:{info:{defaultValue:null,description:"",name:"info",required:!0,type:{name:"SubmissionInfo"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReportSubmissionInfo.tsx#SubmissionInfoCard"]={docgenInfo:Vt.__docgenInfo,name:"SubmissionInfoCard",path:"src/lib/containers/IDUReportSubmissionInfo.tsx#SubmissionInfoCard"})}catch{}try{it.displayName="LoadingSubmissionInfoCard",it.__docgenInfo={description:"",displayName:"LoadingSubmissionInfoCard",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReportSubmissionInfo.tsx#LoadingSubmissionInfoCard"]={docgenInfo:it.__docgenInfo,name:"LoadingSubmissionInfoCard",path:"src/lib/containers/IDUReportSubmissionInfo.tsx#LoadingSubmissionInfoCard"})}catch{}const Ft=e=>{var m;const{accessRequirementId:t}=e,{ref:n,inView:r}=et(),{data:s,status:i,isLoading:o,hasNextPage:d,isFetchingNextPage:p,fetchNextPage:h}=eo(t,{useErrorBoundary:!0});v.exports.useEffect(()=>{i==="success"&&!p&&d&&h&&r&&h()},[i,d,p,h,r]);const C=(m=s==null?void 0:s.pages.flatMap(u=>u.results))!=null?m:[];return w(x,{children:[C.length>0&&w("div",{className:"IDUReport",children:[C.map(u=>w(se.Fragment,{children:[a(Vt,{info:u}),a("hr",{})]},JSON.stringify(u))),a("div",{ref:n})]}),(o||p)&&w(x,{children:[a(it,{}),a(it,{})]})]})},sl=Ft;try{Ft.displayName="IDUReport",Ft.__docgenInfo={description:"",displayName:"IDUReport",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReport.tsx#IDUReport"]={docgenInfo:Ft.__docgenInfo,name:"IDUReport",path:"src/lib/containers/IDUReport.tsx#IDUReport"})}catch{}function Pt(e){const{accessRestrictionId:t}=e;return a(sl,{accessRequirementId:t})}try{Pt.displayName="MarkdownIDUReport",Pt.__docgenInfo={description:"",displayName:"MarkdownIDUReport",props:{accessRestrictionId:{defaultValue:null,description:"",name:"accessRestrictionId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownIDUReport.tsx#MarkdownIDUReport"]={docgenInfo:Pt.__docgenInfo,name:"MarkdownIDUReport",path:"src/lib/containers/markdown/widget/MarkdownIDUReport.tsx#MarkdownIDUReport"})}catch{}class ot extends v.exports.Component{constructor(t){super(t),this.getEntity=this.getEntity.bind(this),this.getSynapseFiles=this.getSynapseFiles.bind(this),this.state={preSignedURL:""}}getEntity(){const{synapseId:t}=this.props;t&&Pn(this.context.accessToken,t).then(n=>{const r=[{associateObjectId:t,associateObjectType:fe.FileEntity,fileHandleId:n.dataFileHandleId}];this.getSynapseFiles(r,n.dataFileHandleId)})}getSynapseFiles(t,n){Ge({includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:t},this.context.accessToken).then(s=>{const{preSignedURL:i}=s.requestedFiles.filter(o=>o.fileHandleId===n)[0];this.setState({preSignedURL:i})}).catch(s=>{console.error("Error on getting image ",s)})}componentDidMount(){if(!this.props.wikiId)this.getEntity();else{const{fileName:t,fileResults:n=[]}=this.props,{id:r}=n.filter(i=>i.fileName===t)[0],s=[{associateObjectId:this.props.wikiId,associateObjectType:fe.WikiAttachment,fileHandleId:r}];this.getSynapseFiles(s,r)}}render(){const{params:t}=this.props,{align:n="",altText:r="synapse image"}=t;let s="auto";t.scale&&t.scale!=="100"&&(s=`${Number(t.scale)}%`);const i=n.toLowerCase();let o="";i==="left"&&(o="floatLeft"),i==="right"&&(o="floatright"),i==="center"&&(o="align-center");let d={width:s,height:s};return this.state.preSignedURL?a(v.exports.Fragment,{children:a("img",{alt:r,className:"img-fluid  "+o,src:this.state.preSignedURL,style:d})}):null}}ot.contextType=Tt;const Pa=ot;try{ot.displayName="SynapseImage",ot.__docgenInfo={description:"",displayName:"SynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},fileResults:{defaultValue:null,description:"",name:"fileResults",required:!1,type:{name:"FileHandle[]"}},params:{defaultValue:null,description:"",name:"params",required:!0,type:{name:"{ align: string; scale: string; responsive: string; altText: string; }"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/SynapseImage.tsx#SynapseImage"]={docgenInfo:ot.__docgenInfo,name:"SynapseImage",path:"src/lib/containers/widgets/SynapseImage.tsx#SynapseImage"})}catch{}const Ye=se.createContext(void 0),Mt=({children:e,wikiContext:t})=>a(Ye.Provider,{value:t,children:e}),Gn=Ye.Consumer;function Wr(){const e=v.exports.useContext(Ye);return e!=null?e:{}}try{Ye.displayName="SynapseWikiContext",Ye.__docgenInfo={description:"This must be exported to use the context in class components.",displayName:"SynapseWikiContext",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContext"]={docgenInfo:Ye.__docgenInfo,name:"SynapseWikiContext",path:"src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContext"})}catch{}try{Mt.displayName="SynapseWikiContextProvider",Mt.__docgenInfo={description:"Provides context related to Synapse Wikis",displayName:"SynapseWikiContextProvider",props:{wikiContext:{defaultValue:null,description:"",name:"wikiContext",required:!1,type:{name:"SynapseWikiContextType"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextProvider"]={docgenInfo:Mt.__docgenInfo,name:"SynapseWikiContextProvider",path:"src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextProvider"})}catch{}try{Gn.displayName="SynapseWikiContextConsumer",Gn.__docgenInfo={description:"",displayName:"SynapseWikiContextConsumer",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextConsumer"]={docgenInfo:Gn.__docgenInfo,name:"SynapseWikiContextConsumer",path:"src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextConsumer"})}catch{}function Bt(e){const{wikiId:t,wikiPage:n,fileHandles:r}=Wr();return e.fileName?r?a(Pa,{params:e,fileName:e.fileName,wikiId:t||(n==null?void 0:n.id),fileResults:r.list}):a(x,{}):e.synapseId?a(Pa,{params:e,synapseId:e.synapseId}):a(x,{})}try{Bt.displayName="MarkdownSynapseImage",Bt.__docgenInfo={description:"",displayName:"MarkdownSynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},align:{defaultValue:null,description:"",name:"align",required:!0,type:{name:"string"}},scale:{defaultValue:null,description:"",name:"scale",required:!0,type:{name:"string"}},responsive:{defaultValue:null,description:"",name:"responsive",required:!0,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownSynapseImage.tsx#MarkdownSynapseImage"]={docgenInfo:Bt.__docgenInfo,name:"MarkdownSynapseImage",path:"src/lib/containers/markdown/widget/MarkdownSynapseImage.tsx#MarkdownSynapseImage"})}catch{}const il=pi(fi);class lt extends v.exports.Component{constructor(t){super(t),this.state={isLoaded:!1,queryData:{}},this.fetchPlotlyData=this.fetchPlotlyData.bind(this),this.showPlot=this.showPlot.bind(this)}componentDidMount(){this.fetchPlotlyData()}fetchPlotlyData(){const{query:t}=this.props.widgetparamsMapped,n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:vt,entityId:je(t),query:{sql:t}};Za(n,this.context.accessToken).then(r=>{this.setState({isLoaded:!0,queryData:r})}).catch(r=>{console.log("Error on full table query ",r)})}showPlot(){var b,f,c,y;if(!this.state.isLoaded)return;const{title:t,xtitle:n,ytitle:r,type:s,xaxistype:i,showlegend:o}=this.props.widgetparamsMapped,d=this.state,p=this.props.widgetparamsMapped.horizontal.toLowerCase(),h={showlegend:o,title:t};n&&(h.xaxis={title:n}),i&&(h.xaxis={...h.xaxis,xaxistype:i.toLowerCase()}),r&&(h.yaxis={title:r});const C=[],m=p?"v":"h",u=(f=(b=d.queryData.queryResult)==null?void 0:b.queryResults.headers)!=null?f:[];for(let S=0;S<u.length-1;S+=1)C[S]={orientation:m,name:u[S+1].name,type:s.toLowerCase(),x:[],y:[]};for(const S of(y=(c=d.queryData.queryResult)==null?void 0:c.queryResults.rows)!=null?y:[])for(let R=1;R<S.values.length;R+=1){const g=S.values;C[R-1].x.push(g[0]),C[R-1].y.push(g[R])}return a(il,{layout:h,data:C})}render(){return this.state.isLoaded?this.showPlot():null}}lt.contextType=Tt;const ol=lt;try{lt.displayName="SynapsePlot",lt.__docgenInfo={description:"",displayName:"SynapsePlot",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},widgetparamsMapped:{defaultValue:null,description:"",name:"widgetparamsMapped",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/SynapsePlot.tsx#SynapsePlot"]={docgenInfo:lt.__docgenInfo,name:"SynapsePlot",path:"src/lib/containers/widgets/SynapsePlot.tsx#SynapsePlot"})}catch{}function Ut(e){const{ownerId:t,wikiId:n,wikiPage:r}=Wr();return a(ol,{ownerId:t,wikiId:n||(r==null?void 0:r.id),widgetparamsMapped:e})}try{Ut.displayName="MarkdownSynapsePlot",Ut.__docgenInfo={description:"",displayName:"MarkdownSynapsePlot",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownSynapsePlot.tsx#MarkdownSynapsePlot"]={docgenInfo:Ut.__docgenInfo,name:"MarkdownSynapsePlot",path:"src/lib/containers/markdown/widget/MarkdownSynapsePlot.tsx#MarkdownSynapsePlot"})}catch{}const ll=200,Ma="ESTIMATED_DOWNLOAD_SPEED_EXPIRE_TIME",Ba="ESTIMATED_DOWNLOAD_SPEED",cl="syn12600511",dl=e=>new Promise((t,n)=>{const r=localStorage.getItem(Ma),s=localStorage.getItem(Ba);if(r&&s&&new Date().getTime()<Number(r)){t(Number(s));return}Pn(e,cl).then(i=>{const o=i,d=[{associateObjectId:o.id,associateObjectType:fe.FileEntity,fileHandleId:o.dataFileHandleId}];Ge({includeFileHandles:!0,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:d},e).then(h=>{const C=h.requestedFiles[0].preSignedURL,m=h.requestedFiles[0].fileHandle,u=new Date().getTime();return Jr(m,C).then(()=>{const b=m.contentSize/((new Date().getTime()-u-ll)/1e3),f=new Date().getTime();localStorage.setItem(Ma,(f+1e3*60*5).toString()),localStorage.setItem(Ba,b.toString()),t(b)})})}).catch(i=>n(i))}),ul=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];function Qr(e){if(!e)return"";const t=Math.floor(Math.log(e)/Math.log(1024));return!e&&"0 Bytes"||(e/Math.pow(1024,t)).toFixed(2)+" "+ul[t]}function Ht(e){const{numFiles:t,numBytes:n}=e,{accessToken:r}=z(),[s,i]=v.exports.useState({isLoading:!!n,downloadSpeed:0}),{isLoading:o,downloadSpeed:d}=s;v.exports.useEffect(()=>{r&&dl(r).then(f=>{i({isLoading:!1,downloadSpeed:f})})},[r]);const p=o||d===0||!n?0:n/d,h=p===0,C=h?"":Hn.duration(p,"seconds").humanize(),m=t===0,u=m?"SRC-inactive":"SRC-primary-text-color",b=h?"SRC-inactive":"SRC-primary-text-color";return w("span",{className:"download-details-container",children:[w("span",{children:[a("span",{className:u,children:a(Z,{options:{icon:"file"}})}),m?a($n,{width:50}):w(x,{children:[" ",t,"\xA0files "]})]}),n&&a(ke,{title:"This is the total size of all files. Zipped package(s) will likely be smaller.",enterNextDelay:Nn,placement:"top",children:w("span",{"data-testid":"numBytesUI",children:[a("span",{className:b,children:a(Z,{options:{icon:"database"}})}),h?a($n,{width:50}):Qr(n)]})}),n&&a(ke,{title:"This is an estimate of how long package download will take.",enterNextDelay:Nn,placement:"top",children:w("span",{"data-testid":"downloadTimeEstimateUI",children:[a("span",{className:b,children:a(Z,{options:{icon:"clock"}})}),o&&t>0?a($n,{width:50}):C]})})]})}try{Ht.displayName="DownloadDetails",Ht.__docgenInfo={description:`Displays download information including number of files, size of download, and time to download.
Prefer to use {@link download_list_v2 /DownloadDetails} instead, particularly when you have information about file packaging in/eligibility`,displayName:"DownloadDetails",props:{numFiles:{defaultValue:null,description:"",name:"numFiles",required:!0,type:{name:"number"}},numBytes:{defaultValue:null,description:"",name:"numBytes",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/download_list/DownloadDetails.tsx#DownloadDetails"]={docgenInfo:Ht.__docgenInfo,name:"DownloadDetails",path:"src/lib/containers/download_list/DownloadDetails.tsx#DownloadDetails"})}catch{}async function pl(e,t,n,r,s){try{const i={query:n==null?void 0:n.query,concreteType:"org.sagebionetworks.repo.model.download.AddToDownloadListRequest",parentId:r};return await es(i,e),Ke("File(s) were successfully added to your Download Cart.","success",{primaryButtonConfig:{text:"View Download Cart",onClick:s}}),t(),[0,""]}catch(i){return Ke("danger",void 0,i.reason),t(),[0,""]}}const ct={[2]:{className:"alert-info",infoText:"Would you like to add all files to the download cart?",closeText:"Cancel"},[3]:{className:"alert-info",infoText:w(x,{children:["Note: Files that you add will be mixed in with the files already in your download cart.",a("br",{}),"If you don\u2019t want to mix these files, clear your download cart before continuing."]}),closeText:"Cancel"},[1]:{className:"alert-info",infoText:"Adding Files To List",closeText:"Cancel"},[0]:{className:"alert-info",infoText:"Calculating File Size",closeText:"Cancel"},[4]:{className:"alert-danger",closeText:"Close",infoText:w(x,{children:["Please ",a(Zr,{style:{color:"#337ab7"}})," to add files to your download cart."]})}},fl=e=>{switch(e.status){case 0:case 1:return w("div",{children:[a("span",{className:"spinner white"}),a("span",{className:"spinner__text",children:ct[e.status].infoText})]});case 4:return a(x,{children:ct[e.status].infoText});case 2:case 3:return w(x,{children:[a(Ht,{numFiles:e.fileCount,numBytes:e.fileSize}),a("span",{className:"download-confirmation-infoText",children:ct[e.status].infoText})]});default:return a(x,{})}},Wt=({getLastQueryRequest:e,folderId:t,fnClose:n,setTopLevelControlsState:r,topLevelControlsState:s})=>{const{accessToken:i,downloadCartPageUrl:o}=z(),{showDownloadConfirmation:d=!0}=s!=null?s:{},[p,h]=v.exports.useState(i?0:4),[C,m]=v.exports.useState(0),[u,b]=v.exports.useState(),{data:f,refetch:c}=Si(),y=e(),[S,R]=v.exports.useState(!1),g=v.exports.useCallback((N,D,V)=>{if(i&&V){const B=V.totalNumberOfFiles>0,Y=N!=null?N:0;h(B?3:2),m(Y),b(D)}},[i]),{data:l,isSuccess:_}=ao({parentId:t,includeSumFileSizes:!0,includeTotalChildCount:!0,includeTypes:[Vs.FILE]});Zn(()=>{_&&l&&f&&g(l.totalChildCount,l.sumFileSizesBytes,f)},[g,t,_,l,f]);const A=At|ia,T={...y,partMask:A},{data:q}=hr(T);Zn(()=>{var N,D;if(q&&f){const V=(N=q.sumFileSizes)==null?void 0:N.greaterThan;g(q.queryCount,V||(D=q.sumFileSizes)==null?void 0:D.sumFileSizesBytes,f)}},[g,y,q,f]);const I=n?()=>n():()=>{r&&r(N=>({...N,showDownloadConfirmation:!1}))},O=async()=>{if(!i)h(4);else{h(1);const V=(await pl(i,I,y,t,()=>R(!0)))[0];h(V),c()}};S&&(window.location.href=o);const k=s==null?void 0:s.showFacetFilter;return a(x,{children:w(It,{dismissible:!1,show:!0,variant:"info",transition:!1,className:`download-confirmation ${ct[p].className} ${d?"":"hidden"}
          ${k?Xe:Je}
        `,children:[a(fl,{status:p,fileCount:C,fileSize:u}),w("div",{className:"download-confirmation-action",children:[p!==1&&a("button",{className:"btn btn-link",onClick:I,children:ct[p].closeText}),(p===2||p===3)&&a("button",{type:"button",className:"btn btn-primary",onClick:O,children:"Add"})]})]})})};try{Wt.displayName="DownloadConfirmation",Wt.__docgenInfo={description:"",displayName:"DownloadConfirmation",props:{fnClose:{defaultValue:null,description:"",name:"fnClose",required:!1,type:{name:"(() => void)"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},folderId:{defaultValue:null,description:"",name:"folderId",required:!1,type:{name:"string"}},topLevelControlsState:{defaultValue:null,description:"",name:"topLevelControlsState",required:!1,type:{name:"TopLevelControlsState"}},setTopLevelControlsState:{defaultValue:null,description:"",name:"setTopLevelControlsState",required:!1,type:{name:"Dispatch<SetStateAction<TopLevelControlsState>>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/download_list/DownloadConfirmation.tsx#DownloadConfirmation"]={docgenInfo:Wt.__docgenInfo,name:"DownloadConfirmation",path:"src/lib/containers/download_list/DownloadConfirmation.tsx#DownloadConfirmation"})}catch{}var Ua=function(t){return t.reduce(function(n,r){var s=r[0],i=r[1];return n[s]=i,n},{})},Ha=typeof window<"u"&&window.document&&window.document.createElement?v.exports.useLayoutEffect:v.exports.useEffect;function ml(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},s=t.attributes[n]||{},i=t.elements[n];!wr(i)||!_r(i)||(Object.assign(i.style,r),Object.keys(s).forEach(function(o){var d=s[o];d===!1?i.removeAttribute(o):i.setAttribute(o,d===!0?"":d)}))})}function hl(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var s=t.elements[r],i=t.attributes[r]||{},o=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),d=o.reduce(function(p,h){return p[h]="",p},{});!wr(s)||!_r(s)||(Object.assign(s.style,d),Object.keys(i).forEach(function(p){s.removeAttribute(p)}))})}}const gl={name:"applyStyles",enabled:!0,phase:"write",fn:ml,effect:hl,requires:["computeStyles"]};var yl=[wi,_i,Ti,gl,vi,Ai,Ri,Ii,Ei],Sl=Ci({defaultModifiers:yl}),bl=typeof Element<"u",Cl=typeof Map=="function",wl=typeof Set=="function",_l=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Qt(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,s;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Qt(e[r],t[r]))return!1;return!0}var i;if(Cl&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i=e.entries();!(r=i.next()).done;)if(!t.has(r.value[0]))return!1;for(i=e.entries();!(r=i.next()).done;)if(!Qt(r.value[1],t.get(r.value[0])))return!1;return!0}if(wl&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i=e.entries();!(r=i.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(_l&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;if(bl&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&e.$$typeof)&&!Qt(e[s[r]],t[s[r]]))return!1;return!0}return e!==e&&t!==t}var Tl=function(t,n){try{return Qt(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}},vl=[],Al=function(t,n,r){r===void 0&&(r={});var s=v.exports.useRef(null),i={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||vl},o=v.exports.useState({styles:{popper:{position:i.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),d=o[0],p=o[1],h=v.exports.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(b){var f=b.state,c=Object.keys(f.elements);bi.exports.flushSync(function(){p({styles:Ua(c.map(function(y){return[y,f.styles[y]||{}]})),attributes:Ua(c.map(function(y){return[y,f.attributes[y]]}))})})},requires:["computeStyles"]}},[]),C=v.exports.useMemo(function(){var u={onFirstUpdate:i.onFirstUpdate,placement:i.placement,strategy:i.strategy,modifiers:[].concat(i.modifiers,[h,{name:"applyStyles",enabled:!1}])};return Tl(s.current,u)?s.current||u:(s.current=u,u)},[i.onFirstUpdate,i.placement,i.strategy,i.modifiers,h]),m=v.exports.useRef();return Ha(function(){m.current&&m.current.setOptions(C)},[C]),Ha(function(){if(!(t==null||n==null)){var u=r.createPopper||Sl,b=u(t,n,C);return m.current=b,function(){b.destroy(),m.current=null}}},[t,n,r.createPopper]),{state:m.current?m.current.state:null,styles:d.styles,attributes:d.attributes,update:m.current?m.current.update:null,forceUpdate:m.current?m.current.forceUpdate:null}};const Yt=({children:e,contentProps:t,placement:n,showCloseButton:r=!0,actionButton:s,strategy:i,style:o})=>{var R;n=n!=null?n:"bottom-start";const[d,p]=v.exports.useState(!1),[h,C]=v.exports.useState(null),[m,u]=v.exports.useState(null),[b,f]=v.exports.useState(null),{styles:c,attributes:y}=Al(h,m,{placement:n,strategy:i,modifiers:[{name:"arrow",options:{element:b}},{name:"offset",options:{offset:[0,10]}}]}),S=a(Cr,{in:d,timeout:200,classNames:"fade-in-out",mountOnEnter:!0,children:w("div",{className:"Tooltip SRC-popover bootstrap-4-backport",style:{...o,...c.popper},ref:u,...y.popper,children:[a(Ze,{variant:"body1",children:a(me,{...t})}),w("div",{className:"TooltipButtonContainer",children:[s&&a(ne,{variant:(R=s.variant)!=null?R:"primary-500",className:"pill",onClick:()=>{s.onClick(),s.closePopoverOnClick&&p(!1)},children:s.content}),r&&a(ne,{variant:"light",className:"pill",onClick:()=>p(!1),children:"Close"})]}),a("div",{className:"arrow","data-popper-arrow":!0,ref:f,style:c.arrow})]})});return w(x,{children:[a("span",{role:"button",className:"PopoverContainer bootstrap-4-backport",onClick:()=>p(g=>!g),ref:C,children:e}),S]})};try{Yt.displayName="MarkdownPopover",Yt.__docgenInfo={description:"",displayName:"MarkdownPopover",props:{contentProps:{defaultValue:null,description:"",name:"contentProps",required:!0,type:{name:"MarkdownSynapseProps"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},placement:{defaultValue:null,description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"bottom"'},{value:'"right"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},actionButton:{defaultValue:null,description:"",name:"actionButton",required:!1,type:{name:"{ content: ReactElement<any, string | JSXElementConstructor<any>>; variant: string; onClick: () => void; closePopoverOnClick: boolean; }"}},strategy:{defaultValue:null,description:"",name:"strategy",required:!1,type:{name:"enum",value:[{value:'"absolute"'},{value:'"fixed"'}]}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/MarkdownPopover.tsx#MarkdownPopover"]={docgenInfo:Yt.__docgenInfo,name:"MarkdownPopover",path:"src/lib/containers/MarkdownPopover.tsx#MarkdownPopover"})}catch{}const De=({markdownText:e,helpUrl:t,placement:n="bottom",showCloseButton:r=!0,className:s=""})=>a(x,{children:a(Yt,{contentProps:{markdown:e},placement:n,actionButton:t?{content:a(x,{children:"More info"}),closePopoverOnClick:!0,onClick:()=>window.open(t,"_blank"),variant:"primary"}:void 0,showCloseButton:r,strategy:"fixed",style:{maxWidth:"350px"},children:a(hi,{className:`HelpButton ${s}`})})});try{De.displayName="HelpPopover",De.__docgenInfo={description:"",displayName:"HelpPopover",props:{markdownText:{defaultValue:null,description:"",name:"markdownText",required:!0,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}},placement:{defaultValue:{value:"bottom"},description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"bottom"'},{value:'"right"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HelpPopover.tsx#HelpPopover"]={docgenInfo:De.__docgenInfo,name:"HelpPopover",path:"src/lib/containers/HelpPopover.tsx#HelpPopover"})}catch{}const jn=3,dt=({helpMessage:e="This search bar is powered by MySQL Full Text Search.",helpUrl:t})=>{const{executeQueryRequest:n,getLastQueryRequest:r}=Ae(),{topLevelControlsState:{showSearchBar:s,showFacetFilter:i}}=Rt(),[o,d]=v.exports.useState(""),p=v.exports.useRef(null),h=m=>{var u;if(m.preventDefault(),o.trim().length<jn)(u=p.current)==null||u.setCustomValidity(`Search term must have a minimum of ${jn} characters`);else{const b=r(),{additionalFilters:f=[]}=b.query,c={concreteType:"org.sagebionetworks.repo.model.table.TextMatchesQueryFilter",searchExpression:o};if(f.find(S=>S.concreteType==c.concreteType&&S.searchExpression==c.searchExpression))return;f.push(c),b.query.additionalFilters=f,n(b),d("")}},C=m=>{var u;(u=p.current)==null||u.setCustomValidity(""),d(m.currentTarget.value)};return a("div",{className:`QueryWrapperSearchInput ${i?Xe:Je}`,children:a(Sa,{in:s,timeout:{enter:300,exit:300},children:w("div",{className:"QueryWrapperSearchInput__helppopoverwrapper",children:[w("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:h,children:[a("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:a(Z,{options:{icon:"search"}})}),a("input",{ref:p,minLength:jn,onChange:C,placeholder:"Enter Search Terms",value:o,type:"text"}),o.length>0&&a("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{d("")},children:a(Z,{options:{icon:"close"}})})]}),a("div",{className:"QueryWrapperSearchInput__helppopover",children:a(De,{markdownText:e,helpUrl:t,placement:"left"})})]})})})};try{dt.displayName="FullTextSearch",dt.__docgenInfo={description:"",displayName:"FullTextSearch",props:{helpMessage:{defaultValue:{value:"This search bar is powered by MySQL Full Text Search."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FullTextSearch.tsx#FullTextSearch"]={docgenInfo:dt.__docgenInfo,name:"FullTextSearch",path:"src/lib/containers/FullTextSearch.tsx#FullTextSearch"})}catch{}const aa="First line is the columns names.",ra="Include row metadata (Row Id and Row Version).",Fn="Comma Separated Values (CSV)",Wa="Tab Separated Values (TSV)",Rl={title:"Download query results",type:"object",properties:{"File Type":{type:"string",oneOf:[{const:Fn,title:Fn},{const:Wa,title:Wa}]},Contents:{type:"array",title:"Contents",items:{type:"string",enum:[aa,ra]},uniqueItems:!0}}},Il={"File Type":{"ui:widget":"radio"},Contents:{"ui:widget":"checkboxes"}},El={title:"Download query results",description:"File is ready for download. Select the download button to download the file.",type:"object"},ql={},xl=[Rl,El],Ol=[Il,ql];class Ve extends v.exports.Component{constructor(t){super(t),this.handleSubmit=n=>{this.state.step===0?this.handleDownloadSetup(n):this.onDownload()},this.handleDownloadSetup=n=>{this.setState({isLoading:!0});const{formData:r}=n,s=r["File Type"],i=r.Contents,{queryBundleRequest:o,getLastQueryRequest:d}=this.props,p=s===Fn?",":"	",h=i.includes(aa),C=i.includes(ra),m=o!=null?o:d(),u=m.query.sql,b={sql:u,entityId:je(u),selectedFacets:m.query.selectedFacets,concreteType:"org.sagebionetworks.repo.model.table.DownloadFromTableRequest",writeHeader:h,includeRowIdAndRowVersion:C,csvTableDescriptor:{separator:p},additionalFilters:m.query.additionalFilters};ts(b,this.context.accessToken).then(f=>{this.setState({isLoading:!1,step:1,data:f})}).catch(f=>{console.log("Error getDownloadFromTableRequest: ",f)})},this.onDownload=()=>{const{data:n}=this.state;ns(n.resultsFileHandleId,this.context.accessToken).then(r=>{window.location.href=r,this.props.onClose()})},this.handleChange=n=>{const{formData:r}=n;this.setState({formData:r})},this.state={isLoading:!1,step:0,formData:{"File Type":Fn,Contents:[aa,ra]}}}render(){const t={position:"absolute",top:10,right:10,zIndex:10},n={height:50,width:50,backgroundSize:50};return a(W,{animation:!1,show:!0,onHide:this.props.onClose,backdrop:"static",children:w(W.Body,{children:[a("button",{style:t,onClick:this.props.onClose,children:a(Z,{options:{icon:"close"}})}),w(qi,{schema:xl[this.state.step],uiSchema:Ol[this.state.step],onChange:this.handleChange,formData:this.state.formData,onSubmit:this.handleSubmit,children:[this.state.isLoading&&a("div",{className:"SRC-centerAndJustifyContent",children:w("div",{className:"SRC-center-text",children:[a("p",{children:" Creating the File "}),a("div",{style:n,className:"spinner"}),a("p",{children:" Loading... "})]})}),w("div",{style:{textAlign:"right"},children:[a(ne,{variant:"default",onClick:this.props.onClose,style:{marginRight:"5px"},children:"Cancel"}),a(ne,{type:"submit",variant:"primary",children:this.state.step===0?"Next":"Download"})]})]})]})})}}Ve.contextType=Tt;try{Ve.displayName="ModalDownload",Ve.__docgenInfo={description:"",displayName:"ModalDownload",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(...args: any[]) => void"}},includeEntityEtag:{defaultValue:null,description:"",name:"includeEntityEtag",required:!1,type:{name:"boolean"}},queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!1,type:{name:"QueryBundleRequest"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},sort:{defaultValue:null,description:"",name:"sort",required:!1,type:{name:"SortItem[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/ModalDownload.tsx#ModalDownload"]={docgenInfo:Ve.__docgenInfo,name:"ModalDownload",path:"src/lib/containers/ModalDownload.tsx#ModalDownload"})}catch{}function ut(e){const{initQueryRequest:t,onQueryChange:n,onQueryResultBundleChange:r,lockedColumn:s,componentIndex:i,shouldDeepLink:o}=e,[d,p]=v.exports.useState(void 0),{entityId:h,versionNumber:C,getInitQueryRequest:m,getLastQueryRequest:u,setQuery:b}=Ys({initQueryRequest:t,componentIndex:i,shouldDeepLink:o,onQueryChange:n}),f=v.exports.useMemo(()=>u(),[u]),{data:c,hasNextPage:y,fetchPreviousPage:S,fetchNextPage:R,isFetchingNextPage:g,isLoading:l,error:_,isPreviousData:A}=si(f,{keepPreviousData:!0},p),T=l||A,{data:q}=ga(h,C),[I,O]=v.exports.useState(0);async function k(){if(!y)throw new Error("Called appendNextPageToResults when there is no next page");await R(),O("ALL")}async function N(){if(!y)throw new Error("Called goToNextPage when there is no next page");if(I==="ALL")throw new Error("Cannot go to next page when all pages are displayed");await R(),O(I+1)}const D=I!=="ALL"&&I>0;async function V(){if(I==="ALL")throw new Error("Cannot go to previous page when all pages are displayed");if(!D)throw new Error("Called goToNextPage when there is no next page");await S(),O(I-1)}const B=v.exports.useMemo(()=>{var $,te,E,L;if(!(c==null||c.pages.length===0||c.pages[0].responseBody==null))return I==="ALL"?{...c==null?void 0:c.pages[0].responseBody,queryResult:{...($=c==null?void 0:c.pages[0].responseBody)==null?void 0:$.queryResult,queryResults:{...(E=(te=c==null?void 0:c.pages[0].responseBody)==null?void 0:te.queryResult)==null?void 0:E.queryResults,rows:(L=c.pages.flatMap(F=>{var P;return(P=F.responseBody.queryResult)==null?void 0:P.queryResults.rows}))!=null?L:[]}}}:c==null?void 0:c.pages[I].responseBody},[I,c]);v.exports.useEffect(()=>{B&&r&&r(JSON.stringify(B))},[B,r]);const Y=B?ii(B.facets,B.selectColumns):!0,ie={data:v.exports.useMemo(()=>oi(B,s),[B,s]),isLoadingNewPage:g,hasNextPage:!!y,hasPreviousPage:!!D,isLoadingNewBundle:T,getLastQueryRequest:u,getInitQueryRequest:m,error:_,entity:q,executeQueryRequest:b,isFacetsAvailable:Y,asyncJobStatus:d,appendNextPageToResults:k,goToNextPage:N,goToPreviousPage:V},{children:ue}=e;return a($s,{queryContext:ie,children:a("div",{className:`SRC-wrapper ${T||g?"SRC-logo-cursor":""} ${Y?"has-facets":""}`,children:ue})})}try{ut.displayName="InfiniteQueryWrapper",ut.__docgenInfo={description:"Component that manages the state of a Synapse table query. Data can be accessed via QueryContext using\neither `useQueryContext` or `QueryContextConsumer`.",displayName:"InfiniteQueryWrapper",props:{initQueryRequest:{defaultValue:null,description:"",name:"initQueryRequest",required:!0,type:{name:"QueryBundleRequest"}},componentIndex:{defaultValue:null,description:"",name:"componentIndex",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/InfiniteQueryWrapper.tsx#InfiniteQueryWrapper"]={docgenInfo:ut.__docgenInfo,name:"InfiniteQueryWrapper",path:"src/lib/containers/InfiniteQueryWrapper.tsx#InfiniteQueryWrapper"})}catch{}class pt extends se.Component{constructor(t){var n;super(t),this.handleClickOutsideForm=r=>{var s,i;!((s=this.searchFormRef.current)!=null&&s.contains(r==null?void 0:r.target))&&!((i=this.radioFormRef.current)!=null&&i.contains(r==null?void 0:r.target))&&(this.state.didUpdateRanLast?this.setState({didUpdateRanLast:!1}):this.setState({show:!1}))},this.search=r=>{var b,f,c,y,S,R,g;r.preventDefault();const{searchText:s}=this.state;let{columnName:i}=this.state;const{searchable:o,lockedColumn:d}=this.props;if(i==="")if(o)i=o.filter(l=>l!==(d==null?void 0:d.columnName))[0];else{const l=(c=(f=(b=this.props.queryContext)==null?void 0:b.data)==null?void 0:f.columnModels)==null?void 0:c.filter(_=>_.name!==(d==null?void 0:d.columnName)).filter(_=>this.isSupportedColumn(_));i=(y=l==null?void 0:l[0].name)!=null?y:""}this.setState({show:!1});const{executeQueryRequest:p,getLastQueryRequest:h}=this.props.queryContext,C=h(),{additionalFilters:m=[]}=C.query,u=m.findIndex(l=>!!(zs(l)||Ks(l)&&l.columnName===i));if(u===-1){const l=(g=(R=(S=this.props.queryContext)==null?void 0:S.data)==null?void 0:R.columnModels)==null?void 0:g.filter(_=>_.name===i)[0];if(l!=null&&l.columnType.endsWith("_LIST")){const _={columnName:i,function:Gs.HAS_LIKE,values:[`%${s}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnMultiValueFunctionQueryFilter"};m.push(_)}else{const _={columnName:i,operator:js.LIKE,values:[`%${s}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnSingleValueQueryFilter"};m.push(_)}}else m[u].values.push(`%${s}%`);C.query.additionalFilters=m,p(C)},this.handleChange=r=>{this.setState({searchText:r.currentTarget.value})},this.isSupportedColumn=r=>{switch(r==null?void 0:r.columnType){case M.FILEHANDLEID:case M.ENTITYID:case M.DATE:case M.DATE_LIST:case M.USERID:return!1;default:return!0}},this.isSupportedColumnAndInProps=r=>{if(this.isSupportedColumn(r)){const{searchable:s}=this.props;return s==null?void 0:s.some(i=>i===(r==null?void 0:r.name))}return!1},this.state={show:!1,didUpdateRanLast:!1,searchText:"",columnName:(n=this.props.defaultColumn)!=null?n:""},this.searchFormRef=se.createRef(),this.radioFormRef=se.createRef()}componentDidMount(){document.addEventListener("click",this.handleClickOutsideForm)}componentDidUpdate(t){var n,r,s,i,o;!((n=t.queryVisualizationContext)!=null&&n.topLevelControlsState.showSearchBar)&&((r=this.props.queryVisualizationContext)==null?void 0:r.topLevelControlsState.showSearchBar)&&(this.setState({show:!0,didUpdateRanLast:!0}),(o=(i=(s=this.searchFormRef)==null?void 0:s.current)==null?void 0:i.querySelector("input"))==null||o.focus())}componentWillUnmount(){document.removeEventListener("click",this.handleClickOutsideForm)}render(){var m;const{searchable:t,lockedColumn:n,queryContext:{data:r},queryVisualizationContext:{topLevelControlsState:s,facetAliases:i}}=this.props,{searchText:o,show:d,columnName:p}=this.state;let h=[];t?h=t.map(u=>{var b;return(b=r==null?void 0:r.columnModels)==null?void 0:b.find(f=>f.name===u)}).filter(this.isSupportedColumnAndInProps).map(u=>u.name):r!=null&&r.columnModels&&(h=(m=r.columnModels)==null?void 0:m.filter(this.isSupportedColumn).map(u=>u.name)),h.length&&(n==null?void 0:n.columnName)&&(h=h.filter(u=>u!==(n==null?void 0:n.columnName)));const C=s==null?void 0:s.showFacetFilter;return w("div",{className:`QueryWrapperSearchInput ${C?Xe:Je}`,children:[a(Sa,{in:s==null?void 0:s.showSearchBar,children:w("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:this.search,onClick:()=>{this.setState({show:!0})},ref:this.searchFormRef,children:[a("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:a(Z,{options:{icon:"search"}})}),a("input",{onChange:this.handleChange,onClick:()=>{this.setState({show:!0})},placeholder:"Enter Search Terms",value:o,type:"text"}),this.state.searchText.length>0&&a("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{this.setState({searchText:""})},children:a(Z,{options:{icon:"close"}})})]})}),a("div",{className:"QueryWrapperSearchInput__dropdown_pos",children:a(Cr,{in:d,classNames:"QueryWrapperSearchInput__animate_dropdown",timeout:{enter:0,exit:300},children:w("form",{ref:this.radioFormRef,className:"QueryWrapperSearchInput__column-select QueryWrapperSearchInput__animate_height",children:[a("p",{className:"deemphasized",children:a("i",{children:" Search In Field: "})}),h.map((u,b)=>{const f=qe(u,i);return a("div",{className:"radio",children:a("label",{children:w("span",{children:[a("input",{id:u,type:"radio",value:u,checked:p===""&&b===0||p===u,onClick:()=>{var y,S,R;(R=(S=(y=this.searchFormRef)==null?void 0:y.current)==null?void 0:S.querySelector("input"))==null||R.focus(),this.setState({columnName:u})}}),a("span",{children:f})]})})},`search-field-${u}-${b}`)})]})})})]})}}try{pt.displayName="Search",pt.__docgenInfo={description:"",displayName:"Search",props:{queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},isQueryWrapperMenuChild:{defaultValue:null,description:"",name:"isQueryWrapperMenuChild",required:!1,type:{name:"boolean"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},searchable:{defaultValue:null,description:"",name:"searchable",required:!1,type:{name:"SearchableColumnsV2"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},fullTextSearchHelpURL:{defaultValue:null,description:"",name:"fullTextSearchHelpURL",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/SearchV2.tsx#Search"]={docgenInfo:pt.__docgenInfo,name:"Search",path:"src/lib/containers/SearchV2.tsx#Search"})}catch{}const kl="The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients.",Ll="https://help.synapse.org/docs/Searching-Tables-and-Views.2009596168.html#SearchingTablesandViews-UsingAdvancedSearchQueries",ft=({helpMessage:e=kl,helpUrl:t=Ll})=>{const{executeQueryRequest:n,getLastQueryRequest:r}=Ae(),{topLevelControlsState:{showSqlEditor:s,showFacetFilter:i}}=Rt(),[o,d]=v.exports.useState(""),p=v.exports.useRef(null);v.exports.useEffect(()=>{var m;if(s){const u=r().query.sql;d(u),(m=p.current)==null||m.focus()}},[s,r]);const h=m=>{m.preventDefault();const u=r();u.query.sql=o,u.query.offset=0,u.query.additionalFilters=[],u.query.selectedFacets=[],n(u)},C=m=>{var u;(u=p.current)==null||u.setCustomValidity(""),d(m.currentTarget.value)};return a("div",{className:`QueryWrapperSqlEditorInput ${i?Xe:Je}`,children:a(Sa,{in:s,timeout:{enter:300,exit:300},children:w("div",{className:"QueryWrapperSqlEditorInput__helppopoverwrapper",children:[w("form",{className:"QueryWrapperSqlEditorInput__searchbar",onSubmit:h,children:[a(gi,{className:"QueryWrapperSqlEditorInput__searchbar__searchicon"}),a("input",{ref:p,onChange:C,placeholder:"Enter Query",value:o,type:"text"})]}),a("div",{className:"QueryWrapperSqlEditorInput__helppopover",children:a(De,{markdownText:e,helpUrl:t,placement:"right"})})]})})})};try{ft.displayName="SqlEditor",ft.__docgenInfo={description:"",displayName:"SqlEditor",props:{helpMessage:{defaultValue:{value:"The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:{value:"https://help.synapse.org/docs/Searching-Tables-and-Views.2009596168.html#SearchingTablesandViews-UsingAdvancedSearchQueries"},description:"",name:"helpUrl",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/SqlEditor.tsx#SqlEditor"]={docgenInfo:ft.__docgenInfo,name:"SqlEditor",path:"src/lib/containers/SqlEditor.tsx#SqlEditor"})}catch{}const $t=e=>w(W,{animation:!1,show:!0,onHide:()=>e.onHide(),backdrop:"static",children:[a(W.Header,{closeButton:!0,children:a("span",{style:{fontWeight:"bold",color:"#515359",fontSize:"1.5em"},children:"Sign In Required"})}),w(xi,{children:[a("p",{children:"Anyone can browse public content on the Synapse website, but in order to download and create content you will need to register for an account using an email address."}),w("p",{children:["To find out more see\xA0",a("a",{href:"https://help.synapse.org/docs/Managing-your-account.2055405596.html",target:"_blank",rel:"noopener noreferrer",children:"User Accounts"}),a("span",{children:" and "}),a("a",{href:"https://help.synapse.org/docs/Synapse-Governance.2004255211.html",rel:"noopener noreferrer",target:"_blank",children:"Governance Overview"}),"."]})]}),w(Oi,{children:[a(ne,{variant:"secondary",onClick:()=>e.onHide(),children:"CANCEL"}),a(ne,{className:"SRC-SIGN-IN-CLASS",variant:"primary",onClick:()=>e.onHide(),children:"Sign in"})]})]});try{$t.displayName="DownloadLoginModal",$t.__docgenInfo={description:"",displayName:"DownloadLoginModal",props:{showModal:{defaultValue:null,description:"",name:"showModal",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/DownloadLoginModal.tsx#DownloadLoginModal"]={docgenInfo:$t.__docgenInfo,name:"DownloadLoginModal",path:"src/lib/containers/table/table-top/DownloadLoginModal.tsx#DownloadLoginModal"})}catch{}const zt=({show:e,title:t,onClose:n,pythonNotes:r,pythonCode:s,rNotes:i,rCode:o,cliNotes:d,cliCode:p,helpMarkdown:h,helpUrl:C})=>{let m;p?m="Command Line":s?m="Python":m="R";const[u,b]=v.exports.useState(m),f=w("p",{children:["Installation instructions are available at our"," ",a("a",{className:"ProgrammaticOptions__docslink",href:"https://help.synapse.org/docs/Installing-Synapse-API-Clients.1985249668.html",target:"_blank",rel:"noopener noreferrer",children:"Synapse API Documentation Site"}),"."]});return w(W,{className:"bootstrap-4-backport ProgrammaticOptions",backdrop:"static",animation:!1,show:e,onHide:n,size:"lg",children:[a(W.Header,{closeButton:!0,children:w(W.Title,{children:[t,"\xA0",h&&a(De,{markdownText:h,helpUrl:C})]})}),w(W.Body,{children:[w("div",{className:"Tabs",children:[p&&a("div",{className:"Tab",role:"tab",onClick:c=>{c.stopPropagation(),b("Command Line")},"aria-selected":u==="Command Line",children:"Command Line"}),o&&a("div",{className:"Tab",role:"tab",onClick:c=>{c.stopPropagation(),b("R")},"aria-selected":u==="R",children:"R"}),s&&a("div",{className:"Tab",role:"tab",onClick:c=>{c.stopPropagation(),b("Python")},"aria-selected":u==="Python",children:"Python"})]}),w("div",{className:"TabContent",children:[u==="Command Line"&&w(x,{children:[a("p",{children:d}),f,w("pre",{children:[" ",p," "]})]}),u==="R"&&w(x,{children:[a("p",{children:i}),f,a("pre",{children:o})]}),u==="Python"&&w(x,{children:[a("p",{children:r}),f,a("pre",{children:s})]})]})]}),a(W.Footer,{children:a(ne,{variant:"primary",onClick:n,children:"OK"})})]})};try{zt.displayName="ProgrammaticInstructionsModal",zt.__docgenInfo={description:"Modal used to show programmatic instructions",displayName:"ProgrammaticInstructionsModal",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},pythonNotes:{defaultValue:null,description:"",name:"pythonNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},pythonCode:{defaultValue:null,description:"",name:"pythonCode",required:!1,type:{name:"string"}},rNotes:{defaultValue:null,description:"",name:"rNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},rCode:{defaultValue:null,description:"",name:"rCode",required:!1,type:{name:"string"}},cliNotes:{defaultValue:null,description:"",name:"cliNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},cliCode:{defaultValue:null,description:"",name:"cliCode",required:!1,type:{name:"string"}},helpMarkdown:{defaultValue:null,description:"",name:"helpMarkdown",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/ProgrammaticInstructionsModal.tsx#ProgrammaticInstructionsModal"]={docgenInfo:zt.__docgenInfo,name:"ProgrammaticInstructionsModal",path:"src/lib/containers/ProgrammaticInstructionsModal.tsx#ProgrammaticInstructionsModal"})}catch{}function Kt({queryBundleRequest:e,queryResultBundle:t,onHide:n}){const[r,s]=v.exports.useState("");Zn(()=>{(async()=>{const{query:p}=e,{sql:h,selectedFacets:C=[]}=p,{columnModels:m}=t;m||console.error("Column Models must be included to complete transform sql request");const u={concreteType:"org.sagebionetworks.repo.model.table.TransformSqlWithFacetsRequest",sqlToTransform:h,selectedFacets:C,schema:m};try{const b=await as(u),f=b.transformedSql.toUpperCase().indexOf("FROM SYN"),c=`SELECT * ${b.transformedSql.substring(f)}`;s(c)}catch(b){console.error("Error on getTransformSqlWithFacetsRequest ",b)}})()},[e,t]);const i=v.exports.useMemo(()=>r.replace(/(["`])/g,"\\$1"),[r]),o=v.exports.useMemo(()=>r.replace(/"/g,'\\"'),[r]);return a(zt,{show:!0,onClose:n,title:"Download Programmatically",cliNotes:a(x,{children:"This command line code will download Synapse files AND file annotations to your working directory."}),cliCode:`synapse get -q "${i}"`,rNotes:w(x,{children:["This R code will download file annotations only. Use"," ",w("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:["synGet","()"]})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),rCode:`query <- synTableQuery("${o}")
read.table(query$filepath, sep = ",")`,pythonNotes:w(x,{children:["This Python code will download file annotations only. Use"," ",a("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:"syn.get"})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),pythonCode:`query = syn.tableQuery("${o}")
query.asDataFrame()`})}try{Kt.displayName="ProgrammaticOptions",Kt.__docgenInfo={description:"",displayName:"ProgrammaticOptions",props:{queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!0,type:{name:"QueryBundleRequest"}},queryResultBundle:{defaultValue:null,description:"",name:"queryResultBundle",required:!0,type:{name:"QueryResultBundle"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/ProgrammaticTableDownload.tsx#ProgrammaticOptions"]={docgenInfo:Kt.__docgenInfo,name:"ProgrammaticOptions",path:"src/lib/containers/table/table-top/ProgrammaticTableDownload.tsx#ProgrammaticOptions"})}catch{}const Nl="Add To Download Cart",Dl="download",Gt=e=>{const{accessToken:t}=z(),{entity:n,data:r,getLastQueryRequest:s}=Ae(),i=s(),[o,d]=v.exports.useState(!1),[p,h]=v.exports.useState(!1),[C,m]=v.exports.useState(!1),{onDownloadFiles:u,darkTheme:b=!0}=e,f=n&&(We(n)&&Fs(n)||ze(n)),c=n&&ze(n)&&n.isLatestVersion;return w(v.exports.Fragment,{children:[w(Ee,{as:"span",children:[a(Bn,{idForToolTip:Dl,tooltipText:"Download Options",size:"lg",darkTheme:b,icon:"download"}),w(Ee.Menu,{className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:[a(Ee.Item,{onClick:()=>{h(!0)},children:"Export Table"}),f&&a(ke,{title:"A draft version of a dataset cannot be added to the Download Cart",placement:"left",enterNextDelay:300,disableHoverListener:!c,children:a(Ee.Item,{className:c?"ignoreLink":void 0,disabled:c,style:c?{pointerEvents:"auto"}:{},onClick:()=>t?u():d(!0),children:Nl})}),a(ke,{title:"A draft version of a dataset cannot be downloaded programmatically",placement:"left",enterNextDelay:300,disableHoverListener:!c,children:a(Ee.Item,{className:c?"ignoreLink":void 0,disabled:c,style:c?{pointerEvents:"auto"}:{},onClick:()=>m(!0),children:"Programmatic Options"})})]})]}),o&&a($t,{showModal:o,onHide:()=>d(!1)}),p&&a(Ve,{onClose:()=>h(!1),queryBundleRequest:i}),C&&r&&a(Kt,{onHide:()=>m(!1),queryBundleRequest:i,queryResultBundle:r})]})};try{Gt.displayName="DownloadOptions",Gt.__docgenInfo={description:"",displayName:"DownloadOptions",props:{onDownloadFiles:{defaultValue:null,description:"",name:"onDownloadFiles",required:!0,type:{name:"() => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/DownloadOptions.tsx#DownloadOptions"]={docgenInfo:Gt.__docgenInfo,name:"DownloadOptions",path:"src/lib/containers/table/table-top/DownloadOptions.tsx#DownloadOptions"})}catch{}const Qa="addAndRemoveColumns",jt=e=>{const{headers:t,isColumnSelected:n,toggleColumnSelection:r,darkTheme:s,facetAliases:i}=e,[o,d]=v.exports.useState(!1),p=(h,C,m)=>{m.source==="rootClose"?d(!1):d(!0)};return w(Ee,{as:"span",onToggle:(h,C,m)=>p(h,C,m),show:o,drop:"down",children:[a(Bn,{idForToolTip:Qa,tooltipText:"Show/Hide Columns",icon:s?"columnsdark":"columns",darkTheme:s}),a(Ee.Menu,{id:`${Qa}-dropdown`,className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:t==null?void 0:t.map(h=>{const{name:C}=h,m=n.includes(C),u={width:"11px",marginRight:"10px",visibility:m?void 0:"hidden"},b=m?"SRC-primary-text-color":"";return w(Ee.Item,{onClick:()=>r(C),children:[a("span",{className:b,style:u,children:a(Z,{options:{icon:"check",size:"14px"}})}),qe(C,i)]},C)})})]})};try{jt.displayName="ColumnSelection",jt.__docgenInfo={description:"",displayName:"ColumnSelection",props:{headers:{defaultValue:null,description:"",name:"headers",required:!1,type:{name:"SelectColumn[]"}},isColumnSelected:{defaultValue:null,description:"",name:"isColumnSelected",required:!0,type:{name:"string[]"}},show:{defaultValue:null,description:"",name:"show",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(() => void)"}},toggleColumnSelection:{defaultValue:null,description:"",name:"toggleColumnSelection",required:!0,type:{name:"(name: string) => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/ColumnSelection.tsx#ColumnSelection"]={docgenInfo:jt.__docgenInfo,name:"ColumnSelection",path:"src/lib/containers/table/table-top/ColumnSelection.tsx#ColumnSelection"})}catch{}const Vl="Files may be unavailable because you do not have permission to see them, they have been deleted, or the Dataset has been misconfigured.",Fl="Files may be unavailable because you do not have permission to see them or the Dataset was misconfigured.",Xt=({entity:e})=>{var s,i;const t=e&&ze(e),n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:`SELECT * FROM ${e.id}${!e.isLatestVersion&&e.versionNumber?`.${e.versionNumber}`:""}`},entityId:e.id,partMask:At},{data:r}=hr(n,{enabled:t});if(t&&r&&e){const o=r.queryCount,d=(i=(s=e.items)==null?void 0:s.length)!=null?i:0;if(o===d)return a(x,{});const p=d-o;let h="";return e.isLatestVersion?h=Vl:h=Fl,w(Ze,{className:"SRC-centerContent",style:{marginLeft:10},variant:"smallText1",color:"textSecondary",children:[a(Xi,{className:"SRC-color-warning",style:{fontSize:"16px"}}),p.toLocaleString()+" Unavailable",a(De,{className:"SRC-margin-left-5",markdownText:h,placement:"right"})]})}else return a(x,{})};try{Xt.displayName="MissingQueryResultsWarning",Xt.__docgenInfo={description:`If possible, this component will render a warning message if results may be missing from the query due to user permissions or
entities being deleted. If not possible, it will render an empty fragment.`,displayName:"MissingQueryResultsWarning",props:{entity:{defaultValue:null,description:"",name:"entity",required:!0,type:{name:"Table"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/MissingQueryResultsWarning.tsx#MissingQueryResultsWarning"]={docgenInfo:Xt.__docgenInfo,name:"MissingQueryResultsWarning",path:"src/lib/containers/MissingQueryResultsWarning.tsx#MissingQueryResultsWarning"})}catch{}const Pl=[{icon:"search",key:"showSearchBar",tooltipText:"Show / Hide Search Bar"},{icon:"chart",key:"showFacetVisualization",tooltipText:"Show / Hide Visualizations"},{icon:"download",key:"showDownloadConfirmation",tooltipText:"Show options for download"},{icon:rs,key:"showSqlEditor",tooltipText:"Show / Hide the Advanced Query Editor"}],mt=e=>{const{name:t,showColumnSelection:n=!1,hideDownload:r=!1,hideVisualizationsControl:s=!1,hideFacetFilterControl:i=!1,hideQueryCount:o=!1,hideSqlEditorControl:d=!0,customControls:p}=e,{data:h,entity:C,executeQueryRequest:m,getLastQueryRequest:u,getInitQueryRequest:b}=Ae(),{topLevelControlsState:f,setTopLevelControlsState:c,columnsToShowInTable:y,selectedRowIndices:S,facetAliases:R,setColumnsToShowInTable:g}=Rt(),l=q=>{const I={[q]:!f[q]};q==="showSearchBar"&&(I.showDownloadConfirmation=!1),q==="showDownloadConfirmation"&&(I.showSearchBar=!1),c(O=>({...O,...I}))},_=()=>{m(u())},A=q=>{let I=Qe(y);I.includes(q)?I=I.filter(O=>O!==q):I.push(q),g(I)},T=f==null?void 0:f.showFacetFilter;return a("div",{className:`TopLevelControls ${T?Xe:Je}`,"data-testid":"TopLevelControls",children:w("div",{children:[w("div",{className:"TopLevelControls__querycount",children:[t&&w(x,{children:[w(Ze,{variant:"sectionTitle",role:"heading",children:[t," ",!o&&a(ki,{sql:b().query.sql,parens:!0})]}),!o&&C&&a(Xt,{entity:C})]}),!i&&w("a",{onClick:()=>l("showFacetFilter"),className:"TopLevelControls__querycount__facetFilterLink SRC-no-underline-on-hover",children:[a(Un,{type:f.showFacetFilter?"close":"filter"}),w("span",{className:"TopLevelControls__querycount__facetFilterLink__text",children:[f.showFacetFilter?"Hide":"Show"," ","filters"]})]})]}),w("div",{className:"TopLevelControls__actions",children:[p&&p.map(q=>{var I;return w("button",{className:`btn SRC-roundBorder SRC-primary-background-color SRC-whiteText ${(I=q.classNames)!=null?I:""}`,style:{marginRight:"5px"},type:"button",onClick:()=>q.onClick({data:h,selectedRowIndices:S,refresh:_}),children:[q.icon,"\xA0",q.buttonText]},q.buttonText)}),Pl.map(q=>{const{key:I,icon:O,tooltipText:k}=q;return I==="showDownloadConfirmation"&&r||I==="showFacetVisualization"&&s||I==="showSqlEditor"&&d?a(se.Fragment,{},I):I==="showDownloadConfirmation"?a(Gt,{darkTheme:!0,onDownloadFiles:()=>l(I)},I):a(Bn,{idForToolTip:I,tooltipText:k,callbackFn:()=>l(I),darkTheme:!0,icon:O},I)}),n&&a(jt,{headers:h==null?void 0:h.selectColumns,isColumnSelected:y,toggleColumnSelection:A,darkTheme:!0,facetAliases:R})]})]})})};try{mt.displayName="TopLevelControls",mt.__docgenInfo={description:"",displayName:"TopLevelControls",props:{name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/TopLevelControls.tsx#TopLevelControls"]={docgenInfo:mt.__docgenInfo,name:"TopLevelControls",path:"src/lib/containers/table/TopLevelControls.tsx#TopLevelControls"})}catch{}var Yr={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(Tr,function(){return(()=>{var n={67:(i,o,d)=>{d.r(o),d.d(o,{default:()=>f});var p=d(887),h=d.n(p);function C(c,y){if(!(c instanceof y))throw new TypeError("Cannot call a class as a function")}function m(c,y,S){return y in c?Object.defineProperty(c,y,{value:S,enumerable:!0,configurable:!0,writable:!0}):c[y]=S,c}var u,b=(u=0,function(){return u++}),f=function c(y){var S=this,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};C(this,c),m(this,"ID","id"),m(this,"PX","px"),m(this,"RESIZABLE","grip-resizable"),m(this,"FLEX","grip-flex"),m(this,"legacyIE",navigator.userAgent.indexOf("Trident/4.0")>0),m(this,"reset",function(g){return S.init(g)}),m(this,"onResize",function(){var g=S.tb;if(g.classList.remove(S.RESIZABLE),g.opt.fixed){g.tableWidth=Number(window.getComputedStyle(g).width.replace(/px/,"")).valueOf();for(var l=0,_=0;_<g.columnCnt;_++)l+=g.columns[_].w;for(var A=0;A<g.columnCnt;A++)g.columns[A].style.width=Math.round(1e3*g.columns[A].w/l)/10+"%",g.columns[A].locked=!0}else S.applyBounds(),g.opt.resizeMode==="flex"&&g.opt.serialize&&S.serializeStore();g.classList.add(S.RESIZABLE),S.syncGrips()}),m(this,"onGripMouseDown",function(g){var l=g.target.parentNode.data,_=S.tb,A=_.grips[l.i],T=g.touches;if(A.ox=T?T[0].pageX:g.pageX,A.l=A.offsetLeft,A.x=A.l,S.createStyle(document.querySelector("head"),"*{cursor:"+_.opt.dragCursor+"!important}"),document.addEventListener("touchmove",S.onGripDrag),document.addEventListener("mousemove",S.onGripDrag),document.addEventListener("touchend",S.onGripDragOver),document.addEventListener("mouseup",S.onGripDragOver),A.classList.add(_.opt.draggingClass),S.grip=A,_.columns[l.i].locked)for(var q,I=0;I<_.columnCnt;I++)(q=_.columns[I]).locked=!1,q.w=Number(window.getComputedStyle(q).width.replace(/px/,"")).valueOf();g.preventDefault()}),m(this,"onGripDrag",function(g){var l=S.grip;if(l){var _=l.t,A=g.touches,T=(A?A[0].pageX:g.pageX)-l.ox+l.l,q=_.opt.minWidth,I=l.i,O=1.5*_.cellSpace+q+_.borderSpace,k=I===_.columnCnt-1,N=I?_.grips[I-1].offsetLeft+_.cellSpace+q:O,D=_.opt.fixed?I===_.columnCnt-1?_.tableWidth-O:_.grips[I+1].offsetLeft-_.cellSpace-q:1/0;if(T=Math.max(N,Math.min(D,T)),l.x=T,l.style.left=T+S.PX,k&&(l.w=_.columns[I].w+T-l.l),_.opt.liveDrag){k?(_.columns[I].style.width=l.w+S.PX,!_.opt.fixed&&_.opt.overflow?_.style.minWidth=_.tableWidth+T-l.l+S.PX:_.tableWidth=Number(window.getComputedStyle(_).width.replace(/px/,"")).valueOf()):S.syncCols(_,I,!1,_.opt),S.syncGrips();var V=_.opt.onDrag;V&&V(g)}g.preventDefault()}}),m(this,"onGripDragOver",function(g){var l=S.grip;document.removeEventListener("touchend",S.onGripDragOver),document.removeEventListener("mouseup",S.onGripDragOver),document.removeEventListener("touchmove",S.onGripDrag),document.removeEventListener("mousemove",S.onGripDrag);var _=document.querySelector("head").lastChild;if(_.parentNode.removeChild(_),l){if(l.classList.remove(l.t.opt.draggingClass),l.x-l.l!=0){var A=l.t,T=A.opt.onResize,q=l.i;if(q===A.columnCnt-1){var I=A.columns[q];I.style.width=l.w+S.PX,I.w=l.w}else S.syncCols(A,q,!0,A.opt);A.opt.fixed||S.applyBounds(),S.syncGrips(),T&&T(g),A.opt.serialize&&S.serializeStore()}S.grip=null}}),m(this,"init",function(g){if(g.disable)return S.destroy();var l=S.tb,_=l.getAttribute(S.ID)||S.RESIZABLE+b();if(!l.matches("table")||l.extended&&!g.partialRefresh)return null;var A=document.querySelector("head");if(S.createStyle(A," .grip-resizable{table-layout:fixed;} .grip-resizable > tbody > tr > td, .grip-resizable > tbody > tr > th{overflow:hidden} .grip-padding > tbody > tr > td, .grip-padding > tbody > tr > th{padding-left:0!important; padding-right:0!important;} .grip-container{ height:0px; position:relative;} .grip-handle{margin-left:-5px; position:absolute; z-index:5; } .grip-handle .grip-resizable{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;cursor: col-resize;top:0px} .grip-lastgrip{position:absolute; width:1px; } .grip-drag{ border-left:1px dotted black;	} .grip-flex{width:auto!important;} .grip-handle.grip-disabledgrip .grip-resizable{cursor:default; display:none;}"),g.hoverCursor&&g.hoverCursor!=="col-resize"){var T=".grip-handle .grip-resizable:hover{cursor:"+g.hoverCursor+"!important}";S.createStyle(A,T)}l.setAttribute(S.ID,_);var q=l.opt;l.opt=S.extendOptions(g);var I=S.getTableHeaders(l);if(S.extendTable(I),g.remoteTable&&g.remoteTable.matches("table")){var O=S.getTableHeaders(l.opt.remoteTable);I.length===O.length?S.extendRemoteTable(l.opt.remoteTable,O,l):console.warn("column count for remote table did not match")}return q}),m(this,"applyBounds",function(){var g=S.tb,l=g.columns.map(function(_){return window.getComputedStyle(_).width});g.style.width=window.getComputedStyle(g).width,g.tableWidth=Number(g.style.width.replace(/px/,"")).valueOf(),g.classList.remove(S.FLEX),g.columns.forEach(function(_,A){_.style.width=l[A],_.w=Number(l[A].replace(/px/,"")).valueOf()}),g.classList.add(S.FLEX)}),m(this,"serializeStore",function(){var g=S.store,l=S.tb;g[l.getAttribute(S.ID)]="";for(var _=0,A=0;A<l.columns.length;A++){var T=window.getComputedStyle(l.columns[A]).width.replace(/px/,"");g[l.getAttribute(S.ID)]+=T+";",_+=Number(T).valueOf()}g[l.getAttribute(S.ID)]+=_.toString(),l.opt.fixed||(g[l.getAttribute(S.ID)]+=";"+window.getComputedStyle(l).width.replace(/px/,""))}),m(this,"syncGrips",function(){var g=S.tb;g.gripContainer.style.width=g.tableWidth+S.PX;for(var l=0;l<g.columnCnt;l++){var _=g.columns[l],A=_.getBoundingClientRect(),T=g.getBoundingClientRect();g.grips[l].style.left=A.left-T.left+_.offsetWidth+g.cellSpace/2+S.PX,g.grips[l].style.height=(g.opt.headerOnly?g.columns[0].offsetHeight:g.offsetHeight)+S.PX}}),m(this,"destroy",function(){var g=S.tb,l=g.getAttribute(S.ID);return l?(S.store[l]="",g.classList.remove(S.RESIZABLE),g.classList.remove(S.FLEX),g.remote&&(g.remote.classList.remove(S.RESIZABLE),g.remote.classList.remove(S.FLEX)),g.gripContainer&&g.gripContainer.parentNode&&g.gripContainer.parentNode.removeChild(g.gripContainer),delete g.extended,g.opt):null}),m(this,"createStyle",function(g,l){var _=h()(l).toString(),A=g.querySelectorAll("style");if(!Array.from(A).filter(function(q){return q.gripid===_}).length){var T=document.createElement("style");T.type="text/css",T.gripid=_,T.styleSheet?T.styleSheet.cssText=l:T.appendChild(document.createTextNode(l)),g.appendChild(T)}}),m(this,"extendOptions",function(g){var l=Object.assign({},c.DEFAULTS,g);switch(l.fixed=!0,l.overflow=!1,l.resizeMode){case"flex":l.fixed=!1;break;case"overflow":l.fixed=!1,l.overflow=!0}return l}),m(this,"getTableHeaders",function(g){var l="#"+g.id,_=Array.from(g.querySelectorAll(l+">thead>tr:nth-of-type(1)>th"));return(_=_.concat(Array.from(g.querySelectorAll(l+">thead>tr:nth-of-type(1)>td")))).length||(_=(_=(_=(_=Array.from(g.querySelectorAll(l+">tbody>tr:nth-of-type(1)>th"))).concat(Array.from(g.querySelectorAll(l+">tr:nth-of-type(1)>th")))).concat(Array.from(g.querySelectorAll(l+">tbody>tr:nth-of-type(1)>td")))).concat(Array.from(g.querySelectorAll(l+">tr:nth-of-type(1)>td")))),S.filterInvisible(_,!1)}),m(this,"filterInvisible",function(g,l){return g.filter(function(_){var A=l?-1:_.offsetWidth,T=l?-1:_.offsetHeight;return!(A===0&&T===0||_.style&&_.style.display&&window.getComputedStyle(_).display==="none")})}),m(this,"extendTable",function(g){var l=S.tb;l.opt.removePadding&&l.classList.add("grip-padding"),l.classList.add(S.RESIZABLE),l.insertAdjacentHTML("beforebegin",'<div class="grip-container"/>'),l.grips=[],l.columns=[],l.tableWidth=Number(window.getComputedStyle(l).width.replace(/px/,"")).valueOf(),l.gripContainer=l.previousElementSibling,l.opt.marginLeft&&(l.gripContainer.style.marginLeft=l.opt.marginLeft),l.opt.marginRight&&(l.gripContainer.style.marginRight=l.opt.marginRight),l.cellSpace=parseInt(S.legacyIE?l.cellSpacing||l.currentStyle.borderSpacing:window.getComputedStyle(l).borderSpacing.split(" ")[0].replace(/px/,""))||2,l.borderSpace=parseInt(S.legacyIE?l.border||l.currentStyle.borderLeftWidth:window.getComputedStyle(l).borderLeftWidth.replace(/px/,""))||1,l.extended=!0,S.createGrips(g)}),m(this,"extendRemoteTable",function(g,l,_){_.opt.removePadding&&g.classList.add("grip-padding"),g.classList.add(S.RESIZABLE),g.getAttribute(S.ID)||g.setAttribute(S.ID,_.getAttribute(S.ID)+"remote"),g.columns=[],l.forEach(function(T,q){var I=l[q];I.w=_.columns[q].w,I.style.width=I.w+S.PX,I.removeAttribute("width"),g.columns.push(I)}),g.tableWidth=_.tableWidth,g.cellSpace=_.cellSpace,g.borderSpace=_.borderSpace;var A=Array.from(g.querySelectorAll("col"));g.columnGrp=S.filterInvisible(A,!0),g.columnGrp.forEach(function(T,q){T.removeAttribute("width"),T.style.width=_.columnGrp[q].style.width}),_.remote=g}),m(this,"createGrips",function(g){var l=S.tb;l.columnGrp=S.filterInvisible(Array.from(l.querySelectorAll("col")),!0),l.columnGrp.forEach(function(T){T.removeAttribute("width")}),l.columnCnt=g.length;var _=!1;S.store[l.getAttribute(S.ID)]&&(S.deserializeStore(g),_=!0),l.opt.widths||(l.opt.widths=[]),g.forEach(function(T,q){var I=g[q],O=l.opt.disabledColumns.indexOf(q)!==-1;S.createDiv(l.gripContainer,"grip-handle");var k=l.gripContainer.lastChild;!O&&l.opt.gripInnerHtml&&(k.innerHTML=l.opt.gripInnerHtml),S.createDiv(k,S.RESIZABLE),q===l.columnCnt-1&&(k.classList.add("grip-lastgrip"),l.opt.fixed&&(k.innerHTML="")),k.addEventListener("touchstart",S.onGripMouseDown,{capture:!0,passive:!0}),k.addEventListener("mousedown",S.onGripMouseDown,!0),O?k.classList.add("grip-disabledgrip"):(k.classList.remove("grip-disabledgrip"),k.addEventListener("touchstart",S.onGripMouseDown,{capture:!0,passive:!0}),k.addEventListener("mousedown",S.onGripMouseDown,!0)),k.t=l,k.i=q,l.opt.widths[q]?I.w=l.opt.widths[q]:I.w=_?Number(I.style.width.replace(/px/,"")).valueOf():Number(window.getComputedStyle(I).width.replace(/px/,"")).valueOf(),I.style.width=I.w+S.PX,I.removeAttribute("width"),k.data={i:q,t:l.getAttribute(S.ID),last:q===l.columnCnt-1},l.grips.push(k),l.columns.push(I)});var A=Array.from(l.querySelectorAll("td"));A.concat(Array.from(l.querySelectorAll("th"))),(A=(A=A.filter(function(T){for(var q=0;q<g.length;q++)if(g[q]===T)return!1;return!0})).filter(function(T){return!(T.querySelectorAll("table th").length||T.querySelectorAll("table td").length)})).forEach(function(T){T.removeAttribute("width")}),l.opt.fixed||(l.removeAttribute("width"),l.classList.add(S.FLEX)),S.syncGrips()}),m(this,"deserializeStore",function(g){var l=S.tb;if(l.columnGrp.forEach(function(q){q.removeAttribute("width")}),l.opt.flush)S.store[l.getAttribute(S.ID)]="";else{var _=S.store[l.getAttribute(S.ID)].split(";"),A=_[l.columnCnt+1];!l.opt.fixed&&A&&(l.style.width=A+S.PX,l.opt.overflow&&(l.style.minWidth=A+S.PX,l.tableWidth=Number(A).valueOf()));for(var T=0;T<l.columnCnt;T++)g[T].style.width=_[T]+S.PX,l.columnGrp[T]&&(l.columnGrp[T].style.width=100*Number(_[T]).valueOf()/Number(_[l.columnCnt]).valueOf()+"%")}}),m(this,"createDiv",function(g,l,_){var A=document.createElement("div");A.classList.add(l),_&&(A.innerHTML=_),g.appendChild(A)}),m(this,"syncCols",function(g,l,_,A){var T=g.remote,q=S.grip.x-S.grip.l,I=g.columns[l],O=g.columns[l+1];if(I&&O){var k=I.w+q,N=O.w-q,D=k+S.PX;if(I.style.width=D,g.columnGrp[l]&&g.columnGrp[l].style.width&&(g.columnGrp[l].style.width=D),T&&(T.columns[l].style.width=D,T.columnGrp[l]&&T.columnGrp[l].style.width&&(T.columnGrp[l].style.width=D)),A.fixed){var V=N+S.PX;O.style.width=V,g.columnGrp[l+1]&&g.columnGrp[l+1].style.width&&(g.columnGrp[l+1].style.width=V),T&&(T.columns[l+1].style.width=V,T.columnGrp[l+1]&&T.columnGrp[l+1].style.width&&(T.columnGrp[l+1].style.width=V))}else A.overflow&&(g.style.minWidth=g.tableWidth+q+S.PX);_&&(I.w=k,O.w=A.fixed?N:O.w,T&&(T.columns[l].w=k,T.columns[l+1].w=A.fixed?N:O.w))}});try{this.store=sessionStorage}catch{this.store={}}this.grip=null,this.tb=y,window.addEventListener("resize",this.onResize),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),this.init(R)};f.DEFAULTS={resizeMode:"fit",draggingClass:"grip-drag",gripInnerHtml:"",liveDrag:!1,minWidth:15,headerOnly:!1,hoverCursor:"col-resize",dragCursor:"col-resize",flush:!1,marginLeft:null,marginRight:null,remoteTable:null,disable:!1,partialRefresh:!1,disabledColumns:[],removePadding:!0,widths:[],serialize:!0,onDrag:null,onResize:null}},887:i=>{i.exports=function(d){for(var p=5381,h=d.length;h;)p=33*p^d.charCodeAt(--h);return p>>>0}}},r={};function s(i){if(r[i])return r[i].exports;var o=r[i]={exports:{}};return n[i](o,o.exports,s),o.exports}return s.n=i=>{var o=i&&i.__esModule?()=>i.default:()=>i;return s.d(o,{a:o}),o},s.d=(i,o)=>{for(var d in o)s.o(o,d)&&!s.o(i,d)&&Object.defineProperty(i,d,{enumerable:!0,get:o[d]})},s.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),s.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},s(67)})()})})(Yr);const Ml=Li(Yr.exports),Jt=e=>{const{entityId:t,entityVersionNumber:n}=e,{accessToken:r}=z(),s=ss();return r?a(x,{children:a(ke,{title:"Add this file to your Download Cart",placement:"right",enterNextDelay:300,children:a("a",{"data-testid":"AddToDownloadListV2",onClick:async()=>{try{await is(t,n,r),s.invalidateQueries(["downloadliststatsv2"]);const o=await Pn(r,t,n?n==null?void 0:n.toString():void 0);Ke(`${o.name} was successfully added to your Download Cart.`,"success")}catch(o){Ke(`Unable to add the file to your Download Cart. ${o}`,"danger")}},className:"ignoreLink",children:a(Z,{options:{icon:"addToCart"}})})})}):a(x,{})};try{Jt.displayName="AddToDownloadListV2",Jt.__docgenInfo={description:"",displayName:"AddToDownloadListV2",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/AddToDownloadListV2.tsx#AddToDownloadListV2"]={docgenInfo:Jt.__docgenInfo,name:"AddToDownloadListV2",path:"src/lib/containers/AddToDownloadListV2.tsx#AddToDownloadListV2"})}catch{}var sa={exports:{}};(function(e,t){(function(n,r){var s="1.0.2",i="",o="?",d="function",p="undefined",h="object",C="string",m="major",u="model",b="name",f="type",c="vendor",y="version",S="architecture",R="console",g="mobile",l="tablet",_="smarttv",A="wearable",T="embedded",q=255,I="Amazon",O="Apple",k="ASUS",N="BlackBerry",D="Browser",V="Chrome",B="Edge",Y="Firefox",ee="Google",ie="Huawei",ue="LG",ge="Microsoft",$="Motorola",te="Opera",E="Samsung",L="Sony",F="Xiaomi",P="Zebra",K="Facebook",le=function(U,G){var H={};for(var re in U)G[re]&&G[re].length%2===0?H[re]=G[re].concat(U[re]):H[re]=U[re];return H},X=function(U){for(var G={},H=0;H<U.length;H++)G[U[H].toUpperCase()]=U[H];return G},Re=function(U,G){return typeof U===C?oe(G).indexOf(oe(U))!==-1:!1},oe=function(U){return U.toLowerCase()},pe=function(U){return typeof U===C?U.replace(/[^\d\.]/g,i).split(".")[0]:r},ye=function(U,G){if(typeof U===C)return U=U.replace(/^\s\s*/,i).replace(/\s\s*$/,i),typeof G===p?U:U.substring(0,q)},we=function(U,G){for(var H=0,re,Q,qt,J,rt,Ce;H<G.length&&!rt;){var va=G[H],Aa=G[H+1];for(re=Q=0;re<va.length&&!rt;)if(rt=va[re++].exec(U),rt)for(qt=0;qt<Aa.length;qt++)Ce=rt[++Q],J=Aa[qt],typeof J===h&&J.length>0?J.length===2?typeof J[1]==d?this[J[0]]=J[1].call(this,Ce):this[J[0]]=J[1]:J.length===3?typeof J[1]===d&&!(J[1].exec&&J[1].test)?this[J[0]]=Ce?J[1].call(this,Ce,J[2]):r:this[J[0]]=Ce?Ce.replace(J[1],J[2]):r:J.length===4&&(this[J[0]]=Ce?J[3].call(this,Ce.replace(J[1],J[2])):r):this[J]=Ce||r;H+=2}},tt=function(U,G){for(var H in G)if(typeof G[H]===h&&G[H].length>0){for(var re=0;re<G[H].length;re++)if(Re(G[H][re],U))return H===o?r:H}else if(Re(G[H],U))return H===o?r:H;return U},nt={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},at={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ta={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[y,[b,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[y,[b,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[b,y],[/opios[\/ ]+([\w\.]+)/i],[y,[b,te+" Mini"]],[/\bopr\/([\w\.]+)/i],[y,[b,te]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[b,y],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[y,[b,"UC"+D]],[/\bqbcore\/([\w\.]+)/i],[y,[b,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[y,[b,"WeChat"]],[/konqueror\/([\w\.]+)/i],[y,[b,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[y,[b,"IE"]],[/yabrowser\/([\w\.]+)/i],[y,[b,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[b,/(.+)/,"$1 Secure "+D],y],[/\bfocus\/([\w\.]+)/i],[y,[b,Y+" Focus"]],[/\bopt\/([\w\.]+)/i],[y,[b,te+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[y,[b,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[y,[b,"Dolphin"]],[/coast\/([\w\.]+)/i],[y,[b,te+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[y,[b,"MIUI "+D]],[/fxios\/([-\w\.]+)/i],[y,[b,Y]],[/\bqihu|(qi?ho?o?|360)browser/i],[[b,"360 "+D]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[b,/(.+)/,"$1 "+D],y],[/(comodo_dragon)\/([\w\.]+)/i],[[b,/_/g," "],y],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[b,y],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[b],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[b,K],y],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[b,y],[/\bgsa\/([\w\.]+) .*safari\//i],[y,[b,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[y,[b,V+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[b,V+" WebView"],y],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[y,[b,"Android "+D]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[b,y],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[y,[b,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[y,b],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[b,[y,tt,nt]],[/(webkit|khtml)\/([\w\.]+)/i],[b,y],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[b,"Netscape"],y],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[y,[b,Y+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[b,y]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[S,"amd64"]],[/(ia32(?=;))/i],[[S,oe]],[/((?:i[346]|x)86)[;\)]/i],[[S,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[S,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[S,"armhf"]],[/windows (ce|mobile); ppc;/i],[[S,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[S,/ower/,i,oe]],[/(sun4\w)[;\)]/i],[[S,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[S,oe]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[c,E],[f,l]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[c,E],[f,g]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[c,O],[f,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[c,O],[f,l]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[c,ie],[f,l]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[u,[c,ie],[f,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[c,F],[f,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[c,F],[f,l]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[c,"OPPO"],[f,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[c,"Vivo"],[f,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[c,"Realme"],[f,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[c,$],[f,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[c,$],[f,l]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[c,ue],[f,l]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[c,ue],[f,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[c,"Lenovo"],[f,l]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[c,"Nokia"],[f,g]],[/(pixel c)\b/i],[u,[c,ee],[f,l]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[c,ee],[f,g]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[c,L],[f,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[c,L],[f,l]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[c,"OnePlus"],[f,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[c,I],[f,l]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[c,I],[f,g]],[/(playbook);[-\w\),; ]+(rim)/i],[u,c,[f,l]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[c,N],[f,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[c,k],[f,l]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[c,k],[f,g]],[/(nexus 9)/i],[u,[c,"HTC"],[f,l]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[c,[u,/_/g," "],[f,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[c,"Acer"],[f,l]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[c,"Meizu"],[f,g]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[c,"Sharp"],[f,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[c,u,[f,g]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[c,u,[f,l]],[/(surface duo)/i],[u,[c,ge],[f,l]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[c,"Fairphone"],[f,g]],[/(u304aa)/i],[u,[c,"AT&T"],[f,g]],[/\bsie-(\w*)/i],[u,[c,"Siemens"],[f,g]],[/\b(rct\w+) b/i],[u,[c,"RCA"],[f,l]],[/\b(venue[\d ]{2,7}) b/i],[u,[c,"Dell"],[f,l]],[/\b(q(?:mv|ta)\w+) b/i],[u,[c,"Verizon"],[f,l]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[c,"Barnes & Noble"],[f,l]],[/\b(tm\d{3}\w+) b/i],[u,[c,"NuVision"],[f,l]],[/\b(k88) b/i],[u,[c,"ZTE"],[f,l]],[/\b(nx\d{3}j) b/i],[u,[c,"ZTE"],[f,g]],[/\b(gen\d{3}) b.+49h/i],[u,[c,"Swiss"],[f,g]],[/\b(zur\d{3}) b/i],[u,[c,"Swiss"],[f,l]],[/\b((zeki)?tb.*\b) b/i],[u,[c,"Zeki"],[f,l]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[c,"Dragon Touch"],u,[f,l]],[/\b(ns-?\w{0,9}) b/i],[u,[c,"Insignia"],[f,l]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[c,"NextBook"],[f,l]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[c,"Voice"],u,[f,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[c,"LvTel"],u,[f,g]],[/\b(ph-1) /i],[u,[c,"Essential"],[f,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[c,"Envizen"],[f,l]],[/\b(trio[-\w\. ]+) b/i],[u,[c,"MachSpeed"],[f,l]],[/\btu_(1491) b/i],[u,[c,"Rotor"],[f,l]],[/(shield[\w ]+) b/i],[u,[c,"Nvidia"],[f,l]],[/(sprint) (\w+)/i],[c,u,[f,g]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[c,ge],[f,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[c,P],[f,l]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[c,P],[f,g]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[c,u,[f,R]],[/droid.+; (shield) bui/i],[u,[c,"Nvidia"],[f,R]],[/(playstation [345portablevi]+)/i],[u,[c,L],[f,R]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[c,ge],[f,R]],[/smart-tv.+(samsung)/i],[c,[f,_]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[c,E],[f,_]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[c,ue],[f,_]],[/(apple) ?tv/i],[c,[u,O+" TV"],[f,_]],[/crkey/i],[[u,V+"cast"],[c,ee],[f,_]],[/droid.+aft(\w)( bui|\))/i],[u,[c,I],[f,_]],[/\(dtv[\);].+(aquos)/i],[u,[c,"Sharp"],[f,_]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[c,ye],[u,ye],[f,_]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[f,_]],[/((pebble))app/i],[c,u,[f,A]],[/droid.+; (glass) \d/i],[u,[c,ee],[f,A]],[/droid.+; (wt63?0{2,3})\)/i],[u,[c,P],[f,A]],[/(quest( 2)?)/i],[u,[c,K],[f,A]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[c,[f,T]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[f,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[f,l]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[f,l]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[f,g]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[c,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[y,[b,B+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[y,[b,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[b,y],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[y,b]],os:[[/microsoft (windows) (vista|xp)/i],[b,y],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[b,[y,tt,at]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[b,"Windows"],[y,tt,at]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[y,/_/g,"."],[b,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[b,"Mac OS"],[y,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[y,b],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[b,y],[/\(bb(10);/i],[y,[b,N]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[y,[b,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[y,[b,Y+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[y,[b,"webOS"]],[/crkey\/([\d\.]+)/i],[y,[b,V+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[b,"Chromium OS"],y],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[b,y],[/(sunos) ?([\w\.\d]*)/i],[[b,"Solaris"],y],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[b,y]]},Se=function(U,G){if(typeof U===h&&(G=U,U=r),!(this instanceof Se))return new Se(U,G).getResult();var H=U||(typeof n!==p&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:i),re=G?le(Ta,G):Ta;return this.getBrowser=function(){var Q={};return Q[b]=r,Q[y]=r,we.call(Q,H,re.browser),Q.major=pe(Q.version),Q},this.getCPU=function(){var Q={};return Q[S]=r,we.call(Q,H,re.cpu),Q},this.getDevice=function(){var Q={};return Q[c]=r,Q[u]=r,Q[f]=r,we.call(Q,H,re.device),Q},this.getEngine=function(){var Q={};return Q[b]=r,Q[y]=r,we.call(Q,H,re.engine),Q},this.getOS=function(){var Q={};return Q[b]=r,Q[y]=r,we.call(Q,H,re.os),Q},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return H},this.setUA=function(Q){return H=typeof Q===C&&Q.length>q?ye(Q,q):Q,this},this.setUA(H),this};Se.VERSION=s,Se.BROWSER=X([b,y,m]),Se.CPU=X([S]),Se.DEVICE=X([u,c,f,R,g,_,l,A,T]),Se.ENGINE=Se.OS=X([b,y]),e.exports&&(t=e.exports=Se),t.UAParser=Se;var Ue=typeof n!==p&&(n.jQuery||n.Zepto);if(Ue&&!Ue.ua){var Et=new Se;Ue.ua=Et.getResult(),Ue.ua.get=function(){return Et.getUA()},Ue.ua.set=function(U){Et.setUA(U);var G=Et.getResult();for(var H in G)Ue.ua[H]=G[H]}}})(typeof window=="object"?window:Tr)})(sa,sa.exports);const ht=e=>{const{accessToken:t}=z(),{associatedObjectId:n,entityVersionNumber:r,associatedObjectType:s,fileHandleId:i,displayFileName:o,onClickCallback:d}=e,{ref:p,inView:h}=et(),[C,m]=v.exports.useState(!1),[u,b]=v.exports.useState(!1),[f,c]=v.exports.useState(),[y,S]=v.exports.useState(),[R,g]=v.exports.useState("");let l=!0;v.exports.useEffect(()=>(l&&h&&q(),()=>{l=!1}),[t,h]);const _=async()=>{let O;const N=new sa.exports.UAParser().getBrowser().name=="Safari";let D=null;N&&(D=window.open("","Safari Download","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,popup,width=600,height=200"),D.document.body.innerHTML="Downloading file on Safari...");try{s===fe.TableEntity?O=(await T(!0)).requestedFiles[0].preSignedURL:O=(await Ra(f,t,!1,!0)).preSignedURL}catch(V){console.log("Fail to get file download link: ",V)}O?(N&&D?(D.location=O,setTimeout(()=>{D&&D.close()},1e4)):window.open(O),d&&d(C)):(D==null||D.close(),console.log("Fail to get file download link"))},A=O=>O&&!O.isPreview?(b(!0),!0):(b(!1),!1),T=(O=!1)=>Ge({includeFileHandles:!0,includePreSignedURLs:O,includePreviewPreSignedURLs:!1,requestedFiles:[{associateObjectId:n,associateObjectType:s,fileHandleId:i}]},t),q=()=>Pn(t,n,r).then(async O=>{if(O.hasOwnProperty("dataFileHandleId"))return c(O),Ra(O,t,!0).then(k=>{const N=k.fileHandle;N&&A(N)&&Zi(N)&&(m(!0),S(N.externalURL))}).catch(k=>{console.log("Error on getFileEntityFileHandle = ",k)});if(s===fe.TableEntity){const N=(await T()).requestedFiles[0].fileHandle;o&&N&&A(N)&&g(N.fileName)}return Promise.resolve()}).catch(O=>{console.log("Error on getEntity = ",O)});return a(ke,{title:C?"Navigate to external link":"Download this file individually",enterNextDelay:Nn,placement:"left",children:a("span",{ref:p,children:(()=>C?a("button",{className:"btn-download-icon",onClick:()=>{d&&d(C)},children:a("a",{className:"ignoreLink",rel:"noreferrer",href:y,target:"_blank",children:a(Z,{options:{icon:"openInNewWindow"}})})}):u?w("button",{className:"btn-download-icon",onClick:_,children:[a(Z,{options:{icon:"download"}}),o&&R?R:""]}):a(x,{}))()})})};try{ht.displayName="DirectDownload",ht.__docgenInfo={description:"",displayName:"DirectDownload",props:{associatedObjectId:{defaultValue:null,description:"",name:"associatedObjectId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},associatedObjectType:{defaultValue:null,description:"",name:"associatedObjectType",required:!1,type:{name:"enum",value:[{value:'"FileEntity"'},{value:'"TableEntity"'},{value:'"WikiAttachment"'},{value:'"WikiMarkdown"'},{value:'"UserProfileAttachment"'},{value:'"MessageAttachment"'},{value:'"TeamAttachment"'},{value:'"SubmissionAttachment"'},{value:'"VerificationSubmission"'},{value:'"AccessRequirementAttachment"'},{value:'"DataAccessRequestAttachment"'},{value:'"DataAccessSubmissionAttachment"'}]}},fileHandleId:{defaultValue:null,description:"",name:"fileHandleId",required:!1,type:{name:"string"}},displayFileName:{defaultValue:null,description:"",name:"displayFileName",required:!1,type:{name:"boolean"}},onClickCallback:{defaultValue:null,description:"",name:"onClickCallback",required:!1,type:{name:"((isExternalLink: boolean) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DirectDownload.tsx#DirectDownload"]={docgenInfo:ht.__docgenInfo,name:"DirectDownload",path:"src/lib/containers/DirectDownload.tsx#DirectDownload"})}catch{}const Bl=e=>{const t=v.exports.useRef();return v.exports.useEffect(()=>{t.current=e}),t.current},Ul=e=>Bl(e)!==e;function xe({isCompleted:e}){return a("div",{"data-testid":`AccessApprovalCheckMark-${e}`,className:`check-mark-container ${e?"green":"orange"}`,children:e?a(Gi,{}):a(ji,{})})}try{xe.displayName="AccessApprovalCheckMark",xe.__docgenInfo={description:"",displayName:"AccessApprovalCheckMark",props:{isCompleted:{defaultValue:null,description:"",name:"isCompleted",required:!0,type:{name:"boolean | undefined"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AccessApprovalCheckMark.tsx#AccessApprovalCheckMark"]={docgenInfo:xe.__docgenInfo,name:"AccessApprovalCheckMark",path:"src/lib/containers/access_requirement_list/AccessApprovalCheckMark.tsx#AccessApprovalCheckMark"})}catch{}function $e({user:e,wikiPage:t,accessRequirement:n,accessRequirementStatus:r,showButton:s=!0,entityId:i,onHide:o}){const{accessToken:d}=z(),[p,h]=v.exports.useState(!0),C=r==null?void 0:r.isApproved,[m,u]=v.exports.useState(C);let b="";n.concreteType===de.ManagedACTAccessRequirement||n.concreteType===de.ACTAccessRequirement?window.location.hostname==="www.synapse.org"||window.location.hostname==="staging.synapse.org"?b="Request access":b="Request access via Synapse.org":b="I Accept Terms of Use",v.exports.useEffect(()=>{u(C)},[C]);const f=()=>{window.open(`${he.PORTAL}#!AccessRequirement:AR_ID=${n.id}&TYPE=ENTITY&ID=${i}`)},c=()=>{if(n.concreteType===de.ManagedACTAccessRequirement||n.concreteType===de.ACTAccessRequirement)f(),o==null||o();else if(!m){const q={requirementId:n==null?void 0:n.id,submitterId:e==null?void 0:e.ownerId,accessorId:e==null?void 0:e.ownerId,state:Ca.APPROVED};er(d,q).then(I=>{u(!0)}).catch(I=>console.error("Error on post access approval: ",I))}},y=n.termsOfUse,S=n.actContactInfo,R=n.concreteType===de.TermsOfUseAccessRequirement,g=n.concreteType===de.ACTAccessRequirement,l=R&&y||g&&S;let _=a(x,{});t?_=a("div",{className:"AcceptRequirementsMarkdown",children:a(me,{wikiId:t==null?void 0:t.wikiPageId,ownerId:t==null?void 0:t.ownerObjectId,objectType:t==null?void 0:t.ownerObjectType})}):l&&(_=a(me,{markdown:R?y:S}));const A=n.concreteType===de.ManagedACTAccessRequirement;return a(x,{children:w("div",{"data-testid":"AcceptedRequirements",className:"requirement-container",children:[a(xe,{isCompleted:m}),w("div",{className:"terms-of-use-content",children:[m?w("div",{children:[w("p",{children:[A?"Your data access request has been approved.":"You have accepted the terms of use.",A&&a("a",{className:"update-request-button",onClick:()=>{f()},children:"Update Request"}),a("a",{className:"view-terms-button",onClick:()=>{h(!p)},children:"View Terms"})]}),a("div",{className:`view-terms ${p?"hidden":"show"}`,children:_})]}):_,d&&s&&w("div",{className:`button-container ${m?"hide":"default"}`,children:[a("div",{className:"accept-button-container",children:a("button",{className:"accept-button",onClick:c,children:b})}),a("div",{className:"not-accept-button-container",children:a("button",{className:"not-accpet-button",onClick:()=>o==null?void 0:o(),children:"I do not accept"})})]})]})]})})}try{$e.displayName="AcceptedRequirements",$e.__docgenInfo={description:"",displayName:"AcceptedRequirements",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPageKey | undefined"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement | ManagedACTAccessRequirement | SelfSignAccessRequirement | TermsOfUseAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus | undefined"}},showButton:{defaultValue:{value:"true"},description:"",name:"showButton",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AcceptedRequirements.tsx#AcceptedRequirements"]={docgenInfo:$e.__docgenInfo,name:"AcceptedRequirements",path:"src/lib/containers/access_requirement_list/AcceptedRequirements.tsx#AcceptedRequirements"})}catch{}function Hl({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:s}){const{accessToken:i}=z(),[o,d]=v.exports.useState();return v.exports.useEffect(()=>{(async()=>{try{const h=await Mn(i,e.id);d(h)}catch(h){console.error("Error on get ACTAccessRequirement",h)}})()},[i,e]),a($e,{accessRequirement:e,accessRequirementStatus:r,user:t,wikiPage:o,onHide:n,entityId:s})}try{ACTAccessRequirement.displayName="ACTAccessRequirement",ACTAccessRequirement.__docgenInfo={description:"",displayName:"ACTAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/ACTAccessRequirement.tsx#ACTAccessRequirement"]={docgenInfo:ACTAccessRequirement.__docgenInfo,name:"ACTAccessRequirement",path:"src/lib/containers/access_requirement_list/ACTAccessRequirement.tsx#ACTAccessRequirement"})}catch{}const Zt=e=>{const{accessToken:t}=z(),{formSubmitRequestObject:n,onHide:r}=e,[s,i]=v.exports.useState(),[o,d]=v.exports.useState(!1),p=async()=>{if(n)try{await tr(n,t)?r==null||r():(i({key:"danger",message:"Sorry, there is an error in submitting your request. Please close this dialog and try again later."}),d(!0))}catch(h){console.log("CancelRequestDataAccess: Error updating form",h),i({key:"danger",message:`Sorry, there is an error in submitting your request. ${h.reason||""}. Please close this dialog and try again later`}),d(!0)}};return w(x,{children:[a(W.Header,{closeButton:!0,children:a(W.Title,{className:"AccessRequirementList__title",children:"Save Changes"})}),w(W.Body,{children:[a("p",{children:"Would you like to save your recent changes?"}),s&&a(It,{variant:s.key,children:s.message})]}),w(W.Footer,{children:[!o&&w(x,{children:[a(ne,{variant:"link",onClick:()=>r==null?void 0:r(),children:"Cancel"}),a(ne,{variant:"primary",onClick:()=>p(),children:"Save changes"})]}),o&&a(ne,{variant:"primary",onClick:()=>r==null?void 0:r(),children:"Close"})]})]})};try{Zt.displayName="CancelRequestDataAccess",Zt.__docgenInfo={description:"",displayName:"CancelRequestDataAccess",props:{formSubmitRequestObject:{defaultValue:null,description:"",name:"formSubmitRequestObject",required:!0,type:{name:"RequestInterface | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/CancelRequestDataAccess.tsx#CancelRequestDataAccess"]={docgenInfo:Zt.__docgenInfo,name:"CancelRequestDataAccess",path:"src/lib/containers/access_requirement_list/managedACTAccess/CancelRequestDataAccess.tsx#CancelRequestDataAccess"})}catch{}const en=e=>{const{user:t,wikiPage:n,accessRequirementStatus:r,accessRequirement:s,showButton:i=!0,onHide:o,requestDataStepCallback:d}=e,{accessToken:p}=z(),[h,C]=v.exports.useState(!0),m=r==null?void 0:r.isApproved,[u,b]=v.exports.useState(m),[f,c]=v.exports.useState(),[y,S]=v.exports.useState(),[R,g]=v.exports.useState(!1);v.exports.useEffect(()=>{b(m),r!=null&&r.currentSubmissionStatus&&(c(r.currentSubmissionStatus.state),T(r.currentSubmissionStatus))},[m]);const l=()=>{d==null||d({managedACTAccessRequirement:s,step:1})},_=async()=>{if(s.concreteType===de.ManagedACTAccessRequirement)if(p)if(f===ce.SUBMITTED&&!R){const Y={key:"danger",message:w(x,{children:[a("strong",{children:"Error canceling your data access request."}),a("br",{}),"Please try again later."]})};try{(await os(r==null?void 0:r.currentSubmissionStatus.submissionId,p)).state===ce.CANCELLED?(S({key:"success",message:a("strong",{children:"Your data access request has been canceled."})}),g(!0)):S(Y)}catch(ee){console.log("RequestDataAccess: error canceling data access request:",ee),S(Y)}}else l();else d==null||d({managedACTAccessRequirement:s,step:4});else if(!u){const Y={requirementId:s==null?void 0:s.id,submitterId:t==null?void 0:t.ownerId,accessorId:t==null?void 0:t.ownerId,state:Ca.APPROVED};er(p,Y).then(ee=>{b(!0)}).catch(ee=>console.error("Error on post access approval: ",ee))}},A=()=>{if(s.concreteType===de.ManagedACTAccessRequirement||s.concreteType===de.ACTAccessRequirement)if(f){let Y;switch(f){case ce.SUBMITTED:Y=R?"Update Request":"Cancel Request";break;case ce.APPROVED:case ce.REJECTED:case ce.CANCELLED:Y="Update Request"}return Y}else return"Request access";else return"I Accept Terms of Use"},T=Y=>{switch(Y.state){case ce.SUBMITTED:S({key:"primary",message:a("strong",{children:"You have submitted a data access request."})});break;case ce.APPROVED:S({key:"success",message:a("strong",{children:"Your data access request has been approved."})});break;case ce.REJECTED:S({key:"danger",message:w(x,{children:[a("strong",{children:"Your data access request has been rejected."}),a("br",{}),Y.rejectedReason||""]})});break}return a(x,{})},q=s.termsOfUse,I=s.actContactInfo,O=s.concreteType===de.TermsOfUseAccessRequirement,k=s.concreteType===de.ACTAccessRequirement,N=O&&q||k&&I;let D=a(x,{});n?D=w("div",{className:"AcceptRequirementsMarkdown",children:[n&&a(me,{wikiId:n==null?void 0:n.wikiPageId,ownerId:n==null?void 0:n.ownerObjectId,objectType:n==null?void 0:n.ownerObjectType}),y&&a(It,{className:"access-requirement-list-alert",variant:y.key,children:y.message})]}):N&&(D=a(me,{markdown:O?q:I}));const V=s.concreteType===de.ManagedACTAccessRequirement;return a(x,{children:w("div",{"data-testid":"RequestDataAccess",className:"requirement-container",children:[a(xe,{isCompleted:u}),w("div",{className:"terms-of-use-content",children:[u?w("div",{children:[a("p",{children:V?"Your data access request has been approved.":"You have accepted the terms of use."}),w("p",{style:{marginBottom:"0"},children:[V&&a("button",{className:"update-request-button",onClick:()=>{l()},style:{paddingLeft:"0",marginRight:"2rem"},children:A()}),a("a",{onClick:()=>{C(!h)},children:"View Terms"})]}),a("div",{className:`view-terms ${h?"hidden":"show"}`,children:D})]}):D,i&&w("div",{className:`button-container ${u?"hide":"default"}`,children:[a("div",{className:"accept-button-container",children:a("button",{className:"accept-button",onClick:_,children:A()})}),a("div",{className:"not-accept-button-container",children:a("button",{className:"not-accpet-button",onClick:()=>o==null?void 0:o(),children:"I do not accept"})})]})]})]})})};try{en.displayName="RequestDataAccess",en.__docgenInfo={description:"",displayName:"RequestDataAccess",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPageKey | undefined"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement | ManagedACTAccessRequirement | SelfSignAccessRequirement | TermsOfUseAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!1,type:{name:"ManagedACTAccessRequirementStatus"}},showButton:{defaultValue:null,description:"",name:"showButton",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccess.tsx#RequestDataAccess"]={docgenInfo:en.__docgenInfo,name:"RequestDataAccess",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccess.tsx#RequestDataAccess"})}catch{}const Wl=e=>{const{entityId:t,user:n,accessRequirement:r,accessRequirementStatus:s,onHide:i,requestDataStepCallback:o}=e,{accessToken:d}=z(),[p,h]=v.exports.useState();return v.exports.useEffect(()=>{(async()=>{try{const m=await Mn(d,r.id);h(m)}catch(m){console.error("Error on get ManagedACTAccessRequirement",m)}})()},[d,r]),a(en,{accessRequirement:r,accessRequirementStatus:s,entityId:t,user:n,wikiPage:p,onHide:i,requestDataStepCallback:o})};try{ManagedACTAccessRequirement.displayName="ManagedACTAccessRequirement",ManagedACTAccessRequirement.__docgenInfo={description:"",displayName:"ManagedACTAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"ManagedACTAccessRequirementStatus"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((props: requestDataStepCallbackProps) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/ManagedACTAccessRequirement.tsx#ManagedACTAccessRequirement"]={docgenInfo:ManagedACTAccessRequirement.__docgenInfo,name:"ManagedACTAccessRequirement",path:"src/lib/containers/access_requirement_list/managedACTAccess/ManagedACTAccessRequirement.tsx#ManagedACTAccessRequirement"})}catch{}const tn=e=>{const{requestDataStepCallback:t,managedACTAccessRequirement:n,onHide:r}=e,{accessToken:s}=z(),[i,o]=v.exports.useState(""),[d,p]=v.exports.useState(""),[h,C]=v.exports.useState(""),[m,u]=v.exports.useState(),b=v.exports.useRef({});let f=!0;v.exports.useEffect(()=>(f&&(u(void 0),c()),()=>{f=!1}),[s]);const c=async()=>{try{const R=await ls(String(n.id),s);R.id&&(b.current=R,o(R.projectLead),p(R.institution),C(R.intendedDataUseStatement))}catch(R){console.log("RequestDataAccessStep1: Error getting research project data: ",R)}},y=(R="")=>w(x,{children:[a("strong",{children:"Unable to update research project data."}),a("br",{}),R]});return a(x,{children:w(j,{className:"access-request-form1",onSubmit:R=>{R.preventDefault();const g=Object.assign({},b.current,{accessRequirementId:String(n.id),institution:d,projectLead:i,intendedDataUseStatement:h});try{cs(g,s).then(l=>{t==null||t({managedACTAccessRequirement:n,step:2,researchProjectId:l.id})}).catch(l=>{console.log("RequestDataAccessStep1: Error updating research project data: ",l),u({key:"danger",message:y(l.reason)})})}catch(l){console.log("RequestDataAccessStep1: Error updating research project data: ",l),u({key:"danger",message:y(l.reason)})}},children:[a(W.Header,{closeButton:!0,children:a(W.Title,{className:"AccessRequirementList__title",children:"Request Access"})}),w(W.Body,{children:[a("p",{children:"Please tell us about your project."}),w(j.Group,{children:[a(j.Label,{htmlFor:"project-lead",children:"Project Lead"}),a(j.Control,{id:"project-lead",type:"text",value:i,required:!0,onChange:R=>o(R.target.value)})]}),w(j.Group,{children:[a(j.Label,{htmlFor:"institution",children:"Institution"}),a(j.Control,{id:"institution",type:"text",value:d,required:!0,onChange:R=>p(R.target.value)})]}),n.isIDURequired&&w(j.Group,{children:[w(j.Label,{htmlFor:"data-use",children:["Intended Data Use Statement -",n.isIDUPublic&&a("i",{id:"idu-visible",children:"this will be visible to the public"})]}),a(j.Control,{id:"data-use",as:"textarea",value:h,rows:10,required:!0,onChange:R=>C(R.target.value)})]}),m&&a(It,{variant:m.key,children:m.message})]}),w(W.Footer,{children:[a(ne,{variant:"link",onClick:()=>r==null?void 0:r(),children:"Cancel"}),a(ne,{variant:"primary",type:"submit",children:"Save changes"})]})]})})};try{tn.displayName="RequestDataAccessStep1",tn.__docgenInfo={description:"",displayName:"RequestDataAccessStep1",props:{requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((props: requestDataStepCallbackProps) => void)"}},managedACTAccessRequirement:{defaultValue:null,description:"",name:"managedACTAccessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep1.tsx#RequestDataAccessStep1"]={docgenInfo:tn.__docgenInfo,name:"RequestDataAccessStep1",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep1.tsx#RequestDataAccessStep1"})}catch{}const Ne=e=>{const{id:t,fileHandleAssociation:n,className:r,variant:s,fileName:i}=e,{accessToken:o}=z(),d=async()=>{if(!n.fileHandleId||!o)return;const p={requestedFiles:[n],includePreSignedURLs:!0,includeFileHandles:!1,includePreviewPreSignedURLs:!1};try{const C=(await Ge(p,o)).requestedFiles[0].preSignedURL;C?window.open(C):console.log("Fail to get file download link")}catch(h){console.log("Fail to get file download link",h)}};return a(x,{children:a(ne,{id:t,variant:s,className:r,onClick:p=>d(),children:i})})};try{Ne.displayName="DirectDownloadButton",Ne.__docgenInfo={description:"",displayName:"DirectDownloadButton",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!0,type:{name:"string | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DirectDownloadButton.tsx#DirectDownloadButton"]={docgenInfo:Ne.__docgenInfo,name:"DirectDownloadButton",path:"src/lib/containers/DirectDownloadButton.tsx#DirectDownloadButton"})}catch{}const nn=e=>{const{requestDataStepCallback:t,managedACTAccessRequirement:n,entityId:r,user:s,researchProjectId:i}=e,{accessToken:o}=z(),[d,p]=v.exports.useState(),[h,C]=v.exports.useState(),[m,u]=v.exports.useState(),[b,f]=v.exports.useState([]),[c,y]=v.exports.useState(),[S,R]=v.exports.useState(),[g,l]=v.exports.useState(!1),[_,A]=v.exports.useState([]),T={},q={requestedFiles:[],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1};let I=!0;v.exports.useEffect(()=>(I&&(R(void 0),O()),()=>{I=!1}),[o,i]);const O=async()=>{const E=await ds(String(n.id),o);if(E.accessorChanges){const L=new Set;E.accessorChanges=E.accessorChanges.filter(F=>L.has(F.userId)?!1:L.add(F.userId))}E.concreteType==="org.sagebionetworks.repo.model.dataaccess.Renewal"&&l(!0),E.researchProjectId=i,y(E),k(E),N(E)},k=E=>{const L=E.accessorChanges,F=[];!L||!L.length?(F.push(s.ownerId),y(K=>Object.assign({},K,{accessorChanges:[{userId:s.ownerId,type:Te.GAIN_ACCESS}]}))):L.forEach(K=>{F.push(K.userId)});const P=F.map(K=>us(o,K));Promise.all(P).then(K=>{const le=K.map((X,Re)=>{var pe;const oe=L&&((pe=L[Re])==null?void 0:pe.type)?L[Re].type:Te.GAIN_ACCESS;return{profile:X,accessType:oe}});A(le)})},N=E=>{if(n.isDUCRequired&&n.ducTemplateFileHandleId){const L={associateObjectId:String(n.id),associateObjectType:fe.AccessRequirementAttachment,fileHandleId:n.ducTemplateFileHandleId};q.requestedFiles.push(L),T[n.ducTemplateFileHandleId]||(T[n.ducTemplateFileHandleId]=[]),T[n.ducTemplateFileHandleId].push("DUCTemplate"),p(L)}if(n.isDUCRequired&&E.ducFileHandleId){const L={associateObjectId:E.id,associateObjectType:fe.DataAccessRequestAttachment,fileHandleId:E.ducFileHandleId};q.requestedFiles.push(L),T[E.ducFileHandleId]||(T[E.ducFileHandleId]=[]),T[E.ducFileHandleId].push("DUC"),C(L)}if(n.isIRBApprovalRequired&&E.irbFileHandleId){const L={associateObjectId:E.id,associateObjectType:fe.DataAccessRequestAttachment,fileHandleId:E.irbFileHandleId};q.requestedFiles.push(L),T[E.irbFileHandleId]||(T[E.irbFileHandleId]=[]),T[E.irbFileHandleId].push("IRB"),u(L)}E.attachments&&E.attachments.length&&E.attachments.forEach(L=>{q.requestedFiles.push({associateObjectId:E.id,associateObjectType:fe.DataAccessRequestAttachment,fileHandleId:L}),T[L]||(T[L]=[]),T[L].push("attachments")}),q.requestedFiles.length&&Ge(q,o).then(L=>{L.requestedFiles.forEach(F=>{const P=F.fileHandle.fileName,K=T[F.fileHandleId];K.forEach(le=>{switch(le){case"DUCTemplate":p(X=>Object.assign({},X,{fileName:P})),T[F.fileHandleId].splice(K.indexOf("DUCTemplate"),1);break;case"DUC":C(X=>Object.assign({},X,{fileName:P})),T[F.fileHandleId].splice(K.indexOf("DUC"),1);break;case"IRB":u(X=>Object.assign({},X,{fileName:P})),T[F.fileHandleId].splice(K.indexOf("IRB"),1);break;case"attachments":f(X=>[...X,{fileName:P,associateObjectId:E.id,associateObjectType:fe.DataAccessRequestAttachment,fileHandleId:F.fileHandleId}]),T[F.fileHandleId].splice(K.indexOf("attachments"),1);break}})})})},D=async()=>{if(c)try{const E=await tr(c,o);if(E&&E.etag){const L={requestId:E.id,requestEtag:E.etag,subjectId:r,subjectType:Wn.ENTITY};y(K=>Object.assign({},K,{etag:E.etag}));const F=await fs(L,o),P=B(F);F.state===ce.REJECTED?R({key:"danger",message:P}):t==null||t({step:5})}else R({key:"danger",message:V()})}catch(E){console.log("RequestDataAccessStep2: Error updating form",E),R({key:"danger",message:V(E.reason)})}},V=(E="")=>w(x,{children:[a("strong",{children:"Sorry, there is an error in submitting your request."}),a("br",{}),E]}),B=E=>{const L="The information has been ";switch(E.state){case ce.SUBMITTED:return w("strong",{children:[L," submitted."]});case ce.APPROVED:return w("strong",{children:[L," approved."]});case ce.CANCELLED:return w("strong",{children:[L," canceled."]});case ce.REJECTED:return w(x,{children:[w("strong",{children:[L," rejected."]})," ",E.rejectedReason,". Please close this dialog and try again later."]});default:return a(x,{})}},Y=E=>{const L=_.filter(P=>P.profile.ownerId!==E);A(L);const F=L.map(P=>({userId:P.profile.ownerId,type:P.accessType}));y(P=>Object.assign({},P,{accessorChanges:F}))},ee=E=>{const L=b.filter(P=>P.fileHandleId!==E);f(L);const F=L.map(P=>P.fileHandleId);y(P=>Object.assign({},P,{attachments:F}))},ie=E=>{if(E.resp&&E.success){const L=E.resp;if(E.context==="attachments"){const F=c!=null&&c.attachments?c==null?void 0:c.attachments:[];F==null||F.push(L.fileHandleId),y(P=>Object.assign({},P,{attachments:F})),f(P=>[...P,{fileName:L.fileName,fileHandleId:L.fileHandleId}])}else y(F=>Object.assign({},F,{[E.context]:L.fileHandleId})),E.context==="ducFileHandleId"&&C(F=>Object.assign({},F,{fileName:L.fileName,fileHandleId:L.fileHandleId})),E.context==="irbFileHandleId"&&u(F=>Object.assign({},F,{fileName:L.fileName,fileHandleId:L.fileHandleId}))}else!E.success&&E.error&&(console.log("RequestDataAccessStep2: Error uploading the file",E.error),R({key:"danger",message:V(E.error.reason)}))},ue=E=>{if(!_.map(F=>F.profile.ownerId).includes(E.ownerId)){A(K=>{var le,X;return[...K,{profile:{ownerId:E.ownerId,firstName:(le=E.firstName)!=null?le:"",lastName:(X=E.lastName)!=null?X:"",userName:E.userName},accessType:Te.GAIN_ACCESS}]});const F={userId:E.ownerId,type:Te.GAIN_ACCESS},P=(c==null?void 0:c.accessorChanges)||[];P.push(F),y(K=>Object.assign({},K,{accessorChanges:P}))}},ge=(E,L)=>{const F=E.target.value;switch(L){case"publications":y(P=>Object.assign({},P,{publication:F}));break;case"summaryOfUse":y(P=>Object.assign({},P,{summaryOfUse:F}));break}},$=(E,L)=>{const F=[..._],P=F.findIndex(X=>X.profile.ownerId===L);F[P].accessType=E,A(F);const K=(c==null?void 0:c.accessorChanges)||[],le=K.findIndex(X=>X.userId===L);K[le].type=E,y(X=>Object.assign({},X,{accessorChanges:K}))},te=()=>{let E="",L="";return n.isCertifiedUserRequired&&(E="https://help.synapse.org/docs/User-Types.2007072795.html#UserAccountTiers-CertifiedUsers",L="All data requesters must be a certified user."),n.isValidatedProfileRequired&&(E="https://help.synapse.org/docs/User-Types.2007072795.html#UserAccountTiers-ValidatedUsers",L="All data requesters must have a validated user profile."),E&&L?w(x,{children:[L,a("a",{href:E,target:"_blank",rel:"noreferrer",children:a(Z,{options:{icon:"info"}})})]}):a(x,{})};return a(x,{children:w(j,{className:"access-request-form2",onSubmit:E=>E.preventDefault(),children:[a(W.Header,{closeButton:!0,children:a(W.Title,{className:"AccessRequirementList__title",children:"Request Access"})}),w(W.Body,{children:[a("p",{children:"Please provide the information below to submit the request for access."}),w(j.Group,{children:[a(j.Label,{htmlFor:"requesters",style:{margin:"0"},children:"Data Requesters"}),a("br",{}),w("span",{className:"requester-label",children:[n.isDUCRequired&&w(x,{children:["This list should match those listed on your DUC.",a("br",{})]}),te()]}),a(Vi,{id:"requesters",typeFilter:ps.USERS_ONLY,onSelectCallback:ue,filterUserIds:_.map(E=>E.profile.ownerId)})]}),a(j.Group,{style:{marginBottom:"4rem"},children:_.map((E,L)=>w("div",{className:"list-items",children:[a(yr,{userProfile:E.profile,showAccountLevelIcon:!0,disableLink:!0,showFullName:!0}),s.ownerId!==E.profile.ownerId&&E.accessType===Te.GAIN_ACCESS&&a(ne,{className:"clear-x",variant:"link",onClick:()=>Y(E.profile.ownerId),children:a(Z,{options:{icon:"clear"}})}),g&&E.accessType!==Te.GAIN_ACCESS&&a(x,{children:a(Fi,{id:`accessor-renewal-${E.profile.ownerId}`,value:E.accessType,options:[{label:"Renew",value:Te.RENEW_ACCESS},{label:"Revoke",value:Te.REVOKE_ACCESS}],onChange:F=>$(F,E.profile.ownerId)})})]},`accessor-${L}`))}),(n==null?void 0:n.isDUCRequired)&&w(x,{children:[w(j.Group,{children:[a(j.Label,{htmlFor:"duc-temp",className:"SRC-noMargin",children:"DUC template"}),a("br",{}),d&&a("div",{children:a(Ne,{fileHandleAssociation:{associateObjectId:d==null?void 0:d.associateObjectId,associateObjectType:d.associateObjectType,fileHandleId:d.fileHandleId},fileName:d.fileName,id:"duc-temp",variant:"link",className:"SRC-noPadding"})})]}),w(j.Group,{children:[a(j.Label,{htmlFor:"duc",className:"SRC-noMargin",children:"Upload DUC"}),a("br",{}),h&&a("div",{children:a(Ne,{fileHandleAssociation:{associateObjectId:h.associateObjectId,associateObjectType:h.associateObjectType,fileHandleId:h.fileHandleId},fileName:h==null?void 0:h.fileName,id:"duc-download",variant:"link",className:"SRC-noPadding"})}),a(zn,{id:"duc-browse",variant:"light-primary-base",uploadCallback:ie,context:"ducFileHandleId"})]})]}),(n==null?void 0:n.isIRBApprovalRequired)&&w(j.Group,{children:[a(j.Label,{htmlFor:"irb",className:"SRC-noMargin",children:"Upload IRB approval"}),a("br",{}),m&&a("div",{children:a(Ne,{fileHandleAssociation:{associateObjectId:m.associateObjectId,associateObjectType:m.associateObjectType,fileHandleId:m.fileHandleId},fileName:m==null?void 0:m.fileName,id:"irb-download",variant:"link",className:"SRC-noPadding"})}),a(zn,{id:"irb-browse",variant:"light-primary-base",uploadCallback:ie,context:"irbFileHandleId"})]}),(n==null?void 0:n.areOtherAttachmentsRequired)&&w(j.Group,{children:[a(j.Label,{className:"SRC-noMargin",children:"Upload other required documents"}),a("br",{}),b.map((E,L)=>w("div",{className:"list-items",children:[a(Ne,{fileHandleAssociation:{associateObjectId:E.associateObjectId,associateObjectType:E.associateObjectType,fileHandleId:E.fileHandleId},fileName:E==null?void 0:E.fileName,variant:"link",className:"SRC-noPadding attachment-download"}),a(ne,{className:"clear-x",variant:"link",onClick:()=>ee(E.fileHandleId),children:a(Z,{options:{icon:"clear"}})})]},`file-attachment-${L}`)),a(zn,{id:"attachment-browse",variant:"light-primary-base",uploadCallback:ie,context:"attachments"})]}),g&&w(x,{children:[w(j.Group,{children:[a(j.Label,{htmlFor:"publications",className:"SRC-noMargin",children:"Publication(s)"}),a(j.Control,{id:"publications",as:"textarea",rows:3,onChange:E=>ge(E,"publications")})]}),w(j.Group,{children:[a(j.Label,{htmlFor:"summaryOfUse",className:"SRC-noMargin",children:"Summary of use"}),a(j.Control,{id:"summaryOfUse",as:"textarea",rows:3,onChange:E=>ge(E,"summaryOfUse")})]})]}),S&&a(It,{variant:S.key,children:S.message})]}),a(W.Footer,{children:w(x,{children:[a(ne,{variant:"link",onClick:()=>t==null?void 0:t({step:3,formSubmitRequestObject:c}),children:"Cancel"}),a(ne,{variant:"primary",onClick:()=>D(),children:"Submit"})]})})]})})};try{nn.displayName="RequestDataAccessStep2",nn.__docgenInfo={description:"",displayName:"RequestDataAccessStep2",props:{managedACTAccessRequirement:{defaultValue:null,description:"",name:"managedACTAccessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!0,type:{name:"(props: requestDataStepCallbackProps) => void"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile"}},researchProjectId:{defaultValue:null,description:"",name:"researchProjectId",required:!0,type:{name:"string"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep2.tsx#RequestDataAccessStep2"]={docgenInfo:nn.__docgenInfo,name:"RequestDataAccessStep2",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep2.tsx#RequestDataAccessStep2"})}catch{}const an=e=>{const{onHide:t}=e;return w(x,{children:[a(W.Header,{closeButton:!0,children:a(W.Title,{className:"AccessRequirementList__title",children:"Your Data Access Request Has Been Submitted!"})}),a(W.Body,{children:a("p",{style:{margin:"2rem 0"},children:"Your data access request been submitted and is currently being reviewed. Please allow for up to 2 weeks for your request to be reviewed and approved."})}),a(W.Footer,{children:a(ne,{variant:"primary",onClick:()=>t==null?void 0:t(),children:"Finish"})})]})};try{an.displayName="RequestDataAccessSuccess",an.__docgenInfo={description:"",displayName:"RequestDataAccessSuccess",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessSuccess.tsx#RequestDataAccessSuccess"]={docgenInfo:an.__docgenInfo,name:"RequestDataAccessSuccess",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessSuccess.tsx#RequestDataAccessSuccess"})}catch{}function Ql({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:s}){const{accessToken:i}=z(),[o,d]=v.exports.useState(void 0),[p,h]=v.exports.useState(void 0),[C,m]=v.exports.useState(!1);return v.exports.useEffect(()=>{(async()=>{try{m(!0);const b=await Mn(i,e.id);d(b);const f=ms|hs;if(t!=null&&t.ownerId){const c=await gs(t.ownerId,f,i);h(c)}}catch(b){console.error("Error on get Self Sign Access Requirement: ",b)}finally{m(!1)}})()},[e,i,t]),w(x,{children:[e.isCertifiedUserRequired&&w("div",{className:"requirement-container",children:[a(xe,{isCompleted:p==null?void 0:p.isCertified}),w("div",{children:[w("p",{className:"self-sign-access-title bold-text",children:["You must first become a",a("a",{className:"self-sign-access-certified bold-text",href:`${he.PORTAL}#!Quiz:`,children:"\xA0certified user"})]}),C&&a("span",{className:"spinner"}),a("p",{className:`self-sign-access-certified-success-text ${p!=null&&p.isCertified?"show":"hidden"}`,children:"You are a certified user"})]})]}),e.isValidatedProfileRequired&&w("div",{className:"requirement-container",children:[a(xe,{isCompleted:p==null?void 0:p.isVerified}),w("div",{children:[w("p",{className:"self-sign-access-title bold-text",children:["You must first apply to have your",a("a",{className:"self-sign-access-validated bold-text",href:`${he.PORTAL}#!Profile:v/settings`,children:"\xA0user profile validated"})]}),C&&a("span",{className:"spinner"}),a("p",{className:`self-sign-access-verified-success-text ${p!=null&&p.isVerified?"show":"hidden"}`,children:"You have applied to have user profile valiadation successfully"})]})]}),a($e,{user:t,wikiPage:o,accessRequirement:e,accessRequirementStatus:r,onHide:n,entityId:s})]})}try{SelfSignAccessRequirement.displayName="SelfSignAccessRequirement",SelfSignAccessRequirement.__docgenInfo={description:"",displayName:"SelfSignAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"SelfSignAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/SelfSignAccessRequirement.tsx#SelfSignAccessRequirement"]={docgenInfo:SelfSignAccessRequirement.__docgenInfo,name:"SelfSignAccessRequirement",path:"src/lib/containers/access_requirement_list/SelfSignAccessRequirement.tsx#SelfSignAccessRequirement"})}catch{}function Yl({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:s}){const{accessToken:i}=z(),[o,d]=v.exports.useState(void 0),[p,h]=v.exports.useState(!1);return v.exports.useEffect(()=>{(async()=>{h(!0);try{const m=await Mn(i,e.id);d(m)}catch(m){console.error("Error on prepare terms of use ",m)}finally{h(!1)}})()},[i,e]),w(x,{children:[p&&a("span",{className:"spinner"}),a($e,{user:t,wikiPage:o,accessRequirement:e,accessRequirementStatus:r,onHide:n,entityId:s})]})}try{TermsOfUseAccessRequirement.displayName="TermsOfUseAccessRequirement",TermsOfUseAccessRequirement.__docgenInfo={description:"",displayName:"TermsOfUseAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"TermsOfUseAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/TermsOfUseAccessRequirement.tsx#TermsOfUseAccessRequirement"]={docgenInfo:TermsOfUseAccessRequirement.__docgenInfo,name:"TermsOfUseAccessRequirement",path:"src/lib/containers/access_requirement_list/TermsOfUseAccessRequirement.tsx#TermsOfUseAccessRequirement"})}catch{}var de=(e=>(e.SelfSignAccessRequirement="org.sagebionetworks.repo.model.SelfSignAccessRequirement",e.TermsOfUseAccessRequirement="org.sagebionetworks.repo.model.TermsOfUseAccessRequirement",e.ManagedACTAccessRequirement="org.sagebionetworks.repo.model.ManagedACTAccessRequirement",e.ACTAccessRequirement="org.sagebionetworks.repo.model.ACTAccessRequirement",e))(de||{});const rn=e=>e.filter($l).length>0,$l=e=>{switch(e.concreteType){case"org.sagebionetworks.repo.model.ACTAccessRequirement":case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":return!1;default:return!0}},Ya=async(e,t)=>{const n=t.map(o=>bs(e,o.id)),r=await Promise.all(n),s=t.map(o=>({accessRequirement:o,accessRequirementStatus:r.find(d=>Number(d.accessRequirementId)===o.id)}));return Pi(s,o=>-1*Number(o.accessRequirementStatus.isApproved))};function sn({entityId:e,onHide:t,accessRequirementFromProps:n,renderAsModal:r,numberOfFilesAffected:s}){var O;const{accessToken:i}=z(),[o,d]=v.exports.useState(void 0),[p,h]=v.exports.useState(),[C,m]=v.exports.useState(),[u,b]=v.exports.useState(""),[f,c]=v.exports.useState(),y={ids:[e],type:"ENTITY_HEADER"},R=Ul(i)||!o,g=lr(y),{data:l}=ys();v.exports.useEffect(()=>{let k=!1;return(async()=>{try{if(!R)return;if(n){const D=await Ya(i,n);k||d(D)}else{const D=await nr(i,e),V=await Ya(i,D);k||d(V)}}catch(D){console.error("Error on get access requirements: ",D)}})(),()=>{k=!0}},[i,e,n,R]);const _=Boolean(i),A=(k,N)=>{switch(k.concreteType){case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":return a(Ql,{accessRequirement:k,accessRequirementStatus:N,user:l,onHide:t,entityId:e});case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":return a(Yl,{accessRequirement:k,accessRequirementStatus:N,user:l,onHide:t,entityId:e});case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":return a(Wl,{accessRequirement:k,accessRequirementStatus:N,user:l,onHide:t,entityId:e,requestDataStepCallback:T});case"org.sagebionetworks.repo.model.ACTAccessRequirement":return a(Hl,{accessRequirement:k,accessRequirementStatus:N,user:l,onHide:t,entityId:e});default:return}},T=k=>{const{managedACTAccessRequirement:N,step:D,researchProjectId:V,formSubmitRequestObject:B}=k;N&&m(N),V&&b(V),B&&c(B),h(D)},q=w(x,{children:[a(W.Header,{closeButton:!0,children:a(W.Title,{className:"AccessRequirementList__title",children:"Data Access Request"})}),a(W.Body,{children:w("div",{children:[a("h4",{className:"AccessRequirementList__instruction AccessRequirementList__access",children:"Access For:"}),a("span",{className:"AccessRequirementList__file-icon-container",children:a(Z,{options:{icon:"file",size:"30px"}})}),"\xA0",s&&w("span",{children:[s," File(s)"]}),!s&&a("a",{className:"AccessRequirementList__register-text-link",href:`${he.PORTAL}#!Synapse:${e}`,children:(O=g[0])==null?void 0:O.name}),a("h4",{className:"AccessRequirementList__instruction",style:{marginTop:"3rem"},children:"What do I need to do?"}),w("div",{className:"requirement-container",children:[a(xe,{isCompleted:_}),w("div",{children:[!_&&w(x,{children:[w("p",{className:"AccessRequirementList__signin",children:[a("a",{className:`${oa} SRC-boldText `,children:"Sign in\xA0"}),"with a Sage Platform (Synapse) user account."]}),w("p",{children:["If you do not have a Sage Account, you can",a("a",{className:"register-text-link bold-text",href:`${he.PORTAL}#!RegisterAccount:0`,children:"\xA0Register for free."})]})]}),_&&w("p",{children:["You have signed in with the Sage Platform (Synapse) user account ",w("b",{children:[l==null?void 0:l.userName,"@synapse.org"]})]})]})]}),o==null?void 0:o.map(({accessRequirement:k,accessRequirementStatus:N})=>a(se.Fragment,{children:A(k,N)},k.id))]})})]});let I=q;if(r){switch(p){case 1:I=a(tn,{managedACTAccessRequirement:C,requestDataStepCallback:T,onHide:()=>t==null?void 0:t()});break;case 2:I=a(nn,{user:l,researchProjectId:u,managedACTAccessRequirement:C,entityId:e,requestDataStepCallback:T,onHide:()=>t==null?void 0:t()});break;case 3:I=a(Zt,{formSubmitRequestObject:f,onHide:()=>t==null?void 0:t()});break;case 4:I=w(x,{children:[a(W.Header,{closeButton:!1,children:a(W.Title,{className:"AccessRequirementList__title",children:"Please Log In"})}),a(W.Body,{className:"AccessRequirementList login-modal ",children:a(Ss,{sessionCallback:()=>{window.location.reload()}})})]});break;case 5:I=a(an,{onHide:()=>t==null?void 0:t()});break;default:I=q}return a(W,{className:p?"bootstrap-4-backport AccessRequirementList modal-auto-height":"bootstrap-4-backport AccessRequirementList",onHide:()=>t==null?void 0:t(),show:!0,animation:!1,centered:!0,scrollable:!0,size:"lg",children:I})}return a("div",{className:"AccessRequirementList",children:I})}try{sn.displayName="AccessRequirementList",sn.__docgenInfo={description:"",displayName:"AccessRequirementList",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirementFromProps:{defaultValue:null,description:"",name:"accessRequirementFromProps",required:!1,type:{name:"AccessRequirement[]"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},renderAsModal:{defaultValue:null,description:"",name:"renderAsModal",required:!1,type:{name:"boolean"}},numberOfFilesAffected:{defaultValue:null,description:"",name:"numberOfFilesAffected",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AccessRequirementList.tsx#AccessRequirementList"]={docgenInfo:sn.__docgenInfo,name:"AccessRequirementList",path:"src/lib/containers/access_requirement_list/AccessRequirementList.tsx#AccessRequirementList"})}catch{}try{rn.displayName="checkHasUnsportedRequirement",rn.__docgenInfo={description:"",displayName:"checkHasUnsportedRequirement",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AccessRequirementList.tsx#checkHasUnsportedRequirement"]={docgenInfo:rn.__docgenInfo,name:"checkHasUnsportedRequirement",path:"src/lib/containers/access_requirement_list/AccessRequirementList.tsx#checkHasUnsportedRequirement"})}catch{}const zl={AccessBlockedToAnonymous:{icon:"accessClosed",color:e=>e.colors.warning,tooltipText:"You must sign in to access this file."},AccessBlockedByRestriction:{icon:"accessClosed",color:e=>e.colors.warning,tooltipText:"You must request access to this restricted file."},AccessBlockedByACL:{icon:"accessClosed",color:e=>e.colors.warning,tooltipText:"You do not have download access for this item."},Accessible:{icon:"accessOpen",color:e=>e.colors.success,tooltipText:""},NoFileHandle:{icon:"accessOpen",color:e=>e.colors.success,tooltipText:""}};function $a(e){const{downloadType:t}=e;if(t){const n=zl[t];return a(Cs.Consumer,{children:r=>a(Z,{options:{icon:n.icon,color:n.color(r),label:n.tooltipText}})})}return a(x,{})}function on(e,t){const[n,r]=se.useState(),{accessToken:s}=z(),{data:i,error:o}=no(e,{includeEntity:!0,includePermissions:!0},parseInt(t!=null?t:"")),d=se.useMemo(()=>({restrictableObjectType:Wn.ENTITY,objectId:e}),[e]),{data:p}=vr(d),h=i==null?void 0:i.entity,C=i==null?void 0:i.permissions;return se.useEffect(()=>{p&&p.hasUnmetAccessRequirement?r("AccessBlockedByRestriction"):h&&(C==null?void 0:C.canDownload)?Ps(h)&&h.dataFileHandleId?r("Accessible"):r("NoFileHandle"):C&&!C.canDownload&&r(s?"AccessBlockedByACL":"AccessBlockedToAnonymous")},[s,h,o,C,p]),n}function ln(e){const[t,n]=se.useState(!1),[r,s]=se.useState([]),{entityId:i,entityVersionNumber:o}=e,d=on(i,o),{accessToken:p}=z(),h=se.useMemo(()=>({restrictableObjectType:Wn.ENTITY,objectId:i}),[i]),{data:C}=vr(h),m=()=>{nr(p,i).then(f=>{rn(f)?window.open(`${Bs(Us.PORTAL_ENDPOINT)}#!AccessRequirements:ID=${i}&TYPE=ENTITY`,"_blank"):(s(f),n(!0))})},u=v.exports.useMemo(()=>{if(!C)return a(x,{});const f=C==null?void 0:C.hasUnmetAccessRequirement,c=C==null?void 0:C.restrictionLevel;let y="";if(f)y="Request Access";else{if(Er.OPEN===c)return a(x,{});y="View Terms"}return w(x,{children:[a("a",{style:{fontSize:"14px",cursor:"pointer",marginLeft:"5px",verticalAlign:"middle"},className:e.className,onClick:m,children:y}),t&&a(sn,{entityId:i,accessRequirementFromProps:r,renderAsModal:!0,onHide:()=>{n(!1)}})]})},[i,C,r,t]);return d===void 0?a(x,{}):w("span",{style:{whiteSpace:"nowrap"},children:[d==="AccessBlockedToAnonymous"?a("button",{type:"button",className:oa,onClick:f=>{if(f.isTrusted){const c=new MouseEvent("click",{bubbles:!0});f.currentTarget.dispatchEvent(c)}},children:a($a,{downloadType:d})}):a($a,{downloadType:d}),u]})}try{on.displayName="useGetFileHandleDownloadType",on.__docgenInfo={description:`Determines whether an Entity is accessible for download, or if it is blocked by the ACL or unmet Access Requirements.

To make download available, and determine if the file is downloadable via the web, see {@link DirectDownload.tsx }`,displayName:"useGetFileHandleDownloadType",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HasAccessV2.tsx#useGetFileHandleDownloadType"]={docgenInfo:on.__docgenInfo,name:"useGetFileHandleDownloadType",path:"src/lib/containers/HasAccessV2.tsx#useGetFileHandleDownloadType"})}catch{}try{ln.displayName="HasAccessV2",ln.__docgenInfo={description:`HasAccess shows if the user has access to the file or not.

The component's behavior changes whether it's passed in a FileHandle or not.
If passed a file handle then it will give more detailed information about the download.`,displayName:"HasAccessV2",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HasAccessV2.tsx#HasAccessV2"]={docgenInfo:ln.__docgenInfo,name:"HasAccessV2",path:"src/lib/containers/HasAccessV2.tsx#HasAccessV2"})}catch{}const cn=e=>{const{accessToken:t}=z(),{entityIdList:n}=e,[r,s]=v.exports.useState([a(x,{})]),{ref:i,inView:o}=et();let d=!0;v.exports.useEffect(()=>(o&&p(),()=>{d=!1}),[n,o]);const p=()=>{!n.length||ws(n,t).then(h=>{if(d){const C=h.results.map(m=>a("p",{children:a(ea,{entity:m,displayTextField:"name"})},m.id));s(C)}}).catch(h=>{console.log("EntityIdList: Error getting entity headers",h)})};return a("span",{ref:i,children:r})};try{cn.displayName="EntityIdList",cn.__docgenInfo={description:"",displayName:"EntityIdList",props:{entityIdList:{defaultValue:null,description:"",name:"entityIdList",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/EntityIdList.tsx#EntityIdList"]={docgenInfo:cn.__docgenInfo,name:"EntityIdList",path:"src/lib/containers/EntityIdList.tsx#EntityIdList"})}catch{}const dn=e=>{const{accessToken:t}=z(),{evaluationId:n}=e,[r,s]=v.exports.useState(),{ref:i,inView:o}=et();let d=!0;v.exports.useEffect(()=>(d&&o&&p(),()=>{d=!1}),[n,o]);const p=()=>{!n||_s(n,t).then(h=>{s(h.name)}).catch(h=>{console.log("EvaluationIdListRenderer: Error getting evaluation queue names",h)})};return a("span",{ref:i,children:r})};try{dn.displayName="EvaluationIdRenderer",dn.__docgenInfo={description:"",displayName:"EvaluationIdRenderer",props:{evaluationId:{defaultValue:null,description:"",name:"evaluationId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/EvaluationIdRenderer.tsx#EvaluationIdRenderer"]={docgenInfo:dn.__docgenInfo,name:"EvaluationIdRenderer",path:"src/lib/containers/EvaluationIdRenderer.tsx#EvaluationIdRenderer"})}catch{}const un=e=>{const{accessToken:t}=z(),{userIds:n}=e,[r,s]=v.exports.useState(),{ref:i,inView:o}=et();let d=!0;v.exports.useEffect(()=>(d&&o&&p(),()=>{d=!1}),[n,o]);const p=()=>{!n.length||Ts(n,t).then(h=>{const C=h.list.map(m=>a(yr,{userProfile:m,className:"SRC-marginFifteen"},m.ownerId));s(C)}).catch(h=>{console.log("UserIdList: Error getting user profiles",h)})};return a("span",{ref:i,children:r})};try{un.displayName="UserIdList",un.__docgenInfo={description:"",displayName:"UserIdList",props:{userIds:{defaultValue:null,description:"",name:"userIds",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/UserIdList.tsx#UserIdList"]={docgenInfo:un.__docgenInfo,name:"UserIdList",path:"src/lib/containers/UserIdList.tsx#UserIdList"})}catch{}const pn=({columnType:e,columnValue:t,isBold:n,mapEntityIdToHeader:r,mapUserIdToHeader:s,columnLinkConfig:i,rowIndex:o,columnName:d,selectColumns:p,columnModels:h,rowData:C,rowId:m,rowVersionNumber:u})=>{const{entity:b}=Ae(),f=(c,y=20)=>!c||c.length<=y;if(!t)return w("p",{className:"SRC-center-text SRC-inactive",children:[" ",mi]});if(i)return a(St,{value:t,columnName:d,selectColumns:p,columnModels:h,isHeader:!1,labelLink:i,rowData:C});if(b&&(We(b)||ze(b)||cr(b))&&(d==="id"||d==="name")&&m&&u){const c=`syn${m.toString()}`;if(Object.prototype.hasOwnProperty.call(r,c))return a("p",{children:a(ea,{entity:r[c],versionNumber:u,className:`${n}`,showIcon:!1,displayTextField:d})})}switch(e){case M.ENTITYID:if(Object.prototype.hasOwnProperty.call(r,t))return a("p",{children:a(ea,{entity:r[t],className:`${n}`,displayTextField:"name"})});break;case M.DATE_LIST:{const c=JSON.parse(t);return w("p",{children:[c.map((y,S)=>w("span",{className:n,children:[new Date(y).toLocaleString(),S!==c.length-1?", ":""]},S))," "]})}case M.BOOLEAN_LIST:{const c=JSON.parse(t);return a("p",{children:c.map((y,S)=>w("span",{className:n,children:[y?"true":"false",S!==c.length-1?", ":""]},S))})}case M.FILEHANDLEID:return a(x,{children:b&&a(ht,{associatedObjectId:b.id,associatedObjectType:fe.TableEntity,fileHandleId:t,displayFileName:!0})});case M.ENTITYID_LIST:{const c=JSON.parse(t);return a(cn,{entityIdList:c})}case M.USERID_LIST:{const c=JSON.parse(t);return a(un,{userIds:c})}case M.STRING_LIST:case M.INTEGER_LIST:{const c=JSON.parse(t);return a("p",{children:c.map((y,S)=>w("span",{className:n,children:[y,S!==c.length-1?", ":""]},y))})}case M.EVALUATIONID:return a(dn,{evaluationId:t});case M.DATE:return a("p",{className:n,children:new Date(Number(t)).toLocaleString()});case M.USERID:if(Object.prototype.hasOwnProperty.call(s,t)){const{ownerId:c,userName:y}=s[t];if(s[t].isIndividual===!1){const S=y===Ia?"public":"people";return y===Ia?w("span",{children:[a(Z,{options:{icon:S}})," All registered Synapse users"]}):w("a",{target:"_blank",rel:"noopener noreferrer",href:`${he.PORTAL}#!Team:${c}`,children:[a(Z,{options:{icon:S}})," ",y]})}else return a(Pe,{userProfile:s[t],preSignedURL:s[t].clientPreSignedURL,size:"SMALL USER CARD"})}break;case M.LINK:return a("a",{target:"_blank",rel:"noopener noreferrer",href:t,children:t});case M.STRING:case M.DOUBLE:case M.INTEGER:case M.BOOLEAN:case M.LARGETEXT:return f(t)?w("p",{className:n,children:[" ",t]}):a("div",{className:n,children:a(Bn,{tooltipText:t,callbackFn:Bi,idForToolTip:`${d}_${o}`,children:w("p",{className:n,children:[" ",t]})})});default:return console.warn(`ColumnType ${e} has unspecified handler. Rendering the column value.`),a("p",{className:n,children:t})}return a("p",{className:n,children:t})};try{pn.displayName="SynapseTableCell",pn.__docgenInfo={description:"",displayName:"SynapseTableCell",props:{columnType:{defaultValue:null,description:"",name:"columnType",required:!0,type:{name:"enum",value:[{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'}]}},columnValue:{defaultValue:null,description:"",name:"columnValue",required:!0,type:{name:"string"}},isBold:{defaultValue:null,description:"",name:"isBold",required:!0,type:{name:"string"}},columnLinkConfig:{defaultValue:null,description:"",name:"columnLinkConfig",required:!1,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink"}},mapEntityIdToHeader:{defaultValue:null,description:"",name:"mapEntityIdToHeader",required:!0,type:{name:"Record<string, EntityHeader>"}},mapUserIdToHeader:{defaultValue:null,description:"",name:"mapUserIdToHeader",required:!0,type:{name:"Partial<UserGroupHeader & UserProfile>"}},rowIndex:{defaultValue:null,description:"",name:"rowIndex",required:!1,type:{name:"number"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}},rowVersionNumber:{defaultValue:null,description:"",name:"rowVersionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_table_functions/SynapseTableCell.tsx#SynapseTableCell"]={docgenInfo:pn.__docgenInfo,name:"SynapseTableCell",path:"src/lib/containers/synapse_table_functions/SynapseTableCell.tsx#SynapseTableCell"})}catch{}function $r(){return w("div",{className:"text-center",children:[Hi,a("h4",{children:"No Matching Results"}),a("p",{children:"Try checking the spelling or removing filters."})]})}const zr=window.SQLParser.lexer,za=(e,...t)=>{var r;const n=[];return(r=e==null?void 0:e.selectColumns)==null||r.forEach((s,i)=>{t.includes(s.columnType)&&n.push(i)}),n},Ka=(e,t,n)=>{var s;const r=new Set;return(s=e.queryResult)==null||s.queryResults.rows.forEach(i=>{i.values.forEach((o,d)=>{n.includes(d)&&!Object.prototype.hasOwnProperty.call(t,o)&&o&&r.add(o)})}),r};function Kl(e){const t=[];if(ks(e)){const n=zr.tokenize(e),r=n.findIndex(o=>o[0]==="SELECT"),s=n.findIndex(o=>o[0]==="FROM");let i=0;for(let o=r+1;o<s-r-1;o+=1){const d=n[o];d[0]==="FUNCTION"&&d[1].toLowerCase()==="count"?t.push(i):d[0]==="SEPARATOR"&&(i+=1)}}return t}function Gl(e,t,n){let r=zr.tokenize(t);const s=r.findIndex(m=>m[0]==="SELECT"),i=r.findIndex(m=>m[0]==="FROM"),o=[];let d=0,p=!1;for(let m=s+1;m<i-s-1;m+=1){const u=r[m];u[0]==="FUNCTION"||u[1].toLocaleLowerCase()==="concat"?p=!0:u[0]==="LITERAL"&&!p?o.push({index:d,name:u[1]}):u[0]==="SEPARATOR"&&(d+=1,p=!1)}if(r=r.slice(0,r.findIndex(m=>m[0]==="GROUP")),r.splice(s+1,i-s-1,["STAR","*","1"]),n===void 0)return{synId:"",newSql:""};r.findIndex(m=>m[0]==="WHERE")===-1?r.push(["WHERE","WHERE","1"]):r.push(["CONDITIONAL","AND","1"]),o.forEach((m,u)=>{const b=e.values[m.index];b?r.push(["LITERAL",m.name,"1"],["OPERATOR","=","1"],["STRING",b,"1"],["CONDITIONAL","AND","1"]):r.push(["LITERAL",m.name,"1"],["OPERATOR","IS","1"],["BOOLEAN","null","1"],["CONDITIONAL","AND","1"])}),r.pop();const C=r[r.findIndex(m=>m[0]==="FROM")+1][1];return r.push(["EOF","","1"]),{synId:C,newSql:Ls(r)}}const jl=()=>{const{data:e,goToPage:t,pageSize:n,setPageSize:r,currentPage:s}=Xs(),i=e==null?void 0:e.queryCount,o=(p,h)=>{t(h)},d=p=>{const h=p.target.value;r(h)};return s==1&&i&&i<10?a(x,{}):w("div",{children:[a(rl,{page:s,count:Math.ceil(i/n),color:"secondary",onChange:o,style:{display:"inline-block",float:"left"}}),a(Ze,{variant:"body1",style:{display:"inline-block"},children:`${i==null?void 0:i.toLocaleString()} total rows /`}),w("select",{name:"page size",onChange:d,style:{padding:"4px",marginLeft:"4px"},value:n,children:[a("option",{value:10,children:"10 per page"}),a("option",{value:25,children:"25 per page"}),a("option",{value:100,children:"100 per page"}),a("option",{value:500,children:"500 per page"})]})]})};function Kr(){return w(x,{children:[a("p",{className:"SRC-no-results-title",children:"There is currently no content here."}),a("p",{className:"SRC-no-results-description",children:"Information is always being updated, so check back later to see if content has been added."})]})}const fn=e=>{const{onCopy:t}=e;return a(ke,{title:"Copy IDs to the clipboard",enterNextDelay:Nn,placement:"right",children:a("span",{children:a("button",{"data-testid":"copySynIdsButton",onClick:t,children:a("span",{style:{height:15,marginTop:-1},children:a(Z,{options:{icon:"contentCopy"}})})})})})};try{fn.displayName="InteractiveCopyIdsIcon",fn.__docgenInfo={description:"",displayName:"InteractiveCopyIdsIcon",props:{onCopy:{defaultValue:null,description:"",name:"onCopy",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/InteractiveCopyIdsIcon.tsx#InteractiveCopyIdsIcon"]={docgenInfo:fn.__docgenInfo,name:"InteractiveCopyIdsIcon",path:"src/lib/containers/InteractiveCopyIdsIcon.tsx#InteractiveCopyIdsIcon"})}catch{}const Xl=()=>{const e=z(),t=Ae(),[n,r]=v.exports.useState(!1),[s,i]=v.exports.useState(),[o,d]=v.exports.useState();v.exports.useEffect(()=>(o||d(new AbortController),()=>{o&&o.abort()}),[o]);const p=()=>{r(!0);const{getLastQueryRequest:h}=t,C=h(),{sql:m}=C.query,{entityId:u,versionNumber:b}=Ns(m),f=b?`.${b}`:"";C.partMask=vt,C.query={sql:`select id from ${u}${f}`},Za(C,e.accessToken,o==null?void 0:o.signal).then(c=>{i(c)}).catch(c=>{console.error(c),Ke("Unable to query for all Synapse IDs to copy","danger")}).finally(()=>{r(!1)})};return v.exports.useEffect(()=>{if(s){const{rows:h}=s.queryResult.queryResults,C=h.map(m=>`${m.values[0]}`).join(`
`);navigator.clipboard.writeText(C).then(()=>{Ke("Successfully copied to clipboard"),i(void 0)})}},[s]),n?a(Mi,{size:25}):a(fn,{onCopy:()=>{p()}})},Jl={id:"",name:"",type:"org.sagebionetworks.repo.model.FileEntity",versionNumber:-1,versionLabel:"",benefactorId:-1,createdBy:"",createdOn:"",modifiedBy:"",modifiedOn:"",isLatestVersion:!0},Zl=["","DESC","ASC"],Ga={resizeMode:"overflow",partialRefresh:"true",liveDrag:!0,headerOnly:"true"};class gt extends v.exports.Component{constructor(t){super(t),this.tableElement=void 0,this.showGroupRowData=n=>{const r=this.props.queryContext.getLastQueryRequest().query,s=Gl(n,r.sql,this.props.queryContext.data);r.sql=s.newSql;const i=JSON.stringify(r),o=btoa(i);return`${he.PORTAL}#!Synapse:${s.synId}/tables/query/${o}`},this.renderTable=(n,r,s,i)=>{var S,R;const o=(R=(S=this.props.queryContext).getLastQueryRequest)==null?void 0:R.call(S),{queryContext:{entity:d},showAccessColumn:p,showDownloadColumn:h,isRowSelectionVisible:C}=this.props,m=d&&(We(d)&&Ms(d)||ze(d)),u=p&&d&&this.isEntityViewOrDataset()&&this.allRowsHaveId(),b=!!this.props.synapseContext.accessToken,f=d&&m&&b&&this.allRowsHaveId(),c=!!(f&&!this.props.hideDownload),y=f&&h;return w("div",{className:"SynapseTable SRC-overflowAuto","data-testid":"SynapseTable",children:[w("table",{ref:g=>this.tableElement=g,className:"table table-striped table-condensed",children:[a("thead",{className:"SRC_bordered",children:a("tr",{children:this.createTableHeader(n,r,s,u,y,c,C,o)})}),a("tbody",{children:this.createTableRows(i,n,u,y,c,C)})]}),a("div",{className:"bootstrap-4-backport",style:{textAlign:"right"},children:a(jl,{})})]})},this.handleColumnSortPress=n=>r=>{let s=Qe(this.state.columnIconSortState);s.length===0&&(s=Array(this.getLengthOfPropsData()).fill(0));const i=Qe(this.state.sortedColumnSelection),o=this.findSelectionIndex(i,n.name);o!==-1&&i.splice(o,1),s[n.index]=(s[n.index]+1)%qa.length,s[n.index]>0&&i.unshift({column:n.name,direction:Zl[s[n.index]]});const d=this.props.queryContext.getLastQueryRequest();d.query.sort=i,d.query.offset=0,this.props.queryContext.executeQueryRequest(d),this.setState({columnIconSortState:s,sortedColumnSelection:i})},this.applyChangesFromQueryFilter=n=>{const r=this.props.queryContext.getLastQueryRequest();r.query.selectedFacets=n,r.query.offset=0,this.props.queryContext.executeQueryRequest(r)},this.componentDidMount=this.componentDidMount.bind(this),this.componentWillUnmount=this.componentWillUnmount.bind(this),this.componentDidUpdate=this.componentDidUpdate.bind(this),this.shouldComponentUpdate=this.shouldComponentUpdate.bind(this),this.handleColumnSortPress=this.handleColumnSortPress.bind(this),this.findSelectionIndex=this.findSelectionIndex.bind(this),this.advancedSearch=this.advancedSearch.bind(this),this.getLengthOfPropsData=this.getLengthOfPropsData.bind(this),this.configureFacetDropdown=this.configureFacetDropdown.bind(this),this.enableResize=this.enableResize.bind(this),this.disableResize=this.disableResize.bind(this),this.isEntityViewOrDataset=this.isEntityViewOrDataset.bind(this),this.allRowsHaveId=this.allRowsHaveId.bind(this),this.state={columnIconSortState:[],isExportTableDownloadOpen:!1,isExpanded:!1,isColumnSelectionOpen:!1,sortedColumnSelection:[],mapEntityIdToHeader:{},mapUserIdToHeader:{},isFetchingEntityHeaders:!1},this.getEntityHeadersInData=this.getEntityHeadersInData.bind(this)}componentWillUnmount(){this.disableResize()}componentDidMount(){this.getEntityHeadersInData(!0),this.enableResize()}shouldComponentUpdate(t,n){const{isFetchingEntityHeaders:r,...s}=this.state,{isFetchingEntityHeaders:i,...o}=n,d=!xt(this.props,t),p=!xt(s,o),h=d||p;return h&&this.disableResize(),h}componentDidUpdate(t,n){xt(t.queryContext.data,this.props.queryContext.data)?t.queryContext.entity&&this.props.queryContext.entity&&!xt(We(t.queryContext.entity),We(this.props.queryContext.entity))&&this.getEntityHeadersInData(!0):this.getEntityHeadersInData(!1),this.enableResize()}enableResize(){this.resizer?setTimeout(()=>{this.resizer.reset(Ga)},1e3):this.tableElement&&this.getLengthOfPropsData()>1&&(this.resizer=new Ml(this.tableElement,Ga))}disableResize(){this.resizer&&this.resizer.reset({disable:!0})}async getEntityHeadersInData(t){var m,u,b;const{data:n,entity:r}=this.props.queryContext;if(!n||!r)return;if(this.state.isFetchingEntityHeaders&&!t)return;const s=Qe(this.state.mapEntityIdToHeader),i=Qe(this.state.mapUserIdToHeader),o=za(n,M.ENTITYID),d=za(n,M.USERID),p=Ka(n,s,o);(this.isEntityViewOrDataset()||r&&cr(r))&&this.allRowsHaveId()&&((b=(u=(m=n.queryResult)==null?void 0:m.queryResults)==null?void 0:u.rows)!=null?b:[]).forEach(c=>{const y=`syn${c.rowId}`;p.add(y)});const h=Ka(n,i,d);if(p.size===0&&h.size===0)return;if(this.setState({isFetchingEntityHeaders:!0}),p.size>0){const f=Array.from(p).map(c=>({targetId:c}));try{f.forEach(S=>{s[S.targetId]=Jl});const c=await vs(f,this.props.synapseContext.accessToken),{results:y}=c;y.forEach(S=>{s[S.id]=S})}catch(c){console.error("Error on retrieving entity header list , ",c)}}const C=[];if(h.size>0){const f=Array.from(h);try{(await As(f,this.props.synapseContext.accessToken)).children.forEach(y=>{y.isIndividual?C.push(y.ownerId):i[y.ownerId]=y})}catch(c){console.error("Error on getGroupHeaders batch: ",c)}}if(C.length>0)try{(await ui(C)).list.forEach(c=>{i[c.ownerId]=c})}catch(f){console.error("Error on getUserProfile : ",f)}this.setState({mapEntityIdToHeader:s,mapUserIdToHeader:i,isFetchingEntityHeaders:!1})}render(){var c,y;if(!this.props.queryContext.data&&this.props.queryContext.isLoadingNewBundle)return Ar;if(!this.props.queryContext.data)return a(x,{});const{queryContext:{data:t},showNoContentAvailableWhenEmpty:n}=this.props,{queryResult:r,columnModels:s=[]}=t,{facets:i=[]}=t,{isExpanded:o,isExportTableDownloadOpen:d}=this.state,p=this.props.queryContext.getLastQueryRequest();let h="";if(!(((y=(c=t.queryResult)==null?void 0:c.queryResults.rows.length)!=null?y:0)>0)&&p.query.offset===0)return p.query.additionalFilters?a($r,{}):n?a(Kr,{}):w("div",{className:"text-center SRCBorderedPanel SRCBorderedPanel--padded2x",children:[Ni,a("div",{style:{marginTop:"20px",fontStyle:"italic"},children:"This table is currently empty"})]});const{rows:m,headers:u}=r.queryResults,b=a("div",{children:this.renderTable(u,s,i,m)}),f=a(x,{children:w("div",{className:h,children:[d&&a(Ve,{onClose:()=>{this.setState({isExportTableDownloadOpen:!1})},queryBundleRequest:p}),a("div",{children:b})]})});return w(v.exports.Fragment,{children:[o&&w(W,{animation:!1,show:!0,onHide:()=>this.setState({isExpanded:!1}),dialogClassName:"modal-90w",backdrop:"static",children:[a(W.Header,{onHide:()=>this.setState({isExpanded:!1}),closeButton:!0}),a(W.Body,{children:f})]}),!o&&f]})}allRowsHaveId(){var n,r;const{queryContext:{data:t}}=this.props;return(r=(n=t==null?void 0:t.queryResult)==null?void 0:n.queryResults.rows.every(s=>!!s.rowId))!=null?r:!1}isEntityViewOrDataset(){var n;const{queryContext:{entity:t}}=this.props;return(n=t&&(We(t)||ze(t)))!=null?n:!1}createTableRows(t,n,r,s,i,o){const d=[],{queryContext:{data:p},queryVisualizationContext:{columnsToShowInTable:h,selectedRowIndices:C,setSelectedRowIndices:m},columnLinks:u=[],linkCountToDisaggregatedQuery:b=!1}=this.props,{selectColumns:f=[],columnModels:c=[]}=p,{mapEntityIdToHeader:y,mapUserIdToHeader:S}=this.state,R=Kl(this.props.queryContext.getLastQueryRequest().query.sql);return t.forEach((g,l)=>{var O,k,N;const _=(O=g.versionNumber)==null?void 0:O.toString(),A=`syn${g.rowId}`,T=g.values.map((D,V)=>{const B=n[V].name,Y=h.includes(B),ee=u.find(te=>te.matchColumnName===B),ie=this.findSelectionIndex(this.state.sortedColumnSelection,B),ge=R.includes(V)&&b,$=ie===-1?"":"SRC-boldText";return Y?a("td",{className:"SRC_noBorderTop SRC-synapseTableTd",children:ge?a("a",{href:this.showGroupRowData(g),target:"_blank",rel:"noopener noreferrer",children:a("p",{className:$,children:D})}):a(pn,{columnType:n[V].columnType,columnValue:D,isBold:$,mapEntityIdToHeader:y,mapUserIdToHeader:S,rowIndex:l,columnLinkConfig:ee,columnName:B,rowData:g.values,selectColumns:f,columnModels:c,rowId:g.rowId,rowVersionNumber:g.versionNumber})},`(${l}${D}${V})`):a("td",{className:"SRC-hidden"},`(${l},${V})`)});r&&T.unshift(a("td",{className:"SRC_noBorderTop",children:a(ln,{entityId:A,entityVersionNumber:_},A)},A));const q=((k=y[A])==null?void 0:k.type)=="org.sagebionetworks.repo.model.FileEntity";s&&T.unshift(a("td",{className:"SRC_noBorderTop direct-download",children:q&&a(ht,{associatedObjectId:A,entityVersionNumber:_})},`direct-download-${A}`)),i&&T.unshift(a("td",{className:"SRC_noBorderTop add-to-download-list-v2",children:q&&a(Jt,{entityId:A,entityVersionNumber:parseInt(_)})},`add-to-download-list-v2-${A}`)),o&&C&&T.unshift(a("td",{className:"SRC_noBorderTop",children:a(Ui,{label:"",checked:C.includes(l),onChange:D=>{const V=[...C];if(D)V.push(l);else{const B=V.indexOf(l);B>-1&&V.splice(B,1)}m(V)}})},`(${l},rowSelectColumn)`));const I=a("tr",{children:T},(N=g.rowId)!=null?N:l);d.push(I)}),d}isSortableColumn(t){switch(t){case M.USERID:case M.ENTITYID:case M.FILEHANDLEID:case M.STRING_LIST:case M.INTEGER_LIST:case M.BOOLEAN_LIST:case M.DATE_LIST:case M.USERID_LIST:case M.ENTITYID_LIST:return!1;default:return!0}}createTableHeader(t,n,r,s,i,o,d,p){const{sortedColumnSelection:h,columnIconSortState:C}=this.state,{queryVisualizationContext:{facetAliases:m={},columnsToShowInTable:u},queryContext:{lockedColumn:b}}=this.props,f=t.map((c,y)=>{var R;if(u.includes(c.name)){const g=this.findSelectionIndex(h,c.name)!==-1,l=C[y]===void 0?0:C[y],_=r.findIndex(B=>B.columnName===c.name),A=_!==-1&&r[_].facetType==="enumeration",T=r[_],q=g?"SRC-primary-background-color SRC-anchor-light":"",I=g?"SRC-selected-table-icon tool-icon":"SRC-primary-text-color tool-icon",O=`SRC-tableHead SRC-hand-cursor SRC-sortPadding SRC-primary-background-color-hover  ${q}`,k=qe(c.name,m),N=n.find(B=>B.name===c.name),D=c.name.toLowerCase()===((R=b==null?void 0:b.columnName)==null?void 0:R.toLowerCase()),V=N&&N.name=="id"&&N.columnType==M.ENTITYID;return a("th",{children:w("div",{className:"SRC-split",children:[a("span",{style:{whiteSpace:"nowrap"},children:k}),w("div",{className:"SRC-centerContent",children:[A&&!D&&this.configureFacetDropdown(T,N,p,m),this.isSortableColumn(c.columnType)&&a("span",{role:"button","aria-label":"sort",tabIndex:0,className:O,onKeyPress:this.handleColumnSortPress({index:y,name:c.name}),onClick:this.handleColumnSortPress({index:y,name:c.name}),children:a(Un,{type:qa[l],cssClass:I})}),V&&a(Xl,{})]})]})},c.name)}else return a("th",{className:"SRC-hidden"},c.name)});return s&&f.unshift(a("th",{children:a("div",{className:"SRC-centerContent",children:a("span",{style:{whiteSpace:"nowrap"},children:"Access"})})},"accessColumn")),i&&f.unshift(a("th",{children:a("div",{className:"SRC-centerContent",children:"\xA0"})},"downloadColumn")),o&&f.unshift(a("th",{"data-testid":"AddToDownloadListV2ColumnHeader",children:a("div",{className:"SRC-centerContent",children:"\xA0"})},"addToV2DownloadListColumn")),d&&f.unshift(a("th",{children:a("div",{className:"SRC-centerContent"})},"rowSelectionColumn")),f}findSelectionIndex(t,n){return t.length!==0?t.findIndex(r=>r.column===n):-1}advancedSearch(t){t&&t.preventDefault();const n=this.props.queryContext.getLastQueryRequest(),{query:r}=n,s=btoa(JSON.stringify(r)),i=n.entityId;window.open(`${he.PORTAL}#!Synapse:${i}/tables/query/${s}`,"_blank")}getLengthOfPropsData(){var n,r;const{data:t}=this.props.queryContext;return(r=(n=t==null?void 0:t.queryResult)==null?void 0:n.queryResults.headers.length)!=null?r:0}configureFacetDropdown(t,n,r,s){return a(Js,{containerAs:"Dropdown",facetValues:t.facetValues,columnModel:n,facetAliases:s,onChange:i=>{Zs(r,t,this.applyChangesFromQueryFilter,i)},onClear:()=>{ei(r,t,this.applyChangesFromQueryFilter)}})}}try{gt.displayName="SynapseTable",gt.__docgenInfo={description:"",displayName:"SynapseTable",props:{synapseContext:{defaultValue:null,description:"",name:"synapseContext",required:!0,type:{name:"SynapseContextType"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},linkCountToDisaggregatedQuery:{defaultValue:null,description:`If true, columns created by the COUNT function will render with a link to Synapse that opens the disaggregated query results filtered by the conditions of that row.
Note that this is very brittle and only supports one column at a time. See SWC-6075 for more information. Default false.`,name:"linkCountToDisaggregatedQuery",required:!1,type:{name:"boolean"}},showNoContentAvailableWhenEmpty:{defaultValue:null,description:"",name:"showNoContentAvailableWhenEmpty",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/SynapseTable.tsx#SynapseTable"]={docgenInfo:gt.__docgenInfo,name:"SynapseTable",path:"src/lib/containers/table/SynapseTable.tsx#SynapseTable"})}catch{}function Gr(){const{data:e}=Ae(),{showLastUpdatedOn:t}=Rt();return t&&e&&e.lastUpdatedOn?a("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:w(Ze,{variant:"body2",children:["Last updated on ",Sr(Hn(e.lastUpdatedOn))]})}):a(x,{})}const mn=e=>{const{tableConfiguration:t,cardConfiguration:n,hideDownload:r}=e,s=z(),i=Ae(),o=Rt();return w("div",{className:`FilterAndView ${o.topLevelControlsState.showFacetFilter?Xe:Je}`,children:[t?a(gt,{...t,synapseContext:s,queryContext:i,queryVisualizationContext:o,hideDownload:r}):a(x,{}),n?a(Ct,{...n}):a(x,{}),a(Gr,{})]})};try{mn.displayName="FilterAndView",mn.__docgenInfo={description:"",displayName:"FilterAndView",props:{tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!0,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext"> | undefined'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!0,type:{name:"CardConfiguration | undefined"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/query_wrapper_plot_nav/FilterAndView.tsx#FilterAndView"]={docgenInfo:mn.__docgenInfo,name:"FilterAndView",path:"src/lib/containers/query_wrapper_plot_nav/FilterAndView.tsx#FilterAndView"})}catch{}const ec="isShowingFacetFilters",tc="isHidingFacetFilters",hn=e=>{const[t,n]=v.exports.useState(!1),{searchParams:r,sql:s,sqlOperator:i,tableConfiguration:o,name:d,cardConfiguration:p,facetsToPlot:h,facetsToFilter:C,hideDownload:m,hideQueryCount:u,hideSqlEditorControl:b,searchConfiguration:f,limit:c=Rs,initQueryJson:y,showLastUpdatedOn:S}=e,R=pa(s,r,i),g=y?JSON.parse(y):{sql:R,limit:c,offset:0},l=je(g.sql),{data:_}=ga(l),A=_&&dr(_)&&_.isSearchEnabled,T={entityId:l,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:vt|At|la|ar|ca|da|ia|ua,query:g};return a("div",{className:"QueryWrapperPlotNav",children:a(o?fr:ut,{...e,initQueryRequest:T,children:a(ma,{unitDescription:"results",rgbIndex:e.rgbIndex,facetAliases:e.facetAliases,visibleColumnCount:e.visibleColumnCount,defaultShowFacetVisualization:e.defaultShowFacetVisualization,defaultShowSearchBar:e.defaultShowSearchBox||A,showLastUpdatedOn:S,children:a(ha,{children:I=>{if(I===void 0)throw new Error("No queryContext found when using QueryContextConsumer");const O=I==null?void 0:I.isFacetsAvailable;return a(pr,{children:k=>{if(k===void 0)throw new Error("No queryVisualizationContext found when using QueryVisualizationContextConsumer");const N=(k==null?void 0:k.topLevelControlsState.showFacetFilter)||(k==null?void 0:k.topLevelControlsState.showFacetFilter)===void 0;return w(x,{children:[a("div",{className:`ErrorBannerWrapper ${N?ec:tc}`,children:a(ti,{})}),A?a(dt,{helpUrl:f==null?void 0:f.fullTextSearchHelpURL}):a(pt,{...f,queryContext:I,queryVisualizationContext:k}),a(ft,{}),a(Wt,{getLastQueryRequest:I.getLastQueryRequest,topLevelControlsState:k.topLevelControlsState,setTopLevelControlsState:k.setTopLevelControlsState}),a(mt,{showColumnSelection:o!==void 0,name:d,hideDownload:m,hideQueryCount:u,hideFacetFilterControl:!O,hideVisualizationsControl:!O,hideSqlEditorControl:b}),O&&a(x,{children:a(ni,{facetsToFilter:C})}),a(ai,{facetsToPlot:h}),a(mn,{tableConfiguration:o,hideDownload:m,cardConfiguration:p}),t&&a(Ve,{getLastQueryRequest:I.getLastQueryRequest,onClose:()=>n(!1)})]})}})}})})})})},nc=hn;try{hn.displayName="QueryWrapperPlotNav",hn.__docgenInfo={description:"",displayName:"QueryWrapperPlotNav",props:{searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},facetsToPlot:{defaultValue:null,description:"",name:"facetsToPlot",required:!1,type:{name:"string[]"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"If onQueryChange is set, the callback will be invoked when the Query changes",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"If onQueryResultBundleChange is set, the callback will be invoked when the QueryResultBundle changes",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},initQueryJson:{defaultValue:null,description:"If initQueryJson is set, it will be the Query used in the initial QueryBundleRequest",name:"initQueryJson",required:!1,type:{name:"string"}},tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!1,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext">'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!1,type:{name:"CardConfiguration"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},facetsToFilter:{defaultValue:null,description:"",name:"facetsToFilter",required:!1,type:{name:"string[]"}},visibleColumnCount:{defaultValue:null,description:"",name:"visibleColumnCount",required:!1,type:{name:"number"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},defaultShowFacetVisualization:{defaultValue:null,description:"",name:"defaultShowFacetVisualization",required:!1,type:{name:"boolean"}},defaultShowSearchBox:{defaultValue:null,description:"",name:"defaultShowSearchBox",required:!1,type:{name:"boolean"}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/query_wrapper_plot_nav/QueryWrapperPlotNav.tsx#QueryWrapperPlotNav"]={docgenInfo:hn.__docgenInfo,name:"QueryWrapperPlotNav",path:"src/lib/containers/query_wrapper_plot_nav/QueryWrapperPlotNav.tsx#QueryWrapperPlotNav"})}catch{}const ac=e=>Qe({partMask:da|At|la|ca|vt|ua,entityId:je(e),concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:e,limit:25,offset:0}}),gn=e=>{const{title:t,searchParams:n,sqlOperator:r,showAccessColumn:s,sql:i,hideDownload:o,hideQueryCount:d,name:p,showTopLevelControls:h=!1,searchConfiguration:C,unitDescription:m="Results",rgbIndex:u,showLastUpdatedOn:b,...f}=e,c=ac(i);n&&(c.query.sql=pa(c.query.sql,n,r));const y=z(),S=je(i),{data:R}=ga(S);return a(fr,{...f,initQueryRequest:c,children:a(ma,{rgbIndex:u,unitDescription:m,showLastUpdatedOn:b,...f,children:a(ha,{children:g=>{if(g===void 0)throw new Error("No queryContext found when calling QueryContextConsumer");return a(pr,{children:l=>{if(l===void 0)throw new Error("No queryVisualizationContext found when calling QueryVisualizationContextConsumer");return w(x,{children:[h&&a(mt,{showColumnSelection:!0,name:p,hideDownload:o,hideQueryCount:d,hideFacetFilterControl:!0,hideVisualizationsControl:!0}),R&&dr(R)&&R.isSearchEnabled?a(dt,{helpUrl:C==null?void 0:C.fullTextSearchHelpURL}):a(pt,{...C,queryContext:g,queryVisualizationContext:l}),a(ft,{}),h&&a(mr,{frontText:""}),a(gt,{synapseContext:y,queryContext:g,queryVisualizationContext:l,showAccessColumn:s,title:t,"data-testid":"SynapseTable",...f}),a(Gr,{})]})}})}})})})},rc=gn;try{gn.displayName="StandaloneQueryWrapper",gn.__docgenInfo={description:`This component was initially implemented on the portal side. It renders a SynapseTable if a title is provided.
If showTopLevelControls is set to true, then the SynapseTable will also include the TopLevelControls (search, export table, column selection).`,displayName:"StandaloneQueryWrapper",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},linkCountToDisaggregatedQuery:{defaultValue:null,description:`If true, columns created by the COUNT function will render with a link to Synapse that opens the disaggregated query results filtered by the conditions of that row.
Note that this is very brittle and only supports one column at a time. See SWC-6075 for more information. Default false.`,name:"linkCountToDisaggregatedQuery",required:!1,type:{name:"boolean"}},showNoContentAvailableWhenEmpty:{defaultValue:null,description:"",name:"showNoContentAvailableWhenEmpty",required:!1,type:{name:"boolean"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},showTopLevelControls:{defaultValue:null,description:"",name:"showTopLevelControls",required:!1,type:{name:"boolean"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/StandaloneQueryWrapper.tsx#StandaloneQueryWrapper"]={docgenInfo:gn.__docgenInfo,name:"StandaloneQueryWrapper",path:"src/lib/containers/table/StandaloneQueryWrapper.tsx#StandaloneQueryWrapper"})}catch{}function yn(e){const{query:t,showquery:n,tableonly:r}=e,s=n==="true",i=r==="true",o="Items";return i?a(rc,{sql:t,name:o}):a(nc,{sql:t,hideSqlEditorControl:!s,name:o,defaultShowFacetVisualization:!1,tableConfiguration:{}})}try{yn.displayName="MarkdownSynapseTable",yn.__docgenInfo={description:"",displayName:"MarkdownSynapseTable",props:{query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"string"}},showquery:{defaultValue:null,description:"",name:"showquery",required:!0,type:{name:"string"}},tableonly:{defaultValue:null,description:"",name:"tableonly",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownSynapseTable.tsx#MarkdownSynapseTable"]={docgenInfo:yn.__docgenInfo,name:"MarkdownSynapseTable",path:"src/lib/containers/markdown/widget/MarkdownSynapseTable.tsx#MarkdownSynapseTable"})}catch{}const sc={1:"toc-indent1",2:"toc-indent2",3:"toc-indent3",4:"toc-indent4",5:"toc-indent5",6:"toc-indent6"};function Sn(e){const{originalMarkup:t}=e,n=[],r=/<h([1-6]) id="(.*)" .*toc="true">(.*)<\/h[1-6]>/gm;let s="";return t.replace(r,(i,o,d,p)=>(s+=p,n.push(a("div",{children:a("a",{role:"link",className:`link ${sc[Number(o)]}`,"data-anchor":d,children:p})},p)),"")),a("div",{children:n},s)}try{Sn.displayName="MarkdownTableOfContents",Sn.__docgenInfo={description:"",displayName:"MarkdownTableOfContents",props:{originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownTableOfContents.tsx#MarkdownTableOfContents"]={docgenInfo:Sn.__docgenInfo,name:"MarkdownTableOfContents",path:"src/lib/containers/markdown/widget/MarkdownTableOfContents.tsx#MarkdownTableOfContents"})}catch{}function bn(e){const{alias:t}=e;return a(Pe,{alias:t,size:wt})}try{bn.displayName="MarkdownUserBadge",bn.__docgenInfo={description:"",displayName:"MarkdownUserBadge",props:{alias:{defaultValue:null,description:"",name:"alias",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownUserBadge.tsx#MarkdownUserBadge"]={docgenInfo:bn.__docgenInfo,name:"MarkdownUserBadge",path:"src/lib/containers/markdown/widget/MarkdownUserBadge.tsx#MarkdownUserBadge"})}catch{}function Cn(e){return a(Yi,{params:e})}try{Cn.displayName="MarkdownVideo",Cn.__docgenInfo={description:"",displayName:"MarkdownVideo",props:{width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"string"}},videoId:{defaultValue:null,description:"",name:"videoId",required:!1,type:{name:"string"}},vimeoId:{defaultValue:null,description:"",name:"vimeoId",required:!1,type:{name:"string"}},oggSynapseId:{defaultValue:null,description:"",name:"oggSynapseId",required:!1,type:{name:"string"}},mp4SynapseId:{defaultValue:null,description:"",name:"mp4SynapseId",required:!1,type:{name:"string"}},webmSynapseId:{defaultValue:null,description:"",name:"webmSynapseId",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownVideo.tsx#MarkdownVideo"]={docgenInfo:Cn.__docgenInfo,name:"MarkdownVideo",path:"src/lib/containers/markdown/widget/MarkdownVideo.tsx#MarkdownVideo"})}catch{}function yt(e){const{widgetType:t,widgetParamsMapped:n,originalMarkup:r}=e;switch(t){case"buttonlink":return a(Dt,{...n});case"image":return a(Bt,{...n});case"plot":return a(Ut,{...n});case"toc":return a(Sn,{originalMarkup:r});case"badge":return a(bn,{...n});case"iduReport":return a(Pt,{...n});case"video":case"vimeo":case"youtube":return a(Cn,{...n});case"synapsetable":return a(yn,{...n});default:return console.warn(`Unsupported widget: ${t}.`),a(x,{})}}try{yt.displayName="MarkdownWidget",yt.__docgenInfo={description:"",displayName:"MarkdownWidget",props:{widgetType:{defaultValue:null,description:"",name:"widgetType",required:!0,type:{name:"enum",value:[{value:'"image"'},{value:'"video"'},{value:'"buttonlink"'},{value:'"plot"'},{value:'"toc"'},{value:'"badge"'},{value:'"iduReport"'},{value:'"vimeo"'},{value:'"youtube"'},{value:'"synapsetable"'}]}},widgetParamsMapped:{defaultValue:null,description:"",name:"widgetParamsMapped",required:!0,type:{name:"any"}},originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/MarkdownWidget.tsx#MarkdownWidget"]={docgenInfo:yt.__docgenInfo,name:"MarkdownWidget",path:"src/lib/containers/markdown/MarkdownWidget.tsx#MarkdownWidget"})}catch{}class wn extends v.exports.Component{constructor(t){super(t),this.renderBookmarks=this.renderBookmarks.bind(this)}renderBookmarks(){const t=String(this.props.footnotes),n=/Synapse widget&gt;<\/span>(.*)</g;let r;const s=[];for(;r=n.exec(t);)s.push(r[1]);return s.map((i,o)=>{const d=o<s.length-1;return w(v.exports.Fragment,{children:[w("button",{className:"SRC-markdown-bookmark",id:`bookmark${o}`,children:["[",o+1,"]"]}),a("span",{dangerouslySetInnerHTML:{__html:i}}),d&&a("br",{})]},o)})}render(){return w(v.exports.Fragment,{children:[a("hr",{}),this.renderBookmarks()]})}}const ic=wn;try{wn.displayName="Bookmarks",wn.__docgenInfo={description:"",displayName:"Bookmarks",props:{footnotes:{defaultValue:null,description:"",name:"footnotes",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/Bookmarks.tsx#Bookmarks"]={docgenInfo:wn.__docgenInfo,name:"Bookmarks",path:"src/lib/containers/markdown/widget/Bookmarks.tsx#Bookmarks"})}catch{}const Xn=markdownit({html:!0});class me extends se.Component{constructor(t){super(t),markdownitSynapse.init_markdown_it(Xn,markdownitSub,markdownitSup,markdownitCentertext,markdownitSynapseHeading,markdownitSynapseTable,markdownitStrikethroughAlt,markdownitContainer,markdownitEmphasisAlt,markdownitInlineComments,markdownitBr);const n="";Xn.use(markdownitSynapse,n,"https://synapse.org").use(markdownitMath,n);const r={};this.props.markdown&&(r.markdown=this.props.markdown),this.state={md:Xn,error:void 0,fileHandles:void 0,data:r,isLoading:!0},this.markupRef=se.createRef(),this.handleLinkClicks=this.handleLinkClicks.bind(this),this.renderMarkdown=this.renderMarkdown.bind(this),this.recursiveRender=this.recursiveRender.bind(this),this.processMath=this.processMath.bind(this),this.getWikiAttachments=this.getWikiAttachments.bind(this),this.getWikiPageMarkdown=this.getWikiPageMarkdown.bind(this),this.createHTML=this.createHTML.bind(this),this.addBookmarks=this.addBookmarks.bind(this),this.addIdsToReferenceWidgets=this.addIdsToReferenceWidgets.bind(this),this.addIdsToTocWidgets=this.addIdsToTocWidgets.bind(this)}componentWillUnmount(){this.markupRef.current&&this.markupRef.current.removeEventListener("click",this.handleLinkClicks)}handleLinkClicks(t){const n=t.target;if(n.tagName==="A"||n.tagName==="BUTTON"){const r=t.target;if(r.id.substring(0,3)==="ref"){t.preventDefault();const s=Number(t.currentTarget.id.substring(3)),i=this.markupRef.current.querySelector(`#bookmark${s}`);try{i.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(o){console.log("error on scroll",o)}}else if(t.currentTarget.id!==null&&r.getAttribute("data-anchor")){t.preventDefault();const s=r.getAttribute("data-anchor"),i=this.markupRef.current.querySelector(`#${s}`);try{i.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(o){console.log("error on scroll",o)}}}}createHTML(t){if(!t)return{__html:""};const n=this.props.renderInline?this.state.md.renderInline(t):this.state.md.render(t);return{__html:Go(n,jo)}}processMath(){if(!this.markupRef.current)return;const t=this.markupRef.current.querySelectorAll('[id^="mathjax-"]'),n=new RegExp(/\\[()[\]]/,"g");t.forEach(r=>{if(r.textContent&&!r.getAttribute("processed")){r.setAttribute("processed","true");const s=r.textContent.replace(n,"");return katex.render(s,r,{output:"html",throwOnError:!1})}})}addBookmarks(){markdownitSynapse.resetFootnotes(),this.createHTML(this.state.data.markdown);const t=this.createHTML(markdownitSynapse.footnotes()).__html;if(t.length>0)return a(ic,{footnotes:t})}async getWikiPageMarkdown(){const{ownerId:t,wikiId:n,objectType:r}=this.props;if(!(!t&&!n))try{const s=await Is(this.context.accessToken,t,n,r);try{const i=await this.getWikiAttachments(n||s.id);this.setState({data:s,fileHandles:i,error:void 0})}catch(i){console.error("fileHandlesErr = ",i)}}catch(s){console.error(`Error on wiki markdown load
`,s),this.setState({error:s})}}async getWikiAttachments(t){const{ownerId:n,objectType:r}=this.props;if(!n){console.error("Cannot get wiki attachments without ownerId on Markdown Component");return}return await Es(this.context.accessToken,n,t,r).then(s=>s).catch(s=>{console.error("Error on wiki attachment load ",s)})}addIdsToReferenceWidgets(t){const n=/<span id="wikiReference.*?<span data-widgetparams.*?span>/g;let r=1;return t.replace(n,()=>{const s=r;return r+=1,`<a href="" id="ref${s}">[${s}]</a>`})}addIdsToTocWidgets(t){const n="SRC-header-";let r=1;const s=/<h[1-6] toc="true">.*<\/h[1-6]>/gm;return t.replace(s,i=>{const o=r;return r+=1,`${i.substring(0,3)} id="${n}${o}"${i.substring(3)}`})}renderMarkdown(){let t=this.createHTML(this.state.data.markdown).__html;if(t=this.addIdsToReferenceWidgets(t),t=this.addIdsToTocWidgets(t),t.length>0){const r=new DOMParser().parseFromString(t,"text/html");return a(x,{children:this.recursiveRender(r.body,t)})}}recursiveRender(t,n){if(t.nodeType===Node.TEXT_NODE)return w(x,{children:[" ",t.textContent," "]});if(t.nodeType===Node.ELEMENT_NODE&&t instanceof HTMLElement){const r=t.tagName.toLowerCase()==="body"?"span":t.tagName.toLowerCase(),s=t.getAttribute("data-widgetparams");if(s)return this.processHTMLWidgetMapping(s,n);const i=t.attributes,o={};for(let p=0;p<i.length;p++){let h="",C="";const m=i.item(p);m&&(h=m.name,C=m.value),h&&C&&(o[h]=C)}if(t.childNodes.length===0)return a(r,{...o});const d=Array.from(t.childNodes).map((p,h)=>a(se.Fragment,{children:this.recursiveRender(p,n)},h));return a(r,{...o,children:d})}}decodeXml(t){const n={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'};return t.replace(/(&quot;|&lt;|&gt;|&amp;)/g,(r,s)=>n[s])}processHTMLWidgetMapping(t,n){const r=this.decodeXml(t),s=r.indexOf("?");if(s===-1)return a(yt,{widgetType:r,widgetParamsMapped:{},originalMarkup:n},JSON.stringify(r));const i=r.substring(0,s),o={};return r.substring(s+1).split("&").forEach(d=>{let[p,h]=d.split("=");h=decodeURIComponent(h),o[p]=h}),a(yt,{widgetType:i,widgetParamsMapped:o,originalMarkup:n},JSON.stringify(r))}async componentDidMount(){if(this.state.data.markdown){this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current);return}this.markupRef.current&&this.markupRef.current.addEventListener("click",this.handleLinkClicks),await this.getWikiPageMarkdown(),this.processMath(),this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current)}async componentDidUpdate(t){let n=this.props.ownerId!==t.ownerId;n=n||this.props.wikiId!==t.wikiId,n&&await this.getWikiPageMarkdown(),this.processMath()}render(){const{renderInline:t}=this.props,{isLoading:n,error:r}=this.state,s={ownerId:this.props.ownerId,wikiId:this.props.wikiId,wikiPage:this.state.data,fileHandles:this.state.fileHandles};if(r)return a(rr,{error:r});const i=this.addBookmarks(),o=w(Mt,{wikiContext:s,children:[n&&a("span",{className:"spinner"}),this.renderMarkdown(),i&&a("div",{children:this.addBookmarks()})]});return t?a("span",{className:"markdown markdown-inline",ref:this.markupRef,children:o}):a("div",{className:"markdown",ref:this.markupRef,children:o})}}me.contextType=Tt;try{me.displayName="MarkdownSynapse",me.__docgenInfo={description:"Basic Markdown functionality for Synapse, supporting Images/Plots/References/Bookmarks/buttonlinks",displayName:"MarkdownSynapse",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},markdown:{defaultValue:null,description:"",name:"markdown",required:!1,type:{name:"string"}},renderInline:{defaultValue:null,description:"",name:"renderInline",required:!1,type:{name:"boolean"}},objectType:{defaultValue:null,description:"",name:"objectType",required:!1,type:{name:"enum",value:[{value:'"ENTITY"'},{value:'"ENTITY_CONTAINER"'},{value:'"PRINCIPAL"'},{value:'"ACTIVITY"'},{value:'"EVALUATION"'},{value:'"SUBMISSION"'},{value:'"EVALUATION_SUBMISSIONS"'},{value:'"FILE"'},{value:'"MESSAGE"'},{value:'"WIKI"'},{value:'"FAVORITE"'},{value:'"ACCESS_REQUIREMENT"'},{value:'"ACCESS_APPROVAL"'},{value:'"TEAM"'},{value:'"TABLE"'},{value:'"ACCESS_CONTROL_LIST"'},{value:'"PROJECT_SETTING"'},{value:'"VERIFICATION_SUBMISSION"'},{value:'"CERTIFIED_USER_PASSING_RECORD"'},{value:'"FORUM"'},{value:'"THREAD"'},{value:'"REPLY"'},{value:'"FORM_GROUP"'},{value:'"FORM_DATA"'},{value:'"ENTITY_VIEW"'},{value:'"USER_PROFILE"'},{value:'"DATA_ACCESS_REQUEST"'},{value:'"DATA_ACCESS_SUBMISSION"'},{value:'"DATA_ACCESS_SUBMISSION_STATUS"'},{value:'"MEMBERSHIP_INVITATION"'}]}},onMarkdownProcessingDone:{defaultValue:null,description:"",name:"onMarkdownProcessingDone",required:!1,type:{name:"((ref: HTMLInputElement | null) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/MarkdownSynapse.tsx#MarkdownSynapse"]={docgenInfo:me.__docgenInfo,name:"MarkdownSynapse",path:"src/lib/containers/markdown/MarkdownSynapse.tsx#MarkdownSynapse"})}catch{}const _n=({type:e,title:t,subTitle:n="",description:r,values:s,secondaryLabelLimit:i,isAlignToLeftNav:o,descriptionConfig:d,href:p,target:h,rgbIndex:C,icon:m})=>{const u=document.querySelector('meta[name="description"]'),[b]=v.exports.useState(document.title),[f]=v.exports.useState(u?u.getAttribute("content"):"");return v.exports.useEffect(()=>(t&&document.title!==t&&(document.title=t),(r||n)&&(u==null||u.setAttribute("content",r||n)),function(){document.title=b,u==null||u.setAttribute("content",f)})),a("div",{className:`SRC-portalCard SRC-portalCardHeader ${o?"isAlignToLeftNav":""}`,children:a("div",{className:"container-fluid container-full-width",children:a("div",{className:"row",children:a("div",{className:"col-md-offset-1 col-md-10",children:w("div",{className:"SRC-portalCardMain",children:[m,w("div",{style:{width:"100%"},children:[w("div",{className:"SRC-cardContent",style:{marginLeft:"15px"},children:[a("div",{className:"SRC-type",children:e}),a("div",{children:a("h3",{className:"SRC-boldText",style:{margin:"none"},children:p?a("a",{target:h,href:p,className:"highlight-link",children:t}):w("span",{children:[" ",t," "]})})}),n&&w("div",{className:"SRC-author",children:[" ",n," "]}),r&&a("span",{className:"SRC-font-size-base",children:d!=null&&d.isMarkdown?a(me,{markdown:r}):r})]}),a("div",{style:{borderTop:"1px solid rgba(26, 28, 41, 0.2)",marginTop:"15px",paddingTop:"5px"}}),a("div",{className:"SRC-cardContent",children:s&&a(fa,{isHeader:!0,secondaryLabelLimit:i,values:s})})]})]})})})})})};try{_n.displayName="HeaderCard",_n.__docgenInfo={description:"",displayName:"HeaderCard",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subTitle:{defaultValue:{value:""},description:"",name:"subTitle",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[][]"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},href:{defaultValue:null,description:"",name:"href",required:!1,type:{name:"string"}},target:{defaultValue:null,description:"",name:"target",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"Element"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HeaderCard.tsx#HeaderCard"]={docgenInfo:_n.__docgenInfo,name:"HeaderCard",path:"src/lib/containers/HeaderCard.tsx#HeaderCard"})}catch{}const Tn=e=>{var h,C;const{fileHandleAssociation:t,showDownloadIcon:n,redirect:r=!1,displayValue:s}=e,{accessToken:i}=z(),[o,d]=v.exports.useState();v.exports.useEffect(()=>{s===void 0&&(async()=>d(await Ge({requestedFiles:[t],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1},i)))()},[i,s,t]);let p;return o&&(p=(h=o.requestedFiles[0].fileHandle)==null?void 0:h.fileName),w("button",{onClick:()=>{i&&t&&sr(t.fileHandleId,i,t.associateObjectType,t.associateObjectId,r).then(m=>{window.open(m,"_blank")}).catch(m=>{console.error("Error on retrieving file handle url ",m)})},className:`SRC-primary-text-color ${oa}`,type:"button",style:{padding:0},children:[(C=s!=null?s:p)!=null?C:t.fileHandleId,n&&a(Z,{options:{icon:"download"}})]})};try{Tn.displayName="FileHandleLink",Tn.__docgenInfo={description:"",displayName:"FileHandleLink",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},redirect:{defaultValue:null,description:"",name:"redirect",required:!1,type:{name:"boolean"}},showDownloadIcon:{defaultValue:null,description:"",name:"showDownloadIcon",required:!0,type:{name:"boolean"}},displayValue:{defaultValue:null,description:"",name:"displayValue",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/FileHandleLink.tsx#FileHandleLink"]={docgenInfo:Tn.__docgenInfo,name:"FileHandleLink",path:"src/lib/containers/widgets/FileHandleLink.tsx#FileHandleLink"})}catch{}const vn=e=>{const{fileHandleAssociation:{fileHandleId:t,associateObjectId:n,associateObjectType:r}}=e,{accessToken:s}=z(),[i,o]=v.exports.useState(),{ref:d,inView:p}=et({triggerOnce:!0,rootMargin:"500px 0px"});return v.exports.useEffect(()=>{(()=>{t&&n&&r&&p&&sr(t,s,r,n,!1).then(C=>{o(C)}).catch(C=>{console.error("Error on retrieving file handle url ",C)})})()},[p,t,n,s,r]),a("span",{ref:d,children:i&&a("img",{src:i,alt:"",className:"ImageFileHandle",loading:"lazy"})})};try{vn.displayName="ImageFileHandle",vn.__docgenInfo={description:"",displayName:"ImageFileHandle",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"]={docgenInfo:vn.__docgenInfo,name:"ImageFileHandle",path:"src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"})}catch{}const _a=400,oc="SRC-short-description",lc="SRC-long-description",An=e=>{let t="";const n=e.split(" ");let r=0;for(;t.length<_a&&r<n.length;)t+=`${n[r]} `,r+=1;return t=t.trim(),{previewText:t}},cc=(e,t,n)=>{var s;let r;return e&&t&&(ur(e)?r={fileHandleId:t,associateObjectId:(s=e==null?void 0:e.id)!=null?s:"",associateObjectType:fe.TableEntity}:n&&(r={fileHandleId:t,associateObjectId:n,associateObjectType:fe.FileEntity})),r},Oe=({columnName:e,value:t,selectColumns:n,columnModels:r})=>{if(!t)return{str:"",strList:void 0,columnModelType:void 0};const s=(n==null?void 0:n.find(o=>o.name===e))||(r==null?void 0:r.find(o=>o.name===e));if(s==null?void 0:s.columnType.endsWith("_LIST")){let o=t,d;try{return d=JSON.parse(o),o=d.join(", "),{strList:d,str:o,columnModelType:s==null?void 0:s.columnType}}catch(p){console.error("Could not parse multivalue string ",o," caught err ",p)}}return{str:t,columnModelType:s==null?void 0:s.columnType}},dc=(e,t,n)=>(t==null?void 0:t.findIndex(r=>r.name===e))||(n==null?void 0:n.findIndex(r=>r.name===e)),Rn=e=>{const{synapseId:t,version:n}=e;return w("span",{children:[n,"\xA0\xA0",a("a",{target:ve.NEW_WINDOW,rel:"noopener noreferrer",href:`${he.PORTAL}#!Synapse:${t}.${n}`,children:"(Show Version History on Synapse)"})]})},St=e=>{const{value:t,columnName:n,labelLink:r,selectColumns:s,columnModels:i,isHeader:o,className:d,rowData:p}=e;if(!t)return a(x,{children:t});const{strList:h,str:C,columnModelType:m}=Oe({columnName:n,value:t,selectColumns:s,columnModels:i});if(!C)return a(x,{children:C});let u=d;const b={};if(o&&(u=d==null?void 0:d.concat(" ","SRC-lightLink")),m===M.USERID_LIST&&h)return a(x,{children:h.map((c,y)=>w("span",{children:[a(Pe,{ownerId:c,size:wt,className:u}),y<h.length-1&&",\xA0\xA0"]},c))});if(m===M.USERID&&C)return a(Pe,{ownerId:C,size:wt,className:u});if(!r)return C.match(or)?a("a",{target:ve.NEW_WINDOW,rel:"noopener noreferrer",href:`${he.PORTAL}#!Synapse:${C}`,className:u,children:C}):a(x,{children:C});let f;if(r.isMarkdown)h?f=a(x,{children:h.map((c,y)=>w("span",{children:[a(me,{renderInline:!0,markdown:c},c),y<h.length-1&&",\xA0\xA0"]},c))}):f=a(me,{renderInline:!0,markdown:t});else{const c=h||C.split(",");let y;if("target"in r&&(y=r.target),"linkColumnName"in r){const S=dc(r.linkColumnName,s,i);if(S==null)console.warn(`Could not determine column index of ${r.linkColumnName}`),f=a(x,{children:t});else{const R=p[S];zi(R)?f=a(x,{children:t}):f=a(x,{children:c.map((g,l)=>w(se.Fragment,{children:[a("a",{href:R!=null?R:void 0,target:y!=null?y:ve.NEW_WINDOW,rel:"noopener noreferrer",className:u,style:b,children:g},g),l<c.length-1&&a("span",{style:{marginRight:4},children:", "})]},g))})}}else f=a(x,{children:c.map((S,R)=>{const{baseURL:g,URLColumnName:l,wrapValueWithParens:_}=r,A=_?`(${S})`:S,T=`/${g}?${l}=${A}`;return w(se.Fragment,{children:[a("a",{href:T,className:u,style:b,target:y!=null?y:ve.CURRENT_WINDOW,children:S},S),R<c.length-1&&a("span",{style:{marginRight:4},children:", "})]},S)})})}return r.tooltipText?a(ke,{title:r.tooltipText,enterNextDelay:300,children:a("span",{children:f})}):f};function uc(e,t,n){if(e){if(!t||!n)throw Error("Must specify CardLink and data for linking to work");const{matchColumnName:r,URLColumnName:s,overrideLinkURLColumnName:i}=e;if(i&&n[i]){const d=n[i],p=t[d];if(p)return p}const o=n[r];if(o===void 0)console.error(`Could not find match for data: ${t} with columnName ${r}`);else{const d=t[o];if(d)return`/${e.baseURL}?${s}=${d}`}}}function ja(e,t,n,r){var d,p;e=e.trim();let s=e,i=ve.CURRENT_WINDOW;e.match(or)?s=`${he.PORTAL}#!Synapse:${e}`:e.match(Ds)?(i=ve.NEW_WINDOW,s=`https://dx.doi.org/${e}`):t?t&&(s=(d=uc(t,n,r))!=null?d:"",s.includes("/DetailsPage")&&(i=ve.NEW_WINDOW)):i=ve.NEW_WINDOW;const o=(p=t==null?void 0:t.target)!=null?p:i;return{href:s,target:o}}function In(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:r,descriptionConfig:s}=e;let i=t;s!=null&&s.isMarkdown&&(i=a(me,{markdown:i}));const o=n||(s==null?void 0:s.showFullDescriptionByDefault);return a("div",{className:o?"":"SRC-hidden",children:a("span",{"data-search-handle":r,className:`SRC-font-size-base ${lc}`,children:i})})}function En(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:r,descriptionConfig:s,toggleShowMore:i}=e;return s!=null&&s.showFullDescriptionByDefault?a(x,{}):w("div",{className:n?"SRC-hidden":"",children:[a("span",{"data-search-handle":r,className:`SRC-font-size-base ${oc} SRC-short-description`,children:An(t).previewText}),t.length>=_a&&a("a",{style:{fontSize:"16px",cursor:"pointer",marginLeft:"5px"},className:"highlight-link",onClick:i,children:"...Show More"})]})}class bt extends se.Component{constructor(t){super(t),this.getCutoff=n=>{let r="";const s=n.split(" ");let i=0;for(;r.length<_a&&i<s.length;)r+=`${s[i]} `,i+=1;return r=r.trim(),{previewText:r}},this.toggleShowMore=()=>{this.setState({hasClickedShowMore:!0})},this.renderTitle=({href:n,target:r,titleSearchHandle:s,title:i})=>n?a("a",{"data-search-handle":s,target:r,href:n,className:"highlight-link",children:i}):w("span",{"data-search-handle":s,children:[" ",i," "]}),this.state={hasClickedShowMore:!1}}render(){var Re;const{schema:t,data:n,genericCardSchema:r,secondaryLabelLimit:s,selectColumns:i,columnModels:o,iconOptions:d,useTypeColumnForIcon:p=!1,isHeader:h=!1,titleLinkConfig:C,ctaLinkConfig:m,labelLinkConfig:u,facetAliases:b={},descriptionConfig:f,rgbIndex:c,columnIconOptions:y,queryContext:{entity:S}}=this.props,R=r,{hasClickedShowMore:g}=this.state,{link:l="",type:_}=R,A=n[t[R.title]];let T=R.subTitle&&n[t[R.subTitle]];T=(R==null?void 0:R.subTitle)&&Oe({value:T,columnName:R==null?void 0:R.subTitle,selectColumns:i,columnModels:o}).str;const q=n[t[R.description||""]],I=n[t[R.icon||""]],O=n[t[R.dataTypeIconNames||""]],k=n[t[R.imageFileHandleColumnName||""]],N=o==null?void 0:o.find(oe=>R.link===oe.name),D=N==null?void 0:N.columnType,V=n[t[l]]||"",{href:B,target:Y}=ja(V,C,n,t),ee=[],{secondaryLabels:ie=[]}=R,ue=S&&!ur(S);for(let oe=0;oe<ie.length;oe+=1){const pe=ie[oe];let ye=n[t[pe]],we;if(ye){if(ue&&pe==="currentVersion"){const nt=n[t.id];ye=Rn({synapseId:nt,version:ye}),we="Version"}else{const nt=u==null?void 0:u.find(at=>at.matchColumnName===pe);ye=a(St,{value:ye,columnName:pe,labelLink:nt,isHeader:h,selectColumns:i,columnModels:o,rowData:n}),we=qe(pe,b)}const tt=[we,ye,pe];ee.push(tt)}}const $=cc(S,k||V,n[t.id]),te=ee.length>0,E={marginTop:h?"0px":void 0,marginBottom:h?"0px":void 0,paddingBottom:te||k?void 0:"15px"},L=w(x,{children:[!p&&k&&a("div",{className:"SRC-imageThumbnail",style:{padding:R.thumbnailRequiresPadding?"21px":void 0},children:$&&a(vn,{fileHandleAssociation:$})}),!p&&!k&&a("div",{className:"SRC-cardThumbnail",children:a(Un,{iconOptions:d,value:I,type:_})}),p&&a("div",{className:"SRC-cardThumbnail",children:a(Z,{options:{icon:yi[n[t.type]]}})})]});if(h)return a(_n,{descriptionConfig:f,title:A,subTitle:T,description:q,type:_,icon:L,values:ee,href:B,target:Y,isAlignToLeftNav:!0,secondaryLabelLimit:s,rgbIndex:c});const F=qe(R.title,b),P=qe(R.subTitle,b),K=qe(R.description,b);let le,X;if(m){const oe=n[t[m.link]]||"",{href:pe,target:ye}=ja(oe,void 0,n,t);le=pe,X=ye}return w("div",{style:E,className:"SRC-portalCard",children:[w("div",{className:"SRC-portalCardMain",children:[L,w("div",{className:"SRC-cardContent",children:[a("div",{className:"SRC-type",children:_}),((Re=y==null?void 0:y.columns)==null?void 0:Re.dataType)&&(O==null?void 0:O.length)&&a("div",{style:{marginTop:"20px"},children:a($i,{iconConfigs:y.columns.dataType,iconNames:JSON.parse(O),useBackground:!0,useTheme:!0})}),a("div",{children:a("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"},children:!C&&D===M.FILEHANDLEID&&$?a(Tn,{fileHandleAssociation:$,showDownloadIcon:_!==qs,displayValue:A}):this.renderTitle({href:B,target:Y,titleSearchHandle:F,title:A})})}),T&&a("div",{"data-search-handle":P,className:"SRC-author",children:T}),q&&a(En,{description:q,hasClickedShowMore:g,descriptionSubTitle:K,descriptionConfig:f,toggleShowMore:this.toggleShowMore}),q&&a(In,{description:q,hasClickedShowMore:g,descriptionSubTitle:K,descriptionConfig:f}),m&&le&&X&&a("div",{className:"SRC-portalCardCTALink bootstrap-4-backport",children:a("a",{target:X,rel:"noopener noreferrer",href:le,children:m.text})})]})]}),te&&a(fa,{isHeader:!1,secondaryLabelLimit:s,values:ee,columnIconOptions:y,className:`${k?"hasImage":"hasIcon"}`})]})}}bt.contextType=Tt;try{In.displayName="LongDescription",In.__docgenInfo={description:"",displayName:"LongDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#LongDescription"]={docgenInfo:In.__docgenInfo,name:"LongDescription",path:"src/lib/containers/GenericCard.tsx#LongDescription"})}catch{}try{En.displayName="ShortDescription",En.__docgenInfo={description:"",displayName:"ShortDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},toggleShowMore:{defaultValue:null,description:"",name:"toggleShowMore",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#ShortDescription"]={docgenInfo:En.__docgenInfo,name:"ShortDescription",path:"src/lib/containers/GenericCard.tsx#ShortDescription"})}catch{}try{An.displayName="getCutoff",An.__docgenInfo={description:"",displayName:"getCutoff",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getCutoff"]={docgenInfo:An.__docgenInfo,name:"getCutoff",path:"src/lib/containers/GenericCard.tsx#getCutoff"})}catch{}try{Oe.displayName="getValueOrMultiValue",Oe.__docgenInfo={description:"",displayName:"getValueOrMultiValue",props:{columnName:{defaultValue:null,description:"",name:"columnName",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getValueOrMultiValue"]={docgenInfo:Oe.__docgenInfo,name:"getValueOrMultiValue",path:"src/lib/containers/GenericCard.tsx#getValueOrMultiValue"})}catch{}try{Rn.displayName="VersionLabel",Rn.__docgenInfo={description:"",displayName:"VersionLabel",props:{synapseId:{defaultValue:null,description:"",name:"synapseId",required:!0,type:{name:"string"}},version:{defaultValue:null,description:"",name:"version",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#VersionLabel"]={docgenInfo:Rn.__docgenInfo,name:"VersionLabel",path:"src/lib/containers/GenericCard.tsx#VersionLabel"})}catch{}try{St.displayName="SynapseCardLabel",St.__docgenInfo={description:"",displayName:"SynapseCardLabel",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},labelLink:{defaultValue:null,description:"",name:"labelLink",required:!0,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink | undefined"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!0,type:{name:"SelectColumn[] | undefined"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!0,type:{name:"ColumnModel[] | undefined"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#SynapseCardLabel"]={docgenInfo:St.__docgenInfo,name:"SynapseCardLabel",path:"src/lib/containers/GenericCard.tsx#SynapseCardLabel"})}catch{}try{bt.displayName="GenericCard",bt.__docgenInfo={description:"Renders a card from a table query",displayName:"GenericCard",props:{selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},useTypeColumnForIcon:{defaultValue:null,description:"",name:"useTypeColumnForIcon",required:!1,type:{name:"boolean"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"Record<string, number>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"string[]"}},tableId:{defaultValue:null,description:"",name:"tableId",required:!0,type:{name:"string | undefined"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#GenericCard"]={docgenInfo:bt.__docgenInfo,name:"GenericCard",path:"src/lib/containers/GenericCard.tsx#GenericCard"})}catch{}class Fe extends v.exports.Component{constructor(t){super(t),this.handleLinkClick=n=>r=>{r.preventDefault(),window.open(`${he.PORTAL}#!Synapse:${n}`,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:t,schema:n,selectColumns:r,columnModels:s}=this.props,i=t[n.datasetName],o=t[n.summary],d=Oe({columnName:"tumorType",value:t[n.tumorType],selectColumns:r,columnModels:s}).str,p=Oe({columnName:"diseaseFocus",value:t[n.diseaseFocus],selectColumns:r,columnModels:s}).str,h=t[n.id],C=t[n.fundingAgency],m=t[n.fileCount],u=Qr(t[n.fileSize]),b=[["FUNDER",Oe({columnName:"fundingAgency",value:C,selectColumns:r,columnModels:s}).str],["SIZE",u],["FILES",m]];return w("div",{className:"SRC-portalCard SRC-typeDataset  ",children:[w("div",{className:"SRC-cardThumbnail",children:[a(Un,{type:ir}),a("div",{children:u})]}),w("div",{className:"SRC-cardContent SRC-dataset",children:[a("div",{className:"SRC-type",children:"Dataset "}),a("div",{children:a("h3",{children:a("a",{target:"_self",href:`${he.PORTAL}#!Synapse:${h}`,children:i})})}),w("div",{className:"SRC-description-dataset",children:[a("p",{className:"SRC-description-text",children:o}),a("div",{className:"SRC-cardAction bootstrap-4-backport",children:a(ne,{className:"pill SRC-datasetButton",onClick:this.handleLinkClick(h),variant:"secondary",children:"Download Dataset"})})]}),a("div",{className:"SRC-cardAnnotations",children:a(Hs,{chips:[d,p]})})]}),a(fa,{isHeader:!1,secondaryLabelLimit:this.props.secondaryLabelLimit,values:b})]})}}try{Fe.displayName="Dataset",Fe.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/Dataset.tsx#Dataset"]={docgenInfo:Fe.__docgenInfo,name:"Dataset",path:"src/lib/containers/row_renderers/Dataset.tsx#Dataset"})}catch{}class qn extends v.exports.Component{constructor(t){super(t),this.handleLinkClick=n=>r=>{r.preventDefault(),window.open(n,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:t,schema:n}=this.props,r=t[n.organizationName],s=t[n.organizationPath],i=t[n.summary],o=t[n.website],d=t[n.logo];let p=o.replace("https://","");p=p.replace("http://",""),p.charAt(p.length-1)==="/"&&(p=p.substring(0,p.length-1));const h=window.location.hash.substring(1)===s,C={};let m;return h?C.paddingBottom="42px":m=a("div",{className:"SRC-marginAuto SRC-cardAction bootstrap-4-backport",children:a(ne,{className:"pill-xl",href:s,variant:"secondary",children:"View Funded Research"})}),w("div",{className:"SRC-portalCard SRC-typeFunder ",style:C,children:[w("div",{className:"SRC-cardContent",children:[a("div",{className:"SRC-type",children:"Organization"}),d&&a("div",{className:"SRC-cardThumbnail",children:a("img",{alt:"funder logo",className:"SRC-logo",src:d})}),a("div",{children:w("h3",{children:[h&&r,!h&&a("a",{href:s,children:r})]})}),a("div",{className:"SRC-website",children:a("a",{rel:"noopener noreferrer",target:"_blank",href:o,children:p})}),a("div",{className:"SRC-description",children:i})]}),m]})}}try{qn.displayName="Funder",qn.__docgenInfo={description:"",displayName:"Funder",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/Funder.tsx#Funder"]={docgenInfo:qn.__docgenInfo,name:"Funder",path:"src/lib/containers/row_renderers/Funder.tsx#Funder"})}catch{}try{Fe.displayName="Dataset",Fe.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/index.tsx#Dataset"]={docgenInfo:Fe.__docgenInfo,name:"Dataset",path:"src/lib/containers/row_renderers/index.tsx#Dataset"})}catch{}try{rowrenderers.displayName="rowrenderers",rowrenderers.__docgenInfo={description:"",displayName:"rowrenderers",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/index.tsx#rowrenderers"]={docgenInfo:rowrenderers.__docgenInfo,name:"rowrenderers",path:"src/lib/containers/row_renderers/index.tsx#rowrenderers"})}catch{}const He=(e,t)=>e>0?`${e} ${t}${e>1?"s":""} `:"",pc=(e,t)=>{const n=Hn.duration(e,t),r=n.years(),s=n.months()%12,i=n.days()%31,o=n.hours()%24,d=n.minutes()%60,p=n.seconds()%60;return`${He(r,"year")}${He(s,"month")}${He(i,"day")}${He(o,"hour")}${He(d,"minute")}${He(p,"second")}`.trim()},xn=({data:e,schema:t})=>{const n=e[t.submitterName],r=e[t.submitterUserId],s=e[t.time],i=e[t.timeUnits],o=e[t.text],d=e[t.tag];return w("div",{className:"SRC-portalCard ObservationCard",children:[w("div",{className:"ObservationCard__submitter",children:[!r&&a("div",{children:n}),r&&a(Pe,{size:"SMALL USER CARD",ownerId:r})]}),s&&w("div",{className:"ObservationCard__time",children:[a(Z,{options:{icon:"time"}}),a("span",{children:pc(s,i)})]}),a("div",{className:"ObservationCard__text",children:a(Ws,{summary:o})}),a("div",{className:"ObservationCard__tags",children:d&&a("span",{className:"SRC-tag",children:d})})]})},On=()=>w("div",{className:"SRC-portalCard ObservationCard",children:[a("div",{className:"ObservationCard__submitter",children:a("span",{children:a(Jn,{width:"100px"})})}),a("div",{className:"ObservationCard__time",children:a(Z,{options:{icon:"time"}})}),a("div",{className:"ObservationCard__text",children:a(br,{numCols:1,numRows:4})}),a("div",{className:"ObservationCard__tags",children:a(Jn,{width:"80px"})})]});try{xn.displayName="ObservationCard",xn.__docgenInfo={description:`Specialized Observation Card, initially implemented for the NF portal.
Expects the following columns: submitterName, submitterUserId, time, timeUnits, text, and tag.`,displayName:"ObservationCard",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"ObservationCardSchema"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"Record<string, string>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/ObservationCard.tsx#ObservationCard"]={docgenInfo:xn.__docgenInfo,name:"ObservationCard",path:"src/lib/containers/row_renderers/ObservationCard.tsx#ObservationCard"})}catch{}try{On.displayName="LoadingObservationCard",On.__docgenInfo={description:"",displayName:"LoadingObservationCard",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/ObservationCard.tsx#LoadingObservationCard"]={docgenInfo:On.__docgenInfo,name:"LoadingObservationCard",path:"src/lib/containers/row_renderers/ObservationCard.tsx#LoadingObservationCard"})}catch{}const Ct=e=>{const{isHeader:t=!1,unitDescription:n,type:r,isLoading:s,secondaryLabelLimit:i=3,title:o,...d}=e,p=ri(),{data:h,getLastQueryRequest:C,appendNextPageToResults:m,hasNextPage:u}=p,b=C(),f=(l,_)=>{switch(_){case ir:return a(Fe,{...l});case Os:return a(qn,{...l});case xs:return a(bt,{...l,queryContext:p});case Yn:return a(xn,{...l});default:return a("div",{},l.key)}},c=h!=null&&h.queryResult.queryResults.tableId?[h==null?void 0:h.queryResult.queryResults.tableId]:[],y=lr({ids:c,type:"ENTITY_HEADER"});if(h){if(h&&h.queryResult.queryResults.rows.length===0)return b.query.additionalFilters?a($r,{}):a(Kr,{})}else return w("div",{children:[s&&r===Yn&&a(On,{}),s&&r!==Yn&&Ar]});const S={};h.queryResult.queryResults.headers.forEach((l,_)=>{S[l.name]=_});const R=u&&a("div",{className:"SRC-viewMore bootstrap-4-backport",children:a(ne,{variant:"secondary",className:"pill-xl",onClick:()=>{m()},children:"View More"})});let g;if(r===Ea){const l=h.queryResult.queryResults.headers.findIndex(A=>A.columnType===M.USERID);if(l===-1)throw Error("Type MEDIUM_USER_CARD specified but no columnType USERID found");const _=h.queryResult.queryResults.rows.map(A=>A.values.filter(T=>T!==null)[l]);g=a(Ki,{data:h,list:_,size:Ea})}else{const l=h.queryResult.queryResults.rows;g=l.length?l.map(_=>{const T={key:JSON.stringify(_.values),type:r,schema:S,isHeader:t,secondaryLabelLimit:i,data:_.values,selectColumns:h.selectColumns,columnModels:h.columnModels,tableEntityConcreteType:y[0]&&y[0].type,tableId:h==null?void 0:h.queryResult.queryResults.tableId,...d};return f(T,r)}):a(x,{})}return w("div",{role:"list",children:[o&&a("h2",{className:"SRC-card-overview-title",children:o}),!o&&n&&a(mr,{frontText:"Displaying"}),g,R]})};try{Ct.displayName="CardContainer",Ct.__docgenInfo={description:"",displayName:"CardContainer",props:{isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/CardContainer.tsx#CardContainer"]={docgenInfo:Ct.__docgenInfo,name:"CardContainer",path:"src/lib/containers/CardContainer.tsx#CardContainer"})}catch{}const kn=({sortConfig:e,facetAliases:t})=>{const{defaultColumn:n,defaultDirection:r,sortableColumns:s}=e,i=Ae(),{getLastQueryRequest:o,executeQueryRequest:d}=i,[p,h]=v.exports.useState(n),[C,m]=v.exports.useState(r),u=s.map(f=>({value:f,label:qe(f,t)})),b=f=>{const c=o();let y="ASC";f===p&&(y=C==="ASC"?"DESC":"ASC");const S=f?[{column:f,direction:y}]:void 0;c.query.sort=S,d(c),h(f),m(y)};return w("div",{className:"QuerySortSelector bootstrap-4-backport",children:[a(Ze,{variant:"label",className:"sort-by-label SRC-inlineBlock",children:"Sort by"}),a(li,{className:"react-select-container SRC-inlineBlock",value:ci(p,u),options:u,onChange:f=>b(f==null?void 0:f.value),components:{Control:di},styles:{control:f=>({...f,marginLeft:"15px"})}})]})};try{kn.displayName="QuerySortSelector",kn.__docgenInfo={description:"",displayName:"QuerySortSelector",props:{sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!0,type:{name:"SortConfiguration"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/QuerySortSelector.tsx#QuerySortSelector"]={docgenInfo:kn.__docgenInfo,name:"QuerySortSelector",path:"src/lib/containers/QuerySortSelector.tsx#QuerySortSelector"})}catch{}var ve=(e=>(e.CURRENT_WINDOW="_self",e.NEW_WINDOW="_blank",e.PARENT_FRAME="_parent",e.FULL_WINDOW_BODY="_top",e))(ve||{});const Ln=e=>{const t=pa(e.sql,e.searchParams,e.sqlOperator),{sortConfig:n,facetAliases:r}=e,s=n?[{column:n.defaultColumn,direction:n.defaultDirection}]:void 0,i={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:je(t),query:{sql:t,limit:e.limit,sort:s},partMask:vt|At|la|ar|ca|da|ia|ua};return a(ut,{...e,initQueryRequest:i,children:w(ma,{rgbIndex:e.rgbIndex,unitDescription:e.unitDescription,facetAliases:e.facetAliases,children:[n&&a(kn,{sortConfig:n,facetAliases:r}),a(Ct,{...e}),a(ha,{children:o=>a(rr,{error:o==null?void 0:o.error})})]})})},wd=Ln;try{Ln.displayName="CardContainerLogic",Ln.__docgenInfo={description:"Class wraps around CardContainer and serves as a standalone logic container for rendering cards.",displayName:"CardContainerLogic",props:{limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"KeyValue"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!1,type:{name:"SortConfiguration"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/CardContainerLogic.tsx#CardContainerLogic"]={docgenInfo:Ln.__docgenInfo,name:"CardContainerLogic",path:"src/lib/containers/CardContainerLogic.tsx#CardContainerLogic"})}catch{}export{Ji as A,wd as C,ht as D,Ir as E,Tn as F,De as H,fn as I,ji as L,Yt as M,zt as P,nc as Q,de as S,me as a,Gi as b,Cd as c,Qr as d,sn as e,ln as f,vn as g,ja as h,cc as i,rc as j,no as u};
