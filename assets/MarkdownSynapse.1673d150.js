import{f as pn,R as mn,T as gn,W as yn,F as Ei,X as bn,k as oi,B as vn,Y as wn,l as Ht,Z as _n,_ as Sn,E as xn}from"./index.857eb08b.js";import{U as zt}from"./UserCard.ebe2bd0e.js";import{a as Q,j as w,F as ge}from"./jsx-runtime.00d70968.js";import"./assert.761db4f8.js";import{c as Cn,P as Tn}from"./factory.ad29f54f.js";import{p as On}from"./sqlFunctions.b49ac766.js";import{S as En}from"./SynapseVideo.e02aa4f7.js";import{u as In}from"./react-intersection-observer.esm.e445ee86.js";import{f as An}from"./DateFormatter.74ae9227.js";import{h as kn}from"./moment.a565bb48.js";import{S as Rn}from"./SkeletonTable.6f049078.js";import{S as Pn}from"./Skeleton.c897a2bf.js";import{c as _,A as Dn,B as Nn,C as Mn,D as $n,G as Ln,H as ve,b as Bn}from"./iframe.99697dbc.js";import{b as jn,p as li}from"./index.8dcb89ef.js";import{B as Ii}from"./Button.fda23eee.js";function Un(r,e){const{accessToken:t}=pn(),i={accessRequirementId:r};return mn(["approvedSubmissionInfo",i],async n=>await gn({...i,nextPageToken:n.pageParam},t),{...e,getNextPageParam:n=>n.nextPageToken})}const Dt=window.React;class ot extends Dt.Component{constructor(e){super(e),this.renderBookmarks=this.renderBookmarks.bind(this)}renderBookmarks(){const e=String(this.props.footnotes),t=/Synapse widget&gt;<\/span>(.*)</g;let i;const n=[];for(;i=t.exec(e);)n.push(i[1]);return n.map((s,a)=>{const l=a<n.length-1;return Q(Dt.Fragment,{children:[Q("button",{className:"SRC-markdown-bookmark",id:`bookmark${a}`,children:["[",a+1,"]"]}),w("span",{dangerouslySetInnerHTML:{__html:s}}),l&&w("br",{})]},a)})}render(){return Q(Dt.Fragment,{children:[w("hr",{}),this.renderBookmarks()]})}}const Fn=ot;try{ot.displayName="Bookmarks",ot.__docgenInfo={description:"",displayName:"Bookmarks",props:{footnotes:{defaultValue:null,description:"",name:"footnotes",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/Bookmarks.tsx#Bookmarks"]={docgenInfo:ot.__docgenInfo,name:"Bookmarks",path:"src/lib/containers/widgets/Bookmarks.tsx#Bookmarks"})}catch{}const Ai=window.React;class De extends Ai.Component{constructor(e){super(e),this.getEntity=this.getEntity.bind(this),this.getSynapseFiles=this.getSynapseFiles.bind(this),this.state={preSignedURL:""}}getEntity(){const{synapseId:e}=this.props;e&&yn(this.context.accessToken,e).then(t=>{const i=[{associateObjectId:e,associateObjectType:Ei.FileEntity,fileHandleId:t.dataFileHandleId}];this.getSynapseFiles(i,t.dataFileHandleId)})}getSynapseFiles(e,t){bn({includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:e},this.context.accessToken).then(n=>{const{preSignedURL:s}=n.requestedFiles.filter(a=>a.fileHandleId===t)[0];this.setState({preSignedURL:s})}).catch(n=>{console.error("Error on getting image ",n)})}componentDidMount(){if(!this.props.wikiId)this.getEntity();else{const{fileName:e,fileResults:t=[]}=this.props,{id:i}=t.filter(s=>s.fileName===e)[0],n=[{associateObjectId:this.props.wikiId,associateObjectType:Ei.WikiAttachment,fileHandleId:i}];this.getSynapseFiles(n,i)}}render(){const{params:e}=this.props,{align:t="",altText:i="synapse image"}=e;let n="auto";e.scale&&e.scale!=="100"&&(n=`${Number(e.scale)}%`);const s=t.toLowerCase();let a="";s==="left"&&(a="floatLeft"),s==="right"&&(a="floatright"),s==="center"&&(a="align-center");let l={width:n,height:n};return this.state.preSignedURL?w(Ai.Fragment,{children:w("img",{alt:i,className:"img-fluid  "+a,src:this.state.preSignedURL,style:l})}):null}}De.contextType=oi;const ki=De;try{De.displayName="SynapseImage",De.__docgenInfo={description:"",displayName:"SynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},fileResults:{defaultValue:null,description:"",name:"fileResults",required:!1,type:{name:"FileHandle[]"}},params:{defaultValue:null,description:"",name:"params",required:!0,type:{name:"{ align: string; scale: string; responsive: string; altText: string; }"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/SynapseImage.tsx#SynapseImage"]={docgenInfo:De.__docgenInfo,name:"SynapseImage",path:"src/lib/containers/widgets/SynapseImage.tsx#SynapseImage"})}catch{}const Hn=window.React,zn=Cn(Tn);class Ne extends Hn.Component{constructor(e){super(e),this.state={isLoaded:!1,queryData:{}},this.fetchPlotlyData=this.fetchPlotlyData.bind(this),this.showPlot=this.showPlot.bind(this)}componentDidMount(){this.fetchPlotlyData()}fetchPlotlyData(){const{query:e}=this.props.widgetparamsMapped,t={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:vn,entityId:On(e),query:{sql:e}};wn(t,this.context.accessToken).then(i=>{this.setState({isLoaded:!0,queryData:i})}).catch(i=>{console.log("Error on full table query ",i)})}showPlot(){var v,p,b,d;if(!this.state.isLoaded)return;const{title:e,xtitle:t,ytitle:i,type:n,xaxistype:s,showlegend:a}=this.props.widgetparamsMapped,l=this.state,o=this.props.widgetparamsMapped.horizontal.toLowerCase(),u={showlegend:a,title:e};t&&(u.xaxis={title:t}),s&&(u.xaxis={...u.xaxis,xaxistype:s.toLowerCase()}),i&&(u.yaxis={title:i});const f=[],c=o?"v":"h",m=(p=(v=l.queryData.queryResult)==null?void 0:v.queryResults.headers)!=null?p:[];for(let C=0;C<m.length-1;C+=1)f[C]={orientation:c,name:m[C+1].name,type:n.toLowerCase(),x:[],y:[]};for(const C of(d=(b=l.queryData.queryResult)==null?void 0:b.queryResults.rows)!=null?d:[])for(let N=1;N<C.values.length;N+=1){const L=C.values;f[N-1].x.push(L[0]),f[N-1].y.push(L[N])}return w(zn,{layout:u,data:f})}render(){return this.state.isLoaded?this.showPlot():null}}Ne.contextType=oi;const Wn=Ne;try{Ne.displayName="SynapsePlot",Ne.__docgenInfo={description:"",displayName:"SynapsePlot",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},widgetparamsMapped:{defaultValue:null,description:"",name:"widgetparamsMapped",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/SynapsePlot.tsx#SynapsePlot"]={docgenInfo:Ne.__docgenInfo,name:"SynapsePlot",path:"src/lib/containers/widgets/SynapsePlot.tsx#SynapsePlot"})}catch{}const lt=({info:r})=>w(ge,{children:r&&Q("p",{className:"SubmissionInfoCard",children:[w("strong",{children:" Project Lead: "})," ",w("span",{children:r.projectLead})," ",w("br",{}),w("strong",{children:" Institution: "})," ",w("span",{children:r.institution})," ",w("br",{}),w("strong",{children:" Data Access Request Submitted By: "})," ",w(zt,{ownerId:r.submittedBy,size:Ht})," ",w("br",{}),Q("strong",{children:[" ","Intended Data Use Statement (accepted on"," ",An(kn(r.modifiedOn),"M/D/YYYY"),"):"]}),w("div",{children:r.intendedDataUseStatement}),r.accessorChanges&&r.accessorChanges.map(e=>Q("div",{children:[w(zt,{ownerId:e.userId,size:Ht})," ",e.type]},`${e.userId}-${e.type}`))]})}),Me=()=>Q("p",{className:"SubmissionInfoCard",children:[w(Rn,{numCols:1,numRows:4}),w(Pn,{variant:"rect",width:"100%",height:80})]});try{lt.displayName="SubmissionInfoCard",lt.__docgenInfo={description:"",displayName:"SubmissionInfoCard",props:{info:{defaultValue:null,description:"",name:"info",required:!0,type:{name:"SubmissionInfo"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReportSubmissionInfo.tsx#SubmissionInfoCard"]={docgenInfo:lt.__docgenInfo,name:"SubmissionInfoCard",path:"src/lib/containers/IDUReportSubmissionInfo.tsx#SubmissionInfoCard"})}catch{}try{Me.displayName="LoadingSubmissionInfoCard",Me.__docgenInfo={description:"",displayName:"LoadingSubmissionInfoCard",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReportSubmissionInfo.tsx#LoadingSubmissionInfoCard"]={docgenInfo:Me.__docgenInfo,name:"LoadingSubmissionInfoCard",path:"src/lib/containers/IDUReportSubmissionInfo.tsx#LoadingSubmissionInfoCard"})}catch{}const Vn=window.React,qn=window.React.useEffect,ut=r=>{var c;const{accessRequirementId:e}=r,{ref:t,inView:i}=In(),{data:n,status:s,isLoading:a,hasNextPage:l,isFetchingNextPage:o,fetchNextPage:u}=Un(e,{useErrorBoundary:!0});qn(()=>{s==="success"&&!o&&l&&u&&i&&u()},[s,l,o,u,i]);const f=(c=n==null?void 0:n.pages.flatMap(m=>m.results))!=null?c:[];return Q(ge,{children:[f.length>0&&Q("div",{className:"IDUReport",children:[f.map(m=>Q(Vn.Fragment,{children:[w(lt,{info:m}),w("hr",{})]},JSON.stringify(m))),w("div",{ref:t})]}),(a||o)&&Q(ge,{children:[w(Me,{}),w(Me,{})]})]})},Gn=ut;try{ut.displayName="IDUReport",ut.__docgenInfo={description:"",displayName:"IDUReport",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReport.tsx#IDUReport"]={docgenInfo:ut.__docgenInfo,name:"IDUReport",path:"src/lib/containers/IDUReport.tsx#IDUReport"})}catch{}var lr={},qe={},_t={},St=_&&_.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_t,"__esModule",{value:!0});var Yn=St(Dn),Kn=St(Nn),Nt=St(Mn),Jn=St($n);function Y(r){return r===" "||r===`
`||r==="	"||r==="\f"||r==="\r"}function Ri(r){return r>="a"&&r<="z"||r>="A"&&r<="Z"}function $(r,e,t){var i=r.toLowerCase();return r===i?function(n,s){s===i?n._state=e:(n._state=t,n._index--)}:function(n,s){s===i||s===r?n._state=e:(n._state=t,n._index--)}}function te(r,e){var t=r.toLowerCase();return function(i,n){n===t||n===r?i._state=e:(i._state=3,i._index--)}}var Qn=$("C",24,16),Xn=$("D",25,16),Zn=$("A",26,16),es=$("T",27,16),ts=$("A",28,16),is=te("R",35),rs=te("I",36),ns=te("P",37),ss=te("T",38),as=$("R",40,1),os=$("I",41,1),ls=$("P",42,1),us=$("T",43,1),fs=te("Y",45),hs=te("L",46),cs=te("E",47),ds=$("Y",49,1),ps=$("L",50,1),ms=$("E",51,1),gs=te("I",54),ys=te("T",55),bs=te("L",56),vs=te("E",57),ws=$("I",58,1),_s=$("T",59,1),Ss=$("L",60,1),xs=$("E",61,1),Cs=$("#",63,64),Ts=$("X",66,65),Os=function(){function r(e,t){var i;this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1,this.cbs=t,this.xmlMode=!!(e!=null&&e.xmlMode),this.decodeEntities=(i=e==null?void 0:e.decodeEntities)!==null&&i!==void 0?i:!0}return r.prototype.reset=function(){this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1},r.prototype.write=function(e){this.ended&&this.cbs.onerror(Error(".write() after done!")),this.buffer+=e,this.parse()},r.prototype.end=function(e){this.ended&&this.cbs.onerror(Error(".end() after done!")),e&&this.write(e),this.ended=!0,this.running&&this.finish()},r.prototype.pause=function(){this.running=!1},r.prototype.resume=function(){this.running=!0,this._index<this.buffer.length&&this.parse(),this.ended&&this.finish()},r.prototype.getAbsoluteIndex=function(){return this.bufferOffset+this._index},r.prototype.stateText=function(e){e==="<"?(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this._state=2,this.sectionStart=this._index):this.decodeEntities&&e==="&"&&(this.special===1||this.special===4)&&(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this.baseState=1,this._state=62,this.sectionStart=this._index)},r.prototype.isTagStartChar=function(e){return Ri(e)||this.xmlMode&&!Y(e)&&e!=="/"&&e!==">"},r.prototype.stateBeforeTagName=function(e){e==="/"?this._state=5:e==="<"?(this.cbs.ontext(this.getSection()),this.sectionStart=this._index):e===">"||this.special!==1||Y(e)?this._state=1:e==="!"?(this._state=15,this.sectionStart=this._index+1):e==="?"?(this._state=17,this.sectionStart=this._index+1):this.isTagStartChar(e)?(this._state=!this.xmlMode&&(e==="s"||e==="S")?32:!this.xmlMode&&(e==="t"||e==="T")?52:3,this.sectionStart=this._index):this._state=1},r.prototype.stateInTagName=function(e){(e==="/"||e===">"||Y(e))&&(this.emitToken("onopentagname"),this._state=8,this._index--)},r.prototype.stateBeforeClosingTagName=function(e){Y(e)||(e===">"?this._state=1:this.special!==1?this.special!==4&&(e==="s"||e==="S")?this._state=33:this.special===4&&(e==="t"||e==="T")?this._state=53:(this._state=1,this._index--):this.isTagStartChar(e)?(this._state=6,this.sectionStart=this._index):(this._state=20,this.sectionStart=this._index))},r.prototype.stateInClosingTagName=function(e){(e===">"||Y(e))&&(this.emitToken("onclosetag"),this._state=7,this._index--)},r.prototype.stateAfterClosingTagName=function(e){e===">"&&(this._state=1,this.sectionStart=this._index+1)},r.prototype.stateBeforeAttributeName=function(e){e===">"?(this.cbs.onopentagend(),this._state=1,this.sectionStart=this._index+1):e==="/"?this._state=4:Y(e)||(this._state=9,this.sectionStart=this._index)},r.prototype.stateInSelfClosingTag=function(e){e===">"?(this.cbs.onselfclosingtag(),this._state=1,this.sectionStart=this._index+1,this.special=1):Y(e)||(this._state=8,this._index--)},r.prototype.stateInAttributeName=function(e){(e==="="||e==="/"||e===">"||Y(e))&&(this.cbs.onattribname(this.getSection()),this.sectionStart=-1,this._state=10,this._index--)},r.prototype.stateAfterAttributeName=function(e){e==="="?this._state=11:e==="/"||e===">"?(this.cbs.onattribend(void 0),this._state=8,this._index--):Y(e)||(this.cbs.onattribend(void 0),this._state=9,this.sectionStart=this._index)},r.prototype.stateBeforeAttributeValue=function(e){e==='"'?(this._state=12,this.sectionStart=this._index+1):e==="'"?(this._state=13,this.sectionStart=this._index+1):Y(e)||(this._state=14,this.sectionStart=this._index,this._index--)},r.prototype.handleInAttributeValue=function(e,t){e===t?(this.emitToken("onattribdata"),this.cbs.onattribend(t),this._state=8):this.decodeEntities&&e==="&"&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},r.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,'"')},r.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,"'")},r.prototype.stateInAttributeValueNoQuotes=function(e){Y(e)||e===">"?(this.emitToken("onattribdata"),this.cbs.onattribend(null),this._state=8,this._index--):this.decodeEntities&&e==="&"&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},r.prototype.stateBeforeDeclaration=function(e){this._state=e==="["?23:e==="-"?18:16},r.prototype.stateInDeclaration=function(e){e===">"&&(this.cbs.ondeclaration(this.getSection()),this._state=1,this.sectionStart=this._index+1)},r.prototype.stateInProcessingInstruction=function(e){e===">"&&(this.cbs.onprocessinginstruction(this.getSection()),this._state=1,this.sectionStart=this._index+1)},r.prototype.stateBeforeComment=function(e){e==="-"?(this._state=19,this.sectionStart=this._index+1):this._state=16},r.prototype.stateInComment=function(e){e==="-"&&(this._state=21)},r.prototype.stateInSpecialComment=function(e){e===">"&&(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index)),this._state=1,this.sectionStart=this._index+1)},r.prototype.stateAfterComment1=function(e){e==="-"?this._state=22:this._state=19},r.prototype.stateAfterComment2=function(e){e===">"?(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):e!=="-"&&(this._state=19)},r.prototype.stateBeforeCdata6=function(e){e==="["?(this._state=29,this.sectionStart=this._index+1):(this._state=16,this._index--)},r.prototype.stateInCdata=function(e){e==="]"&&(this._state=30)},r.prototype.stateAfterCdata1=function(e){e==="]"?this._state=31:this._state=29},r.prototype.stateAfterCdata2=function(e){e===">"?(this.cbs.oncdata(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):e!=="]"&&(this._state=29)},r.prototype.stateBeforeSpecialS=function(e){e==="c"||e==="C"?this._state=34:e==="t"||e==="T"?this._state=44:(this._state=3,this._index--)},r.prototype.stateBeforeSpecialSEnd=function(e){this.special===2&&(e==="c"||e==="C")?this._state=39:this.special===3&&(e==="t"||e==="T")?this._state=48:this._state=1},r.prototype.stateBeforeSpecialLast=function(e,t){(e==="/"||e===">"||Y(e))&&(this.special=t),this._state=3,this._index--},r.prototype.stateAfterSpecialLast=function(e,t){e===">"||Y(e)?(this.special=1,this._state=6,this.sectionStart=this._index-t,this._index--):this._state=1},r.prototype.parseFixedEntity=function(e){if(e===void 0&&(e=this.xmlMode?Jn.default:Kn.default),this.sectionStart+1<this._index){var t=this.buffer.substring(this.sectionStart+1,this._index);Object.prototype.hasOwnProperty.call(e,t)&&(this.emitPartial(e[t]),this.sectionStart=this._index+1)}},r.prototype.parseLegacyEntity=function(){for(var e=this.sectionStart+1,t=Math.min(this._index-e,6);t>=2;){var i=this.buffer.substr(e,t);if(Object.prototype.hasOwnProperty.call(Nt.default,i)){this.emitPartial(Nt.default[i]),this.sectionStart+=t+1;return}t--}},r.prototype.stateInNamedEntity=function(e){e===";"?(this.parseFixedEntity(),this.baseState===1&&this.sectionStart+1<this._index&&!this.xmlMode&&this.parseLegacyEntity(),this._state=this.baseState):(e<"0"||e>"9")&&!Ri(e)&&(this.xmlMode||this.sectionStart+1===this._index||(this.baseState!==1?e!=="="&&this.parseFixedEntity(Nt.default):this.parseLegacyEntity()),this._state=this.baseState,this._index--)},r.prototype.decodeNumericEntity=function(e,t,i){var n=this.sectionStart+e;if(n!==this._index){var s=this.buffer.substring(n,this._index),a=parseInt(s,t);this.emitPartial(Yn.default(a)),this.sectionStart=i?this._index+1:this._index}this._state=this.baseState},r.prototype.stateInNumericEntity=function(e){e===";"?this.decodeNumericEntity(2,10,!0):(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(2,10,!1),this._index--)},r.prototype.stateInHexEntity=function(e){e===";"?this.decodeNumericEntity(3,16,!0):(e<"a"||e>"f")&&(e<"A"||e>"F")&&(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(3,16,!1),this._index--)},r.prototype.cleanup=function(){this.sectionStart<0?(this.buffer="",this.bufferOffset+=this._index,this._index=0):this.running&&(this._state===1?(this.sectionStart!==this._index&&this.cbs.ontext(this.buffer.substr(this.sectionStart)),this.buffer="",this.bufferOffset+=this._index,this._index=0):this.sectionStart===this._index?(this.buffer="",this.bufferOffset+=this._index,this._index=0):(this.buffer=this.buffer.substr(this.sectionStart),this._index-=this.sectionStart,this.bufferOffset+=this.sectionStart),this.sectionStart=0)},r.prototype.parse=function(){for(;this._index<this.buffer.length&&this.running;){var e=this.buffer.charAt(this._index);this._state===1?this.stateText(e):this._state===12?this.stateInAttributeValueDoubleQuotes(e):this._state===9?this.stateInAttributeName(e):this._state===19?this.stateInComment(e):this._state===20?this.stateInSpecialComment(e):this._state===8?this.stateBeforeAttributeName(e):this._state===3?this.stateInTagName(e):this._state===6?this.stateInClosingTagName(e):this._state===2?this.stateBeforeTagName(e):this._state===10?this.stateAfterAttributeName(e):this._state===13?this.stateInAttributeValueSingleQuotes(e):this._state===11?this.stateBeforeAttributeValue(e):this._state===5?this.stateBeforeClosingTagName(e):this._state===7?this.stateAfterClosingTagName(e):this._state===32?this.stateBeforeSpecialS(e):this._state===21?this.stateAfterComment1(e):this._state===14?this.stateInAttributeValueNoQuotes(e):this._state===4?this.stateInSelfClosingTag(e):this._state===16?this.stateInDeclaration(e):this._state===15?this.stateBeforeDeclaration(e):this._state===22?this.stateAfterComment2(e):this._state===18?this.stateBeforeComment(e):this._state===33?this.stateBeforeSpecialSEnd(e):this._state===53?ws(this,e):this._state===39?as(this,e):this._state===40?os(this,e):this._state===41?ls(this,e):this._state===34?is(this,e):this._state===35?rs(this,e):this._state===36?ns(this,e):this._state===37?ss(this,e):this._state===38?this.stateBeforeSpecialLast(e,2):this._state===42?us(this,e):this._state===43?this.stateAfterSpecialLast(e,6):this._state===44?fs(this,e):this._state===29?this.stateInCdata(e):this._state===45?hs(this,e):this._state===46?cs(this,e):this._state===47?this.stateBeforeSpecialLast(e,3):this._state===48?ds(this,e):this._state===49?ps(this,e):this._state===50?ms(this,e):this._state===51?this.stateAfterSpecialLast(e,5):this._state===52?gs(this,e):this._state===54?ys(this,e):this._state===55?bs(this,e):this._state===56?vs(this,e):this._state===57?this.stateBeforeSpecialLast(e,4):this._state===58?_s(this,e):this._state===59?Ss(this,e):this._state===60?xs(this,e):this._state===61?this.stateAfterSpecialLast(e,5):this._state===17?this.stateInProcessingInstruction(e):this._state===64?this.stateInNamedEntity(e):this._state===23?Qn(this,e):this._state===62?Cs(this,e):this._state===24?Xn(this,e):this._state===25?Zn(this,e):this._state===30?this.stateAfterCdata1(e):this._state===31?this.stateAfterCdata2(e):this._state===26?es(this,e):this._state===27?ts(this,e):this._state===28?this.stateBeforeCdata6(e):this._state===66?this.stateInHexEntity(e):this._state===65?this.stateInNumericEntity(e):this._state===63?Ts(this,e):this.cbs.onerror(Error("unknown _state"),this._state),this._index++}this.cleanup()},r.prototype.finish=function(){this.sectionStart<this._index&&this.handleTrailingData(),this.cbs.onend()},r.prototype.handleTrailingData=function(){var e=this.buffer.substr(this.sectionStart);this._state===29||this._state===30||this._state===31?this.cbs.oncdata(e):this._state===19||this._state===21||this._state===22?this.cbs.oncomment(e):this._state===64&&!this.xmlMode?(this.parseLegacyEntity(),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):this._state===65&&!this.xmlMode?(this.decodeNumericEntity(2,10,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):this._state===66&&!this.xmlMode?(this.decodeNumericEntity(3,16,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):this._state!==3&&this._state!==8&&this._state!==11&&this._state!==10&&this._state!==9&&this._state!==13&&this._state!==12&&this._state!==14&&this._state!==6&&this.cbs.ontext(e)},r.prototype.getSection=function(){return this.buffer.substring(this.sectionStart,this._index)},r.prototype.emitToken=function(e){this.cbs[e](this.getSection()),this.sectionStart=-1},r.prototype.emitPartial=function(e){this.baseState!==1?this.cbs.onattribdata(e):this.cbs.ontext(e)},r}();_t.default=Os;var Es=_&&_.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qe,"__esModule",{value:!0});qe.Parser=void 0;var Is=Es(_t),xe=new Set(["input","option","optgroup","select","button","datalist","textarea"]),I=new Set(["p"]),Pi={tr:new Set(["tr","th","td"]),th:new Set(["th"]),td:new Set(["thead","th","td"]),body:new Set(["head","link","script"]),li:new Set(["li"]),p:I,h1:I,h2:I,h3:I,h4:I,h5:I,h6:I,select:xe,input:xe,output:xe,button:xe,datalist:xe,textarea:xe,option:new Set(["option"]),optgroup:new Set(["optgroup","option"]),dd:new Set(["dt","dd"]),dt:new Set(["dt","dd"]),address:I,article:I,aside:I,blockquote:I,details:I,div:I,dl:I,fieldset:I,figcaption:I,figure:I,footer:I,form:I,header:I,hr:I,main:I,nav:I,ol:I,pre:I,section:I,table:I,ul:I,rt:new Set(["rt","rp"]),rp:new Set(["rt","rp"]),tbody:new Set(["thead","tbody"]),tfoot:new Set(["thead","tbody"])},Mt=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),Di=new Set(["math","svg"]),Ni=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),As=/\s|\//,ks=function(){function r(e,t){t===void 0&&(t={});var i,n,s,a,l;this.startIndex=0,this.endIndex=null,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.options=t,this.cbs=e!=null?e:{},this.lowerCaseTagNames=(i=t.lowerCaseTags)!==null&&i!==void 0?i:!t.xmlMode,this.lowerCaseAttributeNames=(n=t.lowerCaseAttributeNames)!==null&&n!==void 0?n:!t.xmlMode,this.tokenizer=new((s=t.Tokenizer)!==null&&s!==void 0?s:Is.default)(this.options,this),(l=(a=this.cbs).onparserinit)===null||l===void 0||l.call(a,this)}return r.prototype.updatePosition=function(e){this.endIndex===null?this.tokenizer.sectionStart<=e?this.startIndex=0:this.startIndex=this.tokenizer.sectionStart-e:this.startIndex=this.endIndex+1,this.endIndex=this.tokenizer.getAbsoluteIndex()},r.prototype.ontext=function(e){var t,i;this.updatePosition(1),this.endIndex--,(i=(t=this.cbs).ontext)===null||i===void 0||i.call(t,e)},r.prototype.onopentagname=function(e){var t,i;if(this.lowerCaseTagNames&&(e=e.toLowerCase()),this.tagname=e,!this.options.xmlMode&&Object.prototype.hasOwnProperty.call(Pi,e))for(var n=void 0;this.stack.length>0&&Pi[e].has(n=this.stack[this.stack.length-1]);)this.onclosetag(n);(this.options.xmlMode||!Mt.has(e))&&(this.stack.push(e),Di.has(e)?this.foreignContext.push(!0):Ni.has(e)&&this.foreignContext.push(!1)),(i=(t=this.cbs).onopentagname)===null||i===void 0||i.call(t,e),this.cbs.onopentag&&(this.attribs={})},r.prototype.onopentagend=function(){var e,t;this.updatePosition(1),this.attribs&&((t=(e=this.cbs).onopentag)===null||t===void 0||t.call(e,this.tagname,this.attribs),this.attribs=null),!this.options.xmlMode&&this.cbs.onclosetag&&Mt.has(this.tagname)&&this.cbs.onclosetag(this.tagname),this.tagname=""},r.prototype.onclosetag=function(e){if(this.updatePosition(1),this.lowerCaseTagNames&&(e=e.toLowerCase()),(Di.has(e)||Ni.has(e))&&this.foreignContext.pop(),this.stack.length&&(this.options.xmlMode||!Mt.has(e))){var t=this.stack.lastIndexOf(e);if(t!==-1)if(this.cbs.onclosetag)for(t=this.stack.length-t;t--;)this.cbs.onclosetag(this.stack.pop());else this.stack.length=t;else e==="p"&&!this.options.xmlMode&&(this.onopentagname(e),this.closeCurrentTag())}else!this.options.xmlMode&&(e==="br"||e==="p")&&(this.onopentagname(e),this.closeCurrentTag())},r.prototype.onselfclosingtag=function(){this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?this.closeCurrentTag():this.onopentagend()},r.prototype.closeCurrentTag=function(){var e,t,i=this.tagname;this.onopentagend(),this.stack[this.stack.length-1]===i&&((t=(e=this.cbs).onclosetag)===null||t===void 0||t.call(e,i),this.stack.pop())},r.prototype.onattribname=function(e){this.lowerCaseAttributeNames&&(e=e.toLowerCase()),this.attribname=e},r.prototype.onattribdata=function(e){this.attribvalue+=e},r.prototype.onattribend=function(e){var t,i;(i=(t=this.cbs).onattribute)===null||i===void 0||i.call(t,this.attribname,this.attribvalue,e),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribname="",this.attribvalue=""},r.prototype.getInstructionName=function(e){var t=e.search(As),i=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(i=i.toLowerCase()),i},r.prototype.ondeclaration=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("!"+t,"!"+e)}},r.prototype.onprocessinginstruction=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("?"+t,"?"+e)}},r.prototype.oncomment=function(e){var t,i,n,s;this.updatePosition(4),(i=(t=this.cbs).oncomment)===null||i===void 0||i.call(t,e),(s=(n=this.cbs).oncommentend)===null||s===void 0||s.call(n)},r.prototype.oncdata=function(e){var t,i,n,s,a,l;this.updatePosition(1),this.options.xmlMode||this.options.recognizeCDATA?((i=(t=this.cbs).oncdatastart)===null||i===void 0||i.call(t),(s=(n=this.cbs).ontext)===null||s===void 0||s.call(n,e),(l=(a=this.cbs).oncdataend)===null||l===void 0||l.call(a)):this.oncomment("[CDATA["+e+"]]")},r.prototype.onerror=function(e){var t,i;(i=(t=this.cbs).onerror)===null||i===void 0||i.call(t,e)},r.prototype.onend=function(){var e,t;if(this.cbs.onclosetag)for(var i=this.stack.length;i>0;this.cbs.onclosetag(this.stack[--i]));(t=(e=this.cbs).onend)===null||t===void 0||t.call(e)},r.prototype.reset=function(){var e,t,i,n;(t=(e=this.cbs).onreset)===null||t===void 0||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack=[],(n=(i=this.cbs).onparserinit)===null||n===void 0||n.call(i,this)},r.prototype.parseComplete=function(e){this.reset(),this.end(e)},r.prototype.write=function(e){this.tokenizer.write(e)},r.prototype.end=function(e){this.tokenizer.end(e)},r.prototype.pause=function(){this.tokenizer.pause()},r.prototype.resume=function(){this.tokenizer.resume()},r.prototype.parseChunk=function(e){this.write(e)},r.prototype.done=function(e){this.end(e)},r}();qe.Parser=ks;var le={},Ie={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Doctype=r.CDATA=r.Tag=r.Style=r.Script=r.Comment=r.Directive=r.Text=r.Root=r.isTag=r.ElementType=void 0;var e;(function(i){i.Root="root",i.Text="text",i.Directive="directive",i.Comment="comment",i.Script="script",i.Style="style",i.Tag="tag",i.CDATA="cdata",i.Doctype="doctype"})(e=r.ElementType||(r.ElementType={}));function t(i){return i.type===e.Tag||i.type===e.Script||i.type===e.Style}r.isTag=t,r.Root=e.Root,r.Text=e.Text,r.Directive=e.Directive,r.Comment=e.Comment,r.Script=e.Script,r.Style=e.Style,r.Tag=e.Tag,r.CDATA=e.CDATA,r.Doctype=e.Doctype})(Ie);var x={},we=_&&_.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$e=_&&_.__assign||function(){return $e=Object.assign||function(r){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},$e.apply(this,arguments)};Object.defineProperty(x,"__esModule",{value:!0});x.cloneNode=x.hasChildren=x.isDocument=x.isDirective=x.isComment=x.isText=x.isCDATA=x.isTag=x.Element=x.Document=x.NodeWithChildren=x.ProcessingInstruction=x.Comment=x.Text=x.DataNode=x.Node=void 0;var P=Ie,Rs=new Map([[P.ElementType.Tag,1],[P.ElementType.Script,1],[P.ElementType.Style,1],[P.ElementType.Directive,1],[P.ElementType.Text,3],[P.ElementType.CDATA,4],[P.ElementType.Comment,8],[P.ElementType.Root,9]]),ui=function(){function r(e){this.type=e,this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(r.prototype,"nodeType",{get:function(){var e;return(e=Rs.get(this.type))!==null&&e!==void 0?e:1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),r.prototype.cloneNode=function(e){return e===void 0&&(e=!1),fi(this,e)},r}();x.Node=ui;var xt=function(r){we(e,r);function e(t,i){var n=r.call(this,t)||this;return n.data=i,n}return Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.data},set:function(t){this.data=t},enumerable:!1,configurable:!0}),e}(ui);x.DataNode=xt;var ur=function(r){we(e,r);function e(t){return r.call(this,P.ElementType.Text,t)||this}return e}(xt);x.Text=ur;var fr=function(r){we(e,r);function e(t){return r.call(this,P.ElementType.Comment,t)||this}return e}(xt);x.Comment=fr;var hr=function(r){we(e,r);function e(t,i){var n=r.call(this,P.ElementType.Directive,i)||this;return n.name=t,n}return e}(xt);x.ProcessingInstruction=hr;var Ct=function(r){we(e,r);function e(t,i){var n=r.call(this,t)||this;return n.children=i,n}return Object.defineProperty(e.prototype,"firstChild",{get:function(){var t;return(t=this.children[0])!==null&&t!==void 0?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.children},set:function(t){this.children=t},enumerable:!1,configurable:!0}),e}(ui);x.NodeWithChildren=Ct;var cr=function(r){we(e,r);function e(t){return r.call(this,P.ElementType.Root,t)||this}return e}(Ct);x.Document=cr;var dr=function(r){we(e,r);function e(t,i,n,s){n===void 0&&(n=[]),s===void 0&&(s=t==="script"?P.ElementType.Script:t==="style"?P.ElementType.Style:P.ElementType.Tag);var a=r.call(this,s,n)||this;return a.name=t,a.attribs=i,a}return Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name},set:function(t){this.name=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){var t=this;return Object.keys(this.attribs).map(function(i){var n,s;return{name:i,value:t.attribs[i],namespace:(n=t["x-attribsNamespace"])===null||n===void 0?void 0:n[i],prefix:(s=t["x-attribsPrefix"])===null||s===void 0?void 0:s[i]}})},enumerable:!1,configurable:!0}),e}(Ct);x.Element=dr;function pr(r){return(0,P.isTag)(r)}x.isTag=pr;function mr(r){return r.type===P.ElementType.CDATA}x.isCDATA=mr;function gr(r){return r.type===P.ElementType.Text}x.isText=gr;function yr(r){return r.type===P.ElementType.Comment}x.isComment=yr;function br(r){return r.type===P.ElementType.Directive}x.isDirective=br;function vr(r){return r.type===P.ElementType.Root}x.isDocument=vr;function Ps(r){return Object.prototype.hasOwnProperty.call(r,"children")}x.hasChildren=Ps;function fi(r,e){e===void 0&&(e=!1);var t;if(gr(r))t=new ur(r.data);else if(yr(r))t=new fr(r.data);else if(pr(r)){var i=e?$t(r.children):[],n=new dr(r.name,$e({},r.attribs),i);i.forEach(function(o){return o.parent=n}),r.namespace!=null&&(n.namespace=r.namespace),r["x-attribsNamespace"]&&(n["x-attribsNamespace"]=$e({},r["x-attribsNamespace"])),r["x-attribsPrefix"]&&(n["x-attribsPrefix"]=$e({},r["x-attribsPrefix"])),t=n}else if(mr(r)){var i=e?$t(r.children):[],s=new Ct(P.ElementType.CDATA,i);i.forEach(function(u){return u.parent=s}),t=s}else if(vr(r)){var i=e?$t(r.children):[],a=new cr(i);i.forEach(function(u){return u.parent=a}),r["x-mode"]&&(a["x-mode"]=r["x-mode"]),t=a}else if(br(r)){var l=new hr(r.name,r.data);r["x-name"]!=null&&(l["x-name"]=r["x-name"],l["x-publicId"]=r["x-publicId"],l["x-systemId"]=r["x-systemId"]),t=l}else throw new Error("Not implemented yet: ".concat(r.type));return t.startIndex=r.startIndex,t.endIndex=r.endIndex,r.sourceCodeLocation!=null&&(t.sourceCodeLocation=r.sourceCodeLocation),t}x.cloneNode=fi;function $t(r){for(var e=r.map(function(i){return fi(i,!0)}),t=1;t<e.length;t++)e[t].prev=e[t-1],e[t-1].next=e[t];return e}(function(r){var e=_&&_.__createBinding||(Object.create?function(o,u,f,c){c===void 0&&(c=f);var m=Object.getOwnPropertyDescriptor(u,f);(!m||("get"in m?!u.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return u[f]}}),Object.defineProperty(o,c,m)}:function(o,u,f,c){c===void 0&&(c=f),o[c]=u[f]}),t=_&&_.__exportStar||function(o,u){for(var f in o)f!=="default"&&!Object.prototype.hasOwnProperty.call(u,f)&&e(u,o,f)};Object.defineProperty(r,"__esModule",{value:!0}),r.DomHandler=void 0;var i=Ie,n=x;t(x,r);var s=/\s+/g,a={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1,xmlMode:!1},l=function(){function o(u,f,c){this.dom=[],this.root=new n.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof f=="function"&&(c=f,f=a),typeof u=="object"&&(f=u,u=void 0),this.callback=u!=null?u:null,this.options=f!=null?f:a,this.elementCB=c!=null?c:null}return o.prototype.onparserinit=function(u){this.parser=u},o.prototype.onreset=function(){this.dom=[],this.root=new n.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},o.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},o.prototype.onerror=function(u){this.handleCallback(u)},o.prototype.onclosetag=function(){this.lastNode=null;var u=this.tagStack.pop();this.options.withEndIndices&&(u.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(u)},o.prototype.onopentag=function(u,f){var c=this.options.xmlMode?i.ElementType.Tag:void 0,m=new n.Element(u,f,void 0,c);this.addNode(m),this.tagStack.push(m)},o.prototype.ontext=function(u){var f=this.options.normalizeWhitespace,c=this.lastNode;if(c&&c.type===i.ElementType.Text)f?c.data=(c.data+u).replace(s," "):c.data+=u,this.options.withEndIndices&&(c.endIndex=this.parser.endIndex);else{f&&(u=u.replace(s," "));var m=new n.Text(u);this.addNode(m),this.lastNode=m}},o.prototype.oncomment=function(u){if(this.lastNode&&this.lastNode.type===i.ElementType.Comment){this.lastNode.data+=u;return}var f=new n.Comment(u);this.addNode(f),this.lastNode=f},o.prototype.oncommentend=function(){this.lastNode=null},o.prototype.oncdatastart=function(){var u=new n.Text(""),f=new n.NodeWithChildren(i.ElementType.CDATA,[u]);this.addNode(f),u.parent=f,this.lastNode=u},o.prototype.oncdataend=function(){this.lastNode=null},o.prototype.onprocessinginstruction=function(u,f){var c=new n.ProcessingInstruction(u,f);this.addNode(c)},o.prototype.handleCallback=function(u){if(typeof this.callback=="function")this.callback(u,this.dom);else if(u)throw u},o.prototype.addNode=function(u){var f=this.tagStack[this.tagStack.length-1],c=f.children[f.children.length-1];this.options.withStartIndices&&(u.startIndex=this.parser.startIndex),this.options.withEndIndices&&(u.endIndex=this.parser.endIndex),f.children.push(u),c&&(u.prev=c,c.next=u),u.parent=f,this.lastNode=null},o}();r.DomHandler=l,r.default=l})(le);var be={},hi={},K={},ci={},Te={};Object.defineProperty(Te,"__esModule",{value:!0});Te.attributeNames=Te.elementNames=void 0;Te.elementNames=new Map([["altglyph","altGlyph"],["altglyphdef","altGlyphDef"],["altglyphitem","altGlyphItem"],["animatecolor","animateColor"],["animatemotion","animateMotion"],["animatetransform","animateTransform"],["clippath","clipPath"],["feblend","feBlend"],["fecolormatrix","feColorMatrix"],["fecomponenttransfer","feComponentTransfer"],["fecomposite","feComposite"],["feconvolvematrix","feConvolveMatrix"],["fediffuselighting","feDiffuseLighting"],["fedisplacementmap","feDisplacementMap"],["fedistantlight","feDistantLight"],["fedropshadow","feDropShadow"],["feflood","feFlood"],["fefunca","feFuncA"],["fefuncb","feFuncB"],["fefuncg","feFuncG"],["fefuncr","feFuncR"],["fegaussianblur","feGaussianBlur"],["feimage","feImage"],["femerge","feMerge"],["femergenode","feMergeNode"],["femorphology","feMorphology"],["feoffset","feOffset"],["fepointlight","fePointLight"],["fespecularlighting","feSpecularLighting"],["fespotlight","feSpotLight"],["fetile","feTile"],["feturbulence","feTurbulence"],["foreignobject","foreignObject"],["glyphref","glyphRef"],["lineargradient","linearGradient"],["radialgradient","radialGradient"],["textpath","textPath"]]);Te.attributeNames=new Map([["definitionurl","definitionURL"],["attributename","attributeName"],["attributetype","attributeType"],["basefrequency","baseFrequency"],["baseprofile","baseProfile"],["calcmode","calcMode"],["clippathunits","clipPathUnits"],["diffuseconstant","diffuseConstant"],["edgemode","edgeMode"],["filterunits","filterUnits"],["glyphref","glyphRef"],["gradienttransform","gradientTransform"],["gradientunits","gradientUnits"],["kernelmatrix","kernelMatrix"],["kernelunitlength","kernelUnitLength"],["keypoints","keyPoints"],["keysplines","keySplines"],["keytimes","keyTimes"],["lengthadjust","lengthAdjust"],["limitingconeangle","limitingConeAngle"],["markerheight","markerHeight"],["markerunits","markerUnits"],["markerwidth","markerWidth"],["maskcontentunits","maskContentUnits"],["maskunits","maskUnits"],["numoctaves","numOctaves"],["pathlength","pathLength"],["patterncontentunits","patternContentUnits"],["patterntransform","patternTransform"],["patternunits","patternUnits"],["pointsatx","pointsAtX"],["pointsaty","pointsAtY"],["pointsatz","pointsAtZ"],["preservealpha","preserveAlpha"],["preserveaspectratio","preserveAspectRatio"],["primitiveunits","primitiveUnits"],["refx","refX"],["refy","refY"],["repeatcount","repeatCount"],["repeatdur","repeatDur"],["requiredextensions","requiredExtensions"],["requiredfeatures","requiredFeatures"],["specularconstant","specularConstant"],["specularexponent","specularExponent"],["spreadmethod","spreadMethod"],["startoffset","startOffset"],["stddeviation","stdDeviation"],["stitchtiles","stitchTiles"],["surfacescale","surfaceScale"],["systemlanguage","systemLanguage"],["tablevalues","tableValues"],["targetx","targetX"],["targety","targetY"],["textlength","textLength"],["viewbox","viewBox"],["viewtarget","viewTarget"],["xchannelselector","xChannelSelector"],["ychannelselector","yChannelSelector"],["zoomandpan","zoomAndPan"]]);var Ce=_&&_.__assign||function(){return Ce=Object.assign||function(r){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Ce.apply(this,arguments)},Ds=_&&_.__createBinding||(Object.create?function(r,e,t,i){i===void 0&&(i=t),Object.defineProperty(r,i,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}),Ns=_&&_.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Ms=_&&_.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Ds(e,r,t);return Ns(e,r),e};Object.defineProperty(ci,"__esModule",{value:!0});var ae=Ms(Ie),wr=Ln,_r=Te,$s=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function Ls(r,e){if(!!r)return Object.keys(r).map(function(t){var i,n,s=(i=r[t])!==null&&i!==void 0?i:"";return e.xmlMode==="foreign"&&(t=(n=_r.attributeNames.get(t))!==null&&n!==void 0?n:t),!e.emptyAttrs&&!e.xmlMode&&s===""?t:t+'="'+(e.decodeEntities!==!1?wr.encodeXML(s):s.replace(/"/g,"&quot;"))+'"'}).join(" ")}var Mi=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function di(r,e){e===void 0&&(e={});for(var t=("length"in r)?r:[r],i="",n=0;n<t.length;n++)i+=Bs(t[n],e);return i}ci.default=di;function Bs(r,e){switch(r.type){case ae.Root:return di(r.children,e);case ae.Directive:case ae.Doctype:return Hs(r);case ae.Comment:return Vs(r);case ae.CDATA:return Ws(r);case ae.Script:case ae.Style:case ae.Tag:return Fs(r,e);case ae.Text:return zs(r,e)}}var js=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),Us=new Set(["svg","math"]);function Fs(r,e){var t;e.xmlMode==="foreign"&&(r.name=(t=_r.elementNames.get(r.name))!==null&&t!==void 0?t:r.name,r.parent&&js.has(r.parent.name)&&(e=Ce(Ce({},e),{xmlMode:!1}))),!e.xmlMode&&Us.has(r.name)&&(e=Ce(Ce({},e),{xmlMode:"foreign"}));var i="<"+r.name,n=Ls(r.attribs,e);return n&&(i+=" "+n),r.children.length===0&&(e.xmlMode?e.selfClosingTags!==!1:e.selfClosingTags&&Mi.has(r.name))?(e.xmlMode||(i+=" "),i+="/>"):(i+=">",r.children.length>0&&(i+=di(r.children,e)),(e.xmlMode||!Mi.has(r.name))&&(i+="</"+r.name+">")),i}function Hs(r){return"<"+r.data+">"}function zs(r,e){var t=r.data||"";return e.decodeEntities!==!1&&!(!e.xmlMode&&r.parent&&$s.has(r.parent.name))&&(t=wr.encodeXML(t)),t}function Ws(r){return"<![CDATA["+r.children[0].data+"]]>"}function Vs(r){return"<!--"+r.data+"-->"}var qs=_&&_.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(K,"__esModule",{value:!0});K.innerText=K.textContent=K.getText=K.getInnerHTML=K.getOuterHTML=void 0;var re=le,Gs=qs(ci),Ys=Ie;function Sr(r,e){return(0,Gs.default)(r,e)}K.getOuterHTML=Sr;function Ks(r,e){return(0,re.hasChildren)(r)?r.children.map(function(t){return Sr(t,e)}).join(""):""}K.getInnerHTML=Ks;function ft(r){return Array.isArray(r)?r.map(ft).join(""):(0,re.isTag)(r)?r.name==="br"?`
`:ft(r.children):(0,re.isCDATA)(r)?ft(r.children):(0,re.isText)(r)?r.data:""}K.getText=ft;function Wt(r){return Array.isArray(r)?r.map(Wt).join(""):(0,re.hasChildren)(r)&&!(0,re.isComment)(r)?Wt(r.children):(0,re.isText)(r)?r.data:""}K.textContent=Wt;function Vt(r){return Array.isArray(r)?r.map(Vt).join(""):(0,re.hasChildren)(r)&&(r.type===Ys.ElementType.Tag||(0,re.isCDATA)(r))?Vt(r.children):(0,re.isText)(r)?r.data:""}K.innerText=Vt;var M={};Object.defineProperty(M,"__esModule",{value:!0});M.prevElementSibling=M.nextElementSibling=M.getName=M.hasAttrib=M.getAttributeValue=M.getSiblings=M.getParent=M.getChildren=void 0;var xr=le,Js=[];function Cr(r){var e;return(e=r.children)!==null&&e!==void 0?e:Js}M.getChildren=Cr;function Tr(r){return r.parent||null}M.getParent=Tr;function Qs(r){var e,t,i=Tr(r);if(i!=null)return Cr(i);for(var n=[r],s=r.prev,a=r.next;s!=null;)n.unshift(s),e=s,s=e.prev;for(;a!=null;)n.push(a),t=a,a=t.next;return n}M.getSiblings=Qs;function Xs(r,e){var t;return(t=r.attribs)===null||t===void 0?void 0:t[e]}M.getAttributeValue=Xs;function Zs(r,e){return r.attribs!=null&&Object.prototype.hasOwnProperty.call(r.attribs,e)&&r.attribs[e]!=null}M.hasAttrib=Zs;function ea(r){return r.name}M.getName=ea;function ta(r){for(var e,t=r.next;t!==null&&!(0,xr.isTag)(t);)e=t,t=e.next;return t}M.nextElementSibling=ta;function ia(r){for(var e,t=r.prev;t!==null&&!(0,xr.isTag)(t);)e=t,t=e.prev;return t}M.prevElementSibling=ia;var V={};Object.defineProperty(V,"__esModule",{value:!0});V.prepend=V.prependChild=V.append=V.appendChild=V.replaceElement=V.removeElement=void 0;function Ge(r){if(r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),r.parent){var e=r.parent.children;e.splice(e.lastIndexOf(r),1)}}V.removeElement=Ge;function ra(r,e){var t=e.prev=r.prev;t&&(t.next=e);var i=e.next=r.next;i&&(i.prev=e);var n=e.parent=r.parent;if(n){var s=n.children;s[s.lastIndexOf(r)]=e}}V.replaceElement=ra;function na(r,e){if(Ge(e),e.next=null,e.parent=r,r.children.push(e)>1){var t=r.children[r.children.length-2];t.next=e,e.prev=t}else e.prev=null}V.appendChild=na;function sa(r,e){Ge(e);var t=r.parent,i=r.next;if(e.next=i,e.prev=r,r.next=e,e.parent=t,i){if(i.prev=e,t){var n=t.children;n.splice(n.lastIndexOf(i),0,e)}}else t&&t.children.push(e)}V.append=sa;function aa(r,e){if(Ge(e),e.parent=r,e.prev=null,r.children.unshift(e)!==1){var t=r.children[1];t.prev=e,e.next=t}else e.next=null}V.prependChild=aa;function oa(r,e){Ge(e);var t=r.parent;if(t){var i=t.children;i.splice(i.indexOf(r),0,e)}r.prev&&(r.prev.next=e),e.parent=t,e.prev=r.prev,e.next=r,r.prev=e}V.prepend=oa;var j={};Object.defineProperty(j,"__esModule",{value:!0});j.findAll=j.existsOne=j.findOne=j.findOneChild=j.find=j.filter=void 0;var Le=le;function la(r,e,t,i){return t===void 0&&(t=!0),i===void 0&&(i=1/0),Array.isArray(e)||(e=[e]),pi(r,e,t,i)}j.filter=la;function pi(r,e,t,i){for(var n=[],s=0,a=e;s<a.length;s++){var l=a[s];if(r(l)&&(n.push(l),--i<=0))break;if(t&&(0,Le.hasChildren)(l)&&l.children.length>0){var o=pi(r,l.children,t,i);if(n.push.apply(n,o),i-=o.length,i<=0)break}}return n}j.find=pi;function ua(r,e){return e.find(r)}j.findOneChild=ua;function Or(r,e,t){t===void 0&&(t=!0);for(var i=null,n=0;n<e.length&&!i;n++){var s=e[n];if((0,Le.isTag)(s))r(s)?i=s:t&&s.children.length>0&&(i=Or(r,s.children));else continue}return i}j.findOne=Or;function Er(r,e){return e.some(function(t){return(0,Le.isTag)(t)&&(r(t)||t.children.length>0&&Er(r,t.children))})}j.existsOne=Er;function fa(r,e){for(var t,i=[],n=e.filter(Le.isTag),s;s=n.shift();){var a=(t=s.children)===null||t===void 0?void 0:t.filter(Le.isTag);a&&a.length>0&&n.unshift.apply(n,a),r(s)&&i.push(s)}return i}j.findAll=fa;var J={};Object.defineProperty(J,"__esModule",{value:!0});J.getElementsByTagType=J.getElementsByTagName=J.getElementById=J.getElements=J.testElement=void 0;var me=le,Tt=j,pt={tag_name:function(r){return typeof r=="function"?function(e){return(0,me.isTag)(e)&&r(e.name)}:r==="*"?me.isTag:function(e){return(0,me.isTag)(e)&&e.name===r}},tag_type:function(r){return typeof r=="function"?function(e){return r(e.type)}:function(e){return e.type===r}},tag_contains:function(r){return typeof r=="function"?function(e){return(0,me.isText)(e)&&r(e.data)}:function(e){return(0,me.isText)(e)&&e.data===r}}};function Ir(r,e){return typeof e=="function"?function(t){return(0,me.isTag)(t)&&e(t.attribs[r])}:function(t){return(0,me.isTag)(t)&&t.attribs[r]===e}}function ha(r,e){return function(t){return r(t)||e(t)}}function Ar(r){var e=Object.keys(r).map(function(t){var i=r[t];return Object.prototype.hasOwnProperty.call(pt,t)?pt[t](i):Ir(t,i)});return e.length===0?null:e.reduce(ha)}function ca(r,e){var t=Ar(r);return t?t(e):!0}J.testElement=ca;function da(r,e,t,i){i===void 0&&(i=1/0);var n=Ar(r);return n?(0,Tt.filter)(n,e,t,i):[]}J.getElements=da;function pa(r,e,t){return t===void 0&&(t=!0),Array.isArray(e)||(e=[e]),(0,Tt.findOne)(Ir("id",r),e,t)}J.getElementById=pa;function ma(r,e,t,i){return t===void 0&&(t=!0),i===void 0&&(i=1/0),(0,Tt.filter)(pt.tag_name(r),e,t,i)}J.getElementsByTagName=ma;function ga(r,e,t,i){return t===void 0&&(t=!0),i===void 0&&(i=1/0),(0,Tt.filter)(pt.tag_type(r),e,t,i)}J.getElementsByTagType=ga;var he={};Object.defineProperty(he,"__esModule",{value:!0});he.uniqueSort=he.compareDocumentPosition=he.removeSubsets=void 0;var $i=le;function ya(r){for(var e=r.length;--e>=0;){var t=r[e];if(e>0&&r.lastIndexOf(t,e-1)>=0){r.splice(e,1);continue}for(var i=t.parent;i;i=i.parent)if(r.includes(i)){r.splice(e,1);break}}return r}he.removeSubsets=ya;function kr(r,e){var t=[],i=[];if(r===e)return 0;for(var n=(0,$i.hasChildren)(r)?r:r.parent;n;)t.unshift(n),n=n.parent;for(n=(0,$i.hasChildren)(e)?e:e.parent;n;)i.unshift(n),n=n.parent;for(var s=Math.min(t.length,i.length),a=0;a<s&&t[a]===i[a];)a++;if(a===0)return 1;var l=t[a-1],o=l.children,u=t[a],f=i[a];return o.indexOf(u)>o.indexOf(f)?l===e?20:4:l===r?10:2}he.compareDocumentPosition=kr;function ba(r){return r=r.filter(function(e,t,i){return!i.includes(e,t+1)}),r.sort(function(e,t){var i=kr(e,t);return i&2?-1:i&4?1:0}),r}he.uniqueSort=ba;var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.getFeed=void 0;var va=K,Ye=J;function wa(r){var e=mt(Ta,r);return e?e.name==="feed"?_a(e):Sa(e):null}Ot.getFeed=wa;function _a(r){var e,t=r.children,i={type:"atom",items:(0,Ye.getElementsByTagName)("entry",t).map(function(a){var l,o=a.children,u={media:Rr(o)};W(u,"id","id",o),W(u,"title","title",o);var f=(l=mt("link",o))===null||l===void 0?void 0:l.attribs.href;f&&(u.link=f);var c=ye("summary",o)||ye("content",o);c&&(u.description=c);var m=ye("updated",o);return m&&(u.pubDate=new Date(m)),u})};W(i,"id","id",t),W(i,"title","title",t);var n=(e=mt("link",t))===null||e===void 0?void 0:e.attribs.href;n&&(i.link=n),W(i,"description","subtitle",t);var s=ye("updated",t);return s&&(i.updated=new Date(s)),W(i,"author","email",t,!0),i}function Sa(r){var e,t,i=(t=(e=mt("channel",r.children))===null||e===void 0?void 0:e.children)!==null&&t!==void 0?t:[],n={type:r.name.substr(0,3),id:"",items:(0,Ye.getElementsByTagName)("item",r.children).map(function(a){var l=a.children,o={media:Rr(l)};W(o,"id","guid",l),W(o,"title","title",l),W(o,"link","link",l),W(o,"description","description",l);var u=ye("pubDate",l);return u&&(o.pubDate=new Date(u)),o})};W(n,"title","title",i),W(n,"link","link",i),W(n,"description","description",i);var s=ye("lastBuildDate",i);return s&&(n.updated=new Date(s)),W(n,"author","managingEditor",i,!0),n}var xa=["url","type","lang"],Ca=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function Rr(r){return(0,Ye.getElementsByTagName)("media:content",r).map(function(e){for(var t=e.attribs,i={medium:t.medium,isDefault:!!t.isDefault},n=0,s=xa;n<s.length;n++){var a=s[n];t[a]&&(i[a]=t[a])}for(var l=0,o=Ca;l<o.length;l++){var a=o[l];t[a]&&(i[a]=parseInt(t[a],10))}return t.expression&&(i.expression=t.expression),i})}function mt(r,e){return(0,Ye.getElementsByTagName)(r,e,!0,1)[0]}function ye(r,e,t){return t===void 0&&(t=!1),(0,va.textContent)((0,Ye.getElementsByTagName)(r,e,t,1)).trim()}function W(r,e,t,i,n){n===void 0&&(n=!1);var s=ye(t,i,n);s&&(r[e]=s)}function Ta(r){return r==="rss"||r==="feed"||r==="rdf:RDF"}(function(r){var e=_&&_.__createBinding||(Object.create?function(n,s,a,l){l===void 0&&(l=a),Object.defineProperty(n,l,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,l){l===void 0&&(l=a),n[l]=s[a]}),t=_&&_.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),r.hasChildren=r.isDocument=r.isComment=r.isText=r.isCDATA=r.isTag=void 0,t(K,r),t(M,r),t(V,r),t(j,r),t(J,r),t(he,r),t(Ot,r);var i=le;Object.defineProperty(r,"isTag",{enumerable:!0,get:function(){return i.isTag}}),Object.defineProperty(r,"isCDATA",{enumerable:!0,get:function(){return i.isCDATA}}),Object.defineProperty(r,"isText",{enumerable:!0,get:function(){return i.isText}}),Object.defineProperty(r,"isComment",{enumerable:!0,get:function(){return i.isComment}}),Object.defineProperty(r,"isDocument",{enumerable:!0,get:function(){return i.isDocument}}),Object.defineProperty(r,"hasChildren",{enumerable:!0,get:function(){return i.hasChildren}})})(hi);var Oa=_&&_.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ea=_&&_.__createBinding||(Object.create?function(r,e,t,i){i===void 0&&(i=t),Object.defineProperty(r,i,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}),Ia=_&&_.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Aa=_&&_.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Ea(e,r,t);return Ia(e,r),e},ka=_&&_.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(be,"__esModule",{value:!0});be.parseFeed=be.FeedHandler=void 0;var Ra=ka(le),gt=Aa(hi),Pa=qe,Li;(function(r){r[r.image=0]="image",r[r.audio=1]="audio",r[r.video=2]="video",r[r.document=3]="document",r[r.executable=4]="executable"})(Li||(Li={}));var Bi;(function(r){r[r.sample=0]="sample",r[r.full=1]="full",r[r.nonstop=2]="nonstop"})(Bi||(Bi={}));var Pr=function(r){Oa(e,r);function e(t,i){var n=this;return typeof t=="object"&&(t=void 0,i=t),n=r.call(this,t,i)||this,n}return e.prototype.onend=function(){var t,i,n=Qe(Da,this.dom);if(!n){this.handleCallback(new Error("couldn't find root of feed"));return}var s={};if(n.name==="feed"){var a=n.children;s.type="atom",z(s,"id","id",a),z(s,"title","title",a);var l=Ui("href",Qe("link",a));l&&(s.link=l),z(s,"description","subtitle",a);var o=pe("updated",a);o&&(s.updated=new Date(o)),z(s,"author","email",a,!0),s.items=qt("entry",a).map(function(u){var f={},c=u.children;z(f,"id","id",c),z(f,"title","title",c);var m=Ui("href",Qe("link",c));m&&(f.link=m);var v=pe("summary",c)||pe("content",c);v&&(f.description=v);var p=pe("updated",c);return p&&(f.pubDate=new Date(p)),f.media=ji(c),f})}else{var a=(i=(t=Qe("channel",n.children))===null||t===void 0?void 0:t.children)!==null&&i!==void 0?i:[];s.type=n.name.substr(0,3),s.id="",z(s,"title","title",a),z(s,"link","link",a),z(s,"description","description",a);var o=pe("lastBuildDate",a);o&&(s.updated=new Date(o)),z(s,"author","managingEditor",a,!0),s.items=qt("item",n.children).map(function(c){var m={},v=c.children;z(m,"id","guid",v),z(m,"title","title",v),z(m,"link","link",v),z(m,"description","description",v);var p=pe("pubDate",v);return p&&(m.pubDate=new Date(p)),m.media=ji(v),m})}this.feed=s,this.handleCallback(null)},e}(Ra.default);be.FeedHandler=Pr;function ji(r){return qt("media:content",r).map(function(e){var t={medium:e.attribs.medium,isDefault:!!e.attribs.isDefault};return e.attribs.url&&(t.url=e.attribs.url),e.attribs.fileSize&&(t.fileSize=parseInt(e.attribs.fileSize,10)),e.attribs.type&&(t.type=e.attribs.type),e.attribs.expression&&(t.expression=e.attribs.expression),e.attribs.bitrate&&(t.bitrate=parseInt(e.attribs.bitrate,10)),e.attribs.framerate&&(t.framerate=parseInt(e.attribs.framerate,10)),e.attribs.samplingrate&&(t.samplingrate=parseInt(e.attribs.samplingrate,10)),e.attribs.channels&&(t.channels=parseInt(e.attribs.channels,10)),e.attribs.duration&&(t.duration=parseInt(e.attribs.duration,10)),e.attribs.height&&(t.height=parseInt(e.attribs.height,10)),e.attribs.width&&(t.width=parseInt(e.attribs.width,10)),e.attribs.lang&&(t.lang=e.attribs.lang),t})}function qt(r,e){return gt.getElementsByTagName(r,e,!0)}function Qe(r,e){return gt.getElementsByTagName(r,e,!0,1)[0]}function pe(r,e,t){return t===void 0&&(t=!1),gt.getText(gt.getElementsByTagName(r,e,t,1)).trim()}function Ui(r,e){if(!e)return null;var t=e.attribs;return t[r]}function z(r,e,t,i,n){n===void 0&&(n=!1);var s=pe(t,i,n);s&&(r[e]=s)}function Da(r){return r==="rss"||r==="feed"||r==="rdf:RDF"}function Na(r,e){e===void 0&&(e={xmlMode:!0});var t=new Pr(e);return new Pa.Parser(t,e).end(r),t.feed}be.parseFeed=Na;(function(r){var e=_&&_.__createBinding||(Object.create?function(p,b,d,C){C===void 0&&(C=d),Object.defineProperty(p,C,{enumerable:!0,get:function(){return b[d]}})}:function(p,b,d,C){C===void 0&&(C=d),p[C]=b[d]}),t=_&&_.__setModuleDefault||(Object.create?function(p,b){Object.defineProperty(p,"default",{enumerable:!0,value:b})}:function(p,b){p.default=b}),i=_&&_.__importStar||function(p){if(p&&p.__esModule)return p;var b={};if(p!=null)for(var d in p)d!=="default"&&Object.prototype.hasOwnProperty.call(p,d)&&e(b,p,d);return t(b,p),b},n=_&&_.__exportStar||function(p,b){for(var d in p)d!=="default"&&!Object.prototype.hasOwnProperty.call(b,d)&&e(b,p,d)},s=_&&_.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(r,"__esModule",{value:!0}),r.RssHandler=r.DefaultHandler=r.DomUtils=r.ElementType=r.Tokenizer=r.createDomStream=r.parseDOM=r.parseDocument=r.DomHandler=r.Parser=void 0;var a=qe;Object.defineProperty(r,"Parser",{enumerable:!0,get:function(){return a.Parser}});var l=le;Object.defineProperty(r,"DomHandler",{enumerable:!0,get:function(){return l.DomHandler}}),Object.defineProperty(r,"DefaultHandler",{enumerable:!0,get:function(){return l.DomHandler}});function o(p,b){var d=new l.DomHandler(void 0,b);return new a.Parser(d,b).end(p),d.root}r.parseDocument=o;function u(p,b){return o(p,b).children}r.parseDOM=u;function f(p,b,d){var C=new l.DomHandler(p,b,d);return new a.Parser(C,b)}r.createDomStream=f;var c=_t;Object.defineProperty(r,"Tokenizer",{enumerable:!0,get:function(){return s(c).default}});var m=i(Ie);r.ElementType=m,n(be,r),r.DomUtils=i(hi);var v=be;Object.defineProperty(r,"RssHandler",{enumerable:!0,get:function(){return v.FeedHandler}})})(lr);var Ma=r=>{if(typeof r!="string")throw new TypeError("Expected a string");return r.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},mi={};Object.defineProperty(mi,"__esModule",{value:!0});/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function Fi(r){return Object.prototype.toString.call(r)==="[object Object]"}function $a(r){var e,t;return Fi(r)===!1?!1:(e=r.constructor,e===void 0?!0:(t=e.prototype,!(Fi(t)===!1||t.hasOwnProperty("isPrototypeOf")===!1)))}mi.isPlainObject=$a;var La=function(e){return Ba(e)&&!ja(e)};function Ba(r){return!!r&&typeof r=="object"}function ja(r){var e=Object.prototype.toString.call(r);return e==="[object RegExp]"||e==="[object Date]"||Ha(r)}var Ua=typeof Symbol=="function"&&Symbol.for,Fa=Ua?Symbol.for("react.element"):60103;function Ha(r){return r.$$typeof===Fa}function za(r){return Array.isArray(r)?[]:{}}function Be(r,e){return e.clone!==!1&&e.isMergeableObject(r)?Oe(za(r),r,e):r}function Wa(r,e,t){return r.concat(e).map(function(i){return Be(i,t)})}function Va(r,e){if(!e.customMerge)return Oe;var t=e.customMerge(r);return typeof t=="function"?t:Oe}function qa(r){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r).filter(function(e){return r.propertyIsEnumerable(e)}):[]}function Hi(r){return Object.keys(r).concat(qa(r))}function Dr(r,e){try{return e in r}catch{return!1}}function Ga(r,e){return Dr(r,e)&&!(Object.hasOwnProperty.call(r,e)&&Object.propertyIsEnumerable.call(r,e))}function Ya(r,e,t){var i={};return t.isMergeableObject(r)&&Hi(r).forEach(function(n){i[n]=Be(r[n],t)}),Hi(e).forEach(function(n){Ga(r,n)||(Dr(r,n)&&t.isMergeableObject(e[n])?i[n]=Va(n,t)(r[n],e[n],t):i[n]=Be(e[n],t))}),i}function Oe(r,e,t){t=t||{},t.arrayMerge=t.arrayMerge||Wa,t.isMergeableObject=t.isMergeableObject||La,t.cloneUnlessOtherwiseSpecified=Be;var i=Array.isArray(e),n=Array.isArray(r),s=i===n;return s?i?t.arrayMerge(r,e,t):Ya(r,e,t):Be(e,t)}Oe.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(i,n){return Oe(i,n,t)},{})};var Ka=Oe,Ja=Ka,Nr={exports:{}};(function(r){(function(e,t){r.exports?r.exports=t():e.parseSrcset=t()})(_,function(){return function(e){function t(A){return A===" "||A==="	"||A===`
`||A==="\f"||A==="\r"}function i(A){var U,F=A.exec(e.substring(d));if(F)return U=F[0],d+=U.length,U}for(var n=e.length,s=/^[ \t\n\r\u000c]+/,a=/^[, \t\n\r\u000c]+/,l=/^[^ \t\n\r\u000c]+/,o=/[,]+$/,u=/^\d+$/,f=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,c,m,v,p,b,d=0,C=[];;){if(i(a),d>=n)return C;c=i(l),m=[],c.slice(-1)===","?(c=c.replace(o,""),L()):N()}function N(){for(i(s),v="",p="in descriptor";;){if(b=e.charAt(d),p==="in descriptor")if(t(b))v&&(m.push(v),v="",p="after descriptor");else if(b===","){d+=1,v&&m.push(v),L();return}else if(b==="(")v=v+b,p="in parens";else if(b===""){v&&m.push(v),L();return}else v=v+b;else if(p==="in parens")if(b===")")v=v+b,p="in descriptor";else if(b===""){m.push(v),L();return}else v=v+b;else if(p==="after descriptor"&&!t(b))if(b===""){L();return}else p="in descriptor",d-=1;d+=1}}function L(){var A=!1,U,F,q,H,X={},Z,Se,ue,fe,h;for(H=0;H<m.length;H++)Z=m[H],Se=Z[Z.length-1],ue=Z.substring(0,Z.length-1),fe=parseInt(ue,10),h=parseFloat(ue),u.test(ue)&&Se==="w"?((U||F)&&(A=!0),fe===0?A=!0:U=fe):f.test(ue)&&Se==="x"?((U||F||q)&&(A=!0),h<0?A=!0:F=h):u.test(ue)&&Se==="h"?((q||F)&&(A=!0),fe===0?A=!0:q=fe):A=!0;A?console&&console.log&&console.log("Invalid srcset descriptor found in '"+e+"' at '"+Z+"'."):(X.url=c,U&&(X.w=U),F&&(X.d=F),q&&(X.h=q),C.push(X))}}})})(Nr);var gi={exports:{}},k=String,Mr=function(){return{isColorSupported:!1,reset:k,bold:k,dim:k,italic:k,underline:k,inverse:k,hidden:k,strikethrough:k,black:k,red:k,green:k,yellow:k,blue:k,magenta:k,cyan:k,white:k,gray:k,bgBlack:k,bgRed:k,bgGreen:k,bgYellow:k,bgBlue:k,bgMagenta:k,bgCyan:k,bgWhite:k}};gi.exports=Mr();gi.exports.createColors=Mr;let zi=gi.exports,Wi=ve;class je extends Error{constructor(e,t,i,n,s,a){super(e),this.name="CssSyntaxError",this.reason=e,s&&(this.file=s),n&&(this.source=n),a&&(this.plugin=a),typeof t<"u"&&typeof i<"u"&&(typeof t=="number"?(this.line=t,this.column=i):(this.line=t.line,this.column=t.column,this.endLine=i.line,this.endColumn=i.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,je)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=zi.isColorSupported),Wi&&e&&(t=Wi(t));let i=t.split(/\r?\n/),n=Math.max(this.line-3,0),s=Math.min(this.line+2,i.length),a=String(s).length,l,o;if(e){let{bold:u,red:f,gray:c}=zi.createColors(!0);l=m=>u(f(m)),o=m=>c(m)}else l=o=u=>u;return i.slice(n,s).map((u,f)=>{let c=n+1+f,m=" "+(" "+c).slice(-a)+" | ";if(c===this.line){let v=o(m.replace(/\d/g," "))+u.slice(0,this.column-1).replace(/[^\t]/g," ");return l(">")+o(m)+u+`
 `+v+l("^")}return" "+o(m)+u}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}}var yi=je;je.default=je;var Ke={};Ke.isClean=Symbol("isClean");Ke.my=Symbol("my");const Vi={colon:": ",indent:"    ",beforeDecl:`
`,beforeRule:`
`,beforeOpen:" ",beforeClose:`
`,beforeComment:`
`,after:`
`,emptyBody:"",commentLeft:" ",commentRight:" ",semicolon:!1};function Qa(r){return r[0].toUpperCase()+r.slice(1)}class Gt{constructor(e){this.builder=e}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}document(e){this.body(e)}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}comment(e){let t=this.raw(e,"left","commentLeft"),i=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+i+"*/",e)}decl(e,t){let i=this.raw(e,"between","colon"),n=e.prop+i+this.rawValue(e,"value");e.important&&(n+=e.raws.important||" !important"),t&&(n+=";"),this.builder(n,e)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}atrule(e,t){let i="@"+e.name,n=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName<"u"?i+=e.raws.afterName:n&&(i+=" "),e.nodes)this.block(e,i+n);else{let s=(e.raws.between||"")+(t?";":"");this.builder(i+n+s,e)}}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let i=this.raw(e,"semicolon");for(let n=0;n<e.nodes.length;n++){let s=e.nodes[n],a=this.raw(s,"before");a&&this.builder(a),this.stringify(s,t!==n||i)}}block(e,t){let i=this.raw(e,"between","beforeOpen");this.builder(t+i+"{",e,"start");let n;e.nodes&&e.nodes.length?(this.body(e),n=this.raw(e,"after")):n=this.raw(e,"after","emptyBody"),n&&this.builder(n),this.builder("}",e,"end")}raw(e,t,i){let n;if(i||(i=t),t&&(n=e.raws[t],typeof n<"u"))return n;let s=e.parent;if(i==="before"&&(!s||s.type==="root"&&s.first===e||s&&s.type==="document"))return"";if(!s)return Vi[i];let a=e.root();if(a.rawCache||(a.rawCache={}),typeof a.rawCache[i]<"u")return a.rawCache[i];if(i==="before"||i==="after")return this.beforeAfter(e,i);{let l="raw"+Qa(i);this[l]?n=this[l](a,e):a.walk(o=>{if(n=o.raws[t],typeof n<"u")return!1})}return typeof n>"u"&&(n=Vi[i]),a.rawCache[i]=n,n}rawSemicolon(e){let t;return e.walk(i=>{if(i.nodes&&i.nodes.length&&i.last.type==="decl"&&(t=i.raws.semicolon,typeof t<"u"))return!1}),t}rawEmptyBody(e){let t;return e.walk(i=>{if(i.nodes&&i.nodes.length===0&&(t=i.raws.after,typeof t<"u"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(i=>{let n=i.parent;if(n&&n!==e&&n.parent&&n.parent===e&&typeof i.raws.before<"u"){let s=i.raws.before.split(`
`);return t=s[s.length-1],t=t.replace(/\S/g,""),!1}}),t}rawBeforeComment(e,t){let i;return e.walkComments(n=>{if(typeof n.raws.before<"u")return i=n.raws.before,i.includes(`
`)&&(i=i.replace(/[^\n]+$/,"")),!1}),typeof i>"u"?i=this.raw(t,null,"beforeDecl"):i&&(i=i.replace(/\S/g,"")),i}rawBeforeDecl(e,t){let i;return e.walkDecls(n=>{if(typeof n.raws.before<"u")return i=n.raws.before,i.includes(`
`)&&(i=i.replace(/[^\n]+$/,"")),!1}),typeof i>"u"?i=this.raw(t,null,"beforeRule"):i&&(i=i.replace(/\S/g,"")),i}rawBeforeRule(e){let t;return e.walk(i=>{if(i.nodes&&(i.parent!==e||e.first!==i)&&typeof i.raws.before<"u")return t=i.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeClose(e){let t;return e.walk(i=>{if(i.nodes&&i.nodes.length>0&&typeof i.raws.after<"u")return t=i.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeOpen(e){let t;return e.walk(i=>{if(i.type!=="decl"&&(t=i.raws.between,typeof t<"u"))return!1}),t}rawColon(e){let t;return e.walkDecls(i=>{if(typeof i.raws.between<"u")return t=i.raws.between.replace(/[^\s:]/g,""),!1}),t}beforeAfter(e,t){let i;e.type==="decl"?i=this.raw(e,null,"beforeDecl"):e.type==="comment"?i=this.raw(e,null,"beforeComment"):t==="before"?i=this.raw(e,null,"beforeRule"):i=this.raw(e,null,"beforeClose");let n=e.parent,s=0;for(;n&&n.type!=="root";)s+=1,n=n.parent;if(i.includes(`
`)){let a=this.raw(e,null,"indent");if(a.length)for(let l=0;l<s;l++)i+=a}return i}rawValue(e,t){let i=e[t],n=e.raws[t];return n&&n.value===i?n.raw:i}}var $r=Gt;Gt.default=Gt;let Xa=$r;function Yt(r,e){new Xa(e).stringify(r)}var Et=Yt;Yt.default=Yt;let{isClean:Xe,my:Za}=Ke,eo=yi,to=$r,io=Et;function Kt(r,e){let t=new r.constructor;for(let i in r){if(!Object.prototype.hasOwnProperty.call(r,i)||i==="proxyCache")continue;let n=r[i],s=typeof n;i==="parent"&&s==="object"?e&&(t[i]=e):i==="source"?t[i]=n:Array.isArray(n)?t[i]=n.map(a=>Kt(a,t)):(s==="object"&&n!==null&&(n=Kt(n)),t[i]=n)}return t}class Jt{constructor(e={}){this.raws={},this[Xe]=!1,this[Za]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let i of e[t])typeof i.clone=="function"?this.append(i.clone()):this.append(i)}else this[t]=e[t]}error(e,t={}){if(this.source){let{start:i,end:n}=this.rangeBy(t);return this.source.input.error(e,{line:i.line,column:i.column},{line:n.line,column:n.column},t)}return new eo(e)}warn(e,t,i){let n={node:this};for(let s in i)n[s]=i[s];return e.warn(t,n)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}toString(e=io){e.stringify&&(e=e.stringify);let t="";return e(this,i=>{t+=i}),t}assign(e={}){for(let t in e)this[t]=e[t];return this}clone(e={}){let t=Kt(this);for(let i in e)t[i]=e[i];return t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}replaceWith(...e){if(this.parent){let t=this,i=!1;for(let n of e)n===this?i=!0:i?(this.parent.insertAfter(t,n),t=n):this.parent.insertBefore(t,n);i||this.remove()}return this}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}before(e){return this.parent.insertBefore(this,e),this}after(e){return this.parent.insertAfter(this,e),this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}raw(e,t){return new to().raw(this,e,t)}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}toJSON(e,t){let i={},n=t==null;t=t||new Map;let s=0;for(let a in this){if(!Object.prototype.hasOwnProperty.call(this,a)||a==="parent"||a==="proxyCache")continue;let l=this[a];if(Array.isArray(l))i[a]=l.map(o=>typeof o=="object"&&o.toJSON?o.toJSON(null,t):o);else if(typeof l=="object"&&l.toJSON)i[a]=l.toJSON(null,t);else if(a==="source"){let o=t.get(l.input);o==null&&(o=s,t.set(l.input,s),s++),i[a]={inputId:o,start:l.start,end:l.end}}else i[a]=l}return n&&(i.inputs=[...t.keys()].map(a=>a.toJSON())),i}positionInside(e){let t=this.toString(),i=this.source.start.column,n=this.source.start.line;for(let s=0;s<e;s++)t[s]===`
`?(i=1,n+=1):i+=1;return{line:n,column:i}}positionBy(e){let t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){let i=this.toString().indexOf(e.word);i!==-1&&(t=this.positionInside(i))}return t}rangeBy(e){let t={line:this.source.start.line,column:this.source.start.column},i=this.source.end?{line:this.source.end.line,column:this.source.end.column+1}:{line:t.line,column:t.column+1};if(e.word){let n=this.toString().indexOf(e.word);n!==-1&&(t=this.positionInside(n),i=this.positionInside(n+e.word.length))}else e.start?t={line:e.start.line,column:e.start.column}:e.index&&(t=this.positionInside(e.index)),e.end?i={line:e.end.line,column:e.end.column}:e.endIndex?i=this.positionInside(e.endIndex):e.index&&(i=this.positionInside(e.index+1));return(i.line<t.line||i.line===t.line&&i.column<=t.column)&&(i={line:t.line,column:t.column+1}),{start:t,end:i}}getProxyProcessor(){return{set(e,t,i){return e[t]===i||(e[t]=i,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0},get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]}}}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}markDirty(){if(this[Xe]){this[Xe]=!1;let e=this;for(;e=e.parent;)e[Xe]=!1}}get proxyOf(){return this}}var It=Jt;Jt.default=Jt;let ro=It;class Qt extends ro{constructor(e){e&&typeof e.value<"u"&&typeof e.value!="string"&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}}var At=Qt;Qt.default=Qt;let no="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",so=(r,e=21)=>(t=e)=>{let i="",n=t;for(;n--;)i+=r[Math.random()*r.length|0];return i},ao=(r=21)=>{let e="",t=r;for(;t--;)e+=no[Math.random()*64|0];return e};const oo=Object.freeze(Object.defineProperty({__proto__:null,nanoid:ao,customAlphabet:so},Symbol.toStringTag,{value:"Module"})),lo=Bn(oo);let{SourceMapConsumer:qi,SourceMapGenerator:Gi}=ve,{existsSync:uo,readFileSync:fo}=jn,{dirname:Lt,join:ho}=li;function co(r){return Buffer?Buffer.from(r,"base64").toString():window.atob(r)}class Xt{constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let i=t.map?t.map.prev:void 0,n=this.loadMap(t.from,i);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Lt(this.mapFile)),n&&(this.text=n)}consumer(){return this.consumerCache||(this.consumerCache=new qi(this.text)),this.consumerCache}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}startWith(e,t){return e?e.substr(0,t.length)===t:!1}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let i=e.lastIndexOf(t.pop()),n=e.indexOf("*/",i);i>-1&&n>-1&&(this.annotation=this.getAnnotationURL(e.substring(i,n)))}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,i=/^data:application\/json;base64,/,n=/^data:application\/json;charset=utf-?8,/,s=/^data:application\/json,/;if(n.test(e)||s.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(t.test(e)||i.test(e))return co(e.substr(RegExp.lastMatch.length));let a=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+a)}loadFile(e){if(this.root=Lt(e),uo(e))return this.mapFile=e,fo(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let i=t(e);if(i){let n=this.loadFile(i);if(!n)throw new Error("Unable to load previous source map: "+i.toString());return n}}else{if(t instanceof qi)return Gi.fromSourceMap(t).toString();if(t instanceof Gi)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let i=this.annotation;return e&&(i=ho(Lt(e),i)),this.loadFile(i)}}}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}}var Lr=Xt;Xt.default=Xt;let{SourceMapConsumer:po,SourceMapGenerator:mo}=ve,{fileURLToPath:Yi,pathToFileURL:Ze}=ve,{resolve:Zt,isAbsolute:ei}=li,{nanoid:go}=lo,Bt=ve,Ki=yi,yo=Lr,jt=Symbol("fromOffsetCache"),bo=Boolean(po&&mo),Ji=Boolean(Zt&&ei);class yt{constructor(e,t={}){if(e===null||typeof e>"u"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]==="\uFFFE"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!Ji||/^\w+:\/\//.test(t.from)||ei(t.from)?this.file=t.from:this.file=Zt(t.from)),Ji&&bo){let i=new yo(this.css,t);if(i.text){this.map=i;let n=i.consumer().file;!this.file&&n&&(this.file=this.mapResolve(n))}}this.file||(this.id="<input css "+go(6)+">"),this.map&&(this.map.file=this.from)}fromOffset(e){let t,i;if(this[jt])i=this[jt];else{let s=this.css.split(`
`);i=new Array(s.length);let a=0;for(let l=0,o=s.length;l<o;l++)i[l]=a,a+=s[l].length+1;this[jt]=i}t=i[i.length-1];let n=0;if(e>=t)n=i.length-1;else{let s=i.length-2,a;for(;n<s;)if(a=n+(s-n>>1),e<i[a])s=a-1;else if(e>=i[a+1])n=a+1;else{n=a;break}}return{line:n+1,col:e-i[n]+1}}error(e,t,i,n={}){let s,a,l;if(t&&typeof t=="object"){let u=t,f=i;if(typeof t.offset=="number"){let c=this.fromOffset(u.offset);t=c.line,i=c.col}else t=u.line,i=u.column;if(typeof f.offset=="number"){let c=this.fromOffset(f.offset);a=c.line,l=c.col}else a=f.line,l=f.column}else if(!i){let u=this.fromOffset(t);t=u.line,i=u.col}let o=this.origin(t,i,a,l);return o?s=new Ki(e,o.endLine===void 0?o.line:{line:o.line,column:o.column},o.endLine===void 0?o.column:{line:o.endLine,column:o.endColumn},o.source,o.file,n.plugin):s=new Ki(e,a===void 0?t:{line:t,column:i},a===void 0?i:{line:a,column:l},this.css,this.file,n.plugin),s.input={line:t,column:i,endLine:a,endColumn:l,source:this.css},this.file&&(Ze&&(s.input.url=Ze(this.file).toString()),s.input.file=this.file),s}origin(e,t,i,n){if(!this.map)return!1;let s=this.map.consumer(),a=s.originalPositionFor({line:e,column:t});if(!a.source)return!1;let l;typeof i=="number"&&(l=s.originalPositionFor({line:i,column:n}));let o;ei(a.source)?o=Ze(a.source):o=new URL(a.source,this.map.consumer().sourceRoot||Ze(this.map.mapFile));let u={url:o.toString(),line:a.line,column:a.column,endLine:l&&l.line,endColumn:l&&l.column};if(o.protocol==="file:")if(Yi)u.file=Yi(o);else throw new Error("file: protocol is not available in this PostCSS build");let f=s.sourceContentFor(a.source);return f&&(u.source=f),u}mapResolve(e){return/^\w+:\/\//.test(e)?e:Zt(this.map.consumer().sourceRoot||this.map.root||".",e)}get from(){return this.file||this.id}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}}var kt=yt;yt.default=yt;Bt&&Bt.registerInput&&Bt.registerInput(yt);let{SourceMapConsumer:Br,SourceMapGenerator:ht}=ve,{dirname:ct,resolve:jr,relative:Ur,sep:Fr}=li,{pathToFileURL:Qi}=ve,vo=kt,wo=Boolean(Br&&ht),_o=Boolean(ct&&jr&&Ur&&Fr);class So{constructor(e,t,i,n){this.stringify=e,this.mapOpts=i.map||{},this.root=t,this.opts=i,this.css=n}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new vo(this.css,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e<"u"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/(\n)?\/\*#[\S\s]*?\*\/$/gm,""))}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let i=t.source.input.from;i&&!e[i]&&(e[i]=!0,this.map.setSourceContent(this.toUrl(this.path(i)),t.source.input.css))}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),i=e.root||ct(e.file),n;this.mapOpts.sourcesContent===!1?(n=new Br(e.text),n.sourcesContent&&(n.sourcesContent=n.sourcesContent.map(()=>null))):n=e.consumer(),this.map.applySourceMap(n,t,this.toUrl(this.path(i)))}}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=ht.fromSourceMap(e)}else this.map=new ht({file:this.outputFile()}),this.map.addMapping({source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>",generated:{line:1,column:0},original:{line:1,column:0}});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}path(e){if(e.indexOf("<")===0||/^\w+:\/\//.test(e)||this.mapOpts.absolute)return e;let t=this.opts.to?ct(this.opts.to):".";return typeof this.mapOpts.annotation=="string"&&(t=ct(jr(t,this.mapOpts.annotation))),e=Ur(t,e),e}toUrl(e){return Fr==="\\"&&(e=e.replace(/\\/g,"/")),encodeURI(e).replace(/[#?]/g,encodeURIComponent)}sourcePath(e){if(this.mapOpts.from)return this.toUrl(this.mapOpts.from);if(this.mapOpts.absolute){if(Qi)return Qi(e.source.input.from).toString();throw new Error("`map.absolute` option is not available in this PostCSS build")}else return this.toUrl(this.path(e.source.input.from))}generateString(){this.css="",this.map=new ht({file:this.outputFile()});let e=1,t=1,i="<no source>",n={source:"",generated:{line:0,column:0},original:{line:0,column:0}},s,a;this.stringify(this.root,(l,o,u)=>{if(this.css+=l,o&&u!=="end"&&(n.generated.line=e,n.generated.column=t-1,o.source&&o.source.start?(n.source=this.sourcePath(o),n.original.line=o.source.start.line,n.original.column=o.source.start.column-1,this.map.addMapping(n)):(n.source=i,n.original.line=1,n.original.column=0,this.map.addMapping(n))),s=l.match(/\n/g),s?(e+=s.length,a=l.lastIndexOf(`
`),t=l.length-a):t+=l.length,o&&u!=="start"){let f=o.parent||{raws:{}};(o.type!=="decl"||o!==f.last||f.raws.semicolon)&&(o.source&&o.source.end?(n.source=this.sourcePath(o),n.original.line=o.source.end.line,n.original.column=o.source.end.column-1,n.generated.line=e,n.generated.column=t-2,this.map.addMapping(n)):(n.source=i,n.original.line=1,n.original.column=0,n.generated.line=e,n.generated.column=t-1,this.map.addMapping(n)))}})}generate(){if(this.clearAnnotation(),_o&&wo&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}}var Hr=So;let xo=It;class ti extends xo{constructor(e){super(e),this.type="comment"}}var Rt=ti;ti.default=ti;let{isClean:zr,my:Wr}=Ke,Vr=At,qr=Rt,Co=It,Gr,bi,vi;function Yr(r){return r.map(e=>(e.nodes&&(e.nodes=Yr(e.nodes)),delete e.source,e))}function Kr(r){if(r[zr]=!1,r.proxyOf.nodes)for(let e of r.proxyOf.nodes)Kr(e)}class ne extends Co{push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),i,n;for(;this.indexes[t]<this.proxyOf.nodes.length&&(i=this.indexes[t],n=e(this.proxyOf.nodes[i],i),n!==!1);)this.indexes[t]+=1;return delete this.indexes[t],n}walk(e){return this.each((t,i)=>{let n;try{n=e(t,i)}catch(s){throw t.addToError(s)}return n!==!1&&t.walk&&(n=t.walk(e)),n})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((i,n)=>{if(i.type==="decl"&&e.test(i.prop))return t(i,n)}):this.walk((i,n)=>{if(i.type==="decl"&&i.prop===e)return t(i,n)}):(t=e,this.walk((i,n)=>{if(i.type==="decl")return t(i,n)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((i,n)=>{if(i.type==="rule"&&e.test(i.selector))return t(i,n)}):this.walk((i,n)=>{if(i.type==="rule"&&i.selector===e)return t(i,n)}):(t=e,this.walk((i,n)=>{if(i.type==="rule")return t(i,n)}))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((i,n)=>{if(i.type==="atrule"&&e.test(i.name))return t(i,n)}):this.walk((i,n)=>{if(i.type==="atrule"&&i.name===e)return t(i,n)}):(t=e,this.walk((i,n)=>{if(i.type==="atrule")return t(i,n)}))}walkComments(e){return this.walk((t,i)=>{if(t.type==="comment")return e(t,i)})}append(...e){for(let t of e){let i=this.normalize(t,this.last);for(let n of i)this.proxyOf.nodes.push(n)}return this.markDirty(),this}prepend(...e){e=e.reverse();for(let t of e){let i=this.normalize(t,this.first,"prepend").reverse();for(let n of i)this.proxyOf.nodes.unshift(n);for(let n in this.indexes)this.indexes[n]=this.indexes[n]+i.length}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}insertBefore(e,t){e=this.index(e);let i=e===0?"prepend":!1,n=this.normalize(t,this.proxyOf.nodes[e],i).reverse();for(let a of n)this.proxyOf.nodes.splice(e,0,a);let s;for(let a in this.indexes)s=this.indexes[a],e<=s&&(this.indexes[a]=s+n.length);return this.markDirty(),this}insertAfter(e,t){e=this.index(e);let i=this.normalize(t,this.proxyOf.nodes[e]).reverse();for(let s of i)this.proxyOf.nodes.splice(e+1,0,s);let n;for(let s in this.indexes)n=this.indexes[s],e<n&&(this.indexes[s]=n+i.length);return this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let i in this.indexes)t=this.indexes[i],t>=e&&(this.indexes[i]=t-1);return this.markDirty(),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}replaceValues(e,t,i){return i||(i=t,t={}),this.walkDecls(n=>{t.props&&!t.props.includes(n.prop)||t.fast&&!n.value.includes(t.fast)||(n.value=n.value.replace(e,i))}),this.markDirty(),this}every(e){return this.nodes.every(e)}some(e){return this.nodes.some(e)}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}get first(){if(!!this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(!!this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}normalize(e,t){if(typeof e=="string")e=Yr(Gr(e).nodes);else if(Array.isArray(e)){e=e.slice(0);for(let n of e)n.parent&&n.parent.removeChild(n,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let n of e)n.parent&&n.parent.removeChild(n,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value>"u")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new Vr(e)]}else if(e.selector)e=[new bi(e)];else if(e.name)e=[new vi(e)];else if(e.text)e=[new qr(e)];else throw new Error("Unknown node type in node creation");return e.map(n=>(n[Wr]||ne.rebuild(n),n=n.proxyOf,n.parent&&n.parent.removeChild(n),n[zr]&&Kr(n),typeof n.raws.before>"u"&&t&&typeof t.raws.before<"u"&&(n.raws.before=t.raws.before.replace(/\S/g,"")),n.parent=this.proxyOf,n))}getProxyProcessor(){return{set(e,t,i){return e[t]===i||(e[t]=i,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0},get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...i)=>e[t](...i.map(n=>typeof n=="function"?(s,a)=>n(s.toProxy(),a):n)):t==="every"||t==="some"?i=>e[t]((n,...s)=>i(n.toProxy(),...s)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(i=>i.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]}}}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}}ne.registerParse=r=>{Gr=r};ne.registerRule=r=>{bi=r};ne.registerAtRule=r=>{vi=r};var _e=ne;ne.default=ne;ne.rebuild=r=>{r.type==="atrule"?Object.setPrototypeOf(r,vi.prototype):r.type==="rule"?Object.setPrototypeOf(r,bi.prototype):r.type==="decl"?Object.setPrototypeOf(r,Vr.prototype):r.type==="comment"&&Object.setPrototypeOf(r,qr.prototype),r[Wr]=!0,r.nodes&&r.nodes.forEach(e=>{ne.rebuild(e)})};let To=_e,Jr,Qr;class Ue extends To{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new Jr(new Qr,this,e).stringify()}}Ue.registerLazyResult=r=>{Jr=r};Ue.registerProcessor=r=>{Qr=r};var wi=Ue;Ue.default=Ue;class ii{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let i=t.node.rangeBy(t);this.line=i.start.line,this.column=i.start.column,this.endLine=i.end.line,this.endColumn=i.end.column}for(let i in t)this[i]=t[i]}toString(){return this.node?this.node.error(this.text,{plugin:this.plugin,index:this.index,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}var Xr=ii;ii.default=ii;let Oo=Xr;class ri{constructor(e,t,i){this.processor=e,this.messages=[],this.root=t,this.opts=i,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let i=new Oo(e,t);return this.messages.push(i),i}warnings(){return this.messages.filter(e=>e.type==="warning")}get content(){return this.css}}var _i=ri;ri.default=ri;const Ut="'".charCodeAt(0),Xi='"'.charCodeAt(0),et="\\".charCodeAt(0),Zi="/".charCodeAt(0),tt=`
`.charCodeAt(0),Ae=" ".charCodeAt(0),it="\f".charCodeAt(0),rt="	".charCodeAt(0),nt="\r".charCodeAt(0),Eo="[".charCodeAt(0),Io="]".charCodeAt(0),Ao="(".charCodeAt(0),ko=")".charCodeAt(0),Ro="{".charCodeAt(0),Po="}".charCodeAt(0),Do=";".charCodeAt(0),No="*".charCodeAt(0),Mo=":".charCodeAt(0),$o="@".charCodeAt(0),st=/[\t\n\f\r "#'()/;[\\\]{}]/g,at=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,Lo=/.[\n"'(/\\]/,er=/[\da-f]/i;var Bo=function(e,t={}){let i=e.css.valueOf(),n=t.ignoreErrors,s,a,l,o,u,f,c,m,v,p,b=i.length,d=0,C=[],N=[];function L(){return d}function A(H){throw e.error("Unclosed "+H,d)}function U(){return N.length===0&&d>=b}function F(H){if(N.length)return N.pop();if(d>=b)return;let X=H?H.ignoreUnclosed:!1;switch(s=i.charCodeAt(d),s){case tt:case Ae:case rt:case nt:case it:{a=d;do a+=1,s=i.charCodeAt(a);while(s===Ae||s===tt||s===rt||s===nt||s===it);p=["space",i.slice(d,a)],d=a-1;break}case Eo:case Io:case Ro:case Po:case Mo:case Do:case ko:{let Z=String.fromCharCode(s);p=[Z,Z,d];break}case Ao:{if(m=C.length?C.pop()[1]:"",v=i.charCodeAt(d+1),m==="url"&&v!==Ut&&v!==Xi&&v!==Ae&&v!==tt&&v!==rt&&v!==it&&v!==nt){a=d;do{if(f=!1,a=i.indexOf(")",a+1),a===-1)if(n||X){a=d;break}else A("bracket");for(c=a;i.charCodeAt(c-1)===et;)c-=1,f=!f}while(f);p=["brackets",i.slice(d,a+1),d,a],d=a}else a=i.indexOf(")",d+1),o=i.slice(d,a+1),a===-1||Lo.test(o)?p=["(","(",d]:(p=["brackets",o,d,a],d=a);break}case Ut:case Xi:{l=s===Ut?"'":'"',a=d;do{if(f=!1,a=i.indexOf(l,a+1),a===-1)if(n||X){a=d+1;break}else A("string");for(c=a;i.charCodeAt(c-1)===et;)c-=1,f=!f}while(f);p=["string",i.slice(d,a+1),d,a],d=a;break}case $o:{st.lastIndex=d+1,st.test(i),st.lastIndex===0?a=i.length-1:a=st.lastIndex-2,p=["at-word",i.slice(d,a+1),d,a],d=a;break}case et:{for(a=d,u=!0;i.charCodeAt(a+1)===et;)a+=1,u=!u;if(s=i.charCodeAt(a+1),u&&s!==Zi&&s!==Ae&&s!==tt&&s!==rt&&s!==nt&&s!==it&&(a+=1,er.test(i.charAt(a)))){for(;er.test(i.charAt(a+1));)a+=1;i.charCodeAt(a+1)===Ae&&(a+=1)}p=["word",i.slice(d,a+1),d,a],d=a;break}default:{s===Zi&&i.charCodeAt(d+1)===No?(a=i.indexOf("*/",d+2)+1,a===0&&(n||X?a=i.length:A("comment")),p=["comment",i.slice(d,a+1),d,a],d=a):(at.lastIndex=d+1,at.test(i),at.lastIndex===0?a=i.length-1:a=at.lastIndex-2,p=["word",i.slice(d,a+1),d,a],C.push(p),d=a);break}}return d++,p}function q(H){N.push(H)}return{back:q,nextToken:F,endOfFile:U,position:L}};let Zr=_e;class bt extends Zr{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}}var Si=bt;bt.default=bt;Zr.registerAtRule(bt);let jo=_e,en,tn;class Fe extends jo{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}removeChild(e,t){let i=this.index(e);return!t&&i===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[i].raws.before),super.removeChild(e)}normalize(e,t,i){let n=super.normalize(e);if(t){if(i==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let s of n)s.raws.before=t.raws.before}return n}toResult(e={}){return new en(new tn,this,e).stringify()}}Fe.registerLazyResult=r=>{en=r};Fe.registerProcessor=r=>{tn=r};var Je=Fe;Fe.default=Fe;let He={split(r,e,t){let i=[],n="",s=!1,a=0,l=!1,o=!1;for(let u of r)o?o=!1:u==="\\"?o=!0:l?u===l&&(l=!1):u==='"'||u==="'"?l=u:u==="("?a+=1:u===")"?a>0&&(a-=1):a===0&&e.includes(u)&&(s=!0),s?(n!==""&&i.push(n.trim()),n="",s=!1):n+=u;return(t||n!=="")&&i.push(n.trim()),i},space(r){let e=[" ",`
`,"	"];return He.split(r,e)},comma(r){return He.split(r,[","],!0)}};var rn=He;He.default=He;let nn=_e,Uo=rn;class vt extends nn{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return Uo.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,i=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(i)}}var xi=vt;vt.default=vt;nn.registerRule(vt);let Fo=At,Ho=Bo,zo=Rt,Wo=Si,Vo=Je,tr=xi;const ir={empty:!0,space:!0};function qo(r){for(let e=r.length-1;e>=0;e--){let t=r[e],i=t[3]||t[2];if(i)return i}}class Go{constructor(e){this.input=e,this.root=new Vo,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:e,start:{offset:0,line:1,column:1}}}createTokenizer(){this.tokenizer=Ho(this.input)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}comment(e){let t=new zo;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]);let i=e[1].slice(2,-2);if(/^\s*$/.test(i))t.text="",t.raws.left=i,t.raws.right="";else{let n=i.match(/^(\s*)([^]*\S)(\s*)$/);t.text=n[2],t.raws.left=n[1],t.raws.right=n[3]}}emptyRule(e){let t=new tr;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}other(e){let t=!1,i=null,n=!1,s=null,a=[],l=e[1].startsWith("--"),o=[],u=e;for(;u;){if(i=u[0],o.push(u),i==="("||i==="[")s||(s=u),a.push(i==="("?")":"]");else if(l&&n&&i==="{")s||(s=u),a.push("}");else if(a.length===0)if(i===";")if(n){this.decl(o,l);return}else break;else if(i==="{"){this.rule(o);return}else if(i==="}"){this.tokenizer.back(o.pop()),t=!0;break}else i===":"&&(n=!0);else i===a[a.length-1]&&(a.pop(),a.length===0&&(s=null));u=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),a.length>0&&this.unclosedBracket(s),t&&n){if(!l)for(;o.length&&(u=o[o.length-1][0],!(u!=="space"&&u!=="comment"));)this.tokenizer.back(o.pop());this.decl(o,l)}else this.unknownWord(o)}rule(e){e.pop();let t=new tr;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}decl(e,t){let i=new Fo;this.init(i,e[0][2]);let n=e[e.length-1];for(n[0]===";"&&(this.semicolon=!0,e.pop()),i.source.end=this.getPosition(n[3]||n[2]||qo(e));e[0][0]!=="word";)e.length===1&&this.unknownWord(e),i.raws.before+=e.shift()[1];for(i.source.start=this.getPosition(e[0][2]),i.prop="";e.length;){let u=e[0][0];if(u===":"||u==="space"||u==="comment")break;i.prop+=e.shift()[1]}i.raws.between="";let s;for(;e.length;)if(s=e.shift(),s[0]===":"){i.raws.between+=s[1];break}else s[0]==="word"&&/\w/.test(s[1])&&this.unknownWord([s]),i.raws.between+=s[1];(i.prop[0]==="_"||i.prop[0]==="*")&&(i.raws.before+=i.prop[0],i.prop=i.prop.slice(1));let a=[],l;for(;e.length&&(l=e[0][0],!(l!=="space"&&l!=="comment"));)a.push(e.shift());this.precheckMissedSemicolon(e);for(let u=e.length-1;u>=0;u--){if(s=e[u],s[1].toLowerCase()==="!important"){i.important=!0;let f=this.stringFrom(e,u);f=this.spacesFromEnd(e)+f,f!==" !important"&&(i.raws.important=f);break}else if(s[1].toLowerCase()==="important"){let f=e.slice(0),c="";for(let m=u;m>0;m--){let v=f[m][0];if(c.trim().indexOf("!")===0&&v!=="space")break;c=f.pop()[1]+c}c.trim().indexOf("!")===0&&(i.important=!0,i.raws.important=c,e=f)}if(s[0]!=="space"&&s[0]!=="comment")break}e.some(u=>u[0]!=="space"&&u[0]!=="comment")&&(i.raws.between+=a.map(u=>u[1]).join(""),a=[]),this.raw(i,"value",a.concat(e),t),i.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}atrule(e){let t=new Wo;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let i,n,s,a=!1,l=!1,o=[],u=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),i=e[0],i==="("||i==="["?u.push(i==="("?")":"]"):i==="{"&&u.length>0?u.push("}"):i===u[u.length-1]&&u.pop(),u.length===0)if(i===";"){t.source.end=this.getPosition(e[2]),this.semicolon=!0;break}else if(i==="{"){l=!0;break}else if(i==="}"){if(o.length>0){for(s=o.length-1,n=o[s];n&&n[0]==="space";)n=o[--s];n&&(t.source.end=this.getPosition(n[3]||n[2]))}this.end(e);break}else o.push(e);else o.push(e);if(this.tokenizer.endOfFile()){a=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(o),o.length?(t.raws.afterName=this.spacesAndCommentsFromStart(o),this.raw(t,"params",o),a&&(e=o[o.length-1],t.source.end=this.getPosition(e[3]||e[2]),this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),l&&(t.nodes=[],this.current=t)}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{offset:e,line:t.line,column:t.col}}init(e,t){this.current.push(e),e.source={start:this.getPosition(t),input:this.input},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}raw(e,t,i,n){let s,a,l=i.length,o="",u=!0,f,c;for(let m=0;m<l;m+=1)s=i[m],a=s[0],a==="space"&&m===l-1&&!n?u=!1:a==="comment"?(c=i[m-1]?i[m-1][0]:"empty",f=i[m+1]?i[m+1][0]:"empty",!ir[c]&&!ir[f]?o.slice(-1)===","?u=!1:o+=s[1]:u=!1):o+=s[1];if(!u){let m=i.reduce((v,p)=>v+p[1],"");e.raws[t]={value:o,raw:m}}e[t]=o}spacesAndCommentsFromEnd(e){let t,i="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)i=e.pop()[1]+i;return i}spacesAndCommentsFromStart(e){let t,i="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)i+=e.shift()[1];return i}spacesFromEnd(e){let t,i="";for(;e.length&&(t=e[e.length-1][0],t==="space");)i=e.pop()[1]+i;return i}stringFrom(e,t){let i="";for(let n=t;n<e.length;n++)i+=e[n][1];return e.splice(t,e.length-t),i}colon(e){let t=0,i,n,s;for(let[a,l]of e.entries()){if(i=l,n=i[0],n==="("&&(t+=1),n===")"&&(t-=1),t===0&&n===":")if(!s)this.doubleColon(i);else{if(s[0]==="word"&&s[1]==="progid")continue;return a}s=i}return!1}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}precheckMissedSemicolon(){}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let i=0,n;for(let s=t-1;s>=0&&(n=e[s],!(n[0]!=="space"&&(i+=1,i===2)));s--);throw this.input.error("Missed semicolon",n[0]==="word"?n[3]+1:n[2])}}var Yo=Go;let Ko=_e,Jo=Yo,Qo=kt;function wt(r,e){let t=new Qo(r,e),i=new Jo(t);try{i.parse()}catch(n){throw n}return i.root}var Ci=wt;wt.default=wt;Ko.registerParse(wt);let{isClean:ie,my:Xo}=Ke,Zo=Hr,el=Et,tl=_e,il=wi,rr=_i,rl=Ci,nl=Je;const sl={document:"Document",root:"Root",atrule:"AtRule",rule:"Rule",decl:"Declaration",comment:"Comment"},al={postcssPlugin:!0,prepare:!0,Once:!0,Document:!0,Root:!0,Declaration:!0,Rule:!0,AtRule:!0,Comment:!0,DeclarationExit:!0,RuleExit:!0,AtRuleExit:!0,CommentExit:!0,RootExit:!0,DocumentExit:!0,OnceExit:!0},ol={postcssPlugin:!0,prepare:!0,Once:!0},Ee=0;function ke(r){return typeof r=="object"&&typeof r.then=="function"}function sn(r){let e=!1,t=sl[r.type];return r.type==="decl"?e=r.prop.toLowerCase():r.type==="atrule"&&(e=r.name.toLowerCase()),e&&r.append?[t,t+"-"+e,Ee,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:r.append?[t,Ee,t+"Exit"]:[t,t+"Exit"]}function nr(r){let e;return r.type==="document"?e=["Document",Ee,"DocumentExit"]:r.type==="root"?e=["Root",Ee,"RootExit"]:e=sn(r),{node:r,events:e,eventIndex:0,visitors:[],visitorIndex:0,iterator:0}}function ni(r){return r[ie]=!1,r.nodes&&r.nodes.forEach(e=>ni(e)),r}let si={};class ce{constructor(e,t,i){this.stringified=!1,this.processed=!1;let n;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))n=ni(t);else if(t instanceof ce||t instanceof rr)n=ni(t.root),t.map&&(typeof i.map>"u"&&(i.map={}),i.map.inline||(i.map.inline=!1),i.map.prev=t.map);else{let s=rl;i.syntax&&(s=i.syntax.parse),i.parser&&(s=i.parser),s.parse&&(s=s.parse);try{n=s(t,i)}catch(a){this.processed=!0,this.error=a}n&&!n[Xo]&&tl.rebuild(n)}this.result=new rr(e,n,i),this.helpers={...si,result:this.result,postcss:si},this.plugins=this.processor.plugins.map(s=>typeof s=="object"&&s.prepare?{...s,...s.prepare(this.result)}:s)}get[Symbol.toStringTag](){return"LazyResult"}get processor(){return this.result.processor}get opts(){return this.result.opts}get css(){return this.stringify().css}get content(){return this.stringify().content}get map(){return this.stringify().map}get root(){return this.sync().root}get messages(){return this.sync().messages}warnings(){return this.sync().warnings()}toString(){return this.css}then(e,t){return this.async().then(e,t)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(ke(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[ie];)e[ie]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=el;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let n=new Zo(t,this.result.root,this.result.opts).generate();return this.result.css=n[0],this.result.map=n[1],this.result}walkSync(e){e[ie]=!0;let t=sn(e);for(let i of t)if(i===Ee)e.nodes&&e.each(n=>{n[ie]||this.walkSync(n)});else{let n=this.listeners[i];if(n&&this.visitSync(n,e.toProxy()))return}}visitSync(e,t){for(let[i,n]of e){this.result.lastPlugin=i;let s;try{s=n(t,this.helpers)}catch(a){throw this.handleError(a,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(ke(s))throw this.getAsyncError()}}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(i=>e.Once(i,this.helpers));return ke(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let i=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin?(e.plugin=i.postcssPlugin,e.setMessage()):i.postcssVersion}catch(n){console&&console.error&&console.error(n)}return e}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],i=this.runOnRoot(t);if(ke(i))try{await i}catch(n){throw this.handleError(n)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[ie];){e[ie]=!0;let t=[nr(e)];for(;t.length>0;){let i=this.visitTick(t);if(ke(i))try{await i}catch(n){let s=t[t.length-1].node;throw this.handleError(n,s)}}}if(this.listeners.OnceExit)for(let[t,i]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let n=e.nodes.map(s=>i(s,this.helpers));await Promise.all(n)}else await i(e,this.helpers)}catch(n){throw this.handleError(n)}}}return this.processed=!0,this.stringify()}prepareVisitors(){this.listeners={};let e=(t,i,n)=>{this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push([t,n])};for(let t of this.plugins)if(typeof t=="object")for(let i in t){if(!al[i]&&/^[A-Z]/.test(i))throw new Error(`Unknown event ${i} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!ol[i])if(typeof t[i]=="object")for(let n in t[i])n==="*"?e(t,i,t[i][n]):e(t,i+"-"+n.toLowerCase(),t[i][n]);else typeof t[i]=="function"&&e(t,i,t[i])}this.hasListener=Object.keys(this.listeners).length>0}visitTick(e){let t=e[e.length-1],{node:i,visitors:n}=t;if(i.type!=="root"&&i.type!=="document"&&!i.parent){e.pop();return}if(n.length>0&&t.visitorIndex<n.length){let[a,l]=n[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===n.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=a;try{return l(i.toProxy(),this.helpers)}catch(o){throw this.handleError(o,i)}}if(t.iterator!==0){let a=t.iterator,l;for(;l=i.nodes[i.indexes[a]];)if(i.indexes[a]+=1,!l[ie]){l[ie]=!0,e.push(nr(l));return}t.iterator=0,delete i.indexes[a]}let s=t.events;for(;t.eventIndex<s.length;){let a=s[t.eventIndex];if(t.eventIndex+=1,a===Ee){i.nodes&&i.nodes.length&&(i[ie]=!0,t.iterator=i.getIterator());return}else if(this.listeners[a]){t.visitors=this.listeners[a];return}}e.pop()}}ce.registerPostcss=r=>{si=r};var an=ce;ce.default=ce;nl.registerLazyResult(ce);il.registerLazyResult(ce);let ll=Hr,ul=Et,fl=Ci;const hl=_i;class ai{constructor(e,t,i){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=i,this._map=void 0;let n,s=ul;this.result=new hl(this._processor,n,this._opts),this.result.css=t;let a=this;Object.defineProperty(this.result,"root",{get(){return a.root}});let l=new ll(s,n,this._opts,t);if(l.isMap()){let[o,u]=l.generate();o&&(this.result.css=o),u&&(this.result.map=u)}}get[Symbol.toStringTag](){return"NoWorkResult"}get processor(){return this.result.processor}get opts(){return this.result.opts}get css(){return this.result.css}get content(){return this.result.css}get map(){return this.result.map}get root(){if(this._root)return this._root;let e,t=fl;try{e=t(this._css,this._opts)}catch(i){this.error=i}if(this.error)throw this.error;return this._root=e,e}get messages(){return[]}warnings(){return[]}toString(){return this._css}then(e,t){return this.async().then(e,t)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}sync(){if(this.error)throw this.error;return this.result}}var cl=ai;ai.default=ai;let dl=cl,pl=an,ml=wi,gl=Je;class ze{constructor(e=[]){this.version="8.4.14",this.plugins=this.normalize(e)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}process(e,t={}){return this.plugins.length===0&&typeof t.parser>"u"&&typeof t.stringifier>"u"&&typeof t.syntax>"u"?new dl(this,e,t):new pl(this,e,t)}normalize(e){let t=[];for(let i of e)if(i.postcss===!0?i=i():i.postcss&&(i=i.postcss),typeof i=="object"&&Array.isArray(i.plugins))t=t.concat(i.plugins);else if(typeof i=="object"&&i.postcssPlugin)t.push(i);else if(typeof i=="function")t.push(i);else if(!(typeof i=="object"&&(i.parse||i.stringify)))throw new Error(i+" is not a PostCSS plugin");return t}}var yl=ze;ze.default=ze;gl.registerProcessor(ze);ml.registerProcessor(ze);let bl=At,vl=Lr,wl=Rt,_l=Si,Sl=kt,xl=Je,Cl=xi;function We(r,e){if(Array.isArray(r))return r.map(n=>We(n));let{inputs:t,...i}=r;if(t){e=[];for(let n of t){let s={...n,__proto__:Sl.prototype};s.map&&(s.map={...s.map,__proto__:vl.prototype}),e.push(s)}}if(i.nodes&&(i.nodes=r.nodes.map(n=>We(n,e))),i.source){let{inputId:n,...s}=i.source;i.source=s,n!=null&&(i.source.input=e[n])}if(i.type==="root")return new xl(i);if(i.type==="decl")return new bl(i);if(i.type==="rule")return new Cl(i);if(i.type==="comment")return new wl(i);if(i.type==="atrule")return new _l(i);throw new Error("Unknown node type: "+r.type)}var Tl=We;We.default=We;let Ol=yi,on=At,El=an,Il=_e,Ti=yl,Al=Et,kl=Tl,ln=wi,Rl=Xr,un=Rt,fn=Si,Pl=_i,Dl=kt,Nl=Ci,Ml=rn,hn=xi,cn=Je,$l=It;function E(...r){return r.length===1&&Array.isArray(r[0])&&(r=r[0]),new Ti(r)}E.plugin=function(e,t){let i=!1;function n(...a){console&&console.warn&&!i&&(i=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+`: \u91CC\u9762 postcss.plugin \u88AB\u5F03\u7528. \u8FC1\u79FB\u6307\u5357:
https://www.w3ctech.com/topic/2226`));let l=t(...a);return l.postcssPlugin=e,l.postcssVersion=new Ti().version,l}let s;return Object.defineProperty(n,"postcss",{get(){return s||(s=n()),s}}),n.process=function(a,l,o){return E([n(o)]).process(a,l)},n};E.stringify=Al;E.parse=Nl;E.fromJSON=kl;E.list=Ml;E.comment=r=>new un(r);E.atRule=r=>new fn(r);E.decl=r=>new on(r);E.rule=r=>new hn(r);E.root=r=>new cn(r);E.document=r=>new ln(r);E.CssSyntaxError=Ol;E.Declaration=on;E.Container=Il;E.Processor=Ti;E.Document=ln;E.Comment=un;E.Warning=Rl;E.AtRule=fn;E.Result=Pl;E.Input=Dl;E.Rule=hn;E.Root=cn;E.Node=$l;El.registerPostcss(E);var Ll=E;E.default=E;const Bl=lr,sr=Ma,{isPlainObject:jl}=mi,ar=Ja,Ul=Nr.exports,{parse:Fl}=Ll,Hl=["img","audio","video","picture","svg","object","map","iframe","embed"],zl=["script","style"];function Pe(r,e){r&&Object.keys(r).forEach(function(t){e(r[t],t)})}function oe(r,e){return{}.hasOwnProperty.call(r,e)}function or(r,e){const t=[];return Pe(r,function(i){e(i)&&t.push(i)}),t}function Wl(r){for(const e in r)if(oe(r,e))return!1;return!0}function Vl(r){return r.map(function(e){if(!e.url)throw new Error("URL missing");return e.url+(e.w?` ${e.w}w`:"")+(e.h?` ${e.h}h`:"")+(e.d?` ${e.d}x`:"")}).join(", ")}var ql=Ve;const Gl=/^[^\0\t\n\f\r /<=>]+$/;function Ve(r,e,t){if(r==null)return"";let i="",n="";function s(h,g){const y=this;this.tag=h,this.attribs=g||{},this.tagPosition=i.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){if(b.length){const S=b[b.length-1];S.text+=y.text}},this.updateParentNodeMediaChildren=function(){b.length&&Hl.includes(this.tag)&&b[b.length-1].mediaChildren.push(this.tag)}}e=Object.assign({},Ve.defaults,e),e.parser=Object.assign({},Yl,e.parser),zl.forEach(function(h){e.allowedTags&&e.allowedTags.indexOf(h)>-1&&!e.allowVulnerableTags&&console.warn(`

\u26A0\uFE0F Your \`allowedTags\` option includes, \`${h}\`, which is inherently
vulnerable to XSS attacks. Please remove it from \`allowedTags\`.
Or, to disable this warning, add the \`allowVulnerableTags\` option
and ensure you are accounting for this risk.

`)});const a=e.nonTextTags||["script","style","textarea","option"];let l,o;e.allowedAttributes&&(l={},o={},Pe(e.allowedAttributes,function(h,g){l[g]=[];const y=[];h.forEach(function(S){typeof S=="string"&&S.indexOf("*")>=0?y.push(sr(S).replace(/\\\*/g,".*")):l[g].push(S)}),y.length&&(o[g]=new RegExp("^("+y.join("|")+")$"))}));const u={},f={},c={};Pe(e.allowedClasses,function(h,g){l&&(oe(l,g)||(l[g]=[]),l[g].push("class")),u[g]=[],c[g]=[];const y=[];h.forEach(function(S){typeof S=="string"&&S.indexOf("*")>=0?y.push(sr(S).replace(/\\\*/g,".*")):S instanceof RegExp?c[g].push(S):u[g].push(S)}),y.length&&(f[g]=new RegExp("^("+y.join("|")+")$"))});const m={};let v;Pe(e.transformTags,function(h,g){let y;typeof h=="function"?y=h:typeof h=="string"&&(y=Ve.simpleTransform(h)),g==="*"?v=y:m[g]=y});let p,b,d,C,N,L,A=!1;F();const U=new Bl.Parser({onopentag:function(h,g){if(e.enforceHtmlBoundary&&h==="html"&&F(),N){L++;return}const y=new s(h,g);b.push(y);let S=!1;const G=!!y.text;let B;if(oe(m,h)&&(B=m[h](h,g),y.attribs=g=B.attribs,B.text!==void 0&&(y.innerText=B.text),h!==B.tagName&&(y.name=h=B.tagName,C[p]=B.tagName)),v&&(B=v(h,g),y.attribs=g=B.attribs,h!==B.tagName&&(y.name=h=B.tagName,C[p]=B.tagName)),(e.allowedTags&&e.allowedTags.indexOf(h)===-1||e.disallowedTagsMode==="recursiveEscape"&&!Wl(d)||e.nestingLimit!=null&&p>=e.nestingLimit)&&(S=!0,d[p]=!0,e.disallowedTagsMode==="discard"&&a.indexOf(h)!==-1&&(N=!0,L=1),d[p]=!0),p++,S){if(e.disallowedTagsMode==="discard")return;n=i,i=""}i+="<"+h,h==="script"&&(e.allowedScriptHostnames||e.allowedScriptDomains)&&(y.innerText=""),(!l||oe(l,h)||l["*"])&&Pe(g,function(D,R){if(!Gl.test(R)){delete y.attribs[R];return}let Pt=!1;if(!l||oe(l,h)&&l[h].indexOf(R)!==-1||l["*"]&&l["*"].indexOf(R)!==-1||oe(o,h)&&o[h].test(R)||o["*"]&&o["*"].test(R))Pt=!0;else if(l&&l[h]){for(const T of l[h])if(jl(T)&&T.name&&T.name===R){Pt=!0;let O="";if(T.multiple===!0){const de=D.split(" ");for(const se of de)T.values.indexOf(se)!==-1&&(O===""?O=se:O+=" "+se)}else T.values.indexOf(D)>=0&&(O=D);D=O}}if(Pt){if(e.allowedSchemesAppliedToAttributes.indexOf(R)!==-1&&H(h,D)){delete y.attribs[R];return}if(h==="script"&&R==="src"){let T=!0;try{const O=X(D);if(e.allowedScriptHostnames||e.allowedScriptDomains){const de=(e.allowedScriptHostnames||[]).find(function(ee){return ee===O.url.hostname}),se=(e.allowedScriptDomains||[]).find(function(ee){return O.url.hostname===ee||O.url.hostname.endsWith(`.${ee}`)});T=de||se}}catch{T=!1}if(!T){delete y.attribs[R];return}}if(h==="iframe"&&R==="src"){let T=!0;try{const O=X(D);if(O.isRelativeUrl)T=oe(e,"allowIframeRelativeUrls")?e.allowIframeRelativeUrls:!e.allowedIframeHostnames&&!e.allowedIframeDomains;else if(e.allowedIframeHostnames||e.allowedIframeDomains){const de=(e.allowedIframeHostnames||[]).find(function(ee){return ee===O.url.hostname}),se=(e.allowedIframeDomains||[]).find(function(ee){return O.url.hostname===ee||O.url.hostname.endsWith(`.${ee}`)});T=de||se}}catch{T=!1}if(!T){delete y.attribs[R];return}}if(R==="srcset")try{let T=Ul(D);if(T.forEach(function(O){H("srcset",O.url)&&(O.evil=!0)}),T=or(T,function(O){return!O.evil}),T.length)D=Vl(or(T,function(O){return!O.evil})),y.attribs[R]=D;else{delete y.attribs[R];return}}catch{delete y.attribs[R];return}if(R==="class"){const T=u[h],O=u["*"],de=f[h],se=c[h],ee=f["*"],Oi=[de,ee].concat(se).filter(function(dn){return dn});if(T&&O?D=fe(D,ar(T,O),Oi):D=fe(D,T||O,Oi),!D.length){delete y.attribs[R];return}}if(R==="style")try{const T=Fl(h+" {"+D+"}"),O=Z(T,e.allowedStyles);if(D=Se(O),D.length===0){delete y.attribs[R];return}}catch{delete y.attribs[R];return}i+=" "+R,D&&D.length&&(i+='="'+q(D,!0)+'"')}else delete y.attribs[R]}),e.selfClosing.indexOf(h)!==-1?i+=" />":(i+=">",y.innerText&&!G&&!e.textFilter&&(i+=q(y.innerText),A=!0)),S&&(i=n+q(i),n="")},ontext:function(h){if(N)return;const g=b[b.length-1];let y;if(g&&(y=g.tag,h=g.innerText!==void 0?g.innerText:h),e.disallowedTagsMode==="discard"&&(y==="script"||y==="style"))i+=h;else{const S=q(h,!1);e.textFilter&&!A?i+=e.textFilter(S,y):A||(i+=S)}if(b.length){const S=b[b.length-1];S.text+=h}},onclosetag:function(h){if(N)if(L--,!L)N=!1;else return;const g=b.pop();if(!g)return;N=e.enforceHtmlBoundary?h==="html":!1,p--;const y=d[p];if(y){if(delete d[p],e.disallowedTagsMode==="discard"){g.updateParentNodeText();return}n=i,i=""}if(C[p]&&(h=C[p],delete C[p]),e.exclusiveFilter&&e.exclusiveFilter(g)){i=i.substr(0,g.tagPosition);return}if(g.updateParentNodeMediaChildren(),g.updateParentNodeText(),e.selfClosing.indexOf(h)!==-1){y&&(i=n,n="");return}i+="</"+h+">",y&&(i=n+q(i),n=""),A=!1}},e.parser);return U.write(r),U.end(),i;function F(){i="",p=0,b=[],d={},C={},N=!1,L=0}function q(h,g){return typeof h!="string"&&(h=h+""),e.parser.decodeEntities&&(h=h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),g&&(h=h.replace(/"/g,"&quot;"))),h=h.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),g&&(h=h.replace(/"/g,"&quot;")),h}function H(h,g){for(g=g.replace(/[\x00-\x20]+/g,"");;){const G=g.indexOf("<!--");if(G===-1)break;const B=g.indexOf("-->",G+4);if(B===-1)break;g=g.substring(0,G)+g.substring(B+3)}const y=g.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!y)return g.match(/^[/\\]{2}/)?!e.allowProtocolRelative:!1;const S=y[1].toLowerCase();return oe(e.allowedSchemesByTag,h)?e.allowedSchemesByTag[h].indexOf(S)===-1:!e.allowedSchemes||e.allowedSchemes.indexOf(S)===-1}function X(h){if(h=h.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//"),h.startsWith("relative:"))throw new Error("relative: exploit attempt");let g="relative://relative-site";for(let G=0;G<100;G++)g+=`/${G}`;const y=new URL(h,g);return{isRelativeUrl:y&&y.hostname==="relative-site"&&y.protocol==="relative:",url:y}}function Z(h,g){if(!g)return h;const y=h.nodes[0];let S;return g[y.selector]&&g["*"]?S=ar(g[y.selector],g["*"]):S=g[y.selector]||g["*"],S&&(h.nodes[0].nodes=y.nodes.reduce(ue(S),[])),h}function Se(h){return h.nodes[0].nodes.reduce(function(g,y){return g.push(`${y.prop}:${y.value}${y.important?" !important":""}`),g},[]).join(";")}function ue(h){return function(g,y){return oe(h,y.prop)&&h[y.prop].some(function(G){return G.test(y.value)})&&g.push(y),g}}function fe(h,g,y){return g?(h=h.split(/\s+/),h.filter(function(S){return g.indexOf(S)!==-1||y.some(function(G){return G.test(S)})}).join(" ")):h}}const Yl={decodeEntities:!0};Ve.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1};Ve.simpleTransform=function(r,e,t){return t=t===void 0?!0:t,e=e||{},function(i,n){let s;if(t)for(s in e)n[s]=e[s];else n=e;return{tagName:r,attribs:n}}};const Kl=ql,Re=window.React,Jl={1:"toc-indent1",2:"toc-indent2",3:"toc-indent3",4:"toc-indent4",5:"toc-indent5",6:"toc-indent6"},Ft=markdownit({html:!0});class dt extends Re.Component{constructor(e){super(e),markdownitSynapse.init_markdown_it(Ft,markdownitSub,markdownitSup,markdownitCentertext,markdownitSynapseHeading,markdownitSynapseTable,markdownitStrikethroughAlt,markdownitContainer,markdownitEmphasisAlt,markdownitInlineComments,markdownitBr);const t="";Ft.use(markdownitSynapse,t,"https://synapse.org").use(markdownitMath,t);const i={};this.props.markdown&&(i.markdown=this.props.markdown),this.state={md:Ft,error:void 0,fileHandles:void 0,data:i,isLoading:!0},this.markupRef=Re.createRef(),this.handleLinkClicks=this.handleLinkClicks.bind(this),this.renderMarkdown=this.renderMarkdown.bind(this),this.recursiveRender=this.recursiveRender.bind(this),this.processMath=this.processMath.bind(this),this.getWikiAttachments=this.getWikiAttachments.bind(this),this.getWikiPageMarkdown=this.getWikiPageMarkdown.bind(this),this.renderWidget=this.renderWidget.bind(this),this.renderSynapseButton=this.renderSynapseButton.bind(this),this.renderSynapseImage=this.renderSynapseImage.bind(this),this.renderVideo=this.renderVideo.bind(this),this.renderSynapsePlot=this.renderSynapsePlot.bind(this),this.renderSynapseTOC=this.renderSynapseTOC.bind(this),this.createHTML=this.createHTML.bind(this),this.addBookmarks=this.addBookmarks.bind(this),this.addIdsToReferenceWidgets=this.addIdsToReferenceWidgets.bind(this),this.addIdsToTocWidgets=this.addIdsToTocWidgets.bind(this)}componentWillUnmount(){this.markupRef.current&&this.markupRef.current.removeEventListener("click",this.handleLinkClicks)}handleLinkClicks(e){const t=e.target;if(t.tagName==="A"||t.tagName==="BUTTON"){const i=e.target;if(i.id.substring(0,3)==="ref"){e.preventDefault();const n=Number(e.currentTarget.id.substring(3)),s=this.markupRef.current.querySelector(`#bookmark${n}`);try{s.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(a){console.log("error on scroll",a)}}else if(e.currentTarget.id!==null&&i.getAttribute("data-anchor")){e.preventDefault();const n=i.getAttribute("data-anchor"),s=this.markupRef.current.querySelector(`#${n}`);try{s.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(a){console.log("error on scroll",a)}}}}createHTML(e){if(!e)return{__html:""};const t=this.props.renderInline?this.state.md.renderInline(e):this.state.md.render(e);return{__html:Kl(t,{allowedAttributes:{a:["href","target"],button:["class"],div:["class"],h1:["toc"],h2:["toc"],h3:["toc"],h4:["toc"],h5:["toc"],h6:["toc"],li:["class"],ol:["class"],span:["*"],table:["class"],th:["colspan"],thead:["class"],ul:["class"],img:["src","alt"]},allowedTags:["span","code","h1","h2","h3","h4","h5","p","b","i","em","strong","a","id","table","tr","td","tbody","th","thead","button","div","img","image","ol","ul","li","svg","g","br","hr","summary","details","strong"]})}}processMath(){if(!this.markupRef.current)return;const e=this.markupRef.current.querySelectorAll('[id^="mathjax-"]'),t=new RegExp(/\\[()[\]]/,"g");e.forEach(i=>{if(i.textContent&&!i.getAttribute("processed")){i.setAttribute("processed","true");const n=i.textContent.replace(t,"");return katex.render(n,i,{output:"html",throwOnError:!1})}})}addBookmarks(){markdownitSynapse.resetFootnotes(),this.createHTML(this.state.data.markdown);const e=this.createHTML(markdownitSynapse.footnotes()).__html;if(e.length>0)return w(Fn,{footnotes:e})}async getWikiPageMarkdown(){const{ownerId:e,wikiId:t,objectType:i}=this.props;if(!(!e&&!t))try{const n=await _n(this.context.accessToken,e,t,i);try{const s=await this.getWikiAttachments(t||n.id);this.setState({data:n,fileHandles:s,error:void 0})}catch(s){console.error("fileHandlesErr = ",s)}}catch(n){console.error(`Error on wiki markdown load
`,n),this.setState({error:n})}}async getWikiAttachments(e){const{ownerId:t,objectType:i}=this.props;if(!t){console.error("Cannot get wiki attachments without ownerId on Markdown Component");return}return await Sn(this.context.accessToken,t,e,i).then(n=>n).catch(n=>{console.error("Error on wiki attachment load ",n)})}addIdsToReferenceWidgets(e){const t=/<span id="wikiReference.*?<span data-widgetparams.*?span>/g;let i=1;return e.replace(t,()=>{const n=i;return i+=1,`<a href="" id="ref${n}">[${n}]</a>`})}addIdsToTocWidgets(e){const t="SRC-header-";let i=1;const n=/<h[1-6] toc="true">.*<\/h[1-6]>/gm;return e.replace(n,s=>{const a=i;return i+=1,`${s.substring(0,3)} id="${t}${a}"${s.substring(3)}`})}renderMarkdown(){let e=this.createHTML(this.state.data.markdown).__html;if(e=this.addIdsToReferenceWidgets(e),e=this.addIdsToTocWidgets(e),e.length>0){const i=new DOMParser().parseFromString(e,"text/html");return w(ge,{children:this.recursiveRender(i.body,e)})}}recursiveRender(e,t){if(e.nodeType===Node.TEXT_NODE)return Q(ge,{children:[" ",e.textContent," "]});if(e.nodeType===Node.ELEMENT_NODE&&e instanceof HTMLElement){const i=e.tagName.toLowerCase()==="body"?"span":e.tagName.toLowerCase(),n=e.getAttribute("data-widgetparams");if(n)return this.processHTMLWidgetMapping(n,t);const s=e.attributes,a={};for(let o=0;o<s.length;o++){let u="",f="";const c=s.item(o);c&&(u=c.name,f=c.value),u&&f&&(a[u]=f)}if(e.childNodes.length===0)return Re.createElement(i,a);const l=Array.from(e.childNodes).map((o,u)=>w(Re.Fragment,{children:this.recursiveRender(o,t)},u));return Re.createElement(i,a,w(ge,{children:l}))}}decodeXml(e){const t={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'};return e.replace(/(&quot;|&lt;|&gt;|&amp;)/g,(i,n)=>t[n])}processHTMLWidgetMapping(e,t){const i=this.decodeXml(e),n=i.indexOf("?");if(n===-1)return this.renderWidget(i,{},t);const s=i.substring(0,n),a={};return i.substring(n+1).split("&").forEach(l=>{let[o,u]=l.split("=");u=decodeURIComponent(u),a[o]=u}),this.renderWidget(s,a,t)}renderWidget(e,t,i){const n=JSON.stringify(t);switch(t.reactKey=n,e){case"buttonlink":return this.renderSynapseButton(t);case"image":return this.renderSynapseImage(t);case"plot":return this.renderSynapsePlot(t);case"toc":return this.renderSynapseTOC(i);case"badge":return this.renderUserBadge(t);case"iduReport":return this.renderIntendedDataUseReport(t);case"video":case"vimeo":case"youtube":return this.renderVideo(t);default:return}}renderSynapseButton(e){let t="pill-xl ";const{align:i="",highlight:n=""}=e,s=i.toLowerCase();s==="left"&&(t+="floatLeft "),s==="right"&&(t+="floatright ");const a=n==="true"?"secondary":"light-secondary";return s==="center"?w("div",{className:"bootstrap-4-backport",style:{textAlign:"center"},children:w(Ii,{href:e.url,className:t,variant:a,children:e.text})},e.reactKey):w("span",{className:"bootstrap-4-backport",children:w(Ii,{href:e.url,className:t,variant:a,children:e.text})})}renderSynapsePlot(e){return w(Wn,{ownerId:this.props.ownerId,wikiId:this.props.wikiId||this.state.data.id,widgetparamsMapped:e},e.reactKey)}renderVideo(e){return w(En,{params:e})}renderSynapseImage(e){const{reactKey:t}=e;if(e.fileName)return this.state.fileHandles?w(ki,{params:e,fileName:e.fileName,wikiId:this.props.wikiId||this.state.data.id,fileResults:this.state.fileHandles.list},t):void 0;if(e.synapseId)return w(ki,{params:e,synapseId:e.synapseId},t)}renderSynapseTOC(e){const t=[],i=/<h([1-6]) id="(.*)" .*toc="true">(.*)<\/h[1-6]>/gm;let n="";return e.replace(i,(s,a,l,o)=>(n+=o,t.push(w("div",{children:w("a",{role:"link",className:`link ${Jl[Number(a)]}`,"data-anchor":l,children:o})},o)),"")),w("div",{children:t},n)}renderUserBadge(e){return w(zt,{size:Ht,alias:e.alias},JSON.stringify(e))}renderIntendedDataUseReport(e){return w(Gn,{accessRequirementId:e.accessRestrictionId},JSON.stringify(e))}async componentDidMount(){if(this.state.data.markdown){this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current);return}this.markupRef.current&&this.markupRef.current.addEventListener("click",this.handleLinkClicks),await this.getWikiPageMarkdown(),this.processMath(),this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current)}async componentDidUpdate(e){let t=this.props.ownerId!==e.ownerId;t=t||this.props.wikiId!==e.wikiId,t&&await this.getWikiPageMarkdown(),this.processMath()}render(){const{renderInline:e}=this.props,{isLoading:t,error:i}=this.state;if(i)return w(xn,{error:i});const n=this.addBookmarks(),s=Q(ge,{children:[t&&w("span",{className:"spinner"}),this.renderMarkdown(),n&&w("div",{children:this.addBookmarks()})]});return e?w("span",{className:"markdown markdown-inline",ref:this.markupRef,children:s}):w("div",{className:"markdown",ref:this.markupRef,children:s})}}dt.contextType=oi;try{dt.displayName="MarkdownSynapse",dt.__docgenInfo={description:"Basic Markdown functionality for Synapse, supporting Images/Plots/References/Bookmarks/buttonlinks",displayName:"MarkdownSynapse",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},markdown:{defaultValue:null,description:"",name:"markdown",required:!1,type:{name:"string"}},renderInline:{defaultValue:null,description:"",name:"renderInline",required:!1,type:{name:"boolean"}},objectType:{defaultValue:null,description:"",name:"objectType",required:!1,type:{name:"enum",value:[{value:'"ENTITY"'},{value:'"ENTITY_CONTAINER"'},{value:'"PRINCIPAL"'},{value:'"ACTIVITY"'},{value:'"EVALUATION"'},{value:'"SUBMISSION"'},{value:'"EVALUATION_SUBMISSIONS"'},{value:'"FILE"'},{value:'"MESSAGE"'},{value:'"WIKI"'},{value:'"FAVORITE"'},{value:'"ACCESS_REQUIREMENT"'},{value:'"ACCESS_APPROVAL"'},{value:'"TEAM"'},{value:'"TABLE"'},{value:'"ACCESS_CONTROL_LIST"'},{value:'"PROJECT_SETTING"'},{value:'"VERIFICATION_SUBMISSION"'},{value:'"CERTIFIED_USER_PASSING_RECORD"'},{value:'"FORUM"'},{value:'"THREAD"'},{value:'"REPLY"'},{value:'"FORM_GROUP"'},{value:'"FORM_DATA"'},{value:'"ENTITY_VIEW"'},{value:'"USER_PROFILE"'},{value:'"DATA_ACCESS_REQUEST"'},{value:'"DATA_ACCESS_SUBMISSION"'},{value:'"DATA_ACCESS_SUBMISSION_STATUS"'},{value:'"MEMBERSHIP_INVITATION"'}]}},onMarkdownProcessingDone:{defaultValue:null,description:"",name:"onMarkdownProcessingDone",required:!1,type:{name:"((ref: HTMLInputElement | null) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/MarkdownSynapse.tsx#MarkdownSynapse"]={docgenInfo:dt.__docgenInfo,name:"MarkdownSynapse",path:"src/lib/containers/MarkdownSynapse.tsx#MarkdownSynapse"})}catch{}export{dt as M};
