import{f as Ke,h as We,j as Ge,k as ze,F as Ve,l as xe,D as Qe,O as Re,M as ke,G as je,m as Je,n as Xe,o as Ze,B as en,p as nn,q as an,r as tn,s as rn,t as sn,v as on,w as ln,E as dn}from"./index.a31988f6.js";import{S as Pe,D as cn,p as un,i as pn,a as mn}from"./sqlFunctions.59c64146.js";import{u as fn}from"./useGetInfoFromIds.2b41d0e5.js";import{C as me}from"./ColumnType.744125d2.js";import"./assert.976a01c8.js";import{i as Ue}from"./EntityTypeUtils.e84484e3.js";import{P as G}from"./getEndpoint.bb7ded34.js";import{u as Z}from"./ElementWithTooltip.0e8b8520.js";import{d as yn}from"./Tooltip.006e7cf4.js";import{u as Cn,T as gn,g as hn,Q as _n,a as Sn,b as Rn,c as Ln}from"./TotalQueryResults.9a41b65a.js";import{u as bn}from"./use-deep-compare-effect.esm.76673280.js";import{i as Nn,r as On}from"./queryUtils.a2464bac.js";import{j as e,a as p,F as I}from"./jsx-runtime.00d70968.js";import{c as Le}from"./cloneDeep.14634229.js";import{C as Ie,I as Ye,a as In,S as Tn}from"./index.704f3098.js";import{M as fe}from"./MarkdownSynapse.6407d9f1.js";import{I as vn}from"./IconList.47bd9f12.js";import{I as Te,t as qn}from"./IconSvg.e3afc045.js";import{U as Ne}from"./UserCard.99c01aac.js";import{F as An}from"./FileHandleLink.00959087.js";import{u as En}from"./react-intersection-observer.esm.e445ee86.js";import{i as wn}from"./isEmpty.b4606f77.js";import{l as Vn}from"./LoadingScreen.b468edab.js";import{c as xn}from"./calculateFriendlyFileSize.9c20c573.js";import{B as ve}from"./Button.fda23eee.js";import{h as kn}from"./moment.a565bb48.js";import{S as Dn}from"./SkeletonTable.b0e9ac62.js";import{S as De}from"./Skeleton.c897a2bf.js";import{s as Mn}from"./NoSearchResults.a01d676d.js";import{U as Bn}from"./UserCardList.63b6cbe9.js";const Me=window.React.useState,Fn=window.React.useEffect,ee=({type:a,title:n,subTitle:t="",description:r,values:i,secondaryLabelLimit:o,isAlignToLeftNav:l,descriptionConfig:d,href:c,target:s,rgbIndex:m,icon:h})=>{const f=document.querySelector('meta[name="description"]'),[b]=Me(document.title),[_]=Me(f?f.getAttribute("content"):"");return Fn(()=>(n&&document.title!==n&&(document.title=n),(r||t)&&(f==null||f.setAttribute("content",r||t)),function(){document.title=b,f==null||f.setAttribute("content",_)})),e("div",{className:`SRC-portalCard SRC-portalCardHeader ${l?"isAlignToLeftNav":""}`,children:e("div",{className:"container-fluid container-full-width",children:e("div",{className:"row",children:e("div",{className:"col-md-offset-1 col-md-10",children:p("div",{className:"SRC-portalCardMain",children:[h,p("div",{style:{width:"100%"},children:[p("div",{className:"SRC-cardContent",style:{marginLeft:"15px"},children:[e("div",{className:"SRC-type",children:a}),e("div",{children:e("h3",{className:"SRC-boldText",style:{margin:"none"},children:c?e("a",{target:s,href:c,className:"highlight-link",children:n}):p("span",{children:[" ",n," "]})})}),t&&p("div",{className:"SRC-author",children:[" ",t," "]}),r&&e("span",{className:"SRC-font-size-base",children:d!=null&&d.isMarkdown?e(fe,{markdown:r}):r})]}),e("div",{style:{borderTop:"1px solid rgba(26, 28, 41, 0.2)",marginTop:"15px",paddingTop:"5px"}}),e("div",{className:"SRC-cardContent",children:i&&e(Ie,{isHeader:!0,secondaryLabelLimit:o,values:i})})]})]})})})})})};try{ee.displayName="HeaderCard",ee.__docgenInfo={description:"",displayName:"HeaderCard",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subTitle:{defaultValue:{value:""},description:"",name:"subTitle",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[][]"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},href:{defaultValue:null,description:"",name:"href",required:!1,type:{name:"string"}},target:{defaultValue:null,description:"",name:"target",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"Element"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HeaderCard.tsx#HeaderCard"]={docgenInfo:ee.__docgenInfo,name:"HeaderCard",path:"src/lib/containers/HeaderCard.tsx#HeaderCard"})}catch{}const Hn=window.React.useEffect,Qn=window.React.useState,ne=a=>{const{fileHandleAssociation:{fileHandleId:n,associateObjectId:t,associateObjectType:r}}=a,{accessToken:i}=Ke(),[o,l]=Qn(),{ref:d,inView:c}=En({triggerOnce:!0,rootMargin:"500px 0px"});return Hn(()=>{(()=>{n&&t&&r&&c&&We(n,i,r,t,!1).then(m=>{l(m)}).catch(m=>{console.error("Error on retrieving file handle url ",m)})})()},[c,n,t,i,r]),e("span",{ref:d,children:o&&e("img",{src:o,alt:"",className:"ImageFileHandle",loading:"lazy"})})};try{ne.displayName="ImageFileHandle",ne.__docgenInfo={description:"",displayName:"ImageFileHandle",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"]={docgenInfo:ne.__docgenInfo,name:"ImageFileHandle",path:"src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"})}catch{}const Oe=window.React,qe=400,Pn="SRC-short-description",Un="SRC-long-description",ae=a=>{let n="";const t=a.split(" ");let r=0;for(;n.length<qe&&r<t.length;)n+=`${t[r]} `,r+=1;return n=n.trim(),{previewText:n}},Yn=(a,n,t)=>{var i;let r;return a&&n&&(Ue(a)?r={fileHandleId:n,associateObjectId:(i=a==null?void 0:a.id)!=null?i:"",associateObjectType:Ve.TableEntity}:t&&(r={fileHandleId:n,associateObjectId:t,associateObjectType:Ve.FileEntity})),r},V=({columnName:a,value:n,selectColumns:t,columnModels:r})=>{if(!n)return{str:"",strList:void 0,columnModelType:void 0};const i=(t==null?void 0:t.find(l=>l.name===a))||(r==null?void 0:r.find(l=>l.name===a));if(i==null?void 0:i.columnType.endsWith("_LIST")){let l=n,d;try{return d=JSON.parse(l),l=d.join(", "),{strList:d,str:l,columnModelType:i==null?void 0:i.columnType}}catch(c){console.error("Could not parse multivalue string ",l," caught err ",c)}}return{str:n,columnModelType:i==null?void 0:i.columnType}},$n=(a,n,t)=>(n==null?void 0:n.findIndex(r=>r.name===a))||(t==null?void 0:t.findIndex(r=>r.name===a)),te=a=>{const{synapseId:n,version:t}=a;return p("span",{children:[t,"\xA0\xA0",e("a",{target:A.NEW_WINDOW,rel:"noopener noreferrer",href:`${G.PORTAL}#!Synapse:${n}.${t}`,children:"(Show Version History on Synapse)"})]})},re=a=>{const{value:n,columnName:t,labelLink:r,selectColumns:i,columnModels:o,isHeader:l,className:d,rowData:c}=a;if(!n)return e(I,{children:n});const{strList:s,str:m,columnModelType:h}=V({columnName:t,value:n,selectColumns:i,columnModels:o});if(!m)return e(I,{children:m});let f=d;const b={};if(l&&(f=d==null?void 0:d.concat(" ","SRC-lightLink")),h===me.USERID_LIST&&s)return e(I,{children:s.map((S,y)=>p("span",{children:[e(Ne,{ownerId:S,size:xe,className:f}),y<s.length-1&&",\xA0\xA0"]},S))});if(h===me.USERID&&m)return e(Ne,{ownerId:m,size:xe,className:f});if(!r)return m.match(Pe)?e("a",{target:A.NEW_WINDOW,rel:"noopener noreferrer",href:`${G.PORTAL}#!Synapse:${m}`,className:f,children:m}):e(I,{children:m});let _;if(r.isMarkdown)s?_=e(I,{children:s.map((S,y)=>p("span",{children:[e(fe,{renderInline:!0,markdown:S},S),y<s.length-1&&",\xA0\xA0"]},S))}):_=e(fe,{renderInline:!0,markdown:n});else{const S=s||m.split(",");let y;if("target"in r&&(y=r.target),"linkColumnName"in r){const R=$n(r.linkColumnName,i,o);if(R==null)console.warn(`Could not determine column index of ${r.linkColumnName}`),_=e(I,{children:n});else{const u=c[R];wn(u)?_=e(I,{children:n}):_=e(I,{children:S.map((O,C)=>p(Oe.Fragment,{children:[e("a",{href:u!=null?u:void 0,target:y!=null?y:A.NEW_WINDOW,rel:"noopener noreferrer",className:f,style:b,children:O},O),C<S.length-1&&e("span",{style:{marginRight:4},children:", "})]},O))})}}else _=e(I,{children:S.map((R,u)=>{const{baseURL:O,URLColumnName:C,wrapValueWithParens:L}=r,g=L?`(${R})`:R,N=`/${O}?${C}=${g}`;return p(Oe.Fragment,{children:[e("a",{href:N,className:f,style:b,target:y!=null?y:A.CURRENT_WINDOW,children:R},R),u<S.length-1&&e("span",{style:{marginRight:4},children:", "})]},R)})})}return r.tooltipText?e(yn,{title:r.tooltipText,enterNextDelay:300,children:e("span",{children:_})}):_};function Kn(a,n,t){if(a){if(!n||!t)throw Error("Must specify CardLink and data for linking to work");const{matchColumnName:r,URLColumnName:i,overrideLinkURLColumnName:o}=a;if(o&&t[o]){const d=t[o],c=n[d];if(c)return c}const l=t[r];if(l===void 0)console.error(`Could not find match for data: ${n} with columnName ${r}`);else{const d=n[l];if(d)return`/${a.baseURL}?${i}=${d}`}}}function Be(a,n,t,r){var d,c;a=a.trim();let i=a,o=A.CURRENT_WINDOW;a.match(Pe)?i=`${G.PORTAL}#!Synapse:${a}`:a.match(cn)?(o=A.NEW_WINDOW,i=`https://dx.doi.org/${a}`):n?n&&(i=(d=Kn(n,t,r))!=null?d:"",i.includes("/DetailsPage")&&(o=A.NEW_WINDOW)):o=A.NEW_WINDOW;const l=(c=n==null?void 0:n.target)!=null?c:o;return{href:i,target:l}}function ie(a){const{description:n,hasClickedShowMore:t,descriptionSubTitle:r,descriptionConfig:i}=a;let o=n;i!=null&&i.isMarkdown&&(o=e(fe,{markdown:o}));const l=t||(i==null?void 0:i.showFullDescriptionByDefault);return e("div",{className:l?"":"SRC-hidden",children:e("span",{"data-search-handle":r,className:`SRC-font-size-base ${Un}`,children:o})})}function se(a){const{description:n,hasClickedShowMore:t,descriptionSubTitle:r,descriptionConfig:i,toggleShowMore:o}=a;return i!=null&&i.showFullDescriptionByDefault?e(I,{}):p("div",{className:t?"SRC-hidden":"",children:[e("span",{"data-search-handle":r,className:`SRC-font-size-base ${Pn} SRC-short-description`,children:ae(n).previewText}),n.length>=qe&&e("a",{style:{fontSize:"16px",cursor:"pointer",marginLeft:"5px"},className:"highlight-link",onClick:o,children:"...Show More"})]})}class W extends Oe.Component{constructor(n){super(n),this.getCutoff=t=>{let r="";const i=t.split(" ");let o=0;for(;r.length<qe&&o<i.length;)r+=`${i[o]} `,o+=1;return r=r.trim(),{previewText:r}},this.toggleShowMore=()=>{this.setState({hasClickedShowMore:!0})},this.renderTitle=({href:t,target:r,titleSearchHandle:i,title:o})=>t?e("a",{"data-search-handle":i,target:r,href:t,className:"highlight-link",children:o}):p("span",{"data-search-handle":i,children:[" ",o," "]}),this.state={hasClickedShowMore:!1}}render(){var Ee;const{schema:n,data:t,genericCardSchema:r,secondaryLabelLimit:i,selectColumns:o,columnModels:l,iconOptions:d,useTypeColumnForIcon:c=!1,isHeader:s=!1,titleLinkConfig:m,ctaLinkConfig:h,labelLinkConfig:f,facetAliases:b={},descriptionConfig:_,rgbIndex:S,columnIconOptions:y,queryContext:{entity:R}}=this.props,u=r,{hasClickedShowMore:O}=this.state,{link:C="",type:L}=u,g=t[n[u.title]];let N=u.subTitle&&t[n[u.subTitle]];N=(u==null?void 0:u.subTitle)&&V({value:N,columnName:u==null?void 0:u.subTitle,selectColumns:o,columnModels:l}).str;const x=t[n[u.description||""]],ye=t[n[u.icon||""]],k=t[n[u.dataTypeIconNames||""]],D=t[n[u.imageFileHandleColumnName||""]],T=l==null?void 0:l.find(B=>u.link===B.name),z=T==null?void 0:T.columnType,Y=t[n[C]]||"",{href:j,target:J}=Be(Y,m,t,n),H=[],{secondaryLabels:Ce=[]}=u,ge=R&&!Ue(R);for(let B=0;B<Ce.length;B+=1){const E=Ce[B];let w=t[n[E]],_e;if(w){if(ge&&E==="currentVersion"){const Se=t[n.id];w=te({synapseId:Se,version:w}),_e="Version"}else{const Se=f==null?void 0:f.find(we=>we.matchColumnName===E);w=e(re,{value:w,columnName:E,labelLink:Se,isHeader:s,selectColumns:o,columnModels:l,rowData:t}),_e=Z(E,b)}const $e=[_e,w,E];H.push($e)}}const $=Yn(R,D||Y,t[n.id]),K=H.length>0,v={marginTop:s?"0px":void 0,marginBottom:s?"0px":void 0,paddingBottom:K||D?void 0:"15px"},q=p(I,{children:[!c&&D&&e("div",{className:"SRC-imageThumbnail",style:{padding:u.thumbnailRequiresPadding?"21px":void 0},children:$&&e(ne,{fileHandleAssociation:$})}),!c&&!D&&e("div",{className:"SRC-cardThumbnail",children:e(Ye,{iconOptions:d,value:ye,type:L})}),c&&e("div",{className:"SRC-cardThumbnail",children:e(Te,{options:{icon:qn[t[n.type]]}})})]});if(s)return e(ee,{descriptionConfig:_,title:g,subTitle:N,description:x,type:L,icon:q,values:H,href:j,target:J,isAlignToLeftNav:!0,secondaryLabelLimit:i,rgbIndex:S});const M=Z(u.title,b),Q=Z(u.subTitle,b),X=Z(u.description,b);let P,he;if(h){const B=t[n[h.link]]||"",{href:E,target:w}=Be(B,void 0,t,n);P=E,he=w}return p("div",{style:v,className:"SRC-portalCard",children:[p("div",{className:"SRC-portalCardMain",children:[q,p("div",{className:"SRC-cardContent",children:[e("div",{className:"SRC-type",children:L}),((Ee=y==null?void 0:y.columns)==null?void 0:Ee.dataType)&&(k==null?void 0:k.length)&&e("div",{style:{marginTop:"20px"},children:e(vn,{iconConfigs:y.columns.dataType,iconNames:JSON.parse(k),useBackground:!0,useTheme:!0})}),e("div",{children:e("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"},children:!m&&z===me.FILEHANDLEID&&$?e(An,{fileHandleAssociation:$,showDownloadIcon:L!==Ge,displayValue:g}):this.renderTitle({href:j,target:J,titleSearchHandle:M,title:g})})}),N&&e("div",{"data-search-handle":Q,className:"SRC-author",children:N}),x&&e(se,{description:x,hasClickedShowMore:O,descriptionSubTitle:X,descriptionConfig:_,toggleShowMore:this.toggleShowMore}),x&&e(ie,{description:x,hasClickedShowMore:O,descriptionSubTitle:X,descriptionConfig:_}),h&&P&&he&&e("div",{className:"SRC-portalCardCTALink bootstrap-4-backport",children:e("a",{target:he,rel:"noopener noreferrer",href:P,children:h.text})})]})]}),K&&e(Ie,{isHeader:!1,secondaryLabelLimit:i,values:H,columnIconOptions:y,className:`${D?"hasImage":"hasIcon"}`})]})}}W.contextType=ze;try{ie.displayName="LongDescription",ie.__docgenInfo={description:"",displayName:"LongDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#LongDescription"]={docgenInfo:ie.__docgenInfo,name:"LongDescription",path:"src/lib/containers/GenericCard.tsx#LongDescription"})}catch{}try{se.displayName="ShortDescription",se.__docgenInfo={description:"",displayName:"ShortDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},toggleShowMore:{defaultValue:null,description:"",name:"toggleShowMore",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#ShortDescription"]={docgenInfo:se.__docgenInfo,name:"ShortDescription",path:"src/lib/containers/GenericCard.tsx#ShortDescription"})}catch{}try{ae.displayName="getCutoff",ae.__docgenInfo={description:"",displayName:"getCutoff",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getCutoff"]={docgenInfo:ae.__docgenInfo,name:"getCutoff",path:"src/lib/containers/GenericCard.tsx#getCutoff"})}catch{}try{V.displayName="getValueOrMultiValue",V.__docgenInfo={description:"",displayName:"getValueOrMultiValue",props:{columnName:{defaultValue:null,description:"",name:"columnName",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getValueOrMultiValue"]={docgenInfo:V.__docgenInfo,name:"getValueOrMultiValue",path:"src/lib/containers/GenericCard.tsx#getValueOrMultiValue"})}catch{}try{te.displayName="VersionLabel",te.__docgenInfo={description:"",displayName:"VersionLabel",props:{synapseId:{defaultValue:null,description:"",name:"synapseId",required:!0,type:{name:"string"}},version:{defaultValue:null,description:"",name:"version",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#VersionLabel"]={docgenInfo:te.__docgenInfo,name:"VersionLabel",path:"src/lib/containers/GenericCard.tsx#VersionLabel"})}catch{}try{re.displayName="SynapseCardLabel",re.__docgenInfo={description:"",displayName:"SynapseCardLabel",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},labelLink:{defaultValue:null,description:"",name:"labelLink",required:!0,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink | undefined"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!0,type:{name:"SelectColumn[] | undefined"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!0,type:{name:"ColumnModel[] | undefined"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#SynapseCardLabel"]={docgenInfo:re.__docgenInfo,name:"SynapseCardLabel",path:"src/lib/containers/GenericCard.tsx#SynapseCardLabel"})}catch{}try{W.displayName="GenericCard",W.__docgenInfo={description:"Renders a card from a table query",displayName:"GenericCard",props:{selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},useTypeColumnForIcon:{defaultValue:null,description:"",name:"useTypeColumnForIcon",required:!1,type:{name:"boolean"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"Record<string, number>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"string[]"}},tableId:{defaultValue:null,description:"",name:"tableId",required:!0,type:{name:"string | undefined"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#GenericCard"]={docgenInfo:W.__docgenInfo,name:"GenericCard",path:"src/lib/containers/GenericCard.tsx#GenericCard"})}catch{}const Wn=window.React;class F extends Wn.Component{constructor(n){super(n),this.handleLinkClick=t=>r=>{r.preventDefault(),window.open(`${G.PORTAL}#!Synapse:${t}`,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:n,schema:t,selectColumns:r,columnModels:i}=this.props,o=n[t.datasetName],l=n[t.summary],d=V({columnName:"tumorType",value:n[t.tumorType],selectColumns:r,columnModels:i}).str,c=V({columnName:"diseaseFocus",value:n[t.diseaseFocus],selectColumns:r,columnModels:i}).str,s=n[t.id],m=n[t.fundingAgency],h=n[t.fileCount],f=xn(n[t.fileSize]),b=[["FUNDER",V({columnName:"fundingAgency",value:m,selectColumns:r,columnModels:i}).str],["SIZE",f],["FILES",h]];return p("div",{className:"SRC-portalCard SRC-typeDataset  ",children:[p("div",{className:"SRC-cardThumbnail",children:[e(Ye,{type:Qe}),e("div",{children:f})]}),p("div",{className:"SRC-cardContent SRC-dataset",children:[e("div",{className:"SRC-type",children:"Dataset "}),e("div",{children:e("h3",{children:e("a",{target:"_self",href:`${G.PORTAL}#!Synapse:${s}`,children:o})})}),p("div",{className:"SRC-description-dataset",children:[e("p",{className:"SRC-description-text",children:l}),e("div",{className:"SRC-cardAction bootstrap-4-backport",children:e(ve,{className:"pill SRC-datasetButton",onClick:this.handleLinkClick(s),variant:"secondary",children:"Download Dataset"})})]}),e("div",{className:"SRC-cardAnnotations",children:e(In,{chips:[d,c]})})]}),e(Ie,{isHeader:!1,secondaryLabelLimit:this.props.secondaryLabelLimit,values:b})]})}}try{F.displayName="Dataset",F.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/Dataset.tsx#Dataset"]={docgenInfo:F.__docgenInfo,name:"Dataset",path:"src/lib/containers/row_renderers/Dataset.tsx#Dataset"})}catch{}const Gn=window.React;class oe extends Gn.Component{constructor(n){super(n),this.handleLinkClick=t=>r=>{r.preventDefault(),window.open(t,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:n,schema:t}=this.props,r=n[t.organizationName],i=n[t.organizationPath],o=n[t.summary],l=n[t.website],d=n[t.logo];let c=l.replace("https://","");c=c.replace("http://",""),c.charAt(c.length-1)==="/"&&(c=c.substring(0,c.length-1));const s=window.location.hash.substring(1)===i,m={};let h;return s?m.paddingBottom="42px":h=e("div",{className:"SRC-marginAuto SRC-cardAction bootstrap-4-backport",children:e(ve,{className:"pill-xl",href:i,variant:"secondary",children:"View Funded Research"})}),p("div",{className:"SRC-portalCard SRC-typeFunder ",style:m,children:[p("div",{className:"SRC-cardContent",children:[e("div",{className:"SRC-type",children:"Organization"}),d&&e("div",{className:"SRC-cardThumbnail",children:e("img",{alt:"funder logo",className:"SRC-logo",src:d})}),e("div",{children:p("h3",{children:[s&&r,!s&&e("a",{href:i,children:r})]})}),e("div",{className:"SRC-website",children:e("a",{rel:"noopener noreferrer",target:"_blank",href:l,children:c})}),e("div",{className:"SRC-description",children:o})]}),h]})}}try{oe.displayName="Funder",oe.__docgenInfo={description:"",displayName:"Funder",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/Funder.tsx#Funder"]={docgenInfo:oe.__docgenInfo,name:"Funder",path:"src/lib/containers/row_renderers/Funder.tsx#Funder"})}catch{}try{F.displayName="Dataset",F.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/index.tsx#Dataset"]={docgenInfo:F.__docgenInfo,name:"Dataset",path:"src/lib/containers/row_renderers/index.tsx#Dataset"})}catch{}try{rowrenderers.displayName="rowrenderers",rowrenderers.__docgenInfo={description:"",displayName:"rowrenderers",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/index.tsx#rowrenderers"]={docgenInfo:rowrenderers.__docgenInfo,name:"rowrenderers",path:"src/lib/containers/row_renderers/index.tsx#rowrenderers"})}catch{}const U=(a,n)=>a>0?`${a} ${n}${a>1?"s":""} `:"",zn=(a,n)=>{const t=kn.duration(a,n),r=t.years(),i=t.months()%12,o=t.days()%31,l=t.hours()%24,d=t.minutes()%60,c=t.seconds()%60;return`${U(r,"year")}${U(i,"month")}${U(o,"day")}${U(l,"hour")}${U(d,"minute")}${U(c,"second")}`.trim()},le=({data:a,schema:n})=>{const t=a[n.submitterName],r=a[n.submitterUserId],i=a[n.time],o=a[n.timeUnits],l=a[n.text],d=a[n.tag];return p("div",{className:"SRC-portalCard ObservationCard",children:[p("div",{className:"ObservationCard__submitter",children:[!r&&e("div",{children:t}),r&&e(Ne,{size:"SMALL USER CARD",ownerId:r})]}),i&&p("div",{className:"ObservationCard__time",children:[e(Te,{options:{icon:"time"}}),e("span",{children:zn(i,o)})]}),e("div",{className:"ObservationCard__text",children:e(Tn,{summary:l})}),e("div",{className:"ObservationCard__tags",children:d&&e("span",{className:"SRC-tag",children:d})})]})},de=()=>p("div",{className:"SRC-portalCard ObservationCard",children:[e("div",{className:"ObservationCard__submitter",children:e("span",{children:e(De,{width:"100px"})})}),e("div",{className:"ObservationCard__time",children:e(Te,{options:{icon:"time"}})}),e("div",{className:"ObservationCard__text",children:e(Dn,{numCols:1,numRows:4})}),e("div",{className:"ObservationCard__tags",children:e(De,{width:"80px"})})]});try{le.displayName="ObservationCard",le.__docgenInfo={description:`Specialized Observation Card, initially implemented for the NF portal.
Expects the following columns: submitterName, submitterUserId, time, timeUnits, text, and tag.`,displayName:"ObservationCard",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"ObservationCardSchema"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"Record<string, string>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/ObservationCard.tsx#ObservationCard"]={docgenInfo:le.__docgenInfo,name:"ObservationCard",path:"src/lib/containers/row_renderers/ObservationCard.tsx#ObservationCard"})}catch{}try{de.displayName="LoadingObservationCard",de.__docgenInfo={description:"",displayName:"LoadingObservationCard",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/ObservationCard.tsx#LoadingObservationCard"]={docgenInfo:de.__docgenInfo,name:"LoadingObservationCard",path:"src/lib/containers/row_renderers/ObservationCard.tsx#LoadingObservationCard"})}catch{}function jn(){return p(I,{children:[e("p",{className:"SRC-no-results-title",children:"There is currently no content here."}),e("p",{className:"SRC-no-results-description",children:"Information is always being updated, so check back later to see if content has been added."})]})}function Jn(){return p("div",{className:"text-center",children:[Mn,e("h4",{children:"No Matching Results"}),e("p",{children:"Try checking the spelling or removing filters."})]})}const ce=a=>{const{isHeader:n=!1,unitDescription:t,type:r,isLoading:i,secondaryLabelLimit:o=3,title:l,...d}=a,c=Cn(),{data:s,getLastQueryRequest:m,appendNextPageToResults:h,hasNextPage:f}=c,b=m(),_=(C,L)=>{switch(L){case Qe:return e(F,{...C});case Je:return e(oe,{...C});case je:return e(W,{...C,queryContext:c});case Re:return e(le,{...C});default:return e("div",{},C.key)}},S=s!=null&&s.queryResult.queryResults.tableId?[s==null?void 0:s.queryResult.queryResults.tableId]:[],y=fn({ids:S,type:"ENTITY_HEADER"});if(s){if(s&&s.queryResult.queryResults.rows.length===0)return b.query.additionalFilters?e(Jn,{}):e(jn,{})}else return p("div",{children:[i&&r===Re&&e(de,{}),i&&r!==Re&&Vn]});const R={};s.queryResult.queryResults.headers.forEach((C,L)=>{R[C.name]=L});const u=f&&e("div",{className:"SRC-viewMore bootstrap-4-backport",children:e(ve,{variant:"secondary",className:"pill-xl",onClick:()=>{h()},children:"View More"})});let O;if(r===ke){const C=s.queryResult.queryResults.headers.findIndex(g=>g.columnType===me.USERID);if(C===-1)throw Error("Type MEDIUM_USER_CARD specified but no columnType USERID found");const L=s.queryResult.queryResults.rows.map(g=>g.values.filter(N=>N!==null)[C]);O=e(Bn,{data:s,list:L,size:ke})}else{const C=s.queryResult.queryResults.rows;O=C.length?C.map(L=>{const N={key:JSON.stringify(L.values),type:r,schema:R,isHeader:n,secondaryLabelLimit:o,data:L.values,selectColumns:s.selectColumns,columnModels:s.columnModels,tableEntityConcreteType:y[0]&&y[0].type,tableId:s==null?void 0:s.queryResult.queryResults.tableId,...d};return _(N,r)}):e(I,{})}return p("div",{role:"list",children:[l&&e("h2",{className:"SRC-card-overview-title",children:l}),!l&&t&&e(gn,{frontText:"Displaying"}),O,u]})};try{ce.displayName="CardContainer",ce.__docgenInfo={description:"",displayName:"CardContainer",props:{isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/CardContainer.tsx#CardContainer"]={docgenInfo:ce.__docgenInfo,name:"CardContainer",path:"src/lib/containers/CardContainer.tsx#CardContainer"})}catch{}const Xn=window.React,Fe=window.React.useEffect,He=window.React.useMemo,be=window.React.useState;function ue(a){var K;const{initQueryRequest:n,onQueryChange:t,onQueryResultBundleChange:r,lockedColumn:i}=a,[o,l]=be(n),[d,c]=be(void 0),{data:s,hasNextPage:m,fetchPreviousPage:h,fetchNextPage:f,isFetchingNextPage:b,isLoading:_,error:S,isPreviousData:y,remove:R}=Xe(o,{keepPreviousData:!0},c),u=_||y,{entityId:O,versionNumber:C}=un(o.query.sql),{data:L}=Ze(O,C),[g,N]=be(0);async function x(){if(!m)throw new Error("Called appendNextPageToResults when there is no next page");await f(),N("ALL")}async function ye(){if(!m)throw new Error("Called goToNextPage when there is no next page");if(g==="ALL")throw new Error("Cannot go to next page when all pages are displayed");await f(),N(g+1)}const k=g!=="ALL"&&g>0;async function D(){if(g==="ALL")throw new Error("Cannot go to previous page when all pages are displayed");if(!k)throw new Error("Called goToNextPage when there is no next page");await h(),N(g-1)}const T=He(()=>{var v,q,M,Q;if(!(s==null||s.pages.length===0||s.pages[0].responseBody==null))return g==="ALL"?{...s==null?void 0:s.pages[0].responseBody,queryResult:{...(v=s==null?void 0:s.pages[0].responseBody)==null?void 0:v.queryResult,queryResults:{...(M=(q=s==null?void 0:s.pages[0].responseBody)==null?void 0:q.queryResult)==null?void 0:M.queryResults,rows:(Q=s.pages.flatMap(X=>{var P;return(P=X.responseBody.queryResult)==null?void 0:P.queryResults.rows}))!=null?Q:[]}}}:s==null?void 0:s.pages[g].responseBody},[g,s]);bn(()=>{t&&t(JSON.stringify(o.query))},[t,o.query]),Fe(()=>{T&&r&&r(JSON.stringify(T))},[T,r]);const z=(K=a.componentIndex)!=null?K:0,Y=T?Nn(T.facets,T.selectColumns):!0;Fe(()=>{const v=hn("QueryWrapper",z);v&&l(v)},[]);const j=Xn.useCallback(()=>Le(o),[o]);function J(){return Le(a.initQueryRequest)}function H(v){const q=Le(v);if(l(q),N(0),q.query){const M=JSON.stringify(q.query),Q=encodeURIComponent(M);a.shouldDeepLink&&(a.onQueryChange?a.onQueryChange(M):Sn("QueryWrapper",z,Q))}R()}const ge={data:He(()=>On(T,i),[T,i]),isLoadingNewPage:b,hasNextPage:!!m,hasPreviousPage:!!k,isLoadingNewBundle:u,getLastQueryRequest:j,getInitQueryRequest:J,error:S,entity:L,executeQueryRequest:H,isFacetsAvailable:Y,asyncJobStatus:d,appendNextPageToResults:x,goToNextPage:ye,goToPreviousPage:D},{children:Ae}=a;return e(_n,{queryContext:ge,children:e("div",{className:`SRC-wrapper ${u||b?"SRC-logo-cursor":""} ${Y?"has-facets":""}`,children:Ae})})}try{ue.displayName="InfiniteQueryWrapper",ue.__docgenInfo={description:"Component that manages the state of a Synapse table query. Data can be accessed via QueryContext using\neither `useQueryContext` or `QueryContextConsumer`.",displayName:"InfiniteQueryWrapper",props:{initQueryRequest:{defaultValue:null,description:"",name:"initQueryRequest",required:!0,type:{name:"QueryBundleRequest"}},componentIndex:{defaultValue:null,description:"",name:"componentIndex",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/InfiniteQueryWrapper.tsx#InfiniteQueryWrapper"]={docgenInfo:ue.__docgenInfo,name:"InfiniteQueryWrapper",path:"src/lib/containers/InfiniteQueryWrapper.tsx#InfiniteQueryWrapper"})}catch{}var A=(a=>(a.CURRENT_WINDOW="_self",a.NEW_WINDOW="_blank",a.PARENT_FRAME="_parent",a.FULL_WINDOW_BODY="_top",a))(A||{});const pe=a=>{const n=pn(a.sql,a.searchParams,a.sqlOperator),t={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:mn(n),query:{sql:n,limit:a.limit},partMask:en|nn|an|tn|rn|sn|on|ln};return e(ue,{...a,initQueryRequest:t,children:p(Rn,{rgbIndex:a.rgbIndex,unitDescription:a.unitDescription,facetAliases:a.facetAliases,children:[e(ce,{...a}),e(Ln,{children:r=>e(dn,{error:r==null?void 0:r.error})})]})})},qa=pe;try{pe.displayName="CardContainerLogic",pe.__docgenInfo={description:"Class wraps around CardContainer and serves as a standalone logic container for rendering cards.",displayName:"CardContainerLogic",props:{limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"KeyValue"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/CardContainerLogic.tsx#CardContainerLogic"]={docgenInfo:pe.__docgenInfo,name:"CardContainerLogic",path:"src/lib/containers/CardContainerLogic.tsx#CardContainerLogic"})}catch{}export{qa as C,ne as I,jn as N,re as S,Yn as a,ce as b,ue as c,Jn as d,Be as g};
