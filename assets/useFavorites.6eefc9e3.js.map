{"version":3,"file":"useFavorites.6eefc9e3.js","sources":["../../src/lib/utils/hooks/SynapseAPI/user/useFavorites.ts"],"sourcesContent":["import {\n  UseInfiniteQueryOptions,\n  useQuery,\n  UseQueryOptions,\n  useInfiniteQuery,\n} from 'react-query'\nimport { SynapseClient } from '../../..'\nimport { SynapseClientError } from '../../../SynapseClientError'\nimport { useSynapseContext } from '../../../SynapseContext'\nimport { EntityHeader, PaginatedResults } from '../../../synapseTypes'\nimport {\n  FavoriteSortBy,\n  FavoriteSortDirection,\n} from '../../../synapseTypes/FavoriteSortBy'\n\nexport function useGetFavorites(\n  sort: FavoriteSortBy = 'FAVORITED_ON',\n  sortDirection: FavoriteSortDirection = 'DESC',\n  options?: UseQueryOptions<\n    PaginatedResults<EntityHeader>,\n    SynapseClientError,\n    PaginatedResults<EntityHeader>\n  >,\n) {\n  const { accessToken } = useSynapseContext()\n  return useQuery<PaginatedResults<EntityHeader>, SynapseClientError>(\n    ['favorites', sort, sortDirection],\n    () =>\n      SynapseClient.getUserFavorites(\n        accessToken,\n        undefined,\n        undefined,\n        sort,\n        sortDirection,\n      ),\n    options,\n  )\n}\n\nexport function useGetFavoritesInfinite(\n  sort: FavoriteSortBy = 'FAVORITED_ON',\n  sortDirection: FavoriteSortDirection = 'DESC',\n  options?: UseInfiniteQueryOptions<\n    PaginatedResults<EntityHeader>,\n    SynapseClientError\n  >,\n) {\n  const LIMIT = 10\n\n  const { accessToken } = useSynapseContext()\n\n  return useInfiniteQuery<PaginatedResults<EntityHeader>, SynapseClientError>(\n    ['favorites', 'infinite', sort, sortDirection],\n    async context => {\n      return SynapseClient.getUserFavorites(\n        accessToken,\n        // pass the context.pageParam for the new offset\n        context.pageParam,\n        LIMIT,\n        sort,\n        sortDirection,\n      )\n    },\n    {\n      ...options,\n      getNextPageParam: (lastPage, pages) => {\n        if (lastPage.results.length > 0) return pages.length * LIMIT\n        //set the new offset to (page * limit)\n        else return undefined\n      },\n    },\n  )\n}\n"],"names":["SynapseClient.getUserFavorites"],"mappings":"+DAeO,WACL,EAAuB,eACvB,EAAuC,OACvC,EAKA,CACM,KAAA,CAAE,eAAgB,IACxB,MAAO,GACL,CAAC,YAAa,EAAM,CAAa,EACjC,IACEA,EACE,EACA,OACA,OACA,EACA,CACF,EACF,CACF,CACF,CAEO,WACL,EAAuB,eACvB,EAAuC,OACvC,EAIA,CAGM,KAAA,CAAE,eAAgB,IAEjB,MAAA,GACL,CAAC,YAAa,WAAY,EAAM,CAAa,EAC7C,KAAM,IACGA,EACL,EAEA,EAAQ,UACR,GACA,EACA,CACF,EAEF,CACE,GAAG,EACH,iBAAkB,CAAC,EAAU,IAAU,CACjC,GAAA,EAAS,QAAQ,OAAS,EAAG,MAAO,GAAM,OAAS,EAGzD,CAAA,CAEJ,CACF"}