import{r as h}from"./jsx-runtime.8ee42ca4.js";function V(){return V=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},V.apply(this,arguments)}function E(t,i){t.prototype=Object.create(i.prototype),t.prototype.constructor=t,w(t,i)}function w(t,i){return w=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n},w(t,i)}function A(t,i){if(t==null)return{};var r={},n=Object.keys(t),e,o;for(o=0;o<n.length;o++)e=n[o],!(i.indexOf(e)>=0)&&(r[e]=t[e]);return r}var _=new Map,v=new WeakMap,C=0,U=void 0;function W(t){return t?(v.has(t)||(C+=1,v.set(t,C.toString())),v.get(t)):"0"}function $(t){return Object.keys(t).sort().filter(function(i){return t[i]!==void 0}).map(function(i){return i+"_"+(i==="root"?W(t.root):t[i])}).toString()}function B(t){var i=$(t),r=_.get(i);if(!r){var n=new Map,e,o=new IntersectionObserver(function(f){f.forEach(function(s){var a,u=s.isIntersecting&&e.some(function(c){return s.intersectionRatio>=c});t.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=u),(a=n.get(s.target))==null||a.forEach(function(c){c(u,s)})})},t);e=o.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),r={id:i,observer:o,elements:n},_.set(i,r)}return r}function S(t,i,r,n){if(r===void 0&&(r={}),n===void 0&&(n=U),typeof window.IntersectionObserver>"u"&&n!==void 0){var e=t.getBoundingClientRect();return i(n,{isIntersecting:n,target:t,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:e,intersectionRect:e,rootBounds:e}),function(){}}var o=B(r),f=o.id,s=o.observer,a=o.elements,u=a.get(t)||[];return a.has(t)||a.set(t,u),u.push(i),s.observe(t),function(){u.splice(u.indexOf(i),1),u.length===0&&(a.delete(t),s.unobserve(t)),a.size===0&&(s.disconnect(),_.delete(f))}}var D=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function R(t){return typeof t.children!="function"}var T=function(t){E(i,t);function i(n){var e;return e=t.call(this,n)||this,e.node=null,e._unobserveCb=null,e.handleNode=function(o){e.node&&(e.unobserve(),!o&&!e.props.triggerOnce&&!e.props.skip&&e.setState({inView:!!e.props.initialInView,entry:void 0})),e.node=o||null,e.observeNode()},e.handleChange=function(o,f){o&&e.props.triggerOnce&&e.unobserve(),R(e.props)||e.setState({inView:o,entry:f}),e.props.onChange&&e.props.onChange(o,f)},e.state={inView:!!n.initialInView,entry:void 0},e}var r=i.prototype;return r.componentDidUpdate=function(e){(e.rootMargin!==this.props.rootMargin||e.root!==this.props.root||e.threshold!==this.props.threshold||e.skip!==this.props.skip||e.trackVisibility!==this.props.trackVisibility||e.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},r.componentWillUnmount=function(){this.unobserve(),this.node=null},r.observeNode=function(){if(!(!this.node||this.props.skip)){var e=this.props,o=e.threshold,f=e.root,s=e.rootMargin,a=e.trackVisibility,u=e.delay,c=e.fallbackInView;this._unobserveCb=S(this.node,this.handleChange,{threshold:o,root:f,rootMargin:s,trackVisibility:a,delay:u},c)}},r.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},r.render=function(){if(!R(this.props)){var e=this.state,o=e.inView,f=e.entry;return this.props.children({inView:o,entry:f,ref:this.handleNode})}var s=this.props,a=s.children,u=s.as,c=A(s,D);return h.exports.createElement(u||"div",V({ref:this.handleNode},c),a)},i}(h.exports.Component);function z(t){var i,r=t===void 0?{}:t,n=r.threshold,e=r.delay,o=r.trackVisibility,f=r.rootMargin,s=r.root,a=r.triggerOnce,u=r.skip,c=r.initialInView,O=r.fallbackInView,j=r.onChange,I=h.exports.useState(null),l=I[0],N=I[1],g=h.exports.useRef(),k=h.exports.useState({inView:!!c,entry:void 0}),b=k[0],M=k[1];g.current=j,h.exports.useEffect(function(){if(!(u||!l)){var p=S(l,function(m,y){M({inView:m,entry:y}),g.current&&g.current(m,y),y.isIntersecting&&a&&p&&(p(),p=void 0)},{root:s,rootMargin:f,threshold:n,trackVisibility:o,delay:e},O);return function(){p&&p()}}},[Array.isArray(n)?n.toString():n,l,s,f,a,u,o,O,e]);var x=(i=b.entry)==null?void 0:i.target;h.exports.useEffect(function(){!l&&x&&!a&&!u&&M({inView:!!c,entry:void 0})},[l,x,a,u,c]);var d=[N,b.inView,b.entry];return d.ref=d[0],d.inView=d[1],d.entry=d[2],d}export{T as I,z as u};
