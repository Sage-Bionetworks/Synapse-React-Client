import{j as c,l as C,bS as E,bT as I,U as _,bU as T,bV as f,bW as m}from"./index.4fdef5f4.js";import{u as b}from"./useInfiniteQuery.47c688b2.js";import{u as l}from"./useMutation.76b94172.js";import{D as d}from"./EntityChildren.50133102.js";import{r as R}from"./jsx-runtime.02a28547.js";function k(s,t){const{accessToken:e}=c();return C(["moderators",s],()=>E(e,s),t)}function p(s,t,e,n,r,i){const{accessToken:u}=c();return b(["forumthread",s,"infinite",t,r,e,n],async a=>I(u,s,a.pageParam,t,e,n,r),{...i,getNextPageParam:(a,S)=>{const o=S.flatMap(A=>A.results).length;if(a.totalNumberOfResults>o)return o}})}var g=(s=>(s.FORUM="FORUM",s.THREAD="THREAD",s.DATA_ACCESS_SUBMISSION="DATA_ACCESS_SUBMISSION",s.DATA_ACCESS_SUBMISSION_STATUS="DATA_ACCESS_SUBMISSION_STATUS",s))(g||{}),D=(s=>(s.SUBSCRIPTION_ID="SUBSCRIPTION_ID",s.SUBSCRIBER_ID="SUBSCRIBER_ID",s.OBJECT_ID="OBJECT_ID",s.OBJECT_TYPE="OBJECT_TYPE",s.CREATED_ON="CREATED_ON",s))(D||{});function O(s,t,e){const{accessToken:n}=c();return C([n,"subscription",s,t],async()=>{const i={objectType:t,idList:[s],sortByType:D.OBJECT_ID,sortDirection:d.ASC};return(await m(n,i)).results[0]},e)}function U(s){const t=_(),{accessToken:e}=c();return l(n=>T(e,n),{...s,onSuccess:async(n,r,i)=>{await t.invalidateQueries([e,"subscription"]),s!=null&&s.onSuccess&&await s.onSuccess(n,r,i)}})}function B(s){const t=_(),{accessToken:e}=c();return l(n=>f(e,n),{...s,onSuccess:async(n,r,i)=>{await t.invalidateQueries([e,"subscription"]),s!=null&&s.onSuccess&&await s.onSuccess(n,r,i)}})}const q=(s,t)=>{const{data:e,isLoading:n}=O(s,t),{mutate:r,isLoading:i}=U(),{mutate:u,isLoading:a}=B(),S=n||i||a,o=R.exports.useCallback(()=>{e?u(e.subscriptionId):r({objectId:s,objectType:t})},[u,s,t,r,e]);return{isLoading:S,subscription:e,toggleSubscribed:o}};export{g as S,q as a,p as b,k as u};
