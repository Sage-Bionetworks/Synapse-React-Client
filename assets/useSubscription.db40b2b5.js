import{h as c,cH as D,k as S,cI as I,cJ as A,X as C,cK as E,cL as l,cM as m}from"./index.444e3572.js";import{u as T}from"./useInfiniteQuery.4114925f.js";import{u as _}from"./useMutation.60a502f5.js";import{D as R}from"./EntityChildren.50133102.js";import{r as d}from"./jsx-runtime.ed0bc2e8.js";function p(s,n,e,t,r,u){const{accessToken:i}=c();return T(["forumthread","infinite",s,n,r,e,t],async a=>D(i,s,a.pageParam,n,e,t,r),{...u,getNextPageParam:(a,o)=>{if(a.results.length>0)return o.length*n}})}function M(s,n){const{accessToken:e}=c();return S(["thread",s],()=>I(s,e),n)}function v(s,n,e,t,r,u){const{accessToken:i}=c();return T(["forumthread","infinite",s,e,r,t,n],async a=>A(i,s,e,a.pageParam,t,n,r),{...u,getNextPageParam:(a,o)=>{if(a.results.length>0)return o.length*e}})}var B=(s=>(s.FORUM="FORUM",s.THREAD="THREAD",s.DATA_ACCESS_SUBMISSION="DATA_ACCESS_SUBMISSION",s.DATA_ACCESS_SUBMISSION_STATUS="DATA_ACCESS_SUBMISSION_STATUS",s))(B||{}),f=(s=>(s.SUBSCRIPTION_ID="SUBSCRIPTION_ID",s.SUBSCRIBER_ID="SUBSCRIBER_ID",s.OBJECT_ID="OBJECT_ID",s.OBJECT_TYPE="OBJECT_TYPE",s.CREATED_ON="CREATED_ON",s))(f||{});function L(s,n,e){const{accessToken:t}=c();return S([t,"subscription",s,n],async()=>{const u={objectType:n,idList:[s],sortByType:f.OBJECT_ID,sortDirection:R.ASC};return(await m(t,u)).results[0]},e)}function O(s){const n=C(),{accessToken:e}=c();return _(t=>E(e,t),{...s,onSuccess:async(t,r,u)=>{await n.invalidateQueries([e,"subscription"]),s!=null&&s.onSuccess&&await s.onSuccess(t,r,u)}})}function P(s){const n=C(),{accessToken:e}=c();return _(t=>l(e,t),{...s,onSuccess:async(t,r,u)=>{await n.invalidateQueries([e,"subscription"]),s!=null&&s.onSuccess&&await s.onSuccess(t,r,u)}})}const F=(s,n)=>{const{data:e,isLoading:t}=L(s,n),{mutate:r,isLoading:u}=O(),{mutate:i,isLoading:a}=P(),o=t||u||a,g=d.exports.useCallback(()=>{e?i(e.subscriptionId):r({objectId:s,objectType:n})},[i,s,n,r,e]);return{isLoading:o,subscription:e,toggleSubscribed:g}};export{B as S,F as a,v as b,p as c,M as u};
