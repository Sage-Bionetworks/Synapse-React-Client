import{h as Wf,j as ie,k as Wg,l as Cr,m as Gg,n as Gf,o as Sl,p as Tn,q as Kg,r as Xg,t as wl,v as Qg,F as Re,w as Zg,x as Kf,y as Ws,z as Jg,A as Xf,B as ey,C as Ic,D as _r,G as An,H as Qf,I as ty,J as Zf,K as ny,L as ry,M as Cl,N as oy,O as ay,P as mn,R as iy,T as On,U as sy,V as ly,W as Nc,X as Jf,Y as $a,Z as ep,_ as cy,$ as dy,a0 as fe,a1 as uy,a2 as fy,a3 as py,a4 as hy,a5 as my,a6 as gy,a7 as yy,a8 as vy,a9 as tp,aa as by,ab as Sy,ac as wy,ad as Cy,ae as np,af as _y,ag as Pr,ah as Ey,ai as rp,aj as xy,ak as Ty,E as op,al as ap,am as ip}from"./index.f37f3b8f.js";import{p as kn,a as Oy,g as _l}from"./sqlFunctions.3408ddc8.js";import{u as sp}from"./useGetInfoFromIds.6e925b42.js";import{A as lp,T as Iy,M as Ny,h as pr,i as Er,j as xr,k as El,l as Ry,m as Ay,c as ky,d as Ly,g as xl,n as Rc,o as qy,p as Tl,B as cp,q as Ol,r as Il,s as Nl,t as Py,u as dp,O as Gs,v as Ac,G as Dy,F as My}from"./SynapseConstants.b6aa8bf5.js";import{C as re}from"./ColumnType.744125d2.js";import{j as u,r as E,a as N,F as H,R as ge}from"./jsx-runtime.e755df9d.js";import{P as $e,g as Vy,B as By}from"./getEndpoint.bb7ded34.js";import{p as Fy,S as up,D as $y}from"./RegularExpressions.3cd69849.js";import{S as oi,Q as Ln,a as qn,u as Tt,b as Ct,c as Hy,d as zy,e as Uy,E as Yy,f as jy,g as Wy,h as Rl,N as wa,i as Al,j as fp,k as Gy,F as Ky,l as Xy,m as pp,T as hp,n as Qy}from"./FacetNav.171c80c2.js";import{u as mp,a as Zy,i as Jy,r as ev,h as tv,b as nv}from"./queryUtils.27e3106c.js";import{u as kl}from"./useEntity.9a17e87f.js";import{S as rv}from"./react-select.esm.50c96607.js";import{i as ov,u as av,f as iv,C as sv}from"./CustomSelectWidget.0ac8a1af.js";import{T as _t}from"./Typography.c9ad912d.js";import{E as Ll,I as Ha,C as ql,a as lv,S as cv}from"./ElementWithTooltip.7f730674.js";import{B as we}from"./Button.ce5d2622.js";import{e as Pl}from"./queryKeys.e0d3085f.js";import{S as za,l as gp}from"./LoadingScreen.917a8a73.js";import{u as dv,U as Jt,a as Dl,g as uv}from"./UserCard.b4b4f075.js";import{W as fv}from"./WarningModal.8f047f4c.js";import{A as nn}from"./Alert.7ac348fd.js";import{u as Pn}from"./react-intersection-observer.esm.4be7d989.js";import{u as yp}from"./useInfiniteQuery.c9dc13c8.js";import{f as Ml}from"./DateFormatter.6da88380.js";import{h as Tr}from"./moment.a565bb48.js";import{S as Vl}from"./SkeletonTable.dac7e5fd.js";import{S as Ks}from"./Skeleton.902d2113.js";import{u as pv,T as Ke}from"./Tooltip.68fb53f0.js";import{E as kc}from"./EntityIcon.04844139.js";import{I as pe,H as hv,S as mv,t as gv}from"./IconSvg.0451ffde.js";import{A as Ua,c as Bl,B as rn,C as yv,j as Or,D as vv,G as vp,H as bv,J as Sv,K as wv,L as Cv,M as _v,O as bp,P as Ev,Q as xv,R as Tv,e as Sp,T as wp,U as Ov,V as Fl,W as Cp,X as _p,Y as Iv,Z as Nv,$ as Ep,a0 as Rv,a1 as Av,a2 as kv,a3 as Lv,m as qv,a4 as Pv,g as Dv}from"./iframe.2151c0e3.js";import{_ as Mv,f as xp,a as Tp,b as Vv,c as Bv,d as Fv,e as $v,g as Hv,h as zv,i as Uv,j as Yv,k as jv,l as Wv,s as Gv,F as Kv}from"./core.esm.7e8172f3.js";import{i as Xv}from"./isString.0cef2332.js";import{_ as Qv}from"./index.browser.d8058921.js";import{r as Zv}from"./index.46e2a3d6.js";import{i as Op,g as Ip,p as Jv,e as eb,a as tb,c as nb,o as rb,f as ob,b as ab,d as ib,h as sb}from"./usePopperMarginModifiers.64be5d9c.js";import{C as Np,d as en}from"./ToastMessage.3b077507.js";import{d as lb,s as cb}from"./union.5abedccb.js";import{i as db}from"./isEqual.67a4cf08.js";import{g as $l,d as Hl,s as Ft,o as wt,_ as Ee,e as zl,h as Ya,i as Ca,j as Ul,r as cn}from"./styled.134e90bd.js";import{k as Rp,c as Ap}from"./emotion-react.browser.esm.888ec03a.js";import{c as ub,P as fb}from"./factory.1dee65e3.js";import{T as _a,N as pb,I as Lc}from"./SynapseTableConstants.07ecdebd.js";import{u as qc}from"./use-deep-compare-effect.esm.700faf33.js";import{u as hb}from"./useGetDownloadListStatistics.1930ac0b.js";import{M as ae,a as mb,b as gb}from"./Modal.48855f51.js";import{i as yb,a as vb,C as bb,b as Sb}from"./QueryFilter.b61a1724.js";import{D as Lt}from"./Dropdown.7542d4d3.js";import{Q as wb}from"./QueryCount.1182ef9c.js";import{c as on}from"./createSvgIcon.4e7dae8f.js";import{c as zn}from"./cloneDeep.483ff71d.js";import{u as kp}from"./useGetAccessRequirement.0c246789.js";import{S as Le}from"./ManagedACTAccessRequirementStatus.be369a71.js";import{F as ai}from"./FileUpload.d2f3f41f.js";import{U as Cb}from"./UserSearchBox.d4ba7e19.js";import{R as _b}from"./RadioGroup.774f5d0b.js";import{u as Lp}from"./utils.61686747.js";import{E as Xs}from"./EntityLink.7e97f287.js";import{C as Eb}from"./Checkbox.baff3041.js";import{B as xb}from"./ButtonBase.ee0cae3d.js";import{S as Tb}from"./SynapseVideo.cc515add.js";import{I as Ob}from"./IconList.447b5f75.js";import{i as Ib}from"./isEmpty.04c7f13d.js";import{U as Nb}from"./UserCardList.fc1bceb8.js";const Rb=on(u("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"}),"CheckTwoTone"),Ab=on([u("path",{d:"M6 20h12V10H6v10zm6-7c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z",opacity:".3"},"0"),u("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"},"1")],"LockTwoTone"),kb=on(u("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"WarningSharp");function Lb(e){return $l("MuiCircularProgress",e)}Hl("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const qb=["className","color","disableShrink","size","style","thickness","value","variant"];let ja=e=>e,Pc,Dc,Mc,Vc;const Ot=44,Pb=Rp(Pc||(Pc=ja`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Db=Rp(Dc||(Dc=ja`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Mb=e=>{const{classes:t,variant:n,color:r,disableShrink:o}=e,a={root:["root",n,`color${wt(r)}`],svg:["svg"],circle:["circle",`circle${wt(n)}`,o&&"circleDisableShrink"]};return Ul(a,Lb,t)},Vb=Ft("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${wt(n.color)}`]]}})(({ownerState:e,theme:t})=>Ee({display:"inline-block"},e.variant==="determinate"&&{transition:t.transitions.create("transform")},e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main}),({ownerState:e})=>e.variant==="indeterminate"&&Ap(Mc||(Mc=ja`
      animation: ${0} 1.4s linear infinite;
    `),Pb)),Bb=Ft("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),Fb=Ft("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${wt(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(({ownerState:e,theme:t})=>Ee({stroke:"currentColor"},e.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&Ap(Vc||(Vc=ja`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Db)),$b=E.exports.forwardRef(function(t,n){const r=zl({props:t,name:"MuiCircularProgress"}),{className:o,color:a="primary",disableShrink:i=!1,size:s=40,style:l,thickness:d=3.6,value:c=0,variant:f="indeterminate"}=r,p=Ya(r,qb),g=Ee({},r,{color:a,disableShrink:i,size:s,thickness:d,value:c,variant:f}),h=Mb(g),m={},v={},b={};if(f==="determinate"){const C=2*Math.PI*((Ot-d)/2);m.strokeDasharray=C.toFixed(3),b["aria-valuenow"]=Math.round(c),m.strokeDashoffset=`${((100-c)/100*C).toFixed(3)}px`,v.transform="rotate(-90deg)"}return u(Vb,Ee({className:Ca(h.root,o),style:Ee({width:s,height:s},v,l),ownerState:g,ref:n,role:"progressbar"},b,p,{children:u(Bb,{className:h.svg,ownerState:g,viewBox:`${Ot/2} ${Ot/2} ${Ot} ${Ot}`,children:u(Fb,{className:h.circle,style:m,ownerState:g,cx:Ot,cy:Ot,r:(Ot-d)/2,fill:"none",strokeWidth:d})})}))}),Hb=$b;function zb(e){return $l("MuiPagination",e)}Hl("MuiPagination",["root","ul","outlined","text"]);const Ub=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Yb(e={}){const{boundaryCount:t=1,componentName:n="usePagination",count:r=1,defaultPage:o=1,disabled:a=!1,hideNextButton:i=!1,hidePrevButton:s=!1,onChange:l,page:d,showFirstButton:c=!1,showLastButton:f=!1,siblingCount:p=1}=e,g=Ya(e,Ub),[h,m]=pv({controlled:d,default:o,name:n,state:"page"}),v=(O,A)=>{d||m(A),l&&l(O,A)},b=(O,A)=>{const k=A-O+1;return Array.from({length:k},(M,B)=>O+B)},C=b(1,Math.min(t,r)),S=b(Math.max(r-t+1,t+1),r),y=Math.max(Math.min(h-p,r-t-p*2-1),t+2),w=Math.min(Math.max(h+p,t+p*2+2),S.length>0?S[0]-2:r-1),_=[...c?["first"]:[],...s?[]:["previous"],...C,...y>t+2?["start-ellipsis"]:t+1<r-t?[t+1]:[],...b(y,w),...w<r-t-1?["end-ellipsis"]:r-t>t?[r-t]:[],...S,...i?[]:["next"],...f?["last"]:[]],x=O=>{switch(O){case"first":return 1;case"previous":return h-1;case"next":return h+1;case"last":return r;default:return null}},I=_.map(O=>typeof O=="number"?{onClick:A=>{v(A,O)},type:"page",page:O,selected:O===h,disabled:a,"aria-current":O===h?"true":void 0}:{onClick:A=>{v(A,x(O))},type:O,page:x(O),selected:!1,disabled:a||O.indexOf("ellipsis")===-1&&(O==="next"||O==="last"?h>=r:h<=1)});return Ee({items:I},g)}function jb(e){return $l("MuiPaginationItem",e)}const Wb=Hl("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),Ge=Wb,ii=on(u("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),si=on(u("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),li=on(u("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),ci=on(u("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Gb=["className","color","component","components","disabled","page","selected","shape","size","type","variant"],qp=(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${wt(n.size)}`],n.variant==="text"&&t[`text${wt(n.color)}`],n.variant==="outlined"&&t[`outlined${wt(n.color)}`],n.shape==="rounded"&&t.rounded,n.type==="page"&&t.page,(n.type==="start-ellipsis"||n.type==="end-ellipsis")&&t.ellipsis,(n.type==="previous"||n.type==="next")&&t.previousNext,(n.type==="first"||n.type==="last")&&t.firstLast]},Kb=e=>{const{classes:t,color:n,disabled:r,selected:o,size:a,shape:i,type:s,variant:l}=e,d={root:["root",`size${wt(a)}`,l,i,n!=="standard"&&`${l}${wt(n)}`,r&&"disabled",o&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[s]],icon:["icon"]};return Ul(d,jb,t)},Xb=Ft("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:qp})(({theme:e,ownerState:t})=>Ee({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${Ge.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),Qb=Ft(xb,{name:"MuiPaginationItem",slot:"Root",overridesResolver:qp})(({theme:e,ownerState:t})=>Ee({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${Ge.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Ge.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ge.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selected} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:cn(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${Ge.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selected} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:cn(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${Ge.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:t})=>Ee({},t.variant==="text"&&{[`&.${Ge.selected}`]:Ee({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}},[`&.${Ge.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}},{[`&.${Ge.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},t.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Ge.selected}`]:Ee({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:cn(e.palette[t.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:cn(e.palette[t.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:cn(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ge.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:cn(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${Ge.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),Zb=Ft("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})(({theme:e,ownerState:t})=>Ee({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(22)})),Jb=E.exports.forwardRef(function(t,n){const r=zl({props:t,name:"MuiPaginationItem"}),{className:o,color:a="standard",component:i,components:s={first:ii,last:si,next:ci,previous:li},disabled:l=!1,page:d,selected:c=!1,shape:f="circular",size:p="medium",type:g="page",variant:h="text"}=r,m=Ya(r,Gb),v=Ee({},r,{color:a,disabled:l,selected:c,shape:f,size:p,type:g,variant:h}),b=Lp(),C=Kb(v),y=(b.direction==="rtl"?{previous:s.next||ci,next:s.previous||li,last:s.first||ii,first:s.last||si}:{previous:s.previous||li,next:s.next||ci,first:s.first||ii,last:s.last||si})[g];return g==="start-ellipsis"||g==="end-ellipsis"?u(Xb,{ref:n,ownerState:v,className:Ca(C.root,o),children:"\u2026"}):N(Qb,Ee({ref:n,ownerState:v,component:i,disabled:l,className:Ca(C.root,o)},m,{children:[g==="page"&&d,y?u(Zb,{as:y,ownerState:v,className:C.icon}):null]}))}),eS=Jb,tS=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],nS=e=>{const{classes:t,variant:n}=e;return Ul({root:["root",n],ul:["ul"]},zb,t)},rS=Ft("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})({}),oS=Ft("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function aS(e,t,n){return e==="page"?`${n?"":"Go to "}page ${t}`:`Go to ${e} page`}const iS=E.exports.forwardRef(function(t,n){const r=zl({props:t,name:"MuiPagination"}),{boundaryCount:o=1,className:a,color:i="standard",count:s=1,defaultPage:l=1,disabled:d=!1,getItemAriaLabel:c=aS,hideNextButton:f=!1,hidePrevButton:p=!1,renderItem:g=I=>u(eS,Ee({},I)),shape:h="circular",showFirstButton:m=!1,showLastButton:v=!1,siblingCount:b=1,size:C="medium",variant:S="text"}=r,y=Ya(r,tS),{items:w}=Yb(Ee({},r,{componentName:"Pagination"})),_=Ee({},r,{boundaryCount:o,color:i,count:s,defaultPage:l,disabled:d,getItemAriaLabel:c,hideNextButton:f,hidePrevButton:p,renderItem:g,shape:h,showFirstButton:m,showLastButton:v,siblingCount:b,size:C,variant:S}),x=nS(_);return u(rS,Ee({"aria-label":"pagination navigation",className:Ca(x.root,a),ownerState:_,ref:n},y,{children:u(oS,{className:x.ul,ownerState:_,children:w.map((I,O)=>u("li",{children:g(Ee({},I,{color:i,"aria-label":c(I.type,I.page,I.selected),shape:h,size:C,variant:S}))},O))})}))}),sS=iS;var Yl=(e=>(e.APPROVED="APPROVED",e.REVOKED="REVOKED",e))(Yl||{}),lS=(e=>(e.MODIFIED_ON="MODIFIED_ON",e.EXPIRED_ON="EXPIRED_ON",e))(lS||{}),mt=(e=>(e.GAIN_ACCESS="GAIN_ACCESS",e.RENEW_ACCESS="RENEW_ACCESS",e.REVOKE_ACCESS="REVOKE_ACCESS",e))(mt||{});const cS="org.sagebionetworks.repo.model.file.GoogleCloudFileHandle",dS="org.sagebionetworks.repo.model.file.S3FileHandle",jl=Wf(dS,cS),uS="org.sagebionetworks.repo.model.file.ExternalFileHandle",fS="org.sagebionetworks.repo.model.file.ExternalObjectStoreFileHandle",pS="org.sagebionetworks.repo.model.file.ProxyFileHandle",hS=Wf(pS,fS,uS);var Wa=(e=>(e.ENTITY="ENTITY",e.EVALUATION="EVALUATION",e.TEAM="TEAM",e))(Wa||{}),Pp=(e=>(e.OPEN="OPEN",e.RESTRICTED_BY_TERMS_OF_USE="RESTRICTED_BY_TERMS_OF_USE",e.CONTROLLED_BY_ACT="CONTROLLED_BY_ACT",e))(Pp||{});function mS(e,t){const{accessToken:n}=ie(),r={accessRequirementId:e};return yp(["approvedSubmissionInfo",r],async o=>await Wg({...r,nextPageToken:o.pageParam},n),{...t,getNextPageParam:o=>o.nextPageToken})}function Dp(e,t,n=lp,r){const{accessToken:o}=ie();return Cr(Pl.bundle(e,t,n),()=>Gg(e,n,t,o),r)}function gS(e,t){const{accessToken:n}=ie();return Cr(Pl.children(e,!1),()=>Gf(e,n),t)}function Wk(e,t){const{accessToken:n}=ie();return yp(Pl.children(e,!0),async r=>await Gf({...e,includeTotalChildCount:r.pageParam?!1:e.includeTotalChildCount,nextPageToken:r.pageParam},n,r.signal),{...t,getNextPageParam:r=>r.nextPageToken})}function yS(e,t){const{accessToken:n}=ie();return Cr(["entityHeaders",n,e],()=>Sl(e,n),t)}var Qs={exports:{}},Ce={},hr={exports:{}},an={};function Mp(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function vS(e,t,n){}function bS(e,t,n){}var SS=/javascript\s*\:/img;function wS(e,t){return SS.test(t)?"":t}an.whiteList=Mp();an.getDefaultWhiteList=Mp;an.onAttr=vS;an.onIgnoreAttr=bS;an.safeAttrValue=wS;var CS={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Mn=CS;function _S(e,t){e=Mn.trimRight(e),e[e.length-1]!==";"&&(e+=";");var n=e.length,r=!1,o=0,a=0,i="";function s(){if(!r){var c=Mn.trim(e.slice(o,a)),f=c.indexOf(":");if(f!==-1){var p=Mn.trim(c.slice(0,f)),g=Mn.trim(c.slice(f+1));if(p){var h=t(o,i.length,p,g,c);h&&(i+=h+"; ")}}}o=a+1}for(;a<n;a++){var l=e[a];if(l==="/"&&e[a+1]==="*"){var d=e.indexOf("*/",a+2);if(d===-1)break;a=d+1,o=a+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||s():l===`
`&&s()}return Mn.trim(i)}var ES=_S,Dr=an,xS=ES;function Bc(e){return e==null}function TS(e){var t={};for(var n in e)t[n]=e[n];return t}function Vp(e){e=TS(e||{}),e.whiteList=e.whiteList||Dr.whiteList,e.onAttr=e.onAttr||Dr.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Dr.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Dr.safeAttrValue,this.options=e}Vp.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,o=n.onAttr,a=n.onIgnoreAttr,i=n.safeAttrValue,s=xS(e,function(l,d,c,f,p){var g=r[c],h=!1;if(g===!0?h=g:typeof g=="function"?h=g(f):g instanceof RegExp&&(h=g.test(f)),h!==!0&&(h=!1),f=i(c,f),!!f){var m={position:d,sourcePosition:l,source:p,isWhite:h};if(h){var v=o(c,f,m);return Bc(v)?c+":"+f:v}else{var v=a(c,f,m);if(!Bc(v))return v}}});return s};var OS=Vp;(function(e,t){var n=an,r=OS;function o(i,s){var l=new r(s);return l.process(i)}t=e.exports=o,t.FilterCSS=r;for(var a in n)t[a]=n[a];typeof window<"u"&&(window.filterCSS=e.exports)})(hr,hr.exports);var Wl={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,n=t.exec(e);return n?n.index:-1}},IS=hr.exports.FilterCSS,NS=hr.exports.getDefaultWhiteList,Ea=Wl;function Bp(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Fp=new IS;function RS(e,t,n){}function AS(e,t,n){}function kS(e,t,n){}function LS(e,t,n){}function $p(e){return e.replace(PS,"&lt;").replace(DS,"&gt;")}function qS(e,t,n,r){if(n=Wp(n),t==="href"||t==="src"){if(n=Ea.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(t==="background"){if(Mr.lastIndex=0,Mr.test(n))return""}else if(t==="style"){if(Fc.lastIndex=0,Fc.test(n)||($c.lastIndex=0,$c.test(n)&&(Mr.lastIndex=0,Mr.test(n))))return"";r!==!1&&(r=r||Fp,n=r.process(n))}return n=Gp(n),n}var PS=/</g,DS=/>/g,MS=/"/g,VS=/&quot;/g,BS=/&#([a-zA-Z0-9]*);?/gim,FS=/&colon;?/gim,$S=/&newline;?/gim,Mr=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Fc=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,$c=/u\s*r\s*l\s*\(.*/gi;function Hp(e){return e.replace(MS,"&quot;")}function zp(e){return e.replace(VS,'"')}function Up(e){return e.replace(BS,function(n,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function Yp(e){return e.replace(FS,":").replace($S," ")}function jp(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return Ea.trim(t)}function Wp(e){return e=zp(e),e=Up(e),e=Yp(e),e=jp(e),e}function Gp(e){return e=Hp(e),e=$p(e),e}function HS(){return""}function zS(e,t){typeof t!="function"&&(t=function(){});var n=!Array.isArray(e);function r(i){return n?!0:Ea.indexOf(e,i)!==-1}var o=[],a=!1;return{onIgnoreTag:function(i,s,l){if(r(i))if(l.isClosing){var d="[/removed]",c=l.position+d.length;return o.push([a!==!1?a:l.position,c]),a=!1,d}else return a||(a=l.position),"[removed]";else return t(i,s,l)},remove:function(i){var s="",l=0;return Ea.forEach(o,function(d){s+=i.slice(l,d[0]),l=d[1]}),s+=i.slice(l),s}}}function US(e){for(var t="",n=0;n<e.length;){var r=e.indexOf("<!--",n);if(r===-1){t+=e.slice(n);break}t+=e.slice(n,r);var o=e.indexOf("-->",r);if(o===-1)break;n=o+3}return t}function YS(e){var t=e.split("");return t=t.filter(function(n){var r=n.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}Ce.whiteList=Bp();Ce.getDefaultWhiteList=Bp;Ce.onTag=RS;Ce.onIgnoreTag=AS;Ce.onTagAttr=kS;Ce.onIgnoreTagAttr=LS;Ce.safeAttrValue=qS;Ce.escapeHtml=$p;Ce.escapeQuote=Hp;Ce.unescapeQuote=zp;Ce.escapeHtmlEntities=Up;Ce.escapeDangerHtml5Entities=Yp;Ce.clearNonPrintableCharacter=jp;Ce.friendlyAttrValue=Wp;Ce.escapeAttrValue=Gp;Ce.onIgnoreTagStripAll=HS;Ce.StripTagBody=zS;Ce.stripCommentTag=US;Ce.stripBlankChar=YS;Ce.cssFilter=Fp;Ce.getDefaultCSSWhiteList=NS;var Ga={},Rt=Wl;function jS(e){var t=Rt.spaceIndex(e),n;return t===-1?n=e.slice(1,-1):n=e.slice(1,t+1),n=Rt.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function WS(e){return e.slice(0,2)==="</"}function GS(e,t,n){var r="",o=0,a=!1,i=!1,s=0,l=e.length,d="",c="";e:for(s=0;s<l;s++){var f=e.charAt(s);if(a===!1){if(f==="<"){a=s;continue}}else if(i===!1){if(f==="<"){r+=n(e.slice(o,s)),a=s,o=s;continue}if(f===">"||s===l-1){r+=n(e.slice(o,a)),c=e.slice(a,s+1),d=jS(c),r+=t(a,r.length,d,c,WS(c)),o=s+1,a=!1;continue}if(f==='"'||f==="'")for(var p=1,g=e.charAt(s-p);g.trim()===""||g==="=";){if(g==="="){i=f;continue e}g=e.charAt(s-++p)}}else if(f===i){i=!1;continue}}return o<l&&(r+=n(e.substr(o))),r}var KS=/[^a-zA-Z0-9\\_:.-]/gim;function XS(e,t){var n=0,r=0,o=[],a=!1,i=e.length;function s(p,g){if(p=Rt.trim(p),p=p.replace(KS,"").toLowerCase(),!(p.length<1)){var h=t(p,g||"");h&&o.push(h)}}for(var l=0;l<i;l++){var d=e.charAt(l),c,f;if(a===!1&&d==="="){a=e.slice(n,l),n=l+1,r=e.charAt(n)==='"'||e.charAt(n)==="'"?n:ZS(e,l+1);continue}if(a!==!1&&l===r){if(f=e.indexOf(d,l+1),f===-1)break;c=Rt.trim(e.slice(r+1,f)),s(a,c),a=!1,l=f,n=l+1;continue}if(/\s|\n|\t/.test(d))if(e=e.replace(/\s|\n|\t/g," "),a===!1)if(f=QS(e,l),f===-1){c=Rt.trim(e.slice(n,l)),s(c),a=!1,n=l+1;continue}else{l=f-1;continue}else if(f=JS(e,l-1),f===-1){c=Rt.trim(e.slice(n,l)),c=Hc(c),s(a,c),a=!1,n=l+1;continue}else continue}return n<e.length&&(a===!1?s(e.slice(n)):s(a,Hc(Rt.trim(e.slice(n))))),Rt.trim(o.join(" "))}function QS(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="="?t:-1}}function ZS(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="'"||n==='"'?t:-1}}function JS(e,t){for(;t>0;t--){var n=e[t];if(n!==" ")return n==="="?t:-1}}function ew(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function Hc(e){return ew(e)?e.substr(1,e.length-2):e}Ga.parseTag=GS;Ga.parseAttr=XS;var tw=hr.exports.FilterCSS,Ze=Ce,Kp=Ga,nw=Kp.parseTag,rw=Kp.parseAttr,eo=Wl;function Vr(e){return e==null}function ow(e){var t=eo.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=eo.trim(e.slice(t+1,-1));var n=e[e.length-1]==="/";return n&&(e=eo.trim(e.slice(0,-1))),{html:e,closing:n}}function aw(e){var t={};for(var n in e)t[n]=e[n];return t}function iw(e){var t={};for(var n in e)Array.isArray(e[n])?t[n.toLowerCase()]=e[n].map(function(r){return r.toLowerCase()}):t[n.toLowerCase()]=e[n];return t}function Xp(e){e=aw(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Ze.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=iw(e.whiteList||e.allowList):e.whiteList=Ze.whiteList,e.onTag=e.onTag||Ze.onTag,e.onTagAttr=e.onTagAttr||Ze.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Ze.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Ze.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Ze.safeAttrValue,e.escapeHtml=e.escapeHtml||Ze.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new tw(e.css))}Xp.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,o=n.onTag,a=n.onIgnoreTag,i=n.onTagAttr,s=n.onIgnoreTagAttr,l=n.safeAttrValue,d=n.escapeHtml,c=t.cssFilter;n.stripBlankChar&&(e=Ze.stripBlankChar(e)),n.allowCommentTag||(e=Ze.stripCommentTag(e));var f=!1;n.stripIgnoreTagBody&&(f=Ze.StripTagBody(n.stripIgnoreTagBody,a),a=f.onIgnoreTag);var p=nw(e,function(g,h,m,v,b){var C={sourcePosition:g,position:h,isClosing:b,isWhite:Object.prototype.hasOwnProperty.call(r,m)},S=o(m,v,C);if(!Vr(S))return S;if(C.isWhite){if(C.isClosing)return"</"+m+">";var y=ow(v),w=r[m],_=rw(y.html,function(x,I){var O=eo.indexOf(w,x)!==-1,A=i(m,x,I,O);return Vr(A)?O?(I=l(m,x,I,c),I?x+'="'+I+'"':x):(A=s(m,x,I,O),Vr(A)?void 0:A):A});return v="<"+m,_&&(v+=" "+_),y.closing&&(v+=" /"),v+=">",v}else return S=a(m,v,C),Vr(S)?d(v):S},d);return f&&(p=f.remove(p)),p};var sw=Xp;(function(e,t){var n=Ce,r=Ga,o=sw;function a(s,l){var d=new o(l);return d.process(s)}t=e.exports=a,t.filterXSS=a,t.FilterXSS=o,function(){for(var s in n)t[s]=n[s];for(var l in r)t[l]=r[l]}(),typeof window<"u"&&(window.filterXSS=e.exports);function i(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}i()&&(self.filterXSS=e.exports)})(Qs,Qs.exports);const Qp=Qs.exports,Zp={whiteList:{a:["target","href","title","ref"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],body:[],br:[],button:["class"],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:["class"],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],g:[],h1:["toc"],h2:["toc"],h3:["toc"],h4:["toc"],h5:["toc"],h6:["toc"],head:[],header:[],hr:[],html:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:["class"],mark:[],nav:[],noscript:[],ol:["class"],p:[],pre:[],s:[],section:[],small:[],span:["data-widgetparams","class","id"],sub:[],summary:[],sup:[],strong:[],svg:[],table:["width","border","align","valign","class"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign","class"],thead:["class","align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:["class"],video:["autoplay","controls","loop","preload","src","height","width"]},stripIgnoreTagBody:!0,allowCommentTag:!1,css:!1,onIgnoreTag:function(e,t,n){if(e==="!doctype")return t},safeAttrValue:function(e,t,n){return e==="img"&&t==="src"?n&&(n.startsWith("data:image/")||n.startsWith("http"))?n:"":n}};function to(e){let t="pill-xl ";const{align:n="",highlight:r=""}=e,o=n.toLowerCase();o==="left"&&(t+="floatLeft "),o==="right"&&(t+="floatright ");const a=r==="true"?"secondary":"light-secondary";return o==="center"?u("div",{className:"bootstrap-4-backport",style:{textAlign:"center"},children:u(we,{href:e.url,className:t,variant:a,children:e.text})}):u("span",{className:"bootstrap-4-backport",children:u(we,{href:e.url,className:t,variant:a,children:e.text})})}try{to.displayName="MarkdownButton",to.__docgenInfo={description:"",displayName:"MarkdownButton",props:{align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"string"}},highlight:{defaultValue:null,description:"",name:"highlight",required:!1,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownButton.tsx#MarkdownButton"]={docgenInfo:to.__docgenInfo,name:"MarkdownButton",path:"src/lib/containers/markdown/widget/MarkdownButton.tsx#MarkdownButton"})}catch{}async function lw(e,t,n){const r=new Set;try{let o=await Tn(n,e,t);for(;Kg(o);){if(r.has(o.id))throw new Error("Link forms a cycle.");r.add(o.id),o=await Tn(n,o.linksTo.targetId,o.linksTo.targetVersionNumber)}return o}catch(o){throw new Error(`${e} could not be resolved.
${o.message}`)}}function cw(e,t,n){const{accessToken:r}=ie();return Cr(["resolveLinkEntity",e,t],()=>lw(e,t,r),n)}function dw(e,t,n){const{accessToken:r}=ie();return Cr(["team",e,"member",t],()=>Xg(e,t,r),n)}function uw(e){const t=window.open("","");t==null||t.document.write(e),t==null||t.document.close()}function no(e){const{rawHtml:t}=e,[n,r]=E.exports.useState(!1);return N(H,{children:[u(fv,{title:"Open Untrusted Content in New Window?",modalBody:'Click "OK" to leave this page and open this content in a new window; this enables additional functionality, but should only be done if you trust the content.',show:n,confirmButtonText:"OK",confirmButtonVariant:"sds-primary",onConfirm:()=>{uw(t),r(!1)},onCancel:()=>r(!1)}),N(nn,{variant:"info",dismissible:!1,show:!0,transition:!1,children:["Limited rendering only."," ",u("a",{onClick:()=>r(!0),children:"External view available."})]})]})}try{no.displayName="SanitizedWarning",no.__docgenInfo={description:"",displayName:"SanitizedWarning",props:{rawHtml:{defaultValue:null,description:"",name:"rawHtml",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FilePreview/HtmlPreview/SanitizedWarning.tsx#SanitizedWarning"]={docgenInfo:no.__docgenInfo,name:"SanitizedWarning",path:"src/lib/containers/FilePreview/HtmlPreview/SanitizedWarning.tsx#SanitizedWarning"})}catch{}function fw(e){const{rawHtml:t,isLoading:n,isTrusted:r}=e;return E.exports.useMemo(()=>{if(!n)return r?t:Qp(t,Zp)},[n,r,t])}function ro(e){const{createdByUserId:t,rawHtml:n}=e,{data:r,isLoading:o}=dw(Iy,t),i=fw({rawHtml:n,isLoading:o,isTrusted:!!r});return o?u(za,{}):N(H,{children:[n!==i&&u(no,{rawHtml:n}),u("iframe",{srcDoc:i,style:{border:0,width:"100%"}})]})}try{ro.displayName="HtmlPreview",ro.__docgenInfo={description:"Renders raw HTML. Uses file handle data to determine if the content should be sanitized.",displayName:"HtmlPreview",props:{createdByUserId:{defaultValue:null,description:"",name:"createdByUserId",required:!0,type:{name:"string"}},rawHtml:{defaultValue:null,description:"",name:"rawHtml",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FilePreview/HtmlPreview/HtmlPreview.tsx#HtmlPreview"]={docgenInfo:ro.__docgenInfo,name:"HtmlPreview",path:"src/lib/containers/FilePreview/HtmlPreview/HtmlPreview.tsx#HtmlPreview"})}catch{}var Se=(e=>(e.PLAINTEXT="PLAINTEXT",e.CODE="CODE",e.ZIP="ZIP",e.CSV="CSV",e.IMAGE="IMAGE",e.NONE="NONE",e.TAB="TAB",e.HTML="HTML",e.PDF="PDF",e.IPYNB="IPYNB",e.VIDEO="VIDEO",e.MARKDOWN="MARKDOWN",e.TIFF="TIFF",e))(Se||{});const pw=30*Ny;function Xn(e){const{fileHandle:t,fileHandleAssociation:n,previewType:r}=e,o={requestedFiles:[n],includePreSignedURLs:!0,includeFileHandles:!1,includePreviewPreSignedURLs:!1},{data:a,isLoading:i}=dv(t,o,pw,{useErrorBoundary:!0});return i?u(za,{}):r===Se.HTML?u(ro,{rawHtml:a,createdByUserId:t.createdBy}):(r!==Se.NONE&&console.warn(`Rendering a preview of type ${r} is not supported in Portals`),u(H,{}))}try{Xn.displayName="FileHandleContentRenderer",Xn.__docgenInfo={description:"Fetches the content for and renders the contents of a file handle.",displayName:"FileHandleContentRenderer",props:{fileHandle:{defaultValue:null,description:"The file handle whose contents should be downloaded and rendered",name:"fileHandle",required:!0,type:{name:"FileHandle"}},fileHandleAssociation:{defaultValue:null,description:"The association between the file handle and an object which will give the user permission to access the file data",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},previewType:{defaultValue:null,description:"Informs how to render the file data",name:"previewType",required:!0,type:{name:"enum",value:[{value:'"PLAINTEXT"'},{value:'"CODE"'},{value:'"ZIP"'},{value:'"CSV"'},{value:'"IMAGE"'},{value:'"NONE"'},{value:'"TAB"'},{value:'"HTML"'},{value:'"PDF"'},{value:'"IPYNB"'},{value:'"VIDEO"'},{value:'"MARKDOWN"'},{value:'"TIFF"'}]}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FilePreview/FileHandleContentRenderer.tsx#FileHandleContentRenderer"]={docgenInfo:Xn.__docgenInfo,name:"FileHandleContentRenderer",path:"src/lib/containers/FilePreview/FileHandleContentRenderer.tsx#FileHandleContentRenderer"})}catch{}const Jp=["image/bmp","image/pjpeg","image/jpeg","image/jpg","image/jpe","image/gif","image/png","image/svg+xml"],hw=[".mp4",".m4a",".m4p",".m4b",".m4r",".m4v"],mw=[".ogv",".ogg"],gw=[...hw,...mw,".webm"],yw=[".cwl",".wdl",".json",".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx"],vw=[".md",".markdown",".rmd"];function bw(e){const t=e.lastIndexOf(".");return t===-1?null:e.substring(t)}function Sw(e){if(!jl(e))return Se.NONE;const t=bw(e.fileName);return t&&gw.includes(t)?Se.VIDEO:t===".ipynb"?Se.IPYNB:Jp.includes(e.contentType)?Se.IMAGE:e.contentType==="text/html"?Se.HTML:e.contentType.toLowerCase().startsWith("application/pdf")?Se.PDF:t&&yw.includes(t)?Se.CODE:t&&vw.includes(t)?Se.MARKDOWN:e.contentType==="image/tiff"?Se.TIFF:Se.NONE}function ww(e,t){const n=e.contentType;return jl(e)?Jp.includes(e.contentType)?Se.IMAGE:n.toLowerCase().startsWith("text/")?n.toLowerCase()==="text/csv"?t.contentType==="application/zip"?Se.ZIP:Se.CSV:n.toLowerCase()==="text/tab-separated-values"?Se.TAB:Se.PLAINTEXT:n.toLowerCase().startsWith("application/pdf")?Se.PDF:Se.NONE:Se.NONE}function oo(e){const{bundle:t}=e,{accessToken:n}=ie(),r=!!n;if(!wl(t.entity))throw new Error(`Entity ${t.entity.id} is not a FileEntity`);const o=t.entity.dataFileHandleId,a=t.fileHandles.find(s=>s.id===o);if(!a&&!r)return u(nn,{dismissible:!1,show:!0,variant:"danger",transition:!1,children:u(Qg,{})});if(a){const s=Sw(a);if(s!==Se.NONE)return u(Xn,{fileHandle:a,fileHandleAssociation:{fileHandleId:o,associateObjectId:t.entity.id,associateObjectType:Re.FileEntity},previewType:s})}const i=t.fileHandles.find(s=>jl(s)&&s.isPreview);if(i&&a){const s=ww(i,a);if(s!==Se.NONE)return u(Xn,{fileHandle:i,fileHandleAssociation:{fileHandleId:i.id,associateObjectId:t.entity.id,associateObjectType:Re.FileEntity},previewType:s})}throw new Error(`Could not render a preview for entity: ${t.entity.id}`)}try{oo.displayName="FileEntityPreview",oo.__docgenInfo={description:`Given an entity bundle that contains a FileEntity, render a preview of the file. The rendered preview will be determined based on the
content type and file name of the file handle(s) associated with the FileEntity.`,displayName:"FileEntityPreview",props:{bundle:{defaultValue:null,description:"An entity bundle containing a FileEntity, and its fileHandles",name:"bundle",required:!0,type:{name:"EntityBundle<{ readonly includeEntity: true; readonly includeEntityPath: true; readonly includeAnnotations: true; readonly includePermissions: true; readonly includeHasChildren: true; readonly includeAccessControlList: true; ... 7 more ...; readonly includeRestrictionInformation: true; }>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FilePreview/FileEntityPreview.tsx#FileEntityPreview"]={docgenInfo:oo.__docgenInfo,name:"FileEntityPreview",path:"src/lib/containers/FilePreview/FileEntityPreview.tsx#FileEntityPreview"})}catch{}function ao(e){let{entityId:t,versionNumber:n}=e;const{data:r,isLoading:o}=cw(t,n),a=r&&wl(r),{data:i,isLoading:s}=Dp(r==null?void 0:r.id,r==null?void 0:r.versionNumber,lp,{enabled:!!a,useErrorBoundary:!0});if(o||s)return u(za,{});if(a)return u(oo,{bundle:i});throw new Error(`${t} is not a File and cannot be previewed.`)}try{ao.displayName="EntityPreview",ao.__docgenInfo={description:"Returns a preview of an entity. Currently only works for FileEntities, and Links that resolve to FileEntities.",displayName:"EntityPreview",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FilePreview/EntityPreview.tsx#EntityPreview"]={docgenInfo:ao.__docgenInfo,name:"EntityPreview",path:"src/lib/containers/FilePreview/EntityPreview.tsx#EntityPreview"})}catch{}function io(e){var a;const t=Fy(e.entityId);if(t==null)throw new Error(`${e.entityId} is not a valid Synapse ID`);const n=parseInt((a=e.versionNumber)!=null?a:""),r=t.targetId,o=Number.isNaN(n)?t.targetVersionNumber:n;return u(ao,{entityId:r,versionNumber:o})}try{io.displayName="MarkdownEntityPreview",io.__docgenInfo={description:"",displayName:"MarkdownEntityPreview",props:{entityId:{defaultValue:null,description:'A Synapse Entity ID that may optionally contain a "dot" version, e.g. syn123 or syn123.2',name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"An optional Entity version number.",name:"versionNumber",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownEntityPreview.tsx#MarkdownEntityPreview"]={docgenInfo:io.__docgenInfo,name:"MarkdownEntityPreview",path:"src/lib/containers/markdown/widget/MarkdownEntityPreview.tsx#MarkdownEntityPreview"})}catch{}const so=({info:e})=>u(H,{children:e&&N("p",{className:"SubmissionInfoCard",children:[u("strong",{children:" Project Lead: "})," ",u("span",{children:e.projectLead})," ",u("br",{}),u("strong",{children:" Institution: "})," ",u("span",{children:e.institution})," ",u("br",{}),u("strong",{children:" Data Access Request Submitted By: "})," ",u(Jt,{ownerId:e.submittedBy,size:pr})," ",u("br",{}),N("strong",{children:[" ","Intended Data Use Statement (accepted on"," ",Ml(Tr(e.modifiedOn),"M/D/YYYY"),"):"]}),u("div",{children:e.intendedDataUseStatement}),e.accessorChanges&&e.accessorChanges.map(t=>N("div",{children:[u(Jt,{ownerId:t.userId,size:pr})," ",t.type]},`${t.userId}-${t.type}`))]})}),Qn=()=>N("p",{className:"SubmissionInfoCard",children:[u(Vl,{numCols:1,numRows:4}),u(Ks,{variant:"rectangular",width:"100%",height:80})]});try{so.displayName="SubmissionInfoCard",so.__docgenInfo={description:"",displayName:"SubmissionInfoCard",props:{info:{defaultValue:null,description:"",name:"info",required:!0,type:{name:"SubmissionInfo"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReportSubmissionInfo.tsx#SubmissionInfoCard"]={docgenInfo:so.__docgenInfo,name:"SubmissionInfoCard",path:"src/lib/containers/IDUReportSubmissionInfo.tsx#SubmissionInfoCard"})}catch{}try{Qn.displayName="LoadingSubmissionInfoCard",Qn.__docgenInfo={description:"",displayName:"LoadingSubmissionInfoCard",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReportSubmissionInfo.tsx#LoadingSubmissionInfoCard"]={docgenInfo:Qn.__docgenInfo,name:"LoadingSubmissionInfoCard",path:"src/lib/containers/IDUReportSubmissionInfo.tsx#LoadingSubmissionInfoCard"})}catch{}const lo=e=>{var f;const{accessRequirementId:t}=e,{ref:n,inView:r}=Pn(),{data:o,status:a,isLoading:i,hasNextPage:s,isFetchingNextPage:l,fetchNextPage:d}=mS(t,{useErrorBoundary:!0});E.exports.useEffect(()=>{a==="success"&&!l&&s&&d&&r&&d()},[a,s,l,d,r]);const c=(f=o==null?void 0:o.pages.flatMap(p=>p.results))!=null?f:[];return N(H,{children:[c.length>0&&N("div",{className:"IDUReport",children:[c.map(p=>N(ge.Fragment,{children:[u(so,{info:p}),u("hr",{})]},JSON.stringify(p))),u("div",{ref:n})]}),(i||l)&&N(H,{children:[u(Qn,{}),u(Qn,{})]})]})};try{lo.displayName="IDUReport",lo.__docgenInfo={description:"",displayName:"IDUReport",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReport.tsx#IDUReport"]={docgenInfo:lo.__docgenInfo,name:"IDUReport",path:"src/lib/containers/IDUReport.tsx#IDUReport"})}catch{}function co(e){const{accessRestrictionId:t}=e;return u(lo,{accessRequirementId:t})}try{co.displayName="MarkdownIDUReport",co.__docgenInfo={description:"",displayName:"MarkdownIDUReport",props:{accessRestrictionId:{defaultValue:null,description:"",name:"accessRestrictionId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownIDUReport.tsx#MarkdownIDUReport"]={docgenInfo:co.__docgenInfo,name:"MarkdownIDUReport",path:"src/lib/containers/markdown/widget/MarkdownIDUReport.tsx#MarkdownIDUReport"})}catch{}function Cw(e){let t;const n=new Set,r=(d,c)=>{const f=typeof d=="function"?d(t):d;if(f!==t){const p=t;t=c?f:Object.assign({},t,f),n.forEach(g=>g(t,p))}},o=()=>t,a=(d,c=o,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=c(t);function g(){const h=c(t);if(!f(p,h)){const m=p;d(p=h,m)}}return n.add(g),()=>n.delete(g)},l={setState:r,getState:o,subscribe:(d,c,f)=>c||f?a(d,c,f):(n.add(d),()=>n.delete(d)),destroy:()=>n.clear()};return t=e(r,o,l),l}const _w=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),zc=_w?E.exports.useEffect:E.exports.useLayoutEffect;function Ew(e){const t=typeof e=="function"?Cw(e):e,n=(r=t.getState,o=Object.is)=>{const[,a]=E.exports.useReducer(v=>v+1,0),i=t.getState(),s=E.exports.useRef(i),l=E.exports.useRef(r),d=E.exports.useRef(o),c=E.exports.useRef(!1),f=E.exports.useRef();f.current===void 0&&(f.current=r(i));let p,g=!1;(s.current!==i||l.current!==r||d.current!==o||c.current)&&(p=r(i),g=!o(f.current,p)),zc(()=>{g&&(f.current=p),s.current=i,l.current=r,d.current=o,c.current=!1});const h=E.exports.useRef(i);zc(()=>{const v=()=>{try{const C=t.getState(),S=l.current(C);d.current(f.current,S)||(s.current=C,f.current=S,a())}catch{c.current=!0,a()}},b=t.subscribe(v);return t.getState()!==h.current&&v(),b},[]);const m=g?p:f.current;return E.exports.useDebugValue(m),m};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,t];return{next(){const o=r.length<=0;return{value:r.shift(),done:o}}}},n}function xw(){const e=E.exports.createContext(void 0);return{Provider:({initialStore:o,createStore:a,children:i})=>{const s=E.exports.useRef();return s.current||(o&&(console.warn("Provider initialStore is deprecated and will be removed in the next version."),a||(a=()=>o)),s.current=a()),E.exports.createElement(e.Provider,{value:s.current},i)},useStore:(o,a=Object.is)=>{const i=E.exports.useContext(e);if(!i)throw new Error("Seems like you have not used zustand provider as an ancestor.");return i(o,a)},useStoreApi:()=>{const o=E.exports.useContext(e);if(!o)throw new Error("Seems like you have not used zustand provider as an ancestor.");return E.exports.useMemo(()=>({getState:o.getState,setState:o.setState,subscribe:o.subscribe,destroy:o.destroy}),[o])}}}var Tw={value:()=>{}};function Ka(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new uo(n)}function uo(e){this._=e}function Ow(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}uo.prototype=Ka.prototype={constructor:uo,on:function(e,t){var n=this._,r=Ow(e+"",n),o,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((o=(e=r[a]).type)&&(o=Iw(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(o=(e=r[a]).type)n[o]=Uc(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Uc(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new uo(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,a;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,o=a.length;r<o;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};function Iw(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Uc(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Tw,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Zs="http://www.w3.org/1999/xhtml";const Yc={svg:"http://www.w3.org/2000/svg",xhtml:Zs,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xa(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Yc.hasOwnProperty(t)?{space:Yc[t],local:e}:e}function Nw(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Zs&&t.documentElement.namespaceURI===Zs?t.createElement(e):t.createElementNS(n,e)}}function Rw(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function eh(e){var t=Xa(e);return(t.local?Rw:Nw)(t)}function Aw(){}function Gl(e){return e==null?Aw:function(){return this.querySelector(e)}}function kw(e){typeof e!="function"&&(e=Gl(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=new Array(i),l,d,c=0;c<i;++c)(l=a[c])&&(d=e.call(l,l.__data__,c,a))&&("__data__"in l&&(d.__data__=l.__data__),s[c]=d);return new He(r,this._parents)}function Lw(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function qw(){return[]}function th(e){return e==null?qw:function(){return this.querySelectorAll(e)}}function Pw(e){return function(){return Lw(e.apply(this,arguments))}}function Dw(e){typeof e=="function"?e=Pw(e):e=th(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i=t[a],s=i.length,l,d=0;d<s;++d)(l=i[d])&&(r.push(e.call(l,l.__data__,d,i)),o.push(l));return new He(r,o)}function nh(e){return function(){return this.matches(e)}}function rh(e){return function(t){return t.matches(e)}}var Mw=Array.prototype.find;function Vw(e){return function(){return Mw.call(this.children,e)}}function Bw(){return this.firstElementChild}function Fw(e){return this.select(e==null?Bw:Vw(typeof e=="function"?e:rh(e)))}var $w=Array.prototype.filter;function Hw(){return Array.from(this.children)}function zw(e){return function(){return $w.call(this.children,e)}}function Uw(e){return this.selectAll(e==null?Hw:zw(typeof e=="function"?e:rh(e)))}function Yw(e){typeof e!="function"&&(e=nh(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],l,d=0;d<i;++d)(l=a[d])&&e.call(l,l.__data__,d,a)&&s.push(l);return new He(r,this._parents)}function oh(e){return new Array(e.length)}function jw(){return new He(this._enter||this._groups.map(oh),this._parents)}function xa(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}xa.prototype={constructor:xa,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ww(e){return function(){return e}}function Gw(e,t,n,r,o,a){for(var i=0,s,l=t.length,d=a.length;i<d;++i)(s=t[i])?(s.__data__=a[i],r[i]=s):n[i]=new xa(e,a[i]);for(;i<l;++i)(s=t[i])&&(o[i]=s)}function Kw(e,t,n,r,o,a,i){var s,l,d=new Map,c=t.length,f=a.length,p=new Array(c),g;for(s=0;s<c;++s)(l=t[s])&&(p[s]=g=i.call(l,l.__data__,s,t)+"",d.has(g)?o[s]=l:d.set(g,l));for(s=0;s<f;++s)g=i.call(e,a[s],s,a)+"",(l=d.get(g))?(r[s]=l,l.__data__=a[s],d.delete(g)):n[s]=new xa(e,a[s]);for(s=0;s<c;++s)(l=t[s])&&d.get(p[s])===l&&(o[s]=l)}function Xw(e){return e.__data__}function Qw(e,t){if(!arguments.length)return Array.from(this,Xw);var n=t?Kw:Gw,r=this._parents,o=this._groups;typeof e!="function"&&(e=Ww(e));for(var a=o.length,i=new Array(a),s=new Array(a),l=new Array(a),d=0;d<a;++d){var c=r[d],f=o[d],p=f.length,g=Zw(e.call(c,c&&c.__data__,d,r)),h=g.length,m=s[d]=new Array(h),v=i[d]=new Array(h),b=l[d]=new Array(p);n(c,f,m,v,b,g,t);for(var C=0,S=0,y,w;C<h;++C)if(y=m[C]){for(C>=S&&(S=C+1);!(w=v[S])&&++S<h;);y._next=w||null}}return i=new He(i,r),i._enter=s,i._exit=l,i}function Zw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Jw(){return new He(this._exit||this._groups.map(oh),this._parents)}function eC(e,t,n){var r=this.enter(),o=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?a.remove():n(a),r&&o?r.merge(o).order():o}function tC(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),s=new Array(o),l=0;l<i;++l)for(var d=n[l],c=r[l],f=d.length,p=s[l]=new Array(f),g,h=0;h<f;++h)(g=d[h]||c[h])&&(p[h]=g);for(;l<o;++l)s[l]=n[l];return new He(s,this._parents)}function nC(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,a=r[o],i;--o>=0;)(i=r[o])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function rC(e){e||(e=oC);function t(f,p){return f&&p?e(f.__data__,p.__data__):!f-!p}for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i=n[a],s=i.length,l=o[a]=new Array(s),d,c=0;c<s;++c)(d=i[c])&&(l[c]=d);l.sort(t)}return new He(o,this._parents).order()}function oC(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function aC(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function iC(){return Array.from(this)}function sC(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null}function lC(){let e=0;for(const t of this)++e;return e}function cC(){return!this.node()}function dC(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],a=0,i=o.length,s;a<i;++a)(s=o[a])&&e.call(s,s.__data__,a,o);return this}function uC(e){return function(){this.removeAttribute(e)}}function fC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function pC(e,t){return function(){this.setAttribute(e,t)}}function hC(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function mC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function gC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function yC(e,t){var n=Xa(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?fC:uC:typeof t=="function"?n.local?gC:mC:n.local?hC:pC)(n,t))}function ah(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function vC(e){return function(){this.style.removeProperty(e)}}function bC(e,t,n){return function(){this.style.setProperty(e,t,n)}}function SC(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function wC(e,t,n){return arguments.length>1?this.each((t==null?vC:typeof t=="function"?SC:bC)(e,t,n==null?"":n)):In(this.node(),e)}function In(e,t){return e.style.getPropertyValue(t)||ah(e).getComputedStyle(e,null).getPropertyValue(t)}function CC(e){return function(){delete this[e]}}function _C(e,t){return function(){this[e]=t}}function EC(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function xC(e,t){return arguments.length>1?this.each((t==null?CC:typeof t=="function"?EC:_C)(e,t)):this.node()[e]}function ih(e){return e.trim().split(/^|\s+/)}function Kl(e){return e.classList||new sh(e)}function sh(e){this._node=e,this._names=ih(e.getAttribute("class")||"")}sh.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function lh(e,t){for(var n=Kl(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function ch(e,t){for(var n=Kl(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function TC(e){return function(){lh(this,e)}}function OC(e){return function(){ch(this,e)}}function IC(e,t){return function(){(t.apply(this,arguments)?lh:ch)(this,e)}}function NC(e,t){var n=ih(e+"");if(arguments.length<2){for(var r=Kl(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?IC:t?TC:OC)(n,t))}function RC(){this.textContent=""}function AC(e){return function(){this.textContent=e}}function kC(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function LC(e){return arguments.length?this.each(e==null?RC:(typeof e=="function"?kC:AC)(e)):this.node().textContent}function qC(){this.innerHTML=""}function PC(e){return function(){this.innerHTML=e}}function DC(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function MC(e){return arguments.length?this.each(e==null?qC:(typeof e=="function"?DC:PC)(e)):this.node().innerHTML}function VC(){this.nextSibling&&this.parentNode.appendChild(this)}function BC(){return this.each(VC)}function FC(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $C(){return this.each(FC)}function HC(e){var t=typeof e=="function"?e:eh(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function zC(){return null}function UC(e,t){var n=typeof e=="function"?e:eh(e),r=t==null?zC:typeof t=="function"?t:Gl(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function YC(){var e=this.parentNode;e&&e.removeChild(this)}function jC(){return this.each(YC)}function WC(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function GC(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function KC(e){return this.select(e?GC:WC)}function XC(e){return arguments.length?this.property("__data__",e):this.node().__data__}function QC(e){return function(t){e.call(this,t,this.__data__)}}function ZC(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function JC(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,o=t.length,a;n<o;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function e_(e,t,n){return function(){var r=this.__on,o,a=QC(t);if(r){for(var i=0,s=r.length;i<s;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),o.value=t;return}}this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(o):this.__on=[o]}}function t_(e,t,n){var r=ZC(e+""),o,a=r.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,d=s.length,c;l<d;++l)for(o=0,c=s[l];o<a;++o)if((i=r[o]).type===c.type&&i.name===c.name)return c.value}return}for(s=t?e_:JC,o=0;o<a;++o)this.each(s(r[o],t,n));return this}function dh(e,t,n){var r=ah(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function n_(e,t){return function(){return dh(this,e,t)}}function r_(e,t){return function(){return dh(this,e,t.apply(this,arguments))}}function o_(e,t){return this.each((typeof t=="function"?r_:n_)(e,t))}function*a_(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length,i;o<a;++o)(i=r[o])&&(yield i)}var uh=[null];function He(e,t){this._groups=e,this._parents=t}function Ir(){return new He([[document.documentElement]],uh)}function i_(){return this}He.prototype=Ir.prototype={constructor:He,select:kw,selectAll:Dw,selectChild:Fw,selectChildren:Uw,filter:Yw,data:Qw,enter:jw,exit:Jw,join:eC,merge:tC,selection:i_,order:nC,sort:rC,call:aC,nodes:iC,node:sC,size:lC,empty:cC,each:dC,attr:yC,style:wC,property:xC,classed:NC,text:LC,html:MC,raise:BC,lower:$C,append:HC,insert:UC,remove:jC,clone:KC,datum:XC,on:t_,dispatch:o_,[Symbol.iterator]:a_};function Je(e){return typeof e=="string"?new He([[document.querySelector(e)]],[document.documentElement]):new He([[e]],uh)}function s_(e){let t;for(;t=e.sourceEvent;)e=t;return e}function it(e,t){if(e=s_(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const l_={passive:!1},mr={capture:!0,passive:!1};function di(e){e.stopImmediatePropagation()}function vn(e){e.preventDefault(),e.stopImmediatePropagation()}function fh(e){var t=e.document.documentElement,n=Je(e).on("dragstart.drag",vn,mr);"onselectstart"in t?n.on("selectstart.drag",vn,mr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ph(e,t){var n=e.document.documentElement,r=Je(e).on("dragstart.drag",null);t&&(r.on("click.drag",vn,mr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Br=e=>()=>e;function Js(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:a,x:i,y:s,dx:l,dy:d,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:c}})}Js.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function c_(e){return!e.ctrlKey&&!e.button}function d_(){return this.parentNode}function u_(e,t){return t==null?{x:e.x,y:e.y}:t}function f_(){return navigator.maxTouchPoints||"ontouchstart"in this}function p_(){var e=c_,t=d_,n=u_,r=f_,o={},a=Ka("start","drag","end"),i=0,s,l,d,c,f=0;function p(y){y.on("mousedown.drag",g).filter(r).on("touchstart.drag",v).on("touchmove.drag",b,l_).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(y,w){if(!(c||!e.call(this,y,w))){var _=S(this,t.call(this,y,w),y,w,"mouse");!_||(Je(y.view).on("mousemove.drag",h,mr).on("mouseup.drag",m,mr),fh(y.view),di(y),d=!1,s=y.clientX,l=y.clientY,_("start",y))}}function h(y){if(vn(y),!d){var w=y.clientX-s,_=y.clientY-l;d=w*w+_*_>f}o.mouse("drag",y)}function m(y){Je(y.view).on("mousemove.drag mouseup.drag",null),ph(y.view,d),vn(y),o.mouse("end",y)}function v(y,w){if(!!e.call(this,y,w)){var _=y.changedTouches,x=t.call(this,y,w),I=_.length,O,A;for(O=0;O<I;++O)(A=S(this,x,y,w,_[O].identifier,_[O]))&&(di(y),A("start",y,_[O]))}}function b(y){var w=y.changedTouches,_=w.length,x,I;for(x=0;x<_;++x)(I=o[w[x].identifier])&&(vn(y),I("drag",y,w[x]))}function C(y){var w=y.changedTouches,_=w.length,x,I;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),x=0;x<_;++x)(I=o[w[x].identifier])&&(di(y),I("end",y,w[x]))}function S(y,w,_,x,I,O){var A=a.copy(),k=it(O||_,w),M,B,T;if((T=n.call(y,new Js("beforestart",{sourceEvent:_,target:p,identifier:I,active:i,x:k[0],y:k[1],dx:0,dy:0,dispatch:A}),x))!=null)return M=T.x-k[0]||0,B=T.y-k[1]||0,function q(R,D,$){var z=k,V;switch(R){case"start":o[I]=q,V=i++;break;case"end":delete o[I],--i;case"drag":k=it($||D,w),V=i;break}A.call(R,y,new Js(R,{sourceEvent:D,subject:T,target:p,identifier:I,active:V,x:k[0]+M,y:k[1]+B,dx:k[0]-z[0],dy:k[1]-z[1],dispatch:A}),x)}}return p.filter=function(y){return arguments.length?(e=typeof y=="function"?y:Br(!!y),p):e},p.container=function(y){return arguments.length?(t=typeof y=="function"?y:Br(y),p):t},p.subject=function(y){return arguments.length?(n=typeof y=="function"?y:Br(y),p):n},p.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:Br(!!y),p):r},p.on=function(){var y=a.on.apply(a,arguments);return y===a?p:y},p.clickDistance=function(y){return arguments.length?(f=(y=+y)*y,p):Math.sqrt(f)},p}function Xl(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function hh(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Nr(){}var gr=.7,Ta=1/gr,bn="\\s*([+-]?\\d+)\\s*",yr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h_=/^#([0-9a-f]{3,8})$/,m_=new RegExp(`^rgb\\(${bn},${bn},${bn}\\)$`),g_=new RegExp(`^rgb\\(${lt},${lt},${lt}\\)$`),y_=new RegExp(`^rgba\\(${bn},${bn},${bn},${yr}\\)$`),v_=new RegExp(`^rgba\\(${lt},${lt},${lt},${yr}\\)$`),b_=new RegExp(`^hsl\\(${yr},${lt},${lt}\\)$`),S_=new RegExp(`^hsla\\(${yr},${lt},${lt},${yr}\\)$`),jc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xl(Nr,vr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Wc,formatHex:Wc,formatHex8:w_,formatHsl:C_,formatRgb:Gc,toString:Gc});function Wc(){return this.rgb().formatHex()}function w_(){return this.rgb().formatHex8()}function C_(){return mh(this).formatHsl()}function Gc(){return this.rgb().formatRgb()}function vr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=h_.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Kc(t):n===3?new Pe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Fr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Fr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=m_.exec(e))?new Pe(t[1],t[2],t[3],1):(t=g_.exec(e))?new Pe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=y_.exec(e))?Fr(t[1],t[2],t[3],t[4]):(t=v_.exec(e))?Fr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=b_.exec(e))?Zc(t[1],t[2]/100,t[3]/100,1):(t=S_.exec(e))?Zc(t[1],t[2]/100,t[3]/100,t[4]):jc.hasOwnProperty(e)?Kc(jc[e]):e==="transparent"?new Pe(NaN,NaN,NaN,0):null}function Kc(e){return new Pe(e>>16&255,e>>8&255,e&255,1)}function Fr(e,t,n,r){return r<=0&&(e=t=n=NaN),new Pe(e,t,n,r)}function __(e){return e instanceof Nr||(e=vr(e)),e?(e=e.rgb(),new Pe(e.r,e.g,e.b,e.opacity)):new Pe}function el(e,t,n,r){return arguments.length===1?__(e):new Pe(e,t,n,r==null?1:r)}function Pe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Xl(Pe,el,hh(Nr,{brighter(e){return e=e==null?Ta:Math.pow(Ta,e),new Pe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?gr:Math.pow(gr,e),new Pe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pe(jt(this.r),jt(this.g),jt(this.b),Oa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xc,formatHex:Xc,formatHex8:E_,formatRgb:Qc,toString:Qc}));function Xc(){return`#${zt(this.r)}${zt(this.g)}${zt(this.b)}`}function E_(){return`#${zt(this.r)}${zt(this.g)}${zt(this.b)}${zt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qc(){const e=Oa(this.opacity);return`${e===1?"rgb(":"rgba("}${jt(this.r)}, ${jt(this.g)}, ${jt(this.b)}${e===1?")":`, ${e})`}`}function Oa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function jt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function zt(e){return e=jt(e),(e<16?"0":"")+e.toString(16)}function Zc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new et(e,t,n,r)}function mh(e){if(e instanceof et)return new et(e.h,e.s,e.l,e.opacity);if(e instanceof Nr||(e=vr(e)),!e)return new et;if(e instanceof et)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,s=a-o,l=(a+o)/2;return s?(t===a?i=(n-r)/s+(n<r)*6:n===a?i=(r-t)/s+2:i=(t-n)/s+4,s/=l<.5?a+o:2-a-o,i*=60):s=l>0&&l<1?0:i,new et(i,s,l,e.opacity)}function x_(e,t,n,r){return arguments.length===1?mh(e):new et(e,t,n,r==null?1:r)}function et(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Xl(et,x_,hh(Nr,{brighter(e){return e=e==null?Ta:Math.pow(Ta,e),new et(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gr:Math.pow(gr,e),new et(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Pe(ui(e>=240?e-240:e+120,o,r),ui(e,o,r),ui(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new et(Jc(this.h),$r(this.s),$r(this.l),Oa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Oa(this.opacity);return`${e===1?"hsl(":"hsla("}${Jc(this.h)}, ${$r(this.s)*100}%, ${$r(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Jc(e){return e=(e||0)%360,e<0?e+360:e}function $r(e){return Math.max(0,Math.min(1,e||0))}function ui(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const gh=e=>()=>e;function T_(e,t){return function(n){return e+n*t}}function O_(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function I_(e){return(e=+e)==1?yh:function(t,n){return n-t?O_(t,n,e):gh(isNaN(t)?n:t)}}function yh(e,t){var n=t-e;return n?T_(e,n):gh(isNaN(e)?t:e)}const ed=function e(t){var n=I_(t);function r(o,a){var i=n((o=el(o)).r,(a=el(a)).r),s=n(o.g,a.g),l=n(o.b,a.b),d=yh(o.opacity,a.opacity);return function(c){return o.r=i(c),o.g=s(c),o.b=l(c),o.opacity=d(c),o+""}}return r.gamma=e,r}(1);function At(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var tl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fi=new RegExp(tl.source,"g");function N_(e){return function(){return e}}function R_(e){return function(t){return e(t)+""}}function A_(e,t){var n=tl.lastIndex=fi.lastIndex=0,r,o,a,i=-1,s=[],l=[];for(e=e+"",t=t+"";(r=tl.exec(e))&&(o=fi.exec(t));)(a=o.index)>n&&(a=t.slice(n,a),s[i]?s[i]+=a:s[++i]=a),(r=r[0])===(o=o[0])?s[i]?s[i]+=o:s[++i]=o:(s[++i]=null,l.push({i,x:At(r,o)})),n=fi.lastIndex;return n<t.length&&(a=t.slice(n),s[i]?s[i]+=a:s[++i]=a),s.length<2?l[0]?R_(l[0].x):N_(t):(t=l.length,function(d){for(var c=0,f;c<t;++c)s[(f=l[c]).i]=f.x(d);return s.join("")})}var td=180/Math.PI,nl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vh(e,t,n,r,o,a){var i,s,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*td,skewX:Math.atan(l)*td,scaleX:i,scaleY:s}}var Hr;function k_(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?nl:vh(t.a,t.b,t.c,t.d,t.e,t.f)}function L_(e){return e==null||(Hr||(Hr=document.createElementNS("http://www.w3.org/2000/svg","g")),Hr.setAttribute("transform",e),!(e=Hr.transform.baseVal.consolidate()))?nl:(e=e.matrix,vh(e.a,e.b,e.c,e.d,e.e,e.f))}function bh(e,t,n,r){function o(d){return d.length?d.pop()+" ":""}function a(d,c,f,p,g,h){if(d!==f||c!==p){var m=g.push("translate(",null,t,null,n);h.push({i:m-4,x:At(d,f)},{i:m-2,x:At(c,p)})}else(f||p)&&g.push("translate("+f+t+p+n)}function i(d,c,f,p){d!==c?(d-c>180?c+=360:c-d>180&&(d+=360),p.push({i:f.push(o(f)+"rotate(",null,r)-2,x:At(d,c)})):c&&f.push(o(f)+"rotate("+c+r)}function s(d,c,f,p){d!==c?p.push({i:f.push(o(f)+"skewX(",null,r)-2,x:At(d,c)}):c&&f.push(o(f)+"skewX("+c+r)}function l(d,c,f,p,g,h){if(d!==f||c!==p){var m=g.push(o(g)+"scale(",null,",",null,")");h.push({i:m-4,x:At(d,f)},{i:m-2,x:At(c,p)})}else(f!==1||p!==1)&&g.push(o(g)+"scale("+f+","+p+")")}return function(d,c){var f=[],p=[];return d=e(d),c=e(c),a(d.translateX,d.translateY,c.translateX,c.translateY,f,p),i(d.rotate,c.rotate,f,p),s(d.skewX,c.skewX,f,p),l(d.scaleX,d.scaleY,c.scaleX,c.scaleY,f,p),d=c=null,function(g){for(var h=-1,m=p.length,v;++h<m;)f[(v=p[h]).i]=v.x(g);return f.join("")}}}var q_=bh(k_,"px, ","px)","deg)"),P_=bh(L_,", ",")",")"),D_=1e-12;function nd(e){return((e=Math.exp(e))+1/e)/2}function M_(e){return((e=Math.exp(e))-1/e)/2}function V_(e){return((e=Math.exp(2*e))-1)/(e+1)}const B_=function e(t,n,r){function o(a,i){var s=a[0],l=a[1],d=a[2],c=i[0],f=i[1],p=i[2],g=c-s,h=f-l,m=g*g+h*h,v,b;if(m<D_)b=Math.log(p/d)/t,v=function(x){return[s+x*g,l+x*h,d*Math.exp(t*x*b)]};else{var C=Math.sqrt(m),S=(p*p-d*d+r*m)/(2*d*n*C),y=(p*p-d*d-r*m)/(2*p*n*C),w=Math.log(Math.sqrt(S*S+1)-S),_=Math.log(Math.sqrt(y*y+1)-y);b=(_-w)/t,v=function(x){var I=x*b,O=nd(w),A=d/(n*C)*(O*V_(t*I+w)-M_(w));return[s+A*g,l+A*h,d*O/nd(t*I+w)]}}return v.duration=b*1e3*t/Math.SQRT2,v}return o.rho=function(a){var i=Math.max(.001,+a),s=i*i,l=s*s;return e(i,s,l)},o}(Math.SQRT2,2,4);var Nn=0,Un=0,Vn=0,Sh=1e3,Ia,Yn,Na=0,tn=0,Qa=0,br=typeof performance=="object"&&performance.now?performance:Date,wh=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ql(){return tn||(wh(F_),tn=br.now()+Qa)}function F_(){tn=0}function Ra(){this._call=this._time=this._next=null}Ra.prototype=Ch.prototype={constructor:Ra,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ql():+n)+(t==null?0:+t),!this._next&&Yn!==this&&(Yn?Yn._next=this:Ia=this,Yn=this),this._call=e,this._time=n,rl()},stop:function(){this._call&&(this._call=null,this._time=1/0,rl())}};function Ch(e,t,n){var r=new Ra;return r.restart(e,t,n),r}function $_(){Ql(),++Nn;for(var e=Ia,t;e;)(t=tn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Nn}function rd(){tn=(Na=br.now())+Qa,Nn=Un=0;try{$_()}finally{Nn=0,z_(),tn=0}}function H_(){var e=br.now(),t=e-Na;t>Sh&&(Qa-=t,Na=e)}function z_(){for(var e,t=Ia,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ia=n);Yn=e,rl(r)}function rl(e){if(!Nn){Un&&(Un=clearTimeout(Un));var t=e-tn;t>24?(e<1/0&&(Un=setTimeout(rd,e-br.now()-Qa)),Vn&&(Vn=clearInterval(Vn))):(Vn||(Na=br.now(),Vn=setInterval(H_,Sh)),Nn=1,wh(rd))}}function od(e,t,n){var r=new Ra;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var U_=Ka("start","end","cancel","interrupt"),Y_=[],_h=0,ad=1,ol=2,fo=3,id=4,al=5,po=6;function Za(e,t,n,r,o,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;j_(e,n,{name:t,index:r,group:o,on:U_,tween:Y_,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:_h})}function Zl(e,t){var n=tt(e,t);if(n.state>_h)throw new Error("too late; already scheduled");return n}function dt(e,t){var n=tt(e,t);if(n.state>fo)throw new Error("too late; already running");return n}function tt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function j_(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=Ch(a,0,n.time);function a(d){n.state=ad,n.timer.restart(i,n.delay,n.time),n.delay<=d&&i(d-n.delay)}function i(d){var c,f,p,g;if(n.state!==ad)return l();for(c in r)if(g=r[c],g.name===n.name){if(g.state===fo)return od(i);g.state===id?(g.state=po,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[c]):+c<t&&(g.state=po,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[c])}if(od(function(){n.state===fo&&(n.state=id,n.timer.restart(s,n.delay,n.time),s(d))}),n.state=ol,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ol){for(n.state=fo,o=new Array(p=n.tween.length),c=0,f=-1;c<p;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++f]=g);o.length=f+1}}function s(d){for(var c=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(l),n.state=al,1),f=-1,p=o.length;++f<p;)o[f].call(e,c);n.state===al&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=po,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function ho(e,t){var n=e.__transition,r,o,a=!0,i;if(!!n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){a=!1;continue}o=r.state>ol&&r.state<al,r.state=po,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}a&&delete e.__transition}}function W_(e){return this.each(function(){ho(this,e)})}function G_(e,t){var n,r;return function(){var o=dt(this,e),a=o.tween;if(a!==n){r=n=a;for(var i=0,s=r.length;i<s;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function K_(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var a=dt(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var s={name:t,value:n},l=0,d=o.length;l<d;++l)if(o[l].name===t){o[l]=s;break}l===d&&o.push(s)}a.tween=o}}function X_(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=tt(this.node(),n).tween,o=0,a=r.length,i;o<a;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?G_:K_)(n,e,t))}function Jl(e,t,n){var r=e._id;return e.each(function(){var o=dt(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return tt(o,r).value[t]}}function Eh(e,t){var n;return(typeof t=="number"?At:t instanceof vr?ed:(n=vr(t))?(t=n,ed):A_)(e,t)}function Q_(e){return function(){this.removeAttribute(e)}}function Z_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function J_(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttribute(e);return i===o?null:i===r?a:a=t(r=i,n)}}function eE(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?a:a=t(r=i,n)}}function tE(e,t,n){var r,o,a;return function(){var i,s=n(this),l;return s==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=s+"",i===l?null:i===r&&l===o?a:(o=l,a=t(r=i,s)))}}function nE(e,t,n){var r,o,a;return function(){var i,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=s+"",i===l?null:i===r&&l===o?a:(o=l,a=t(r=i,s)))}}function rE(e,t){var n=Xa(e),r=n==="transform"?P_:Eh;return this.attrTween(e,typeof t=="function"?(n.local?nE:tE)(n,r,Jl(this,"attr."+e,t)):t==null?(n.local?Z_:Q_)(n):(n.local?eE:J_)(n,r,t))}function oE(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function aE(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function iE(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&aE(e,a)),n}return o._value=t,o}function sE(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&oE(e,a)),n}return o._value=t,o}function lE(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Xa(e);return this.tween(n,(r.local?iE:sE)(r,t))}function cE(e,t){return function(){Zl(this,e).delay=+t.apply(this,arguments)}}function dE(e,t){return t=+t,function(){Zl(this,e).delay=t}}function uE(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?cE:dE)(t,e)):tt(this.node(),t).delay}function fE(e,t){return function(){dt(this,e).duration=+t.apply(this,arguments)}}function pE(e,t){return t=+t,function(){dt(this,e).duration=t}}function hE(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fE:pE)(t,e)):tt(this.node(),t).duration}function mE(e,t){if(typeof t!="function")throw new Error;return function(){dt(this,e).ease=t}}function gE(e){var t=this._id;return arguments.length?this.each(mE(t,e)):tt(this.node(),t).ease}function yE(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;dt(this,e).ease=n}}function vE(e){if(typeof e!="function")throw new Error;return this.each(yE(this._id,e))}function bE(e){typeof e!="function"&&(e=nh(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],l,d=0;d<i;++d)(l=a[d])&&e.call(l,l.__data__,d,a)&&s.push(l);return new Et(r,this._parents,this._name,this._id)}function SE(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),s=0;s<a;++s)for(var l=t[s],d=n[s],c=l.length,f=i[s]=new Array(c),p,g=0;g<c;++g)(p=l[g]||d[g])&&(f[g]=p);for(;s<r;++s)i[s]=t[s];return new Et(i,this._parents,this._name,this._id)}function wE(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function CE(e,t,n){var r,o,a=wE(t)?Zl:dt;return function(){var i=a(this,e),s=i.on;s!==r&&(o=(r=s).copy()).on(t,n),i.on=o}}function _E(e,t){var n=this._id;return arguments.length<2?tt(this.node(),n).on.on(e):this.each(CE(n,e,t))}function EE(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function xE(){return this.on("end.remove",EE(this._id))}function TE(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Gl(e));for(var r=this._groups,o=r.length,a=new Array(o),i=0;i<o;++i)for(var s=r[i],l=s.length,d=a[i]=new Array(l),c,f,p=0;p<l;++p)(c=s[p])&&(f=e.call(c,c.__data__,p,s))&&("__data__"in c&&(f.__data__=c.__data__),d[p]=f,Za(d[p],t,n,p,d,tt(c,n)));return new Et(a,this._parents,t,n)}function OE(e){var t=this._name,n=this._id;typeof e!="function"&&(e=th(e));for(var r=this._groups,o=r.length,a=[],i=[],s=0;s<o;++s)for(var l=r[s],d=l.length,c,f=0;f<d;++f)if(c=l[f]){for(var p=e.call(c,c.__data__,f,l),g,h=tt(c,n),m=0,v=p.length;m<v;++m)(g=p[m])&&Za(g,t,n,m,p,h);a.push(p),i.push(c)}return new Et(a,i,t,n)}var IE=Ir.prototype.constructor;function NE(){return new IE(this._groups,this._parents)}function RE(e,t){var n,r,o;return function(){var a=In(this,e),i=(this.style.removeProperty(e),In(this,e));return a===i?null:a===n&&i===r?o:o=t(n=a,r=i)}}function xh(e){return function(){this.style.removeProperty(e)}}function AE(e,t,n){var r,o=n+"",a;return function(){var i=In(this,e);return i===o?null:i===r?a:a=t(r=i,n)}}function kE(e,t,n){var r,o,a;return function(){var i=In(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),In(this,e))),i===l?null:i===r&&l===o?a:(o=l,a=t(r=i,s))}}function LE(e,t){var n,r,o,a="style."+t,i="end."+a,s;return function(){var l=dt(this,e),d=l.on,c=l.value[a]==null?s||(s=xh(t)):void 0;(d!==n||o!==c)&&(r=(n=d).copy()).on(i,o=c),l.on=r}}function qE(e,t,n){var r=(e+="")=="transform"?q_:Eh;return t==null?this.styleTween(e,RE(e,r)).on("end.style."+e,xh(e)):typeof t=="function"?this.styleTween(e,kE(e,r,Jl(this,"style."+e,t))).each(LE(this._id,e)):this.styleTween(e,AE(e,r,t),n).on("end.style."+e,null)}function PE(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function DE(e,t,n){var r,o;function a(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&PE(e,i,n)),r}return a._value=t,a}function ME(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,DE(e,t,n==null?"":n))}function VE(e){return function(){this.textContent=e}}function BE(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function FE(e){return this.tween("text",typeof e=="function"?BE(Jl(this,"text",e)):VE(e==null?"":e+""))}function $E(e){return function(t){this.textContent=e.call(this,t)}}function HE(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&$E(o)),t}return r._value=e,r}function zE(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,HE(e))}function UE(){for(var e=this._name,t=this._id,n=Th(),r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,l,d=0;d<s;++d)if(l=i[d]){var c=tt(l,t);Za(l,e,n,d,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Et(r,this._parents,e,n)}function YE(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(a,i){var s={value:i},l={value:function(){--o===0&&a()}};n.each(function(){var d=dt(this,r),c=d.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),d.on=t}),o===0&&a()})}var jE=0;function Et(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Th(){return++jE}var pt=Ir.prototype;Et.prototype={constructor:Et,select:TE,selectAll:OE,selectChild:pt.selectChild,selectChildren:pt.selectChildren,filter:bE,merge:SE,selection:NE,transition:UE,call:pt.call,nodes:pt.nodes,node:pt.node,size:pt.size,empty:pt.empty,each:pt.each,on:_E,attr:rE,attrTween:lE,style:qE,styleTween:ME,text:FE,textTween:zE,remove:xE,tween:X_,delay:uE,duration:hE,ease:gE,easeVarying:vE,end:YE,[Symbol.iterator]:pt[Symbol.iterator]};function WE(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var GE={time:null,delay:0,duration:250,ease:WE};function KE(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function XE(e){var t,n;e instanceof Et?(t=e._id,e=e._name):(t=Th(),(n=GE).time=Ql(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,l,d=0;d<s;++d)(l=i[d])&&Za(l,e,t,d,i,n||KE(l,t));return new Et(r,this._parents,e,t)}Ir.prototype.interrupt=W_;Ir.prototype.transition=XE;const zr=e=>()=>e;function QE(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function yt(e,t,n){this.k=e,this.x=t,this.y=n}yt.prototype={constructor:yt,scale:function(e){return e===1?this:new yt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new yt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Wt=new yt(1,0,0);yt.prototype;function pi(e){e.stopImmediatePropagation()}function Bn(e){e.preventDefault(),e.stopImmediatePropagation()}function ZE(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function JE(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function sd(){return this.__zoom||Wt}function e0(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function t0(){return navigator.maxTouchPoints||"ontouchstart"in this}function n0(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function r0(){var e=ZE,t=JE,n=n0,r=e0,o=t0,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,l=B_,d=Ka("start","zoom","end"),c,f,p,g=500,h=150,m=0,v=10;function b(T){T.property("__zoom",sd).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",A).filter(o).on("touchstart.zoom",k).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(T,q,R,D){var $=T.selection?T.selection():T;$.property("__zoom",sd),T!==$?w(T,q,R,D):$.interrupt().each(function(){_(this,arguments).event(D).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},b.scaleBy=function(T,q,R,D){b.scaleTo(T,function(){var $=this.__zoom.k,z=typeof q=="function"?q.apply(this,arguments):q;return $*z},R,D)},b.scaleTo=function(T,q,R,D){b.transform(T,function(){var $=t.apply(this,arguments),z=this.__zoom,V=R==null?y($):typeof R=="function"?R.apply(this,arguments):R,U=z.invert(V),G=typeof q=="function"?q.apply(this,arguments):q;return n(S(C(z,G),V,U),$,i)},R,D)},b.translateBy=function(T,q,R,D){b.transform(T,function(){return n(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof R=="function"?R.apply(this,arguments):R),t.apply(this,arguments),i)},null,D)},b.translateTo=function(T,q,R,D,$){b.transform(T,function(){var z=t.apply(this,arguments),V=this.__zoom,U=D==null?y(z):typeof D=="function"?D.apply(this,arguments):D;return n(Wt.translate(U[0],U[1]).scale(V.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof R=="function"?-R.apply(this,arguments):-R),z,i)},D,$)};function C(T,q){return q=Math.max(a[0],Math.min(a[1],q)),q===T.k?T:new yt(q,T.x,T.y)}function S(T,q,R){var D=q[0]-R[0]*T.k,$=q[1]-R[1]*T.k;return D===T.x&&$===T.y?T:new yt(T.k,D,$)}function y(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function w(T,q,R,D){T.on("start.zoom",function(){_(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(D).end()}).tween("zoom",function(){var $=this,z=arguments,V=_($,z).event(D),U=t.apply($,z),G=R==null?y(U):typeof R=="function"?R.apply($,z):R,P=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),L=$.__zoom,F=typeof q=="function"?q.apply($,z):q,Y=l(L.invert(G).concat(P/L.k),F.invert(G).concat(P/F.k));return function(K){if(K===1)K=F;else{var Q=Y(K),X=P/Q[2];K=new yt(X,G[0]-Q[0]*X,G[1]-Q[1]*X)}V.zoom(null,K)}})}function _(T,q,R){return!R&&T.__zooming||new x(T,q)}function x(T,q){this.that=T,this.args=q,this.active=0,this.sourceEvent=null,this.extent=t.apply(T,q),this.taps=0}x.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,q){return this.mouse&&T!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var q=Je(this.that).datum();d.call(T,this.that,new QE(T,{sourceEvent:this.sourceEvent,target:b,type:T,transform:this.that.__zoom,dispatch:d}),q)}};function I(T,...q){if(!e.apply(this,arguments))return;var R=_(this,q).event(T),D=this.__zoom,$=Math.max(a[0],Math.min(a[1],D.k*Math.pow(2,r.apply(this,arguments)))),z=it(T);if(R.wheel)(R.mouse[0][0]!==z[0]||R.mouse[0][1]!==z[1])&&(R.mouse[1]=D.invert(R.mouse[0]=z)),clearTimeout(R.wheel);else{if(D.k===$)return;R.mouse=[z,D.invert(z)],ho(this),R.start()}Bn(T),R.wheel=setTimeout(V,h),R.zoom("mouse",n(S(C(D,$),R.mouse[0],R.mouse[1]),R.extent,i));function V(){R.wheel=null,R.end()}}function O(T,...q){if(p||!e.apply(this,arguments))return;var R=T.currentTarget,D=_(this,q,!0).event(T),$=Je(T.view).on("mousemove.zoom",G,!0).on("mouseup.zoom",P,!0),z=it(T,R),V=T.clientX,U=T.clientY;fh(T.view),pi(T),D.mouse=[z,this.__zoom.invert(z)],ho(this),D.start();function G(L){if(Bn(L),!D.moved){var F=L.clientX-V,Y=L.clientY-U;D.moved=F*F+Y*Y>m}D.event(L).zoom("mouse",n(S(D.that.__zoom,D.mouse[0]=it(L,R),D.mouse[1]),D.extent,i))}function P(L){$.on("mousemove.zoom mouseup.zoom",null),ph(L.view,D.moved),Bn(L),D.event(L).end()}}function A(T,...q){if(!!e.apply(this,arguments)){var R=this.__zoom,D=it(T.changedTouches?T.changedTouches[0]:T,this),$=R.invert(D),z=R.k*(T.shiftKey?.5:2),V=n(S(C(R,z),D,$),t.apply(this,q),i);Bn(T),s>0?Je(this).transition().duration(s).call(w,V,D,T):Je(this).call(b.transform,V,D,T)}}function k(T,...q){if(!!e.apply(this,arguments)){var R=T.touches,D=R.length,$=_(this,q,T.changedTouches.length===D).event(T),z,V,U,G;for(pi(T),V=0;V<D;++V)U=R[V],G=it(U,this),G=[G,this.__zoom.invert(G),U.identifier],$.touch0?!$.touch1&&$.touch0[2]!==G[2]&&($.touch1=G,$.taps=0):($.touch0=G,z=!0,$.taps=1+!!c);c&&(c=clearTimeout(c)),z&&($.taps<2&&(f=G[0],c=setTimeout(function(){c=null},g)),ho(this),$.start())}}function M(T,...q){if(!!this.__zooming){var R=_(this,q).event(T),D=T.changedTouches,$=D.length,z,V,U,G;for(Bn(T),z=0;z<$;++z)V=D[z],U=it(V,this),R.touch0&&R.touch0[2]===V.identifier?R.touch0[0]=U:R.touch1&&R.touch1[2]===V.identifier&&(R.touch1[0]=U);if(V=R.that.__zoom,R.touch1){var P=R.touch0[0],L=R.touch0[1],F=R.touch1[0],Y=R.touch1[1],K=(K=F[0]-P[0])*K+(K=F[1]-P[1])*K,Q=(Q=Y[0]-L[0])*Q+(Q=Y[1]-L[1])*Q;V=C(V,Math.sqrt(K/Q)),U=[(P[0]+F[0])/2,(P[1]+F[1])/2],G=[(L[0]+Y[0])/2,(L[1]+Y[1])/2]}else if(R.touch0)U=R.touch0[0],G=R.touch0[1];else return;R.zoom("touch",n(S(V,U,G),R.extent,i))}}function B(T,...q){if(!!this.__zooming){var R=_(this,q).event(T),D=T.changedTouches,$=D.length,z,V;for(pi(T),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),z=0;z<$;++z)V=D[z],R.touch0&&R.touch0[2]===V.identifier?delete R.touch0:R.touch1&&R.touch1[2]===V.identifier&&delete R.touch1;if(R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1),R.touch0)R.touch0[1]=this.__zoom.invert(R.touch0[0]);else if(R.end(),R.taps===2&&(V=it(V,this),Math.hypot(f[0]-V[0],f[1]-V[1])<v)){var U=Je(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return b.wheelDelta=function(T){return arguments.length?(r=typeof T=="function"?T:zr(+T),b):r},b.filter=function(T){return arguments.length?(e=typeof T=="function"?T:zr(!!T),b):e},b.touchable=function(T){return arguments.length?(o=typeof T=="function"?T:zr(!!T),b):o},b.extent=function(T){return arguments.length?(t=typeof T=="function"?T:zr([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),b):t},b.scaleExtent=function(T){return arguments.length?(a[0]=+T[0],a[1]=+T[1],b):[a[0],a[1]]},b.translateExtent=function(T){return arguments.length?(i[0][0]=+T[0][0],i[1][0]=+T[1][0],i[0][1]=+T[0][1],i[1][1]=+T[1][1],b):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},b.constrain=function(T){return arguments.length?(n=T,b):n},b.duration=function(T){return arguments.length?(s=+T,b):s},b.interpolate=function(T){return arguments.length?(l=T,b):l},b.on=function(){var T=d.on.apply(d,arguments);return T===d?b:T},b.clickDistance=function(T){return arguments.length?(m=(T=+T)*T,b):Math.sqrt(m)},b.tapDistance=function(T){return arguments.length?(v=+T,b):v},b}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function il(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oh(e,t){if(!!e){if(typeof e=="string")return il(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return il(e,t)}}function o0(e){if(Array.isArray(e))return e}function a0(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,a=!1,i,s;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));o=!0);}catch(l){a=!0,s=l}finally{try{!o&&n.return!=null&&n.return()}finally{if(a)throw s}}return r}}function i0(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function se(e,t){return o0(e)||a0(e,t)||Oh(e,t)||i0()}var Rn;(function(e){e.Strict="strict",e.Loose="loose"})(Rn||(Rn={}));var ld;(function(e){e.Lines="lines",e.Dots="dots"})(ld||(ld={}));var Sn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Sn||(Sn={}));var gt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(gt||(gt={}));var Sr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Sr||(Sr={}));var W;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(W||(W={}));var ec=function(t){return{width:t.offsetWidth,height:t.offsetHeight}},wn=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(t,n),r)},Ih=function(t,n){return{x:wn(t.x,n[0][0],n[1][0]),y:wn(t.y,n[0][1],n[1][1])}},Nh=function(t){var n,r;return((n=t.getRootNode)===null||n===void 0?void 0:n.call(t))||((r=window)===null||r===void 0?void 0:r.document)},s0=function(t,n){return{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x2,n.x2),y2:Math.max(t.y2,n.y2)}},Aa=function(t){var n=t.x,r=t.y,o=t.width,a=t.height;return{x:n,y:r,x2:n+o,y2:r+a}},l0=function(t){var n=t.x,r=t.y,o=t.x2,a=t.y2;return{x:n,y:r,width:o-n,height:a-r}},Rh=function(t){return!isNaN(t)&&isFinite(t)},Te=Symbol("internals");function cd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dd(e,t){var n=e.find(function(d){return d.id===t.parentNode});if(n){var r=t.position.x+t.width-n.width,o=t.position.y+t.height-n.height;if(r>0||o>0||t.position.x<0||t.position.y<0){var a,i;if(n.style=jn({},n.style)||{},n.style.width=(a=n.style.width)!==null&&a!==void 0?a:n.width,n.style.height=(i=n.style.height)!==null&&i!==void 0?i:n.height,r>0&&(n.style.width+=r),o>0&&(n.style.height+=o),t.position.x<0){var s=Math.abs(t.position.x);n.position.x=n.position.x-s,n.style.width+=s,t.position.x=0}if(t.position.y<0){var l=Math.abs(t.position.y);n.position.y=n.position.y-l,n.style.height+=l,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Ah(e,t){if(e.some(function(r){return r.type==="reset"}))return e.filter(function(r){return r.type==="reset"}).map(function(r){return r.item});var n=e.filter(function(r){return r.type==="add"}).map(function(r){return r.item});return t.reduce(function(r,o){var a=e.find(function(l){return l.id===o.id});if(a)switch(a.type){case"select":return r.push(jn(jn({},o),{},{selected:a.selected})),r;case"position":{var i=jn({},o);return typeof a.position<"u"&&(i.position=a.position),typeof a.positionAbsolute<"u"&&(i.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(i.dragging=a.dragging),i.expandParent&&dd(r,i),r.push(i),r}case"dimensions":{var s=jn({},o);return typeof a.dimensions<"u"&&(s.width=a.dimensions.width,s.height=a.dimensions.height),s.expandParent&&dd(r,s),r.push(s),r}case"remove":return r}return r.push(o),r},n)}function kh(e,t){return Ah(e,t)}function c0(e,t){return Ah(e,t)}var kt=function(t,n){return{id:t,type:"select",selected:n}};function gn(e,t){return e.reduce(function(n,r){var o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(kt(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(kt(r.id,!1))),n},[])}function ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Lh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ud(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ud(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var fd=function(t,n,r){var o=n.querySelectorAll(t);if(!o||!o.length)return null;var a=Array.from(o),i=n.getBoundingClientRect();return a.map(function(s){var l=s.getBoundingClientRect();return Lh({id:s.getAttribute("data-handleid"),position:s.getAttribute("data-handlepos"),x:(l.left-i.left)/r,y:(l.top-i.top)/r},ec(s))})};function Fn(e,t,n){return n===void 0?n:function(r){var o=t().nodeInternals.get(e);n(r,Lh({},o))}}function qh(e){var t=e.id,n=e.store,r=n.getState(),o=r.addSelectedNodes,a=r.unselectNodesAndEdges,i=r.multiSelectionActive,s=r.nodeInternals,l=s.get(t);n.setState({nodesSelectionActive:!1}),l.selected?l.selected&&i&&a({nodes:[l]}):o([t])}function pd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var d0=function(t){return"id"in t&&"source"in t&&"target"in t},u0=function(t){var n=t.source,r=t.sourceHandle,o=t.target,a=t.targetHandle;return"reactflow__edge-".concat(n).concat(r||"","-").concat(o).concat(a||"")},sl=function(t,n){if(typeof t>"u")return"";if(typeof t=="string")return t;var r=n?"".concat(n,"__"):"";return"".concat(r).concat(Object.keys(t).sort().map(function(o){return"".concat(o,"=").concat(t[o])}).join("&"))},f0=function(t,n){return n.some(function(r){return r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)})},p0=function(t,n){if(!t.source||!t.target)return n;var r;return d0(t)?r=Zn({},t):r=Zn(Zn({},t),{},{id:u0(t)}),f0(r,n)?n:n.concat(r)},Ph=function(t,n,r,o){var a=t.x,i=t.y,s=se(n,3),l=s[0],d=s[1],c=s[2],f=se(o,2),p=f[0],g=f[1],h={x:(a-l)/c,y:(i-d)/c};return r?{x:p*Math.round(h.x/p),y:g*Math.round(h.y/g)}:h},tc=function(t){if(t.length===0)return{x:0,y:0,width:0,height:0};var n=t.reduce(function(r,o){var a=o.positionAbsolute,i=o.position,s=o.width,l=o.height;return s0(r,Aa({x:a?a.x:i.x,y:a?a.y:i.y,width:s||0,height:l||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return l0(n)},Dh=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,1],o=se(r,3),a=o[0],i=o[1],s=o[2],l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,c=Aa({x:(n.x-a)/s,y:(n.y-i)/s,width:n.width/s,height:n.height/s}),f=[];return t.forEach(function(p){var g=p.positionAbsolute,h=p.width,m=p.height,v=p.selectable,b=v===void 0?!0:v;if(d&&!b)return!1;var C=Aa(Zn(Zn({},g),{},{width:h||0,height:m||0})),S=Math.max(0,Math.min(c.x2,C.x2)-Math.max(c.x,C.x)),y=Math.max(0,Math.min(c.y2,C.y2)-Math.max(c.y,C.y)),w=Math.ceil(S*y),_=typeof h>"u"||typeof m>"u"||h===null||m===null,x=l&&w>0,I=(h||0)*(m||0),O=_||x||w>=I;O&&f.push(p)}),f},nc=function(t,n){var r=t.map(function(o){return o.id});return n.filter(function(o){return r.includes(o.source)||r.includes(o.target)})},Mh=function(t,n,r,o,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:.1,s=n/(t.width*(1+i)),l=r/(t.height*(1+i)),d=Math.min(s,l),c=wn(d,o,a),f=t.x+t.width/2,p=t.y+t.height/2,g=n/2-f*c,h=r/2-p*c;return[g,h,c]},Ht=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.transition().duration(n)};function hd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vh(e,t,n,r){var o,a,i,s,l,d,c,f,p,g,h,m;if(!e.parentNode)return r;var v=t.get(e.parentNode);return Vh(v,t,n,{x:((o=r.x)!==null&&o!==void 0?o:0)+((a=(i=v.position)===null||i===void 0?void 0:i.x)!==null&&a!==void 0?a:0),y:((s=r.y)!==null&&s!==void 0?s:0)+((l=(d=v.position)===null||d===void 0?void 0:d.y)!==null&&l!==void 0?l:0),z:((c=(f=v[Te])===null||f===void 0?void 0:f.z)!==null&&c!==void 0?c:0)>((p=r.z)!==null&&p!==void 0?p:0)?(g=(h=v[Te])===null||h===void 0?void 0:h.z)!==null&&g!==void 0?g:0:(m=r.z)!==null&&m!==void 0?m:0})}function hi(e,t){var n=new Map,r={};return e.forEach(function(o){var a,i=Rh(o.zIndex)?o.zIndex:o.selected?1e3:0,s=t.get(o.id),l=yn(yn({width:s==null?void 0:s.width,height:s==null?void 0:s.height},o),{},{positionAbsolute:{x:o.position.x,y:o.position.y}});o.parentNode&&(l.parentNode=o.parentNode,r[o.parentNode]=!0),Object.defineProperty(l,Te,{enumerable:!1,value:{handleBounds:s==null||(a=s[Te])===null||a===void 0?void 0:a.handleBounds,z:i}}),n.set(o.id,l)}),n.forEach(function(o){if(o.parentNode&&!n.has(o.parentNode))throw new Error("Parent node ".concat(o.parentNode," not found"));if(o.parentNode||r[o.id]){var a,i,s=Vh(o,n,r,yn(yn({},o.position),{},{z:(a=(i=o[Te])===null||i===void 0?void 0:i.z)!==null&&a!==void 0?a:0})),l=s.x,d=s.y,c=s.z;o.positionAbsolute={x:l,y:d},o[Te].z=c,r[o.id]&&(o[Te].isParent=!0)}}),n}function Bh(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e(),r=n.nodeInternals,o=n.width,a=n.height,i=n.minZoom,s=n.maxZoom,l=n.d3Zoom,d=n.d3Selection,c=n.fitViewOnInitDone,f=n.fitViewOnInit;if((t.initial&&!c&&f||!t.initial)&&l&&d){var p=Array.from(r.values()).filter(function(I){return t.includeHiddenNodes?I.width&&I.height:!I.hidden}),g=p.every(function(I){return I.width&&I.height});if(p.length>0&&g){var h,m,v,b=tc(p),C=Mh(b,o,a,(h=t.minZoom)!==null&&h!==void 0?h:i,(m=t.maxZoom)!==null&&m!==void 0?m:s,(v=t.padding)!==null&&v!==void 0?v:.1),S=se(C,3),y=S[0],w=S[1],_=S[2],x=Wt.translate(y,w).scale(_);return typeof t.duration=="number"&&t.duration>0?l.transform(Ht(d,t.duration),x):l.transform(d,x),!0}}return!1}function h0(e,t){return e.forEach(function(n){var r=t.get(n.id);if(r){var o;t.set(r.id,yn(yn({},r),{},(o={},ue(o,Te,r[Te]),ue(o,"selected",n.selected),o)))}}),new Map(t)}function m0(e,t){return t.map(function(n){var r=e.find(function(o){return o.id===n.id});return r&&(n.selected=r.selected),n})}function Ur(e){var t=e.changedNodes,n=e.changedEdges,r=e.get,o=e.set,a=r(),i=a.nodeInternals,s=a.edges,l=a.onNodesChange,d=a.onEdgesChange,c=a.hasDefaultNodes,f=a.hasDefaultEdges;t!=null&&t.length&&(c&&o({nodeInternals:h0(t,i)}),l==null||l(t)),n!=null&&n.length&&(f&&o({edges:m0(n,s)}),d==null||d(n))}var md=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],gd={width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:md,nodeExtent:md,nodesSelectionActive:!1,userSelectionActive:!1,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:Rn.Strict,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,reactFlowVersion:"10.3.11",connectionStartHandle:null,connectOnClick:!0};function yd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var rc=xw(),Fh=rc.Provider,xe=rc.useStore,ke=rc.useStoreApi,$h=function(){return Ew(function(t,n){return ot(ot({},gd),{},{setNodes:function(o){t({nodeInternals:hi(o,n().nodeInternals)})},setEdges:function(o){var a=n(),i=a.defaultEdgeOptions,s=i===void 0?{}:i;t({edges:o.map(function(l){return ot(ot({},s),l)})})},setDefaultNodesAndEdges:function(o,a){var i=typeof o<"u",s=typeof a<"u",l=i?hi(o,new Map):new Map,d=s?a:[];t({nodeInternals:l,edges:d,hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:function(o){var a=n(),i=a.onNodesChange,s=a.nodeInternals,l=a.fitViewOnInit,d=a.fitViewOnInitDone,c=a.fitViewOnInitOptions,f=window.getComputedStyle(document.querySelector(".react-flow__viewport")),p=new window.DOMMatrixReadOnly(f.transform),g=p.m22,h=o.reduce(function(v,b){var C=s.get(b.id);if(C){var S=ec(b.nodeElement),y=!!(S.width&&S.height&&(C.width!==S.width||C.height!==S.height||b.forceUpdate));y&&(s.set(C.id,ot(ot({},C),{},ue({},Te,ot(ot({},C[Te]),{},{handleBounds:{source:fd(".source",b.nodeElement,g),target:fd(".target",b.nodeElement,g)}})),S)),v.push({id:C.id,type:"dimensions",dimensions:S}))}return v},[]),m=d||l&&!d&&Bh(n,ot({initial:!0},c));t({nodeInternals:new Map(s),fitViewOnInitDone:m}),(h==null?void 0:h.length)>0&&(i==null||i(h))},updateNodePositions:function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=n(),l=s.onNodesChange,d=s.nodeInternals,c=s.hasDefaultNodes;if(c||l){var f=o.map(function(h){var m={id:h.id,type:"position",dragging:i};return a&&(m.positionAbsolute=h.positionAbsolute,m.position=h.position),m});if(f!=null&&f.length){if(c){var p=kh(f,Array.from(d.values())),g=hi(p,d);t({nodeInternals:g})}l==null||l(f)}}},addSelectedNodes:function(o){var a=n(),i=a.multiSelectionActive,s=a.nodeInternals,l=a.edges,d,c=null;i?d=o.map(function(f){return kt(f,!0)}):(d=gn(Array.from(s.values()),o),c=gn(l,[])),Ur({changedNodes:d,changedEdges:c,get:n,set:t})},addSelectedEdges:function(o){var a=n(),i=a.multiSelectionActive,s=a.edges,l=a.nodeInternals,d,c=null;i?d=o.map(function(f){return kt(f,!0)}):(d=gn(s,o),c=gn(Array.from(l.values()),[])),Ur({changedNodes:c,changedEdges:d,get:n,set:t})},unselectNodesAndEdges:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=o.nodes,i=o.edges,s=n(),l=s.nodeInternals,d=s.edges,c=a||Array.from(l.values()),f=i||d,p=c.map(function(h){return h.selected=!1,kt(h.id,!1)}),g=f.map(function(h){return kt(h.id,!1)});Ur({changedNodes:p,changedEdges:g,get:n,set:t})},setMinZoom:function(o){var a=n(),i=a.d3Zoom,s=a.maxZoom;i==null||i.scaleExtent([o,s]),t({minZoom:o})},setMaxZoom:function(o){var a=n(),i=a.d3Zoom,s=a.minZoom;i==null||i.scaleExtent([s,o]),t({maxZoom:o})},setTranslateExtent:function(o){var a=n(),i=a.d3Zoom;i==null||i.translateExtent(o),t({translateExtent:o})},resetSelectedElements:function(){var o=n(),a=o.nodeInternals,i=o.edges,s=Array.from(a.values()),l=s.filter(function(c){return c.selected}).map(function(c){return kt(c.id,!1)}),d=i.filter(function(c){return c.selected}).map(function(c){return kt(c.id,!1)});Ur({changedNodes:l,changedEdges:d,get:n,set:t})},setNodeExtent:function(o){var a=n(),i=a.nodeInternals;i.forEach(function(s){s.positionAbsolute=Ih(s.position,o)}),t({nodeExtent:o,nodeInternals:new Map(i)})},reset:function(){return t(ot({},gd))}})})};function ze(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}function g0(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function Rr(e,t){if(e==null)return{};var n=g0(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(n[r]=e[r]))}return n}function y0(e){if(Array.isArray(e))return il(e)}function v0(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function b0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gt(e){return y0(e)||v0(e)||Oh(e)||b0()}var S0={zoomIn:function(){},zoomOut:function(){},zoomTo:function(t){},getZoom:function(){return 1},setViewport:function(t){},getViewport:function(){return{x:0,y:0,zoom:1}},fitView:function(){},setCenter:function(t,n){},fitBounds:function(t){},project:function(t){return t},initialized:!1},w0=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}},C0=function(){var t=ke(),n=xe(w0,ze),r=n.d3Zoom,o=n.d3Selection,a=E.exports.useMemo(function(){return o&&r?{zoomIn:function(s){return r.scaleBy(Ht(o,s==null?void 0:s.duration),1.2)},zoomOut:function(s){return r.scaleBy(Ht(o,s==null?void 0:s.duration),1/1.2)},zoomTo:function(s,l){return r.scaleTo(Ht(o,l==null?void 0:l.duration),s)},getZoom:function(){return t.getState().transform[2]},setViewport:function(s,l){var d,c,f,p=se(t.getState().transform,3),g=p[0],h=p[1],m=p[2],v=Wt.translate((d=s.x)!==null&&d!==void 0?d:g,(c=s.y)!==null&&c!==void 0?c:h).scale((f=s.zoom)!==null&&f!==void 0?f:m);r.transform(Ht(o,l==null?void 0:l.duration),v)},getViewport:function(){var s=se(t.getState().transform,3),l=s[0],d=s[1],c=s[2];return{x:l,y:d,zoom:c}},fitView:function(s){return Bh(t.getState,s)},setCenter:function(s,l,d){var c=t.getState(),f=c.width,p=c.height,g=c.maxZoom,h=typeof(d==null?void 0:d.zoom)<"u"?d.zoom:g,m=f/2-s*h,v=p/2-l*h,b=Wt.translate(m,v).scale(h);r.transform(Ht(o,d==null?void 0:d.duration),b)},fitBounds:function(s,l){var d,c=t.getState(),f=c.width,p=c.height,g=c.minZoom,h=c.maxZoom,m=Mh(s,f,p,g,h,(d=l==null?void 0:l.padding)!==null&&d!==void 0?d:.1),v=se(m,3),b=v[0],C=v[1],S=v[2],y=Wt.translate(b,C).scale(S);r.transform(Ht(o,l==null?void 0:l.duration),y)},project:function(s){var l=t.getState(),d=l.transform,c=l.snapToGrid,f=l.snapGrid;return Ph(s,d,c,f)},initialized:!0}:S0},[r,o]);return a},_0=["initialized"];function vd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oc(){var e=C0(),t=e.initialized,n=Rr(e,_0),r=ke(),o=E.exports.useCallback(function(){var g=r.getState(),h=g.nodeInternals,m=Array.from(h.values());return m.map(function(v){return dn({},v)})},[]),a=E.exports.useCallback(function(g){var h=r.getState(),m=h.nodeInternals;return m.get(g)},[]),i=E.exports.useCallback(function(){var g=r.getState(),h=g.edges,m=h===void 0?[]:h;return m.map(function(v){return dn({},v)})},[]),s=E.exports.useCallback(function(g){var h=r.getState(),m=h.edges,v=m===void 0?[]:m;return v.find(function(b){return b.id===g})},[]),l=E.exports.useCallback(function(g){var h=r.getState(),m=h.nodeInternals,v=h.setNodes,b=h.hasDefaultNodes,C=h.onNodesChange,S=Array.from(m.values()),y=typeof g=="function"?g(S):g;if(b)v(y);else if(C){var w=y.length===0?S.map(function(_){return{type:"remove",id:_.id}}):y.map(function(_){return{item:_,type:"reset"}});C(w)}},[]),d=E.exports.useCallback(function(g){var h=r.getState(),m=h.edges,v=m===void 0?[]:m,b=h.setEdges,C=h.hasDefaultEdges,S=h.onEdgesChange,y=typeof g=="function"?g(v):g;if(C)b(y);else if(S){var w=y.length===0?v.map(function(_){return{type:"remove",id:_.id}}):y.map(function(_){return{item:_,type:"reset"}});S(w)}},[]),c=E.exports.useCallback(function(g){var h=Array.isArray(g)?g:[g],m=r.getState(),v=m.nodeInternals,b=m.setNodes,C=m.hasDefaultNodes,S=m.onNodesChange;if(C){var y=Array.from(v.values()),w=[].concat(y,Gt(h));b(w)}else if(S){var _=h.map(function(x){return{item:x,type:"add"}});S(_)}},[]),f=E.exports.useCallback(function(g){var h=Array.isArray(g)?g:[g],m=r.getState(),v=m.edges,b=v===void 0?[]:v,C=m.setEdges,S=m.hasDefaultEdges,y=m.onEdgesChange;if(S)C([].concat(Gt(b),Gt(h)));else if(y){var w=h.map(function(_){return{item:_,type:"add"}});y(w)}},[]),p=E.exports.useCallback(function(){var g=r.getState(),h=g.nodeInternals,m=g.edges,v=m===void 0?[]:m,b=g.transform,C=Array.from(h.values()),S=se(b,3),y=S[0],w=S[1],_=S[2];return{nodes:C.map(function(x){return dn({},x)}),edges:v.map(function(x){return dn({},x)}),viewport:{x:y,y:w,zoom:_}}},[]);return dn(dn({},n),{},{viewportInitialized:t,getNodes:o,getNode:a,getEdges:i,getEdge:s,setNodes:l,setEdges:d,addNodes:c,addEdges:f,toObject:p})}function Xe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Xe(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}function E0(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:u("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function x0(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:u("path",{d:"M0 0h32v4.2H0z"})})}function T0(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:u("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function O0(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function I0(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}var N0=["children","className"];function bd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function R0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Yr=function(t){var n=t.children,r=t.className,o=Rr(t,N0);return u("button",{...R0({type:"button",className:Xe(["react-flow__controls-button",r])},o),children:n})},A0=function(t){return t.nodesDraggable&&t.nodesConnectable&&t.elementsSelectable},Hh=function(t){var n=t.style,r=t.showZoom,o=r===void 0?!0:r,a=t.showFitView,i=a===void 0?!0:a,s=t.showInteractive,l=s===void 0?!0:s,d=t.fitViewOptions,c=t.onZoomIn,f=t.onZoomOut,p=t.onFitView,g=t.onInteractiveChange,h=t.className,m=t.children,v=ke(),b=E.exports.useState(!1),C=se(b,2),S=C[0],y=C[1],w=xe(A0),_=oc(),x=_.zoomIn,I=_.zoomOut,O=_.fitView;if(E.exports.useEffect(function(){y(!0)},[]),!S)return null;var A=function(){x==null||x(),c==null||c()},k=function(){I==null||I(),f==null||f()},M=function(){O==null||O(d),p==null||p()},B=function(){v.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),g==null||g(!w)};return N("div",{className:Xe(["react-flow__controls",h]),style:n,children:[o&&N(H,{children:[u(Yr,{onClick:A,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",children:u(E0,{})}),u(Yr,{onClick:k,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",children:u(x0,{})})]}),i&&u(Yr,{className:"react-flow__controls-fitview",onClick:M,title:"fit view","aria-label":"fit view",children:u(T0,{})}),l&&u(Yr,{className:"react-flow__controls-interactive",onClick:B,title:"toggle interactivity","aria-label":"toggle interactivity",children:w?u(I0,{}):u(O0,{})}),m]})};Hh.displayName="Controls";var k0=E.exports.memo(Hh),L0=["paid-pro","paid-sponsor","paid-enterprise","paid-custom"];function q0(e){var t=e.proOptions,n=e.position,r=n===void 0?"bottom-right":n;if(t!=null&&t.account&&L0.includes(t==null?void 0:t.account)&&t!==null&&t!==void 0&&t.hideAttribution)return null;var o="".concat(r).split("-");return u("div",{className:Xe(["react-flow__attribution"].concat(Gt(o))),"data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev/pricing",children:u("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer",children:"React Flow"})})}var P0=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"];function Sd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function D0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var M0=function(t){var n=t.x,r=t.y,o=t.label,a=t.labelStyle,i=a===void 0?{}:a,s=t.labelShowBg,l=s===void 0?!0:s,d=t.labelBgStyle,c=d===void 0?{}:d,f=t.labelBgPadding,p=f===void 0?[2,4]:f,g=t.labelBgBorderRadius,h=g===void 0?2:g,m=t.children,v=t.className,b=Rr(t,P0),C=E.exports.useRef(null),S=E.exports.useState({x:0,y:0,width:0,height:0}),y=se(S,2),w=y[0],_=y[1],x=Xe(["react-flow__edge-textwrapper",v]);return E.exports.useEffect(function(){if(C.current){var I=C.current.getBBox();_({x:I.x,y:I.y,width:I.width,height:I.height})}},[o]),typeof o>"u"||!o?null:N("g",{...D0({transform:"translate(".concat(n-w.width/2," ").concat(r-w.height/2,")"),className:x},b),children:[l&&u("rect",{width:w.width+2*p[0],x:-p[0],y:-p[1],height:w.height+2*p[1],className:"react-flow__edge-textbg",style:c,rx:h,ry:h}),u("text",{className:"react-flow__edge-text",y:w.height/2,dy:"0.3em",ref:C,style:i,children:o}),m]})},V0=E.exports.memo(M0),Ja=function(e){var t=e.path,n=e.centerX,r=e.centerY,o=e.label,a=e.labelStyle,i=e.labelShowBg,s=e.labelBgStyle,l=e.labelBgPadding,d=e.labelBgBorderRadius,c=e.style,f=e.markerEnd,p=e.markerStart,g=o?u(V0,{x:n,y:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:d}):null;return N(H,{children:[u("path",{style:c,d:t,className:"react-flow__edge-path",markerEnd:f,markerStart:p}),g]})};function ka(e){var t=e.pos,n=e.x1,r=e.y1,o=e.x2,a=e.y2,i,s;switch(t){case W.Left:case W.Right:i=.5*(n+o),s=r;break;case W.Top:case W.Bottom:i=n,s=.5*(r+a);break}return[i,s]}function zh(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=ka({pos:o,x1:t,y1:n,x2:a,y2:i}),c=se(d,2),f=c[0],p=c[1],g=ka({pos:l,x1:a,y1:i,x2:t,y2:n}),h=se(g,2),m=h[0],v=h[1];return"M".concat(t,",").concat(n," C").concat(f,",").concat(p," ").concat(m,",").concat(v," ").concat(a,",").concat(i)}function B0(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=ka({pos:o,x1:t,y1:n,x2:a,y2:i}),c=se(d,2),f=c[0],p=c[1],g=ka({pos:l,x1:a,y1:i,x2:t,y2:n}),h=se(g,2),m=h[0],v=h[1],b=t*.125+f*.375+m*.375+a*.125,C=n*.125+p*.375+v*.375+i*.125,S=Math.abs(b-t),y=Math.abs(C-n);return[b,C,S,y]}var Uh=E.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.sourcePosition,i=a===void 0?W.Bottom:a,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.label,c=e.labelStyle,f=e.labelShowBg,p=e.labelBgStyle,g=e.labelBgPadding,h=e.labelBgBorderRadius,m=e.style,v=e.markerEnd,b=e.markerStart,C={sourceX:t,sourceY:n,sourcePosition:i,targetX:r,targetY:o,targetPosition:l},S=zh(C),y=B0(C),w=se(y,2),_=w[0],x=w[1];return u(Ja,{path:S,centerX:_,centerY:x,label:d,labelStyle:c,labelShowBg:f,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:h,style:m,markerEnd:v,markerStart:b})});function wd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function F0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Cd=[W.Left,W.Right],Yh=function(t){var n=t.sourceX,r=t.sourceY,o=t.targetX,a=t.targetY,i=t.sourcePosition,s=i===void 0?W.Bottom:i,l=t.targetPosition,d=l===void 0?W.Top:l,c=Cd.includes(s),f=Cd.includes(d),p=c&&!f||f&&!c;if(p){var g=c?Math.abs(o-n):0,h=n>o?n-g:n+g,m=c?0:Math.abs(a-r),v=r<a?r+m:r-m;return[h,v,g,m]}var b=Math.abs(o-n)/2,C=o<n?o+b:o-b,S=Math.abs(a-r)/2,y=a<r?a+S:a-S;return[C,y,b,S]};function $n(e,t,n){return n===void 0?n:function(r){var o=t().edges.find(function(a){return a.id===e});n(r,F0({},o))}}var mi=function(t,n,r){return"L ".concat(t,",").concat(n-r,"Q ").concat(t,",").concat(n," ").concat(t+r,",").concat(n)},gi=function(t,n,r){return"L ".concat(t+r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-r)},yi=function(t,n,r){return"L ".concat(t,",").concat(n-r,"Q ").concat(t,",").concat(n," ").concat(t-r,",").concat(n)},vi=function(t,n,r){return"L ".concat(t-r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-r)},bi=function(t,n,r){return"L ".concat(t+r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+r)},Si=function(t,n,r){return"L ".concat(t,",").concat(n+r,"Q ").concat(t,",").concat(n," ").concat(t+r,",").concat(n)},wi=function(t,n,r){return"L ".concat(t,",").concat(n+r,"Q ").concat(t,",").concat(n," ").concat(t-r,",").concat(n)},Ci=function(t,n,r){return"L ".concat(t-r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+r)};function ll(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.borderRadius,c=d===void 0?5:d,f=e.centerX,p=e.centerY,g=Yh({sourceX:t,sourceY:n,targetX:a,targetY:i}),h=se(g,4),m=h[0],v=h[1],b=h[2],C=h[3],S=Math.min(c,Math.abs(a-t)),y=Math.min(c,Math.abs(i-n)),w=Math.min(S,y,b,C),_=[W.Left,W.Right],x=typeof f<"u"?f:m,I=typeof p<"u"?p:v,O=null,A=null;return t<=a?(O=n<=i?mi(t,I,w):Si(t,I,w),A=n<=i?Ci(a,I,w):vi(a,I,w)):(O=n<i?yi(t,I,w):wi(t,I,w),A=n<i?bi(a,I,w):gi(a,I,w)),_.includes(o)&&_.includes(l)?t<=a?(O=n<=i?Ci(x,n,w):vi(x,n,w),A=n<=i?mi(x,i,w):Si(x,i,w)):(o===W.Right&&l===W.Left||o===W.Left&&l===W.Right||o===W.Left&&l===W.Left)&&(O=n<=i?bi(x,n,w):gi(x,n,w),A=n<=i?yi(x,i,w):wi(x,i,w)):_.includes(o)&&!_.includes(l)?(t<=a?O=n<=i?Ci(a,n,w):vi(a,n,w):O=n<=i?bi(a,n,w):gi(a,n,w),A=""):!_.includes(o)&&_.includes(l)&&(t<=a?O=n<=i?mi(t,i,w):Si(t,i,w):O=n<=i?yi(t,i,w):wi(t,i,w),A=""),"M ".concat(t,",").concat(n).concat(O).concat(A,"L ").concat(a,",").concat(i)}var ac=E.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.label,i=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,d=e.labelBgPadding,c=e.labelBgBorderRadius,f=e.style,p=e.sourcePosition,g=p===void 0?W.Bottom:p,h=e.targetPosition,m=h===void 0?W.Top:h,v=e.markerEnd,b=e.markerStart,C=e.borderRadius,S=C===void 0?5:C,y=Yh({sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:g,targetPosition:m}),w=se(y,2),_=w[0],x=w[1],I=ll({sourceX:t,sourceY:n,sourcePosition:g,targetX:r,targetY:o,targetPosition:m,borderRadius:S});return u(Ja,{path:I,centerX:_,centerY:x,label:a,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:c,style:f,markerEnd:v,markerStart:b})});function _d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ed(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_d(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_d(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var jh=E.exports.memo(function(e){return u(ac,{...Ed(Ed({},e),{},{borderRadius:0})})}),Wh=E.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.label,i=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,d=e.labelBgPadding,c=e.labelBgBorderRadius,f=e.style,p=e.markerEnd,g=e.markerStart,h=Math.abs(o-n)/2,m=o<n?o+h:o-h,v=Math.abs(r-t)/2,b=r<t?r+v:r-v,C="M ".concat(t,",").concat(n,"L ").concat(r,",").concat(o);return u(Ja,{path:C,centerX:b,centerY:m,label:a,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:c,style:f,markerEnd:p,markerStart:g})});function jr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function La(e){var t=e.pos,n=e.x1,r=e.y1,o=e.x2,a=e.y2,i=e.c,s,l;switch(t){case W.Left:s=n-jr(n-o,i),l=r;break;case W.Right:s=n+jr(o-n,i),l=r;break;case W.Top:s=n,l=r-jr(r-a,i);break;case W.Bottom:s=n,l=r+jr(a-r,i);break}return[s,l]}function Gh(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.curvature,c=d===void 0?.25:d,f=La({pos:o,x1:t,y1:n,x2:a,y2:i,c}),p=se(f,2),g=p[0],h=p[1],m=La({pos:l,x1:a,y1:i,x2:t,y2:n,c}),v=se(m,2),b=v[0],C=v[1];return"M".concat(t,",").concat(n," C").concat(g,",").concat(h," ").concat(b,",").concat(C," ").concat(a,",").concat(i)}function $0(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.curvature,c=d===void 0?.25:d,f=La({pos:o,x1:t,y1:n,x2:a,y2:i,c}),p=se(f,2),g=p[0],h=p[1],m=La({pos:l,x1:a,y1:i,x2:t,y2:n,c}),v=se(m,2),b=v[0],C=v[1],S=t*.125+g*.375+b*.375+a*.125,y=n*.125+h*.375+C*.375+i*.125,w=Math.abs(S-t),_=Math.abs(y-n);return[S,y,w,_]}var cl=E.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.sourcePosition,i=a===void 0?W.Bottom:a,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.label,c=e.labelStyle,f=e.labelShowBg,p=e.labelBgStyle,g=e.labelBgPadding,h=e.labelBgBorderRadius,m=e.style,v=e.markerEnd,b=e.markerStart,C=e.curvature,S={sourceX:t,sourceY:n,sourcePosition:i,targetX:r,targetY:o,targetPosition:l,curvature:C},y=Gh(S),w=$0(S),_=se(w,2),x=_[0],I=_[1];return u(Ja,{path:y,centerX:x,centerY:I,label:d,labelStyle:c,labelShowBg:f,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:h,style:m,markerEnd:v,markerStart:b})}),ic=E.exports.createContext(null),H0=ic.Provider;ic.Consumer;function dl(e,t,n,r,o,a,i){var s=i.elementFromPoint(e.clientX,e.clientY),l=(s==null?void 0:s.classList.contains("target"))||!1,d=(s==null?void 0:s.classList.contains("source"))||!1,c={elementBelow:s,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(s&&(l||d)){c.isHoveringHandle=!0;var f=s.getAttribute("data-nodeid"),p=s.getAttribute("data-handleid"),g=n?{source:f,sourceHandle:p,target:r,targetHandle:o}:{source:r,sourceHandle:o,target:f,targetHandle:p};c.connection=g;var h=t===Rn.Strict?n&&d||!n&&l:!0;h&&(c.isValid=a(g))}return c}function xd(e){e==null||e.classList.remove("react-flow__handle-valid"),e==null||e.classList.remove("react-flow__handle-connecting")}function Kh(e){var t=e.event,n=e.handleId,r=e.nodeId,o=e.onConnect,a=e.isTarget,i=e.getState,s=e.setState,l=e.isValidConnection,d=e.elementEdgeUpdaterType,c=e.onEdgeUpdateEnd,f=t.target.closest(".react-flow"),p=Nh(t.target);if(!p)return;var g=p.elementFromPoint(t.clientX,t.clientY),h=g==null?void 0:g.classList.contains("target"),m=g==null?void 0:g.classList.contains("source");if(!f||!h&&!m&&!d)return;var v=i(),b=v.onConnectStart,C=v.connectionMode,S=d||(h?"target":"source"),y=f.getBoundingClientRect(),w;s({connectionPosition:{x:t.clientX-y.left,y:t.clientY-y.top},connectionNodeId:r,connectionHandleId:n,connectionHandleType:S}),b==null||b(t,{nodeId:r,handleId:n,handleType:S});function _(I){s({connectionPosition:{x:I.clientX-y.left,y:I.clientY-y.top}});var O=dl(I,C,a,r,n,l,p),A=O.connection,k=O.elementBelow,M=O.isValid,B=O.isHoveringHandle;if(!B)return xd(w);A.source!==A.target&&k&&(w=k,k.classList.add("react-flow__handle-connecting"),k.classList.toggle("react-flow__handle-valid",M))}function x(I){var O=i(),A=O.onConnectStop,k=O.onConnectEnd,M=dl(I,C,a,r,n,l,p),B=M.connection,T=M.isValid;A==null||A(I),T&&(o==null||o(B)),k==null||k(I),d&&c&&c(I),xd(w),s({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),p.removeEventListener("mousemove",_),p.removeEventListener("mouseup",x)}p.addEventListener("mousemove",_),p.addEventListener("mouseup",x)}var z0=["type","position","isValidConnection","isConnectable","id","onConnect","children","className","onMouseDown"];function Td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function _i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Td(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Td(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var U0=function(){return!0},Y0=function(t){return{connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick}},Xh=E.exports.forwardRef(function(e,t){var n=e.type,r=n===void 0?"source":n,o=e.position,a=o===void 0?W.Top:o,i=e.isValidConnection,s=i===void 0?U0:i,l=e.isConnectable,d=l===void 0?!0:l,c=e.id,f=e.onConnect,p=e.children,g=e.className,h=e.onMouseDown,m=Rr(e,z0),v=ke(),b=E.exports.useContext(ic),C=xe(Y0,ze),S=C.connectionStartHandle,y=C.connectOnClick,w=c||null,_=r==="target",x=function(k){var M=v.getState(),B=M.defaultEdgeOptions,T=M.onConnect,q=M.hasDefaultEdges,R=_i(_i({},B),k);if(q){var D=v.getState(),$=D.edges;v.setState({edges:p0(R,$)})}T==null||T(R),f==null||f(R)},I=function(k){k.button===0&&Kh({event:k,handleId:w,nodeId:b,onConnect:x,isTarget:_,getState:v.getState,setState:v.setState,isValidConnection:s}),h==null||h(k)},O=function(k){var M=v.getState(),B=M.onClickConnectStart,T=M.onClickConnectStop,q=M.onClickConnectEnd,R=M.connectionMode;if(!S){B==null||B(k,{nodeId:b,handleId:w,handleType:r}),v.setState({connectionStartHandle:{nodeId:b,type:r,handleId:w}});return}var D=Nh(k.target),$=dl(k,R,S.type==="target",S.nodeId,S.handleId||null,s,D),z=$.connection,V=$.isValid;T==null||T(k),V&&x(z),q==null||q(k),v.setState({connectionStartHandle:null})};return u("div",{..._i({"data-handleid":w,"data-nodeid":b,"data-handlepos":a,className:Xe(["react-flow__handle","react-flow__handle-".concat(a),"nodrag",g,{source:!_,target:_,connectable:d,connecting:(S==null?void 0:S.nodeId)===b&&(S==null?void 0:S.handleId)===w&&(S==null?void 0:S.type)===r}]),onMouseDown:I,onClick:y?O:void 0,ref:t},m),children:p})});Xh.displayName="Handle";var qa=E.exports.memo(Xh),Qh=function(t){var n=t.data,r=t.isConnectable,o=t.targetPosition,a=o===void 0?W.Top:o,i=t.sourcePosition,s=i===void 0?W.Bottom:i;return N(H,{children:[u(qa,{type:"target",position:a,isConnectable:r}),n==null?void 0:n.label,u(qa,{type:"source",position:s,isConnectable:r})]})};Qh.displayName="DefaultNode";var ul=E.exports.memo(Qh),Zh=function(t){var n=t.data,r=t.isConnectable,o=t.sourcePosition,a=o===void 0?W.Bottom:o;return N(H,{children:[n==null?void 0:n.label,u(qa,{type:"source",position:a,isConnectable:r})]})};Zh.displayName="InputNode";var Jh=E.exports.memo(Zh),em=function(t){var n=t.data,r=t.isConnectable,o=t.targetPosition,a=o===void 0?W.Top:o;return N(H,{children:[u(qa,{type:"target",position:a,isConnectable:r}),n==null?void 0:n.label]})};em.displayName="OutputNode";var tm=E.exports.memo(em),j0=function(t){return{selectedNodes:Array.from(t.nodeInternals.values()).filter(function(n){return n.selected}),selectedEdges:t.edges.filter(function(n){return n.selected})}},W0=function(t,n){var r=t.selectedNodes.map(function(s){return s.id}),o=n.selectedNodes.map(function(s){return s.id}),a=t.selectedEdges.map(function(s){return s.id}),i=n.selectedEdges.map(function(s){return s.id});return ze(r,o)&&ze(a,i)};function G0(e){var t=e.onSelectionChange,n=xe(j0,W0),r=n.selectedNodes,o=n.selectedEdges;return E.exports.useEffect(function(){t({nodes:r,edges:o})},[r,o]),null}var K0=E.exports.memo(G0),X0=function(t){return{setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset}};function It(e,t){E.exports.useEffect(function(){typeof e<"u"&&t(e)},[e])}function he(e,t,n){E.exports.useEffect(function(){typeof t<"u"&&n(ue({},e,t))},[t])}var Q0=function(t){var n=t.nodes,r=t.edges,o=t.defaultNodes,a=t.defaultEdges,i=t.onConnect,s=t.onConnectStart,l=t.onConnectStop,d=t.onConnectEnd,c=t.onClickConnectStart,f=t.onClickConnectStop,p=t.onClickConnectEnd,g=t.nodesDraggable,h=t.nodesConnectable,m=t.minZoom,v=t.maxZoom,b=t.nodeExtent,C=t.onNodesChange,S=t.onEdgesChange,y=t.elementsSelectable,w=t.connectionMode,_=t.snapGrid,x=t.snapToGrid,I=t.translateExtent,O=t.connectOnClick,A=t.defaultEdgeOptions,k=t.fitView,M=t.fitViewOptions,B=t.onNodesDelete,T=t.onEdgesDelete,q=t.onNodeDrag,R=t.onNodeDragStart,D=t.onNodeDragStop,$=t.onSelectionDrag,z=t.onSelectionDragStart,V=t.onSelectionDragStop,U=xe(X0,ze),G=U.setNodes,P=U.setEdges,L=U.setDefaultNodesAndEdges,F=U.setMinZoom,Y=U.setMaxZoom,K=U.setTranslateExtent,Q=U.setNodeExtent,X=U.reset,j=ke();return E.exports.useEffect(function(){return L(o,a),function(){X()}},[]),he("defaultEdgeOptions",A,j.setState),he("connectionMode",w,j.setState),he("onConnect",i,j.setState),he("onConnectStart",s,j.setState),he("onConnectStop",l,j.setState),he("onConnectEnd",d,j.setState),he("onClickConnectStart",c,j.setState),he("onClickConnectStop",f,j.setState),he("onClickConnectEnd",p,j.setState),he("nodesDraggable",g,j.setState),he("nodesConnectable",h,j.setState),he("elementsSelectable",y,j.setState),he("snapToGrid",x,j.setState),he("snapGrid",_,j.setState),he("onNodesChange",C,j.setState),he("onEdgesChange",S,j.setState),he("connectOnClick",O,j.setState),he("fitViewOnInit",k,j.setState),he("fitViewOnInitOptions",M,j.setState),he("onNodesDelete",B,j.setState),he("onEdgesDelete",T,j.setState),he("onNodeDrag",q,j.setState),he("onNodeDragStart",R,j.setState),he("onNodeDragStop",D,j.setState),he("onSelectionDrag",$,j.setState),he("onSelectionDragStart",z,j.setState),he("onSelectionDragStop",V,j.setState),It(n,G),It(r,P),It(o,G),It(a,P),It(m,F),It(v,Y),It(I,K),It(b,Q),null},Z0=".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__container{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__viewport{pointer-events:none;transform-origin:0 0;z-index:2}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow .react-flow__edges{overflow:visible;pointer-events:none}.react-flow .react-flow__connectionline{z-index:1001}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{box-sizing:border-box;pointer-events:all;position:absolute;transform-origin:0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{pointer-events:none;transform-origin:left top;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none;position:absolute}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__controls{bottom:20px;left:15px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:20px;position:absolute;right:15px;z-index:5}.react-flow__attribution{background:hsla(0,0%,100%,.5);color:#999;font-size:10px;padding:2px 3px;position:absolute;z-index:1000}.react-flow__attribution a{color:#555;text-decoration:none}.react-flow__attribution.top{top:0}.react-flow__attribution.bottom{bottom:0}.react-flow__attribution.left{left:0}.react-flow__attribution.right{right:0}.react-flow__attribution.center{left:50%;transform:translateX(-50%)}",J0=Z0,ex=".react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-group,.react-flow__node-input,.react-flow__node-output{background:#fff;border:1px solid #1a192b;border-radius:3px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selected,.react-flow__node-group.selected,.react-flow__node-input.selected,.react-flow__node-output.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle,.react-flow__node-group .react-flow__handle,.react-flow__node-input .react-flow__handle,.react-flow__node-output .react-flow__handle{background:#1a192b}.react-flow__node-default.selectable:hover,.react-flow__node-group.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-default.selectable.selected,.react-flow__node-group.selectable.selected,.react-flow__node-input.selectable.selected,.react-flow__node-output.selectable.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-group{background:hsla(0,0%,94%,.25);border-color:#1a192b}.react-flow__nodesselection-rect,.react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}",tx=ex,nx=function(t,n,r){return r===W.Left?t-n:r===W.Right?t+n:t},rx=function(t,n,r){return r===W.Top?t-n:r===W.Bottom?t+n:t},Od=function(t){var n=t.className,r=t.position,o=t.centerX,a=t.centerY,i=t.radius,s=i===void 0?10:i;return u("circle",{className:Xe(["react-flow__edgeupdater",n]),cx:nx(o,s,r),cy:rx(a,s,r),r:s,stroke:"transparent",fill:"transparent"})},un=function(e){var t=function(r){var o=r.id,a=r.className,i=r.type,s=r.data,l=r.onClick,d=r.onEdgeDoubleClick,c=r.selected,f=r.animated,p=r.label,g=r.labelStyle,h=r.labelShowBg,m=r.labelBgStyle,v=r.labelBgPadding,b=r.labelBgBorderRadius,C=r.style,S=r.source,y=r.target,w=r.sourceX,_=r.sourceY,x=r.targetX,I=r.targetY,O=r.sourcePosition,A=r.targetPosition,k=r.elementsSelectable,M=r.hidden,B=r.sourceHandleId,T=r.targetHandleId,q=r.onContextMenu,R=r.onMouseEnter,D=r.onMouseMove,$=r.onMouseLeave,z=r.edgeUpdaterRadius,V=r.onEdgeUpdate,U=r.onEdgeUpdateStart,G=r.onEdgeUpdateEnd,P=r.markerEnd,L=r.markerStart,F=r.rfId,Y=E.exports.useState(!1),K=se(Y,2),Q=K[0],X=K[1],j=ke(),ce=function(oe){var Ne=j.getState(),Oe=Ne.edges,ft=Ne.addSelectedEdges,rt=Oe.find(function(ln){return ln.id===o});k&&(j.setState({nodesSelectionActive:!1}),ft([o])),l==null||l(oe,rt)},ye=$n(o,j.getState,d),be=$n(o,j.getState,q),_e=$n(o,j.getState,R),Me=$n(o,j.getState,D),Ue=$n(o,j.getState,$),Ve=function(oe,Ne){var Oe=Ne?y:S,ft=(Ne?T:B)||null,rt=Ne?"target":"source",ln=function(){return!0},ni=Ne,Dn=j.getState().edges.find(function($t){return $t.id===o});U==null||U(oe,Dn,rt);var kr=G?function($t){return G($t,Dn,rt)}:void 0,ri=function(Lr){return V==null?void 0:V(Dn,Lr)};Kh({event:oe,handleId:ft,nodeId:Oe,onConnect:ri,isTarget:ni,getState:j.getState,setState:j.setState,isValidConnection:ln,elementEdgeUpdaterType:rt,onEdgeUpdateEnd:kr})},Ye=function(oe){return Ve(oe,!0)},Ie=function(oe){return Ve(oe,!1)},je=function(){return X(!0)},ut=function(){return X(!1)},J=E.exports.useMemo(function(){return"url(#".concat(sl(L,F),")")},[L,F]),le=E.exports.useMemo(function(){return"url(#".concat(sl(P,F),")")},[P,F]);if(M)return null;var ee=!k&&!l,me=typeof V<"u",ne=Xe(["react-flow__edge","react-flow__edge-".concat(i),a,{selected:c,animated:f,inactive:ee,updating:Q}]);return N("g",{className:ne,onClick:ce,onDoubleClick:ye,onContextMenu:be,onMouseEnter:_e,onMouseMove:Me,onMouseLeave:Ue,children:[u(e,{id:o,source:S,target:y,selected:c,animated:f,label:p,labelStyle:g,labelShowBg:h,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:b,data:s,style:C,sourceX:w,sourceY:_,targetX:x,targetY:I,sourcePosition:O,targetPosition:A,sourceHandleId:B,targetHandleId:T,markerStart:J,markerEnd:le}),me&&u("g",{onMouseDown:Ye,onMouseEnter:je,onMouseOut:ut,children:u(Od,{position:O,centerX:w,centerY:_,radius:z})}),me&&u("g",{onMouseDown:Ie,onMouseEnter:je,onMouseOut:ut,children:u(Od,{position:A,centerX:x,centerY:I,radius:z})})]})};return t.displayName="EdgeWrapper",E.exports.memo(t)};function Id(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Nd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Id(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Id(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ox(e){var t={default:un(e.default||cl),straight:un(e.bezier||Wh),step:un(e.step||jh),smoothstep:un(e.step||ac),simplebezier:un(e.simplebezier||Uh)},n={},r=Object.keys(e).filter(function(o){return!["default","bezier"].includes(o)}).reduce(function(o,a){return o[a]=un(e[a]||cl),o},n);return Nd(Nd({},t),r)}function Rd(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,a=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case W.Top:return{x:r+a/2,y:o};case W.Right:return{x:r+a,y:o+i/2};case W.Bottom:return{x:r+a/2,y:o+i};case W.Left:return{x:r,y:o+i/2}}}function Ad(e,t){if(!e)return null;var n=null;return e.length===1||!t?n=e[0]:t&&(n=e.find(function(r){return r.id===t})),typeof n>"u"?null:n}var ax=function(t,n,r,o,a,i){var s=Rd(r,t,n),l=Rd(i,o,a);return{sourceX:s.x,sourceY:s.y,targetX:l.x,targetY:l.y}};function ix(e){var t=e.sourcePos,n=e.targetPos,r=e.sourceWidth,o=e.sourceHeight,a=e.targetWidth,i=e.targetHeight,s=e.width,l=e.height,d=e.transform,c={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+r,n.x+a),y2:Math.max(t.y+o,n.y+i)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);var f=Aa({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:s/d[2],height:l/d[2]}),p=Math.max(0,Math.min(f.x2,c.x2)-Math.max(f.x,c.x)),g=Math.max(0,Math.min(f.y2,c.y2)-Math.max(f.y,c.y)),h=Math.ceil(p*g);return h>0}function kd(e,t){var n,r,o,a,i,s=e.get(t),l=(s==null||(n=s[Te])===null||n===void 0?void 0:n.handleBounds)||null,d=!s||!l||!s.width||!s.height||typeof((r=s.positionAbsolute)===null||r===void 0?void 0:r.x)>"u"||typeof((o=s.positionAbsolute)===null||o===void 0?void 0:o.y)>"u";return[{x:(s==null||(a=s.positionAbsolute)===null||a===void 0?void 0:a.x)||0,y:(s==null||(i=s.positionAbsolute)===null||i===void 0?void 0:i.y)||0,width:(s==null?void 0:s.width)||0,height:(s==null?void 0:s.height)||0},l,!d]}var sx=typeof document<"u"?document:null,Pa=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{target:sx},n=E.exports.useState(!1),r=se(n,2),o=r[0],a=r[1],i=E.exports.useRef(new Set([])),s=E.exports.useMemo(function(){if(e!==null){var f=Array.isArray(e)?e:[e],p=f.filter(function(h){return typeof h=="string"}).map(function(h){return h.split("+")}),g=p.reduce(function(h,m){return h.concat.apply(h,Gt(m))},[]);return[p,g]}return[[],[]]},[e]),l=se(s,2),d=l[0],c=l[1];return E.exports.useEffect(function(){if(e!==null){var f,p,g=function(b){if(Pd(b))return!1;var C=qd(b.code,c);i.current.add(b[C]),Ld(d,i.current,!1)&&(b.preventDefault(),a(!0))},h=function(b){if(Pd(b))return!1;var C=qd(b.code,c);Ld(d,i.current,!0)?(a(!1),i.current.clear()):i.current.delete(b[C])},m=function(){i.current.clear(),a(!1)};return t==null||(f=t.target)===null||f===void 0||f.addEventListener("keydown",g),t==null||(p=t.target)===null||p===void 0||p.addEventListener("keyup",h),window.addEventListener("blur",m),function(){var v,b;t==null||(v=t.target)===null||v===void 0||v.removeEventListener("keydown",g),t==null||(b=t.target)===null||b===void 0||b.removeEventListener("keyup",h),window.removeEventListener("blur",m)}}},[e,a]),o};function Ld(e,t,n){return e.filter(function(r){return n||r.length===t.size}).some(function(r){return r.every(function(o){return t.has(o)})})}function qd(e,t){return t.includes(e)?"code":"key"}function Pd(e){var t=e.target;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))}var lx=function(t){return{onNodesChange:t.onNodesChange,onEdgesChange:t.onEdgesChange}},cx=function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,r=ke(),o=xe(lx,ze),a=o.onNodesChange,i=o.onEdgesChange,s=Pa(t),l=Pa(n);E.exports.useEffect(function(){var d=r.getState(),c=d.nodeInternals,f=d.edges,p=d.hasDefaultNodes,g=d.hasDefaultEdges,h=d.onNodesDelete,m=d.onEdgesDelete,v=Array.from(c.values()),b=v.reduce(function(I,O){return(!O.selected&&O.parentNode&&I.find(function(A){return A.id===O.parentNode})||O.selected)&&I.push(O),I},[]),C=f.filter(function(I){return I.selected});if(s&&(b||C)){var S=nc(b,f),y=[].concat(Gt(C),Gt(S)),w=y.reduce(function(I,O){return I.includes(O.id)||I.push(O.id),I},[]);if((g||p)&&(g&&r.setState({edges:f.filter(function(I){return!w.includes(I.id)})}),p&&(b.forEach(function(I){c.delete(I.id)}),r.setState({nodeInternals:new Map(c)}))),w.length>0&&(m==null||m(y),i)){var _=w.map(function(I){return{id:I,type:"remove"}});i(_)}if(b.length>0&&(h==null||h(b),a)){var x=b.map(function(I){return{id:I.id,type:"remove"}});a(x)}r.setState({nodesSelectionActive:!1})}},[s,a,i]),E.exports.useEffect(function(){r.setState({multiSelectionActive:l})},[l])};function dx(e){var t=ke();E.exports.useEffect(function(){var n,r=function(){if(!!e.current){var a=ec(e.current);t.setState({width:a.width||500,height:a.height||500})}};return r(),window.onresize=r,e.current&&(n=new ResizeObserver(function(){return r()}),n.observe(e.current)),function(){window.onresize=null,n&&e.current&&n.unobserve(e.current)}},[])}var ux=function(t,n){return t.x!==n.x||t.y!==n.y||t.zoom!==n.k},Ei=function(t){return{x:t.x,y:t.y,zoom:t.k}},Wr=function(t,n){return t.target.closest(".".concat(n))},fx=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler}},px=function(t){var n=t.onMove,r=t.onMoveStart,o=t.onMoveEnd,a=t.zoomOnScroll,i=a===void 0?!0:a,s=t.zoomOnPinch,l=s===void 0?!0:s,d=t.panOnScroll,c=d===void 0?!1:d,f=t.panOnScrollSpeed,p=f===void 0?.5:f,g=t.panOnScrollMode,h=g===void 0?Sn.Free:g,m=t.zoomOnDoubleClick,v=m===void 0?!0:m,b=t.selectionKeyPressed,C=t.elementsSelectable,S=t.panOnDrag,y=S===void 0?!0:S,w=t.defaultPosition,_=w===void 0?[0,0]:w,x=t.defaultZoom,I=x===void 0?1:x,O=t.zoomActivationKeyCode,A=t.preventScrolling,k=A===void 0?!0:A,M=t.children,B=t.noWheelClassName,T=t.noPanClassName,q=ke(),R=E.exports.useRef(!1),D=E.exports.useRef(null),$=E.exports.useRef({x:0,y:0,zoom:0}),z=xe(fx,ze),V=z.d3Zoom,U=z.d3Selection,G=z.d3ZoomHandler,P=Pa(O);return dx(D),E.exports.useEffect(function(){if(D.current){var L=q.getState(),F=L.minZoom,Y=L.maxZoom,K=L.translateExtent,Q=r0().scaleExtent([F,Y]).translateExtent(K),X=Je(D.current).call(Q),j=wn(_[0],K[0][0],K[1][0]),ce=wn(_[1],K[0][1],K[1][1]),ye=wn(I,F,Y),be=Wt.translate(j,ce).scale(ye);Q.transform(X,be),q.setState({d3Zoom:Q,d3Selection:X,d3ZoomHandler:X.on("wheel.zoom"),transform:[j,ce,ye]})}},[]),E.exports.useEffect(function(){U&&V&&(c&&!P?U.on("wheel",function(L){if(Wr(L,B))return!1;L.preventDefault(),L.stopImmediatePropagation();var F=U.property("__zoom").k||1;if(L.ctrlKey&&l){var Y=it(L),K=-L.deltaY*(L.deltaMode===1?.05:L.deltaMode?1:.002)*10,Q=F*Math.pow(2,K);V.scaleTo(U,Q,Y);return}var X=L.deltaMode===1?20:1,j=h===Sn.Vertical?0:L.deltaX*X,ce=h===Sn.Horizontal?0:L.deltaY*X;V.translateBy(U,-(j/F)*p,-(ce/F)*p)}).on("wheel.zoom",null):typeof G<"u"&&U.on("wheel",function(L){if(!k||Wr(L,B))return null;L.preventDefault()}).on("wheel.zoom",G))},[c,h,U,V,G,P,l,k,B]),E.exports.useEffect(function(){V&&(b&&!R.current?V.on("zoom",null):b||V.on("zoom",function(L){if(q.setState({transform:[L.transform.x,L.transform.y,L.transform.k]}),n){var F=Ei(L.transform);n(L.sourceEvent,F)}}))},[b,V,n]),E.exports.useEffect(function(){V&&V.on("start",function(L){if(R.current=!0,r){var F=Ei(L.transform);$.current=F,r(L.sourceEvent,F)}})},[V,r]),E.exports.useEffect(function(){V&&V.on("end",function(L){if(R.current=!1,o&&ux($.current,L.transform)){var F=Ei(L.transform);$.current=F,o(L.sourceEvent,F)}})},[V,o]),E.exports.useEffect(function(){V&&V.filter(function(L){var F=P||i,Y=l&&L.ctrlKey;return!y&&!F&&!c&&!v&&!l||b||!v&&L.type==="dblclick"||Wr(L,B)&&L.type==="wheel"||Wr(L,T)&&L.type!=="wheel"||!l&&L.ctrlKey&&L.type==="wheel"||!F&&!c&&!Y&&L.type==="wheel"||!y&&(L.type==="mousedown"||L.type==="touchstart")?!1:(!L.ctrlKey||L.type==="wheel")&&!L.button})},[V,i,l,c,v,y,b,C,P]),u("div",{className:"react-flow__renderer react-flow__container",ref:D,children:M})};function Dd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Md(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vd(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}var hx=function(t){return{userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable}},Bd={startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},mx=E.exports.memo(function(e){var t=e.selectionKeyPressed,n=ke(),r=E.exports.useRef(0),o=E.exports.useRef(0),a=E.exports.useRef(),i=E.exports.useState(Bd),s=se(i,2),l=s[0],d=s[1],c=xe(hx,ze),f=c.userSelectionActive,p=c.elementsSelectable,g=f||t;if(!p||!g)return null;var h=function(){d(Bd),n.setState({userSelectionActive:!1}),r.current=0,o.current=0},m=function(y){var w=y.target.closest(".react-flow");a.current=w.getBoundingClientRect();var _=Vd(y,a.current);d({width:0,height:0,startX:_.x,startY:_.y,x:_.x,y:_.y,draw:!0}),n.setState({userSelectionActive:!0,nodesSelectionActive:!1})},v=function(y){var w,_;if(!(!t||!l.draw||!a.current)){var x=Vd(y,a.current),I=(w=l.startX)!==null&&w!==void 0?w:0,O=(_=l.startY)!==null&&_!==void 0?_:0,A=Md(Md({},l),{},{x:x.x<I?x.x:I,y:x.y<O?x.y:O,width:Math.abs(x.x-I),height:Math.abs(x.y-O)}),k=n.getState(),M=k.nodeInternals,B=k.edges,T=k.transform,q=k.onNodesChange,R=k.onEdgesChange,D=Array.from(M.values()),$=Dh(M,A,T,!1,!0),z=nc($,B).map(function(P){return P.id}),V=$.map(function(P){return P.id});if(r.current!==V.length){r.current=V.length;var U=gn(D,V);U.length&&(q==null||q(U))}if(o.current!==z.length){o.current=z.length;var G=gn(B,z);G.length&&(R==null||R(G))}d(A)}},b=function(){n.setState({nodesSelectionActive:r.current>0}),h()},C=function(){n.setState({nodesSelectionActive:!1}),h()};return u("div",{className:"react-flow__selectionpane react-flow__container",onMouseDown:m,onMouseMove:v,onMouseUp:b,onMouseLeave:C,children:l.draw&&u("div",{className:"react-flow__selection react-flow__container",style:{width:l.width,height:l.height,transform:"translate(".concat(l.x,"px, ").concat(l.y,"px)")}})})});function Fd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function $d(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nm(e,t){if(!e.parentNode)return!1;var n=t.get(e.parentNode);return n?n.selected?!0:nm(n,t):!1}function Hd(e,t,n){var r=e;do{var o;if((o=r)!==null&&o!==void 0&&o.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function gx(e,t,n){return Array.from(e.values()).filter(function(r){return(r.selected||r.id===n)&&(!r.parentNode||!nm(r,e))}).map(function(r){var o,a,i,s;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:t.x-((o=(a=r.positionAbsolute)===null||a===void 0?void 0:a.x)!==null&&o!==void 0?o:0),y:t.y-((i=(s=r.positionAbsolute)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode,width:r.width,height:r.height}})}function yx(e,t,n,r){var o=e.extent||r,a={x:t.x-e.distance.x,y:t.y-e.distance.y};if(e.extent==="parent")if(e.parentNode&&e.width&&e.height){var i=n.get(e.parentNode);o=i!=null&&i.positionAbsolute&&i!==null&&i!==void 0&&i.width&&i!==null&&i!==void 0&&i.height?[[i.positionAbsolute.x,i.positionAbsolute.y],[i.positionAbsolute.x+i.width-e.width,i.positionAbsolute.y+i.height-e.height]]:o}else o=r;else if(e.extent&&e.parentNode){var s,l,d,c,f=n.get(e.parentNode),p=(s=f==null||(l=f.positionAbsolute)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,g=(d=f==null||(c=f.positionAbsolute)===null||c===void 0?void 0:c.y)!==null&&d!==void 0?d:0;o=[[e.extent[0][0]+p,e.extent[0][1]+g],[e.extent[1][0]+p,e.extent[1][1]+g]]}var h={x:0,y:0};if(e.parentNode){var m,v,b,C,S=n.get(e.parentNode);h={x:(m=S==null||(v=S.positionAbsolute)===null||v===void 0?void 0:v.x)!==null&&m!==void 0?m:0,y:(b=S==null||(C=S.positionAbsolute)===null||C===void 0?void 0:C.y)!==null&&b!==void 0?b:0}}return e.positionAbsolute=o?Ih(a,o):a,e.position={x:e.positionAbsolute.x-h.x,y:e.positionAbsolute.y-h.y},e}function xi(e){var t=e.nodeId,n=e.dragItems,r=e.nodeInternals,o=n.map(function(a){var i=r.get(a.id);return $d($d({},i),{},{position:a.position,positionAbsolute:a.positionAbsolute})});return[t?o.find(function(a){return a.id===t}):o[0],o]}function Ti(e){return function(t,n,r){return e==null?void 0:e(t,r)}}function rm(e){var t=e.nodeRef,n=e.disabled,r=n===void 0?!1:n,o=e.noDragClassName,a=e.handleSelector,i=e.nodeId,s=e.isSelectable,l=e.selectNodesOnDrag,d=E.exports.useState(!1),c=se(d,2),f=c[0],p=c[1],g=ke(),h=E.exports.useRef(),m=E.exports.useRef({x:null,y:null}),v=E.exports.useCallback(function(b){var C=b.sourceEvent,S=g.getState(),y=S.transform,w=S.snapGrid,_=S.snapToGrid,x=C.touches?C.touches[0].clientX:C.clientX,I=C.touches?C.touches[0].clientY:C.clientY,O=Ph({x,y:I},y,_,w);return O},[]);return E.exports.useEffect(function(){if(t!=null&&t.current){var b=Je(t.current);if(r)b.on(".drag",null);else{var C=p_().on("start",function(S){var y=g.getState(),w=y.nodeInternals,_=y.multiSelectionActive,x=y.unselectNodesAndEdges,I=y.onNodeDragStart,O=y.onSelectionDragStart,A=i?I:Ti(O);if(!l&&!_&&i){var k;(k=w.get(i))!==null&&k!==void 0&&k.selected||x()}i&&s&&l&&qh({id:i,store:g});var M=v(S);if(m.current=M,h.current=gx(w,M,i),A&&h.current){var B=xi({nodeId:i,dragItems:h.current,nodeInternals:w}),T=se(B,2),q=T[0],R=T[1];A(S.sourceEvent,q,R)}}).on("drag",function(S){var y=g.getState(),w=y.updateNodePositions,_=y.nodeInternals,x=y.nodeExtent,I=y.onNodeDrag,O=y.onSelectionDrag,A=v(S);if((m.current.x!==A.x||m.current.y!==A.y)&&h.current){m.current=A,h.current=h.current.map(function(R){return yx(R,A,_,x)});var k=i?I:Ti(O);if(w(h.current,!0,!0),p(!0),k){var M=xi({nodeId:i,dragItems:h.current,nodeInternals:_}),B=se(M,2),T=B[0],q=B[1];k(S.sourceEvent,T,q)}}S.on("end",function(R){if(p(!1),h.current){var D=g.getState(),$=D.updateNodePositions,z=D.nodeInternals,V=D.onNodeDragStop,U=D.onSelectionDragStop,G=i?V:Ti(U);if($(h.current,!1,!1),G){var P=xi({nodeId:i,dragItems:h.current,nodeInternals:z}),L=se(P,2),F=L[0],Y=L[1];G(R.sourceEvent,F,Y)}}})}).filter(function(S){var y=S.target,w=!S.button&&(!o||!Hd(y,".".concat(o),t))&&(!a||Hd(y,a,t));return w});return b.call(C),function(){b.on(".drag",null)}}}},[t,r,o,a,s,g,i,l,v]),f}function zd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function vx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var bx=function(t){return vx({transformString:"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")"),userSelectionActive:t.userSelectionActive},tc(Array.from(t.nodeInternals.values()).filter(function(n){return n.selected})))},Sx=function(t){var n=Array.from(t.nodeInternals.values()).filter(function(r){return r.selected});return tc(n)};function wx(e){var t=e.onSelectionContextMenu,n=e.noPanClassName,r=ke(),o=xe(bx,ze),a=o.transformString,i=o.userSelectionActive,s=xe(Sx,ze),l=s.width,d=s.height,c=s.x,f=s.y,p=E.exports.useRef(null);if(rm({nodeRef:p}),i||!l||!d)return null;var g=t?function(h){var m=Array.from(r.getState().nodeInternals.values()).filter(function(v){return v.selected});t(h,m)}:void 0;return u("div",{className:Xe(["react-flow__nodesselection","react-flow__container",n]),style:{transform:a},children:u("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:g,style:{width:l,height:d,top:f,left:c}})})}var Cx=E.exports.memo(wx),_x=function(t){return t.nodesSelectionActive},om=function(t){var n=t.children,r=t.onPaneClick,o=t.onPaneContextMenu,a=t.onPaneScroll,i=t.deleteKeyCode,s=t.onMove,l=t.onMoveStart,d=t.onMoveEnd,c=t.selectionKeyCode,f=t.multiSelectionKeyCode,p=t.zoomActivationKeyCode,g=t.elementsSelectable,h=t.zoomOnScroll,m=t.zoomOnPinch,v=t.panOnScroll,b=t.panOnScrollSpeed,C=t.panOnScrollMode,S=t.zoomOnDoubleClick,y=t.panOnDrag,w=t.defaultPosition,_=t.defaultZoom,x=t.preventScrolling,I=t.onSelectionContextMenu,O=t.noWheelClassName,A=t.noPanClassName,k=ke(),M=xe(_x),B=Pa(c);cx({deleteKeyCode:i,multiSelectionKeyCode:f});var T=function($){r==null||r($),k.getState().resetSelectedElements(),k.setState({nodesSelectionActive:!1})},q=o?function(D){return o(D)}:void 0,R=a?function(D){return a(D)}:void 0;return N(px,{onMove:s,onMoveStart:l,onMoveEnd:d,selectionKeyPressed:B,elementsSelectable:g,zoomOnScroll:h,zoomOnPinch:m,panOnScroll:v,panOnScrollSpeed:b,panOnScrollMode:C,zoomOnDoubleClick:S,panOnDrag:y,defaultPosition:w,defaultZoom:_,zoomActivationKeyCode:p,preventScrolling:x,noWheelClassName:O,noPanClassName:A,children:[n,u(mx,{selectionKeyPressed:B}),M&&u(Cx,{onSelectionContextMenu:I,noPanClassName:A}),u("div",{className:"react-flow__pane react-flow__container",onClick:T,onContextMenu:q,onWheel:R})]})};om.displayName="FlowRenderer";var Ex=E.exports.memo(om);function xx(e){var t=xe(E.exports.useCallback(function(n){return e?Dh(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):Array.from(n.nodeInternals.values())},[e]));return t}var Tx=function(t){return{nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions}},am=function(t){var n=xe(Tx,ze),r=n.nodesDraggable,o=n.nodesConnectable,a=n.elementsSelectable,i=n.updateNodeDimensions,s=xx(t.onlyRenderVisibleElements),l=E.exports.useRef(),d=E.exports.useMemo(function(){if(typeof ResizeObserver>"u")return null;var c=new ResizeObserver(function(f){var p=f.map(function(g){return{id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}});i(p)});return l.current=c,c},[]);return E.exports.useEffect(function(){return function(){var c;l==null||(c=l.current)===null||c===void 0||c.disconnect()}},[]),u("div",{className:"react-flow__nodes react-flow__container",children:s.map(function(c){var f,p,g,h,m,v,b,C=c.type||"default";t.nodeTypes[C]||(C="default");var S=t.nodeTypes[C]||t.nodeTypes.default,y=!!(c.draggable||r&&typeof c.draggable>"u"),w=!!(c.selectable||a&&typeof c.selectable>"u"),_=!!(c.connectable||o&&typeof c.connectable>"u");return u(S,{id:c.id,className:c.className,style:c.style,type:C,data:c.data,sourcePosition:c.sourcePosition||W.Bottom,targetPosition:c.targetPosition||W.Top,hidden:c.hidden,xPos:(f=(p=c.positionAbsolute)===null||p===void 0?void 0:p.x)!==null&&f!==void 0?f:0,yPos:(g=(h=c.positionAbsolute)===null||h===void 0?void 0:h.y)!==null&&g!==void 0?g:0,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!c.selected,isDraggable:y,isSelectable:w,isConnectable:_,resizeObserver:d,dragHandle:c.dragHandle,zIndex:(m=(v=c[Te])===null||v===void 0?void 0:v.z)!==null&&m!==void 0?m:0,isParent:!!((b=c[Te])!==null&&b!==void 0&&b.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!c.width&&!!c.height},c.id)})})};am.displayName="NodeRenderer";var Ox=E.exports.memo(am),fn;function Ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Yd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ud(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ud(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Ix=(fn={},ue(fn,W.Left,W.Right),ue(fn,W.Right,W.Left),ue(fn,W.Top,W.Bottom),ue(fn,W.Bottom,W.Top),fn),Nx=function(e){var t,n,r,o,a,i=e.connectionNodeId,s=e.connectionHandleType,l=e.connectionLineStyle,d=e.connectionLineType,c=d===void 0?gt.Bezier:d,f=e.isConnectable,p=e.CustomConnectionLineComponent,g=xe(E.exports.useCallback(function(z){return{fromNode:z.nodeInternals.get(i),handleId:z.connectionHandleId,toX:(z.connectionPosition.x-z.transform[0])/z.transform[2],toY:(z.connectionPosition.y-z.transform[1])/z.transform[2]}},[i]),ze),h=g.fromNode,m=g.handleId,v=g.toX,b=g.toY,C=h==null||(t=h[Te])===null||t===void 0?void 0:t.handleBounds;if(!h||!f||!(C!=null&&C[s]))return null;var S=C[s],y=m?S.find(function(z){return z.id===m}):S[0],w=y?y.x+y.width/2:((n=h==null?void 0:h.width)!==null&&n!==void 0?n:0)/2,_=y?y.y+y.height/2:(r=h==null?void 0:h.height)!==null&&r!==void 0?r:0,x=((h==null||(o=h.positionAbsolute)===null||o===void 0?void 0:o.x)||0)+w,I=((h==null||(a=h.positionAbsolute)===null||a===void 0?void 0:a.y)||0)+_,O=y==null?void 0:y.position;if(!O)return null;var A=Ix[O],k,M,B,T,q,R;switch(s){case"source":k=x,M=I,B=O,T=v,q=b,R=A;break;case"target":k=v,M=b,B=A,T=x,q=I,R=O;break}if(p)return u("g",{className:"react-flow__connection",children:u(p,{connectionLineType:c,connectionLineStyle:l,fromNode:h,fromHandle:y,fromX:x,fromY:I,toX:v,toY:b,fromPosition:O,toPosition:A,sourcePosition:B,targetPosition:R,sourceNode:h,sourceHandle:y,targetX:T,targetY:q,sourceX:k,sourceY:M})});var D="",$={sourceX:k,sourceY:M,sourcePosition:B,targetX:T,targetY:q,targetPosition:R};return c===gt.Bezier?D=Gh($):c===gt.Step?D=ll(Yd(Yd({},$),{},{borderRadius:0})):c===gt.SmoothStep?D=ll($):c===gt.SimpleBezier?D=zh($):D="M".concat(k,",").concat(M," ").concat(T,",").concat(q),u("g",{className:"react-flow__connection",children:u("path",{d:D,className:"react-flow__connection-path",style:l})})};function fl(e){return fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fl(e)}var Gr,Rx=function(t){var n=t.color,r=n===void 0?"none":n,o=t.strokeWidth,a=o===void 0?1:o;return u("polyline",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:a,fill:"none",points:"-5,-4 0,0 -5,4"})},Ax=function(t){var n=t.color,r=n===void 0?"none":n,o=t.strokeWidth,a=o===void 0?1:o;return u("polyline",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:a,fill:r,points:"-5,-4 0,0 -5,4 -5,-4"})},jd=(Gr={},ue(Gr,Sr.Arrow,Rx),ue(Gr,Sr.ArrowClosed,Ax),Gr);function kx(e){var t=E.exports.useMemo(function(){var n=jd.hasOwnProperty(e);return n?jd[e]:function(){return null}},[e]);return t}function Wd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Lx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Wd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var qx=function(t){var n=t.id,r=t.type,o=t.color,a=t.width,i=a===void 0?12.5:a,s=t.height,l=s===void 0?12.5:s,d=t.markerUnits,c=d===void 0?"strokeWidth":d,f=t.strokeWidth,p=t.orient,g=p===void 0?"auto":p,h=kx(r);return ge.createElement("marker",{className:"react-flow__arrowhead",id:n,markerWidth:"".concat(i),markerHeight:"".concat(l),viewBox:"-10 -10 20 20",markerUnits:c,orient:g,refX:"0",refY:"0"},ge.createElement(h,{color:o,strokeWidth:f}))},Px=function(t){var n=t.defaultColor,r=t.rfId;return function(o){var a=[];return o.edges.reduce(function(i,s){return[s.markerStart,s.markerEnd].forEach(function(l){if(l&&fl(l)==="object"){var d=sl(l,r);a.includes(d)||(i.push(Lx({id:d,color:l.color||n},l)),a.push(d))}}),i},[]).sort(function(i,s){return i.id.localeCompare(s.id)})}},im=function(t){var n=t.defaultColor,r=t.rfId,o=xe(E.exports.useCallback(Px({defaultColor:n,rfId:r}),[n,r]),function(a,i){return!(a.length!==i.length||a.some(function(s,l){return s.id!==i[l].id}))});return u("defs",{children:o.map(function(a){return u(qx,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id)})})};im.displayName="MarkerDefinitions";var Dx=E.exports.memo(im),Mx=[{level:0,isMaxLevel:!0,edges:[]}];function Vx(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=-1,o=e.reduce(function(i,s){var l=Rh(s.zIndex),d=l?s.zIndex:0;if(n){var c,f,p,g;d=l?s.zIndex:Math.max(((c=t.get(s.source))===null||c===void 0||(f=c[Te])===null||f===void 0?void 0:f.z)||0,((p=t.get(s.target))===null||p===void 0||(g=p[Te])===null||g===void 0?void 0:g.z)||0)}return i[d]?i[d].push(s):i[d]=[s],r=d>r?d:r,i},{}),a=Object.entries(o).map(function(i){var s=se(i,2),l=s[0],d=s[1],c=+l;return{edges:d,level:c,isMaxLevel:c===r}});return a.length===0?Mx:a}function Bx(e,t,n){var r=xe(E.exports.useCallback(function(o){return e?o.edges.filter(function(a){var i=t.get(a.source),s=t.get(a.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&ix({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:s.width,targetHeight:s.height,width:o.width,height:o.height,transform:o.transform})}):o.edges},[e,t]));return Vx(r,t,n)}var Fx=function(t){return{connectionNodeId:t.connectionNodeId,connectionHandleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals}},sm=function(t){var n=xe(Fx,ze),r=n.connectionNodeId,o=n.connectionHandleType,a=n.nodesConnectable,i=n.elementsSelectable,s=n.width,l=n.height,d=n.connectionMode,c=n.nodeInternals,f=Bx(t.onlyRenderVisibleElements,c,t.elevateEdgesOnSelect);if(!s)return null;var p=t.connectionLineType,g=t.defaultMarkerColor,h=t.connectionLineStyle,m=t.connectionLineComponent,v=t.connectionLineContainerStyle,b=r&&o;return N(H,{children:[f.map(function(C){var S=C.level,y=C.edges,w=C.isMaxLevel;return N("svg",{style:{zIndex:S},width:s,height:l,className:"react-flow__edges react-flow__container",children:[w&&u(Dx,{defaultColor:g,rfId:t.rfId}),u("g",{children:y.map(function(_){var x=kd(c,_.source),I=se(x,3),O=I[0],A=I[1],k=I[2],M=kd(c,_.target),B=se(M,3),T=B[0],q=B[1],R=B[2];if(!k||!R)return null;var D=_.type||"default",$=t.edgeTypes[D]||t.edgeTypes.default,z=d===Rn.Strict?q.target:q.target||q.source,V=Ad(A.source,_.sourceHandle||null),U=Ad(z,_.targetHandle||null),G=(V==null?void 0:V.position)||W.Bottom,P=(U==null?void 0:U.position)||W.Top;if(!V||!U)return null;var L=ax(O,V,G,T,U,P),F=L.sourceX,Y=L.sourceY,K=L.targetX,Q=L.targetY;return u($,{id:_.id,className:Xe([_.className,t.noPanClassName]),type:D,data:_.data,selected:!!_.selected,animated:!!_.animated,hidden:!!_.hidden,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,style:_.style,source:_.source,target:_.target,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerEnd:_.markerEnd,markerStart:_.markerStart,sourceX:F,sourceY:Y,targetX:K,targetY:Q,sourcePosition:G,targetPosition:P,elementsSelectable:i,onEdgeUpdate:t.onEdgeUpdate,onContextMenu:t.onEdgeContextMenu,onMouseEnter:t.onEdgeMouseEnter,onMouseMove:t.onEdgeMouseMove,onMouseLeave:t.onEdgeMouseLeave,onClick:t.onEdgeClick,edgeUpdaterRadius:t.edgeUpdaterRadius,onEdgeDoubleClick:t.onEdgeDoubleClick,onEdgeUpdateStart:t.onEdgeUpdateStart,onEdgeUpdateEnd:t.onEdgeUpdateEnd,rfId:t.rfId},_.id)})})]},S)}),b&&u("svg",{style:v,width:s,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container",children:u(Nx,{connectionNodeId:r,connectionHandleType:o,connectionLineStyle:h,connectionLineType:p,isConnectable:a,CustomConnectionLineComponent:m})})]})};sm.displayName="EdgeRenderer";var $x=E.exports.memo(sm),Hx=function(t){return"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")")};function zx(e){var t=e.children,n=xe(Hx);return u("div",{className:"react-flow__viewport react-flow__container",style:{transform:n},children:t})}function Ux(e){var t=oc(),n=E.exports.useRef(!1);E.exports.useEffect(function(){!n.current&&t.viewportInitialized&&e&&(setTimeout(function(){return e(t)},1),n.current=!0)},[e,t.viewportInitialized])}var lm=function(t){var n=t.nodeTypes,r=t.edgeTypes,o=t.onMove,a=t.onMoveStart,i=t.onMoveEnd,s=t.onInit,l=t.onNodeClick,d=t.onEdgeClick,c=t.onNodeDoubleClick,f=t.onEdgeDoubleClick,p=t.onNodeMouseEnter,g=t.onNodeMouseMove,h=t.onNodeMouseLeave,m=t.onNodeContextMenu,v=t.onSelectionContextMenu,b=t.connectionLineType,C=t.connectionLineStyle,S=t.connectionLineComponent,y=t.connectionLineContainerStyle,w=t.selectionKeyCode,_=t.multiSelectionKeyCode,x=t.zoomActivationKeyCode,I=t.deleteKeyCode,O=t.onlyRenderVisibleElements,A=t.elementsSelectable,k=t.selectNodesOnDrag,M=t.defaultZoom,B=t.defaultPosition,T=t.preventScrolling,q=t.defaultMarkerColor,R=t.zoomOnScroll,D=t.zoomOnPinch,$=t.panOnScroll,z=t.panOnScrollSpeed,V=t.panOnScrollMode,U=t.zoomOnDoubleClick,G=t.panOnDrag,P=t.onPaneClick,L=t.onPaneScroll,F=t.onPaneContextMenu,Y=t.onEdgeUpdate,K=t.onEdgeContextMenu,Q=t.onEdgeMouseEnter,X=t.onEdgeMouseMove,j=t.onEdgeMouseLeave,ce=t.edgeUpdaterRadius,ye=t.onEdgeUpdateStart,be=t.onEdgeUpdateEnd,_e=t.noDragClassName,Me=t.noWheelClassName,Ue=t.noPanClassName,Ve=t.elevateEdgesOnSelect,Ye=t.id;return Ux(s),u(Ex,{onPaneClick:P,onPaneContextMenu:F,onPaneScroll:L,deleteKeyCode:I,selectionKeyCode:w,multiSelectionKeyCode:_,zoomActivationKeyCode:x,elementsSelectable:A,onMove:o,onMoveStart:a,onMoveEnd:i,zoomOnScroll:R,zoomOnPinch:D,zoomOnDoubleClick:U,panOnScroll:$,panOnScrollSpeed:z,panOnScrollMode:V,panOnDrag:G,defaultPosition:B,defaultZoom:M,onSelectionContextMenu:v,preventScrolling:T,noDragClassName:_e,noWheelClassName:Me,noPanClassName:Ue,children:N(zx,{children:[u($x,{edgeTypes:r,onEdgeClick:d,onEdgeDoubleClick:f,connectionLineType:b,connectionLineStyle:C,connectionLineComponent:S,connectionLineContainerStyle:y,onEdgeUpdate:Y,onlyRenderVisibleElements:O,onEdgeContextMenu:K,onEdgeMouseEnter:Q,onEdgeMouseMove:X,onEdgeMouseLeave:j,onEdgeUpdateStart:ye,onEdgeUpdateEnd:be,edgeUpdaterRadius:ce,defaultMarkerColor:q,noPanClassName:Ue,elevateEdgesOnSelect:!!Ve,rfId:Ye}),u(Ox,{nodeTypes:n,onNodeClick:l,onNodeDoubleClick:c,onNodeMouseEnter:p,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:m,selectNodesOnDrag:k,onlyRenderVisibleElements:O,noPanClassName:Ue,noDragClassName:_e})]})})};lm.displayName="GraphView";var Yx=E.exports.memo(lm),cm=function(){return null};cm.displayName="GroupNode";function Gd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Kd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Hn=function(e){var t=function(r){var o=r.id,a=r.type,i=r.data,s=r.xPos,l=r.yPos,d=r.selected,c=r.onClick,f=r.onMouseEnter,p=r.onMouseMove,g=r.onMouseLeave,h=r.onContextMenu,m=r.onDoubleClick,v=r.style,b=r.className,C=r.isDraggable,S=r.isSelectable,y=r.isConnectable,w=r.selectNodesOnDrag,_=r.sourcePosition,x=r.targetPosition,I=r.hidden,O=r.resizeObserver,A=r.dragHandle,k=r.zIndex,M=r.isParent,B=r.noPanClassName,T=r.noDragClassName,q=r.initialized,R=ke(),D=E.exports.useRef(null),$=E.exports.useRef(_),z=E.exports.useRef(x),V=E.exports.useRef(a),U=S||C||c||f||p||g,G=Fn(o,R.getState,f),P=Fn(o,R.getState,p),L=Fn(o,R.getState,g),F=Fn(o,R.getState,h),Y=Fn(o,R.getState,m),K=function(j){if(S&&(!w||!C)&&qh({id:o,store:R}),c){var ce=R.getState().nodeInternals.get(o);c(j,Kd({},ce))}};E.exports.useEffect(function(){if(D.current&&!I){var X=D.current;return O==null||O.observe(X),function(){return O==null?void 0:O.unobserve(X)}}},[I]),E.exports.useEffect(function(){var X=V.current!==a,j=$.current!==_,ce=z.current!==x;D.current&&(X||j||ce)&&(X&&(V.current=a),j&&($.current=_),ce&&(z.current=x),R.getState().updateNodeDimensions([{id:o,nodeElement:D.current,forceUpdate:!0}]))},[o,a,_,x]);var Q=rm({nodeRef:D,disabled:I||!C,noDragClassName:T,handleSelector:A,nodeId:o,isSelectable:S,selectNodesOnDrag:w});return I?null:u("div",{className:Xe(["react-flow__node","react-flow__node-".concat(a),B,b,{selected:d,selectable:S,parent:M}]),ref:D,style:Kd({zIndex:k,transform:"translate(".concat(s,"px,").concat(l,"px)"),pointerEvents:U?"all":"none",visibility:q?"visible":"hidden"},v),onMouseEnter:G,onMouseMove:P,onMouseLeave:L,onContextMenu:F,onClick:K,onDoubleClick:Y,"data-id":o,children:u(H0,{value:o,children:u(e,{id:o,data:i,type:a,xPos:s,yPos:l,selected:d,isConnectable:y,sourcePosition:_,targetPosition:x,dragging:Q,dragHandle:A,zIndex:k})})})};return t.displayName="NodeWrapper",E.exports.memo(t)};function Xd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Qd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jx(e){var t={input:Hn(e.input||Jh),default:Hn(e.default||ul),output:Hn(e.output||tm),group:Hn(e.group||cm)},n={},r=Object.keys(e).filter(function(o){return!["input","default","output","group"].includes(o)}).reduce(function(o,a){return o[a]=Hn(e[a]||ul),o},n);return Qd(Qd({},t),r)}function Zd(e,t){E.exports.useRef(null);var n=E.exports.useMemo(function(){return t(e)},[e]);return n}function Jd(e){if(!(!e||typeof document>"u")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");t.appendChild(n),n.appendChild(document.createTextNode(e))}}var dm=function(t){var n=t.children,r=!0;try{ke()}catch{r=!1}return r?u(H,{children:n}):u(Fh,{createStore:$h,children:n})};dm.displayName="ReactFlowWrapper";var Wx=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectStop","onConnectEnd","onClickConnectStart","onClickConnectStop","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateEdgesOnSelect"];function eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function tu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eu(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}Jd(J0),Jd(tx);var Gx={input:Jh,default:ul,output:tm},Kx={default:cl,straight:Wh,step:jh,smoothstep:ac,simplebezier:Uh},Xx=[15,15],Qx=[0,0],um=E.exports.forwardRef(function(e,t){var n=e.nodes,r=e.edges,o=e.defaultNodes,a=e.defaultEdges,i=e.className,s=e.nodeTypes,l=s===void 0?Gx:s,d=e.edgeTypes,c=d===void 0?Kx:d,f=e.onNodeClick,p=e.onEdgeClick,g=e.onInit,h=e.onMove,m=e.onMoveStart,v=e.onMoveEnd,b=e.onConnect,C=e.onConnectStart,S=e.onConnectStop,y=e.onConnectEnd,w=e.onClickConnectStart,_=e.onClickConnectStop,x=e.onClickConnectEnd,I=e.onNodeMouseEnter,O=e.onNodeMouseMove,A=e.onNodeMouseLeave,k=e.onNodeContextMenu,M=e.onNodeDoubleClick,B=e.onNodeDragStart,T=e.onNodeDrag,q=e.onNodeDragStop,R=e.onNodesDelete,D=e.onEdgesDelete,$=e.onSelectionChange,z=e.onSelectionDragStart,V=e.onSelectionDrag,U=e.onSelectionDragStop,G=e.onSelectionContextMenu,P=e.connectionMode,L=P===void 0?Rn.Strict:P,F=e.connectionLineType,Y=F===void 0?gt.Bezier:F,K=e.connectionLineStyle,Q=e.connectionLineComponent,X=e.connectionLineContainerStyle,j=e.deleteKeyCode,ce=j===void 0?"Backspace":j,ye=e.selectionKeyCode,be=ye===void 0?"Shift":ye,_e=e.multiSelectionKeyCode,Me=_e===void 0?"Meta":_e,Ue=e.zoomActivationKeyCode,Ve=Ue===void 0?"Meta":Ue,Ye=e.snapToGrid,Ie=Ye===void 0?!1:Ye,je=e.snapGrid,ut=je===void 0?Xx:je,J=e.onlyRenderVisibleElements,le=J===void 0?!1:J,ee=e.selectNodesOnDrag,me=ee===void 0?!0:ee,ne=e.nodesDraggable,We=e.nodesConnectable,oe=e.elementsSelectable,Ne=e.minZoom,Oe=e.maxZoom,ft=e.defaultZoom,rt=ft===void 0?1:ft,ln=e.defaultPosition,ni=ln===void 0?Qx:ln,Dn=e.translateExtent,kr=e.preventScrolling,ri=kr===void 0?!0:kr,$t=e.nodeExtent,Lr=e.defaultMarkerColor,ug=Lr===void 0?"#b1b1b7":Lr,hc=e.zoomOnScroll,fg=hc===void 0?!0:hc,mc=e.zoomOnPinch,pg=mc===void 0?!0:mc,gc=e.panOnScroll,hg=gc===void 0?!1:gc,yc=e.panOnScrollSpeed,mg=yc===void 0?.5:yc,vc=e.panOnScrollMode,gg=vc===void 0?Sn.Free:vc,bc=e.zoomOnDoubleClick,yg=bc===void 0?!0:bc,Sc=e.panOnDrag,vg=Sc===void 0?!0:Sc,bg=e.onPaneClick,Sg=e.onPaneScroll,wg=e.onPaneContextMenu,Cg=e.children,_g=e.onEdgeUpdate,Eg=e.onEdgeContextMenu,xg=e.onEdgeDoubleClick,Tg=e.onEdgeMouseEnter,Og=e.onEdgeMouseMove,Ig=e.onEdgeMouseLeave,Ng=e.onEdgeUpdateStart,Rg=e.onEdgeUpdateEnd,wc=e.edgeUpdaterRadius,Ag=wc===void 0?10:wc,kg=e.onNodesChange,Lg=e.onEdgesChange,Cc=e.noDragClassName,qg=Cc===void 0?"nodrag":Cc,_c=e.noWheelClassName,Pg=_c===void 0?"nowheel":_c,Ec=e.noPanClassName,Dg=Ec===void 0?"nopan":Ec,xc=e.fitView,Mg=xc===void 0?!1:xc,Vg=e.fitViewOptions,Tc=e.connectOnClick,Bg=Tc===void 0?!0:Tc,Fg=e.attributionPosition,$g=e.proOptions,Hg=e.defaultEdgeOptions,Oc=e.elevateEdgesOnSelect,zg=Oc===void 0?!1:Oc,qr=Rr(e,Wx),Ug=Zd(l,jx),Yg=Zd(c,ox),jg=Xe(["react-flow",i]);return u("div",{...tu(tu({},qr),{},{ref:t,className:jg}),children:N(dm,{children:[u(Yx,{onInit:g,onMove:h,onMoveStart:m,onMoveEnd:v,onNodeClick:f,onEdgeClick:p,onNodeMouseEnter:I,onNodeMouseMove:O,onNodeMouseLeave:A,onNodeContextMenu:k,onNodeDoubleClick:M,nodeTypes:Ug,edgeTypes:Yg,connectionLineType:Y,connectionLineStyle:K,connectionLineComponent:Q,connectionLineContainerStyle:X,selectionKeyCode:be,deleteKeyCode:ce,multiSelectionKeyCode:Me,zoomActivationKeyCode:Ve,onlyRenderVisibleElements:le,selectNodesOnDrag:me,defaultZoom:rt,defaultPosition:ni,preventScrolling:ri,zoomOnScroll:fg,zoomOnPinch:pg,zoomOnDoubleClick:yg,panOnScroll:hg,panOnScrollSpeed:mg,panOnScrollMode:gg,panOnDrag:vg,onPaneClick:bg,onPaneScroll:Sg,onPaneContextMenu:wg,onSelectionContextMenu:G,onEdgeUpdate:_g,onEdgeContextMenu:Eg,onEdgeDoubleClick:xg,onEdgeMouseEnter:Tg,onEdgeMouseMove:Og,onEdgeMouseLeave:Ig,onEdgeUpdateStart:Ng,onEdgeUpdateEnd:Rg,edgeUpdaterRadius:Ag,defaultMarkerColor:ug,noDragClassName:qg,noWheelClassName:Pg,noPanClassName:Dg,elevateEdgesOnSelect:zg,id:qr==null?void 0:qr.id}),u(Q0,{nodes:n,edges:r,defaultNodes:o,defaultEdges:a,onConnect:b,onConnectStart:C,onConnectStop:S,onConnectEnd:y,onClickConnectStart:w,onClickConnectStop:_,onClickConnectEnd:x,nodesDraggable:ne,nodesConnectable:We,elementsSelectable:oe,minZoom:Ne,maxZoom:Oe,nodeExtent:$t,onNodesChange:kg,onEdgesChange:Lg,snapToGrid:Ie,snapGrid:ut,connectionMode:L,translateExtent:Dn,connectOnClick:Bg,defaultEdgeOptions:Hg,fitView:Mg,fitViewOptions:Vg,onNodesDelete:R,onEdgesDelete:D,onNodeDragStart:B,onNodeDrag:T,onNodeDragStop:q,onSelectionDrag:V,onSelectionDragStart:z,onSelectionDragStop:U}),$&&u(K0,{onSelectionChange:$}),Cg,u(q0,{proOptions:$g,position:Fg})]})})});um.displayName="ReactFlow";var fm=function(t){var n=t.children;return u(Fh,{createStore:$h,children:n})};fm.displayName="ReactFlowProvider";function pm(e){return function(t){var n=E.exports.useState(t),r=se(n,2),o=r[0],a=r[1],i=E.exports.useCallback(function(s){return a(function(l){return e(s,l)})},[]);return[o,a,i]}}var Zx=pm(kh),Jx=pm(c0);const mo=e=>{const{data:t}=Zg(e.modifiedBy),n=Ml(Tr(e.modifiedOn)),{name:r,description:o}=e;return E.exports.useMemo(()=>N(H,{children:[r&&u(Ke,{title:r,placement:"top",enterNextDelay:200,children:u("span",{children:u(_t,{variant:"smallText1",className:"name",children:r})})}),o&&u(Ke,{title:o,placement:"top",enterNextDelay:200,children:u("span",{children:u(_t,{variant:"smallText1",className:"description",children:o})})}),t&&u(Dl,{userProfile:t}),u("div",{children:n})]}),[r,o,t,n])};try{mo.displayName="ActivityNodeLabel",mo.__docgenInfo={description:"",displayName:"ActivityNodeLabel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},etag:{defaultValue:null,description:"",name:"etag",required:!0,type:{name:"string"}},createdOn:{defaultValue:null,description:"",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"",name:"modifiedBy",required:!0,type:{name:"string"}},used:{defaultValue:null,description:"",name:"used",required:!1,type:{name:"(UsedURL | UsedEntity)[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ActivityNodeLabel.tsx#ActivityNodeLabel"]={docgenInfo:mo.__docgenInfo,name:"ActivityNodeLabel",path:"src/lib/containers/provenance/ActivityNodeLabel.tsx#ActivityNodeLabel"})}catch{}const eT=new Set([".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx",".cwl",".wdl",".json"]),go=e=>{const{entityHeader:t}=e;if(t){const n=Kf(t==null?void 0:t.type);if(n==Ws.FILE){const r=t.name.lastIndexOf(".");if(r>-1){const o=t.name.slice(r);if(eT.has(o.toLowerCase()))return u(pe,{icon:"code"})}}else return u(kc,{type:n,includeTooltip:!1})}return u(kc,{type:Ws.FILE,includeTooltip:!1})};try{go.displayName="ProvenanceEntityIcon",go.__docgenInfo={description:"",displayName:"ProvenanceEntityIcon",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!1,type:{name:"EntityHeader"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceEntityIcon.tsx#ProvenanceEntityIcon"]={docgenInfo:go.__docgenInfo,name:"ProvenanceEntityIcon",path:"src/lib/containers/provenance/ProvenanceEntityIcon.tsx#ProvenanceEntityIcon"})}catch{}const yo=e=>{const t=e.versionNumber?`.${e.versionNumber}`:"",n=`${e.id}${t}`;return E.exports.useMemo(()=>N(H,{children:[u("div",{children:u(go,{entityHeader:e})}),N(H,{children:[u("div",{children:u(Ke,{title:e.name,placement:"top",enterNextDelay:300,children:u("a",{href:`${$e.PORTAL}#!Synapse:${n}`,children:e.name})})}),Jg(Kf(e.type))&&N("div",{children:[N("div",{children:["v.",e.versionNumber]}),!e.isLatestVersion&&u("div",{children:"(old version)"})]})]})]}),[e,n])};try{yo.displayName="EntityNodeLabel",yo.__docgenInfo={description:"",displayName:"EntityNodeLabel",props:{name:{defaultValue:null,description:"The name of the entity",name:"name",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"The id of the entity",name:"id",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"The type of the entity",name:"type",required:!0,type:{name:"enum",value:[{value:'"org.sagebionetworks.repo.model.table.EntityView"'},{value:'"org.sagebionetworks.repo.model.table.SubmissionView"'},{value:'"org.sagebionetworks.repo.model.table.Dataset"'},{value:'"org.sagebionetworks.repo.model.table.DatasetCollection"'},{value:'"org.sagebionetworks.repo.model.Link"'},{value:'"org.sagebionetworks.repo.model.docker.DockerRepository"'},{value:'"org.sagebionetworks.repo.model.FileEntity"'},{value:'"org.sagebionetworks.repo.model.table.TableEntity"'},{value:'"org.sagebionetworks.repo.model.table.MaterializedView"'},{value:'"org.sagebionetworks.repo.model.Folder"'},{value:'"org.sagebionetworks.repo.model.Project"'}]}},versionNumber:{defaultValue:null,description:"The version number of the entity",name:"versionNumber",required:!1,type:{name:"number"}},versionLabel:{defaultValue:null,description:"The user defined version label of the entity",name:"versionLabel",required:!1,type:{name:"string"}},benefactorId:{defaultValue:null,description:"The ID of the entity that this Entity's ACL is inherited from.",name:"benefactorId",required:!0,type:{name:"number"}},createdOn:{defaultValue:null,description:"The date this entity was created.",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"The date this entity was last modified.",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"The ID of the user that created this entity.",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"The ID of the user that last modified this entity.",name:"modifiedBy",required:!0,type:{name:"string"}},isLatestVersion:{defaultValue:null,description:"If this version is the latest version of the entity",name:"isLatestVersion",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/EntityNodeLabel.tsx#EntityNodeLabel"]={docgenInfo:yo.__docgenInfo,name:"EntityNodeLabel",path:"src/lib/containers/provenance/EntityNodeLabel.tsx#EntityNodeLabel"})}catch{}var hm={exports:{}};(function(e,t){(function(n,r){typeof Ua=="function"&&!0?e.exports=r():n.pluralize=r()})(Bl,function(){var n=[],r=[],o={},a={},i={};function s(m){return typeof m=="string"?new RegExp("^"+m+"$","i"):m}function l(m,v){return m===v?v:m===m.toLowerCase()?v.toLowerCase():m===m.toUpperCase()?v.toUpperCase():m[0]===m[0].toUpperCase()?v.charAt(0).toUpperCase()+v.substr(1).toLowerCase():v.toLowerCase()}function d(m,v){return m.replace(/\$(\d{1,2})/g,function(b,C){return v[C]||""})}function c(m,v){return m.replace(v[0],function(b,C){var S=d(v[1],arguments);return l(b===""?m[C-1]:b,S)})}function f(m,v,b){if(!m.length||o.hasOwnProperty(m))return v;for(var C=b.length;C--;){var S=b[C];if(S[0].test(v))return c(v,S)}return v}function p(m,v,b){return function(C){var S=C.toLowerCase();return v.hasOwnProperty(S)?l(C,S):m.hasOwnProperty(S)?l(C,m[S]):f(S,C,b)}}function g(m,v,b,C){return function(S){var y=S.toLowerCase();return v.hasOwnProperty(y)?!0:m.hasOwnProperty(y)?!1:f(y,y,b)===y}}function h(m,v,b){var C=v===1?h.singular(m):h.plural(m);return(b?v+" ":"")+C}return h.plural=p(i,a,n),h.isPlural=g(i,a,n),h.singular=p(a,i,r),h.isSingular=g(a,i,r),h.addPluralRule=function(m,v){n.push([s(m),v])},h.addSingularRule=function(m,v){r.push([s(m),v])},h.addUncountableRule=function(m){if(typeof m=="string"){o[m.toLowerCase()]=!0;return}h.addPluralRule(m,"$0"),h.addSingularRule(m,"$0")},h.addIrregularRule=function(m,v){v=v.toLowerCase(),m=m.toLowerCase(),i[m]=v,a[v]=m},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(m){return h.addIrregularRule(m[0],m[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(m){return h.addPluralRule(m[0],m[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(m){return h.addSingularRule(m[0],m[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[e]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(h.addUncountableRule),h})})(hm);const tT=hm.exports,vo=e=>{const{itemCount:t}=e;return E.exports.useMemo(()=>u(H,{children:N("a",{children:["Show ",t," ",tT("item",t),"\u2026"]})}),[t])};try{vo.displayName="ExpandGraphNodeLabel",vo.__docgenInfo={description:"",displayName:"ExpandGraphNodeLabel",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!0,type:{name:"EntityHeader"}},itemCount:{defaultValue:null,description:"",name:"itemCount",required:!0,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ExpandGraphNodeLabel.tsx#ExpandGraphNodeLabel"]={docgenInfo:vo.__docgenInfo,name:"ExpandGraphNodeLabel",path:"src/lib/containers/provenance/ExpandGraphNodeLabel.tsx#ExpandGraphNodeLabel"})}catch{}const nT=/^(.+?\.)?github\.com$/,rT=/^(.+?\.)?githubusercontent\.com$/,bo=e=>{const{url:t}=e;let n="link";const r=new URL(t),{hostname:o}=r;return(o.match(nT)||o.match(rT))&&(n="github"),u(pe,{icon:n})};try{bo.displayName="ProvenanceExternalIcon",bo.__docgenInfo={description:"",displayName:"ProvenanceExternalIcon",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceExternalIcon.tsx#ProvenanceExternalIcon"]={docgenInfo:bo.__docgenInfo,name:"ProvenanceExternalIcon",path:"src/lib/containers/provenance/ProvenanceExternalIcon.tsx#ProvenanceExternalIcon"})}catch{}const So=e=>E.exports.useMemo(()=>N(H,{children:[u("div",{children:u(bo,{url:e.url})}),u(Ke,{title:e.name,placement:"top",enterNextDelay:300,children:u("a",{href:e.url,rel:"noopener noreferrer",children:e.name})})]}),[e.name,e.url]);try{So.displayName="ExternalGraphNodeLabel",So.__docgenInfo={description:"",displayName:"ExternalGraphNodeLabel",props:{concreteType:{defaultValue:null,description:"",name:"concreteType",required:!0,type:{name:'"org.sagebionetworks.repo.model.provenance.UsedURL"'}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},wasExecuted:{defaultValue:null,description:"",name:"wasExecuted",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ExternalGraphNodeLabel.tsx#ExternalGraphNodeLabel"]={docgenInfo:So.__docgenInfo,name:"ExternalGraphNodeLabel",path:"src/lib/containers/provenance/ExternalGraphNodeLabel.tsx#ExternalGraphNodeLabel"})}catch{}var Oi,nu;function oT(){if(nu)return Oi;nu=1;var e=Mv,t=4;function n(r){return e(r,t)}return Oi=n,Oi}var Ii={exports:{}},ru;function mm(){return ru||(ru=1,function(e){e.exports=xp}(Ii)),Ii.exports}var Ni,ou;function aT(){if(ou)return Ni;ou=1;var e=Tp;function t(n,r){var o=[];return e(n,function(a,i,s){r(a,i,s)&&o.push(a)}),o}return Ni=t,Ni}var Ri,au;function gm(){if(au)return Ri;au=1;var e=yv,t=aT(),n=rn,r=Or;function o(a,i){var s=r(a)?e:t;return s(a,n(i))}return Ri=o,Ri}var Ai,iu;function iT(){if(iu)return Ai;iu=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,o){return r!=null&&t.call(r,o)}return Ai=n,Ai}var ki,su;function ym(){if(su)return ki;su=1;var e=iT(),t=vv;function n(r,o){return r!=null&&t(r,o,e)}return ki=n,ki}var Li,lu;function vm(){if(lu)return Li;lu=1;function e(t){return t===void 0}return Li=e,Li}var qi,cu;function bm(){if(cu)return qi;cu=1;var e=vp,t=rn,n=Vv,r=Or;function o(a,i){var s=r(a)?e:n;return s(a,t(i))}return qi=o,qi}var Pi,du;function sT(){if(du)return Pi;du=1;function e(t,n,r,o,a){return a(t,function(i,s,l){r=o?(o=!1,i):n(r,i,s,l)}),r}return Pi=e,Pi}var Di,uu;function Sm(){if(uu)return Di;uu=1;var e=bv,t=Tp,n=rn,r=sT(),o=Or;function a(i,s,l){var d=o(i)?e:r,c=arguments.length<3;return d(i,n(s),l,c,t)}return Di=a,Di}var Mi,fu;function lT(){if(fu)return Mi;fu=1;var e=Sv,t=e("length");return Mi=t,Mi}var Vi,pu;function cT(){if(pu)return Vi;pu=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",i="["+e+"]",s="["+o+"]",l="\\ud83c[\\udffb-\\udfff]",d="(?:"+s+"|"+l+")",c="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",h=d+"?",m="["+a+"]?",v="(?:"+g+"(?:"+[c,f,p].join("|")+")"+m+h+")*",b=m+h+v,C="(?:"+[c+s+"?",s,f,p,i].join("|")+")",S=RegExp(l+"(?="+l+")|"+C+b,"g");function y(w){for(var _=S.lastIndex=0;S.test(w);)++_;return _}return Vi=y,Vi}var Bi,hu;function dT(){if(hu)return Bi;hu=1;var e=lT(),t=wv,n=cT();function r(o){return t(o)?n(o):e(o)}return Bi=r,Bi}var Fi,mu;function uT(){if(mu)return Fi;mu=1;var e=Cv,t=_v,n=bp,r=Xv,o=dT(),a="[object Map]",i="[object Set]";function s(l){if(l==null)return 0;if(n(l))return r(l)?o(l):l.length;var d=t(l);return d==a||d==i?l.size:e(l).length}return Fi=s,Fi}var $i,gu;function fT(){if(gu)return $i;gu=1;var e=Bv,t=Fv,n=Ev,r=rn,o=xv,a=Or,i=Tv.exports,s=Sp,l=wp,d=Ov;function c(f,p,g){var h=a(f),m=h||i(f)||d(f);if(p=r(p),g==null){var v=f&&f.constructor;m?g=h?new v:[]:l(f)?g=s(v)?t(o(f)):{}:g={}}return(m?e:n)(f,function(b,C,S){return p(g,b,C,S)}),g}return $i=c,$i}var Hi,yu;function pT(){if(yu)return Hi;yu=1;var e=vp;function t(n,r){return e(r,function(o){return n[o]})}return Hi=t,Hi}var zi,vu;function wm(){if(vu)return zi;vu=1;var e=pT(),t=Fl;function n(r){return r==null?[]:e(r,t(r))}return zi=n,zi}var Ui,bu;function Qe(){if(bu)return Ui;bu=1;var e;if(typeof Ua=="function")try{e={clone:oT(),constant:Cp,each:mm(),filter:gm(),has:ym(),isArray:Or,isEmpty:ov,isFunction:Sp,isUndefined:vm(),keys:Fl,map:bm(),reduce:Sm(),size:uT(),transform:fT(),union:av,values:wm()}}catch{}return e||(e=window._),Ui=e,Ui}var Yi,Su;function sc(){if(Su)return Yi;Su=1;var e=Qe();Yi=o;var t="\0",n="\0",r="";function o(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(c){return this._label=c,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return e.keys(this._nodes)},o.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(f){return e.isEmpty(c._in[f])})},o.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(f){return e.isEmpty(c._out[f])})},o.prototype.setNodes=function(c,f){var p=arguments,g=this;return e.each(c,function(h){p.length>1?g.setNode(h,f):g.setNode(h)}),this},o.prototype.setNode=function(c,f){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=f),this):(this._nodes[c]=arguments.length>1?f:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},o.prototype.node=function(c){return this._nodes[c]},o.prototype.hasNode=function(c){return e.has(this._nodes,c)},o.prototype.removeNode=function(c){var f=this;if(e.has(this._nodes,c)){var p=function(g){f.removeEdge(f._edgeObjs[g])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(g){f.setParent(g)}),delete this._children[c]),e.each(e.keys(this._in[c]),p),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),p),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},o.prototype.setParent=function(c,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=n;else{f+="";for(var p=f;!e.isUndefined(p);p=this.parent(p))if(p===c)throw new Error("Setting "+f+" as parent of "+c+" would create a cycle");this.setNode(f)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=f,this._children[f][c]=!0,this},o.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},o.prototype.parent=function(c){if(this._isCompound){var f=this._parent[c];if(f!==n)return f}},o.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var f=this._children[c];if(f)return e.keys(f)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},o.prototype.predecessors=function(c){var f=this._preds[c];if(f)return e.keys(f)},o.prototype.successors=function(c){var f=this._sucs[c];if(f)return e.keys(f)},o.prototype.neighbors=function(c){var f=this.predecessors(c);if(f)return e.union(f,this.successors(c))},o.prototype.isLeaf=function(c){var f;return this.isDirected()?f=this.successors(c):f=this.neighbors(c),f.length===0},o.prototype.filterNodes=function(c){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var p=this;e.each(this._nodes,function(m,v){c(v)&&f.setNode(v,m)}),e.each(this._edgeObjs,function(m){f.hasNode(m.v)&&f.hasNode(m.w)&&f.setEdge(m,p.edge(m))});var g={};function h(m){var v=p.parent(m);return v===void 0||f.hasNode(v)?(g[m]=v,v):v in g?g[v]:h(v)}return this._isCompound&&e.each(f.nodes(),function(m){f.setParent(m,h(m))}),f},o.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return e.values(this._edgeObjs)},o.prototype.setPath=function(c,f){var p=this,g=arguments;return e.reduce(c,function(h,m){return g.length>1?p.setEdge(h,m,f):p.setEdge(h,m),m}),this},o.prototype.setEdge=function(){var c,f,p,g,h=!1,m=arguments[0];typeof m=="object"&&m!==null&&"v"in m?(c=m.v,f=m.w,p=m.name,arguments.length===2&&(g=arguments[1],h=!0)):(c=m,f=arguments[1],p=arguments[3],arguments.length>2&&(g=arguments[2],h=!0)),c=""+c,f=""+f,e.isUndefined(p)||(p=""+p);var v=s(this._isDirected,c,f,p);if(e.has(this._edgeLabels,v))return h&&(this._edgeLabels[v]=g),this;if(!e.isUndefined(p)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this._edgeLabels[v]=h?g:this._defaultEdgeLabelFn(c,f,p);var b=l(this._isDirected,c,f,p);return c=b.v,f=b.w,Object.freeze(b),this._edgeObjs[v]=b,a(this._preds[f],c),a(this._sucs[c],f),this._in[f][v]=b,this._out[c][v]=b,this._edgeCount++,this},o.prototype.edge=function(c,f,p){var g=arguments.length===1?d(this._isDirected,arguments[0]):s(this._isDirected,c,f,p);return this._edgeLabels[g]},o.prototype.hasEdge=function(c,f,p){var g=arguments.length===1?d(this._isDirected,arguments[0]):s(this._isDirected,c,f,p);return e.has(this._edgeLabels,g)},o.prototype.removeEdge=function(c,f,p){var g=arguments.length===1?d(this._isDirected,arguments[0]):s(this._isDirected,c,f,p),h=this._edgeObjs[g];return h&&(c=h.v,f=h.w,delete this._edgeLabels[g],delete this._edgeObjs[g],i(this._preds[f],c),i(this._sucs[c],f),delete this._in[f][g],delete this._out[c][g],this._edgeCount--),this},o.prototype.inEdges=function(c,f){var p=this._in[c];if(p){var g=e.values(p);return f?e.filter(g,function(h){return h.v===f}):g}},o.prototype.outEdges=function(c,f){var p=this._out[c];if(p){var g=e.values(p);return f?e.filter(g,function(h){return h.w===f}):g}},o.prototype.nodeEdges=function(c,f){var p=this.inEdges(c,f);if(p)return p.concat(this.outEdges(c,f))};function a(c,f){c[f]?c[f]++:c[f]=1}function i(c,f){--c[f]||delete c[f]}function s(c,f,p,g){var h=""+f,m=""+p;if(!c&&h>m){var v=h;h=m,m=v}return h+r+m+r+(e.isUndefined(g)?t:g)}function l(c,f,p,g){var h=""+f,m=""+p;if(!c&&h>m){var v=h;h=m,m=v}var b={v:h,w:m};return g&&(b.name=g),b}function d(c,f){return s(c,f.v,f.w,f.name)}return Yi}var ji,wu;function hT(){return wu||(wu=1,ji="2.1.8"),ji}var Wi,Cu;function mT(){return Cu||(Cu=1,Wi={Graph:sc(),version:hT()}),Wi}var Gi,_u;function gT(){if(_u)return Gi;_u=1;var e=Qe(),t=sc();Gi={write:n,read:a};function n(i){var s={options:{directed:i.isDirected(),multigraph:i.isMultigraph(),compound:i.isCompound()},nodes:r(i),edges:o(i)};return e.isUndefined(i.graph())||(s.value=e.clone(i.graph())),s}function r(i){return e.map(i.nodes(),function(s){var l=i.node(s),d=i.parent(s),c={v:s};return e.isUndefined(l)||(c.value=l),e.isUndefined(d)||(c.parent=d),c})}function o(i){return e.map(i.edges(),function(s){var l=i.edge(s),d={v:s.v,w:s.w};return e.isUndefined(s.name)||(d.name=s.name),e.isUndefined(l)||(d.value=l),d})}function a(i){var s=new t(i.options).setGraph(i.value);return e.each(i.nodes,function(l){s.setNode(l.v,l.value),l.parent&&s.setParent(l.v,l.parent)}),e.each(i.edges,function(l){s.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),s}return Gi}var Ki,Eu;function yT(){if(Eu)return Ki;Eu=1;var e=Qe();Ki=t;function t(n){var r={},o=[],a;function i(s){e.has(r,s)||(r[s]=!0,a.push(s),e.each(n.successors(s),i),e.each(n.predecessors(s),i))}return e.each(n.nodes(),function(s){a=[],i(s),a.length&&o.push(a)}),o}return Ki}var Xi,xu;function Cm(){if(xu)return Xi;xu=1;var e=Qe();Xi=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var o=this._keyIndices;if(n=String(n),!e.has(o,n)){var a=this._arr,i=a.length;return o[n]=i,a.push({key:n,priority:r}),this._decrease(i),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var o=this._keyIndices[n];if(r>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[o].priority+" New: "+r);this._arr[o].priority=r,this._decrease(o)},t.prototype._heapify=function(n){var r=this._arr,o=2*n,a=o+1,i=n;o<r.length&&(i=r[o].priority<r[i].priority?o:i,a<r.length&&(i=r[a].priority<r[i].priority?a:i),i!==n&&(this._swap(n,i),this._heapify(i)))},t.prototype._decrease=function(n){for(var r=this._arr,o=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<o));)this._swap(n,a),n=a},t.prototype._swap=function(n,r){var o=this._arr,a=this._keyIndices,i=o[n],s=o[r];o[n]=s,o[r]=i,a[s.key]=n,a[i.key]=r},Xi}var Qi,Tu;function _m(){if(Tu)return Qi;Tu=1;var e=Qe(),t=Cm();Qi=r;var n=e.constant(1);function r(a,i,s,l){return o(a,String(i),s||n,l||function(d){return a.outEdges(d)})}function o(a,i,s,l){var d={},c=new t,f,p,g=function(h){var m=h.v!==f?h.v:h.w,v=d[m],b=s(h),C=p.distance+b;if(b<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+b);C<v.distance&&(v.distance=C,v.predecessor=f,c.decrease(m,C))};for(a.nodes().forEach(function(h){var m=h===i?0:Number.POSITIVE_INFINITY;d[h]={distance:m},c.add(h,m)});c.size()>0&&(f=c.removeMin(),p=d[f],p.distance!==Number.POSITIVE_INFINITY);)l(f).forEach(g);return d}return Qi}var Zi,Ou;function vT(){if(Ou)return Zi;Ou=1;var e=_m(),t=Qe();Zi=n;function n(r,o,a){return t.transform(r.nodes(),function(i,s){i[s]=e(r,s,o,a)},{})}return Zi}var Ji,Iu;function Em(){if(Iu)return Ji;Iu=1;var e=Qe();Ji=t;function t(n){var r=0,o=[],a={},i=[];function s(l){var d=a[l]={onStack:!0,lowlink:r,index:r++};if(o.push(l),n.successors(l).forEach(function(p){e.has(a,p)?a[p].onStack&&(d.lowlink=Math.min(d.lowlink,a[p].index)):(s(p),d.lowlink=Math.min(d.lowlink,a[p].lowlink))}),d.lowlink===d.index){var c=[],f;do f=o.pop(),a[f].onStack=!1,c.push(f);while(l!==f);i.push(c)}}return n.nodes().forEach(function(l){e.has(a,l)||s(l)}),i}return Ji}var es,Nu;function bT(){if(Nu)return es;Nu=1;var e=Qe(),t=Em();es=n;function n(r){return e.filter(t(r),function(o){return o.length>1||o.length===1&&r.hasEdge(o[0],o[0])})}return es}var ts,Ru;function ST(){if(Ru)return ts;Ru=1;var e=Qe();ts=n;var t=e.constant(1);function n(o,a,i){return r(o,a||t,i||function(s){return o.outEdges(s)})}function r(o,a,i){var s={},l=o.nodes();return l.forEach(function(d){s[d]={},s[d][d]={distance:0},l.forEach(function(c){d!==c&&(s[d][c]={distance:Number.POSITIVE_INFINITY})}),i(d).forEach(function(c){var f=c.v===d?c.w:c.v,p=a(c);s[d][f]={distance:p,predecessor:d}})}),l.forEach(function(d){var c=s[d];l.forEach(function(f){var p=s[f];l.forEach(function(g){var h=p[d],m=c[g],v=p[g],b=h.distance+m.distance;b<v.distance&&(v.distance=b,v.predecessor=m.predecessor)})})}),s}return ts}var ns,Au;function xm(){if(Au)return ns;Au=1;var e=Qe();ns=t,t.CycleException=n;function t(r){var o={},a={},i=[];function s(l){if(e.has(a,l))throw new n;e.has(o,l)||(a[l]=!0,o[l]=!0,e.each(r.predecessors(l),s),delete a[l],i.push(l))}if(e.each(r.sinks(),s),e.size(o)!==r.nodeCount())throw new n;return i}function n(){}return n.prototype=new Error,ns}var rs,ku;function wT(){if(ku)return rs;ku=1;var e=xm();rs=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return rs}var os,Lu;function Tm(){if(Lu)return os;Lu=1;var e=Qe();os=t;function t(r,o,a){e.isArray(o)||(o=[o]);var i=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],l={};return e.each(o,function(d){if(!r.hasNode(d))throw new Error("Graph does not have node: "+d);n(r,d,a==="post",l,i,s)}),s}function n(r,o,a,i,s,l){e.has(i,o)||(i[o]=!0,a||l.push(o),e.each(s(o),function(d){n(r,d,a,i,s,l)}),a&&l.push(o))}return os}var as,qu;function CT(){if(qu)return as;qu=1;var e=Tm();as=t;function t(n,r){return e(n,r,"post")}return as}var is,Pu;function _T(){if(Pu)return is;Pu=1;var e=Tm();is=t;function t(n,r){return e(n,r,"pre")}return is}var ss,Du;function ET(){if(Du)return ss;Du=1;var e=Qe(),t=sc(),n=Cm();ss=r;function r(o,a){var i=new t,s={},l=new n,d;function c(p){var g=p.v===d?p.w:p.v,h=l.priority(g);if(h!==void 0){var m=a(p);m<h&&(s[g]=d,l.decrease(g,m))}}if(o.nodeCount()===0)return i;e.each(o.nodes(),function(p){l.add(p,Number.POSITIVE_INFINITY),i.setNode(p)}),l.decrease(o.nodes()[0],0);for(var f=!1;l.size()>0;){if(d=l.removeMin(),e.has(s,d))i.setEdge(d,s[d]);else{if(f)throw new Error("Input graph is not connected: "+o);f=!0}o.nodeEdges(d).forEach(c)}return i}return ss}var ls,Mu;function xT(){return Mu||(Mu=1,ls={components:yT(),dijkstra:_m(),dijkstraAll:vT(),findCycles:bT(),floydWarshall:ST(),isAcyclic:wT(),postorder:CT(),preorder:_T(),prim:ET(),tarjan:Em(),topsort:xm()}),ls}var cs,Vu;function TT(){if(Vu)return cs;Vu=1;var e=mT();return cs={Graph:e.Graph,json:gT(),alg:xT(),version:e.version},cs}var Da;if(typeof Ua=="function")try{Da=TT()}catch{}Da||(Da=window.graphlib);var nt=Da,ds,Bu;function OT(){if(Bu)return ds;Bu=1;var e=rn,t=bp,n=Fl;function r(o){return function(a,i,s){var l=Object(a);if(!t(a)){var d=e(i);a=n(a),i=function(f){return d(l[f],f,l)}}var c=o(a,i,s);return c>-1?l[d?a[c]:c]:void 0}}return ds=r,ds}var us,Fu;function IT(){if(Fu)return us;Fu=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return us=t,us}var fs,$u;function NT(){if($u)return fs;$u=1;var e=IT(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return fs=n,fs}var ps,Hu;function RT(){if(Hu)return ps;Hu=1;var e=NT(),t=wp,n=_p,r=0/0,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt;function l(d){if(typeof d=="number")return d;if(n(d))return r;if(t(d)){var c=typeof d.valueOf=="function"?d.valueOf():d;d=t(c)?c+"":c}if(typeof d!="string")return d===0?d:+d;d=e(d);var f=a.test(d);return f||i.test(d)?s(d.slice(2),f?2:8):o.test(d)?r:+d}return ps=l,ps}var hs,zu;function Om(){if(zu)return hs;zu=1;var e=RT(),t=1/0,n=17976931348623157e292;function r(o){if(!o)return o===0?o:0;if(o=e(o),o===t||o===-t){var a=o<0?-1:1;return a*n}return o===o?o:0}return hs=r,hs}var ms,Uu;function AT(){if(Uu)return ms;Uu=1;var e=Om();function t(n){var r=e(n),o=r%1;return r===r?o?r-o:r:0}return ms=t,ms}var gs,Yu;function kT(){if(Yu)return gs;Yu=1;var e=Qv,t=rn,n=AT(),r=Math.max;function o(a,i,s){var l=a==null?0:a.length;if(!l)return-1;var d=s==null?0:n(s);return d<0&&(d=r(l+d,0)),e(a,t(i),d)}return gs=o,gs}var ys,ju;function LT(){if(ju)return ys;ju=1;var e=OT(),t=kT(),n=e(t);return ys=n,ys}var vs,Wu;function qT(){if(Wu)return vs;Wu=1;var e=Iv,t=$v,n=Nv;function r(o,a){return o==null?o:e(o,t(a),n)}return vs=r,vs}var bs,Gu;function lc(){if(Gu)return bs;Gu=1;var e=_p;function t(n,r,o){for(var a=-1,i=n.length;++a<i;){var s=n[a],l=r(s);if(l!=null&&(d===void 0?l===l&&!e(l):o(l,d)))var d=l,c=s}return c}return bs=t,bs}var Ss,Ku;function PT(){if(Ku)return Ss;Ku=1;function e(t,n){return t>n}return Ss=e,Ss}var ws,Xu;function DT(){if(Xu)return ws;Xu=1;var e=lc(),t=PT(),n=Ep;function r(o){return o&&o.length?e(o,n,t):void 0}return ws=r,ws}var Cs,Qu;function MT(){if(Qu)return Cs;Qu=1;var e=zv,t=Hv,n=t(function(r,o,a){e(r,o,a)});return Cs=n,Cs}var _s,Zu;function Im(){if(Zu)return _s;Zu=1;function e(t,n){return t<n}return _s=e,_s}var Es,Ju;function VT(){if(Ju)return Es;Ju=1;var e=lc(),t=Im(),n=Ep;function r(o){return o&&o.length?e(o,n,t):void 0}return Es=r,Es}var xs,ef;function BT(){if(ef)return xs;ef=1;var e=lc(),t=rn,n=Im();function r(o,a){return o&&o.length?e(o,t(a),n):void 0}return xs=r,xs}var Ts,tf;function FT(){if(tf)return Ts;tf=1;var e=Rv,t=function(){return e.Date.now()};return Ts=t,Ts}var Os,nf;function $T(){if(nf)return Os;nf=1;var e=Math.ceil,t=Math.max;function n(r,o,a,i){for(var s=-1,l=t(e((o-r)/(a||1)),0),d=Array(l);l--;)d[i?l:++s]=r,r+=a;return d}return Os=n,Os}var Is,rf;function HT(){if(rf)return Is;rf=1;var e=$T(),t=Uv,n=Om();function r(o){return function(a,i,s){return s&&typeof s!="number"&&t(a,i,s)&&(i=s=void 0),a=n(a),i===void 0?(i=a,a=0):i=n(i),s=s===void 0?a<i?1:-1:n(s),e(a,i,s,o)}}return Is=r,Is}var Ns,of;function zT(){if(of)return Ns;of=1;var e=HT(),t=e();return Ns=t,Ns}var Rs,af;function UT(){if(af)return Rs;af=1;var e=Av,t=0;function n(r){var o=++t;return e(r)+o}return Rs=n,Rs}var As,sf;function YT(){if(sf)return As;sf=1;function e(t,n,r){for(var o=-1,a=t.length,i=n.length,s={};++o<a;){var l=o<i?n[o]:void 0;r(s,t[o],l)}return s}return As=e,As}var ks,lf;function jT(){if(lf)return ks;lf=1;var e=kv,t=YT();function n(r,o){return t(r||[],o||[],e)}return ks=n,ks}var Ma;if(typeof Ua=="function")try{Ma={cloneDeep:Yv,constant:Cp,defaults:jv,each:mm(),filter:gm(),find:LT(),flatten:Lv,forEach:xp,forIn:qT(),has:ym(),isUndefined:vm(),last:Wv,map:bm(),mapValues:qv,max:DT(),merge:MT(),min:VT(),minBy:BT(),now:FT(),pick:Pv,range:zT(),reduce:Sm(),sortBy:Gv,uniqueId:UT(),values:wm(),zipObject:jT()}}catch{}Ma||(Ma=window._);var ve=Ma,WT=ei;function ei(){var e={};e._next=e._prev=e,this._sentinel=e}ei.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Nm(t),t};ei.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Nm(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};ei.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,GT)),n=n._prev;return"["+e.join(", ")+"]"};function Nm(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function GT(e,t){if(e!=="_next"&&e!=="_prev")return t}var vt=ve,KT=nt.Graph,XT=WT,QT=JT,ZT=vt.constant(1);function JT(e,t){if(e.nodeCount()<=1)return[];var n=tO(e,t||ZT),r=eO(n.graph,n.buckets,n.zeroIdx);return vt.flatten(vt.map(r,function(o){return e.outEdges(o.v,o.w)}),!0)}function eO(e,t,n){for(var r=[],o=t[t.length-1],a=t[0],i;e.nodeCount();){for(;i=a.dequeue();)Ls(e,t,n,i);for(;i=o.dequeue();)Ls(e,t,n,i);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(i=t[s].dequeue(),i){r=r.concat(Ls(e,t,n,i,!0));break}}}return r}function Ls(e,t,n,r,o){var a=o?[]:void 0;return vt.forEach(e.inEdges(r.v),function(i){var s=e.edge(i),l=e.node(i.v);o&&a.push({v:i.v,w:i.w}),l.out-=s,pl(t,n,l)}),vt.forEach(e.outEdges(r.v),function(i){var s=e.edge(i),l=i.w,d=e.node(l);d.in-=s,pl(t,n,d)}),e.removeNode(r.v),a}function tO(e,t){var n=new KT,r=0,o=0;vt.forEach(e.nodes(),function(s){n.setNode(s,{v:s,in:0,out:0})}),vt.forEach(e.edges(),function(s){var l=n.edge(s.v,s.w)||0,d=t(s),c=l+d;n.setEdge(s.v,s.w,c),o=Math.max(o,n.node(s.v).out+=d),r=Math.max(r,n.node(s.w).in+=d)});var a=vt.range(o+r+3).map(function(){return new XT}),i=r+1;return vt.forEach(n.nodes(),function(s){pl(a,i,n.node(s))}),{graph:n,buckets:a,zeroIdx:i}}function pl(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var Ut=ve,nO=QT,rO={run:oO,undo:iO};function oO(e){var t=e.graph().acyclicer==="greedy"?nO(e,n(e)):aO(e);Ut.forEach(t,function(r){var o=e.edge(r);e.removeEdge(r),o.forwardName=r.name,o.reversed=!0,e.setEdge(r.w,r.v,o,Ut.uniqueId("rev"))});function n(r){return function(o){return r.edge(o).weight}}}function aO(e){var t=[],n={},r={};function o(a){Ut.has(r,a)||(r[a]=!0,n[a]=!0,Ut.forEach(e.outEdges(a),function(i){Ut.has(n,i.w)?t.push(i):o(i.w)}),delete n[a])}return Ut.forEach(e.nodes(),o),t}function iO(e){Ut.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var de=ve,Rm=nt.Graph,De={addDummyNode:Am,simplify:sO,asNonCompoundGraph:lO,successorWeights:cO,predecessorWeights:dO,intersectRect:uO,buildLayerMatrix:fO,normalizeRanks:pO,removeEmptyRanks:hO,addBorderNode:mO,maxRank:km,partition:gO,time:yO,notime:vO};function Am(e,t,n,r){var o;do o=de.uniqueId(r);while(e.hasNode(o));return n.dummy=t,e.setNode(o,n),o}function sO(e){var t=new Rm().setGraph(e.graph());return de.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),de.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})}),t}function lO(e){var t=new Rm({multigraph:e.isMultigraph()}).setGraph(e.graph());return de.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),de.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function cO(e){var t=de.map(e.nodes(),function(n){var r={};return de.forEach(e.outEdges(n),function(o){r[o.w]=(r[o.w]||0)+e.edge(o).weight}),r});return de.zipObject(e.nodes(),t)}function dO(e){var t=de.map(e.nodes(),function(n){var r={};return de.forEach(e.inEdges(n),function(o){r[o.v]=(r[o.v]||0)+e.edge(o).weight}),r});return de.zipObject(e.nodes(),t)}function uO(e,t){var n=e.x,r=e.y,o=t.x-n,a=t.y-r,i=e.width/2,s=e.height/2;if(!o&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var l,d;return Math.abs(a)*i>Math.abs(o)*s?(a<0&&(s=-s),l=s*o/a,d=s):(o<0&&(i=-i),l=i,d=i*a/o),{x:n+l,y:r+d}}function fO(e){var t=de.map(de.range(km(e)+1),function(){return[]});return de.forEach(e.nodes(),function(n){var r=e.node(n),o=r.rank;de.isUndefined(o)||(t[o][r.order]=n)}),t}function pO(e){var t=de.min(de.map(e.nodes(),function(n){return e.node(n).rank}));de.forEach(e.nodes(),function(n){var r=e.node(n);de.has(r,"rank")&&(r.rank-=t)})}function hO(e){var t=de.min(de.map(e.nodes(),function(a){return e.node(a).rank})),n=[];de.forEach(e.nodes(),function(a){var i=e.node(a).rank-t;n[i]||(n[i]=[]),n[i].push(a)});var r=0,o=e.graph().nodeRankFactor;de.forEach(n,function(a,i){de.isUndefined(a)&&i%o!==0?--r:r&&de.forEach(a,function(s){e.node(s).rank+=r})})}function mO(e,t,n,r){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=r),Am(e,"border",o,t)}function km(e){return de.max(de.map(e.nodes(),function(t){var n=e.node(t).rank;if(!de.isUndefined(n))return n}))}function gO(e,t){var n={lhs:[],rhs:[]};return de.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function yO(e,t){var n=de.now();try{return t()}finally{console.log(e+" time: "+(de.now()-n)+"ms")}}function vO(e,t){return t()}var Lm=ve,bO=De,SO={run:wO,undo:_O};function wO(e){e.graph().dummyChains=[],Lm.forEach(e.edges(),function(t){CO(e,t)})}function CO(e,t){var n=t.v,r=e.node(n).rank,o=t.w,a=e.node(o).rank,i=t.name,s=e.edge(t),l=s.labelRank;if(a!==r+1){e.removeEdge(t);var d,c,f;for(f=0,++r;r<a;++f,++r)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:t,rank:r},d=bO.addDummyNode(e,"edge",c,"_d"),r===l&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),e.setEdge(n,d,{weight:s.weight},i),f===0&&e.graph().dummyChains.push(d),n=d;e.setEdge(n,o,{weight:s.weight},i)}}function _O(e){Lm.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,o;for(e.setEdge(n.edgeObj,r);n.dummy;)o=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=o,n=e.node(t)})}var Kr=ve,ti={longestPath:EO,slack:xO};function EO(e){var t={};function n(r){var o=e.node(r);if(Kr.has(t,r))return o.rank;t[r]=!0;var a=Kr.min(Kr.map(e.outEdges(r),function(i){return n(i.w)-e.edge(i).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),o.rank=a}Kr.forEach(e.sources(),n)}function xO(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Va=ve,TO=nt.Graph,Ba=ti.slack,qm=OO;function OO(e){var t=new TO({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var o,a;IO(t,e)<r;)o=NO(t,e),a=t.hasNode(o.v)?Ba(e,o):-Ba(e,o),RO(t,e,a);return t}function IO(e,t){function n(r){Va.forEach(t.nodeEdges(r),function(o){var a=o.v,i=r===a?o.w:a;!e.hasNode(i)&&!Ba(t,o)&&(e.setNode(i,{}),e.setEdge(r,i,{}),n(i))})}return Va.forEach(e.nodes(),n),e.nodeCount()}function NO(e,t){return Va.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return Ba(t,n)})}function RO(e,t,n){Va.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var xt=ve,AO=qm,kO=ti.slack,LO=ti.longestPath,qO=nt.alg.preorder,PO=nt.alg.postorder,DO=De.simplify,MO=sn;sn.initLowLimValues=dc;sn.initCutValues=cc;sn.calcCutValue=Pm;sn.leaveEdge=Mm;sn.enterEdge=Vm;sn.exchangeEdges=Bm;function sn(e){e=DO(e),LO(e);var t=AO(e);dc(t),cc(t,e);for(var n,r;n=Mm(t);)r=Vm(t,e,n),Bm(t,e,n,r)}function cc(e,t){var n=PO(e,e.nodes());n=n.slice(0,n.length-1),xt.forEach(n,function(r){VO(e,t,r)})}function VO(e,t,n){var r=e.node(n),o=r.parent;e.edge(n,o).cutvalue=Pm(e,t,n)}function Pm(e,t,n){var r=e.node(n),o=r.parent,a=!0,i=t.edge(n,o),s=0;return i||(a=!1,i=t.edge(o,n)),s=i.weight,xt.forEach(t.nodeEdges(n),function(l){var d=l.v===n,c=d?l.w:l.v;if(c!==o){var f=d===a,p=t.edge(l).weight;if(s+=f?p:-p,FO(e,n,c)){var g=e.edge(n,c).cutvalue;s+=f?-g:g}}}),s}function dc(e,t){arguments.length<2&&(t=e.nodes()[0]),Dm(e,{},1,t)}function Dm(e,t,n,r,o){var a=n,i=e.node(r);return t[r]=!0,xt.forEach(e.neighbors(r),function(s){xt.has(t,s)||(n=Dm(e,t,n,s,r))}),i.low=a,i.lim=n++,o?i.parent=o:delete i.parent,n}function Mm(e){return xt.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Vm(e,t,n){var r=n.v,o=n.w;t.hasEdge(r,o)||(r=n.w,o=n.v);var a=e.node(r),i=e.node(o),s=a,l=!1;a.lim>i.lim&&(s=i,l=!0);var d=xt.filter(t.edges(),function(c){return l===cf(e,e.node(c.v),s)&&l!==cf(e,e.node(c.w),s)});return xt.minBy(d,function(c){return kO(t,c)})}function Bm(e,t,n,r){var o=n.v,a=n.w;e.removeEdge(o,a),e.setEdge(r.v,r.w,{}),dc(e),cc(e,t),BO(e,t)}function BO(e,t){var n=xt.find(e.nodes(),function(o){return!t.node(o).parent}),r=qO(e,n);r=r.slice(1),xt.forEach(r,function(o){var a=e.node(o).parent,i=t.edge(o,a),s=!1;i||(i=t.edge(a,o),s=!0),t.node(o).rank=t.node(a).rank+(s?i.minlen:-i.minlen)})}function FO(e,t,n){return e.hasEdge(t,n)}function cf(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var $O=ti,Fm=$O.longestPath,HO=qm,zO=MO,UO=YO;function YO(e){switch(e.graph().ranker){case"network-simplex":df(e);break;case"tight-tree":WO(e);break;case"longest-path":jO(e);break;default:df(e)}}var jO=Fm;function WO(e){Fm(e),HO(e)}function df(e){zO(e)}var hl=ve,GO=KO;function KO(e){var t=QO(e);hl.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),o=r.edgeObj,a=XO(e,t,o.v,o.w),i=a.path,s=a.lca,l=0,d=i[l],c=!0;n!==o.w;){if(r=e.node(n),c){for(;(d=i[l])!==s&&e.node(d).maxRank<r.rank;)l++;d===s&&(c=!1)}if(!c){for(;l<i.length-1&&e.node(d=i[l+1]).minRank<=r.rank;)l++;d=i[l]}e.setParent(n,d),n=e.successors(n)[0]}})}function XO(e,t,n,r){var o=[],a=[],i=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim),l,d;l=n;do l=e.parent(l),o.push(l);while(l&&(t[l].low>i||s>t[l].lim));for(d=l,l=r;(l=e.parent(l))!==d;)a.push(l);return{path:o.concat(a.reverse()),lca:d}}function QO(e){var t={},n=0;function r(o){var a=n;hl.forEach(e.children(o),r),t[o]={low:a,lim:n++}}return hl.forEach(e.children(),r),t}var bt=ve,ml=De,ZO={run:JO,cleanup:nI};function JO(e){var t=ml.addDummyNode(e,"root",{},"_root"),n=eI(e),r=bt.max(bt.values(n))-1,o=2*r+1;e.graph().nestingRoot=t,bt.forEach(e.edges(),function(i){e.edge(i).minlen*=o});var a=tI(e)+1;bt.forEach(e.children(),function(i){$m(e,t,o,a,r,n,i)}),e.graph().nodeRankFactor=o}function $m(e,t,n,r,o,a,i){var s=e.children(i);if(!s.length){i!==t&&e.setEdge(t,i,{weight:0,minlen:n});return}var l=ml.addBorderNode(e,"_bt"),d=ml.addBorderNode(e,"_bb"),c=e.node(i);e.setParent(l,i),c.borderTop=l,e.setParent(d,i),c.borderBottom=d,bt.forEach(s,function(f){$m(e,t,n,r,o,a,f);var p=e.node(f),g=p.borderTop?p.borderTop:f,h=p.borderBottom?p.borderBottom:f,m=p.borderTop?r:2*r,v=g!==h?1:o-a[i]+1;e.setEdge(l,g,{weight:m,minlen:v,nestingEdge:!0}),e.setEdge(h,d,{weight:m,minlen:v,nestingEdge:!0})}),e.parent(i)||e.setEdge(t,l,{weight:0,minlen:o+a[i]})}function eI(e){var t={};function n(r,o){var a=e.children(r);a&&a.length&&bt.forEach(a,function(i){n(i,o+1)}),t[r]=o}return bt.forEach(e.children(),function(r){n(r,1)}),t}function tI(e){return bt.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function nI(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,bt.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var qs=ve,rI=De,oI=aI;function aI(e){function t(n){var r=e.children(n),o=e.node(n);if(r.length&&qs.forEach(r,t),qs.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var a=o.minRank,i=o.maxRank+1;a<i;++a)uf(e,"borderLeft","_bl",n,o,a),uf(e,"borderRight","_br",n,o,a)}}qs.forEach(e.children(),t)}function uf(e,t,n,r,o,a){var i={width:0,height:0,rank:a,borderType:t},s=o[t][a-1],l=rI.addDummyNode(e,"border",i,n);o[t][a]=l,e.setParent(l,r),s&&e.setEdge(s,l,{weight:1})}var st=ve,iI={adjust:sI,undo:lI};function sI(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Hm(e)}function lI(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&cI(e),(t==="lr"||t==="rl")&&(dI(e),Hm(e))}function Hm(e){st.forEach(e.nodes(),function(t){ff(e.node(t))}),st.forEach(e.edges(),function(t){ff(e.edge(t))})}function ff(e){var t=e.width;e.width=e.height,e.height=t}function cI(e){st.forEach(e.nodes(),function(t){Ps(e.node(t))}),st.forEach(e.edges(),function(t){var n=e.edge(t);st.forEach(n.points,Ps),st.has(n,"y")&&Ps(n)})}function Ps(e){e.y=-e.y}function dI(e){st.forEach(e.nodes(),function(t){Ds(e.node(t))}),st.forEach(e.edges(),function(t){var n=e.edge(t);st.forEach(n.points,Ds),st.has(n,"x")&&Ds(n)})}function Ds(e){var t=e.x;e.x=e.y,e.y=t}var ht=ve,uI=fI;function fI(e){var t={},n=ht.filter(e.nodes(),function(s){return!e.children(s).length}),r=ht.max(ht.map(n,function(s){return e.node(s).rank})),o=ht.map(ht.range(r+1),function(){return[]});function a(s){if(!ht.has(t,s)){t[s]=!0;var l=e.node(s);o[l.rank].push(s),ht.forEach(e.successors(s),a)}}var i=ht.sortBy(n,function(s){return e.node(s).rank});return ht.forEach(i,a),o}var Nt=ve,pI=hI;function hI(e,t){for(var n=0,r=1;r<t.length;++r)n+=mI(e,t[r-1],t[r]);return n}function mI(e,t,n){for(var r=Nt.zipObject(n,Nt.map(n,function(d,c){return c})),o=Nt.flatten(Nt.map(t,function(d){return Nt.sortBy(Nt.map(e.outEdges(d),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var i=2*a-1;a-=1;var s=Nt.map(new Array(i),function(){return 0}),l=0;return Nt.forEach(o.forEach(function(d){var c=d.pos+a;s[c]+=d.weight;for(var f=0;c>0;)c%2&&(f+=s[c+1]),c=c-1>>1,s[c]+=d.weight;l+=d.weight*f})),l}var pf=ve,gI=yI;function yI(e,t){return pf.map(t,function(n){var r=e.inEdges(n);if(r.length){var o=pf.reduce(r,function(a,i){var s=e.edge(i),l=e.node(i.v);return{sum:a.sum+s.weight*l.order,weight:a.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:n}})}var Be=ve,vI=bI;function bI(e,t){var n={};Be.forEach(e,function(o,a){var i=n[o.v]={indegree:0,in:[],out:[],vs:[o.v],i:a};Be.isUndefined(o.barycenter)||(i.barycenter=o.barycenter,i.weight=o.weight)}),Be.forEach(t.edges(),function(o){var a=n[o.v],i=n[o.w];!Be.isUndefined(a)&&!Be.isUndefined(i)&&(i.indegree++,a.out.push(n[o.w]))});var r=Be.filter(n,function(o){return!o.indegree});return SI(r)}function SI(e){var t=[];function n(a){return function(i){i.merged||(Be.isUndefined(i.barycenter)||Be.isUndefined(a.barycenter)||i.barycenter>=a.barycenter)&&wI(a,i)}}function r(a){return function(i){i.in.push(a),--i.indegree===0&&e.push(i)}}for(;e.length;){var o=e.pop();t.push(o),Be.forEach(o.in.reverse(),n(o)),Be.forEach(o.out,r(o))}return Be.map(Be.filter(t,function(a){return!a.merged}),function(a){return Be.pick(a,["vs","i","barycenter","weight"])})}function wI(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var Wn=ve,CI=De,_I=EI;function EI(e,t){var n=CI.partition(e,function(c){return Wn.has(c,"barycenter")}),r=n.lhs,o=Wn.sortBy(n.rhs,function(c){return-c.i}),a=[],i=0,s=0,l=0;r.sort(xI(!!t)),l=hf(a,o,l),Wn.forEach(r,function(c){l+=c.vs.length,a.push(c.vs),i+=c.barycenter*c.weight,s+=c.weight,l=hf(a,o,l)});var d={vs:Wn.flatten(a,!0)};return s&&(d.barycenter=i/s,d.weight=s),d}function hf(e,t,n){for(var r;t.length&&(r=Wn.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function xI(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var qt=ve,TI=gI,OI=vI,II=_I,NI=zm;function zm(e,t,n,r){var o=e.children(t),a=e.node(t),i=a?a.borderLeft:void 0,s=a?a.borderRight:void 0,l={};i&&(o=qt.filter(o,function(h){return h!==i&&h!==s}));var d=TI(e,o);qt.forEach(d,function(h){if(e.children(h.v).length){var m=zm(e,h.v,n,r);l[h.v]=m,qt.has(m,"barycenter")&&AI(h,m)}});var c=OI(d,n);RI(c,l);var f=II(c,r);if(i&&(f.vs=qt.flatten([i,f.vs,s],!0),e.predecessors(i).length)){var p=e.node(e.predecessors(i)[0]),g=e.node(e.predecessors(s)[0]);qt.has(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+p.order+g.order)/(f.weight+2),f.weight+=2}return f}function RI(e,t){qt.forEach(e,function(n){n.vs=qt.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function AI(e,t){qt.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var Gn=ve,kI=nt.Graph,LI=qI;function qI(e,t,n){var r=PI(e),o=new kI({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(a){return e.node(a)});return Gn.forEach(e.nodes(),function(a){var i=e.node(a),s=e.parent(a);(i.rank===t||i.minRank<=t&&t<=i.maxRank)&&(o.setNode(a),o.setParent(a,s||r),Gn.forEach(e[n](a),function(l){var d=l.v===a?l.w:l.v,c=o.edge(d,a),f=Gn.isUndefined(c)?0:c.weight;o.setEdge(d,a,{weight:e.edge(l).weight+f})}),Gn.has(i,"minRank")&&o.setNode(a,{borderLeft:i.borderLeft[t],borderRight:i.borderRight[t]}))}),o}function PI(e){for(var t;e.hasNode(t=Gn.uniqueId("_root")););return t}var DI=ve,MI=VI;function VI(e,t,n){var r={},o;DI.forEach(n,function(a){for(var i=e.parent(a),s,l;i;){if(s=e.parent(i),s?(l=r[s],r[s]=i):(l=o,o=i),l&&l!==i){t.setEdge(l,i);return}i=s}})}var Pt=ve,BI=uI,FI=pI,$I=NI,HI=LI,zI=MI,UI=nt.Graph,mf=De,YI=jI;function jI(e){var t=mf.maxRank(e),n=gf(e,Pt.range(1,t+1),"inEdges"),r=gf(e,Pt.range(t-1,-1,-1),"outEdges"),o=BI(e);yf(e,o);for(var a=Number.POSITIVE_INFINITY,i,s=0,l=0;l<4;++s,++l){WI(s%2?n:r,s%4>=2),o=mf.buildLayerMatrix(e);var d=FI(e,o);d<a&&(l=0,i=Pt.cloneDeep(o),a=d)}yf(e,i)}function gf(e,t,n){return Pt.map(t,function(r){return HI(e,r,n)})}function WI(e,t){var n=new UI;Pt.forEach(e,function(r){var o=r.graph().root,a=$I(r,o,n,t);Pt.forEach(a.vs,function(i,s){r.node(i).order=s}),zI(r,n,a.vs)})}function yf(e,t){Pt.forEach(t,function(n){Pt.forEach(n,function(r,o){e.node(r).order=o})})}var Z=ve,GI=nt.Graph,KI=De,XI={positionX:JI,findType1Conflicts:Um,findType2Conflicts:Ym,addConflict:uc,hasConflict:jm,verticalAlignment:Wm,horizontalCompaction:Gm,alignCoordinates:Xm,findSmallestWidthAlignment:Km,balance:Qm};function Um(e,t){var n={};function r(o,a){var i=0,s=0,l=o.length,d=Z.last(a);return Z.forEach(a,function(c,f){var p=QI(e,c),g=p?e.node(p).order:l;(p||c===d)&&(Z.forEach(a.slice(s,f+1),function(h){Z.forEach(e.predecessors(h),function(m){var v=e.node(m),b=v.order;(b<i||g<b)&&!(v.dummy&&e.node(h).dummy)&&uc(n,m,h)})}),s=f+1,i=g)}),a}return Z.reduce(t,r),n}function Ym(e,t){var n={};function r(a,i,s,l,d){var c;Z.forEach(Z.range(i,s),function(f){c=a[f],e.node(c).dummy&&Z.forEach(e.predecessors(c),function(p){var g=e.node(p);g.dummy&&(g.order<l||g.order>d)&&uc(n,p,c)})})}function o(a,i){var s=-1,l,d=0;return Z.forEach(i,function(c,f){if(e.node(c).dummy==="border"){var p=e.predecessors(c);p.length&&(l=e.node(p[0]).order,r(i,d,f,s,l),d=f,s=l)}r(i,d,i.length,l,a.length)}),i}return Z.reduce(t,o),n}function QI(e,t){if(e.node(t).dummy)return Z.find(e.predecessors(t),function(n){return e.node(n).dummy})}function uc(e,t,n){if(t>n){var r=t;t=n,n=r}var o=e[t];o||(e[t]=o={}),o[n]=!0}function jm(e,t,n){if(t>n){var r=t;t=n,n=r}return Z.has(e[t],n)}function Wm(e,t,n,r){var o={},a={},i={};return Z.forEach(t,function(s){Z.forEach(s,function(l,d){o[l]=l,a[l]=l,i[l]=d})}),Z.forEach(t,function(s){var l=-1;Z.forEach(s,function(d){var c=r(d);if(c.length){c=Z.sortBy(c,function(m){return i[m]});for(var f=(c.length-1)/2,p=Math.floor(f),g=Math.ceil(f);p<=g;++p){var h=c[p];a[d]===d&&l<i[h]&&!jm(n,d,h)&&(a[h]=d,a[d]=o[d]=o[h],l=i[h])}}})}),{root:o,align:a}}function Gm(e,t,n,r,o){var a={},i=ZI(e,t,n,o),s=o?"borderLeft":"borderRight";function l(f,p){for(var g=i.nodes(),h=g.pop(),m={};h;)m[h]?f(h):(m[h]=!0,g.push(h),g=g.concat(p(h))),h=g.pop()}function d(f){a[f]=i.inEdges(f).reduce(function(p,g){return Math.max(p,a[g.v]+i.edge(g))},0)}function c(f){var p=i.outEdges(f).reduce(function(h,m){return Math.min(h,a[m.w]-i.edge(m))},Number.POSITIVE_INFINITY),g=e.node(f);p!==Number.POSITIVE_INFINITY&&g.borderType!==s&&(a[f]=Math.max(a[f],p))}return l(d,i.predecessors.bind(i)),l(c,i.successors.bind(i)),Z.forEach(r,function(f){a[f]=a[n[f]]}),a}function ZI(e,t,n,r){var o=new GI,a=e.graph(),i=eN(a.nodesep,a.edgesep,r);return Z.forEach(t,function(s){var l;Z.forEach(s,function(d){var c=n[d];if(o.setNode(c),l){var f=n[l],p=o.edge(f,c);o.setEdge(f,c,Math.max(i(e,d,l),p||0))}l=d})}),o}function Km(e,t){return Z.minBy(Z.values(t),function(n){var r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return Z.forIn(n,function(a,i){var s=tN(e,i)/2;r=Math.max(a+s,r),o=Math.min(a-s,o)}),r-o})}function Xm(e,t){var n=Z.values(t),r=Z.min(n),o=Z.max(n);Z.forEach(["u","d"],function(a){Z.forEach(["l","r"],function(i){var s=a+i,l=e[s],d;if(l!==t){var c=Z.values(l);d=i==="l"?r-Z.min(c):o-Z.max(c),d&&(e[s]=Z.mapValues(l,function(f){return f+d}))}})})}function Qm(e,t){return Z.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var o=Z.sortBy(Z.map(e,r));return(o[1]+o[2])/2})}function JI(e){var t=KI.buildLayerMatrix(e),n=Z.merge(Um(e,t),Ym(e,t)),r={},o;Z.forEach(["u","d"],function(i){o=i==="u"?t:Z.values(t).reverse(),Z.forEach(["l","r"],function(s){s==="r"&&(o=Z.map(o,function(f){return Z.values(f).reverse()}));var l=(i==="u"?e.predecessors:e.successors).bind(e),d=Wm(e,o,n,l),c=Gm(e,o,d.root,d.align,s==="r");s==="r"&&(c=Z.mapValues(c,function(f){return-f})),r[i+s]=c})});var a=Km(e,r);return Xm(r,a),Qm(r,e.graph().align)}function eN(e,t,n){return function(r,o,a){var i=r.node(o),s=r.node(a),l=0,d;if(l+=i.width/2,Z.has(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":d=-i.width/2;break;case"r":d=i.width/2;break}if(d&&(l+=n?d:-d),d=0,l+=(i.dummy?t:e)/2,l+=(s.dummy?t:e)/2,l+=s.width/2,Z.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":d=s.width/2;break;case"r":d=-s.width/2;break}return d&&(l+=n?d:-d),d=0,l}}function tN(e,t){return e.node(t).width}var Kn=ve,Zm=De,nN=XI.positionX,rN=oN;function oN(e){e=Zm.asNonCompoundGraph(e),aN(e),Kn.forEach(nN(e),function(t,n){e.node(n).x=t})}function aN(e){var t=Zm.buildLayerMatrix(e),n=e.graph().ranksep,r=0;Kn.forEach(t,function(o){var a=Kn.max(Kn.map(o,function(i){return e.node(i).height}));Kn.forEach(o,function(i){e.node(i).y=r+a/2}),r+=a+n})}var te=ve,vf=rO,bf=SO,iN=UO,sN=De.normalizeRanks,lN=GO,cN=De.removeEmptyRanks,Sf=ZO,dN=oI,wf=iI,uN=YI,fN=rN,Bt=De,pN=nt.Graph,hN=mN;function mN(e,t){var n=t&&t.debugTiming?Bt.time:Bt.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return TN(e)});n("  runLayout",function(){gN(r,n)}),n("  updateInputGraph",function(){yN(e,r)})})}function gN(e,t){t("    makeSpaceForEdgeLabels",function(){ON(e)}),t("    removeSelfEdges",function(){DN(e)}),t("    acyclic",function(){vf.run(e)}),t("    nestingGraph.run",function(){Sf.run(e)}),t("    rank",function(){iN(Bt.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){IN(e)}),t("    removeEmptyRanks",function(){cN(e)}),t("    nestingGraph.cleanup",function(){Sf.cleanup(e)}),t("    normalizeRanks",function(){sN(e)}),t("    assignRankMinMax",function(){NN(e)}),t("    removeEdgeLabelProxies",function(){RN(e)}),t("    normalize.run",function(){bf.run(e)}),t("    parentDummyChains",function(){lN(e)}),t("    addBorderSegments",function(){dN(e)}),t("    order",function(){uN(e)}),t("    insertSelfEdges",function(){MN(e)}),t("    adjustCoordinateSystem",function(){wf.adjust(e)}),t("    position",function(){fN(e)}),t("    positionSelfEdges",function(){VN(e)}),t("    removeBorderNodes",function(){PN(e)}),t("    normalize.undo",function(){bf.undo(e)}),t("    fixupEdgeLabelCoords",function(){LN(e)}),t("    undoCoordinateSystem",function(){wf.undo(e)}),t("    translateGraph",function(){AN(e)}),t("    assignNodeIntersects",function(){kN(e)}),t("    reversePoints",function(){qN(e)}),t("    acyclic.undo",function(){vf.undo(e)})}function yN(e,t){te.forEach(e.nodes(),function(n){var r=e.node(n),o=t.node(n);r&&(r.x=o.x,r.y=o.y,t.children(n).length&&(r.width=o.width,r.height=o.height))}),te.forEach(e.edges(),function(n){var r=e.edge(n),o=t.edge(n);r.points=o.points,te.has(o,"x")&&(r.x=o.x,r.y=o.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var vN=["nodesep","edgesep","ranksep","marginx","marginy"],bN={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},SN=["acyclicer","ranker","rankdir","align"],wN=["width","height"],CN={width:0,height:0},_N=["minlen","weight","width","height","labeloffset"],EN={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},xN=["labelpos"];function TN(e){var t=new pN({multigraph:!0,compound:!0}),n=Vs(e.graph());return t.setGraph(te.merge({},bN,Ms(n,vN),te.pick(n,SN))),te.forEach(e.nodes(),function(r){var o=Vs(e.node(r));t.setNode(r,te.defaults(Ms(o,wN),CN)),t.setParent(r,e.parent(r))}),te.forEach(e.edges(),function(r){var o=Vs(e.edge(r));t.setEdge(r,te.merge({},EN,Ms(o,_N),te.pick(o,xN)))}),t}function ON(e){var t=e.graph();t.ranksep/=2,te.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function IN(e){te.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),o=e.node(t.w),a={rank:(o.rank-r.rank)/2+r.rank,e:t};Bt.addDummyNode(e,"edge-proxy",a,"_ep")}})}function NN(e){var t=0;te.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=te.max(t,r.maxRank))}),e.graph().maxRank=t}function RN(e){te.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function AN(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,o=0,a=e.graph(),i=a.marginx||0,s=a.marginy||0;function l(d){var c=d.x,f=d.y,p=d.width,g=d.height;t=Math.min(t,c-p/2),n=Math.max(n,c+p/2),r=Math.min(r,f-g/2),o=Math.max(o,f+g/2)}te.forEach(e.nodes(),function(d){l(e.node(d))}),te.forEach(e.edges(),function(d){var c=e.edge(d);te.has(c,"x")&&l(c)}),t-=i,r-=s,te.forEach(e.nodes(),function(d){var c=e.node(d);c.x-=t,c.y-=r}),te.forEach(e.edges(),function(d){var c=e.edge(d);te.forEach(c.points,function(f){f.x-=t,f.y-=r}),te.has(c,"x")&&(c.x-=t),te.has(c,"y")&&(c.y-=r)}),a.width=n-t+i,a.height=o-r+s}function kN(e){te.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),o=e.node(t.w),a,i;n.points?(a=n.points[0],i=n.points[n.points.length-1]):(n.points=[],a=o,i=r),n.points.unshift(Bt.intersectRect(r,a)),n.points.push(Bt.intersectRect(o,i))})}function LN(e){te.forEach(e.edges(),function(t){var n=e.edge(t);if(te.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function qN(e){te.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function PN(e){te.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),o=e.node(n.borderBottom),a=e.node(te.last(n.borderLeft)),i=e.node(te.last(n.borderRight));n.width=Math.abs(i.x-a.x),n.height=Math.abs(o.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}}),te.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function DN(e){te.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function MN(e){var t=Bt.buildLayerMatrix(e);te.forEach(t,function(n){var r=0;te.forEach(n,function(o,a){var i=e.node(o);i.order=a+r,te.forEach(i.selfEdges,function(s){Bt.addDummyNode(e,"selfedge",{width:s.label.width,height:s.label.height,rank:i.rank,order:a+ ++r,e:s.e,label:s.label},"_se")}),delete i.selfEdges})})}function VN(e){te.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),o=r.x+r.width/2,a=r.y,i=n.x-o,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:o+2*i/3,y:a-s},{x:o+5*i/6,y:a-s},{x:o+i,y:a},{x:o+5*i/6,y:a+s},{x:o+2*i/3,y:a+s}],n.label.x=n.x,n.label.y=n.y}})}function Ms(e,t){return te.mapValues(te.pick(e,t),Number)}function Vs(e){var t={};return te.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var Xr=ve,BN=De,FN=nt.Graph,$N={debugOrdering:HN};function HN(e){var t=BN.buildLayerMatrix(e),n=new FN({compound:!0,multigraph:!0}).setGraph({});return Xr.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),Xr.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),Xr.forEach(t,function(r,o){var a="layer"+o;n.setNode(a,{rank:"same"}),Xr.reduce(r,function(i,s){return n.setEdge(i,s,{style:"invis"}),s})}),n}var zN="0.8.5",Jm={graphlib:nt,layout:hN,debug:$N,util:{time:De.time,notime:De.notime},version:zN},Cf=function(t){return t.reduce(function(n,r){var o=r[0],a=r[1];return n[o]=a,n},{})},_f=typeof window<"u"&&window.document&&window.document.createElement?E.exports.useLayoutEffect:E.exports.useEffect;function UN(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},o=t.attributes[n]||{},a=t.elements[n];!Op(a)||!Ip(a)||(Object.assign(a.style,r),Object.keys(o).forEach(function(i){var s=o[i];s===!1?a.removeAttribute(i):a.setAttribute(i,s===!0?"":s)}))})}function YN(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var o=t.elements[r],a=t.attributes[r]||{},i=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),s=i.reduce(function(l,d){return l[d]="",l},{});!Op(o)||!Ip(o)||(Object.assign(o.style,s),Object.keys(a).forEach(function(l){o.removeAttribute(l)}))})}}const jN={name:"applyStyles",enabled:!0,phase:"write",fn:UN,effect:YN,requires:["computeStyles"]};var WN=[eb,tb,nb,jN,rb,ob,ab,ib,sb],GN=Jv({defaultModifiers:WN}),KN=typeof Element<"u",XN=typeof Map=="function",QN=typeof Set=="function",ZN=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function wo(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,o;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!wo(e[r],t[r]))return!1;return!0}var a;if(XN&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a=e.entries();!(r=a.next()).done;)if(!t.has(r.value[0]))return!1;for(a=e.entries();!(r=a.next()).done;)if(!wo(r.value[1],t.get(r.value[0])))return!1;return!0}if(QN&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a=e.entries();!(r=a.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(ZN&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[r]))return!1;if(KN&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((o[r]==="_owner"||o[r]==="__v"||o[r]==="__o")&&e.$$typeof)&&!wo(e[o[r]],t[o[r]]))return!1;return!0}return e!==e&&t!==t}var JN=function(t,n){try{return wo(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}},eR=[],tR=function(t,n,r){r===void 0&&(r={});var o=E.exports.useRef(null),a={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||eR},i=E.exports.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=i[0],l=i[1],d=E.exports.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(g){var h=g.state,m=Object.keys(h.elements);Zv.exports.flushSync(function(){l({styles:Cf(m.map(function(v){return[v,h.styles[v]||{}]})),attributes:Cf(m.map(function(v){return[v,h.attributes[v]]}))})})},requires:["computeStyles"]}},[]),c=E.exports.useMemo(function(){var p={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[d,{name:"applyStyles",enabled:!1}])};return JN(o.current,p)?o.current||p:(o.current=p,p)},[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,d]),f=E.exports.useRef();return _f(function(){f.current&&f.current.setOptions(c)},[c]),_f(function(){if(!(t==null||n==null)){var p=r.createPopper||GN,g=p(t,n,c);return f.current=g,function(){g.destroy(),f.current=null}}},[t,n,r.createPopper]),{state:f.current?f.current.state:null,styles:s.styles,attributes:s.attributes,update:f.current?f.current.update:null,forceUpdate:f.current?f.current.forceUpdate:null}};const Co=({children:e,contentProps:t,placement:n,showCloseButton:r=!0,actionButton:o,strategy:a,style:i})=>{var C;n=n!=null?n:"bottom-start";const[s,l]=E.exports.useState(!1),[d,c]=E.exports.useState(null),[f,p]=E.exports.useState(null),[g,h]=E.exports.useState(null),{styles:m,attributes:v}=tR(d,f,{placement:n,strategy:a,modifiers:[{name:"arrow",options:{element:g}},{name:"offset",options:{offset:[0,10]}}]}),b=u(Np,{in:s,timeout:200,classNames:"fade-in-out",mountOnEnter:!0,children:N("div",{className:"Tooltip SRC-popover bootstrap-4-backport",style:{...i,...m.popper},ref:p,...v.popper,children:[u(_t,{variant:"body1",children:u(Fe,{...t})}),N("div",{className:"TooltipButtonContainer",children:[o&&u(we,{variant:(C=o.variant)!=null?C:"primary-500",className:"pill",onClick:()=>{o.onClick(),o.closePopoverOnClick&&l(!1)},children:o.content}),r&&u(we,{variant:"light",className:"pill",onClick:()=>l(!1),children:"Close"})]}),u("div",{className:"arrow","data-popper-arrow":!0,ref:h,style:m.arrow})]})});return N(H,{children:[u("span",{role:"button",className:"PopoverContainer bootstrap-4-backport",onClick:()=>l(S=>!S),ref:c,children:e}),b]})};try{Co.displayName="MarkdownPopover",Co.__docgenInfo={description:"",displayName:"MarkdownPopover",props:{contentProps:{defaultValue:null,description:"",name:"contentProps",required:!0,type:{name:"MarkdownSynapseProps"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},placement:{defaultValue:null,description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"bottom"'},{value:'"right"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},actionButton:{defaultValue:null,description:"",name:"actionButton",required:!1,type:{name:"{ content: ReactElement<any, string | JSXElementConstructor<any>>; variant: string; onClick: () => void; closePopoverOnClick: boolean; }"}},strategy:{defaultValue:null,description:"",name:"strategy",required:!1,type:{name:"enum",value:[{value:'"absolute"'},{value:'"fixed"'}]}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/MarkdownPopover.tsx#MarkdownPopover"]={docgenInfo:Co.__docgenInfo,name:"MarkdownPopover",path:"src/lib/containers/MarkdownPopover.tsx#MarkdownPopover"})}catch{}const Dt=({markdownText:e,helpUrl:t,placement:n="bottom",showCloseButton:r=!0,className:o=""})=>u(H,{children:u(Co,{contentProps:{markdown:e},placement:n,actionButton:t?{content:u(H,{children:"More info"}),closePopoverOnClick:!0,onClick:()=>window.open(t,"_blank"),variant:"primary"}:void 0,showCloseButton:r,strategy:"fixed",style:{maxWidth:"350px"},children:u(hv,{className:`HelpButton ${o}`})})});try{Dt.displayName="HelpPopover",Dt.__docgenInfo={description:"",displayName:"HelpPopover",props:{markdownText:{defaultValue:null,description:"",name:"markdownText",required:!0,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}},placement:{defaultValue:{value:"bottom"},description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"bottom"'},{value:'"right"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HelpPopover.tsx#HelpPopover"]={docgenInfo:Dt.__docgenInfo,name:"HelpPopover",path:"src/lib/containers/HelpPopover.tsx#HelpPopover"})}catch{}const nR=()=>N(H,{children:[u(_t,{variant:"smallText1",className:"description",children:"Undefined"}),u(Dt,{placement:"top",markdownText:"Provenance tracks the relationship  between data, code and analytical results.",helpUrl:"https://help.synapse.org/docs/Provenance.1972470373.html"})]}),_o=e=>{const t=e.targetVersionNumber?`.${e.targetVersionNumber}`:"",n=`${e.targetId}${t}`;return E.exports.useMemo(()=>N(H,{children:[u("div",{children:u(pe,{icon:"fileOutlined"})}),u("span",{children:n})]}),[n])};try{_o.displayName="EntityPlaceholderNodeLabel",_o.__docgenInfo={description:"This node type is used if the user cannot access the entity for some reason",displayName:"EntityPlaceholderNodeLabel",props:{targetId:{defaultValue:null,description:"",name:"targetId",required:!0,type:{name:"string"}},targetVersionNumber:{defaultValue:null,description:"",name:"targetVersionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/EntityPlaceholderNodeLabel.tsx#EntityPlaceholderNodeLabel"]={docgenInfo:_o.__docgenInfo,name:"EntityPlaceholderNodeLabel",path:"src/lib/containers/provenance/EntityPlaceholderNodeLabel.tsx#EntityPlaceholderNodeLabel"})}catch{}var Ae=(e=>(e.ENTITY="EntityNode",e.ENTITY_PLACEHOLDER="EntityPlaceholderNode",e.EXTERNAL="ExternalNode",e.ACTIVITY="ActivityNode",e.EXPAND="ExpandNode",e.UNDEFINED="UndefinedNode",e))(Ae||{});const Jn=e=>{const{type:t,data:n}=e;let r;switch(t){case"EntityNode":r=u(yo,{...n});break;case"EntityPlaceholderNode":r=u(_o,{...n});break;case"ExternalNode":r=u(So,{...n});break;case"ActivityNode":r=u(mo,{...n});break;case"ExpandNode":r=u(vo,{...n});break;case"UndefinedNode":r=u(nR,{});break;default:r=N("p",{children:["Unrecognized node type: ",t]});break}const o={label:r,props:n,type:t};return{id:ct(e),position:{x:100,y:100},data:o,connectable:!1,draggable:!1,className:`${t}`}},eg=(e,t)=>{const n=ct(e),r=ct(t);return{id:`${n}-${r}`,source:n,target:r,animated:!0,type:gt.SimpleBezier,markerEnd:{type:Sr.ArrowClosed}}},ct=e=>{var r,o,a,i;const{type:t,data:n}=e;switch(t){case"EntityNode":return`${n.id}.${(r=n.versionNumber)!=null?r:"latest"}`;case"EntityPlaceholderNode":return`${n.targetId}.${(o=n.targetVersionNumber)!=null?o:"latest"}`;case"ExternalNode":return`${n.url}`;case"ActivityNode":return`${n.id}`;case"ExpandNode":return`expand.node.${n.entityHeader.id}.${(a=n.entityHeader.versionNumber)!=null?a:"latest"}`;case"UndefinedNode":return`undefined.dummy.node.${n.id}.${(i=n.versionNumber)!=null?i:"latest"}`}},hn=new Jm.graphlib.Graph;hn.setDefaultEdgeLabel(()=>({}));const Ef=e=>e.data.type=="ExpandNode"?30:100,xf=e=>e.data.type=="ExpandNode"?30:172,rR=(e,t,n)=>{const r=n==="LR";return hn.setGraph({rankdir:n}),e.forEach(o=>{hn.setNode(o.id,{width:xf(o),height:Ef(o)})}),t.forEach(o=>{hn.setEdge(o.source,o.target)}),Jm.layout(hn),e.forEach(o=>{const a=hn.node(o.id);return o.targetPosition=r?W.Left:W.Top,o.sourcePosition=r?W.Right:W.Bottom,o.position={x:a.x-xf(o)/2,y:a.y-Ef(o)/2},o}),{nodes:e,edges:t}},Tf=(e,t)=>lb(e,t,db).length==0;try{Jn.displayName="getProvenanceNode",Jn.__docgenInfo={description:"",displayName:"getProvenanceNode",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceUtils.tsx#getProvenanceNode"]={docgenInfo:Jn.__docgenInfo,name:"getProvenanceNode",path:"src/lib/containers/provenance/ProvenanceUtils.tsx#getProvenanceNode"})}catch{}try{ct.displayName="getNodeId",ct.__docgenInfo={description:"",displayName:"getNodeId",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceUtils.tsx#getNodeId"]={docgenInfo:ct.__docgenInfo,name:"getNodeId",path:"src/lib/containers/provenance/ProvenanceUtils.tsx#getNodeId"})}catch{}const oR="org.sagebionetworks.repo.model.provenance.UsedEntity",Of=e=>{const{entityHeader:t,rootEntityHeaders:n}=e;return(n==null?void 0:n.find(o=>t.id==o.id&&t.versionNumber==o.versionNumber))!==void 0},tg=(e,t)=>t.find(r=>r.id===ct(e))===void 0,aR=(e,t)=>{const n={type:Ae.ENTITY,data:e};return t.find(r=>r.id===ct(n))},iR=(e,t,n)=>n.find(o=>o.source===ct(e)&&o.target===ct(t))===void 0,Ar=e=>{const{newNodeProps:t,existingNodeProps:n,nodesCopy:r,edgesCopy:o}=e;tg(t,r)&&r.push(Jn(t)),iR(t,n,o)&&o.push(eg(t,n))},sR=e=>{const{activity:t,entityHeader:n,nodesCopy:r,edgesCopy:o}=e,a={type:Ae.ACTIVITY,data:t},i={type:Ae.ENTITY,data:n};Ar({newNodeProps:a,existingNodeProps:i,nodesCopy:r,edgesCopy:o})},lR=e=>{const{entityHeader:t,itemCount:n=0,nodesCopy:r,edgesCopy:o}=e,a={type:Ae.EXPAND,data:{itemCount:n,entityHeader:t}},i={type:Ae.ENTITY,data:t};Ar({newNodeProps:a,existingNodeProps:i,nodesCopy:r,edgesCopy:o})},cR=e=>{const{ref:t,activity:n,nodesCopy:r,edgesCopy:o}=e,a={type:Ae.ENTITY_PLACEHOLDER,data:t},i={type:Ae.ACTIVITY,data:n};Ar({newNodeProps:a,existingNodeProps:i,nodesCopy:r,edgesCopy:o})},dR=e=>{const{entityHeader:t,nodesCopy:n,edgesCopy:r}=e,o={type:Ae.UNDEFINED,data:t},a={type:Ae.ENTITY,data:t};Ar({newNodeProps:o,existingNodeProps:a,nodesCopy:n,edgesCopy:r})},uR=e=>{const{usedURL:t,activity:n,nodesCopy:r,edgesCopy:o}=e,a={type:Ae.ACTIVITY,data:n},i={type:Ae.EXTERNAL,data:t};Ar({newNodeProps:i,existingNodeProps:a,nodesCopy:r,edgesCopy:o})},fR=e=>{const{entityHeader:t,activity:n,nodesCopy:r,edgesCopy:o}=e,a={type:Ae.ENTITY,data:t};if(tg(a,r)&&(r.push(Jn(a)),n)){const i={type:Ae.ACTIVITY,data:n};o.push(eg(a,i))}},Bs=400,Fs=.85,pR=e=>{const{entityRefs:t,containerHeight:n="200px",initialNodes:r=[],initialEdges:o=[],onNodesChangedListener:a,onEdgesChangedListener:i}=e,{accessToken:s}=ie(),[l,d]=ge.useState(r),[c,f]=ge.useState(o),[p,g,h]=Zx([]),[m,v,b]=Jx([]),[C,S]=E.exports.useState(),y=ey(),{data:w,isSuccess:_}=yS(t,{useErrorBoundary:!0});if(_&&w.totalNumberOfResults==0){const q=t.map(R=>R.targetId).join(",");y(`Unable to load provenance for the given Synapse IDs: ${q}`)}const x=w==null?void 0:w.results,[I,O]=ge.useState(!1),A=oc(),k=E.exports.useCallback((q,R)=>{S(R)},[]),M=E.exports.useCallback(async q=>{var V;const{entityHeader:R,nodesCopy:D,edgesCopy:$,usedInActivity:z}=q;fR({entityHeader:R,activity:z,nodesCopy:D,edgesCopy:$});try{const U=await Ic(R.id,R.versionNumber,s);(!Of({entityHeader:R,rootEntityHeaders:x})||U.used&&U.used.length>=Bs)&&lR({entityHeader:R,itemCount:(V=U.used)==null?void 0:V.length,nodesCopy:D,edgesCopy:$})}catch(U){console.error(U),Of({entityHeader:R,rootEntityHeaders:x})&&dR({entityHeader:R,nodesCopy:D,edgesCopy:$})}},[s,x]);E.exports.useEffect(()=>{!I&&p.length>0&&setTimeout(()=>{if(x){const q=aR(x[0],p);if(q){const R=A.getZoom(),D=R>Fs?Fs:R;A==null||A.setCenter(q.position.x+150,q.position.y-30,{zoom:D,duration:0})}O(!0)}})},[I,p,A,x]);const B=E.exports.useCallback(async q=>{const{entityHeader:R,nodesCopy:D,edgesCopy:$}=q;try{const z=await Ic(R.id,R.versionNumber,s);if(sR({activity:z,entityHeader:R,nodesCopy:D,edgesCopy:$}),z.used&&z.used.length<Bs){const V=[];z.used.forEach(F=>{F.concreteType==oR?V.push(F.reference):uR({usedURL:F,activity:z,nodesCopy:D,edgesCopy:$})});const U=await Sl(V,s),{results:G}=U;V.filter(F=>G.find(Y=>Y.id==F.targetId)==null).forEach(F=>{cR({ref:F,activity:z,nodesCopy:D,edgesCopy:$})});const L=[];G.forEach(F=>{L.push(M({entityHeader:F,nodesCopy:D,edgesCopy:$,usedInActivity:z}))}),await Promise.allSettled(L)}}catch(z){console.error(z)}},[s,M]);E.exports.useEffect(()=>{if(x&&l.length==0){const q=[...l],R=[...c],D=[];x.forEach($=>{const z=M({entityHeader:$,nodesCopy:q,edgesCopy:R});D.push(z);const V=B({entityHeader:$,nodesCopy:q,edgesCopy:R});D.push(V)}),Promise.allSettled(D).finally(()=>{d(q),f(R)})}},[M,y,B,x,t,c,l]),E.exports.useEffect(()=>{const q=C==null?void 0:C.data;if(C&&(q==null?void 0:q.type)==Ae.EXPAND){const R=q.props;if(R.itemCount>Bs){en("Web visualization does not support expanding this many items at this time.","danger");return}else{q.label=u(Hb,{size:30});const D=l.filter(V=>V.id!=C.id),$=nc([C],c)[0],z=c.filter(V=>V!=$);B({entityHeader:R.entityHeader,nodesCopy:D,edgesCopy:z}).finally(()=>{d(D),f(z)})}S(void 0)}},[C,l,c,B]),E.exports.useEffect(()=>{const{nodes:q,edges:R}=rR(l,c,"TB");Tf(q,p)||(g(q),a&&a(q)),Tf(R,m)||(v(R),i&&i(R))},[l,c,p,m,g,v,I,A,t,a,i]);const T=E.exports.useCallback(q=>{q&&typeof q.deltaX<"u"&&typeof q.deltaY<"u"&&window.scrollTo(window.scrollX+q.deltaX,window.scrollY+q.deltaY)},[]);return u("div",{className:"bootstrap-4-backport ProvenanceWidget",role:"graphics-doc",style:{width:"100%",height:n},children:u(um,{defaultZoom:Fs,nodes:p,edges:m,onNodeClick:k,onNodesChange:h,onEdgesChange:b,attributionPosition:"bottom-right",onConnect:void 0,zoomOnScroll:!1,onPaneScroll:T,children:u(k0,{})})})},Eo=e=>u(Xf,{children:u(fm,{children:u(pR,{...e})})}),hR=Eo;try{Eo.displayName="ProvenanceGraph",Eo.__docgenInfo={description:"",displayName:"ProvenanceGraph",props:{entityRefs:{defaultValue:null,description:"",name:"entityRefs",required:!0,type:{name:"ReferenceList"}},containerHeight:{defaultValue:null,description:"",name:"containerHeight",required:!1,type:{name:"string"}},initialNodes:{defaultValue:null,description:"",name:"initialNodes",required:!1,type:{name:"Node<any>[]"}},initialEdges:{defaultValue:null,description:"",name:"initialEdges",required:!1,type:{name:"Edge<any>[]"}},onNodesChangedListener:{defaultValue:null,description:"",name:"onNodesChangedListener",required:!1,type:{name:"((nodes: Node<any>[]) => void)"}},onEdgesChangedListener:{defaultValue:null,description:"",name:"onEdgesChangedListener",required:!1,type:{name:"((edges: Edge<any>[]) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceGraph.tsx#ProvenanceGraph"]={docgenInfo:Eo.__docgenInfo,name:"ProvenanceGraph",path:"src/lib/containers/provenance/ProvenanceGraph.tsx#ProvenanceGraph"})}catch{}function xo(e){const{entityList:t,displayHeightPx:n}=e,r=t.split(",").map(a=>{const i=a.split("/version/");return{targetId:i[0],targetVersionNumber:i.length>1?parseInt(i[1]):void 0}}),o=n?`${n}px`:void 0;return u(hR,{entityRefs:r,containerHeight:o})}try{xo.displayName="MarkdownProvenanceGraph",xo.__docgenInfo={description:"",displayName:"MarkdownProvenanceGraph",props:{entityList:{defaultValue:null,description:"",name:"entityList",required:!0,type:{name:"string"}},displayHeightPx:{defaultValue:null,description:"",name:"displayHeightPx",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownProvenanceGraph.tsx#MarkdownProvenanceGraph"]={docgenInfo:xo.__docgenInfo,name:"MarkdownProvenanceGraph",path:"src/lib/containers/markdown/widget/MarkdownProvenanceGraph.tsx#MarkdownProvenanceGraph"})}catch{}class Cn extends E.exports.Component{constructor(t){super(t),this.getEntity=this.getEntity.bind(this),this.getSynapseFiles=this.getSynapseFiles.bind(this),this.state={preSignedURL:""}}getEntity(){const{synapseId:t}=this.props;t&&Tn(this.context.accessToken,t).then(n=>{const r=[{associateObjectId:t,associateObjectType:Re.FileEntity,fileHandleId:n.dataFileHandleId}];this.getSynapseFiles(r,n.dataFileHandleId)})}getSynapseFiles(t,n){An({includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:t},this.context.accessToken).then(o=>{const{preSignedURL:a}=o.requestedFiles.filter(i=>i.fileHandleId===n)[0];this.setState({preSignedURL:a})}).catch(o=>{console.error("Error on getting image ",o)})}componentDidMount(){if(!this.props.wikiId)this.getEntity();else{const{fileName:t,fileResults:n=[]}=this.props,{id:r}=n.filter(a=>a.fileName===t)[0],o=[{associateObjectId:this.props.wikiId,associateObjectType:Re.WikiAttachment,fileHandleId:r}];this.getSynapseFiles(o,r)}}render(){const{params:t}=this.props,{align:n="",altText:r="synapse image"}=t;let o="auto";t.scale&&t.scale!=="100"&&(o=`${Number(t.scale)}%`);const a=n.toLowerCase();let i="";a==="left"&&(i="floatLeft"),a==="right"&&(i="floatright"),a==="center"&&(i="align-center");let s={width:o,height:o};return this.state.preSignedURL?u(E.exports.Fragment,{children:u("img",{alt:r,className:"img-fluid  "+i,src:this.state.preSignedURL,style:s})}):null}}Cn.contextType=_r;try{Cn.displayName="SynapseImage",Cn.__docgenInfo={description:"",displayName:"SynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},fileResults:{defaultValue:null,description:"",name:"fileResults",required:!1,type:{name:"FileHandle[]"}},params:{defaultValue:null,description:"",name:"params",required:!0,type:{name:"{ align: string; scale: string; responsive: string; altText: string; }"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/SynapseImage.tsx#SynapseImage"]={docgenInfo:Cn.__docgenInfo,name:"SynapseImage",path:"src/lib/containers/widgets/SynapseImage.tsx#SynapseImage"})}catch{}const _n=ge.createContext(void 0),To=({children:e,wikiContext:t})=>u(_n.Provider,{value:t,children:e}),$s=_n.Consumer;function ng(){const e=E.exports.useContext(_n);return e!=null?e:{}}try{_n.displayName="SynapseWikiContext",_n.__docgenInfo={description:"This must be exported to use the context in class components.",displayName:"SynapseWikiContext",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContext"]={docgenInfo:_n.__docgenInfo,name:"SynapseWikiContext",path:"src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContext"})}catch{}try{To.displayName="SynapseWikiContextProvider",To.__docgenInfo={description:"Provides context related to Synapse Wikis",displayName:"SynapseWikiContextProvider",props:{wikiContext:{defaultValue:null,description:"",name:"wikiContext",required:!1,type:{name:"SynapseWikiContextType"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextProvider"]={docgenInfo:To.__docgenInfo,name:"SynapseWikiContextProvider",path:"src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextProvider"})}catch{}try{$s.displayName="SynapseWikiContextConsumer",$s.__docgenInfo={description:"",displayName:"SynapseWikiContextConsumer",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextConsumer"]={docgenInfo:$s.__docgenInfo,name:"SynapseWikiContextConsumer",path:"src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextConsumer"})}catch{}function Oo(e){const{wikiId:t,wikiPage:n,fileHandles:r}=ng();return e.fileName?r?u(Cn,{params:e,fileName:e.fileName,wikiId:t||(n==null?void 0:n.id),fileResults:r.list}):u(H,{}):e.synapseId?u(Cn,{params:e,synapseId:e.synapseId}):u(H,{})}try{Oo.displayName="MarkdownSynapseImage",Oo.__docgenInfo={description:"",displayName:"MarkdownSynapseImage",props:{fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},align:{defaultValue:null,description:"",name:"align",required:!0,type:{name:"string"}},scale:{defaultValue:null,description:"",name:"scale",required:!0,type:{name:"string"}},responsive:{defaultValue:null,description:"",name:"responsive",required:!0,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownSynapseImage.tsx#MarkdownSynapseImage"]={docgenInfo:Oo.__docgenInfo,name:"MarkdownSynapseImage",path:"src/lib/containers/markdown/widget/MarkdownSynapseImage.tsx#MarkdownSynapseImage"})}catch{}const mR=ub(fb);class er extends E.exports.Component{constructor(t){super(t),this.state={isLoaded:!1,queryData:{}},this.fetchPlotlyData=this.fetchPlotlyData.bind(this),this.showPlot=this.showPlot.bind(this)}componentDidMount(){this.fetchPlotlyData()}fetchPlotlyData(){const{query:t}=this.props.widgetparamsMapped,n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:Er,entityId:kn(t),query:{sql:t}};Qf(n,this.context.accessToken).then(r=>{this.setState({isLoaded:!0,queryData:r})}).catch(r=>{console.log("Error on full table query ",r)})}showPlot(){var g,h,m,v;if(!this.state.isLoaded)return;const{title:t,xtitle:n,ytitle:r,type:o,xaxistype:a,showlegend:i}=this.props.widgetparamsMapped,s=this.state,l=this.props.widgetparamsMapped.horizontal.toLowerCase(),d={showlegend:i,title:t};n&&(d.xaxis={title:n}),a&&(d.xaxis={...d.xaxis,xaxistype:a.toLowerCase()}),r&&(d.yaxis={title:r});const c=[],f=l?"v":"h",p=(h=(g=s.queryData.queryResult)==null?void 0:g.queryResults.headers)!=null?h:[];for(let b=0;b<p.length-1;b+=1)c[b]={orientation:f,name:p[b+1].name,type:o.toLowerCase(),x:[],y:[]};for(const b of(v=(m=s.queryData.queryResult)==null?void 0:m.queryResults.rows)!=null?v:[])for(let C=1;C<b.values.length;C+=1){const S=b.values;c[C-1].x.push(S[0]),c[C-1].y.push(S[C])}return u(mR,{layout:d,data:c})}render(){return this.state.isLoaded?this.showPlot():null}}er.contextType=_r;try{er.displayName="SynapsePlot",er.__docgenInfo={description:"",displayName:"SynapsePlot",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},widgetparamsMapped:{defaultValue:null,description:"",name:"widgetparamsMapped",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/SynapsePlot.tsx#SynapsePlot"]={docgenInfo:er.__docgenInfo,name:"SynapsePlot",path:"src/lib/containers/widgets/SynapsePlot.tsx#SynapsePlot"})}catch{}function Io(e){const{ownerId:t,wikiId:n,wikiPage:r}=ng();return u(er,{ownerId:t,wikiId:n||(r==null?void 0:r.id),widgetparamsMapped:e})}try{Io.displayName="MarkdownSynapsePlot",Io.__docgenInfo={description:"",displayName:"MarkdownSynapsePlot",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownSynapsePlot.tsx#MarkdownSynapsePlot"]={docgenInfo:Io.__docgenInfo,name:"MarkdownSynapsePlot",path:"src/lib/containers/markdown/widget/MarkdownSynapsePlot.tsx#MarkdownSynapsePlot"})}catch{}const gR=200,If="ESTIMATED_DOWNLOAD_SPEED_EXPIRE_TIME",Nf="ESTIMATED_DOWNLOAD_SPEED",yR="syn12600511",vR=e=>new Promise((t,n)=>{const r=localStorage.getItem(If),o=localStorage.getItem(Nf);if(r&&o&&new Date().getTime()<Number(r)){t(Number(o));return}Tn(e,yR).then(a=>{const i=a,s=[{associateObjectId:i.id,associateObjectType:Re.FileEntity,fileHandleId:i.dataFileHandleId}];An({includeFileHandles:!0,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:s},e).then(d=>{const c=d.requestedFiles[0].preSignedURL,f=d.requestedFiles[0].fileHandle,p=new Date().getTime();return ty(f,c).then(()=>{const g=f.contentSize/((new Date().getTime()-p-gR)/1e3),h=new Date().getTime();localStorage.setItem(If,(h+1e3*60*5).toString()),localStorage.setItem(Nf,g.toString()),t(g)})})}).catch(a=>n(a))});function No(e){const{numFiles:t,numBytes:n}=e,{accessToken:r}=ie(),[o,a]=E.exports.useState({isLoading:!!n,downloadSpeed:0}),{isLoading:i,downloadSpeed:s}=o;E.exports.useEffect(()=>{r&&vR(r).then(h=>{a({isLoading:!1,downloadSpeed:h})})},[r]);const l=i||s===0||!n?0:n/s,d=l===0,c=d?"":Tr.duration(l,"seconds").humanize(),f=t===0,p=f?"SRC-inactive":"SRC-primary-text-color",g=d?"SRC-inactive":"SRC-primary-text-color";return N("span",{className:"download-details-container",children:[N("span",{children:[u("span",{className:p,children:u(pe,{icon:"file"})}),f?u(oi,{width:50}):N(H,{children:[" ",t,"\xA0files "]})]}),n&&u(Ke,{title:"This is the total size of all files. Zipped package(s) will likely be smaller.",enterNextDelay:_a,placement:"top",children:N("span",{"data-testid":"numBytesUI",children:[u("span",{className:g,children:u(pe,{icon:"database"})}),d?u(oi,{width:50}):Zf(n)]})}),n&&u(Ke,{title:"This is an estimate of how long package download will take.",enterNextDelay:_a,placement:"top",children:N("span",{"data-testid":"downloadTimeEstimateUI",children:[u("span",{className:g,children:u(pe,{icon:"clock"})}),i&&t>0?u(oi,{width:50}):c]})})]})}try{No.displayName="DownloadDetails",No.__docgenInfo={description:`Displays download information including number of files, size of download, and time to download.
Prefer to use {@link download_list_v2 /DownloadDetails} instead, particularly when you have information about file packaging in/eligibility`,displayName:"DownloadDetails",props:{numFiles:{defaultValue:null,description:"",name:"numFiles",required:!0,type:{name:"number"}},numBytes:{defaultValue:null,description:"",name:"numBytes",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/download_list/DownloadDetails.tsx#DownloadDetails"]={docgenInfo:No.__docgenInfo,name:"DownloadDetails",path:"src/lib/containers/download_list/DownloadDetails.tsx#DownloadDetails"})}catch{}async function bR(e,t,n,r,o){try{const a={query:n==null?void 0:n.query,concreteType:"org.sagebionetworks.repo.model.download.AddToDownloadListRequest",parentId:r};return await ry(a,e),en("File(s) were successfully added to your Download Cart.","success",{primaryButtonConfig:{text:"View Download Cart",onClick:o}}),t(),[0,""]}catch(a){return en("danger",void 0,a.reason),t(),[0,""]}}const tr={[2]:{className:"alert-info",infoText:"Would you like to add all files to the download cart?",closeText:"Cancel"},[3]:{className:"alert-info",infoText:N(H,{children:["Note: Files that you add will be mixed in with the files already in your download cart.",u("br",{}),"If you don\u2019t want to mix these files, clear your download cart before continuing."]}),closeText:"Cancel"},[1]:{className:"alert-info",infoText:"Adding Files To List",closeText:"Cancel"},[0]:{className:"alert-info",infoText:"Calculating File Size",closeText:"Cancel"},[4]:{className:"alert-danger",closeText:"Close",infoText:N(H,{children:["Please ",u(ny,{style:{color:"#337ab7"}})," to add files to your download cart."]})}},SR=e=>{switch(e.status){case 0:case 1:return N("div",{children:[u("span",{className:"spinner white"}),u("span",{className:"spinner__text",children:tr[e.status].infoText})]});case 4:return u(H,{children:tr[e.status].infoText});case 2:case 3:return N(H,{children:[u(No,{numFiles:e.fileCount,numBytes:e.fileSize}),u("span",{className:"download-confirmation-infoText",children:tr[e.status].infoText})]});default:return u(H,{})}},Ro=({getLastQueryRequest:e,folderId:t,fnClose:n,setTopLevelControlsState:r,topLevelControlsState:o})=>{const{accessToken:a,downloadCartPageUrl:i}=ie(),{showDownloadConfirmation:s=!0}=o!=null?o:{},[l,d]=E.exports.useState(a?0:4),[c,f]=E.exports.useState(0),[p,g]=E.exports.useState(),{data:h,refetch:m}=hb(),v=e(),[b,C]=E.exports.useState(!1),S=E.exports.useCallback((M,B,T)=>{if(a&&T){const q=T.totalNumberOfFiles>0,R=M!=null?M:0;d(q?3:2),f(R),g(B)}},[a]),{data:y,isSuccess:w}=gS({parentId:t,includeSumFileSizes:!0,includeTotalChildCount:!0,includeTypes:[Ws.FILE]});qc(()=>{w&&y&&h&&S(y.totalChildCount,y.sumFileSizesBytes,h)},[S,t,w,y,h]);const _=xr|El,x={...v,partMask:_},{data:I}=mp(x);qc(()=>{var M,B;if(I&&h){const T=(M=I.sumFileSizes)==null?void 0:M.greaterThan;S(I.queryCount,T||(B=I.sumFileSizes)==null?void 0:B.sumFileSizesBytes,h)}},[S,v,I,h]);const O=n?()=>n():()=>{r&&r(M=>({...M,showDownloadConfirmation:!1}))},A=async()=>{if(!a)d(4);else{d(1);const T=(await bR(a,O,v,t,()=>C(!0)))[0];d(T),m()}};b&&(window.location.href=i);const k=o==null?void 0:o.showFacetFilter;return u(H,{children:N(nn,{dismissible:!1,show:!0,variant:"info",transition:!1,className:`download-confirmation ${tr[l].className} ${s?"":"hidden"}
          ${k?Ln:qn}
        `,children:[u(SR,{status:l,fileCount:c,fileSize:p}),N("div",{className:"download-confirmation-action",children:[l!==1&&u("button",{className:"btn btn-link",onClick:O,children:tr[l].closeText}),(l===2||l===3)&&u("button",{type:"button",className:"btn btn-primary",onClick:A,children:"Add"})]})]})})};try{Ro.displayName="DownloadConfirmation",Ro.__docgenInfo={description:"",displayName:"DownloadConfirmation",props:{fnClose:{defaultValue:null,description:"",name:"fnClose",required:!1,type:{name:"(() => void)"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},folderId:{defaultValue:null,description:"",name:"folderId",required:!1,type:{name:"string"}},topLevelControlsState:{defaultValue:null,description:"",name:"topLevelControlsState",required:!1,type:{name:"TopLevelControlsState"}},setTopLevelControlsState:{defaultValue:null,description:"",name:"setTopLevelControlsState",required:!1,type:{name:"Dispatch<SetStateAction<TopLevelControlsState>>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/download_list/DownloadConfirmation.tsx#DownloadConfirmation"]={docgenInfo:Ro.__docgenInfo,name:"DownloadConfirmation",path:"src/lib/containers/download_list/DownloadConfirmation.tsx#DownloadConfirmation"})}catch{}const Hs=3,nr=({helpMessage:e="This search bar is powered by MySQL Full Text Search.",helpUrl:t})=>{const{executeQueryRequest:n,getLastQueryRequest:r}=Tt(),{topLevelControlsState:{showSearchBar:o,showFacetFilter:a}}=Ct(),[i,s]=E.exports.useState(""),l=E.exports.useRef(null),d=f=>{var p;if(f.preventDefault(),i.trim().length<Hs)(p=l.current)==null||p.setCustomValidity(`Search term must have a minimum of ${Hs} characters`);else{const g=r(),{additionalFilters:h=[]}=g.query,m={concreteType:"org.sagebionetworks.repo.model.table.TextMatchesQueryFilter",searchExpression:i};if(h.find(b=>b.concreteType==m.concreteType&&b.searchExpression==m.searchExpression))return;h.push(m),g.query.additionalFilters=h,n(g),s("")}},c=f=>{var p;(p=l.current)==null||p.setCustomValidity(""),s(f.currentTarget.value)};return u("div",{className:`QueryWrapperSearchInput ${a?Ln:qn}`,children:u(Cl,{in:o,timeout:{enter:300,exit:300},children:N("div",{className:"QueryWrapperSearchInput__helppopoverwrapper",children:[N("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:d,children:[u("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:u(pe,{icon:"search"})}),u("input",{ref:l,minLength:Hs,onChange:c,placeholder:"Enter Search Terms",value:i,type:"text"}),i.length>0&&u("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{s("")},children:u(pe,{icon:"close"})})]}),u("div",{className:"QueryWrapperSearchInput__helppopover",children:u(Dt,{markdownText:e,helpUrl:t,placement:"left"})})]})})})};try{nr.displayName="FullTextSearch",nr.__docgenInfo={description:"",displayName:"FullTextSearch",props:{helpMessage:{defaultValue:{value:"This search bar is powered by MySQL Full Text Search."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FullTextSearch.tsx#FullTextSearch"]={docgenInfo:nr.__docgenInfo,name:"FullTextSearch",path:"src/lib/containers/FullTextSearch.tsx#FullTextSearch"})}catch{}const gl="First line is the columns names.",yl="Include row metadata (Row Id and Row Version).",Fa="Comma Separated Values (CSV)",Rf="Tab Separated Values (TSV)",wR={title:"Download query results",type:"object",properties:{"File Type":{type:"string",oneOf:[{const:Fa,title:Fa},{const:Rf,title:Rf}]},Contents:{type:"array",title:"Contents",items:{type:"string",enum:[gl,yl]},uniqueItems:!0}}},CR={"File Type":{"ui:widget":"radio"},Contents:{"ui:widget":"checkboxes"}},_R={title:"Download query results",description:"File is ready for download. Select the download button to download the file.",type:"object"},ER={},xR=[wR,_R],TR=[CR,ER];class Kt extends E.exports.Component{constructor(t){super(t),this.handleSubmit=n=>{this.state.step===0?this.handleDownloadSetup(n):this.onDownload()},this.handleDownloadSetup=n=>{this.setState({isLoading:!0});const{formData:r}=n,o=r["File Type"],a=r.Contents,{queryBundleRequest:i,getLastQueryRequest:s}=this.props,l=o===Fa?",":"	",d=a.includes(gl),c=a.includes(yl),f=i!=null?i:s(),p=f.query.sql,g={sql:p,entityId:kn(p),selectedFacets:f.query.selectedFacets,concreteType:"org.sagebionetworks.repo.model.table.DownloadFromTableRequest",writeHeader:d,includeRowIdAndRowVersion:c,csvTableDescriptor:{separator:l},additionalFilters:f.query.additionalFilters};oy(g,this.context.accessToken).then(h=>{this.setState({isLoading:!1,step:1,data:h})}).catch(h=>{console.log("Error getDownloadFromTableRequest: ",h)})},this.onDownload=()=>{const{data:n}=this.state;ay(n.resultsFileHandleId,this.context.accessToken).then(r=>{window.location.href=r,this.props.onClose()})},this.handleChange=n=>{const{formData:r}=n;this.setState({formData:r})},this.state={isLoading:!1,step:0,formData:{"File Type":Fa,Contents:[gl,yl]}}}render(){const t={position:"absolute",top:10,right:10,zIndex:10},n={height:50,width:50,backgroundSize:50};return u(ae,{animation:!1,show:!0,onHide:this.props.onClose,backdrop:"static",children:N(ae.Body,{children:[u("button",{style:t,onClick:this.props.onClose,children:u(pe,{icon:"close"})}),N(Kv,{schema:xR[this.state.step],uiSchema:TR[this.state.step],onChange:this.handleChange,formData:this.state.formData,onSubmit:this.handleSubmit,children:[this.state.isLoading&&u("div",{className:"SRC-centerAndJustifyContent",children:N("div",{className:"SRC-center-text",children:[u("p",{children:" Creating the File "}),u("div",{style:n,className:"spinner"}),u("p",{children:" Loading... "})]})}),N("div",{style:{textAlign:"right"},children:[u(we,{variant:"default",onClick:this.props.onClose,style:{marginRight:"5px"},children:"Cancel"}),u(we,{type:"submit",variant:"primary",children:this.state.step===0?"Next":"Download"})]})]})]})})}}Kt.contextType=_r;try{Kt.displayName="ModalDownload",Kt.__docgenInfo={description:"",displayName:"ModalDownload",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(...args: any[]) => void"}},includeEntityEtag:{defaultValue:null,description:"",name:"includeEntityEtag",required:!1,type:{name:"boolean"}},queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!1,type:{name:"QueryBundleRequest"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},sort:{defaultValue:null,description:"",name:"sort",required:!1,type:{name:"SortItem[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/ModalDownload.tsx#ModalDownload"]={docgenInfo:Kt.__docgenInfo,name:"ModalDownload",path:"src/lib/containers/ModalDownload.tsx#ModalDownload"})}catch{}function rr(e){const{initQueryRequest:t,onQueryChange:n,onQueryResultBundleChange:r,lockedColumn:o,componentIndex:a,shouldDeepLink:i}=e,[s,l]=E.exports.useState(void 0),{entityId:d,versionNumber:c,getInitQueryRequest:f,getLastQueryRequest:p,setQuery:g,resetQuery:h,removeQueryFilter:m,removeValueFromQueryFilter:v,removeSelectedFacet:b,removeValueFromSelectedFacet:C}=Hy({initQueryRequest:t,componentIndex:a,shouldDeepLink:i,onQueryChange:n}),S=E.exports.useMemo(()=>p(),[p]),{data:y,hasNextPage:w,fetchPreviousPage:_,fetchNextPage:x,isFetchingNextPage:I,isLoading:O,error:A,isPreviousData:k}=Zy(S,{keepPreviousData:!0},l),M=O||k,{data:B}=kl(d,c),[T,q]=E.exports.useState(0);async function R(){if(!w)throw new Error("Called appendNextPageToResults when there is no next page");await x(),q("ALL")}async function D(){if(!w)throw new Error("Called goToNextPage when there is no next page");if(T==="ALL")throw new Error("Cannot go to next page when all pages are displayed");await x(),q(T+1)}const $=T!=="ALL"&&T>0;async function z(){if(T==="ALL")throw new Error("Cannot go to previous page when all pages are displayed");if(!$)throw new Error("Called goToNextPage when there is no next page");await _(),q(T-1)}const V=E.exports.useMemo(()=>{var Q,X,j,ce;if(!(y==null||y.pages.length===0||y.pages[0].responseBody==null))return T==="ALL"?{...y==null?void 0:y.pages[0].responseBody,queryResult:{...(Q=y==null?void 0:y.pages[0].responseBody)==null?void 0:Q.queryResult,queryResults:{...(j=(X=y==null?void 0:y.pages[0].responseBody)==null?void 0:X.queryResult)==null?void 0:j.queryResults,rows:(ce=y.pages.flatMap(ye=>{var be;return(be=ye.responseBody.queryResult)==null?void 0:be.queryResults.rows}))!=null?ce:[]}}}:y==null?void 0:y.pages[T].responseBody},[T,y]);E.exports.useEffect(()=>{V&&r&&r(JSON.stringify(V))},[V,r]);const U=V?Jy(V.facets,V.selectColumns):!0,G=E.exports.useMemo(()=>ev(V,o),[V,o]),P=E.exports.useMemo(()=>{const Q=p();return tv(Q.query,o)},[p,o]),L=E.exports.useCallback(Q=>{var X,j;return(j=(X=V==null?void 0:V.columnModels)==null?void 0:X.find(ce=>ce.name===Q))!=null?j:null},[V==null?void 0:V.columnModels]),F={data:G,isLoadingNewPage:I,hasNextPage:!!w,hasPreviousPage:$,isLoadingNewBundle:M,getLastQueryRequest:p,getInitQueryRequest:f,error:A,entity:B,executeQueryRequest:g,isFacetsAvailable:U,asyncJobStatus:s,appendNextPageToResults:R,goToNextPage:D,goToPreviousPage:z,hasResettableFilters:P,resetQuery:h,removeQueryFilter:m,removeValueFromQueryFilter:v,removeSelectedFacet:b,removeValueFromSelectedFacet:C,lockedColumn:o,getColumnModel:L},{children:Y}=e;return u(zy,{queryContext:F,children:u("div",{className:`SRC-wrapper ${M||I?"SRC-logo-cursor":""} ${U?"has-facets":""}`,children:Y})})}try{rr.displayName="InfiniteQueryWrapper",rr.__docgenInfo={description:"Component that manages the state of a Synapse table query. Data can be accessed via QueryContext using\neither `useQueryContext` or `QueryContextConsumer`.",displayName:"InfiniteQueryWrapper",props:{initQueryRequest:{defaultValue:null,description:"",name:"initQueryRequest",required:!0,type:{name:"QueryBundleRequest"}},componentIndex:{defaultValue:null,description:"",name:"componentIndex",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/InfiniteQueryWrapper.tsx#InfiniteQueryWrapper"]={docgenInfo:rr.__docgenInfo,name:"InfiniteQueryWrapper",path:"src/lib/containers/InfiniteQueryWrapper.tsx#InfiniteQueryWrapper"})}catch{}class or extends ge.Component{constructor(t){var n;super(t),this.handleClickOutsideForm=r=>{var o,a;!((o=this.searchFormRef.current)!=null&&o.contains(r==null?void 0:r.target))&&!((a=this.radioFormRef.current)!=null&&a.contains(r==null?void 0:r.target))&&(this.state.didUpdateRanLast?this.setState({didUpdateRanLast:!1}):this.setState({show:!1}))},this.search=r=>{var g,h,m,v,b,C,S;r.preventDefault();const{searchText:o}=this.state;let{columnName:a}=this.state;const{searchable:i,lockedColumn:s}=this.props;if(a==="")if(i)a=i.filter(y=>y!==(s==null?void 0:s.columnName))[0];else{const y=(m=(h=(g=this.props.queryContext)==null?void 0:g.data)==null?void 0:h.columnModels)==null?void 0:m.filter(w=>w.name!==(s==null?void 0:s.columnName)).filter(w=>this.isSupportedColumn(w));a=(v=y==null?void 0:y[0].name)!=null?v:""}this.setState({show:!1});const{executeQueryRequest:l,getLastQueryRequest:d}=this.props.queryContext,c=d(),{additionalFilters:f=[]}=c.query,p=f.findIndex(y=>!!(yb(y)||vb(y)&&y.columnName===a));if(p===-1){const y=(S=(C=(b=this.props.queryContext)==null?void 0:b.data)==null?void 0:C.columnModels)==null?void 0:S.filter(w=>w.name===a)[0];if(y!=null&&y.columnType.endsWith("_LIST")){const w={columnName:a,function:bb.HAS_LIKE,values:[`%${o}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnMultiValueFunctionQueryFilter"};f.push(w)}else{const w={columnName:a,operator:Sb.LIKE,values:[`%${o}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnSingleValueQueryFilter"};f.push(w)}}else f[p].values.push(`%${o}%`);c.query.additionalFilters=f,l(c)},this.handleChange=r=>{this.setState({searchText:r.currentTarget.value})},this.isSupportedColumn=r=>{switch(r==null?void 0:r.columnType){case re.FILEHANDLEID:case re.ENTITYID:case re.DATE:case re.DATE_LIST:case re.USERID:return!1;default:return!0}},this.isSupportedColumnAndInProps=r=>{if(this.isSupportedColumn(r)){const{searchable:o}=this.props;return o==null?void 0:o.some(a=>a===(r==null?void 0:r.name))}return!1},this.state={show:!1,didUpdateRanLast:!1,searchText:"",columnName:(n=this.props.defaultColumn)!=null?n:""},this.searchFormRef=ge.createRef(),this.radioFormRef=ge.createRef()}componentDidMount(){document.addEventListener("click",this.handleClickOutsideForm)}componentDidUpdate(t){var n,r,o,a,i;!((n=t.queryVisualizationContext)!=null&&n.topLevelControlsState.showSearchBar)&&((r=this.props.queryVisualizationContext)==null?void 0:r.topLevelControlsState.showSearchBar)&&(this.setState({show:!0,didUpdateRanLast:!0}),(i=(a=(o=this.searchFormRef)==null?void 0:o.current)==null?void 0:a.querySelector("input"))==null||i.focus())}componentWillUnmount(){document.removeEventListener("click",this.handleClickOutsideForm)}render(){var f;const{searchable:t,lockedColumn:n,queryContext:{data:r},queryVisualizationContext:{topLevelControlsState:o,getColumnDisplayName:a}}=this.props,{searchText:i,show:s,columnName:l}=this.state;let d=[];t?d=t.map(p=>{var g;return(g=r==null?void 0:r.columnModels)==null?void 0:g.find(h=>h.name===p)}).filter(this.isSupportedColumnAndInProps).map(p=>p.name):r!=null&&r.columnModels&&(d=(f=r.columnModels)==null?void 0:f.filter(this.isSupportedColumn).map(p=>p.name)),d.length&&(n==null?void 0:n.columnName)&&(d=d.filter(p=>p!==(n==null?void 0:n.columnName)));const c=o==null?void 0:o.showFacetFilter;return N("div",{className:`QueryWrapperSearchInput ${c?Ln:qn}`,children:[u(Cl,{in:o==null?void 0:o.showSearchBar,children:N("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:this.search,onClick:()=>{this.setState({show:!0})},ref:this.searchFormRef,children:[u("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:u(pe,{icon:"search"})}),u("input",{onChange:this.handleChange,onClick:()=>{this.setState({show:!0})},placeholder:"Enter Search Terms",value:i,type:"text"}),this.state.searchText.length>0&&u("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{this.setState({searchText:""})},children:u(pe,{icon:"close"})})]})}),u("div",{className:"QueryWrapperSearchInput__dropdown_pos",children:u(Np,{in:s,classNames:"QueryWrapperSearchInput__animate_dropdown",timeout:{enter:0,exit:300},children:N("form",{ref:this.radioFormRef,className:"QueryWrapperSearchInput__column-select QueryWrapperSearchInput__animate_height",children:[u("p",{className:"deemphasized",children:u("i",{children:" Search In Field: "})}),d.map((p,g)=>{const h=a(p);return u("div",{className:"radio",children:u("label",{children:N("span",{children:[u("input",{id:p,type:"radio",value:p,checked:l===""&&g===0||l===p,onClick:()=>{var v,b,C;(C=(b=(v=this.searchFormRef)==null?void 0:v.current)==null?void 0:b.querySelector("input"))==null||C.focus(),this.setState({columnName:p})}}),u("span",{children:h})]})})},`search-field-${p}-${g}`)})]})})})]})}}try{or.displayName="Search",or.__docgenInfo={description:"",displayName:"Search",props:{queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},isQueryWrapperMenuChild:{defaultValue:null,description:"",name:"isQueryWrapperMenuChild",required:!1,type:{name:"boolean"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},searchable:{defaultValue:null,description:"",name:"searchable",required:!1,type:{name:"SearchableColumnsV2"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},fullTextSearchHelpURL:{defaultValue:null,description:"",name:"fullTextSearchHelpURL",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/SearchV2.tsx#Search"]={docgenInfo:or.__docgenInfo,name:"Search",path:"src/lib/containers/SearchV2.tsx#Search"})}catch{}const OR="The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients.",IR="https://help.synapse.org/docs/Querying-Tables,-Views,-and-Datasets.2667642897.html#QueryingTables,Views,andDatasets-UsingAdvancedSearchQueries",ar=({helpMessage:e=OR,helpUrl:t=IR})=>{const{executeQueryRequest:n,getLastQueryRequest:r}=Tt(),{topLevelControlsState:{showSqlEditor:o,showFacetFilter:a}}=Ct(),[i,s]=E.exports.useState(""),l=E.exports.useRef(null);E.exports.useEffect(()=>{var f;if(o){const p=r().query.sql;s(p),(f=l.current)==null||f.focus()}},[o,r]);const d=f=>{f.preventDefault();const p=r();p.query.sql=i,p.query.offset=0,p.query.additionalFilters=[],p.query.selectedFacets=[],n(p)},c=f=>{var p;(p=l.current)==null||p.setCustomValidity(""),s(f.currentTarget.value)};return u("div",{className:`QueryWrapperSqlEditorInput ${a?Ln:qn}`,children:u(Cl,{in:o,timeout:{enter:300,exit:300},children:N("div",{className:"QueryWrapperSqlEditorInput__helppopoverwrapper",children:[N("form",{className:"QueryWrapperSqlEditorInput__searchbar",onSubmit:d,children:[u(mv,{className:"QueryWrapperSqlEditorInput__searchbar__searchicon"}),u("input",{ref:l,onChange:c,placeholder:"Enter Query",value:i,type:"text"})]}),u("div",{className:"QueryWrapperSqlEditorInput__helppopover",children:u(Dt,{markdownText:e,helpUrl:t,placement:"right"})})]})})})};try{ar.displayName="SqlEditor",ar.__docgenInfo={description:"",displayName:"SqlEditor",props:{helpMessage:{defaultValue:{value:"The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:{value:"https://help.synapse.org/docs/Querying-Tables,-Views,-and-Datasets.2667642897.html#QueryingTables,Views,andDatasets-UsingAdvancedSearchQueries"},description:"",name:"helpUrl",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/SqlEditor.tsx#SqlEditor"]={docgenInfo:ar.__docgenInfo,name:"SqlEditor",path:"src/lib/containers/SqlEditor.tsx#SqlEditor"})}catch{}const Ao=e=>N(ae,{animation:!1,show:!0,onHide:()=>e.onHide(),backdrop:"static",children:[u(ae.Header,{closeButton:!0,children:u("span",{style:{fontWeight:"bold",color:"#515359",fontSize:"1.5em"},children:"Sign In Required"})}),N(mb,{children:[u("p",{children:"Anyone can browse public content on the Synapse website, but in order to download and create content you will need to register for an account using an email address."}),N("p",{children:["To find out more see\xA0",u("a",{href:"https://help.synapse.org/docs/Managing-your-account.2055405596.html",target:"_blank",rel:"noopener noreferrer",children:"User Accounts"}),u("span",{children:" and "}),u("a",{href:"https://help.synapse.org/docs/Synapse-Governance.2004255211.html",rel:"noopener noreferrer",target:"_blank",children:"Governance Overview"}),"."]})]}),N(gb,{children:[u(we,{variant:"secondary",onClick:()=>e.onHide(),children:"CANCEL"}),u(we,{className:"SRC-SIGN-IN-CLASS",variant:"primary",onClick:()=>e.onHide(),children:"Sign in"})]})]});try{Ao.displayName="DownloadLoginModal",Ao.__docgenInfo={description:"",displayName:"DownloadLoginModal",props:{showModal:{defaultValue:null,description:"",name:"showModal",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/DownloadLoginModal.tsx#DownloadLoginModal"]={docgenInfo:Ao.__docgenInfo,name:"DownloadLoginModal",path:"src/lib/containers/table/table-top/DownloadLoginModal.tsx#DownloadLoginModal"})}catch{}const ko=({show:e,title:t,onClose:n,pythonNotes:r,pythonCode:o,rNotes:a,rCode:i,cliNotes:s,cliCode:l,helpMarkdown:d,helpUrl:c})=>{let f;l?f="Command Line":o?f="Python":f="R";const[p,g]=E.exports.useState(f),h=N("p",{children:["Installation instructions are available at our"," ",u("a",{className:"ProgrammaticOptions__docslink",href:"https://help.synapse.org/docs/Installing-Synapse-API-Clients.1985249668.html",target:"_blank",rel:"noopener noreferrer",children:"Synapse API Documentation Site"}),"."]});return N(ae,{className:"bootstrap-4-backport ProgrammaticOptions",backdrop:"static",animation:!1,show:e,onHide:n,size:"lg",children:[u(ae.Header,{closeButton:!0,children:N(ae.Title,{children:[t,"\xA0",d&&u(Dt,{markdownText:d,helpUrl:c})]})}),N(ae.Body,{children:[N("div",{className:"Tabs",children:[l&&u("div",{className:"Tab",role:"tab",onClick:m=>{m.stopPropagation(),g("Command Line")},"aria-selected":p==="Command Line",children:"Command Line"}),i&&u("div",{className:"Tab",role:"tab",onClick:m=>{m.stopPropagation(),g("R")},"aria-selected":p==="R",children:"R"}),o&&u("div",{className:"Tab",role:"tab",onClick:m=>{m.stopPropagation(),g("Python")},"aria-selected":p==="Python",children:"Python"})]}),N("div",{className:"TabContent",children:[p==="Command Line"&&N(H,{children:[u("p",{children:s}),h,N("pre",{children:[" ",l," "]})]}),p==="R"&&N(H,{children:[u("p",{children:a}),h,u("pre",{children:i})]}),p==="Python"&&N(H,{children:[u("p",{children:r}),h,u("pre",{children:o})]})]})]}),u(ae.Footer,{children:u(we,{variant:"primary",onClick:n,children:"OK"})})]})};try{ko.displayName="ProgrammaticInstructionsModal",ko.__docgenInfo={description:"Modal used to show programmatic instructions",displayName:"ProgrammaticInstructionsModal",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},pythonNotes:{defaultValue:null,description:"",name:"pythonNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},pythonCode:{defaultValue:null,description:"",name:"pythonCode",required:!1,type:{name:"string"}},rNotes:{defaultValue:null,description:"",name:"rNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},rCode:{defaultValue:null,description:"",name:"rCode",required:!1,type:{name:"string"}},cliNotes:{defaultValue:null,description:"",name:"cliNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},cliCode:{defaultValue:null,description:"",name:"cliCode",required:!1,type:{name:"string"}},helpMarkdown:{defaultValue:null,description:"",name:"helpMarkdown",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/ProgrammaticInstructionsModal.tsx#ProgrammaticInstructionsModal"]={docgenInfo:ko.__docgenInfo,name:"ProgrammaticInstructionsModal",path:"src/lib/containers/ProgrammaticInstructionsModal.tsx#ProgrammaticInstructionsModal"})}catch{}function Lo({queryBundleRequest:e,onHide:t}){var f;const[n,r]=E.exports.useState("..."),{data:o,isLoading:a,isPreviousData:i}=nv({...e,partMask:Ry},{keepPreviousData:!0,useErrorBoundary:!0}),s=(f=o==null?void 0:o.responseBody)==null?void 0:f.combinedSql,l=a||i;E.exports.useEffect(()=>{if(s&&!l){const p=s.toUpperCase().indexOf("FROM SYN"),g=`SELECT * ${s.substring(p)}`;r(g)}},[s,l]);const d=E.exports.useMemo(()=>n.replace(/(["`])/g,"\\$1"),[n]),c=E.exports.useMemo(()=>n.replace(/"/g,'\\"'),[n]);return u(ko,{show:!0,onClose:t,title:"Download Programmatically",cliNotes:u(H,{children:"This command line code will download Synapse files AND file annotations to your working directory."}),cliCode:`synapse get -q "${d}"`,rNotes:N(H,{children:["This R code will download file annotations only. Use"," ",N("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:["synGet","()"]})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),rCode:`query <- synTableQuery("${c}")
read.table(query$filepath, sep = ",")`,pythonNotes:N(H,{children:["This Python code will download file annotations only. Use"," ",u("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:"syn.get"})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),pythonCode:`query = syn.tableQuery("${c}")
query.asDataFrame()`})}try{Lo.displayName="ProgrammaticOptions",Lo.__docgenInfo={description:"",displayName:"ProgrammaticOptions",props:{queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!0,type:{name:"QueryBundleRequest"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/ProgrammaticOptions.tsx#ProgrammaticOptions"]={docgenInfo:Lo.__docgenInfo,name:"ProgrammaticOptions",path:"src/lib/containers/table/table-top/ProgrammaticOptions.tsx#ProgrammaticOptions"})}catch{}const NR="Add To Download Cart",qo=e=>{const{accessToken:t}=ie(),{entity:n,data:r,getLastQueryRequest:o}=Tt(),a=o(),[i,s]=E.exports.useState(!1),[l,d]=E.exports.useState(!1),[c,f]=E.exports.useState(!1),{onDownloadFiles:p,darkTheme:g=!0}=e,h=n&&(mn(n)&&iy(n)||On(n)),m=n&&On(n)&&n.isLatestVersion;return N(E.exports.Fragment,{children:[N(Lt,{as:"span",children:[u(Ll,{tooltipText:"Download Options",size:"lg",darkTheme:g,icon:"download"}),N(Lt.Menu,{className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:[u(Lt.Item,{onClick:()=>{d(!0)},children:"Export Table"}),h&&u(Ke,{title:m?"A draft version of a dataset cannot be added to the Download Cart":null,placement:"left",enterNextDelay:300,describeChild:!0,children:u(Lt.Item,{role:"button",className:m?"ignoreLink":void 0,disabled:m,style:m?{pointerEvents:"auto"}:{},onClick:()=>t?p():s(!0),children:NR})}),u(Ke,{title:m?"A draft version of a dataset cannot be downloaded programmatically":null,placement:"left",enterNextDelay:300,describeChild:!0,children:u(Lt.Item,{className:m?"ignoreLink":void 0,disabled:m,style:m?{pointerEvents:"auto"}:{},onClick:()=>f(!0),children:"Programmatic Options"})})]})]}),i&&u(Ao,{showModal:i,onHide:()=>s(!1)}),l&&u(Kt,{onClose:()=>d(!1),queryBundleRequest:a}),c&&r&&u(Lo,{onHide:()=>f(!1),queryBundleRequest:a})]})};try{qo.displayName="DownloadOptions",qo.__docgenInfo={description:"",displayName:"DownloadOptions",props:{onDownloadFiles:{defaultValue:null,description:"",name:"onDownloadFiles",required:!0,type:{name:"() => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/DownloadOptions.tsx#DownloadOptions"]={docgenInfo:qo.__docgenInfo,name:"DownloadOptions",path:"src/lib/containers/table/table-top/DownloadOptions.tsx#DownloadOptions"})}catch{}const RR="addAndRemoveColumns",Po=e=>{const{headers:t,isColumnSelected:n,toggleColumnSelection:r,darkTheme:o}=e,{getColumnDisplayName:a}=Ct(),[i,s]=E.exports.useState(!1),l=(d,c,f)=>{f.source==="rootClose"?s(!1):s(!0)};return N(Lt,{as:"span",onToggle:(d,c,f)=>l(d,c,f),show:i,drop:"down",children:[u(Ll,{tooltipText:"Show/Hide Columns",icon:o?"columnsdark":"columns",darkTheme:o}),u(Lt.Menu,{id:`${RR}-dropdown`,className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:t==null?void 0:t.map(d=>{const{name:c}=d,f=n.includes(c),p={width:"11px",marginRight:"10px",visibility:f?void 0:"hidden"},g=f?"SRC-primary-text-color":"";return N(Lt.Item,{onClick:()=>r(c),children:[u("span",{className:g,style:p,children:u(pe,{icon:"check",sx:{width:"14px"}})}),a(c)]},c)})})]})};try{Po.displayName="ColumnSelection",Po.__docgenInfo={description:"",displayName:"ColumnSelection",props:{headers:{defaultValue:null,description:"",name:"headers",required:!1,type:{name:"SelectColumn[]"}},isColumnSelected:{defaultValue:null,description:"",name:"isColumnSelected",required:!0,type:{name:"string[]"}},show:{defaultValue:null,description:"",name:"show",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(() => void)"}},toggleColumnSelection:{defaultValue:null,description:"",name:"toggleColumnSelection",required:!0,type:{name:"(name: string) => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/ColumnSelection.tsx#ColumnSelection"]={docgenInfo:Po.__docgenInfo,name:"ColumnSelection",path:"src/lib/containers/table/table-top/ColumnSelection.tsx#ColumnSelection"})}catch{}const AR="Files may be unavailable because you do not have permission to see them, they have been deleted, or the Dataset has been misconfigured.",kR="Files may be unavailable because you do not have permission to see them or the Dataset was misconfigured.",Do=({entity:e})=>{var o,a;const t=e&&On(e),n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:`SELECT * FROM ${e.id}${!e.isLatestVersion&&e.versionNumber?`.${e.versionNumber}`:""}`},entityId:e.id,partMask:xr},{data:r}=mp(n,{enabled:t});if(t&&r&&e){const i=r.queryCount,s=(a=(o=e.items)==null?void 0:o.length)!=null?a:0;if(i===s)return u(H,{});const l=s-i;let d="";return e.isLatestVersion?d=AR:d=kR,N(_t,{className:"SRC-centerContent",style:{marginLeft:10},variant:"smallText1",color:"textSecondary",children:[u(kb,{className:"SRC-color-warning",style:{fontSize:"16px"}}),l.toLocaleString()+" Unavailable",u(Dt,{className:"SRC-margin-left-5",markdownText:d,placement:"right"})]})}else return u(H,{})};try{Do.displayName="MissingQueryResultsWarning",Do.__docgenInfo={description:`If possible, this component will render a warning message if results may be missing from the query due to user permissions or
entities being deleted. If not possible, it will render an empty fragment.`,displayName:"MissingQueryResultsWarning",props:{entity:{defaultValue:null,description:"",name:"entity",required:!0,type:{name:"Table"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/MissingQueryResultsWarning.tsx#MissingQueryResultsWarning"]={docgenInfo:Do.__docgenInfo,name:"MissingQueryResultsWarning",path:"src/lib/containers/MissingQueryResultsWarning.tsx#MissingQueryResultsWarning"})}catch{}const LR=[{icon:"search",key:"showSearchBar",tooltipText:"Show / Hide Search Bar"},{icon:"chart",key:"showFacetVisualization",tooltipText:"Show / Hide Visualizations"},{icon:"download",key:"showDownloadConfirmation",tooltipText:"Show options for download"},{icon:Ay,key:"showSqlEditor",tooltipText:"Show / Hide the Advanced Query Editor"}],ir=e=>{const{name:t,showColumnSelection:n=!1,hideDownload:r=!1,hideVisualizationsControl:o=!1,hideFacetFilterControl:a=!1,hideQueryCount:i=!1,hideSqlEditorControl:s=!0,customControls:l}=e,{data:d,entity:c,executeQueryRequest:f,getLastQueryRequest:p,getInitQueryRequest:g,lockedColumn:h}=Tt(),{topLevelControlsState:m,setTopLevelControlsState:v,columnsToShowInTable:b,selectedRowIndices:C,setColumnsToShowInTable:S}=Ct(),y=O=>{const A={[O]:!m[O]};O==="showSearchBar"&&(A.showDownloadConfirmation=!1),O==="showDownloadConfirmation"&&(A.showSearchBar=!1),v(k=>({...k,...A}))},w=()=>{f(p())},_=E.exports.useMemo(()=>{var A,k;const O=g();return{sql:O.query.sql,selectedFacets:((A=O.query.selectedFacets)!=null?A:[]).filter(M=>M.columnName===(h==null?void 0:h.columnName)),additionalFilters:((k=O.query.additionalFilters)!=null?k:[]).filter(M=>"columnName"in M?M.columnName===(h==null?void 0:h.columnName):!0)}},[g,h==null?void 0:h.columnName]),x=O=>{let A=zn(b);A.includes(O)?A=A.filter(k=>k!==O):A.push(O),S(A)},I=m==null?void 0:m.showFacetFilter;return u("div",{className:`TopLevelControls ${I?Ln:qn}`,"data-testid":"TopLevelControls",children:N("div",{children:[N("div",{className:"TopLevelControls__querycount",children:[t&&N(H,{children:[N(_t,{variant:"sectionTitle",role:"heading",children:[t," ",!i&&u(wb,{query:_,parens:!0})]}),!i&&c&&u(Do,{entity:c})]}),!a&&N("a",{onClick:()=>y("showFacetFilter"),className:"TopLevelControls__querycount__facetFilterLink SRC-no-underline-on-hover",children:[u(Ha,{type:m.showFacetFilter?"close":"filter"}),N("span",{className:"TopLevelControls__querycount__facetFilterLink__text",children:[m.showFacetFilter?"Hide":"Show"," ","filters"]})]})]}),N("div",{className:"TopLevelControls__actions",children:[l&&l.map(O=>{var A;return N("button",{className:`btn SRC-roundBorder SRC-primary-background-color SRC-whiteText ${(A=O.classNames)!=null?A:""}`,style:{marginRight:"5px"},type:"button",onClick:()=>O.onClick({data:d,selectedRowIndices:C,refresh:w}),children:[O.icon,"\xA0",O.buttonText]},O.buttonText)}),LR.map(O=>{const{key:A,icon:k,tooltipText:M}=O;return A==="showDownloadConfirmation"&&r||A==="showFacetVisualization"&&o||A==="showSqlEditor"&&s?u(ge.Fragment,{},A):A==="showDownloadConfirmation"?u(qo,{darkTheme:!0,onDownloadFiles:()=>y(A)},A):u(Ll,{tooltipText:M,callbackFn:()=>y(A),darkTheme:!0,icon:k},A)}),n&&u(Po,{headers:d==null?void 0:d.selectColumns,isColumnSelected:b,toggleColumnSelection:x,darkTheme:!0})]})]})})};try{ir.displayName="TopLevelControls",ir.__docgenInfo={description:"",displayName:"TopLevelControls",props:{name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/TopLevelControls.tsx#TopLevelControls"]={docgenInfo:ir.__docgenInfo,name:"TopLevelControls",path:"src/lib/containers/table/TopLevelControls.tsx#TopLevelControls"})}catch{}var rg={exports:{}};(function(e,t){(function(r,o){e.exports=o()})(Bl,function(){return(()=>{var n={67:(a,i,s)=>{s.r(i),s.d(i,{default:()=>h});var l=s(887),d=s.n(l);function c(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function f(m,v,b){return v in m?Object.defineProperty(m,v,{value:b,enumerable:!0,configurable:!0,writable:!0}):m[v]=b,m}var p,g=(p=0,function(){return p++}),h=function m(v){var b=this,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c(this,m),f(this,"ID","id"),f(this,"PX","px"),f(this,"RESIZABLE","grip-resizable"),f(this,"FLEX","grip-flex"),f(this,"legacyIE",navigator.userAgent.indexOf("Trident/4.0")>0),f(this,"reset",function(S){return b.init(S)}),f(this,"onResize",function(){var S=b.tb;if(S.classList.remove(b.RESIZABLE),S.opt.fixed){S.tableWidth=Number(window.getComputedStyle(S).width.replace(/px/,"")).valueOf();for(var y=0,w=0;w<S.columnCnt;w++)y+=S.columns[w].w;for(var _=0;_<S.columnCnt;_++)S.columns[_].style.width=Math.round(1e3*S.columns[_].w/y)/10+"%",S.columns[_].locked=!0}else b.applyBounds(),S.opt.resizeMode==="flex"&&S.opt.serialize&&b.serializeStore();S.classList.add(b.RESIZABLE),b.syncGrips()}),f(this,"onGripMouseDown",function(S){var y=S.target.parentNode.data,w=b.tb,_=w.grips[y.i],x=S.touches;if(_.ox=x?x[0].pageX:S.pageX,_.l=_.offsetLeft,_.x=_.l,b.createStyle(document.querySelector("head"),"*{cursor:"+w.opt.dragCursor+"!important}"),document.addEventListener("touchmove",b.onGripDrag),document.addEventListener("mousemove",b.onGripDrag),document.addEventListener("touchend",b.onGripDragOver),document.addEventListener("mouseup",b.onGripDragOver),_.classList.add(w.opt.draggingClass),b.grip=_,w.columns[y.i].locked)for(var I,O=0;O<w.columnCnt;O++)(I=w.columns[O]).locked=!1,I.w=Number(window.getComputedStyle(I).width.replace(/px/,"")).valueOf();S.preventDefault()}),f(this,"onGripDrag",function(S){var y=b.grip;if(y){var w=y.t,_=S.touches,x=(_?_[0].pageX:S.pageX)-y.ox+y.l,I=w.opt.minWidth,O=y.i,A=1.5*w.cellSpace+I+w.borderSpace,k=O===w.columnCnt-1,M=O?w.grips[O-1].offsetLeft+w.cellSpace+I:A,B=w.opt.fixed?O===w.columnCnt-1?w.tableWidth-A:w.grips[O+1].offsetLeft-w.cellSpace-I:1/0;if(x=Math.max(M,Math.min(B,x)),y.x=x,y.style.left=x+b.PX,k&&(y.w=w.columns[O].w+x-y.l),w.opt.liveDrag){k?(w.columns[O].style.width=y.w+b.PX,!w.opt.fixed&&w.opt.overflow?w.style.minWidth=w.tableWidth+x-y.l+b.PX:w.tableWidth=Number(window.getComputedStyle(w).width.replace(/px/,"")).valueOf()):b.syncCols(w,O,!1,w.opt),b.syncGrips();var T=w.opt.onDrag;T&&T(S)}S.preventDefault()}}),f(this,"onGripDragOver",function(S){var y=b.grip;document.removeEventListener("touchend",b.onGripDragOver),document.removeEventListener("mouseup",b.onGripDragOver),document.removeEventListener("touchmove",b.onGripDrag),document.removeEventListener("mousemove",b.onGripDrag);var w=document.querySelector("head").lastChild;if(w.parentNode.removeChild(w),y){if(y.classList.remove(y.t.opt.draggingClass),y.x-y.l!=0){var _=y.t,x=_.opt.onResize,I=y.i;if(I===_.columnCnt-1){var O=_.columns[I];O.style.width=y.w+b.PX,O.w=y.w}else b.syncCols(_,I,!0,_.opt);_.opt.fixed||b.applyBounds(),b.syncGrips(),x&&x(S),_.opt.serialize&&b.serializeStore()}b.grip=null}}),f(this,"init",function(S){if(S.disable)return b.destroy();var y=b.tb,w=y.getAttribute(b.ID)||b.RESIZABLE+g();if(!y.matches("table")||y.extended&&!S.partialRefresh)return null;var _=document.querySelector("head");if(b.createStyle(_," .grip-resizable{table-layout:fixed;} .grip-resizable > tbody > tr > td, .grip-resizable > tbody > tr > th{overflow:hidden} .grip-padding > tbody > tr > td, .grip-padding > tbody > tr > th{padding-left:0!important; padding-right:0!important;} .grip-container{ height:0px; position:relative;} .grip-handle{margin-left:-5px; position:absolute; z-index:5; } .grip-handle .grip-resizable{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;cursor: col-resize;top:0px} .grip-lastgrip{position:absolute; width:1px; } .grip-drag{ border-left:1px dotted black;	} .grip-flex{width:auto!important;} .grip-handle.grip-disabledgrip .grip-resizable{cursor:default; display:none;}"),S.hoverCursor&&S.hoverCursor!=="col-resize"){var x=".grip-handle .grip-resizable:hover{cursor:"+S.hoverCursor+"!important}";b.createStyle(_,x)}y.setAttribute(b.ID,w);var I=y.opt;y.opt=b.extendOptions(S);var O=b.getTableHeaders(y);if(b.extendTable(O),S.remoteTable&&S.remoteTable.matches("table")){var A=b.getTableHeaders(y.opt.remoteTable);O.length===A.length?b.extendRemoteTable(y.opt.remoteTable,A,y):console.warn("column count for remote table did not match")}return I}),f(this,"applyBounds",function(){var S=b.tb,y=S.columns.map(function(w){return window.getComputedStyle(w).width});S.style.width=window.getComputedStyle(S).width,S.tableWidth=Number(S.style.width.replace(/px/,"")).valueOf(),S.classList.remove(b.FLEX),S.columns.forEach(function(w,_){w.style.width=y[_],w.w=Number(y[_].replace(/px/,"")).valueOf()}),S.classList.add(b.FLEX)}),f(this,"serializeStore",function(){var S=b.store,y=b.tb;S[y.getAttribute(b.ID)]="";for(var w=0,_=0;_<y.columns.length;_++){var x=window.getComputedStyle(y.columns[_]).width.replace(/px/,"");S[y.getAttribute(b.ID)]+=x+";",w+=Number(x).valueOf()}S[y.getAttribute(b.ID)]+=w.toString(),y.opt.fixed||(S[y.getAttribute(b.ID)]+=";"+window.getComputedStyle(y).width.replace(/px/,""))}),f(this,"syncGrips",function(){var S=b.tb;S.gripContainer.style.width=S.tableWidth+b.PX;for(var y=0;y<S.columnCnt;y++){var w=S.columns[y],_=w.getBoundingClientRect(),x=S.getBoundingClientRect();S.grips[y].style.left=_.left-x.left+w.offsetWidth+S.cellSpace/2+b.PX,S.grips[y].style.height=(S.opt.headerOnly?S.columns[0].offsetHeight:S.offsetHeight)+b.PX}}),f(this,"destroy",function(){var S=b.tb,y=S.getAttribute(b.ID);return y?(b.store[y]="",S.classList.remove(b.RESIZABLE),S.classList.remove(b.FLEX),S.remote&&(S.remote.classList.remove(b.RESIZABLE),S.remote.classList.remove(b.FLEX)),S.gripContainer&&S.gripContainer.parentNode&&S.gripContainer.parentNode.removeChild(S.gripContainer),delete S.extended,S.opt):null}),f(this,"createStyle",function(S,y){var w=d()(y).toString(),_=S.querySelectorAll("style");if(!Array.from(_).filter(function(I){return I.gripid===w}).length){var x=document.createElement("style");x.type="text/css",x.gripid=w,x.styleSheet?x.styleSheet.cssText=y:x.appendChild(document.createTextNode(y)),S.appendChild(x)}}),f(this,"extendOptions",function(S){var y=Object.assign({},m.DEFAULTS,S);switch(y.fixed=!0,y.overflow=!1,y.resizeMode){case"flex":y.fixed=!1;break;case"overflow":y.fixed=!1,y.overflow=!0}return y}),f(this,"getTableHeaders",function(S){var y="#"+S.id,w=Array.from(S.querySelectorAll(y+">thead>tr:nth-of-type(1)>th"));return(w=w.concat(Array.from(S.querySelectorAll(y+">thead>tr:nth-of-type(1)>td")))).length||(w=(w=(w=(w=Array.from(S.querySelectorAll(y+">tbody>tr:nth-of-type(1)>th"))).concat(Array.from(S.querySelectorAll(y+">tr:nth-of-type(1)>th")))).concat(Array.from(S.querySelectorAll(y+">tbody>tr:nth-of-type(1)>td")))).concat(Array.from(S.querySelectorAll(y+">tr:nth-of-type(1)>td")))),b.filterInvisible(w,!1)}),f(this,"filterInvisible",function(S,y){return S.filter(function(w){var _=y?-1:w.offsetWidth,x=y?-1:w.offsetHeight;return!(_===0&&x===0||w.style&&w.style.display&&window.getComputedStyle(w).display==="none")})}),f(this,"extendTable",function(S){var y=b.tb;y.opt.removePadding&&y.classList.add("grip-padding"),y.classList.add(b.RESIZABLE),y.insertAdjacentHTML("beforebegin",'<div class="grip-container"/>'),y.grips=[],y.columns=[],y.tableWidth=Number(window.getComputedStyle(y).width.replace(/px/,"")).valueOf(),y.gripContainer=y.previousElementSibling,y.opt.marginLeft&&(y.gripContainer.style.marginLeft=y.opt.marginLeft),y.opt.marginRight&&(y.gripContainer.style.marginRight=y.opt.marginRight),y.cellSpace=parseInt(b.legacyIE?y.cellSpacing||y.currentStyle.borderSpacing:window.getComputedStyle(y).borderSpacing.split(" ")[0].replace(/px/,""))||2,y.borderSpace=parseInt(b.legacyIE?y.border||y.currentStyle.borderLeftWidth:window.getComputedStyle(y).borderLeftWidth.replace(/px/,""))||1,y.extended=!0,b.createGrips(S)}),f(this,"extendRemoteTable",function(S,y,w){w.opt.removePadding&&S.classList.add("grip-padding"),S.classList.add(b.RESIZABLE),S.getAttribute(b.ID)||S.setAttribute(b.ID,w.getAttribute(b.ID)+"remote"),S.columns=[],y.forEach(function(x,I){var O=y[I];O.w=w.columns[I].w,O.style.width=O.w+b.PX,O.removeAttribute("width"),S.columns.push(O)}),S.tableWidth=w.tableWidth,S.cellSpace=w.cellSpace,S.borderSpace=w.borderSpace;var _=Array.from(S.querySelectorAll("col"));S.columnGrp=b.filterInvisible(_,!0),S.columnGrp.forEach(function(x,I){x.removeAttribute("width"),x.style.width=w.columnGrp[I].style.width}),w.remote=S}),f(this,"createGrips",function(S){var y=b.tb;y.columnGrp=b.filterInvisible(Array.from(y.querySelectorAll("col")),!0),y.columnGrp.forEach(function(x){x.removeAttribute("width")}),y.columnCnt=S.length;var w=!1;b.store[y.getAttribute(b.ID)]&&(b.deserializeStore(S),w=!0),y.opt.widths||(y.opt.widths=[]),S.forEach(function(x,I){var O=S[I],A=y.opt.disabledColumns.indexOf(I)!==-1;b.createDiv(y.gripContainer,"grip-handle");var k=y.gripContainer.lastChild;!A&&y.opt.gripInnerHtml&&(k.innerHTML=y.opt.gripInnerHtml),b.createDiv(k,b.RESIZABLE),I===y.columnCnt-1&&(k.classList.add("grip-lastgrip"),y.opt.fixed&&(k.innerHTML="")),k.addEventListener("touchstart",b.onGripMouseDown,{capture:!0,passive:!0}),k.addEventListener("mousedown",b.onGripMouseDown,!0),A?k.classList.add("grip-disabledgrip"):(k.classList.remove("grip-disabledgrip"),k.addEventListener("touchstart",b.onGripMouseDown,{capture:!0,passive:!0}),k.addEventListener("mousedown",b.onGripMouseDown,!0)),k.t=y,k.i=I,y.opt.widths[I]?O.w=y.opt.widths[I]:O.w=w?Number(O.style.width.replace(/px/,"")).valueOf():Number(window.getComputedStyle(O).width.replace(/px/,"")).valueOf(),O.style.width=O.w+b.PX,O.removeAttribute("width"),k.data={i:I,t:y.getAttribute(b.ID),last:I===y.columnCnt-1},y.grips.push(k),y.columns.push(O)});var _=Array.from(y.querySelectorAll("td"));_.concat(Array.from(y.querySelectorAll("th"))),(_=(_=_.filter(function(x){for(var I=0;I<S.length;I++)if(S[I]===x)return!1;return!0})).filter(function(x){return!(x.querySelectorAll("table th").length||x.querySelectorAll("table td").length)})).forEach(function(x){x.removeAttribute("width")}),y.opt.fixed||(y.removeAttribute("width"),y.classList.add(b.FLEX)),b.syncGrips()}),f(this,"deserializeStore",function(S){var y=b.tb;if(y.columnGrp.forEach(function(I){I.removeAttribute("width")}),y.opt.flush)b.store[y.getAttribute(b.ID)]="";else{var w=b.store[y.getAttribute(b.ID)].split(";"),_=w[y.columnCnt+1];!y.opt.fixed&&_&&(y.style.width=_+b.PX,y.opt.overflow&&(y.style.minWidth=_+b.PX,y.tableWidth=Number(_).valueOf()));for(var x=0;x<y.columnCnt;x++)S[x].style.width=w[x]+b.PX,y.columnGrp[x]&&(y.columnGrp[x].style.width=100*Number(w[x]).valueOf()/Number(w[y.columnCnt]).valueOf()+"%")}}),f(this,"createDiv",function(S,y,w){var _=document.createElement("div");_.classList.add(y),w&&(_.innerHTML=w),S.appendChild(_)}),f(this,"syncCols",function(S,y,w,_){var x=S.remote,I=b.grip.x-b.grip.l,O=S.columns[y],A=S.columns[y+1];if(O&&A){var k=O.w+I,M=A.w-I,B=k+b.PX;if(O.style.width=B,S.columnGrp[y]&&S.columnGrp[y].style.width&&(S.columnGrp[y].style.width=B),x&&(x.columns[y].style.width=B,x.columnGrp[y]&&x.columnGrp[y].style.width&&(x.columnGrp[y].style.width=B)),_.fixed){var T=M+b.PX;A.style.width=T,S.columnGrp[y+1]&&S.columnGrp[y+1].style.width&&(S.columnGrp[y+1].style.width=T),x&&(x.columns[y+1].style.width=T,x.columnGrp[y+1]&&x.columnGrp[y+1].style.width&&(x.columnGrp[y+1].style.width=T))}else _.overflow&&(S.style.minWidth=S.tableWidth+I+b.PX);w&&(O.w=k,A.w=_.fixed?M:A.w,x&&(x.columns[y].w=k,x.columns[y+1].w=_.fixed?M:A.w))}});try{this.store=sessionStorage}catch{this.store={}}this.grip=null,this.tb=v,window.addEventListener("resize",this.onResize),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),this.init(C)};h.DEFAULTS={resizeMode:"fit",draggingClass:"grip-drag",gripInnerHtml:"",liveDrag:!1,minWidth:15,headerOnly:!1,hoverCursor:"col-resize",dragCursor:"col-resize",flush:!1,marginLeft:null,marginRight:null,remoteTable:null,disable:!1,partialRefresh:!1,disabledColumns:[],removePadding:!0,widths:[],serialize:!0,onDrag:null,onResize:null}},887:a=>{a.exports=function(s){for(var l=5381,d=s.length;d;)l=33*l^s.charCodeAt(--d);return l>>>0}}},r={};function o(a){if(r[a])return r[a].exports;var i=r[a]={exports:{}};return n[a](i,i.exports,o),i.exports}return o.n=a=>{var i=a&&a.__esModule?()=>a.default:()=>a;return o.d(i,{a:i}),i},o.d=(a,i)=>{for(var s in i)o.o(i,s)&&!o.o(a,s)&&Object.defineProperty(a,s,{enumerable:!0,get:i[s]})},o.o=(a,i)=>Object.prototype.hasOwnProperty.call(a,i),o.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o(67)})()})})(rg);const qR=Dv(rg.exports),Mo=e=>{const{entityId:t,entityVersionNumber:n}=e,{accessToken:r}=ie(),o=sy();return r?u(H,{children:u(Ke,{title:"Add this file to your Download Cart",placement:"right",enterNextDelay:300,children:u("a",{"data-testid":"AddToDownloadListV2",onClick:async()=>{try{await ly(t,n,r),o.invalidateQueries(["downloadliststatsv2"]);const i=await Tn(r,t,n?n==null?void 0:n.toString():void 0);en(`${i.name} was successfully added to your Download Cart.`,"success")}catch(i){en(`Unable to add the file to your Download Cart. ${i}`,"danger")}},className:"ignoreLink",children:u(pe,{icon:"addToCart"})})})}):u(H,{})};try{Mo.displayName="AddToDownloadListV2",Mo.__docgenInfo={description:"",displayName:"AddToDownloadListV2",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/AddToDownloadListV2.tsx#AddToDownloadListV2"]={docgenInfo:Mo.__docgenInfo,name:"AddToDownloadListV2",path:"src/lib/containers/AddToDownloadListV2.tsx#AddToDownloadListV2"})}catch{}var vl={exports:{}};(function(e,t){(function(n,r){var o="1.0.2",a="",i="?",s="function",l="undefined",d="object",c="string",f="major",p="model",g="name",h="type",m="vendor",v="version",b="architecture",C="console",S="mobile",y="tablet",w="smarttv",_="wearable",x="embedded",I=255,O="Amazon",A="Apple",k="ASUS",M="BlackBerry",B="Browser",T="Chrome",q="Edge",R="Firefox",D="Google",$="Huawei",z="LG",V="Microsoft",U="Motorola",G="Opera",P="Samsung",L="Sony",F="Xiaomi",Y="Zebra",K="Facebook",Q=function(J,le){var ee={};for(var me in J)le[me]&&le[me].length%2===0?ee[me]=le[me].concat(J[me]):ee[me]=J[me];return ee},X=function(J){for(var le={},ee=0;ee<J.length;ee++)le[J[ee].toUpperCase()]=J[ee];return le},j=function(J,le){return typeof J===c?ce(le).indexOf(ce(J))!==-1:!1},ce=function(J){return J.toLowerCase()},ye=function(J){return typeof J===c?J.replace(/[^\d\.]/g,a).split(".")[0]:r},be=function(J,le){if(typeof J===c)return J=J.replace(/^\s\s*/,a).replace(/\s\s*$/,a),typeof le===l?J:J.substring(0,I)},_e=function(J,le){for(var ee=0,me,ne,We,oe,Ne,Oe;ee<le.length&&!Ne;){var ft=le[ee],rt=le[ee+1];for(me=ne=0;me<ft.length&&!Ne;)if(Ne=ft[me++].exec(J),Ne)for(We=0;We<rt.length;We++)Oe=Ne[++ne],oe=rt[We],typeof oe===d&&oe.length>0?oe.length===2?typeof oe[1]==s?this[oe[0]]=oe[1].call(this,Oe):this[oe[0]]=oe[1]:oe.length===3?typeof oe[1]===s&&!(oe[1].exec&&oe[1].test)?this[oe[0]]=Oe?oe[1].call(this,Oe,oe[2]):r:this[oe[0]]=Oe?Oe.replace(oe[1],oe[2]):r:oe.length===4&&(this[oe[0]]=Oe?oe[3].call(this,Oe.replace(oe[1],oe[2])):r):this[oe]=Oe||r;ee+=2}},Me=function(J,le){for(var ee in le)if(typeof le[ee]===d&&le[ee].length>0){for(var me=0;me<le[ee].length;me++)if(j(le[ee][me],J))return ee===i?r:ee}else if(j(le[ee],J))return ee===i?r:ee;return J},Ue={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Ve={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ye={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[g,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,v],[/opios[\/ ]+([\w\.]+)/i],[v,[g,G+" Mini"]],[/\bopr\/([\w\.]+)/i],[v,[g,G]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[g,v],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[g,"UC"+B]],[/\bqbcore\/([\w\.]+)/i],[v,[g,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[v,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[g,"IE"]],[/yabrowser\/([\w\.]+)/i],[v,[g,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure "+B],v],[/\bfocus\/([\w\.]+)/i],[v,[g,R+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[g,G+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[g,G+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[g,"MIUI "+B]],[/fxios\/([-\w\.]+)/i],[v,[g,R]],[/\bqihu|(qi?ho?o?|360)browser/i],[[g,"360 "+B]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1 "+B],v],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[g,v],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,K],v],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[g,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[g,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[g,T+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,T+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[g,"Android "+B]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,v],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[v,[g,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[v,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[v,Me,Ue]],[/(webkit|khtml)\/([\w\.]+)/i],[g,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[g,R+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[g,v]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[b,"amd64"]],[/(ia32(?=;))/i],[[b,ce]],[/((?:i[346]|x)86)[;\)]/i],[[b,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[b,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[b,"armhf"]],[/windows (ce|mobile); ppc;/i],[[b,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[b,/ower/,a,ce]],[/(sun4\w)[;\)]/i],[[b,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[b,ce]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[p,[m,P],[h,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[p,[m,P],[h,S]],[/\((ip(?:hone|od)[\w ]*);/i],[p,[m,A],[h,S]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[p,[m,A],[h,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[p,[m,$],[h,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[p,[m,$],[h,S]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[p,/_/g," "],[m,F],[h,S]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[p,/_/g," "],[m,F],[h,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[p,[m,"OPPO"],[h,S]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[p,[m,"Vivo"],[h,S]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[p,[m,"Realme"],[h,S]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[p,[m,U],[h,S]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[p,[m,U],[h,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[p,[m,z],[h,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[p,[m,z],[h,S]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[p,[m,"Lenovo"],[h,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[p,/_/g," "],[m,"Nokia"],[h,S]],[/(pixel c)\b/i],[p,[m,D],[h,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[p,[m,D],[h,S]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[m,L],[h,S]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[p,"Xperia Tablet"],[m,L],[h,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[p,[m,"OnePlus"],[h,S]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[p,[m,O],[h,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[p,/(.+)/g,"Fire Phone $1"],[m,O],[h,S]],[/(playbook);[-\w\),; ]+(rim)/i],[p,m,[h,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[p,[m,M],[h,S]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[p,[m,k],[h,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[p,[m,k],[h,S]],[/(nexus 9)/i],[p,[m,"HTC"],[h,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[m,[p,/_/g," "],[h,S]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[p,[m,"Acer"],[h,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[p,[m,"Meizu"],[h,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[p,[m,"Sharp"],[h,S]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,p,[h,S]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,p,[h,y]],[/(surface duo)/i],[p,[m,V],[h,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[p,[m,"Fairphone"],[h,S]],[/(u304aa)/i],[p,[m,"AT&T"],[h,S]],[/\bsie-(\w*)/i],[p,[m,"Siemens"],[h,S]],[/\b(rct\w+) b/i],[p,[m,"RCA"],[h,y]],[/\b(venue[\d ]{2,7}) b/i],[p,[m,"Dell"],[h,y]],[/\b(q(?:mv|ta)\w+) b/i],[p,[m,"Verizon"],[h,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[p,[m,"Barnes & Noble"],[h,y]],[/\b(tm\d{3}\w+) b/i],[p,[m,"NuVision"],[h,y]],[/\b(k88) b/i],[p,[m,"ZTE"],[h,y]],[/\b(nx\d{3}j) b/i],[p,[m,"ZTE"],[h,S]],[/\b(gen\d{3}) b.+49h/i],[p,[m,"Swiss"],[h,S]],[/\b(zur\d{3}) b/i],[p,[m,"Swiss"],[h,y]],[/\b((zeki)?tb.*\b) b/i],[p,[m,"Zeki"],[h,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],p,[h,y]],[/\b(ns-?\w{0,9}) b/i],[p,[m,"Insignia"],[h,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[p,[m,"NextBook"],[h,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],p,[h,S]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],p,[h,S]],[/\b(ph-1) /i],[p,[m,"Essential"],[h,S]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[p,[m,"Envizen"],[h,y]],[/\b(trio[-\w\. ]+) b/i],[p,[m,"MachSpeed"],[h,y]],[/\btu_(1491) b/i],[p,[m,"Rotor"],[h,y]],[/(shield[\w ]+) b/i],[p,[m,"Nvidia"],[h,y]],[/(sprint) (\w+)/i],[m,p,[h,S]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[m,V],[h,S]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[p,[m,Y],[h,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[p,[m,Y],[h,S]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,p,[h,C]],[/droid.+; (shield) bui/i],[p,[m,"Nvidia"],[h,C]],[/(playstation [345portablevi]+)/i],[p,[m,L],[h,C]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[p,[m,V],[h,C]],[/smart-tv.+(samsung)/i],[m,[h,w]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[m,P],[h,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,z],[h,w]],[/(apple) ?tv/i],[m,[p,A+" TV"],[h,w]],[/crkey/i],[[p,T+"cast"],[m,D],[h,w]],[/droid.+aft(\w)( bui|\))/i],[p,[m,O],[h,w]],[/\(dtv[\);].+(aquos)/i],[p,[m,"Sharp"],[h,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[m,be],[p,be],[h,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,w]],[/((pebble))app/i],[m,p,[h,_]],[/droid.+; (glass) \d/i],[p,[m,D],[h,_]],[/droid.+; (wt63?0{2,3})\)/i],[p,[m,Y],[h,_]],[/(quest( 2)?)/i],[p,[m,K],[h,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[h,x]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[p,[h,S]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[p,[h,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,y]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[h,S]],[/(android[-\w\. ]{0,9});.+buil/i],[p,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[g,q+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[g,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,v],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[g,[v,Me,Ve]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[g,"Windows"],[v,Me,Ve]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,"Mac OS"],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[v,g],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[g,v],[/\(bb(10);/i],[v,[g,M]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[g,R+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[g,"webOS"]],[/crkey\/([\d\.]+)/i],[v,[g,T+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[g,"Chromium OS"],v],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,v],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[g,v]]},Ie=function(J,le){if(typeof J===d&&(le=J,J=r),!(this instanceof Ie))return new Ie(J,le).getResult();var ee=J||(typeof n!==l&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:a),me=le?Q(Ye,le):Ye;return this.getBrowser=function(){var ne={};return ne[g]=r,ne[v]=r,_e.call(ne,ee,me.browser),ne.major=ye(ne.version),ne},this.getCPU=function(){var ne={};return ne[b]=r,_e.call(ne,ee,me.cpu),ne},this.getDevice=function(){var ne={};return ne[m]=r,ne[p]=r,ne[h]=r,_e.call(ne,ee,me.device),ne},this.getEngine=function(){var ne={};return ne[g]=r,ne[v]=r,_e.call(ne,ee,me.engine),ne},this.getOS=function(){var ne={};return ne[g]=r,ne[v]=r,_e.call(ne,ee,me.os),ne},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ee},this.setUA=function(ne){return ee=typeof ne===c&&ne.length>I?be(ne,I):ne,this},this.setUA(ee),this};Ie.VERSION=o,Ie.BROWSER=X([g,v,f]),Ie.CPU=X([b]),Ie.DEVICE=X([p,m,h,C,S,w,y,_,x]),Ie.ENGINE=Ie.OS=X([g,v]),e.exports&&(t=e.exports=Ie),t.UAParser=Ie;var je=typeof n!==l&&(n.jQuery||n.Zepto);if(je&&!je.ua){var ut=new Ie;je.ua=ut.getResult(),je.ua.get=function(){return ut.getUA()},je.ua.set=function(J){ut.setUA(J);var le=ut.getResult();for(var ee in le)je.ua[ee]=le[ee]}}})(typeof window=="object"?window:Bl)})(vl,vl.exports);const sr=e=>{const{accessToken:t}=ie(),{associatedObjectId:n,entityVersionNumber:r,associatedObjectType:o,fileHandleId:a,displayFileName:i,onClickCallback:s}=e,{ref:l,inView:d}=Pn(),[c,f]=E.exports.useState(!1),[p,g]=E.exports.useState(!1),[h,m]=E.exports.useState(),[v,b]=E.exports.useState(),[C,S]=E.exports.useState("");let y=!0;E.exports.useEffect(()=>(y&&d&&I(),()=>{y=!1}),[t,d]);const w=async()=>{let A;const M=new vl.exports.UAParser().getBrowser().name=="Safari";let B=null;M&&(B=window.open("","Safari Download","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,popup,width=600,height=200"),B.document.body.innerHTML="Downloading file on Safari...");try{o===Re.TableEntity?A=(await x(!0)).requestedFiles[0].preSignedURL:A=(await Nc(h,t,!1,!0)).preSignedURL}catch(T){console.log("Fail to get file download link: ",T)}A?(M&&B?(B.location=A,setTimeout(()=>{B&&B.close()},1e4)):window.open(A),s&&s(c)):(B==null||B.close(),console.log("Fail to get file download link"))},_=A=>A&&!A.isPreview?(g(!0),!0):(g(!1),!1),x=(A=!1)=>An({includeFileHandles:!0,includePreSignedURLs:A,includePreviewPreSignedURLs:!1,requestedFiles:[{associateObjectId:n,associateObjectType:o,fileHandleId:a}]},t),I=()=>Tn(t,n,r).then(async A=>{if(A.hasOwnProperty("dataFileHandleId"))return m(A),Nc(A,t,!0).then(k=>{const M=k.fileHandle;M&&_(M)&&hS(M)&&(f(!0),b(M.externalURL))}).catch(k=>{console.log("Error on getFileEntityFileHandle = ",k)});if(o===Re.TableEntity){const M=(await x()).requestedFiles[0].fileHandle;i&&M&&_(M)&&S(M.fileName)}return Promise.resolve()}).catch(A=>{console.log("Error on getEntity = ",A)});return u(Ke,{title:c?"Navigate to external link":"Download this file individually",enterNextDelay:_a,placement:"left",children:u("span",{ref:l,children:(()=>c?u("button",{className:"btn-download-icon",onClick:()=>{s&&s(c)},children:u("a",{className:"ignoreLink",rel:"noreferrer",href:v,target:"_blank",children:u(pe,{icon:"openInNewWindow"})})}):p?N("button",{className:"btn-download-icon",onClick:w,children:[u(pe,{icon:"download"}),i&&C?C:""]}):u(H,{}))()})})};try{sr.displayName="DirectDownload",sr.__docgenInfo={description:"",displayName:"DirectDownload",props:{associatedObjectId:{defaultValue:null,description:"",name:"associatedObjectId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},associatedObjectType:{defaultValue:null,description:"",name:"associatedObjectType",required:!1,type:{name:"enum",value:[{value:'"FileEntity"'},{value:'"TableEntity"'},{value:'"WikiAttachment"'},{value:'"WikiMarkdown"'},{value:'"UserProfileAttachment"'},{value:'"MessageAttachment"'},{value:'"TeamAttachment"'},{value:'"SubmissionAttachment"'},{value:'"VerificationSubmission"'},{value:'"AccessRequirementAttachment"'},{value:'"DataAccessRequestAttachment"'},{value:'"DataAccessSubmissionAttachment"'}]}},fileHandleId:{defaultValue:null,description:"",name:"fileHandleId",required:!1,type:{name:"string"}},displayFileName:{defaultValue:null,description:"",name:"displayFileName",required:!1,type:{name:"boolean"}},onClickCallback:{defaultValue:null,description:"",name:"onClickCallback",required:!1,type:{name:"((isExternalLink: boolean) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DirectDownload.tsx#DirectDownload"]={docgenInfo:sr.__docgenInfo,name:"DirectDownload",path:"src/lib/containers/DirectDownload.tsx#DirectDownload"})}catch{}const PR=e=>{const t=E.exports.useRef();return E.exports.useEffect(()=>{t.current=e}),t.current},DR=e=>PR(e)!==e;function Mt({isCompleted:e}){return u("div",{"data-testid":`AccessApprovalCheckMark-${e}`,className:`check-mark-container ${e?"green":"orange"}`,children:e?u(Rb,{}):u(Ab,{})})}try{Mt.displayName="AccessApprovalCheckMark",Mt.__docgenInfo={description:"",displayName:"AccessApprovalCheckMark",props:{isCompleted:{defaultValue:null,description:"",name:"isCompleted",required:!0,type:{name:"boolean | undefined"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AccessApprovalCheckMark.tsx#AccessApprovalCheckMark"]={docgenInfo:Mt.__docgenInfo,name:"AccessApprovalCheckMark",path:"src/lib/containers/access_requirement_list/AccessApprovalCheckMark.tsx#AccessApprovalCheckMark"})}catch{}function En({user:e,wikiPage:t,accessRequirement:n,accessRequirementStatus:r,showButton:o=!0,entityId:a,onHide:i}){const{accessToken:s}=ie(),[l,d]=E.exports.useState(!0),c=r==null?void 0:r.isApproved,[f,p]=E.exports.useState(c);let g="";n.concreteType===qe.ManagedACTAccessRequirement||n.concreteType===qe.ACTAccessRequirement?window.location.hostname==="www.synapse.org"||window.location.hostname==="staging.synapse.org"?g="Request access":g="Request access via Synapse.org":g="I Accept Terms of Use",E.exports.useEffect(()=>{p(c)},[c]);const h=()=>{window.open(`${$e.PORTAL}#!AccessRequirement:AR_ID=${n.id}&TYPE=ENTITY&ID=${a}`)},m=()=>{if(n.concreteType===qe.ManagedACTAccessRequirement||n.concreteType===qe.ACTAccessRequirement)h(),i==null||i();else if(!f){const I={requirementId:n==null?void 0:n.id,submitterId:e==null?void 0:e.ownerId,accessorId:e==null?void 0:e.ownerId,state:Yl.APPROVED};Jf(s,I).then(O=>{p(!0)}).catch(O=>console.error("Error on post access approval: ",O))}},v=n.termsOfUse,b=n.actContactInfo,C=n.concreteType===qe.TermsOfUseAccessRequirement,S=n.concreteType===qe.ACTAccessRequirement,y=C&&v||S&&b;let w=u(H,{});t?w=u("div",{className:"AcceptRequirementsMarkdown",children:u(Fe,{wikiId:t==null?void 0:t.wikiPageId,ownerId:t==null?void 0:t.ownerObjectId,objectType:t==null?void 0:t.ownerObjectType})}):y&&(w=u(Fe,{markdown:C?v:b}));const _=n.concreteType===qe.ManagedACTAccessRequirement;return u(H,{children:N("div",{"data-testid":"AcceptedRequirements",className:"requirement-container",children:[u(Mt,{isCompleted:f}),N("div",{className:"terms-of-use-content",children:[f?N("div",{children:[N("p",{children:[_?"Your data access request has been approved.":"You have accepted the terms of use.",_&&u("a",{className:"update-request-button",onClick:()=>{h()},children:"Update Request"}),u("a",{className:"view-terms-button",onClick:()=>{d(!l)},children:"View Terms"})]}),u("div",{className:`view-terms ${l?"hidden":"show"}`,children:w})]}):w,s&&o&&N("div",{className:`button-container ${f?"hide":"default"}`,children:[u("div",{className:"accept-button-container",children:u("button",{className:"accept-button",onClick:m,children:g})}),u("div",{className:"not-accept-button-container",children:u("button",{className:"not-accpet-button",onClick:()=>i==null?void 0:i(),children:"I do not accept"})})]})]})]})})}try{En.displayName="AcceptedRequirements",En.__docgenInfo={description:"",displayName:"AcceptedRequirements",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPageKey | undefined"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement | ManagedACTAccessRequirement | SelfSignAccessRequirement | TermsOfUseAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus | undefined"}},showButton:{defaultValue:{value:"true"},description:"",name:"showButton",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AcceptedRequirements.tsx#AcceptedRequirements"]={docgenInfo:En.__docgenInfo,name:"AcceptedRequirements",path:"src/lib/containers/access_requirement_list/AcceptedRequirements.tsx#AcceptedRequirements"})}catch{}function MR({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:o}){const{accessToken:a}=ie(),[i,s]=E.exports.useState();return E.exports.useEffect(()=>{(async()=>{try{const d=await $a(a,e.id);s(d)}catch(d){console.error("Error on get ACTAccessRequirement",d)}})()},[a,e]),u(En,{accessRequirement:e,accessRequirementStatus:r,user:t,wikiPage:i,onHide:n,entityId:o})}try{ACTAccessRequirement.displayName="ACTAccessRequirement",ACTAccessRequirement.__docgenInfo={description:"",displayName:"ACTAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/ACTAccessRequirement.tsx#ACTAccessRequirement"]={docgenInfo:ACTAccessRequirement.__docgenInfo,name:"ACTAccessRequirement",path:"src/lib/containers/access_requirement_list/ACTAccessRequirement.tsx#ACTAccessRequirement"})}catch{}const Vo=e=>{const{accessToken:t}=ie(),{formSubmitRequestObject:n,onHide:r}=e,[o,a]=E.exports.useState(),[i,s]=E.exports.useState(!1),l=async()=>{if(n)try{await ep(n,t)?r==null||r():(a({key:"danger",message:"Sorry, there is an error in submitting your request. Please close this dialog and try again later."}),s(!0))}catch(d){console.log("CancelRequestDataAccess: Error updating form",d),a({key:"danger",message:`Sorry, there is an error in submitting your request. ${d.reason||""}. Please close this dialog and try again later`}),s(!0)}};return N(H,{children:[u(ae.Header,{closeButton:!0,children:u(ae.Title,{className:"AccessRequirementList__title",children:"Save Changes"})}),N(ae.Body,{children:[u("p",{children:"Would you like to save your recent changes?"}),o&&u(nn,{variant:o.key,children:o.message})]}),N(ae.Footer,{children:[!i&&N(H,{children:[u(we,{variant:"link",onClick:()=>r==null?void 0:r(),children:"Cancel"}),u(we,{variant:"primary",onClick:()=>l(),children:"Save changes"})]}),i&&u(we,{variant:"primary",onClick:()=>r==null?void 0:r(),children:"Close"})]})]})};try{Vo.displayName="CancelRequestDataAccess",Vo.__docgenInfo={description:"",displayName:"CancelRequestDataAccess",props:{formSubmitRequestObject:{defaultValue:null,description:"",name:"formSubmitRequestObject",required:!0,type:{name:"RequestInterface | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/CancelRequestDataAccess.tsx#CancelRequestDataAccess"]={docgenInfo:Vo.__docgenInfo,name:"CancelRequestDataAccess",path:"src/lib/containers/access_requirement_list/managedACTAccess/CancelRequestDataAccess.tsx#CancelRequestDataAccess"})}catch{}const Bo=e=>{const{user:t,wikiPage:n,accessRequirementStatus:r,accessRequirement:o,showButton:a=!0,onHide:i,requestDataStepCallback:s}=e,{accessToken:l}=ie(),[d,c]=E.exports.useState(!0),f=r==null?void 0:r.isApproved,[p,g]=E.exports.useState(f),[h,m]=E.exports.useState(),[v,b]=E.exports.useState(),[C,S]=E.exports.useState(!1);E.exports.useEffect(()=>{g(f),r!=null&&r.currentSubmissionStatus&&(m(r.currentSubmissionStatus.state),x(r.currentSubmissionStatus))},[f]);const y=()=>{s==null||s({managedACTAccessRequirement:o,step:1})},w=async()=>{if(o.concreteType===qe.ManagedACTAccessRequirement)if(l)if(h===Le.SUBMITTED&&!C){const R={key:"danger",message:N(H,{children:[u("strong",{children:"Error canceling your data access request."}),u("br",{}),"Please try again later."]})};try{(await cy(r==null?void 0:r.currentSubmissionStatus.submissionId,l)).state===Le.CANCELLED?(b({key:"success",message:u("strong",{children:"Your data access request has been canceled."})}),S(!0)):b(R)}catch(D){console.log("RequestDataAccess: error canceling data access request:",D),b(R)}}else y();else s==null||s({managedACTAccessRequirement:o,step:4});else if(!p){const R={requirementId:o==null?void 0:o.id,submitterId:t==null?void 0:t.ownerId,accessorId:t==null?void 0:t.ownerId,state:Yl.APPROVED};Jf(l,R).then(D=>{g(!0)}).catch(D=>console.error("Error on post access approval: ",D))}},_=()=>{if(o.concreteType===qe.ManagedACTAccessRequirement||o.concreteType===qe.ACTAccessRequirement)if(h){let R;switch(h){case Le.SUBMITTED:R=C?"Update Request":"Cancel Request";break;case Le.APPROVED:case Le.REJECTED:case Le.CANCELLED:R="Update Request"}return R}else return"Request access";else return"I Accept Terms of Use"},x=R=>{switch(R.state){case Le.SUBMITTED:b({key:"primary",message:u("strong",{children:"You have submitted a data access request."})});break;case Le.APPROVED:b({key:"success",message:u("strong",{children:"Your data access request has been approved."})});break;case Le.REJECTED:b({key:"danger",message:N(H,{children:[u("strong",{children:"Your data access request has been rejected."}),u("br",{}),R.rejectedReason||""]})});break}return u(H,{})},I=o.termsOfUse,O=o.actContactInfo,A=o.concreteType===qe.TermsOfUseAccessRequirement,k=o.concreteType===qe.ACTAccessRequirement,M=A&&I||k&&O;let B=u(H,{});n?B=N("div",{className:"AcceptRequirementsMarkdown",children:[n&&u(Fe,{wikiId:n==null?void 0:n.wikiPageId,ownerId:n==null?void 0:n.ownerObjectId,objectType:n==null?void 0:n.ownerObjectType}),v&&u(nn,{className:"access-requirement-list-alert",variant:v.key,children:v.message})]}):M&&(B=u(Fe,{markdown:A?I:O}));const T=o.concreteType===qe.ManagedACTAccessRequirement;return u(H,{children:N("div",{"data-testid":"RequestDataAccess",className:"requirement-container",children:[u(Mt,{isCompleted:p}),N("div",{className:"terms-of-use-content",children:[p?N("div",{children:[u("p",{children:T?"Your data access request has been approved.":"You have accepted the terms of use."}),N("p",{style:{marginBottom:"0"},children:[T&&u("button",{className:"update-request-button",onClick:()=>{y()},style:{paddingLeft:"0",marginRight:"2rem"},children:_()}),u("a",{onClick:()=>{c(!d)},children:"View Terms"})]}),u("div",{className:`view-terms ${d?"hidden":"show"}`,children:B})]}):B,a&&N("div",{className:`button-container ${p?"hide":"default"}`,children:[u("div",{className:"accept-button-container",children:u("button",{className:"accept-button",onClick:w,children:_()})}),u("div",{className:"not-accept-button-container",children:u("button",{className:"not-accpet-button",onClick:()=>i==null?void 0:i(),children:"I do not accept"})})]})]})]})})};try{Bo.displayName="RequestDataAccess",Bo.__docgenInfo={description:"",displayName:"RequestDataAccess",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPageKey | undefined"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement | ManagedACTAccessRequirement | SelfSignAccessRequirement | TermsOfUseAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!1,type:{name:"ManagedACTAccessRequirementStatus"}},showButton:{defaultValue:null,description:"",name:"showButton",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccess.tsx#RequestDataAccess"]={docgenInfo:Bo.__docgenInfo,name:"RequestDataAccess",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccess.tsx#RequestDataAccess"})}catch{}const VR=e=>{const{entityId:t,user:n,accessRequirement:r,accessRequirementStatus:o,onHide:a,requestDataStepCallback:i}=e,{accessToken:s}=ie(),[l,d]=E.exports.useState();return E.exports.useEffect(()=>{(async()=>{try{const f=await $a(s,r.id);d(f)}catch(f){console.error("Error on get ManagedACTAccessRequirement",f)}})()},[s,r]),u(Bo,{accessRequirement:r,accessRequirementStatus:o,entityId:t,user:n,wikiPage:l,onHide:a,requestDataStepCallback:i})};try{ManagedACTAccessRequirement.displayName="ManagedACTAccessRequirement",ManagedACTAccessRequirement.__docgenInfo={description:"",displayName:"ManagedACTAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"ManagedACTAccessRequirementStatus"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((props: requestDataStepCallbackProps) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/ManagedACTAccessRequirement.tsx#ManagedACTAccessRequirement"]={docgenInfo:ManagedACTAccessRequirement.__docgenInfo,name:"ManagedACTAccessRequirement",path:"src/lib/containers/access_requirement_list/managedACTAccess/ManagedACTAccessRequirement.tsx#ManagedACTAccessRequirement"})}catch{}const Fo=e=>{const{requestDataStepCallback:t,managedACTAccessRequirement:n,onHide:r}=e,{accessToken:o}=ie(),[a,i]=E.exports.useState(""),[s,l]=E.exports.useState(""),[d,c]=E.exports.useState(""),[f,p]=E.exports.useState(),g=E.exports.useRef({});let h=!0;E.exports.useEffect(()=>(h&&(p(void 0),m()),()=>{h=!1}),[o]);const m=async()=>{try{const C=await dy(String(n.id),o);C.id&&(g.current=C,i(C.projectLead),l(C.institution),c(C.intendedDataUseStatement))}catch(C){console.log("RequestDataAccessStep1: Error getting research project data: ",C)}},v=(C="")=>N(H,{children:[u("strong",{children:"Unable to update research project data."}),u("br",{}),C]});return u(H,{children:N(fe,{className:"access-request-form1",onSubmit:C=>{C.preventDefault();const S=Object.assign({},g.current,{accessRequirementId:String(n.id),institution:s,projectLead:a,intendedDataUseStatement:d});try{uy(S,o).then(y=>{t==null||t({managedACTAccessRequirement:n,step:2,researchProjectId:y.id})}).catch(y=>{console.log("RequestDataAccessStep1: Error updating research project data: ",y),p({key:"danger",message:v(y.reason)})})}catch(y){console.log("RequestDataAccessStep1: Error updating research project data: ",y),p({key:"danger",message:v(y.reason)})}},children:[u(ae.Header,{closeButton:!0,children:u(ae.Title,{className:"AccessRequirementList__title",children:"Request Access"})}),N(ae.Body,{children:[u("p",{children:"Please tell us about your project."}),N(fe.Group,{children:[u(fe.Label,{htmlFor:"project-lead",children:"Project Lead"}),u(fe.Control,{id:"project-lead",type:"text",value:a,required:!0,onChange:C=>i(C.target.value)})]}),N(fe.Group,{children:[u(fe.Label,{htmlFor:"institution",children:"Institution"}),u(fe.Control,{id:"institution",type:"text",value:s,required:!0,onChange:C=>l(C.target.value)})]}),n.isIDURequired&&N(fe.Group,{children:[N(fe.Label,{htmlFor:"data-use",children:["Intended Data Use Statement -",n.isIDUPublic&&u("i",{id:"idu-visible",children:"this will be visible to the public"})]}),u(fe.Control,{id:"data-use",as:"textarea",value:d,rows:10,required:!0,onChange:C=>c(C.target.value)})]}),f&&u(nn,{variant:f.key,children:f.message})]}),N(ae.Footer,{children:[u(we,{variant:"link",onClick:()=>r==null?void 0:r(),children:"Cancel"}),u(we,{variant:"primary",type:"submit",children:"Save changes"})]})]})})};try{Fo.displayName="RequestDataAccessStep1",Fo.__docgenInfo={description:"",displayName:"RequestDataAccessStep1",props:{requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((props: requestDataStepCallbackProps) => void)"}},managedACTAccessRequirement:{defaultValue:null,description:"",name:"managedACTAccessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep1.tsx#RequestDataAccessStep1"]={docgenInfo:Fo.__docgenInfo,name:"RequestDataAccessStep1",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep1.tsx#RequestDataAccessStep1"})}catch{}const Yt=e=>{const{id:t,fileHandleAssociation:n,className:r,variant:o,fileName:a}=e,{accessToken:i}=ie(),s=async()=>{if(!n.fileHandleId||!i)return;const l={requestedFiles:[n],includePreSignedURLs:!0,includeFileHandles:!1,includePreviewPreSignedURLs:!1};try{const c=(await An(l,i)).requestedFiles[0].preSignedURL;c?window.open(c):console.log("Fail to get file download link")}catch(d){console.log("Fail to get file download link",d)}};return u(H,{children:u(we,{id:t,variant:o,className:r,onClick:l=>s(),children:a})})};try{Yt.displayName="DirectDownloadButton",Yt.__docgenInfo={description:"",displayName:"DirectDownloadButton",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!0,type:{name:"string | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DirectDownloadButton.tsx#DirectDownloadButton"]={docgenInfo:Yt.__docgenInfo,name:"DirectDownloadButton",path:"src/lib/containers/DirectDownloadButton.tsx#DirectDownloadButton"})}catch{}const $o=e=>{const{requestDataStepCallback:t,managedACTAccessRequirement:n,entityId:r,user:o,researchProjectId:a}=e,{accessToken:i}=ie(),[s,l]=E.exports.useState(),[d,c]=E.exports.useState(),[f,p]=E.exports.useState(),[g,h]=E.exports.useState([]),[m,v]=E.exports.useState(),[b,C]=E.exports.useState(),[S,y]=E.exports.useState(!1),[w,_]=E.exports.useState([]),x={},I={requestedFiles:[],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1};let O=!0;E.exports.useEffect(()=>(O&&(C(void 0),A()),()=>{O=!1}),[i,a]);const A=async()=>{const P=await fy(String(n.id),i);if(P.accessorChanges){const L=new Set;P.accessorChanges=P.accessorChanges.filter(F=>L.has(F.userId)?!1:L.add(F.userId))}P.concreteType==="org.sagebionetworks.repo.model.dataaccess.Renewal"&&y(!0),P.researchProjectId=a,v(P),k(P),M(P)},k=P=>{const L=P.accessorChanges,F=[];!L||!L.length?(F.push(o.ownerId),v(K=>Object.assign({},K,{accessorChanges:[{userId:o.ownerId,type:mt.GAIN_ACCESS}]}))):L.forEach(K=>{F.push(K.userId)});const Y=F.map(K=>py(i,K));Promise.all(Y).then(K=>{const Q=K.map((X,j)=>{var ye;const ce=L&&((ye=L[j])==null?void 0:ye.type)?L[j].type:mt.GAIN_ACCESS;return{profile:X,accessType:ce}});_(Q)})},M=P=>{if(n.isDUCRequired&&n.ducTemplateFileHandleId){const L={associateObjectId:String(n.id),associateObjectType:Re.AccessRequirementAttachment,fileHandleId:n.ducTemplateFileHandleId};I.requestedFiles.push(L),x[n.ducTemplateFileHandleId]||(x[n.ducTemplateFileHandleId]=[]),x[n.ducTemplateFileHandleId].push("DUCTemplate"),l(L)}if(n.isDUCRequired&&P.ducFileHandleId){const L={associateObjectId:P.id,associateObjectType:Re.DataAccessRequestAttachment,fileHandleId:P.ducFileHandleId};I.requestedFiles.push(L),x[P.ducFileHandleId]||(x[P.ducFileHandleId]=[]),x[P.ducFileHandleId].push("DUC"),c(L)}if(n.isIRBApprovalRequired&&P.irbFileHandleId){const L={associateObjectId:P.id,associateObjectType:Re.DataAccessRequestAttachment,fileHandleId:P.irbFileHandleId};I.requestedFiles.push(L),x[P.irbFileHandleId]||(x[P.irbFileHandleId]=[]),x[P.irbFileHandleId].push("IRB"),p(L)}P.attachments&&P.attachments.length&&P.attachments.forEach(L=>{I.requestedFiles.push({associateObjectId:P.id,associateObjectType:Re.DataAccessRequestAttachment,fileHandleId:L}),x[L]||(x[L]=[]),x[L].push("attachments")}),I.requestedFiles.length&&An(I,i).then(L=>{L.requestedFiles.forEach(F=>{const Y=F.fileHandle.fileName,K=x[F.fileHandleId];K.forEach(Q=>{switch(Q){case"DUCTemplate":l(X=>Object.assign({},X,{fileName:Y})),x[F.fileHandleId].splice(K.indexOf("DUCTemplate"),1);break;case"DUC":c(X=>Object.assign({},X,{fileName:Y})),x[F.fileHandleId].splice(K.indexOf("DUC"),1);break;case"IRB":p(X=>Object.assign({},X,{fileName:Y})),x[F.fileHandleId].splice(K.indexOf("IRB"),1);break;case"attachments":h(X=>[...X,{fileName:Y,associateObjectId:P.id,associateObjectType:Re.DataAccessRequestAttachment,fileHandleId:F.fileHandleId}]),x[F.fileHandleId].splice(K.indexOf("attachments"),1);break}})})})},B=async()=>{if(m)try{const P=await ep(m,i);if(P&&P.etag){const L={requestId:P.id,requestEtag:P.etag,subjectId:r,subjectType:Wa.ENTITY};v(K=>Object.assign({},K,{etag:P.etag}));const F=await my(L,i),Y=q(F);F.state===Le.REJECTED?C({key:"danger",message:Y}):t==null||t({step:5})}else C({key:"danger",message:T()})}catch(P){console.log("RequestDataAccessStep2: Error updating form",P),C({key:"danger",message:T(P.reason)})}},T=(P="")=>N(H,{children:[u("strong",{children:"Sorry, there is an error in submitting your request."}),u("br",{}),P]}),q=P=>{const L="The information has been ";switch(P.state){case Le.SUBMITTED:return N("strong",{children:[L," submitted."]});case Le.APPROVED:return N("strong",{children:[L," approved."]});case Le.CANCELLED:return N("strong",{children:[L," canceled."]});case Le.REJECTED:return N(H,{children:[N("strong",{children:[L," rejected."]})," ",P.rejectedReason,". Please close this dialog and try again later."]});default:return u(H,{})}},R=P=>{const L=w.filter(Y=>Y.profile.ownerId!==P);_(L);const F=L.map(Y=>({userId:Y.profile.ownerId,type:Y.accessType}));v(Y=>Object.assign({},Y,{accessorChanges:F}))},D=P=>{const L=g.filter(Y=>Y.fileHandleId!==P);h(L);const F=L.map(Y=>Y.fileHandleId);v(Y=>Object.assign({},Y,{attachments:F}))},$=P=>{if(P.resp&&P.success){const L=P.resp;if(P.context==="attachments"){const F=m!=null&&m.attachments?m==null?void 0:m.attachments:[];F==null||F.push(L.fileHandleId),v(Y=>Object.assign({},Y,{attachments:F})),h(Y=>[...Y,{fileName:L.fileName,fileHandleId:L.fileHandleId}])}else v(F=>Object.assign({},F,{[P.context]:L.fileHandleId})),P.context==="ducFileHandleId"&&c(F=>Object.assign({},F,{fileName:L.fileName,fileHandleId:L.fileHandleId})),P.context==="irbFileHandleId"&&p(F=>Object.assign({},F,{fileName:L.fileName,fileHandleId:L.fileHandleId}))}else!P.success&&P.error&&(console.log("RequestDataAccessStep2: Error uploading the file",P.error),C({key:"danger",message:T(P.error.reason)}))},z=P=>{if(!w.map(F=>F.profile.ownerId).includes(P.ownerId)){_(K=>{var Q,X;return[...K,{profile:{ownerId:P.ownerId,firstName:(Q=P.firstName)!=null?Q:"",lastName:(X=P.lastName)!=null?X:"",userName:P.userName},accessType:mt.GAIN_ACCESS}]});const F={userId:P.ownerId,type:mt.GAIN_ACCESS},Y=(m==null?void 0:m.accessorChanges)||[];Y.push(F),v(K=>Object.assign({},K,{accessorChanges:Y}))}},V=(P,L)=>{const F=P.target.value;switch(L){case"publications":v(Y=>Object.assign({},Y,{publication:F}));break;case"summaryOfUse":v(Y=>Object.assign({},Y,{summaryOfUse:F}));break}},U=(P,L)=>{const F=[...w],Y=F.findIndex(X=>X.profile.ownerId===L);F[Y].accessType=P,_(F);const K=(m==null?void 0:m.accessorChanges)||[],Q=K.findIndex(X=>X.userId===L);K[Q].type=P,v(X=>Object.assign({},X,{accessorChanges:K}))},G=()=>{let P="",L="";return n.isCertifiedUserRequired&&(P="https://help.synapse.org/docs/User-Types.2007072795.html#UserAccountTiers-CertifiedUsers",L="All data requesters must be a certified user."),n.isValidatedProfileRequired&&(P="https://help.synapse.org/docs/User-Types.2007072795.html#UserAccountTiers-ValidatedUsers",L="All data requesters must have a validated user profile."),P&&L?N(H,{children:[L,u("a",{href:P,target:"_blank",rel:"noreferrer",children:u(pe,{icon:"info"})})]}):u(H,{})};return u(H,{children:N(fe,{className:"access-request-form2",onSubmit:P=>P.preventDefault(),children:[u(ae.Header,{closeButton:!0,children:u(ae.Title,{className:"AccessRequirementList__title",children:"Request Access"})}),N(ae.Body,{children:[u("p",{children:"Please provide the information below to submit the request for access."}),N(fe.Group,{children:[u(fe.Label,{htmlFor:"requesters",style:{margin:"0"},children:"Data Requesters"}),u("br",{}),N("span",{className:"requester-label",children:[n.isDUCRequired&&N(H,{children:["This list should match those listed on your DUC.",u("br",{})]}),G()]}),u(Cb,{id:"requesters",typeFilter:hy.USERS_ONLY,onSelectCallback:z,filterUserIds:w.map(P=>P.profile.ownerId)})]}),u(fe.Group,{style:{marginBottom:"4rem"},children:w.map((P,L)=>N("div",{className:"list-items",children:[u(Dl,{userProfile:P.profile,showAccountLevelIcon:!0,disableLink:!0,showFullName:!0}),o.ownerId!==P.profile.ownerId&&P.accessType===mt.GAIN_ACCESS&&u(we,{className:"clear-x",variant:"link",onClick:()=>R(P.profile.ownerId),children:u(pe,{icon:"clear"})}),S&&P.accessType!==mt.GAIN_ACCESS&&u(H,{children:u(_b,{id:`accessor-renewal-${P.profile.ownerId}`,value:P.accessType,options:[{label:"Renew",value:mt.RENEW_ACCESS},{label:"Revoke",value:mt.REVOKE_ACCESS}],onChange:F=>U(F,P.profile.ownerId)})})]},`accessor-${L}`))}),(n==null?void 0:n.isDUCRequired)&&N(H,{children:[N(fe.Group,{children:[u(fe.Label,{htmlFor:"duc-temp",className:"SRC-noMargin",children:"DUC template"}),u("br",{}),s&&u("div",{children:u(Yt,{fileHandleAssociation:{associateObjectId:s==null?void 0:s.associateObjectId,associateObjectType:s.associateObjectType,fileHandleId:s.fileHandleId},fileName:s.fileName,id:"duc-temp",variant:"link",className:"SRC-noPadding"})})]}),N(fe.Group,{children:[u(fe.Label,{htmlFor:"duc",className:"SRC-noMargin",children:"Upload DUC"}),u("br",{}),d&&u("div",{children:u(Yt,{fileHandleAssociation:{associateObjectId:d.associateObjectId,associateObjectType:d.associateObjectType,fileHandleId:d.fileHandleId},fileName:d==null?void 0:d.fileName,id:"duc-download",variant:"link",className:"SRC-noPadding"})}),u(ai,{id:"duc-browse",variant:"light-primary-base",uploadCallback:$,context:"ducFileHandleId"})]})]}),(n==null?void 0:n.isIRBApprovalRequired)&&N(fe.Group,{children:[u(fe.Label,{htmlFor:"irb",className:"SRC-noMargin",children:"Upload IRB approval"}),u("br",{}),f&&u("div",{children:u(Yt,{fileHandleAssociation:{associateObjectId:f.associateObjectId,associateObjectType:f.associateObjectType,fileHandleId:f.fileHandleId},fileName:f==null?void 0:f.fileName,id:"irb-download",variant:"link",className:"SRC-noPadding"})}),u(ai,{id:"irb-browse",variant:"light-primary-base",uploadCallback:$,context:"irbFileHandleId"})]}),(n==null?void 0:n.areOtherAttachmentsRequired)&&N(fe.Group,{children:[u(fe.Label,{className:"SRC-noMargin",children:"Upload other required documents"}),u("br",{}),g.map((P,L)=>N("div",{className:"list-items",children:[u(Yt,{fileHandleAssociation:{associateObjectId:P.associateObjectId,associateObjectType:P.associateObjectType,fileHandleId:P.fileHandleId},fileName:P==null?void 0:P.fileName,variant:"link",className:"SRC-noPadding attachment-download"}),u(we,{className:"clear-x",variant:"link",onClick:()=>D(P.fileHandleId),children:u(pe,{icon:"clear"})})]},`file-attachment-${L}`)),u(ai,{id:"attachment-browse",variant:"light-primary-base",uploadCallback:$,context:"attachments"})]}),S&&N(H,{children:[N(fe.Group,{children:[u(fe.Label,{htmlFor:"publications",className:"SRC-noMargin",children:"Publication(s)"}),u(fe.Control,{id:"publications",as:"textarea",rows:3,onChange:P=>V(P,"publications")})]}),N(fe.Group,{children:[u(fe.Label,{htmlFor:"summaryOfUse",className:"SRC-noMargin",children:"Summary of use"}),u(fe.Control,{id:"summaryOfUse",as:"textarea",rows:3,onChange:P=>V(P,"summaryOfUse")})]})]}),b&&u(nn,{variant:b.key,children:b.message})]}),u(ae.Footer,{children:N(H,{children:[u(we,{variant:"link",onClick:()=>t==null?void 0:t({step:3,formSubmitRequestObject:m}),children:"Cancel"}),u(we,{variant:"primary",onClick:()=>B(),children:"Submit"})]})})]})})};try{$o.displayName="RequestDataAccessStep2",$o.__docgenInfo={description:"",displayName:"RequestDataAccessStep2",props:{managedACTAccessRequirement:{defaultValue:null,description:"",name:"managedACTAccessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!0,type:{name:"(props: requestDataStepCallbackProps) => void"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile"}},researchProjectId:{defaultValue:null,description:"",name:"researchProjectId",required:!0,type:{name:"string"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep2.tsx#RequestDataAccessStep2"]={docgenInfo:$o.__docgenInfo,name:"RequestDataAccessStep2",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep2.tsx#RequestDataAccessStep2"})}catch{}const Ho=e=>{const{onHide:t}=e;return N(H,{children:[u(ae.Header,{closeButton:!0,children:u(ae.Title,{className:"AccessRequirementList__title",children:"Your Data Access Request Has Been Submitted!"})}),u(ae.Body,{children:u("p",{style:{margin:"2rem 0"},children:"Your data access request been submitted and is currently being reviewed. Please allow for up to 2 weeks for your request to be reviewed and approved."})}),u(ae.Footer,{children:u(we,{variant:"primary",onClick:()=>t==null?void 0:t(),children:"Finish"})})]})};try{Ho.displayName="RequestDataAccessSuccess",Ho.__docgenInfo={description:"",displayName:"RequestDataAccessSuccess",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessSuccess.tsx#RequestDataAccessSuccess"]={docgenInfo:Ho.__docgenInfo,name:"RequestDataAccessSuccess",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessSuccess.tsx#RequestDataAccessSuccess"})}catch{}function BR({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:o}){const{accessToken:a}=ie(),[i,s]=E.exports.useState(void 0),[l,d]=E.exports.useState(void 0),[c,f]=E.exports.useState(!1);return E.exports.useEffect(()=>{(async()=>{try{f(!0);const g=await $a(a,e.id);s(g);const h=ky|Ly;if(t!=null&&t.ownerId){const m=await gy(t.ownerId,h,a);d(m)}}catch(g){console.error("Error on get Self Sign Access Requirement: ",g)}finally{f(!1)}})()},[e,a,t]),N(H,{children:[e.isCertifiedUserRequired&&N("div",{className:"requirement-container",children:[u(Mt,{isCompleted:l==null?void 0:l.isCertified}),N("div",{children:[N("p",{className:"self-sign-access-title bold-text",children:["You must first become a",u("a",{className:"self-sign-access-certified bold-text",href:`${$e.PORTAL}#!Quiz:`,children:"\xA0certified user"})]}),c&&u("span",{className:"spinner"}),u("p",{className:`self-sign-access-certified-success-text ${l!=null&&l.isCertified?"show":"hidden"}`,children:"You are a certified user"})]})]}),e.isValidatedProfileRequired&&N("div",{className:"requirement-container",children:[u(Mt,{isCompleted:l==null?void 0:l.isVerified}),N("div",{children:[N("p",{className:"self-sign-access-title bold-text",children:["You must first apply to have your",u("a",{className:"self-sign-access-validated bold-text",href:`${$e.PORTAL}#!Profile:v/settings`,children:"\xA0user profile validated"})]}),c&&u("span",{className:"spinner"}),u("p",{className:`self-sign-access-verified-success-text ${l!=null&&l.isVerified?"show":"hidden"}`,children:"You have applied to have user profile valiadation successfully"})]})]}),u(En,{user:t,wikiPage:i,accessRequirement:e,accessRequirementStatus:r,onHide:n,entityId:o})]})}try{SelfSignAccessRequirement.displayName="SelfSignAccessRequirement",SelfSignAccessRequirement.__docgenInfo={description:"",displayName:"SelfSignAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"SelfSignAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/SelfSignAccessRequirement.tsx#SelfSignAccessRequirement"]={docgenInfo:SelfSignAccessRequirement.__docgenInfo,name:"SelfSignAccessRequirement",path:"src/lib/containers/access_requirement_list/SelfSignAccessRequirement.tsx#SelfSignAccessRequirement"})}catch{}function FR({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:o}){const{accessToken:a}=ie(),[i,s]=E.exports.useState(void 0),[l,d]=E.exports.useState(!1);return E.exports.useEffect(()=>{(async()=>{d(!0);try{const f=await $a(a,e.id);s(f)}catch(f){console.error("Error on prepare terms of use ",f)}finally{d(!1)}})()},[a,e]),N(H,{children:[l&&u("span",{className:"spinner"}),u(En,{user:t,wikiPage:i,accessRequirement:e,accessRequirementStatus:r,onHide:n,entityId:o})]})}try{TermsOfUseAccessRequirement.displayName="TermsOfUseAccessRequirement",TermsOfUseAccessRequirement.__docgenInfo={description:"",displayName:"TermsOfUseAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"TermsOfUseAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/TermsOfUseAccessRequirement.tsx#TermsOfUseAccessRequirement"]={docgenInfo:TermsOfUseAccessRequirement.__docgenInfo,name:"TermsOfUseAccessRequirement",path:"src/lib/containers/access_requirement_list/TermsOfUseAccessRequirement.tsx#TermsOfUseAccessRequirement"})}catch{}var qe=(e=>(e.SelfSignAccessRequirement="org.sagebionetworks.repo.model.SelfSignAccessRequirement",e.TermsOfUseAccessRequirement="org.sagebionetworks.repo.model.TermsOfUseAccessRequirement",e.ManagedACTAccessRequirement="org.sagebionetworks.repo.model.ManagedACTAccessRequirement",e.ACTAccessRequirement="org.sagebionetworks.repo.model.ACTAccessRequirement",e))(qe||{});const zo=e=>e.filter($R).length>0,$R=e=>{switch(e.concreteType){case"org.sagebionetworks.repo.model.ACTAccessRequirement":case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":return!1;default:return!0}},Af=async(e,t)=>{const n=t.map(i=>by(e,i.id)),r=await Promise.all(n),o=t.map(i=>({accessRequirement:i,accessRequirementStatus:r.find(s=>Number(s.accessRequirementId)===i.id)}));return cb(o,i=>-1*Number(i.accessRequirementStatus.isApproved))};function Uo({entityId:e,onHide:t,accessRequirementFromProps:n,renderAsModal:r,numberOfFilesAffected:o}){var A;const{accessToken:a}=ie(),[i,s]=E.exports.useState(void 0),[l,d]=E.exports.useState(),[c,f]=E.exports.useState(),[p,g]=E.exports.useState(""),[h,m]=E.exports.useState(),v={ids:[e],type:"ENTITY_HEADER"},C=DR(a)||!i,S=sp(v),{data:y}=yy();E.exports.useEffect(()=>{let k=!1;return(async()=>{try{if(!C)return;if(n){const B=await Af(a,n);k||s(B)}else{const B=await tp(a,e),T=await Af(a,B);k||s(T)}}catch(B){console.error("Error on get access requirements: ",B)}})(),()=>{k=!0}},[a,e,n,C]);const w=Boolean(a),_=(k,M)=>{switch(k.concreteType){case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":return u(BR,{accessRequirement:k,accessRequirementStatus:M,user:y,onHide:t,entityId:e});case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":return u(FR,{accessRequirement:k,accessRequirementStatus:M,user:y,onHide:t,entityId:e});case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":return u(VR,{accessRequirement:k,accessRequirementStatus:M,user:y,onHide:t,entityId:e,requestDataStepCallback:x});case"org.sagebionetworks.repo.model.ACTAccessRequirement":return u(MR,{accessRequirement:k,accessRequirementStatus:M,user:y,onHide:t,entityId:e});default:return}},x=k=>{const{managedACTAccessRequirement:M,step:B,researchProjectId:T,formSubmitRequestObject:q}=k;M&&f(M),T&&g(T),q&&m(q),d(B)},I=N(H,{children:[u(ae.Header,{closeButton:!0,children:u(ae.Title,{className:"AccessRequirementList__title",children:"Data Access Request"})}),u(ae.Body,{children:N("div",{children:[u("h4",{className:"AccessRequirementList__instruction AccessRequirementList__access",children:"Access For:"}),u("span",{className:"AccessRequirementList__file-icon-container",children:u(pe,{icon:"file",sx:{width:"30px"}})}),"\xA0",o&&N("span",{children:[o," File(s)"]}),!o&&u("a",{className:"AccessRequirementList__register-text-link",href:`${$e.PORTAL}#!Synapse:${e}`,children:(A=S[0])==null?void 0:A.name}),u("h4",{className:"AccessRequirementList__instruction",style:{marginTop:"3rem"},children:"What do I need to do?"}),N("div",{className:"requirement-container",children:[u(Mt,{isCompleted:w}),N("div",{children:[!w&&N(H,{children:[N("p",{className:"AccessRequirementList__signin",children:[u("a",{className:`${xl} SRC-boldText `,children:"Sign in\xA0"}),"with a Sage Platform (Synapse) user account."]}),N("p",{children:["If you do not have a Sage Account, you can",u("a",{className:"register-text-link bold-text",href:`${$e.PORTAL}#!RegisterAccount:0`,children:"\xA0Register for free."})]})]}),w&&N("p",{children:["You have signed in with the Sage Platform (Synapse) user account ",N("b",{children:[y==null?void 0:y.userName,"@synapse.org"]})]})]})]}),i==null?void 0:i.map(({accessRequirement:k,accessRequirementStatus:M})=>u(ge.Fragment,{children:_(k,M)},k.id))]})})]});let O=I;if(r){switch(l){case 1:O=u(Fo,{managedACTAccessRequirement:c,requestDataStepCallback:x,onHide:()=>t==null?void 0:t()});break;case 2:O=u($o,{user:y,researchProjectId:p,managedACTAccessRequirement:c,entityId:e,requestDataStepCallback:x,onHide:()=>t==null?void 0:t()});break;case 3:O=u(Vo,{formSubmitRequestObject:h,onHide:()=>t==null?void 0:t()});break;case 4:O=N(H,{children:[u(ae.Header,{closeButton:!1,children:u(ae.Title,{className:"AccessRequirementList__title",children:"Please Log In"})}),u(ae.Body,{className:"AccessRequirementList login-modal ",children:u(vy,{sessionCallback:()=>{window.location.reload()}})})]});break;case 5:O=u(Ho,{onHide:()=>t==null?void 0:t()});break;default:O=I}return u(ae,{className:l?"bootstrap-4-backport AccessRequirementList modal-auto-height":"bootstrap-4-backport AccessRequirementList",onHide:()=>t==null?void 0:t(),show:!0,animation:!1,centered:!0,scrollable:!0,size:"lg",children:O})}return u("div",{className:"AccessRequirementList",children:O})}try{Uo.displayName="AccessRequirementList",Uo.__docgenInfo={description:"",displayName:"AccessRequirementList",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirementFromProps:{defaultValue:null,description:"",name:"accessRequirementFromProps",required:!1,type:{name:"AccessRequirement[]"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},renderAsModal:{defaultValue:null,description:"",name:"renderAsModal",required:!1,type:{name:"boolean"}},numberOfFilesAffected:{defaultValue:null,description:"",name:"numberOfFilesAffected",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AccessRequirementList.tsx#AccessRequirementList"]={docgenInfo:Uo.__docgenInfo,name:"AccessRequirementList",path:"src/lib/containers/access_requirement_list/AccessRequirementList.tsx#AccessRequirementList"})}catch{}try{zo.displayName="checkHasUnsportedRequirement",zo.__docgenInfo={description:"",displayName:"checkHasUnsportedRequirement",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AccessRequirementList.tsx#checkHasUnsportedRequirement"]={docgenInfo:zo.__docgenInfo,name:"checkHasUnsportedRequirement",path:"src/lib/containers/access_requirement_list/AccessRequirementList.tsx#checkHasUnsportedRequirement"})}catch{}const HR={AccessBlockedToAnonymous:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You must sign in to access this file."},AccessBlockedByRestriction:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You must request access to this restricted file."},AccessBlockedByACL:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You do not have download access for this item."},Accessible:{icon:"accessOpen",color:e=>e.palette.success.main,tooltipText:""},NoFileHandle:{icon:"accessOpen",color:e=>e.palette.success.main,tooltipText:""}};function kf(e){const{downloadType:t}=e,n=Lp();if(t){const r=HR[t];return u(pe,{icon:r.icon,label:r.tooltipText,sx:{color:r.color(n)}})}return u(H,{})}function Yo(e,t){const[n,r]=ge.useState(),{accessToken:o}=ie(),a=parseInt(t!=null?t:""),{data:i,error:s}=Dp(e,Number.isNaN(a)?void 0:a,{includeEntity:!0,includePermissions:!0}),l=ge.useMemo(()=>({restrictableObjectType:Wa.ENTITY,objectId:e}),[e]),{data:d}=kp(l),c=i==null?void 0:i.entity,f=i==null?void 0:i.permissions;return ge.useEffect(()=>{d&&d.hasUnmetAccessRequirement?r("AccessBlockedByRestriction"):c&&(f==null?void 0:f.canDownload)?wl(c)&&c.dataFileHandleId?r("Accessible"):r("NoFileHandle"):f&&!f.canDownload&&r(o?"AccessBlockedByACL":"AccessBlockedToAnonymous")},[o,c,s,f,d]),n}function jo(e){const[t,n]=ge.useState(!1),[r,o]=ge.useState([]),{entityId:a,entityVersionNumber:i}=e,s=Yo(a,i),{accessToken:l}=ie(),d=ge.useMemo(()=>({restrictableObjectType:Wa.ENTITY,objectId:a}),[a]),{data:c}=kp(d),f=()=>{tp(l,a).then(h=>{zo(h)?window.open(`${Vy(By.PORTAL_ENDPOINT)}#!AccessRequirements:ID=${a}&TYPE=ENTITY`,"_blank"):(o(h),n(!0))})},p=E.exports.useMemo(()=>{if(!c)return u(H,{});const h=c==null?void 0:c.hasUnmetAccessRequirement,m=c==null?void 0:c.restrictionLevel;let v="";if(h)v="Request Access";else{if(Pp.OPEN===m)return u(H,{});v="View Terms"}return N(H,{children:[u("a",{style:{fontSize:"14px",cursor:"pointer",marginLeft:"5px",verticalAlign:"middle"},className:e.className,onClick:f,children:v}),t&&u(Uo,{entityId:a,accessRequirementFromProps:r,renderAsModal:!0,onHide:()=>{n(!1)}})]})},[a,c,r,t]);return s===void 0?u(H,{}):N("span",{style:{whiteSpace:"nowrap"},children:[s==="AccessBlockedToAnonymous"?u("button",{type:"button",className:xl,onClick:h=>{if(h.isTrusted){const m=new MouseEvent("click",{bubbles:!0});h.currentTarget.dispatchEvent(m)}},children:u(kf,{downloadType:s})}):u(kf,{downloadType:s}),p]})}try{Yo.displayName="useGetFileHandleDownloadType",Yo.__docgenInfo={description:`Determines whether an Entity is accessible for download, or if it is blocked by the ACL or unmet Access Requirements.

To make download available, and determine if the file is downloadable via the web, see {@link DirectDownload.tsx }`,displayName:"useGetFileHandleDownloadType",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HasAccessV2.tsx#useGetFileHandleDownloadType"]={docgenInfo:Yo.__docgenInfo,name:"useGetFileHandleDownloadType",path:"src/lib/containers/HasAccessV2.tsx#useGetFileHandleDownloadType"})}catch{}try{jo.displayName="HasAccessV2",jo.__docgenInfo={description:`HasAccess shows if the user has access to the file or not.

The component's behavior changes whether it's passed in a FileHandle or not.
If passed a file handle then it will give more detailed information about the download.`,displayName:"HasAccessV2",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HasAccessV2.tsx#HasAccessV2"]={docgenInfo:jo.__docgenInfo,name:"HasAccessV2",path:"src/lib/containers/HasAccessV2.tsx#HasAccessV2"})}catch{}const Wo=e=>{const{accessToken:t}=ie(),{entityIdList:n}=e,[r,o]=E.exports.useState([u(H,{})]),{ref:a,inView:i}=Pn();let s=!0;E.exports.useEffect(()=>(i&&l(),()=>{s=!1}),[n,i]);const l=()=>{!n.length||Sy(n,t).then(d=>{if(s){const c=d.results.map(f=>u("p",{children:u(Xs,{entity:f,displayTextField:"name"})},f.id));o(c)}}).catch(d=>{console.log("EntityIdList: Error getting entity headers",d)})};return u("span",{ref:a,children:r})};try{Wo.displayName="EntityIdList",Wo.__docgenInfo={description:"",displayName:"EntityIdList",props:{entityIdList:{defaultValue:null,description:"",name:"entityIdList",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/EntityIdList.tsx#EntityIdList"]={docgenInfo:Wo.__docgenInfo,name:"EntityIdList",path:"src/lib/containers/EntityIdList.tsx#EntityIdList"})}catch{}const Go=e=>{const{accessToken:t}=ie(),{evaluationId:n}=e,[r,o]=E.exports.useState(),{ref:a,inView:i}=Pn();let s=!0;E.exports.useEffect(()=>(s&&i&&l(),()=>{s=!1}),[n,i]);const l=()=>{!n||wy(n,t).then(d=>{o(d.name)}).catch(d=>{console.log("EvaluationIdListRenderer: Error getting evaluation queue names",d)})};return u("span",{ref:a,children:r})};try{Go.displayName="EvaluationIdRenderer",Go.__docgenInfo={description:"",displayName:"EvaluationIdRenderer",props:{evaluationId:{defaultValue:null,description:"",name:"evaluationId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/EvaluationIdRenderer.tsx#EvaluationIdRenderer"]={docgenInfo:Go.__docgenInfo,name:"EvaluationIdRenderer",path:"src/lib/containers/EvaluationIdRenderer.tsx#EvaluationIdRenderer"})}catch{}const Ko=e=>{const{accessToken:t}=ie(),{userIds:n}=e,[r,o]=E.exports.useState(),{ref:a,inView:i}=Pn();let s=!0;E.exports.useEffect(()=>(s&&i&&l(),()=>{s=!1}),[n,i]);const l=()=>{!n.length||Cy(n,t).then(d=>{const c=d.list.map(f=>u(Dl,{userProfile:f,className:"SRC-marginFifteen"},f.ownerId));o(c)}).catch(d=>{console.log("UserIdList: Error getting user profiles",d)})};return u("span",{ref:a,children:r})};try{Ko.displayName="UserIdList",Ko.__docgenInfo={description:"",displayName:"UserIdList",props:{userIds:{defaultValue:null,description:"",name:"userIds",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/UserIdList.tsx#UserIdList"]={docgenInfo:Ko.__docgenInfo,name:"UserIdList",path:"src/lib/containers/UserIdList.tsx#UserIdList"})}catch{}const Xo=({columnType:e,columnValue:t,isBold:n,mapEntityIdToHeader:r,mapUserIdToHeader:o,columnLinkConfig:a,columnName:i,selectColumns:s,columnModels:l,rowData:d,rowId:c,rowVersionNumber:f})=>{const{entity:p}=Tt();if(!t)return N("p",{className:"SRC-center-text SRC-inactive",children:[" ",pb]});if(a)return u(dr,{value:t,columnName:i,selectColumns:s,columnModels:l,isHeader:!1,labelLink:a,rowData:d,rowId:c});if(p&&(mn(p)||On(p)||np(p))&&(i==="id"||i==="name")&&c&&f){const g=`syn${c.toString()}`;if(Object.prototype.hasOwnProperty.call(r,g))return u("p",{children:u(Xs,{entity:r[g],versionNumber:f,className:`${n}`,showIcon:!1,displayTextField:i})})}switch(e){case re.ENTITYID:if(Object.prototype.hasOwnProperty.call(r,t))return u("p",{children:u(Xs,{entity:r[t],className:`${n}`,displayTextField:"name"})});break;case re.DATE_LIST:{const g=JSON.parse(t);return N("p",{children:[g.map((h,m)=>N("span",{className:n,children:[new Date(h).toLocaleString(),m!==g.length-1?", ":""]},m))," "]})}case re.BOOLEAN_LIST:{const g=JSON.parse(t);return u("p",{children:g.map((h,m)=>N("span",{className:n,children:[h?"true":"false",m!==g.length-1?", ":""]},m))})}case re.FILEHANDLEID:return u(H,{children:p&&u(sr,{associatedObjectId:p.id,associatedObjectType:Re.TableEntity,fileHandleId:t,displayFileName:!0})});case re.ENTITYID_LIST:{const g=JSON.parse(t);return u(Wo,{entityIdList:g})}case re.USERID_LIST:{const g=JSON.parse(t);return u(Ko,{userIds:g})}case re.STRING_LIST:case re.INTEGER_LIST:{const g=JSON.parse(t);return u("p",{children:g.map((h,m)=>N("span",{className:n,children:[h,m!==g.length-1?", ":""]},h))})}case re.EVALUATIONID:return u(Go,{evaluationId:t});case re.DATE:return u("p",{className:n,children:new Date(Number(t)).toLocaleString()});case re.USERID:if(Object.prototype.hasOwnProperty.call(o,t)){const{ownerId:g,userName:h}=o[t];if(o[t].isIndividual===!1){const m=h===Rc?"public":"people";return h===Rc?N("span",{children:[u(pe,{icon:m})," All registered Synapse users"]}):N("a",{target:"_blank",rel:"noopener noreferrer",href:`${$e.PORTAL}#!Team:${g}`,children:[u(pe,{icon:m})," ",h]})}else return u(Jt,{userProfile:o[t],preSignedURL:o[t].clientPreSignedURL,size:"SMALL USER CARD"})}break;case re.LINK:return u("a",{target:"_blank",rel:"noopener noreferrer",href:t,children:t});case re.STRING:case re.DOUBLE:case re.INTEGER:case re.BOOLEAN:case re.LARGETEXT:return u("p",{className:n,children:t});default:return console.warn(`ColumnType ${e} has unspecified handler. Rendering the column value.`),u("p",{className:n,children:t})}return u("p",{className:n,children:t})};try{Xo.displayName="SynapseTableCell",Xo.__docgenInfo={description:"",displayName:"SynapseTableCell",props:{columnType:{defaultValue:null,description:"",name:"columnType",required:!0,type:{name:"enum",value:[{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'}]}},columnValue:{defaultValue:null,description:"",name:"columnValue",required:!0,type:{name:"string"}},isBold:{defaultValue:null,description:"",name:"isBold",required:!0,type:{name:"string"}},columnLinkConfig:{defaultValue:null,description:"",name:"columnLinkConfig",required:!1,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink"}},mapEntityIdToHeader:{defaultValue:null,description:"",name:"mapEntityIdToHeader",required:!0,type:{name:"Record<string, EntityHeader>"}},mapUserIdToHeader:{defaultValue:null,description:"",name:"mapUserIdToHeader",required:!0,type:{name:"Partial<UserGroupHeader & UserProfile>"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}},rowVersionNumber:{defaultValue:null,description:"",name:"rowVersionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_table_functions/SynapseTableCell.tsx#SynapseTableCell"]={docgenInfo:Xo.__docgenInfo,name:"SynapseTableCell",path:"src/lib/containers/synapse_table_functions/SynapseTableCell.tsx#SynapseTableCell"})}catch{}const Lf=(e,...t)=>{var r;const n=[];return(r=e==null?void 0:e.selectColumns)==null||r.forEach((o,a)=>{t.includes(o.columnType)&&n.push(a)}),n},qf=(e,t,n)=>{var o;const r=new Set;return(o=e.queryResult)==null||o.queryResults.rows.forEach(a=>{a.values.forEach((i,s)=>{n.includes(s)&&!Object.prototype.hasOwnProperty.call(t,i)&&i&&r.add(i)})}),r},zR=()=>{const{data:e,goToPage:t,pageSize:n,setPageSize:r,currentPage:o}=Uy(),a=e==null?void 0:e.queryCount,i=(l,d)=>{t(d)},s=l=>{const d=l.target.value;r(d)};return o==1&&a&&a<10?u(H,{}):N("div",{children:[u(sS,{page:o,count:Math.ceil(a/n),color:"secondary",onChange:i,style:{display:"inline-block",float:"left"}}),u(_t,{variant:"body1",style:{display:"inline-block"},children:`${a==null?void 0:a.toLocaleString()} total rows /`}),N("select",{name:"page size",onChange:s,style:{padding:"4px",marginLeft:"4px"},value:n,children:[u("option",{value:10,children:"10 per page"}),u("option",{value:25,children:"25 per page"}),u("option",{value:100,children:"100 per page"}),u("option",{value:500,children:"500 per page"})]})]})},Qo=e=>{const{onCopy:t}=e;return u(Ke,{title:"Copy IDs to the clipboard",enterNextDelay:_a,placement:"right",children:u("span",{children:u("button",{"data-testid":"copySynIdsButton",onClick:t,children:u("span",{style:{height:15,marginTop:-1},children:u(pe,{icon:"contentCopy"})})})})})};try{Qo.displayName="InteractiveCopyIdsIcon",Qo.__docgenInfo={description:"",displayName:"InteractiveCopyIdsIcon",props:{onCopy:{defaultValue:null,description:"",name:"onCopy",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/InteractiveCopyIdsIcon.tsx#InteractiveCopyIdsIcon"]={docgenInfo:Qo.__docgenInfo,name:"InteractiveCopyIdsIcon",path:"src/lib/containers/InteractiveCopyIdsIcon.tsx#InteractiveCopyIdsIcon"})}catch{}const UR=()=>{const e=ie(),t=Tt(),[n,r]=E.exports.useState(!1),[o,a]=E.exports.useState(),[i,s]=E.exports.useState();E.exports.useEffect(()=>(i||s(new AbortController),()=>{i&&i.abort()}),[i]);const l=()=>{r(!0);const{getLastQueryRequest:d}=t,c=d(),{sql:f}=c.query,{entityId:p,versionNumber:g}=Oy(f),h=g?`.${g}`:"";c.partMask=Er;const m=`${p}${h}`,v=f.indexOf(m);c.query.sql=`select id from ${m}${f.substring(v+m.length)}`,Qf(c,e.accessToken,i==null?void 0:i.signal).then(b=>{a(b)}).catch(b=>{console.error(b),en("Unable to query for all Synapse IDs to copy","danger")}).finally(()=>{r(!1)})};return E.exports.useEffect(()=>{if(o){const{rows:d}=o.queryResult.queryResults,c=d.map(f=>`${f.values[0]}`).join(`
`);navigator.clipboard.writeText(c).then(()=>{en("Successfully copied to clipboard"),a(void 0)})}},[o]),n?u(za,{size:25}):u(Qo,{onCopy:()=>{l()}})};var Xt=[],YR=function(){return Xt.some(function(e){return e.activeTargets.length>0})},jR=function(){return Xt.some(function(e){return e.skippedTargets.length>0})},Pf="ResizeObserver loop completed with undelivered notifications.",WR=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:Pf}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=Pf),window.dispatchEvent(e)},wr;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(wr||(wr={}));var Qt=function(e){return Object.freeze(e)},GR=function(){function e(t,n){this.inlineSize=t,this.blockSize=n,Qt(this)}return e}(),og=function(){function e(t,n,r,o){return this.x=t,this.y=n,this.width=r,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Qt(this)}return e.prototype.toJSON=function(){var t=this,n=t.x,r=t.y,o=t.top,a=t.right,i=t.bottom,s=t.left,l=t.width,d=t.height;return{x:n,y:r,top:o,right:a,bottom:i,left:s,width:l,height:d}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),fc=function(e){return e instanceof SVGElement&&"getBBox"in e},ag=function(e){if(fc(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var o=e,a=o.offsetWidth,i=o.offsetHeight;return!(a||i||e.getClientRects().length)},Df=function(e){var t,n;if(e instanceof Element)return!0;var r=(n=(t=e)===null||t===void 0?void 0:t.ownerDocument)===null||n===void 0?void 0:n.defaultView;return!!(r&&e instanceof r.Element)},KR=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},lr=typeof window<"u"?window:{},Qr=new WeakMap,Mf=/auto|scroll/,XR=/^tb|vertical/,QR=/msie|trident/i.test(lr.navigator&&lr.navigator.userAgent),at=function(e){return parseFloat(e||"0")},xn=function(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=!1),new GR((n?t:e)||0,(n?e:t)||0)},Vf=Qt({devicePixelContentBoxSize:xn(),borderBoxSize:xn(),contentBoxSize:xn(),contentRect:new og(0,0,0,0)}),ig=function(e,t){if(t===void 0&&(t=!1),Qr.has(e)&&!t)return Qr.get(e);if(ag(e))return Qr.set(e,Vf),Vf;var n=getComputedStyle(e),r=fc(e)&&e.ownerSVGElement&&e.getBBox(),o=!QR&&n.boxSizing==="border-box",a=XR.test(n.writingMode||""),i=!r&&Mf.test(n.overflowY||""),s=!r&&Mf.test(n.overflowX||""),l=r?0:at(n.paddingTop),d=r?0:at(n.paddingRight),c=r?0:at(n.paddingBottom),f=r?0:at(n.paddingLeft),p=r?0:at(n.borderTopWidth),g=r?0:at(n.borderRightWidth),h=r?0:at(n.borderBottomWidth),m=r?0:at(n.borderLeftWidth),v=f+d,b=l+c,C=m+g,S=p+h,y=s?e.offsetHeight-S-e.clientHeight:0,w=i?e.offsetWidth-C-e.clientWidth:0,_=o?v+C:0,x=o?b+S:0,I=r?r.width:at(n.width)-_-w,O=r?r.height:at(n.height)-x-y,A=I+v+w+C,k=O+b+y+S,M=Qt({devicePixelContentBoxSize:xn(Math.round(I*devicePixelRatio),Math.round(O*devicePixelRatio),a),borderBoxSize:xn(A,k,a),contentBoxSize:xn(I,O,a),contentRect:new og(f,l,I,O)});return Qr.set(e,M),M},sg=function(e,t,n){var r=ig(e,n),o=r.borderBoxSize,a=r.contentBoxSize,i=r.devicePixelContentBoxSize;switch(t){case wr.DEVICE_PIXEL_CONTENT_BOX:return i;case wr.BORDER_BOX:return o;default:return a}},ZR=function(){function e(t){var n=ig(t);this.target=t,this.contentRect=n.contentRect,this.borderBoxSize=Qt([n.borderBoxSize]),this.contentBoxSize=Qt([n.contentBoxSize]),this.devicePixelContentBoxSize=Qt([n.devicePixelContentBoxSize])}return e}(),lg=function(e){if(ag(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},JR=function(){var e=1/0,t=[];Xt.forEach(function(i){if(i.activeTargets.length!==0){var s=[];i.activeTargets.forEach(function(d){var c=new ZR(d.target),f=lg(d.target);s.push(c),d.lastReportedSize=sg(d.target,d.observedBox),f<e&&(e=f)}),t.push(function(){i.callback.call(i.observer,s,i.observer)}),i.activeTargets.splice(0,i.activeTargets.length)}});for(var n=0,r=t;n<r.length;n++){var o=r[n];o()}return e},Bf=function(e){Xt.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(o){o.isActive()&&(lg(o.target)>e?n.activeTargets.push(o):n.skippedTargets.push(o))})})},eA=function(){var e=0;for(Bf(e);YR();)e=JR(),Bf(e);return jR()&&WR(),e>0},zs,cg=[],tA=function(){return cg.splice(0).forEach(function(e){return e()})},nA=function(e){if(!zs){var t=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return tA()}).observe(n,r),zs=function(){n.textContent=""+(t?t--:t++)}}cg.push(e),zs()},rA=function(e){nA(function(){requestAnimationFrame(e)})},Zo=0,oA=function(){return!!Zo},aA=250,iA={attributes:!0,characterData:!0,childList:!0,subtree:!0},Ff=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],$f=function(e){return e===void 0&&(e=0),Date.now()+e},Us=!1,sA=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var n=this;if(t===void 0&&(t=aA),!Us){Us=!0;var r=$f(t);rA(function(){var o=!1;try{o=eA()}finally{if(Us=!1,t=r-$f(),!oA())return;o?n.run(1e3):t>0?n.run(t):n.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,n=function(){return t.observer&&t.observer.observe(document.body,iA)};document.body?n():lr.addEventListener("DOMContentLoaded",n)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Ff.forEach(function(n){return lr.addEventListener(n,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Ff.forEach(function(n){return lr.removeEventListener(n,t.listener,!0)}),this.stopped=!0)},e}(),bl=new sA,Hf=function(e){!Zo&&e>0&&bl.start(),Zo+=e,!Zo&&bl.stop()},lA=function(e){return!fc(e)&&!KR(e)&&getComputedStyle(e).display==="inline"},cA=function(){function e(t,n){this.target=t,this.observedBox=n||wr.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=sg(this.target,this.observedBox,!0);return lA(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),dA=function(){function e(t,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=n}return e}(),Zr=new WeakMap,zf=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},Jr=function(){function e(){}return e.connect=function(t,n){var r=new dA(t,n);Zr.set(t,r)},e.observe=function(t,n,r){var o=Zr.get(t),a=o.observationTargets.length===0;zf(o.observationTargets,n)<0&&(a&&Xt.push(o),o.observationTargets.push(new cA(n,r&&r.box)),Hf(1),bl.schedule())},e.unobserve=function(t,n){var r=Zr.get(t),o=zf(r.observationTargets,n),a=r.observationTargets.length===1;o>=0&&(a&&Xt.splice(Xt.indexOf(r),1),r.observationTargets.splice(o,1),Hf(-1))},e.disconnect=function(t){var n=this,r=Zr.get(t);r.observationTargets.slice().forEach(function(o){return n.unobserve(t,o.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}(),uA=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Jr.connect(this,t)}return e.prototype.observe=function(t,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Df(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Jr.observe(this,t,n)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Df(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Jr.unobserve(this,t)},e.prototype.disconnect=function(){Jr.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();const fA=ge[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],pA=fA,hA=e=>{const t=E.exports.useRef(e);return E.exports.useEffect(()=>{t.current=e}),t},mA=hA,gA=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:uA;function yA(){}function vA(e,t){const n=SA(),r=mA(t);return pA(()=>{let o=!1;const a=e&&"current"in e?e.current:e;if(!a)return yA;function i(s,l){o||r.current(s,l)}return n.subscribe(a,i),()=>{o=!0,n.unsubscribe(a,i)}},[e,n,r]),n.observer}function bA(){let e=!1,t=[];const n=new Map,r=new gA((o,a)=>{t=t.concat(o);function i(){const s=new Set;for(let l=0;l<t.length;l++){if(s.has(t[l].target))continue;s.add(t[l].target);const d=n.get(t[l].target);d==null||d.forEach(c=>c(t[l],a))}t=[],e=!1}e||window.requestAnimationFrame(i),e=!0});return{observer:r,subscribe(o,a){var i;r.observe(o);const s=(i=n.get(o))!==null&&i!==void 0?i:[];s.push(a),n.set(o,s)},unsubscribe(o,a){var i;const s=(i=n.get(o))!==null&&i!==void 0?i:[];if(s.length===1){r.unobserve(o),n.delete(o);return}const l=s.indexOf(a);l!==-1&&s.splice(l,1),n.set(o,s)}}}let Ys;const SA=()=>Ys||(Ys=bA());function Jo(e){const[t,n]=E.exports.useState(!1),[r,o]=E.exports.useState(!1),a=E.exports.useRef(null);return vA(a,({target:i})=>{if(!t&&i){const s=i.getElementsByTagName("p")[0];s&&o(s.scrollHeight>s.clientHeight||s.scrollWidth>s.clientWidth)}}),N("td",{...e,className:`ExpandableTableData ${e.className?e.className:""}`,"aria-expanded":t,ref:a,children:[r&&u("button",{className:"ExpandableTableData__expandButton",onClick:()=>n(!t),children:u(pe,{icon:t?"minusBoxOutline":"addBoxOutline",sx:{color:"grey.600"}})}),e.children]})}try{Jo.displayName="ExpandableTableDataCell",Jo.__docgenInfo={description:"",displayName:"ExpandableTableDataCell",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/ExpandableTableDataCell.tsx#ExpandableTableDataCell"]={docgenInfo:Jo.__docgenInfo,name:"ExpandableTableDataCell",path:"src/lib/containers/table/ExpandableTableDataCell.tsx#ExpandableTableDataCell"})}catch{}const wA={id:"",name:"",type:"org.sagebionetworks.repo.model.FileEntity",versionNumber:-1,versionLabel:"",benefactorId:-1,createdBy:"",createdOn:"",modifiedBy:"",modifiedOn:"",isLatestVersion:!0},CA=["","DESC","ASC"],Uf={resizeMode:"overflow",partialRefresh:"true",liveDrag:!0,headerOnly:"true"};class cr extends E.exports.Component{constructor(t){super(t),this.tableElement=void 0,this.renderTable=(n,r,o,a)=>{var b,C;const i=(C=(b=this.props.queryContext).getLastQueryRequest)==null?void 0:C.call(b),{queryContext:{entity:s},showAccessColumn:l,showDownloadColumn:d,isRowSelectionVisible:c}=this.props,f=s&&(mn(s)&&_y(s)||On(s)),p=l&&s&&this.isEntityViewOrDataset()&&this.allRowsHaveId(),g=!!this.props.synapseContext.accessToken,h=s&&f&&g&&this.allRowsHaveId(),m=!!(h&&!this.props.hideDownload),v=h&&d;return N("div",{className:"SynapseTable SRC-overflowAuto","data-testid":"SynapseTable",children:[N("table",{ref:S=>this.tableElement=S,className:"table table-striped table-condensed",children:[u("thead",{className:"SRC_bordered",children:u("tr",{children:this.createTableHeader(n,r,o,p,v,m,c,i)})}),u("tbody",{children:this.createTableRows(a,n,p,v,m,c)})]}),u("div",{className:"bootstrap-4-backport",style:{textAlign:"right"},children:u(zR,{})})]})},this.handleColumnSortPress=n=>r=>{let o=zn(this.state.columnIconSortState);o.length===0&&(o=Array(this.getLengthOfPropsData()).fill(0));const a=zn(this.state.sortedColumnSelection),i=this.findSelectionIndex(a,n.name);i!==-1&&a.splice(i,1),o[n.index]=(o[n.index]+1)%Lc.length,o[n.index]>0&&a.unshift({column:n.name,direction:CA[o[n.index]]});const s=this.props.queryContext.getLastQueryRequest();s.query.sort=a,s.query.offset=0,this.props.queryContext.executeQueryRequest(s),this.setState({columnIconSortState:o,sortedColumnSelection:a})},this.applyChangesFromQueryFilter=n=>{const r=this.props.queryContext.getLastQueryRequest();r.query.selectedFacets=n,r.query.offset=0,this.props.queryContext.executeQueryRequest(r)},this.componentDidMount=this.componentDidMount.bind(this),this.componentWillUnmount=this.componentWillUnmount.bind(this),this.componentDidUpdate=this.componentDidUpdate.bind(this),this.shouldComponentUpdate=this.shouldComponentUpdate.bind(this),this.handleColumnSortPress=this.handleColumnSortPress.bind(this),this.findSelectionIndex=this.findSelectionIndex.bind(this),this.advancedSearch=this.advancedSearch.bind(this),this.getLengthOfPropsData=this.getLengthOfPropsData.bind(this),this.configureFacetDropdown=this.configureFacetDropdown.bind(this),this.enableResize=this.enableResize.bind(this),this.disableResize=this.disableResize.bind(this),this.isEntityViewOrDataset=this.isEntityViewOrDataset.bind(this),this.allRowsHaveId=this.allRowsHaveId.bind(this),this.state={columnIconSortState:[],isExportTableDownloadOpen:!1,isExpanded:!1,isColumnSelectionOpen:!1,sortedColumnSelection:[],mapEntityIdToHeader:{},mapUserIdToHeader:{},isFetchingEntityHeaders:!1},this.getEntityHeadersInData=this.getEntityHeadersInData.bind(this)}componentWillUnmount(){this.disableResize()}componentDidMount(){this.getEntityHeadersInData(!0),this.enableResize()}shouldComponentUpdate(t,n){const{isFetchingEntityHeaders:r,...o}=this.state,{isFetchingEntityHeaders:a,...i}=n,s=!Pr(this.props,t),l=!Pr(o,i),d=s||l;return d&&this.disableResize(),d}componentDidUpdate(t,n){Pr(t.queryContext.data,this.props.queryContext.data)?t.queryContext.entity&&this.props.queryContext.entity&&!Pr(mn(t.queryContext.entity),mn(this.props.queryContext.entity))&&this.getEntityHeadersInData(!0):this.getEntityHeadersInData(!1),this.enableResize()}enableResize(){this.resizer?setTimeout(()=>{this.resizer.reset(Uf)},1e3):this.tableElement&&this.getLengthOfPropsData()>1&&(this.resizer=new qR(this.tableElement,Uf))}disableResize(){this.resizer&&this.resizer.reset({disable:!0})}async getEntityHeadersInData(t){var f,p,g;const{data:n,entity:r}=this.props.queryContext;if(!n||!r)return;if(this.state.isFetchingEntityHeaders&&!t)return;const o=zn(this.state.mapEntityIdToHeader),a=zn(this.state.mapUserIdToHeader),i=Lf(n,re.ENTITYID),s=Lf(n,re.USERID),l=qf(n,o,i);(this.isEntityViewOrDataset()||r&&np(r))&&this.allRowsHaveId()&&((g=(p=(f=n.queryResult)==null?void 0:f.queryResults)==null?void 0:p.rows)!=null?g:[]).forEach(m=>{const v=`syn${m.rowId}`;l.add(v)});const d=qf(n,a,s);if(l.size===0&&d.size===0)return;if(this.setState({isFetchingEntityHeaders:!0}),l.size>0){const h=Array.from(l).map(m=>({targetId:m}));try{h.forEach(b=>{o[b.targetId]=wA});const m=await Sl(h,this.props.synapseContext.accessToken),{results:v}=m;v.forEach(b=>{o[b.id]=b})}catch(m){console.error("Error on retrieving entity header list , ",m)}}const c=[];if(d.size>0){const h=Array.from(d);try{(await Ey(h,this.props.synapseContext.accessToken)).children.forEach(v=>{v.isIndividual?c.push(v.ownerId):a[v.ownerId]=v})}catch(m){console.error("Error on getGroupHeaders batch: ",m)}}if(c.length>0)try{(await uv(c)).list.forEach(m=>{a[m.ownerId]=m})}catch(h){console.error("Error on getUserProfile : ",h)}this.setState({mapEntityIdToHeader:o,mapUserIdToHeader:a,isFetchingEntityHeaders:!1})}render(){var m,v;if(!this.props.queryContext.data&&this.props.queryContext.isLoadingNewBundle)return gp;if(!this.props.queryContext.data)return u(H,{});const{queryContext:{data:t},queryVisualizationContext:{NoContentPlaceholder:n}}=this.props,{queryResult:r,columnModels:o=[]}=t,{facets:a=[]}=t,{isExpanded:i,isExportTableDownloadOpen:s}=this.state,l=this.props.queryContext.getLastQueryRequest();let d="";if(!(((v=(m=t.queryResult)==null?void 0:m.queryResults.rows.length)!=null?v:0)>0)&&l.query.offset===0)return u(n,{});const{rows:f,headers:p}=r.queryResults,g=u("div",{children:this.renderTable(p,o,a,f)}),h=u(H,{children:N("div",{className:d,children:[s&&u(Kt,{onClose:()=>{this.setState({isExportTableDownloadOpen:!1})},queryBundleRequest:l}),u("div",{children:g})]})});return N(E.exports.Fragment,{children:[i&&N(ae,{animation:!1,show:!0,onHide:()=>this.setState({isExpanded:!1}),dialogClassName:"modal-90w",backdrop:"static",children:[u(ae.Header,{onHide:()=>this.setState({isExpanded:!1}),closeButton:!0}),u(ae.Body,{children:h})]}),!i&&h]})}allRowsHaveId(){var n,r;const{queryContext:{data:t}}=this.props;return(r=(n=t==null?void 0:t.queryResult)==null?void 0:n.queryResults.rows.every(o=>!!o.rowId))!=null?r:!1}isEntityViewOrDataset(){var n;const{queryContext:{entity:t}}=this.props;return(n=t&&(mn(t)||On(t)))!=null?n:!1}createTableRows(t,n,r,o,a,i){const s=[],{queryContext:{data:l},queryVisualizationContext:{columnsToShowInTable:d,selectedRowIndices:c,setSelectedRowIndices:f},columnLinks:p=[]}=this.props,{selectColumns:g=[],columnModels:h=[]}=l,{mapEntityIdToHeader:m,mapUserIdToHeader:v}=this.state;return t.forEach((b,C)=>{var I,O,A;const S=(I=b.versionNumber)==null?void 0:I.toString(),y=`syn${b.rowId}`,w=b.values.map((k,M)=>{const B=n[M].name,T=d.includes(B),q=p.find($=>$.matchColumnName===B),D=this.findSelectionIndex(this.state.sortedColumnSelection,B)===-1?"":"SRC-boldText";return T?u(Jo,{className:"SRC_noBorderTop",children:u(Xo,{columnType:n[M].columnType,columnValue:k,isBold:D,mapEntityIdToHeader:m,mapUserIdToHeader:v,columnLinkConfig:q,columnName:B,rowData:b.values,selectColumns:g,columnModels:h,rowId:b.rowId,rowVersionNumber:b.versionNumber})},`(${C}${k}${M})`):u("td",{className:"SRC-hidden"},`(${C},${M})`)});r&&w.unshift(u("td",{className:"SRC_noBorderTop",children:u(jo,{entityId:y,entityVersionNumber:S},y)},y));const _=((O=m[y])==null?void 0:O.type)=="org.sagebionetworks.repo.model.FileEntity";o&&w.unshift(u("td",{className:"SRC_noBorderTop direct-download",children:_&&u(sr,{associatedObjectId:y,entityVersionNumber:S})},`direct-download-${y}`)),a&&w.unshift(u("td",{className:"SRC_noBorderTop add-to-download-list-v2",children:_&&u(Mo,{entityId:y,entityVersionNumber:parseInt(S)})},`add-to-download-list-v2-${y}`)),i&&c&&w.unshift(u("td",{className:"SRC_noBorderTop",children:u(Eb,{label:"",checked:c.includes(C),onChange:k=>{const M=[...c];if(k)M.push(C);else{const B=M.indexOf(C);B>-1&&M.splice(B,1)}f(M)}})},`(${C},rowSelectColumn)`));const x=u("tr",{children:w},(A=b.rowId)!=null?A:C);s.push(x)}),s}isSortableColumn(t){switch(t){case re.USERID:case re.ENTITYID:case re.FILEHANDLEID:case re.STRING_LIST:case re.INTEGER_LIST:case re.BOOLEAN_LIST:case re.DATE_LIST:case re.USERID_LIST:case re.ENTITYID_LIST:return!1;default:return!0}}createTableHeader(t,n,r,o,a,i,s,l){const{sortedColumnSelection:d,columnIconSortState:c}=this.state,{queryVisualizationContext:{getColumnDisplayName:f,columnsToShowInTable:p},queryContext:{lockedColumn:g}}=this.props,h=t.map((m,v)=>{var C;if(p.includes(m.name)){const S=this.findSelectionIndex(d,m.name)!==-1,y=c[v]===void 0?0:c[v],w=r.findIndex(q=>q.columnName===m.name),_=w!==-1&&r[w].facetType==="enumeration",x=r[w],I=S?"SRC-primary-background-color SRC-anchor-light":"",O=S?"SRC-selected-table-icon tool-icon":"SRC-primary-text-color tool-icon",A=`SRC-tableHead SRC-hand-cursor SRC-sortPadding SRC-primary-background-color-hover  ${I}`,k=f(m.name),M=n.find(q=>q.name===m.name),B=m.name.toLowerCase()===((C=g==null?void 0:g.columnName)==null?void 0:C.toLowerCase()),T=M&&M.name=="id"&&M.columnType==re.ENTITYID;return u("th",{children:N("div",{className:"SRC-split",children:[u("span",{style:{whiteSpace:"nowrap"},children:k}),N("div",{className:"SRC-centerContent",children:[_&&!B&&this.configureFacetDropdown(x,M,l),this.isSortableColumn(m.columnType)&&u("span",{role:"button","aria-label":"sort",tabIndex:0,className:A,onKeyPress:this.handleColumnSortPress({index:v,name:m.name}),onClick:this.handleColumnSortPress({index:v,name:m.name}),children:u(Ha,{type:Lc[y],cssClass:O})}),T&&u(UR,{})]})]})},m.name)}else return u("th",{className:"SRC-hidden"},m.name)});return o&&h.unshift(u("th",{children:u("div",{className:"SRC-centerContent",children:u("span",{style:{whiteSpace:"nowrap"},children:"Access"})})},"accessColumn")),a&&h.unshift(u("th",{children:u("div",{className:"SRC-centerContent",children:"\xA0"})},"downloadColumn")),i&&h.unshift(u("th",{"data-testid":"AddToDownloadListV2ColumnHeader",children:u("div",{className:"SRC-centerContent",children:"\xA0"})},"addToV2DownloadListColumn")),s&&h.unshift(u("th",{children:u("div",{className:"SRC-centerContent"})},"rowSelectionColumn")),h}findSelectionIndex(t,n){return t.length!==0?t.findIndex(r=>r.column===n):-1}advancedSearch(t){t&&t.preventDefault();const n=this.props.queryContext.getLastQueryRequest(),{query:r}=n,o=btoa(JSON.stringify(r)),a=n.entityId;window.open(`${$e.PORTAL}#!Synapse:${a}/tables/query/${o}`,"_blank")}getLengthOfPropsData(){var n,r;const{data:t}=this.props.queryContext;return(r=(n=t==null?void 0:t.queryResult)==null?void 0:n.queryResults.headers.length)!=null?r:0}configureFacetDropdown(t,n,r){return u(Yy,{containerAs:"Dropdown",facetValues:t.facetValues,columnModel:n,onChange:o=>{jy(r,t,this.applyChangesFromQueryFilter,o)},onClear:()=>{Wy(r,t,this.applyChangesFromQueryFilter)}})}}try{cr.displayName="SynapseTable",cr.__docgenInfo={description:"",displayName:"SynapseTable",props:{synapseContext:{defaultValue:null,description:"",name:"synapseContext",required:!0,type:{name:"SynapseContextType"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/SynapseTable.tsx#SynapseTable"]={docgenInfo:cr.__docgenInfo,name:"SynapseTable",path:"src/lib/containers/table/SynapseTable.tsx#SynapseTable"})}catch{}function dg(){const{data:e}=Tt(),{showLastUpdatedOn:t}=Ct();return t&&e&&e.lastUpdatedOn?u("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:N(_t,{variant:"body1Italic",children:["Last updated on ",Ml(Tr(e.lastUpdatedOn))]})}):u(H,{})}const ea=e=>{const{tableConfiguration:t,cardConfiguration:n,hideDownload:r}=e,o=ie(),a=Tt(),i=Ct();return N("div",{className:`FilterAndView ${i.topLevelControlsState.showFacetFilter?Ln:qn}`,children:[t?u(cr,{...t,synapseContext:o,queryContext:a,queryVisualizationContext:i,hideDownload:r}):u(H,{}),n?u(fr,{...n}):u(H,{}),u(dg,{})]})};try{ea.displayName="FilterAndView",ea.__docgenInfo={description:"",displayName:"FilterAndView",props:{tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!0,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext"> | undefined'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!0,type:{name:"CardConfiguration | undefined"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/query_wrapper_plot_nav/FilterAndView.tsx#FilterAndView"]={docgenInfo:ea.__docgenInfo,name:"FilterAndView",path:"src/lib/containers/query_wrapper_plot_nav/FilterAndView.tsx#FilterAndView"})}catch{}const _A="isShowingFacetFilters",EA="isHidingFacetFilters",ta=e=>{const[t,n]=E.exports.useState(!1),{searchParams:r,sql:o,sqlOperator:a,tableConfiguration:i,name:s,cardConfiguration:l,facetsToPlot:d,facetsToFilter:c,hideDownload:f,hideQueryCount:p,hideSqlEditorControl:g,searchConfiguration:h,limit:m=qy,initQueryJson:v,showLastUpdatedOn:b}=e,C=_l(r,a),S=v?JSON.parse(v):{sql:o,additionalFilters:C,limit:m,offset:0},y=kn(S.sql),{data:w}=kl(y),_=w&&rp(w)&&w.isSearchEnabled,x={entityId:y,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:Er|xr|Tl|cp|Ol|Il|El|Nl,query:S};return u("div",{className:"QueryWrapperPlotNav",children:u(i?pp:rr,{...e,initQueryRequest:x,children:u(Rl,{unitDescription:"results",rgbIndex:e.rgbIndex,columnAliases:e.columnAliases,visibleColumnCount:e.visibleColumnCount,defaultShowFacetVisualization:e.defaultShowFacetVisualization,defaultShowSearchBar:e.defaultShowSearchBox||_,showLastUpdatedOn:b,noContentPlaceholderType:wa.INTERACTIVE,children:u(Al,{children:O=>{if(O===void 0)throw new Error("No queryContext found when using QueryContextConsumer");const A=O==null?void 0:O.isFacetsAvailable;return u(fp,{children:k=>{if(k===void 0)throw new Error("No queryVisualizationContext found when using QueryVisualizationContextConsumer");const M=(k==null?void 0:k.topLevelControlsState.showFacetFilter)||(k==null?void 0:k.topLevelControlsState.showFacetFilter)===void 0;return N(H,{children:[u("div",{className:`ErrorBannerWrapper ${M?_A:EA}`,children:u(Gy,{})}),_?u(nr,{helpUrl:h==null?void 0:h.fullTextSearchHelpURL}):u(or,{...h,queryContext:O,queryVisualizationContext:k}),u(ar,{}),u(Ro,{getLastQueryRequest:O.getLastQueryRequest,topLevelControlsState:k.topLevelControlsState,setTopLevelControlsState:k.setTopLevelControlsState}),u(ir,{showColumnSelection:i!==void 0,name:s,hideDownload:f,hideQueryCount:p,hideFacetFilterControl:!A,hideVisualizationsControl:!A,hideSqlEditorControl:g}),A&&u(H,{children:u(Ky,{facetsToFilter:c})}),u(Xy,{facetsToPlot:d}),u(ea,{tableConfiguration:i,hideDownload:f,cardConfiguration:l}),t&&u(Kt,{getLastQueryRequest:O.getLastQueryRequest,onClose:()=>n(!1)})]})}})}})})})})},xA=ta;try{ta.displayName="QueryWrapperPlotNav",ta.__docgenInfo={description:"",displayName:"QueryWrapperPlotNav",props:{searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},facetsToPlot:{defaultValue:null,description:"",name:"facetsToPlot",required:!1,type:{name:"string[]"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"If onQueryChange is set, the callback will be invoked when the Query changes",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"If onQueryResultBundleChange is set, the callback will be invoked when the QueryResultBundle changes",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},initQueryJson:{defaultValue:null,description:"If initQueryJson is set, it will be the Query used in the initial QueryBundleRequest",name:"initQueryJson",required:!1,type:{name:"string"}},tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!1,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext">'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!1,type:{name:"CardConfiguration"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},facetsToFilter:{defaultValue:null,description:"",name:"facetsToFilter",required:!1,type:{name:"string[]"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},defaultShowSearchBox:{defaultValue:null,description:"",name:"defaultShowSearchBox",required:!1,type:{name:"boolean"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}},defaultShowFacetVisualization:{defaultValue:null,description:"",name:"defaultShowFacetVisualization",required:!1,type:{name:"boolean"}},visibleColumnCount:{defaultValue:null,description:"",name:"visibleColumnCount",required:!1,type:{name:"number"}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/query_wrapper_plot_nav/QueryWrapperPlotNav.tsx#QueryWrapperPlotNav"]={docgenInfo:ta.__docgenInfo,name:"QueryWrapperPlotNav",path:"src/lib/containers/query_wrapper_plot_nav/QueryWrapperPlotNav.tsx#QueryWrapperPlotNav"})}catch{}const TA=e=>({partMask:Il|xr|Tl|Ol|Er|Nl,entityId:kn(e),concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:e,limit:25,offset:0}}),na=e=>{const{title:t,searchParams:n,sqlOperator:r,showAccessColumn:o,sql:a,hideDownload:i,hideQueryCount:s,name:l,showTopLevelControls:d=!1,searchConfiguration:c,unitDescription:f="Results",rgbIndex:p,showLastUpdatedOn:g,noContentPlaceholderType:h=d?wa.INTERACTIVE:wa.STATIC,...m}=e,v=TA(a);n&&(v.query.additionalFilters=_l(n,r));const b=ie(),C=kn(a),{data:S}=kl(C);return u(pp,{...m,initQueryRequest:v,children:u(Rl,{rgbIndex:p,unitDescription:f,showLastUpdatedOn:g,noContentPlaceholderType:h,...m,children:u(Al,{children:y=>{if(y===void 0)throw new Error("No queryContext found when calling QueryContextConsumer");return u(fp,{children:w=>{if(w===void 0)throw new Error("No queryVisualizationContext found when calling QueryVisualizationContextConsumer");return N(H,{children:[d&&u(ir,{showColumnSelection:!0,name:l,hideDownload:i,hideQueryCount:s,hideFacetFilterControl:!0,hideVisualizationsControl:!0}),S&&rp(S)&&S.isSearchEnabled?u(nr,{helpUrl:c==null?void 0:c.fullTextSearchHelpURL}):u(or,{...c,queryContext:y,queryVisualizationContext:w}),u(ar,{}),d&&u(hp,{frontText:""}),u(cr,{synapseContext:b,queryContext:y,queryVisualizationContext:w,showAccessColumn:o,title:t,"data-testid":"SynapseTable",...m}),u(dg,{})]})}})}})})})},OA=na;try{na.displayName="StandaloneQueryWrapper",na.__docgenInfo={description:`This component was initially implemented on the portal side. It renders a SynapseTable if a title is provided.
If showTopLevelControls is set to true, then the SynapseTable will also include the TopLevelControls (search, export table, column selection).`,displayName:"StandaloneQueryWrapper",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},showTopLevelControls:{defaultValue:null,description:"",name:"showTopLevelControls",required:!1,type:{name:"boolean"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/StandaloneQueryWrapper.tsx#StandaloneQueryWrapper"]={docgenInfo:na.__docgenInfo,name:"StandaloneQueryWrapper",path:"src/lib/containers/table/StandaloneQueryWrapper.tsx#StandaloneQueryWrapper"})}catch{}function ra(e){const{query:t,showquery:n,tableonly:r}=e,o=n==="true",a=r==="true",i="Items";return a?u(OA,{sql:t,name:i}):u(xA,{sql:t,hideSqlEditorControl:!o,name:i,defaultShowFacetVisualization:!1,tableConfiguration:{}})}try{ra.displayName="MarkdownSynapseTable",ra.__docgenInfo={description:"",displayName:"MarkdownSynapseTable",props:{query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"string"}},showquery:{defaultValue:null,description:"",name:"showquery",required:!0,type:{name:"string"}},tableonly:{defaultValue:null,description:"",name:"tableonly",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownSynapseTable.tsx#MarkdownSynapseTable"]={docgenInfo:ra.__docgenInfo,name:"MarkdownSynapseTable",path:"src/lib/containers/markdown/widget/MarkdownSynapseTable.tsx#MarkdownSynapseTable"})}catch{}const IA={1:"toc-indent1",2:"toc-indent2",3:"toc-indent3",4:"toc-indent4",5:"toc-indent5",6:"toc-indent6"};function oa(e){const{originalMarkup:t}=e,n=[],r=/<h([1-6]) id="(.*)" .*toc="true">(.*)<\/h[1-6]>/gm;let o="";return t.replace(r,(a,i,s,l)=>(o+=l,n.push(u("div",{children:u("a",{role:"link",className:`link ${IA[Number(i)]}`,"data-anchor":s,children:l})},l)),"")),u("div",{children:n},o)}try{oa.displayName="MarkdownTableOfContents",oa.__docgenInfo={description:"",displayName:"MarkdownTableOfContents",props:{originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownTableOfContents.tsx#MarkdownTableOfContents"]={docgenInfo:oa.__docgenInfo,name:"MarkdownTableOfContents",path:"src/lib/containers/markdown/widget/MarkdownTableOfContents.tsx#MarkdownTableOfContents"})}catch{}function aa(e){const{alias:t}=e;return u(Jt,{alias:t,size:pr})}try{aa.displayName="MarkdownUserBadge",aa.__docgenInfo={description:"",displayName:"MarkdownUserBadge",props:{alias:{defaultValue:null,description:"",name:"alias",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownUserBadge.tsx#MarkdownUserBadge"]={docgenInfo:aa.__docgenInfo,name:"MarkdownUserBadge",path:"src/lib/containers/markdown/widget/MarkdownUserBadge.tsx#MarkdownUserBadge"})}catch{}function ia(e){return u(Tb,{params:e})}try{ia.displayName="MarkdownVideo",ia.__docgenInfo={description:"",displayName:"MarkdownVideo",props:{width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"string"}},videoId:{defaultValue:null,description:"",name:"videoId",required:!1,type:{name:"string"}},vimeoId:{defaultValue:null,description:"",name:"vimeoId",required:!1,type:{name:"string"}},oggSynapseId:{defaultValue:null,description:"",name:"oggSynapseId",required:!1,type:{name:"string"}},mp4SynapseId:{defaultValue:null,description:"",name:"mp4SynapseId",required:!1,type:{name:"string"}},webmSynapseId:{defaultValue:null,description:"",name:"webmSynapseId",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownVideo.tsx#MarkdownVideo"]={docgenInfo:ia.__docgenInfo,name:"MarkdownVideo",path:"src/lib/containers/markdown/widget/MarkdownVideo.tsx#MarkdownVideo"})}catch{}function sa(e){const{widgetType:t,widgetParamsMapped:n,originalMarkup:r}=e;switch(t){case"buttonlink":return u(to,{...n});case"image":return u(Oo,{...n});case"plot":return u(Io,{...n});case"toc":return u(oa,{originalMarkup:r});case"badge":return u(aa,{...n});case"iduReport":return u(co,{...n});case"video":case"vimeo":case"youtube":return u(ia,{...n});case"synapsetable":return u(ra,{...n});case"provenance":return u(xo,{...n});case"preview":return u(io,{...n});default:return console.warn(`Unsupported widget: ${t}.`),u(H,{})}}function Yf(e){return u(Xf,{children:u(sa,{...e})})}try{sa.displayName="MarkdownWidget",sa.__docgenInfo={description:"",displayName:"MarkdownWidget",props:{widgetType:{defaultValue:null,description:"",name:"widgetType",required:!0,type:{name:"enum",value:[{value:'"image"'},{value:'"video"'},{value:'"buttonlink"'},{value:'"plot"'},{value:'"toc"'},{value:'"badge"'},{value:'"iduReport"'},{value:'"vimeo"'},{value:'"youtube"'},{value:'"synapsetable"'},{value:'"provenance"'},{value:'"preview"'}]}},widgetParamsMapped:{defaultValue:null,description:"",name:"widgetParamsMapped",required:!0,type:{name:"any"}},originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/MarkdownWidget.tsx#MarkdownWidget"]={docgenInfo:sa.__docgenInfo,name:"MarkdownWidget",path:"src/lib/containers/markdown/MarkdownWidget.tsx#MarkdownWidget"})}catch{}class la extends E.exports.Component{constructor(t){super(t),this.renderBookmarks=this.renderBookmarks.bind(this)}renderBookmarks(){const t=String(this.props.footnotes),n=/Synapse widget&gt;<\/span>(.*)</g;let r;const o=[];for(;r=n.exec(t);)o.push(r[1]);return o.map((a,i)=>{const s=i<o.length-1;return N(E.exports.Fragment,{children:[N("button",{className:"SRC-markdown-bookmark",id:`bookmark${i}`,children:["[",i+1,"]"]}),u("span",{dangerouslySetInnerHTML:{__html:a}}),s&&u("br",{})]},i)})}render(){return N(E.exports.Fragment,{children:[u("hr",{}),this.renderBookmarks()]})}}const NA=la;try{la.displayName="Bookmarks",la.__docgenInfo={description:"",displayName:"Bookmarks",props:{footnotes:{defaultValue:null,description:"",name:"footnotes",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/Bookmarks.tsx#Bookmarks"]={docgenInfo:la.__docgenInfo,name:"Bookmarks",path:"src/lib/containers/markdown/widget/Bookmarks.tsx#Bookmarks"})}catch{}const js=markdownit({html:!0});class Fe extends ge.Component{constructor(t){super(t),markdownitSynapse.init_markdown_it(js,markdownitSub,markdownitSup,markdownitCentertext,markdownitSynapseHeading,markdownitSynapseTable,markdownitStrikethroughAlt,markdownitContainer,markdownitEmphasisAlt,markdownitInlineComments,markdownitBr);const n="";js.use(markdownitSynapse,n,"https://synapse.org").use(markdownitMath,n);const r={};this.props.markdown&&(r.markdown=this.props.markdown),this.state={md:js,error:void 0,fileHandles:void 0,data:r,isLoading:!0},this.markupRef=ge.createRef(),this.handleLinkClicks=this.handleLinkClicks.bind(this),this.renderMarkdown=this.renderMarkdown.bind(this),this.recursiveRender=this.recursiveRender.bind(this),this.processMath=this.processMath.bind(this),this.getWikiAttachments=this.getWikiAttachments.bind(this),this.getWikiPageMarkdown=this.getWikiPageMarkdown.bind(this),this.createHTML=this.createHTML.bind(this),this.addBookmarks=this.addBookmarks.bind(this),this.addIdsToReferenceWidgets=this.addIdsToReferenceWidgets.bind(this),this.addIdsToTocWidgets=this.addIdsToTocWidgets.bind(this)}componentWillUnmount(){this.markupRef.current&&this.markupRef.current.removeEventListener("click",this.handleLinkClicks)}handleLinkClicks(t){const n=t.target;if(n.tagName==="A"||n.tagName==="BUTTON"){const r=t.target;if(r.id.substring(0,3)==="ref"){t.preventDefault();const o=Number(t.currentTarget.id.substring(3)),a=this.markupRef.current.querySelector(`#bookmark${o}`);try{a.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(i){console.log("error on scroll",i)}}else if(t.currentTarget.id!==null&&r.getAttribute("data-anchor")){t.preventDefault();const o=r.getAttribute("data-anchor"),a=this.markupRef.current.querySelector(`#${o}`);try{a.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(i){console.log("error on scroll",i)}}}}createHTML(t){if(!t)return{__html:""};const n=this.props.renderInline?this.state.md.renderInline(t):this.state.md.render(t);return{__html:Qp(n,Zp)}}processMath(){if(!this.markupRef.current)return;const t=this.markupRef.current.querySelectorAll('[id^="mathjax-"]'),n=new RegExp(/\\[()[\]]/,"g");t.forEach(r=>{if(r.textContent&&!r.getAttribute("processed")){r.setAttribute("processed","true");const o=r.textContent.replace(n,"");return katex.render(o,r,{output:"html",throwOnError:!1})}})}addBookmarks(){markdownitSynapse.resetFootnotes(),this.createHTML(this.state.data.markdown);const t=this.createHTML(markdownitSynapse.footnotes()).__html;if(t.length>0)return u(NA,{footnotes:t})}async getWikiPageMarkdown(){const{ownerId:t,wikiId:n,objectType:r}=this.props;if(!(!t&&!n))try{const o=await xy(this.context.accessToken,t,n,r);try{const a=await this.getWikiAttachments(n||o.id);this.setState({data:o,fileHandles:a,error:void 0})}catch(a){console.error("fileHandlesErr = ",a)}}catch(o){console.error(`Error on wiki markdown load
`,o),this.setState({error:o})}}async getWikiAttachments(t){const{ownerId:n,objectType:r}=this.props;if(!n){console.error("Cannot get wiki attachments without ownerId on Markdown Component");return}return await Ty(this.context.accessToken,n,t,r).then(o=>o).catch(o=>{console.error("Error on wiki attachment load ",o)})}addIdsToReferenceWidgets(t){const n=/<span id="wikiReference.*?<span data-widgetparams.*?span>/g;let r=1;return t.replace(n,()=>{const o=r;return r+=1,`<a href="" id="ref${o}">[${o}]</a>`})}addIdsToTocWidgets(t){const n="SRC-header-";let r=1;const o=/<h[1-6] toc="true">.*<\/h[1-6]>/gm;return t.replace(o,a=>{const i=r;return r+=1,`${a.substring(0,3)} id="${n}${i}"${a.substring(3)}`})}renderMarkdown(){let t=this.createHTML(this.state.data.markdown).__html;if(t=this.addIdsToReferenceWidgets(t),t=this.addIdsToTocWidgets(t),t.length>0){const r=new DOMParser().parseFromString(t,"text/html");return u(H,{children:this.recursiveRender(r.body,t)})}}recursiveRender(t,n){if(t.nodeType===Node.TEXT_NODE)return N(H,{children:[" ",t.textContent," "]});if(t.nodeType===Node.ELEMENT_NODE&&t instanceof HTMLElement){const r=t.tagName.toLowerCase()==="body"?"span":t.tagName.toLowerCase(),o=t.getAttribute("data-widgetparams");if(o)return this.processHTMLWidgetMapping(o,n);const a=t.attributes,i={};for(let l=0;l<a.length;l++){let d="",c="";const f=a.item(l);f&&(d=f.name,c=f.value),d&&c&&(i[d]=c)}if(t.childNodes.length===0)return u(r,{...i});const s=Array.from(t.childNodes).map((l,d)=>u(ge.Fragment,{children:this.recursiveRender(l,n)},d));return u(r,{...i,children:s})}}decodeXml(t){const n={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'};return t.replace(/(&quot;|&lt;|&gt;|&amp;)/g,(r,o)=>n[o])}processHTMLWidgetMapping(t,n){const r=this.decodeXml(t),o=r.indexOf("?");if(o===-1)return u(Yf,{widgetType:r,widgetParamsMapped:{},originalMarkup:n},JSON.stringify(r));const a=r.substring(0,o),i={};return r.substring(o+1).split("&").forEach(s=>{let[l,d]=s.split("=");d=decodeURIComponent(d),i[l]=d}),u(Yf,{widgetType:a,widgetParamsMapped:i,originalMarkup:n},JSON.stringify(r))}async componentDidMount(){if(this.state.data.markdown){this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current);return}this.markupRef.current&&this.markupRef.current.addEventListener("click",this.handleLinkClicks),await this.getWikiPageMarkdown(),this.processMath(),this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current)}async componentDidUpdate(t){let n=this.props.ownerId!==t.ownerId;n=n||this.props.wikiId!==t.wikiId,n&&await this.getWikiPageMarkdown(),this.processMath()}render(){const{renderInline:t,loadingSkeletonRowCount:n}=this.props,{isLoading:r,error:o}=this.state,a={ownerId:this.props.ownerId,wikiId:this.props.wikiId,wikiPage:this.state.data,fileHandles:this.state.fileHandles};if(o)return u(op,{error:o});const i=this.addBookmarks(),s=N(To,{wikiContext:a,children:[r&&u(H,{children:n?u(Vl,{numCols:1,numRows:n}):u("span",{className:"spinner"})}),this.renderMarkdown(),i&&u("div",{children:this.addBookmarks()})]});return t?u("span",{className:"markdown markdown-inline",ref:this.markupRef,children:s}):u("div",{className:"markdown",ref:this.markupRef,children:s})}}Fe.contextType=_r;try{Fe.displayName="MarkdownSynapse",Fe.__docgenInfo={description:"Basic Markdown functionality for Synapse, supporting Images/Plots/References/Bookmarks/buttonlinks",displayName:"MarkdownSynapse",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},markdown:{defaultValue:null,description:"",name:"markdown",required:!1,type:{name:"string"}},renderInline:{defaultValue:null,description:"",name:"renderInline",required:!1,type:{name:"boolean"}},objectType:{defaultValue:null,description:"",name:"objectType",required:!1,type:{name:"enum",value:[{value:'"ENTITY"'},{value:'"ENTITY_CONTAINER"'},{value:'"PRINCIPAL"'},{value:'"ACTIVITY"'},{value:'"EVALUATION"'},{value:'"SUBMISSION"'},{value:'"EVALUATION_SUBMISSIONS"'},{value:'"FILE"'},{value:'"MESSAGE"'},{value:'"WIKI"'},{value:'"FAVORITE"'},{value:'"ACCESS_REQUIREMENT"'},{value:'"ACCESS_APPROVAL"'},{value:'"TEAM"'},{value:'"TABLE"'},{value:'"ACCESS_CONTROL_LIST"'},{value:'"PROJECT_SETTING"'},{value:'"VERIFICATION_SUBMISSION"'},{value:'"CERTIFIED_USER_PASSING_RECORD"'},{value:'"FORUM"'},{value:'"THREAD"'},{value:'"REPLY"'},{value:'"FORM_GROUP"'},{value:'"FORM_DATA"'},{value:'"ENTITY_VIEW"'},{value:'"USER_PROFILE"'},{value:'"DATA_ACCESS_REQUEST"'},{value:'"DATA_ACCESS_SUBMISSION"'},{value:'"DATA_ACCESS_SUBMISSION_STATUS"'},{value:'"MEMBERSHIP_INVITATION"'}]}},loadingSkeletonRowCount:{defaultValue:null,description:"",name:"loadingSkeletonRowCount",required:!1,type:{name:"number"}},onMarkdownProcessingDone:{defaultValue:null,description:"",name:"onMarkdownProcessingDone",required:!1,type:{name:"((ref: HTMLInputElement | null) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/MarkdownSynapse.tsx#MarkdownSynapse"]={docgenInfo:Fe.__docgenInfo,name:"MarkdownSynapse",path:"src/lib/containers/markdown/MarkdownSynapse.tsx#MarkdownSynapse"})}catch{}const ca=({type:e,title:t,subTitle:n="",description:r,values:o,secondaryLabelLimit:a,isAlignToLeftNav:i,descriptionConfig:s,href:l,target:d,rgbIndex:c,icon:f})=>{const p=document.querySelector('meta[name="description"]'),[g]=E.exports.useState(document.title),[h]=E.exports.useState(p?p.getAttribute("content"):"");return E.exports.useEffect(()=>(t&&document.title!==t&&(document.title=t),(r||n)&&(p==null||p.setAttribute("content",r||n)),function(){document.title=g,p==null||p.setAttribute("content",h)})),u("div",{className:`SRC-portalCard SRC-portalCardHeader ${i?"isAlignToLeftNav":""}`,children:u("div",{className:"container-fluid container-full-width",children:u("div",{className:"row",children:u("div",{className:"col-md-offset-1 col-md-10",children:N("div",{className:"SRC-portalCardMain",children:[f,N("div",{style:{width:"100%"},children:[N("div",{className:"SRC-cardContent",style:{marginLeft:"15px"},children:[u("div",{className:"SRC-type",children:e}),u("div",{children:u("h3",{className:"SRC-boldText",style:{margin:"none"},children:l?u("a",{target:d,href:l,className:"highlight-link",children:t}):N("span",{children:[" ",t," "]})})}),n&&N("div",{className:"SRC-author",children:[" ",n," "]}),r&&u("span",{className:"SRC-font-size-base",children:s!=null&&s.isMarkdown?u(Fe,{markdown:r}):r})]}),u("div",{style:{borderTop:"1px solid rgba(26, 28, 41, 0.2)",marginTop:"15px",paddingTop:"5px"}}),u("div",{className:"SRC-cardContent",children:o&&u(ql,{isHeader:!0,secondaryLabelLimit:a,values:o})})]})]})})})})})};try{ca.displayName="HeaderCard",ca.__docgenInfo={description:"",displayName:"HeaderCard",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subTitle:{defaultValue:{value:""},description:"",name:"subTitle",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[][]"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},href:{defaultValue:null,description:"",name:"href",required:!1,type:{name:"string"}},target:{defaultValue:null,description:"",name:"target",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"Element"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HeaderCard.tsx#HeaderCard"]={docgenInfo:ca.__docgenInfo,name:"HeaderCard",path:"src/lib/containers/HeaderCard.tsx#HeaderCard"})}catch{}const da=e=>{var d,c;const{fileHandleAssociation:t,showDownloadIcon:n,redirect:r=!1,displayValue:o}=e,{accessToken:a}=ie(),[i,s]=E.exports.useState();E.exports.useEffect(()=>{o===void 0&&(async()=>s(await An({requestedFiles:[t],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1},a)))()},[a,o,t]);let l;return i&&(l=(d=i.requestedFiles[0].fileHandle)==null?void 0:d.fileName),N("button",{onClick:()=>{a&&t&&ap(t.fileHandleId,a,t.associateObjectType,t.associateObjectId,r).then(f=>{window.open(f,"_blank")}).catch(f=>{console.error("Error on retrieving file handle url ",f)})},className:`SRC-primary-text-color ${xl}`,type:"button",style:{padding:0},children:[(c=o!=null?o:l)!=null?c:t.fileHandleId,n&&u(pe,{icon:"download"})]})};try{da.displayName="FileHandleLink",da.__docgenInfo={description:"",displayName:"FileHandleLink",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},redirect:{defaultValue:null,description:"",name:"redirect",required:!1,type:{name:"boolean"}},showDownloadIcon:{defaultValue:null,description:"",name:"showDownloadIcon",required:!0,type:{name:"boolean"}},displayValue:{defaultValue:null,description:"",name:"displayValue",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/FileHandleLink.tsx#FileHandleLink"]={docgenInfo:da.__docgenInfo,name:"FileHandleLink",path:"src/lib/containers/widgets/FileHandleLink.tsx#FileHandleLink"})}catch{}const ua=e=>{const{fileHandleAssociation:{fileHandleId:t,associateObjectId:n,associateObjectType:r}}=e,{accessToken:o}=ie(),[a,i]=E.exports.useState(),{ref:s,inView:l}=Pn({triggerOnce:!0,rootMargin:"500px 0px"});return E.exports.useEffect(()=>{(()=>{t&&n&&r&&l&&ap(t,o,r,n,!1).then(c=>{i(c)}).catch(c=>{console.error("Error on retrieving file handle url ",c)})})()},[l,t,n,o,r]),u("span",{ref:s,children:a&&u("img",{src:a,alt:"",className:"ImageFileHandle",loading:"lazy"})})};try{ua.displayName="ImageFileHandle",ua.__docgenInfo={description:"",displayName:"ImageFileHandle",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"]={docgenInfo:ua.__docgenInfo,name:"ImageFileHandle",path:"src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"})}catch{}const pc=400,RA="SRC-short-description",AA="SRC-long-description",fa=e=>{let t="";const n=e.split(" ");let r=0;for(;t.length<pc&&r<n.length;)t+=`${n[r]} `,r+=1;return t=t.trim(),{previewText:t}},kA=(e,t,n)=>{var o;let r;return e&&t&&(ip(e)?r={fileHandleId:t,associateObjectId:(o=e==null?void 0:e.id)!=null?o:"",associateObjectType:Re.TableEntity}:n&&(r={fileHandleId:t,associateObjectId:n,associateObjectType:Re.FileEntity})),r},Vt=({columnName:e,value:t,selectColumns:n,columnModels:r})=>{if(!t)return{str:"",strList:void 0,columnModelType:void 0};const o=(n==null?void 0:n.find(i=>i.name===e))||(r==null?void 0:r.find(i=>i.name===e));if(o==null?void 0:o.columnType.endsWith("_LIST")){let i=t,s;try{return s=JSON.parse(i),i=s.join(", "),{strList:s,str:i,columnModelType:o==null?void 0:o.columnType}}catch(l){console.error("Could not parse multivalue string ",i," caught err ",l)}}return{str:t,columnModelType:o==null?void 0:o.columnType}},LA=(e,t,n)=>(t==null?void 0:t.findIndex(r=>r.name===e))||(n==null?void 0:n.findIndex(r=>r.name===e)),pa=e=>{const{synapseId:t,version:n}=e;return N("span",{children:[n,"\xA0\xA0",u("a",{target:St.NEW_WINDOW,rel:"noopener noreferrer",href:`${$e.PORTAL}#!Synapse:${t}.${n}`,children:"(Show Version History on Synapse)"})]})},dr=e=>{const{value:t,columnName:n,labelLink:r,selectColumns:o,columnModels:a,isHeader:i,className:s,rowData:l,rowId:d}=e;if(!t)return u(H,{children:t});const{strList:c,str:f,columnModelType:p}=Vt({columnName:n,value:t,selectColumns:o,columnModels:a});if(!f)return u(H,{children:f});let g=s;const h={};if(i&&(g=s==null?void 0:s.concat(" ","SRC-lightLink")),p===re.USERID_LIST&&c)return u(H,{children:c.map((v,b)=>N("span",{children:[u(Jt,{ownerId:v,size:pr,className:g}),b<c.length-1&&",\xA0\xA0"]},v))});if(p===re.USERID&&f)return u(Jt,{ownerId:f,size:pr,className:g});if(!r)return f.match(up)?u("a",{target:St.NEW_WINDOW,rel:"noopener noreferrer",href:`${$e.PORTAL}#!Synapse:${f}`,className:g,children:f}):u(H,{children:f});let m;if(r.isMarkdown)c?m=u(H,{children:c.map((v,b)=>N("span",{children:[u(Fe,{renderInline:!0,markdown:v},v),b<c.length-1&&",\xA0\xA0"]},v))}):m=u(Fe,{renderInline:!0,markdown:t});else{const v=c||f.split(",");let b;if("target"in r&&(b=r.target),"linkColumnName"in r){const C=LA(r.linkColumnName,o,a);if(C==null)console.warn(`Could not determine column index of ${r.linkColumnName}`),m=u(H,{children:t});else{const S=l[C];Ib(S)?m=u(H,{children:t}):m=u(H,{children:v.map((y,w)=>N(ge.Fragment,{children:[u("a",{href:S!=null?S:void 0,target:b!=null?b:St.NEW_WINDOW,rel:"noopener noreferrer",className:g,style:h,children:y},y),w<v.length-1&&u("span",{style:{marginRight:4},children:", "})]},y))})}}else m=u(H,{children:v.map((C,S)=>{const{baseURL:y,URLColumnName:w,wrapValueWithParens:_}=r,x=r.overrideValueWithRowID?`syn${d}`:C,I=_?`(${x})`:x,O=`/${y}?${w}=${I}`;return N(ge.Fragment,{children:[u("a",{href:O,className:g,style:h,target:b!=null?b:St.CURRENT_WINDOW,children:C},C),S<v.length-1&&u("span",{style:{marginRight:4},children:", "})]},C)})})}return r.tooltipText?u(Ke,{title:r.tooltipText,enterNextDelay:300,children:u("span",{children:m})}):m};function qA(e,t,n,r){if(e){if(!t||!n)throw Error("Must specify CardLink and data for linking to work");const{matchColumnName:o,URLColumnName:a,overrideLinkURLColumnName:i,overrideValueWithRowID:s}=e;if(i&&n[i]){const d=n[i],c=t[d];if(c)return c}const l=n[o];if(l===void 0)console.error(`Could not find match for data: ${t} with columnName ${o}`);else{const d=s?`syn${r}`:t[l];if(d)return`/${e.baseURL}?${a}=${d}`}}}function jf(e,t,n,r,o){var l,d;e=e.trim();let a=e,i=St.CURRENT_WINDOW;e.match(up)?a=`${$e.PORTAL}#!Synapse:${e}`:e.match($y)?(i=St.NEW_WINDOW,a=`https://dx.doi.org/${e}`):t?t&&(a=(l=qA(t,n,r,o))!=null?l:"",a.includes("/DetailsPage")&&(i=St.NEW_WINDOW)):i=St.NEW_WINDOW;const s=(d=t==null?void 0:t.target)!=null?d:i;return{href:a,target:s}}function ha(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:r,descriptionConfig:o}=e;let a=t;o!=null&&o.isMarkdown&&(a=u(Fe,{markdown:a}));const i=n||(o==null?void 0:o.showFullDescriptionByDefault);return u("div",{className:i?"":"SRC-hidden",children:u("span",{"data-search-handle":r,className:`SRC-font-size-base ${AA}`,children:a})})}function ma(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:r,descriptionConfig:o,toggleShowMore:a}=e;return o!=null&&o.showFullDescriptionByDefault?u(H,{}):N("div",{className:n?"SRC-hidden":"",children:[u("span",{"data-search-handle":r,className:`SRC-font-size-base ${RA} SRC-short-description`,children:fa(t).previewText}),t.length>=pc&&u("a",{style:{fontSize:"16px",cursor:"pointer",marginLeft:"5px"},className:"highlight-link",onClick:a,children:"...Show More"})]})}class ur extends ge.Component{constructor(t){super(t),this.getCutoff=n=>{let r="";const o=n.split(" ");let a=0;for(;r.length<pc&&a<o.length;)r+=`${o[a]} `,a+=1;return r=r.trim(),{previewText:r}},this.toggleShowMore=()=>{this.setState({hasClickedShowMore:!0})},this.renderTitle=({href:n,target:r,titleSearchHandle:o,title:a})=>n?u("a",{"data-search-handle":o,target:r,href:n,className:"highlight-link",children:a}):N("span",{"data-search-handle":o,children:[" ",a," "]}),this.state={hasClickedShowMore:!1}}render(){var ce;const{schema:t,data:n,rowId:r,genericCardSchema:o,secondaryLabelLimit:a,selectColumns:i,columnModels:s,iconOptions:l,useTypeColumnForIcon:d=!1,isHeader:c=!1,titleLinkConfig:f,ctaLinkConfig:p,labelLinkConfig:g,descriptionConfig:h,rgbIndex:m,columnIconOptions:v,queryContext:{entity:b},queryVisualizationContext:{getColumnDisplayName:C}}=this.props,S=o,{hasClickedShowMore:y}=this.state,{link:w="",type:_}=S,x=n[t[S.title]];let I=S.subTitle&&n[t[S.subTitle]];I=(S==null?void 0:S.subTitle)&&Vt({value:I,columnName:S==null?void 0:S.subTitle,selectColumns:i,columnModels:s}).str;const O=n[t[S.description||""]],A=n[t[S.icon||""]],k=n[t[S.dataTypeIconNames||""]],M=n[t[S.imageFileHandleColumnName||""]],B=s==null?void 0:s.find(ye=>S.link===ye.name),T=B==null?void 0:B.columnType,q=n[t[w]]||"",{href:R,target:D}=jf(q,f,n,t,r),$=[],{secondaryLabels:z=[]}=S,V=b&&!ip(b);for(let ye=0;ye<z.length;ye+=1){const be=z[ye];let _e=n[t[be]],Me;if(_e){if(V&&be==="currentVersion"){const Ve=n[t.id];_e=pa({synapseId:Ve,version:_e}),Me="Version"}else{const Ve=g==null?void 0:g.find(Ye=>Ye.matchColumnName===be);_e=u(dr,{value:_e,columnName:be,labelLink:Ve,isHeader:c,selectColumns:i,columnModels:s,rowData:n}),Me=C(be)}const Ue=[Me,_e,be];$.push(Ue)}}const G=kA(b,M||q,n[t.id]),P=$.length>0,L={marginTop:c?"0px":void 0,marginBottom:c?"0px":void 0,paddingBottom:P||M?void 0:"15px"},F=N(H,{children:[!d&&M&&u("div",{className:"SRC-imageThumbnail",style:{padding:S.thumbnailRequiresPadding?"21px":void 0},children:G&&u(ua,{fileHandleAssociation:G})}),!d&&!M&&u("div",{className:"SRC-cardThumbnail",children:u(Ha,{iconOptions:l,value:A,type:_})}),d&&u("div",{className:"SRC-cardThumbnail",children:u(pe,{icon:gv[n[t.type]]})})]});if(c)return u(ca,{descriptionConfig:h,title:x,subTitle:I,description:O,type:_,icon:F,values:$,href:R,target:D,isAlignToLeftNav:!0,secondaryLabelLimit:a,rgbIndex:m});const Y=C(S.title),K=C(S.subTitle),Q=C(S.description);let X,j;if(p){const ye=n[t[p.link]]||"",{href:be,target:_e}=jf(ye,void 0,n,t,r);X=be,j=_e}return N("div",{style:L,className:"SRC-portalCard",children:[N("div",{className:"SRC-portalCardMain",children:[F,N("div",{className:"SRC-cardContent",children:[u("div",{className:"SRC-type",children:_}),((ce=v==null?void 0:v.columns)==null?void 0:ce.dataType)&&(k==null?void 0:k.length)&&u("div",{style:{marginTop:"20px"},children:u(Ob,{iconConfigs:v.columns.dataType,iconNames:JSON.parse(k),useBackground:!0,useTheme:!0})}),u("div",{children:u("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"},children:!f&&T===re.FILEHANDLEID&&G?u(da,{fileHandleAssociation:G,showDownloadIcon:_!==Py,displayValue:x}):this.renderTitle({href:R,target:D,titleSearchHandle:Y,title:x})})}),I&&u("div",{"data-search-handle":K,className:"SRC-author",children:I}),O&&u(ma,{description:O,hasClickedShowMore:y,descriptionSubTitle:Q,descriptionConfig:h,toggleShowMore:this.toggleShowMore}),O&&u(ha,{description:O,hasClickedShowMore:y,descriptionSubTitle:Q,descriptionConfig:h}),p&&X&&j&&u("div",{className:"SRC-portalCardCTALink bootstrap-4-backport",children:u("a",{target:j,rel:"noopener noreferrer",href:X,children:p.text})})]})]}),P&&u(ql,{isHeader:!1,secondaryLabelLimit:a,values:$,columnIconOptions:v,className:`${M?"hasImage":"hasIcon"}`})]})}}ur.contextType=_r;try{ha.displayName="LongDescription",ha.__docgenInfo={description:"",displayName:"LongDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#LongDescription"]={docgenInfo:ha.__docgenInfo,name:"LongDescription",path:"src/lib/containers/GenericCard.tsx#LongDescription"})}catch{}try{ma.displayName="ShortDescription",ma.__docgenInfo={description:"",displayName:"ShortDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},toggleShowMore:{defaultValue:null,description:"",name:"toggleShowMore",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#ShortDescription"]={docgenInfo:ma.__docgenInfo,name:"ShortDescription",path:"src/lib/containers/GenericCard.tsx#ShortDescription"})}catch{}try{fa.displayName="getCutoff",fa.__docgenInfo={description:"",displayName:"getCutoff",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getCutoff"]={docgenInfo:fa.__docgenInfo,name:"getCutoff",path:"src/lib/containers/GenericCard.tsx#getCutoff"})}catch{}try{Vt.displayName="getValueOrMultiValue",Vt.__docgenInfo={description:"",displayName:"getValueOrMultiValue",props:{columnName:{defaultValue:null,description:"",name:"columnName",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getValueOrMultiValue"]={docgenInfo:Vt.__docgenInfo,name:"getValueOrMultiValue",path:"src/lib/containers/GenericCard.tsx#getValueOrMultiValue"})}catch{}try{pa.displayName="VersionLabel",pa.__docgenInfo={description:"",displayName:"VersionLabel",props:{synapseId:{defaultValue:null,description:"",name:"synapseId",required:!0,type:{name:"string"}},version:{defaultValue:null,description:"",name:"version",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#VersionLabel"]={docgenInfo:pa.__docgenInfo,name:"VersionLabel",path:"src/lib/containers/GenericCard.tsx#VersionLabel"})}catch{}try{dr.displayName="SynapseCardLabel",dr.__docgenInfo={description:"",displayName:"SynapseCardLabel",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},labelLink:{defaultValue:null,description:"",name:"labelLink",required:!0,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink | undefined"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!0,type:{name:"SelectColumn[] | undefined"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!0,type:{name:"ColumnModel[] | undefined"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#SynapseCardLabel"]={docgenInfo:dr.__docgenInfo,name:"SynapseCardLabel",path:"src/lib/containers/GenericCard.tsx#SynapseCardLabel"})}catch{}try{ur.displayName="GenericCard",ur.__docgenInfo={description:"Renders a card from a table query",displayName:"GenericCard",props:{selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},useTypeColumnForIcon:{defaultValue:null,description:"",name:"useTypeColumnForIcon",required:!1,type:{name:"boolean"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"Record<string, number>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"string[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}},tableId:{defaultValue:null,description:"",name:"tableId",required:!0,type:{name:"string | undefined"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#GenericCard"]={docgenInfo:ur.__docgenInfo,name:"GenericCard",path:"src/lib/containers/GenericCard.tsx#GenericCard"})}catch{}class Zt extends E.exports.Component{constructor(t){super(t),this.handleLinkClick=n=>r=>{r.preventDefault(),window.open(`${$e.PORTAL}#!Synapse:${n}`,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:t,schema:n,selectColumns:r,columnModels:o}=this.props,a=t[n.datasetName],i=t[n.summary],s=Vt({columnName:"tumorType",value:t[n.tumorType],selectColumns:r,columnModels:o}).str,l=Vt({columnName:"diseaseFocus",value:t[n.diseaseFocus],selectColumns:r,columnModels:o}).str,d=t[n.id],c=t[n.fundingAgency],f=t[n.fileCount],p=Zf(t[n.fileSize]),g=[["FUNDER",Vt({columnName:"fundingAgency",value:c,selectColumns:r,columnModels:o}).str],["SIZE",p],["FILES",f]];return N("div",{className:"SRC-portalCard SRC-typeDataset  ",children:[N("div",{className:"SRC-cardThumbnail",children:[u(Ha,{type:dp}),u("div",{children:p})]}),N("div",{className:"SRC-cardContent SRC-dataset",children:[u("div",{className:"SRC-type",children:"Dataset "}),u("div",{children:u("h3",{children:u("a",{target:"_self",href:`${$e.PORTAL}#!Synapse:${d}`,children:a})})}),N("div",{className:"SRC-description-dataset",children:[u("p",{className:"SRC-description-text",children:i}),u("div",{className:"SRC-cardAction bootstrap-4-backport",children:u(we,{className:"pill SRC-datasetButton",onClick:this.handleLinkClick(d),variant:"secondary",children:"Download Dataset"})})]}),u("div",{className:"SRC-cardAnnotations",children:u(lv,{chips:[s,l]})})]}),u(ql,{isHeader:!1,secondaryLabelLimit:this.props.secondaryLabelLimit,values:g})]})}}try{Zt.displayName="Dataset",Zt.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/Dataset.tsx#Dataset"]={docgenInfo:Zt.__docgenInfo,name:"Dataset",path:"src/lib/containers/row_renderers/Dataset.tsx#Dataset"})}catch{}class ga extends E.exports.Component{constructor(t){super(t),this.handleLinkClick=n=>r=>{r.preventDefault(),window.open(n,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:t,schema:n}=this.props,r=t[n.organizationName],o=t[n.organizationPath],a=t[n.summary],i=t[n.website],s=t[n.logo];let l=i.replace("https://","");l=l.replace("http://",""),l.charAt(l.length-1)==="/"&&(l=l.substring(0,l.length-1));const d=window.location.hash.substring(1)===o,c={};let f;return d?c.paddingBottom="42px":f=u("div",{className:"SRC-marginAuto SRC-cardAction bootstrap-4-backport",children:u(we,{className:"pill-xl",href:o,variant:"secondary",children:"View Funded Research"})}),N("div",{className:"SRC-portalCard SRC-typeFunder ",style:c,children:[N("div",{className:"SRC-cardContent",children:[u("div",{className:"SRC-type",children:"Organization"}),s&&u("div",{className:"SRC-cardThumbnail",children:u("img",{alt:"funder logo",className:"SRC-logo",src:s})}),u("div",{children:N("h3",{children:[d&&r,!d&&u("a",{href:o,children:r})]})}),u("div",{className:"SRC-website",children:u("a",{rel:"noopener noreferrer",target:"_blank",href:i,children:l})}),u("div",{className:"SRC-description",children:a})]}),f]})}}try{ga.displayName="Funder",ga.__docgenInfo={description:"",displayName:"Funder",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/Funder.tsx#Funder"]={docgenInfo:ga.__docgenInfo,name:"Funder",path:"src/lib/containers/row_renderers/Funder.tsx#Funder"})}catch{}try{Zt.displayName="Dataset",Zt.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/index.tsx#Dataset"]={docgenInfo:Zt.__docgenInfo,name:"Dataset",path:"src/lib/containers/row_renderers/index.tsx#Dataset"})}catch{}try{rowrenderers.displayName="rowrenderers",rowrenderers.__docgenInfo={description:"",displayName:"rowrenderers",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/index.tsx#rowrenderers"]={docgenInfo:rowrenderers.__docgenInfo,name:"rowrenderers",path:"src/lib/containers/row_renderers/index.tsx#rowrenderers"})}catch{}const pn=(e,t)=>e>0?`${e} ${t}${e>1?"s":""} `:"",PA=(e,t)=>{const n=Tr.duration(e,t),r=n.years(),o=n.months()%12,a=n.days()%31,i=n.hours()%24,s=n.minutes()%60,l=n.seconds()%60;return`${pn(r,"year")}${pn(o,"month")}${pn(a,"day")}${pn(i,"hour")}${pn(s,"minute")}${pn(l,"second")}`.trim()},ya=({data:e,schema:t})=>{const n=e[t.submitterName],r=e[t.submitterUserId],o=e[t.time],a=e[t.timeUnits],i=e[t.text],s=e[t.tag];return N("div",{className:"SRC-portalCard ObservationCard",children:[N("div",{className:"ObservationCard__submitter",children:[!r&&u("div",{children:n}),r&&u(Jt,{size:"SMALL USER CARD",ownerId:r})]}),o&&N("div",{className:"ObservationCard__time",children:[u(pe,{icon:"time"}),u("span",{children:PA(o,a)})]}),u("div",{className:"ObservationCard__text",children:u(cv,{summary:i})}),u("div",{className:"ObservationCard__tags",children:s&&u("span",{className:"SRC-tag",children:s})})]})},va=()=>N("div",{className:"SRC-portalCard ObservationCard",children:[u("div",{className:"ObservationCard__submitter",children:u("span",{children:u(Ks,{width:"100px"})})}),u("div",{className:"ObservationCard__time",children:u(pe,{icon:"time"})}),u("div",{className:"ObservationCard__text",children:u(Vl,{numCols:1,numRows:4})}),u("div",{className:"ObservationCard__tags",children:u(Ks,{width:"80px"})})]});try{ya.displayName="ObservationCard",ya.__docgenInfo={description:`Specialized Observation Card, initially implemented for the NF portal.
Expects the following columns: submitterName, submitterUserId, time, timeUnits, text, and tag.`,displayName:"ObservationCard",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"ObservationCardSchema"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"Record<string, string>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/ObservationCard.tsx#ObservationCard"]={docgenInfo:ya.__docgenInfo,name:"ObservationCard",path:"src/lib/containers/row_renderers/ObservationCard.tsx#ObservationCard"})}catch{}try{va.displayName="LoadingObservationCard",va.__docgenInfo={description:"",displayName:"LoadingObservationCard",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/ObservationCard.tsx#LoadingObservationCard"]={docgenInfo:va.__docgenInfo,name:"LoadingObservationCard",path:"src/lib/containers/row_renderers/ObservationCard.tsx#LoadingObservationCard"})}catch{}function DA(e){const{propsToPass:t,type:n}=e;switch(n){case dp:return u(Zt,{...t});case My:return u(ga,{...t});case Dy:return u(ur,{...t});case Gs:return u(ya,{...t});default:return u("div",{})}}const fr=e=>{const{isHeader:t=!1,unitDescription:n,type:r,isLoading:o,secondaryLabelLimit:a=3,title:i,...s}=e,l=Qy(),{NoContentPlaceholder:d}=Ct(),{data:c,appendNextPageToResults:f,hasNextPage:p}=l,g=Ct(),h=c!=null&&c.queryResult.queryResults.tableId?[c==null?void 0:c.queryResult.queryResults.tableId]:[],m=sp({ids:h,type:"ENTITY_HEADER"});if(c){if(c&&c.queryResult.queryResults.rows.length===0)return u(d,{})}else return N("div",{children:[o&&r===Gs&&u(va,{}),o&&r!==Gs&&gp]});const v={};c.queryResult.queryResults.headers.forEach((S,y)=>{v[S.name]=y});const b=p&&u("div",{className:"SRC-viewMore bootstrap-4-backport",children:u(we,{variant:"secondary",className:"pill-xl",onClick:()=>{f()},children:"View More"})});let C;if(r===Ac){const S=c.queryResult.queryResults.headers.findIndex(w=>w.columnType===re.USERID);if(S===-1)throw Error("Type MEDIUM_USER_CARD specified but no columnType USERID found");const y=c.queryResult.queryResults.rows.map(w=>w.values.filter(_=>_!==null)[S]);C=u(Nb,{data:c,list:y,size:Ac})}else{const S=c.queryResult.queryResults.rows;C=S.length?S.map((y,w)=>{var I;const x={key:JSON.stringify(y.values),type:r,schema:v,isHeader:t,secondaryLabelLimit:a,rowId:y.rowId,data:y.values,selectColumns:c.selectColumns,columnModels:c.columnModels,tableEntityConcreteType:m[0]&&m[0].type,tableId:c==null?void 0:c.queryResult.queryResults.tableId,queryContext:l,queryVisualizationContext:g,...s};return u(DA,{propsToPass:x,type:r},(I=y.rowId)!=null?I:w)}):u(H,{})}return N("div",{role:"list",children:[i&&u("h2",{className:"SRC-card-overview-title",children:i}),!i&&n&&u(hp,{frontText:"Displaying"}),C,b]})};try{fr.displayName="CardContainer",fr.__docgenInfo={description:"",displayName:"CardContainer",props:{isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/CardContainer.tsx#CardContainer"]={docgenInfo:fr.__docgenInfo,name:"CardContainer",path:"src/lib/containers/CardContainer.tsx#CardContainer"})}catch{}const ba=({sortConfig:e})=>{const{defaultColumn:t,defaultDirection:n,sortableColumns:r}=e,o=Tt(),{getLastQueryRequest:a,executeQueryRequest:i}=o,{getColumnDisplayName:s}=Ct(),[l,d]=E.exports.useState(t),[c,f]=E.exports.useState(n),p=r.map(h=>({value:h,label:s(h)})),g=h=>{const m=a();let v="ASC";h===l&&(v=c==="ASC"?"DESC":"ASC");const b=h?[{column:h,direction:v}]:void 0;m.query.sort=b,i(m),d(h),f(v)};return N("div",{className:"QuerySortSelector bootstrap-4-backport",children:[u(_t,{variant:"label",className:"sort-by-label SRC-inlineBlock",children:"Sort by"}),u(rv,{className:"react-select-container SRC-inlineBlock",value:iv(l,p),options:p,onChange:h=>g(h==null?void 0:h.value),components:{Control:sv},styles:{control:h=>({...h,marginLeft:"15px"})}})]})};try{ba.displayName="QuerySortSelector",ba.__docgenInfo={description:"",displayName:"QuerySortSelector",props:{sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!0,type:{name:"SortConfiguration"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/QuerySortSelector.tsx#QuerySortSelector"]={docgenInfo:ba.__docgenInfo,name:"QuerySortSelector",path:"src/lib/containers/QuerySortSelector.tsx#QuerySortSelector"})}catch{}var St=(e=>(e.CURRENT_WINDOW="_self",e.NEW_WINDOW="_blank",e.PARENT_FRAME="_parent",e.FULL_WINDOW_BODY="_top",e))(St||{});const Sa=e=>{var s;const t=kn(e.sql),n=_l(e.searchParams,e.sqlOperator),{sortConfig:r,columnAliases:o}=e,a=r?[{column:r.defaultColumn,direction:r.defaultDirection}]:void 0,i={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:t,query:{sql:e.sql,limit:e.limit,sort:a,additionalFilters:n},partMask:Er|xr|Tl|cp|Ol|Il|El|Nl};return u(rr,{...e,initQueryRequest:i,children:N(Rl,{rgbIndex:e.rgbIndex,unitDescription:e.unitDescription,columnAliases:o,noContentPlaceholderType:(s=e.noContentPlaceholderType)!=null?s:wa.STATIC,children:[r&&u(ba,{sortConfig:r}),u(fr,{...e}),u(Al,{children:l=>u(op,{error:l==null?void 0:l.error})})]})})},Gk=Sa;try{Sa.displayName="CardContainerLogic",Sa.__docgenInfo={description:"Class wraps around CardContainer and serves as a standalone logic container for rendering cards.",displayName:"CardContainerLogic",props:{limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"Record<string, string>"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!1,type:{name:"SortConfiguration"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/CardContainerLogic.tsx#CardContainerLogic"]={docgenInfo:Sa.__docgenInfo,name:"CardContainerLogic",path:"src/lib/containers/CardContainerLogic.tsx#CardContainerLogic"})}catch{}export{lS as A,Gk as C,sr as D,uS as E,da as F,cS as G,Dt as H,Qo as I,Ab as L,Co as M,pS as P,xA as Q,dS as S,Fe as a,Rb as b,Wk as c,fS as d,ko as e,qe as f,Uo as g,yS as h,jo as i,ua as j,jf as k,kA as l,hR as m,OA as n,tT as p,Dp as u};
