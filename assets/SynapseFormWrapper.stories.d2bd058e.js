import{b as At,J as zn,H as Ot,c as Gt,g as to}from"./iframe.66e5fae0.js";import{u as Jt,e as Gn}from"./url.456768c6.js";import{bw as no,aR as Kt,X as io,bX as oo,cH as ao,cU as so,cV as lo,c9 as uo,cW as co,cX as fo,aI as ho,cY as po}from"./index.f541c7c2.js";import{F as mo}from"./core.esm.1dc6666a.js";import{j as v,a as N,F as j,b as go}from"./jsx-runtime.00d70968.js";import{I as $r}from"./IconSvg.45071707.js";import{c as Jn}from"./cloneDeep.2fa91d09.js";import{f as yo,h as vo,i as Xt,a as So,l as P,b as bo}from"./lodash.default.51507ad1.js";import{g as Le}from"./_baseMap.4f86e364.js";import{e as Qt}from"./ToastMessage.0ffd35ff.js";import{W as Eo}from"./WarningModal.ca99a4a6.js";import{P as wo}from"./react-router.bf3538e4.js";import{A as Zt}from"./FullWidthAlert.a73af62a.js";import{B as _o}from"./Button.fda23eee.js";import"./withStyles.d6b2de44.js";import"./objectWithoutProperties.a0dea5ce.js";import"./objectWithoutPropertiesLoose.5e7699d1.js";import"./toConsumableArray.8f496188.js";import"./createClass.67a84016.js";import"./assert.a0977670.js";import"./getEndpoint.bb7ded34.js";import"./SvgIcon.5d5878ed.js";import"./index.57d09176.js";import"./index.35ce73ec.js";import"./isEmpty.7d11a669.js";import"./ajv.f1395557.js";import"./sortBy.0458575f.js";import"./_copyArray.e3aa7c43.js";import"./union.bedb8889.js";import"./uniq.78d7e956.js";import"./toInteger.80c96920.js";import"./_cacheHas.b6c6ac03.js";import"./_baseDifference.63ddf0e9.js";import"./_setToArray.a82100c8.js";import"./Tooltip.02f85a09.js";import"./slicedToArray.e9a7fa03.js";import"./makeStyles.2422b359.js";import"./InfoOutlined.303a7ed9.js";import"./toLower.be96cbf5.js";import"./upperFirst.015e3e22.js";import"./times.396ab5b7.js";import"./_baseIsEqual.04a4ca40.js";import"./isEqual.3567902e.js";import"./differenceWith.81a8d99f.js";import"./sortBy.88e96fbf.js";import"./without.3a5f3538.js";import"./groupBy.168afa6d.js";import"./Modal.8f4b0da5.js";import"./useWaitForDOMRef.d07b3a07.js";import"./useWillUnmount.4a16e5cd.js";import"./Typography.9748340b.js";var fe={exports:{}};const xo=!1,Ao=/\r?\n/,Oo=/\bono[ @]/;function Ro(e){return Boolean(e&&e.configurable&&typeof e.get=="function")}function Co(e){return Boolean(!e||e.writable||typeof e.set=="function")}function Kn(e,r){let t=Xn(e.stack),i=r?r.stack:void 0;return t&&i?t+`

`+i:t||i}function To(e,r,t){t?Object.defineProperty(r,"stack",{get:()=>{let i=e.get.apply(r);return Kn({stack:i},t)},enumerable:!1,configurable:!0}):Fo(r,e)}function Xn(e){if(e){let r=e.split(Ao),t;for(let i=0;i<r.length;i++){let n=r[i];if(Oo.test(n))t===void 0&&(t=i);else if(t!==void 0){r.splice(t,i-t);break}}if(r.length>0)return r.join(`
`)}return e}function Fo(e,r){Object.defineProperty(e,"stack",{get:()=>Xn(r.get.apply(e)),enumerable:!1,configurable:!0})}const Po=["function","symbol","undefined"],No=["constructor","prototype","__proto__"],ko=Object.getPrototypeOf({});function Qn(){let e={},r=this;for(let t of Zn(r))if(typeof t=="string"){let i=r[t],n=typeof i;Po.includes(n)||(e[t]=i)}return e}function Zn(e,r=[]){let t=[];for(;e&&e!==ko;)t=t.concat(Object.getOwnPropertyNames(e),Object.getOwnPropertySymbols(e)),e=Object.getPrototypeOf(e);let i=new Set(t);for(let n of r.concat(No))i.delete(n);return i}const $o=["name","message","stack"];function wr(e,r,t){let i=e;return Io(i,r),r&&typeof r=="object"&&Do(i,r),i.toJSON=Qn,t&&typeof t=="object"&&Object.assign(i,t),i}function Io(e,r){let t=Object.getOwnPropertyDescriptor(e,"stack");Ro(t)?To(t,e,r):Co(t)&&(e.stack=Kn(e,r))}function Do(e,r){let t=Zn(r,$o),i=e,n=r;for(let o of t)if(i[o]===void 0)try{i[o]=n[o]}catch{}}function Mo(e){return e=e||{},{concatMessages:e.concatMessages===void 0?!0:Boolean(e.concatMessages),format:e.format===void 0?xo:typeof e.format=="function"?e.format:!1}}function Lo(e,r){let t,i,n,o="";return typeof e[0]=="string"?n=e:typeof e[1]=="string"?(e[0]instanceof Error?t=e[0]:i=e[0],n=e.slice(1)):(t=e[0],i=e[1],n=e.slice(2)),n.length>0&&(r.format?o=r.format.apply(void 0,n):o=n.join(" ")),r.concatMessages&&t&&t.message&&(o+=(o?` 
`:"")+t.message),{originalError:t,props:i,message:o}}const _e=Rt;function Rt(e,r){r=Mo(r);function t(...i){let{originalError:n,props:o,message:a}=Lo(i,r),s=new e(a);return wr(s,n,o)}return t[Symbol.species]=e,t}Rt.toJSON=function(r){return Qn.call(r)};Rt.extend=function(r,t,i){return i||t instanceof Error?wr(r,t,i):t?wr(r,void 0,t):wr(r)};const en=de;de.error=new _e(Error);de.eval=new _e(EvalError);de.range=new _e(RangeError);de.reference=new _e(ReferenceError);de.syntax=new _e(SyntaxError);de.type=new _e(TypeError);de.uri=new _e(URIError);const Uo=de;function de(...e){let r=e[0];if(typeof r=="object"&&typeof r.name=="string"){for(let t of Object.values(Uo))if(typeof t=="function"&&t.name==="ono"){let i=t[Symbol.species];if(i&&i!==Error&&(r instanceof i||r.name===i.name))return t.apply(void 0,e)}}return de.error.apply(void 0,e)}var Bo={},jo=function(r){return r&&typeof r=="object"&&typeof r.copy=="function"&&typeof r.fill=="function"&&typeof r.readUInt8=="function"},dt={exports:{}};typeof Object.create=="function"?dt.exports=function(r,t){r.super_=t,r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}})}:dt.exports=function(r,t){r.super_=t;var i=function(){};i.prototype=t.prototype,r.prototype=new i,r.prototype.constructor=r};(function(e){var r=Object.getOwnPropertyDescriptors||function(g){for(var b=Object.keys(g),O={},T=0;T<b.length;T++)O[b[T]]=Object.getOwnPropertyDescriptor(g,b[T]);return O},t=/%[sdj%]/g;e.format=function(m){if(!L(m)){for(var g=[],b=0;b<arguments.length;b++)g.push(o(arguments[b]));return g.join(" ")}for(var b=1,O=arguments,T=O.length,F=String(m).replace(t,function(C){if(C==="%%")return"%";if(b>=T)return C;switch(C){case"%s":return String(O[b++]);case"%d":return Number(O[b++]);case"%j":try{return JSON.stringify(O[b++])}catch{return"[Circular]"}default:return C}}),R=O[b];b<T;R=O[++b])E(R)||!Y(R)?F+=" "+R:F+=" "+o(R);return F},e.deprecate=function(m,g){if(typeof process<"u"&&process.noDeprecation===!0)return m;if(typeof process>"u")return function(){return e.deprecate(m,g).apply(this,arguments)};var b=!1;function O(){if(!b){if(process.throwDeprecation)throw new Error(g);process.traceDeprecation?console.trace(g):console.error(g),b=!0}return m.apply(this,arguments)}return O};var i={},n;e.debuglog=function(m){if(I(n)&&(n=process.env.NODE_DEBUG||""),m=m.toUpperCase(),!i[m])if(new RegExp("\\b"+m+"\\b","i").test(n)){var g=process.pid;i[m]=function(){var b=e.format.apply(e,arguments);console.error("%s %d: %s",m,g,b)}}else i[m]=function(){};return i[m]};function o(m,g){var b={seen:[],stylize:s};return arguments.length>=3&&(b.depth=arguments[2]),arguments.length>=4&&(b.colors=arguments[3]),y(g)?b.showHidden=g:g&&e._extend(b,g),I(b.showHidden)&&(b.showHidden=!1),I(b.depth)&&(b.depth=2),I(b.colors)&&(b.colors=!1),I(b.customInspect)&&(b.customInspect=!0),b.colors&&(b.stylize=a),u(b,m,b.depth)}e.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(m,g){var b=o.styles[g];return b?"\x1B["+o.colors[b][0]+"m"+m+"\x1B["+o.colors[b][1]+"m":m}function s(m,g){return m}function l(m){var g={};return m.forEach(function(b,O){g[b]=!0}),g}function u(m,g,b){if(m.customInspect&&g&&ge(g.inspect)&&g.inspect!==e.inspect&&!(g.constructor&&g.constructor.prototype===g)){var O=g.inspect(b,m);return L(O)||(O=u(m,O,b)),O}var T=f(m,g);if(T)return T;var F=Object.keys(g),R=l(F);if(m.showHidden&&(F=Object.getOwnPropertyNames(g)),W(g)&&(F.indexOf("message")>=0||F.indexOf("description")>=0))return c(g);if(F.length===0){if(ge(g)){var C=g.name?": "+g.name:"";return m.stylize("[Function"+C+"]","special")}if(A(g))return m.stylize(RegExp.prototype.toString.call(g),"regexp");if(ae(g))return m.stylize(Date.prototype.toString.call(g),"date");if(W(g))return c(g)}var $="",X=!1,pr=["{","}"];if(S(g)&&(X=!0,pr=["[","]"]),ge(g)){var eo=g.name?": "+g.name:"";$=" [Function"+eo+"]"}if(A(g)&&($=" "+RegExp.prototype.toString.call(g)),ae(g)&&($=" "+Date.prototype.toUTCString.call(g)),W(g)&&($=" "+c(g)),F.length===0&&(!X||g.length==0))return pr[0]+$+pr[1];if(b<0)return A(g)?m.stylize(RegExp.prototype.toString.call(g),"regexp"):m.stylize("[Object]","special");m.seen.push(g);var Zr;return X?Zr=d(m,g,b,R,F):Zr=F.map(function(ro){return h(m,g,b,R,ro,X)}),m.seen.pop(),p(Zr,$,pr)}function f(m,g){if(I(g))return m.stylize("undefined","undefined");if(L(g)){var b="'"+JSON.stringify(g).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return m.stylize(b,"string")}if(M(g))return m.stylize(""+g,"number");if(y(g))return m.stylize(""+g,"boolean");if(E(g))return m.stylize("null","null")}function c(m){return"["+Error.prototype.toString.call(m)+"]"}function d(m,g,b,O,T){for(var F=[],R=0,C=g.length;R<C;++R)ve(g,String(R))?F.push(h(m,g,b,O,String(R),!0)):F.push("");return T.forEach(function($){$.match(/^\d+$/)||F.push(h(m,g,b,O,$,!0))}),F}function h(m,g,b,O,T,F){var R,C,$;if($=Object.getOwnPropertyDescriptor(g,T)||{value:g[T]},$.get?$.set?C=m.stylize("[Getter/Setter]","special"):C=m.stylize("[Getter]","special"):$.set&&(C=m.stylize("[Setter]","special")),ve(O,T)||(R="["+T+"]"),C||(m.seen.indexOf($.value)<0?(E(b)?C=u(m,$.value,null):C=u(m,$.value,b-1),C.indexOf(`
`)>-1&&(F?C=C.split(`
`).map(function(X){return"  "+X}).join(`
`).substr(2):C=`
`+C.split(`
`).map(function(X){return"   "+X}).join(`
`))):C=m.stylize("[Circular]","special")),I(R)){if(F&&T.match(/^\d+$/))return C;R=JSON.stringify(""+T),R.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(R=R.substr(1,R.length-2),R=m.stylize(R,"name")):(R=R.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),R=m.stylize(R,"string"))}return R+": "+C}function p(m,g,b){var O=m.reduce(function(T,F){return F.indexOf(`
`)>=0,T+F.replace(/\u001b\[\d\d?m/g,"").length+1},0);return O>60?b[0]+(g===""?"":g+`
 `)+" "+m.join(`,
  `)+" "+b[1]:b[0]+g+" "+m.join(", ")+" "+b[1]}function S(m){return Array.isArray(m)}e.isArray=S;function y(m){return typeof m=="boolean"}e.isBoolean=y;function E(m){return m===null}e.isNull=E;function x(m){return m==null}e.isNullOrUndefined=x;function M(m){return typeof m=="number"}e.isNumber=M;function L(m){return typeof m=="string"}e.isString=L;function _(m){return typeof m=="symbol"}e.isSymbol=_;function I(m){return m===void 0}e.isUndefined=I;function A(m){return Y(m)&&ye(m)==="[object RegExp]"}e.isRegExp=A;function Y(m){return typeof m=="object"&&m!==null}e.isObject=Y;function ae(m){return Y(m)&&ye(m)==="[object Date]"}e.isDate=ae;function W(m){return Y(m)&&(ye(m)==="[object Error]"||m instanceof Error)}e.isError=W;function ge(m){return typeof m=="function"}e.isFunction=ge;function dr(m){return m===null||typeof m=="boolean"||typeof m=="number"||typeof m=="string"||typeof m=="symbol"||typeof m>"u"}e.isPrimitive=dr,e.isBuffer=jo;function ye(m){return Object.prototype.toString.call(m)}function se(m){return m<10?"0"+m.toString(10):m.toString(10)}var hr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function $e(){var m=new Date,g=[se(m.getHours()),se(m.getMinutes()),se(m.getSeconds())].join(":");return[m.getDate(),hr[m.getMonth()],g].join(" ")}e.log=function(){console.log("%s - %s",$e(),e.format.apply(e,arguments))},e.inherits=dt.exports,e._extend=function(m,g){if(!g||!Y(g))return m;for(var b=Object.keys(g),O=b.length;O--;)m[b[O]]=g[b[O]];return m};function ve(m,g){return Object.prototype.hasOwnProperty.call(m,g)}var J=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;e.promisify=function(g){if(typeof g!="function")throw new TypeError('The "original" argument must be of type Function');if(J&&g[J]){var b=g[J];if(typeof b!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(b,J,{value:b,enumerable:!1,writable:!1,configurable:!0}),b}function b(){for(var O,T,F=new Promise(function($,X){O=$,T=X}),R=[],C=0;C<arguments.length;C++)R.push(arguments[C]);R.push(function($,X){$?T($):O(X)});try{g.apply(this,R)}catch($){T($)}return F}return Object.setPrototypeOf(b,Object.getPrototypeOf(g)),J&&Object.defineProperty(b,J,{value:b,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(b,r(g))},e.promisify.custom=J;function Oe(m,g){if(!m){var b=new Error("Promise was rejected with a falsy value");b.reason=m,m=b}return g(m)}function Qr(m){if(typeof m!="function")throw new TypeError('The "original" argument must be of type Function');function g(){for(var b=[],O=0;O<arguments.length;O++)b.push(arguments[O]);var T=b.pop();if(typeof T!="function")throw new TypeError("The last argument must be of type Function");var F=this,R=function(){return T.apply(F,arguments)};m.apply(this,b).then(function(C){process.nextTick(R,null,C)},function(C){process.nextTick(Oe,C,R)})}return Object.setPrototypeOf(g,Object.getPrototypeOf(m)),Object.defineProperties(g,r(m)),g}e.callbackify=Qr})(Bo);typeof module=="object"&&typeof module.exports=="object"&&(module.exports=Object.assign(module.exports.default,module.exports));const Ho=Object.freeze(Object.defineProperty({__proto__:null,ono:en,default:en,Ono:_e},Symbol.toStringTag,{value:"Module"})),Ne=At(Ho);var K={exports:{}};(function(e,r){let t=/^win/.test(process.platform),i=/\//g,n=/^(\w{2,}):\/\//i,o=e.exports,a=/~1/g,s=/~0/g,l=[/\?/g,"%3F",/\#/g,"%23"],u=[/\%23/g,"#",/\%24/g,"$",/\%26/g,"&",/\%2C/g,",",/\%40/g,"@"];r.parse=Jt.parse,r.resolve=Jt.resolve,r.cwd=function(){return location.href},r.getProtocol=function(c){let d=n.exec(c);if(d)return d[1].toLowerCase()},r.getExtension=function(c){let d=c.lastIndexOf(".");return d>=0?o.stripQuery(c.substr(d).toLowerCase()):""},r.stripQuery=function(c){let d=c.indexOf("?");return d>=0&&(c=c.substr(0,d)),c},r.getHash=function(c){let d=c.indexOf("#");return d>=0?c.substr(d):"#"},r.stripHash=function(c){let d=c.indexOf("#");return d>=0&&(c=c.substr(0,d)),c},r.isHttp=function(c){let d=o.getProtocol(c);return d==="http"||d==="https"?!0:d===void 0},r.isFileSystemPath=function(c){return!1},r.fromFileSystemPath=function(c){t&&(c=c.replace(/\\/g,"/")),c=encodeURI(c);for(let d=0;d<l.length;d+=2)c=c.replace(l[d],l[d+1]);return c},r.toFileSystemPath=function(c,d){c=decodeURI(c);for(let p=0;p<u.length;p+=2)c=c.replace(u[p],u[p+1]);let h=c.substr(0,7).toLowerCase()==="file://";return h&&(c=c[7]==="/"?c.substr(8):c.substr(7),t&&c[1]==="/"&&(c=c[0]+":"+c.substr(1)),d?c="file:///"+c:(h=!1,c=t?c:"/"+c)),t&&!h&&(c=c.replace(i,"\\"),c.substr(1,2)===":\\"&&(c=c[0].toUpperCase()+c.substr(1))),c},r.safePointerToPath=function(c){return c.length<=1||c[0]!=="#"||c[1]!=="/"?[]:c.slice(2).split("/").map(d=>decodeURIComponent(d).replace(a,"/").replace(s,"~"))}})(K,K.exports);var B={};const{Ono:ei}=Ne,{stripHash:ri,toFileSystemPath:Vo}=K.exports,xe=B.JSONParserError=class extends Error{constructor(r,t){super(),this.code="EUNKNOWN",this.message=r,this.source=t,this.path=null,ei.extend(this)}get footprint(){return`${this.path}+${this.source}+${this.code}+${this.message}`}};Ae(xe);const ti=B.JSONParserErrorGroup=class ni extends Error{constructor(r){super(),this.files=r,this.message=`${this.errors.length} error${this.errors.length>1?"s":""} occurred while reading '${Vo(r.$refs._root$Ref.path)}'`,ei.extend(this)}static getParserErrors(r){const t=[];for(const i of Object.values(r.$refs._$refs))i.errors&&t.push(...i.errors);return t}get errors(){return ni.getParserErrors(this.files)}};Ae(ti);const Yo=B.ParserError=class extends xe{constructor(r,t){super(`Error parsing ${t}: ${r}`,t),this.code="EPARSER"}};Ae(Yo);const qo=B.UnmatchedParserError=class extends xe{constructor(r){super(`Could not find parser for "${r}"`,r),this.code="EUNMATCHEDPARSER"}};Ae(qo);const Wo=B.ResolverError=class extends xe{constructor(r,t){super(r.message||`Error reading file "${t}"`,t),this.code="ERESOLVER","code"in r&&(this.ioErrorCode=String(r.code))}};Ae(Wo);const zo=B.UnmatchedResolverError=class extends xe{constructor(r){super(`Could not find resolver for "${r}"`,r),this.code="EUNMATCHEDRESOLVER"}};Ae(zo);const Go=B.MissingPointerError=class extends xe{constructor(r,t){super(`Token "${r}" does not exist.`,ri(t)),this.code="EMISSINGPOINTER"}};Ae(Go);const Jo=B.InvalidPointerError=class extends xe{constructor(r,t){super(`Invalid $ref pointer "${r}". Pointers must begin with "#/"`,ri(t)),this.code="EINVALIDPOINTER"}};Ae(Jo);function Ae(e){Object.defineProperty(e.prototype,"name",{value:e.name,enumerable:!0})}B.isHandledError=function(e){return e instanceof xe||e instanceof ti};B.normalizeError=function(e){return e.path===null&&(e.path=[]),e};var et,rn;function Hr(){if(rn)return et;rn=1,et=f;const e=nr(),r=K.exports,{JSONParserError:t,InvalidPointerError:i,MissingPointerError:n,isHandledError:o}=B,a=/\//g,s=/~/g,l=/~1/g,u=/~0/g;function f(p,S,y){this.$ref=p,this.path=S,this.originalPath=y||S,this.value=void 0,this.circular=!1,this.indirections=0}f.prototype.resolve=function(p,S,y){let E=f.parse(this.path,this.originalPath);this.value=h(p);for(let x=0;x<E.length;x++){if(c(this,S)&&(this.path=f.join(this.path,E.slice(x))),typeof this.value=="object"&&this.value!==null&&"$ref"in this.value)return this;let M=E[x];if(this.value[M]===void 0||this.value[M]===null)throw this.value=null,new n(M,this.originalPath);this.value=this.value[M]}return(!this.value||this.value.$ref&&r.resolve(this.path,this.value.$ref)!==y)&&c(this,S),this},f.prototype.set=function(p,S,y){let E=f.parse(this.path),x;if(E.length===0)return this.value=S,S;this.value=h(p);for(let M=0;M<E.length-1;M++)c(this,y),x=E[M],this.value&&this.value[x]!==void 0?this.value=this.value[x]:this.value=d(this,x,{});return c(this,y),x=E[E.length-1],d(this,x,S),p},f.parse=function(p,S){let y=r.getHash(p).substr(1);if(!y)return[];y=y.split("/");for(let E=0;E<y.length;E++)y[E]=decodeURIComponent(y[E].replace(l,"/").replace(u,"~"));if(y[0]!=="")throw new i(y,S===void 0?p:S);return y.slice(1)},f.join=function(p,S){p.indexOf("#")===-1&&(p+="#"),S=Array.isArray(S)?S:[S];for(let y=0;y<S.length;y++){let E=S[y];p+="/"+encodeURIComponent(E.replace(s,"~0").replace(a,"~1"))}return p};function c(p,S){if(e.isAllowed$Ref(p.value,S)){let y=r.resolve(p.path,p.value.$ref);if(y===p.path)p.circular=!0;else{let E=p.$ref.$refs._resolve(y,p.path,S);return E===null?!1:(p.indirections+=E.indirections+1,e.isExtended$Ref(p.value)?(p.value=e.dereference(p.value,E.value),!1):(p.$ref=E.$ref,p.path=E.path,p.value=E.value,!0))}}}function d(p,S,y){if(p.value&&typeof p.value=="object")S==="-"&&Array.isArray(p.value)?p.value.push(y):p.value[S]=y;else throw new t(`Error assigning $ref pointer "${p.path}". 
Cannot set "${S}" of a non-object.`);return y}function h(p){if(o(p))throw p;return p}return et}var rt,tn;function nr(){if(tn)return rt;tn=1,rt=s;const e=Hr(),{InvalidPointerError:r,isHandledError:t,normalizeError:i}=B,{safePointerToPath:n,stripHash:o,getHash:a}=K.exports;function s(){this.path=void 0,this.value=void 0,this.$refs=void 0,this.pathType=void 0,this.errors=void 0}return s.prototype.addError=function(l){this.errors===void 0&&(this.errors=[]);const u=this.errors.map(({footprint:f})=>f);Array.isArray(l.errors)?this.errors.push(...l.errors.map(i).filter(({footprint:f})=>!u.includes(f))):u.includes(l.footprint)||this.errors.push(i(l))},s.prototype.exists=function(l,u){try{return this.resolve(l,u),!0}catch{return!1}},s.prototype.get=function(l,u){return this.resolve(l,u).value},s.prototype.resolve=function(l,u,f,c){let d=new e(this,l,f);try{return d.resolve(this.value,u,c)}catch(h){if(!u||!u.continueOnError||!t(h))throw h;return h.path===null&&(h.path=n(a(c))),h instanceof r&&(h.source=o(c)),this.addError(h),null}},s.prototype.set=function(l,u){let f=new e(this,l);this.value=f.set(this.value,u)},s.is$Ref=function(l){return l&&typeof l=="object"&&typeof l.$ref=="string"&&l.$ref.length>0},s.isExternal$Ref=function(l){return s.is$Ref(l)&&l.$ref[0]!=="#"},s.isAllowed$Ref=function(l,u){if(s.is$Ref(l)){if(l.$ref.substr(0,2)==="#/"||l.$ref==="#")return!0;if(l.$ref[0]!=="#"&&(!u||u.resolve.external))return!0}},s.isExtended$Ref=function(l){return s.is$Ref(l)&&Object.keys(l).length>1},s.dereference=function(l,u){if(u&&typeof u=="object"&&s.isExtended$Ref(l)){let f={};for(let c of Object.keys(l))c!=="$ref"&&(f[c]=l[c]);for(let c of Object.keys(u))c in f||(f[c]=u[c]);return f}else return u},rt}const{ono:ii}=Ne,Ko=nr(),we=K.exports;var Xo=ie;function ie(){this.circular=!1,this._$refs={},this._root$Ref=null}ie.prototype.paths=function(e){return oi(this._$refs,arguments).map(t=>t.decoded)};ie.prototype.values=function(e){let r=this._$refs;return oi(r,arguments).reduce((i,n)=>(i[n.decoded]=r[n.encoded].value,i),{})};ie.prototype.toJSON=ie.prototype.values;ie.prototype.exists=function(e,r){try{return this._resolve(e,"",r),!0}catch{return!1}};ie.prototype.get=function(e,r){return this._resolve(e,"",r).value};ie.prototype.set=function(e,r){let t=we.resolve(this._root$Ref.path,e),i=we.stripHash(t),n=this._$refs[i];if(!n)throw ii(`Error resolving $ref pointer "${e}". 
"${i}" not found.`);n.set(t,r)};ie.prototype._add=function(e){let r=we.stripHash(e),t=new Ko;return t.path=r,t.$refs=this,this._$refs[r]=t,this._root$Ref=this._root$Ref||t,t};ie.prototype._resolve=function(e,r,t){let i=we.resolve(this._root$Ref.path,e),n=we.stripHash(i),o=this._$refs[n];if(!o)throw ii(`Error resolving $ref pointer "${e}". 
"${n}" not found.`);return o.resolve(i,t,e,r)};ie.prototype._get$Ref=function(e){e=we.resolve(this._root$Ref.path,e);let r=we.stripHash(e);return this._$refs[r]};function oi(e,r){let t=Object.keys(e);return r=Array.isArray(r[0])?r[0]:Array.prototype.slice.call(r),r.length>0&&r[0]&&(t=t.filter(i=>r.indexOf(e[i].pathType)!==-1)),t.map(i=>({encoded:i,decoded:e[i].pathType==="file"?we.toFileSystemPath(i,!0):i}))}var ir={};ir.all=function(e){return Object.keys(e).filter(r=>typeof e[r]=="object").map(r=>(e[r].name=r,e[r]))};ir.filter=function(e,r,t){return e.filter(i=>!!ai(i,r,t))};ir.sort=function(e){for(let r of e)r.order=r.order||Number.MAX_SAFE_INTEGER;return e.sort((r,t)=>r.order-t.order)};ir.run=function(e,r,t,i){let n,o,a=0;return new Promise((s,l)=>{u();function u(){if(n=e[a++],!n)return l(o);try{let h=ai(n,r,t,f,i);if(h&&typeof h.then=="function")h.then(c,d);else if(h!==void 0)c(h);else if(a===e.length)throw new Error("No promise has been returned or callback has been called.")}catch(h){d(h)}}function f(h,p){h?d(h):c(p)}function c(h){s({plugin:n,result:h})}function d(h){o={plugin:n,error:h},u()}})};function ai(e,r,t,i,n){let o=e[r];if(typeof o=="function")return o.apply(e,[t,i,n]);if(!i){if(o instanceof RegExp)return o.test(t.url);if(typeof o=="string")return o===t.extension;if(Array.isArray(o))return o.indexOf(t.extension)!==-1}return o}const{ono:ht}=Ne,nn=K.exports,Se=ir,{ResolverError:on,ParserError:an,UnmatchedParserError:Qo,UnmatchedResolverError:Zo,isHandledError:ea}=B;var si=ra;async function ra(e,r,t){e=nn.stripHash(e);let i=r._add(e),n={url:e,extension:nn.getExtension(e)};try{const o=await ta(n,t,r);i.pathType=o.plugin.name,n.data=o.result;const a=await na(n,t,r);return i.value=a.result,a.result}catch(o){throw ea(o)&&(i.value=o),o}}function ta(e,r,t){return new Promise((i,n)=>{let o=Se.all(r.resolve);o=Se.filter(o,"canRead",e),Se.sort(o),Se.run(o,"read",e,t).then(i,a);function a(s){!s&&r.continueOnError?n(new Zo(e.url)):!s||!("error"in s)?n(ht.syntax(`Unable to resolve $ref pointer "${e.url}"`)):s.error instanceof on?n(s.error):n(new on(s,e.url))}})}function na(e,r,t){return new Promise((i,n)=>{let o=Se.all(r.parse),a=Se.filter(o,"canParse",e),s=a.length>0?a:o;Se.sort(s),Se.run(s,"parse",e,t).then(l,u);function l(f){!f.plugin.allowEmpty&&ia(f.result)?n(ht.syntax(`Error parsing "${e.url}" as ${f.plugin.name}. 
Parsed value is empty`)):i(f)}function u(f){!f&&r.continueOnError?n(new Qo(e.url)):!f||!("error"in f)?n(ht.syntax(`Unable to parse ${e.url}`)):f.error instanceof an?n(f.error):n(new an(f.error.message,e.url))}})}function ia(e){return e===void 0||typeof e=="object"&&Object.keys(e).length===0||typeof e=="string"&&e.trim().length===0||Buffer.isBuffer(e)&&e.length===0}const{ParserError:oa}=B;var aa={order:100,allowEmpty:!0,canParse:".json",async parse(e){let r=e.data;if(Buffer.isBuffer(r)&&(r=r.toString()),typeof r=="string"){if(r.trim().length===0)return;try{return JSON.parse(r)}catch(t){throw new oa(t.message,e.url)}}else return r}},D={},or={},ee={};function li(e){return typeof e>"u"||e===null}function sa(e){return typeof e=="object"&&e!==null}function la(e){return Array.isArray(e)?e:li(e)?[]:[e]}function ua(e,r){var t,i,n,o;if(r)for(o=Object.keys(r),t=0,i=o.length;t<i;t+=1)n=o[t],e[n]=r[n];return e}function ca(e,r){var t="",i;for(i=0;i<r;i+=1)t+=e;return t}function fa(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}ee.isNothing=li;ee.isObject=sa;ee.toArray=la;ee.repeat=ca;ee.isNegativeZero=fa;ee.extend=ua;function Ke(e,r){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=r,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ke.prototype=Object.create(Error.prototype);Ke.prototype.constructor=Ke;Ke.prototype.toString=function(r){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!r&&this.mark&&(t+=" "+this.mark.toString()),t};var ar=Ke,sn=ee;function Ct(e,r,t,i,n){this.name=e,this.buffer=r,this.position=t,this.line=i,this.column=n}Ct.prototype.getSnippet=function(r,t){var i,n,o,a,s;if(!this.buffer)return null;for(r=r||4,t=t||75,i="",n=this.position;n>0&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(n-1))===-1;)if(n-=1,this.position-n>t/2-1){i=" ... ",n+=5;break}for(o="",a=this.position;a<this.buffer.length&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(a))===-1;)if(a+=1,a-this.position>t/2-1){o=" ... ",a-=5;break}return s=this.buffer.slice(n,a),sn.repeat(" ",r)+i+s+o+`
`+sn.repeat(" ",r+this.position-n+i.length)+"^"};Ct.prototype.toString=function(r){var t,i="";return this.name&&(i+='in "'+this.name+'" '),i+="at line "+(this.line+1)+", column "+(this.column+1),r||(t=this.getSnippet(),t&&(i+=`:
`+t)),i};var da=Ct,ln=ar,ha=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],pa=["scalar","sequence","mapping"];function ma(e){var r={};return e!==null&&Object.keys(e).forEach(function(t){e[t].forEach(function(i){r[String(i)]=t})}),r}function ga(e,r){if(r=r||{},Object.keys(r).forEach(function(t){if(ha.indexOf(t)===-1)throw new ln('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=r.kind||null,this.resolve=r.resolve||function(){return!0},this.construct=r.construct||function(t){return t},this.instanceOf=r.instanceOf||null,this.predicate=r.predicate||null,this.represent=r.represent||null,this.defaultStyle=r.defaultStyle||null,this.styleAliases=ma(r.styleAliases||null),pa.indexOf(this.kind)===-1)throw new ln('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var V=ga,un=ee,_r=ar,ya=V;function pt(e,r,t){var i=[];return e.include.forEach(function(n){t=pt(n,r,t)}),e[r].forEach(function(n){t.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&i.push(a)}),t.push(n)}),t.filter(function(n,o){return i.indexOf(o)===-1})}function va(){var e={scalar:{},sequence:{},mapping:{},fallback:{}},r,t;function i(n){e[n.kind][n.tag]=e.fallback[n.tag]=n}for(r=0,t=arguments.length;r<t;r+=1)arguments[r].forEach(i);return e}function Ue(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(r){if(r.loadKind&&r.loadKind!=="scalar")throw new _r("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=pt(this,"implicit",[]),this.compiledExplicit=pt(this,"explicit",[]),this.compiledTypeMap=va(this.compiledImplicit,this.compiledExplicit)}Ue.DEFAULT=null;Ue.create=function(){var r,t;switch(arguments.length){case 1:r=Ue.DEFAULT,t=arguments[0];break;case 2:r=arguments[0],t=arguments[1];break;default:throw new _r("Wrong number of arguments for Schema.create function")}if(r=un.toArray(r),t=un.toArray(t),!r.every(function(i){return i instanceof Ue}))throw new _r("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every(function(i){return i instanceof ya}))throw new _r("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new Ue({include:r,explicit:t})};var Ve=Ue,Sa=V,ba=new Sa("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Ea=V,wa=new Ea("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),_a=V,xa=new _a("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Aa=Ve,Tt=new Aa({explicit:[ba,wa,xa]}),Oa=V;function Ra(e){if(e===null)return!0;var r=e.length;return r===1&&e==="~"||r===4&&(e==="null"||e==="Null"||e==="NULL")}function Ca(){return null}function Ta(e){return e===null}var Fa=new Oa("tag:yaml.org,2002:null",{kind:"scalar",resolve:Ra,construct:Ca,predicate:Ta,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"}),Pa=V;function Na(e){if(e===null)return!1;var r=e.length;return r===4&&(e==="true"||e==="True"||e==="TRUE")||r===5&&(e==="false"||e==="False"||e==="FALSE")}function ka(e){return e==="true"||e==="True"||e==="TRUE"}function $a(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Ia=new Pa("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Na,construct:ka,predicate:$a,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"}),Da=ee,Ma=V;function La(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Ua(e){return 48<=e&&e<=55}function Ba(e){return 48<=e&&e<=57}function ja(e){if(e===null)return!1;var r=e.length,t=0,i=!1,n;if(!r)return!1;if(n=e[t],(n==="-"||n==="+")&&(n=e[++t]),n==="0"){if(t+1===r)return!0;if(n=e[++t],n==="b"){for(t++;t<r;t++)if(n=e[t],n!=="_"){if(n!=="0"&&n!=="1")return!1;i=!0}return i&&n!=="_"}if(n==="x"){for(t++;t<r;t++)if(n=e[t],n!=="_"){if(!La(e.charCodeAt(t)))return!1;i=!0}return i&&n!=="_"}for(;t<r;t++)if(n=e[t],n!=="_"){if(!Ua(e.charCodeAt(t)))return!1;i=!0}return i&&n!=="_"}if(n==="_")return!1;for(;t<r;t++)if(n=e[t],n!=="_"){if(n===":")break;if(!Ba(e.charCodeAt(t)))return!1;i=!0}return!i||n==="_"?!1:n!==":"?!0:/^(:[0-5]?[0-9])+$/.test(e.slice(t))}function Ha(e){var r=e,t=1,i,n,o=[];return r.indexOf("_")!==-1&&(r=r.replace(/_/g,"")),i=r[0],(i==="-"||i==="+")&&(i==="-"&&(t=-1),r=r.slice(1),i=r[0]),r==="0"?0:i==="0"?r[1]==="b"?t*parseInt(r.slice(2),2):r[1]==="x"?t*parseInt(r,16):t*parseInt(r,8):r.indexOf(":")!==-1?(r.split(":").forEach(function(a){o.unshift(parseInt(a,10))}),r=0,n=1,o.forEach(function(a){r+=a*n,n*=60}),t*r):t*parseInt(r,10)}function Va(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Da.isNegativeZero(e)}var Ya=new Ma("tag:yaml.org,2002:int",{kind:"scalar",resolve:ja,construct:Ha,predicate:Va,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),ui=ee,qa=V,Wa=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function za(e){return!(e===null||!Wa.test(e)||e[e.length-1]==="_")}function Ga(e){var r,t,i,n;return r=e.replace(/_/g,"").toLowerCase(),t=r[0]==="-"?-1:1,n=[],"+-".indexOf(r[0])>=0&&(r=r.slice(1)),r===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:r===".nan"?NaN:r.indexOf(":")>=0?(r.split(":").forEach(function(o){n.unshift(parseFloat(o,10))}),r=0,i=1,n.forEach(function(o){r+=o*i,i*=60}),t*r):t*parseFloat(r,10)}var Ja=/^[-+]?[0-9]+e/;function Ka(e,r){var t;if(isNaN(e))switch(r){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(r){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(r){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ui.isNegativeZero(e))return"-0.0";return t=e.toString(10),Ja.test(t)?t.replace("e",".e"):t}function Xa(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||ui.isNegativeZero(e))}var Qa=new qa("tag:yaml.org,2002:float",{kind:"scalar",resolve:za,construct:Ga,predicate:Xa,represent:Ka,defaultStyle:"lowercase"}),Za=Ve,ci=new Za({include:[Tt],implicit:[Fa,Ia,Ya,Qa]}),es=Ve,fi=new es({include:[ci]}),rs=V,di=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),hi=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function ts(e){return e===null?!1:di.exec(e)!==null||hi.exec(e)!==null}function ns(e){var r,t,i,n,o,a,s,l=0,u=null,f,c,d;if(r=di.exec(e),r===null&&(r=hi.exec(e)),r===null)throw new Error("Date resolve error");if(t=+r[1],i=+r[2]-1,n=+r[3],!r[4])return new Date(Date.UTC(t,i,n));if(o=+r[4],a=+r[5],s=+r[6],r[7]){for(l=r[7].slice(0,3);l.length<3;)l+="0";l=+l}return r[9]&&(f=+r[10],c=+(r[11]||0),u=(f*60+c)*6e4,r[9]==="-"&&(u=-u)),d=new Date(Date.UTC(t,i,n,o,a,s,l)),u&&d.setTime(d.getTime()-u),d}function is(e){return e.toISOString()}var os=new rs("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:ts,construct:ns,instanceOf:Date,represent:is}),as=V;function ss(e){return e==="<<"||e===null}var ls=new as("tag:yaml.org,2002:merge",{kind:"scalar",resolve:ss}),Ce;try{var us=zn;Ce=us("buffer").Buffer}catch{}var cs=V,Ft=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function fs(e){if(e===null)return!1;var r,t,i=0,n=e.length,o=Ft;for(t=0;t<n;t++)if(r=o.indexOf(e.charAt(t)),!(r>64)){if(r<0)return!1;i+=6}return i%8===0}function ds(e){var r,t,i=e.replace(/[\r\n=]/g,""),n=i.length,o=Ft,a=0,s=[];for(r=0;r<n;r++)r%4===0&&r&&(s.push(a>>16&255),s.push(a>>8&255),s.push(a&255)),a=a<<6|o.indexOf(i.charAt(r));return t=n%4*6,t===0?(s.push(a>>16&255),s.push(a>>8&255),s.push(a&255)):t===18?(s.push(a>>10&255),s.push(a>>2&255)):t===12&&s.push(a>>4&255),Ce?Ce.from?Ce.from(s):new Ce(s):s}function hs(e){var r="",t=0,i,n,o=e.length,a=Ft;for(i=0;i<o;i++)i%3===0&&i&&(r+=a[t>>18&63],r+=a[t>>12&63],r+=a[t>>6&63],r+=a[t&63]),t=(t<<8)+e[i];return n=o%3,n===0?(r+=a[t>>18&63],r+=a[t>>12&63],r+=a[t>>6&63],r+=a[t&63]):n===2?(r+=a[t>>10&63],r+=a[t>>4&63],r+=a[t<<2&63],r+=a[64]):n===1&&(r+=a[t>>2&63],r+=a[t<<4&63],r+=a[64],r+=a[64]),r}function ps(e){return Ce&&Ce.isBuffer(e)}var ms=new cs("tag:yaml.org,2002:binary",{kind:"scalar",resolve:fs,construct:ds,predicate:ps,represent:hs}),gs=V,ys=Object.prototype.hasOwnProperty,vs=Object.prototype.toString;function Ss(e){if(e===null)return!0;var r=[],t,i,n,o,a,s=e;for(t=0,i=s.length;t<i;t+=1){if(n=s[t],a=!1,vs.call(n)!=="[object Object]")return!1;for(o in n)if(ys.call(n,o))if(!a)a=!0;else return!1;if(!a)return!1;if(r.indexOf(o)===-1)r.push(o);else return!1}return!0}function bs(e){return e!==null?e:[]}var Es=new gs("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Ss,construct:bs}),ws=V,_s=Object.prototype.toString;function xs(e){if(e===null)return!0;var r,t,i,n,o,a=e;for(o=new Array(a.length),r=0,t=a.length;r<t;r+=1){if(i=a[r],_s.call(i)!=="[object Object]"||(n=Object.keys(i),n.length!==1))return!1;o[r]=[n[0],i[n[0]]]}return!0}function As(e){if(e===null)return[];var r,t,i,n,o,a=e;for(o=new Array(a.length),r=0,t=a.length;r<t;r+=1)i=a[r],n=Object.keys(i),o[r]=[n[0],i[n[0]]];return o}var Os=new ws("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:xs,construct:As}),Rs=V,Cs=Object.prototype.hasOwnProperty;function Ts(e){if(e===null)return!0;var r,t=e;for(r in t)if(Cs.call(t,r)&&t[r]!==null)return!1;return!0}function Fs(e){return e!==null?e:{}}var Ps=new Rs("tag:yaml.org,2002:set",{kind:"mapping",resolve:Ts,construct:Fs}),Ns=Ve,sr=new Ns({include:[fi],implicit:[os,ls],explicit:[ms,Es,Os,Ps]}),ks=V;function $s(){return!0}function Is(){}function Ds(){return""}function Ms(e){return typeof e>"u"}var Ls=new ks("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:$s,construct:Is,predicate:Ms,represent:Ds}),Us=V;function Bs(e){if(e===null||e.length===0)return!1;var r=e,t=/\/([gim]*)$/.exec(e),i="";return!(r[0]==="/"&&(t&&(i=t[1]),i.length>3||r[r.length-i.length-1]!=="/"))}function js(e){var r=e,t=/\/([gim]*)$/.exec(e),i="";return r[0]==="/"&&(t&&(i=t[1]),r=r.slice(1,r.length-i.length-1)),new RegExp(r,i)}function Hs(e){var r="/"+e.source+"/";return e.global&&(r+="g"),e.multiline&&(r+="m"),e.ignoreCase&&(r+="i"),r}function Vs(e){return Object.prototype.toString.call(e)==="[object RegExp]"}var Ys=new Us("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:Bs,construct:js,predicate:Vs,represent:Hs}),Ir;try{var qs=zn;Ir=qs("esprima")}catch{typeof window<"u"&&(Ir=window.esprima)}var Ws=V;function zs(e){if(e===null)return!1;try{var r="("+e+")",t=Ir.parse(r,{range:!0});return!(t.type!=="Program"||t.body.length!==1||t.body[0].type!=="ExpressionStatement"||t.body[0].expression.type!=="ArrowFunctionExpression"&&t.body[0].expression.type!=="FunctionExpression")}catch{return!1}}function Gs(e){var r="("+e+")",t=Ir.parse(r,{range:!0}),i=[],n;if(t.type!=="Program"||t.body.length!==1||t.body[0].type!=="ExpressionStatement"||t.body[0].expression.type!=="ArrowFunctionExpression"&&t.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return t.body[0].expression.params.forEach(function(o){i.push(o.name)}),n=t.body[0].expression.body.range,t.body[0].expression.body.type==="BlockStatement"?new Function(i,r.slice(n[0]+1,n[1]-1)):new Function(i,"return "+r.slice(n[0],n[1]))}function Js(e){return e.toString()}function Ks(e){return Object.prototype.toString.call(e)==="[object Function]"}var Xs=new Ws("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:zs,construct:Gs,predicate:Ks,represent:Js}),cn=Ve,Vr=cn.DEFAULT=new cn({include:[sr],explicit:[Ls,Ys,Xs]}),ue=ee,pi=ar,Qs=da,mt=sr,Zs=Vr,Fe=Object.prototype.hasOwnProperty,Dr=1,mi=2,gi=3,Mr=4,tt=1,el=2,fn=3,rl=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,tl=/[\x85\u2028\u2029]/,nl=/[,\[\]\{\}]/,yi=/^(?:!|!!|![a-z\-]+!)$/i,vi=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function dn(e){return Object.prototype.toString.call(e)}function ce(e){return e===10||e===13}function Te(e){return e===9||e===32}function G(e){return e===9||e===32||e===10||e===13}function Be(e){return e===44||e===91||e===93||e===123||e===125}function il(e){var r;return 48<=e&&e<=57?e-48:(r=e|32,97<=r&&r<=102?r-97+10:-1)}function ol(e){return e===120?2:e===117?4:e===85?8:0}function al(e){return 48<=e&&e<=57?e-48:-1}function hn(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function sl(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var Si=new Array(256),bi=new Array(256);for(var Ie=0;Ie<256;Ie++)Si[Ie]=hn(Ie)?1:0,bi[Ie]=hn(Ie);function ll(e,r){this.input=e,this.filename=r.filename||null,this.schema=r.schema||Zs,this.onWarning=r.onWarning||null,this.legacy=r.legacy||!1,this.json=r.json||!1,this.listener=r.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function Ei(e,r){return new pi(r,new Qs(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function w(e,r){throw Ei(e,r)}function Lr(e,r){e.onWarning&&e.onWarning.call(null,Ei(e,r))}var pn={YAML:function(r,t,i){var n,o,a;r.version!==null&&w(r,"duplication of %YAML directive"),i.length!==1&&w(r,"YAML directive accepts exactly one argument"),n=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),n===null&&w(r,"ill-formed argument of the YAML directive"),o=parseInt(n[1],10),a=parseInt(n[2],10),o!==1&&w(r,"unacceptable YAML version of the document"),r.version=i[0],r.checkLineBreaks=a<2,a!==1&&a!==2&&Lr(r,"unsupported YAML version of the document")},TAG:function(r,t,i){var n,o;i.length!==2&&w(r,"TAG directive accepts exactly two arguments"),n=i[0],o=i[1],yi.test(n)||w(r,"ill-formed tag handle (first argument) of the TAG directive"),Fe.call(r.tagMap,n)&&w(r,'there is a previously declared suffix for "'+n+'" tag handle'),vi.test(o)||w(r,"ill-formed tag prefix (second argument) of the TAG directive"),r.tagMap[n]=o}};function Ee(e,r,t,i){var n,o,a,s;if(r<t){if(s=e.input.slice(r,t),i)for(n=0,o=s.length;n<o;n+=1)a=s.charCodeAt(n),a===9||32<=a&&a<=1114111||w(e,"expected valid JSON character");else rl.test(s)&&w(e,"the stream contains non-printable characters");e.result+=s}}function mn(e,r,t,i){var n,o,a,s;for(ue.isObject(t)||w(e,"cannot merge mappings; the provided source object is unacceptable"),n=Object.keys(t),a=0,s=n.length;a<s;a+=1)o=n[a],Fe.call(r,o)||(r[o]=t[o],i[o]=!0)}function je(e,r,t,i,n,o,a,s){var l,u;if(Array.isArray(n))for(n=Array.prototype.slice.call(n),l=0,u=n.length;l<u;l+=1)Array.isArray(n[l])&&w(e,"nested arrays are not supported inside keys"),typeof n=="object"&&dn(n[l])==="[object Object]"&&(n[l]="[object Object]");if(typeof n=="object"&&dn(n)==="[object Object]"&&(n="[object Object]"),n=String(n),r===null&&(r={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(l=0,u=o.length;l<u;l+=1)mn(e,r,o[l],t);else mn(e,r,o,t);else!e.json&&!Fe.call(t,n)&&Fe.call(r,n)&&(e.line=a||e.line,e.position=s||e.position,w(e,"duplicated mapping key")),r[n]=o,delete t[n];return r}function Pt(e){var r;r=e.input.charCodeAt(e.position),r===10?e.position++:r===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):w(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function U(e,r,t){for(var i=0,n=e.input.charCodeAt(e.position);n!==0;){for(;Te(n);)n=e.input.charCodeAt(++e.position);if(r&&n===35)do n=e.input.charCodeAt(++e.position);while(n!==10&&n!==13&&n!==0);if(ce(n))for(Pt(e),n=e.input.charCodeAt(e.position),i++,e.lineIndent=0;n===32;)e.lineIndent++,n=e.input.charCodeAt(++e.position);else break}return t!==-1&&i!==0&&e.lineIndent<t&&Lr(e,"deficient indentation"),i}function Yr(e){var r=e.position,t;return t=e.input.charCodeAt(r),!!((t===45||t===46)&&t===e.input.charCodeAt(r+1)&&t===e.input.charCodeAt(r+2)&&(r+=3,t=e.input.charCodeAt(r),t===0||G(t)))}function Nt(e,r){r===1?e.result+=" ":r>1&&(e.result+=ue.repeat(`
`,r-1))}function ul(e,r,t){var i,n,o,a,s,l,u,f,c=e.kind,d=e.result,h;if(h=e.input.charCodeAt(e.position),G(h)||Be(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(n=e.input.charCodeAt(e.position+1),G(n)||t&&Be(n)))return!1;for(e.kind="scalar",e.result="",o=a=e.position,s=!1;h!==0;){if(h===58){if(n=e.input.charCodeAt(e.position+1),G(n)||t&&Be(n))break}else if(h===35){if(i=e.input.charCodeAt(e.position-1),G(i))break}else{if(e.position===e.lineStart&&Yr(e)||t&&Be(h))break;if(ce(h))if(l=e.line,u=e.lineStart,f=e.lineIndent,U(e,!1,-1),e.lineIndent>=r){s=!0,h=e.input.charCodeAt(e.position);continue}else{e.position=a,e.line=l,e.lineStart=u,e.lineIndent=f;break}}s&&(Ee(e,o,a,!1),Nt(e,e.line-l),o=a=e.position,s=!1),Te(h)||(a=e.position+1),h=e.input.charCodeAt(++e.position)}return Ee(e,o,a,!1),e.result?!0:(e.kind=c,e.result=d,!1)}function cl(e,r){var t,i,n;if(t=e.input.charCodeAt(e.position),t!==39)return!1;for(e.kind="scalar",e.result="",e.position++,i=n=e.position;(t=e.input.charCodeAt(e.position))!==0;)if(t===39)if(Ee(e,i,e.position,!0),t=e.input.charCodeAt(++e.position),t===39)i=e.position,e.position++,n=e.position;else return!0;else ce(t)?(Ee(e,i,n,!0),Nt(e,U(e,!1,r)),i=n=e.position):e.position===e.lineStart&&Yr(e)?w(e,"unexpected end of the document within a single quoted scalar"):(e.position++,n=e.position);w(e,"unexpected end of the stream within a single quoted scalar")}function fl(e,r){var t,i,n,o,a,s;if(s=e.input.charCodeAt(e.position),s!==34)return!1;for(e.kind="scalar",e.result="",e.position++,t=i=e.position;(s=e.input.charCodeAt(e.position))!==0;){if(s===34)return Ee(e,t,e.position,!0),e.position++,!0;if(s===92){if(Ee(e,t,e.position,!0),s=e.input.charCodeAt(++e.position),ce(s))U(e,!1,r);else if(s<256&&Si[s])e.result+=bi[s],e.position++;else if((a=ol(s))>0){for(n=a,o=0;n>0;n--)s=e.input.charCodeAt(++e.position),(a=il(s))>=0?o=(o<<4)+a:w(e,"expected hexadecimal character");e.result+=sl(o),e.position++}else w(e,"unknown escape sequence");t=i=e.position}else ce(s)?(Ee(e,t,i,!0),Nt(e,U(e,!1,r)),t=i=e.position):e.position===e.lineStart&&Yr(e)?w(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}w(e,"unexpected end of the stream within a double quoted scalar")}function dl(e,r){var t=!0,i,n=e.tag,o,a=e.anchor,s,l,u,f,c,d={},h,p,S,y;if(y=e.input.charCodeAt(e.position),y===91)l=93,c=!1,o=[];else if(y===123)l=125,c=!0,o={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),y=e.input.charCodeAt(++e.position);y!==0;){if(U(e,!0,r),y=e.input.charCodeAt(e.position),y===l)return e.position++,e.tag=n,e.anchor=a,e.kind=c?"mapping":"sequence",e.result=o,!0;t||w(e,"missed comma between flow collection entries"),p=h=S=null,u=f=!1,y===63&&(s=e.input.charCodeAt(e.position+1),G(s)&&(u=f=!0,e.position++,U(e,!0,r))),i=e.line,He(e,r,Dr,!1,!0),p=e.tag,h=e.result,U(e,!0,r),y=e.input.charCodeAt(e.position),(f||e.line===i)&&y===58&&(u=!0,y=e.input.charCodeAt(++e.position),U(e,!0,r),He(e,r,Dr,!1,!0),S=e.result),c?je(e,o,d,p,h,S):u?o.push(je(e,null,d,p,h,S)):o.push(h),U(e,!0,r),y=e.input.charCodeAt(e.position),y===44?(t=!0,y=e.input.charCodeAt(++e.position)):t=!1}w(e,"unexpected end of the stream within a flow collection")}function hl(e,r){var t,i,n=tt,o=!1,a=!1,s=r,l=0,u=!1,f,c;if(c=e.input.charCodeAt(e.position),c===124)i=!1;else if(c===62)i=!0;else return!1;for(e.kind="scalar",e.result="";c!==0;)if(c=e.input.charCodeAt(++e.position),c===43||c===45)tt===n?n=c===43?fn:el:w(e,"repeat of a chomping mode identifier");else if((f=al(c))>=0)f===0?w(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?w(e,"repeat of an indentation width identifier"):(s=r+f-1,a=!0);else break;if(Te(c)){do c=e.input.charCodeAt(++e.position);while(Te(c));if(c===35)do c=e.input.charCodeAt(++e.position);while(!ce(c)&&c!==0)}for(;c!==0;){for(Pt(e),e.lineIndent=0,c=e.input.charCodeAt(e.position);(!a||e.lineIndent<s)&&c===32;)e.lineIndent++,c=e.input.charCodeAt(++e.position);if(!a&&e.lineIndent>s&&(s=e.lineIndent),ce(c)){l++;continue}if(e.lineIndent<s){n===fn?e.result+=ue.repeat(`
`,o?1+l:l):n===tt&&o&&(e.result+=`
`);break}for(i?Te(c)?(u=!0,e.result+=ue.repeat(`
`,o?1+l:l)):u?(u=!1,e.result+=ue.repeat(`
`,l+1)):l===0?o&&(e.result+=" "):e.result+=ue.repeat(`
`,l):e.result+=ue.repeat(`
`,o?1+l:l),o=!0,a=!0,l=0,t=e.position;!ce(c)&&c!==0;)c=e.input.charCodeAt(++e.position);Ee(e,t,e.position,!1)}return!0}function gn(e,r){var t,i=e.tag,n=e.anchor,o=[],a,s=!1,l;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),l=e.input.charCodeAt(e.position);l!==0&&!(l!==45||(a=e.input.charCodeAt(e.position+1),!G(a)));){if(s=!0,e.position++,U(e,!0,-1)&&e.lineIndent<=r){o.push(null),l=e.input.charCodeAt(e.position);continue}if(t=e.line,He(e,r,gi,!1,!0),o.push(e.result),U(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===t||e.lineIndent>r)&&l!==0)w(e,"bad indentation of a sequence entry");else if(e.lineIndent<r)break}return s?(e.tag=i,e.anchor=n,e.kind="sequence",e.result=o,!0):!1}function pl(e,r,t){var i,n,o,a,s=e.tag,l=e.anchor,u={},f={},c=null,d=null,h=null,p=!1,S=!1,y;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),y=e.input.charCodeAt(e.position);y!==0;){if(i=e.input.charCodeAt(e.position+1),o=e.line,a=e.position,(y===63||y===58)&&G(i))y===63?(p&&(je(e,u,f,c,d,null),c=d=h=null),S=!0,p=!0,n=!0):p?(p=!1,n=!0):w(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,y=i;else if(He(e,t,mi,!1,!0))if(e.line===o){for(y=e.input.charCodeAt(e.position);Te(y);)y=e.input.charCodeAt(++e.position);if(y===58)y=e.input.charCodeAt(++e.position),G(y)||w(e,"a whitespace character is expected after the key-value separator within a block mapping"),p&&(je(e,u,f,c,d,null),c=d=h=null),S=!0,p=!1,n=!1,c=e.tag,d=e.result;else if(S)w(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=s,e.anchor=l,!0}else if(S)w(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=s,e.anchor=l,!0;else break;if((e.line===o||e.lineIndent>r)&&(He(e,r,Mr,!0,n)&&(p?d=e.result:h=e.result),p||(je(e,u,f,c,d,h,o,a),c=d=h=null),U(e,!0,-1),y=e.input.charCodeAt(e.position)),e.lineIndent>r&&y!==0)w(e,"bad indentation of a mapping entry");else if(e.lineIndent<r)break}return p&&je(e,u,f,c,d,null),S&&(e.tag=s,e.anchor=l,e.kind="mapping",e.result=u),S}function ml(e){var r,t=!1,i=!1,n,o,a;if(a=e.input.charCodeAt(e.position),a!==33)return!1;if(e.tag!==null&&w(e,"duplication of a tag property"),a=e.input.charCodeAt(++e.position),a===60?(t=!0,a=e.input.charCodeAt(++e.position)):a===33?(i=!0,n="!!",a=e.input.charCodeAt(++e.position)):n="!",r=e.position,t){do a=e.input.charCodeAt(++e.position);while(a!==0&&a!==62);e.position<e.length?(o=e.input.slice(r,e.position),a=e.input.charCodeAt(++e.position)):w(e,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!G(a);)a===33&&(i?w(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(r-1,e.position+1),yi.test(n)||w(e,"named tag handle cannot contain such characters"),i=!0,r=e.position+1)),a=e.input.charCodeAt(++e.position);o=e.input.slice(r,e.position),nl.test(o)&&w(e,"tag suffix cannot contain flow indicator characters")}return o&&!vi.test(o)&&w(e,"tag name cannot contain such characters: "+o),t?e.tag=o:Fe.call(e.tagMap,n)?e.tag=e.tagMap[n]+o:n==="!"?e.tag="!"+o:n==="!!"?e.tag="tag:yaml.org,2002:"+o:w(e,'undeclared tag handle "'+n+'"'),!0}function gl(e){var r,t;if(t=e.input.charCodeAt(e.position),t!==38)return!1;for(e.anchor!==null&&w(e,"duplication of an anchor property"),t=e.input.charCodeAt(++e.position),r=e.position;t!==0&&!G(t)&&!Be(t);)t=e.input.charCodeAt(++e.position);return e.position===r&&w(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(r,e.position),!0}function yl(e){var r,t,i;if(i=e.input.charCodeAt(e.position),i!==42)return!1;for(i=e.input.charCodeAt(++e.position),r=e.position;i!==0&&!G(i)&&!Be(i);)i=e.input.charCodeAt(++e.position);return e.position===r&&w(e,"name of an alias node must contain at least one character"),t=e.input.slice(r,e.position),e.anchorMap.hasOwnProperty(t)||w(e,'unidentified alias "'+t+'"'),e.result=e.anchorMap[t],U(e,!0,-1),!0}function He(e,r,t,i,n){var o,a,s,l=1,u=!1,f=!1,c,d,h,p,S;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=s=Mr===t||gi===t,i&&U(e,!0,-1)&&(u=!0,e.lineIndent>r?l=1:e.lineIndent===r?l=0:e.lineIndent<r&&(l=-1)),l===1)for(;ml(e)||gl(e);)U(e,!0,-1)?(u=!0,s=o,e.lineIndent>r?l=1:e.lineIndent===r?l=0:e.lineIndent<r&&(l=-1)):s=!1;if(s&&(s=u||n),(l===1||Mr===t)&&(Dr===t||mi===t?p=r:p=r+1,S=e.position-e.lineStart,l===1?s&&(gn(e,S)||pl(e,S,p))||dl(e,p)?f=!0:(a&&hl(e,p)||cl(e,p)||fl(e,p)?f=!0:yl(e)?(f=!0,(e.tag!==null||e.anchor!==null)&&w(e,"alias node should not have any properties")):ul(e,p,Dr===t)&&(f=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(f=s&&gn(e,S))),e.tag!==null&&e.tag!=="!")if(e.tag==="?"){for(c=0,d=e.implicitTypes.length;c<d;c+=1)if(h=e.implicitTypes[c],h.resolve(e.result)){e.result=h.construct(e.result),e.tag=h.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else Fe.call(e.typeMap[e.kind||"fallback"],e.tag)?(h=e.typeMap[e.kind||"fallback"][e.tag],e.result!==null&&h.kind!==e.kind&&w(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+h.kind+'", not "'+e.kind+'"'),h.resolve(e.result)?(e.result=h.construct(e.result),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):w(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):w(e,"unknown tag !<"+e.tag+">");return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||f}function vl(e){var r=e.position,t,i,n,o=!1,a;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};(a=e.input.charCodeAt(e.position))!==0&&(U(e,!0,-1),a=e.input.charCodeAt(e.position),!(e.lineIndent>0||a!==37));){for(o=!0,a=e.input.charCodeAt(++e.position),t=e.position;a!==0&&!G(a);)a=e.input.charCodeAt(++e.position);for(i=e.input.slice(t,e.position),n=[],i.length<1&&w(e,"directive name must not be less than one character in length");a!==0;){for(;Te(a);)a=e.input.charCodeAt(++e.position);if(a===35){do a=e.input.charCodeAt(++e.position);while(a!==0&&!ce(a));break}if(ce(a))break;for(t=e.position;a!==0&&!G(a);)a=e.input.charCodeAt(++e.position);n.push(e.input.slice(t,e.position))}a!==0&&Pt(e),Fe.call(pn,i)?pn[i](e,i,n):Lr(e,'unknown document directive "'+i+'"')}if(U(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,U(e,!0,-1)):o&&w(e,"directives end mark is expected"),He(e,e.lineIndent-1,Mr,!1,!0),U(e,!0,-1),e.checkLineBreaks&&tl.test(e.input.slice(r,e.position))&&Lr(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Yr(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,U(e,!0,-1));return}if(e.position<e.length-1)w(e,"end of the stream or a document separator is expected");else return}function wi(e,r){e=String(e),r=r||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var t=new ll(e,r);for(t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)vl(t);return t.documents}function gt(e,r,t){var i=wi(e,t),n,o;if(typeof r!="function")return i;for(n=0,o=i.length;n<o;n+=1)r(i[n])}function _i(e,r){var t=wi(e,r);if(t.length!==0){if(t.length===1)return t[0];throw new pi("expected a single document in the stream, but found more")}}function Sl(e,r,t){if(typeof r=="function")gt(e,r,ue.extend({schema:mt},t));else return gt(e,ue.extend({schema:mt},t))}function bl(e,r){return _i(e,ue.extend({schema:mt},r))}or.loadAll=gt;or.load=_i;or.safeLoadAll=Sl;or.safeLoad=bl;var kt={},lr=ee,ur=ar,El=Vr,wl=sr,xi=Object.prototype.toString,Ai=Object.prototype.hasOwnProperty,_l=9,Ur=10,xl=32,Al=33,Ol=34,Oi=35,Rl=37,Cl=38,Tl=39,Fl=42,Ri=44,Pl=45,Ci=58,Nl=62,kl=63,$l=64,Ti=91,Fi=93,Il=96,Pi=123,Dl=124,Ni=125,z={};z[0]="\\0";z[7]="\\a";z[8]="\\b";z[9]="\\t";z[10]="\\n";z[11]="\\v";z[12]="\\f";z[13]="\\r";z[27]="\\e";z[34]='\\"';z[92]="\\\\";z[133]="\\N";z[160]="\\_";z[8232]="\\L";z[8233]="\\P";var Ml=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function Ll(e,r){var t,i,n,o,a,s,l;if(r===null)return{};for(t={},i=Object.keys(r),n=0,o=i.length;n<o;n+=1)a=i[n],s=String(r[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),l=e.compiledTypeMap.fallback[a],l&&Ai.call(l.styleAliases,s)&&(s=l.styleAliases[s]),t[a]=s;return t}function yn(e){var r,t,i;if(r=e.toString(16).toUpperCase(),e<=255)t="x",i=2;else if(e<=65535)t="u",i=4;else if(e<=4294967295)t="U",i=8;else throw new ur("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+lr.repeat("0",i-r.length)+r}function Ul(e){this.schema=e.schema||El,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=lr.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Ll(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function vn(e,r){for(var t=lr.repeat(" ",r),i=0,n=-1,o="",a,s=e.length;i<s;)n=e.indexOf(`
`,i),n===-1?(a=e.slice(i),i=s):(a=e.slice(i,n+1),i=n+1),a.length&&a!==`
`&&(o+=t),o+=a;return o}function yt(e,r){return`
`+lr.repeat(" ",e.indent*r)}function Bl(e,r){var t,i,n;for(t=0,i=e.implicitTypes.length;t<i;t+=1)if(n=e.implicitTypes[t],n.resolve(r))return!0;return!1}function ki(e){return e===xl||e===_l}function Xe(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==65279||65536<=e&&e<=1114111}function Sn(e){return Xe(e)&&e!==65279&&e!==Ri&&e!==Ti&&e!==Fi&&e!==Pi&&e!==Ni&&e!==Ci&&e!==Oi}function jl(e){return Xe(e)&&e!==65279&&!ki(e)&&e!==Pl&&e!==kl&&e!==Ci&&e!==Ri&&e!==Ti&&e!==Fi&&e!==Pi&&e!==Ni&&e!==Oi&&e!==Cl&&e!==Fl&&e!==Al&&e!==Dl&&e!==Nl&&e!==Tl&&e!==Ol&&e!==Rl&&e!==$l&&e!==Il}function $i(e){var r=/^\n* /;return r.test(e)}var Ii=1,Di=2,Mi=3,Li=4,xr=5;function Hl(e,r,t,i,n){var o,a,s=!1,l=!1,u=i!==-1,f=-1,c=jl(e.charCodeAt(0))&&!ki(e.charCodeAt(e.length-1));if(r)for(o=0;o<e.length;o++){if(a=e.charCodeAt(o),!Xe(a))return xr;c=c&&Sn(a)}else{for(o=0;o<e.length;o++){if(a=e.charCodeAt(o),a===Ur)s=!0,u&&(l=l||o-f-1>i&&e[f+1]!==" ",f=o);else if(!Xe(a))return xr;c=c&&Sn(a)}l=l||u&&o-f-1>i&&e[f+1]!==" "}return!s&&!l?c&&!n(e)?Ii:Di:t>9&&$i(e)?xr:l?Li:Mi}function Vl(e,r,t,i){e.dump=function(){if(r.length===0)return"''";if(!e.noCompatMode&&Ml.indexOf(r)!==-1)return"'"+r+"'";var n=e.indent*Math.max(1,t),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-n),a=i||e.flowLevel>-1&&t>=e.flowLevel;function s(l){return Bl(e,l)}switch(Hl(r,a,e.indent,o,s)){case Ii:return r;case Di:return"'"+r.replace(/'/g,"''")+"'";case Mi:return"|"+bn(r,e.indent)+En(vn(r,n));case Li:return">"+bn(r,e.indent)+En(vn(Yl(r,o),n));case xr:return'"'+ql(r)+'"';default:throw new ur("impossible error: invalid scalar style")}}()}function bn(e,r){var t=$i(e)?String(r):"",i=e[e.length-1]===`
`,n=i&&(e[e.length-2]===`
`||e===`
`),o=n?"+":i?"":"-";return t+o+`
`}function En(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Yl(e,r){for(var t=/(\n+)([^\n]*)/g,i=function(){var u=e.indexOf(`
`);return u=u!==-1?u:e.length,t.lastIndex=u,wn(e.slice(0,u),r)}(),n=e[0]===`
`||e[0]===" ",o,a;a=t.exec(e);){var s=a[1],l=a[2];o=l[0]===" ",i+=s+(!n&&!o&&l!==""?`
`:"")+wn(l,r),n=o}return i}function wn(e,r){if(e===""||e[0]===" ")return e;for(var t=/ [^ ]/g,i,n=0,o,a=0,s=0,l="";i=t.exec(e);)s=i.index,s-n>r&&(o=a>n?a:s,l+=`
`+e.slice(n,o),n=o+1),a=s;return l+=`
`,e.length-n>r&&a>n?l+=e.slice(n,a)+`
`+e.slice(a+1):l+=e.slice(n),l.slice(1)}function ql(e){for(var r="",t,i,n,o=0;o<e.length;o++){if(t=e.charCodeAt(o),t>=55296&&t<=56319&&(i=e.charCodeAt(o+1),i>=56320&&i<=57343)){r+=yn((t-55296)*1024+i-56320+65536),o++;continue}n=z[t],r+=!n&&Xe(t)?e[o]:n||yn(t)}return r}function Wl(e,r,t){var i="",n=e.tag,o,a;for(o=0,a=t.length;o<a;o+=1)Pe(e,r,t[o],!1,!1)&&(o!==0&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=n,e.dump="["+i+"]"}function zl(e,r,t,i){var n="",o=e.tag,a,s;for(a=0,s=t.length;a<s;a+=1)Pe(e,r+1,t[a],!0,!0)&&((!i||a!==0)&&(n+=yt(e,r)),e.dump&&Ur===e.dump.charCodeAt(0)?n+="-":n+="- ",n+=e.dump);e.tag=o,e.dump=n||"[]"}function Gl(e,r,t){var i="",n=e.tag,o=Object.keys(t),a,s,l,u,f;for(a=0,s=o.length;a<s;a+=1)f=e.condenseFlow?'"':"",a!==0&&(f+=", "),l=o[a],u=t[l],Pe(e,r,l,!1,!1)&&(e.dump.length>1024&&(f+="? "),f+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Pe(e,r,u,!1,!1)&&(f+=e.dump,i+=f));e.tag=n,e.dump="{"+i+"}"}function Jl(e,r,t,i){var n="",o=e.tag,a=Object.keys(t),s,l,u,f,c,d;if(e.sortKeys===!0)a.sort();else if(typeof e.sortKeys=="function")a.sort(e.sortKeys);else if(e.sortKeys)throw new ur("sortKeys must be a boolean or a function");for(s=0,l=a.length;s<l;s+=1)d="",(!i||s!==0)&&(d+=yt(e,r)),u=a[s],f=t[u],Pe(e,r+1,u,!0,!0,!0)&&(c=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,c&&(e.dump&&Ur===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,c&&(d+=yt(e,r)),Pe(e,r+1,f,!0,c)&&(e.dump&&Ur===e.dump.charCodeAt(0)?d+=":":d+=": ",d+=e.dump,n+=d));e.tag=o,e.dump=n||"{}"}function _n(e,r,t){var i,n,o,a,s,l;for(n=t?e.explicitTypes:e.implicitTypes,o=0,a=n.length;o<a;o+=1)if(s=n[o],(s.instanceOf||s.predicate)&&(!s.instanceOf||typeof r=="object"&&r instanceof s.instanceOf)&&(!s.predicate||s.predicate(r))){if(e.tag=t?s.tag:"?",s.represent){if(l=e.styleMap[s.tag]||s.defaultStyle,xi.call(s.represent)==="[object Function]")i=s.represent(r,l);else if(Ai.call(s.represent,l))i=s.represent[l](r,l);else throw new ur("!<"+s.tag+'> tag resolver accepts not "'+l+'" style');e.dump=i}return!0}return!1}function Pe(e,r,t,i,n,o){e.tag=null,e.dump=t,_n(e,t,!1)||_n(e,t,!0);var a=xi.call(e.dump);i&&(i=e.flowLevel<0||e.flowLevel>r);var s=a==="[object Object]"||a==="[object Array]",l,u;if(s&&(l=e.duplicates.indexOf(t),u=l!==-1),(e.tag!==null&&e.tag!=="?"||u||e.indent!==2&&r>0)&&(n=!1),u&&e.usedDuplicates[l])e.dump="*ref_"+l;else{if(s&&u&&!e.usedDuplicates[l]&&(e.usedDuplicates[l]=!0),a==="[object Object]")i&&Object.keys(e.dump).length!==0?(Jl(e,r,e.dump,n),u&&(e.dump="&ref_"+l+e.dump)):(Gl(e,r,e.dump),u&&(e.dump="&ref_"+l+" "+e.dump));else if(a==="[object Array]"){var f=e.noArrayIndent&&r>0?r-1:r;i&&e.dump.length!==0?(zl(e,f,e.dump,n),u&&(e.dump="&ref_"+l+e.dump)):(Wl(e,f,e.dump),u&&(e.dump="&ref_"+l+" "+e.dump))}else if(a==="[object String]")e.tag!=="?"&&Vl(e,e.dump,r,o);else{if(e.skipInvalid)return!1;throw new ur("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function Kl(e,r){var t=[],i=[],n,o;for(vt(e,t,i),n=0,o=i.length;n<o;n+=1)r.duplicates.push(t[i[n]]);r.usedDuplicates=new Array(o)}function vt(e,r,t){var i,n,o;if(e!==null&&typeof e=="object")if(n=r.indexOf(e),n!==-1)t.indexOf(n)===-1&&t.push(n);else if(r.push(e),Array.isArray(e))for(n=0,o=e.length;n<o;n+=1)vt(e[n],r,t);else for(i=Object.keys(e),n=0,o=i.length;n<o;n+=1)vt(e[i[n]],r,t)}function Ui(e,r){r=r||{};var t=new Ul(r);return t.noRefs||Kl(e,t),Pe(t,0,e,!0,!0)?t.dump+`
`:""}function Xl(e,r){return Ui(e,lr.extend({schema:wl},r))}kt.dump=Ui;kt.safeDump=Xl;var qr=or,Bi=kt;function Wr(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}D.Type=V;D.Schema=Ve;D.FAILSAFE_SCHEMA=Tt;D.JSON_SCHEMA=ci;D.CORE_SCHEMA=fi;D.DEFAULT_SAFE_SCHEMA=sr;D.DEFAULT_FULL_SCHEMA=Vr;D.load=qr.load;D.loadAll=qr.loadAll;D.safeLoad=qr.safeLoad;D.safeLoadAll=qr.safeLoadAll;D.dump=Bi.dump;D.safeDump=Bi.safeDump;D.YAMLException=ar;D.MINIMAL_SCHEMA=Tt;D.SAFE_SCHEMA=sr;D.DEFAULT_SCHEMA=Vr;D.scan=Wr("scan");D.parse=Wr("parse");D.compose=Wr("compose");D.addConstructor=Wr("addConstructor");var Ql=D,Zl=Ql;const{ParserError:eu}=B,ru=Zl;var tu={order:200,allowEmpty:!0,canParse:[".yaml",".yml",".json"],async parse(e){let r=e.data;if(Buffer.isBuffer(r)&&(r=r.toString()),typeof r=="string")try{return ru.load(r)}catch(t){throw new eu(t.message,e.url)}else return r}};const{ParserError:nu}=B;let iu=/\.(txt|htm|html|md|xml|js|min|map|css|scss|less|svg)$/i;var ou={order:300,allowEmpty:!0,encoding:"utf8",canParse(e){return(typeof e.data=="string"||Buffer.isBuffer(e.data))&&iu.test(e.url)},parse(e){if(typeof e.data=="string")return e.data;if(Buffer.isBuffer(e.data))return e.data.toString(this.encoding);throw new nu("data is not text",e.url)}};let au=/\.(jpeg|jpg|gif|png|bmp|ico)$/i;var su={order:400,allowEmpty:!0,canParse(e){return Buffer.isBuffer(e.data)&&au.test(e.url)},parse(e){return Buffer.isBuffer(e.data)?e.data:Buffer.from(e.data)}};const lu=Ot,{ono:nt}=Ne,xn=K.exports,{ResolverError:it}=B;var uu={order:100,canRead(e){return xn.isFileSystemPath(e.url)},read(e){return new Promise((r,t)=>{let i;try{i=xn.toFileSystemPath(e.url)}catch(n){t(new it(nt.uri(n,`Malformed URI: ${e.url}`),e.url))}try{lu.readFile(i,(n,o)=>{n?t(new it(nt(n,`Error opening file "${i}"`),i)):r(o)})}catch(n){t(new it(nt(n,`Error opening file "${i}"`),i))}})}};const cu=Ot,fu=Ot,{ono:mr}=Ne,Ge=K.exports,{ResolverError:An}=B;var du={order:200,headers:null,timeout:5e3,redirects:5,withCredentials:!1,canRead(e){return Ge.isHttp(e.url)},read(e){let r=Ge.parse(e.url);return r.protocol||(r.protocol=Ge.parse(location.href).protocol),ji(r,this)}};function ji(e,r,t){return new Promise((i,n)=>{e=Ge.parse(e),t=t||[],t.push(e.href),hu(e,r).then(o=>{if(o.statusCode>=400)throw mr({status:o.statusCode},`HTTP ERROR ${o.statusCode}`);if(o.statusCode>=300)if(t.length>r.redirects)n(new An(mr({status:o.statusCode},`Error downloading ${t[0]}. 
Too many redirects: 
  ${t.join(` 
  `)}`)));else if(o.headers.location){let a=Ge.resolve(e,o.headers.location);ji(a,r,t).then(i,n)}else throw mr({status:o.statusCode},`HTTP ${o.statusCode} redirect with no location header`);else i(o.body||Buffer.alloc(0))}).catch(o=>{n(new An(mr(o,`Error downloading ${e.href}`),e.href))})})}function hu(e,r){return new Promise((t,i)=>{let o=(e.protocol==="https:"?fu:cu).get({hostname:e.hostname,port:e.port,path:e.path,auth:e.auth,protocol:e.protocol,headers:r.headers||{},withCredentials:r.withCredentials});typeof o.setTimeout=="function"&&o.setTimeout(r.timeout),o.on("timeout",()=>{o.abort()}),o.on("error",i),o.once("response",a=>{a.body=Buffer.alloc(0),a.on("data",s=>{a.body=Buffer.concat([a.body,Buffer.from(s)])}),a.on("error",i),a.on("end",()=>{t(a)})})})}const pu=aa,mu=tu,gu=ou,yu=su,vu=uu,Su=du;var bu=$t;function $t(e){St(this,$t.defaults),St(this,e)}$t.defaults={parse:{json:pu,yaml:mu,text:gu,binary:yu},resolve:{file:vu,http:Su,external:!0},continueOnError:!1,dereference:{circular:!0}};function St(e,r){if(On(r)){let t=Object.keys(r);for(let i=0;i<t.length;i++){let n=t[i],o=r[n],a=e[n];On(o)?e[n]=St(a||{},o):o!==void 0&&(e[n]=o)}}return e}function On(e){return e&&typeof e=="object"&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}const Rn=bu;var Eu=wu;function wu(e){let r,t,i,n;return e=Array.prototype.slice.call(e),typeof e[e.length-1]=="function"&&(n=e.pop()),typeof e[0]=="string"?(r=e[0],typeof e[2]=="object"?(t=e[1],i=e[2]):(t=void 0,i=e[1])):(r="",t=e[0],i=e[1]),i instanceof Rn||(i=new Rn(i)),{path:r,schema:t,options:i,callback:n}}const Cn=nr(),_u=Hr(),xu=si,We=K.exports,{isHandledError:Au}=B;var Ou=Ru;function Ru(e,r){if(!r.resolve.external)return Promise.resolve();try{let t=It(e.schema,e.$refs._root$Ref.path+"#",e.$refs,r);return Promise.all(t)}catch(t){return Promise.reject(t)}}function It(e,r,t,i,n){n=n||new Set;let o=[];if(e&&typeof e=="object"&&!ArrayBuffer.isView(e)&&!n.has(e))if(n.add(e),Cn.isExternal$Ref(e))o.push(Tn(e,r,t,i));else for(let a of Object.keys(e)){let s=_u.join(r,a),l=e[a];Cn.isExternal$Ref(l)?o.push(Tn(l,s,t,i)):o=o.concat(It(l,s,t,i,n))}return o}async function Tn(e,r,t,i){let n=We.resolve(r,e.$ref),o=We.stripHash(n);if(e=t._$refs[o],e)return Promise.resolve(e.value);try{const a=await xu(n,t,i);let s=It(a,o+"#",t,i);return Promise.all(s)}catch(a){if(!i.continueOnError||!Au(a))throw a;return t._$refs[o]&&(a.source=We.stripHash(r),a.path=We.safePointerToPath(We.getHash(r))),[]}}const Br=nr(),Qe=Hr(),ot=K.exports;var Cu=Tu;function Tu(e,r){let t=[];Dt(e,"schema",e.$refs._root$Ref.path+"#","#",0,t,e.$refs,r),Fu(t)}function Dt(e,r,t,i,n,o,a,s){let l=r===null?e:e[r];if(l&&typeof l=="object"&&!ArrayBuffer.isView(l))if(Br.isAllowed$Ref(l))Fn(e,r,t,i,n,o,a,s);else{let u=Object.keys(l).sort((f,c)=>f==="definitions"?-1:c==="definitions"?1:f.length-c.length);for(let f of u){let c=Qe.join(t,f),d=Qe.join(i,f),h=l[f];Br.isAllowed$Ref(h)?Fn(l,f,t,d,n,o,a,s):Dt(l,f,c,d,n,o,a,s)}}}function Fn(e,r,t,i,n,o,a,s){let l=r===null?e:e[r],u=ot.resolve(t,l.$ref),f=a._resolve(u,i,s);if(f===null)return;let c=Qe.parse(i).length,d=ot.stripHash(f.path),h=ot.getHash(f.path),p=d!==a._root$Ref.path,S=Br.isExtended$Ref(l);n+=f.indirections;let y=Pu(o,e,r);if(y)if(c<y.depth||n<y.indirections)Nu(o,y);else return;o.push({$ref:l,parent:e,key:r,pathFromRoot:i,depth:c,file:d,hash:h,value:f.value,circular:f.circular,extended:S,external:p,indirections:n}),y||Dt(f.value,null,f.path,i,n+1,o,a,s)}function Fu(e){e.sort((n,o)=>{if(n.file!==o.file)return n.file<o.file?-1:1;if(n.hash!==o.hash)return n.hash<o.hash?-1:1;if(n.circular!==o.circular)return n.circular?-1:1;if(n.extended!==o.extended)return n.extended?1:-1;if(n.indirections!==o.indirections)return n.indirections-o.indirections;if(n.depth!==o.depth)return n.depth-o.depth;{let a=n.pathFromRoot.lastIndexOf("/definitions"),s=o.pathFromRoot.lastIndexOf("/definitions");return a!==s?s-a:n.pathFromRoot.length-o.pathFromRoot.length}});let r,t,i;for(let n of e)n.external?n.file===r&&n.hash===t?n.$ref.$ref=i:n.file===r&&n.hash.indexOf(t+"/")===0?n.$ref.$ref=Qe.join(i,Qe.parse(n.hash.replace(t,"#"))):(r=n.file,t=n.hash,i=n.pathFromRoot,n.$ref=n.parent[n.key]=Br.dereference(n.$ref,n.value),n.circular&&(n.$ref.$ref=n.pathFromRoot)):n.$ref.$ref=n.hash}function Pu(e,r,t){for(let i=0;i<e.length;i++){let n=e[i];if(n.parent===r&&n.key===t)return n}}function Nu(e,r){let t=e.indexOf(r);e.splice(t,1)}const bt=nr(),Pn=Hr(),{ono:ku}=Ne,$u=K.exports;var Iu=Du;function Du(e,r){let t=Mt(e.schema,e.$refs._root$Ref.path,"#",new Set,new Set,new Map,e.$refs,r);e.$refs.circular=t.circular,e.schema=t.value}function Mt(e,r,t,i,n,o,a,s){let l,u={value:e,circular:!1};if((s.dereference.circular==="ignore"||!n.has(e))&&e&&typeof e=="object"&&!ArrayBuffer.isView(e)){if(i.add(e),n.add(e),bt.isAllowed$Ref(e,s))l=Nn(e,r,t,i,n,o,a,s),u.circular=l.circular,u.value=l.value;else for(const f of Object.keys(e)){let c=Pn.join(r,f),d=Pn.join(t,f),h=e[f],p=!1;bt.isAllowed$Ref(h,s)?(l=Nn(h,c,d,i,n,o,a,s),p=l.circular,e[f]!==l.value&&(e[f]=l.value)):i.has(h)?p=Hi(c,a,s):(l=Mt(h,c,d,i,n,o,a,s),p=l.circular,e[f]!==l.value&&(e[f]=l.value)),u.circular=u.circular||p}i.delete(e)}return u}function Nn(e,r,t,i,n,o,a,s){let l=$u.resolve(r,e.$ref);const u=o.get(l);if(u){const S=Object.keys(e);if(S.length>1){const y={};for(let E of S)E!=="$ref"&&!(E in u.value)&&(y[E]=e[E]);return{circular:u.circular,value:Object.assign({},u.value,y)}}return u}let f=a._resolve(l,r,s);if(f===null)return{circular:!1,value:null};let c=f.circular,d=c||i.has(f.value);d&&Hi(r,a,s);let h=bt.dereference(e,f.value);if(!d){let S=Mt(h,f.path,t,i,n,o,a,s);d=S.circular,h=S.value}d&&!c&&s.dereference.circular==="ignore"&&(h=e),c&&(h.$ref=t);const p={circular:d,value:h};return Object.keys(e).length===1&&o.set(l,p),p}function Hi(e,r,t){if(r.circular=!0,!t.dereference.circular)throw ku.reference(`Circular $ref pointer found at ${e}`);return!0}var kn=Gt.process&&process.nextTick||Gt.setImmediate||function(e){setTimeout(e,0)},Mu=function(r,t){if(r){t.then(function(i){kn(function(){r(null,i)})},function(i){kn(function(){r(i)})});return}else return t};const Vi=Xo,Lu=si,zr=Eu,Uu=Ou,Bu=Cu,ju=Iu,De=K.exports,{JSONParserError:Hu,InvalidPointerError:Vu,MissingPointerError:Yu,ResolverError:qu,ParserError:Wu,UnmatchedParserError:zu,UnmatchedResolverError:Gu,isHandledError:Ju,JSONParserErrorGroup:$n}=B,te=Mu,{ono:In}=Ne;fe.exports=he;fe.exports.default=he;fe.exports.JSONParserError=Hu;fe.exports.InvalidPointerError=Vu;fe.exports.MissingPointerError=Yu;fe.exports.ResolverError=qu;fe.exports.ParserError=Wu;fe.exports.UnmatchedParserError=zu;fe.exports.UnmatchedResolverError=Gu;function he(){this.schema=null,this.$refs=new Vi}he.parse=function(r,t,i,n){let o=this,a=new o;return a.parse.apply(a,arguments)};he.prototype.parse=async function(r,t,i,n){let o=zr(arguments),a;if(!o.path&&!o.schema){let u=In(`Expected a file path, URL, or object. Got ${o.path||o.schema}`);return te(o.callback,Promise.reject(u))}this.schema=null,this.$refs=new Vi;let s="http";if(De.isFileSystemPath(o.path)&&(o.path=De.fromFileSystemPath(o.path),s="file"),o.path=De.resolve(De.cwd(),o.path),o.schema&&typeof o.schema=="object"){let u=this.$refs._add(o.path);u.value=o.schema,u.pathType=s,a=Promise.resolve(o.schema)}else a=Lu(o.path,this.$refs,o.options);let l=this;try{let u=await a;if(u!==null&&typeof u=="object"&&!Buffer.isBuffer(u))return l.schema=u,te(o.callback,Promise.resolve(l.schema));if(o.options.continueOnError)return l.schema=null,te(o.callback,Promise.resolve(l.schema));throw In.syntax(`"${l.$refs._root$Ref.path||u}" is not a valid JSON Schema`)}catch(u){return!o.options.continueOnError||!Ju(u)?te(o.callback,Promise.reject(u)):(this.$refs._$refs[De.stripHash(o.path)]&&this.$refs._$refs[De.stripHash(o.path)].addError(u),te(o.callback,Promise.resolve(null)))}};he.resolve=function(r,t,i,n){let o=this,a=new o;return a.resolve.apply(a,arguments)};he.prototype.resolve=async function(r,t,i,n){let o=this,a=zr(arguments);try{return await this.parse(a.path,a.schema,a.options),await Uu(o,a.options),Lt(o),te(a.callback,Promise.resolve(o.$refs))}catch(s){return te(a.callback,Promise.reject(s))}};he.bundle=function(r,t,i,n){let o=this,a=new o;return a.bundle.apply(a,arguments)};he.prototype.bundle=async function(r,t,i,n){let o=this,a=zr(arguments);try{return await this.resolve(a.path,a.schema,a.options),Bu(o,a.options),Lt(o),te(a.callback,Promise.resolve(o.schema))}catch(s){return te(a.callback,Promise.reject(s))}};he.dereference=function(r,t,i,n){let o=this,a=new o;return a.dereference.apply(a,arguments)};he.prototype.dereference=async function(r,t,i,n){let o=this,a=zr(arguments);try{return await this.resolve(a.path,a.schema,a.options),ju(o,a.options),Lt(o),te(a.callback,Promise.resolve(o.schema))}catch(s){return te(a.callback,Promise.reject(s))}};function Lt(e){if($n.getParserErrors(e).length>0)throw new $n(e)}var Et={exports:{}},ne={},me={},cr={},Je=typeof Symbol=="function"?Symbol("curriable placeholder"):60881;function Ku(e,r){function t(i){return function(){var n=i.length,o=arguments,a=o.length,s=[],l=0,u=r,f;if(n)for(var c=-1;++c<n;)s[c]=f=i[c]===Je&&l<a?o[l++]:i[c],f!==Je&&--u;if(l<a)for(;l<a;)s[s.length]=f=o[l],f!==Je&&l<r&&--u,++l;return u>0?t(s):e.apply(this,s)}}return t([])}function ke(e,r){var t=typeof r=="number"?r:e.length,i=Ku(e,t);return i.arity=t,i.fn=e,i}ke.__=Je;function Xu(e){return e===Je}ke.isPlaceholder=Xu;function Qu(e){return e.fn}ke.uncurry=Qu;var gr,yr,re,Me,Zu=typeof Buffer<"u"&&typeof Buffer.from=="function",ec=typeof Uint16Array=="function",rc=/\[object (HTML(.*)Element)\]/,tc=/\[object (SVG(.*)Element)\]/,nc=["Arguments","Array","ArrayBuffer","Boolean","DataView","Date","DocumentFragment","Error","Event","Float32Array","Float64Array","Function","Generator","GeneratorFunction","HTMLElement","Int8Array","Int16Array","Int32Array","Map","Null","Number","Object","Promise","RegExp","Set","String","Symbol","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","Undefined","WeakMap","WeakSet","Window"],le=nc.reduce(function(e,r){return e["[object "+r+"]"]=r,e},{}),k=Object.keys(le).reduce(function(e,r){return e[le[r].toUpperCase()]=r,e},{}),ic={"[object Map]":!0,"[object Set]":!0},oc={boolean:!0,function:!0,number:!0,string:!0,undefined:!0},ac=(gr={},gr[k.ARGUMENTS]=!0,gr[k.ARRAY]=!0,gr),sc=(yr={},yr[k.REGEXP]=!0,yr[k.SYMBOL]=!0,yr),lc=(re={},re[k.FLOAT32ARRAY]=!0,re[k.FLOAT64ARRAY]=!0,re[k.INT8ARRAY]=!0,re[k.INT16ARRAY]=!0,re[k.INT32ARRAY]=!0,re[k.UINT8ARRAY]=!0,re[k.UINT8CLAMPEDARRAY]=!0,re[k.UINT16ARRAY]=!0,re[k.UINT32ARRAY]=!0,re),uc=(Me={},Me[k.GENERATOR]=!0,Me[k.PROMISE]=!0,Me[k.WEAKMAP]=!0,Me[k.WEAKSET]=!0,Me),cc=/^\s*function\s*([^(]*)/i,Yi=Object.prototype.toString,fc=Object.keys;function dc(e){return e.name||(e.toString().match(cc)||[])[1]||"anonymous"}function hc(e){for(var r=e.length,t=5381,i=52711,n;r--;)n=e.charCodeAt(r),t=t*33^n,i=i*33^n;return(t>>>0)*4096+(i>>>0)}function pc(e){return{bubbles:e.bubbles,cancelBubble:e.cancelBubble,cancelable:e.cancelable,composed:e.composed,currentTarget:e.currentTarget,defaultPrevented:e.defaultPrevented,eventPhase:e.eventPhase,isTrusted:e.isTrusted,returnValue:e.returnValue,target:e.target,type:e.type}}function qi(e,r){return e>r}function mc(e,r){return e[0]>r[0]}function wt(e,r){for(var t,i,n=0;n<e.length;++n){for(i=e[n],t=n-1;~t&&r(e[t],i);--t)e[t+1]=e[t];e[t+1]=i}return e}function gc(e,r,t){var i=typeof e.get=="function",n=[];i?(e.forEach(function(u,f){n.push([Ar(f,r,t),Ar(u,r,t)])}),wt(n,mc)):(e.forEach(function(u){n.push(Ar(u,r,t))}),wt(n,qi));for(var o=dc(e.constructor)+"|[",a=0,s=n.length,l;a<s;++a)l=n[a],o+=(a?",":"")+(i?"["+l[0]+","+l[1]+"]":l);return o+"]"}function yc(e){for(var r=wt(fc(e),qi),t={},i,n=0;n<r.length;++n)i=r[n],t[i]=e[i];return t}function vc(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function Sc(e){return Buffer.from(e).toString("utf8")}function bc(){return""}var Dn=function(){return Zu?Sc:ec?vc:bc}();function Ec(e){for(var r=e.children,t="",i=0;i<r.length;++i)t+=r[i].outerHTML;return t}function Mn(e,r){for(var t=0;t<e.length;++t)if(e[t]===r)return t+1;return 0}function jr(e,r,t,i){if(i===void 0){var n=typeof e;if(n==="string"||oc[n])return n+"|"+e;if(e===null)return"null|"+e}var o=i||Yi.call(e);return ac[o]?e:o===k.OBJECT?yc(e):sc[o]?le[o]+"|"+e.toString():ic[o]?gc(e,r,t):o===k.DATE?le[o]+"|"+e.getTime():o===k.ERROR?le[o]+"|"+e.stack:o===k.EVENT?pc(e):uc[o]?le[o]+"|NOT_ENUMERABLE":rc.test(o)||tc.test(o)?o.slice(8,-1)+"|"+e.outerHTML:o===k.DOCUMENTFRAGMENT?le[o]+"|"+Ec(e):lc[o]?le[o]+"|"+e.join(","):o===k.ARRAYBUFFER?le[o]+"|"+Dn(e):o===k.DATAVIEW?le[o]+"|"+Dn(e.buffer):e}function wc(e,r){return e===void 0&&(e=[]),r===void 0&&(r=[]),function(t,i){if(typeof i=="object")if(e.length){var n=Mn(e,this);n===0?e.push(this):(e.splice(n),r.splice(n)),r.push(t);var o=Mn(e,i);if(o!==0)return"[~"+(r.slice(0,o).join(".")||".")+"]";e.push(i)}else e[0]=i,r[0]=t;return t&&this[t]instanceof Date?jr(this[t],e,r,k.DATE):jr(i,e,r)}}function Ar(e,r,t){if(!e||typeof e!="object")return jr(e,r,t);var i=Yi.call(e);return i===k.DATE||i===k.REGEXP?jr(e,r,t,i):JSON.stringify(e,wc(r,t))}function Z(e){return hc(Ar(e))}Z.is=ke(function(e,r){return Z(e)===Z(r)});Z.is.all=ke(function(e){for(var r=Z.is(e),t=1;t<arguments.length;++t)if(!r(arguments[t]))return!1;return!0},2);Z.is.any=ke(function(e){for(var r=Z.is(e),t=1;t<arguments.length;t++)if(r(arguments[t]))return!0;return!1},2);Z.is.not=ke(function(e,r){return Z(e)!==Z(r)});const _c=Object.freeze(Object.defineProperty({__proto__:null,hash:Z,default:Z},Symbol.toStringTag,{value:"Module"})),xc=At(_c);Object.defineProperty(cr,"__esModule",{value:!0});var Ac=function(){function e(r,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),r}}(),Oc=xc,Rc=Cc(Oc);function Cc(e){return e&&e.__esModule?e:{default:e}}function Tc(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var Ut=function(){function e(r,t,i){Tc(this,e),this.id=r;var n={cache:!0};if(typeof i>"u"&&(i=n),typeof t!="function"?(this.value=t,this.type=this.constructor.CONSTANT):(this.calculationMethod=t,this.type=this.constructor.DYNAMIC),!this.id)throw new Error("factId required");if(typeof this.value>"u"&&typeof this.calculationMethod>"u")throw new Error("facts must have a value or method");return this.priority=parseInt(i.priority||1,10),this.options=Object.assign({},n,i),this.cacheKeyMethod=this.defaultCacheKeys,this}return Ac(e,[{key:"isConstant",value:function(){return this.type===this.constructor.CONSTANT}},{key:"isDynamic",value:function(){return this.type===this.constructor.DYNAMIC}},{key:"calculate",value:function(t,i){return this.hasOwnProperty("value")?this.value:this.calculationMethod(t,i)}},{key:"defaultCacheKeys",value:function(t,i){return{params:i,id:t}}},{key:"getCacheKey",value:function(t){if(this.options.cache===!0){var i=this.cacheKeyMethod(this.id,t),n=e.hashFromObject(i);return n}}}],[{key:"hashFromObject",value:function(t){return(0,Rc.default)(t)}}]),e}();Ut.CONSTANT="CONSTANT";Ut.DYNAMIC="DYNAMIC";cr.default=Ut;var Gr={},Bt={},Ye={};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.default=Fc;function Fc(e){(typeof process<"u"&&process.env&&process.env.DEBUG&&process.env.DEBUG.match(/json-rules-engine/)||typeof window<"u"&&window.localStorage&&window.localStorage.debug&&window.localStorage.debug.match(/json-rules-engine/))&&console.log(e)}function Pc(e){return!!e&&typeof e=="object"}var Wi=Pc;Object.defineProperty(Bt,"__esModule",{value:!0});var Nc=function(){function e(r,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),r}}(),kc=Ye,$c=zi(kc),Ic=Wi,Dc=zi(Ic);function zi(e){return e&&e.__esModule?e:{default:e}}function Mc(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var Lc=function(){function e(r){if(Mc(this,e),!r)throw new Error("Condition: constructor options required");var t=e.booleanOperator(r);if(Object.assign(this,r),t){var i=r[t];if(!Array.isArray(i))throw new Error('"'+t+'" must be an array');this.operator=t,this.priority=parseInt(r.priority,10)||1,this[t]=i.map(function(n){return new e(n)})}else{if(!r.hasOwnProperty("fact"))throw new Error('Condition: constructor "fact" property required');if(!r.hasOwnProperty("operator"))throw new Error('Condition: constructor "operator" property required');if(!r.hasOwnProperty("value"))throw new Error('Condition: constructor "value" property required');r.hasOwnProperty("priority")&&(r.priority=parseInt(r.priority,10))}}return Nc(e,[{key:"toJSON",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i={};this.priority&&(i.priority=this.priority);var n=e.booleanOperator(this);return n?i[n]=this[n].map(function(o){return o.toJSON(t)}):(i.operator=this.operator,i.value=this.value,i.fact=this.fact,this.factResult!==void 0&&(i.factResult=this.factResult),this.result!==void 0&&(i.result=this.result),this.params&&(i.params=this.params),this.path&&(i.path=this.path)),t?JSON.stringify(i):i}},{key:"_getValue",value:function(t){var i=this.value;return(0,Dc.default)(i)&&i.hasOwnProperty("fact")?t.factValue(i.fact,i.params,i.path):Promise.resolve(i)}},{key:"evaluate",value:function(t,i){var n=this;if(!t)return Promise.reject(new Error("almanac required"));if(!i)return Promise.reject(new Error("operatorMap required"));if(this.isBooleanOperator())return Promise.reject(new Error("Cannot evaluate() a boolean condition"));var o=i.get(this.operator);return o?this._getValue(t).then(function(a){return t.factValue(n.fact,n.params,n.path).then(function(s){var l=o.evaluate(s,a);return(0,$c.default)("condition::evaluate <"+s+" "+n.operator+" "+a+"?> ("+l+")"),{result:l,leftHandSideValue:s,rightHandSideValue:a,operator:n.operator}})}):Promise.reject(new Error("Unknown operator: "+this.operator))}},{key:"booleanOperator",value:function(){return e.booleanOperator(this)}},{key:"isBooleanOperator",value:function(){return e.booleanOperator(this)!==void 0}}],[{key:"booleanOperator",value:function(t){if(t.hasOwnProperty("any"))return"any";if(t.hasOwnProperty("all"))return"all"}}]),e}();Bt.default=Lc;var jt={},Gi={exports:{}};(function(e){var r=function(){function t(d,h){return h!=null&&d instanceof h}var i;try{i=Map}catch{i=function(){}}var n;try{n=Set}catch{n=function(){}}var o;try{o=Promise}catch{o=function(){}}function a(d,h,p,S,y){typeof h=="object"&&(p=h.depth,S=h.prototype,y=h.includeNonEnumerable,h=h.circular);var E=[],x=[],M=typeof Buffer<"u";typeof h>"u"&&(h=!0),typeof p>"u"&&(p=1/0);function L(_,I){if(_===null)return null;if(I===0)return _;var A,Y;if(typeof _!="object")return _;if(t(_,i))A=new i;else if(t(_,n))A=new n;else if(t(_,o))A=new o(function(ve,J){_.then(function(Oe){ve(L(Oe,I-1))},function(Oe){J(L(Oe,I-1))})});else if(a.__isArray(_))A=[];else if(a.__isRegExp(_))A=new RegExp(_.source,c(_)),_.lastIndex&&(A.lastIndex=_.lastIndex);else if(a.__isDate(_))A=new Date(_.getTime());else{if(M&&Buffer.isBuffer(_))return Buffer.allocUnsafe?A=Buffer.allocUnsafe(_.length):A=new Buffer(_.length),_.copy(A),A;t(_,Error)?A=Object.create(_):typeof S>"u"?(Y=Object.getPrototypeOf(_),A=Object.create(Y)):(A=Object.create(S),Y=S)}if(h){var ae=E.indexOf(_);if(ae!=-1)return x[ae];E.push(_),x.push(A)}t(_,i)&&_.forEach(function(ve,J){var Oe=L(J,I-1),Qr=L(ve,I-1);A.set(Oe,Qr)}),t(_,n)&&_.forEach(function(ve){var J=L(ve,I-1);A.add(J)});for(var W in _){var ge;Y&&(ge=Object.getOwnPropertyDescriptor(Y,W)),!(ge&&ge.set==null)&&(A[W]=L(_[W],I-1))}if(Object.getOwnPropertySymbols)for(var dr=Object.getOwnPropertySymbols(_),W=0;W<dr.length;W++){var ye=dr[W],se=Object.getOwnPropertyDescriptor(_,ye);se&&!se.enumerable&&!y||(A[ye]=L(_[ye],I-1),se.enumerable||Object.defineProperty(A,ye,{enumerable:!1}))}if(y)for(var hr=Object.getOwnPropertyNames(_),W=0;W<hr.length;W++){var $e=hr[W],se=Object.getOwnPropertyDescriptor(_,$e);se&&se.enumerable||(A[$e]=L(_[$e],I-1),Object.defineProperty(A,$e,{enumerable:!1}))}return A}return L(d,p)}a.clonePrototype=function(h){if(h===null)return null;var p=function(){};return p.prototype=h,new p};function s(d){return Object.prototype.toString.call(d)}a.__objToStr=s;function l(d){return typeof d=="object"&&s(d)==="[object Date]"}a.__isDate=l;function u(d){return typeof d=="object"&&s(d)==="[object Array]"}a.__isArray=u;function f(d){return typeof d=="object"&&s(d)==="[object RegExp]"}a.__isRegExp=f;function c(d){var h="";return d.global&&(h+="g"),d.ignoreCase&&(h+="i"),d.multiline&&(h+="m"),h}return a.__getRegExpFlags=c,a}();e.exports&&(e.exports=r)})(Gi);Object.defineProperty(jt,"__esModule",{value:!0});var Uc=function(){function e(r,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),r}}(),Bc=Gi.exports,vr=jc(Bc);function jc(e){return e&&e.__esModule?e:{default:e}}function Hc(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var Vc=function(){function e(r,t,i,n){Hc(this,e),this.conditions=(0,vr.default)(r),this.event=(0,vr.default)(t),this.priority=(0,vr.default)(i),this.name=(0,vr.default)(n),this.result=null}return Uc(e,[{key:"setResult",value:function(t){this.result=t}},{key:"toJSON",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i={conditions:this.conditions.toJSON(!1),event:this.event,priority:this.priority,name:this.name,result:this.result};return t?JSON.stringify(i):i}}]),e}();jt.default=Vc;Object.defineProperty(Gr,"__esModule",{value:!0});var Yc=function(){function e(r,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),r}}(),qc=Bt,Wc=Ht(qc),zc=jt,Gc=Ht(zc),Jc=Gn.exports,Kc=Ye,at=Ht(Kc);function Ht(e){return e&&e.__esModule?e:{default:e}}function Xc(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Qc(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function Zc(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var ef=function(e){Zc(r,e);function r(t){Xc(this,r);var i=Qc(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));typeof t=="string"&&(t=JSON.parse(t)),t&&t.conditions&&i.setConditions(t.conditions),t&&t.onSuccess&&i.on("success",t.onSuccess),t&&t.onFailure&&i.on("failure",t.onFailure),t&&(t.name||t.name===0)&&i.setName(t.name);var n=t&&t.priority||1;i.setPriority(n);var o=t&&t.event||{type:"unknown"};return i.setEvent(o),i}return Yc(r,[{key:"setPriority",value:function(i){if(i=parseInt(i,10),i<=0)throw new Error("Priority must be greater than zero");return this.priority=i,this}},{key:"setName",value:function(i){if(!i&&i!==0)throw new Error('Rule "name" must be defined');return this.name=i,this}},{key:"setConditions",value:function(i){if(!i.hasOwnProperty("all")&&!i.hasOwnProperty("any"))throw new Error('"conditions" root must contain a single instance of "all" or "any"');return this.conditions=new Wc.default(i),this}},{key:"setEvent",value:function(i){if(!i)throw new Error("Rule: setEvent() requires event object");if(!i.hasOwnProperty("type"))throw new Error('Rule: setEvent() requires event object with "type" property');return this.event={type:i.type},i.params&&(this.event.params=i.params),this}},{key:"setEngine",value:function(i){return this.engine=i,this}},{key:"toJSON",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n={conditions:this.conditions.toJSON(!1),priority:this.priority,event:this.event,name:this.name};return i?JSON.stringify(n):n}},{key:"prioritizeConditions",value:function(i){var n=this,o=i.reduce(function(a,s){var l=s.priority;if(!l){var u=n.engine.getFact(s.fact);l=u&&u.priority||1}return a[l]||(a[l]=[]),a[l].push(s),a},{});return Object.keys(o).sort(function(a,s){return Number(a)>Number(s)?-1:1}).map(function(a){return o[a]})}},{key:"evaluate",value:function(i){var n=this,o=new Gc.default(this.conditions,this.event,this.priority,this.name),a=function(h){if(h.isBooleanOperator()){var p=h[h.operator],S=void 0;return h.operator==="all"?S=f(p):S=u(p),S.then(function(y){var E=y===!0;return h.result=E,E})}else return h.evaluate(i,n.engine.operators).then(function(y){var E=y.result;return h.factResult=y.leftHandSideValue,h.result=E,E})},s=function(h,p){return Array.isArray(h)||(h=[h]),Promise.all(h.map(function(S){return a(S)})).then(function(S){return(0,at.default)("rule::evaluateConditions results",S),p.call(S,function(y){return y===!0})})},l=function(h,p){if(h.length===0)return Promise.resolve(!0);var S=Array.prototype.some;p==="all"&&(S=Array.prototype.every);for(var y=n.prioritizeConditions(h),E=Promise.resolve(),x=function(_){var I=y[_],A=!1;E=E.then(function(Y){return p==="any"&&Y===!0||A?((0,at.default)("prioritizeAndRun::detected truthy result; skipping remaining conditions"),A=!0,!0):p==="all"&&Y===!1||A?((0,at.default)("prioritizeAndRun::detected falsey result; skipping remaining conditions"),A=!0,!1):s(I,S)})},M=0;M<y.length;M++)x(M);return E},u=function(h){return l(h,"any")},f=function(h){return l(h,"all")},c=function(h){return o.setResult(h),h?n.emit("success",o.event,i,o):n.emit("failure",o.event,i,o),o};return o.conditions.any?u(o.conditions.any).then(function(d){return c(d)}):f(o.conditions.all).then(function(d){return c(d)})}}]),r}(Jc.EventEmitter);Gr.default=ef;var fr={};Object.defineProperty(fr,"__esModule",{value:!0});var rf=function(){function e(r,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),r}}();function tf(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var nf=function(){function e(r,t,i){if(tf(this,e),this.name=String(r),!r)throw new Error("Missing operator name");if(typeof t!="function")throw new Error("Missing operator callback");this.cb=t,this.factValueValidator=i,this.factValueValidator||(this.factValueValidator=function(){return!0})}return rf(e,[{key:"evaluate",value:function(t,i){return this.factValueValidator(t)&&this.cb(t,i)}}]),e}();fr.default=nf;var Vt={},Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});function of(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function af(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function sf(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Yt.UndefinedFactError=function(e){sf(r,e);function r(){var t;of(this,r);for(var i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];var a=af(this,(t=r.__proto__||Object.getPrototypeOf(r)).call.apply(t,[this].concat(n)));return a.code="UNDEFINED_FACT",a}return r}(Error);var st,Ln;function lf(){return Ln||(Ln=1,st=function(e){var r=this,t;if(arguments.length<2)t=function(){if(this instanceof t){var o=r.apply(this,arguments);return Object(o)===o?o:this}else return r.apply(e,arguments)};else{for(var i=new Array(arguments.length-1),n=1;n<arguments.length;n++)i[n-1]=arguments[n];t=function(){var o=i.length,a=new Array(o+arguments.length),s;for(s=0;s<o;s++)a[s]=i[s];for(s=0;s<arguments.length;s++)a[o+s]=arguments[s];if(this instanceof t){var l=r.apply(this,a);return Object(l)===l?l:this}else return r.apply(e,a)}}return t.prototype=r.prototype,t}),st}/*!
 * imports.
 */var uf=Function.prototype.bind||lf();/*!
 * exports.
 */var cf=ff;function ff(e,r){var t=function(){return arguments.length===0?t:arguments.length>1?e.apply(r,arguments):uf.call(e,r,arguments[0])};return t.uncurry=function(){return e},t}var _t={exports:{}},xt={exports:{}},Ze=1e3,er=Ze*60,rr=er*60,tr=rr*24,df=tr*365.25,hf=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return pf(e);if(t==="number"&&isNaN(e)===!1)return r.long?gf(e):mf(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function pf(e){if(e=String(e),!(e.length>100)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!!r){var t=parseFloat(r[1]),i=(r[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return t*df;case"days":case"day":case"d":return t*tr;case"hours":case"hour":case"hrs":case"hr":case"h":return t*rr;case"minutes":case"minute":case"mins":case"min":case"m":return t*er;case"seconds":case"second":case"secs":case"sec":case"s":return t*Ze;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function mf(e){return e>=tr?Math.round(e/tr)+"d":e>=rr?Math.round(e/rr)+"h":e>=er?Math.round(e/er)+"m":e>=Ze?Math.round(e/Ze)+"s":e+"ms"}function gf(e){return Sr(e,tr,"day")||Sr(e,rr,"hour")||Sr(e,er,"minute")||Sr(e,Ze,"second")||e+" ms"}function Sr(e,r,t){if(!(e<r))return e<r*1.5?Math.floor(e/r)+" "+t:Math.ceil(e/r)+" "+t+"s"}(function(e,r){r=e.exports=n.debug=n.default=n,r.coerce=l,r.disable=a,r.enable=o,r.enabled=s,r.humanize=hf,r.names=[],r.skips=[],r.formatters={};var t;function i(u){var f=0,c;for(c in u)f=(f<<5)-f+u.charCodeAt(c),f|=0;return r.colors[Math.abs(f)%r.colors.length]}function n(u){function f(){if(!!f.enabled){var c=f,d=+new Date,h=d-(t||d);c.diff=h,c.prev=t,c.curr=d,t=d;for(var p=new Array(arguments.length),S=0;S<p.length;S++)p[S]=arguments[S];p[0]=r.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var y=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(x,M){if(x==="%%")return x;y++;var L=r.formatters[M];if(typeof L=="function"){var _=p[y];x=L.call(c,_),p.splice(y,1),y--}return x}),r.formatArgs.call(c,p);var E=f.log||r.log||console.log.bind(console);E.apply(c,p)}}return f.namespace=u,f.enabled=r.enabled(u),f.useColors=r.useColors(),f.color=i(u),typeof r.init=="function"&&r.init(f),f}function o(u){r.save(u),r.names=[],r.skips=[];for(var f=(typeof u=="string"?u:"").split(/[\s,]+/),c=f.length,d=0;d<c;d++)!f[d]||(u=f[d].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function a(){r.enable("")}function s(u){var f,c;for(f=0,c=r.skips.length;f<c;f++)if(r.skips[f].test(u))return!1;for(f=0,c=r.names.length;f<c;f++)if(r.names[f].test(u))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}})(xt,xt.exports);(function(e,r){r=e.exports=xt.exports,r.log=n,r.formatArgs=i,r.save=o,r.load=a,r.useColors=t,r.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:s(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function t(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}r.formatters.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}};function i(l){var u=this.useColors;if(l[0]=(u?"%c":"")+this.namespace+(u?" %c":" ")+l[0]+(u?"%c ":" ")+"+"+r.humanize(this.diff),!!u){var f="color: "+this.color;l.splice(1,0,f,"color: inherit");var c=0,d=0;l[0].replace(/%[a-zA-Z%]/g,function(h){h!=="%%"&&(c++,h==="%c"&&(d=c))}),l.splice(d,0,f)}}function n(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(l){try{l==null?r.storage.removeItem("debug"):r.storage.debug=l}catch{}}function a(){var l;try{l=r.storage.debug}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}r.enable(a());function s(){try{return window.localStorage}catch{}}})(_t,_t.exports);/*!
 * exports.
 */var yf=bf;/*!
 * regexp patterns.
 */var vf=/\[([^\[\]]+)\]/g,Sf=/^[.]*|[.]*$/g;function bf(e){return{}.toString.call(e)=="[object String]"?e.replace(vf,".$1").replace(Sf,""):""}var Ef=Object.prototype.toString;function wf(e){for(var r=-1,t=xf(_f(e).split(".")),i=t.length,n=[];++r<i;)n.push(Af(t[r]));return n}function _f(e){return(Ef.call(e)==="[object String]"?e:"").replace(/\\\./g,"\uFFFF")}function xf(e){for(var r=-1,t=e.length,i=[];++r<t;)e[r]&&i.push(e[r]);return i}function Af(e){return e.replace(/\uffff/g,".")}/*!
 * exports.
 */var Of=wf,Rf=cf,Un=_t.exports("selectn"),Cf=yf,Tf=Of,Ff=Object.prototype.toString,Pf=Rf(Nf);function Nf(e,r){Un("arguments:",{path:e,object:r});for(var t=-1,i=Ff.call(e)==="[object Array]"?e:Tf(Cf(e)),n=i.length,o=n?r:void 0;++t<n;){if(Object(o)!==o)return;o=o[i[t]]}return Un("ref:",o),typeof o=="function"?o():o}Object.defineProperty(Vt,"__esModule",{value:!0});var Bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kf=function(){function e(r,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),r}}(),$f=cr,lt=Jr($f),If=Yt,Df=Ye,ze=Jr(Df),Mf=Pf,Lf=Jr(Mf),Uf=Wi,Bf=Jr(Uf);function Jr(e){return e&&e.__esModule?e:{default:e}}function jf(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var Hf=function(){function e(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};jf(this,e),this.factMap=new Map(r),this.factResultsCache=new Map,this.allowUndefinedFacts=Boolean(i.allowUndefinedFacts);for(var n in t){var o=void 0;t[n]instanceof lt.default?o=t[n]:o=new lt.default(n,t[n]),this._addConstantFact(o),(0,ze.default)("almanac::constructor initialized runtime fact:"+o.id+" with "+o.value+"<"+Bn(o.value)+">")}}return kf(e,[{key:"_getFact",value:function(t){return this.factMap.get(t)}},{key:"_addConstantFact",value:function(t){this.factMap.set(t.id,t),this._setFactValue(t,{},t.value)}},{key:"_setFactValue",value:function(t,i,n){var o=t.getCacheKey(i),a=Promise.resolve(n);return o&&this.factResultsCache.set(o,a),a}},{key:"addRuntimeFact",value:function(t,i){var n=new lt.default(t,i);return this._addConstantFact(n)}},{key:"factValue",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",o=void 0,a=this._getFact(t);if(a===void 0)return this.allowUndefinedFacts?Promise.resolve(void 0):Promise.reject(new If.UndefinedFactError("Undefined fact: "+t));if(a.isConstant())o=Promise.resolve(a.calculate(i,this));else{var s=a.getCacheKey(i),l=s&&this.factResultsCache.get(s);l?(o=Promise.resolve(l),(0,ze.default)("almanac::factValue cache hit for fact:"+t)):((0,ze.default)("almanac::factValue cache miss for fact:"+t+"; calculating"),o=this._setFactValue(a,i,a.calculate(i,this)))}return n?o.then(function(u){if((0,Bf.default)(u)){var f=(0,Lf.default)(n)(u);return(0,ze.default)("condition::evaluate extracting object property "+n+", received: "+f),f}else return(0,ze.default)("condition::evaluate could not compute object path("+n+") of non-object: "+u+" <"+(typeof u>"u"?"undefined":Bn(u))+">; continuing with "+u),u}):o}}]),e}();Vt.default=Hf;var qt={};Object.defineProperty(qt,"__esModule",{value:!0});var Vf=function(){var r=[];return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.event&&r.push(t.event),r}};qt.SuccessEventFact=Vf;var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});var Yf=fr,pe=qf(Yf);function qf(e){return e&&e.__esModule?e:{default:e}}var oe=[];oe.push(new pe.default("equal",function(e,r){return e===r}));oe.push(new pe.default("notEqual",function(e,r){return e!==r}));oe.push(new pe.default("in",function(e,r){return r.indexOf(e)>-1}));oe.push(new pe.default("notIn",function(e,r){return r.indexOf(e)===-1}));oe.push(new pe.default("contains",function(e,r){return e.indexOf(r)>-1},Array.isArray));oe.push(new pe.default("doesNotContain",function(e,r){return e.indexOf(r)===-1},Array.isArray));function Kr(e){return Number.parseFloat(e).toString()!=="NaN"}oe.push(new pe.default("lessThan",function(e,r){return e<r},Kr));oe.push(new pe.default("lessThanInclusive",function(e,r){return e<=r},Kr));oe.push(new pe.default("greaterThan",function(e,r){return e>r},Kr));oe.push(new pe.default("greaterThanInclusive",function(e,r){return e>=r},Kr));Wt.default=oe;Object.defineProperty(me,"__esModule",{value:!0});me.FINISHED=me.RUNNING=me.READY=void 0;var Wf=function(){function e(r,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(r,t,i){return t&&e(r.prototype,t),i&&e(r,i),r}}(),zf=cr,br=qe(zf),Gf=Gr,ut=qe(Gf),Jf=fr,ct=qe(Jf),Kf=Vt,Xf=qe(Kf),Qf=Gn.exports,Zf=qt,ed=Wt,rd=qe(ed),td=Ye,Re=qe(td);function qe(e){return e&&e.__esModule?e:{default:e}}function nd(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function id(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function od(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var ad=me.READY="READY",jn=me.RUNNING="RUNNING",Hn=me.FINISHED="FINISHED",sd=function(e){od(r,e);function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};nd(this,r);var n=id(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return n.rules=[],n.allowUndefinedFacts=i.allowUndefinedFacts||!1,n.operators=new Map,n.facts=new Map,n.status=ad,t.map(function(o){return n.addRule(o)}),rd.default.map(function(o){return n.addOperator(o)}),n}return Wf(r,[{key:"addRule",value:function(i){if(!i)throw new Error("Engine: addRule() requires options");if(!i.hasOwnProperty("conditions"))throw new Error('Engine: addRule() argument requires "conditions" property');if(!i.hasOwnProperty("event"))throw new Error('Engine: addRule() argument requires "event" property');var n=void 0;return i instanceof ut.default?n=i:n=new ut.default(i),n.setEngine(this),this.rules.push(n),this.prioritizedRules=null,this}},{key:"removeRule",value:function(i){if(!(i instanceof ut.default))throw new Error("Engine: removeRule() rule must be a instance of Rule");var n=this.rules.indexOf(i);return n===-1?!1:(this.prioritizedRules=null,Boolean(this.rules.splice(n,1).length))}},{key:"addOperator",value:function(i,n){var o=void 0;i instanceof ct.default?o=i:o=new ct.default(i,n),(0,Re.default)("engine::addOperator name:"+o.name),this.operators.set(o.name,o)}},{key:"removeOperator",value:function(i){var n=void 0;return i instanceof ct.default?n=i.name:n=i,this.operators.delete(n)}},{key:"addFact",value:function(i,n,o){var a=i,s=void 0;return i instanceof br.default?(a=i.id,s=i):s=new br.default(i,n,o),(0,Re.default)("engine::addFact id:"+a),this.facts.set(a,s),this}},{key:"removeFact",value:function(i){var n=void 0;return i instanceof br.default?n=i.id:n=i,this.facts.delete(n)}},{key:"prioritizeRules",value:function(){if(!this.prioritizedRules){var i=this.rules.reduce(function(n,o){var a=o.priority;return n[a]||(n[a]=[]),n[a].push(o),n},{});this.prioritizedRules=Object.keys(i).sort(function(n,o){return Number(n)>Number(o)?-1:1}).map(function(n){return i[n]})}return this.prioritizedRules}},{key:"stop",value:function(){return this.status=Hn,this}},{key:"getFact",value:function(i){return this.facts.get(i)}},{key:"evaluateRules",value:function(i,n){var o=this;return Promise.all(i.map(function(a){if(o.status!==jn){(0,Re.default)("engine::run status:"+o.status+"; skipping remaining rules");return}return a.evaluate(n).then(function(s){(0,Re.default)("engine::run ruleResult:"+s.result),s.result?(o.emit("success",a.event,n,s),o.emit(a.event.type,a.event.params,n,s),n.factValue("success-events",{event:a.event})):o.emit("failure",a.event,n,s)})}))}},{key:"run",value:function(){var i=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,Re.default)("engine::run started"),(0,Re.default)("engine::run runtimeFacts:",n),n["success-events"]=new br.default("success-events",(0,Zf.SuccessEventFact)(),{cache:!1}),this.status=jn;var o=new Xf.default(this.facts,n,{allowUndefinedFacts:this.allowUndefinedFacts}),a=this.prioritizeRules(),s=Promise.resolve();return new Promise(function(l,u){a.map(function(f){return s=s.then(function(){return i.evaluateRules(f,o)}).catch(u),s}),s.then(function(){return i.status=Hn,(0,Re.default)("engine::run completed"),o.factValue("success-events")}).then(function(f){l({events:f,almanac:o})}).catch(u)})}}]),r}(Qf.EventEmitter);me.default=sd;Object.defineProperty(ne,"__esModule",{value:!0});ne.Engine=ne.Operator=ne.Rule=ne.Fact=void 0;ne.default=function(e,r){return new Ji.default(e,r)};var ld=me,Ji=Xr(ld),ud=cr,cd=Xr(ud),fd=Gr,dd=Xr(fd),hd=fr,pd=Xr(hd);function Xr(e){return e&&e.__esModule?e:{default:e}}ne.Fact=cd.default;ne.Rule=dd.default;ne.Operator=pd.default;ne.Engine=Ji.default;(function(e){e.exports=ne})(Et);var Q=(e=>(e[e.TODO=0]="TODO",e[e.PROGRESS=1]="PROGRESS",e[e.COMPLETED=2]="COMPLETED",e[e.EXCLUDED=3]="EXCLUDED",e[e.ERROR=4]="ERROR",e))(Q||{}),H=(e=>(e[e.PREVIOUS=0]="PREVIOUS",e[e.NEXT=1]="NEXT",e[e.GO_TO_STEP=2]="GO_TO_STEP",e[e.SAVE=3]="SAVE",e[e.SUBMIT=4]="SUBMIT",e[e.VALIDATE=5]="VALIDATE",e[e.NONE=6]="NONE",e))(H||{}),q=(e=>(e[e.PROGRESS=0]="PROGRESS",e[e.ERROR=1]="ERROR",e[e.SAVE_SUCCESS=2]="SAVE_SUCCESS",e[e.SUBMIT_SUCCESS=3]="SUBMIT_SUCCESS",e[e.ERROR_CRITICAL=4]="ERROR_CRITICAL",e))(q||{});function Or(e){let r=v(j,{});return e.isSubmitted?r=v("div",{children:"Your information has been submitted"}):e.bodyText&&(r=v("div",{dangerouslySetInnerHTML:{__html:e.bodyText}})),N("div",{className:`submission-header${e.isSubmitted?" submitted":""}`,children:[v("h2",{children:e.title}),r,v("hr",{})]})}try{Or.displayName="Header",Or.__docgenInfo={description:"",displayName:"Header",props:{isSubmitted:{defaultValue:null,description:"",name:"isSubmitted",required:!1,type:{name:"boolean"}},bodyText:{defaultValue:null,description:"",name:"bodyText",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/Header.tsx#Header"]={docgenInfo:Or.__docgenInfo,name:"Header",path:"src/lib/containers/synapse_form_wrapper/Header.tsx#Header"})}catch{}function Rr(e){const r=e.stepList.filter(o=>o.child!==!0),t=(o,a,s,l)=>{let u="circle";return s||l?{iconDef:u}:(a?u="block":o===Q.COMPLETED?u="checkCircle":o===Q.ERROR&&(u="errorOutlined"),{iconDef:u})},i=(o,a=!1)=>{let s="item";return o&&(s=`${s} pointed `),a&&(s=`${s} static`),s},n=(o,a,s=!1)=>{if(!o||o.child&&!s)return v(j,{});const l=(c,d,h)=>!c.inProgress&&(!d||!!c.final)?v("button",{className:"btn btn-link",onClick:()=>h(c),children:c.title}):v("span",{children:c.title}),u=t(o.state,o.excluded,o.static,o.final),f=i(o.inProgress,o.static);return N("div",{className:f,children:[v($r,{options:{icon:u.iconDef}}),l(o,a,e.onStepChange)]})};return v("div",{className:"SRC-menuLayout json-forms-menu",style:{flex:"1"},children:v("ul",{children:r.map((o,a)=>N("li",{className:"item-wrap",children:[n(o,!!e.isWizardMode),o.children&&o.children.length>0&&v("div",{className:"subMenu",children:v("ul",{children:o.children&&o.children.map((s,l)=>{const u=e.stepList.find(f=>f.id===s);return typeof u>"u"?v(j,{}):v("li",{className:"item-wrap",children:n(u,!!e.isWizardMode,!0)},l+s)})})})]},a+o.id))})})}try{Rr.displayName="StepsSideNav",Rr.__docgenInfo={description:"",displayName:"StepsSideNav",props:{stepList:{defaultValue:null,description:"",name:"stepList",required:!0,type:{name:"Step[]"}},onStepChange:{defaultValue:null,description:"",name:"onStepChange",required:!0,type:{name:"Function"}},isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/StepsSideNav.tsx#StepsSideNav"]={docgenInfo:Rr.__docgenInfo,name:"StepsSideNav",path:"src/lib/containers/synapse_form_wrapper/StepsSideNav.tsx#StepsSideNav"})}catch{}function Cr(e){const t=(o=>o.isWizardMode?o.previousStepIds&&o.previousStepIds.length>0:o.steps.findIndex(a=>a.id===o.currentStep.id)>0)(e)?v("button",{type:"button",onClick:o=>e.onNavAction(H.PREVIOUS),className:"btn btn-link nav-link prev",children:v($r,{options:{icon:"chevronLeft"}})}):v(j,{}),i=e.currentStep.final?v(j,{}):v("button",{type:"button",onClick:o=>e.onNavAction(H.NEXT),className:"btn btn-link nav-link next",children:v($r,{options:{icon:"chevronRight"}})}),n=v("button",{type:"button",className:"btn btn-action save",disabled:e.isFormSubmitted,onClick:o=>e.onNavAction(H.SAVE),children:"SAVE"});return N("div",{children:[v("hr",{}),N("div",{className:"buttonWrapper pull-right",children:[t," ",i," ",n]})]})}function Tr(e){const r=e.steps.find(t=>t.id===e.nextStepId);return typeof r>"u"?v(j,{}):N("span",{className:"nav-link",children:[v("a",{onClick:t=>e.onNavAction(r),children:r.title}),v($r,{options:{icon:"chevronRight"}})]})}try{Cr.displayName="NavButtons",Cr.__docgenInfo={description:"",displayName:"NavButtons",props:{isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}},previousStepIds:{defaultValue:null,description:"",name:"previousStepIds",required:!0,type:{name:"string[]"}},onNavAction:{defaultValue:null,description:"",name:"onNavAction",required:!0,type:{name:"Function"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"Step[]"}},currentStep:{defaultValue:null,description:"",name:"currentStep",required:!0,type:{name:"Step"}},isFormSubmitted:{defaultValue:null,description:"",name:"isFormSubmitted",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/NavButtons.tsx#NavButtons"]={docgenInfo:Cr.__docgenInfo,name:"NavButtons",path:"src/lib/containers/synapse_form_wrapper/NavButtons.tsx#NavButtons"})}catch{}try{Tr.displayName="NextStepLink",Tr.__docgenInfo={description:"",displayName:"NextStepLink",props:{onNavAction:{defaultValue:null,description:"",name:"onNavAction",required:!0,type:{name:"Function"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"Step[]"}},nextStepId:{defaultValue:null,description:"",name:"nextStepId",required:!0,type:{name:"string | undefined"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/NavButtons.tsx#NextStepLink"]={docgenInfo:Tr.__docgenInfo,name:"NextStepLink",path:"src/lib/containers/synapse_form_wrapper/NavButtons.tsx#NextStepLink"})}catch{}function Fr(e){const r=N("div",{children:[v("h6",{children:"Data"}),v("pre",{children:JSON.stringify(e.formData,null,2)})]});return v(j,{children:!e.hidden&&r})}try{Fr.displayName="DataDebug",Fr.__docgenInfo={description:"",displayName:"DataDebug",props:{formData:{defaultValue:null,description:"",name:"formData",required:!0,type:{name:"any"}},hidden:{defaultValue:null,description:"",name:"hidden",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/DataDebug.tsx#DataDebug"]={docgenInfo:Fr.__docgenInfo,name:"DataDebug",path:"src/lib/containers/synapse_form_wrapper/DataDebug.tsx#DataDebug"})}catch{}function md(e,r,t){const i=/\[\d+\]\./g,n=/\.(\d)+/g;e=e.replace(n,"[$1]");const a=`${e.split(".").join(".properties.")}.title`,s=`${e}.ui:title`,l=a.replace(i,".items."),u=s.replace(i,".items."),f=a.match(i);let c=vo(f);c&&(c=c.substring(1,c.length-2),c=isNaN(parseInt(c))?"":parseInt(c)+1+"");const d=Le(t,s)||Le(r.properties,a)||Le(t,u)||Le(r.properties,l)||`${l}`;return`${c?"["+c+"] ":""}${d}`}function gd(e,r,t,i){function n(l,u,f){const c=".";return Object.keys(l).forEach(d=>{if(l[d]===null)u[f+d]="";else if(Qt(l[d])&&!Xt(l[d]))for(const h in l[d])if(Qt(l[d][h])||Kt(l[d])&&!Xt(l[d][h]))n(l[d][h],u,`${f}${d}[${h}]${c}`);else{let p=u[`${f}${d}`];p=p?p+", ":"",u[`${f}${d}`]=p+l[d][h]}else Kt(l[d])&&!So(l[d])?n(l[d],u,`${f}${d}${c}`):u[f+d]=l[d]}),u}const o=n(Jn(e),[],"");return no(o).map(l=>{let u=o[l];o[l]===!1&&(u="false"),o[l]===!0&&(u="true");const f=l.indexOf(".");return{screen:yo(r,{id:l.substring(0,f)}),label:md(l,t,i),value:u}}).filter(l=>l.label.indexOf(".properties.included.title")===-1).filter(l=>l.screen&&typeof l.value<"u").map(l=>({label:l.label,value:l.value,screen:l.screen})).sort((l,u)=>l.screen.order-u.screen.order)}function Pr(e){let r=[];r=gd(Jn(e.formData),e.steps,e.schema,e.uiSchema);let t="";const i=N(j,{children:[v("table",{className:"table summary-table-header",children:v("thead",{children:N("tr",{children:[v("th",{children:"Step"}),v("th",{children:"Label"}),v("th",{children:"Value"})]})})}),v("div",{className:"scroll-area table-body",children:v("table",{className:"table summary-table",children:v("tbody",{children:r.map((n,o)=>N("tr",{children:[v("td",{children:t!==n.screen.id&&(t=n.screen.id)&&v("span",{children:n.screen.title})}),v("td",{children:n.label}),v("td",{children:n.value})]},o+n.screen.id+n.label))})})})]});return N(j,{children:[v("p",{className:"step-exclude-directions",children:"Below is all of the data you have entered. Before submitting, click 'Validate' to ensure that all of the required data has been entered."}),v("button",{className:"nav-link pull-right",onClick:()=>window.print(),children:"Print this data"}),v("div",{className:"panel panel-default padding-full wrap",children:v("div",{className:"summary scroll-area",children:i})})]})}try{Pr.displayName="SummaryTable",Pr.__docgenInfo={description:"",displayName:"SummaryTable",props:{isWizard:{defaultValue:null,description:"",name:"isWizard",required:!1,type:{name:"boolean"}},formData:{defaultValue:null,description:"",name:"formData",required:!0,type:{name:"any"}},callbackFn:{defaultValue:null,description:"",name:"callbackFn",required:!1,type:{name:"Function"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"Step[]"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"FormSchema"}},uiSchema:{defaultValue:null,description:"",name:"uiSchema",required:!0,type:{name:"UiSchema"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/SummaryTable.tsx#SummaryTable"]={docgenInfo:Pr.__docgenInfo,name:"SummaryTable",path:"src/lib/containers/synapse_form_wrapper/SummaryTable.tsx#SummaryTable"})}catch{}var Ki={exports:{}},zt={};const Xi=At(go);var be=Xi.jsx,Vn=Xi.jsxs;Object.defineProperty(zt,"__esModule",{value:!0});var yd=window.React,vd=be("svg",{viewBox:"-2 -5 14 20",height:"100%",width:"100%",style:{position:"absolute",top:0},children:be("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"})}),Sd=be("svg",{height:"100%",width:"100%",viewBox:"-2 -5 17 21",style:{position:"absolute",top:0},children:be("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"})});function bd(e,r,t,i,n){var o=(e-t)/(r-t);if(o===0)return i;if(o===1)return n;for(var a="#",s=1;s<6;s+=2){var l=parseInt(i.substr(s,2),16),u=parseInt(n.substr(s,2),16),f=Math.round((1-o)*l+o*u).toString(16);f.length===1&&(f="0"+f),a+=f}return a}function Yn(e){if(e.length===7)return e;for(var r="#",t=1;t<4;t+=1)r+=e[t]+e[t];return r}function qn(e,r,t,i,n){return bd(e,r,t,Yn(i),Yn(n))}function Ed(e,r){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&r.indexOf(i)===-1&&(t[i]=e[i]);return t}var Wn=function(e){function r(t){e.call(this,t);var i=t.height,n=t.width,o=t.checked;this.t=t.handleDiameter||i-2,this.i=Math.max(n-i,n-(i+this.t)/2),this.o=Math.max(0,(i-this.t)/2),this.state={s:o?this.i:this.o},this.n=0,this.e=0,this.h=this.h.bind(this),this.r=this.r.bind(this),this.a=this.a.bind(this),this.c=this.c.bind(this),this.l=this.l.bind(this),this.u=this.u.bind(this),this.f=this.f.bind(this),this.p=this.p.bind(this),this.b=this.b.bind(this),this.g=this.g.bind(this),this.v=this.v.bind(this),this.w=this.w.bind(this)}return e&&(r.__proto__=e),((r.prototype=Object.create(e&&e.prototype)).constructor=r).prototype.componentDidUpdate=function(t){t.checked!==this.props.checked&&this.setState({s:this.props.checked?this.i:this.o})},r.prototype.k=function(t){this.y.focus(),this.setState({C:t,M:!0,m:Date.now()})},r.prototype.x=function(t){var i=this.state,n=i.C,o=i.s,a=(this.props.checked?this.i:this.o)+t-n;i.R||t===n||this.setState({R:!0});var s=Math.min(this.i,Math.max(this.o,a));s!==o&&this.setState({s})},r.prototype.S=function(t){var i=this.state,n=i.s,o=i.R,a=i.m,s=this.props.checked,l=(this.i+this.o)/2,u=Date.now()-a;!o||u<250?this.T(t):s?l<n?this.setState({s:this.i}):this.T(t):n<l?this.setState({s:this.o}):this.T(t),this.setState({R:!1,M:!1}),this.n=Date.now()},r.prototype.h=function(t){t.preventDefault(),typeof t.button=="number"&&t.button!==0||(this.k(t.clientX),window.addEventListener("mousemove",this.r),window.addEventListener("mouseup",this.a))},r.prototype.r=function(t){t.preventDefault(),this.x(t.clientX)},r.prototype.a=function(t){this.S(t),window.removeEventListener("mousemove",this.r),window.removeEventListener("mouseup",this.a)},r.prototype.c=function(t){this.$=null,this.k(t.touches[0].clientX)},r.prototype.l=function(t){this.x(t.touches[0].clientX)},r.prototype.u=function(t){t.preventDefault(),this.S(t)},r.prototype.p=function(t){50<Date.now()-this.n&&(this.T(t),50<Date.now()-this.e&&this.setState({M:!1}))},r.prototype.b=function(){this.e=Date.now()},r.prototype.g=function(){this.setState({M:!0})},r.prototype.v=function(){this.setState({M:!1})},r.prototype.w=function(t){this.y=t},r.prototype.f=function(t){t.preventDefault(),this.y.focus(),this.T(t),this.setState({M:!1})},r.prototype.T=function(t){var i=this.props;(0,i.onChange)(!i.checked,t,i.id)},r.prototype.render=function(){var t=this.props,i=t.disabled,n=t.className,o=t.offColor,a=t.onColor,s=t.offHandleColor,l=t.onHandleColor,u=t.checkedIcon,f=t.uncheckedIcon,c=t.boxShadow,d=t.activeBoxShadow,h=t.height,p=t.width,S=Ed(t,["disabled","className","offColor","onColor","offHandleColor","onHandleColor","checkedIcon","uncheckedIcon","boxShadow","activeBoxShadow","height","width","handleDiameter"]),y=this.state,E=y.s,x=y.R,M=y.M,L={position:"relative",display:"inline-block",textAlign:"left",opacity:i?.5:1,direction:"ltr",borderRadius:h/2,WebkitTransition:"opacity 0.25s",MozTransition:"opacity 0.25s",transition:"opacity 0.25s",touchAction:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},_={height:h,width:p,margin:Math.max(0,(this.t-h)/2),position:"relative",background:qn(E,this.i,this.o,o,a),borderRadius:h/2,cursor:i?"default":"pointer",WebkitTransition:x?null:"background 0.25s",MozTransition:x?null:"background 0.25s",transition:x?null:"background 0.25s"},I={height:h,width:Math.min(1.5*h,p-(this.t+h)/2+1),position:"relative",opacity:(E-this.o)/(this.i-this.o),pointerEvents:"none",WebkitTransition:x?null:"opacity 0.25s",MozTransition:x?null:"opacity 0.25s",transition:x?null:"opacity 0.25s"},A={height:h,width:Math.min(1.5*h,p-(this.t+h)/2+1),position:"absolute",opacity:1-(E-this.o)/(this.i-this.o),right:0,top:0,pointerEvents:"none",WebkitTransition:x?null:"opacity 0.25s",MozTransition:x?null:"opacity 0.25s",transition:x?null:"opacity 0.25s"},Y={height:this.t,width:this.t,background:qn(E,this.i,this.o,s,l),display:"inline-block",cursor:i?"default":"pointer",borderRadius:"50%",position:"absolute",transform:"translateX("+E+"px)",top:Math.max(0,(h-this.t)/2),outline:0,boxShadow:M?d:c,border:0,WebkitTransition:x?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",MozTransition:x?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",transition:x?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s"};return Vn("div",{className:n,style:L,children:[Vn("div",{className:"react-switch-bg",style:_,onClick:i?null:this.f,onMouseDown:function(ae){return ae.preventDefault()},children:[u&&be("div",{style:I,children:u}),f&&be("div",{style:A,children:f})]}),be("div",{className:"react-switch-handle",style:Y,onClick:function(ae){return ae.preventDefault()},onMouseDown:i?null:this.h,onTouchStart:i?null:this.c,onTouchMove:i?null:this.l,onTouchEnd:i?null:this.u,onTouchCancel:i?null:this.v}),be("input",{type:"checkbox",role:"switch",disabled:i,style:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1},...S,ref:this.w,onFocus:this.g,onBlur:this.v,onKeyUp:this.b,onChange:this.p})]})},r}(yd.Component);Wn.defaultProps={disabled:!1,offColor:"#888",onColor:"#080",offHandleColor:"#fff",onHandleColor:"#fff",uncheckedIcon:vd,checkedIcon:Sd,boxShadow:null,activeBoxShadow:"0 0 2px 3px #3bf",height:28,width:56},zt.default=Wn;(function(e){e.exports=zt})(Ki);const wd=to(Ki.exports),Er=window.React;class Nr extends Er.Component{constructor(r){super(r),this.excludeWarningText=N("div",{children:[v("p",{children:"This action will clear any entered data on this page and remove this form from your submission. You can include it again at anytime. Only this page will be affected."}),v("p",{children:"Are you sure you want to skip this step and clear any entered data?"})]}),this.excludeWarningHeader="Skip This Step?",this.unsavedDataWarning="You might have some unsaved data. Are you sure you want to leave?",this.navAction=H.NONE,this.extraErrors=[],this.isNewForm=n=>Object.keys(n).length==1&&Object.keys(n)[0]==="metadata"||Object.keys(n).length==0,this.getFirstStep=(n,o)=>this.isNewForm(o)?n[0]:n.find(a=>a.final===!0)||n[0],this.onUnload=n=>this.state.hasUnsavedChanges?(n.preventDefault(),n.returnValue=this.unsavedDataWarning):void 0,this.setupBeforeUnloadListener=()=>{window.addEventListener("beforeunload",this.onUnload)},this._setIncludedPropInFormDataNonWizard=(n,o)=>{const a={},s=n.formData;return Object.keys(o).forEach(l=>{P.get(o[l],"properties.included")&&P.set(a,`${l}.included`,!0)}),{...s,...a}},this._setIncludedPropInFormDataWizard=n=>{const o=n.currentStep.id,a=P.cloneDeep(n.formData);return P.set(a,`${o}.included`,!0),a},this.getSchema=({id:n,final:o})=>o?this.props.schema:P.pick(this.props.schema,["title","type",`properties.${n}`]),this.getNextStepId=async(n,o,a)=>{if(a)return a;if(!n.rules||n.rules.length===0)return n.default;const s=new Et.exports.Engine(n.rules);try{const l=await s.run(o);return l.events.length>0?l.events[0].params.next:n.default}catch{return n.default}},this.moveStep=async(n,o,a,s=[...this.state.previousStepIds])=>{var h;const l=this.state.currentStep;let u;(h=this.formRef)!=null&&h.current&&this.formRef.current.setState({errorSchema:{}});const f=this.props.isWizardMode&&!o;f&&s.push(l.id),a?u=Q.ERROR:(u=Q.COMPLETED,!f&&this.props.isWizardMode&&(u=Q.TODO)),o=await this.getNextStepId(l,n,o);const c=this.state.steps.map(p=>p.id===l.id?{...p,state:u,inProgress:!1}:p.id===o?{...p,inProgress:!0}:p);f&&P.set(n,`${o}.included`,!0);const d=this.state.steps.find(p=>p.id===o);this.props.isWizardMode&&d.final&&Object.keys(n).forEach(p=>{n[p].included===void 0&&(n[p]={})}),this.saveStepState(s,c,d,n)},this.saveStepState=(n,o,a,s)=>{this.setState({previousStepIds:n,steps:o,currentStep:a,formData:s,hasValidated:!1,doShowErrors:!1})},this.goPrevious=async(n,o)=>{let a;const s=[...this.state.previousStepIds];if(this.props.isWizardMode)a=s.pop(),this.isSubmitScreen()||P.set(n,`${this.state.currentStep.id}.included`,void 0);else{const l=P.findIndex(this.state.steps,{id:this.state.currentStep.id});l>0&&(a=this.state.steps[l-1].id)}if(!P.isUndefined(a))return this.moveStep(n,a,o,s)},this.triggerAction=async n=>{if(n===H.SAVE)return this.props.onSave(this.state.formData);this.navAction=n,this.extraErrors=await this.runCustomValidation(this.state.formData,this.state.currentStep,this.state.steps),this.submitButtonRef.current&&this.submitButtonRef.current.click()},this.triggerStepChange=n=>{this.nextStep=n,this.triggerAction(H.GO_TO_STEP)},this.onError=n=>{if(this.setState({doShowErrors:!0,hasValidated:!1}),this.navAction===H.VALIDATE){const o=this.setStepStatusForFailedValidation(n.props,this.state.steps,!!this.props.isWizardMode,this.state.formData,this.getSchema(this.state.currentStep).properties||this.getSchema(this.state.currentStep));this.setState({steps:o}),this.formDivRef.current.scrollTo(0,0),this.state.isLoadingSaved&&(this.moveStep(this.state.formData,o[0].id,!0),this.setState({isLoadingSaved:!1}))}},this.setStepStatusForFailedValidation=(n,o,a,s,l)=>{const u=n.map(d=>P.trimStart(d.property,".").split(".")[0]),f=Object.keys(l);return o.map(d=>{if(u.indexOf(d.id)>-1)return{...d,state:Q.ERROR};if(f.indexOf(d.id)>-1){let h=Q.COMPLETED;return a&&!P.get(s[d.id],"included")&&(h=d.state),{...d,state:h}}else return d})},this.onSubmit=()=>{this.performAction(this.navAction,this.state.currentStep.state===Q.ERROR)},this.isSubmitScreen=()=>this.state.currentStep.final===!0&&!this.state.isLoadingSaved,this.showExcludeStateWarningModal=(n,o=!1)=>{this.setState({modalContext:{action:this.toggleExcludeStep,arguments:[n,!0,o]}})},this.toggleExcludeStep=(n,o)=>{this.setState((a,s)=>{const l=a.steps.map(c=>c.id===n?{...c,excluded:o}:c),u=P.cloneDeep(a.formData),f=P.cloneDeep(a.currentStep);return f.id===n&&(f.excluded=o),o?u[n]={}:P.set(u,`${n}.included`,!0),{steps:l,formData:u,modalContext:void 0,currentStep:f}})},this.renderNotification=n=>n===q.SAVE_SUCCESS?v("div",{className:"notification-area",children:" Successfully saved "}):n===q.SUBMIT_SUCCESS?v("div",{className:"notification-area",children:" Successfully submitted "}):n===q.PROGRESS?v("div",{className:"notification-area",children:" working on it ...."}):v(j,{}),this.renderTextForStaticScreen=()=>{if(!this.state.currentStep.copy)return v(j,{});const n=this.state.currentStep.copy;return v("div",{className:"static-screen",dangerouslySetInnerHTML:{__html:n}})},this.renderOptionalFormSubheader=(n=!1)=>{if(n)return v(j,{});const o=this.state.currentStep;return o.excluded===!0?N("div",{className:"step-exclude-directions",children:["This form is currently not included in the submission.",v("button",{className:"btn btn-link",onClick:()=>this.toggleExcludeStep(o.id,!1),children:"INCLUDE"})]}):o.excluded===!1?N("div",{className:"step-exclude-directions",children:['This form is currently included in the submission. Enter some data if you have it, or click "Skip".',v("button",{className:"btn btn-link",onClick:()=>this.showExcludeStateWarningModal(this.state.currentStep.id),children:"SKIP"})]}):v(j,{})},this.renderHelpToggle=(n,o,a)=>n.static||n.final?v(j,{}):v(j,{children:N("label",{className:"pull-right toggle-help-label",children:[v("span",{children:"Hide help"}),v(wd,{checkedIcon:!1,uncheckedIcon:!1,height:20,width:45,className:"toggle-help",offColor:"#ccc",onChange:()=>a(),checked:o}),v("span",{children:"Show help"})]})}),this.runCustomValidation=async(n,o,a)=>{const s=[];let l=o.validationRules||[],u={[o.id]:n[o.id]};if(o.final&&(l=a.reduce((d,h)=>h.validationRules&&h.validationRules.length>0?d.concat(h.validationRules):d,[]),u=P.cloneDeep(n)),l.length===0)return[];const f=[];l.forEach(d=>{const h=d.event.params.property;if(h.indexOf("[*]")===-1)f.push(d);else{const p=h.split("[*]")[0].substring(1),S=P.get(n,p);if(Array.isArray(S)&&typeof S!="string")for(let y=0;y<S.length;y++){const E=JSON.parse(JSON.stringify(d).replace(/\[\*\]/g,`[${y}]`));f.push(E)}else f.push(d)}});const c=new Et.exports.Engine(f,{allowUndefinedFacts:!0});try{(await c.run(u)).events.forEach(p=>{const S={...p.params,params:{},stack:`${p.params.property} ${p.params.message}`};s.push(S)})}catch(d){console.log(d)}return s},this.transformErrors=n=>{if(this.extraErrors.forEach(a=>{n.find(s=>s.stack===a.stack)||n.push(a)}),this.navAction!==H.SUBMIT&&this.navAction!==H.VALIDATE&&(!this.props.isWizardMode||this.state.currentStep.final)){const a={...this.state.currentStep};return n.length>0?a.state=Q.ERROR:a.state=Q.COMPLETED,this.setState({currentStep:a}),[]}return n.filter(a=>a.name==="required").forEach(a=>{const s=a.property.substring(0,a.property.lastIndexOf("."));P.remove(n,l=>l.property.indexOf(s)>-1&&(l.name==="enum"||l.name==="oneOf"))}),n.map(a=>(a.message=a.message.replace("property","field"),a))},this.renderErrorListTemplate=n=>{const{errors:o}=n,a=o.map((s,l)=>_d(this.state.steps,s,this.uiSchema,l,this.props.schema)).sort((s,l)=>s.order-l.order).map(s=>s.element);return v("div",{className:"form-error-summary",children:v("ul",{className:"error-detail",children:a})})},this.uiSchema=Qi(P.cloneDeep(r.uiSchema),"ui:help");const t=r.navSchema.steps.map((n,o)=>({...n,inProgress:o===0})).sort((n,o)=>n.order-o.order);this.formRef=Er.createRef(),this.formDivRef=Er.createRef(),this.submitButtonRef=Er.createRef();const i=this.getFirstStep(t,r.formData);this.state={currentStep:i,steps:t,previousStepIds:[],formData:r.formData,doShowErrors:!1,doShowHelp:!0,hasUnsavedChanges:!1,isSubmitted:r.isSubmitted,isLoadingSaved:!this.isNewForm(this.props.formData)}}componentWillUnmount(){window.removeEventListener("beforeunload",this.onUnload)}componentDidUpdate(r){const t=this.props.callbackStatus!==r.callbackStatus,i=this.props.callbackStatus===q.SAVE_SUCCESS||this.props.callbackStatus===q.SUBMIT_SUCCESS;t&&i&&(this.setState({hasUnsavedChanges:!1}),this.props.callbackStatus===q.SUBMIT_SUCCESS&&(this.setState({isSubmitted:!0}),window.history.back()))}componentDidMount(){this.setupBeforeUnloadListener(),this.isNewForm(this.state.formData)?this.setState(t=>({formData:this.props.isWizardMode?this._setIncludedPropInFormDataWizard(t):this._setIncludedPropInFormDataNonWizard(t,this.props.schema)})):this.triggerAction(H.VALIDATE)}handleOnChange({formData:r}){if(!this.isSubmitScreen()&&!this.state.currentStep.excluded){const t=!P.isEqual(this.state.formData,r);this.setState({formData:r,hasUnsavedChanges:t})}}performAction(r,t){const i=this.state.formData;switch(r){case H.NEXT:return this.moveStep(i,void 0,t);case H.PREVIOUS:return this.goPrevious(i,t);case H.GO_TO_STEP:return this.nextStep?this.moveStep(i,this.nextStep.id,t):void 0;case H.SUBMIT:{this.props.onSubmit(i);return}case H.VALIDATE:{const n=this.setStepStatusForFailedValidation([],this.state.steps,!!this.props.isWizardMode,this.state.formData,this.getSchema(this.state.currentStep).properties||this.getSchema(this.state.currentStep)),o={...this.state.currentStep,state:Q.COMPLETED};this.setState({hasValidated:!0,currentStep:o,steps:n}),this.state.isLoadingSaved&&(this.moveStep(this.state.formData,n[0].id,!1),this.setState({isLoadingSaved:!1}));return}default:return}}render(){return N("div",{className:"outter-wrap",children:[v(wo,{when:this.state.hasUnsavedChanges,message:this.unsavedDataWarning}),v(Or,{isSubmitted:this.state.isSubmitted,bodyText:this.state.currentStep.description,title:this.props.formTitle}),v("div",{children:N("div",{className:"inner-wrap",children:[v(Rr,{stepList:this.state.steps,isWizardMode:this.props.isWizardMode,onStepChange:this.triggerStepChange}),this.state.isLoadingSaved&&v("div",{className:"text-center",children:v("span",{className:"spinner"})}),N("div",{className:"form-wrap",children:[v("div",{className:"form-title",children:this.state.currentStep.title}),this.renderNotification(this.props.callbackStatus),N("div",{className:`right-top-actions ${this.state.isSubmitted?"hide":""}`,children:[!this.state.currentStep.static&&v("button",{type:"button",className:"btn btn-action save pull-right",onClick:()=>this.triggerAction(H.VALIDATE),children:"VALIDATE"}),this.renderHelpToggle(this.state.currentStep,this.state.doShowHelp,()=>this.setState({doShowHelp:!this.state.doShowHelp})),this.isSubmitScreen()&&v("button",{type:"button",className:"btn btn-action save pull-right",disabled:this.state.isSubmitted,onClick:()=>this.triggerAction(H.SUBMIT),children:"SUBMIT"})]}),this.renderOptionalFormSubheader(this.props.isWizardMode),N("div",{className:this.isSubmitScreen()||this.state.currentStep.static?"hide-form-only":"wrap",children:[this.state.hasValidated&&v("div",{className:"notification-area",children:"Great! All required data on this form has been entered."}),N("div",{ref:this.formDivRef,className:`scroll-area ${this.state.currentStep.excluded?"disabled":" "} `,children:[v(mo,{noHtml5Validate:!0,className:this.state.doShowHelp?"submissionInputForm":"submissionInputForm no-help",liveValidate:!1,formData:this.state.formData,schema:this.getSchema(this.state.currentStep),uiSchema:this.uiSchema,onSubmit:this.onSubmit,onChange:r=>this.handleOnChange(r),onError:r=>this.onError({props:r,form:this.formRef}),showErrorList:!!this.state.doShowErrors||!!this.props.isWizardMode,ErrorList:this.renderErrorListTemplate,transformErrors:this.transformErrors,ref:this.formRef,disabled:this.state.currentStep.excluded||this.state.isSubmitted,children:v("div",{style:{display:"none"},children:v("button",{type:"submit",ref:this.submitButtonRef})})}),this.renderTextForStaticScreen(),!this.props.isWizardMode&&v(Tr,{steps:this.state.steps,nextStepId:this.state.currentStep.default,onNavAction:r=>this.triggerStepChange(r)})]})]}),this.isSubmitScreen()&&v(Pr,{formData:this.state.formData,steps:this.state.steps,callbackFn:r=>this.showExcludeStateWarningModal(r,!0),uiSchema:this.props.uiSchema,schema:this.props.schema}),v(Cr,{currentStep:this.state.currentStep,steps:this.state.steps,previousStepIds:this.state.previousStepIds,isFormSubmitted:this.state.isSubmitted,onNavAction:r=>this.triggerAction(r)})]})]})}),this.state.modalContext&&v(Eo,{show:!0,title:this.excludeWarningHeader,modalBody:this.excludeWarningText,className:`theme-${this.props.formClass}`,onConfirmCallbackArgs:this.state.modalContext.arguments,onCancel:()=>this.setState({modalContext:void 0}),onConfirm:(r,t)=>this.toggleExcludeStep(r,t)}),v(Fr,{formData:this.state.formData,hidden:!0})]})}}function _d(e,r,t,i,n){const o=P.trimStart(r.property,"."),a=o.split("."),s=`${a.join(".properties.")}.title`,l=`${o}.ui:title`,u=s.replace(/\[.*?\]/,".items"),f=l.replace(/\[.*?\]/,".items"),c=s.match(/\[.*?\]/);let d=P.first(c);d&&(d=d.substring(1,d.length-1),d=isNaN(parseInt(d))?"":` [${parseInt(d)+1}]`);const h=P.get(t,l)||P.get(n.properties,s)||P.get(t,f)||P.get(n.properties,u)||r.property,p=P.find(e,{id:a[0]})||{title:a[0],order:0},S=v("li",{className:"",children:N("span",{children:[N("strong",{children:[p.title,d,":"]}),h,"\xA0 ",r.message]})},i);return{order:p.order,element:S}}function Qi(e,r){return P.keys(e).some(t=>{if(t===r){const i=e[t];return e[t]=v("span",{dangerouslySetInnerHTML:{__html:i}}),e}e[t]&&typeof e[t]=="object"&&Qi(e[t],r)}),e}try{Nr.displayName="SynapseForm",Nr.__docgenInfo={description:"",displayName:"SynapseForm",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"FormSchema"}},uiSchema:{defaultValue:null,description:"",name:"uiSchema",required:!0,type:{name:"UiSchema"}},navSchema:{defaultValue:null,description:"",name:"navSchema",required:!0,type:{name:"{ steps: any[]; }"}},formData:{defaultValue:null,description:"",name:"formData",required:!0,type:{name:"IFormData"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"Function"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!0,type:{name:"Function"}},formTitle:{defaultValue:null,description:"",name:"formTitle",required:!0,type:{name:"string"}},formClass:{defaultValue:null,description:"",name:"formClass",required:!1,type:{name:"string"}},isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}},callbackStatus:{defaultValue:null,description:"",name:"callbackStatus",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"}]}},isSubmitted:{defaultValue:null,description:"",name:"isSubmitted",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/SynapseForm.tsx#SynapseForm"]={docgenInfo:Nr.__docgenInfo,name:"SynapseForm",path:"src/lib/containers/synapse_form_wrapper/SynapseForm.tsx#SynapseForm"})}catch{}async function ft(e,r,t,i){try{const n=await io(e,r,t),o=await oo(n,e,!0,!0),a=await ao(o.fileHandle,o.preSignedURL),s=JSON.parse(a);return{version:n.versionNumber,content:s}}catch(n){const o={message:`${n.message}:  configuration data for ${r} failed to load`};return i&&i(o),Promise.reject(o)}}const xd=window.React;class kr extends xd.Component{constructor(r){var t,i;super(r),this.getFileEntityDataDereferenced=async(n,o,a)=>{const{version:s,content:l}=await ft(n,o,a,this.onError),u=await fe.exports.dereference(l);return{version:s,content:u}},this.getData=async n=>{if(!!n)try{let o={},a,s,l,u,f;const{searchParams:c}=this.props;if(c&&({dataFileHandleId:a,submitted:s}=c),a){const p=await so(a,n);o=JSON.parse(p),s&&o&&o.metadata&&({formSchemaVersion:l,uiSchemaVersion:u,navSchemaVersion:f}=o.metadata)}const d=[this.getFileEntityDataDereferenced(n,this.props.formSchemaEntityId,l),ft(n,this.props.formUiSchemaEntityId,u,this.onError),ft(n,this.props.formNavSchemaEntityId,f,this.onError)],h=await Promise.all(d);a||(o={metadata:{formSchemaVersion:h[0].version,uiSchemaVersion:h[1].version,navSchemaVersion:h[2].version}}),this.setState({formData:o,formSchema:h[0].content,formUiSchema:h[1].content,formNavSchema:h[2].content,isLoading:!1})}catch(o){this.onError({message:o})}finally{this.setState({isLoading:!1})}},this.finishedProcessing=(n,o)=>{this.setState({isLoading:!1,notification:{type:n,message:o},status:n}),setTimeout(()=>{this.setState({status:void 0})},7e3)},this.onError=n=>{this.setState({notification:{type:q.ERROR,message:n.message,name:n.name},status:q.ERROR,isLoading:!1})},this.submitForm=async n=>{await this.saveToFile(n),this.setState({isLoading:!0}),await lo(this.state.formDataId,this.props.token),this.finishedProcessing(q.SUBMIT_SUCCESS,"File Submitted")},this.createOrUpdateFormDataFile=async(n,o)=>{n=`${n}.json`;const a=await uo(this.props.token,n,o),{searchParams:s}=this.props,l=s&&s.formGroupId;if(!l)throw console.error("formGroupId must be defined"),"formGroupId must be defined";try{const u=a.fileHandleId;let f;return this.state.formDataId?f=await co(this.state.formDataId,n,u,this.props.token):f=await fo(l,n,u,this.props.token),f}catch(u){throw this.onError(u),u}},this.saveToFile=async n=>{const o=Le(n,this.props.fileNamePath);if(this.setState({status:q.PROGRESS,notification:{type:q.PROGRESS,message:"Progress"},isLoading:!0}),!o){let a="File Name";try{const s=`${this.props.fileNamePath.replace(".",".properties.")}.title`;a=Le(this.state.formSchema.properties,s,a)}finally{const s=`Please Provide the ${a} before saving`;this.onError({message:s})}return}try{const a=new Blob([JSON.stringify(n)],{type:"text/json"}),s=await this.createOrUpdateFormDataFile(o,a);this.setState({formDataId:s.formDataId}),this.finishedProcessing(q.SAVE_SUCCESS,"File Saved")}catch(a){this.onError({message:a})}},this.isReadyToDisplayForm=n=>this.state.status!==q.ERROR_CRITICAL&&n.formSchema&&n.formUiSchema&&n.formNavSchema&&n.formData,this.renderLoader=(n,o)=>bo([q.ERROR,q.ERROR_CRITICAL],n.status)&&o.token&&n.isLoading?v("div",{className:"text-center",children:v("span",{className:"spinner"})}):v(j,{}),this.renderNotification=n=>n?n.type===q.ERROR?N(Zt,{variant:"danger",onClose:()=>this.setState({status:void 0}),children:[v(Zt.Heading,{children:"Error"}),N("p",{children:[n.name," ",n.message]})]}):v(j,{}):v(j,{}),this.renderUnauthenticatedView=n=>n?v(j,{}):N("div",{className:"panel padding-full unauthenticated text-center bootstrap-4-backport",children:["Please",v(_o,{variant:"light-primary-base",style:{margin:"10px"},className:`pill ${ho}`,children:"sign in"}),"to initiate or continue your submission"]}),this.state={isLoading:!0,formDataId:(i=(t=this.props)==null?void 0:t.searchParams)==null?void 0:i.formDataId}}async componentDidMount(){await this.getData(this.props.token)}async componentDidUpdate(r){this.props.token!==r.token&&await this.getData(this.props.token)}render(){return v("div",{className:`theme-${this.props.formClass}`,children:N("div",{className:"SRC-ReactJsonForm",children:[this.renderNotification(this.state.notification),this.renderLoader(this.state,this.props),this.renderUnauthenticatedView(this.props.token),this.isReadyToDisplayForm(this.state)&&v("div",{children:v(Nr,{schema:this.state.formSchema,uiSchema:this.state.formUiSchema,formData:this.state.formData,navSchema:this.state.formNavSchema,isWizardMode:this.props.isWizardMode,formTitle:this.props.formTitle,formClass:this.props.formClass,callbackStatus:this.state.status,onSave:r=>this.saveToFile(r),onSubmit:r=>this.submitForm(r),isSubmitted:this.props.searchParams&&!!this.props.searchParams.submitted})})]})})}}const Zi=kr;try{kr.displayName="SynapseFormWrapper",kr.__docgenInfo={description:"",displayName:"SynapseFormWrapper",props:{formSchemaEntityId:{defaultValue:null,description:"",name:"formSchemaEntityId",required:!0,type:{name:"string"}},formUiSchemaEntityId:{defaultValue:null,description:"",name:"formUiSchemaEntityId",required:!0,type:{name:"string"}},formNavSchemaEntityId:{defaultValue:null,description:"",name:"formNavSchemaEntityId",required:!0,type:{name:"string"}},token:{defaultValue:null,description:"",name:"token",required:!1,type:{name:"string"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"UploadToolSearchParams"}},isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}},fileNamePath:{defaultValue:null,description:"",name:"fileNamePath",required:!0,type:{name:"string"}},formTitle:{defaultValue:null,description:"",name:"formTitle",required:!0,type:{name:"string"}},formClass:{defaultValue:null,description:"",name:"formClass",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/SynapseFormWrapper.tsx#SynapseFormWrapper"]={docgenInfo:kr.__docgenInfo,name:"SynapseFormWrapper",path:"src/lib/containers/synapse_form_wrapper/SynapseFormWrapper.tsx#SynapseFormWrapper"})}catch{}const Ph={parameters:{storySource:{source:`import React from 'react'
import { ComponentStory, ComponentMeta } from '@storybook/react'
import SynapseFormWrapper from './SynapseFormWrapper'
import { SynapseContextConsumer } from '../../utils/SynapseContext'

export default {
  title: 'Synapse/SynapseFormWrapper',
  component: SynapseFormWrapper,
} as ComponentMeta<typeof SynapseFormWrapper>

const Template: ComponentStory<typeof SynapseFormWrapper> = args => (
  <SynapseContextConsumer>
    {synapseContext => (
      <SynapseFormWrapper {...args} token={synapseContext?.accessToken} />
    )}
  </SynapseContextConsumer>
)

export const Demo = Template.bind({})
Demo.args = {
  formTitle: 'Your Contribution Request',
  formClass: 'contribution-request',
  formSchemaEntityId: 'syn20692910',
  fileNamePath: 'study.submission_name',
  formUiSchemaEntityId: 'syn20692911',
  formNavSchemaEntityId: 'syn20968007',
  isWizardMode: true,
}
`,locationsMap:{demo:{startLoc:{col:60,line:11},endLoc:{col:1,line:17},startBody:{col:60,line:11},endBody:{col:1,line:17}}}}},title:"Synapse/SynapseFormWrapper",component:Zi},Ad=e=>v(po,{children:r=>v(Zi,{...e,token:r==null?void 0:r.accessToken})}),Od=Ad.bind({});Od.args={formTitle:"Your Contribution Request",formClass:"contribution-request",formSchemaEntityId:"syn20692910",fileNamePath:"study.submission_name",formUiSchemaEntityId:"syn20692911",formNavSchemaEntityId:"syn20968007",isWizardMode:!0};const Nh=["Demo"];export{Od as Demo,Nh as __namedExportsOrder,Ph as default};
