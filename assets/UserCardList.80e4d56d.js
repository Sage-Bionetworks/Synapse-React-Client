import{r as h,j as l}from"./jsx-runtime.05444945.js";import{g as y,U as m}from"./UserCard.42f90b17.js";import{aq as C}from"./index.a37d8dd7.js";import{C as U}from"./ColumnType.744125d2.js";import{w as S}from"./without.b749f98e.js";class d extends h.exports.Component{constructor(e){super(e),this.state={userProfileMap:{}},this.update=this.update.bind(this)}componentDidMount(){const{list:e}=this.props;this.update(e)}componentDidUpdate(e){const s=e.list,i=S(this.props.list.filter(a=>a),...s);i.length>0&&this.update(i)}update(e){y(e.filter(s=>s)).then(s=>{const i={};s.list.forEach(a=>{const{ownerId:n}=a;i[n]=a}),this.setState({userProfileMap:{...this.state.userProfileMap,...i}})}).catch(s=>{console.log("Error on batch call =",s)})}manuallyExtractData(e){const s=e.queryResult.queryResults.headers.findIndex(t=>t.name==="firstName"),i=e.queryResult.queryResults.headers.findIndex(t=>t.name==="lastName"),a=e.queryResult.queryResults.headers.findIndex(t=>t.name==="institution"),n=e.queryResult.queryResults.headers.findIndex(t=>t.columnType===U.USERID);return e.queryResult.queryResults.rows.filter(t=>!t.values[n]).map(t=>{var o,c,p,f;const r=t.values;return{firstName:(o=r[s])!=null?o:"",lastName:(c=r[i])!=null?c:"",company:(p=r[a])!=null?p:void 0,ownerId:"",userName:r[s]&&(f=r[s][0])!=null?f:""}})}render(){const{size:e=C,data:s,list:i}=this.props,{userProfileMap:a={}}=this.state,n=s&&this.manuallyExtractData(s);let u=0;return l("div",{className:"SRC-card-grid-row",children:i.map(t=>{const r=a[t];if(r)return l("div",{className:"SRC-grid-item SRC-narrow-grid-item",children:l(m,{size:e,preSignedURL:r.clientPreSignedURL,userProfile:r})},JSON.stringify(r));const o=n&&n[u];return o?(u+=1,l("div",{className:"SRC-grid-item SRC-narrow-grid-item",children:l(m,{disableLink:!0,hideEmail:!0,size:e,userProfile:o})},JSON.stringify(o))):!1})})}}try{d.displayName="UserCardList",d.__docgenInfo={description:"",displayName:"UserCardList",props:{list:{defaultValue:null,description:"",name:"list",required:!0,type:{name:"string[]"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"AVATAR"'},{value:'"SMALL USER CARD"'},{value:'"MEDIUM USER CARD"'},{value:'"LARGE USER CARD"'}]}},data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"QueryResultBundle"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/UserCardList.tsx#UserCardList"]={docgenInfo:d.__docgenInfo,name:"UserCardList",path:"src/lib/containers/UserCardList.tsx#UserCardList"})}catch{}export{d as U};
