import{r as v}from"./jsx-runtime.af56d2f4.js";import{h as l,k as M,ax as E,ay as S,ag as b,az as h,B as f,at as T}from"./index.a1936379.js";import{u as k}from"./useInfiniteQuery.cc62287f.js";import{e as i}from"./queryKeys.e0d3085f.js";import{c as A}from"./cloneDeep.64f407e4.js";const c={refetchOnWindowFocus:!1};function C(t,s){const{accessToken:n}=l();return M(i.tableQueryResult(t,!1),()=>E(t,n),{...c,...s})}function R(t,s,n){const{accessToken:r}=l();return M(i.tableQueryResultWithAsyncStatus(t,!1),()=>h(t,r,n),{...c,...s})}function P(t,s,n){const r=t.partMask&f,e={...t,partMask:r},u=r>0?s==null?void 0:s.enabled:!1;return R(e,{...s,enabled:u},n)}function B(t,s,n){const r=t.partMask&~f,e={...t,query:{...t.query,offset:void 0,limit:void 0,sort:void 0},partMask:r},u=r>0?s==null?void 0:s.enabled:!1;return R(e,{...s,enabled:u},n)}function F(t,s,n){const r=P(t,s,n),e=B(t,s,n);return v.exports.useMemo(()=>r.status==="error"?r:e.status==="error"?e:r.status==="loading"?r:e.status==="loading"?e:r.status==="idle"?S({},r,e):S({},e,r),[r,e])}function G(t,s,n){const{accessToken:r}=l();return k(i.tableQueryResult(t,!0),e=>{const u=e.pageParam?parseInt(e.pageParam):0;return h({...t,query:{...t.query,offset:u},partMask:u!==0?t.partMask&f:t.partMask},r,n)},{...c,...s,select:e=>{const u=e==null?void 0:e.pages[0];if(u.responseBody)for(let a=0;a<e.pages.length;a++){const o=e.pages[a];o.responseBody!=null&&(e.pages[a].responseBody={...u.responseBody,queryResult:o.responseBody.queryResult})}return e},getPreviousPageParam:e=>{var o;if(e.jobState!=="COMPLETE")return;const u=e.requestBody;if(u.query.offset==null||u.query.offset===0)return;const a=(o=u.query.limit)!=null?o:b;return Math.max(u.query.offset-a,0)},getNextPageParam:(e,u)=>{var m,g,d,p,Q;if(e.jobState!=="COMPLETE")return;const a=e.requestBody,o=(m=a.query.limit)!=null?m:b,y=(g=u[0].responseBody)==null?void 0:g.queryCount;if(!(y!=null&&((d=a.query.offset)!=null?d:0)+o>=y))return((p=e.responseBody.queryResult)==null?void 0:p.queryResults.rows.length)===o?((Q=a.query.offset)!=null?Q:0)+o:void 0}})}const I=(t,s)=>{var n,r;return(r=(n=s==null?void 0:s.selectColumns)==null?void 0:n.findIndex(e=>e.name===t))!=null?r:-1},V=(t,s)=>t==null||s==null||t.length===0||s.length===0?!1:t.filter(r=>!L(r)&&s.find(e=>e.name===r.columnName)).length>0,L=t=>t.facetType==="enumeration"&&t.facetValues.length==1&&t.facetValues[0].value==T;function W(t,s){var r;const n=s==null?void 0:s.columnName;if(n&&t){const e=A(t),u=(r=e.facets)==null?void 0:r.filter(a=>a.columnName.toLowerCase()!==n.toLowerCase());return e.facets=u,e}else return t}export{G as a,F as b,L as c,I as g,V as i,W as r,C as u};
