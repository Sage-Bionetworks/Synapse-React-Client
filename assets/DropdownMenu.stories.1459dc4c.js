import{r as p,j as a,a as B,R as E}from"./jsx-runtime.0721b30f.js";import{I as G}from"./IconSvg.69d2b3a3.js";import{B as U}from"./Button.9899c0f8.js";import{T as C}from"./Typography.f634a419.js";import{o as P,T as j,P as z}from"./Tooltip.95391ddc.js";import{F as K}from"./Fade.54a45bb0.js";import{a as R,P as X}from"./List.c60fc6eb.js";import{u as W,b as J,a as Q}from"./TransitionGroupContext.536780f6.js";import{M as Z}from"./MenuList.4caebc00.js";import{d as _,g as O,s as N,_ as x,e as F,h as H,i as $,j as V,G as ee,D as L}from"./styled.b8cd841c.js";import{B as te}from"./ButtonBase.c60e40b2.js";import{d as A,D as oe}from"./Divider.e46ca18d.js";import"./iframe.d07454b7.js";import"./createSvgIcon.8972a51f.js";import"./InfoOutlined.1d86a385.js";import"./useTheme.210faaa5.js";import"./index.84874f77.js";import"./utils.61962e2e.js";import"./index.f2a06ad4.js";import"./emotion-react.browser.esm.4fe99834.js";function Y(e){return e.substring(2).toLowerCase()}function ne(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function re(e){const{children:t,disableReactTree:s=!1,mouseEvent:n="onClick",onClickAway:y,touchEvent:l="onTouchEnd"}=e,d=p.exports.useRef(!1),i=p.exports.useRef(null),c=p.exports.useRef(!1),f=p.exports.useRef(!1);p.exports.useEffect(()=>(setTimeout(()=>{c.current=!0},0),()=>{c.current=!1}),[]);const v=W(t.ref,i),g=J(r=>{const o=f.current;f.current=!1;const u=P(i.current);if(!c.current||!i.current||"clientX"in r&&ne(r,u))return;if(d.current){d.current=!1;return}let b;r.composedPath?b=r.composedPath().indexOf(i.current)>-1:b=!u.documentElement.contains(r.target)||i.current.contains(r.target),!b&&(s||!o)&&y(r)}),I=r=>o=>{f.current=!0;const u=t.props[r];u&&u(o)},h={ref:v};return l!==!1&&(h[l]=I(l)),p.exports.useEffect(()=>{if(l!==!1){const r=Y(l),o=P(i.current),u=()=>{d.current=!0};return o.addEventListener(r,g),o.addEventListener("touchmove",u),()=>{o.removeEventListener(r,g),o.removeEventListener("touchmove",u)}}},[g,l]),n!==!1&&(h[n]=I(n)),p.exports.useEffect(()=>{if(n!==!1){const r=Y(n),o=P(i.current);return o.addEventListener(r,g),()=>{o.removeEventListener(r,g)}}},[g,n]),a(p.exports.Fragment,{children:p.exports.cloneElement(t,h)})}function se(e){return O("MuiListItemIcon",e)}const ae=_("MuiListItemIcon",["root","alignItemsFlexStart"]),q=ae,ie=["className"],ce=e=>{const{alignItems:t,classes:s}=e;return V({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},se,s)},le=N("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(({theme:e,ownerState:t})=>x({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex"},t.alignItems==="flex-start"&&{marginTop:8})),de=p.exports.forwardRef(function(t,s){const n=F({props:t,name:"MuiListItemIcon"}),{className:y}=n,l=H(n,ie),d=p.exports.useContext(R),i=x({},n,{alignItems:d.alignItems}),c=ce(i);return a(le,x({className:$(c.root,y),ownerState:i,ref:s},l))}),pe=de;function ue(e){return O("MuiListItemText",e)}const me=_("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),S=me,fe=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],ye=e=>{const{classes:t,inset:s,primary:n,secondary:y,dense:l}=e;return V({root:["root",s&&"inset",l&&"dense",n&&y&&"multiline"],primary:["primary"],secondary:["secondary"]},ue,t)},ge=N("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[{[`& .${S.primary}`]:t.primary},{[`& .${S.secondary}`]:t.secondary},t.root,s.inset&&t.inset,s.primary&&s.secondary&&t.multiline,s.dense&&t.dense]}})(({ownerState:e})=>x({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})),xe=p.exports.forwardRef(function(t,s){const n=F({props:t,name:"MuiListItemText"}),{children:y,className:l,disableTypography:d=!1,inset:i=!1,primary:c,primaryTypographyProps:f,secondary:v,secondaryTypographyProps:g}=n,I=H(n,fe),{dense:h}=p.exports.useContext(R);let r=c!=null?c:y,o=v;const u=x({},n,{disableTypography:d,inset:i,primary:!!r,secondary:!!o,dense:h}),b=ye(u);return r!=null&&r.type!==C&&!d&&(r=a(C,x({variant:h?"body2":"body1",className:b.primary,component:f!=null&&f.variant?void 0:"span",display:"block"},f,{children:r}))),o!=null&&o.type!==C&&!d&&(o=a(C,x({variant:"body2",className:b.secondary,color:"text.secondary",display:"block"},g,{children:o}))),B(ge,x({className:$(b.root,l),ownerState:u,ref:s},I,{children:[r,o]}))}),be=xe;function ve(e){return O("MuiMenuItem",e)}const he=_("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),M=he,Ie=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],Ce=(e,t)=>{const{ownerState:s}=e;return[t.root,s.dense&&t.dense,s.divider&&t.divider,!s.disableGutters&&t.gutters]},Te=e=>{const{disabled:t,dense:s,divider:n,disableGutters:y,selected:l,classes:d}=e,c=V({root:["root",s&&"dense",t&&"disabled",!y&&"gutters",n&&"divider",l&&"selected"]},ve,d);return x({},d,c)},Me=N(te,{shouldForwardProp:e=>ee(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:Ce})(({theme:e,ownerState:t})=>x({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${M.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:L(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${M.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:L(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${M.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:L(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:L(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${M.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${M.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${A.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${A.inset}`]:{marginLeft:52},[`& .${S.root}`]:{marginTop:0,marginBottom:0},[`& .${S.inset}`]:{paddingLeft:36},[`& .${q.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&x({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${q.root} svg`]:{fontSize:"1.25rem"}}))),we=p.exports.forwardRef(function(t,s){const n=F({props:t,name:"MuiMenuItem"}),{autoFocus:y=!1,component:l="li",dense:d=!1,divider:i=!1,disableGutters:c=!1,focusVisibleClassName:f,role:v="menuitem",tabIndex:g,className:I}=n,h=H(n,Ie),r=p.exports.useContext(R),o=p.exports.useMemo(()=>({dense:d||r.dense||!1,disableGutters:c}),[r.dense,d,c]),u=p.exports.useRef(null);Q(()=>{y&&u.current&&u.current.focus()},[y]);const b=x({},n,{dense:o.dense,divider:i,disableGutters:c}),T=Te(n),m=W(u,s);let D;return n.disabled||(D=g!==void 0?g:-1),a(R.Provider,{value:o,children:a(Me,x({ref:m,role:v,tabIndex:D,component:l,focusVisibleClassName:$(T.focusVisible,f),className:$(T.root,I)},h,{ownerState:b,classes:T}))})}),ke=we;function k(e){const{buttonTooltip:t,dropdownButtonText:s,items:n=[],convertSingleItemToButton:y=!0,renderMenuIfNoItems:l=!1,buttonProps:d={}}=e,i=p.exports.useId(),[c,f]=E.useState(!1),v=E.useRef(null),g=n.flat().length;if(!l&&g===0)return null;if(y&&g===1){const o=n.flat()[0];return a(U,{component:"href"in o?"a":"button",title:o.tooltipText,variant:"outlined",href:"href"in o?o.href:void 0,rel:"href"in o?"noopener noreferrer":void 0,onClick:"onClick"in o?o.onClick:void 0,disabled:o.disabled,children:a(C,{variant:"buttonLink",children:o.text})})}const I=()=>{f(o=>!o)},h=o=>{v.current&&v.current.contains(o.target)||f(!1)};function r(o){o.key==="Tab"?(o.preventDefault(),f(!1)):o.key==="Escape"&&f(!1)}return B(E.Fragment,{children:[a(j,{title:t,children:a("span",{children:a(U,{variant:"outlined",ref:v,id:`composition-button-${i}`,"aria-controls":c?`composition-menu-${i}`:void 0,"aria-expanded":c?"true":void 0,"aria-haspopup":"true",onClick:I,...d,children:a(C,{variant:"buttonLink",children:s})})})}),a(z,{open:c,anchorEl:v.current,role:void 0,placement:"bottom-end",transition:!0,children:({TransitionProps:o})=>a(K,{...o,children:a(X,{children:a(re,{onClickAway:h,children:a(Z,{autoFocusItem:c,id:`composition-menu-${i}`,"aria-labelledby":`composition-button-${i}`,onKeyDown:r,children:n.map((u,b,T)=>[u.map(m=>a(j,{title:m.tooltipText,placement:"left",children:B(ke,{component:"a",sx:{"&:hover":{color:"unset"},"&:focus":{color:"unset",textDecoration:"unset"}},disabled:m.disabled,href:"href"in m?m.href:void 0,rel:"href"in m?"noopener noreferrer":void 0,style:{pointerEvents:"auto"},onClick:D=>{!m.disabled&&"onClick"in m&&m.onClick&&(f(!1),m.onClick(D))},children:[a(pe,{children:m.icon&&a(G,{icon:m.icon,sx:{width:"16px",height:"16px",...m.iconSx},wrap:!1})}),a(be,{primaryTypographyProps:{variant:"smallText1",sx:m.textSx},sx:{marginTop:0},children:m.text})]})},m.text)),b<T.length-1&&a(oe,{})])})})})})})]})}try{k.displayName="DropdownMenu",k.__docgenInfo={description:"The DropdownMenu component provides a generic way to compose a MUI dropdown menu.",displayName:"DropdownMenu",props:{items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"DropdownMenuItem[][]"}},dropdownButtonText:{defaultValue:null,description:"",name:"dropdownButtonText",required:!0,type:{name:"string"}},buttonTooltip:{defaultValue:null,description:"",name:"buttonTooltip",required:!1,type:{name:"string"}},buttonProps:{defaultValue:null,description:"",name:"buttonProps",required:!1,type:{name:'ButtonProps<"button", {}>'}},convertSingleItemToButton:{defaultValue:null,description:"",name:"convertSingleItemToButton",required:!1,type:{name:"boolean"}},renderMenuIfNoItems:{defaultValue:null,description:"",name:"renderMenuIfNoItems",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/menu/DropdownMenu.tsx#DropdownMenu"]={docgenInfo:k.__docgenInfo,name:"DropdownMenu",path:"src/lib/containers/menu/DropdownMenu.tsx#DropdownMenu"})}catch{}const Ke={parameters:{storySource:{source:`import React from 'react'
import { ComponentStory, ComponentMeta } from '@storybook/react'
import { DropdownMenu } from './DropdownMenu'
import IconSvg from '../IconSvg'

// More on default export: https://storybook.js.org/docs/react/writing-stories/introduction#default-export
export default {
  title: 'UI/DropdownMenu',
  component: DropdownMenu,
  // More on argTypes: https://storybook.js.org/docs/react/api/argtypes
  argTypes: {},
} as ComponentMeta<typeof DropdownMenu>

const onClickHandler = (item: any) => () => {
  console.log('Item clicked', item)
}

// More on component templates: https://storybook.js.org/docs/react/writing-stories/introduction#using-args
const DropdownMenuTemplate: ComponentStory<typeof DropdownMenu> = args => (
  <DropdownMenu {...args} />
)

export const Demo = DropdownMenuTemplate.bind({})

Demo.args = {
  dropdownButtonText: 'Dropdown Menu Button',
  buttonProps: {
    endIcon: <IconSvg icon="verticalEllipsis" wrap={false} />,
  },
  items: [
    [
      {
        text: 'Do something cool',
        onClick: onClickHandler(0),
      },
      {
        text: 'This one has a tooltip',
        tooltipText: 'Some more info',
        onClick: onClickHandler(1),
      },
      {
        text: 'This one is disabled',
        disabled: true,
        onClick: onClickHandler(3),
      },
      {
        text: 'This one has both',
        disabled: true,
        tooltipText: "You can't do this for reasons",
        onClick: onClickHandler(4),
      },
    ],
    [
      {
        text: 'You can organize actions into groups',
        onClick: onClickHandler(5),
      },
    ],
  ],
}
`,locationsMap:{demo:{startLoc:{col:66,line:19},endLoc:{col:1,line:21},startBody:{col:66,line:19},endBody:{col:1,line:21}}}}},title:"UI/DropdownMenu",component:k,argTypes:{}},w=e=>()=>{console.log("Item clicked",e)},De=e=>a(k,{...e}),Le=De.bind({});Le.args={dropdownButtonText:"Dropdown Menu Button",buttonProps:{endIcon:a(G,{icon:"verticalEllipsis",wrap:!1})},items:[[{text:"Do something cool",onClick:w(0)},{text:"This one has a tooltip",tooltipText:"Some more info",onClick:w(1)},{text:"This one is disabled",disabled:!0,onClick:w(3)},{text:"This one has both",disabled:!0,tooltipText:"You can't do this for reasons",onClick:w(4)}],[{text:"You can organize actions into groups",onClick:w(5)}]]};const Xe=["Demo"];export{Le as Demo,Xe as __namedExportsOrder,Ke as default};
