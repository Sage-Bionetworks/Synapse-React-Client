import{r as o,j as e,a as h,F as A}from"./jsx-runtime.eafcb716.js";import{h as U,v as E,cK as N,cP as M,cH as L,a6 as R,cI as v}from"./index.1b5679ea.js";import{h as b}from"./moment.a565bb48.js";import{T as _}from"./Typography.049c6864.js";import{U as K}from"./UserCard.a35d5b7e.js";import{I as T}from"./IconSvg.625594e1.js";import{S as P}from"./SkeletonTable.aa50450b.js";import{P as k}from"./getEndpoint.bb7ded34.js";import{R as j}from"./Row.4bc8df23.js";import{C as I}from"./isArray.58b2754e.js";import{S as Y}from"./Skeleton.7d351d4d.js";const d=async n=>(await fetch(n,{method:"GET",headers:{Accept:"*/*","Access-Control-Request-Headers":"authorization","Content-Type":"text/plain; charset=utf-8"}})).text(),u=n=>{const{threadId:g,replyId:l}=n,{accessToken:t}=U(),[s,x]=o.exports.useState(),[O,C]=o.exports.useState(""),[a,w]=o.exports.useState(),[p,m]=o.exports.useState(),[S,f]=o.exports.useState(!1),D=async()=>{let i;const c=await N(g,t);if(f(!0),l){const r=await M(l,t);i=await L(r.messageKey,t),m(await R(t,r.createdBy)),w(r)}else m(await R(t,c.createdBy)),i=await v(c.messageKey,t);C(await d(i.messageUrl)),x(c),f(!1)};return o.exports.useEffect(()=>{D()},[]),e("div",{className:"search-result-container",children:h(j,{children:[e(I,{xs:1,children:S?e(Y,{variant:"circle",width:"40px",height:"40px"}):l?e(T,{options:{icon:"replyTwoTone"}}):e(T,{options:{icon:"chatTwoTone"}})}),e(I,{xs:11,children:S?e(P,{numCols:1,numRows:4}):h(A,{children:[e(_,{variant:"headline3",children:e("a",{className:"link",href:((i,c,r)=>{let y=`${k.PORTAL}#!Synapse:${c}/discussion/threadId=${i}`;return r&&(y+=`&replyId=${r}`),y})(s==null?void 0:s.id,s==null?void 0:s.projectId,a==null?void 0:a.id),children:s==null?void 0:s.title})}),e("div",{className:"truncated",children:e(_,{variant:"body1",children:O})}),h("div",{className:"search-result-footer",children:[l?"Reply":"Thread"," by"," ",e(K,{size:E,ownerId:p==null?void 0:p.ownerId})," ",b(a==null?void 0:a.createdOn).format("l LT")]})]})})]})})};try{d.displayName="getMessage",d.__docgenInfo={description:"",displayName:"getMessage",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DiscussionSearchResult.tsx#getMessage"]={docgenInfo:d.__docgenInfo,name:"getMessage",path:"src/lib/containers/DiscussionSearchResult.tsx#getMessage"})}catch{}try{u.displayName="DiscussionSearchResult",u.__docgenInfo={description:"",displayName:"DiscussionSearchResult",props:{threadId:{defaultValue:null,description:"",name:"threadId",required:!0,type:{name:"string"}},replyId:{defaultValue:null,description:"",name:"replyId",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DiscussionSearchResult.tsx#DiscussionSearchResult"]={docgenInfo:u.__docgenInfo,name:"DiscussionSearchResult",path:"src/lib/containers/DiscussionSearchResult.tsx#DiscussionSearchResult"})}catch{}export{u as D,d as g};
