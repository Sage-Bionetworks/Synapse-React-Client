import{r as i,j as t,F as A,a as g}from"./jsx-runtime.02fcd003.js";import{I as C}from"./IconSvg.c783b477.js";import{a as U}from"./CardContainerLogic.07f08fbb.js";import{a4 as v}from"./index.91a9706e.js";import{U as N}from"./UserSearchBoxV2.6bba18fd.js";import{M as h}from"./Modal.eec014aa.js";import{s as $}from"./startCase.7dba8bf4.js";const B=["title","bold","italic","strikethrough","code","latex","subscript","superscript","link","image"],R={title:{openSyntax:"###",closeSyntax:""},bold:{openSyntax:"**",closeSyntax:"**"},italic:{openSyntax:"_",closeSyntax:"_"},strikethrough:{openSyntax:"--",closeSyntax:"--"},code:{openSyntax:"```",closeSyntax:"```"},latex:{openSyntax:"$$\\(",closeSyntax:"\\)$$"},subscript:{openSyntax:"~",closeSyntax:"~"},superscript:{openSyntax:"^",closeSyntax:"^"},link:{openSyntax:"[",closeSyntax:"](url)"},image:{openSyntax:"![",closeSyntax:"](image-url)"}},x=({show:r,onClose:n,handleUserTag:s})=>{const u=i.exports.useCallback((y,c)=>{y&&c&&s(c.userName),n()},[n,s]);return t(A,{children:g(h,{show:r,onHide:n,backdrop:"static",animation:!1,children:[t(h.Header,{closeButton:!0,children:t(h.Title,{children:"Find User or Team"})}),t(h.Body,{children:t(N,{placeholder:"Search for a user or team name",onChange:u,typeFilter:v.USERS_ONLY})})]})})};try{x.displayName="UserMentionModal",x.__docgenInfo={description:"",displayName:"UserMentionModal",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},handleUserTag:{defaultValue:null,description:"",name:"handleUserTag",required:!0,type:{name:"(user: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/UserMentionModal.tsx#UserMentionModal"]={docgenInfo:x.__docgenInfo,name:"UserMentionModal",path:"src/lib/containers/markdown/UserMentionModal.tsx#UserMentionModal"})}catch{}var E=(r=>(r.WRITE="WRITE",r.PREVIEW="PREVIEW",r))(E||{});const _=({placeholder:r,text:n,setText:s})=>{const[u,y]=i.exports.useState("WRITE"),[c,M]=i.exports.useState(0),[k,T]=i.exports.useState(!1),l=i.exports.useRef(null);i.exports.useEffect(()=>{const e=l.current;e&&e.setSelectionRange(c,c)},[l,c]),i.exports.useEffect(()=>{var e;(e=l.current)==null||e.focus()},[k]);const I=e=>{const o=[],a=l.current;if(a){const d=a==null?void 0:a.selectionStart,p=n.substring(0,d),S=n.substring(d,n.length);M(d+e.length+1),o.push(p,`@${e}`,S)}s(o.join(""))},O=e=>{const o=l.current;if(o){const a=o.selectionStart,d=o.selectionEnd,p=n.substring(a,d),S=n.substring(0,a),b=n.substring(d,n.length),m=R[e].openSyntax,w=R[e].closeSyntax;switch(e){case"code":{const f=[];f.push(S,m,p,w,b),s(f.join(`\r
`)),o.focus(),M(a+m.length+2);break}case"title":case"bold":case"italic":case"strikethrough":case"latex":case"subscript":case"superscript":case"link":case"image":{const f=`${S}${m}${p}${w}${b}`;o.focus(),M(a+m.length),s(f)}}}};return g("div",{className:"bootstrap-4-backport MarkdownEditor",children:[g("div",{className:"MarkdownEditorControls",children:[t("div",{className:"Tabs",children:Object.keys(E).map(e=>t("button",{className:"Tab",role:"tab","aria-selected":e===u,onClick:o=>{o.stopPropagation(),y(E[e])},children:e},e))}),u==="WRITE"&&g("div",{className:"MarkdownEditorControlsToolbar",children:[B.map(e=>t("button",{onClick:()=>O(e),children:t(C,{icon:e,label:$(e)})},e)),t("button",{onClick:()=>T(!0),children:t(C,{icon:"tag",label:"Mention"})})]})]}),t("div",{children:u==="WRITE"?t("textarea",{onChange:e=>s(e.target.value),style:{width:"100%"},rows:6,value:n,ref:l,placeholder:r}):n?t(U,{markdown:n}):"Nothing to preview"}),t(x,{show:k,onClose:()=>T(!1),handleUserTag:I})]})};try{_.displayName="MarkdownEditor",_.__docgenInfo={description:"",displayName:"MarkdownEditor",props:{placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},setText:{defaultValue:null,description:"",name:"setText",required:!0,type:{name:"(text: string) => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/MarkdownEditor.tsx#MarkdownEditor"]={docgenInfo:_.__docgenInfo,name:"MarkdownEditor",path:"src/lib/containers/markdown/MarkdownEditor.tsx#MarkdownEditor"})}catch{}export{_ as M};
