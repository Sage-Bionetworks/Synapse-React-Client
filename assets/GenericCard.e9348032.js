import{w as Ie,z as Ne,A as Ve,C as Oe,H as ce,I as ue}from"./index.9d9e288e.js";import{i as he}from"./EntityTypeUtils.a7e75691.js";import{P as Z}from"./getEndpoint.0de7fccf.js";import{S as ge,D as Ae}from"./sqlFunctions.b49ac766.js";import{u as k}from"./unCamelCase.d070537b.js";import{C as W}from"./ColumnType.744125d2.js";import"./assert.e3add185.js";import{T as xe}from"./Tooltip.6c95fe7b.js";import{a as Ce,I as ve}from"./index.7e293339.js";import{M as K}from"./MarkdownSynapse.02aab67c.js";import{j as n,a as h,F as y}from"./jsx-runtime.2e925369.js";import{I as we}from"./IconList.61c80547.js";import{I as qe,t as Ee}from"./IconSvg.c485205d.js";import{U as pe}from"./UserCard.cacf1a34.js";import{F as ke}from"./FileHandleLink.a1f86e40.js";import{u as He}from"./react-intersection-observer.m.66de6abb.js";import{i as De}from"./isEmpty.5d92ea54.js";const me=window.React.useState,Me=window.React.useEffect,H=({type:i,title:e,subTitle:a="",description:t,values:r,secondaryLabelLimit:l,isAlignToLeftNav:o,descriptionConfig:d,href:m,target:f,rgbIndex:p,icon:S})=>{const c=document.querySelector('meta[name="description"]'),[_]=me(document.title),[g]=me(c?c.getAttribute("content"):"");return Me(()=>(e&&document.title!==e&&(document.title=e),(t||a)&&(c==null||c.setAttribute("content",t||a)),function(){document.title=_,c==null||c.setAttribute("content",g)})),n("div",{className:`SRC-portalCard SRC-portalCardHeader ${o?"isAlignToLeftNav":""}`,children:n("div",{className:"container-fluid container-full-width",children:n("div",{className:"row",children:n("div",{className:"col-md-offset-1 col-md-10",children:h("div",{className:"SRC-portalCardMain",children:[S,h("div",{style:{width:"100%"},children:[h("div",{className:"SRC-cardContent",style:{marginLeft:"15px"},children:[n("div",{className:"SRC-type",children:i}),n("div",{children:n("h3",{className:"SRC-boldText",style:{margin:"none"},children:m?n("a",{target:f,href:m,className:"highlight-link",children:e}):h("span",{children:[" ",e," "]})})}),a&&h("div",{className:"SRC-author",children:[" ",a," "]}),t&&n("span",{className:"SRC-font-size-base",children:d!=null&&d.isMarkdown?n(K,{markdown:t}):t})]}),n("div",{style:{borderTop:"1px solid rgba(26, 28, 41, 0.2)",marginTop:"15px",paddingTop:"5px"}}),n("div",{className:"SRC-cardContent",children:r&&n(Ce,{isHeader:!0,secondaryLabelLimit:l,values:r})})]})]})})})})})};try{H.displayName="HeaderCard",H.__docgenInfo={description:"",displayName:"HeaderCard",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subTitle:{defaultValue:{value:""},description:"",name:"subTitle",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[][]"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},href:{defaultValue:null,description:"",name:"href",required:!1,type:{name:"string"}},target:{defaultValue:null,description:"",name:"target",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"Element"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HeaderCard.tsx#HeaderCard"]={docgenInfo:H.__docgenInfo,name:"HeaderCard",path:"src/lib/containers/HeaderCard.tsx#HeaderCard"})}catch{}const Fe=window.React.useEffect,Ge=window.React.useState,D=i=>{const{fileHandleAssociation:{fileHandleId:e,associateObjectId:a,associateObjectType:t}}=i,{accessToken:r}=Ie(),[l,o]=Ge(),{ref:d,inView:m}=He({triggerOnce:!0,rootMargin:"500px 0px"});return Fe(()=>{(()=>{e&&a&&t&&m&&Ne(e,r,t,a,!1).then(p=>{o(p)}).catch(p=>{console.error("Error on retrieving file handle url ",p)})})()},[m,e,a,r,t]),n("span",{ref:d,children:l&&n("img",{src:l,alt:"",className:"ImageFileHandle",loading:"lazy"})})};try{D.displayName="ImageFileHandle",D.__docgenInfo={description:"",displayName:"ImageFileHandle",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"]={docgenInfo:D.__docgenInfo,name:"ImageFileHandle",path:"src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"})}catch{}const Q=window.React,ee=400,$e="SRC-short-description",Be="SRC-long-description",M=i=>{let e="";const a=i.split(" ");let t=0;for(;e.length<ee&&t<a.length;)e+=`${a[t]} `,t+=1;return e=e.trim(),{previewText:e}},Ye=(i,e,a)=>{var r;let t;return i&&e&&(he(i)?t={fileHandleId:e,associateObjectId:(r=i==null?void 0:i.id)!=null?r:"",associateObjectType:ce.TableEntity}:a&&(t={fileHandleId:e,associateObjectId:a,associateObjectType:ce.FileEntity})),t},v=({columnName:i,value:e,selectColumns:a,columnModels:t})=>{if(!e)return{str:"",strList:void 0,columnModelType:void 0};const r=(a==null?void 0:a.find(o=>o.name===i))||(t==null?void 0:t.find(o=>o.name===i));if(r==null?void 0:r.columnType.endsWith("_LIST")){let o=e,d;try{return d=JSON.parse(o),o=d.join(", "),{strList:d,str:o,columnModelType:r==null?void 0:r.columnType}}catch(m){console.error("Could not parse multivalue string ",o," caught err ",m)}}return{str:e,columnModelType:r==null?void 0:r.columnType}},Ke=(i,e,a)=>(e==null?void 0:e.findIndex(t=>t.name===i))||(a==null?void 0:a.findIndex(t=>t.name===i)),F=i=>{const{synapseId:e,version:a}=i;return h("span",{children:[a,"\xA0\xA0",n("a",{target:"_blank",rel:"noopener noreferrer",href:`${Z.PORTAL}#!Synapse:${e}.${a}`,children:"(Show Version History on Synapse)"})]})},G=i=>{const{value:e,columnName:a,labelLink:t,selectColumns:r,columnModels:l,isHeader:o,className:d,rowData:m}=i;if(!e)return n(y,{children:e});const{strList:f,str:p,columnModelType:S}=v({columnName:a,value:e,selectColumns:r,columnModels:l});if(!p)return n(y,{children:p});let c=d;const _={};if(o&&(c=d==null?void 0:d.concat(" ","SRC-lightLink")),S===W.USERID_LIST&&f)return n(y,{children:f.map((C,u)=>h("span",{children:[n(pe,{ownerId:C,size:ue,className:c}),u<f.length-1&&",\xA0\xA0"]},C))});if(S===W.USERID&&p)return n(pe,{ownerId:p,size:ue,className:c});if(!t)return p.match(ge)?n("a",{target:"_blank",rel:"noopener noreferrer",href:`${Z.PORTAL}#!Synapse:${p}`,className:c,children:p}):n(y,{children:p});let g;if(t.isMarkdown)f?g=n(y,{children:f.map((C,u)=>h("span",{children:[n(K,{renderInline:!0,markdown:C},C),u<f.length-1&&",\xA0\xA0"]},C))}):g=n(K,{renderInline:!0,markdown:e});else{const C=f||p.split(",");if("linkColumnName"in t){const u=Ke(t.linkColumnName,r,l);if(u==null)console.warn(`Could not determine column index of ${t.linkColumnName}`),g=n(y,{children:e});else{const T=m[u];De(T)?g=n(y,{children:e}):g=n(y,{children:C.map((s,I)=>h(Q.Fragment,{children:[n("a",{href:T,target:"_blank",rel:"noopener noreferrer",className:c,style:_,children:s},s),I<C.length-1&&n("span",{style:{marginRight:4},children:", "})]},s))})}}else g=n(y,{children:C.map((u,T)=>{const{baseURL:s,URLColumnName:I,wrapValueWithParens:P}=t,N=P?`(${u})`:u,V=`/${s}?${I}=${N}`;return h(Q.Fragment,{children:[n("a",{href:V,className:c,style:_,children:u},u),T<C.length-1&&n("span",{style:{marginRight:4},children:", "})]},u)})})}return t.tooltipText?n(xe,{title:t.tooltipText,enterNextDelay:300,children:n("span",{children:g})}):g};function Pe(i,e,a){if(i){if(!e||!a)throw Error("Must specify CardLink and data for linking to work");const{matchColumnName:t,URLColumnName:r,overrideLinkURLColumnName:l}=i;if(l&&a[l]){const d=a[l],m=e[d];if(m)return m}const o=a[t];if(o===void 0)console.error(`Could not find match for data: ${e} with columnName ${t}`);else{const d=e[o];if(d)return`/${i.baseURL}?${r}=${d}`}}}function fe(i,e,a,t){var o;i=i.trim();let r=i,l="_self";return i.match(ge)?r=`${Z.PORTAL}#!Synapse:${i}`:i.match(Ae)?(l="_blank",r=`https://dx.doi.org/${i}`):e?e&&(r=(o=Pe(e,a,t))!=null?o:""):l="_blank",{href:r,target:l}}function $(i){const{description:e,hasClickedShowMore:a,descriptionSubTitle:t,descriptionConfig:r}=i;let l=e;r!=null&&r.isMarkdown&&(l=n(K,{markdown:l}));const o=a||(r==null?void 0:r.showFullDescriptionByDefault);return n("div",{className:o?"":"SRC-hidden",children:n("span",{"data-search-handle":t,className:`SRC-font-size-base ${Be}`,children:l})})}function B(i){const{description:e,hasClickedShowMore:a,descriptionSubTitle:t,descriptionConfig:r,toggleShowMore:l}=i;return r!=null&&r.showFullDescriptionByDefault?n(y,{}):h("div",{className:a?"SRC-hidden":"",children:[n("span",{"data-search-handle":t,className:`SRC-font-size-base ${$e} SRC-short-description`,children:M(e).previewText}),e.length>=ee&&n("a",{style:{fontSize:"16px",cursor:"pointer",marginLeft:"5px"},className:"highlight-link",onClick:l,children:"...Show More"})]})}class Y extends Q.Component{constructor(e){super(e),this.getCutoff=a=>{let t="";const r=a.split(" ");let l=0;for(;t.length<ee&&l<r.length;)t+=`${r[l]} `,l+=1;return t=t.trim(),{previewText:t}},this.toggleShowMore=()=>{this.setState({hasClickedShowMore:!0})},this.renderTitle=({href:a,target:t,titleSearchHandle:r,title:l})=>a?n("a",{"data-search-handle":r,target:t,href:a,className:"highlight-link",children:l}):h("span",{"data-search-handle":r,children:[" ",l," "]}),this.state={hasClickedShowMore:!1}}render(){var se;const{schema:e,data:a,genericCardSchema:t,secondaryLabelLimit:r,selectColumns:l,columnModels:o,iconOptions:d,useTypeColumnForIcon:m=!1,isHeader:f=!1,titleLinkConfig:p,ctaLinkConfig:S,labelLinkConfig:c,facetAliases:_={},descriptionConfig:g,rgbIndex:C,columnIconOptions:u,queryContext:{entity:T}}=this.props,s=t,{hasClickedShowMore:I}=this.state,{link:P="",type:N}=s,V=a[e[s.title]];let O=s.subTitle&&a[e[s.subTitle]];O=(s==null?void 0:s.subTitle)&&v({value:O,columnName:s==null?void 0:s.subTitle,selectColumns:l,columnModels:o}).str;const A=a[e[s.description||""]],ye=a[e[s.icon||""]],w=a[e[s.dataTypeIconNames||""]],x=a[e[s.imageFileHandleColumnName||""]],U=o==null?void 0:o.find(R=>s.link===R.name),Se=U==null?void 0:U.columnType,ne=a[e[P]]||"",{href:ae,target:te}=fe(ne,p,a,e),q=[],{secondaryLabels:re=[]}=s,_e=T&&!he(T);for(let R=0;R<re.length;R+=1){const b=re[R];let L=a[e[b]],X;if(L){if(_e&&b==="currentVersion"){const J=a[e.id];L=F({synapseId:J,version:L}),X="Version"}else{const J=c==null?void 0:c.find(de=>de.matchColumnName===b);L=n(G,{value:L,columnName:b,labelLink:J,isHeader:f,selectColumns:l,columnModels:o,rowData:a}),X=k(b,_)}const Re=[X,L,b];q.push(Re)}}const E=Ye(T,x||ne,a[e.id]),ie=q.length>0,Te={marginTop:f?"0px":void 0,marginBottom:f?"0px":void 0,paddingBottom:ie||x?void 0:"15px"},le=h(y,{children:[!m&&x&&n("div",{className:"SRC-imageThumbnail",style:{padding:s.thumbnailRequiresPadding?"21px":void 0},children:E&&n(D,{fileHandleAssociation:E})}),!m&&!x&&n("div",{className:"SRC-cardThumbnail",children:n(ve,{iconOptions:d,value:ye,type:N})}),m&&n("div",{className:"SRC-cardThumbnail",children:n(qe,{options:{icon:Ee[a[e.type]]}})})]});if(f)return n(H,{descriptionConfig:g,title:V,subTitle:O,description:A,type:N,icon:le,values:q,href:ae,target:te,isAlignToLeftNav:!0,secondaryLabelLimit:r,rgbIndex:C});const be=k(s.title,_),Le=k(s.subTitle,_),oe=k(s.description,_);let j,z;if(S){const R=a[e[S.link]]||"",{href:b,target:L}=fe(R,void 0,a,e);j=b,z=L}return h("div",{style:Te,className:"SRC-portalCard",children:[h("div",{className:"SRC-portalCardMain",children:[le,h("div",{className:"SRC-cardContent",children:[n("div",{className:"SRC-type",children:N}),((se=u==null?void 0:u.columns)==null?void 0:se.dataType)&&(w==null?void 0:w.length)&&n("div",{style:{marginTop:"20px"},children:n(we,{iconConfigs:u.columns.dataType,iconNames:JSON.parse(w),useBackground:!0,useTheme:!0})}),n("div",{children:n("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"},children:!p&&Se===W.FILEHANDLEID&&E?n(ke,{fileHandleAssociation:E,showDownloadIcon:N!==Ve,displayValue:V}):this.renderTitle({href:ae,target:te,titleSearchHandle:be,title:V})})}),O&&n("div",{"data-search-handle":Le,className:"SRC-author",children:O}),A&&n(B,{description:A,hasClickedShowMore:I,descriptionSubTitle:oe,descriptionConfig:g,toggleShowMore:this.toggleShowMore}),A&&n($,{description:A,hasClickedShowMore:I,descriptionSubTitle:oe,descriptionConfig:g}),S&&j&&z&&n("div",{className:"SRC-portalCardCTALink bootstrap-4-backport",children:n("a",{target:z,rel:"noopener noreferrer",href:j,children:S.text})})]})]}),ie&&n(Ce,{isHeader:!1,secondaryLabelLimit:r,values:q,columnIconOptions:u,className:`${x?"hasImage":"hasIcon"}`})]})}}Y.contextType=Oe;try{$.displayName="LongDescription",$.__docgenInfo={description:"",displayName:"LongDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#LongDescription"]={docgenInfo:$.__docgenInfo,name:"LongDescription",path:"src/lib/containers/GenericCard.tsx#LongDescription"})}catch{}try{B.displayName="ShortDescription",B.__docgenInfo={description:"",displayName:"ShortDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},toggleShowMore:{defaultValue:null,description:"",name:"toggleShowMore",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#ShortDescription"]={docgenInfo:B.__docgenInfo,name:"ShortDescription",path:"src/lib/containers/GenericCard.tsx#ShortDescription"})}catch{}try{M.displayName="getCutoff",M.__docgenInfo={description:"",displayName:"getCutoff",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getCutoff"]={docgenInfo:M.__docgenInfo,name:"getCutoff",path:"src/lib/containers/GenericCard.tsx#getCutoff"})}catch{}try{v.displayName="getValueOrMultiValue",v.__docgenInfo={description:"",displayName:"getValueOrMultiValue",props:{columnName:{defaultValue:null,description:"",name:"columnName",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getValueOrMultiValue"]={docgenInfo:v.__docgenInfo,name:"getValueOrMultiValue",path:"src/lib/containers/GenericCard.tsx#getValueOrMultiValue"})}catch{}try{F.displayName="VersionLabel",F.__docgenInfo={description:"",displayName:"VersionLabel",props:{synapseId:{defaultValue:null,description:"",name:"synapseId",required:!0,type:{name:"string"}},version:{defaultValue:null,description:"",name:"version",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#VersionLabel"]={docgenInfo:F.__docgenInfo,name:"VersionLabel",path:"src/lib/containers/GenericCard.tsx#VersionLabel"})}catch{}try{G.displayName="SynapseCardLabel",G.__docgenInfo={description:"",displayName:"SynapseCardLabel",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},labelLink:{defaultValue:null,description:"",name:"labelLink",required:!0,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink | undefined"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!0,type:{name:"SelectColumn[] | undefined"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!0,type:{name:"ColumnModel[] | undefined"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#SynapseCardLabel"]={docgenInfo:G.__docgenInfo,name:"SynapseCardLabel",path:"src/lib/containers/GenericCard.tsx#SynapseCardLabel"})}catch{}try{Y.displayName="GenericCard",Y.__docgenInfo={description:"Renders a card from a table query",displayName:"GenericCard",props:{selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},useTypeColumnForIcon:{defaultValue:null,description:"",name:"useTypeColumnForIcon",required:!1,type:{name:"boolean"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"Record<string, number>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"string[]"}},tableId:{defaultValue:null,description:"",name:"tableId",required:!0,type:{name:"string | undefined"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#GenericCard"]={docgenInfo:Y.__docgenInfo,name:"GenericCard",path:"src/lib/containers/GenericCard.tsx#GenericCard"})}catch{}export{Y as G,D as I,G as S,fe as a,Ye as b,v as g};
//# sourceMappingURL=GenericCard.e9348032.js.map
