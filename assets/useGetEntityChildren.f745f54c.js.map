{"version":3,"file":"useGetEntityChildren.f745f54c.js","sources":["../../src/lib/utils/hooks/SynapseAPI/entity/useGetEntityChildren.ts"],"sourcesContent":["import {\n  QueryFunctionContext,\n  QueryKey,\n  useInfiniteQuery,\n  UseInfiniteQueryOptions,\n  useQuery,\n  UseQueryOptions,\n} from 'react-query'\nimport { SynapseClient } from '../../..'\nimport { SynapseClientError } from '../../../SynapseClientError'\nimport { useSynapseContext } from '../../../SynapseContext'\nimport {\n  EntityChildrenRequest,\n  EntityChildrenResponse,\n} from '../../../synapseTypes'\nimport { entityQueryKeys } from './queryKeys'\n\nexport function useGetEntityChildren(\n  request: EntityChildrenRequest,\n  options?: UseQueryOptions<\n    EntityChildrenResponse,\n    SynapseClientError,\n    EntityChildrenResponse\n  >,\n) {\n  const { accessToken } = useSynapseContext()\n  return useQuery<EntityChildrenResponse, SynapseClientError>(\n    entityQueryKeys.children(request, false),\n    () => SynapseClient.getEntityChildren(request, accessToken),\n    options,\n  )\n}\n\nexport function useGetEntityChildrenInfinite(\n  request: EntityChildrenRequest,\n  options?: UseInfiniteQueryOptions<\n    EntityChildrenResponse,\n    SynapseClientError,\n    EntityChildrenResponse\n  >,\n) {\n  const { accessToken } = useSynapseContext()\n  return useInfiniteQuery<EntityChildrenResponse, SynapseClientError>(\n    entityQueryKeys.children(request, true),\n    async (context: QueryFunctionContext<QueryKey, string>) => {\n      return await SynapseClient.getEntityChildren(\n        {\n          ...request,\n          includeTotalChildCount: context.pageParam\n            ? false\n            : request.includeTotalChildCount, // only ask for the count when requesting the first page\n          nextPageToken: context.pageParam,\n        },\n        accessToken,\n        context.signal,\n      )\n    },\n    {\n      ...options,\n      getNextPageParam: page => page.nextPageToken,\n    },\n  )\n}\n"],"names":["SynapseClient.getEntityChildren"],"mappings":"uEAiBO,WACL,EACA,EAKA,CACM,KAAA,CAAE,eAAgB,IACxB,MAAO,GACL,EAAgB,SAAS,EAAS,EAAK,EACvC,IAAMA,EAAgC,EAAS,CAAW,EAC1D,CACF,CACF,CAEO,WACL,EACA,EAKA,CACM,KAAA,CAAE,eAAgB,IACxB,MAAO,GACL,EAAgB,SAAS,EAAS,EAAI,EACtC,KAAO,IACE,KAAMA,GACX,CACE,GAAG,EACH,uBAAwB,EAAQ,UAC5B,GACA,EAAQ,uBACZ,cAAe,EAAQ,SAAA,EAEzB,EACA,EAAQ,MACV,EAEF,CACE,GAAG,EACH,iBAAkB,GAAQ,EAAK,aAAA,CAEnC,CACF"}