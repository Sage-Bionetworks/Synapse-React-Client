{"version":3,"file":"DownloadCartPage.stories.63cdd516.js","sources":["../../src/lib/utils/hooks/SynapseAPI/useGetAvailableFilesToDownload.ts","../../src/lib/containers/download_list_v2/DirectProgrammaticDownload.tsx","../../src/lib/containers/download_list_v2/DownloadListTable.tsx","../../src/lib/containers/download_list_v2/AvailableForDownloadTable.tsx","../../src/lib/containers/download_list_v2/DownloadDetails.tsx","../../src/lib/containers/download_list_v2/DownloadListStats.tsx","../../src/lib/utils/hooks/SynapseAPI/useGetDownloadListActionsRequired.ts","../../src/lib/containers/download_list_v2/MeetAccessRequirementCard.tsx","../../src/lib/utils/hooks/SynapseAPI/entity/useGetEntityHeaders.ts","../../src/lib/containers/download_list_v2/RequestDownloadCard.tsx","../../src/lib/containers/download_list_v2/DownloadListActionsRequired.tsx","../../src/lib/containers/download_list_v2/CreatePackageV2.tsx","../../src/lib/containers/download_list_v2/DownloadCartPage.tsx"],"sourcesContent":["import {\n  useInfiniteQuery,\n  UseInfiniteQueryOptions,\n  useQuery,\n  UseQueryOptions,\n} from 'react-query'\nimport { SynapseClient } from '../..'\nimport { SynapseClientError } from '../../SynapseClientError'\nimport { useSynapseContext } from '../../SynapseContext'\nimport {\n  AvailableFilesRequest,\n  AvailableFilter,\n  Sort,\n} from '../../synapseTypes/DownloadListV2/QueryRequestDetails'\nimport { AvailableFilesResponse } from '../../synapseTypes/DownloadListV2/QueryResponseDetails'\n\nexport function useGetAvailableFilesToDownload(\n  request: AvailableFilesRequest,\n  options?: UseQueryOptions<\n    AvailableFilesResponse,\n    SynapseClientError,\n    AvailableFilesResponse\n  >,\n) {\n  const { accessToken } = useSynapseContext()\n  return useQuery<AvailableFilesResponse, SynapseClientError>(\n    ['downloadlistv2availablefiles', accessToken, request],\n    () => SynapseClient.getAvailableFilesToDownload(request, accessToken),\n    options,\n  )\n}\n\nexport function useGetAvailableFilesToDownloadInfinite(\n  sort?: Sort,\n  filter?: AvailableFilter,\n  options?: UseInfiniteQueryOptions<\n    AvailableFilesResponse,\n    SynapseClientError,\n    AvailableFilesResponse\n  >,\n) {\n  const { accessToken } = useSynapseContext()\n  const request: AvailableFilesRequest = {\n    concreteType:\n      'org.sagebionetworks.repo.model.download.AvailableFilesRequest',\n  }\n  if (sort) {\n    request.sort = [sort]\n  }\n  if (filter) {\n    request.filter = filter\n  }\n  return useInfiniteQuery<AvailableFilesResponse, SynapseClientError>(\n    ['downloadlistv2availablefiles', request],\n    async context => {\n      return SynapseClient.getAvailableFilesToDownload(\n        { ...request, nextPageToken: context.pageParam },\n        accessToken,\n      )\n    },\n    {\n      ...options,\n      getNextPageParam: page => page.nextPageToken,\n    },\n  )\n}\n","import React, { useState } from 'react'\nimport ReactTooltip from 'react-tooltip'\nimport IconSvg from '../IconSvg'\nimport { ProgrammaticInstructionsModal } from '../ProgrammaticInstructionsModal'\nimport { TOOLTIP_DELAY_SHOW } from '../table/SynapseTableConstants'\n\ntype DirectProgrammaticDownloadProps = {\n  entityId: string\n  version?: number\n}\n\nfunction DirectProgrammaticDownload({\n  entityId,\n  version,\n}: DirectProgrammaticDownloadProps) {\n  const [isShowingModal, setIsShowingModal] = useState<boolean>(false)\n\n  const rCode = `library(synapser)\nsynLogin('username','password')\n\n# Obtain a pointer and download the data\n${entityId} <- synGet(entity='${entityId}'${\n    version ? `, version=${version}` : ''\n  } ) `\n\n  const pythonCode = `import synapseclient\n\nsyn = synapseclient.Synapse()\nsyn.login('synapse_username','password')\n\n# Obtain a pointer and download the data\n${entityId} = syn.get(entity='${entityId}'${\n    version ? `, version=${version}` : ''\n  } )\n\n# Get the path to the local copy of the data file\nfilepath = ${entityId}.path`\n\n  const cliCode = `synapse get ${entityId} ${\n    version ? `--version ${version}` : ''\n  }`\n\n  return (\n    <>\n      <span\n        data-for={`${entityId}-direct-programmatic-download-tooltip`}\n        data-tip=\"Programmatic download options\"\n      >\n        <ReactTooltip\n          delayShow={TOOLTIP_DELAY_SHOW}\n          place=\"left\"\n          type=\"dark\"\n          effect=\"solid\"\n          id={`${entityId}-direct-programmatic-download-tooltip`}\n        />\n        <button\n          className={'btn-download-icon'}\n          onClick={() => setIsShowingModal(true)}\n        >\n          <IconSvg options={{ icon: 'code' }} />\n        </button>\n      </span>\n      {isShowingModal && (\n        <ProgrammaticInstructionsModal\n          show={true}\n          onClose={() => setIsShowingModal(false)}\n          title=\"Download Programmatically\"\n          cliCode={cliCode}\n          rCode={rCode}\n          pythonCode={pythonCode}\n        />\n      )}\n    </>\n  )\n}\n\nexport default DirectProgrammaticDownload\n","import React, { useState, useEffect } from 'react'\nimport { useErrorHandler } from 'react-error-boundary'\nimport { DownloadListItemResult } from '../../utils/synapseTypes/DownloadListV2/DownloadListItemResult'\nimport { Dropdown, Table } from 'react-bootstrap'\nimport { calculateFriendlyFileSize } from '../../utils/functions/calculateFriendlyFileSize'\nimport { useGetAvailableFilesToDownloadInfinite } from '../../utils/hooks/SynapseAPI/useGetAvailableFilesToDownload'\nimport { useInView } from 'react-intersection-observer'\nimport {\n  AvailableFilter,\n  Sort,\n  SortField,\n} from '../../utils/synapseTypes/DownloadListV2/QueryRequestDetails'\nimport { DownloadListItem } from '../../utils/synapseTypes/DownloadListV2/DownloadListItem'\nimport { SynapseClient } from '../../utils'\nimport moment from 'moment'\nimport UserCard from '../UserCard'\nimport SortIcon from '../../assets/icons/Sort'\nimport { Direction, FileHandleAssociateType } from '../../utils/synapseTypes'\nimport { useSynapseContext } from '../../utils/SynapseContext'\nimport { PRODUCTION_ENDPOINT_CONFIG } from '../../utils/functions/getEndpoint'\nimport IconSvg from '../IconSvg'\nimport ReactTooltip from 'react-tooltip'\nimport { TOOLTIP_DELAY_SHOW } from '../table/SynapseTableConstants'\nimport { SkeletonTable } from '../../assets/skeletons/SkeletonTable'\nimport DirectDownload from '../DirectDownload'\nimport { displayToast } from '../ToastMessage'\nimport { FilesStatisticsResponse } from '../../utils/synapseTypes/DownloadListV2/QueryResponseDetails'\nimport DirectProgrammaticDownload from './DirectProgrammaticDownload'\nimport { BlockingLoader } from '../LoadingScreen'\nexport const TESTING_TRASH_BTN_CLASS = 'TESTING_TRASH_BTN_CLASS'\nexport const TESTING_CLEAR_BTN_CLASS = 'TESTING_CLEAR_BTN_CLASS'\n\nexport type DownloadListTableProps = {\n  filesStatistics: FilesStatisticsResponse\n  refetchStatistics: () => Promise<any>\n}\n\nexport default function DownloadListTable(props: DownloadListTableProps) {\n  const { filesStatistics, refetchStatistics } = props\n  const { accessToken } = useSynapseContext()\n  const handleError = useErrorHandler()\n  // Load the next page when this ref comes into view.\n  const { ref, inView } = useInView()\n  const [copyingAllSynapseIDs, setCopyingAllSynapseIDs] =\n    useState<boolean>(false)\n  const [sort, setSort] = useState<Sort | undefined>(undefined)\n  const [filter, setFilter] = useState<AvailableFilter | undefined>(undefined)\n  const {\n    data,\n    status,\n    isFetchingNextPage,\n    isLoading,\n    hasNextPage,\n    fetchNextPage,\n    isError,\n    error: newError,\n    refetch,\n  } = useGetAvailableFilesToDownloadInfinite(sort, filter)\n\n  //SWC-5858: Update the Download List files table when the statistics change\n  useEffect(() => {\n    if (refetch) {\n      refetch()\n    }\n  }, [filesStatistics, refetch])\n\n  useEffect(() => {\n    if (isError && newError) {\n      handleError(newError)\n    }\n  }, [isError, newError, handleError])\n\n  const allRows = data?.pages.flatMap(page => page.page) ?? []\n\n  useEffect(() => {\n    const copyAllSynapseIDs = () => {\n      const synIDs = allRows\n        .map((item: DownloadListItemResult) => {\n          return `${item.fileEntityId}.${item.versionNumber}`\n        })\n        .join('\\n')\n      // https://caniuse.com/mdn-api_clipboard_writetext\n      navigator.clipboard.writeText(synIDs).then(() => {\n        displayToast('Successfully copied to clipboard')\n      })\n      setCopyingAllSynapseIDs(false)\n    }\n\n    if (\n      status === 'success' &&\n      !isFetchingNextPage &&\n      hasNextPage &&\n      fetchNextPage &&\n      (inView || copyingAllSynapseIDs)\n    ) {\n      fetchNextPage()\n    } else if (!hasNextPage && copyingAllSynapseIDs) {\n      // We have all the data in allRows. Put it together and copy to the clipboard\n      copyAllSynapseIDs()\n    }\n  }, [\n    status,\n    isFetchingNextPage,\n    hasNextPage,\n    fetchNextPage,\n    inView,\n    copyingAllSynapseIDs,\n    allRows,\n  ])\n\n  const getFilterDisplayText = (f: AvailableFilter) => {\n    if (!f) {\n      return 'All'\n    } else if (f == 'eligibleForPackaging') {\n      return 'Only Eligible'\n    } else {\n      return 'Only Ineligible'\n    }\n  }\n  const removeItem = async (\n    item: DownloadListItem,\n    fileName: string,\n    title: string,\n  ) => {\n    try {\n      await SynapseClient.removeItemFromDownloadListV2(item, accessToken)\n      displayToast(`${fileName} has been removed from your list.`, 'success', {\n        title,\n      })\n      // refetching the statistics will update the download list, but refresh the list immediately since this will take time\n      refetch()\n      refetchStatistics()\n    } catch (err) {\n      console.error(err)\n    }\n  }\n  const InteractiveSortIcon = ({\n    columnSortBy,\n  }: {\n    columnSortBy: SortField\n  }) => {\n    return (\n      <span>\n        {setSort && (\n          <SortIcon\n            role=\"button\"\n            style={{ height: '20px' }}\n            active={sort?.field === columnSortBy}\n            direction={\n              sort?.field === columnSortBy\n                ? sort.direction === 'DESC'\n                  ? Direction.DESC\n                  : Direction.ASC\n                : Direction.DESC\n            }\n            onClick={() => {\n              const direction =\n                columnSortBy === sort?.field\n                  ? sort.direction === 'ASC'\n                    ? 'DESC'\n                    : 'ASC'\n                  : 'DESC'\n              setSort({\n                field: columnSortBy,\n                direction,\n              })\n            }}\n          />\n        )}\n      </span>\n    )\n  }\n\n  const InteractiveCopyIdsIcon = () => {\n    return (\n      <span\n        data-for=\"copy-syn-ids-tooltip\"\n        data-tip=\"Copy IDs to the clipboard\"\n      >\n        <ReactTooltip\n          delayShow={TOOLTIP_DELAY_SHOW}\n          place=\"right\"\n          type=\"dark\"\n          effect=\"solid\"\n          id=\"copy-syn-ids-tooltip\"\n        />\n        <button\n          data-testid=\"copySynIdsButton\"\n          onClick={() => {\n            // trigger loading all pages of the download list table, and then copy all IDs to the clipboard\n            setCopyingAllSynapseIDs(true)\n          }}\n        >\n          <span style={{ height: 15, marginTop: -1 }}>\n            <IconSvg\n              options={{\n                icon: 'contentCopy',\n              }}\n            />\n          </span>\n        </button>\n      </span>\n    )\n  }\n\n  const availableFiltersArray: AvailableFilter[] = [\n    undefined,\n    'eligibleForPackaging',\n    'ineligibleForPackaging',\n  ]\n  return (\n    <>\n      <BlockingLoader show={copyingAllSynapseIDs} />\n      <div className=\"filterFilesContainer\">\n        <span className=\"filterFilesByText\">Filter Files By</span>\n        <Dropdown>\n          <Dropdown.Toggle variant=\"gray-primary-500\" id=\"dropdown-basic\">\n            {getFilterDisplayText(filter)}\n          </Dropdown.Toggle>\n          <Dropdown.Menu role=\"menu\">\n            {availableFiltersArray.map(availableFilter => (\n              <Dropdown.Item\n                role=\"menuitem\"\n                key={`${getFilterDisplayText(availableFilter)}-filter-option`}\n                onClick={() => {\n                  setFilter(availableFilter)\n                }}\n              >\n                {getFilterDisplayText(availableFilter)}\n              </Dropdown.Item>\n            ))}\n          </Dropdown.Menu>\n        </Dropdown>\n      </div>\n      {allRows.length > 0 && (\n        <>\n          <Table\n            striped={true}\n            responsive={true}\n            className=\"DownloadListTableV2\"\n          >\n            <thead>\n              <tr>\n                <th>{/* Eligible/Ineligible icon */}</th>\n                <th>\n                  Name\n                  <InteractiveSortIcon columnSortBy=\"fileName\" />\n                </th>\n                <th>\n                  Size\n                  <InteractiveSortIcon columnSortBy=\"fileSize\" />\n                </th>\n                <th>\n                  SynID\n                  <InteractiveCopyIdsIcon />\n                  <InteractiveSortIcon columnSortBy=\"synId\" />\n                </th>\n                <th>\n                  Project\n                  <InteractiveSortIcon columnSortBy=\"projectName\" />\n                </th>\n                <th>\n                  Added On\n                  <InteractiveSortIcon columnSortBy=\"addedOn\" />\n                </th>\n                <th>\n                  Created By\n                  <InteractiveSortIcon columnSortBy=\"createdBy\" />\n                </th>\n                <th>\n                  Created On\n                  <InteractiveSortIcon columnSortBy=\"createdOn\" />\n                </th>\n                <th className=\"stickyColumn\">Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {allRows.map((item: DownloadListItemResult) => {\n                if (item) {\n                  const addedOn = moment(item.addedOn).format('L LT')\n                  const createdOn = moment(item.createdOn).format('L LT')\n                  return (\n                    <tr key={item.fileEntityId}>\n                      <td\n                        className={\n                          item.isEligibleForPackaging\n                            ? ''\n                            : 'ineligibleForPackagingTd'\n                        }\n                      >\n                        {item.isEligibleForPackaging && (\n                          <span\n                            data-for={`${item.fileEntityId}-eligible-tooltip`}\n                            data-tip=\"Eligible for packaging\"\n                            className=\"eligibileIcon\"\n                          >\n                            <ReactTooltip\n                              delayShow={TOOLTIP_DELAY_SHOW}\n                              place=\"right\"\n                              type=\"dark\"\n                              effect=\"solid\"\n                              id={`${item.fileEntityId}-eligible-tooltip`}\n                            />\n                            <IconSvg\n                              options={{\n                                icon: 'packagableFile',\n                              }}\n                            />\n                          </span>\n                        )}\n                        {!item.isEligibleForPackaging && (\n                          <span\n                            data-for={`${item.fileEntityId}-ineligible-tooltip`}\n                            data-tip=\"This file is ineligible for Web packaging <br />because it is >100MB, or it is an external link,<br />or it is not stored on Synapse native storage\"\n                            className=\"ineligibileIcon\"\n                          >\n                            <ReactTooltip\n                              delayShow={TOOLTIP_DELAY_SHOW}\n                              place=\"right\"\n                              type=\"dark\"\n                              effect=\"solid\"\n                              multiline={true}\n                              id={`${item.fileEntityId}-ineligible-tooltip`}\n                            />\n                            <IconSvg\n                              options={{\n                                icon: 'warningOutlined',\n                              }}\n                            />\n                          </span>\n                        )}\n                      </td>\n                      <td>\n                        <a\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          href={`${PRODUCTION_ENDPOINT_CONFIG.PORTAL}#!Synapse:${item.fileEntityId}.${item.versionNumber}`}\n                        >\n                          {item.fileName}\n                        </a>\n                      </td>\n                      <td>\n                        {item.fileSizeBytes &&\n                          calculateFriendlyFileSize(item.fileSizeBytes)}\n                      </td>\n                      <td>{`${item.fileEntityId}.${item.versionNumber}`}</td>\n                      <td>{item.projectName}</td>\n                      <td>{addedOn}</td>\n                      <td>\n                        <UserCard\n                          size={'SMALL USER CARD'}\n                          ownerId={item.createdBy}\n                        />\n                      </td>\n                      <td>{createdOn}</td>\n                      <td className=\"stickyColumn\">\n                        <div className=\"actionsContainer\">\n                          <span className=\"downloadItem\">\n                            <DirectDownload\n                              associatedObjectId={item.fileEntityId}\n                              associatedObjectType={\n                                FileHandleAssociateType.FileEntity\n                              }\n                              entityVersionNumber={item.versionNumber.toString()}\n                              displayFileName={false}\n                              onClickCallback={(isExternalLink: boolean) => {\n                                // SWC-5944: remove the item from the download list, unless it's an external link.\n                                if (!isExternalLink) {\n                                  removeItem(\n                                    {\n                                      fileEntityId: item.fileEntityId,\n                                      versionNumber: item.versionNumber,\n                                    },\n                                    item.fileName,\n                                    'File Downloaded',\n                                  )\n                                }\n                              }}\n                            />\n                          </span>\n                          <span className=\"programmaticAccessItem\">\n                            <DirectProgrammaticDownload\n                              entityId={item.fileEntityId}\n                              version={item.versionNumber}\n                            />\n                          </span>\n                          <span\n                            className=\"removeItem\"\n                            data-for={`${item.fileEntityId}-removeitem-tooltip`}\n                            data-tip=\"Remove from Download List\"\n                          >\n                            <ReactTooltip\n                              delayShow={TOOLTIP_DELAY_SHOW}\n                              place=\"left\"\n                              type=\"dark\"\n                              effect=\"solid\"\n                              id={`${item.fileEntityId}-removeitem-tooltip`}\n                            />\n                            <button\n                              className={TESTING_TRASH_BTN_CLASS}\n                              onClick={() => {\n                                removeItem(\n                                  {\n                                    fileEntityId: item.fileEntityId,\n                                    versionNumber: item.versionNumber,\n                                  },\n                                  item.fileName,\n                                  'File Removed',\n                                )\n                              }}\n                            >\n                              <IconSvg\n                                options={{\n                                  icon: 'removeCircle',\n                                }}\n                              />\n                            </button>\n                          </span>\n                        </div>\n                      </td>\n                    </tr>\n                  )\n                } else return false\n              })}\n              {/* To trigger loading the next page */}\n              <tr ref={ref} />\n            </tbody>\n          </Table>\n        </>\n      )}\n      {isLoading && <SkeletonTable numCols={5} numRows={3} />}\n    </>\n  )\n}\n","import React from 'react'\nimport { QueryClient, QueryClientProvider } from 'react-query'\nimport { useSynapseContext } from '../../utils/SynapseContext'\nimport { DownloadListTableProps } from '../download_list_v2/DownloadListTable'\nimport { SynapseErrorBoundary } from '../ErrorBanner'\nimport DownloadListTable from './DownloadListTable'\n\n/**\n * Table of the files added to the Download Cart that are currently available for download.\n * Note that this creates it's own QueryClient, so it's cache does not persist if you remount.\n */\nexport default function AvailableForDownloadTable(\n  props: DownloadListTableProps,\n) {\n  const { accessToken } = useSynapseContext()\n  const queryClient = new QueryClient({\n    defaultOptions: {\n      queries: {\n        staleTime: 50 * 1000, // 50s\n        retry: false, // SynapseClient knows which queries to retry\n      },\n    },\n  })\n  if (!accessToken) {\n    return <></>\n  }\n  return (\n    <QueryClientProvider client={queryClient}>\n      <SynapseErrorBoundary>\n        {props.filesStatistics && <DownloadListTable {...props} />}\n      </SynapseErrorBoundary>\n    </QueryClientProvider>\n  )\n}\n","import React from 'react'\nimport { calculateFriendlyFileSize } from '../../utils/functions/calculateFriendlyFileSize'\nimport ReactTooltip from 'react-tooltip'\nimport { TOOLTIP_DELAY_SHOW } from '../table/SynapseTableConstants'\nimport IconSvg from '../IconSvg'\n\nexport type DownloadDetailsProps = {\n  numFiles: number\n  numPackagableFiles: number\n  numBytes: number\n}\n\nexport default function DownloadDetails(props: DownloadDetailsProps) {\n  const { numFiles, numPackagableFiles, numBytes } = props\n  const numIneligibleFiles = numFiles - numPackagableFiles\n  const numBytesTooltipId = 'num_bytes_id'\n  const isInactive = numFiles === 0\n  const iconClassName = isInactive ? 'SRC-inactive' : 'SRC-primary-text-color'\n  return (\n    <span className=\"DownloadDetailsV2\">\n      <span className=\"item\">{!isInactive && <> {numFiles} Files </>}</span>\n      <span className=\"item\">\n        <span className={iconClassName}>\n          <IconSvg options={{ icon: 'packagableFile' }} />\n        </span>\n        {!isInactive && (\n          <> {numPackagableFiles} Files eligible for packaging </>\n        )}\n      </span>\n      {numBytes > 0 && (\n        <span\n          data-for={numBytesTooltipId}\n          data-tip=\"This is the total size of all files in the Download Cart that are available to download.\"\n          className=\"item\"\n        >\n          <ReactTooltip\n            delayShow={TOOLTIP_DELAY_SHOW}\n            place=\"top\"\n            type=\"dark\"\n            effect=\"solid\"\n            id={numBytesTooltipId}\n          />\n          {calculateFriendlyFileSize(numBytes)}\n        </span>\n      )}\n      {numIneligibleFiles > 0 && (\n        <span className=\"item\">\n          <span className={`SRC-warning-color`}>\n            <IconSvg options={{ icon: 'warningOutlined' }} />\n          </span>\n          {!isInactive && (\n            <> {numIneligibleFiles} Files ineligible for packaging </>\n          )}\n        </span>\n      )}\n    </span>\n  )\n}\n","import React from 'react'\nimport DownloadDetails from './DownloadDetails'\n\nexport type DownloadListStatsProps = {\n  numFiles: number\n  numPackagableFiles: number\n  numBytes: number\n}\n\nexport default function DownloadListStats(props: DownloadListStatsProps) {\n  const { numFiles, numPackagableFiles, numBytes } = props\n\n  return (\n    <div>\n      <DownloadDetails\n        numFiles={numFiles}\n        numPackagableFiles={numPackagableFiles}\n        numBytes={numBytes}\n      ></DownloadDetails>\n      {\n        // also have access to fileStats.numberOfFilesRequiringAction\n        // and fileStats.totalNumberOfFiles\n      }\n    </div>\n  )\n}\n","import {\n  useInfiniteQuery,\n  UseInfiniteQueryOptions,\n  useQuery,\n  UseQueryOptions,\n} from 'react-query'\nimport { SynapseClient } from '../..'\nimport { SynapseClientError } from '../../SynapseClientError'\nimport { useSynapseContext } from '../../SynapseContext'\nimport { ActionRequiredRequest } from '../../synapseTypes/DownloadListV2/QueryRequestDetails'\nimport { ActionRequiredResponse } from '../../synapseTypes/DownloadListV2/QueryResponseDetails'\n\nexport function useGetDownloadListActionsRequired(\n  options?: UseQueryOptions<\n    ActionRequiredResponse,\n    SynapseClientError,\n    ActionRequiredResponse\n  >,\n) {\n  const { accessToken } = useSynapseContext()\n  const request: ActionRequiredRequest = {\n    concreteType:\n      'org.sagebionetworks.repo.model.download.ActionRequiredRequest',\n  }\n\n  return useQuery<ActionRequiredResponse, SynapseClientError>(\n    ['downloadlistv2actionsrequired', accessToken],\n    () => SynapseClient.getDownloadListActionsRequired(request, accessToken),\n    options,\n  )\n}\n\nexport function useGetDownloadListActionsRequiredInfinite(\n  options?: UseInfiniteQueryOptions<\n    ActionRequiredResponse,\n    SynapseClientError,\n    ActionRequiredResponse\n  >,\n) {\n  const { accessToken } = useSynapseContext()\n  const request: ActionRequiredRequest = {\n    concreteType:\n      'org.sagebionetworks.repo.model.download.ActionRequiredRequest',\n  }\n  return useInfiniteQuery<ActionRequiredResponse, SynapseClientError>(\n    ['downloadlistv2availablefiles', request],\n    async context => {\n      return await SynapseClient.getDownloadListActionsRequired(\n        { ...request, nextPageToken: context.pageParam },\n        accessToken,\n      )\n    },\n    {\n      ...options,\n      getNextPageParam: page => page.nextPageToken,\n    },\n  )\n}\n","import React, { useEffect, useState } from 'react'\nimport { useErrorHandler } from 'react-error-boundary'\nimport useGetAccessRequirement from '../../utils/hooks/SynapseAPI/dataaccess/useGetAccessRequirement'\nimport { SelfSignAccessRequirement } from '../../utils/synapseTypes'\nimport { Button } from 'react-bootstrap'\nimport { Icon } from '../row_renderers/utils'\nimport {\n  EASY_DIFFICULTY,\n  MEDIUM_DIFFICULTY,\n  VARIABLE_DIFFICULTY,\n} from '../../utils/SynapseConstants'\nimport AccessRequirementList, {\n  SUPPORTED_ACCESS_REQUIREMENTS,\n} from '../access_requirement_list/AccessRequirementList'\nimport { Skeleton } from '@material-ui/lab'\nimport Typography from '../../utils/typography/Typography'\n\nexport type MeetAccessRequirementCardProps = {\n  accessRequirementId: number\n  count: number\n}\nexport const TERMS_OF_USE_TITLE =\n  'Requires Acceptance of Data-Specific Terms of Use'\nexport const SELF_SIGN_TITLE =\n  'Requires Acceptance of Data-Specific Terms of Use'\nexport const ACT_TITLE =\n  'Requires Approval of Data-Specific Access Requirements'\nexport const LOCK_TITLE = 'Access Restricted'\n\nexport const MeetAccessRequirementCard: React.FunctionComponent<\n  MeetAccessRequirementCardProps\n> = ({ accessRequirementId, count }: MeetAccessRequirementCardProps) => {\n  const handleError = useErrorHandler()\n  const {\n    data: ar,\n    isFetching,\n    isError,\n    error: newError,\n  } = useGetAccessRequirement(accessRequirementId)\n  useEffect(() => {\n    if (isError && newError) {\n      handleError(newError)\n    }\n  }, [isError, newError, handleError])\n  const [isShowingAccessRequirement, setIsShowingAccessRequirement] =\n    useState<boolean>(false)\n  let content = <></>\n  if (!isError && !isFetching && ar) {\n    let title: string | undefined = undefined\n    let iconType = ''\n    let description = ''\n    switch (ar.concreteType) {\n      case SUPPORTED_ACCESS_REQUIREMENTS.TermsOfUseAccessRequirement:\n        title = TERMS_OF_USE_TITLE\n        iconType = EASY_DIFFICULTY\n        description = ar.name ?? ''\n        break\n      case SUPPORTED_ACCESS_REQUIREMENTS.SelfSignAccessRequirement: {\n        title = SELF_SIGN_TITLE\n        const selfSignAR: SelfSignAccessRequirement =\n          ar as SelfSignAccessRequirement\n        if (selfSignAR.isValidatedProfileRequired) {\n          iconType = VARIABLE_DIFFICULTY\n        } else if (selfSignAR.isCertifiedUserRequired) {\n          iconType = MEDIUM_DIFFICULTY\n        } else {\n          iconType = EASY_DIFFICULTY\n        }\n        description = ar.name ?? ''\n        break\n      }\n      case SUPPORTED_ACCESS_REQUIREMENTS.ManagedACTAccessRequirement:\n      case SUPPORTED_ACCESS_REQUIREMENTS.ACTAccessRequirement:\n        title = ACT_TITLE\n        iconType = VARIABLE_DIFFICULTY\n        description = ar.name ?? ''\n        break\n      case 'org.sagebionetworks.repo.model.LockAccessRequirement':\n        title = LOCK_TITLE\n        iconType = VARIABLE_DIFFICULTY\n        description =\n          'Access restricted pending review by Synapse Access and Compliance Team.'\n        break\n    }\n    if (title) {\n      content = (\n        <div className=\"MeetAccessRequirementCard actionRequiredCard\">\n          <Icon type={iconType} />\n          <div className=\"metadata\">\n            <Typography variant=\"headline3\" className=\"title\">\n              {title}\n            </Typography>\n            <div className=\"fileCount\">{count} File(s)</div>\n            <div className=\"description\">{description}</div>\n          </div>\n          <div className=\"startButtonContainer\">\n            <Button\n              className=\"startButton\"\n              variant=\"primary\"\n              onClick={() => setIsShowingAccessRequirement(true)}\n            >\n              Start\n            </Button>\n          </div>\n        </div>\n      )\n    }\n  }\n\n  return (\n    <>\n      {!isError && !isFetching && content}\n      {isFetching && <LoadingAccessRequirementCard />}\n      {isShowingAccessRequirement && ar && (\n        <AccessRequirementList\n          entityId={ar.subjectIds[0].id}\n          accessRequirementFromProps={[ar]}\n          renderAsModal={true}\n          numberOfFilesAffected={count}\n          onHide={() => setIsShowingAccessRequirement(false)}\n        />\n      )}\n    </>\n  )\n}\n\nexport const LoadingAccessRequirementCard: React.FunctionComponent = () => {\n  return (\n    <div className=\"MeetAccessRequirementCard actionRequiredCard\">\n      <Skeleton variant=\"rect\" width={136} height={74} />\n      <div className=\"metadata\">\n        <div className=\"title\">\n          <Skeleton width={320} />\n        </div>\n        <div className=\"fileCount\">\n          <Skeleton width={100} />\n        </div>\n      </div>\n      <div className=\"startButtonContainer\">\n        <Skeleton variant=\"rect\" width={160} height={33} />\n      </div>\n    </div>\n  )\n}\n","import { useQuery, UseQueryOptions } from 'react-query'\nimport { SynapseClient } from '../../..'\nimport { SynapseClientError } from '../../../SynapseClientError'\nimport { useSynapseContext } from '../../../SynapseContext'\nimport {\n  EntityHeader,\n  PaginatedResults,\n  ReferenceList,\n} from '../../../synapseTypes'\n\nexport function useGetEntityHeaders(\n  references: ReferenceList,\n  options?: UseQueryOptions<\n    PaginatedResults<EntityHeader>,\n    SynapseClientError,\n    PaginatedResults<EntityHeader>\n  >,\n) {\n  const { accessToken } = useSynapseContext()\n\n  return useQuery<PaginatedResults<EntityHeader>, SynapseClientError>(\n    ['entityHeaders', accessToken, references],\n    () => SynapseClient.getEntityHeaders(references, accessToken),\n    options,\n  )\n}\n","import React, { useEffect } from 'react'\nimport { useErrorHandler } from 'react-error-boundary'\nimport { useGetEntityHeaders } from '../../utils/hooks/SynapseAPI/entity/useGetEntityHeaders'\nimport { EntityHeader } from '../../utils/synapseTypes'\nimport { Icon } from '../row_renderers/utils'\nimport { DOWNLOAD_PERMISSION_REQUIRED } from '../../utils/SynapseConstants'\nimport { Button } from 'react-bootstrap'\nimport { LoadingAccessRequirementCard } from './MeetAccessRequirementCard'\nimport Typography from '../../utils/typography/Typography'\n\nexport type RequestDownloadCardProps = {\n  entityId: string\n  count: number\n  /** Invoked when a user clicks \"View Sharing Settings\" for a set of files that require the Download permission*/\n  onViewSharingSettingsClicked: (benefactorId: string) => void\n}\n\nexport const REQUEST_DOWNLOAD_TITLE = 'Download Permission Required'\nexport const RequestDownloadCard: React.FunctionComponent<\n  RequestDownloadCardProps\n> = ({\n  entityId,\n  count,\n  onViewSharingSettingsClicked,\n}: RequestDownloadCardProps) => {\n  const handleError = useErrorHandler()\n  const {\n    data,\n    isLoading,\n    isError,\n    error: newError,\n  } = useGetEntityHeaders([{ targetId: entityId }])\n  const entityHeader: EntityHeader | undefined = data?.results[0]\n  useEffect(() => {\n    if (isError && newError) {\n      handleError(newError)\n    }\n  }, [isError, newError, handleError])\n\n  return (\n    <>\n      {!isError && !isLoading && (\n        <div className=\"RequestDownloadCart actionRequiredCard\">\n          <Icon type={DOWNLOAD_PERMISSION_REQUIRED} />\n          <div className=\"metadata\">\n            <Typography variant=\"headline3\" className=\"title\">\n              {REQUEST_DOWNLOAD_TITLE}\n            </Typography>\n            <div className=\"fileCount\">{count} File(s)</div>\n            <div className=\"description\">\n              You must be granted the download permission on{' '}\n              <strong>{entityHeader?.name}</strong> in order to download this\n              set of files.\n            </div>\n          </div>\n          <div className=\"startButtonContainer\">\n            <Typography variant=\"smallText1\" className=\"contactAdminNote\">\n              Contact an administrator to request download permission\n            </Typography>\n            <Button\n              className=\"startButton\"\n              variant=\"outline-primary\"\n              onClick={() => {\n                onViewSharingSettingsClicked(entityId)\n              }}\n            >\n              View Sharing Settings\n            </Button>\n          </div>\n        </div>\n      )}\n      {isLoading && <LoadingAccessRequirementCard />}\n    </>\n  )\n}\n","import React, { useEffect } from 'react'\nimport { useErrorHandler } from 'react-error-boundary'\nimport { useGetDownloadListActionsRequiredInfinite } from '../../utils/hooks/SynapseAPI/useGetDownloadListActionsRequired'\nimport { useInView } from 'react-intersection-observer'\nimport {\n  ActionRequiredCount,\n  MeetAccessRequirement,\n  RequestDownload,\n} from '../../utils/synapseTypes/DownloadListV2/ActionRequiredCount'\nimport {\n  LoadingAccessRequirementCard,\n  MeetAccessRequirementCard,\n} from './MeetAccessRequirementCard'\nimport { RequestDownloadCard } from './RequestDownloadCard'\n\nexport type DownloadListActionsRequiredProps = {\n  /** Invoked when a user clicks \"View Sharing Settings\" for a set of files that require the Download permission*/\n  onViewSharingSettingsClicked: (benefactorId: string) => void\n}\n\nexport const DownloadListActionsRequired: React.FunctionComponent<\n  DownloadListActionsRequiredProps\n> = props => {\n  const handleError = useErrorHandler()\n  // Load the next page when this ref comes into view.\n  const { ref, inView } = useInView()\n  const {\n    data,\n    status,\n    isLoading,\n    hasNextPage,\n    isFetchingNextPage,\n    fetchNextPage,\n    isError,\n    error: newError,\n  } = useGetDownloadListActionsRequiredInfinite()\n\n  useEffect(() => {\n    if (isError && newError) {\n      handleError(newError)\n    }\n  }, [isError, newError, handleError])\n\n  useEffect(() => {\n    if (\n      status === 'success' &&\n      !isFetchingNextPage &&\n      hasNextPage &&\n      fetchNextPage &&\n      inView\n    ) {\n      fetchNextPage()\n    }\n  }, [status, hasNextPage, isFetchingNextPage, fetchNextPage, inView])\n\n  const allRows = data?.pages.flatMap(page => page.page) ?? []\n\n  /**\n   * Returns rendering for the ActionRequiredCount.\n   *\n   * @param {ActionRequiredCount} actionRequiredCount actionRequiredCount being rendered\n   */\n  const renderActionRequired = (actionRequiredCount: ActionRequiredCount) => {\n    switch (actionRequiredCount.action.concreteType) {\n      case 'org.sagebionetworks.repo.model.download.MeetAccessRequirement': {\n        const meetARAction: MeetAccessRequirement =\n          actionRequiredCount.action as MeetAccessRequirement\n        return (\n          <MeetAccessRequirementCard\n            key={meetARAction.accessRequirementId}\n            accessRequirementId={meetARAction.accessRequirementId}\n            count={actionRequiredCount.count}\n          />\n        )\n      }\n      case 'org.sagebionetworks.repo.model.download.RequestDownload': {\n        const requestDownloadAction: RequestDownload =\n          actionRequiredCount.action as RequestDownload\n        return (\n          <RequestDownloadCard\n            key={requestDownloadAction.benefactorId}\n            entityId={`syn${requestDownloadAction.benefactorId}`}\n            count={actionRequiredCount.count}\n            onViewSharingSettingsClicked={props.onViewSharingSettingsClicked}\n          />\n        )\n      }\n      // case not supported yet\n      default:\n        return undefined\n    }\n  }\n  return (\n    <>\n      {allRows.length > 0 && (\n        <div className=\"DownloadListActionsRequired\">\n          {allRows.map((item: ActionRequiredCount) => {\n            if (item) {\n              return renderActionRequired(item)\n            } else return false\n          })}\n          {/* To trigger loading the next page */}\n          <div ref={ref} />\n        </div>\n      )}\n      {isLoading && <LoadingAccessRequirementCard />}\n    </>\n  )\n}\n","import React, { useState } from 'react'\nimport { Button } from 'react-bootstrap'\nimport {\n  createPackageFromDownloadListV2,\n  getFileHandleByIdURL,\n} from '../../utils/SynapseClient'\nimport { useSynapseContext } from '../../utils/SynapseContext'\nimport { DownloadListPackageResponse } from '../../utils/synapseTypes/DownloadListV2/DownloadListPackageResponse'\nimport FullWidthAlert from '../FullWidthAlert'\n\nexport type CreatePackageV2Props = {\n  onPackageCreation: () => void\n}\n\ntype AlertConfig = {\n  message: string\n  variant?: string\n}\n\nexport const TEMPLATE_ERROR_FILE_NAME =\n  'Please provide a package file name and try again.'\n\nexport const CreatePackageV2 = (props: CreatePackageV2Props) => {\n  const { accessToken } = useSynapseContext()\n  const [isLoading, setIsLoading] = useState(false)\n  const [fileName, setZipFileName] = useState('')\n  const [alert, setAlert] = useState<AlertConfig>()\n  const [bulkFileDownloadResponse, setBulkFileDownloadResponse] = useState<\n    DownloadListPackageResponse | undefined\n  >(undefined)\n  const { onPackageCreation } = props\n  const createPackageHandler = async (event: React.SyntheticEvent) => {\n    event.preventDefault()\n    if (!fileName) {\n      setAlert({\n        message: TEMPLATE_ERROR_FILE_NAME,\n        variant: 'danger',\n      })\n      return\n    }\n    setIsLoading(true)\n    try {\n      const fileNameWithZipExtension = `${fileName}.zip`\n      const currentBulkFileDownloadResponse =\n        await createPackageFromDownloadListV2(\n          fileNameWithZipExtension,\n          accessToken,\n        )\n\n      setBulkFileDownloadResponse(currentBulkFileDownloadResponse)\n      const { resultFileHandleId } = currentBulkFileDownloadResponse\n      try {\n        //reset\n        window.location.href = await getFileHandleByIdURL(\n          resultFileHandleId,\n          accessToken,\n        )\n        setZipFileName('')\n        setBulkFileDownloadResponse(undefined)\n        onPackageCreation()\n      } catch (err) {\n        console.error('Err on getFileHandleByIdURL = ', err)\n      }\n    } catch (err) {\n      setAlert({\n        message: err.reason as string,\n        variant: 'danger',\n      })\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const onChange = (event: React.SyntheticEvent<HTMLInputElement>) => {\n    setZipFileName(event.currentTarget.value)\n  }\n\n  return (\n    <>\n      <div className=\"CreatePackageV2 bootstrap-4-backport\">\n        <div className=\"createPackageStep\">\n          <span className=\"createPackageTitle\">\n            Create your Download Package\n          </span>\n          <span className=\"createPackageDescription\">\n            Name your download package and select Download Package to get\n            started.\n          </span>\n          {!isLoading && !bulkFileDownloadResponse && (\n            <div className=\"inputAndCreateButton\">\n              <input\n                onChange={onChange}\n                type=\"text\"\n                placeholder=\"PackageName\"\n                style={{ width: '233px' }}\n              ></input>\n              <span className=\"zipUI\">.zip</span>\n              <Button\n                variant={fileName ? 'primary' : 'dark'}\n                onClick={createPackageHandler}\n                type=\"button\"\n                style={{ marginLeft: 20 }}\n                disabled={fileName ? false : true}\n              >\n                Download Package\n              </Button>\n            </div>\n          )}\n          {isLoading && (\n            <div className=\"creatingPackage\">\n              <span className=\"spinner\" />\n              <span style={{ marginLeft: 5 }}>Creating package...</span>\n            </div>\n          )}\n        </div>\n      </div>\n      <FullWidthAlert\n        show={!!alert}\n        variant={alert?.variant ? alert.variant : 'success'}\n        description={alert?.message}\n        autoCloseAfterDelayInSeconds={10}\n        onClose={() => {\n          setAlert(undefined)\n        }}\n      />\n    </>\n  )\n}\n","import * as React from 'react'\nimport { useState, useEffect } from 'react'\nimport AvailableForDownloadTable from './AvailableForDownloadTable'\nimport DownloadListStats from './DownloadListStats'\nimport { useGetDownloadListStatistics } from '../../utils/hooks/SynapseAPI/useGetDownloadListStatistics'\nimport {\n  DownloadListActionsRequired,\n  DownloadListActionsRequiredProps,\n} from './DownloadListActionsRequired'\nimport { useSynapseContext } from '../../utils/SynapseContext'\nimport { SynapseClient } from '../../utils'\nimport IconSvg from '../IconSvg'\nimport { CreatePackageV2 } from './CreatePackageV2'\nimport FullWidthAlert from '../FullWidthAlert'\nimport { ErrorBanner } from '../ErrorBanner'\nimport Typography from '../../utils/typography/Typography'\nimport ReactTooltip from 'react-tooltip'\nimport { HelpPopover } from '../HelpPopover'\n\n/**\n * Show the Download Cart page.\n */\nexport const DownloadCartPage: React.FunctionComponent<\n  DownloadListActionsRequiredProps\n> = props => {\n  const { accessToken } = useSynapseContext()\n  const [selectedTabIndex, setSelectedTabIndex] = useState<number>(0)\n  const [isShowingCreatePackageUI, setIsShowingCreatePackageUI] =\n    useState<boolean>(false)\n  const [isShowingDownloadSuccessAlert, setIsShowingDownloadSuccessAlert] =\n    useState(false)\n  const [error, setError] = useState<Error>()\n  const {\n    data,\n    isLoading,\n    isError,\n    error: newError,\n    refetch,\n  } = useGetDownloadListStatistics()\n  useEffect(() => {\n    if (isError && newError) {\n      setError(newError)\n    }\n  }, [isError, newError])\n\n  // SWC-5874: When arriving at the download cart when there are no ARs, the user should start in the Download list\n  useEffect(() => {\n    if (data && data.numberOfFilesRequiringAction == 0) {\n      setSelectedTabIndex(1)\n    }\n  }, [data])\n\n  if (error) {\n    return <ErrorBanner error={error} />\n  }\n  const clearDownloadList = async () => {\n    await SynapseClient.clearDownloadListV2(accessToken)\n    refetch()\n  }\n  return (\n    <div className=\"DownloadCartPage bootstrap-4-backport\">\n      <div>\n        <div className=\"pageHeader\">\n          <div className=\"grid\">\n            <h3 className=\"pageHeaderTitle\">Your Download Cart</h3>\n            <a\n              className=\"clearDownloadListLink\"\n              onClick={clearDownloadList}\n              data-tip=\"Immediately removes all items from your download list\"\n              data-for=\"clearDownloadListTooltip\"\n            >\n              <ReactTooltip\n                delayShow={300}\n                place=\"right\"\n                type=\"dark\"\n                effect=\"solid\"\n                id=\"clearDownloadListTooltip\"\n              />\n              <span>\n                <IconSvg\n                  options={{\n                    icon: 'delete',\n                    padding: 'right',\n                  }}\n                />\n              </span>\n              Clear Your Download Cart\n            </a>\n          </div>\n          <Typography className=\"description\" variant=\"body1\">\n            You may find your added files in the tabs below. Any files which\n            require actions before download can be found in the Access Actions\n            Required tab, while any that can be downloaded now can be found in\n            the Download List tab.\n          </Typography>\n        </div>\n      </div>\n      <div className=\"tabs-container\">\n        <div className=\"container\">\n          <ul className=\"nav nav-tabs\">\n            <li\n              className={`nav-item ${selectedTabIndex == 0 ? 'active' : ''}`}\n              aria-selected={selectedTabIndex == 0}\n            >\n              <button onClick={() => setSelectedTabIndex(0)}>\n                Access Actions Required\n                {!isError && !isLoading && data && (\n                  <span className=\"fileCount\">\n                    {data.totalNumberOfFiles -\n                      data.numberOfFilesAvailableForDownload}\n                  </span>\n                )}\n              </button>\n            </li>\n            <li\n              className={`nav-item ${selectedTabIndex == 1 ? 'active' : ''}`}\n              aria-selected={selectedTabIndex == 1}\n            >\n              <button onClick={() => setSelectedTabIndex(1)}>\n                Download List\n                {!isError && !isLoading && data && (\n                  <span className=\"fileCount\">\n                    {data.numberOfFilesAvailableForDownload}\n                  </span>\n                )}\n              </button>\n            </li>\n          </ul>\n        </div>\n      </div>\n      {selectedTabIndex == 0 && !isError && !isLoading && data && (\n        <div>\n          {data.numberOfFilesRequiringAction > 0 && (\n            <div>\n              <div className=\"actionsRequiredContainer container\">\n                <DownloadListActionsRequired {...props} />\n              </div>\n            </div>\n          )}\n          {data.numberOfFilesRequiringAction === 0 && (\n            <div className=\"placeholder\">\n              <div>No actions are currently required.</div>\n            </div>\n          )}\n        </div>\n      )}\n      {selectedTabIndex == 1 && !isError && !isLoading && data && (\n        <div>\n          {data.numberOfFilesAvailableForDownload > 0 && (\n            <div className=\"DownloadListTabContent\">\n              <div className=\"subSectionOverviewContainer\">\n                <div className=\"subSectionOverview container\">\n                  <div>\n                    <div className=\"headlineWithHelp\">\n                      <Typography variant={'headline3'}>\n                        <IconSvg options={{ icon: 'packagableFile' }} /> Web\n                        Download (.ZIP Packages)\n                      </Typography>\n                      <HelpPopover markdownText=\"This will allow you to create a .zip file that contains eligible files. Files greater that 100 MB, external links, or files which are not stored on Synapse native storage are ineligible. In most cases, ineligible files can be downloaded individually. External links will require navigation to an external site, which may require a seperate login process.\" />\n                    </div>\n                    <Typography variant={'body1'}>\n                      <ul>\n                        <li>\n                          Eligible files will be added to .ZIP packages of up to\n                          1GB in size\n                        </li>\n                        <li>\n                          If you have more than 1GB, you can create multiple\n                          packages\n                        </li>\n                        <li>\n                          Will only include files which are hosted on Synapse\n                          native storage\n                        </li>\n                        <li>\n                          Packages include a CSV Manifest containing Metadata\n                          for each file\n                        </li>\n                      </ul>\n                    </Typography>\n                    <span>\n                      {data.numberOfFilesAvailableForDownloadAndEligibleForPackaging >\n                        0 && (\n                        <a\n                          className=\"highlight-link\"\n                          onClick={() => {\n                            setIsShowingCreatePackageUI(true)\n                          }}\n                        >\n                          Download As .Zip Packages\n                        </a>\n                      )}\n                      {data.numberOfFilesAvailableForDownloadAndEligibleForPackaging ==\n                        0 && (\n                        <a\n                          className=\"highlight-link disabled\"\n                          data-for=\"downloadZipPackagesUnavailable\"\n                          data-tip=\"You cannot create a .zip package<br />because there are no eligible files.\"\n                        >\n                          <ReactTooltip\n                            delayShow={300}\n                            multiline={true}\n                            place=\"top\"\n                            type=\"dark\"\n                            effect=\"solid\"\n                            id=\"downloadZipPackagesUnavailable\"\n                          />\n                          Download As .ZIP packages\n                        </a>\n                      )}\n                    </span>\n                  </div>\n                  <div>\n                    <div className=\"headlineWithHelp\">\n                      <Typography variant={'headline3'}>\n                        <IconSvg options={{ icon: 'code' }} /> Programmatic\n                        Download\n                      </Typography>\n                      <HelpPopover markdownText=\"This will provide syntax which you can enter into your programmatic client. It is suitable for large files (>100 MB), for packages > 1GB, and for files which aren’t stored on Synapse native storage (e.g. in a special AWS S3 or Google Cloud bucket).  External links will require navigation to an external site, which may require a separate login process.\" />\n                    </div>\n                    <Typography variant={'body1'}>\n                      <ul>\n                        <li>\n                          Requires installation of a programmatic client (R,\n                          Python, CLI)\n                        </li>\n                        <li>\n                          No limit to the file size or number of files that can\n                          be downloaded\n                        </li>\n                        <li>\n                          Will include files which are hosted on and off Synapse\n                          native storage\n                        </li>\n                        <li>\n                          Packages include a CSV Manifest containing Metadata\n                          for each file\n                        </li>\n                      </ul>\n                    </Typography>\n                    <span>\n                      <a\n                        className=\"highlight-link\"\n                        rel=\"noreferrer\"\n                        data-for=\"downloadProgrammaticallyTooltipId\"\n                        data-tip=\"This feature is coming soon.<br />Click here to learn how to download<br />programmatically using other methods\"\n                        target=\"_blank\"\n                        href=\"https://help.synapse.org/docs/API-Clients.1985446128.html\"\n                      >\n                        <ReactTooltip\n                          delayShow={300}\n                          multiline={true}\n                          place=\"top\"\n                          type=\"dark\"\n                          effect=\"solid\"\n                          id=\"downloadProgrammaticallyTooltipId\"\n                        />\n                        Create Programmatic Package (Coming soon)\n                      </a>\n                    </span>\n                  </div>\n                </div>\n              </div>\n              <div className=\"availableForDownloadTableContainer container\">\n                {isShowingCreatePackageUI && (\n                  <CreatePackageV2\n                    onPackageCreation={() => {\n                      setIsShowingDownloadSuccessAlert(true)\n                      // we refetch the data because the backend will instantly remove the downloadable files from the download list after a package has been created\n                      refetch()\n                    }}\n                  />\n                )}\n                <DownloadListStats\n                  numBytes={data.sumOfFileSizesAvailableForDownload}\n                  numPackagableFiles={\n                    data.numberOfFilesAvailableForDownloadAndEligibleForPackaging\n                  }\n                  numFiles={data.numberOfFilesAvailableForDownload}\n                />\n                {refetch && (\n                  <AvailableForDownloadTable\n                    filesStatistics={data}\n                    refetchStatistics={refetch}\n                  />\n                )}\n              </div>\n            </div>\n          )}\n          {data.numberOfFilesAvailableForDownload === 0 && (\n            <div className=\"placeholder\">\n              <div>Your Download List is currently empty.</div>\n            </div>\n          )}\n        </div>\n      )}\n      <FullWidthAlert\n        show={isShowingDownloadSuccessAlert}\n        variant=\"success\"\n        title=\"Package Created\"\n        description=\"A package has been created with eligible files. The items contained in this .zip file have been removed from your list. If your package is over 1GB, you will need to create multiple packages.\"\n        autoCloseAfterDelayInSeconds={10}\n        onClose={() => {\n          setIsShowingDownloadSuccessAlert(false)\n        }}\n      />\n    </div>\n  )\n}\n"],"names":["SynapseClient.getAvailableFilesToDownload","useState","entityId","version","_jsxs","_Fragment","_jsx","TOOLTIP_DELAY_SHOW","filesStatistics","refetchStatistics","accessToken","ref","inView","data","status","isFetchingNextPage","isLoading","hasNextPage","fetchNextPage","isError","newError","refetch","useEffect","handleError","copyAllSynapseIDs","versionNumber","navigator","displayToast","setCopyingAllSynapseIDs","SynapseClient.removeItemFromDownloadListV2","title","console","columnSortBy","DESC","setSort","direction","copyingAllSynapseIDs","setFilter","moment","fileEntityId","fileName","projectName","addedOn","createdBy","createdOn","FileEntity","removeItem","TESTING_TRASH_BTN_CLASS","queryClient","props","numFiles","numPackagableFiles","numBytes","iconClassName","numBytesTooltipId","SynapseClient.getDownloadListActionsRequired","accessRequirementId","count","ar","isFetching","concreteType","iconType","description","VARIABLE_DIFFICULTY","ManagedACTAccessRequirement","content","id","SynapseClient.getEntityHeaders","onViewSharingSettingsClicked","DOWNLOAD_PERMISSION_REQUIRED","REQUEST_DOWNLOAD_TITLE","name","benefactorId","undefined","onPackageCreation","setZipFileName","event","setAlert","TEMPLATE_ERROR_FILE_NAME","setIsLoading","setBulkFileDownloadResponse","resultFileHandleId","window","reason","createPackageHandler","alert","message","setError","setSelectedTabIndex","SynapseClient.clearDownloadListV2","clearDownloadList","numberOfFilesAvailableForDownload","setIsShowingCreatePackageUI","setIsShowingDownloadSuccessAlert","sumOfFileSizesAvailableForDownload","numberOfFilesAvailableForDownloadAndEligibleForPackaging","isShowingDownloadSuccessAlert"],"mappings":"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"}