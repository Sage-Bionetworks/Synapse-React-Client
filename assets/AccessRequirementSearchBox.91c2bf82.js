import{r as n,j as A}from"./jsx-runtime.31268528.js";import{_ as de,f as u,h as le,b as C,i as fe,u as Se,S as me,e as he}from"./Select-54ac8379.esm.73afc0b0.js";import"./index.d5f32449.js";import{V as Oe,bI as ge,bL as ve}from"./index.22d2125e.js";import{a as _e}from"./useGetAccessRequirement.b2c1473c.js";import{S as xe}from"./Skeleton.855acef4.js";var Ie=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function ye(t){var a=t.defaultOptions,e=a===void 0?!1:a,d=t.cacheOptions,l=d===void 0?!1:d,f=t.loadOptions;t.options;var i=t.isLoading,R=i===void 0?!1:i,_=t.onInputChange,m=t.filterOption,x=m===void 0?null:m,s=de(t,Ie),h=s.inputValue,o=n.exports.useRef(void 0),p=n.exports.useRef(!1),I=n.exports.useState(Array.isArray(e)?e:void 0),c=u(I,2),z=c[0],T=c[1],F=n.exports.useState(typeof h<"u"?h:""),N=u(F,2),j=N[0],L=N[1],H=n.exports.useState(e===!0),w=u(H,2),J=w[0],O=w[1],Q=n.exports.useState(void 0),D=u(Q,2),b=D[0],q=D[1],U=n.exports.useState([]),k=u(U,2),X=k[0],V=k[1],Z=n.exports.useState(!1),K=u(Z,2),ee=K[0],y=K[1],te=n.exports.useState({}),M=u(te,2),g=M[0],Y=M[1],ne=n.exports.useState(void 0),G=u(ne,2),ae=G[0],se=G[1],re=n.exports.useState(void 0),W=u(re,2),oe=W[0],ie=W[1];l!==oe&&(Y({}),ie(l)),e!==ae&&(T(Array.isArray(e)?e:void 0),se(e)),n.exports.useEffect(function(){return p.current=!0,function(){p.current=!1}},[]);var B=n.exports.useCallback(function(v,S){if(!f)return S();var r=f(v,S);r&&typeof r.then=="function"&&r.then(S,function(){return S()})},[f]);n.exports.useEffect(function(){e===!0&&B(j,function(v){!p.current||(T(v||[]),O(!!o.current))})},[]);var ue=n.exports.useCallback(function(v,S){var r=le(v,S,_);if(!r){o.current=void 0,L(""),q(""),V([]),O(!1),y(!1);return}if(l&&g[r])L(r),q(r),V(g[r]),O(!1),y(!1);else{var ce=o.current={};L(r),O(!0),y(!b),B(r,function(E){!p||ce===o.current&&(o.current=void 0,O(!1),q(r),V(E||[]),y(!1),Y(E?C(C({},g),{},fe({},r,E)):g))})}},[l,B,b,g,_]),pe=ee?[]:j&&b?X:z||[];return C(C({},s),{},{options:pe,isLoading:J||R,onInputChange:ue,filterOption:x})}var Ce=n.exports.forwardRef(function(t,a){var e=ye(t),d=Se(e);return A(me,{ref:a,...d})});const Ae=Ce;function P(t,a){return t.toString()===a?a:`${a} (${t})`}const Re={Control:t=>{var a;return A(he.Control,{...t,className:`form-control ${(a=t.className)!=null?a:""}`})}};function $(t){var m,x;const{inputId:a,initialId:e,onChange:d,placeholder:l}=t,{accessToken:f}=Oe(),{data:i,isLoading:R}=_e(e,{enabled:!!e});async function _(s){var p,I;const h=parseInt(s);let o;return h&&(o=[await ge(f,h)]),o||(o=(p=await ve(f,{nameContains:s}))==null?void 0:p.results),(I=o==null?void 0:o.map(c=>({id:c.id.toString(),value:c.id.toString(),label:P(c.id,c.name)})))!=null?I:[]}return e&&R?A(xe,{width:"100%"}):A(Ae,{className:"bootstrap-4-backport",defaultInputValue:e?P(e,(m=i==null?void 0:i.name)!=null?m:e.toString()):void 0,defaultOptions:e?[{id:e,value:e,label:P(e,(x=i==null?void 0:i.name)!=null?x:e.toString())}]:!0,inputId:a,cacheOptions:!0,isClearable:!0,styles:{control:s=>({...s,display:"flex !important"}),input:s=>({...s,input:{gridArea:"1 / 2 / 4 / 4 !important"}})},components:Re,loadOptions:_,onChange:s=>{d(s==null?void 0:s.id.toString())},placeholder:l})}try{$.displayName="AccessRequirementSearchBox",$.__docgenInfo={description:"",displayName:"AccessRequirementSearchBox",props:{inputId:{defaultValue:null,description:"",name:"inputId",required:!1,type:{name:"string"}},initialId:{defaultValue:null,description:"",name:"initialId",required:!1,type:{name:"string | number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(accessRequirementId?: string | undefined) => void"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/dataaccess/AccessRequirementSearchBox.tsx#AccessRequirementSearchBox"]={docgenInfo:$.__docgenInfo,name:"AccessRequirementSearchBox",path:"src/lib/containers/dataaccess/AccessRequirementSearchBox.tsx#AccessRequirementSearchBox"})}catch{}export{$ as A};
