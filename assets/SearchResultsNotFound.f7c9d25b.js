import{R as Re}from"./index.es.82d55a6a.js";import{I as Ie,J as ce,K as Ne,L as ue}from"./index.d0718e00.js";import{i as me}from"./EntityTypeUtils.ab2c1a12.js";import{P as Q}from"./getEndpoint.0de7fccf.js";import{S as he,D as Ve}from"./RegularExpressions.b87376bf.js";import{u as E}from"./ElementWithTooltip.93ae62b9.js";import{a as Oe,b as ve}from"./useUserBundle.4175341b.js";import{C as J}from"./ColumnType.744125d2.js";import"./assert.134145c1.js";import{a as ge,I as xe}from"./index.316b0c5e.js";import{M as B}from"./MarkdownSynapse.c0d7687f.js";import{j as n,a as f,F as S}from"./jsx-runtime.2e925369.js";import{I as Ae}from"./IconList.cef13322.js";import{I as ke,t as we}from"./IconSvg.d5022c82.js";import{U as pe}from"./UserCard.9678f981.js";import{F as qe}from"./FileHandleLink.08c1655b.js";import{u as Ee}from"./react-intersection-observer.m.66de6abb.js";import{i as He}from"./isEmpty.12a3904b.js";import{u as De}from"./uniqueId.4eca3697.js";import{s as Fe}from"./NoSearchResults.19ed4ed4.js";const fe=window.React.useState,Me=window.React.useEffect,H=({type:o,title:e,subTitle:a="",description:t,values:r,secondaryLabelLimit:l,isAlignToLeftNav:i,descriptionConfig:d,href:m,target:c,rgbIndex:h,icon:_})=>{const u=document.querySelector('meta[name="description"]'),[T]=fe(document.title),[y]=fe(u?u.getAttribute("content"):"");return Me(()=>(e&&document.title!==e&&(document.title=e),(t||a)&&(u==null||u.setAttribute("content",t||a)),function(){document.title=T,u==null||u.setAttribute("content",y)})),n("div",{className:`SRC-portalCard SRC-portalCardHeader ${i?"isAlignToLeftNav":""}`,children:n("div",{className:"container-fluid container-full-width",children:n("div",{className:"row",children:n("div",{className:"col-md-offset-1 col-md-10",children:f("div",{className:"SRC-portalCardMain",children:[_,f("div",{style:{width:"100%"},children:[f("div",{className:"SRC-cardContent",style:{marginLeft:"15px"},children:[n("div",{className:"SRC-type",children:o}),n("div",{children:n("h3",{className:"SRC-boldText",style:{margin:"none"},children:m?n("a",{target:c,href:m,className:"highlight-link",children:e}):f("span",{children:[" ",e," "]})})}),a&&f("div",{className:"SRC-author",children:[" ",a," "]}),t&&n("span",{className:"SRC-font-size-base",children:d!=null&&d.isMarkdown?n(B,{markdown:t}):t})]}),n("div",{style:{borderTop:"1px solid rgba(26, 28, 41, 0.2)",marginTop:"15px",paddingTop:"5px"}}),n("div",{className:"SRC-cardContent",children:r&&n(ge,{isHeader:!0,secondaryLabelLimit:l,values:r})})]})]})})})})})};try{H.displayName="HeaderCard",H.__docgenInfo={description:"",displayName:"HeaderCard",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subTitle:{defaultValue:{value:""},description:"",name:"subTitle",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[][]"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},href:{defaultValue:null,description:"",name:"href",required:!1,type:{name:"string"}},target:{defaultValue:null,description:"",name:"target",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"Element"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HeaderCard.tsx#HeaderCard"]={docgenInfo:H.__docgenInfo,name:"HeaderCard",path:"src/lib/containers/HeaderCard.tsx#HeaderCard"})}catch{}const $e=window.React.useEffect,Ge=window.React.useState,D=o=>{const{fileHandleAssociation:{fileHandleId:e,associateObjectId:a,associateObjectType:t}}=o,{accessToken:r}=Oe(),[l,i]=Ge(),{ref:d,inView:m}=Ee({triggerOnce:!0,rootMargin:"500px 0px"});return $e(()=>{(()=>{e&&a&&t&&m&&Ie(e,r,t,a,!1).then(h=>{i(h)}).catch(h=>{console.error("Error on retrieving file handle url ",h)})})()},[m,e,a,r,t]),n("span",{ref:d,children:l&&n("img",{src:l,alt:"",className:"ImageFileHandle",loading:"lazy"})})};try{D.displayName="ImageFileHandle",D.__docgenInfo={description:"",displayName:"ImageFileHandle",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"]={docgenInfo:D.__docgenInfo,name:"ImageFileHandle",path:"src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"})}catch{}const X=window.React,W=400,Be="SRC-short-description",Pe="SRC-long-description",F=o=>{let e="";const a=o.split(" ");let t=0;for(;e.length<W&&t<a.length;)e+=`${a[t]} `,t+=1;return e=e.trim(),{previewText:e}},k=({columnName:o,value:e,selectColumns:a,columnModels:t})=>{if(!e)return{str:"",strList:void 0,columnModelType:void 0};const r=(a==null?void 0:a.find(i=>i.name===o))||(t==null?void 0:t.find(i=>i.name===o));if(r==null?void 0:r.columnType.endsWith("_LIST")){let i=e,d;try{return d=JSON.parse(i),i=d.join(", "),{strList:d,str:i,columnModelType:r==null?void 0:r.columnType}}catch(m){console.error("Could not parse multivalue string ",i," caught err ",m)}}return{str:e,columnModelType:r==null?void 0:r.columnType}},Ye=(o,e,a)=>(e==null?void 0:e.findIndex(t=>t.name===o))||(a==null?void 0:a.findIndex(t=>t.name===o)),M=o=>{const{synapseId:e,version:a}=o;return f("span",{children:[a,"\xA0\xA0",n("a",{target:"_blank",rel:"noopener noreferrer",href:`${Q.PORTAL}#!Synapse:${e}.${a}`,children:"(Show Version History on Synapse)"})]})},$=o=>{const{value:e,columnName:a,labelLink:t,selectColumns:r,columnModels:l,isHeader:i,className:d,rowData:m}=o;if(!e)return n(S,{children:e});const{strList:c,str:h,columnModelType:_}=k({columnName:a,value:e,selectColumns:r,columnModels:l});if(!h)return n(S,{children:h});let u=d;const T={};if(i&&(u=d==null?void 0:d.concat(" ","SRC-lightLink")),_===J.USERID_LIST&&c)return n(S,{children:c.map((g,p)=>f("span",{children:[n(pe,{ownerId:g,size:ue,className:u}),p<c.length-1&&",\xA0\xA0"]},g))});if(_===J.USERID&&h)return n(pe,{ownerId:h,size:ue,className:u});if(!t)return h.match(he)?n("a",{target:"_blank",rel:"noopener noreferrer",href:`${Q.PORTAL}#!Synapse:${h}`,className:u,children:h}):n(S,{children:h});let y;if(t.isMarkdown)c?y=n(S,{children:c.map((g,p)=>f("span",{children:[n(B,{renderInline:!0,markdown:g},g),p<c.length-1&&",\xA0\xA0"]},g))}):y=n(B,{renderInline:!0,markdown:e});else{const g=c||h.split(",");if("linkColumnName"in t){const p=Ye(t.linkColumnName,r,l);if(p==null)console.warn(`Could not determine column index of ${t.linkColumnName}`),y=n(S,{children:e});else{const C=m[p];He(C)?y=n(S,{children:e}):y=n(S,{children:g.map((s,I)=>f(X.Fragment,{children:[n("a",{href:C,target:"_blank",rel:"noopener noreferrer",className:u,style:T,children:s},s),I<g.length-1&&n("span",{style:{marginRight:4},children:", "})]},s))})}}else y=n(S,{children:g.map((p,C)=>{const{baseURL:s,URLColumnName:I,wrapValueWithParens:P}=t,N=P?`(${p})`:p,O=`/${s}?${I}=${N}`;return f(X.Fragment,{children:[n("a",{href:O,className:u,style:T,children:p},p),C<g.length-1&&n("span",{style:{marginRight:4},children:", "})]},p)})})}if(t.tooltipText){const g=De("GenericCardLabelTooltip-");return f("span",{"data-tip":t.tooltipText,"data-for":g,children:[n(Re,{delayShow:300,type:"dark",effect:"solid",id:g}),y]})}else return y};class G extends X.Component{constructor(e){super(e),this.getCutoff=a=>{let t="";const r=a.split(" ");let l=0;for(;t.length<W&&l<r.length;)t+=`${r[l]} `,l+=1;return t=t.trim(),{previewText:t}},this.toggleShowMore=()=>{this.setState({hasClickedShowMore:!0})},this.renderTitle=({href:a,target:t,titleSearchHandle:r,title:l})=>a?n("a",{"data-search-handle":r,target:t,href:a,className:"highlight-link",children:l}):f("span",{"data-search-handle":r,children:[" ",l," "]}),this.state={hasClickedShowMore:!1},this.getLinkParams=this.getLinkParams.bind(this),this.getCardLinkHref=this.getCardLinkHref.bind(this),this.renderLongDescription=this.renderLongDescription.bind(this),this.renderShortDescription=this.renderShortDescription.bind(this)}getLinkParams(e,a,t,r){var d;e=e.trim();let l=e,i="_self";return e.match(he)?l=`${Q.PORTAL}#!Synapse:${e}`:e.match(Ve)?(i="_blank",l=`https://dx.doi.org/${e}`):a?a&&(l=(d=this.getCardLinkHref(a,t,r))!=null?d:""):i="_blank",{href:l,target:i}}getCardLinkHref(e,a,t){if(e){if(!a||!t)throw Error("Must specify CardLink and data for linking to work");const{matchColumnName:r,URLColumnName:l,overrideLinkURLColumnName:i}=e;if(i&&t[i]){const m=t[i],c=a[m];if(c)return c}const d=t[r];if(d===void 0)console.error(`Could not find match for data: ${a} with columnName ${r}`);else{const m=a[d];if(m)return`/${e.baseURL}?${l}=${m}`}}}render(){var se,oe;const{schema:e,data:a,genericCardSchema:t,secondaryLabelLimit:r,selectColumns:l,columnModels:i,iconOptions:d,useTypeColumnForIcon:m=!1,isHeader:c=!1,titleLinkConfig:h,ctaLinkConfig:_,labelLinkConfig:u,facetAliases:T={},descriptionConfig:y,rgbIndex:g,columnIconOptions:p,queryContext:{entity:C}}=this.props,s=t,{hasClickedShowMore:I}=this.state,{link:P="",type:N}=s,O=a[e[s.title]];let v=s.subTitle&&a[e[s.subTitle]];v=(s==null?void 0:s.subTitle)&&k({value:v,columnName:s==null?void 0:s.subTitle,selectColumns:l,columnModels:i}).str;const x=a[e[s.description||""]],ye=a[e[s.icon||""]],w=a[e[s.dataTypeIconNames||""]],A=a[e[s.imageFileHandleColumnName||""]],Y=i==null?void 0:i.find(R=>s.link===R.name),Ce=Y==null?void 0:Y.columnType,Z=a[e[P]]||"",{href:ee,target:ne}=this.getLinkParams(Z,h,a,e),q=[],{secondaryLabels:ae=[]}=s,Se=C&&!me(C);for(let R=0;R<ae.length;R+=1){const L=ae[R];let b=a[e[L]],j;if(b){if(Se&&L==="currentVersion"){const z=a[e.id];b=M({synapseId:z,version:b}),j="Version"}else{const z=u==null?void 0:u.find(de=>de.matchColumnName===L);b=$({value:b,columnName:L,labelLink:z,isHeader:c,selectColumns:l,columnModels:i,rowData:a}),j=E(L,T)}const be=[j,b,L];q.push(be)}}const te=A||Z;let V;C&&(me(C)?V={fileHandleId:te,associateObjectId:(se=C==null?void 0:C.id)!=null?se:"",associateObjectType:ce.TableEntity}:V={fileHandleId:te,associateObjectId:a[e.id],associateObjectType:ce.FileEntity});const re=q.length>0,_e={marginTop:c?"0px":void 0,marginBottom:c?"0px":void 0,paddingBottom:re||A?void 0:"15px"},ie=f(S,{children:[!m&&A&&n("div",{className:"SRC-imageThumbnail",style:{padding:s.thumbnailRequiresPadding?"21px":void 0},children:V&&n(D,{fileHandleAssociation:V})}),!m&&!A&&n("div",{className:"SRC-cardThumbnail",children:n(xe,{iconOptions:d,value:ye,type:N})}),m&&n("div",{className:"SRC-cardThumbnail",children:n(ke,{options:{icon:we[a[e.type]]}})})]});if(c)return n(H,{descriptionConfig:y,title:O,subTitle:v,description:x,type:N,icon:ie,values:q,href:ee,target:ne,isAlignToLeftNav:!0,secondaryLabelLimit:r,rgbIndex:g});const Te=E(s.title,T),Le=E(s.subTitle,T),le=E(s.description,T);let K,U;if(_){const R=a[e[_.link]]||"",{href:L,target:b}=this.getLinkParams(R,void 0,a,e);K=L,U=b}return f("div",{style:_e,className:"SRC-portalCard",children:[f("div",{className:"SRC-portalCardMain",children:[ie,f("div",{className:"SRC-cardContent",children:[n("div",{className:"SRC-type",children:N}),((oe=p==null?void 0:p.columns)==null?void 0:oe.dataType)&&(w==null?void 0:w.length)&&n("div",{style:{marginTop:"20px"},children:n(Ae,{iconConfigs:p.columns.dataType,iconNames:JSON.parse(w),useBackground:!0,useTheme:!0})}),n("div",{children:n("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"},children:!h&&Ce===J.FILEHANDLEID&&V?n(qe,{fileHandleAssociation:V,showDownloadIcon:N!==Ne,displayValue:O}):this.renderTitle({href:ee,target:ne,titleSearchHandle:Te,title:O})})}),v&&n("div",{"data-search-handle":Le,className:"SRC-author",children:v}),x&&this.renderShortDescription(x,I,le,y),x&&this.renderLongDescription(x,I,le,y),_&&K&&U&&n("div",{className:"SRC-portalCardCTALink bootstrap-4-backport",children:n("a",{target:U,rel:"noopener noreferrer",href:K,children:_.text})})]})]}),re&&n(ge,{isHeader:!1,secondaryLabelLimit:r,values:q,columnIconOptions:p,className:`${A?"hasImage":"hasIcon"}`})]})}renderLongDescription(e,a,t,r){let l=e;r!=null&&r.isMarkdown&&(l=n(B,{markdown:l}));const i=a||(r==null?void 0:r.showFullDescriptionByDefault);return n("div",{className:i?"":"SRC-hidden",children:n("span",{"data-search-handle":t,className:`SRC-font-size-base ${Pe}`,children:l})})}renderShortDescription(e,a,t,r){return r!=null&&r.showFullDescriptionByDefault?n(S,{}):f("div",{className:a?"SRC-hidden":"",children:[n("span",{"data-search-handle":t,className:`SRC-font-size-base ${Be} SRC-short-description`,children:F(e).previewText}),e.length>=W&&n("a",{style:{fontSize:"16px",cursor:"pointer",marginLeft:"5px"},className:"highlight-link",onClick:this.toggleShowMore,children:"...Show More"})]})}}G.contextType=ve;try{F.displayName="getCutoff",F.__docgenInfo={description:"",displayName:"getCutoff",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getCutoff"]={docgenInfo:F.__docgenInfo,name:"getCutoff",path:"src/lib/containers/GenericCard.tsx#getCutoff"})}catch{}try{k.displayName="getValueOrMultiValue",k.__docgenInfo={description:"",displayName:"getValueOrMultiValue",props:{columnName:{defaultValue:null,description:"",name:"columnName",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getValueOrMultiValue"]={docgenInfo:k.__docgenInfo,name:"getValueOrMultiValue",path:"src/lib/containers/GenericCard.tsx#getValueOrMultiValue"})}catch{}try{M.displayName="VersionLabel",M.__docgenInfo={description:"",displayName:"VersionLabel",props:{synapseId:{defaultValue:null,description:"",name:"synapseId",required:!0,type:{name:"string"}},version:{defaultValue:null,description:"",name:"version",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#VersionLabel"]={docgenInfo:M.__docgenInfo,name:"VersionLabel",path:"src/lib/containers/GenericCard.tsx#VersionLabel"})}catch{}try{$.displayName="SynapseCardLabel",$.__docgenInfo={description:"",displayName:"SynapseCardLabel",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},labelLink:{defaultValue:null,description:"",name:"labelLink",required:!0,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink | undefined"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!0,type:{name:"SelectColumn[] | undefined"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!0,type:{name:"ColumnModel[] | undefined"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#SynapseCardLabel"]={docgenInfo:$.__docgenInfo,name:"SynapseCardLabel",path:"src/lib/containers/GenericCard.tsx#SynapseCardLabel"})}catch{}try{G.displayName="GenericCard",G.__docgenInfo={description:"Renders a card from a table query",displayName:"GenericCard",props:{selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},useTypeColumnForIcon:{defaultValue:null,description:"",name:"useTypeColumnForIcon",required:!1,type:{name:"boolean"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"Record<string, number>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"string[]"}},tableId:{defaultValue:null,description:"",name:"tableId",required:!0,type:{name:"string | undefined"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#GenericCard"]={docgenInfo:G.__docgenInfo,name:"GenericCard",path:"src/lib/containers/GenericCard.tsx#GenericCard"})}catch{}function mn(){return f("div",{className:"text-center",children:[Fe,n("h4",{children:"No Matching Results"}),n("p",{children:"Try checking the spelling or removing filters."})]})}export{G,mn as S,$ as a,k as g};
//# sourceMappingURL=SearchResultsNotFound.f7c9d25b.js.map
