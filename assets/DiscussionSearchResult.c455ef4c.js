import{r as o,j as e,a as h,F as U}from"./jsx-runtime.325e7137.js";import{h as A,bT as E,c3 as N,bQ as M,a1 as R,bU as b}from"./index.26ad4be5.js";import{h as L}from"./moment.a565bb48.js";import{U as v}from"./UserCard.c35f579d.js";import{h as K}from"./SynapseConstants.b6aa8bf5.js";import{I as _}from"./IconSvg.a4adfbe0.js";import{S as k}from"./SkeletonTable.a881218b.js";import{P}from"./getEndpoint.bb7ded34.js";import{R as j}from"./Row.ad47f105.js";import{C as T}from"./isArray.ba495a61.js";import{S as Y}from"./Skeleton.4f13b0c1.js";import{T as I}from"./Typography.46ba432f.js";const d=async i=>(await fetch(i,{method:"GET",headers:{Accept:"*/*","Access-Control-Request-Headers":"authorization","Content-Type":"text/plain; charset=utf-8"}})).text(),m=i=>{const{threadId:u,replyId:l}=i,{accessToken:t}=A(),[s,x]=o.exports.useState(),[O,C]=o.exports.useState(""),[a,w]=o.exports.useState(),[p,g]=o.exports.useState(),[S,f]=o.exports.useState(!1),D=async()=>{let n;const c=await E(u,t);if(f(!0),l){const r=await N(l,t);n=await M(r.messageKey,t),g(await R(t,r.createdBy)),w(r)}else g(await R(t,c.createdBy)),n=await b(c.messageKey,t);C(await d(n.messageUrl)),x(c),f(!1)};return o.exports.useEffect(()=>{D()},[]),e("div",{className:"search-result-container",children:h(j,{children:[e(T,{xs:1,children:S?e(Y,{variant:"circular",width:"40px",height:"40px"}):l?e(_,{icon:"replyTwoTone"}):e(_,{icon:"chatTwoTone"})}),e(T,{xs:11,children:S?e(k,{numCols:1,numRows:4}):h(U,{children:[e(I,{variant:"headline3",children:e("a",{className:"link",href:((n,c,r)=>{let y=`${P.PORTAL}#!Synapse:${c}/discussion/threadId=${n}`;return r&&(y+=`&replyId=${r}`),y})(s==null?void 0:s.id,s==null?void 0:s.projectId,a==null?void 0:a.id),children:s==null?void 0:s.title})}),e("div",{className:"truncated",children:e(I,{variant:"body1",children:O})}),h("div",{className:"search-result-footer",children:[l?"Reply":"Thread"," by"," ",e(v,{size:K,ownerId:p==null?void 0:p.ownerId})," ",L(a==null?void 0:a.createdOn).format("l LT")]})]})})]})})};try{d.displayName="getMessage",d.__docgenInfo={description:"",displayName:"getMessage",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DiscussionSearchResult.tsx#getMessage"]={docgenInfo:d.__docgenInfo,name:"getMessage",path:"src/lib/containers/DiscussionSearchResult.tsx#getMessage"})}catch{}try{m.displayName="DiscussionSearchResult",m.__docgenInfo={description:"",displayName:"DiscussionSearchResult",props:{threadId:{defaultValue:null,description:"",name:"threadId",required:!0,type:{name:"string"}},replyId:{defaultValue:null,description:"",name:"replyId",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DiscussionSearchResult.tsx#DiscussionSearchResult"]={docgenInfo:m.__docgenInfo,name:"DiscussionSearchResult",path:"src/lib/containers/DiscussionSearchResult.tsx#DiscussionSearchResult"})}catch{}export{m as D,d as g};
