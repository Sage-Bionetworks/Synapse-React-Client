import{w as b,aV as k,aW as E,aX as N}from"./index.b510e4be.js";import{k as d}from"./ToastMessage.093903bc.js";import{M as O}from"./MarkdownPopover.f812c8a4.js";import{T as m}from"./Typography.5a45efab.js";import{a as n,j as t,F as B}from"./jsx-runtime.2e925369.js";import{B as g}from"./Button.c582ea4c.js";import{H as w}from"./IconSvg.05ece234.js";import"./objectWithoutPropertiesLoose.090b3c10.js";import"./withStyles.461112f3.js";import"./objectWithoutProperties.07f8cd75.js";import"./toConsumableArray.8f496188.js";import"./createClass.67a84016.js";import"./FullWidthAlert.4dd40e61.js";import"./Tooltip.3e761ad5.js";import"./SvgIcon.6d10a3ac.js";import"./slicedToArray.e9a7fa03.js";import"./makeStyles.38be5a7f.js";import"./index.f252d424.js";import"./index.06f4a415.js";import"./assert.50ccfc45.js";import"./iframe.2d80f44f.js";import"./index.8cde812d.js";import"./getEndpoint.0de7fccf.js";import"./usePopperMarginModifiers.fc55270a.js";import"./useWaitForDOMRef.679b0e64.js";import"./MarkdownSynapse.d3fd8f03.js";import"./UserCard.1503cd11.js";import"./IconCopy.b1eba79c.js";import"./SkeletonTable.cd96bfa1.js";import"./times.6bcb1021.js";import"./toInteger.7636b6c4.js";import"./Skeleton.3d9d9757.js";import"./Overlay.7f5ddc31.js";import"./factory.bb1af4eb.js";import"./sqlFunctions.b49ac766.js";import"./SynapseVideo.a715bf18.js";import"./react-intersection-observer.m.66de6abb.js";import"./DateFormatter.7bd939ea.js";import"./moment.53181859.js";import"./InfoOutlined.a7449f61.js";const L="org.sagebionetworks.repo.model.quiz.MultichoiceResponse",M=window.React,H=window.React.useEffect,u=window.React.useState,p=()=>{const{accessToken:a}=b(),z=k(),[i,T]=u(),[l,f]=u([]),[r,h]=u(),C=M.useRef(null),_="https://help.synapse.org/docs/Getting-Started.2055471150.html",y=async()=>{try{T(await E(a))}catch(e){z(e)}};H(()=>{y()},[a]);const x=(e,s)=>{const c=[...l.filter(o=>o.questionIndex!==e),{questionIndex:e,answerIndex:[s],concreteType:L}];f(c)},S=()=>{var e;(e=C.current)==null||e.reset(),f([]),h(void 0),y()},v=async()=>{try{if(i&&i.questions.length===l.length){const e={quizId:i.id,questionResponses:l},s=await N(a,e);h(s),window.scrollTo(0,0)}else d("Please answer all of the questions and try again.","warning")}catch(e){d(e.reason,"danger")}},R=e=>e?{content:t(B,{children:"More info"}),closePopoverOnClick:!0,onClick:()=>window.open(e,"_blank"),variant:"primary"}:void 0;return n("div",{className:"bootstrap-4-backport CertificationQuiz",children:[r&&n("div",{children:[!r.passed&&t("div",{className:"failBanner",children:"Quiz Failed"}),n(m,{variant:"hintText",children:["Score: ",r.score," / ",i==null?void 0:i.questions.length]}),r.passed?d(`You passed the Synapse Certification Quiz on ${r.passedOn}`,"success"):n(m,{variant:"body1",children:["Please review the items shown in red below, and"," ",t("a",{href:"#",onClick:e=>{e.preventDefault(),S()},children:"try again"}),"."]})]}),n("div",{className:"CertificationQuiz__container",children:[n(g,{onClick:()=>window.open(_,"_blank"),className:"help-button",variant:"light-secondary",children:[t(w,{className:"HelpButton",style:{marginRight:"4px"}}),"Help"]}),i?t("div",{dangerouslySetInnerHTML:{__html:i.header}}):"",t("form",{ref:C,onSubmit:e=>e.preventDefault(),children:t("ol",{children:i==null?void 0:i.questions.map(e=>{var s,c;return n("li",{role:e.exclusive?"radiogroup":void 0,children:[t("div",{dangerouslySetInnerHTML:{__html:e.prompt},className:r&&((c=(s=r.corrections)==null?void 0:s.find(o=>o.question.questionIndex===e.questionIndex))!=null&&c.isCorrect?"":"incorrectQuestion")}),e.answers.map(o=>n("div",{children:[t("input",{id:`${e.questionIndex}-${o.answerIndex}`,name:`${e.questionIndex}`,type:e.exclusive?"radio":"checkbox",value:o.answerIndex,onClick:I=>x(e.questionIndex,Number(I.currentTarget.value)),disabled:!!r}),t("label",{style:{fontWeight:400},htmlFor:`${e.questionIndex}-${o.answerIndex}`,children:o.prompt})]},`${e.questionIndex}-${o.answerIndex}`)),t(O,{contentProps:{markdown:e.helpText},placement:"right",actionButton:R(e.docLink),showCloseButton:!0,children:n(m,{variant:"hintText",color:"primary",children:[t(w,{className:"HelpButton",style:{marginRight:"4px"}}),"Need help answering this question?"]})})]},e.questionIndex)})})}),t(g,{className:"help-button",variant:"primary",onClick:()=>v(),children:"Submit"})]})]})};var Q=p;try{p.displayName="CertificationQuiz",p.__docgenInfo={description:"",displayName:"CertificationQuiz",props:{}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/CertificationQuiz.tsx#CertificationQuiz"]={docgenInfo:p.__docgenInfo,name:"CertificationQuiz",path:"src/lib/containers/CertificationQuiz.tsx#CertificationQuiz"})}catch{}var ve={parameters:{storySource:{source:`import React from 'react'
import { ComponentStory, ComponentMeta } from '@storybook/react'

import CertificationQuiz from './CertificationQuiz'

export default {
  title: 'Synapse/CertifcationQuiz',
  component: CertificationQuiz,
  argTypes: {},
} as ComponentMeta<typeof CertificationQuiz>

const Template: ComponentStory<typeof CertificationQuiz> = args => (
  <CertificationQuiz {...args} />
)

export const CertificationQuizDemo = Template.bind({})
CertificationQuizDemo.args = {}
`,locationsMap:{"certification-quiz-demo":{startLoc:{col:59,line:12},endLoc:{col:1,line:14},startBody:{col:59,line:12},endBody:{col:1,line:14}}}}},title:"Synapse/CertifcationQuiz",component:Q,argTypes:{}};const $=a=>t(Q,{...a}),P=$.bind({});P.args={};const Re=["CertificationQuizDemo"];export{P as CertificationQuizDemo,Re as __namedExportsOrder,ve as default};
//# sourceMappingURL=CertificationQuiz.stories.0fd76b76.js.map
