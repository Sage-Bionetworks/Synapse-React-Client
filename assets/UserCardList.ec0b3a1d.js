import{g as h,U as f}from"./UserCard.c8a3d0fb.js";import{M as y}from"./index.df2dc306.js";import{C}from"./ColumnType.744125d2.js";import"./assert.66eba7f0.js";import{j as l}from"./jsx-runtime.00d70968.js";import{w as U}from"./without.7d441388.js";const S=window.React;class d extends S.Component{constructor(e){super(e),this.state={userProfileMap:{}},this.update=this.update.bind(this)}componentDidMount(){const{list:e}=this.props;this.update(e)}componentDidUpdate(e){const t=e.list,i=U(this.props.list.filter(a=>a),...t);i.length>0&&this.update(i)}update(e){h(e.filter(t=>t)).then(t=>{const i={};t.list.forEach(a=>{const{ownerId:n}=a;i[n]=a}),this.setState({userProfileMap:{...this.state.userProfileMap,...i}})}).catch(t=>{console.log("Error on batch call =",t)})}manuallyExtractData(e){const t=e.queryResult.queryResults.headers.findIndex(s=>s.name==="firstName"),i=e.queryResult.queryResults.headers.findIndex(s=>s.name==="lastName"),a=e.queryResult.queryResults.headers.findIndex(s=>s.name==="institution"),n=e.queryResult.queryResults.headers.findIndex(s=>s.columnType===C.USERID);return e.queryResult.queryResults.rows.filter(s=>!s.values[n]).map(s=>{var o,c,m,p;const r=s.values;return{firstName:(o=r[t])!=null?o:"",lastName:(c=r[i])!=null?c:"",company:(m=r[a])!=null?m:void 0,ownerId:"",userName:r[t]&&(p=r[t][0])!=null?p:""}})}render(){const{size:e=y,data:t,list:i}=this.props,{userProfileMap:a={}}=this.state,n=t&&this.manuallyExtractData(t);let u=0;return l("div",{className:"SRC-card-grid-row",children:i.map(s=>{const r=a[s];if(r)return l("div",{className:"SRC-grid-item SRC-narrow-grid-item",children:l(f,{size:e,preSignedURL:r.clientPreSignedURL,userProfile:r})},JSON.stringify(r));const o=n&&n[u];return o?(u+=1,l("div",{className:"SRC-grid-item SRC-narrow-grid-item",children:l(f,{disableLink:!0,hideEmail:!0,size:e,userProfile:o})},JSON.stringify(o))):!1})})}}try{d.displayName="UserCardList",d.__docgenInfo={description:"",displayName:"UserCardList",props:{list:{defaultValue:null,description:"",name:"list",required:!0,type:{name:"string[]"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"AVATAR"'},{value:'"SMALL USER CARD"'},{value:'"MEDIUM USER CARD"'},{value:'"LARGE USER CARD"'}]}},data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"QueryResultBundle"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/UserCardList.tsx#UserCardList"]={docgenInfo:d.__docgenInfo,name:"UserCardList",path:"src/lib/containers/UserCardList.tsx#UserCardList"})}catch{}export{d as U};
