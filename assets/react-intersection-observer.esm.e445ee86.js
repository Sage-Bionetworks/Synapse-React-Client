const h=window.React;function V(){return V=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},V.apply(this,arguments)}function E(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,w(t,n)}function w(t,n){return w=Object.setPrototypeOf||function(i,e){return i.__proto__=e,i},w(t,n)}function A(t,n){if(t==null)return{};var r={},i=Object.keys(t),e,o;for(o=0;o<i.length;o++)e=i[o],!(n.indexOf(e)>=0)&&(r[e]=t[e]);return r}var _=new Map,v=new WeakMap,S=0,U=void 0;function W(t){return t?(v.has(t)||(S+=1,v.set(t,S.toString())),v.get(t)):"0"}function $(t){return Object.keys(t).sort().filter(function(n){return t[n]!==void 0}).map(function(n){return n+"_"+(n==="root"?W(t.root):t[n])}).toString()}function B(t){var n=$(t),r=_.get(n);if(!r){var i=new Map,e,o=new IntersectionObserver(function(c){c.forEach(function(s){var a,u=s.isIntersecting&&e.some(function(f){return s.intersectionRatio>=f});t.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=u),(a=i.get(s.target))==null||a.forEach(function(f){f(u,s)})})},t);e=o.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),r={id:n,observer:o,elements:i},_.set(n,r)}return r}function j(t,n,r,i){if(r===void 0&&(r={}),i===void 0&&(i=U),typeof window.IntersectionObserver>"u"&&i!==void 0){var e=t.getBoundingClientRect();return n(i,{isIntersecting:i,target:t,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:e,intersectionRect:e,rootBounds:e}),function(){}}var o=B(r),c=o.id,s=o.observer,a=o.elements,u=a.get(t)||[];return a.has(t)||a.set(t,u),u.push(n),s.observe(t),function(){u.splice(u.indexOf(n),1),u.length===0&&(a.delete(t),s.unobserve(t)),a.size===0&&(s.disconnect(),_.delete(c))}}var D=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function m(t){return typeof t.children!="function"}var L=function(t){E(n,t);function n(i){var e;return e=t.call(this,i)||this,e.node=null,e._unobserveCb=null,e.handleNode=function(o){e.node&&(e.unobserve(),!o&&!e.props.triggerOnce&&!e.props.skip&&e.setState({inView:!!e.props.initialInView,entry:void 0})),e.node=o||null,e.observeNode()},e.handleChange=function(o,c){o&&e.props.triggerOnce&&e.unobserve(),m(e.props)||e.setState({inView:o,entry:c}),e.props.onChange&&e.props.onChange(o,c)},e.state={inView:!!i.initialInView,entry:void 0},e}var r=n.prototype;return r.componentDidUpdate=function(e){(e.rootMargin!==this.props.rootMargin||e.root!==this.props.root||e.threshold!==this.props.threshold||e.skip!==this.props.skip||e.trackVisibility!==this.props.trackVisibility||e.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},r.componentWillUnmount=function(){this.unobserve(),this.node=null},r.observeNode=function(){if(!(!this.node||this.props.skip)){var e=this.props,o=e.threshold,c=e.root,s=e.rootMargin,a=e.trackVisibility,u=e.delay,f=e.fallbackInView;this._unobserveCb=j(this.node,this.handleChange,{threshold:o,root:c,rootMargin:s,trackVisibility:a,delay:u},f)}},r.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},r.render=function(){if(!m(this.props)){var e=this.state,o=e.inView,c=e.entry;return this.props.children({inView:o,entry:c,ref:this.handleNode})}var s=this.props,a=s.children,u=s.as,f=A(s,D);return h.createElement(u||"div",V({ref:this.handleNode},f),a)},n}(h.Component);function T(t){var n,r=t===void 0?{}:t,i=r.threshold,e=r.delay,o=r.trackVisibility,c=r.rootMargin,s=r.root,a=r.triggerOnce,u=r.skip,f=r.initialInView,O=r.fallbackInView,N=r.onChange,I=h.useState(null),l=I[0],x=I[1],g=h.useRef(),k=h.useState({inView:!!f,entry:void 0}),b=k[0],M=k[1];g.current=N,h.useEffect(function(){if(!(u||!l)){var p=j(l,function(C,y){M({inView:C,entry:y}),g.current&&g.current(C,y),y.isIntersecting&&a&&p&&(p(),p=void 0)},{root:s,rootMargin:c,threshold:i,trackVisibility:o,delay:e},O);return function(){p&&p()}}},[Array.isArray(i)?i.toString():i,l,s,c,a,u,o,O,e]);var R=(n=b.entry)==null?void 0:n.target;h.useEffect(function(){!l&&R&&!a&&!u&&M({inView:!!f,entry:void 0})},[l,R,a,u,f]);var d=[x,b.inView,b.entry];return d.ref=d[0],d.inView=d[1],d.entry=d[2],d}export{L as I,T as u};
