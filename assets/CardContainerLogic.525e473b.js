import{h as ae,j as $g,k as Rn,l as Hg,A as $f,m as Hf,n as hl,o as xn,p as en,q as zf,r as zg,T as Ug,M as Yg,t as jg,F as Ne,v as ur,w as Wg,x as Uf,y as Gg,z as wc,B as wr,C as Cr,D as Yf,H as jf,I as Kg,J as _r,K as ml,L as Qg,N as Xg,Q as Zg,R as Jg,V as ey,W as ty,X as ny,Y as Cc,Z as Wf,_ as Fa,$ as Gf,a0 as ry,a1 as oy,a2 as ue,a3 as ay,a4 as iy,a5 as sy,a6 as ly,a7 as cy,U as dy,f as uy,a8 as fy,a9 as py,aa as gl,ab as hy,ac as Kf,ad as my,ae as gy,af as yy,ag as vy,ah as by,ai as _c,aj as qr,ak as Sy,al as wy,am as yl,an as Qf,ao as vl,ap as bl,aq as Sl,ar as Cy,as as _y,E as Xf,at as Zf,au as Ey,av as Jf,O as ti,aw as Ec,G as xy,ax as Ty}from"./index.a7b4e4df.js";import{p as Oy,a as An,i as Iy,f as Ny,b as Ry,c as wl,S as ep,D as Ay}from"./sqlFunctions.1d7d9843.js";import{u as tp}from"./useGetInfoFromIds.46d82302.js";import{C as re}from"./ColumnType.744125d2.js";import{j as u,a as I,F as z,r as E,R as ge}from"./jsx-runtime.f7cf66fc.js";import{i as Cl,c as np,E as $s,a as xc,b as ky,d as pn,e as Ly,f as Tn,g as rp,h as qy,j as op,k as ap}from"./EntityIcon.38dfbeae.js";import{P as De,g as Dy,B as Py}from"./getEndpoint.bb7ded34.js";import{u as kt,E as _l,I as $a,C as El,a as My,S as Vy}from"./ElementWithTooltip.acf8538e.js";import{u as By,T as We}from"./Tooltip.7bec90df.js";import{S as ni,Q as kn,a as Ln,u as _t,b as Er,c as Fy,d as $y,i as Hy,e as zy,C as Uy,f as Yy,g as jy,E as Wy,h as Gy,j as Ky,k as xl,l as Tl,m as ip,n as Qy,o as Xy,F as Zy,p as sp,T as lp,q as Jy}from"./FacetNav.15d72b7c.js";import{u as cp,a as ev,i as tv,r as nv,b as rv}from"./queryUtils.336cf5e5.js";import{u as Ol}from"./useEntity.28ef4d9d.js";import{T as St}from"./Typography.dfe40719.js";import{S as ov}from"./react-select.esm.843836e6.js";import{i as av,u as iv,f as sv,C as lv}from"./CustomSelectWidget.d8898dba.js";import{B as be}from"./Button.8c8504e0.js";import{i as Il}from"./TypeUtils.a2c41307.js";import{e as Nl}from"./queryKeys.e0d3085f.js";import{S as Ha,l as dp}from"./LoadingScreen.ce5011dc.js";import{W as cv}from"./WarningModal.82d863eb.js";import{A as tn}from"./Alert.a83e08c9.js";import{u as qn}from"./react-intersection-observer.esm.479d13c0.js";import{u as up}from"./useInfiniteQuery.9ecf2d2e.js";import{U as Xt,a as Rl,g as dv}from"./UserCard.289eef41.js";import{f as Al}from"./DateFormatter.4a4a8911.js";import{h as xr}from"./moment.a565bb48.js";import{S as kl}from"./SkeletonTable.ff560500.js";import{_ as Ll,a as wa,S as Hs}from"./Skeleton.76391d30.js";import{I as fe,H as uv,S as fv,t as pv}from"./IconSvg.09883cec.js";import{A as za,c as ql,B as nn,C as hv,j as Tr,D as mv,G as fp,H as gv,J as yv,K as vv,L as bv,M as Sv,O as pp,P as wv,Q as Cv,R as _v,e as hp,T as mp,U as Ev,V as Dl,W as gp,X as yp,Y as xv,Z as Tv,$ as vp,a0 as Ov,a1 as Iv,a2 as Nv,a3 as Rv,m as Av,a4 as kv,g as Lv}from"./iframe.7a93df40.js";import{_ as qv,f as bp,a as Sp,b as Dv,c as Pv,d as Mv,e as Vv,g as Bv,h as Fv,i as $v,j as Hv,k as zv,l as Uv,s as Yv,F as jv}from"./core.esm.f7516a9f.js";import{i as Wv}from"./isString.52071ff5.js";import{_ as Gv}from"./index.browser.15da9886.js";import{r as Kv}from"./index.1e38edd3.js";import{i as wp,g as Cp,p as Qv,e as Xv,a as Zv,c as Jv,o as eb,f as tb,b as nb,d as rb,h as ob}from"./usePopperMarginModifiers.206050ec.js";import{C as _p,d as Zt}from"./ToastMessage.9c9a0082.js";import{d as ab,s as ib}from"./union.6ab0d04a.js";import{i as sb}from"./isEqual.0a82face.js";import{w as Pl,a as lb,b as fr,d as Jr,f as cb,g as Bt}from"./withStyles.ddbf8a64.js";import{c as db,P as ub}from"./factory.bc323c03.js";import{T as Ca,N as fb,I as Tc}from"./SynapseTableConstants.07ecdebd.js";import{u as Oc}from"./use-deep-compare-effect.esm.2af231c9.js";import{u as pb}from"./useGetDownloadListStatistics.aec1d5de.js";import{C as Ml}from"./Collapse.062dd5ab.js";import{M as ie,a as hb,b as mb}from"./Modal.d2d919b5.js";import{D as Rt}from"./Dropdown.a23c4d18.js";import{Q as gb}from"./QueryCount.eb6004b3.js";import{c as rn}from"./createSvgIcon.fe8b3870.js";import{c as hn}from"./cloneDeep.8f25a5be.js";import{N as yb}from"./NoData.ee550e92.js";import{u as Ep}from"./useGetAccessRequirement.3f636936.js";import{B as vb,S as ke}from"./ManagedACTAccessRequirementStatus.944a52ba.js";import{F as ri}from"./FileUpload.4a491036.js";import{U as bb}from"./UserSearchBox.22ab5a9c.js";import{R as Sb}from"./RadioGroup.e5383a0b.js";import{E as zs}from"./EntityLink.03e12cb1.js";import{C as wb}from"./Checkbox.2fa6725f.js";import{s as Cb}from"./NoSearchResults.cd02335c.js";import{u as _b}from"./useTheme.af842711.js";import{S as Eb}from"./SynapseVideo.46a8d2ab.js";import{I as xb}from"./IconList.df7f04f2.js";import{i as Tb}from"./isEmpty.529ce659.js";import{U as Ob}from"./UserCardList.d9ba2cad.js";const Ib=rn(u("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})),Nb=rn(I(z,{children:[u("path",{d:"M6 20h12V10H6v10zm6-7c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z",opacity:".3"}),u("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"})]})),Rb=rn(u("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}));var Et=44,Ab=function(t){return{root:{display:"inline-block"},static:{transition:t.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:t.transitions.create("transform")},colorPrimary:{color:t.palette.primary.main},colorSecondary:{color:t.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:t.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:t.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}},kb=E.exports.forwardRef(function(t,n){var r=t.classes,o=t.className,a=t.color,i=a===void 0?"primary":a,s=t.disableShrink,l=s===void 0?!1:s,d=t.size,c=d===void 0?40:d,f=t.style,p=t.thickness,g=p===void 0?3.6:p,h=t.value,m=h===void 0?0:h,v=t.variant,S=v===void 0?"indeterminate":v,_=lb(t,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),b={},y={},w={};if(S==="determinate"||S==="static"){var C=2*Math.PI*((Et-g)/2);b.strokeDasharray=C.toFixed(3),w["aria-valuenow"]=Math.round(m),b.strokeDashoffset="".concat(((100-m)/100*C).toFixed(3),"px"),y.transform="rotate(-90deg)"}return u("div",{className:fr(r.root,o,i!=="inherit"&&r["color".concat(Jr(i))],{determinate:r.determinate,indeterminate:r.indeterminate,static:r.static}[S]),style:cb({width:c,height:c},y,f),ref:n,role:"progressbar",...w,..._,children:u("svg",{className:r.svg,viewBox:"".concat(Et/2," ").concat(Et/2," ").concat(Et," ").concat(Et),children:u("circle",{className:fr(r.circle,l&&r.circleDisableShrink,{determinate:r.circleDeterminate,indeterminate:r.circleIndeterminate,static:r.circleStatic}[S]),style:b,cx:Et,cy:Et,r:(Et-g)/2,fill:"none",strokeWidth:g})})})});const Lb=Pl(Ab,{name:"MuiCircularProgress",flip:!1})(kb);var Vl=(e=>(e.APPROVED="APPROVED",e.REVOKED="REVOKED",e))(Vl||{}),qb=(e=>(e.MODIFIED_ON="MODIFIED_ON",e.EXPIRED_ON="EXPIRED_ON",e))(qb||{}),ht=(e=>(e.GAIN_ACCESS="GAIN_ACCESS",e.RENEW_ACCESS="RENEW_ACCESS",e.REVOKE_ACCESS="REVOKE_ACCESS",e))(ht||{});const Db="org.sagebionetworks.repo.model.Link",Pb=Il(Db),Mb="org.sagebionetworks.repo.model.file.GoogleCloudFileHandle",Vb="org.sagebionetworks.repo.model.file.S3FileHandle",Bl=Il(Vb,Mb),Bb="org.sagebionetworks.repo.model.file.ExternalFileHandle",Fb="org.sagebionetworks.repo.model.file.ExternalObjectStoreFileHandle",$b="org.sagebionetworks.repo.model.file.ProxyFileHandle",Hb=Il($b,Fb,Bb);var Ua=(e=>(e.ENTITY="ENTITY",e.EVALUATION="EVALUATION",e.TEAM="TEAM",e))(Ua||{}),xp=(e=>(e.OPEN="OPEN",e.RESTRICTED_BY_TERMS_OF_USE="RESTRICTED_BY_TERMS_OF_USE",e.CONTROLLED_BY_ACT="CONTROLLED_BY_ACT",e))(xp||{});function zb(e,t){const{accessToken:n}=ae(),r={accessRequirementId:e};return up(["approvedSubmissionInfo",r],async o=>await $g({...r,nextPageToken:o.pageParam},n),{...t,getNextPageParam:o=>o.nextPageToken})}function Tp(e,t,n=$f,r){const{accessToken:o}=ae();return Rn(Nl.bundle(e,t,n),()=>Hg(e,n,t,o),r)}function Ub(e,t){const{accessToken:n}=ae();return Rn(Nl.children(e,!1),()=>Hf(e,n),t)}function Mk(e,t){const{accessToken:n}=ae();return up(Nl.children(e,!0),async r=>await Hf({...e,includeTotalChildCount:r.pageParam?!1:e.includeTotalChildCount,nextPageToken:r.pageParam},n,r.signal),{...t,getNextPageParam:r=>r.nextPageToken})}function Yb(e,t){const{accessToken:n}=ae();return Rn(["entityHeaders",n,e],()=>hl(e,n),t)}var Us={exports:{}},Se={},pr={exports:{}},on={};function Op(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function jb(e,t,n){}function Wb(e,t,n){}var Gb=/javascript\s*\:/img;function Kb(e,t){return Gb.test(t)?"":t}on.whiteList=Op();on.getDefaultWhiteList=Op;on.onAttr=jb;on.onIgnoreAttr=Wb;on.safeAttrValue=Kb;var Qb={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Pn=Qb;function Xb(e,t){e=Pn.trimRight(e),e[e.length-1]!==";"&&(e+=";");var n=e.length,r=!1,o=0,a=0,i="";function s(){if(!r){var c=Pn.trim(e.slice(o,a)),f=c.indexOf(":");if(f!==-1){var p=Pn.trim(c.slice(0,f)),g=Pn.trim(c.slice(f+1));if(p){var h=t(o,i.length,p,g,c);h&&(i+=h+"; ")}}}o=a+1}for(;a<n;a++){var l=e[a];if(l==="/"&&e[a+1]==="*"){var d=e.indexOf("*/",a+2);if(d===-1)break;a=d+1,o=a+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||s():l===`
`&&s()}return Pn.trim(i)}var Zb=Xb,Dr=on,Jb=Zb;function Ic(e){return e==null}function eS(e){var t={};for(var n in e)t[n]=e[n];return t}function Ip(e){e=eS(e||{}),e.whiteList=e.whiteList||Dr.whiteList,e.onAttr=e.onAttr||Dr.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Dr.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Dr.safeAttrValue,this.options=e}Ip.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,o=n.onAttr,a=n.onIgnoreAttr,i=n.safeAttrValue,s=Jb(e,function(l,d,c,f,p){var g=r[c],h=!1;if(g===!0?h=g:typeof g=="function"?h=g(f):g instanceof RegExp&&(h=g.test(f)),h!==!0&&(h=!1),f=i(c,f),!!f){var m={position:d,sourcePosition:l,source:p,isWhite:h};if(h){var v=o(c,f,m);return Ic(v)?c+":"+f:v}else{var v=a(c,f,m);if(!Ic(v))return v}}});return s};var tS=Ip;(function(e,t){var n=on,r=tS;function o(i,s){var l=new r(s);return l.process(i)}t=e.exports=o,t.FilterCSS=r;for(var a in n)t[a]=n[a];typeof window<"u"&&(window.filterCSS=e.exports)})(pr,pr.exports);var Fl={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,n=t.exec(e);return n?n.index:-1}},nS=pr.exports.FilterCSS,rS=pr.exports.getDefaultWhiteList,_a=Fl;function Np(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Rp=new nS;function oS(e,t,n){}function aS(e,t,n){}function iS(e,t,n){}function sS(e,t,n){}function Ap(e){return e.replace(cS,"&lt;").replace(dS,"&gt;")}function lS(e,t,n,r){if(n=Mp(n),t==="href"||t==="src"){if(n=_a.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(t==="background"){if(Pr.lastIndex=0,Pr.test(n))return""}else if(t==="style"){if(Nc.lastIndex=0,Nc.test(n)||(Rc.lastIndex=0,Rc.test(n)&&(Pr.lastIndex=0,Pr.test(n))))return"";r!==!1&&(r=r||Rp,n=r.process(n))}return n=Vp(n),n}var cS=/</g,dS=/>/g,uS=/"/g,fS=/&quot;/g,pS=/&#([a-zA-Z0-9]*);?/gim,hS=/&colon;?/gim,mS=/&newline;?/gim,Pr=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Nc=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Rc=/u\s*r\s*l\s*\(.*/gi;function kp(e){return e.replace(uS,"&quot;")}function Lp(e){return e.replace(fS,'"')}function qp(e){return e.replace(pS,function(n,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function Dp(e){return e.replace(hS,":").replace(mS," ")}function Pp(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return _a.trim(t)}function Mp(e){return e=Lp(e),e=qp(e),e=Dp(e),e=Pp(e),e}function Vp(e){return e=kp(e),e=Ap(e),e}function gS(){return""}function yS(e,t){typeof t!="function"&&(t=function(){});var n=!Array.isArray(e);function r(i){return n?!0:_a.indexOf(e,i)!==-1}var o=[],a=!1;return{onIgnoreTag:function(i,s,l){if(r(i))if(l.isClosing){var d="[/removed]",c=l.position+d.length;return o.push([a!==!1?a:l.position,c]),a=!1,d}else return a||(a=l.position),"[removed]";else return t(i,s,l)},remove:function(i){var s="",l=0;return _a.forEach(o,function(d){s+=i.slice(l,d[0]),l=d[1]}),s+=i.slice(l),s}}}function vS(e){for(var t="",n=0;n<e.length;){var r=e.indexOf("<!--",n);if(r===-1){t+=e.slice(n);break}t+=e.slice(n,r);var o=e.indexOf("-->",r);if(o===-1)break;n=o+3}return t}function bS(e){var t=e.split("");return t=t.filter(function(n){var r=n.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}Se.whiteList=Np();Se.getDefaultWhiteList=Np;Se.onTag=oS;Se.onIgnoreTag=aS;Se.onTagAttr=iS;Se.onIgnoreTagAttr=sS;Se.safeAttrValue=lS;Se.escapeHtml=Ap;Se.escapeQuote=kp;Se.unescapeQuote=Lp;Se.escapeHtmlEntities=qp;Se.escapeDangerHtml5Entities=Dp;Se.clearNonPrintableCharacter=Pp;Se.friendlyAttrValue=Mp;Se.escapeAttrValue=Vp;Se.onIgnoreTagStripAll=gS;Se.StripTagBody=yS;Se.stripCommentTag=vS;Se.stripBlankChar=bS;Se.cssFilter=Rp;Se.getDefaultCSSWhiteList=rS;var Ya={},Ot=Fl;function SS(e){var t=Ot.spaceIndex(e),n;return t===-1?n=e.slice(1,-1):n=e.slice(1,t+1),n=Ot.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function wS(e){return e.slice(0,2)==="</"}function CS(e,t,n){var r="",o=0,a=!1,i=!1,s=0,l=e.length,d="",c="";e:for(s=0;s<l;s++){var f=e.charAt(s);if(a===!1){if(f==="<"){a=s;continue}}else if(i===!1){if(f==="<"){r+=n(e.slice(o,s)),a=s,o=s;continue}if(f===">"||s===l-1){r+=n(e.slice(o,a)),c=e.slice(a,s+1),d=SS(c),r+=t(a,r.length,d,c,wS(c)),o=s+1,a=!1;continue}if(f==='"'||f==="'")for(var p=1,g=e.charAt(s-p);g.trim()===""||g==="=";){if(g==="="){i=f;continue e}g=e.charAt(s-++p)}}else if(f===i){i=!1;continue}}return o<l&&(r+=n(e.substr(o))),r}var _S=/[^a-zA-Z0-9\\_:.-]/gim;function ES(e,t){var n=0,r=0,o=[],a=!1,i=e.length;function s(p,g){if(p=Ot.trim(p),p=p.replace(_S,"").toLowerCase(),!(p.length<1)){var h=t(p,g||"");h&&o.push(h)}}for(var l=0;l<i;l++){var d=e.charAt(l),c,f;if(a===!1&&d==="="){a=e.slice(n,l),n=l+1,r=e.charAt(n)==='"'||e.charAt(n)==="'"?n:TS(e,l+1);continue}if(a!==!1&&l===r){if(f=e.indexOf(d,l+1),f===-1)break;c=Ot.trim(e.slice(r+1,f)),s(a,c),a=!1,l=f,n=l+1;continue}if(/\s|\n|\t/.test(d))if(e=e.replace(/\s|\n|\t/g," "),a===!1)if(f=xS(e,l),f===-1){c=Ot.trim(e.slice(n,l)),s(c),a=!1,n=l+1;continue}else{l=f-1;continue}else if(f=OS(e,l-1),f===-1){c=Ot.trim(e.slice(n,l)),c=Ac(c),s(a,c),a=!1,n=l+1;continue}else continue}return n<e.length&&(a===!1?s(e.slice(n)):s(a,Ac(Ot.trim(e.slice(n))))),Ot.trim(o.join(" "))}function xS(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="="?t:-1}}function TS(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="'"||n==='"'?t:-1}}function OS(e,t){for(;t>0;t--){var n=e[t];if(n!==" ")return n==="="?t:-1}}function IS(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function Ac(e){return IS(e)?e.substr(1,e.length-2):e}Ya.parseTag=CS;Ya.parseAttr=ES;var NS=pr.exports.FilterCSS,Qe=Se,Bp=Ya,RS=Bp.parseTag,AS=Bp.parseAttr,eo=Fl;function Mr(e){return e==null}function kS(e){var t=eo.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=eo.trim(e.slice(t+1,-1));var n=e[e.length-1]==="/";return n&&(e=eo.trim(e.slice(0,-1))),{html:e,closing:n}}function LS(e){var t={};for(var n in e)t[n]=e[n];return t}function qS(e){var t={};for(var n in e)Array.isArray(e[n])?t[n.toLowerCase()]=e[n].map(function(r){return r.toLowerCase()}):t[n.toLowerCase()]=e[n];return t}function Fp(e){e=LS(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Qe.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=qS(e.whiteList||e.allowList):e.whiteList=Qe.whiteList,e.onTag=e.onTag||Qe.onTag,e.onTagAttr=e.onTagAttr||Qe.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Qe.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Qe.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Qe.safeAttrValue,e.escapeHtml=e.escapeHtml||Qe.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new NS(e.css))}Fp.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,o=n.onTag,a=n.onIgnoreTag,i=n.onTagAttr,s=n.onIgnoreTagAttr,l=n.safeAttrValue,d=n.escapeHtml,c=t.cssFilter;n.stripBlankChar&&(e=Qe.stripBlankChar(e)),n.allowCommentTag||(e=Qe.stripCommentTag(e));var f=!1;n.stripIgnoreTagBody&&(f=Qe.StripTagBody(n.stripIgnoreTagBody,a),a=f.onIgnoreTag);var p=RS(e,function(g,h,m,v,S){var _={sourcePosition:g,position:h,isClosing:S,isWhite:Object.prototype.hasOwnProperty.call(r,m)},b=o(m,v,_);if(!Mr(b))return b;if(_.isWhite){if(_.isClosing)return"</"+m+">";var y=kS(v),w=r[m],C=AS(y.html,function(x,T){var N=eo.indexOf(w,x)!==-1,k=i(m,x,T,N);return Mr(k)?N?(T=l(m,x,T,c),T?x+'="'+T+'"':x):(k=s(m,x,T,N),Mr(k)?void 0:k):k});return v="<"+m,C&&(v+=" "+C),y.closing&&(v+=" /"),v+=">",v}else return b=a(m,v,_),Mr(b)?d(v):b},d);return f&&(p=f.remove(p)),p};var DS=Fp;(function(e,t){var n=Se,r=Ya,o=DS;function a(s,l){var d=new o(l);return d.process(s)}t=e.exports=a,t.filterXSS=a,t.FilterXSS=o,function(){for(var s in n)t[s]=n[s];for(var l in r)t[l]=r[l]}(),typeof window<"u"&&(window.filterXSS=e.exports);function i(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}i()&&(self.filterXSS=e.exports)})(Us,Us.exports);const $p=Us.exports,Hp={whiteList:{a:["target","href","title","ref"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],body:[],br:[],button:["class"],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:["class"],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],g:[],h1:["toc"],h2:["toc"],h3:["toc"],h4:["toc"],h5:["toc"],h6:["toc"],head:[],header:[],hr:[],html:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:["class"],mark:[],nav:[],noscript:[],ol:["class"],p:[],pre:[],s:[],section:[],small:[],span:["data-widgetparams","class","id"],sub:[],summary:[],sup:[],strong:[],svg:[],table:["width","border","align","valign","class"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign","class"],thead:["class","align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:["class"],video:["autoplay","controls","loop","preload","src","height","width"]},stripIgnoreTagBody:!0,allowCommentTag:!1,css:!1,onIgnoreTag:function(e,t,n){if(e==="!doctype")return t},safeAttrValue:function(e,t,n){return e==="img"&&t==="src"?n&&(n.startsWith("data:image/")||n.startsWith("http"))?n:"":n}};function to(e){let t="pill-xl ";const{align:n="",highlight:r=""}=e,o=n.toLowerCase();o==="left"&&(t+="floatLeft "),o==="right"&&(t+="floatright ");const a=r==="true"?"secondary":"light-secondary";return o==="center"?u("div",{className:"bootstrap-4-backport",style:{textAlign:"center"},children:u(be,{href:e.url,className:t,variant:a,children:e.text})}):u("span",{className:"bootstrap-4-backport",children:u(be,{href:e.url,className:t,variant:a,children:e.text})})}try{to.displayName="MarkdownButton",to.__docgenInfo={description:"",displayName:"MarkdownButton",props:{align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"string"}},highlight:{defaultValue:null,description:"",name:"highlight",required:!1,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownButton.tsx#MarkdownButton"]={docgenInfo:to.__docgenInfo,name:"MarkdownButton",path:"src/lib/containers/markdown/widget/MarkdownButton.tsx#MarkdownButton"})}catch{}async function PS(e,t,n){const r=new Set;try{let o=await xn(n,e,t);for(;Pb(o);){if(r.has(o.id))throw new Error("Link forms a cycle.");r.add(o.id),o=await xn(n,o.linksTo.targetId,o.linksTo.targetVersionNumber)}return o}catch(o){throw new Error(`${e} could not be resolved.
${o.message}`)}}function MS(e,t,n){const{accessToken:r}=ae();return Rn(["resolveLinkEntity",e,t],()=>PS(e,t,r),n)}function VS(e,t,n,r){t.requestedFiles.length!==1&&console.warn("useGetPresignedUrlContent only supports one file at a time");const{accessToken:o}=ae();return Rn(["presignedUrlContent",e,t],async()=>{const i=await en(t,o);return await zf(e,i.requestedFiles[0].preSignedURL,n)},{staleTime:1/0,...r})}function BS(e,t,n){const{accessToken:r}=ae();return Rn(["team",e,"member",t],()=>zg(e,t,r),n)}function FS(e){const t=window.open("","");t==null||t.document.write(e),t==null||t.document.close()}function no(e){const{rawHtml:t}=e,[n,r]=E.exports.useState(!1);return I(z,{children:[u(cv,{title:"Open Untrusted Content in New Window?",modalBody:'Click "OK" to leave this page and open this content in a new window; this enables additional functionality, but should only be done if you trust the content.',show:n,confirmButtonText:"OK",confirmButtonVariant:"sds-primary",onConfirm:()=>{FS(t),r(!1)},onCancel:()=>r(!1)}),I(tn,{variant:"info",dismissible:!1,show:!0,transition:!1,children:["Limited rendering only."," ",u("a",{onClick:()=>r(!0),children:"External view available."})]})]})}try{no.displayName="SanitizedWarning",no.__docgenInfo={description:"",displayName:"SanitizedWarning",props:{rawHtml:{defaultValue:null,description:"",name:"rawHtml",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FilePreview/HtmlPreview/SanitizedWarning.tsx#SanitizedWarning"]={docgenInfo:no.__docgenInfo,name:"SanitizedWarning",path:"src/lib/containers/FilePreview/HtmlPreview/SanitizedWarning.tsx#SanitizedWarning"})}catch{}function $S(e){const{rawHtml:t,isLoading:n,isTrusted:r}=e;return E.exports.useMemo(()=>{if(!n)return r?t:$p(t,Hp)},[n,r,t])}function ro(e){const{createdByUserId:t,rawHtml:n}=e,{data:r,isLoading:o}=BS(Ug,t),i=$S({rawHtml:n,isLoading:o,isTrusted:!!r});return o?u(Ha,{}):I(z,{children:[n!==i&&u(no,{rawHtml:n}),u("iframe",{srcDoc:i,style:{border:0,width:"100%"}})]})}try{ro.displayName="HtmlPreview",ro.__docgenInfo={description:"Renders raw HTML. Uses file handle data to determine if the content should be sanitized.",displayName:"HtmlPreview",props:{createdByUserId:{defaultValue:null,description:"",name:"createdByUserId",required:!0,type:{name:"string"}},rawHtml:{defaultValue:null,description:"",name:"rawHtml",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FilePreview/HtmlPreview/HtmlPreview.tsx#HtmlPreview"]={docgenInfo:ro.__docgenInfo,name:"HtmlPreview",path:"src/lib/containers/FilePreview/HtmlPreview/HtmlPreview.tsx#HtmlPreview"})}catch{}var ve=(e=>(e.PLAINTEXT="PLAINTEXT",e.CODE="CODE",e.ZIP="ZIP",e.CSV="CSV",e.IMAGE="IMAGE",e.NONE="NONE",e.TAB="TAB",e.HTML="HTML",e.PDF="PDF",e.IPYNB="IPYNB",e.VIDEO="VIDEO",e.MARKDOWN="MARKDOWN",e.TIFF="TIFF",e))(ve||{});const HS=10*Yg;function Gn(e){const{fileHandle:t,fileHandleAssociation:n,previewType:r}=e,o={requestedFiles:[n],includePreSignedURLs:!0,includeFileHandles:!1,includePreviewPreSignedURLs:!1},{data:a,isLoading:i}=VS(t,o,HS,{useErrorBoundary:!0});return i?u(Ha,{}):r===ve.HTML?u(ro,{rawHtml:a,createdByUserId:t.createdBy}):(r!==ve.NONE&&console.warn(`Rendering a preview of type ${r} is not supported in Portals`),u(z,{}))}try{Gn.displayName="FileHandleContentRenderer",Gn.__docgenInfo={description:"Fetches the content for and renders the contents of a file handle.",displayName:"FileHandleContentRenderer",props:{fileHandle:{defaultValue:null,description:"The file handle whose contents should be downloaded and rendered",name:"fileHandle",required:!0,type:{name:"FileHandle"}},fileHandleAssociation:{defaultValue:null,description:"The association between the file handle and an object which will give the user permission to access the file data",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},previewType:{defaultValue:null,description:"Informs how to render the file data",name:"previewType",required:!0,type:{name:"enum",value:[{value:'"PLAINTEXT"'},{value:'"CODE"'},{value:'"ZIP"'},{value:'"CSV"'},{value:'"IMAGE"'},{value:'"NONE"'},{value:'"TAB"'},{value:'"HTML"'},{value:'"PDF"'},{value:'"IPYNB"'},{value:'"VIDEO"'},{value:'"MARKDOWN"'},{value:'"TIFF"'}]}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FilePreview/FileHandleContentRenderer.tsx#FileHandleContentRenderer"]={docgenInfo:Gn.__docgenInfo,name:"FileHandleContentRenderer",path:"src/lib/containers/FilePreview/FileHandleContentRenderer.tsx#FileHandleContentRenderer"})}catch{}const zp=["image/bmp","image/pjpeg","image/jpeg","image/jpg","image/jpe","image/gif","image/png","image/svg+xml"],zS=[".mp4",".m4a",".m4p",".m4b",".m4r",".m4v"],US=[".ogv",".ogg"],YS=[...zS,...US,".webm"],jS=[".cwl",".wdl",".json",".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx"],WS=[".md",".markdown",".rmd"];function GS(e){const t=e.lastIndexOf(".");return t===-1?null:e.substring(t)}function KS(e){if(!Bl(e))return ve.NONE;const t=GS(e.fileName);return t&&YS.includes(t)?ve.VIDEO:t===".ipynb"?ve.IPYNB:zp.includes(e.contentType)?ve.IMAGE:e.contentType==="text/html"?ve.HTML:e.contentType.toLowerCase().startsWith("application/pdf")?ve.PDF:t&&jS.includes(t)?ve.CODE:t&&WS.includes(t)?ve.MARKDOWN:e.contentType==="image/tiff"?ve.TIFF:ve.NONE}function QS(e,t){const n=e.contentType;return Bl(e)?zp.includes(e.contentType)?ve.IMAGE:n.toLowerCase().startsWith("text/")?n.toLowerCase()==="text/csv"?t.contentType==="application/zip"?ve.ZIP:ve.CSV:n.toLowerCase()==="text/tab-separated-values"?ve.TAB:ve.PLAINTEXT:n.toLowerCase().startsWith("application/pdf")?ve.PDF:ve.NONE:ve.NONE}function oo(e){const{bundle:t}=e,{accessToken:n}=ae(),r=!!n;if(!Cl(t.entity))throw new Error(`Entity ${t.entity.id} is not a FileEntity`);const o=t.entity.dataFileHandleId,a=t.fileHandles.find(s=>s.id===o);if(!a&&!r)return u(tn,{dismissible:!1,show:!0,variant:"danger",transition:!1,children:u(jg,{})});if(a){const s=KS(a);if(s!==ve.NONE)return u(Gn,{fileHandle:a,fileHandleAssociation:{fileHandleId:o,associateObjectId:t.entity.id,associateObjectType:Ne.FileEntity},previewType:s})}const i=t.fileHandles.find(s=>Bl(s)&&s.isPreview);if(i&&a){const s=QS(i,a);if(s!==ve.NONE)return u(Gn,{fileHandle:i,fileHandleAssociation:{fileHandleId:i.id,associateObjectId:t.entity.id,associateObjectType:Ne.FileEntity},previewType:s})}throw new Error(`Could not render a preview for entity: ${t.entity.id}`)}try{oo.displayName="FileEntityPreview",oo.__docgenInfo={description:`Given an entity bundle that contains a FileEntity, render a preview of the file. The rendered preview will be determined based on the
content type and file name of the file handle(s) associated with the FileEntity.`,displayName:"FileEntityPreview",props:{bundle:{defaultValue:null,description:"An entity bundle containing a FileEntity, and its fileHandles",name:"bundle",required:!0,type:{name:"EntityBundle<{ readonly includeEntity: true; readonly includeEntityPath: true; readonly includeAnnotations: true; readonly includePermissions: true; readonly includeHasChildren: true; readonly includeAccessControlList: true; ... 7 more ...; readonly includeRestrictionInformation: true; }>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FilePreview/FileEntityPreview.tsx#FileEntityPreview"]={docgenInfo:oo.__docgenInfo,name:"FileEntityPreview",path:"src/lib/containers/FilePreview/FileEntityPreview.tsx#FileEntityPreview"})}catch{}function ao(e){let{entityId:t,versionNumber:n}=e;const{data:r,isLoading:o}=MS(t,n),a=r&&Cl(r),{data:i,isLoading:s}=Tp(r==null?void 0:r.id,r==null?void 0:r.versionNumber,$f,{enabled:!!a,useErrorBoundary:!0});if(o||s)return u(Ha,{});if(a)return u(oo,{bundle:i});throw new Error(`${t} is not a File and cannot be previewed.`)}try{ao.displayName="EntityPreview",ao.__docgenInfo={description:"Returns a preview of an entity. Currently only works for FileEntities, and Links that resolve to FileEntities.",displayName:"EntityPreview",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FilePreview/EntityPreview.tsx#EntityPreview"]={docgenInfo:ao.__docgenInfo,name:"EntityPreview",path:"src/lib/containers/FilePreview/EntityPreview.tsx#EntityPreview"})}catch{}function io(e){var a;const t=Oy(e.entityId);if(t==null)throw new Error(`${e.entityId} is not a valid Synapse ID`);const n=parseInt((a=e.versionNumber)!=null?a:""),r=t.targetId,o=Number.isNaN(n)?t.targetVersionNumber:n;return u(ao,{entityId:r,versionNumber:o})}try{io.displayName="MarkdownEntityPreview",io.__docgenInfo={description:"",displayName:"MarkdownEntityPreview",props:{entityId:{defaultValue:null,description:'A Synapse Entity ID that may optionally contain a "dot" version, e.g. syn123 or syn123.2',name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"An optional Entity version number.",name:"versionNumber",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownEntityPreview.tsx#MarkdownEntityPreview"]={docgenInfo:io.__docgenInfo,name:"MarkdownEntityPreview",path:"src/lib/containers/markdown/widget/MarkdownEntityPreview.tsx#MarkdownEntityPreview"})}catch{}function XS(e){if(Array.isArray(e))return e}function ZS(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,a=!1,i,s;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));o=!0);}catch(l){a=!0,s=l}finally{try{!o&&n.return!=null&&n.return()}finally{if(a)throw s}}return r}}function Ys(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Up(e,t){if(!!e){if(typeof e=="string")return Ys(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ys(e,t)}}function JS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ew(e,t){return XS(e)||ZS(e,t)||Up(e,t)||JS()}function tw(e){if(Array.isArray(e))return Ys(e)}function nw(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rw(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ut(e){return tw(e)||nw(e)||Up(e)||rw()}function ow(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.boundaryCount,n=t===void 0?1:t,r=e.componentName,o=r===void 0?"usePagination":r,a=e.count,i=a===void 0?1:a,s=e.defaultPage,l=s===void 0?1:s,d=e.disabled,c=d===void 0?!1:d,f=e.hideNextButton,p=f===void 0?!1:f,g=e.hidePrevButton,h=g===void 0?!1:g,m=e.onChange,v=e.page,S=e.showFirstButton,_=S===void 0?!1:S,b=e.showLastButton,y=b===void 0?!1:b,w=e.siblingCount,C=w===void 0?1:w,x=Ll(e,["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"]),T=By({controlled:v,default:l,name:o,state:"page"}),N=ew(T,2),k=N[0],q=N[1],M=function(j,D){v||q(D),m&&m(j,D)},V=function(j,D){var L=D-j+1;return Array.from({length:L},function(F,Y){return j+Y})},O=V(1,Math.min(n,i)),A=V(Math.max(i-n+1,n+1),i),R=Math.max(Math.min(k-C,i-n-C*2-1),n+2),P=Math.min(Math.max(k+C,n+C*2+2),A[0]-2),$=[].concat(ut(_?["first"]:[]),ut(h?[]:["previous"]),ut(O),ut(R>n+2?["start-ellipsis"]:n+1<i-n?[n+1]:[]),ut(V(R,P)),ut(P<i-n-1?["end-ellipsis"]:i-n>n?[i-n]:[]),ut(A),ut(p?[]:["next"]),ut(y?["last"]:[])),H=function(j){switch(j){case"first":return 1;case"previous":return k-1;case"next":return k+1;case"last":return i;default:return null}},B=$.map(function(U){return typeof U=="number"?{onClick:function(D){M(D,U)},type:"page",page:U,selected:U===k,disabled:c,"aria-current":U===k?"true":void 0}:{onClick:function(D){M(D,H(U))},type:U,page:H(U),selected:!1,disabled:c||U.indexOf("ellipsis")===-1&&(U==="next"||U==="last"?k>=i:k<=1)}});return wa({items:B},x)}const kc=rn(u("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"})),Lc=rn(u("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"})),qc=rn(u("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),Dc=rn(u("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}));var aw=function(t){return{root:wa({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:t.palette.text.primary}),page:{transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:t.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&$focusVisible":{backgroundColor:t.palette.action.focus},"&$selected":{backgroundColor:t.palette.action.selected,"&:hover, &$focusVisible":{backgroundColor:Bt(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.palette.action.selected}},"&$disabled":{opacity:1,color:t.palette.action.disabled,backgroundColor:t.palette.action.selected}},"&$disabled":{opacity:t.palette.action.disabledOpacity}},sizeSmall:{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px","& $icon":{fontSize:t.typography.pxToRem(18)}},sizeLarge:{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15),"& $icon":{fontSize:t.typography.pxToRem(22)}},textPrimary:{"&$selected":{color:t.palette.primary.contrastText,backgroundColor:t.palette.primary.main,"&:hover, &$focusVisible":{backgroundColor:t.palette.primary.dark,"@media (hover: none)":{backgroundColor:t.palette.primary.main}},"&$disabled":{color:t.palette.action.disabled}}},textSecondary:{"&$selected":{color:t.palette.secondary.contrastText,backgroundColor:t.palette.secondary.main,"&:hover, &$focusVisible":{backgroundColor:t.palette.secondary.dark,"@media (hover: none)":{backgroundColor:t.palette.secondary.main}},"&$disabled":{color:t.palette.action.disabled}}},outlined:{border:"1px solid ".concat(t.palette.type==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$selected":{"&$disabled":{border:"1px solid ".concat(t.palette.action.disabledBackground)}}},outlinedPrimary:{"&$selected":{color:t.palette.primary.main,border:"1px solid ".concat(Bt(t.palette.primary.main,.5)),backgroundColor:Bt(t.palette.primary.main,t.palette.action.activatedOpacity),"&:hover, &$focusVisible":{backgroundColor:Bt(t.palette.primary.main,t.palette.action.activatedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{color:t.palette.action.disabled}}},outlinedSecondary:{"&$selected":{color:t.palette.secondary.main,border:"1px solid ".concat(Bt(t.palette.secondary.main,.5)),backgroundColor:Bt(t.palette.secondary.main,t.palette.action.activatedOpacity),"&:hover, &$focusVisible":{backgroundColor:Bt(t.palette.secondary.main,t.palette.action.activatedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{color:t.palette.action.disabled}}},rounded:{borderRadius:t.shape.borderRadius},ellipsis:{height:"auto","&$disabled":{opacity:t.palette.action.disabledOpacity}},focusVisible:{},disabled:{},selected:{},icon:{fontSize:t.typography.pxToRem(20),margin:"0 -8px"}}},iw=E.exports.forwardRef(function(t,n){var r=t.classes,o=t.className,a=t.color,i=a===void 0?"standard":a,s=t.component,l=t.disabled,d=l===void 0?!1:l,c=t.page,f=t.selected,p=f===void 0?!1:f,g=t.shape,h=g===void 0?"round":g,m=t.size,v=m===void 0?"medium":m,S=t.type,_=S===void 0?"page":S,b=t.variant,y=b===void 0?"text":b,w=Ll(t,["classes","className","color","component","disabled","page","selected","shape","size","type","variant"]),C=_b(),x=C.direction==="rtl"?{previous:Dc,next:qc,last:kc,first:Lc}:{previous:qc,next:Dc,first:kc,last:Lc},T=x[_];return _==="start-ellipsis"||_==="end-ellipsis"?u("div",{ref:n,className:fr(r.root,r.ellipsis,d&&r.disabled,v!=="medium"&&r["size".concat(Jr(v))]),children:"\u2026"}):I(vb,{ref:n,component:s,disabled:d,focusVisibleClassName:r.focusVisible,className:fr(r.root,r.page,r[y],r[h],o,i!=="standard"&&r["".concat(y).concat(Jr(i))],d&&r.disabled,p&&r.selected,v!=="medium"&&r["size".concat(Jr(v))]),...w,children:[_==="page"&&c,T?u(T,{className:r.icon}):null]})});const sw=Pl(aw,{name:"MuiPaginationItem"})(iw);var lw={root:{},ul:{display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}};function cw(e,t,n){return e==="page"?"".concat(n?"":"Go to ","page ").concat(t):"Go to ".concat(e," page")}var dw=E.exports.forwardRef(function(t,n){t.boundaryCount;var r=t.classes,o=t.className,a=t.color,i=a===void 0?"standard":a;t.count,t.defaultPage,t.disabled;var s=t.getItemAriaLabel,l=s===void 0?cw:s;t.hideNextButton,t.hidePrevButton,t.onChange,t.page;var d=t.renderItem,c=d===void 0?function(y){return u(sw,{...y})}:d,f=t.shape,p=f===void 0?"round":f;t.showFirstButton,t.showLastButton,t.siblingCount;var g=t.size,h=g===void 0?"medium":g,m=t.variant,v=m===void 0?"text":m,S=Ll(t,["boundaryCount","classes","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"]),_=ow(wa({},t,{componentName:"Pagination"})),b=_.items;return u("nav",{"aria-label":"pagination navigation",className:fr(r.root,o),ref:n,...S,children:u("ul",{className:r.ul,children:b.map(function(y,w){return u("li",{children:c(wa({},y,{color:i,"aria-label":l(y.type,y.page,y.selected),shape:p,size:h,variant:v}))},w)})})})});const uw=Pl(lw,{name:"MuiPagination"})(dw),so=({info:e})=>u(z,{children:e&&I("p",{className:"SubmissionInfoCard",children:[u("strong",{children:" Project Lead: "})," ",u("span",{children:e.projectLead})," ",u("br",{}),u("strong",{children:" Institution: "})," ",u("span",{children:e.institution})," ",u("br",{}),u("strong",{children:" Data Access Request Submitted By: "})," ",u(Xt,{ownerId:e.submittedBy,size:ur})," ",u("br",{}),I("strong",{children:[" ","Intended Data Use Statement (accepted on"," ",Al(xr(e.modifiedOn),"M/D/YYYY"),"):"]}),u("div",{children:e.intendedDataUseStatement}),e.accessorChanges&&e.accessorChanges.map(t=>I("div",{children:[u(Xt,{ownerId:t.userId,size:ur})," ",t.type]},`${t.userId}-${t.type}`))]})}),Kn=()=>I("p",{className:"SubmissionInfoCard",children:[u(kl,{numCols:1,numRows:4}),u(Hs,{variant:"rect",width:"100%",height:80})]});try{so.displayName="SubmissionInfoCard",so.__docgenInfo={description:"",displayName:"SubmissionInfoCard",props:{info:{defaultValue:null,description:"",name:"info",required:!0,type:{name:"SubmissionInfo"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReportSubmissionInfo.tsx#SubmissionInfoCard"]={docgenInfo:so.__docgenInfo,name:"SubmissionInfoCard",path:"src/lib/containers/IDUReportSubmissionInfo.tsx#SubmissionInfoCard"})}catch{}try{Kn.displayName="LoadingSubmissionInfoCard",Kn.__docgenInfo={description:"",displayName:"LoadingSubmissionInfoCard",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReportSubmissionInfo.tsx#LoadingSubmissionInfoCard"]={docgenInfo:Kn.__docgenInfo,name:"LoadingSubmissionInfoCard",path:"src/lib/containers/IDUReportSubmissionInfo.tsx#LoadingSubmissionInfoCard"})}catch{}const lo=e=>{var f;const{accessRequirementId:t}=e,{ref:n,inView:r}=qn(),{data:o,status:a,isLoading:i,hasNextPage:s,isFetchingNextPage:l,fetchNextPage:d}=zb(t,{useErrorBoundary:!0});E.exports.useEffect(()=>{a==="success"&&!l&&s&&d&&r&&d()},[a,s,l,d,r]);const c=(f=o==null?void 0:o.pages.flatMap(p=>p.results))!=null?f:[];return I(z,{children:[c.length>0&&I("div",{className:"IDUReport",children:[c.map(p=>I(ge.Fragment,{children:[u(so,{info:p}),u("hr",{})]},JSON.stringify(p))),u("div",{ref:n})]}),(i||l)&&I(z,{children:[u(Kn,{}),u(Kn,{})]})]})};try{lo.displayName="IDUReport",lo.__docgenInfo={description:"",displayName:"IDUReport",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReport.tsx#IDUReport"]={docgenInfo:lo.__docgenInfo,name:"IDUReport",path:"src/lib/containers/IDUReport.tsx#IDUReport"})}catch{}function co(e){const{accessRestrictionId:t}=e;return u(lo,{accessRequirementId:t})}try{co.displayName="MarkdownIDUReport",co.__docgenInfo={description:"",displayName:"MarkdownIDUReport",props:{accessRestrictionId:{defaultValue:null,description:"",name:"accessRestrictionId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownIDUReport.tsx#MarkdownIDUReport"]={docgenInfo:co.__docgenInfo,name:"MarkdownIDUReport",path:"src/lib/containers/markdown/widget/MarkdownIDUReport.tsx#MarkdownIDUReport"})}catch{}function fw(e){let t;const n=new Set,r=(d,c)=>{const f=typeof d=="function"?d(t):d;if(f!==t){const p=t;t=c?f:Object.assign({},t,f),n.forEach(g=>g(t,p))}},o=()=>t,a=(d,c=o,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=c(t);function g(){const h=c(t);if(!f(p,h)){const m=p;d(p=h,m)}}return n.add(g),()=>n.delete(g)},l={setState:r,getState:o,subscribe:(d,c,f)=>c||f?a(d,c,f):(n.add(d),()=>n.delete(d)),destroy:()=>n.clear()};return t=e(r,o,l),l}const pw=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Pc=pw?E.exports.useEffect:E.exports.useLayoutEffect;function hw(e){const t=typeof e=="function"?fw(e):e,n=(r=t.getState,o=Object.is)=>{const[,a]=E.exports.useReducer(v=>v+1,0),i=t.getState(),s=E.exports.useRef(i),l=E.exports.useRef(r),d=E.exports.useRef(o),c=E.exports.useRef(!1),f=E.exports.useRef();f.current===void 0&&(f.current=r(i));let p,g=!1;(s.current!==i||l.current!==r||d.current!==o||c.current)&&(p=r(i),g=!o(f.current,p)),Pc(()=>{g&&(f.current=p),s.current=i,l.current=r,d.current=o,c.current=!1});const h=E.exports.useRef(i);Pc(()=>{const v=()=>{try{const _=t.getState(),b=l.current(_);d.current(f.current,b)||(s.current=_,f.current=b,a())}catch{c.current=!0,a()}},S=t.subscribe(v);return t.getState()!==h.current&&v(),S},[]);const m=g?p:f.current;return E.exports.useDebugValue(m),m};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,t];return{next(){const o=r.length<=0;return{value:r.shift(),done:o}}}},n}function mw(){const e=E.exports.createContext(void 0);return{Provider:({initialStore:o,createStore:a,children:i})=>{const s=E.exports.useRef();return s.current||(o&&(console.warn("Provider initialStore is deprecated and will be removed in the next version."),a||(a=()=>o)),s.current=a()),E.exports.createElement(e.Provider,{value:s.current},i)},useStore:(o,a=Object.is)=>{const i=E.exports.useContext(e);if(!i)throw new Error("Seems like you have not used zustand provider as an ancestor.");return i(o,a)},useStoreApi:()=>{const o=E.exports.useContext(e);if(!o)throw new Error("Seems like you have not used zustand provider as an ancestor.");return E.exports.useMemo(()=>({getState:o.getState,setState:o.setState,subscribe:o.subscribe,destroy:o.destroy}),[o])}}}var gw={value:()=>{}};function ja(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new uo(n)}function uo(e){this._=e}function yw(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}uo.prototype=ja.prototype={constructor:uo,on:function(e,t){var n=this._,r=yw(e+"",n),o,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((o=(e=r[a]).type)&&(o=vw(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(o=(e=r[a]).type)n[o]=Mc(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Mc(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new uo(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,a;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,o=a.length;r<o;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};function vw(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Mc(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=gw,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var js="http://www.w3.org/1999/xhtml";const Vc={svg:"http://www.w3.org/2000/svg",xhtml:js,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Wa(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Vc.hasOwnProperty(t)?{space:Vc[t],local:e}:e}function bw(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===js&&t.documentElement.namespaceURI===js?t.createElement(e):t.createElementNS(n,e)}}function Sw(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Yp(e){var t=Wa(e);return(t.local?Sw:bw)(t)}function ww(){}function $l(e){return e==null?ww:function(){return this.querySelector(e)}}function Cw(e){typeof e!="function"&&(e=$l(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=new Array(i),l,d,c=0;c<i;++c)(l=a[c])&&(d=e.call(l,l.__data__,c,a))&&("__data__"in l&&(d.__data__=l.__data__),s[c]=d);return new $e(r,this._parents)}function _w(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ew(){return[]}function jp(e){return e==null?Ew:function(){return this.querySelectorAll(e)}}function xw(e){return function(){return _w(e.apply(this,arguments))}}function Tw(e){typeof e=="function"?e=xw(e):e=jp(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i=t[a],s=i.length,l,d=0;d<s;++d)(l=i[d])&&(r.push(e.call(l,l.__data__,d,i)),o.push(l));return new $e(r,o)}function Wp(e){return function(){return this.matches(e)}}function Gp(e){return function(t){return t.matches(e)}}var Ow=Array.prototype.find;function Iw(e){return function(){return Ow.call(this.children,e)}}function Nw(){return this.firstElementChild}function Rw(e){return this.select(e==null?Nw:Iw(typeof e=="function"?e:Gp(e)))}var Aw=Array.prototype.filter;function kw(){return Array.from(this.children)}function Lw(e){return function(){return Aw.call(this.children,e)}}function qw(e){return this.selectAll(e==null?kw:Lw(typeof e=="function"?e:Gp(e)))}function Dw(e){typeof e!="function"&&(e=Wp(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],l,d=0;d<i;++d)(l=a[d])&&e.call(l,l.__data__,d,a)&&s.push(l);return new $e(r,this._parents)}function Kp(e){return new Array(e.length)}function Pw(){return new $e(this._enter||this._groups.map(Kp),this._parents)}function Ea(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ea.prototype={constructor:Ea,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Mw(e){return function(){return e}}function Vw(e,t,n,r,o,a){for(var i=0,s,l=t.length,d=a.length;i<d;++i)(s=t[i])?(s.__data__=a[i],r[i]=s):n[i]=new Ea(e,a[i]);for(;i<l;++i)(s=t[i])&&(o[i]=s)}function Bw(e,t,n,r,o,a,i){var s,l,d=new Map,c=t.length,f=a.length,p=new Array(c),g;for(s=0;s<c;++s)(l=t[s])&&(p[s]=g=i.call(l,l.__data__,s,t)+"",d.has(g)?o[s]=l:d.set(g,l));for(s=0;s<f;++s)g=i.call(e,a[s],s,a)+"",(l=d.get(g))?(r[s]=l,l.__data__=a[s],d.delete(g)):n[s]=new Ea(e,a[s]);for(s=0;s<c;++s)(l=t[s])&&d.get(p[s])===l&&(o[s]=l)}function Fw(e){return e.__data__}function $w(e,t){if(!arguments.length)return Array.from(this,Fw);var n=t?Bw:Vw,r=this._parents,o=this._groups;typeof e!="function"&&(e=Mw(e));for(var a=o.length,i=new Array(a),s=new Array(a),l=new Array(a),d=0;d<a;++d){var c=r[d],f=o[d],p=f.length,g=Hw(e.call(c,c&&c.__data__,d,r)),h=g.length,m=s[d]=new Array(h),v=i[d]=new Array(h),S=l[d]=new Array(p);n(c,f,m,v,S,g,t);for(var _=0,b=0,y,w;_<h;++_)if(y=m[_]){for(_>=b&&(b=_+1);!(w=v[b])&&++b<h;);y._next=w||null}}return i=new $e(i,r),i._enter=s,i._exit=l,i}function Hw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zw(){return new $e(this._exit||this._groups.map(Kp),this._parents)}function Uw(e,t,n){var r=this.enter(),o=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?a.remove():n(a),r&&o?r.merge(o).order():o}function Yw(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),s=new Array(o),l=0;l<i;++l)for(var d=n[l],c=r[l],f=d.length,p=s[l]=new Array(f),g,h=0;h<f;++h)(g=d[h]||c[h])&&(p[h]=g);for(;l<o;++l)s[l]=n[l];return new $e(s,this._parents)}function jw(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,a=r[o],i;--o>=0;)(i=r[o])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function Ww(e){e||(e=Gw);function t(f,p){return f&&p?e(f.__data__,p.__data__):!f-!p}for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i=n[a],s=i.length,l=o[a]=new Array(s),d,c=0;c<s;++c)(d=i[c])&&(l[c]=d);l.sort(t)}return new $e(o,this._parents).order()}function Gw(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Kw(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Qw(){return Array.from(this)}function Xw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null}function Zw(){let e=0;for(const t of this)++e;return e}function Jw(){return!this.node()}function eC(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],a=0,i=o.length,s;a<i;++a)(s=o[a])&&e.call(s,s.__data__,a,o);return this}function tC(e){return function(){this.removeAttribute(e)}}function nC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rC(e,t){return function(){this.setAttribute(e,t)}}function oC(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function aC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function iC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function sC(e,t){var n=Wa(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?nC:tC:typeof t=="function"?n.local?iC:aC:n.local?oC:rC)(n,t))}function Qp(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function lC(e){return function(){this.style.removeProperty(e)}}function cC(e,t,n){return function(){this.style.setProperty(e,t,n)}}function dC(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function uC(e,t,n){return arguments.length>1?this.each((t==null?lC:typeof t=="function"?dC:cC)(e,t,n==null?"":n)):On(this.node(),e)}function On(e,t){return e.style.getPropertyValue(t)||Qp(e).getComputedStyle(e,null).getPropertyValue(t)}function fC(e){return function(){delete this[e]}}function pC(e,t){return function(){this[e]=t}}function hC(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function mC(e,t){return arguments.length>1?this.each((t==null?fC:typeof t=="function"?hC:pC)(e,t)):this.node()[e]}function Xp(e){return e.trim().split(/^|\s+/)}function Hl(e){return e.classList||new Zp(e)}function Zp(e){this._node=e,this._names=Xp(e.getAttribute("class")||"")}Zp.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Jp(e,t){for(var n=Hl(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function eh(e,t){for(var n=Hl(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function gC(e){return function(){Jp(this,e)}}function yC(e){return function(){eh(this,e)}}function vC(e,t){return function(){(t.apply(this,arguments)?Jp:eh)(this,e)}}function bC(e,t){var n=Xp(e+"");if(arguments.length<2){for(var r=Hl(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?vC:t?gC:yC)(n,t))}function SC(){this.textContent=""}function wC(e){return function(){this.textContent=e}}function CC(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function _C(e){return arguments.length?this.each(e==null?SC:(typeof e=="function"?CC:wC)(e)):this.node().textContent}function EC(){this.innerHTML=""}function xC(e){return function(){this.innerHTML=e}}function TC(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function OC(e){return arguments.length?this.each(e==null?EC:(typeof e=="function"?TC:xC)(e)):this.node().innerHTML}function IC(){this.nextSibling&&this.parentNode.appendChild(this)}function NC(){return this.each(IC)}function RC(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function AC(){return this.each(RC)}function kC(e){var t=typeof e=="function"?e:Yp(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function LC(){return null}function qC(e,t){var n=typeof e=="function"?e:Yp(e),r=t==null?LC:typeof t=="function"?t:$l(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function DC(){var e=this.parentNode;e&&e.removeChild(this)}function PC(){return this.each(DC)}function MC(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function VC(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function BC(e){return this.select(e?VC:MC)}function FC(e){return arguments.length?this.property("__data__",e):this.node().__data__}function $C(e){return function(t){e.call(this,t,this.__data__)}}function HC(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function zC(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,o=t.length,a;n<o;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function UC(e,t,n){return function(){var r=this.__on,o,a=$C(t);if(r){for(var i=0,s=r.length;i<s;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),o.value=t;return}}this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(o):this.__on=[o]}}function YC(e,t,n){var r=HC(e+""),o,a=r.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,d=s.length,c;l<d;++l)for(o=0,c=s[l];o<a;++o)if((i=r[o]).type===c.type&&i.name===c.name)return c.value}return}for(s=t?UC:zC,o=0;o<a;++o)this.each(s(r[o],t,n));return this}function th(e,t,n){var r=Qp(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function jC(e,t){return function(){return th(this,e,t)}}function WC(e,t){return function(){return th(this,e,t.apply(this,arguments))}}function GC(e,t){return this.each((typeof t=="function"?WC:jC)(e,t))}function*KC(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length,i;o<a;++o)(i=r[o])&&(yield i)}var nh=[null];function $e(e,t){this._groups=e,this._parents=t}function Or(){return new $e([[document.documentElement]],nh)}function QC(){return this}$e.prototype=Or.prototype={constructor:$e,select:Cw,selectAll:Tw,selectChild:Rw,selectChildren:qw,filter:Dw,data:$w,enter:Pw,exit:zw,join:Uw,merge:Yw,selection:QC,order:jw,sort:Ww,call:Kw,nodes:Qw,node:Xw,size:Zw,empty:Jw,each:eC,attr:sC,style:uC,property:mC,classed:bC,text:_C,html:OC,raise:NC,lower:AC,append:kC,insert:qC,remove:PC,clone:BC,datum:FC,on:YC,dispatch:GC,[Symbol.iterator]:KC};function Xe(e){return typeof e=="string"?new $e([[document.querySelector(e)]],[document.documentElement]):new $e([[e]],nh)}function XC(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ot(e,t){if(e=XC(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const ZC={passive:!1},hr={capture:!0,passive:!1};function oi(e){e.stopImmediatePropagation()}function yn(e){e.preventDefault(),e.stopImmediatePropagation()}function rh(e){var t=e.document.documentElement,n=Xe(e).on("dragstart.drag",yn,hr);"onselectstart"in t?n.on("selectstart.drag",yn,hr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function oh(e,t){var n=e.document.documentElement,r=Xe(e).on("dragstart.drag",null);t&&(r.on("click.drag",yn,hr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Vr=e=>()=>e;function Ws(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:a,x:i,y:s,dx:l,dy:d,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:c}})}Ws.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function JC(e){return!e.ctrlKey&&!e.button}function e_(){return this.parentNode}function t_(e,t){return t==null?{x:e.x,y:e.y}:t}function n_(){return navigator.maxTouchPoints||"ontouchstart"in this}function r_(){var e=JC,t=e_,n=t_,r=n_,o={},a=ja("start","drag","end"),i=0,s,l,d,c,f=0;function p(y){y.on("mousedown.drag",g).filter(r).on("touchstart.drag",v).on("touchmove.drag",S,ZC).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(y,w){if(!(c||!e.call(this,y,w))){var C=b(this,t.call(this,y,w),y,w,"mouse");!C||(Xe(y.view).on("mousemove.drag",h,hr).on("mouseup.drag",m,hr),rh(y.view),oi(y),d=!1,s=y.clientX,l=y.clientY,C("start",y))}}function h(y){if(yn(y),!d){var w=y.clientX-s,C=y.clientY-l;d=w*w+C*C>f}o.mouse("drag",y)}function m(y){Xe(y.view).on("mousemove.drag mouseup.drag",null),oh(y.view,d),yn(y),o.mouse("end",y)}function v(y,w){if(!!e.call(this,y,w)){var C=y.changedTouches,x=t.call(this,y,w),T=C.length,N,k;for(N=0;N<T;++N)(k=b(this,x,y,w,C[N].identifier,C[N]))&&(oi(y),k("start",y,C[N]))}}function S(y){var w=y.changedTouches,C=w.length,x,T;for(x=0;x<C;++x)(T=o[w[x].identifier])&&(yn(y),T("drag",y,w[x]))}function _(y){var w=y.changedTouches,C=w.length,x,T;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),x=0;x<C;++x)(T=o[w[x].identifier])&&(oi(y),T("end",y,w[x]))}function b(y,w,C,x,T,N){var k=a.copy(),q=ot(N||C,w),M,V,O;if((O=n.call(y,new Ws("beforestart",{sourceEvent:C,target:p,identifier:T,active:i,x:q[0],y:q[1],dx:0,dy:0,dispatch:k}),x))!=null)return M=O.x-q[0]||0,V=O.y-q[1]||0,function A(R,P,$){var H=q,B;switch(R){case"start":o[T]=A,B=i++;break;case"end":delete o[T],--i;case"drag":q=ot($||P,w),B=i;break}k.call(R,y,new Ws(R,{sourceEvent:P,subject:O,target:p,identifier:T,active:B,x:q[0]+M,y:q[1]+V,dx:q[0]-H[0],dy:q[1]-H[1],dispatch:k}),x)}}return p.filter=function(y){return arguments.length?(e=typeof y=="function"?y:Vr(!!y),p):e},p.container=function(y){return arguments.length?(t=typeof y=="function"?y:Vr(y),p):t},p.subject=function(y){return arguments.length?(n=typeof y=="function"?y:Vr(y),p):n},p.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:Vr(!!y),p):r},p.on=function(){var y=a.on.apply(a,arguments);return y===a?p:y},p.clickDistance=function(y){return arguments.length?(f=(y=+y)*y,p):Math.sqrt(f)},p}function zl(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ah(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ir(){}var mr=.7,xa=1/mr,vn="\\s*([+-]?\\d+)\\s*",gr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",it="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o_=/^#([0-9a-f]{3,8})$/,a_=new RegExp(`^rgb\\(${vn},${vn},${vn}\\)$`),i_=new RegExp(`^rgb\\(${it},${it},${it}\\)$`),s_=new RegExp(`^rgba\\(${vn},${vn},${vn},${gr}\\)$`),l_=new RegExp(`^rgba\\(${it},${it},${it},${gr}\\)$`),c_=new RegExp(`^hsl\\(${gr},${it},${it}\\)$`),d_=new RegExp(`^hsla\\(${gr},${it},${it},${gr}\\)$`),Bc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zl(Ir,yr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Fc,formatHex:Fc,formatHex8:u_,formatHsl:f_,formatRgb:$c,toString:$c});function Fc(){return this.rgb().formatHex()}function u_(){return this.rgb().formatHex8()}function f_(){return ih(this).formatHsl()}function $c(){return this.rgb().formatRgb()}function yr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=o_.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Hc(t):n===3?new qe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Br(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Br(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=a_.exec(e))?new qe(t[1],t[2],t[3],1):(t=i_.exec(e))?new qe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=s_.exec(e))?Br(t[1],t[2],t[3],t[4]):(t=l_.exec(e))?Br(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=c_.exec(e))?Yc(t[1],t[2]/100,t[3]/100,1):(t=d_.exec(e))?Yc(t[1],t[2]/100,t[3]/100,t[4]):Bc.hasOwnProperty(e)?Hc(Bc[e]):e==="transparent"?new qe(NaN,NaN,NaN,0):null}function Hc(e){return new qe(e>>16&255,e>>8&255,e&255,1)}function Br(e,t,n,r){return r<=0&&(e=t=n=NaN),new qe(e,t,n,r)}function p_(e){return e instanceof Ir||(e=yr(e)),e?(e=e.rgb(),new qe(e.r,e.g,e.b,e.opacity)):new qe}function Gs(e,t,n,r){return arguments.length===1?p_(e):new qe(e,t,n,r==null?1:r)}function qe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}zl(qe,Gs,ah(Ir,{brighter(e){return e=e==null?xa:Math.pow(xa,e),new qe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?mr:Math.pow(mr,e),new qe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new qe(Ut(this.r),Ut(this.g),Ut(this.b),Ta(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zc,formatHex:zc,formatHex8:h_,formatRgb:Uc,toString:Uc}));function zc(){return`#${$t(this.r)}${$t(this.g)}${$t(this.b)}`}function h_(){return`#${$t(this.r)}${$t(this.g)}${$t(this.b)}${$t((isNaN(this.opacity)?1:this.opacity)*255)}`}function Uc(){const e=Ta(this.opacity);return`${e===1?"rgb(":"rgba("}${Ut(this.r)}, ${Ut(this.g)}, ${Ut(this.b)}${e===1?")":`, ${e})`}`}function Ta(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ut(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function $t(e){return e=Ut(e),(e<16?"0":"")+e.toString(16)}function Yc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ze(e,t,n,r)}function ih(e){if(e instanceof Ze)return new Ze(e.h,e.s,e.l,e.opacity);if(e instanceof Ir||(e=yr(e)),!e)return new Ze;if(e instanceof Ze)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,s=a-o,l=(a+o)/2;return s?(t===a?i=(n-r)/s+(n<r)*6:n===a?i=(r-t)/s+2:i=(t-n)/s+4,s/=l<.5?a+o:2-a-o,i*=60):s=l>0&&l<1?0:i,new Ze(i,s,l,e.opacity)}function m_(e,t,n,r){return arguments.length===1?ih(e):new Ze(e,t,n,r==null?1:r)}function Ze(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}zl(Ze,m_,ah(Ir,{brighter(e){return e=e==null?xa:Math.pow(xa,e),new Ze(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?mr:Math.pow(mr,e),new Ze(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new qe(ai(e>=240?e-240:e+120,o,r),ai(e,o,r),ai(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Ze(jc(this.h),Fr(this.s),Fr(this.l),Ta(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ta(this.opacity);return`${e===1?"hsl(":"hsla("}${jc(this.h)}, ${Fr(this.s)*100}%, ${Fr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function jc(e){return e=(e||0)%360,e<0?e+360:e}function Fr(e){return Math.max(0,Math.min(1,e||0))}function ai(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const sh=e=>()=>e;function g_(e,t){return function(n){return e+n*t}}function y_(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function v_(e){return(e=+e)==1?lh:function(t,n){return n-t?y_(t,n,e):sh(isNaN(t)?n:t)}}function lh(e,t){var n=t-e;return n?g_(e,n):sh(isNaN(e)?t:e)}const Wc=function e(t){var n=v_(t);function r(o,a){var i=n((o=Gs(o)).r,(a=Gs(a)).r),s=n(o.g,a.g),l=n(o.b,a.b),d=lh(o.opacity,a.opacity);return function(c){return o.r=i(c),o.g=s(c),o.b=l(c),o.opacity=d(c),o+""}}return r.gamma=e,r}(1);function It(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ks=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ii=new RegExp(Ks.source,"g");function b_(e){return function(){return e}}function S_(e){return function(t){return e(t)+""}}function w_(e,t){var n=Ks.lastIndex=ii.lastIndex=0,r,o,a,i=-1,s=[],l=[];for(e=e+"",t=t+"";(r=Ks.exec(e))&&(o=ii.exec(t));)(a=o.index)>n&&(a=t.slice(n,a),s[i]?s[i]+=a:s[++i]=a),(r=r[0])===(o=o[0])?s[i]?s[i]+=o:s[++i]=o:(s[++i]=null,l.push({i,x:It(r,o)})),n=ii.lastIndex;return n<t.length&&(a=t.slice(n),s[i]?s[i]+=a:s[++i]=a),s.length<2?l[0]?S_(l[0].x):b_(t):(t=l.length,function(d){for(var c=0,f;c<t;++c)s[(f=l[c]).i]=f.x(d);return s.join("")})}var Gc=180/Math.PI,Qs={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ch(e,t,n,r,o,a){var i,s,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*Gc,skewX:Math.atan(l)*Gc,scaleX:i,scaleY:s}}var $r;function C_(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Qs:ch(t.a,t.b,t.c,t.d,t.e,t.f)}function __(e){return e==null||($r||($r=document.createElementNS("http://www.w3.org/2000/svg","g")),$r.setAttribute("transform",e),!(e=$r.transform.baseVal.consolidate()))?Qs:(e=e.matrix,ch(e.a,e.b,e.c,e.d,e.e,e.f))}function dh(e,t,n,r){function o(d){return d.length?d.pop()+" ":""}function a(d,c,f,p,g,h){if(d!==f||c!==p){var m=g.push("translate(",null,t,null,n);h.push({i:m-4,x:It(d,f)},{i:m-2,x:It(c,p)})}else(f||p)&&g.push("translate("+f+t+p+n)}function i(d,c,f,p){d!==c?(d-c>180?c+=360:c-d>180&&(d+=360),p.push({i:f.push(o(f)+"rotate(",null,r)-2,x:It(d,c)})):c&&f.push(o(f)+"rotate("+c+r)}function s(d,c,f,p){d!==c?p.push({i:f.push(o(f)+"skewX(",null,r)-2,x:It(d,c)}):c&&f.push(o(f)+"skewX("+c+r)}function l(d,c,f,p,g,h){if(d!==f||c!==p){var m=g.push(o(g)+"scale(",null,",",null,")");h.push({i:m-4,x:It(d,f)},{i:m-2,x:It(c,p)})}else(f!==1||p!==1)&&g.push(o(g)+"scale("+f+","+p+")")}return function(d,c){var f=[],p=[];return d=e(d),c=e(c),a(d.translateX,d.translateY,c.translateX,c.translateY,f,p),i(d.rotate,c.rotate,f,p),s(d.skewX,c.skewX,f,p),l(d.scaleX,d.scaleY,c.scaleX,c.scaleY,f,p),d=c=null,function(g){for(var h=-1,m=p.length,v;++h<m;)f[(v=p[h]).i]=v.x(g);return f.join("")}}}var E_=dh(C_,"px, ","px)","deg)"),x_=dh(__,", ",")",")"),T_=1e-12;function Kc(e){return((e=Math.exp(e))+1/e)/2}function O_(e){return((e=Math.exp(e))-1/e)/2}function I_(e){return((e=Math.exp(2*e))-1)/(e+1)}const N_=function e(t,n,r){function o(a,i){var s=a[0],l=a[1],d=a[2],c=i[0],f=i[1],p=i[2],g=c-s,h=f-l,m=g*g+h*h,v,S;if(m<T_)S=Math.log(p/d)/t,v=function(x){return[s+x*g,l+x*h,d*Math.exp(t*x*S)]};else{var _=Math.sqrt(m),b=(p*p-d*d+r*m)/(2*d*n*_),y=(p*p-d*d-r*m)/(2*p*n*_),w=Math.log(Math.sqrt(b*b+1)-b),C=Math.log(Math.sqrt(y*y+1)-y);S=(C-w)/t,v=function(x){var T=x*S,N=Kc(w),k=d/(n*_)*(N*I_(t*T+w)-O_(w));return[s+k*g,l+k*h,d*N/Kc(t*T+w)]}}return v.duration=S*1e3*t/Math.SQRT2,v}return o.rho=function(a){var i=Math.max(.001,+a),s=i*i,l=s*s;return e(i,s,l)},o}(Math.SQRT2,2,4);var In=0,Hn=0,Mn=0,uh=1e3,Oa,zn,Ia=0,Jt=0,Ga=0,vr=typeof performance=="object"&&performance.now?performance:Date,fh=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ul(){return Jt||(fh(R_),Jt=vr.now()+Ga)}function R_(){Jt=0}function Na(){this._call=this._time=this._next=null}Na.prototype=ph.prototype={constructor:Na,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ul():+n)+(t==null?0:+t),!this._next&&zn!==this&&(zn?zn._next=this:Oa=this,zn=this),this._call=e,this._time=n,Xs()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xs())}};function ph(e,t,n){var r=new Na;return r.restart(e,t,n),r}function A_(){Ul(),++In;for(var e=Oa,t;e;)(t=Jt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--In}function Qc(){Jt=(Ia=vr.now())+Ga,In=Hn=0;try{A_()}finally{In=0,L_(),Jt=0}}function k_(){var e=vr.now(),t=e-Ia;t>uh&&(Ga-=t,Ia=e)}function L_(){for(var e,t=Oa,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Oa=n);zn=e,Xs(r)}function Xs(e){if(!In){Hn&&(Hn=clearTimeout(Hn));var t=e-Jt;t>24?(e<1/0&&(Hn=setTimeout(Qc,e-vr.now()-Ga)),Mn&&(Mn=clearInterval(Mn))):(Mn||(Ia=vr.now(),Mn=setInterval(k_,uh)),In=1,fh(Qc))}}function Xc(e,t,n){var r=new Na;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var q_=ja("start","end","cancel","interrupt"),D_=[],hh=0,Zc=1,Zs=2,fo=3,Jc=4,Js=5,po=6;function Ka(e,t,n,r,o,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;P_(e,n,{name:t,index:r,group:o,on:q_,tween:D_,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:hh})}function Yl(e,t){var n=Je(e,t);if(n.state>hh)throw new Error("too late; already scheduled");return n}function lt(e,t){var n=Je(e,t);if(n.state>fo)throw new Error("too late; already running");return n}function Je(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function P_(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=ph(a,0,n.time);function a(d){n.state=Zc,n.timer.restart(i,n.delay,n.time),n.delay<=d&&i(d-n.delay)}function i(d){var c,f,p,g;if(n.state!==Zc)return l();for(c in r)if(g=r[c],g.name===n.name){if(g.state===fo)return Xc(i);g.state===Jc?(g.state=po,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[c]):+c<t&&(g.state=po,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[c])}if(Xc(function(){n.state===fo&&(n.state=Jc,n.timer.restart(s,n.delay,n.time),s(d))}),n.state=Zs,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Zs){for(n.state=fo,o=new Array(p=n.tween.length),c=0,f=-1;c<p;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++f]=g);o.length=f+1}}function s(d){for(var c=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(l),n.state=Js,1),f=-1,p=o.length;++f<p;)o[f].call(e,c);n.state===Js&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=po,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function ho(e,t){var n=e.__transition,r,o,a=!0,i;if(!!n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){a=!1;continue}o=r.state>Zs&&r.state<Js,r.state=po,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}a&&delete e.__transition}}function M_(e){return this.each(function(){ho(this,e)})}function V_(e,t){var n,r;return function(){var o=lt(this,e),a=o.tween;if(a!==n){r=n=a;for(var i=0,s=r.length;i<s;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function B_(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var a=lt(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var s={name:t,value:n},l=0,d=o.length;l<d;++l)if(o[l].name===t){o[l]=s;break}l===d&&o.push(s)}a.tween=o}}function F_(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Je(this.node(),n).tween,o=0,a=r.length,i;o<a;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?V_:B_)(n,e,t))}function jl(e,t,n){var r=e._id;return e.each(function(){var o=lt(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Je(o,r).value[t]}}function mh(e,t){var n;return(typeof t=="number"?It:t instanceof yr?Wc:(n=yr(t))?(t=n,Wc):w_)(e,t)}function $_(e){return function(){this.removeAttribute(e)}}function H_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function z_(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttribute(e);return i===o?null:i===r?a:a=t(r=i,n)}}function U_(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?a:a=t(r=i,n)}}function Y_(e,t,n){var r,o,a;return function(){var i,s=n(this),l;return s==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=s+"",i===l?null:i===r&&l===o?a:(o=l,a=t(r=i,s)))}}function j_(e,t,n){var r,o,a;return function(){var i,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=s+"",i===l?null:i===r&&l===o?a:(o=l,a=t(r=i,s)))}}function W_(e,t){var n=Wa(e),r=n==="transform"?x_:mh;return this.attrTween(e,typeof t=="function"?(n.local?j_:Y_)(n,r,jl(this,"attr."+e,t)):t==null?(n.local?H_:$_)(n):(n.local?U_:z_)(n,r,t))}function G_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function K_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Q_(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&K_(e,a)),n}return o._value=t,o}function X_(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&G_(e,a)),n}return o._value=t,o}function Z_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Wa(e);return this.tween(n,(r.local?Q_:X_)(r,t))}function J_(e,t){return function(){Yl(this,e).delay=+t.apply(this,arguments)}}function eE(e,t){return t=+t,function(){Yl(this,e).delay=t}}function tE(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?J_:eE)(t,e)):Je(this.node(),t).delay}function nE(e,t){return function(){lt(this,e).duration=+t.apply(this,arguments)}}function rE(e,t){return t=+t,function(){lt(this,e).duration=t}}function oE(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?nE:rE)(t,e)):Je(this.node(),t).duration}function aE(e,t){if(typeof t!="function")throw new Error;return function(){lt(this,e).ease=t}}function iE(e){var t=this._id;return arguments.length?this.each(aE(t,e)):Je(this.node(),t).ease}function sE(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;lt(this,e).ease=n}}function lE(e){if(typeof e!="function")throw new Error;return this.each(sE(this._id,e))}function cE(e){typeof e!="function"&&(e=Wp(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],l,d=0;d<i;++d)(l=a[d])&&e.call(l,l.__data__,d,a)&&s.push(l);return new wt(r,this._parents,this._name,this._id)}function dE(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),s=0;s<a;++s)for(var l=t[s],d=n[s],c=l.length,f=i[s]=new Array(c),p,g=0;g<c;++g)(p=l[g]||d[g])&&(f[g]=p);for(;s<r;++s)i[s]=t[s];return new wt(i,this._parents,this._name,this._id)}function uE(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function fE(e,t,n){var r,o,a=uE(t)?Yl:lt;return function(){var i=a(this,e),s=i.on;s!==r&&(o=(r=s).copy()).on(t,n),i.on=o}}function pE(e,t){var n=this._id;return arguments.length<2?Je(this.node(),n).on.on(e):this.each(fE(n,e,t))}function hE(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function mE(){return this.on("end.remove",hE(this._id))}function gE(e){var t=this._name,n=this._id;typeof e!="function"&&(e=$l(e));for(var r=this._groups,o=r.length,a=new Array(o),i=0;i<o;++i)for(var s=r[i],l=s.length,d=a[i]=new Array(l),c,f,p=0;p<l;++p)(c=s[p])&&(f=e.call(c,c.__data__,p,s))&&("__data__"in c&&(f.__data__=c.__data__),d[p]=f,Ka(d[p],t,n,p,d,Je(c,n)));return new wt(a,this._parents,t,n)}function yE(e){var t=this._name,n=this._id;typeof e!="function"&&(e=jp(e));for(var r=this._groups,o=r.length,a=[],i=[],s=0;s<o;++s)for(var l=r[s],d=l.length,c,f=0;f<d;++f)if(c=l[f]){for(var p=e.call(c,c.__data__,f,l),g,h=Je(c,n),m=0,v=p.length;m<v;++m)(g=p[m])&&Ka(g,t,n,m,p,h);a.push(p),i.push(c)}return new wt(a,i,t,n)}var vE=Or.prototype.constructor;function bE(){return new vE(this._groups,this._parents)}function SE(e,t){var n,r,o;return function(){var a=On(this,e),i=(this.style.removeProperty(e),On(this,e));return a===i?null:a===n&&i===r?o:o=t(n=a,r=i)}}function gh(e){return function(){this.style.removeProperty(e)}}function wE(e,t,n){var r,o=n+"",a;return function(){var i=On(this,e);return i===o?null:i===r?a:a=t(r=i,n)}}function CE(e,t,n){var r,o,a;return function(){var i=On(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),On(this,e))),i===l?null:i===r&&l===o?a:(o=l,a=t(r=i,s))}}function _E(e,t){var n,r,o,a="style."+t,i="end."+a,s;return function(){var l=lt(this,e),d=l.on,c=l.value[a]==null?s||(s=gh(t)):void 0;(d!==n||o!==c)&&(r=(n=d).copy()).on(i,o=c),l.on=r}}function EE(e,t,n){var r=(e+="")=="transform"?E_:mh;return t==null?this.styleTween(e,SE(e,r)).on("end.style."+e,gh(e)):typeof t=="function"?this.styleTween(e,CE(e,r,jl(this,"style."+e,t))).each(_E(this._id,e)):this.styleTween(e,wE(e,r,t),n).on("end.style."+e,null)}function xE(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function TE(e,t,n){var r,o;function a(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&xE(e,i,n)),r}return a._value=t,a}function OE(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,TE(e,t,n==null?"":n))}function IE(e){return function(){this.textContent=e}}function NE(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function RE(e){return this.tween("text",typeof e=="function"?NE(jl(this,"text",e)):IE(e==null?"":e+""))}function AE(e){return function(t){this.textContent=e.call(this,t)}}function kE(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&AE(o)),t}return r._value=e,r}function LE(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,kE(e))}function qE(){for(var e=this._name,t=this._id,n=yh(),r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,l,d=0;d<s;++d)if(l=i[d]){var c=Je(l,t);Ka(l,e,n,d,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new wt(r,this._parents,e,n)}function DE(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(a,i){var s={value:i},l={value:function(){--o===0&&a()}};n.each(function(){var d=lt(this,r),c=d.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),d.on=t}),o===0&&a()})}var PE=0;function wt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function yh(){return++PE}var ft=Or.prototype;wt.prototype={constructor:wt,select:gE,selectAll:yE,selectChild:ft.selectChild,selectChildren:ft.selectChildren,filter:cE,merge:dE,selection:bE,transition:qE,call:ft.call,nodes:ft.nodes,node:ft.node,size:ft.size,empty:ft.empty,each:ft.each,on:pE,attr:W_,attrTween:Z_,style:EE,styleTween:OE,text:RE,textTween:LE,remove:mE,tween:F_,delay:tE,duration:oE,ease:iE,easeVarying:lE,end:DE,[Symbol.iterator]:ft[Symbol.iterator]};function ME(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var VE={time:null,delay:0,duration:250,ease:ME};function BE(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function FE(e){var t,n;e instanceof wt?(t=e._id,e=e._name):(t=yh(),(n=VE).time=Ul(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,l,d=0;d<s;++d)(l=i[d])&&Ka(l,e,t,d,i,n||BE(l,t));return new wt(r,this._parents,e,t)}Or.prototype.interrupt=M_;Or.prototype.transition=FE;const Hr=e=>()=>e;function $E(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function gt(e,t,n){this.k=e,this.x=t,this.y=n}gt.prototype={constructor:gt,scale:function(e){return e===1?this:new gt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new gt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Yt=new gt(1,0,0);gt.prototype;function si(e){e.stopImmediatePropagation()}function Vn(e){e.preventDefault(),e.stopImmediatePropagation()}function HE(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function zE(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ed(){return this.__zoom||Yt}function UE(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function YE(){return navigator.maxTouchPoints||"ontouchstart"in this}function jE(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function WE(){var e=HE,t=zE,n=jE,r=UE,o=YE,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,l=N_,d=ja("start","zoom","end"),c,f,p,g=500,h=150,m=0,v=10;function S(O){O.property("__zoom",ed).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",k).filter(o).on("touchstart.zoom",q).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(O,A,R,P){var $=O.selection?O.selection():O;$.property("__zoom",ed),O!==$?w(O,A,R,P):$.interrupt().each(function(){C(this,arguments).event(P).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},S.scaleBy=function(O,A,R,P){S.scaleTo(O,function(){var $=this.__zoom.k,H=typeof A=="function"?A.apply(this,arguments):A;return $*H},R,P)},S.scaleTo=function(O,A,R,P){S.transform(O,function(){var $=t.apply(this,arguments),H=this.__zoom,B=R==null?y($):typeof R=="function"?R.apply(this,arguments):R,U=H.invert(B),j=typeof A=="function"?A.apply(this,arguments):A;return n(b(_(H,j),B,U),$,i)},R,P)},S.translateBy=function(O,A,R,P){S.transform(O,function(){return n(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof R=="function"?R.apply(this,arguments):R),t.apply(this,arguments),i)},null,P)},S.translateTo=function(O,A,R,P,$){S.transform(O,function(){var H=t.apply(this,arguments),B=this.__zoom,U=P==null?y(H):typeof P=="function"?P.apply(this,arguments):P;return n(Yt.translate(U[0],U[1]).scale(B.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof R=="function"?-R.apply(this,arguments):-R),H,i)},P,$)};function _(O,A){return A=Math.max(a[0],Math.min(a[1],A)),A===O.k?O:new gt(A,O.x,O.y)}function b(O,A,R){var P=A[0]-R[0]*O.k,$=A[1]-R[1]*O.k;return P===O.x&&$===O.y?O:new gt(O.k,P,$)}function y(O){return[(+O[0][0]+ +O[1][0])/2,(+O[0][1]+ +O[1][1])/2]}function w(O,A,R,P){O.on("start.zoom",function(){C(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(P).end()}).tween("zoom",function(){var $=this,H=arguments,B=C($,H).event(P),U=t.apply($,H),j=R==null?y(U):typeof R=="function"?R.apply($,H):R,D=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),L=$.__zoom,F=typeof A=="function"?A.apply($,H):A,Y=l(L.invert(j).concat(D/L.k),F.invert(j).concat(D/F.k));return function(K){if(K===1)K=F;else{var Z=Y(K),Q=D/Z[2];K=new gt(Q,j[0]-Z[0]*Q,j[1]-Z[1]*Q)}B.zoom(null,K)}})}function C(O,A,R){return!R&&O.__zooming||new x(O,A)}function x(O,A){this.that=O,this.args=A,this.active=0,this.sourceEvent=null,this.extent=t.apply(O,A),this.taps=0}x.prototype={event:function(O){return O&&(this.sourceEvent=O),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(O,A){return this.mouse&&O!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&O!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&O!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(O){var A=Xe(this.that).datum();d.call(O,this.that,new $E(O,{sourceEvent:this.sourceEvent,target:S,type:O,transform:this.that.__zoom,dispatch:d}),A)}};function T(O,...A){if(!e.apply(this,arguments))return;var R=C(this,A).event(O),P=this.__zoom,$=Math.max(a[0],Math.min(a[1],P.k*Math.pow(2,r.apply(this,arguments)))),H=ot(O);if(R.wheel)(R.mouse[0][0]!==H[0]||R.mouse[0][1]!==H[1])&&(R.mouse[1]=P.invert(R.mouse[0]=H)),clearTimeout(R.wheel);else{if(P.k===$)return;R.mouse=[H,P.invert(H)],ho(this),R.start()}Vn(O),R.wheel=setTimeout(B,h),R.zoom("mouse",n(b(_(P,$),R.mouse[0],R.mouse[1]),R.extent,i));function B(){R.wheel=null,R.end()}}function N(O,...A){if(p||!e.apply(this,arguments))return;var R=O.currentTarget,P=C(this,A,!0).event(O),$=Xe(O.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",D,!0),H=ot(O,R),B=O.clientX,U=O.clientY;rh(O.view),si(O),P.mouse=[H,this.__zoom.invert(H)],ho(this),P.start();function j(L){if(Vn(L),!P.moved){var F=L.clientX-B,Y=L.clientY-U;P.moved=F*F+Y*Y>m}P.event(L).zoom("mouse",n(b(P.that.__zoom,P.mouse[0]=ot(L,R),P.mouse[1]),P.extent,i))}function D(L){$.on("mousemove.zoom mouseup.zoom",null),oh(L.view,P.moved),Vn(L),P.event(L).end()}}function k(O,...A){if(!!e.apply(this,arguments)){var R=this.__zoom,P=ot(O.changedTouches?O.changedTouches[0]:O,this),$=R.invert(P),H=R.k*(O.shiftKey?.5:2),B=n(b(_(R,H),P,$),t.apply(this,A),i);Vn(O),s>0?Xe(this).transition().duration(s).call(w,B,P,O):Xe(this).call(S.transform,B,P,O)}}function q(O,...A){if(!!e.apply(this,arguments)){var R=O.touches,P=R.length,$=C(this,A,O.changedTouches.length===P).event(O),H,B,U,j;for(si(O),B=0;B<P;++B)U=R[B],j=ot(U,this),j=[j,this.__zoom.invert(j),U.identifier],$.touch0?!$.touch1&&$.touch0[2]!==j[2]&&($.touch1=j,$.taps=0):($.touch0=j,H=!0,$.taps=1+!!c);c&&(c=clearTimeout(c)),H&&($.taps<2&&(f=j[0],c=setTimeout(function(){c=null},g)),ho(this),$.start())}}function M(O,...A){if(!!this.__zooming){var R=C(this,A).event(O),P=O.changedTouches,$=P.length,H,B,U,j;for(Vn(O),H=0;H<$;++H)B=P[H],U=ot(B,this),R.touch0&&R.touch0[2]===B.identifier?R.touch0[0]=U:R.touch1&&R.touch1[2]===B.identifier&&(R.touch1[0]=U);if(B=R.that.__zoom,R.touch1){var D=R.touch0[0],L=R.touch0[1],F=R.touch1[0],Y=R.touch1[1],K=(K=F[0]-D[0])*K+(K=F[1]-D[1])*K,Z=(Z=Y[0]-L[0])*Z+(Z=Y[1]-L[1])*Z;B=_(B,Math.sqrt(K/Z)),U=[(D[0]+F[0])/2,(D[1]+F[1])/2],j=[(L[0]+Y[0])/2,(L[1]+Y[1])/2]}else if(R.touch0)U=R.touch0[0],j=R.touch0[1];else return;R.zoom("touch",n(b(B,U,j),R.extent,i))}}function V(O,...A){if(!!this.__zooming){var R=C(this,A).event(O),P=O.changedTouches,$=P.length,H,B;for(si(O),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),H=0;H<$;++H)B=P[H],R.touch0&&R.touch0[2]===B.identifier?delete R.touch0:R.touch1&&R.touch1[2]===B.identifier&&delete R.touch1;if(R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1),R.touch0)R.touch0[1]=this.__zoom.invert(R.touch0[0]);else if(R.end(),R.taps===2&&(B=ot(B,this),Math.hypot(f[0]-B[0],f[1]-B[1])<v)){var U=Xe(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return S.wheelDelta=function(O){return arguments.length?(r=typeof O=="function"?O:Hr(+O),S):r},S.filter=function(O){return arguments.length?(e=typeof O=="function"?O:Hr(!!O),S):e},S.touchable=function(O){return arguments.length?(o=typeof O=="function"?O:Hr(!!O),S):o},S.extent=function(O){return arguments.length?(t=typeof O=="function"?O:Hr([[+O[0][0],+O[0][1]],[+O[1][0],+O[1][1]]]),S):t},S.scaleExtent=function(O){return arguments.length?(a[0]=+O[0],a[1]=+O[1],S):[a[0],a[1]]},S.translateExtent=function(O){return arguments.length?(i[0][0]=+O[0][0],i[1][0]=+O[1][0],i[0][1]=+O[0][1],i[1][1]=+O[1][1],S):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},S.constrain=function(O){return arguments.length?(n=O,S):n},S.duration=function(O){return arguments.length?(s=+O,S):s},S.interpolate=function(O){return arguments.length?(l=O,S):l},S.on=function(){var O=d.on.apply(d,arguments);return O===d?S:O},S.clickDistance=function(O){return arguments.length?(m=(O=+O)*O,S):Math.sqrt(m)},S.tapDistance=function(O){return arguments.length?(v=+O,S):v},S}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function el(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vh(e,t){if(!!e){if(typeof e=="string")return el(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return el(e,t)}}function GE(e){if(Array.isArray(e))return e}function KE(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,a=!1,i,s;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));o=!0);}catch(l){a=!0,s=l}finally{try{!o&&n.return!=null&&n.return()}finally{if(a)throw s}}return r}}function QE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function se(e,t){return GE(e)||KE(e,t)||vh(e,t)||QE()}var Nn;(function(e){e.Strict="strict",e.Loose="loose"})(Nn||(Nn={}));var td;(function(e){e.Lines="lines",e.Dots="dots"})(td||(td={}));var bn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(bn||(bn={}));var mt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(mt||(mt={}));var br;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(br||(br={}));var W;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(W||(W={}));var Wl=function(t){return{width:t.offsetWidth,height:t.offsetHeight}},Sn=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(t,n),r)},bh=function(t,n){return{x:Sn(t.x,n[0][0],n[1][0]),y:Sn(t.y,n[0][1],n[1][1])}},Sh=function(t){var n,r;return((n=t.getRootNode)===null||n===void 0?void 0:n.call(t))||((r=window)===null||r===void 0?void 0:r.document)},XE=function(t,n){return{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x2,n.x2),y2:Math.max(t.y2,n.y2)}},Ra=function(t){var n=t.x,r=t.y,o=t.width,a=t.height;return{x:n,y:r,x2:n+o,y2:r+a}},ZE=function(t){var n=t.x,r=t.y,o=t.x2,a=t.y2;return{x:n,y:r,width:o-n,height:a-r}},wh=function(t){return!isNaN(t)&&isFinite(t)},xe=Symbol("internals");function nd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Un(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nd(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rd(e,t){var n=e.find(function(d){return d.id===t.parentNode});if(n){var r=t.position.x+t.width-n.width,o=t.position.y+t.height-n.height;if(r>0||o>0||t.position.x<0||t.position.y<0){var a,i;if(n.style=Un({},n.style)||{},n.style.width=(a=n.style.width)!==null&&a!==void 0?a:n.width,n.style.height=(i=n.style.height)!==null&&i!==void 0?i:n.height,r>0&&(n.style.width+=r),o>0&&(n.style.height+=o),t.position.x<0){var s=Math.abs(t.position.x);n.position.x=n.position.x-s,n.style.width+=s,t.position.x=0}if(t.position.y<0){var l=Math.abs(t.position.y);n.position.y=n.position.y-l,n.style.height+=l,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Ch(e,t){if(e.some(function(r){return r.type==="reset"}))return e.filter(function(r){return r.type==="reset"}).map(function(r){return r.item});var n=e.filter(function(r){return r.type==="add"}).map(function(r){return r.item});return t.reduce(function(r,o){var a=e.find(function(l){return l.id===o.id});if(a)switch(a.type){case"select":return r.push(Un(Un({},o),{},{selected:a.selected})),r;case"position":{var i=Un({},o);return typeof a.position<"u"&&(i.position=a.position),typeof a.positionAbsolute<"u"&&(i.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(i.dragging=a.dragging),i.expandParent&&rd(r,i),r.push(i),r}case"dimensions":{var s=Un({},o);return typeof a.dimensions<"u"&&(s.width=a.dimensions.width,s.height=a.dimensions.height),s.expandParent&&rd(r,s),r.push(s),r}case"remove":return r}return r.push(o),r},n)}function _h(e,t){return Ch(e,t)}function JE(e,t){return Ch(e,t)}var Nt=function(t,n){return{id:t,type:"select",selected:n}};function mn(e,t){return e.reduce(function(n,r){var o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(Nt(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(Nt(r.id,!1))),n},[])}function od(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Eh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?od(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):od(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var ad=function(t,n,r){var o=n.querySelectorAll(t);if(!o||!o.length)return null;var a=Array.from(o),i=n.getBoundingClientRect();return a.map(function(s){var l=s.getBoundingClientRect();return Eh({id:s.getAttribute("data-handleid"),position:s.getAttribute("data-handlepos"),x:(l.left-i.left)/r,y:(l.top-i.top)/r},Wl(s))})};function Bn(e,t,n){return n===void 0?n:function(r){var o=t().nodeInternals.get(e);n(r,Eh({},o))}}function xh(e){var t=e.id,n=e.store,r=n.getState(),o=r.addSelectedNodes,a=r.unselectNodesAndEdges,i=r.multiSelectionActive,s=r.nodeInternals,l=s.get(t);n.setState({nodesSelectionActive:!1}),l.selected?l.selected&&i&&a({nodes:[l]}):o([t])}function id(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?id(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):id(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var e0=function(t){return"id"in t&&"source"in t&&"target"in t},t0=function(t){var n=t.source,r=t.sourceHandle,o=t.target,a=t.targetHandle;return"reactflow__edge-".concat(n).concat(r||"","-").concat(o).concat(a||"")},tl=function(t,n){if(typeof t>"u")return"";if(typeof t=="string")return t;var r=n?"".concat(n,"__"):"";return"".concat(r).concat(Object.keys(t).sort().map(function(o){return"".concat(o,"=").concat(t[o])}).join("&"))},n0=function(t,n){return n.some(function(r){return r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)})},r0=function(t,n){if(!t.source||!t.target)return n;var r;return e0(t)?r=Qn({},t):r=Qn(Qn({},t),{},{id:t0(t)}),n0(r,n)?n:n.concat(r)},Th=function(t,n,r,o){var a=t.x,i=t.y,s=se(n,3),l=s[0],d=s[1],c=s[2],f=se(o,2),p=f[0],g=f[1],h={x:(a-l)/c,y:(i-d)/c};return r?{x:p*Math.round(h.x/p),y:g*Math.round(h.y/g)}:h},Gl=function(t){if(t.length===0)return{x:0,y:0,width:0,height:0};var n=t.reduce(function(r,o){var a=o.positionAbsolute,i=o.position,s=o.width,l=o.height;return XE(r,Ra({x:a?a.x:i.x,y:a?a.y:i.y,width:s||0,height:l||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ZE(n)},Oh=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,1],o=se(r,3),a=o[0],i=o[1],s=o[2],l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,c=Ra({x:(n.x-a)/s,y:(n.y-i)/s,width:n.width/s,height:n.height/s}),f=[];return t.forEach(function(p){var g=p.positionAbsolute,h=p.width,m=p.height,v=p.selectable,S=v===void 0?!0:v;if(d&&!S)return!1;var _=Ra(Qn(Qn({},g),{},{width:h||0,height:m||0})),b=Math.max(0,Math.min(c.x2,_.x2)-Math.max(c.x,_.x)),y=Math.max(0,Math.min(c.y2,_.y2)-Math.max(c.y,_.y)),w=Math.ceil(b*y),C=typeof h>"u"||typeof m>"u"||h===null||m===null,x=l&&w>0,T=(h||0)*(m||0),N=C||x||w>=T;N&&f.push(p)}),f},Kl=function(t,n){var r=t.map(function(o){return o.id});return n.filter(function(o){return r.includes(o.source)||r.includes(o.target)})},Ih=function(t,n,r,o,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:.1,s=n/(t.width*(1+i)),l=r/(t.height*(1+i)),d=Math.min(s,l),c=Sn(d,o,a),f=t.x+t.width/2,p=t.y+t.height/2,g=n/2-f*c,h=r/2-p*c;return[g,h,c]},Ft=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.transition().duration(n)};function sd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sd(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nh(e,t,n,r){var o,a,i,s,l,d,c,f,p,g,h,m;if(!e.parentNode)return r;var v=t.get(e.parentNode);return Nh(v,t,n,{x:((o=r.x)!==null&&o!==void 0?o:0)+((a=(i=v.position)===null||i===void 0?void 0:i.x)!==null&&a!==void 0?a:0),y:((s=r.y)!==null&&s!==void 0?s:0)+((l=(d=v.position)===null||d===void 0?void 0:d.y)!==null&&l!==void 0?l:0),z:((c=(f=v[xe])===null||f===void 0?void 0:f.z)!==null&&c!==void 0?c:0)>((p=r.z)!==null&&p!==void 0?p:0)?(g=(h=v[xe])===null||h===void 0?void 0:h.z)!==null&&g!==void 0?g:0:(m=r.z)!==null&&m!==void 0?m:0})}function li(e,t){var n=new Map,r={};return e.forEach(function(o){var a,i=wh(o.zIndex)?o.zIndex:o.selected?1e3:0,s=t.get(o.id),l=gn(gn({width:s==null?void 0:s.width,height:s==null?void 0:s.height},o),{},{positionAbsolute:{x:o.position.x,y:o.position.y}});o.parentNode&&(l.parentNode=o.parentNode,r[o.parentNode]=!0),Object.defineProperty(l,xe,{enumerable:!1,value:{handleBounds:s==null||(a=s[xe])===null||a===void 0?void 0:a.handleBounds,z:i}}),n.set(o.id,l)}),n.forEach(function(o){if(o.parentNode&&!n.has(o.parentNode))throw new Error("Parent node ".concat(o.parentNode," not found"));if(o.parentNode||r[o.id]){var a,i,s=Nh(o,n,r,gn(gn({},o.position),{},{z:(a=(i=o[xe])===null||i===void 0?void 0:i.z)!==null&&a!==void 0?a:0})),l=s.x,d=s.y,c=s.z;o.positionAbsolute={x:l,y:d},o[xe].z=c,r[o.id]&&(o[xe].isParent=!0)}}),n}function Rh(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e(),r=n.nodeInternals,o=n.width,a=n.height,i=n.minZoom,s=n.maxZoom,l=n.d3Zoom,d=n.d3Selection,c=n.fitViewOnInitDone,f=n.fitViewOnInit;if((t.initial&&!c&&f||!t.initial)&&l&&d){var p=Array.from(r.values()).filter(function(T){return t.includeHiddenNodes?T.width&&T.height:!T.hidden}),g=p.every(function(T){return T.width&&T.height});if(p.length>0&&g){var h,m,v,S=Gl(p),_=Ih(S,o,a,(h=t.minZoom)!==null&&h!==void 0?h:i,(m=t.maxZoom)!==null&&m!==void 0?m:s,(v=t.padding)!==null&&v!==void 0?v:.1),b=se(_,3),y=b[0],w=b[1],C=b[2],x=Yt.translate(y,w).scale(C);return typeof t.duration=="number"&&t.duration>0?l.transform(Ft(d,t.duration),x):l.transform(d,x),!0}}return!1}function o0(e,t){return e.forEach(function(n){var r=t.get(n.id);if(r){var o;t.set(r.id,gn(gn({},r),{},(o={},de(o,xe,r[xe]),de(o,"selected",n.selected),o)))}}),new Map(t)}function a0(e,t){return t.map(function(n){var r=e.find(function(o){return o.id===n.id});return r&&(n.selected=r.selected),n})}function zr(e){var t=e.changedNodes,n=e.changedEdges,r=e.get,o=e.set,a=r(),i=a.nodeInternals,s=a.edges,l=a.onNodesChange,d=a.onEdgesChange,c=a.hasDefaultNodes,f=a.hasDefaultEdges;t!=null&&t.length&&(c&&o({nodeInternals:o0(t,i)}),l==null||l(t)),n!=null&&n.length&&(f&&o({edges:a0(n,s)}),d==null||d(n))}var ld=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],cd={width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:ld,nodeExtent:ld,nodesSelectionActive:!1,userSelectionActive:!1,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:Nn.Strict,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,reactFlowVersion:"10.3.11",connectionStartHandle:null,connectOnClick:!0};function dd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dd(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Ql=mw(),Ah=Ql.Provider,Ee=Ql.useStore,Ae=Ql.useStoreApi,kh=function(){return hw(function(t,n){return nt(nt({},cd),{},{setNodes:function(o){t({nodeInternals:li(o,n().nodeInternals)})},setEdges:function(o){var a=n(),i=a.defaultEdgeOptions,s=i===void 0?{}:i;t({edges:o.map(function(l){return nt(nt({},s),l)})})},setDefaultNodesAndEdges:function(o,a){var i=typeof o<"u",s=typeof a<"u",l=i?li(o,new Map):new Map,d=s?a:[];t({nodeInternals:l,edges:d,hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:function(o){var a=n(),i=a.onNodesChange,s=a.nodeInternals,l=a.fitViewOnInit,d=a.fitViewOnInitDone,c=a.fitViewOnInitOptions,f=window.getComputedStyle(document.querySelector(".react-flow__viewport")),p=new window.DOMMatrixReadOnly(f.transform),g=p.m22,h=o.reduce(function(v,S){var _=s.get(S.id);if(_){var b=Wl(S.nodeElement),y=!!(b.width&&b.height&&(_.width!==b.width||_.height!==b.height||S.forceUpdate));y&&(s.set(_.id,nt(nt({},_),{},de({},xe,nt(nt({},_[xe]),{},{handleBounds:{source:ad(".source",S.nodeElement,g),target:ad(".target",S.nodeElement,g)}})),b)),v.push({id:_.id,type:"dimensions",dimensions:b}))}return v},[]),m=d||l&&!d&&Rh(n,nt({initial:!0},c));t({nodeInternals:new Map(s),fitViewOnInitDone:m}),(h==null?void 0:h.length)>0&&(i==null||i(h))},updateNodePositions:function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=n(),l=s.onNodesChange,d=s.nodeInternals,c=s.hasDefaultNodes;if(c||l){var f=o.map(function(h){var m={id:h.id,type:"position",dragging:i};return a&&(m.positionAbsolute=h.positionAbsolute,m.position=h.position),m});if(f!=null&&f.length){if(c){var p=_h(f,Array.from(d.values())),g=li(p,d);t({nodeInternals:g})}l==null||l(f)}}},addSelectedNodes:function(o){var a=n(),i=a.multiSelectionActive,s=a.nodeInternals,l=a.edges,d,c=null;i?d=o.map(function(f){return Nt(f,!0)}):(d=mn(Array.from(s.values()),o),c=mn(l,[])),zr({changedNodes:d,changedEdges:c,get:n,set:t})},addSelectedEdges:function(o){var a=n(),i=a.multiSelectionActive,s=a.edges,l=a.nodeInternals,d,c=null;i?d=o.map(function(f){return Nt(f,!0)}):(d=mn(s,o),c=mn(Array.from(l.values()),[])),zr({changedNodes:c,changedEdges:d,get:n,set:t})},unselectNodesAndEdges:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=o.nodes,i=o.edges,s=n(),l=s.nodeInternals,d=s.edges,c=a||Array.from(l.values()),f=i||d,p=c.map(function(h){return h.selected=!1,Nt(h.id,!1)}),g=f.map(function(h){return Nt(h.id,!1)});zr({changedNodes:p,changedEdges:g,get:n,set:t})},setMinZoom:function(o){var a=n(),i=a.d3Zoom,s=a.maxZoom;i==null||i.scaleExtent([o,s]),t({minZoom:o})},setMaxZoom:function(o){var a=n(),i=a.d3Zoom,s=a.minZoom;i==null||i.scaleExtent([s,o]),t({maxZoom:o})},setTranslateExtent:function(o){var a=n(),i=a.d3Zoom;i==null||i.translateExtent(o),t({translateExtent:o})},resetSelectedElements:function(){var o=n(),a=o.nodeInternals,i=o.edges,s=Array.from(a.values()),l=s.filter(function(c){return c.selected}).map(function(c){return Nt(c.id,!1)}),d=i.filter(function(c){return c.selected}).map(function(c){return Nt(c.id,!1)});zr({changedNodes:l,changedEdges:d,get:n,set:t})},setNodeExtent:function(o){var a=n(),i=a.nodeInternals;i.forEach(function(s){s.positionAbsolute=bh(s.position,o)}),t({nodeExtent:o,nodeInternals:new Map(i)})},reset:function(){return t(nt({},cd))}})})};function He(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}function i0(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function Nr(e,t){if(e==null)return{};var n=i0(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(n[r]=e[r]))}return n}function s0(e){if(Array.isArray(e))return el(e)}function l0(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function c0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jt(e){return s0(e)||l0(e)||vh(e)||c0()}var d0={zoomIn:function(){},zoomOut:function(){},zoomTo:function(t){},getZoom:function(){return 1},setViewport:function(t){},getViewport:function(){return{x:0,y:0,zoom:1}},fitView:function(){},setCenter:function(t,n){},fitBounds:function(t){},project:function(t){return t},initialized:!1},u0=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}},f0=function(){var t=Ae(),n=Ee(u0,He),r=n.d3Zoom,o=n.d3Selection,a=E.exports.useMemo(function(){return o&&r?{zoomIn:function(s){return r.scaleBy(Ft(o,s==null?void 0:s.duration),1.2)},zoomOut:function(s){return r.scaleBy(Ft(o,s==null?void 0:s.duration),1/1.2)},zoomTo:function(s,l){return r.scaleTo(Ft(o,l==null?void 0:l.duration),s)},getZoom:function(){return t.getState().transform[2]},setViewport:function(s,l){var d,c,f,p=se(t.getState().transform,3),g=p[0],h=p[1],m=p[2],v=Yt.translate((d=s.x)!==null&&d!==void 0?d:g,(c=s.y)!==null&&c!==void 0?c:h).scale((f=s.zoom)!==null&&f!==void 0?f:m);r.transform(Ft(o,l==null?void 0:l.duration),v)},getViewport:function(){var s=se(t.getState().transform,3),l=s[0],d=s[1],c=s[2];return{x:l,y:d,zoom:c}},fitView:function(s){return Rh(t.getState,s)},setCenter:function(s,l,d){var c=t.getState(),f=c.width,p=c.height,g=c.maxZoom,h=typeof(d==null?void 0:d.zoom)<"u"?d.zoom:g,m=f/2-s*h,v=p/2-l*h,S=Yt.translate(m,v).scale(h);r.transform(Ft(o,d==null?void 0:d.duration),S)},fitBounds:function(s,l){var d,c=t.getState(),f=c.width,p=c.height,g=c.minZoom,h=c.maxZoom,m=Ih(s,f,p,g,h,(d=l==null?void 0:l.padding)!==null&&d!==void 0?d:.1),v=se(m,3),S=v[0],_=v[1],b=v[2],y=Yt.translate(S,_).scale(b);r.transform(Ft(o,l==null?void 0:l.duration),y)},project:function(s){var l=t.getState(),d=l.transform,c=l.snapToGrid,f=l.snapGrid;return Th(s,d,c,f)},initialized:!0}:d0},[r,o]);return a},p0=["initialized"];function ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ud(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ud(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xl(){var e=f0(),t=e.initialized,n=Nr(e,p0),r=Ae(),o=E.exports.useCallback(function(){var g=r.getState(),h=g.nodeInternals,m=Array.from(h.values());return m.map(function(v){return ln({},v)})},[]),a=E.exports.useCallback(function(g){var h=r.getState(),m=h.nodeInternals;return m.get(g)},[]),i=E.exports.useCallback(function(){var g=r.getState(),h=g.edges,m=h===void 0?[]:h;return m.map(function(v){return ln({},v)})},[]),s=E.exports.useCallback(function(g){var h=r.getState(),m=h.edges,v=m===void 0?[]:m;return v.find(function(S){return S.id===g})},[]),l=E.exports.useCallback(function(g){var h=r.getState(),m=h.nodeInternals,v=h.setNodes,S=h.hasDefaultNodes,_=h.onNodesChange,b=Array.from(m.values()),y=typeof g=="function"?g(b):g;if(S)v(y);else if(_){var w=y.length===0?b.map(function(C){return{type:"remove",id:C.id}}):y.map(function(C){return{item:C,type:"reset"}});_(w)}},[]),d=E.exports.useCallback(function(g){var h=r.getState(),m=h.edges,v=m===void 0?[]:m,S=h.setEdges,_=h.hasDefaultEdges,b=h.onEdgesChange,y=typeof g=="function"?g(v):g;if(_)S(y);else if(b){var w=y.length===0?v.map(function(C){return{type:"remove",id:C.id}}):y.map(function(C){return{item:C,type:"reset"}});b(w)}},[]),c=E.exports.useCallback(function(g){var h=Array.isArray(g)?g:[g],m=r.getState(),v=m.nodeInternals,S=m.setNodes,_=m.hasDefaultNodes,b=m.onNodesChange;if(_){var y=Array.from(v.values()),w=[].concat(y,jt(h));S(w)}else if(b){var C=h.map(function(x){return{item:x,type:"add"}});b(C)}},[]),f=E.exports.useCallback(function(g){var h=Array.isArray(g)?g:[g],m=r.getState(),v=m.edges,S=v===void 0?[]:v,_=m.setEdges,b=m.hasDefaultEdges,y=m.onEdgesChange;if(b)_([].concat(jt(S),jt(h)));else if(y){var w=h.map(function(C){return{item:C,type:"add"}});y(w)}},[]),p=E.exports.useCallback(function(){var g=r.getState(),h=g.nodeInternals,m=g.edges,v=m===void 0?[]:m,S=g.transform,_=Array.from(h.values()),b=se(S,3),y=b[0],w=b[1],C=b[2];return{nodes:_.map(function(x){return ln({},x)}),edges:v.map(function(x){return ln({},x)}),viewport:{x:y,y:w,zoom:C}}},[]);return ln(ln({},n),{},{viewportInitialized:t,getNodes:o,getNode:a,getEdges:i,getEdge:s,setNodes:l,setEdges:d,addNodes:c,addEdges:f,toObject:p})}function Ge(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Ge(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}function h0(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:u("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function m0(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:u("path",{d:"M0 0h32v4.2H0z"})})}function g0(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:u("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function y0(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function v0(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}var b0=["children","className"];function fd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function S0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fd(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Ur=function(t){var n=t.children,r=t.className,o=Nr(t,b0);return u("button",{...S0({type:"button",className:Ge(["react-flow__controls-button",r])},o),children:n})},w0=function(t){return t.nodesDraggable&&t.nodesConnectable&&t.elementsSelectable},Lh=function(t){var n=t.style,r=t.showZoom,o=r===void 0?!0:r,a=t.showFitView,i=a===void 0?!0:a,s=t.showInteractive,l=s===void 0?!0:s,d=t.fitViewOptions,c=t.onZoomIn,f=t.onZoomOut,p=t.onFitView,g=t.onInteractiveChange,h=t.className,m=t.children,v=Ae(),S=E.exports.useState(!1),_=se(S,2),b=_[0],y=_[1],w=Ee(w0),C=Xl(),x=C.zoomIn,T=C.zoomOut,N=C.fitView;if(E.exports.useEffect(function(){y(!0)},[]),!b)return null;var k=function(){x==null||x(),c==null||c()},q=function(){T==null||T(),f==null||f()},M=function(){N==null||N(d),p==null||p()},V=function(){v.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),g==null||g(!w)};return I("div",{className:Ge(["react-flow__controls",h]),style:n,children:[o&&I(z,{children:[u(Ur,{onClick:k,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",children:u(h0,{})}),u(Ur,{onClick:q,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",children:u(m0,{})})]}),i&&u(Ur,{className:"react-flow__controls-fitview",onClick:M,title:"fit view","aria-label":"fit view",children:u(g0,{})}),l&&u(Ur,{className:"react-flow__controls-interactive",onClick:V,title:"toggle interactivity","aria-label":"toggle interactivity",children:w?u(v0,{}):u(y0,{})}),m]})};Lh.displayName="Controls";var C0=E.exports.memo(Lh),_0=["paid-pro","paid-sponsor","paid-enterprise","paid-custom"];function E0(e){var t=e.proOptions,n=e.position,r=n===void 0?"bottom-right":n;if(t!=null&&t.account&&_0.includes(t==null?void 0:t.account)&&t!==null&&t!==void 0&&t.hideAttribution)return null;var o="".concat(r).split("-");return u("div",{className:Ge(["react-flow__attribution"].concat(jt(o))),"data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev/pricing",children:u("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer",children:"React Flow"})})}var x0=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"];function pd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function T0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pd(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var O0=function(t){var n=t.x,r=t.y,o=t.label,a=t.labelStyle,i=a===void 0?{}:a,s=t.labelShowBg,l=s===void 0?!0:s,d=t.labelBgStyle,c=d===void 0?{}:d,f=t.labelBgPadding,p=f===void 0?[2,4]:f,g=t.labelBgBorderRadius,h=g===void 0?2:g,m=t.children,v=t.className,S=Nr(t,x0),_=E.exports.useRef(null),b=E.exports.useState({x:0,y:0,width:0,height:0}),y=se(b,2),w=y[0],C=y[1],x=Ge(["react-flow__edge-textwrapper",v]);return E.exports.useEffect(function(){if(_.current){var T=_.current.getBBox();C({x:T.x,y:T.y,width:T.width,height:T.height})}},[o]),typeof o>"u"||!o?null:I("g",{...T0({transform:"translate(".concat(n-w.width/2," ").concat(r-w.height/2,")"),className:x},S),children:[l&&u("rect",{width:w.width+2*p[0],x:-p[0],y:-p[1],height:w.height+2*p[1],className:"react-flow__edge-textbg",style:c,rx:h,ry:h}),u("text",{className:"react-flow__edge-text",y:w.height/2,dy:"0.3em",ref:_,style:i,children:o}),m]})},I0=E.exports.memo(O0),Qa=function(e){var t=e.path,n=e.centerX,r=e.centerY,o=e.label,a=e.labelStyle,i=e.labelShowBg,s=e.labelBgStyle,l=e.labelBgPadding,d=e.labelBgBorderRadius,c=e.style,f=e.markerEnd,p=e.markerStart,g=o?u(I0,{x:n,y:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:d}):null;return I(z,{children:[u("path",{style:c,d:t,className:"react-flow__edge-path",markerEnd:f,markerStart:p}),g]})};function Aa(e){var t=e.pos,n=e.x1,r=e.y1,o=e.x2,a=e.y2,i,s;switch(t){case W.Left:case W.Right:i=.5*(n+o),s=r;break;case W.Top:case W.Bottom:i=n,s=.5*(r+a);break}return[i,s]}function qh(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=Aa({pos:o,x1:t,y1:n,x2:a,y2:i}),c=se(d,2),f=c[0],p=c[1],g=Aa({pos:l,x1:a,y1:i,x2:t,y2:n}),h=se(g,2),m=h[0],v=h[1];return"M".concat(t,",").concat(n," C").concat(f,",").concat(p," ").concat(m,",").concat(v," ").concat(a,",").concat(i)}function N0(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=Aa({pos:o,x1:t,y1:n,x2:a,y2:i}),c=se(d,2),f=c[0],p=c[1],g=Aa({pos:l,x1:a,y1:i,x2:t,y2:n}),h=se(g,2),m=h[0],v=h[1],S=t*.125+f*.375+m*.375+a*.125,_=n*.125+p*.375+v*.375+i*.125,b=Math.abs(S-t),y=Math.abs(_-n);return[S,_,b,y]}var Dh=E.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.sourcePosition,i=a===void 0?W.Bottom:a,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.label,c=e.labelStyle,f=e.labelShowBg,p=e.labelBgStyle,g=e.labelBgPadding,h=e.labelBgBorderRadius,m=e.style,v=e.markerEnd,S=e.markerStart,_={sourceX:t,sourceY:n,sourcePosition:i,targetX:r,targetY:o,targetPosition:l},b=qh(_),y=N0(_),w=se(y,2),C=w[0],x=w[1];return u(Qa,{path:b,centerX:C,centerY:x,label:d,labelStyle:c,labelShowBg:f,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:h,style:m,markerEnd:v,markerStart:S})});function hd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function R0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hd(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var md=[W.Left,W.Right],Ph=function(t){var n=t.sourceX,r=t.sourceY,o=t.targetX,a=t.targetY,i=t.sourcePosition,s=i===void 0?W.Bottom:i,l=t.targetPosition,d=l===void 0?W.Top:l,c=md.includes(s),f=md.includes(d),p=c&&!f||f&&!c;if(p){var g=c?Math.abs(o-n):0,h=n>o?n-g:n+g,m=c?0:Math.abs(a-r),v=r<a?r+m:r-m;return[h,v,g,m]}var S=Math.abs(o-n)/2,_=o<n?o+S:o-S,b=Math.abs(a-r)/2,y=a<r?a+b:a-b;return[_,y,S,b]};function Fn(e,t,n){return n===void 0?n:function(r){var o=t().edges.find(function(a){return a.id===e});n(r,R0({},o))}}var ci=function(t,n,r){return"L ".concat(t,",").concat(n-r,"Q ").concat(t,",").concat(n," ").concat(t+r,",").concat(n)},di=function(t,n,r){return"L ".concat(t+r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-r)},ui=function(t,n,r){return"L ".concat(t,",").concat(n-r,"Q ").concat(t,",").concat(n," ").concat(t-r,",").concat(n)},fi=function(t,n,r){return"L ".concat(t-r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-r)},pi=function(t,n,r){return"L ".concat(t+r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+r)},hi=function(t,n,r){return"L ".concat(t,",").concat(n+r,"Q ").concat(t,",").concat(n," ").concat(t+r,",").concat(n)},mi=function(t,n,r){return"L ".concat(t,",").concat(n+r,"Q ").concat(t,",").concat(n," ").concat(t-r,",").concat(n)},gi=function(t,n,r){return"L ".concat(t-r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+r)};function nl(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.borderRadius,c=d===void 0?5:d,f=e.centerX,p=e.centerY,g=Ph({sourceX:t,sourceY:n,targetX:a,targetY:i}),h=se(g,4),m=h[0],v=h[1],S=h[2],_=h[3],b=Math.min(c,Math.abs(a-t)),y=Math.min(c,Math.abs(i-n)),w=Math.min(b,y,S,_),C=[W.Left,W.Right],x=typeof f<"u"?f:m,T=typeof p<"u"?p:v,N=null,k=null;return t<=a?(N=n<=i?ci(t,T,w):hi(t,T,w),k=n<=i?gi(a,T,w):fi(a,T,w)):(N=n<i?ui(t,T,w):mi(t,T,w),k=n<i?pi(a,T,w):di(a,T,w)),C.includes(o)&&C.includes(l)?t<=a?(N=n<=i?gi(x,n,w):fi(x,n,w),k=n<=i?ci(x,i,w):hi(x,i,w)):(o===W.Right&&l===W.Left||o===W.Left&&l===W.Right||o===W.Left&&l===W.Left)&&(N=n<=i?pi(x,n,w):di(x,n,w),k=n<=i?ui(x,i,w):mi(x,i,w)):C.includes(o)&&!C.includes(l)?(t<=a?N=n<=i?gi(a,n,w):fi(a,n,w):N=n<=i?pi(a,n,w):di(a,n,w),k=""):!C.includes(o)&&C.includes(l)&&(t<=a?N=n<=i?ci(t,i,w):hi(t,i,w):N=n<=i?ui(t,i,w):mi(t,i,w),k=""),"M ".concat(t,",").concat(n).concat(N).concat(k,"L ").concat(a,",").concat(i)}var Zl=E.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.label,i=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,d=e.labelBgPadding,c=e.labelBgBorderRadius,f=e.style,p=e.sourcePosition,g=p===void 0?W.Bottom:p,h=e.targetPosition,m=h===void 0?W.Top:h,v=e.markerEnd,S=e.markerStart,_=e.borderRadius,b=_===void 0?5:_,y=Ph({sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:g,targetPosition:m}),w=se(y,2),C=w[0],x=w[1],T=nl({sourceX:t,sourceY:n,sourcePosition:g,targetX:r,targetY:o,targetPosition:m,borderRadius:b});return u(Qa,{path:T,centerX:C,centerY:x,label:a,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:c,style:f,markerEnd:v,markerStart:S})});function gd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function yd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gd(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Mh=E.exports.memo(function(e){return u(Zl,{...yd(yd({},e),{},{borderRadius:0})})}),Vh=E.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.label,i=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,d=e.labelBgPadding,c=e.labelBgBorderRadius,f=e.style,p=e.markerEnd,g=e.markerStart,h=Math.abs(o-n)/2,m=o<n?o+h:o-h,v=Math.abs(r-t)/2,S=r<t?r+v:r-v,_="M ".concat(t,",").concat(n,"L ").concat(r,",").concat(o);return u(Qa,{path:_,centerX:S,centerY:m,label:a,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:c,style:f,markerEnd:p,markerStart:g})});function Yr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function ka(e){var t=e.pos,n=e.x1,r=e.y1,o=e.x2,a=e.y2,i=e.c,s,l;switch(t){case W.Left:s=n-Yr(n-o,i),l=r;break;case W.Right:s=n+Yr(o-n,i),l=r;break;case W.Top:s=n,l=r-Yr(r-a,i);break;case W.Bottom:s=n,l=r+Yr(a-r,i);break}return[s,l]}function Bh(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.curvature,c=d===void 0?.25:d,f=ka({pos:o,x1:t,y1:n,x2:a,y2:i,c}),p=se(f,2),g=p[0],h=p[1],m=ka({pos:l,x1:a,y1:i,x2:t,y2:n,c}),v=se(m,2),S=v[0],_=v[1];return"M".concat(t,",").concat(n," C").concat(g,",").concat(h," ").concat(S,",").concat(_," ").concat(a,",").concat(i)}function A0(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.curvature,c=d===void 0?.25:d,f=ka({pos:o,x1:t,y1:n,x2:a,y2:i,c}),p=se(f,2),g=p[0],h=p[1],m=ka({pos:l,x1:a,y1:i,x2:t,y2:n,c}),v=se(m,2),S=v[0],_=v[1],b=t*.125+g*.375+S*.375+a*.125,y=n*.125+h*.375+_*.375+i*.125,w=Math.abs(b-t),C=Math.abs(y-n);return[b,y,w,C]}var rl=E.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.sourcePosition,i=a===void 0?W.Bottom:a,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.label,c=e.labelStyle,f=e.labelShowBg,p=e.labelBgStyle,g=e.labelBgPadding,h=e.labelBgBorderRadius,m=e.style,v=e.markerEnd,S=e.markerStart,_=e.curvature,b={sourceX:t,sourceY:n,sourcePosition:i,targetX:r,targetY:o,targetPosition:l,curvature:_},y=Bh(b),w=A0(b),C=se(w,2),x=C[0],T=C[1];return u(Qa,{path:y,centerX:x,centerY:T,label:d,labelStyle:c,labelShowBg:f,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:h,style:m,markerEnd:v,markerStart:S})}),Jl=E.exports.createContext(null),k0=Jl.Provider;Jl.Consumer;function ol(e,t,n,r,o,a,i){var s=i.elementFromPoint(e.clientX,e.clientY),l=(s==null?void 0:s.classList.contains("target"))||!1,d=(s==null?void 0:s.classList.contains("source"))||!1,c={elementBelow:s,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(s&&(l||d)){c.isHoveringHandle=!0;var f=s.getAttribute("data-nodeid"),p=s.getAttribute("data-handleid"),g=n?{source:f,sourceHandle:p,target:r,targetHandle:o}:{source:r,sourceHandle:o,target:f,targetHandle:p};c.connection=g;var h=t===Nn.Strict?n&&d||!n&&l:!0;h&&(c.isValid=a(g))}return c}function vd(e){e==null||e.classList.remove("react-flow__handle-valid"),e==null||e.classList.remove("react-flow__handle-connecting")}function Fh(e){var t=e.event,n=e.handleId,r=e.nodeId,o=e.onConnect,a=e.isTarget,i=e.getState,s=e.setState,l=e.isValidConnection,d=e.elementEdgeUpdaterType,c=e.onEdgeUpdateEnd,f=t.target.closest(".react-flow"),p=Sh(t.target);if(!p)return;var g=p.elementFromPoint(t.clientX,t.clientY),h=g==null?void 0:g.classList.contains("target"),m=g==null?void 0:g.classList.contains("source");if(!f||!h&&!m&&!d)return;var v=i(),S=v.onConnectStart,_=v.connectionMode,b=d||(h?"target":"source"),y=f.getBoundingClientRect(),w;s({connectionPosition:{x:t.clientX-y.left,y:t.clientY-y.top},connectionNodeId:r,connectionHandleId:n,connectionHandleType:b}),S==null||S(t,{nodeId:r,handleId:n,handleType:b});function C(T){s({connectionPosition:{x:T.clientX-y.left,y:T.clientY-y.top}});var N=ol(T,_,a,r,n,l,p),k=N.connection,q=N.elementBelow,M=N.isValid,V=N.isHoveringHandle;if(!V)return vd(w);k.source!==k.target&&q&&(w=q,q.classList.add("react-flow__handle-connecting"),q.classList.toggle("react-flow__handle-valid",M))}function x(T){var N=i(),k=N.onConnectStop,q=N.onConnectEnd,M=ol(T,_,a,r,n,l,p),V=M.connection,O=M.isValid;k==null||k(T),O&&(o==null||o(V)),q==null||q(T),d&&c&&c(T),vd(w),s({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),p.removeEventListener("mousemove",C),p.removeEventListener("mouseup",x)}p.addEventListener("mousemove",C),p.addEventListener("mouseup",x)}var L0=["type","position","isValidConnection","isConnectable","id","onConnect","children","className","onMouseDown"];function bd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function yi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bd(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var q0=function(){return!0},D0=function(t){return{connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick}},$h=E.exports.forwardRef(function(e,t){var n=e.type,r=n===void 0?"source":n,o=e.position,a=o===void 0?W.Top:o,i=e.isValidConnection,s=i===void 0?q0:i,l=e.isConnectable,d=l===void 0?!0:l,c=e.id,f=e.onConnect,p=e.children,g=e.className,h=e.onMouseDown,m=Nr(e,L0),v=Ae(),S=E.exports.useContext(Jl),_=Ee(D0,He),b=_.connectionStartHandle,y=_.connectOnClick,w=c||null,C=r==="target",x=function(q){var M=v.getState(),V=M.defaultEdgeOptions,O=M.onConnect,A=M.hasDefaultEdges,R=yi(yi({},V),q);if(A){var P=v.getState(),$=P.edges;v.setState({edges:r0(R,$)})}O==null||O(R),f==null||f(R)},T=function(q){q.button===0&&Fh({event:q,handleId:w,nodeId:S,onConnect:x,isTarget:C,getState:v.getState,setState:v.setState,isValidConnection:s}),h==null||h(q)},N=function(q){var M=v.getState(),V=M.onClickConnectStart,O=M.onClickConnectStop,A=M.onClickConnectEnd,R=M.connectionMode;if(!b){V==null||V(q,{nodeId:S,handleId:w,handleType:r}),v.setState({connectionStartHandle:{nodeId:S,type:r,handleId:w}});return}var P=Sh(q.target),$=ol(q,R,b.type==="target",b.nodeId,b.handleId||null,s,P),H=$.connection,B=$.isValid;O==null||O(q),B&&x(H),A==null||A(q),v.setState({connectionStartHandle:null})};return u("div",{...yi({"data-handleid":w,"data-nodeid":S,"data-handlepos":a,className:Ge(["react-flow__handle","react-flow__handle-".concat(a),"nodrag",g,{source:!C,target:C,connectable:d,connecting:(b==null?void 0:b.nodeId)===S&&(b==null?void 0:b.handleId)===w&&(b==null?void 0:b.type)===r}]),onMouseDown:T,onClick:y?N:void 0,ref:t},m),children:p})});$h.displayName="Handle";var La=E.exports.memo($h),Hh=function(t){var n=t.data,r=t.isConnectable,o=t.targetPosition,a=o===void 0?W.Top:o,i=t.sourcePosition,s=i===void 0?W.Bottom:i;return I(z,{children:[u(La,{type:"target",position:a,isConnectable:r}),n==null?void 0:n.label,u(La,{type:"source",position:s,isConnectable:r})]})};Hh.displayName="DefaultNode";var al=E.exports.memo(Hh),zh=function(t){var n=t.data,r=t.isConnectable,o=t.sourcePosition,a=o===void 0?W.Bottom:o;return I(z,{children:[n==null?void 0:n.label,u(La,{type:"source",position:a,isConnectable:r})]})};zh.displayName="InputNode";var Uh=E.exports.memo(zh),Yh=function(t){var n=t.data,r=t.isConnectable,o=t.targetPosition,a=o===void 0?W.Top:o;return I(z,{children:[u(La,{type:"target",position:a,isConnectable:r}),n==null?void 0:n.label]})};Yh.displayName="OutputNode";var jh=E.exports.memo(Yh),P0=function(t){return{selectedNodes:Array.from(t.nodeInternals.values()).filter(function(n){return n.selected}),selectedEdges:t.edges.filter(function(n){return n.selected})}},M0=function(t,n){var r=t.selectedNodes.map(function(s){return s.id}),o=n.selectedNodes.map(function(s){return s.id}),a=t.selectedEdges.map(function(s){return s.id}),i=n.selectedEdges.map(function(s){return s.id});return He(r,o)&&He(a,i)};function V0(e){var t=e.onSelectionChange,n=Ee(P0,M0),r=n.selectedNodes,o=n.selectedEdges;return E.exports.useEffect(function(){t({nodes:r,edges:o})},[r,o]),null}var B0=E.exports.memo(V0),F0=function(t){return{setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset}};function xt(e,t){E.exports.useEffect(function(){typeof e<"u"&&t(e)},[e])}function pe(e,t,n){E.exports.useEffect(function(){typeof t<"u"&&n(de({},e,t))},[t])}var $0=function(t){var n=t.nodes,r=t.edges,o=t.defaultNodes,a=t.defaultEdges,i=t.onConnect,s=t.onConnectStart,l=t.onConnectStop,d=t.onConnectEnd,c=t.onClickConnectStart,f=t.onClickConnectStop,p=t.onClickConnectEnd,g=t.nodesDraggable,h=t.nodesConnectable,m=t.minZoom,v=t.maxZoom,S=t.nodeExtent,_=t.onNodesChange,b=t.onEdgesChange,y=t.elementsSelectable,w=t.connectionMode,C=t.snapGrid,x=t.snapToGrid,T=t.translateExtent,N=t.connectOnClick,k=t.defaultEdgeOptions,q=t.fitView,M=t.fitViewOptions,V=t.onNodesDelete,O=t.onEdgesDelete,A=t.onNodeDrag,R=t.onNodeDragStart,P=t.onNodeDragStop,$=t.onSelectionDrag,H=t.onSelectionDragStart,B=t.onSelectionDragStop,U=Ee(F0,He),j=U.setNodes,D=U.setEdges,L=U.setDefaultNodesAndEdges,F=U.setMinZoom,Y=U.setMaxZoom,K=U.setTranslateExtent,Z=U.setNodeExtent,Q=U.reset,G=Ae();return E.exports.useEffect(function(){return L(o,a),function(){Q()}},[]),pe("defaultEdgeOptions",k,G.setState),pe("connectionMode",w,G.setState),pe("onConnect",i,G.setState),pe("onConnectStart",s,G.setState),pe("onConnectStop",l,G.setState),pe("onConnectEnd",d,G.setState),pe("onClickConnectStart",c,G.setState),pe("onClickConnectStop",f,G.setState),pe("onClickConnectEnd",p,G.setState),pe("nodesDraggable",g,G.setState),pe("nodesConnectable",h,G.setState),pe("elementsSelectable",y,G.setState),pe("snapToGrid",x,G.setState),pe("snapGrid",C,G.setState),pe("onNodesChange",_,G.setState),pe("onEdgesChange",b,G.setState),pe("connectOnClick",N,G.setState),pe("fitViewOnInit",q,G.setState),pe("fitViewOnInitOptions",M,G.setState),pe("onNodesDelete",V,G.setState),pe("onEdgesDelete",O,G.setState),pe("onNodeDrag",A,G.setState),pe("onNodeDragStart",R,G.setState),pe("onNodeDragStop",P,G.setState),pe("onSelectionDrag",$,G.setState),pe("onSelectionDragStart",H,G.setState),pe("onSelectionDragStop",B,G.setState),xt(n,j),xt(r,D),xt(o,j),xt(a,D),xt(m,F),xt(v,Y),xt(T,K),xt(S,Z),null},H0=".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__container{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__viewport{pointer-events:none;transform-origin:0 0;z-index:2}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow .react-flow__edges{overflow:visible;pointer-events:none}.react-flow .react-flow__connectionline{z-index:1001}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{box-sizing:border-box;pointer-events:all;position:absolute;transform-origin:0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{pointer-events:none;transform-origin:left top;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none;position:absolute}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__controls{bottom:20px;left:15px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:20px;position:absolute;right:15px;z-index:5}.react-flow__attribution{background:hsla(0,0%,100%,.5);color:#999;font-size:10px;padding:2px 3px;position:absolute;z-index:1000}.react-flow__attribution a{color:#555;text-decoration:none}.react-flow__attribution.top{top:0}.react-flow__attribution.bottom{bottom:0}.react-flow__attribution.left{left:0}.react-flow__attribution.right{right:0}.react-flow__attribution.center{left:50%;transform:translateX(-50%)}",z0=H0,U0=".react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-group,.react-flow__node-input,.react-flow__node-output{background:#fff;border:1px solid #1a192b;border-radius:3px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selected,.react-flow__node-group.selected,.react-flow__node-input.selected,.react-flow__node-output.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle,.react-flow__node-group .react-flow__handle,.react-flow__node-input .react-flow__handle,.react-flow__node-output .react-flow__handle{background:#1a192b}.react-flow__node-default.selectable:hover,.react-flow__node-group.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-default.selectable.selected,.react-flow__node-group.selectable.selected,.react-flow__node-input.selectable.selected,.react-flow__node-output.selectable.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-group{background:hsla(0,0%,94%,.25);border-color:#1a192b}.react-flow__nodesselection-rect,.react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}",Y0=U0,j0=function(t,n,r){return r===W.Left?t-n:r===W.Right?t+n:t},W0=function(t,n,r){return r===W.Top?t-n:r===W.Bottom?t+n:t},Sd=function(t){var n=t.className,r=t.position,o=t.centerX,a=t.centerY,i=t.radius,s=i===void 0?10:i;return u("circle",{className:Ge(["react-flow__edgeupdater",n]),cx:j0(o,s,r),cy:W0(a,s,r),r:s,stroke:"transparent",fill:"transparent"})},cn=function(e){var t=function(r){var o=r.id,a=r.className,i=r.type,s=r.data,l=r.onClick,d=r.onEdgeDoubleClick,c=r.selected,f=r.animated,p=r.label,g=r.labelStyle,h=r.labelShowBg,m=r.labelBgStyle,v=r.labelBgPadding,S=r.labelBgBorderRadius,_=r.style,b=r.source,y=r.target,w=r.sourceX,C=r.sourceY,x=r.targetX,T=r.targetY,N=r.sourcePosition,k=r.targetPosition,q=r.elementsSelectable,M=r.hidden,V=r.sourceHandleId,O=r.targetHandleId,A=r.onContextMenu,R=r.onMouseEnter,P=r.onMouseMove,$=r.onMouseLeave,H=r.edgeUpdaterRadius,B=r.onEdgeUpdate,U=r.onEdgeUpdateStart,j=r.onEdgeUpdateEnd,D=r.markerEnd,L=r.markerStart,F=r.rfId,Y=E.exports.useState(!1),K=se(Y,2),Z=K[0],Q=K[1],G=Ae(),he=function(oe){var Ie=G.getState(),Te=Ie.edges,dt=Ie.addSelectedEdges,tt=Te.find(function(sn){return sn.id===o});q&&(G.setState({nodesSelectionActive:!1}),dt([o])),l==null||l(oe,tt)},we=Fn(o,G.getState,d),_e=Fn(o,G.getState,A),Ce=Fn(o,G.getState,R),Me=Fn(o,G.getState,P),ze=Fn(o,G.getState,$),Ve=function(oe,Ie){var Te=Ie?y:b,dt=(Ie?O:V)||null,tt=Ie?"target":"source",sn=function(){return!0},Ja=Ie,Dn=G.getState().edges.find(function(Vt){return Vt.id===o});U==null||U(oe,Dn,tt);var Ar=j?function(Vt){return j(Vt,Dn,tt)}:void 0,ei=function(kr){return B==null?void 0:B(Dn,kr)};Fh({event:oe,handleId:dt,nodeId:Te,onConnect:ei,isTarget:Ja,getState:G.getState,setState:G.setState,isValidConnection:sn,elementEdgeUpdaterType:tt,onEdgeUpdateEnd:Ar})},Ue=function(oe){return Ve(oe,!0)},Oe=function(oe){return Ve(oe,!1)},Ye=function(){return Q(!0)},ct=function(){return Q(!1)},J=E.exports.useMemo(function(){return"url(#".concat(tl(L,F),")")},[L,F]),le=E.exports.useMemo(function(){return"url(#".concat(tl(D,F),")")},[D,F]);if(M)return null;var ee=!q&&!l,me=typeof B<"u",ne=Ge(["react-flow__edge","react-flow__edge-".concat(i),a,{selected:c,animated:f,inactive:ee,updating:Z}]);return I("g",{className:ne,onClick:he,onDoubleClick:we,onContextMenu:_e,onMouseEnter:Ce,onMouseMove:Me,onMouseLeave:ze,children:[u(e,{id:o,source:b,target:y,selected:c,animated:f,label:p,labelStyle:g,labelShowBg:h,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:S,data:s,style:_,sourceX:w,sourceY:C,targetX:x,targetY:T,sourcePosition:N,targetPosition:k,sourceHandleId:V,targetHandleId:O,markerStart:J,markerEnd:le}),me&&u("g",{onMouseDown:Ue,onMouseEnter:Ye,onMouseOut:ct,children:u(Sd,{position:N,centerX:w,centerY:C,radius:H})}),me&&u("g",{onMouseDown:Oe,onMouseEnter:Ye,onMouseOut:ct,children:u(Sd,{position:k,centerX:x,centerY:T,radius:H})})]})};return t.displayName="EdgeWrapper",E.exports.memo(t)};function wd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Cd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wd(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function G0(e){var t={default:cn(e.default||rl),straight:cn(e.bezier||Vh),step:cn(e.step||Mh),smoothstep:cn(e.step||Zl),simplebezier:cn(e.simplebezier||Dh)},n={},r=Object.keys(e).filter(function(o){return!["default","bezier"].includes(o)}).reduce(function(o,a){return o[a]=cn(e[a]||rl),o},n);return Cd(Cd({},t),r)}function _d(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,a=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case W.Top:return{x:r+a/2,y:o};case W.Right:return{x:r+a,y:o+i/2};case W.Bottom:return{x:r+a/2,y:o+i};case W.Left:return{x:r,y:o+i/2}}}function Ed(e,t){if(!e)return null;var n=null;return e.length===1||!t?n=e[0]:t&&(n=e.find(function(r){return r.id===t})),typeof n>"u"?null:n}var K0=function(t,n,r,o,a,i){var s=_d(r,t,n),l=_d(i,o,a);return{sourceX:s.x,sourceY:s.y,targetX:l.x,targetY:l.y}};function Q0(e){var t=e.sourcePos,n=e.targetPos,r=e.sourceWidth,o=e.sourceHeight,a=e.targetWidth,i=e.targetHeight,s=e.width,l=e.height,d=e.transform,c={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+r,n.x+a),y2:Math.max(t.y+o,n.y+i)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);var f=Ra({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:s/d[2],height:l/d[2]}),p=Math.max(0,Math.min(f.x2,c.x2)-Math.max(f.x,c.x)),g=Math.max(0,Math.min(f.y2,c.y2)-Math.max(f.y,c.y)),h=Math.ceil(p*g);return h>0}function xd(e,t){var n,r,o,a,i,s=e.get(t),l=(s==null||(n=s[xe])===null||n===void 0?void 0:n.handleBounds)||null,d=!s||!l||!s.width||!s.height||typeof((r=s.positionAbsolute)===null||r===void 0?void 0:r.x)>"u"||typeof((o=s.positionAbsolute)===null||o===void 0?void 0:o.y)>"u";return[{x:(s==null||(a=s.positionAbsolute)===null||a===void 0?void 0:a.x)||0,y:(s==null||(i=s.positionAbsolute)===null||i===void 0?void 0:i.y)||0,width:(s==null?void 0:s.width)||0,height:(s==null?void 0:s.height)||0},l,!d]}var X0=typeof document<"u"?document:null,qa=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{target:X0},n=E.exports.useState(!1),r=se(n,2),o=r[0],a=r[1],i=E.exports.useRef(new Set([])),s=E.exports.useMemo(function(){if(e!==null){var f=Array.isArray(e)?e:[e],p=f.filter(function(h){return typeof h=="string"}).map(function(h){return h.split("+")}),g=p.reduce(function(h,m){return h.concat.apply(h,jt(m))},[]);return[p,g]}return[[],[]]},[e]),l=se(s,2),d=l[0],c=l[1];return E.exports.useEffect(function(){if(e!==null){var f,p,g=function(S){if(Id(S))return!1;var _=Od(S.code,c);i.current.add(S[_]),Td(d,i.current,!1)&&(S.preventDefault(),a(!0))},h=function(S){if(Id(S))return!1;var _=Od(S.code,c);Td(d,i.current,!0)?(a(!1),i.current.clear()):i.current.delete(S[_])},m=function(){i.current.clear(),a(!1)};return t==null||(f=t.target)===null||f===void 0||f.addEventListener("keydown",g),t==null||(p=t.target)===null||p===void 0||p.addEventListener("keyup",h),window.addEventListener("blur",m),function(){var v,S;t==null||(v=t.target)===null||v===void 0||v.removeEventListener("keydown",g),t==null||(S=t.target)===null||S===void 0||S.removeEventListener("keyup",h),window.removeEventListener("blur",m)}}},[e,a]),o};function Td(e,t,n){return e.filter(function(r){return n||r.length===t.size}).some(function(r){return r.every(function(o){return t.has(o)})})}function Od(e,t){return t.includes(e)?"code":"key"}function Id(e){var t=e.target;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))}var Z0=function(t){return{onNodesChange:t.onNodesChange,onEdgesChange:t.onEdgesChange}},J0=function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,r=Ae(),o=Ee(Z0,He),a=o.onNodesChange,i=o.onEdgesChange,s=qa(t),l=qa(n);E.exports.useEffect(function(){var d=r.getState(),c=d.nodeInternals,f=d.edges,p=d.hasDefaultNodes,g=d.hasDefaultEdges,h=d.onNodesDelete,m=d.onEdgesDelete,v=Array.from(c.values()),S=v.reduce(function(T,N){return(!N.selected&&N.parentNode&&T.find(function(k){return k.id===N.parentNode})||N.selected)&&T.push(N),T},[]),_=f.filter(function(T){return T.selected});if(s&&(S||_)){var b=Kl(S,f),y=[].concat(jt(_),jt(b)),w=y.reduce(function(T,N){return T.includes(N.id)||T.push(N.id),T},[]);if((g||p)&&(g&&r.setState({edges:f.filter(function(T){return!w.includes(T.id)})}),p&&(S.forEach(function(T){c.delete(T.id)}),r.setState({nodeInternals:new Map(c)}))),w.length>0&&(m==null||m(y),i)){var C=w.map(function(T){return{id:T,type:"remove"}});i(C)}if(S.length>0&&(h==null||h(S),a)){var x=S.map(function(T){return{id:T.id,type:"remove"}});a(x)}r.setState({nodesSelectionActive:!1})}},[s,a,i]),E.exports.useEffect(function(){r.setState({multiSelectionActive:l})},[l])};function ex(e){var t=Ae();E.exports.useEffect(function(){var n,r=function(){if(!!e.current){var a=Wl(e.current);t.setState({width:a.width||500,height:a.height||500})}};return r(),window.onresize=r,e.current&&(n=new ResizeObserver(function(){return r()}),n.observe(e.current)),function(){window.onresize=null,n&&e.current&&n.unobserve(e.current)}},[])}var tx=function(t,n){return t.x!==n.x||t.y!==n.y||t.zoom!==n.k},vi=function(t){return{x:t.x,y:t.y,zoom:t.k}},jr=function(t,n){return t.target.closest(".".concat(n))},nx=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler}},rx=function(t){var n=t.onMove,r=t.onMoveStart,o=t.onMoveEnd,a=t.zoomOnScroll,i=a===void 0?!0:a,s=t.zoomOnPinch,l=s===void 0?!0:s,d=t.panOnScroll,c=d===void 0?!1:d,f=t.panOnScrollSpeed,p=f===void 0?.5:f,g=t.panOnScrollMode,h=g===void 0?bn.Free:g,m=t.zoomOnDoubleClick,v=m===void 0?!0:m,S=t.selectionKeyPressed,_=t.elementsSelectable,b=t.panOnDrag,y=b===void 0?!0:b,w=t.defaultPosition,C=w===void 0?[0,0]:w,x=t.defaultZoom,T=x===void 0?1:x,N=t.zoomActivationKeyCode,k=t.preventScrolling,q=k===void 0?!0:k,M=t.children,V=t.noWheelClassName,O=t.noPanClassName,A=Ae(),R=E.exports.useRef(!1),P=E.exports.useRef(null),$=E.exports.useRef({x:0,y:0,zoom:0}),H=Ee(nx,He),B=H.d3Zoom,U=H.d3Selection,j=H.d3ZoomHandler,D=qa(N);return ex(P),E.exports.useEffect(function(){if(P.current){var L=A.getState(),F=L.minZoom,Y=L.maxZoom,K=L.translateExtent,Z=WE().scaleExtent([F,Y]).translateExtent(K),Q=Xe(P.current).call(Z),G=Sn(C[0],K[0][0],K[1][0]),he=Sn(C[1],K[0][1],K[1][1]),we=Sn(T,F,Y),_e=Yt.translate(G,he).scale(we);Z.transform(Q,_e),A.setState({d3Zoom:Z,d3Selection:Q,d3ZoomHandler:Q.on("wheel.zoom"),transform:[G,he,we]})}},[]),E.exports.useEffect(function(){U&&B&&(c&&!D?U.on("wheel",function(L){if(jr(L,V))return!1;L.preventDefault(),L.stopImmediatePropagation();var F=U.property("__zoom").k||1;if(L.ctrlKey&&l){var Y=ot(L),K=-L.deltaY*(L.deltaMode===1?.05:L.deltaMode?1:.002)*10,Z=F*Math.pow(2,K);B.scaleTo(U,Z,Y);return}var Q=L.deltaMode===1?20:1,G=h===bn.Vertical?0:L.deltaX*Q,he=h===bn.Horizontal?0:L.deltaY*Q;B.translateBy(U,-(G/F)*p,-(he/F)*p)}).on("wheel.zoom",null):typeof j<"u"&&U.on("wheel",function(L){if(!q||jr(L,V))return null;L.preventDefault()}).on("wheel.zoom",j))},[c,h,U,B,j,D,l,q,V]),E.exports.useEffect(function(){B&&(S&&!R.current?B.on("zoom",null):S||B.on("zoom",function(L){if(A.setState({transform:[L.transform.x,L.transform.y,L.transform.k]}),n){var F=vi(L.transform);n(L.sourceEvent,F)}}))},[S,B,n]),E.exports.useEffect(function(){B&&B.on("start",function(L){if(R.current=!0,r){var F=vi(L.transform);$.current=F,r(L.sourceEvent,F)}})},[B,r]),E.exports.useEffect(function(){B&&B.on("end",function(L){if(R.current=!1,o&&tx($.current,L.transform)){var F=vi(L.transform);$.current=F,o(L.sourceEvent,F)}})},[B,o]),E.exports.useEffect(function(){B&&B.filter(function(L){var F=D||i,Y=l&&L.ctrlKey;return!y&&!F&&!c&&!v&&!l||S||!v&&L.type==="dblclick"||jr(L,V)&&L.type==="wheel"||jr(L,O)&&L.type!=="wheel"||!l&&L.ctrlKey&&L.type==="wheel"||!F&&!c&&!Y&&L.type==="wheel"||!y&&(L.type==="mousedown"||L.type==="touchstart")?!1:(!L.ctrlKey||L.type==="wheel")&&!L.button})},[B,i,l,c,v,y,S,_,D]),u("div",{className:"react-flow__renderer react-flow__container",ref:P,children:M})};function Nd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Rd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Nd(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ad(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}var ox=function(t){return{userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable}},kd={startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},ax=E.exports.memo(function(e){var t=e.selectionKeyPressed,n=Ae(),r=E.exports.useRef(0),o=E.exports.useRef(0),a=E.exports.useRef(),i=E.exports.useState(kd),s=se(i,2),l=s[0],d=s[1],c=Ee(ox,He),f=c.userSelectionActive,p=c.elementsSelectable,g=f||t;if(!p||!g)return null;var h=function(){d(kd),n.setState({userSelectionActive:!1}),r.current=0,o.current=0},m=function(y){var w=y.target.closest(".react-flow");a.current=w.getBoundingClientRect();var C=Ad(y,a.current);d({width:0,height:0,startX:C.x,startY:C.y,x:C.x,y:C.y,draw:!0}),n.setState({userSelectionActive:!0,nodesSelectionActive:!1})},v=function(y){var w,C;if(!(!t||!l.draw||!a.current)){var x=Ad(y,a.current),T=(w=l.startX)!==null&&w!==void 0?w:0,N=(C=l.startY)!==null&&C!==void 0?C:0,k=Rd(Rd({},l),{},{x:x.x<T?x.x:T,y:x.y<N?x.y:N,width:Math.abs(x.x-T),height:Math.abs(x.y-N)}),q=n.getState(),M=q.nodeInternals,V=q.edges,O=q.transform,A=q.onNodesChange,R=q.onEdgesChange,P=Array.from(M.values()),$=Oh(M,k,O,!1,!0),H=Kl($,V).map(function(D){return D.id}),B=$.map(function(D){return D.id});if(r.current!==B.length){r.current=B.length;var U=mn(P,B);U.length&&(A==null||A(U))}if(o.current!==H.length){o.current=H.length;var j=mn(V,H);j.length&&(R==null||R(j))}d(k)}},S=function(){n.setState({nodesSelectionActive:r.current>0}),h()},_=function(){n.setState({nodesSelectionActive:!1}),h()};return u("div",{className:"react-flow__selectionpane react-flow__container",onMouseDown:m,onMouseMove:v,onMouseUp:S,onMouseLeave:_,children:l.draw&&u("div",{className:"react-flow__selection react-flow__container",style:{width:l.width,height:l.height,transform:"translate(".concat(l.x,"px, ").concat(l.y,"px)")}})})});function Ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function qd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ld(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ld(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wh(e,t){if(!e.parentNode)return!1;var n=t.get(e.parentNode);return n?n.selected?!0:Wh(n,t):!1}function Dd(e,t,n){var r=e;do{var o;if((o=r)!==null&&o!==void 0&&o.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function ix(e,t,n){return Array.from(e.values()).filter(function(r){return(r.selected||r.id===n)&&(!r.parentNode||!Wh(r,e))}).map(function(r){var o,a,i,s;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:t.x-((o=(a=r.positionAbsolute)===null||a===void 0?void 0:a.x)!==null&&o!==void 0?o:0),y:t.y-((i=(s=r.positionAbsolute)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode,width:r.width,height:r.height}})}function sx(e,t,n,r){var o=e.extent||r,a={x:t.x-e.distance.x,y:t.y-e.distance.y};if(e.extent==="parent")if(e.parentNode&&e.width&&e.height){var i=n.get(e.parentNode);o=i!=null&&i.positionAbsolute&&i!==null&&i!==void 0&&i.width&&i!==null&&i!==void 0&&i.height?[[i.positionAbsolute.x,i.positionAbsolute.y],[i.positionAbsolute.x+i.width-e.width,i.positionAbsolute.y+i.height-e.height]]:o}else o=r;else if(e.extent&&e.parentNode){var s,l,d,c,f=n.get(e.parentNode),p=(s=f==null||(l=f.positionAbsolute)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,g=(d=f==null||(c=f.positionAbsolute)===null||c===void 0?void 0:c.y)!==null&&d!==void 0?d:0;o=[[e.extent[0][0]+p,e.extent[0][1]+g],[e.extent[1][0]+p,e.extent[1][1]+g]]}var h={x:0,y:0};if(e.parentNode){var m,v,S,_,b=n.get(e.parentNode);h={x:(m=b==null||(v=b.positionAbsolute)===null||v===void 0?void 0:v.x)!==null&&m!==void 0?m:0,y:(S=b==null||(_=b.positionAbsolute)===null||_===void 0?void 0:_.y)!==null&&S!==void 0?S:0}}return e.positionAbsolute=o?bh(a,o):a,e.position={x:e.positionAbsolute.x-h.x,y:e.positionAbsolute.y-h.y},e}function bi(e){var t=e.nodeId,n=e.dragItems,r=e.nodeInternals,o=n.map(function(a){var i=r.get(a.id);return qd(qd({},i),{},{position:a.position,positionAbsolute:a.positionAbsolute})});return[t?o.find(function(a){return a.id===t}):o[0],o]}function Si(e){return function(t,n,r){return e==null?void 0:e(t,r)}}function Gh(e){var t=e.nodeRef,n=e.disabled,r=n===void 0?!1:n,o=e.noDragClassName,a=e.handleSelector,i=e.nodeId,s=e.isSelectable,l=e.selectNodesOnDrag,d=E.exports.useState(!1),c=se(d,2),f=c[0],p=c[1],g=Ae(),h=E.exports.useRef(),m=E.exports.useRef({x:null,y:null}),v=E.exports.useCallback(function(S){var _=S.sourceEvent,b=g.getState(),y=b.transform,w=b.snapGrid,C=b.snapToGrid,x=_.touches?_.touches[0].clientX:_.clientX,T=_.touches?_.touches[0].clientY:_.clientY,N=Th({x,y:T},y,C,w);return N},[]);return E.exports.useEffect(function(){if(t!=null&&t.current){var S=Xe(t.current);if(r)S.on(".drag",null);else{var _=r_().on("start",function(b){var y=g.getState(),w=y.nodeInternals,C=y.multiSelectionActive,x=y.unselectNodesAndEdges,T=y.onNodeDragStart,N=y.onSelectionDragStart,k=i?T:Si(N);if(!l&&!C&&i){var q;(q=w.get(i))!==null&&q!==void 0&&q.selected||x()}i&&s&&l&&xh({id:i,store:g});var M=v(b);if(m.current=M,h.current=ix(w,M,i),k&&h.current){var V=bi({nodeId:i,dragItems:h.current,nodeInternals:w}),O=se(V,2),A=O[0],R=O[1];k(b.sourceEvent,A,R)}}).on("drag",function(b){var y=g.getState(),w=y.updateNodePositions,C=y.nodeInternals,x=y.nodeExtent,T=y.onNodeDrag,N=y.onSelectionDrag,k=v(b);if((m.current.x!==k.x||m.current.y!==k.y)&&h.current){m.current=k,h.current=h.current.map(function(R){return sx(R,k,C,x)});var q=i?T:Si(N);if(w(h.current,!0,!0),p(!0),q){var M=bi({nodeId:i,dragItems:h.current,nodeInternals:C}),V=se(M,2),O=V[0],A=V[1];q(b.sourceEvent,O,A)}}b.on("end",function(R){if(p(!1),h.current){var P=g.getState(),$=P.updateNodePositions,H=P.nodeInternals,B=P.onNodeDragStop,U=P.onSelectionDragStop,j=i?B:Si(U);if($(h.current,!1,!1),j){var D=bi({nodeId:i,dragItems:h.current,nodeInternals:H}),L=se(D,2),F=L[0],Y=L[1];j(R.sourceEvent,F,Y)}}})}).filter(function(b){var y=b.target,w=!b.button&&(!o||!Dd(y,".".concat(o),t))&&(!a||Dd(y,a,t));return w});return S.call(_),function(){S.on(".drag",null)}}}},[t,r,o,a,s,g,i,l,v]),f}function Pd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function lx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pd(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var cx=function(t){return lx({transformString:"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")"),userSelectionActive:t.userSelectionActive},Gl(Array.from(t.nodeInternals.values()).filter(function(n){return n.selected})))},dx=function(t){var n=Array.from(t.nodeInternals.values()).filter(function(r){return r.selected});return Gl(n)};function ux(e){var t=e.onSelectionContextMenu,n=e.noPanClassName,r=Ae(),o=Ee(cx,He),a=o.transformString,i=o.userSelectionActive,s=Ee(dx,He),l=s.width,d=s.height,c=s.x,f=s.y,p=E.exports.useRef(null);if(Gh({nodeRef:p}),i||!l||!d)return null;var g=t?function(h){var m=Array.from(r.getState().nodeInternals.values()).filter(function(v){return v.selected});t(h,m)}:void 0;return u("div",{className:Ge(["react-flow__nodesselection","react-flow__container",n]),style:{transform:a},children:u("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:g,style:{width:l,height:d,top:f,left:c}})})}var fx=E.exports.memo(ux),px=function(t){return t.nodesSelectionActive},Kh=function(t){var n=t.children,r=t.onPaneClick,o=t.onPaneContextMenu,a=t.onPaneScroll,i=t.deleteKeyCode,s=t.onMove,l=t.onMoveStart,d=t.onMoveEnd,c=t.selectionKeyCode,f=t.multiSelectionKeyCode,p=t.zoomActivationKeyCode,g=t.elementsSelectable,h=t.zoomOnScroll,m=t.zoomOnPinch,v=t.panOnScroll,S=t.panOnScrollSpeed,_=t.panOnScrollMode,b=t.zoomOnDoubleClick,y=t.panOnDrag,w=t.defaultPosition,C=t.defaultZoom,x=t.preventScrolling,T=t.onSelectionContextMenu,N=t.noWheelClassName,k=t.noPanClassName,q=Ae(),M=Ee(px),V=qa(c);J0({deleteKeyCode:i,multiSelectionKeyCode:f});var O=function($){r==null||r($),q.getState().resetSelectedElements(),q.setState({nodesSelectionActive:!1})},A=o?function(P){return o(P)}:void 0,R=a?function(P){return a(P)}:void 0;return I(rx,{onMove:s,onMoveStart:l,onMoveEnd:d,selectionKeyPressed:V,elementsSelectable:g,zoomOnScroll:h,zoomOnPinch:m,panOnScroll:v,panOnScrollSpeed:S,panOnScrollMode:_,zoomOnDoubleClick:b,panOnDrag:y,defaultPosition:w,defaultZoom:C,zoomActivationKeyCode:p,preventScrolling:x,noWheelClassName:N,noPanClassName:k,children:[n,u(ax,{selectionKeyPressed:V}),M&&u(fx,{onSelectionContextMenu:T,noPanClassName:k}),u("div",{className:"react-flow__pane react-flow__container",onClick:O,onContextMenu:A,onWheel:R})]})};Kh.displayName="FlowRenderer";var hx=E.exports.memo(Kh);function mx(e){var t=Ee(E.exports.useCallback(function(n){return e?Oh(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):Array.from(n.nodeInternals.values())},[e]));return t}var gx=function(t){return{nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions}},Qh=function(t){var n=Ee(gx,He),r=n.nodesDraggable,o=n.nodesConnectable,a=n.elementsSelectable,i=n.updateNodeDimensions,s=mx(t.onlyRenderVisibleElements),l=E.exports.useRef(),d=E.exports.useMemo(function(){if(typeof ResizeObserver>"u")return null;var c=new ResizeObserver(function(f){var p=f.map(function(g){return{id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}});i(p)});return l.current=c,c},[]);return E.exports.useEffect(function(){return function(){var c;l==null||(c=l.current)===null||c===void 0||c.disconnect()}},[]),u("div",{className:"react-flow__nodes react-flow__container",children:s.map(function(c){var f,p,g,h,m,v,S,_=c.type||"default";t.nodeTypes[_]||(_="default");var b=t.nodeTypes[_]||t.nodeTypes.default,y=!!(c.draggable||r&&typeof c.draggable>"u"),w=!!(c.selectable||a&&typeof c.selectable>"u"),C=!!(c.connectable||o&&typeof c.connectable>"u");return u(b,{id:c.id,className:c.className,style:c.style,type:_,data:c.data,sourcePosition:c.sourcePosition||W.Bottom,targetPosition:c.targetPosition||W.Top,hidden:c.hidden,xPos:(f=(p=c.positionAbsolute)===null||p===void 0?void 0:p.x)!==null&&f!==void 0?f:0,yPos:(g=(h=c.positionAbsolute)===null||h===void 0?void 0:h.y)!==null&&g!==void 0?g:0,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!c.selected,isDraggable:y,isSelectable:w,isConnectable:C,resizeObserver:d,dragHandle:c.dragHandle,zIndex:(m=(v=c[xe])===null||v===void 0?void 0:v.z)!==null&&m!==void 0?m:0,isParent:!!((S=c[xe])!==null&&S!==void 0&&S.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!c.width&&!!c.height},c.id)})})};Qh.displayName="NodeRenderer";var yx=E.exports.memo(Qh),dn;function Md(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Vd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Md(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Md(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var vx=(dn={},de(dn,W.Left,W.Right),de(dn,W.Right,W.Left),de(dn,W.Top,W.Bottom),de(dn,W.Bottom,W.Top),dn),bx=function(e){var t,n,r,o,a,i=e.connectionNodeId,s=e.connectionHandleType,l=e.connectionLineStyle,d=e.connectionLineType,c=d===void 0?mt.Bezier:d,f=e.isConnectable,p=e.CustomConnectionLineComponent,g=Ee(E.exports.useCallback(function(H){return{fromNode:H.nodeInternals.get(i),handleId:H.connectionHandleId,toX:(H.connectionPosition.x-H.transform[0])/H.transform[2],toY:(H.connectionPosition.y-H.transform[1])/H.transform[2]}},[i]),He),h=g.fromNode,m=g.handleId,v=g.toX,S=g.toY,_=h==null||(t=h[xe])===null||t===void 0?void 0:t.handleBounds;if(!h||!f||!(_!=null&&_[s]))return null;var b=_[s],y=m?b.find(function(H){return H.id===m}):b[0],w=y?y.x+y.width/2:((n=h==null?void 0:h.width)!==null&&n!==void 0?n:0)/2,C=y?y.y+y.height/2:(r=h==null?void 0:h.height)!==null&&r!==void 0?r:0,x=((h==null||(o=h.positionAbsolute)===null||o===void 0?void 0:o.x)||0)+w,T=((h==null||(a=h.positionAbsolute)===null||a===void 0?void 0:a.y)||0)+C,N=y==null?void 0:y.position;if(!N)return null;var k=vx[N],q,M,V,O,A,R;switch(s){case"source":q=x,M=T,V=N,O=v,A=S,R=k;break;case"target":q=v,M=S,V=k,O=x,A=T,R=N;break}if(p)return u("g",{className:"react-flow__connection",children:u(p,{connectionLineType:c,connectionLineStyle:l,fromNode:h,fromHandle:y,fromX:x,fromY:T,toX:v,toY:S,fromPosition:N,toPosition:k,sourcePosition:V,targetPosition:R,sourceNode:h,sourceHandle:y,targetX:O,targetY:A,sourceX:q,sourceY:M})});var P="",$={sourceX:q,sourceY:M,sourcePosition:V,targetX:O,targetY:A,targetPosition:R};return c===mt.Bezier?P=Bh($):c===mt.Step?P=nl(Vd(Vd({},$),{},{borderRadius:0})):c===mt.SmoothStep?P=nl($):c===mt.SimpleBezier?P=qh($):P="M".concat(q,",").concat(M," ").concat(O,",").concat(A),u("g",{className:"react-flow__connection",children:u("path",{d:P,className:"react-flow__connection-path",style:l})})};function il(e){return il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},il(e)}var Wr,Sx=function(t){var n=t.color,r=n===void 0?"none":n,o=t.strokeWidth,a=o===void 0?1:o;return u("polyline",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:a,fill:"none",points:"-5,-4 0,0 -5,4"})},wx=function(t){var n=t.color,r=n===void 0?"none":n,o=t.strokeWidth,a=o===void 0?1:o;return u("polyline",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:a,fill:r,points:"-5,-4 0,0 -5,4 -5,-4"})},Bd=(Wr={},de(Wr,br.Arrow,Sx),de(Wr,br.ArrowClosed,wx),Wr);function Cx(e){var t=E.exports.useMemo(function(){var n=Bd.hasOwnProperty(e);return n?Bd[e]:function(){return null}},[e]);return t}function Fd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function _x(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fd(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Ex=function(t){var n=t.id,r=t.type,o=t.color,a=t.width,i=a===void 0?12.5:a,s=t.height,l=s===void 0?12.5:s,d=t.markerUnits,c=d===void 0?"strokeWidth":d,f=t.strokeWidth,p=t.orient,g=p===void 0?"auto":p,h=Cx(r);return ge.createElement("marker",{className:"react-flow__arrowhead",id:n,markerWidth:"".concat(i),markerHeight:"".concat(l),viewBox:"-10 -10 20 20",markerUnits:c,orient:g,refX:"0",refY:"0"},ge.createElement(h,{color:o,strokeWidth:f}))},xx=function(t){var n=t.defaultColor,r=t.rfId;return function(o){var a=[];return o.edges.reduce(function(i,s){return[s.markerStart,s.markerEnd].forEach(function(l){if(l&&il(l)==="object"){var d=tl(l,r);a.includes(d)||(i.push(_x({id:d,color:l.color||n},l)),a.push(d))}}),i},[]).sort(function(i,s){return i.id.localeCompare(s.id)})}},Xh=function(t){var n=t.defaultColor,r=t.rfId,o=Ee(E.exports.useCallback(xx({defaultColor:n,rfId:r}),[n,r]),function(a,i){return!(a.length!==i.length||a.some(function(s,l){return s.id!==i[l].id}))});return u("defs",{children:o.map(function(a){return u(Ex,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id)})})};Xh.displayName="MarkerDefinitions";var Tx=E.exports.memo(Xh),Ox=[{level:0,isMaxLevel:!0,edges:[]}];function Ix(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=-1,o=e.reduce(function(i,s){var l=wh(s.zIndex),d=l?s.zIndex:0;if(n){var c,f,p,g;d=l?s.zIndex:Math.max(((c=t.get(s.source))===null||c===void 0||(f=c[xe])===null||f===void 0?void 0:f.z)||0,((p=t.get(s.target))===null||p===void 0||(g=p[xe])===null||g===void 0?void 0:g.z)||0)}return i[d]?i[d].push(s):i[d]=[s],r=d>r?d:r,i},{}),a=Object.entries(o).map(function(i){var s=se(i,2),l=s[0],d=s[1],c=+l;return{edges:d,level:c,isMaxLevel:c===r}});return a.length===0?Ox:a}function Nx(e,t,n){var r=Ee(E.exports.useCallback(function(o){return e?o.edges.filter(function(a){var i=t.get(a.source),s=t.get(a.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&Q0({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:s.width,targetHeight:s.height,width:o.width,height:o.height,transform:o.transform})}):o.edges},[e,t]));return Ix(r,t,n)}var Rx=function(t){return{connectionNodeId:t.connectionNodeId,connectionHandleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals}},Zh=function(t){var n=Ee(Rx,He),r=n.connectionNodeId,o=n.connectionHandleType,a=n.nodesConnectable,i=n.elementsSelectable,s=n.width,l=n.height,d=n.connectionMode,c=n.nodeInternals,f=Nx(t.onlyRenderVisibleElements,c,t.elevateEdgesOnSelect);if(!s)return null;var p=t.connectionLineType,g=t.defaultMarkerColor,h=t.connectionLineStyle,m=t.connectionLineComponent,v=t.connectionLineContainerStyle,S=r&&o;return I(z,{children:[f.map(function(_){var b=_.level,y=_.edges,w=_.isMaxLevel;return I("svg",{style:{zIndex:b},width:s,height:l,className:"react-flow__edges react-flow__container",children:[w&&u(Tx,{defaultColor:g,rfId:t.rfId}),u("g",{children:y.map(function(C){var x=xd(c,C.source),T=se(x,3),N=T[0],k=T[1],q=T[2],M=xd(c,C.target),V=se(M,3),O=V[0],A=V[1],R=V[2];if(!q||!R)return null;var P=C.type||"default",$=t.edgeTypes[P]||t.edgeTypes.default,H=d===Nn.Strict?A.target:A.target||A.source,B=Ed(k.source,C.sourceHandle||null),U=Ed(H,C.targetHandle||null),j=(B==null?void 0:B.position)||W.Bottom,D=(U==null?void 0:U.position)||W.Top;if(!B||!U)return null;var L=K0(N,B,j,O,U,D),F=L.sourceX,Y=L.sourceY,K=L.targetX,Z=L.targetY;return u($,{id:C.id,className:Ge([C.className,t.noPanClassName]),type:P,data:C.data,selected:!!C.selected,animated:!!C.animated,hidden:!!C.hidden,label:C.label,labelStyle:C.labelStyle,labelShowBg:C.labelShowBg,labelBgStyle:C.labelBgStyle,labelBgPadding:C.labelBgPadding,labelBgBorderRadius:C.labelBgBorderRadius,style:C.style,source:C.source,target:C.target,sourceHandleId:C.sourceHandle,targetHandleId:C.targetHandle,markerEnd:C.markerEnd,markerStart:C.markerStart,sourceX:F,sourceY:Y,targetX:K,targetY:Z,sourcePosition:j,targetPosition:D,elementsSelectable:i,onEdgeUpdate:t.onEdgeUpdate,onContextMenu:t.onEdgeContextMenu,onMouseEnter:t.onEdgeMouseEnter,onMouseMove:t.onEdgeMouseMove,onMouseLeave:t.onEdgeMouseLeave,onClick:t.onEdgeClick,edgeUpdaterRadius:t.edgeUpdaterRadius,onEdgeDoubleClick:t.onEdgeDoubleClick,onEdgeUpdateStart:t.onEdgeUpdateStart,onEdgeUpdateEnd:t.onEdgeUpdateEnd,rfId:t.rfId},C.id)})})]},b)}),S&&u("svg",{style:v,width:s,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container",children:u(bx,{connectionNodeId:r,connectionHandleType:o,connectionLineStyle:h,connectionLineType:p,isConnectable:a,CustomConnectionLineComponent:m})})]})};Zh.displayName="EdgeRenderer";var Ax=E.exports.memo(Zh),kx=function(t){return"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")")};function Lx(e){var t=e.children,n=Ee(kx);return u("div",{className:"react-flow__viewport react-flow__container",style:{transform:n},children:t})}function qx(e){var t=Xl(),n=E.exports.useRef(!1);E.exports.useEffect(function(){!n.current&&t.viewportInitialized&&e&&(setTimeout(function(){return e(t)},1),n.current=!0)},[e,t.viewportInitialized])}var Jh=function(t){var n=t.nodeTypes,r=t.edgeTypes,o=t.onMove,a=t.onMoveStart,i=t.onMoveEnd,s=t.onInit,l=t.onNodeClick,d=t.onEdgeClick,c=t.onNodeDoubleClick,f=t.onEdgeDoubleClick,p=t.onNodeMouseEnter,g=t.onNodeMouseMove,h=t.onNodeMouseLeave,m=t.onNodeContextMenu,v=t.onSelectionContextMenu,S=t.connectionLineType,_=t.connectionLineStyle,b=t.connectionLineComponent,y=t.connectionLineContainerStyle,w=t.selectionKeyCode,C=t.multiSelectionKeyCode,x=t.zoomActivationKeyCode,T=t.deleteKeyCode,N=t.onlyRenderVisibleElements,k=t.elementsSelectable,q=t.selectNodesOnDrag,M=t.defaultZoom,V=t.defaultPosition,O=t.preventScrolling,A=t.defaultMarkerColor,R=t.zoomOnScroll,P=t.zoomOnPinch,$=t.panOnScroll,H=t.panOnScrollSpeed,B=t.panOnScrollMode,U=t.zoomOnDoubleClick,j=t.panOnDrag,D=t.onPaneClick,L=t.onPaneScroll,F=t.onPaneContextMenu,Y=t.onEdgeUpdate,K=t.onEdgeContextMenu,Z=t.onEdgeMouseEnter,Q=t.onEdgeMouseMove,G=t.onEdgeMouseLeave,he=t.edgeUpdaterRadius,we=t.onEdgeUpdateStart,_e=t.onEdgeUpdateEnd,Ce=t.noDragClassName,Me=t.noWheelClassName,ze=t.noPanClassName,Ve=t.elevateEdgesOnSelect,Ue=t.id;return qx(s),u(hx,{onPaneClick:D,onPaneContextMenu:F,onPaneScroll:L,deleteKeyCode:T,selectionKeyCode:w,multiSelectionKeyCode:C,zoomActivationKeyCode:x,elementsSelectable:k,onMove:o,onMoveStart:a,onMoveEnd:i,zoomOnScroll:R,zoomOnPinch:P,zoomOnDoubleClick:U,panOnScroll:$,panOnScrollSpeed:H,panOnScrollMode:B,panOnDrag:j,defaultPosition:V,defaultZoom:M,onSelectionContextMenu:v,preventScrolling:O,noDragClassName:Ce,noWheelClassName:Me,noPanClassName:ze,children:I(Lx,{children:[u(Ax,{edgeTypes:r,onEdgeClick:d,onEdgeDoubleClick:f,connectionLineType:S,connectionLineStyle:_,connectionLineComponent:b,connectionLineContainerStyle:y,onEdgeUpdate:Y,onlyRenderVisibleElements:N,onEdgeContextMenu:K,onEdgeMouseEnter:Z,onEdgeMouseMove:Q,onEdgeMouseLeave:G,onEdgeUpdateStart:we,onEdgeUpdateEnd:_e,edgeUpdaterRadius:he,defaultMarkerColor:A,noPanClassName:ze,elevateEdgesOnSelect:!!Ve,rfId:Ue}),u(yx,{nodeTypes:n,onNodeClick:l,onNodeDoubleClick:c,onNodeMouseEnter:p,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:m,selectNodesOnDrag:q,onlyRenderVisibleElements:N,noPanClassName:ze,noDragClassName:Ce})]})})};Jh.displayName="GraphView";var Dx=E.exports.memo(Jh),em=function(){return null};em.displayName="GroupNode";function $d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Hd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$d(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$d(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var $n=function(e){var t=function(r){var o=r.id,a=r.type,i=r.data,s=r.xPos,l=r.yPos,d=r.selected,c=r.onClick,f=r.onMouseEnter,p=r.onMouseMove,g=r.onMouseLeave,h=r.onContextMenu,m=r.onDoubleClick,v=r.style,S=r.className,_=r.isDraggable,b=r.isSelectable,y=r.isConnectable,w=r.selectNodesOnDrag,C=r.sourcePosition,x=r.targetPosition,T=r.hidden,N=r.resizeObserver,k=r.dragHandle,q=r.zIndex,M=r.isParent,V=r.noPanClassName,O=r.noDragClassName,A=r.initialized,R=Ae(),P=E.exports.useRef(null),$=E.exports.useRef(C),H=E.exports.useRef(x),B=E.exports.useRef(a),U=b||_||c||f||p||g,j=Bn(o,R.getState,f),D=Bn(o,R.getState,p),L=Bn(o,R.getState,g),F=Bn(o,R.getState,h),Y=Bn(o,R.getState,m),K=function(G){if(b&&(!w||!_)&&xh({id:o,store:R}),c){var he=R.getState().nodeInternals.get(o);c(G,Hd({},he))}};E.exports.useEffect(function(){if(P.current&&!T){var Q=P.current;return N==null||N.observe(Q),function(){return N==null?void 0:N.unobserve(Q)}}},[T]),E.exports.useEffect(function(){var Q=B.current!==a,G=$.current!==C,he=H.current!==x;P.current&&(Q||G||he)&&(Q&&(B.current=a),G&&($.current=C),he&&(H.current=x),R.getState().updateNodeDimensions([{id:o,nodeElement:P.current,forceUpdate:!0}]))},[o,a,C,x]);var Z=Gh({nodeRef:P,disabled:T||!_,noDragClassName:O,handleSelector:k,nodeId:o,isSelectable:b,selectNodesOnDrag:w});return T?null:u("div",{className:Ge(["react-flow__node","react-flow__node-".concat(a),V,S,{selected:d,selectable:b,parent:M}]),ref:P,style:Hd({zIndex:q,transform:"translate(".concat(s,"px,").concat(l,"px)"),pointerEvents:U?"all":"none",visibility:A?"visible":"hidden"},v),onMouseEnter:j,onMouseMove:D,onMouseLeave:L,onContextMenu:F,onClick:K,onDoubleClick:Y,"data-id":o,children:u(k0,{value:o,children:u(e,{id:o,data:i,type:a,xPos:s,yPos:l,selected:d,isConnectable:y,sourcePosition:C,targetPosition:x,dragging:Z,dragHandle:k,zIndex:q})})})};return t.displayName="NodeWrapper",E.exports.memo(t)};function zd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ud(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zd(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Px(e){var t={input:$n(e.input||Uh),default:$n(e.default||al),output:$n(e.output||jh),group:$n(e.group||em)},n={},r=Object.keys(e).filter(function(o){return!["input","default","output","group"].includes(o)}).reduce(function(o,a){return o[a]=$n(e[a]||al),o},n);return Ud(Ud({},t),r)}function Yd(e,t){E.exports.useRef(null);var n=E.exports.useMemo(function(){return t(e)},[e]);return n}function jd(e){if(!(!e||typeof document>"u")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");t.appendChild(n),n.appendChild(document.createTextNode(e))}}var tm=function(t){var n=t.children,r=!0;try{Ae()}catch{r=!1}return r?u(z,{children:n}):u(Ah,{createStore:kh,children:n})};tm.displayName="ReactFlowWrapper";var Mx=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectStop","onConnectEnd","onClickConnectStart","onClickConnectStop","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateEdgesOnSelect"];function Wd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Gd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Wd(Object(n),!0).forEach(function(r){de(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}jd(z0),jd(Y0);var Vx={input:Uh,default:al,output:jh},Bx={default:rl,straight:Vh,step:Mh,smoothstep:Zl,simplebezier:Dh},Fx=[15,15],$x=[0,0],nm=E.exports.forwardRef(function(e,t){var n=e.nodes,r=e.edges,o=e.defaultNodes,a=e.defaultEdges,i=e.className,s=e.nodeTypes,l=s===void 0?Vx:s,d=e.edgeTypes,c=d===void 0?Bx:d,f=e.onNodeClick,p=e.onEdgeClick,g=e.onInit,h=e.onMove,m=e.onMoveStart,v=e.onMoveEnd,S=e.onConnect,_=e.onConnectStart,b=e.onConnectStop,y=e.onConnectEnd,w=e.onClickConnectStart,C=e.onClickConnectStop,x=e.onClickConnectEnd,T=e.onNodeMouseEnter,N=e.onNodeMouseMove,k=e.onNodeMouseLeave,q=e.onNodeContextMenu,M=e.onNodeDoubleClick,V=e.onNodeDragStart,O=e.onNodeDrag,A=e.onNodeDragStop,R=e.onNodesDelete,P=e.onEdgesDelete,$=e.onSelectionChange,H=e.onSelectionDragStart,B=e.onSelectionDrag,U=e.onSelectionDragStop,j=e.onSelectionContextMenu,D=e.connectionMode,L=D===void 0?Nn.Strict:D,F=e.connectionLineType,Y=F===void 0?mt.Bezier:F,K=e.connectionLineStyle,Z=e.connectionLineComponent,Q=e.connectionLineContainerStyle,G=e.deleteKeyCode,he=G===void 0?"Backspace":G,we=e.selectionKeyCode,_e=we===void 0?"Shift":we,Ce=e.multiSelectionKeyCode,Me=Ce===void 0?"Meta":Ce,ze=e.zoomActivationKeyCode,Ve=ze===void 0?"Meta":ze,Ue=e.snapToGrid,Oe=Ue===void 0?!1:Ue,Ye=e.snapGrid,ct=Ye===void 0?Fx:Ye,J=e.onlyRenderVisibleElements,le=J===void 0?!1:J,ee=e.selectNodesOnDrag,me=ee===void 0?!0:ee,ne=e.nodesDraggable,je=e.nodesConnectable,oe=e.elementsSelectable,Ie=e.minZoom,Te=e.maxZoom,dt=e.defaultZoom,tt=dt===void 0?1:dt,sn=e.defaultPosition,Ja=sn===void 0?$x:sn,Dn=e.translateExtent,Ar=e.preventScrolling,ei=Ar===void 0?!0:Ar,Vt=e.nodeExtent,kr=e.defaultMarkerColor,ag=kr===void 0?"#b1b1b7":kr,sc=e.zoomOnScroll,ig=sc===void 0?!0:sc,lc=e.zoomOnPinch,sg=lc===void 0?!0:lc,cc=e.panOnScroll,lg=cc===void 0?!1:cc,dc=e.panOnScrollSpeed,cg=dc===void 0?.5:dc,uc=e.panOnScrollMode,dg=uc===void 0?bn.Free:uc,fc=e.zoomOnDoubleClick,ug=fc===void 0?!0:fc,pc=e.panOnDrag,fg=pc===void 0?!0:pc,pg=e.onPaneClick,hg=e.onPaneScroll,mg=e.onPaneContextMenu,gg=e.children,yg=e.onEdgeUpdate,vg=e.onEdgeContextMenu,bg=e.onEdgeDoubleClick,Sg=e.onEdgeMouseEnter,wg=e.onEdgeMouseMove,Cg=e.onEdgeMouseLeave,_g=e.onEdgeUpdateStart,Eg=e.onEdgeUpdateEnd,hc=e.edgeUpdaterRadius,xg=hc===void 0?10:hc,Tg=e.onNodesChange,Og=e.onEdgesChange,mc=e.noDragClassName,Ig=mc===void 0?"nodrag":mc,gc=e.noWheelClassName,Ng=gc===void 0?"nowheel":gc,yc=e.noPanClassName,Rg=yc===void 0?"nopan":yc,vc=e.fitView,Ag=vc===void 0?!1:vc,kg=e.fitViewOptions,bc=e.connectOnClick,Lg=bc===void 0?!0:bc,qg=e.attributionPosition,Dg=e.proOptions,Pg=e.defaultEdgeOptions,Sc=e.elevateEdgesOnSelect,Mg=Sc===void 0?!1:Sc,Lr=Nr(e,Mx),Vg=Yd(l,Px),Bg=Yd(c,G0),Fg=Ge(["react-flow",i]);return u("div",{...Gd(Gd({},Lr),{},{ref:t,className:Fg}),children:I(tm,{children:[u(Dx,{onInit:g,onMove:h,onMoveStart:m,onMoveEnd:v,onNodeClick:f,onEdgeClick:p,onNodeMouseEnter:T,onNodeMouseMove:N,onNodeMouseLeave:k,onNodeContextMenu:q,onNodeDoubleClick:M,nodeTypes:Vg,edgeTypes:Bg,connectionLineType:Y,connectionLineStyle:K,connectionLineComponent:Z,connectionLineContainerStyle:Q,selectionKeyCode:_e,deleteKeyCode:he,multiSelectionKeyCode:Me,zoomActivationKeyCode:Ve,onlyRenderVisibleElements:le,selectNodesOnDrag:me,defaultZoom:tt,defaultPosition:Ja,preventScrolling:ei,zoomOnScroll:ig,zoomOnPinch:sg,zoomOnDoubleClick:ug,panOnScroll:lg,panOnScrollSpeed:cg,panOnScrollMode:dg,panOnDrag:fg,onPaneClick:pg,onPaneScroll:hg,onPaneContextMenu:mg,onSelectionContextMenu:j,onEdgeUpdate:yg,onEdgeContextMenu:vg,onEdgeDoubleClick:bg,onEdgeMouseEnter:Sg,onEdgeMouseMove:wg,onEdgeMouseLeave:Cg,onEdgeUpdateStart:_g,onEdgeUpdateEnd:Eg,edgeUpdaterRadius:xg,defaultMarkerColor:ag,noDragClassName:Ig,noWheelClassName:Ng,noPanClassName:Rg,elevateEdgesOnSelect:Mg,id:Lr==null?void 0:Lr.id}),u($0,{nodes:n,edges:r,defaultNodes:o,defaultEdges:a,onConnect:S,onConnectStart:_,onConnectStop:b,onConnectEnd:y,onClickConnectStart:w,onClickConnectStop:C,onClickConnectEnd:x,nodesDraggable:ne,nodesConnectable:je,elementsSelectable:oe,minZoom:Ie,maxZoom:Te,nodeExtent:Vt,onNodesChange:Tg,onEdgesChange:Og,snapToGrid:Oe,snapGrid:ct,connectionMode:L,translateExtent:Dn,connectOnClick:Lg,defaultEdgeOptions:Pg,fitView:Ag,fitViewOptions:kg,onNodesDelete:R,onEdgesDelete:P,onNodeDragStart:V,onNodeDrag:O,onNodeDragStop:A,onSelectionDrag:B,onSelectionDragStart:H,onSelectionDragStop:U}),$&&u(B0,{onSelectionChange:$}),gg,u(E0,{proOptions:Dg,position:qg})]})})});nm.displayName="ReactFlow";var rm=function(t){var n=t.children;return u(Ah,{createStore:kh,children:n})};rm.displayName="ReactFlowProvider";function om(e){return function(t){var n=E.exports.useState(t),r=se(n,2),o=r[0],a=r[1],i=E.exports.useCallback(function(s){return a(function(l){return e(s,l)})},[]);return[o,a,i]}}var Hx=om(_h),zx=om(JE);const mo=e=>{const{data:t}=Wg(e.modifiedBy),n=Al(xr(e.modifiedOn)),{name:r,description:o}=e;return E.exports.useMemo(()=>I(z,{children:[r&&u(We,{title:r,placement:"top",enterNextDelay:200,children:u("span",{children:u(St,{variant:"smallText1",className:"name",children:r})})}),o&&u(We,{title:o,placement:"top",enterNextDelay:200,children:u("span",{children:u(St,{variant:"smallText1",className:"description",children:o})})}),t&&u(Rl,{userProfile:t}),u("div",{children:n})]}),[r,o,t,n])};try{mo.displayName="ActivityNodeLabel",mo.__docgenInfo={description:"",displayName:"ActivityNodeLabel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},etag:{defaultValue:null,description:"",name:"etag",required:!0,type:{name:"string"}},createdOn:{defaultValue:null,description:"",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"",name:"modifiedBy",required:!0,type:{name:"string"}},used:{defaultValue:null,description:"",name:"used",required:!1,type:{name:"(UsedURL | UsedEntity)[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ActivityNodeLabel.tsx#ActivityNodeLabel"]={docgenInfo:mo.__docgenInfo,name:"ActivityNodeLabel",path:"src/lib/containers/provenance/ActivityNodeLabel.tsx#ActivityNodeLabel"})}catch{}const Ux=new Set([".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx",".cwl",".wdl",".json"]),go=e=>{const{entityHeader:t}=e;if(t){const n=np(t==null?void 0:t.type);if(n==$s.FILE){const r=t.name.lastIndexOf(".");if(r>-1){const o=t.name.slice(r);if(Ux.has(o.toLowerCase()))return u(fe,{options:{icon:"code"}})}}else return u(xc,{type:n,includeTooltip:!1})}return u(xc,{type:$s.FILE,includeTooltip:!1})};try{go.displayName="ProvenanceEntityIcon",go.__docgenInfo={description:"",displayName:"ProvenanceEntityIcon",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!1,type:{name:"EntityHeader"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceEntityIcon.tsx#ProvenanceEntityIcon"]={docgenInfo:go.__docgenInfo,name:"ProvenanceEntityIcon",path:"src/lib/containers/provenance/ProvenanceEntityIcon.tsx#ProvenanceEntityIcon"})}catch{}const yo=e=>{const t=e.versionNumber?`.${e.versionNumber}`:"",n=`${e.id}${t}`;return E.exports.useMemo(()=>I(z,{children:[u("div",{children:u(go,{entityHeader:e})}),I(z,{children:[u("div",{children:u(We,{title:e.name,placement:"top",enterNextDelay:300,children:u("a",{href:`${De.PORTAL}#!Synapse:${n}`,children:e.name})})}),ky(np(e.type))&&I("div",{children:[I("div",{children:["v.",e.versionNumber]}),!e.isLatestVersion&&u("div",{children:"(old version)"})]})]})]}),[e,n])};try{yo.displayName="EntityNodeLabel",yo.__docgenInfo={description:"",displayName:"EntityNodeLabel",props:{name:{defaultValue:null,description:"The name of the entity",name:"name",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"The id of the entity",name:"id",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"The type of the entity",name:"type",required:!0,type:{name:"enum",value:[{value:'"org.sagebionetworks.repo.model.table.EntityView"'},{value:'"org.sagebionetworks.repo.model.table.SubmissionView"'},{value:'"org.sagebionetworks.repo.model.table.Dataset"'},{value:'"org.sagebionetworks.repo.model.table.DatasetCollection"'},{value:'"org.sagebionetworks.repo.model.Link"'},{value:'"org.sagebionetworks.repo.model.docker.DockerRepository"'},{value:'"org.sagebionetworks.repo.model.FileEntity"'},{value:'"org.sagebionetworks.repo.model.table.TableEntity"'},{value:'"org.sagebionetworks.repo.model.table.MaterializedView"'},{value:'"org.sagebionetworks.repo.model.Folder"'},{value:'"org.sagebionetworks.repo.model.Project"'}]}},versionNumber:{defaultValue:null,description:"The version number of the entity",name:"versionNumber",required:!1,type:{name:"number"}},versionLabel:{defaultValue:null,description:"The user defined version label of the entity",name:"versionLabel",required:!1,type:{name:"string"}},benefactorId:{defaultValue:null,description:"The ID of the entity that this Entity's ACL is inherited from.",name:"benefactorId",required:!0,type:{name:"number"}},createdOn:{defaultValue:null,description:"The date this entity was created.",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"The date this entity was last modified.",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"The ID of the user that created this entity.",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"The ID of the user that last modified this entity.",name:"modifiedBy",required:!0,type:{name:"string"}},isLatestVersion:{defaultValue:null,description:"If this version is the latest version of the entity",name:"isLatestVersion",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/EntityNodeLabel.tsx#EntityNodeLabel"]={docgenInfo:yo.__docgenInfo,name:"EntityNodeLabel",path:"src/lib/containers/provenance/EntityNodeLabel.tsx#EntityNodeLabel"})}catch{}var am={exports:{}};(function(e,t){(function(n,r){typeof za=="function"&&!0?e.exports=r():n.pluralize=r()})(ql,function(){var n=[],r=[],o={},a={},i={};function s(m){return typeof m=="string"?new RegExp("^"+m+"$","i"):m}function l(m,v){return m===v?v:m===m.toLowerCase()?v.toLowerCase():m===m.toUpperCase()?v.toUpperCase():m[0]===m[0].toUpperCase()?v.charAt(0).toUpperCase()+v.substr(1).toLowerCase():v.toLowerCase()}function d(m,v){return m.replace(/\$(\d{1,2})/g,function(S,_){return v[_]||""})}function c(m,v){return m.replace(v[0],function(S,_){var b=d(v[1],arguments);return l(S===""?m[_-1]:S,b)})}function f(m,v,S){if(!m.length||o.hasOwnProperty(m))return v;for(var _=S.length;_--;){var b=S[_];if(b[0].test(v))return c(v,b)}return v}function p(m,v,S){return function(_){var b=_.toLowerCase();return v.hasOwnProperty(b)?l(_,b):m.hasOwnProperty(b)?l(_,m[b]):f(b,_,S)}}function g(m,v,S,_){return function(b){var y=b.toLowerCase();return v.hasOwnProperty(y)?!0:m.hasOwnProperty(y)?!1:f(y,y,S)===y}}function h(m,v,S){var _=v===1?h.singular(m):h.plural(m);return(S?v+" ":"")+_}return h.plural=p(i,a,n),h.isPlural=g(i,a,n),h.singular=p(a,i,r),h.isSingular=g(a,i,r),h.addPluralRule=function(m,v){n.push([s(m),v])},h.addSingularRule=function(m,v){r.push([s(m),v])},h.addUncountableRule=function(m){if(typeof m=="string"){o[m.toLowerCase()]=!0;return}h.addPluralRule(m,"$0"),h.addSingularRule(m,"$0")},h.addIrregularRule=function(m,v){v=v.toLowerCase(),m=m.toLowerCase(),i[m]=v,a[v]=m},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(m){return h.addIrregularRule(m[0],m[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(m){return h.addPluralRule(m[0],m[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(m){return h.addSingularRule(m[0],m[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(h.addUncountableRule),h})})(am);const Yx=am.exports,vo=e=>{const{itemCount:t}=e;return E.exports.useMemo(()=>u(z,{children:I("a",{children:["Show ",t," ",Yx("item",t),"\u2026"]})}),[t])};try{vo.displayName="ExpandGraphNodeLabel",vo.__docgenInfo={description:"",displayName:"ExpandGraphNodeLabel",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!0,type:{name:"EntityHeader"}},itemCount:{defaultValue:null,description:"",name:"itemCount",required:!0,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ExpandGraphNodeLabel.tsx#ExpandGraphNodeLabel"]={docgenInfo:vo.__docgenInfo,name:"ExpandGraphNodeLabel",path:"src/lib/containers/provenance/ExpandGraphNodeLabel.tsx#ExpandGraphNodeLabel"})}catch{}const jx=/^(.+?\.)?github\.com$/,Wx=/^(.+?\.)?githubusercontent\.com$/,bo=e=>{const{url:t}=e;let n="link";const r=new URL(t),{hostname:o}=r;return(o.match(jx)||o.match(Wx))&&(n="github"),u(fe,{options:{icon:n}})};try{bo.displayName="ProvenanceExternalIcon",bo.__docgenInfo={description:"",displayName:"ProvenanceExternalIcon",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceExternalIcon.tsx#ProvenanceExternalIcon"]={docgenInfo:bo.__docgenInfo,name:"ProvenanceExternalIcon",path:"src/lib/containers/provenance/ProvenanceExternalIcon.tsx#ProvenanceExternalIcon"})}catch{}const So=e=>E.exports.useMemo(()=>I(z,{children:[u("div",{children:u(bo,{url:e.url})}),u(We,{title:e.name,placement:"top",enterNextDelay:300,children:u("a",{href:e.url,rel:"noopener noreferrer",children:e.name})})]}),[e.name,e.url]);try{So.displayName="ExternalGraphNodeLabel",So.__docgenInfo={description:"",displayName:"ExternalGraphNodeLabel",props:{concreteType:{defaultValue:null,description:"",name:"concreteType",required:!0,type:{name:'"org.sagebionetworks.repo.model.provenance.UsedURL"'}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},wasExecuted:{defaultValue:null,description:"",name:"wasExecuted",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ExternalGraphNodeLabel.tsx#ExternalGraphNodeLabel"]={docgenInfo:So.__docgenInfo,name:"ExternalGraphNodeLabel",path:"src/lib/containers/provenance/ExternalGraphNodeLabel.tsx#ExternalGraphNodeLabel"})}catch{}var wi,Kd;function Gx(){if(Kd)return wi;Kd=1;var e=qv,t=4;function n(r){return e(r,t)}return wi=n,wi}var Ci={exports:{}},Qd;function im(){return Qd||(Qd=1,function(e){e.exports=bp}(Ci)),Ci.exports}var _i,Xd;function Kx(){if(Xd)return _i;Xd=1;var e=Sp;function t(n,r){var o=[];return e(n,function(a,i,s){r(a,i,s)&&o.push(a)}),o}return _i=t,_i}var Ei,Zd;function sm(){if(Zd)return Ei;Zd=1;var e=hv,t=Kx(),n=nn,r=Tr;function o(a,i){var s=r(a)?e:t;return s(a,n(i))}return Ei=o,Ei}var xi,Jd;function Qx(){if(Jd)return xi;Jd=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,o){return r!=null&&t.call(r,o)}return xi=n,xi}var Ti,eu;function lm(){if(eu)return Ti;eu=1;var e=Qx(),t=mv;function n(r,o){return r!=null&&t(r,o,e)}return Ti=n,Ti}var Oi,tu;function cm(){if(tu)return Oi;tu=1;function e(t){return t===void 0}return Oi=e,Oi}var Ii,nu;function dm(){if(nu)return Ii;nu=1;var e=fp,t=nn,n=Dv,r=Tr;function o(a,i){var s=r(a)?e:n;return s(a,t(i))}return Ii=o,Ii}var Ni,ru;function Xx(){if(ru)return Ni;ru=1;function e(t,n,r,o,a){return a(t,function(i,s,l){r=o?(o=!1,i):n(r,i,s,l)}),r}return Ni=e,Ni}var Ri,ou;function um(){if(ou)return Ri;ou=1;var e=gv,t=Sp,n=nn,r=Xx(),o=Tr;function a(i,s,l){var d=o(i)?e:r,c=arguments.length<3;return d(i,n(s),l,c,t)}return Ri=a,Ri}var Ai,au;function Zx(){if(au)return Ai;au=1;var e=yv,t=e("length");return Ai=t,Ai}var ki,iu;function Jx(){if(iu)return ki;iu=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",i="["+e+"]",s="["+o+"]",l="\\ud83c[\\udffb-\\udfff]",d="(?:"+s+"|"+l+")",c="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",h=d+"?",m="["+a+"]?",v="(?:"+g+"(?:"+[c,f,p].join("|")+")"+m+h+")*",S=m+h+v,_="(?:"+[c+s+"?",s,f,p,i].join("|")+")",b=RegExp(l+"(?="+l+")|"+_+S,"g");function y(w){for(var C=b.lastIndex=0;b.test(w);)++C;return C}return ki=y,ki}var Li,su;function eT(){if(su)return Li;su=1;var e=Zx(),t=vv,n=Jx();function r(o){return t(o)?n(o):e(o)}return Li=r,Li}var qi,lu;function tT(){if(lu)return qi;lu=1;var e=bv,t=Sv,n=pp,r=Wv,o=eT(),a="[object Map]",i="[object Set]";function s(l){if(l==null)return 0;if(n(l))return r(l)?o(l):l.length;var d=t(l);return d==a||d==i?l.size:e(l).length}return qi=s,qi}var Di,cu;function nT(){if(cu)return Di;cu=1;var e=Pv,t=Mv,n=wv,r=nn,o=Cv,a=Tr,i=_v.exports,s=hp,l=mp,d=Ev;function c(f,p,g){var h=a(f),m=h||i(f)||d(f);if(p=r(p),g==null){var v=f&&f.constructor;m?g=h?new v:[]:l(f)?g=s(v)?t(o(f)):{}:g={}}return(m?e:n)(f,function(S,_,b){return p(g,S,_,b)}),g}return Di=c,Di}var Pi,du;function rT(){if(du)return Pi;du=1;var e=fp;function t(n,r){return e(r,function(o){return n[o]})}return Pi=t,Pi}var Mi,uu;function fm(){if(uu)return Mi;uu=1;var e=rT(),t=Dl;function n(r){return r==null?[]:e(r,t(r))}return Mi=n,Mi}var Vi,fu;function Ke(){if(fu)return Vi;fu=1;var e;if(typeof za=="function")try{e={clone:Gx(),constant:gp,each:im(),filter:sm(),has:lm(),isArray:Tr,isEmpty:av,isFunction:hp,isUndefined:cm(),keys:Dl,map:dm(),reduce:um(),size:tT(),transform:nT(),union:iv,values:fm()}}catch{}return e||(e=window._),Vi=e,Vi}var Bi,pu;function ec(){if(pu)return Bi;pu=1;var e=Ke();Bi=o;var t="\0",n="\0",r="";function o(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(c){return this._label=c,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return e.keys(this._nodes)},o.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(f){return e.isEmpty(c._in[f])})},o.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(f){return e.isEmpty(c._out[f])})},o.prototype.setNodes=function(c,f){var p=arguments,g=this;return e.each(c,function(h){p.length>1?g.setNode(h,f):g.setNode(h)}),this},o.prototype.setNode=function(c,f){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=f),this):(this._nodes[c]=arguments.length>1?f:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},o.prototype.node=function(c){return this._nodes[c]},o.prototype.hasNode=function(c){return e.has(this._nodes,c)},o.prototype.removeNode=function(c){var f=this;if(e.has(this._nodes,c)){var p=function(g){f.removeEdge(f._edgeObjs[g])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(g){f.setParent(g)}),delete this._children[c]),e.each(e.keys(this._in[c]),p),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),p),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},o.prototype.setParent=function(c,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=n;else{f+="";for(var p=f;!e.isUndefined(p);p=this.parent(p))if(p===c)throw new Error("Setting "+f+" as parent of "+c+" would create a cycle");this.setNode(f)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=f,this._children[f][c]=!0,this},o.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},o.prototype.parent=function(c){if(this._isCompound){var f=this._parent[c];if(f!==n)return f}},o.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var f=this._children[c];if(f)return e.keys(f)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},o.prototype.predecessors=function(c){var f=this._preds[c];if(f)return e.keys(f)},o.prototype.successors=function(c){var f=this._sucs[c];if(f)return e.keys(f)},o.prototype.neighbors=function(c){var f=this.predecessors(c);if(f)return e.union(f,this.successors(c))},o.prototype.isLeaf=function(c){var f;return this.isDirected()?f=this.successors(c):f=this.neighbors(c),f.length===0},o.prototype.filterNodes=function(c){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var p=this;e.each(this._nodes,function(m,v){c(v)&&f.setNode(v,m)}),e.each(this._edgeObjs,function(m){f.hasNode(m.v)&&f.hasNode(m.w)&&f.setEdge(m,p.edge(m))});var g={};function h(m){var v=p.parent(m);return v===void 0||f.hasNode(v)?(g[m]=v,v):v in g?g[v]:h(v)}return this._isCompound&&e.each(f.nodes(),function(m){f.setParent(m,h(m))}),f},o.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return e.values(this._edgeObjs)},o.prototype.setPath=function(c,f){var p=this,g=arguments;return e.reduce(c,function(h,m){return g.length>1?p.setEdge(h,m,f):p.setEdge(h,m),m}),this},o.prototype.setEdge=function(){var c,f,p,g,h=!1,m=arguments[0];typeof m=="object"&&m!==null&&"v"in m?(c=m.v,f=m.w,p=m.name,arguments.length===2&&(g=arguments[1],h=!0)):(c=m,f=arguments[1],p=arguments[3],arguments.length>2&&(g=arguments[2],h=!0)),c=""+c,f=""+f,e.isUndefined(p)||(p=""+p);var v=s(this._isDirected,c,f,p);if(e.has(this._edgeLabels,v))return h&&(this._edgeLabels[v]=g),this;if(!e.isUndefined(p)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this._edgeLabels[v]=h?g:this._defaultEdgeLabelFn(c,f,p);var S=l(this._isDirected,c,f,p);return c=S.v,f=S.w,Object.freeze(S),this._edgeObjs[v]=S,a(this._preds[f],c),a(this._sucs[c],f),this._in[f][v]=S,this._out[c][v]=S,this._edgeCount++,this},o.prototype.edge=function(c,f,p){var g=arguments.length===1?d(this._isDirected,arguments[0]):s(this._isDirected,c,f,p);return this._edgeLabels[g]},o.prototype.hasEdge=function(c,f,p){var g=arguments.length===1?d(this._isDirected,arguments[0]):s(this._isDirected,c,f,p);return e.has(this._edgeLabels,g)},o.prototype.removeEdge=function(c,f,p){var g=arguments.length===1?d(this._isDirected,arguments[0]):s(this._isDirected,c,f,p),h=this._edgeObjs[g];return h&&(c=h.v,f=h.w,delete this._edgeLabels[g],delete this._edgeObjs[g],i(this._preds[f],c),i(this._sucs[c],f),delete this._in[f][g],delete this._out[c][g],this._edgeCount--),this},o.prototype.inEdges=function(c,f){var p=this._in[c];if(p){var g=e.values(p);return f?e.filter(g,function(h){return h.v===f}):g}},o.prototype.outEdges=function(c,f){var p=this._out[c];if(p){var g=e.values(p);return f?e.filter(g,function(h){return h.w===f}):g}},o.prototype.nodeEdges=function(c,f){var p=this.inEdges(c,f);if(p)return p.concat(this.outEdges(c,f))};function a(c,f){c[f]?c[f]++:c[f]=1}function i(c,f){--c[f]||delete c[f]}function s(c,f,p,g){var h=""+f,m=""+p;if(!c&&h>m){var v=h;h=m,m=v}return h+r+m+r+(e.isUndefined(g)?t:g)}function l(c,f,p,g){var h=""+f,m=""+p;if(!c&&h>m){var v=h;h=m,m=v}var S={v:h,w:m};return g&&(S.name=g),S}function d(c,f){return s(c,f.v,f.w,f.name)}return Bi}var Fi,hu;function oT(){return hu||(hu=1,Fi="2.1.8"),Fi}var $i,mu;function aT(){return mu||(mu=1,$i={Graph:ec(),version:oT()}),$i}var Hi,gu;function iT(){if(gu)return Hi;gu=1;var e=Ke(),t=ec();Hi={write:n,read:a};function n(i){var s={options:{directed:i.isDirected(),multigraph:i.isMultigraph(),compound:i.isCompound()},nodes:r(i),edges:o(i)};return e.isUndefined(i.graph())||(s.value=e.clone(i.graph())),s}function r(i){return e.map(i.nodes(),function(s){var l=i.node(s),d=i.parent(s),c={v:s};return e.isUndefined(l)||(c.value=l),e.isUndefined(d)||(c.parent=d),c})}function o(i){return e.map(i.edges(),function(s){var l=i.edge(s),d={v:s.v,w:s.w};return e.isUndefined(s.name)||(d.name=s.name),e.isUndefined(l)||(d.value=l),d})}function a(i){var s=new t(i.options).setGraph(i.value);return e.each(i.nodes,function(l){s.setNode(l.v,l.value),l.parent&&s.setParent(l.v,l.parent)}),e.each(i.edges,function(l){s.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),s}return Hi}var zi,yu;function sT(){if(yu)return zi;yu=1;var e=Ke();zi=t;function t(n){var r={},o=[],a;function i(s){e.has(r,s)||(r[s]=!0,a.push(s),e.each(n.successors(s),i),e.each(n.predecessors(s),i))}return e.each(n.nodes(),function(s){a=[],i(s),a.length&&o.push(a)}),o}return zi}var Ui,vu;function pm(){if(vu)return Ui;vu=1;var e=Ke();Ui=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var o=this._keyIndices;if(n=String(n),!e.has(o,n)){var a=this._arr,i=a.length;return o[n]=i,a.push({key:n,priority:r}),this._decrease(i),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var o=this._keyIndices[n];if(r>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[o].priority+" New: "+r);this._arr[o].priority=r,this._decrease(o)},t.prototype._heapify=function(n){var r=this._arr,o=2*n,a=o+1,i=n;o<r.length&&(i=r[o].priority<r[i].priority?o:i,a<r.length&&(i=r[a].priority<r[i].priority?a:i),i!==n&&(this._swap(n,i),this._heapify(i)))},t.prototype._decrease=function(n){for(var r=this._arr,o=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<o));)this._swap(n,a),n=a},t.prototype._swap=function(n,r){var o=this._arr,a=this._keyIndices,i=o[n],s=o[r];o[n]=s,o[r]=i,a[s.key]=n,a[i.key]=r},Ui}var Yi,bu;function hm(){if(bu)return Yi;bu=1;var e=Ke(),t=pm();Yi=r;var n=e.constant(1);function r(a,i,s,l){return o(a,String(i),s||n,l||function(d){return a.outEdges(d)})}function o(a,i,s,l){var d={},c=new t,f,p,g=function(h){var m=h.v!==f?h.v:h.w,v=d[m],S=s(h),_=p.distance+S;if(S<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+S);_<v.distance&&(v.distance=_,v.predecessor=f,c.decrease(m,_))};for(a.nodes().forEach(function(h){var m=h===i?0:Number.POSITIVE_INFINITY;d[h]={distance:m},c.add(h,m)});c.size()>0&&(f=c.removeMin(),p=d[f],p.distance!==Number.POSITIVE_INFINITY);)l(f).forEach(g);return d}return Yi}var ji,Su;function lT(){if(Su)return ji;Su=1;var e=hm(),t=Ke();ji=n;function n(r,o,a){return t.transform(r.nodes(),function(i,s){i[s]=e(r,s,o,a)},{})}return ji}var Wi,wu;function mm(){if(wu)return Wi;wu=1;var e=Ke();Wi=t;function t(n){var r=0,o=[],a={},i=[];function s(l){var d=a[l]={onStack:!0,lowlink:r,index:r++};if(o.push(l),n.successors(l).forEach(function(p){e.has(a,p)?a[p].onStack&&(d.lowlink=Math.min(d.lowlink,a[p].index)):(s(p),d.lowlink=Math.min(d.lowlink,a[p].lowlink))}),d.lowlink===d.index){var c=[],f;do f=o.pop(),a[f].onStack=!1,c.push(f);while(l!==f);i.push(c)}}return n.nodes().forEach(function(l){e.has(a,l)||s(l)}),i}return Wi}var Gi,Cu;function cT(){if(Cu)return Gi;Cu=1;var e=Ke(),t=mm();Gi=n;function n(r){return e.filter(t(r),function(o){return o.length>1||o.length===1&&r.hasEdge(o[0],o[0])})}return Gi}var Ki,_u;function dT(){if(_u)return Ki;_u=1;var e=Ke();Ki=n;var t=e.constant(1);function n(o,a,i){return r(o,a||t,i||function(s){return o.outEdges(s)})}function r(o,a,i){var s={},l=o.nodes();return l.forEach(function(d){s[d]={},s[d][d]={distance:0},l.forEach(function(c){d!==c&&(s[d][c]={distance:Number.POSITIVE_INFINITY})}),i(d).forEach(function(c){var f=c.v===d?c.w:c.v,p=a(c);s[d][f]={distance:p,predecessor:d}})}),l.forEach(function(d){var c=s[d];l.forEach(function(f){var p=s[f];l.forEach(function(g){var h=p[d],m=c[g],v=p[g],S=h.distance+m.distance;S<v.distance&&(v.distance=S,v.predecessor=m.predecessor)})})}),s}return Ki}var Qi,Eu;function gm(){if(Eu)return Qi;Eu=1;var e=Ke();Qi=t,t.CycleException=n;function t(r){var o={},a={},i=[];function s(l){if(e.has(a,l))throw new n;e.has(o,l)||(a[l]=!0,o[l]=!0,e.each(r.predecessors(l),s),delete a[l],i.push(l))}if(e.each(r.sinks(),s),e.size(o)!==r.nodeCount())throw new n;return i}function n(){}return n.prototype=new Error,Qi}var Xi,xu;function uT(){if(xu)return Xi;xu=1;var e=gm();Xi=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Xi}var Zi,Tu;function ym(){if(Tu)return Zi;Tu=1;var e=Ke();Zi=t;function t(r,o,a){e.isArray(o)||(o=[o]);var i=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],l={};return e.each(o,function(d){if(!r.hasNode(d))throw new Error("Graph does not have node: "+d);n(r,d,a==="post",l,i,s)}),s}function n(r,o,a,i,s,l){e.has(i,o)||(i[o]=!0,a||l.push(o),e.each(s(o),function(d){n(r,d,a,i,s,l)}),a&&l.push(o))}return Zi}var Ji,Ou;function fT(){if(Ou)return Ji;Ou=1;var e=ym();Ji=t;function t(n,r){return e(n,r,"post")}return Ji}var es,Iu;function pT(){if(Iu)return es;Iu=1;var e=ym();es=t;function t(n,r){return e(n,r,"pre")}return es}var ts,Nu;function hT(){if(Nu)return ts;Nu=1;var e=Ke(),t=ec(),n=pm();ts=r;function r(o,a){var i=new t,s={},l=new n,d;function c(p){var g=p.v===d?p.w:p.v,h=l.priority(g);if(h!==void 0){var m=a(p);m<h&&(s[g]=d,l.decrease(g,m))}}if(o.nodeCount()===0)return i;e.each(o.nodes(),function(p){l.add(p,Number.POSITIVE_INFINITY),i.setNode(p)}),l.decrease(o.nodes()[0],0);for(var f=!1;l.size()>0;){if(d=l.removeMin(),e.has(s,d))i.setEdge(d,s[d]);else{if(f)throw new Error("Input graph is not connected: "+o);f=!0}o.nodeEdges(d).forEach(c)}return i}return ts}var ns,Ru;function mT(){return Ru||(Ru=1,ns={components:sT(),dijkstra:hm(),dijkstraAll:lT(),findCycles:cT(),floydWarshall:dT(),isAcyclic:uT(),postorder:fT(),preorder:pT(),prim:hT(),tarjan:mm(),topsort:gm()}),ns}var rs,Au;function gT(){if(Au)return rs;Au=1;var e=aT();return rs={Graph:e.Graph,json:iT(),alg:mT(),version:e.version},rs}var Da;if(typeof za=="function")try{Da=gT()}catch{}Da||(Da=window.graphlib);var et=Da,os,ku;function yT(){if(ku)return os;ku=1;var e=nn,t=pp,n=Dl;function r(o){return function(a,i,s){var l=Object(a);if(!t(a)){var d=e(i);a=n(a),i=function(f){return d(l[f],f,l)}}var c=o(a,i,s);return c>-1?l[d?a[c]:c]:void 0}}return os=r,os}var as,Lu;function vT(){if(Lu)return as;Lu=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return as=t,as}var is,qu;function bT(){if(qu)return is;qu=1;var e=vT(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return is=n,is}var ss,Du;function ST(){if(Du)return ss;Du=1;var e=bT(),t=mp,n=yp,r=0/0,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt;function l(d){if(typeof d=="number")return d;if(n(d))return r;if(t(d)){var c=typeof d.valueOf=="function"?d.valueOf():d;d=t(c)?c+"":c}if(typeof d!="string")return d===0?d:+d;d=e(d);var f=a.test(d);return f||i.test(d)?s(d.slice(2),f?2:8):o.test(d)?r:+d}return ss=l,ss}var ls,Pu;function vm(){if(Pu)return ls;Pu=1;var e=ST(),t=1/0,n=17976931348623157e292;function r(o){if(!o)return o===0?o:0;if(o=e(o),o===t||o===-t){var a=o<0?-1:1;return a*n}return o===o?o:0}return ls=r,ls}var cs,Mu;function wT(){if(Mu)return cs;Mu=1;var e=vm();function t(n){var r=e(n),o=r%1;return r===r?o?r-o:r:0}return cs=t,cs}var ds,Vu;function CT(){if(Vu)return ds;Vu=1;var e=Gv,t=nn,n=wT(),r=Math.max;function o(a,i,s){var l=a==null?0:a.length;if(!l)return-1;var d=s==null?0:n(s);return d<0&&(d=r(l+d,0)),e(a,t(i),d)}return ds=o,ds}var us,Bu;function _T(){if(Bu)return us;Bu=1;var e=yT(),t=CT(),n=e(t);return us=n,us}var fs,Fu;function ET(){if(Fu)return fs;Fu=1;var e=xv,t=Vv,n=Tv;function r(o,a){return o==null?o:e(o,t(a),n)}return fs=r,fs}var ps,$u;function tc(){if($u)return ps;$u=1;var e=yp;function t(n,r,o){for(var a=-1,i=n.length;++a<i;){var s=n[a],l=r(s);if(l!=null&&(d===void 0?l===l&&!e(l):o(l,d)))var d=l,c=s}return c}return ps=t,ps}var hs,Hu;function xT(){if(Hu)return hs;Hu=1;function e(t,n){return t>n}return hs=e,hs}var ms,zu;function TT(){if(zu)return ms;zu=1;var e=tc(),t=xT(),n=vp;function r(o){return o&&o.length?e(o,n,t):void 0}return ms=r,ms}var gs,Uu;function OT(){if(Uu)return gs;Uu=1;var e=Fv,t=Bv,n=t(function(r,o,a){e(r,o,a)});return gs=n,gs}var ys,Yu;function bm(){if(Yu)return ys;Yu=1;function e(t,n){return t<n}return ys=e,ys}var vs,ju;function IT(){if(ju)return vs;ju=1;var e=tc(),t=bm(),n=vp;function r(o){return o&&o.length?e(o,n,t):void 0}return vs=r,vs}var bs,Wu;function NT(){if(Wu)return bs;Wu=1;var e=tc(),t=nn,n=bm();function r(o,a){return o&&o.length?e(o,t(a),n):void 0}return bs=r,bs}var Ss,Gu;function RT(){if(Gu)return Ss;Gu=1;var e=Ov,t=function(){return e.Date.now()};return Ss=t,Ss}var ws,Ku;function AT(){if(Ku)return ws;Ku=1;var e=Math.ceil,t=Math.max;function n(r,o,a,i){for(var s=-1,l=t(e((o-r)/(a||1)),0),d=Array(l);l--;)d[i?l:++s]=r,r+=a;return d}return ws=n,ws}var Cs,Qu;function kT(){if(Qu)return Cs;Qu=1;var e=AT(),t=$v,n=vm();function r(o){return function(a,i,s){return s&&typeof s!="number"&&t(a,i,s)&&(i=s=void 0),a=n(a),i===void 0?(i=a,a=0):i=n(i),s=s===void 0?a<i?1:-1:n(s),e(a,i,s,o)}}return Cs=r,Cs}var _s,Xu;function LT(){if(Xu)return _s;Xu=1;var e=kT(),t=e();return _s=t,_s}var Es,Zu;function qT(){if(Zu)return Es;Zu=1;var e=Iv,t=0;function n(r){var o=++t;return e(r)+o}return Es=n,Es}var xs,Ju;function DT(){if(Ju)return xs;Ju=1;function e(t,n,r){for(var o=-1,a=t.length,i=n.length,s={};++o<a;){var l=o<i?n[o]:void 0;r(s,t[o],l)}return s}return xs=e,xs}var Ts,ef;function PT(){if(ef)return Ts;ef=1;var e=Nv,t=DT();function n(r,o){return t(r||[],o||[],e)}return Ts=n,Ts}var Pa;if(typeof za=="function")try{Pa={cloneDeep:Hv,constant:gp,defaults:zv,each:im(),filter:sm(),find:_T(),flatten:Rv,forEach:bp,forIn:ET(),has:lm(),isUndefined:cm(),last:Uv,map:dm(),mapValues:Av,max:TT(),merge:OT(),min:IT(),minBy:NT(),now:RT(),pick:kv,range:LT(),reduce:um(),sortBy:Yv,uniqueId:qT(),values:fm(),zipObject:PT()}}catch{}Pa||(Pa=window._);var ye=Pa,MT=Xa;function Xa(){var e={};e._next=e._prev=e,this._sentinel=e}Xa.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Sm(t),t};Xa.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Sm(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};Xa.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,VT)),n=n._prev;return"["+e.join(", ")+"]"};function Sm(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function VT(e,t){if(e!=="_next"&&e!=="_prev")return t}var yt=ye,BT=et.Graph,FT=MT,$T=zT,HT=yt.constant(1);function zT(e,t){if(e.nodeCount()<=1)return[];var n=YT(e,t||HT),r=UT(n.graph,n.buckets,n.zeroIdx);return yt.flatten(yt.map(r,function(o){return e.outEdges(o.v,o.w)}),!0)}function UT(e,t,n){for(var r=[],o=t[t.length-1],a=t[0],i;e.nodeCount();){for(;i=a.dequeue();)Os(e,t,n,i);for(;i=o.dequeue();)Os(e,t,n,i);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(i=t[s].dequeue(),i){r=r.concat(Os(e,t,n,i,!0));break}}}return r}function Os(e,t,n,r,o){var a=o?[]:void 0;return yt.forEach(e.inEdges(r.v),function(i){var s=e.edge(i),l=e.node(i.v);o&&a.push({v:i.v,w:i.w}),l.out-=s,sl(t,n,l)}),yt.forEach(e.outEdges(r.v),function(i){var s=e.edge(i),l=i.w,d=e.node(l);d.in-=s,sl(t,n,d)}),e.removeNode(r.v),a}function YT(e,t){var n=new BT,r=0,o=0;yt.forEach(e.nodes(),function(s){n.setNode(s,{v:s,in:0,out:0})}),yt.forEach(e.edges(),function(s){var l=n.edge(s.v,s.w)||0,d=t(s),c=l+d;n.setEdge(s.v,s.w,c),o=Math.max(o,n.node(s.v).out+=d),r=Math.max(r,n.node(s.w).in+=d)});var a=yt.range(o+r+3).map(function(){return new FT}),i=r+1;return yt.forEach(n.nodes(),function(s){sl(a,i,n.node(s))}),{graph:n,buckets:a,zeroIdx:i}}function sl(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var Ht=ye,jT=$T,WT={run:GT,undo:QT};function GT(e){var t=e.graph().acyclicer==="greedy"?jT(e,n(e)):KT(e);Ht.forEach(t,function(r){var o=e.edge(r);e.removeEdge(r),o.forwardName=r.name,o.reversed=!0,e.setEdge(r.w,r.v,o,Ht.uniqueId("rev"))});function n(r){return function(o){return r.edge(o).weight}}}function KT(e){var t=[],n={},r={};function o(a){Ht.has(r,a)||(r[a]=!0,n[a]=!0,Ht.forEach(e.outEdges(a),function(i){Ht.has(n,i.w)?t.push(i):o(i.w)}),delete n[a])}return Ht.forEach(e.nodes(),o),t}function QT(e){Ht.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var ce=ye,wm=et.Graph,Pe={addDummyNode:Cm,simplify:XT,asNonCompoundGraph:ZT,successorWeights:JT,predecessorWeights:eO,intersectRect:tO,buildLayerMatrix:nO,normalizeRanks:rO,removeEmptyRanks:oO,addBorderNode:aO,maxRank:_m,partition:iO,time:sO,notime:lO};function Cm(e,t,n,r){var o;do o=ce.uniqueId(r);while(e.hasNode(o));return n.dummy=t,e.setNode(o,n),o}function XT(e){var t=new wm().setGraph(e.graph());return ce.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),ce.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})}),t}function ZT(e){var t=new wm({multigraph:e.isMultigraph()}).setGraph(e.graph());return ce.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),ce.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function JT(e){var t=ce.map(e.nodes(),function(n){var r={};return ce.forEach(e.outEdges(n),function(o){r[o.w]=(r[o.w]||0)+e.edge(o).weight}),r});return ce.zipObject(e.nodes(),t)}function eO(e){var t=ce.map(e.nodes(),function(n){var r={};return ce.forEach(e.inEdges(n),function(o){r[o.v]=(r[o.v]||0)+e.edge(o).weight}),r});return ce.zipObject(e.nodes(),t)}function tO(e,t){var n=e.x,r=e.y,o=t.x-n,a=t.y-r,i=e.width/2,s=e.height/2;if(!o&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var l,d;return Math.abs(a)*i>Math.abs(o)*s?(a<0&&(s=-s),l=s*o/a,d=s):(o<0&&(i=-i),l=i,d=i*a/o),{x:n+l,y:r+d}}function nO(e){var t=ce.map(ce.range(_m(e)+1),function(){return[]});return ce.forEach(e.nodes(),function(n){var r=e.node(n),o=r.rank;ce.isUndefined(o)||(t[o][r.order]=n)}),t}function rO(e){var t=ce.min(ce.map(e.nodes(),function(n){return e.node(n).rank}));ce.forEach(e.nodes(),function(n){var r=e.node(n);ce.has(r,"rank")&&(r.rank-=t)})}function oO(e){var t=ce.min(ce.map(e.nodes(),function(a){return e.node(a).rank})),n=[];ce.forEach(e.nodes(),function(a){var i=e.node(a).rank-t;n[i]||(n[i]=[]),n[i].push(a)});var r=0,o=e.graph().nodeRankFactor;ce.forEach(n,function(a,i){ce.isUndefined(a)&&i%o!==0?--r:r&&ce.forEach(a,function(s){e.node(s).rank+=r})})}function aO(e,t,n,r){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=r),Cm(e,"border",o,t)}function _m(e){return ce.max(ce.map(e.nodes(),function(t){var n=e.node(t).rank;if(!ce.isUndefined(n))return n}))}function iO(e,t){var n={lhs:[],rhs:[]};return ce.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function sO(e,t){var n=ce.now();try{return t()}finally{console.log(e+" time: "+(ce.now()-n)+"ms")}}function lO(e,t){return t()}var Em=ye,cO=Pe,dO={run:uO,undo:pO};function uO(e){e.graph().dummyChains=[],Em.forEach(e.edges(),function(t){fO(e,t)})}function fO(e,t){var n=t.v,r=e.node(n).rank,o=t.w,a=e.node(o).rank,i=t.name,s=e.edge(t),l=s.labelRank;if(a!==r+1){e.removeEdge(t);var d,c,f;for(f=0,++r;r<a;++f,++r)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:t,rank:r},d=cO.addDummyNode(e,"edge",c,"_d"),r===l&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),e.setEdge(n,d,{weight:s.weight},i),f===0&&e.graph().dummyChains.push(d),n=d;e.setEdge(n,o,{weight:s.weight},i)}}function pO(e){Em.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,o;for(e.setEdge(n.edgeObj,r);n.dummy;)o=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=o,n=e.node(t)})}var Gr=ye,Za={longestPath:hO,slack:mO};function hO(e){var t={};function n(r){var o=e.node(r);if(Gr.has(t,r))return o.rank;t[r]=!0;var a=Gr.min(Gr.map(e.outEdges(r),function(i){return n(i.w)-e.edge(i).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),o.rank=a}Gr.forEach(e.sources(),n)}function mO(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Ma=ye,gO=et.Graph,Va=Za.slack,xm=yO;function yO(e){var t=new gO({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var o,a;vO(t,e)<r;)o=bO(t,e),a=t.hasNode(o.v)?Va(e,o):-Va(e,o),SO(t,e,a);return t}function vO(e,t){function n(r){Ma.forEach(t.nodeEdges(r),function(o){var a=o.v,i=r===a?o.w:a;!e.hasNode(i)&&!Va(t,o)&&(e.setNode(i,{}),e.setEdge(r,i,{}),n(i))})}return Ma.forEach(e.nodes(),n),e.nodeCount()}function bO(e,t){return Ma.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return Va(t,n)})}function SO(e,t,n){Ma.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var Ct=ye,wO=xm,CO=Za.slack,_O=Za.longestPath,EO=et.alg.preorder,xO=et.alg.postorder,TO=Pe.simplify,OO=an;an.initLowLimValues=rc;an.initCutValues=nc;an.calcCutValue=Tm;an.leaveEdge=Im;an.enterEdge=Nm;an.exchangeEdges=Rm;function an(e){e=TO(e),_O(e);var t=wO(e);rc(t),nc(t,e);for(var n,r;n=Im(t);)r=Nm(t,e,n),Rm(t,e,n,r)}function nc(e,t){var n=xO(e,e.nodes());n=n.slice(0,n.length-1),Ct.forEach(n,function(r){IO(e,t,r)})}function IO(e,t,n){var r=e.node(n),o=r.parent;e.edge(n,o).cutvalue=Tm(e,t,n)}function Tm(e,t,n){var r=e.node(n),o=r.parent,a=!0,i=t.edge(n,o),s=0;return i||(a=!1,i=t.edge(o,n)),s=i.weight,Ct.forEach(t.nodeEdges(n),function(l){var d=l.v===n,c=d?l.w:l.v;if(c!==o){var f=d===a,p=t.edge(l).weight;if(s+=f?p:-p,RO(e,n,c)){var g=e.edge(n,c).cutvalue;s+=f?-g:g}}}),s}function rc(e,t){arguments.length<2&&(t=e.nodes()[0]),Om(e,{},1,t)}function Om(e,t,n,r,o){var a=n,i=e.node(r);return t[r]=!0,Ct.forEach(e.neighbors(r),function(s){Ct.has(t,s)||(n=Om(e,t,n,s,r))}),i.low=a,i.lim=n++,o?i.parent=o:delete i.parent,n}function Im(e){return Ct.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Nm(e,t,n){var r=n.v,o=n.w;t.hasEdge(r,o)||(r=n.w,o=n.v);var a=e.node(r),i=e.node(o),s=a,l=!1;a.lim>i.lim&&(s=i,l=!0);var d=Ct.filter(t.edges(),function(c){return l===tf(e,e.node(c.v),s)&&l!==tf(e,e.node(c.w),s)});return Ct.minBy(d,function(c){return CO(t,c)})}function Rm(e,t,n,r){var o=n.v,a=n.w;e.removeEdge(o,a),e.setEdge(r.v,r.w,{}),rc(e),nc(e,t),NO(e,t)}function NO(e,t){var n=Ct.find(e.nodes(),function(o){return!t.node(o).parent}),r=EO(e,n);r=r.slice(1),Ct.forEach(r,function(o){var a=e.node(o).parent,i=t.edge(o,a),s=!1;i||(i=t.edge(a,o),s=!0),t.node(o).rank=t.node(a).rank+(s?i.minlen:-i.minlen)})}function RO(e,t,n){return e.hasEdge(t,n)}function tf(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var AO=Za,Am=AO.longestPath,kO=xm,LO=OO,qO=DO;function DO(e){switch(e.graph().ranker){case"network-simplex":nf(e);break;case"tight-tree":MO(e);break;case"longest-path":PO(e);break;default:nf(e)}}var PO=Am;function MO(e){Am(e),kO(e)}function nf(e){LO(e)}var ll=ye,VO=BO;function BO(e){var t=$O(e);ll.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),o=r.edgeObj,a=FO(e,t,o.v,o.w),i=a.path,s=a.lca,l=0,d=i[l],c=!0;n!==o.w;){if(r=e.node(n),c){for(;(d=i[l])!==s&&e.node(d).maxRank<r.rank;)l++;d===s&&(c=!1)}if(!c){for(;l<i.length-1&&e.node(d=i[l+1]).minRank<=r.rank;)l++;d=i[l]}e.setParent(n,d),n=e.successors(n)[0]}})}function FO(e,t,n,r){var o=[],a=[],i=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim),l,d;l=n;do l=e.parent(l),o.push(l);while(l&&(t[l].low>i||s>t[l].lim));for(d=l,l=r;(l=e.parent(l))!==d;)a.push(l);return{path:o.concat(a.reverse()),lca:d}}function $O(e){var t={},n=0;function r(o){var a=n;ll.forEach(e.children(o),r),t[o]={low:a,lim:n++}}return ll.forEach(e.children(),r),t}var vt=ye,cl=Pe,HO={run:zO,cleanup:jO};function zO(e){var t=cl.addDummyNode(e,"root",{},"_root"),n=UO(e),r=vt.max(vt.values(n))-1,o=2*r+1;e.graph().nestingRoot=t,vt.forEach(e.edges(),function(i){e.edge(i).minlen*=o});var a=YO(e)+1;vt.forEach(e.children(),function(i){km(e,t,o,a,r,n,i)}),e.graph().nodeRankFactor=o}function km(e,t,n,r,o,a,i){var s=e.children(i);if(!s.length){i!==t&&e.setEdge(t,i,{weight:0,minlen:n});return}var l=cl.addBorderNode(e,"_bt"),d=cl.addBorderNode(e,"_bb"),c=e.node(i);e.setParent(l,i),c.borderTop=l,e.setParent(d,i),c.borderBottom=d,vt.forEach(s,function(f){km(e,t,n,r,o,a,f);var p=e.node(f),g=p.borderTop?p.borderTop:f,h=p.borderBottom?p.borderBottom:f,m=p.borderTop?r:2*r,v=g!==h?1:o-a[i]+1;e.setEdge(l,g,{weight:m,minlen:v,nestingEdge:!0}),e.setEdge(h,d,{weight:m,minlen:v,nestingEdge:!0})}),e.parent(i)||e.setEdge(t,l,{weight:0,minlen:o+a[i]})}function UO(e){var t={};function n(r,o){var a=e.children(r);a&&a.length&&vt.forEach(a,function(i){n(i,o+1)}),t[r]=o}return vt.forEach(e.children(),function(r){n(r,1)}),t}function YO(e){return vt.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function jO(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,vt.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var Is=ye,WO=Pe,GO=KO;function KO(e){function t(n){var r=e.children(n),o=e.node(n);if(r.length&&Is.forEach(r,t),Is.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var a=o.minRank,i=o.maxRank+1;a<i;++a)rf(e,"borderLeft","_bl",n,o,a),rf(e,"borderRight","_br",n,o,a)}}Is.forEach(e.children(),t)}function rf(e,t,n,r,o,a){var i={width:0,height:0,rank:a,borderType:t},s=o[t][a-1],l=WO.addDummyNode(e,"border",i,n);o[t][a]=l,e.setParent(l,r),s&&e.setEdge(s,l,{weight:1})}var at=ye,QO={adjust:XO,undo:ZO};function XO(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Lm(e)}function ZO(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&JO(e),(t==="lr"||t==="rl")&&(eI(e),Lm(e))}function Lm(e){at.forEach(e.nodes(),function(t){of(e.node(t))}),at.forEach(e.edges(),function(t){of(e.edge(t))})}function of(e){var t=e.width;e.width=e.height,e.height=t}function JO(e){at.forEach(e.nodes(),function(t){Ns(e.node(t))}),at.forEach(e.edges(),function(t){var n=e.edge(t);at.forEach(n.points,Ns),at.has(n,"y")&&Ns(n)})}function Ns(e){e.y=-e.y}function eI(e){at.forEach(e.nodes(),function(t){Rs(e.node(t))}),at.forEach(e.edges(),function(t){var n=e.edge(t);at.forEach(n.points,Rs),at.has(n,"x")&&Rs(n)})}function Rs(e){var t=e.x;e.x=e.y,e.y=t}var pt=ye,tI=nI;function nI(e){var t={},n=pt.filter(e.nodes(),function(s){return!e.children(s).length}),r=pt.max(pt.map(n,function(s){return e.node(s).rank})),o=pt.map(pt.range(r+1),function(){return[]});function a(s){if(!pt.has(t,s)){t[s]=!0;var l=e.node(s);o[l.rank].push(s),pt.forEach(e.successors(s),a)}}var i=pt.sortBy(n,function(s){return e.node(s).rank});return pt.forEach(i,a),o}var Tt=ye,rI=oI;function oI(e,t){for(var n=0,r=1;r<t.length;++r)n+=aI(e,t[r-1],t[r]);return n}function aI(e,t,n){for(var r=Tt.zipObject(n,Tt.map(n,function(d,c){return c})),o=Tt.flatten(Tt.map(t,function(d){return Tt.sortBy(Tt.map(e.outEdges(d),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var i=2*a-1;a-=1;var s=Tt.map(new Array(i),function(){return 0}),l=0;return Tt.forEach(o.forEach(function(d){var c=d.pos+a;s[c]+=d.weight;for(var f=0;c>0;)c%2&&(f+=s[c+1]),c=c-1>>1,s[c]+=d.weight;l+=d.weight*f})),l}var af=ye,iI=sI;function sI(e,t){return af.map(t,function(n){var r=e.inEdges(n);if(r.length){var o=af.reduce(r,function(a,i){var s=e.edge(i),l=e.node(i.v);return{sum:a.sum+s.weight*l.order,weight:a.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:n}})}var Be=ye,lI=cI;function cI(e,t){var n={};Be.forEach(e,function(o,a){var i=n[o.v]={indegree:0,in:[],out:[],vs:[o.v],i:a};Be.isUndefined(o.barycenter)||(i.barycenter=o.barycenter,i.weight=o.weight)}),Be.forEach(t.edges(),function(o){var a=n[o.v],i=n[o.w];!Be.isUndefined(a)&&!Be.isUndefined(i)&&(i.indegree++,a.out.push(n[o.w]))});var r=Be.filter(n,function(o){return!o.indegree});return dI(r)}function dI(e){var t=[];function n(a){return function(i){i.merged||(Be.isUndefined(i.barycenter)||Be.isUndefined(a.barycenter)||i.barycenter>=a.barycenter)&&uI(a,i)}}function r(a){return function(i){i.in.push(a),--i.indegree===0&&e.push(i)}}for(;e.length;){var o=e.pop();t.push(o),Be.forEach(o.in.reverse(),n(o)),Be.forEach(o.out,r(o))}return Be.map(Be.filter(t,function(a){return!a.merged}),function(a){return Be.pick(a,["vs","i","barycenter","weight"])})}function uI(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var Yn=ye,fI=Pe,pI=hI;function hI(e,t){var n=fI.partition(e,function(c){return Yn.has(c,"barycenter")}),r=n.lhs,o=Yn.sortBy(n.rhs,function(c){return-c.i}),a=[],i=0,s=0,l=0;r.sort(mI(!!t)),l=sf(a,o,l),Yn.forEach(r,function(c){l+=c.vs.length,a.push(c.vs),i+=c.barycenter*c.weight,s+=c.weight,l=sf(a,o,l)});var d={vs:Yn.flatten(a,!0)};return s&&(d.barycenter=i/s,d.weight=s),d}function sf(e,t,n){for(var r;t.length&&(r=Yn.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function mI(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var At=ye,gI=iI,yI=lI,vI=pI,bI=qm;function qm(e,t,n,r){var o=e.children(t),a=e.node(t),i=a?a.borderLeft:void 0,s=a?a.borderRight:void 0,l={};i&&(o=At.filter(o,function(h){return h!==i&&h!==s}));var d=gI(e,o);At.forEach(d,function(h){if(e.children(h.v).length){var m=qm(e,h.v,n,r);l[h.v]=m,At.has(m,"barycenter")&&wI(h,m)}});var c=yI(d,n);SI(c,l);var f=vI(c,r);if(i&&(f.vs=At.flatten([i,f.vs,s],!0),e.predecessors(i).length)){var p=e.node(e.predecessors(i)[0]),g=e.node(e.predecessors(s)[0]);At.has(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+p.order+g.order)/(f.weight+2),f.weight+=2}return f}function SI(e,t){At.forEach(e,function(n){n.vs=At.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function wI(e,t){At.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var jn=ye,CI=et.Graph,_I=EI;function EI(e,t,n){var r=xI(e),o=new CI({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(a){return e.node(a)});return jn.forEach(e.nodes(),function(a){var i=e.node(a),s=e.parent(a);(i.rank===t||i.minRank<=t&&t<=i.maxRank)&&(o.setNode(a),o.setParent(a,s||r),jn.forEach(e[n](a),function(l){var d=l.v===a?l.w:l.v,c=o.edge(d,a),f=jn.isUndefined(c)?0:c.weight;o.setEdge(d,a,{weight:e.edge(l).weight+f})}),jn.has(i,"minRank")&&o.setNode(a,{borderLeft:i.borderLeft[t],borderRight:i.borderRight[t]}))}),o}function xI(e){for(var t;e.hasNode(t=jn.uniqueId("_root")););return t}var TI=ye,OI=II;function II(e,t,n){var r={},o;TI.forEach(n,function(a){for(var i=e.parent(a),s,l;i;){if(s=e.parent(i),s?(l=r[s],r[s]=i):(l=o,o=i),l&&l!==i){t.setEdge(l,i);return}i=s}})}var Lt=ye,NI=tI,RI=rI,AI=bI,kI=_I,LI=OI,qI=et.Graph,lf=Pe,DI=PI;function PI(e){var t=lf.maxRank(e),n=cf(e,Lt.range(1,t+1),"inEdges"),r=cf(e,Lt.range(t-1,-1,-1),"outEdges"),o=NI(e);df(e,o);for(var a=Number.POSITIVE_INFINITY,i,s=0,l=0;l<4;++s,++l){MI(s%2?n:r,s%4>=2),o=lf.buildLayerMatrix(e);var d=RI(e,o);d<a&&(l=0,i=Lt.cloneDeep(o),a=d)}df(e,i)}function cf(e,t,n){return Lt.map(t,function(r){return kI(e,r,n)})}function MI(e,t){var n=new qI;Lt.forEach(e,function(r){var o=r.graph().root,a=AI(r,o,n,t);Lt.forEach(a.vs,function(i,s){r.node(i).order=s}),LI(r,n,a.vs)})}function df(e,t){Lt.forEach(t,function(n){Lt.forEach(n,function(r,o){e.node(r).order=o})})}var X=ye,VI=et.Graph,BI=Pe,FI={positionX:zI,findType1Conflicts:Dm,findType2Conflicts:Pm,addConflict:oc,hasConflict:Mm,verticalAlignment:Vm,horizontalCompaction:Bm,alignCoordinates:$m,findSmallestWidthAlignment:Fm,balance:Hm};function Dm(e,t){var n={};function r(o,a){var i=0,s=0,l=o.length,d=X.last(a);return X.forEach(a,function(c,f){var p=$I(e,c),g=p?e.node(p).order:l;(p||c===d)&&(X.forEach(a.slice(s,f+1),function(h){X.forEach(e.predecessors(h),function(m){var v=e.node(m),S=v.order;(S<i||g<S)&&!(v.dummy&&e.node(h).dummy)&&oc(n,m,h)})}),s=f+1,i=g)}),a}return X.reduce(t,r),n}function Pm(e,t){var n={};function r(a,i,s,l,d){var c;X.forEach(X.range(i,s),function(f){c=a[f],e.node(c).dummy&&X.forEach(e.predecessors(c),function(p){var g=e.node(p);g.dummy&&(g.order<l||g.order>d)&&oc(n,p,c)})})}function o(a,i){var s=-1,l,d=0;return X.forEach(i,function(c,f){if(e.node(c).dummy==="border"){var p=e.predecessors(c);p.length&&(l=e.node(p[0]).order,r(i,d,f,s,l),d=f,s=l)}r(i,d,i.length,l,a.length)}),i}return X.reduce(t,o),n}function $I(e,t){if(e.node(t).dummy)return X.find(e.predecessors(t),function(n){return e.node(n).dummy})}function oc(e,t,n){if(t>n){var r=t;t=n,n=r}var o=e[t];o||(e[t]=o={}),o[n]=!0}function Mm(e,t,n){if(t>n){var r=t;t=n,n=r}return X.has(e[t],n)}function Vm(e,t,n,r){var o={},a={},i={};return X.forEach(t,function(s){X.forEach(s,function(l,d){o[l]=l,a[l]=l,i[l]=d})}),X.forEach(t,function(s){var l=-1;X.forEach(s,function(d){var c=r(d);if(c.length){c=X.sortBy(c,function(m){return i[m]});for(var f=(c.length-1)/2,p=Math.floor(f),g=Math.ceil(f);p<=g;++p){var h=c[p];a[d]===d&&l<i[h]&&!Mm(n,d,h)&&(a[h]=d,a[d]=o[d]=o[h],l=i[h])}}})}),{root:o,align:a}}function Bm(e,t,n,r,o){var a={},i=HI(e,t,n,o),s=o?"borderLeft":"borderRight";function l(f,p){for(var g=i.nodes(),h=g.pop(),m={};h;)m[h]?f(h):(m[h]=!0,g.push(h),g=g.concat(p(h))),h=g.pop()}function d(f){a[f]=i.inEdges(f).reduce(function(p,g){return Math.max(p,a[g.v]+i.edge(g))},0)}function c(f){var p=i.outEdges(f).reduce(function(h,m){return Math.min(h,a[m.w]-i.edge(m))},Number.POSITIVE_INFINITY),g=e.node(f);p!==Number.POSITIVE_INFINITY&&g.borderType!==s&&(a[f]=Math.max(a[f],p))}return l(d,i.predecessors.bind(i)),l(c,i.successors.bind(i)),X.forEach(r,function(f){a[f]=a[n[f]]}),a}function HI(e,t,n,r){var o=new VI,a=e.graph(),i=UI(a.nodesep,a.edgesep,r);return X.forEach(t,function(s){var l;X.forEach(s,function(d){var c=n[d];if(o.setNode(c),l){var f=n[l],p=o.edge(f,c);o.setEdge(f,c,Math.max(i(e,d,l),p||0))}l=d})}),o}function Fm(e,t){return X.minBy(X.values(t),function(n){var r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return X.forIn(n,function(a,i){var s=YI(e,i)/2;r=Math.max(a+s,r),o=Math.min(a-s,o)}),r-o})}function $m(e,t){var n=X.values(t),r=X.min(n),o=X.max(n);X.forEach(["u","d"],function(a){X.forEach(["l","r"],function(i){var s=a+i,l=e[s],d;if(l!==t){var c=X.values(l);d=i==="l"?r-X.min(c):o-X.max(c),d&&(e[s]=X.mapValues(l,function(f){return f+d}))}})})}function Hm(e,t){return X.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var o=X.sortBy(X.map(e,r));return(o[1]+o[2])/2})}function zI(e){var t=BI.buildLayerMatrix(e),n=X.merge(Dm(e,t),Pm(e,t)),r={},o;X.forEach(["u","d"],function(i){o=i==="u"?t:X.values(t).reverse(),X.forEach(["l","r"],function(s){s==="r"&&(o=X.map(o,function(f){return X.values(f).reverse()}));var l=(i==="u"?e.predecessors:e.successors).bind(e),d=Vm(e,o,n,l),c=Bm(e,o,d.root,d.align,s==="r");s==="r"&&(c=X.mapValues(c,function(f){return-f})),r[i+s]=c})});var a=Fm(e,r);return $m(r,a),Hm(r,e.graph().align)}function UI(e,t,n){return function(r,o,a){var i=r.node(o),s=r.node(a),l=0,d;if(l+=i.width/2,X.has(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":d=-i.width/2;break;case"r":d=i.width/2;break}if(d&&(l+=n?d:-d),d=0,l+=(i.dummy?t:e)/2,l+=(s.dummy?t:e)/2,l+=s.width/2,X.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":d=s.width/2;break;case"r":d=-s.width/2;break}return d&&(l+=n?d:-d),d=0,l}}function YI(e,t){return e.node(t).width}var Wn=ye,zm=Pe,jI=FI.positionX,WI=GI;function GI(e){e=zm.asNonCompoundGraph(e),KI(e),Wn.forEach(jI(e),function(t,n){e.node(n).x=t})}function KI(e){var t=zm.buildLayerMatrix(e),n=e.graph().ranksep,r=0;Wn.forEach(t,function(o){var a=Wn.max(Wn.map(o,function(i){return e.node(i).height}));Wn.forEach(o,function(i){e.node(i).y=r+a/2}),r+=a+n})}var te=ye,uf=WT,ff=dO,QI=qO,XI=Pe.normalizeRanks,ZI=VO,JI=Pe.removeEmptyRanks,pf=HO,eN=GO,hf=QO,tN=DI,nN=WI,Mt=Pe,rN=et.Graph,oN=aN;function aN(e,t){var n=t&&t.debugTiming?Mt.time:Mt.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return gN(e)});n("  runLayout",function(){iN(r,n)}),n("  updateInputGraph",function(){sN(e,r)})})}function iN(e,t){t("    makeSpaceForEdgeLabels",function(){yN(e)}),t("    removeSelfEdges",function(){TN(e)}),t("    acyclic",function(){uf.run(e)}),t("    nestingGraph.run",function(){pf.run(e)}),t("    rank",function(){QI(Mt.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){vN(e)}),t("    removeEmptyRanks",function(){JI(e)}),t("    nestingGraph.cleanup",function(){pf.cleanup(e)}),t("    normalizeRanks",function(){XI(e)}),t("    assignRankMinMax",function(){bN(e)}),t("    removeEdgeLabelProxies",function(){SN(e)}),t("    normalize.run",function(){ff.run(e)}),t("    parentDummyChains",function(){ZI(e)}),t("    addBorderSegments",function(){eN(e)}),t("    order",function(){tN(e)}),t("    insertSelfEdges",function(){ON(e)}),t("    adjustCoordinateSystem",function(){hf.adjust(e)}),t("    position",function(){nN(e)}),t("    positionSelfEdges",function(){IN(e)}),t("    removeBorderNodes",function(){xN(e)}),t("    normalize.undo",function(){ff.undo(e)}),t("    fixupEdgeLabelCoords",function(){_N(e)}),t("    undoCoordinateSystem",function(){hf.undo(e)}),t("    translateGraph",function(){wN(e)}),t("    assignNodeIntersects",function(){CN(e)}),t("    reversePoints",function(){EN(e)}),t("    acyclic.undo",function(){uf.undo(e)})}function sN(e,t){te.forEach(e.nodes(),function(n){var r=e.node(n),o=t.node(n);r&&(r.x=o.x,r.y=o.y,t.children(n).length&&(r.width=o.width,r.height=o.height))}),te.forEach(e.edges(),function(n){var r=e.edge(n),o=t.edge(n);r.points=o.points,te.has(o,"x")&&(r.x=o.x,r.y=o.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var lN=["nodesep","edgesep","ranksep","marginx","marginy"],cN={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},dN=["acyclicer","ranker","rankdir","align"],uN=["width","height"],fN={width:0,height:0},pN=["minlen","weight","width","height","labeloffset"],hN={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},mN=["labelpos"];function gN(e){var t=new rN({multigraph:!0,compound:!0}),n=ks(e.graph());return t.setGraph(te.merge({},cN,As(n,lN),te.pick(n,dN))),te.forEach(e.nodes(),function(r){var o=ks(e.node(r));t.setNode(r,te.defaults(As(o,uN),fN)),t.setParent(r,e.parent(r))}),te.forEach(e.edges(),function(r){var o=ks(e.edge(r));t.setEdge(r,te.merge({},hN,As(o,pN),te.pick(o,mN)))}),t}function yN(e){var t=e.graph();t.ranksep/=2,te.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function vN(e){te.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),o=e.node(t.w),a={rank:(o.rank-r.rank)/2+r.rank,e:t};Mt.addDummyNode(e,"edge-proxy",a,"_ep")}})}function bN(e){var t=0;te.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=te.max(t,r.maxRank))}),e.graph().maxRank=t}function SN(e){te.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function wN(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,o=0,a=e.graph(),i=a.marginx||0,s=a.marginy||0;function l(d){var c=d.x,f=d.y,p=d.width,g=d.height;t=Math.min(t,c-p/2),n=Math.max(n,c+p/2),r=Math.min(r,f-g/2),o=Math.max(o,f+g/2)}te.forEach(e.nodes(),function(d){l(e.node(d))}),te.forEach(e.edges(),function(d){var c=e.edge(d);te.has(c,"x")&&l(c)}),t-=i,r-=s,te.forEach(e.nodes(),function(d){var c=e.node(d);c.x-=t,c.y-=r}),te.forEach(e.edges(),function(d){var c=e.edge(d);te.forEach(c.points,function(f){f.x-=t,f.y-=r}),te.has(c,"x")&&(c.x-=t),te.has(c,"y")&&(c.y-=r)}),a.width=n-t+i,a.height=o-r+s}function CN(e){te.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),o=e.node(t.w),a,i;n.points?(a=n.points[0],i=n.points[n.points.length-1]):(n.points=[],a=o,i=r),n.points.unshift(Mt.intersectRect(r,a)),n.points.push(Mt.intersectRect(o,i))})}function _N(e){te.forEach(e.edges(),function(t){var n=e.edge(t);if(te.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function EN(e){te.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function xN(e){te.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),o=e.node(n.borderBottom),a=e.node(te.last(n.borderLeft)),i=e.node(te.last(n.borderRight));n.width=Math.abs(i.x-a.x),n.height=Math.abs(o.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}}),te.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function TN(e){te.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function ON(e){var t=Mt.buildLayerMatrix(e);te.forEach(t,function(n){var r=0;te.forEach(n,function(o,a){var i=e.node(o);i.order=a+r,te.forEach(i.selfEdges,function(s){Mt.addDummyNode(e,"selfedge",{width:s.label.width,height:s.label.height,rank:i.rank,order:a+ ++r,e:s.e,label:s.label},"_se")}),delete i.selfEdges})})}function IN(e){te.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),o=r.x+r.width/2,a=r.y,i=n.x-o,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:o+2*i/3,y:a-s},{x:o+5*i/6,y:a-s},{x:o+i,y:a},{x:o+5*i/6,y:a+s},{x:o+2*i/3,y:a+s}],n.label.x=n.x,n.label.y=n.y}})}function As(e,t){return te.mapValues(te.pick(e,t),Number)}function ks(e){var t={};return te.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var Kr=ye,NN=Pe,RN=et.Graph,AN={debugOrdering:kN};function kN(e){var t=NN.buildLayerMatrix(e),n=new RN({compound:!0,multigraph:!0}).setGraph({});return Kr.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),Kr.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),Kr.forEach(t,function(r,o){var a="layer"+o;n.setNode(a,{rank:"same"}),Kr.reduce(r,function(i,s){return n.setEdge(i,s,{style:"invis"}),s})}),n}var LN="0.8.5",Um={graphlib:et,layout:oN,debug:AN,util:{time:Pe.time,notime:Pe.notime},version:LN},mf=function(t){return t.reduce(function(n,r){var o=r[0],a=r[1];return n[o]=a,n},{})},gf=typeof window<"u"&&window.document&&window.document.createElement?E.exports.useLayoutEffect:E.exports.useEffect;function qN(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},o=t.attributes[n]||{},a=t.elements[n];!wp(a)||!Cp(a)||(Object.assign(a.style,r),Object.keys(o).forEach(function(i){var s=o[i];s===!1?a.removeAttribute(i):a.setAttribute(i,s===!0?"":s)}))})}function DN(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var o=t.elements[r],a=t.attributes[r]||{},i=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),s=i.reduce(function(l,d){return l[d]="",l},{});!wp(o)||!Cp(o)||(Object.assign(o.style,s),Object.keys(a).forEach(function(l){o.removeAttribute(l)}))})}}const PN={name:"applyStyles",enabled:!0,phase:"write",fn:qN,effect:DN,requires:["computeStyles"]};var MN=[Xv,Zv,Jv,PN,eb,tb,nb,rb,ob],VN=Qv({defaultModifiers:MN}),BN=typeof Element<"u",FN=typeof Map=="function",$N=typeof Set=="function",HN=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function wo(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,o;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!wo(e[r],t[r]))return!1;return!0}var a;if(FN&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a=e.entries();!(r=a.next()).done;)if(!t.has(r.value[0]))return!1;for(a=e.entries();!(r=a.next()).done;)if(!wo(r.value[1],t.get(r.value[0])))return!1;return!0}if($N&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a=e.entries();!(r=a.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(HN&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[r]))return!1;if(BN&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((o[r]==="_owner"||o[r]==="__v"||o[r]==="__o")&&e.$$typeof)&&!wo(e[o[r]],t[o[r]]))return!1;return!0}return e!==e&&t!==t}var zN=function(t,n){try{return wo(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}},UN=[],YN=function(t,n,r){r===void 0&&(r={});var o=E.exports.useRef(null),a={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||UN},i=E.exports.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=i[0],l=i[1],d=E.exports.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(g){var h=g.state,m=Object.keys(h.elements);Kv.exports.flushSync(function(){l({styles:mf(m.map(function(v){return[v,h.styles[v]||{}]})),attributes:mf(m.map(function(v){return[v,h.attributes[v]]}))})})},requires:["computeStyles"]}},[]),c=E.exports.useMemo(function(){var p={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[d,{name:"applyStyles",enabled:!1}])};return zN(o.current,p)?o.current||p:(o.current=p,p)},[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,d]),f=E.exports.useRef();return gf(function(){f.current&&f.current.setOptions(c)},[c]),gf(function(){if(!(t==null||n==null)){var p=r.createPopper||VN,g=p(t,n,c);return f.current=g,function(){g.destroy(),f.current=null}}},[t,n,r.createPopper]),{state:f.current?f.current.state:null,styles:s.styles,attributes:s.attributes,update:f.current?f.current.update:null,forceUpdate:f.current?f.current.forceUpdate:null}};const Co=({children:e,contentProps:t,placement:n,showCloseButton:r=!0,actionButton:o,strategy:a,style:i})=>{var _;n=n!=null?n:"bottom-start";const[s,l]=E.exports.useState(!1),[d,c]=E.exports.useState(null),[f,p]=E.exports.useState(null),[g,h]=E.exports.useState(null),{styles:m,attributes:v}=YN(d,f,{placement:n,strategy:a,modifiers:[{name:"arrow",options:{element:g}},{name:"offset",options:{offset:[0,10]}}]}),S=u(_p,{in:s,timeout:200,classNames:"fade-in-out",mountOnEnter:!0,children:I("div",{className:"Tooltip SRC-popover bootstrap-4-backport",style:{...i,...m.popper},ref:p,...v.popper,children:[u(St,{variant:"body1",children:u(Fe,{...t})}),I("div",{className:"TooltipButtonContainer",children:[o&&u(be,{variant:(_=o.variant)!=null?_:"primary-500",className:"pill",onClick:()=>{o.onClick(),o.closePopoverOnClick&&l(!1)},children:o.content}),r&&u(be,{variant:"light",className:"pill",onClick:()=>l(!1),children:"Close"})]}),u("div",{className:"arrow","data-popper-arrow":!0,ref:h,style:m.arrow})]})});return I(z,{children:[u("span",{role:"button",className:"PopoverContainer bootstrap-4-backport",onClick:()=>l(b=>!b),ref:c,children:e}),S]})};try{Co.displayName="MarkdownPopover",Co.__docgenInfo={description:"",displayName:"MarkdownPopover",props:{contentProps:{defaultValue:null,description:"",name:"contentProps",required:!0,type:{name:"MarkdownSynapseProps"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},placement:{defaultValue:null,description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"bottom"'},{value:'"right"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},actionButton:{defaultValue:null,description:"",name:"actionButton",required:!1,type:{name:"{ content: ReactElement<any, string | JSXElementConstructor<any>>; variant: string; onClick: () => void; closePopoverOnClick: boolean; }"}},strategy:{defaultValue:null,description:"",name:"strategy",required:!1,type:{name:"enum",value:[{value:'"absolute"'},{value:'"fixed"'}]}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/MarkdownPopover.tsx#MarkdownPopover"]={docgenInfo:Co.__docgenInfo,name:"MarkdownPopover",path:"src/lib/containers/MarkdownPopover.tsx#MarkdownPopover"})}catch{}const qt=({markdownText:e,helpUrl:t,placement:n="bottom",showCloseButton:r=!0,className:o=""})=>u(z,{children:u(Co,{contentProps:{markdown:e},placement:n,actionButton:t?{content:u(z,{children:"More info"}),closePopoverOnClick:!0,onClick:()=>window.open(t,"_blank"),variant:"primary"}:void 0,showCloseButton:r,strategy:"fixed",style:{maxWidth:"350px"},children:u(uv,{className:`HelpButton ${o}`})})});try{qt.displayName="HelpPopover",qt.__docgenInfo={description:"",displayName:"HelpPopover",props:{markdownText:{defaultValue:null,description:"",name:"markdownText",required:!0,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}},placement:{defaultValue:{value:"bottom"},description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"bottom"'},{value:'"right"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HelpPopover.tsx#HelpPopover"]={docgenInfo:qt.__docgenInfo,name:"HelpPopover",path:"src/lib/containers/HelpPopover.tsx#HelpPopover"})}catch{}const jN=()=>I(z,{children:[u(St,{variant:"smallText1",className:"description",children:"Undefined"}),u(qt,{placement:"top",markdownText:"Provenance tracks the relationship  between data, code and analytical results.",helpUrl:"https://help.synapse.org/docs/Provenance.1972470373.html"})]}),_o=e=>{const t=e.targetVersionNumber?`.${e.targetVersionNumber}`:"",n=`${e.targetId}${t}`;return E.exports.useMemo(()=>I(z,{children:[u("div",{children:u(fe,{options:{icon:"fileOutlined"}})}),u("span",{children:n})]}),[n])};try{_o.displayName="EntityPlaceholderNodeLabel",_o.__docgenInfo={description:"This node type is used if the user cannot access the entity for some reason",displayName:"EntityPlaceholderNodeLabel",props:{targetId:{defaultValue:null,description:"",name:"targetId",required:!0,type:{name:"string"}},targetVersionNumber:{defaultValue:null,description:"",name:"targetVersionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/EntityPlaceholderNodeLabel.tsx#EntityPlaceholderNodeLabel"]={docgenInfo:_o.__docgenInfo,name:"EntityPlaceholderNodeLabel",path:"src/lib/containers/provenance/EntityPlaceholderNodeLabel.tsx#EntityPlaceholderNodeLabel"})}catch{}var Re=(e=>(e.ENTITY="EntityNode",e.ENTITY_PLACEHOLDER="EntityPlaceholderNode",e.EXTERNAL="ExternalNode",e.ACTIVITY="ActivityNode",e.EXPAND="ExpandNode",e.UNDEFINED="UndefinedNode",e))(Re||{});const Xn=e=>{const{type:t,data:n}=e;let r;switch(t){case"EntityNode":r=u(yo,{...n});break;case"EntityPlaceholderNode":r=u(_o,{...n});break;case"ExternalNode":r=u(So,{...n});break;case"ActivityNode":r=u(mo,{...n});break;case"ExpandNode":r=u(vo,{...n});break;case"UndefinedNode":r=u(jN,{});break;default:r=I("p",{children:["Unrecognized node type: ",t]});break}const o={label:r,props:n,type:t};return{id:st(e),position:{x:100,y:100},data:o,connectable:!1,draggable:!1,className:`${t}`}},Ym=(e,t)=>{const n=st(e),r=st(t);return{id:`${n}-${r}`,source:n,target:r,animated:!0,type:mt.SimpleBezier,markerEnd:{type:br.ArrowClosed}}},st=e=>{var r,o,a,i;const{type:t,data:n}=e;switch(t){case"EntityNode":return`${n.id}.${(r=n.versionNumber)!=null?r:"latest"}`;case"EntityPlaceholderNode":return`${n.targetId}.${(o=n.targetVersionNumber)!=null?o:"latest"}`;case"ExternalNode":return`${n.url}`;case"ActivityNode":return`${n.id}`;case"ExpandNode":return`expand.node.${n.entityHeader.id}.${(a=n.entityHeader.versionNumber)!=null?a:"latest"}`;case"UndefinedNode":return`undefined.dummy.node.${n.id}.${(i=n.versionNumber)!=null?i:"latest"}`}},fn=new Um.graphlib.Graph;fn.setDefaultEdgeLabel(()=>({}));const yf=e=>e.data.type=="ExpandNode"?30:100,vf=e=>e.data.type=="ExpandNode"?30:172,WN=(e,t,n)=>{const r=n==="LR";return fn.setGraph({rankdir:n}),e.forEach(o=>{fn.setNode(o.id,{width:vf(o),height:yf(o)})}),t.forEach(o=>{fn.setEdge(o.source,o.target)}),Um.layout(fn),e.forEach(o=>{const a=fn.node(o.id);return o.targetPosition=r?W.Left:W.Top,o.sourcePosition=r?W.Right:W.Bottom,o.position={x:a.x-vf(o)/2,y:a.y-yf(o)/2},o}),{nodes:e,edges:t}},bf=(e,t)=>ab(e,t,sb).length==0;try{Xn.displayName="getProvenanceNode",Xn.__docgenInfo={description:"",displayName:"getProvenanceNode",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceUtils.tsx#getProvenanceNode"]={docgenInfo:Xn.__docgenInfo,name:"getProvenanceNode",path:"src/lib/containers/provenance/ProvenanceUtils.tsx#getProvenanceNode"})}catch{}try{st.displayName="getNodeId",st.__docgenInfo={description:"",displayName:"getNodeId",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceUtils.tsx#getNodeId"]={docgenInfo:st.__docgenInfo,name:"getNodeId",path:"src/lib/containers/provenance/ProvenanceUtils.tsx#getNodeId"})}catch{}const GN="org.sagebionetworks.repo.model.provenance.UsedEntity",Sf=e=>{const{entityHeader:t,rootEntityHeaders:n}=e;return(n==null?void 0:n.find(o=>t.id==o.id&&t.versionNumber==o.versionNumber))!==void 0},jm=(e,t)=>t.find(r=>r.id===st(e))===void 0,KN=(e,t)=>{const n={type:Re.ENTITY,data:e};return t.find(r=>r.id===st(n))},QN=(e,t,n)=>n.find(o=>o.source===st(e)&&o.target===st(t))===void 0,Rr=e=>{const{newNodeProps:t,existingNodeProps:n,nodesCopy:r,edgesCopy:o}=e;jm(t,r)&&r.push(Xn(t)),QN(t,n,o)&&o.push(Ym(t,n))},XN=e=>{const{activity:t,entityHeader:n,nodesCopy:r,edgesCopy:o}=e,a={type:Re.ACTIVITY,data:t},i={type:Re.ENTITY,data:n};Rr({newNodeProps:a,existingNodeProps:i,nodesCopy:r,edgesCopy:o})},ZN=e=>{const{entityHeader:t,itemCount:n=0,nodesCopy:r,edgesCopy:o}=e,a={type:Re.EXPAND,data:{itemCount:n,entityHeader:t}},i={type:Re.ENTITY,data:t};Rr({newNodeProps:a,existingNodeProps:i,nodesCopy:r,edgesCopy:o})},JN=e=>{const{ref:t,activity:n,nodesCopy:r,edgesCopy:o}=e,a={type:Re.ENTITY_PLACEHOLDER,data:t},i={type:Re.ACTIVITY,data:n};Rr({newNodeProps:a,existingNodeProps:i,nodesCopy:r,edgesCopy:o})},eR=e=>{const{entityHeader:t,nodesCopy:n,edgesCopy:r}=e,o={type:Re.UNDEFINED,data:t},a={type:Re.ENTITY,data:t};Rr({newNodeProps:o,existingNodeProps:a,nodesCopy:n,edgesCopy:r})},tR=e=>{const{usedURL:t,activity:n,nodesCopy:r,edgesCopy:o}=e,a={type:Re.ACTIVITY,data:n},i={type:Re.EXTERNAL,data:t};Rr({newNodeProps:i,existingNodeProps:a,nodesCopy:r,edgesCopy:o})},nR=e=>{const{entityHeader:t,activity:n,nodesCopy:r,edgesCopy:o}=e,a={type:Re.ENTITY,data:t};if(jm(a,r)&&(r.push(Xn(a)),n)){const i={type:Re.ACTIVITY,data:n};o.push(Ym(a,i))}},Ls=400,qs=.85,rR=e=>{const{entityRefs:t,containerHeight:n="200px",initialNodes:r=[],initialEdges:o=[],onNodesChangedListener:a,onEdgesChangedListener:i}=e,{accessToken:s}=ae(),[l,d]=ge.useState(r),[c,f]=ge.useState(o),[p,g,h]=Hx([]),[m,v,S]=zx([]),[_,b]=E.exports.useState(),y=Gg(),{data:w,isSuccess:C}=Yb(t,{useErrorBoundary:!0});if(C&&w.totalNumberOfResults==0){const A=t.map(R=>R.targetId).join(",");y(`Unable to load provenance for the given Synapse IDs: ${A}`)}const x=w==null?void 0:w.results,[T,N]=ge.useState(!1),k=Xl(),q=E.exports.useCallback((A,R)=>{b(R)},[]),M=E.exports.useCallback(async A=>{var B;const{entityHeader:R,nodesCopy:P,edgesCopy:$,usedInActivity:H}=A;nR({entityHeader:R,activity:H,nodesCopy:P,edgesCopy:$});try{const U=await wc(R.id,R.versionNumber,s);(!Sf({entityHeader:R,rootEntityHeaders:x})||U.used&&U.used.length>=Ls)&&ZN({entityHeader:R,itemCount:(B=U.used)==null?void 0:B.length,nodesCopy:P,edgesCopy:$})}catch(U){console.error(U),Sf({entityHeader:R,rootEntityHeaders:x})&&eR({entityHeader:R,nodesCopy:P,edgesCopy:$})}},[s,x]);E.exports.useEffect(()=>{!T&&p.length>0&&setTimeout(()=>{if(x){const A=KN(x[0],p);if(A){const R=k.getZoom(),P=R>qs?qs:R;k==null||k.setCenter(A.position.x+150,A.position.y-30,{zoom:P,duration:0})}N(!0)}})},[T,p,k,x]);const V=E.exports.useCallback(async A=>{const{entityHeader:R,nodesCopy:P,edgesCopy:$}=A;try{const H=await wc(R.id,R.versionNumber,s);if(XN({activity:H,entityHeader:R,nodesCopy:P,edgesCopy:$}),H.used&&H.used.length<Ls){const B=[];H.used.forEach(F=>{F.concreteType==GN?B.push(F.reference):tR({usedURL:F,activity:H,nodesCopy:P,edgesCopy:$})});const U=await hl(B,s),{results:j}=U;B.filter(F=>j.find(Y=>Y.id==F.targetId)==null).forEach(F=>{JN({ref:F,activity:H,nodesCopy:P,edgesCopy:$})});const L=[];j.forEach(F=>{L.push(M({entityHeader:F,nodesCopy:P,edgesCopy:$,usedInActivity:H}))}),await Promise.allSettled(L)}}catch(H){console.error(H)}},[s,M]);E.exports.useEffect(()=>{if(x&&l.length==0){const A=[...l],R=[...c],P=[];x.forEach($=>{const H=M({entityHeader:$,nodesCopy:A,edgesCopy:R});P.push(H);const B=V({entityHeader:$,nodesCopy:A,edgesCopy:R});P.push(B)}),Promise.allSettled(P).finally(()=>{d(A),f(R)})}},[M,y,V,x,t,c,l]),E.exports.useEffect(()=>{const A=_==null?void 0:_.data;if(_&&(A==null?void 0:A.type)==Re.EXPAND){const R=A.props;if(R.itemCount>Ls){Zt("Web visualization does not support expanding this many items at this time.","danger");return}else{A.label=u(Lb,{size:30});const P=l.filter(B=>B.id!=_.id),$=Kl([_],c)[0],H=c.filter(B=>B!=$);V({entityHeader:R.entityHeader,nodesCopy:P,edgesCopy:H}).finally(()=>{d(P),f(H)})}b(void 0)}},[_,l,c,V]),E.exports.useEffect(()=>{const{nodes:A,edges:R}=WN(l,c,"TB");bf(A,p)||(g(A),a&&a(A)),bf(R,m)||(v(R),i&&i(R))},[l,c,p,m,g,v,T,k,t,a,i]);const O=E.exports.useCallback(A=>{A&&A.deltaX&&A.deltaY&&window.scrollTo(window.scrollX+A.deltaX,window.scrollY+A.deltaY)},[]);return u("div",{className:"bootstrap-4-backport ProvenanceWidget",role:"graphics-doc",style:{width:"100%",height:n},children:u(nm,{defaultZoom:qs,nodes:p,edges:m,onNodeClick:q,onNodesChange:h,onEdgesChange:S,attributionPosition:"bottom-right",onConnect:void 0,zoomOnScroll:!1,onPaneScroll:O,children:u(C0,{})})})},Eo=e=>u(Uf,{children:u(rm,{children:u(rR,{...e})})}),oR=Eo;try{Eo.displayName="ProvenanceGraph",Eo.__docgenInfo={description:"",displayName:"ProvenanceGraph",props:{entityRefs:{defaultValue:null,description:"",name:"entityRefs",required:!0,type:{name:"ReferenceList"}},containerHeight:{defaultValue:null,description:"",name:"containerHeight",required:!1,type:{name:"string"}},initialNodes:{defaultValue:null,description:"",name:"initialNodes",required:!1,type:{name:"Node<any>[]"}},initialEdges:{defaultValue:null,description:"",name:"initialEdges",required:!1,type:{name:"Edge<any>[]"}},onNodesChangedListener:{defaultValue:null,description:"",name:"onNodesChangedListener",required:!1,type:{name:"((nodes: Node<any>[]) => void)"}},onEdgesChangedListener:{defaultValue:null,description:"",name:"onEdgesChangedListener",required:!1,type:{name:"((edges: Edge<any>[]) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceGraph.tsx#ProvenanceGraph"]={docgenInfo:Eo.__docgenInfo,name:"ProvenanceGraph",path:"src/lib/containers/provenance/ProvenanceGraph.tsx#ProvenanceGraph"})}catch{}function xo(e){const{entityList:t,displayHeightPx:n}=e,r=t.split(",").map(a=>{const i=a.split("/version/");return{targetId:i[0],targetVersionNumber:i.length>1?parseInt(i[1]):void 0}}),o=n?`${n}px`:void 0;return u(oR,{entityRefs:r,containerHeight:o})}try{xo.displayName="MarkdownProvenanceGraph",xo.__docgenInfo={description:"",displayName:"MarkdownProvenanceGraph",props:{entityList:{defaultValue:null,description:"",name:"entityList",required:!0,type:{name:"string"}},displayHeightPx:{defaultValue:null,description:"",name:"displayHeightPx",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownProvenanceGraph.tsx#MarkdownProvenanceGraph"]={docgenInfo:xo.__docgenInfo,name:"MarkdownProvenanceGraph",path:"src/lib/containers/markdown/widget/MarkdownProvenanceGraph.tsx#MarkdownProvenanceGraph"})}catch{}class wn extends E.exports.Component{constructor(t){super(t),this.getEntity=this.getEntity.bind(this),this.getSynapseFiles=this.getSynapseFiles.bind(this),this.state={preSignedURL:""}}getEntity(){const{synapseId:t}=this.props;t&&xn(this.context.accessToken,t).then(n=>{const r=[{associateObjectId:t,associateObjectType:Ne.FileEntity,fileHandleId:n.dataFileHandleId}];this.getSynapseFiles(r,n.dataFileHandleId)})}getSynapseFiles(t,n){en({includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:t},this.context.accessToken).then(o=>{const{preSignedURL:a}=o.requestedFiles.filter(i=>i.fileHandleId===n)[0];this.setState({preSignedURL:a})}).catch(o=>{console.error("Error on getting image ",o)})}componentDidMount(){if(!this.props.wikiId)this.getEntity();else{const{fileName:t,fileResults:n=[]}=this.props,{id:r}=n.filter(a=>a.fileName===t)[0],o=[{associateObjectId:this.props.wikiId,associateObjectType:Ne.WikiAttachment,fileHandleId:r}];this.getSynapseFiles(o,r)}}render(){const{params:t}=this.props,{align:n="",altText:r="synapse image"}=t;let o="auto";t.scale&&t.scale!=="100"&&(o=`${Number(t.scale)}%`);const a=n.toLowerCase();let i="";a==="left"&&(i="floatLeft"),a==="right"&&(i="floatright"),a==="center"&&(i="align-center");let s={width:o,height:o};return this.state.preSignedURL?u(E.exports.Fragment,{children:u("img",{alt:r,className:"img-fluid  "+i,src:this.state.preSignedURL,style:s})}):null}}wn.contextType=wr;try{wn.displayName="SynapseImage",wn.__docgenInfo={description:"",displayName:"SynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},fileResults:{defaultValue:null,description:"",name:"fileResults",required:!1,type:{name:"FileHandle[]"}},params:{defaultValue:null,description:"",name:"params",required:!0,type:{name:"{ align: string; scale: string; responsive: string; altText: string; }"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/SynapseImage.tsx#SynapseImage"]={docgenInfo:wn.__docgenInfo,name:"SynapseImage",path:"src/lib/containers/widgets/SynapseImage.tsx#SynapseImage"})}catch{}const Cn=ge.createContext(void 0),To=({children:e,wikiContext:t})=>u(Cn.Provider,{value:t,children:e}),Ds=Cn.Consumer;function Wm(){const e=E.exports.useContext(Cn);return e!=null?e:{}}try{Cn.displayName="SynapseWikiContext",Cn.__docgenInfo={description:"This must be exported to use the context in class components.",displayName:"SynapseWikiContext",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContext"]={docgenInfo:Cn.__docgenInfo,name:"SynapseWikiContext",path:"src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContext"})}catch{}try{To.displayName="SynapseWikiContextProvider",To.__docgenInfo={description:"Provides context related to Synapse Wikis",displayName:"SynapseWikiContextProvider",props:{wikiContext:{defaultValue:null,description:"",name:"wikiContext",required:!1,type:{name:"SynapseWikiContextType"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextProvider"]={docgenInfo:To.__docgenInfo,name:"SynapseWikiContextProvider",path:"src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextProvider"})}catch{}try{Ds.displayName="SynapseWikiContextConsumer",Ds.__docgenInfo={description:"",displayName:"SynapseWikiContextConsumer",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextConsumer"]={docgenInfo:Ds.__docgenInfo,name:"SynapseWikiContextConsumer",path:"src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextConsumer"})}catch{}function Oo(e){const{wikiId:t,wikiPage:n,fileHandles:r}=Wm();return e.fileName?r?u(wn,{params:e,fileName:e.fileName,wikiId:t||(n==null?void 0:n.id),fileResults:r.list}):u(z,{}):e.synapseId?u(wn,{params:e,synapseId:e.synapseId}):u(z,{})}try{Oo.displayName="MarkdownSynapseImage",Oo.__docgenInfo={description:"",displayName:"MarkdownSynapseImage",props:{fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},align:{defaultValue:null,description:"",name:"align",required:!0,type:{name:"string"}},scale:{defaultValue:null,description:"",name:"scale",required:!0,type:{name:"string"}},responsive:{defaultValue:null,description:"",name:"responsive",required:!0,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownSynapseImage.tsx#MarkdownSynapseImage"]={docgenInfo:Oo.__docgenInfo,name:"MarkdownSynapseImage",path:"src/lib/containers/markdown/widget/MarkdownSynapseImage.tsx#MarkdownSynapseImage"})}catch{}const aR=db(ub);class Zn extends E.exports.Component{constructor(t){super(t),this.state={isLoaded:!1,queryData:{}},this.fetchPlotlyData=this.fetchPlotlyData.bind(this),this.showPlot=this.showPlot.bind(this)}componentDidMount(){this.fetchPlotlyData()}fetchPlotlyData(){const{query:t}=this.props.widgetparamsMapped,n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:Cr,entityId:An(t),query:{sql:t}};Yf(n,this.context.accessToken).then(r=>{this.setState({isLoaded:!0,queryData:r})}).catch(r=>{console.log("Error on full table query ",r)})}showPlot(){var g,h,m,v;if(!this.state.isLoaded)return;const{title:t,xtitle:n,ytitle:r,type:o,xaxistype:a,showlegend:i}=this.props.widgetparamsMapped,s=this.state,l=this.props.widgetparamsMapped.horizontal.toLowerCase(),d={showlegend:i,title:t};n&&(d.xaxis={title:n}),a&&(d.xaxis={...d.xaxis,xaxistype:a.toLowerCase()}),r&&(d.yaxis={title:r});const c=[],f=l?"v":"h",p=(h=(g=s.queryData.queryResult)==null?void 0:g.queryResults.headers)!=null?h:[];for(let S=0;S<p.length-1;S+=1)c[S]={orientation:f,name:p[S+1].name,type:o.toLowerCase(),x:[],y:[]};for(const S of(v=(m=s.queryData.queryResult)==null?void 0:m.queryResults.rows)!=null?v:[])for(let _=1;_<S.values.length;_+=1){const b=S.values;c[_-1].x.push(b[0]),c[_-1].y.push(b[_])}return u(aR,{layout:d,data:c})}render(){return this.state.isLoaded?this.showPlot():null}}Zn.contextType=wr;try{Zn.displayName="SynapsePlot",Zn.__docgenInfo={description:"",displayName:"SynapsePlot",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},widgetparamsMapped:{defaultValue:null,description:"",name:"widgetparamsMapped",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/SynapsePlot.tsx#SynapsePlot"]={docgenInfo:Zn.__docgenInfo,name:"SynapsePlot",path:"src/lib/containers/widgets/SynapsePlot.tsx#SynapsePlot"})}catch{}function Io(e){const{ownerId:t,wikiId:n,wikiPage:r}=Wm();return u(Zn,{ownerId:t,wikiId:n||(r==null?void 0:r.id),widgetparamsMapped:e})}try{Io.displayName="MarkdownSynapsePlot",Io.__docgenInfo={description:"",displayName:"MarkdownSynapsePlot",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownSynapsePlot.tsx#MarkdownSynapsePlot"]={docgenInfo:Io.__docgenInfo,name:"MarkdownSynapsePlot",path:"src/lib/containers/markdown/widget/MarkdownSynapsePlot.tsx#MarkdownSynapsePlot"})}catch{}const iR=200,wf="ESTIMATED_DOWNLOAD_SPEED_EXPIRE_TIME",Cf="ESTIMATED_DOWNLOAD_SPEED",sR="syn12600511",lR=e=>new Promise((t,n)=>{const r=localStorage.getItem(wf),o=localStorage.getItem(Cf);if(r&&o&&new Date().getTime()<Number(r)){t(Number(o));return}xn(e,sR).then(a=>{const i=a,s=[{associateObjectId:i.id,associateObjectType:Ne.FileEntity,fileHandleId:i.dataFileHandleId}];en({includeFileHandles:!0,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:s},e).then(d=>{const c=d.requestedFiles[0].preSignedURL,f=d.requestedFiles[0].fileHandle,p=new Date().getTime();return zf(f,c).then(()=>{const g=f.contentSize/((new Date().getTime()-p-iR)/1e3),h=new Date().getTime();localStorage.setItem(wf,(h+1e3*60*5).toString()),localStorage.setItem(Cf,g.toString()),t(g)})})}).catch(a=>n(a))});function No(e){const{numFiles:t,numBytes:n}=e,{accessToken:r}=ae(),[o,a]=E.exports.useState({isLoading:!!n,downloadSpeed:0}),{isLoading:i,downloadSpeed:s}=o;E.exports.useEffect(()=>{r&&lR(r).then(h=>{a({isLoading:!1,downloadSpeed:h})})},[r]);const l=i||s===0||!n?0:n/s,d=l===0,c=d?"":xr.duration(l,"seconds").humanize(),f=t===0,p=f?"SRC-inactive":"SRC-primary-text-color",g=d?"SRC-inactive":"SRC-primary-text-color";return I("span",{className:"download-details-container",children:[I("span",{children:[u("span",{className:p,children:u(fe,{options:{icon:"file"}})}),f?u(ni,{width:50}):I(z,{children:[" ",t,"\xA0files "]})]}),n&&u(We,{title:"This is the total size of all files. Zipped package(s) will likely be smaller.",enterNextDelay:Ca,placement:"top",children:I("span",{"data-testid":"numBytesUI",children:[u("span",{className:g,children:u(fe,{options:{icon:"database"}})}),d?u(ni,{width:50}):jf(n)]})}),n&&u(We,{title:"This is an estimate of how long package download will take.",enterNextDelay:Ca,placement:"top",children:I("span",{"data-testid":"downloadTimeEstimateUI",children:[u("span",{className:g,children:u(fe,{options:{icon:"clock"}})}),i&&t>0?u(ni,{width:50}):c]})})]})}try{No.displayName="DownloadDetails",No.__docgenInfo={description:`Displays download information including number of files, size of download, and time to download.
Prefer to use {@link download_list_v2 /DownloadDetails} instead, particularly when you have information about file packaging in/eligibility`,displayName:"DownloadDetails",props:{numFiles:{defaultValue:null,description:"",name:"numFiles",required:!0,type:{name:"number"}},numBytes:{defaultValue:null,description:"",name:"numBytes",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/download_list/DownloadDetails.tsx#DownloadDetails"]={docgenInfo:No.__docgenInfo,name:"DownloadDetails",path:"src/lib/containers/download_list/DownloadDetails.tsx#DownloadDetails"})}catch{}async function cR(e,t,n,r,o){try{const a={query:n==null?void 0:n.query,concreteType:"org.sagebionetworks.repo.model.download.AddToDownloadListRequest",parentId:r};return await Qg(a,e),Zt("File(s) were successfully added to your Download Cart.","success",{primaryButtonConfig:{text:"View Download Cart",onClick:o}}),t(),[0,""]}catch(a){return Zt("danger",void 0,a.reason),t(),[0,""]}}const Jn={[2]:{className:"alert-info",infoText:"Would you like to add all files to the download cart?",closeText:"Cancel"},[3]:{className:"alert-info",infoText:I(z,{children:["Note: Files that you add will be mixed in with the files already in your download cart.",u("br",{}),"If you don\u2019t want to mix these files, clear your download cart before continuing."]}),closeText:"Cancel"},[1]:{className:"alert-info",infoText:"Adding Files To List",closeText:"Cancel"},[0]:{className:"alert-info",infoText:"Calculating File Size",closeText:"Cancel"},[4]:{className:"alert-danger",closeText:"Close",infoText:I(z,{children:["Please ",u(Kg,{style:{color:"#337ab7"}})," to add files to your download cart."]})}},dR=e=>{switch(e.status){case 0:case 1:return I("div",{children:[u("span",{className:"spinner white"}),u("span",{className:"spinner__text",children:Jn[e.status].infoText})]});case 4:return u(z,{children:Jn[e.status].infoText});case 2:case 3:return I(z,{children:[u(No,{numFiles:e.fileCount,numBytes:e.fileSize}),u("span",{className:"download-confirmation-infoText",children:Jn[e.status].infoText})]});default:return u(z,{})}},Ro=({getLastQueryRequest:e,folderId:t,fnClose:n,setTopLevelControlsState:r,topLevelControlsState:o})=>{const{accessToken:a,downloadCartPageUrl:i}=ae(),{showDownloadConfirmation:s=!0}=o!=null?o:{},[l,d]=E.exports.useState(a?0:4),[c,f]=E.exports.useState(0),[p,g]=E.exports.useState(),{data:h,refetch:m}=pb(),v=e(),[S,_]=E.exports.useState(!1),b=E.exports.useCallback((M,V,O)=>{if(a&&O){const A=O.totalNumberOfFiles>0,R=M!=null?M:0;d(A?3:2),f(R),g(V)}},[a]),{data:y,isSuccess:w}=Ub({parentId:t,includeSumFileSizes:!0,includeTotalChildCount:!0,includeTypes:[$s.FILE]});Oc(()=>{w&&y&&h&&b(y.totalChildCount,y.sumFileSizesBytes,h)},[b,t,w,y,h]);const C=_r|ml,x={...v,partMask:C},{data:T}=cp(x);Oc(()=>{var M,V;if(T&&h){const O=(M=T.sumFileSizes)==null?void 0:M.greaterThan;b(T.queryCount,O||(V=T.sumFileSizes)==null?void 0:V.sumFileSizesBytes,h)}},[b,v,T,h]);const N=n?()=>n():()=>{r&&r(M=>({...M,showDownloadConfirmation:!1}))},k=async()=>{if(!a)d(4);else{d(1);const O=(await cR(a,N,v,t,()=>_(!0)))[0];d(O),m()}};S&&(window.location.href=i);const q=o==null?void 0:o.showFacetFilter;return u(z,{children:I(tn,{dismissible:!1,show:!0,variant:"info",transition:!1,className:`download-confirmation ${Jn[l].className} ${s?"":"hidden"}
          ${q?kn:Ln}
        `,children:[u(dR,{status:l,fileCount:c,fileSize:p}),I("div",{className:"download-confirmation-action",children:[l!==1&&u("button",{className:"btn btn-link",onClick:N,children:Jn[l].closeText}),(l===2||l===3)&&u("button",{type:"button",className:"btn btn-primary",onClick:k,children:"Add"})]})]})})};try{Ro.displayName="DownloadConfirmation",Ro.__docgenInfo={description:"",displayName:"DownloadConfirmation",props:{fnClose:{defaultValue:null,description:"",name:"fnClose",required:!1,type:{name:"(() => void)"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},folderId:{defaultValue:null,description:"",name:"folderId",required:!1,type:{name:"string"}},topLevelControlsState:{defaultValue:null,description:"",name:"topLevelControlsState",required:!1,type:{name:"TopLevelControlsState"}},setTopLevelControlsState:{defaultValue:null,description:"",name:"setTopLevelControlsState",required:!1,type:{name:"Dispatch<SetStateAction<TopLevelControlsState>>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/download_list/DownloadConfirmation.tsx#DownloadConfirmation"]={docgenInfo:Ro.__docgenInfo,name:"DownloadConfirmation",path:"src/lib/containers/download_list/DownloadConfirmation.tsx#DownloadConfirmation"})}catch{}const Ps=3,er=({helpMessage:e="This search bar is powered by MySQL Full Text Search.",helpUrl:t})=>{const{executeQueryRequest:n,getLastQueryRequest:r}=_t(),{topLevelControlsState:{showSearchBar:o,showFacetFilter:a}}=Er(),[i,s]=E.exports.useState(""),l=E.exports.useRef(null),d=f=>{var p;if(f.preventDefault(),i.trim().length<Ps)(p=l.current)==null||p.setCustomValidity(`Search term must have a minimum of ${Ps} characters`);else{const g=r(),{additionalFilters:h=[]}=g.query,m={concreteType:"org.sagebionetworks.repo.model.table.TextMatchesQueryFilter",searchExpression:i};if(h.find(S=>S.concreteType==m.concreteType&&S.searchExpression==m.searchExpression))return;h.push(m),g.query.additionalFilters=h,n(g),s("")}},c=f=>{var p;(p=l.current)==null||p.setCustomValidity(""),s(f.currentTarget.value)};return u("div",{className:`QueryWrapperSearchInput ${a?kn:Ln}`,children:u(Ml,{in:o,timeout:{enter:300,exit:300},children:I("div",{className:"QueryWrapperSearchInput__helppopoverwrapper",children:[I("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:d,children:[u("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:u(fe,{options:{icon:"search"}})}),u("input",{ref:l,minLength:Ps,onChange:c,placeholder:"Enter Search Terms",value:i,type:"text"}),i.length>0&&u("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{s("")},children:u(fe,{options:{icon:"close"}})})]}),u("div",{className:"QueryWrapperSearchInput__helppopover",children:u(qt,{markdownText:e,helpUrl:t,placement:"left"})})]})})})};try{er.displayName="FullTextSearch",er.__docgenInfo={description:"",displayName:"FullTextSearch",props:{helpMessage:{defaultValue:{value:"This search bar is powered by MySQL Full Text Search."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FullTextSearch.tsx#FullTextSearch"]={docgenInfo:er.__docgenInfo,name:"FullTextSearch",path:"src/lib/containers/FullTextSearch.tsx#FullTextSearch"})}catch{}const dl="First line is the columns names.",ul="Include row metadata (Row Id and Row Version).",Ba="Comma Separated Values (CSV)",_f="Tab Separated Values (TSV)",uR={title:"Download query results",type:"object",properties:{"File Type":{type:"string",oneOf:[{const:Ba,title:Ba},{const:_f,title:_f}]},Contents:{type:"array",title:"Contents",items:{type:"string",enum:[dl,ul]},uniqueItems:!0}}},fR={"File Type":{"ui:widget":"radio"},Contents:{"ui:widget":"checkboxes"}},pR={title:"Download query results",description:"File is ready for download. Select the download button to download the file.",type:"object"},hR={},mR=[uR,pR],gR=[fR,hR];class Wt extends E.exports.Component{constructor(t){super(t),this.handleSubmit=n=>{this.state.step===0?this.handleDownloadSetup(n):this.onDownload()},this.handleDownloadSetup=n=>{this.setState({isLoading:!0});const{formData:r}=n,o=r["File Type"],a=r.Contents,{queryBundleRequest:i,getLastQueryRequest:s}=this.props,l=o===Ba?",":"	",d=a.includes(dl),c=a.includes(ul),f=i!=null?i:s(),p=f.query.sql,g={sql:p,entityId:An(p),selectedFacets:f.query.selectedFacets,concreteType:"org.sagebionetworks.repo.model.table.DownloadFromTableRequest",writeHeader:d,includeRowIdAndRowVersion:c,csvTableDescriptor:{separator:l},additionalFilters:f.query.additionalFilters};Xg(g,this.context.accessToken).then(h=>{this.setState({isLoading:!1,step:1,data:h})}).catch(h=>{console.log("Error getDownloadFromTableRequest: ",h)})},this.onDownload=()=>{const{data:n}=this.state;Zg(n.resultsFileHandleId,this.context.accessToken).then(r=>{window.location.href=r,this.props.onClose()})},this.handleChange=n=>{const{formData:r}=n;this.setState({formData:r})},this.state={isLoading:!1,step:0,formData:{"File Type":Ba,Contents:[dl,ul]}}}render(){const t={position:"absolute",top:10,right:10,zIndex:10},n={height:50,width:50,backgroundSize:50};return u(ie,{animation:!1,show:!0,onHide:this.props.onClose,backdrop:"static",children:I(ie.Body,{children:[u("button",{style:t,onClick:this.props.onClose,children:u(fe,{options:{icon:"close"}})}),I(jv,{schema:mR[this.state.step],uiSchema:gR[this.state.step],onChange:this.handleChange,formData:this.state.formData,onSubmit:this.handleSubmit,children:[this.state.isLoading&&u("div",{className:"SRC-centerAndJustifyContent",children:I("div",{className:"SRC-center-text",children:[u("p",{children:" Creating the File "}),u("div",{style:n,className:"spinner"}),u("p",{children:" Loading... "})]})}),I("div",{style:{textAlign:"right"},children:[u(be,{variant:"default",onClick:this.props.onClose,style:{marginRight:"5px"},children:"Cancel"}),u(be,{type:"submit",variant:"primary",children:this.state.step===0?"Next":"Download"})]})]})]})})}}Wt.contextType=wr;try{Wt.displayName="ModalDownload",Wt.__docgenInfo={description:"",displayName:"ModalDownload",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(...args: any[]) => void"}},includeEntityEtag:{defaultValue:null,description:"",name:"includeEntityEtag",required:!1,type:{name:"boolean"}},queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!1,type:{name:"QueryBundleRequest"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},sort:{defaultValue:null,description:"",name:"sort",required:!1,type:{name:"SortItem[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/ModalDownload.tsx#ModalDownload"]={docgenInfo:Wt.__docgenInfo,name:"ModalDownload",path:"src/lib/containers/ModalDownload.tsx#ModalDownload"})}catch{}function tr(e){const{initQueryRequest:t,onQueryChange:n,onQueryResultBundleChange:r,lockedColumn:o,componentIndex:a,shouldDeepLink:i}=e,[s,l]=E.exports.useState(void 0),{entityId:d,versionNumber:c,getInitQueryRequest:f,getLastQueryRequest:p,setQuery:g}=Fy({initQueryRequest:t,componentIndex:a,shouldDeepLink:i,onQueryChange:n}),h=E.exports.useMemo(()=>p(),[p]),{data:m,hasNextPage:v,fetchPreviousPage:S,fetchNextPage:_,isFetchingNextPage:b,isLoading:y,error:w,isPreviousData:C}=ev(h,{keepPreviousData:!0},l),x=y||C,{data:T}=Ol(d,c),[N,k]=E.exports.useState(0);async function q(){if(!v)throw new Error("Called appendNextPageToResults when there is no next page");await _(),k("ALL")}async function M(){if(!v)throw new Error("Called goToNextPage when there is no next page");if(N==="ALL")throw new Error("Cannot go to next page when all pages are displayed");await _(),k(N+1)}const V=N!=="ALL"&&N>0;async function O(){if(N==="ALL")throw new Error("Cannot go to previous page when all pages are displayed");if(!V)throw new Error("Called goToNextPage when there is no next page");await S(),k(N-1)}const A=E.exports.useMemo(()=>{var U,j,D,L;if(!(m==null||m.pages.length===0||m.pages[0].responseBody==null))return N==="ALL"?{...m==null?void 0:m.pages[0].responseBody,queryResult:{...(U=m==null?void 0:m.pages[0].responseBody)==null?void 0:U.queryResult,queryResults:{...(D=(j=m==null?void 0:m.pages[0].responseBody)==null?void 0:j.queryResult)==null?void 0:D.queryResults,rows:(L=m.pages.flatMap(F=>{var Y;return(Y=F.responseBody.queryResult)==null?void 0:Y.queryResults.rows}))!=null?L:[]}}}:m==null?void 0:m.pages[N].responseBody},[N,m]);E.exports.useEffect(()=>{A&&r&&r(JSON.stringify(A))},[A,r]);const R=A?tv(A.facets,A.selectColumns):!0,$={data:E.exports.useMemo(()=>nv(A,o),[A,o]),isLoadingNewPage:b,hasNextPage:!!v,hasPreviousPage:!!V,isLoadingNewBundle:x,getLastQueryRequest:p,getInitQueryRequest:f,error:w,entity:T,executeQueryRequest:g,isFacetsAvailable:R,asyncJobStatus:s,appendNextPageToResults:q,goToNextPage:M,goToPreviousPage:O},{children:H}=e;return u($y,{queryContext:$,children:u("div",{className:`SRC-wrapper ${x||b?"SRC-logo-cursor":""} ${R?"has-facets":""}`,children:H})})}try{tr.displayName="InfiniteQueryWrapper",tr.__docgenInfo={description:"Component that manages the state of a Synapse table query. Data can be accessed via QueryContext using\neither `useQueryContext` or `QueryContextConsumer`.",displayName:"InfiniteQueryWrapper",props:{initQueryRequest:{defaultValue:null,description:"",name:"initQueryRequest",required:!0,type:{name:"QueryBundleRequest"}},componentIndex:{defaultValue:null,description:"",name:"componentIndex",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/InfiniteQueryWrapper.tsx#InfiniteQueryWrapper"]={docgenInfo:tr.__docgenInfo,name:"InfiniteQueryWrapper",path:"src/lib/containers/InfiniteQueryWrapper.tsx#InfiniteQueryWrapper"})}catch{}class nr extends ge.Component{constructor(t){var n;super(t),this.handleClickOutsideForm=r=>{var o,a;!((o=this.searchFormRef.current)!=null&&o.contains(r==null?void 0:r.target))&&!((a=this.radioFormRef.current)!=null&&a.contains(r==null?void 0:r.target))&&(this.state.didUpdateRanLast?this.setState({didUpdateRanLast:!1}):this.setState({show:!1}))},this.search=r=>{var g,h,m,v,S,_,b;r.preventDefault();const{searchText:o}=this.state;let{columnName:a}=this.state;const{searchable:i,lockedColumn:s}=this.props;if(a==="")if(i)a=i.filter(y=>y!==(s==null?void 0:s.columnName))[0];else{const y=(m=(h=(g=this.props.queryContext)==null?void 0:g.data)==null?void 0:h.columnModels)==null?void 0:m.filter(w=>w.name!==(s==null?void 0:s.columnName)).filter(w=>this.isSupportedColumn(w));a=(v=y==null?void 0:y[0].name)!=null?v:""}this.setState({show:!1});const{executeQueryRequest:l,getLastQueryRequest:d}=this.props.queryContext,c=d(),{additionalFilters:f=[]}=c.query,p=f.findIndex(y=>!!(Hy(y)||zy(y)&&y.columnName===a));if(p===-1){const y=(b=(_=(S=this.props.queryContext)==null?void 0:S.data)==null?void 0:_.columnModels)==null?void 0:b.filter(w=>w.name===a)[0];if(y!=null&&y.columnType.endsWith("_LIST")){const w={columnName:a,function:Uy.HAS_LIKE,values:[`%${o}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnMultiValueFunctionQueryFilter"};f.push(w)}else{const w={columnName:a,operator:Yy.LIKE,values:[`%${o}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnSingleValueQueryFilter"};f.push(w)}}else f[p].values.push(`%${o}%`);c.query.additionalFilters=f,l(c)},this.handleChange=r=>{this.setState({searchText:r.currentTarget.value})},this.isSupportedColumn=r=>{switch(r==null?void 0:r.columnType){case re.FILEHANDLEID:case re.ENTITYID:case re.DATE:case re.DATE_LIST:case re.USERID:return!1;default:return!0}},this.isSupportedColumnAndInProps=r=>{if(this.isSupportedColumn(r)){const{searchable:o}=this.props;return o==null?void 0:o.some(a=>a===(r==null?void 0:r.name))}return!1},this.state={show:!1,didUpdateRanLast:!1,searchText:"",columnName:(n=this.props.defaultColumn)!=null?n:""},this.searchFormRef=ge.createRef(),this.radioFormRef=ge.createRef()}componentDidMount(){document.addEventListener("click",this.handleClickOutsideForm)}componentDidUpdate(t){var n,r,o,a,i;!((n=t.queryVisualizationContext)!=null&&n.topLevelControlsState.showSearchBar)&&((r=this.props.queryVisualizationContext)==null?void 0:r.topLevelControlsState.showSearchBar)&&(this.setState({show:!0,didUpdateRanLast:!0}),(i=(a=(o=this.searchFormRef)==null?void 0:o.current)==null?void 0:a.querySelector("input"))==null||i.focus())}componentWillUnmount(){document.removeEventListener("click",this.handleClickOutsideForm)}render(){var f;const{searchable:t,lockedColumn:n,queryContext:{data:r},queryVisualizationContext:{topLevelControlsState:o,facetAliases:a}}=this.props,{searchText:i,show:s,columnName:l}=this.state;let d=[];t?d=t.map(p=>{var g;return(g=r==null?void 0:r.columnModels)==null?void 0:g.find(h=>h.name===p)}).filter(this.isSupportedColumnAndInProps).map(p=>p.name):r!=null&&r.columnModels&&(d=(f=r.columnModels)==null?void 0:f.filter(this.isSupportedColumn).map(p=>p.name)),d.length&&(n==null?void 0:n.columnName)&&(d=d.filter(p=>p!==(n==null?void 0:n.columnName)));const c=o==null?void 0:o.showFacetFilter;return I("div",{className:`QueryWrapperSearchInput ${c?kn:Ln}`,children:[u(Ml,{in:o==null?void 0:o.showSearchBar,children:I("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:this.search,onClick:()=>{this.setState({show:!0})},ref:this.searchFormRef,children:[u("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:u(fe,{options:{icon:"search"}})}),u("input",{onChange:this.handleChange,onClick:()=>{this.setState({show:!0})},placeholder:"Enter Search Terms",value:i,type:"text"}),this.state.searchText.length>0&&u("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{this.setState({searchText:""})},children:u(fe,{options:{icon:"close"}})})]})}),u("div",{className:"QueryWrapperSearchInput__dropdown_pos",children:u(_p,{in:s,classNames:"QueryWrapperSearchInput__animate_dropdown",timeout:{enter:0,exit:300},children:I("form",{ref:this.radioFormRef,className:"QueryWrapperSearchInput__column-select QueryWrapperSearchInput__animate_height",children:[u("p",{className:"deemphasized",children:u("i",{children:" Search In Field: "})}),d.map((p,g)=>{const h=kt(p,a);return u("div",{className:"radio",children:u("label",{children:I("span",{children:[u("input",{id:p,type:"radio",value:p,checked:l===""&&g===0||l===p,onClick:()=>{var v,S,_;(_=(S=(v=this.searchFormRef)==null?void 0:v.current)==null?void 0:S.querySelector("input"))==null||_.focus(),this.setState({columnName:p})}}),u("span",{children:h})]})})},`search-field-${p}-${g}`)})]})})})]})}}try{nr.displayName="Search",nr.__docgenInfo={description:"",displayName:"Search",props:{queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},isQueryWrapperMenuChild:{defaultValue:null,description:"",name:"isQueryWrapperMenuChild",required:!1,type:{name:"boolean"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},searchable:{defaultValue:null,description:"",name:"searchable",required:!1,type:{name:"SearchableColumnsV2"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},fullTextSearchHelpURL:{defaultValue:null,description:"",name:"fullTextSearchHelpURL",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/SearchV2.tsx#Search"]={docgenInfo:nr.__docgenInfo,name:"Search",path:"src/lib/containers/SearchV2.tsx#Search"})}catch{}const yR="The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients.",vR="https://help.synapse.org/docs/Searching-Tables-and-Views.2009596168.html#SearchingTablesandViews-UsingAdvancedSearchQueries",rr=({helpMessage:e=yR,helpUrl:t=vR})=>{const{executeQueryRequest:n,getLastQueryRequest:r}=_t(),{topLevelControlsState:{showSqlEditor:o,showFacetFilter:a}}=Er(),[i,s]=E.exports.useState(""),l=E.exports.useRef(null);E.exports.useEffect(()=>{var f;if(o){const p=r().query.sql;s(p),(f=l.current)==null||f.focus()}},[o,r]);const d=f=>{f.preventDefault();const p=r();p.query.sql=i,p.query.offset=0,p.query.additionalFilters=[],p.query.selectedFacets=[],n(p)},c=f=>{var p;(p=l.current)==null||p.setCustomValidity(""),s(f.currentTarget.value)};return u("div",{className:`QueryWrapperSqlEditorInput ${a?kn:Ln}`,children:u(Ml,{in:o,timeout:{enter:300,exit:300},children:I("div",{className:"QueryWrapperSqlEditorInput__helppopoverwrapper",children:[I("form",{className:"QueryWrapperSqlEditorInput__searchbar",onSubmit:d,children:[u(fv,{className:"QueryWrapperSqlEditorInput__searchbar__searchicon"}),u("input",{ref:l,onChange:c,placeholder:"Enter Query",value:i,type:"text"})]}),u("div",{className:"QueryWrapperSqlEditorInput__helppopover",children:u(qt,{markdownText:e,helpUrl:t,placement:"right"})})]})})})};try{rr.displayName="SqlEditor",rr.__docgenInfo={description:"",displayName:"SqlEditor",props:{helpMessage:{defaultValue:{value:"The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:{value:"https://help.synapse.org/docs/Searching-Tables-and-Views.2009596168.html#SearchingTablesandViews-UsingAdvancedSearchQueries"},description:"",name:"helpUrl",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/SqlEditor.tsx#SqlEditor"]={docgenInfo:rr.__docgenInfo,name:"SqlEditor",path:"src/lib/containers/SqlEditor.tsx#SqlEditor"})}catch{}const Ao=e=>I(ie,{animation:!1,show:!0,onHide:()=>e.onHide(),backdrop:"static",children:[u(ie.Header,{closeButton:!0,children:u("span",{style:{fontWeight:"bold",color:"#515359",fontSize:"1.5em"},children:"Sign In Required"})}),I(hb,{children:[u("p",{children:"Anyone can browse public content on the Synapse website, but in order to download and create content you will need to register for an account using an email address."}),I("p",{children:["To find out more see\xA0",u("a",{href:"https://help.synapse.org/docs/Managing-your-account.2055405596.html",target:"_blank",rel:"noopener noreferrer",children:"User Accounts"}),u("span",{children:" and "}),u("a",{href:"https://help.synapse.org/docs/Synapse-Governance.2004255211.html",rel:"noopener noreferrer",target:"_blank",children:"Governance Overview"}),"."]})]}),I(mb,{children:[u(be,{variant:"secondary",onClick:()=>e.onHide(),children:"CANCEL"}),u(be,{className:"SRC-SIGN-IN-CLASS",variant:"primary",onClick:()=>e.onHide(),children:"Sign in"})]})]});try{Ao.displayName="DownloadLoginModal",Ao.__docgenInfo={description:"",displayName:"DownloadLoginModal",props:{showModal:{defaultValue:null,description:"",name:"showModal",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/DownloadLoginModal.tsx#DownloadLoginModal"]={docgenInfo:Ao.__docgenInfo,name:"DownloadLoginModal",path:"src/lib/containers/table/table-top/DownloadLoginModal.tsx#DownloadLoginModal"})}catch{}const ko=({show:e,title:t,onClose:n,pythonNotes:r,pythonCode:o,rNotes:a,rCode:i,cliNotes:s,cliCode:l,helpMarkdown:d,helpUrl:c})=>{let f;l?f="Command Line":o?f="Python":f="R";const[p,g]=E.exports.useState(f),h=I("p",{children:["Installation instructions are available at our"," ",u("a",{className:"ProgrammaticOptions__docslink",href:"https://help.synapse.org/docs/Installing-Synapse-API-Clients.1985249668.html",target:"_blank",rel:"noopener noreferrer",children:"Synapse API Documentation Site"}),"."]});return I(ie,{className:"bootstrap-4-backport ProgrammaticOptions",backdrop:"static",animation:!1,show:e,onHide:n,size:"lg",children:[u(ie.Header,{closeButton:!0,children:I(ie.Title,{children:[t,"\xA0",d&&u(qt,{markdownText:d,helpUrl:c})]})}),I(ie.Body,{children:[I("div",{className:"Tabs",children:[l&&u("div",{className:"Tab",role:"tab",onClick:m=>{m.stopPropagation(),g("Command Line")},"aria-selected":p==="Command Line",children:"Command Line"}),i&&u("div",{className:"Tab",role:"tab",onClick:m=>{m.stopPropagation(),g("R")},"aria-selected":p==="R",children:"R"}),o&&u("div",{className:"Tab",role:"tab",onClick:m=>{m.stopPropagation(),g("Python")},"aria-selected":p==="Python",children:"Python"})]}),I("div",{className:"TabContent",children:[p==="Command Line"&&I(z,{children:[u("p",{children:s}),h,I("pre",{children:[" ",l," "]})]}),p==="R"&&I(z,{children:[u("p",{children:a}),h,u("pre",{children:i})]}),p==="Python"&&I(z,{children:[u("p",{children:r}),h,u("pre",{children:o})]})]})]}),u(ie.Footer,{children:u(be,{variant:"primary",onClick:n,children:"OK"})})]})};try{ko.displayName="ProgrammaticInstructionsModal",ko.__docgenInfo={description:"Modal used to show programmatic instructions",displayName:"ProgrammaticInstructionsModal",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},pythonNotes:{defaultValue:null,description:"",name:"pythonNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},pythonCode:{defaultValue:null,description:"",name:"pythonCode",required:!1,type:{name:"string"}},rNotes:{defaultValue:null,description:"",name:"rNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},rCode:{defaultValue:null,description:"",name:"rCode",required:!1,type:{name:"string"}},cliNotes:{defaultValue:null,description:"",name:"cliNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},cliCode:{defaultValue:null,description:"",name:"cliCode",required:!1,type:{name:"string"}},helpMarkdown:{defaultValue:null,description:"",name:"helpMarkdown",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/ProgrammaticInstructionsModal.tsx#ProgrammaticInstructionsModal"]={docgenInfo:ko.__docgenInfo,name:"ProgrammaticInstructionsModal",path:"src/lib/containers/ProgrammaticInstructionsModal.tsx#ProgrammaticInstructionsModal"})}catch{}function Lo({queryBundleRequest:e,onHide:t}){var f;const[n,r]=E.exports.useState("..."),{data:o,isLoading:a,isPreviousData:i}=rv({...e,partMask:Jg},{keepPreviousData:!0,useErrorBoundary:!0}),s=(f=o==null?void 0:o.responseBody)==null?void 0:f.combinedSql,l=a||i;E.exports.useEffect(()=>{if(s&&!l){const p=s.toUpperCase().indexOf("FROM SYN"),g=`SELECT * ${s.substring(p)}`;r(g)}},[s,l]);const d=E.exports.useMemo(()=>n.replace(/(["`])/g,"\\$1"),[n]),c=E.exports.useMemo(()=>n.replace(/"/g,'\\"'),[n]);return u(ko,{show:!0,onClose:t,title:"Download Programmatically",cliNotes:u(z,{children:"This command line code will download Synapse files AND file annotations to your working directory."}),cliCode:`synapse get -q "${d}"`,rNotes:I(z,{children:["This R code will download file annotations only. Use"," ",I("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:["synGet","()"]})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),rCode:`query <- synTableQuery("${c}")
read.table(query$filepath, sep = ",")`,pythonNotes:I(z,{children:["This Python code will download file annotations only. Use"," ",u("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:"syn.get"})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),pythonCode:`query = syn.tableQuery("${c}")
query.asDataFrame()`})}try{Lo.displayName="ProgrammaticOptions",Lo.__docgenInfo={description:"",displayName:"ProgrammaticOptions",props:{queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!0,type:{name:"QueryBundleRequest"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/ProgrammaticOptions.tsx#ProgrammaticOptions"]={docgenInfo:Lo.__docgenInfo,name:"ProgrammaticOptions",path:"src/lib/containers/table/table-top/ProgrammaticOptions.tsx#ProgrammaticOptions"})}catch{}const bR="Add To Download Cart",SR="download",qo=e=>{const{accessToken:t}=ae(),{entity:n,data:r,getLastQueryRequest:o}=_t(),a=o(),[i,s]=E.exports.useState(!1),[l,d]=E.exports.useState(!1),[c,f]=E.exports.useState(!1),{onDownloadFiles:p,darkTheme:g=!0}=e,h=n&&(pn(n)&&Ly(n)||Tn(n)),m=n&&Tn(n)&&n.isLatestVersion;return I(E.exports.Fragment,{children:[I(Rt,{as:"span",children:[u(_l,{idForToolTip:SR,tooltipText:"Download Options",size:"lg",darkTheme:g,icon:"download"}),I(Rt.Menu,{className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:[u(Rt.Item,{onClick:()=>{d(!0)},children:"Export Table"}),h&&u(We,{title:"A draft version of a dataset cannot be added to the Download Cart",placement:"left",enterNextDelay:300,disableHoverListener:!m,children:u(Rt.Item,{className:m?"ignoreLink":void 0,disabled:m,style:m?{pointerEvents:"auto"}:{},onClick:()=>t?p():s(!0),children:bR})}),u(We,{title:"A draft version of a dataset cannot be downloaded programmatically",placement:"left",enterNextDelay:300,disableHoverListener:!m,children:u(Rt.Item,{className:m?"ignoreLink":void 0,disabled:m,style:m?{pointerEvents:"auto"}:{},onClick:()=>f(!0),children:"Programmatic Options"})})]})]}),i&&u(Ao,{showModal:i,onHide:()=>s(!1)}),l&&u(Wt,{onClose:()=>d(!1),queryBundleRequest:a}),c&&r&&u(Lo,{onHide:()=>f(!1),queryBundleRequest:a})]})};try{qo.displayName="DownloadOptions",qo.__docgenInfo={description:"",displayName:"DownloadOptions",props:{onDownloadFiles:{defaultValue:null,description:"",name:"onDownloadFiles",required:!0,type:{name:"() => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/DownloadOptions.tsx#DownloadOptions"]={docgenInfo:qo.__docgenInfo,name:"DownloadOptions",path:"src/lib/containers/table/table-top/DownloadOptions.tsx#DownloadOptions"})}catch{}const Ef="addAndRemoveColumns",Do=e=>{const{headers:t,isColumnSelected:n,toggleColumnSelection:r,darkTheme:o,facetAliases:a}=e,[i,s]=E.exports.useState(!1),l=(d,c,f)=>{f.source==="rootClose"?s(!1):s(!0)};return I(Rt,{as:"span",onToggle:(d,c,f)=>l(d,c,f),show:i,drop:"down",children:[u(_l,{idForToolTip:Ef,tooltipText:"Show/Hide Columns",icon:o?"columnsdark":"columns",darkTheme:o}),u(Rt.Menu,{id:`${Ef}-dropdown`,className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:t==null?void 0:t.map(d=>{const{name:c}=d,f=n.includes(c),p={width:"11px",marginRight:"10px",visibility:f?void 0:"hidden"},g=f?"SRC-primary-text-color":"";return I(Rt.Item,{onClick:()=>r(c),children:[u("span",{className:g,style:p,children:u(fe,{options:{icon:"check",size:"14px"}})}),kt(c,a)]},c)})})]})};try{Do.displayName="ColumnSelection",Do.__docgenInfo={description:"",displayName:"ColumnSelection",props:{headers:{defaultValue:null,description:"",name:"headers",required:!1,type:{name:"SelectColumn[]"}},isColumnSelected:{defaultValue:null,description:"",name:"isColumnSelected",required:!0,type:{name:"string[]"}},show:{defaultValue:null,description:"",name:"show",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(() => void)"}},toggleColumnSelection:{defaultValue:null,description:"",name:"toggleColumnSelection",required:!0,type:{name:"(name: string) => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/ColumnSelection.tsx#ColumnSelection"]={docgenInfo:Do.__docgenInfo,name:"ColumnSelection",path:"src/lib/containers/table/table-top/ColumnSelection.tsx#ColumnSelection"})}catch{}const wR="Files may be unavailable because you do not have permission to see them, they have been deleted, or the Dataset has been misconfigured.",CR="Files may be unavailable because you do not have permission to see them or the Dataset was misconfigured.",Po=({entity:e})=>{var o,a;const t=e&&Tn(e),n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:`SELECT * FROM ${e.id}${!e.isLatestVersion&&e.versionNumber?`.${e.versionNumber}`:""}`},entityId:e.id,partMask:_r},{data:r}=cp(n,{enabled:t});if(t&&r&&e){const i=r.queryCount,s=(a=(o=e.items)==null?void 0:o.length)!=null?a:0;if(i===s)return u(z,{});const l=s-i;let d="";return e.isLatestVersion?d=wR:d=CR,I(St,{className:"SRC-centerContent",style:{marginLeft:10},variant:"smallText1",color:"textSecondary",children:[u(Rb,{className:"SRC-color-warning",style:{fontSize:"16px"}}),l.toLocaleString()+" Unavailable",u(qt,{className:"SRC-margin-left-5",markdownText:d,placement:"right"})]})}else return u(z,{})};try{Po.displayName="MissingQueryResultsWarning",Po.__docgenInfo={description:`If possible, this component will render a warning message if results may be missing from the query due to user permissions or
entities being deleted. If not possible, it will render an empty fragment.`,displayName:"MissingQueryResultsWarning",props:{entity:{defaultValue:null,description:"",name:"entity",required:!0,type:{name:"Table"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/MissingQueryResultsWarning.tsx#MissingQueryResultsWarning"]={docgenInfo:Po.__docgenInfo,name:"MissingQueryResultsWarning",path:"src/lib/containers/MissingQueryResultsWarning.tsx#MissingQueryResultsWarning"})}catch{}const _R=[{icon:"search",key:"showSearchBar",tooltipText:"Show / Hide Search Bar"},{icon:"chart",key:"showFacetVisualization",tooltipText:"Show / Hide Visualizations"},{icon:"download",key:"showDownloadConfirmation",tooltipText:"Show options for download"},{icon:ey,key:"showSqlEditor",tooltipText:"Show / Hide the Advanced Query Editor"}],or=e=>{const{name:t,showColumnSelection:n=!1,hideDownload:r=!1,hideVisualizationsControl:o=!1,hideFacetFilterControl:a=!1,hideQueryCount:i=!1,hideSqlEditorControl:s=!0,customControls:l}=e,{data:d,entity:c,executeQueryRequest:f,getLastQueryRequest:p,getInitQueryRequest:g}=_t(),{topLevelControlsState:h,setTopLevelControlsState:m,columnsToShowInTable:v,selectedRowIndices:S,facetAliases:_,setColumnsToShowInTable:b}=Er(),y=T=>{const N={[T]:!h[T]};T==="showSearchBar"&&(N.showDownloadConfirmation=!1),T==="showDownloadConfirmation"&&(N.showSearchBar=!1),m(k=>({...k,...N}))},w=()=>{f(p())},C=T=>{let N=hn(v);N.includes(T)?N=N.filter(k=>k!==T):N.push(T),b(N)},x=h==null?void 0:h.showFacetFilter;return u("div",{className:`TopLevelControls ${x?kn:Ln}`,"data-testid":"TopLevelControls",children:I("div",{children:[I("div",{className:"TopLevelControls__querycount",children:[t&&I(z,{children:[I(St,{variant:"sectionTitle",role:"heading",children:[t," ",!i&&u(gb,{sql:g().query.sql,parens:!0})]}),!i&&c&&u(Po,{entity:c})]}),!a&&I("a",{onClick:()=>y("showFacetFilter"),className:"TopLevelControls__querycount__facetFilterLink SRC-no-underline-on-hover",children:[u($a,{type:h.showFacetFilter?"close":"filter"}),I("span",{className:"TopLevelControls__querycount__facetFilterLink__text",children:[h.showFacetFilter?"Hide":"Show"," ","filters"]})]})]}),I("div",{className:"TopLevelControls__actions",children:[l&&l.map(T=>{var N;return I("button",{className:`btn SRC-roundBorder SRC-primary-background-color SRC-whiteText ${(N=T.classNames)!=null?N:""}`,style:{marginRight:"5px"},type:"button",onClick:()=>T.onClick({data:d,selectedRowIndices:S,refresh:w}),children:[T.icon,"\xA0",T.buttonText]},T.buttonText)}),_R.map(T=>{const{key:N,icon:k,tooltipText:q}=T;return N==="showDownloadConfirmation"&&r||N==="showFacetVisualization"&&o||N==="showSqlEditor"&&s?u(ge.Fragment,{},N):N==="showDownloadConfirmation"?u(qo,{darkTheme:!0,onDownloadFiles:()=>y(N)},N):u(_l,{idForToolTip:N,tooltipText:q,callbackFn:()=>y(N),darkTheme:!0,icon:k},N)}),n&&u(Do,{headers:d==null?void 0:d.selectColumns,isColumnSelected:v,toggleColumnSelection:C,darkTheme:!0,facetAliases:_})]})]})})};try{or.displayName="TopLevelControls",or.__docgenInfo={description:"",displayName:"TopLevelControls",props:{name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/TopLevelControls.tsx#TopLevelControls"]={docgenInfo:or.__docgenInfo,name:"TopLevelControls",path:"src/lib/containers/table/TopLevelControls.tsx#TopLevelControls"})}catch{}var Gm={exports:{}};(function(e,t){(function(r,o){e.exports=o()})(ql,function(){return(()=>{var n={67:(a,i,s)=>{s.r(i),s.d(i,{default:()=>h});var l=s(887),d=s.n(l);function c(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function f(m,v,S){return v in m?Object.defineProperty(m,v,{value:S,enumerable:!0,configurable:!0,writable:!0}):m[v]=S,m}var p,g=(p=0,function(){return p++}),h=function m(v){var S=this,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c(this,m),f(this,"ID","id"),f(this,"PX","px"),f(this,"RESIZABLE","grip-resizable"),f(this,"FLEX","grip-flex"),f(this,"legacyIE",navigator.userAgent.indexOf("Trident/4.0")>0),f(this,"reset",function(b){return S.init(b)}),f(this,"onResize",function(){var b=S.tb;if(b.classList.remove(S.RESIZABLE),b.opt.fixed){b.tableWidth=Number(window.getComputedStyle(b).width.replace(/px/,"")).valueOf();for(var y=0,w=0;w<b.columnCnt;w++)y+=b.columns[w].w;for(var C=0;C<b.columnCnt;C++)b.columns[C].style.width=Math.round(1e3*b.columns[C].w/y)/10+"%",b.columns[C].locked=!0}else S.applyBounds(),b.opt.resizeMode==="flex"&&b.opt.serialize&&S.serializeStore();b.classList.add(S.RESIZABLE),S.syncGrips()}),f(this,"onGripMouseDown",function(b){var y=b.target.parentNode.data,w=S.tb,C=w.grips[y.i],x=b.touches;if(C.ox=x?x[0].pageX:b.pageX,C.l=C.offsetLeft,C.x=C.l,S.createStyle(document.querySelector("head"),"*{cursor:"+w.opt.dragCursor+"!important}"),document.addEventListener("touchmove",S.onGripDrag),document.addEventListener("mousemove",S.onGripDrag),document.addEventListener("touchend",S.onGripDragOver),document.addEventListener("mouseup",S.onGripDragOver),C.classList.add(w.opt.draggingClass),S.grip=C,w.columns[y.i].locked)for(var T,N=0;N<w.columnCnt;N++)(T=w.columns[N]).locked=!1,T.w=Number(window.getComputedStyle(T).width.replace(/px/,"")).valueOf();b.preventDefault()}),f(this,"onGripDrag",function(b){var y=S.grip;if(y){var w=y.t,C=b.touches,x=(C?C[0].pageX:b.pageX)-y.ox+y.l,T=w.opt.minWidth,N=y.i,k=1.5*w.cellSpace+T+w.borderSpace,q=N===w.columnCnt-1,M=N?w.grips[N-1].offsetLeft+w.cellSpace+T:k,V=w.opt.fixed?N===w.columnCnt-1?w.tableWidth-k:w.grips[N+1].offsetLeft-w.cellSpace-T:1/0;if(x=Math.max(M,Math.min(V,x)),y.x=x,y.style.left=x+S.PX,q&&(y.w=w.columns[N].w+x-y.l),w.opt.liveDrag){q?(w.columns[N].style.width=y.w+S.PX,!w.opt.fixed&&w.opt.overflow?w.style.minWidth=w.tableWidth+x-y.l+S.PX:w.tableWidth=Number(window.getComputedStyle(w).width.replace(/px/,"")).valueOf()):S.syncCols(w,N,!1,w.opt),S.syncGrips();var O=w.opt.onDrag;O&&O(b)}b.preventDefault()}}),f(this,"onGripDragOver",function(b){var y=S.grip;document.removeEventListener("touchend",S.onGripDragOver),document.removeEventListener("mouseup",S.onGripDragOver),document.removeEventListener("touchmove",S.onGripDrag),document.removeEventListener("mousemove",S.onGripDrag);var w=document.querySelector("head").lastChild;if(w.parentNode.removeChild(w),y){if(y.classList.remove(y.t.opt.draggingClass),y.x-y.l!=0){var C=y.t,x=C.opt.onResize,T=y.i;if(T===C.columnCnt-1){var N=C.columns[T];N.style.width=y.w+S.PX,N.w=y.w}else S.syncCols(C,T,!0,C.opt);C.opt.fixed||S.applyBounds(),S.syncGrips(),x&&x(b),C.opt.serialize&&S.serializeStore()}S.grip=null}}),f(this,"init",function(b){if(b.disable)return S.destroy();var y=S.tb,w=y.getAttribute(S.ID)||S.RESIZABLE+g();if(!y.matches("table")||y.extended&&!b.partialRefresh)return null;var C=document.querySelector("head");if(S.createStyle(C," .grip-resizable{table-layout:fixed;} .grip-resizable > tbody > tr > td, .grip-resizable > tbody > tr > th{overflow:hidden} .grip-padding > tbody > tr > td, .grip-padding > tbody > tr > th{padding-left:0!important; padding-right:0!important;} .grip-container{ height:0px; position:relative;} .grip-handle{margin-left:-5px; position:absolute; z-index:5; } .grip-handle .grip-resizable{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;cursor: col-resize;top:0px} .grip-lastgrip{position:absolute; width:1px; } .grip-drag{ border-left:1px dotted black;	} .grip-flex{width:auto!important;} .grip-handle.grip-disabledgrip .grip-resizable{cursor:default; display:none;}"),b.hoverCursor&&b.hoverCursor!=="col-resize"){var x=".grip-handle .grip-resizable:hover{cursor:"+b.hoverCursor+"!important}";S.createStyle(C,x)}y.setAttribute(S.ID,w);var T=y.opt;y.opt=S.extendOptions(b);var N=S.getTableHeaders(y);if(S.extendTable(N),b.remoteTable&&b.remoteTable.matches("table")){var k=S.getTableHeaders(y.opt.remoteTable);N.length===k.length?S.extendRemoteTable(y.opt.remoteTable,k,y):console.warn("column count for remote table did not match")}return T}),f(this,"applyBounds",function(){var b=S.tb,y=b.columns.map(function(w){return window.getComputedStyle(w).width});b.style.width=window.getComputedStyle(b).width,b.tableWidth=Number(b.style.width.replace(/px/,"")).valueOf(),b.classList.remove(S.FLEX),b.columns.forEach(function(w,C){w.style.width=y[C],w.w=Number(y[C].replace(/px/,"")).valueOf()}),b.classList.add(S.FLEX)}),f(this,"serializeStore",function(){var b=S.store,y=S.tb;b[y.getAttribute(S.ID)]="";for(var w=0,C=0;C<y.columns.length;C++){var x=window.getComputedStyle(y.columns[C]).width.replace(/px/,"");b[y.getAttribute(S.ID)]+=x+";",w+=Number(x).valueOf()}b[y.getAttribute(S.ID)]+=w.toString(),y.opt.fixed||(b[y.getAttribute(S.ID)]+=";"+window.getComputedStyle(y).width.replace(/px/,""))}),f(this,"syncGrips",function(){var b=S.tb;b.gripContainer.style.width=b.tableWidth+S.PX;for(var y=0;y<b.columnCnt;y++){var w=b.columns[y],C=w.getBoundingClientRect(),x=b.getBoundingClientRect();b.grips[y].style.left=C.left-x.left+w.offsetWidth+b.cellSpace/2+S.PX,b.grips[y].style.height=(b.opt.headerOnly?b.columns[0].offsetHeight:b.offsetHeight)+S.PX}}),f(this,"destroy",function(){var b=S.tb,y=b.getAttribute(S.ID);return y?(S.store[y]="",b.classList.remove(S.RESIZABLE),b.classList.remove(S.FLEX),b.remote&&(b.remote.classList.remove(S.RESIZABLE),b.remote.classList.remove(S.FLEX)),b.gripContainer&&b.gripContainer.parentNode&&b.gripContainer.parentNode.removeChild(b.gripContainer),delete b.extended,b.opt):null}),f(this,"createStyle",function(b,y){var w=d()(y).toString(),C=b.querySelectorAll("style");if(!Array.from(C).filter(function(T){return T.gripid===w}).length){var x=document.createElement("style");x.type="text/css",x.gripid=w,x.styleSheet?x.styleSheet.cssText=y:x.appendChild(document.createTextNode(y)),b.appendChild(x)}}),f(this,"extendOptions",function(b){var y=Object.assign({},m.DEFAULTS,b);switch(y.fixed=!0,y.overflow=!1,y.resizeMode){case"flex":y.fixed=!1;break;case"overflow":y.fixed=!1,y.overflow=!0}return y}),f(this,"getTableHeaders",function(b){var y="#"+b.id,w=Array.from(b.querySelectorAll(y+">thead>tr:nth-of-type(1)>th"));return(w=w.concat(Array.from(b.querySelectorAll(y+">thead>tr:nth-of-type(1)>td")))).length||(w=(w=(w=(w=Array.from(b.querySelectorAll(y+">tbody>tr:nth-of-type(1)>th"))).concat(Array.from(b.querySelectorAll(y+">tr:nth-of-type(1)>th")))).concat(Array.from(b.querySelectorAll(y+">tbody>tr:nth-of-type(1)>td")))).concat(Array.from(b.querySelectorAll(y+">tr:nth-of-type(1)>td")))),S.filterInvisible(w,!1)}),f(this,"filterInvisible",function(b,y){return b.filter(function(w){var C=y?-1:w.offsetWidth,x=y?-1:w.offsetHeight;return!(C===0&&x===0||w.style&&w.style.display&&window.getComputedStyle(w).display==="none")})}),f(this,"extendTable",function(b){var y=S.tb;y.opt.removePadding&&y.classList.add("grip-padding"),y.classList.add(S.RESIZABLE),y.insertAdjacentHTML("beforebegin",'<div class="grip-container"/>'),y.grips=[],y.columns=[],y.tableWidth=Number(window.getComputedStyle(y).width.replace(/px/,"")).valueOf(),y.gripContainer=y.previousElementSibling,y.opt.marginLeft&&(y.gripContainer.style.marginLeft=y.opt.marginLeft),y.opt.marginRight&&(y.gripContainer.style.marginRight=y.opt.marginRight),y.cellSpace=parseInt(S.legacyIE?y.cellSpacing||y.currentStyle.borderSpacing:window.getComputedStyle(y).borderSpacing.split(" ")[0].replace(/px/,""))||2,y.borderSpace=parseInt(S.legacyIE?y.border||y.currentStyle.borderLeftWidth:window.getComputedStyle(y).borderLeftWidth.replace(/px/,""))||1,y.extended=!0,S.createGrips(b)}),f(this,"extendRemoteTable",function(b,y,w){w.opt.removePadding&&b.classList.add("grip-padding"),b.classList.add(S.RESIZABLE),b.getAttribute(S.ID)||b.setAttribute(S.ID,w.getAttribute(S.ID)+"remote"),b.columns=[],y.forEach(function(x,T){var N=y[T];N.w=w.columns[T].w,N.style.width=N.w+S.PX,N.removeAttribute("width"),b.columns.push(N)}),b.tableWidth=w.tableWidth,b.cellSpace=w.cellSpace,b.borderSpace=w.borderSpace;var C=Array.from(b.querySelectorAll("col"));b.columnGrp=S.filterInvisible(C,!0),b.columnGrp.forEach(function(x,T){x.removeAttribute("width"),x.style.width=w.columnGrp[T].style.width}),w.remote=b}),f(this,"createGrips",function(b){var y=S.tb;y.columnGrp=S.filterInvisible(Array.from(y.querySelectorAll("col")),!0),y.columnGrp.forEach(function(x){x.removeAttribute("width")}),y.columnCnt=b.length;var w=!1;S.store[y.getAttribute(S.ID)]&&(S.deserializeStore(b),w=!0),y.opt.widths||(y.opt.widths=[]),b.forEach(function(x,T){var N=b[T],k=y.opt.disabledColumns.indexOf(T)!==-1;S.createDiv(y.gripContainer,"grip-handle");var q=y.gripContainer.lastChild;!k&&y.opt.gripInnerHtml&&(q.innerHTML=y.opt.gripInnerHtml),S.createDiv(q,S.RESIZABLE),T===y.columnCnt-1&&(q.classList.add("grip-lastgrip"),y.opt.fixed&&(q.innerHTML="")),q.addEventListener("touchstart",S.onGripMouseDown,{capture:!0,passive:!0}),q.addEventListener("mousedown",S.onGripMouseDown,!0),k?q.classList.add("grip-disabledgrip"):(q.classList.remove("grip-disabledgrip"),q.addEventListener("touchstart",S.onGripMouseDown,{capture:!0,passive:!0}),q.addEventListener("mousedown",S.onGripMouseDown,!0)),q.t=y,q.i=T,y.opt.widths[T]?N.w=y.opt.widths[T]:N.w=w?Number(N.style.width.replace(/px/,"")).valueOf():Number(window.getComputedStyle(N).width.replace(/px/,"")).valueOf(),N.style.width=N.w+S.PX,N.removeAttribute("width"),q.data={i:T,t:y.getAttribute(S.ID),last:T===y.columnCnt-1},y.grips.push(q),y.columns.push(N)});var C=Array.from(y.querySelectorAll("td"));C.concat(Array.from(y.querySelectorAll("th"))),(C=(C=C.filter(function(x){for(var T=0;T<b.length;T++)if(b[T]===x)return!1;return!0})).filter(function(x){return!(x.querySelectorAll("table th").length||x.querySelectorAll("table td").length)})).forEach(function(x){x.removeAttribute("width")}),y.opt.fixed||(y.removeAttribute("width"),y.classList.add(S.FLEX)),S.syncGrips()}),f(this,"deserializeStore",function(b){var y=S.tb;if(y.columnGrp.forEach(function(T){T.removeAttribute("width")}),y.opt.flush)S.store[y.getAttribute(S.ID)]="";else{var w=S.store[y.getAttribute(S.ID)].split(";"),C=w[y.columnCnt+1];!y.opt.fixed&&C&&(y.style.width=C+S.PX,y.opt.overflow&&(y.style.minWidth=C+S.PX,y.tableWidth=Number(C).valueOf()));for(var x=0;x<y.columnCnt;x++)b[x].style.width=w[x]+S.PX,y.columnGrp[x]&&(y.columnGrp[x].style.width=100*Number(w[x]).valueOf()/Number(w[y.columnCnt]).valueOf()+"%")}}),f(this,"createDiv",function(b,y,w){var C=document.createElement("div");C.classList.add(y),w&&(C.innerHTML=w),b.appendChild(C)}),f(this,"syncCols",function(b,y,w,C){var x=b.remote,T=S.grip.x-S.grip.l,N=b.columns[y],k=b.columns[y+1];if(N&&k){var q=N.w+T,M=k.w-T,V=q+S.PX;if(N.style.width=V,b.columnGrp[y]&&b.columnGrp[y].style.width&&(b.columnGrp[y].style.width=V),x&&(x.columns[y].style.width=V,x.columnGrp[y]&&x.columnGrp[y].style.width&&(x.columnGrp[y].style.width=V)),C.fixed){var O=M+S.PX;k.style.width=O,b.columnGrp[y+1]&&b.columnGrp[y+1].style.width&&(b.columnGrp[y+1].style.width=O),x&&(x.columns[y+1].style.width=O,x.columnGrp[y+1]&&x.columnGrp[y+1].style.width&&(x.columnGrp[y+1].style.width=O))}else C.overflow&&(b.style.minWidth=b.tableWidth+T+S.PX);w&&(N.w=q,k.w=C.fixed?M:k.w,x&&(x.columns[y].w=q,x.columns[y+1].w=C.fixed?M:k.w))}});try{this.store=sessionStorage}catch{this.store={}}this.grip=null,this.tb=v,window.addEventListener("resize",this.onResize),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),this.init(_)};h.DEFAULTS={resizeMode:"fit",draggingClass:"grip-drag",gripInnerHtml:"",liveDrag:!1,minWidth:15,headerOnly:!1,hoverCursor:"col-resize",dragCursor:"col-resize",flush:!1,marginLeft:null,marginRight:null,remoteTable:null,disable:!1,partialRefresh:!1,disabledColumns:[],removePadding:!0,widths:[],serialize:!0,onDrag:null,onResize:null}},887:a=>{a.exports=function(s){for(var l=5381,d=s.length;d;)l=33*l^s.charCodeAt(--d);return l>>>0}}},r={};function o(a){if(r[a])return r[a].exports;var i=r[a]={exports:{}};return n[a](i,i.exports,o),i.exports}return o.n=a=>{var i=a&&a.__esModule?()=>a.default:()=>a;return o.d(i,{a:i}),i},o.d=(a,i)=>{for(var s in i)o.o(i,s)&&!o.o(a,s)&&Object.defineProperty(a,s,{enumerable:!0,get:i[s]})},o.o=(a,i)=>Object.prototype.hasOwnProperty.call(a,i),o.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o(67)})()})})(Gm);const ER=Lv(Gm.exports),Mo=e=>{const{entityId:t,entityVersionNumber:n}=e,{accessToken:r}=ae(),o=ty();return r?u(z,{children:u(We,{title:"Add this file to your Download Cart",placement:"right",enterNextDelay:300,children:u("a",{"data-testid":"AddToDownloadListV2",onClick:async()=>{try{await ny(t,n,r),o.invalidateQueries(["downloadliststatsv2"]);const i=await xn(r,t,n?n==null?void 0:n.toString():void 0);Zt(`${i.name} was successfully added to your Download Cart.`,"success")}catch(i){Zt(`Unable to add the file to your Download Cart. ${i}`,"danger")}},className:"ignoreLink",children:u(fe,{options:{icon:"addToCart"}})})})}):u(z,{})};try{Mo.displayName="AddToDownloadListV2",Mo.__docgenInfo={description:"",displayName:"AddToDownloadListV2",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/AddToDownloadListV2.tsx#AddToDownloadListV2"]={docgenInfo:Mo.__docgenInfo,name:"AddToDownloadListV2",path:"src/lib/containers/AddToDownloadListV2.tsx#AddToDownloadListV2"})}catch{}var fl={exports:{}};(function(e,t){(function(n,r){var o="1.0.2",a="",i="?",s="function",l="undefined",d="object",c="string",f="major",p="model",g="name",h="type",m="vendor",v="version",S="architecture",_="console",b="mobile",y="tablet",w="smarttv",C="wearable",x="embedded",T=255,N="Amazon",k="Apple",q="ASUS",M="BlackBerry",V="Browser",O="Chrome",A="Edge",R="Firefox",P="Google",$="Huawei",H="LG",B="Microsoft",U="Motorola",j="Opera",D="Samsung",L="Sony",F="Xiaomi",Y="Zebra",K="Facebook",Z=function(J,le){var ee={};for(var me in J)le[me]&&le[me].length%2===0?ee[me]=le[me].concat(J[me]):ee[me]=J[me];return ee},Q=function(J){for(var le={},ee=0;ee<J.length;ee++)le[J[ee].toUpperCase()]=J[ee];return le},G=function(J,le){return typeof J===c?he(le).indexOf(he(J))!==-1:!1},he=function(J){return J.toLowerCase()},we=function(J){return typeof J===c?J.replace(/[^\d\.]/g,a).split(".")[0]:r},_e=function(J,le){if(typeof J===c)return J=J.replace(/^\s\s*/,a).replace(/\s\s*$/,a),typeof le===l?J:J.substring(0,T)},Ce=function(J,le){for(var ee=0,me,ne,je,oe,Ie,Te;ee<le.length&&!Ie;){var dt=le[ee],tt=le[ee+1];for(me=ne=0;me<dt.length&&!Ie;)if(Ie=dt[me++].exec(J),Ie)for(je=0;je<tt.length;je++)Te=Ie[++ne],oe=tt[je],typeof oe===d&&oe.length>0?oe.length===2?typeof oe[1]==s?this[oe[0]]=oe[1].call(this,Te):this[oe[0]]=oe[1]:oe.length===3?typeof oe[1]===s&&!(oe[1].exec&&oe[1].test)?this[oe[0]]=Te?oe[1].call(this,Te,oe[2]):r:this[oe[0]]=Te?Te.replace(oe[1],oe[2]):r:oe.length===4&&(this[oe[0]]=Te?oe[3].call(this,Te.replace(oe[1],oe[2])):r):this[oe]=Te||r;ee+=2}},Me=function(J,le){for(var ee in le)if(typeof le[ee]===d&&le[ee].length>0){for(var me=0;me<le[ee].length;me++)if(G(le[ee][me],J))return ee===i?r:ee}else if(G(le[ee],J))return ee===i?r:ee;return J},ze={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Ve={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ue={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[g,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,v],[/opios[\/ ]+([\w\.]+)/i],[v,[g,j+" Mini"]],[/\bopr\/([\w\.]+)/i],[v,[g,j]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[g,v],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[g,"UC"+V]],[/\bqbcore\/([\w\.]+)/i],[v,[g,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[v,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[g,"IE"]],[/yabrowser\/([\w\.]+)/i],[v,[g,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure "+V],v],[/\bfocus\/([\w\.]+)/i],[v,[g,R+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[g,j+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[g,j+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[g,"MIUI "+V]],[/fxios\/([-\w\.]+)/i],[v,[g,R]],[/\bqihu|(qi?ho?o?|360)browser/i],[[g,"360 "+V]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1 "+V],v],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[g,v],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,K],v],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[g,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[g,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[g,O+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,O+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[g,"Android "+V]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,v],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[v,[g,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[v,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[v,Me,ze]],[/(webkit|khtml)\/([\w\.]+)/i],[g,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[g,R+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[g,v]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[S,"amd64"]],[/(ia32(?=;))/i],[[S,he]],[/((?:i[346]|x)86)[;\)]/i],[[S,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[S,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[S,"armhf"]],[/windows (ce|mobile); ppc;/i],[[S,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[S,/ower/,a,he]],[/(sun4\w)[;\)]/i],[[S,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[S,he]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[p,[m,D],[h,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[p,[m,D],[h,b]],[/\((ip(?:hone|od)[\w ]*);/i],[p,[m,k],[h,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[p,[m,k],[h,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[p,[m,$],[h,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[p,[m,$],[h,b]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[p,/_/g," "],[m,F],[h,b]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[p,/_/g," "],[m,F],[h,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[p,[m,"OPPO"],[h,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[p,[m,"Vivo"],[h,b]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[p,[m,"Realme"],[h,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[p,[m,U],[h,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[p,[m,U],[h,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[p,[m,H],[h,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[p,[m,H],[h,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[p,[m,"Lenovo"],[h,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[p,/_/g," "],[m,"Nokia"],[h,b]],[/(pixel c)\b/i],[p,[m,P],[h,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[p,[m,P],[h,b]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[m,L],[h,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[p,"Xperia Tablet"],[m,L],[h,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[p,[m,"OnePlus"],[h,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[p,[m,N],[h,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[p,/(.+)/g,"Fire Phone $1"],[m,N],[h,b]],[/(playbook);[-\w\),; ]+(rim)/i],[p,m,[h,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[p,[m,M],[h,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[p,[m,q],[h,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[p,[m,q],[h,b]],[/(nexus 9)/i],[p,[m,"HTC"],[h,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[m,[p,/_/g," "],[h,b]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[p,[m,"Acer"],[h,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[p,[m,"Meizu"],[h,b]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[p,[m,"Sharp"],[h,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,p,[h,b]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,p,[h,y]],[/(surface duo)/i],[p,[m,B],[h,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[p,[m,"Fairphone"],[h,b]],[/(u304aa)/i],[p,[m,"AT&T"],[h,b]],[/\bsie-(\w*)/i],[p,[m,"Siemens"],[h,b]],[/\b(rct\w+) b/i],[p,[m,"RCA"],[h,y]],[/\b(venue[\d ]{2,7}) b/i],[p,[m,"Dell"],[h,y]],[/\b(q(?:mv|ta)\w+) b/i],[p,[m,"Verizon"],[h,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[p,[m,"Barnes & Noble"],[h,y]],[/\b(tm\d{3}\w+) b/i],[p,[m,"NuVision"],[h,y]],[/\b(k88) b/i],[p,[m,"ZTE"],[h,y]],[/\b(nx\d{3}j) b/i],[p,[m,"ZTE"],[h,b]],[/\b(gen\d{3}) b.+49h/i],[p,[m,"Swiss"],[h,b]],[/\b(zur\d{3}) b/i],[p,[m,"Swiss"],[h,y]],[/\b((zeki)?tb.*\b) b/i],[p,[m,"Zeki"],[h,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],p,[h,y]],[/\b(ns-?\w{0,9}) b/i],[p,[m,"Insignia"],[h,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[p,[m,"NextBook"],[h,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],p,[h,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],p,[h,b]],[/\b(ph-1) /i],[p,[m,"Essential"],[h,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[p,[m,"Envizen"],[h,y]],[/\b(trio[-\w\. ]+) b/i],[p,[m,"MachSpeed"],[h,y]],[/\btu_(1491) b/i],[p,[m,"Rotor"],[h,y]],[/(shield[\w ]+) b/i],[p,[m,"Nvidia"],[h,y]],[/(sprint) (\w+)/i],[m,p,[h,b]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[m,B],[h,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[p,[m,Y],[h,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[p,[m,Y],[h,b]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,p,[h,_]],[/droid.+; (shield) bui/i],[p,[m,"Nvidia"],[h,_]],[/(playstation [345portablevi]+)/i],[p,[m,L],[h,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[p,[m,B],[h,_]],[/smart-tv.+(samsung)/i],[m,[h,w]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[m,D],[h,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,H],[h,w]],[/(apple) ?tv/i],[m,[p,k+" TV"],[h,w]],[/crkey/i],[[p,O+"cast"],[m,P],[h,w]],[/droid.+aft(\w)( bui|\))/i],[p,[m,N],[h,w]],[/\(dtv[\);].+(aquos)/i],[p,[m,"Sharp"],[h,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[m,_e],[p,_e],[h,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,w]],[/((pebble))app/i],[m,p,[h,C]],[/droid.+; (glass) \d/i],[p,[m,P],[h,C]],[/droid.+; (wt63?0{2,3})\)/i],[p,[m,Y],[h,C]],[/(quest( 2)?)/i],[p,[m,K],[h,C]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[h,x]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[p,[h,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[p,[h,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,y]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[h,b]],[/(android[-\w\. ]{0,9});.+buil/i],[p,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[g,A+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[g,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,v],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[g,[v,Me,Ve]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[g,"Windows"],[v,Me,Ve]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,"Mac OS"],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[v,g],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[g,v],[/\(bb(10);/i],[v,[g,M]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[g,R+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[g,"webOS"]],[/crkey\/([\d\.]+)/i],[v,[g,O+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[g,"Chromium OS"],v],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,v],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[g,v]]},Oe=function(J,le){if(typeof J===d&&(le=J,J=r),!(this instanceof Oe))return new Oe(J,le).getResult();var ee=J||(typeof n!==l&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:a),me=le?Z(Ue,le):Ue;return this.getBrowser=function(){var ne={};return ne[g]=r,ne[v]=r,Ce.call(ne,ee,me.browser),ne.major=we(ne.version),ne},this.getCPU=function(){var ne={};return ne[S]=r,Ce.call(ne,ee,me.cpu),ne},this.getDevice=function(){var ne={};return ne[m]=r,ne[p]=r,ne[h]=r,Ce.call(ne,ee,me.device),ne},this.getEngine=function(){var ne={};return ne[g]=r,ne[v]=r,Ce.call(ne,ee,me.engine),ne},this.getOS=function(){var ne={};return ne[g]=r,ne[v]=r,Ce.call(ne,ee,me.os),ne},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ee},this.setUA=function(ne){return ee=typeof ne===c&&ne.length>T?_e(ne,T):ne,this},this.setUA(ee),this};Oe.VERSION=o,Oe.BROWSER=Q([g,v,f]),Oe.CPU=Q([S]),Oe.DEVICE=Q([p,m,h,_,b,w,y,C,x]),Oe.ENGINE=Oe.OS=Q([g,v]),e.exports&&(t=e.exports=Oe),t.UAParser=Oe;var Ye=typeof n!==l&&(n.jQuery||n.Zepto);if(Ye&&!Ye.ua){var ct=new Oe;Ye.ua=ct.getResult(),Ye.ua.get=function(){return ct.getUA()},Ye.ua.set=function(J){ct.setUA(J);var le=ct.getResult();for(var ee in le)Ye.ua[ee]=le[ee]}}})(typeof window=="object"?window:ql)})(fl,fl.exports);const ar=e=>{const{accessToken:t}=ae(),{associatedObjectId:n,entityVersionNumber:r,associatedObjectType:o,fileHandleId:a,displayFileName:i,onClickCallback:s}=e,{ref:l,inView:d}=qn(),[c,f]=E.exports.useState(!1),[p,g]=E.exports.useState(!1),[h,m]=E.exports.useState(),[v,S]=E.exports.useState(),[_,b]=E.exports.useState("");let y=!0;E.exports.useEffect(()=>(y&&d&&T(),()=>{y=!1}),[t,d]);const w=async()=>{let k;const M=new fl.exports.UAParser().getBrowser().name=="Safari";let V=null;M&&(V=window.open("","Safari Download","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,popup,width=600,height=200"),V.document.body.innerHTML="Downloading file on Safari...");try{o===Ne.TableEntity?k=(await x(!0)).requestedFiles[0].preSignedURL:k=(await Cc(h,t,!1,!0)).preSignedURL}catch(O){console.log("Fail to get file download link: ",O)}k?(M&&V?(V.location=k,setTimeout(()=>{V&&V.close()},1e4)):window.open(k),s&&s(c)):(V==null||V.close(),console.log("Fail to get file download link"))},C=k=>k&&!k.isPreview?(g(!0),!0):(g(!1),!1),x=(k=!1)=>en({includeFileHandles:!0,includePreSignedURLs:k,includePreviewPreSignedURLs:!1,requestedFiles:[{associateObjectId:n,associateObjectType:o,fileHandleId:a}]},t),T=()=>xn(t,n,r).then(async k=>{if(k.hasOwnProperty("dataFileHandleId"))return m(k),Cc(k,t,!0).then(q=>{const M=q.fileHandle;M&&C(M)&&Hb(M)&&(f(!0),S(M.externalURL))}).catch(q=>{console.log("Error on getFileEntityFileHandle = ",q)});if(o===Ne.TableEntity){const M=(await x()).requestedFiles[0].fileHandle;i&&M&&C(M)&&b(M.fileName)}return Promise.resolve()}).catch(k=>{console.log("Error on getEntity = ",k)});return u(We,{title:c?"Navigate to external link":"Download this file individually",enterNextDelay:Ca,placement:"left",children:u("span",{ref:l,children:(()=>c?u("button",{className:"btn-download-icon",onClick:()=>{s&&s(c)},children:u("a",{className:"ignoreLink",rel:"noreferrer",href:v,target:"_blank",children:u(fe,{options:{icon:"openInNewWindow"}})})}):p?I("button",{className:"btn-download-icon",onClick:w,children:[u(fe,{options:{icon:"download"}}),i&&_?_:""]}):u(z,{}))()})})};try{ar.displayName="DirectDownload",ar.__docgenInfo={description:"",displayName:"DirectDownload",props:{associatedObjectId:{defaultValue:null,description:"",name:"associatedObjectId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},associatedObjectType:{defaultValue:null,description:"",name:"associatedObjectType",required:!1,type:{name:"enum",value:[{value:'"FileEntity"'},{value:'"TableEntity"'},{value:'"WikiAttachment"'},{value:'"WikiMarkdown"'},{value:'"UserProfileAttachment"'},{value:'"MessageAttachment"'},{value:'"TeamAttachment"'},{value:'"SubmissionAttachment"'},{value:'"VerificationSubmission"'},{value:'"AccessRequirementAttachment"'},{value:'"DataAccessRequestAttachment"'},{value:'"DataAccessSubmissionAttachment"'}]}},fileHandleId:{defaultValue:null,description:"",name:"fileHandleId",required:!1,type:{name:"string"}},displayFileName:{defaultValue:null,description:"",name:"displayFileName",required:!1,type:{name:"boolean"}},onClickCallback:{defaultValue:null,description:"",name:"onClickCallback",required:!1,type:{name:"((isExternalLink: boolean) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DirectDownload.tsx#DirectDownload"]={docgenInfo:ar.__docgenInfo,name:"DirectDownload",path:"src/lib/containers/DirectDownload.tsx#DirectDownload"})}catch{}const xR=e=>{const t=E.exports.useRef();return E.exports.useEffect(()=>{t.current=e}),t.current},TR=e=>xR(e)!==e;function Dt({isCompleted:e}){return u("div",{"data-testid":`AccessApprovalCheckMark-${e}`,className:`check-mark-container ${e?"green":"orange"}`,children:e?u(Ib,{}):u(Nb,{})})}try{Dt.displayName="AccessApprovalCheckMark",Dt.__docgenInfo={description:"",displayName:"AccessApprovalCheckMark",props:{isCompleted:{defaultValue:null,description:"",name:"isCompleted",required:!0,type:{name:"boolean | undefined"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AccessApprovalCheckMark.tsx#AccessApprovalCheckMark"]={docgenInfo:Dt.__docgenInfo,name:"AccessApprovalCheckMark",path:"src/lib/containers/access_requirement_list/AccessApprovalCheckMark.tsx#AccessApprovalCheckMark"})}catch{}function _n({user:e,wikiPage:t,accessRequirement:n,accessRequirementStatus:r,showButton:o=!0,entityId:a,onHide:i}){const{accessToken:s}=ae(),[l,d]=E.exports.useState(!0),c=r==null?void 0:r.isApproved,[f,p]=E.exports.useState(c);let g="";n.concreteType===Le.ManagedACTAccessRequirement||n.concreteType===Le.ACTAccessRequirement?window.location.hostname==="www.synapse.org"||window.location.hostname==="staging.synapse.org"?g="Request access":g="Request access via Synapse.org":g="I Accept Terms of Use",E.exports.useEffect(()=>{p(c)},[c]);const h=()=>{window.open(`${De.PORTAL}#!AccessRequirement:AR_ID=${n.id}&TYPE=ENTITY&ID=${a}`)},m=()=>{if(n.concreteType===Le.ManagedACTAccessRequirement||n.concreteType===Le.ACTAccessRequirement)h(),i==null||i();else if(!f){const T={requirementId:n==null?void 0:n.id,submitterId:e==null?void 0:e.ownerId,accessorId:e==null?void 0:e.ownerId,state:Vl.APPROVED};Wf(s,T).then(N=>{p(!0)}).catch(N=>console.error("Error on post access approval: ",N))}},v=n.termsOfUse,S=n.actContactInfo,_=n.concreteType===Le.TermsOfUseAccessRequirement,b=n.concreteType===Le.ACTAccessRequirement,y=_&&v||b&&S;let w=u(z,{});t?w=u("div",{className:"AcceptRequirementsMarkdown",children:u(Fe,{wikiId:t==null?void 0:t.wikiPageId,ownerId:t==null?void 0:t.ownerObjectId,objectType:t==null?void 0:t.ownerObjectType})}):y&&(w=u(Fe,{markdown:_?v:S}));const C=n.concreteType===Le.ManagedACTAccessRequirement;return u(z,{children:I("div",{"data-testid":"AcceptedRequirements",className:"requirement-container",children:[u(Dt,{isCompleted:f}),I("div",{className:"terms-of-use-content",children:[f?I("div",{children:[I("p",{children:[C?"Your data access request has been approved.":"You have accepted the terms of use.",C&&u("a",{className:"update-request-button",onClick:()=>{h()},children:"Update Request"}),u("a",{className:"view-terms-button",onClick:()=>{d(!l)},children:"View Terms"})]}),u("div",{className:`view-terms ${l?"hidden":"show"}`,children:w})]}):w,s&&o&&I("div",{className:`button-container ${f?"hide":"default"}`,children:[u("div",{className:"accept-button-container",children:u("button",{className:"accept-button",onClick:m,children:g})}),u("div",{className:"not-accept-button-container",children:u("button",{className:"not-accpet-button",onClick:()=>i==null?void 0:i(),children:"I do not accept"})})]})]})]})})}try{_n.displayName="AcceptedRequirements",_n.__docgenInfo={description:"",displayName:"AcceptedRequirements",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPageKey | undefined"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement | ManagedACTAccessRequirement | SelfSignAccessRequirement | TermsOfUseAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus | undefined"}},showButton:{defaultValue:{value:"true"},description:"",name:"showButton",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AcceptedRequirements.tsx#AcceptedRequirements"]={docgenInfo:_n.__docgenInfo,name:"AcceptedRequirements",path:"src/lib/containers/access_requirement_list/AcceptedRequirements.tsx#AcceptedRequirements"})}catch{}function OR({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:o}){const{accessToken:a}=ae(),[i,s]=E.exports.useState();return E.exports.useEffect(()=>{(async()=>{try{const d=await Fa(a,e.id);s(d)}catch(d){console.error("Error on get ACTAccessRequirement",d)}})()},[a,e]),u(_n,{accessRequirement:e,accessRequirementStatus:r,user:t,wikiPage:i,onHide:n,entityId:o})}try{ACTAccessRequirement.displayName="ACTAccessRequirement",ACTAccessRequirement.__docgenInfo={description:"",displayName:"ACTAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/ACTAccessRequirement.tsx#ACTAccessRequirement"]={docgenInfo:ACTAccessRequirement.__docgenInfo,name:"ACTAccessRequirement",path:"src/lib/containers/access_requirement_list/ACTAccessRequirement.tsx#ACTAccessRequirement"})}catch{}const Vo=e=>{const{accessToken:t}=ae(),{formSubmitRequestObject:n,onHide:r}=e,[o,a]=E.exports.useState(),[i,s]=E.exports.useState(!1),l=async()=>{if(n)try{await Gf(n,t)?r==null||r():(a({key:"danger",message:"Sorry, there is an error in submitting your request. Please close this dialog and try again later."}),s(!0))}catch(d){console.log("CancelRequestDataAccess: Error updating form",d),a({key:"danger",message:`Sorry, there is an error in submitting your request. ${d.reason||""}. Please close this dialog and try again later`}),s(!0)}};return I(z,{children:[u(ie.Header,{closeButton:!0,children:u(ie.Title,{className:"AccessRequirementList__title",children:"Save Changes"})}),I(ie.Body,{children:[u("p",{children:"Would you like to save your recent changes?"}),o&&u(tn,{variant:o.key,children:o.message})]}),I(ie.Footer,{children:[!i&&I(z,{children:[u(be,{variant:"link",onClick:()=>r==null?void 0:r(),children:"Cancel"}),u(be,{variant:"primary",onClick:()=>l(),children:"Save changes"})]}),i&&u(be,{variant:"primary",onClick:()=>r==null?void 0:r(),children:"Close"})]})]})};try{Vo.displayName="CancelRequestDataAccess",Vo.__docgenInfo={description:"",displayName:"CancelRequestDataAccess",props:{formSubmitRequestObject:{defaultValue:null,description:"",name:"formSubmitRequestObject",required:!0,type:{name:"RequestInterface | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/CancelRequestDataAccess.tsx#CancelRequestDataAccess"]={docgenInfo:Vo.__docgenInfo,name:"CancelRequestDataAccess",path:"src/lib/containers/access_requirement_list/managedACTAccess/CancelRequestDataAccess.tsx#CancelRequestDataAccess"})}catch{}const Bo=e=>{const{user:t,wikiPage:n,accessRequirementStatus:r,accessRequirement:o,showButton:a=!0,onHide:i,requestDataStepCallback:s}=e,{accessToken:l}=ae(),[d,c]=E.exports.useState(!0),f=r==null?void 0:r.isApproved,[p,g]=E.exports.useState(f),[h,m]=E.exports.useState(),[v,S]=E.exports.useState(),[_,b]=E.exports.useState(!1);E.exports.useEffect(()=>{g(f),r!=null&&r.currentSubmissionStatus&&(m(r.currentSubmissionStatus.state),x(r.currentSubmissionStatus))},[f]);const y=()=>{s==null||s({managedACTAccessRequirement:o,step:1})},w=async()=>{if(o.concreteType===Le.ManagedACTAccessRequirement)if(l)if(h===ke.SUBMITTED&&!_){const R={key:"danger",message:I(z,{children:[u("strong",{children:"Error canceling your data access request."}),u("br",{}),"Please try again later."]})};try{(await ry(r==null?void 0:r.currentSubmissionStatus.submissionId,l)).state===ke.CANCELLED?(S({key:"success",message:u("strong",{children:"Your data access request has been canceled."})}),b(!0)):S(R)}catch(P){console.log("RequestDataAccess: error canceling data access request:",P),S(R)}}else y();else s==null||s({managedACTAccessRequirement:o,step:4});else if(!p){const R={requirementId:o==null?void 0:o.id,submitterId:t==null?void 0:t.ownerId,accessorId:t==null?void 0:t.ownerId,state:Vl.APPROVED};Wf(l,R).then(P=>{g(!0)}).catch(P=>console.error("Error on post access approval: ",P))}},C=()=>{if(o.concreteType===Le.ManagedACTAccessRequirement||o.concreteType===Le.ACTAccessRequirement)if(h){let R;switch(h){case ke.SUBMITTED:R=_?"Update Request":"Cancel Request";break;case ke.APPROVED:case ke.REJECTED:case ke.CANCELLED:R="Update Request"}return R}else return"Request access";else return"I Accept Terms of Use"},x=R=>{switch(R.state){case ke.SUBMITTED:S({key:"primary",message:u("strong",{children:"You have submitted a data access request."})});break;case ke.APPROVED:S({key:"success",message:u("strong",{children:"Your data access request has been approved."})});break;case ke.REJECTED:S({key:"danger",message:I(z,{children:[u("strong",{children:"Your data access request has been rejected."}),u("br",{}),R.rejectedReason||""]})});break}return u(z,{})},T=o.termsOfUse,N=o.actContactInfo,k=o.concreteType===Le.TermsOfUseAccessRequirement,q=o.concreteType===Le.ACTAccessRequirement,M=k&&T||q&&N;let V=u(z,{});n?V=I("div",{className:"AcceptRequirementsMarkdown",children:[n&&u(Fe,{wikiId:n==null?void 0:n.wikiPageId,ownerId:n==null?void 0:n.ownerObjectId,objectType:n==null?void 0:n.ownerObjectType}),v&&u(tn,{className:"access-requirement-list-alert",variant:v.key,children:v.message})]}):M&&(V=u(Fe,{markdown:k?T:N}));const O=o.concreteType===Le.ManagedACTAccessRequirement;return u(z,{children:I("div",{"data-testid":"RequestDataAccess",className:"requirement-container",children:[u(Dt,{isCompleted:p}),I("div",{className:"terms-of-use-content",children:[p?I("div",{children:[u("p",{children:O?"Your data access request has been approved.":"You have accepted the terms of use."}),I("p",{style:{marginBottom:"0"},children:[O&&u("button",{className:"update-request-button",onClick:()=>{y()},style:{paddingLeft:"0",marginRight:"2rem"},children:C()}),u("a",{onClick:()=>{c(!d)},children:"View Terms"})]}),u("div",{className:`view-terms ${d?"hidden":"show"}`,children:V})]}):V,a&&I("div",{className:`button-container ${p?"hide":"default"}`,children:[u("div",{className:"accept-button-container",children:u("button",{className:"accept-button",onClick:w,children:C()})}),u("div",{className:"not-accept-button-container",children:u("button",{className:"not-accpet-button",onClick:()=>i==null?void 0:i(),children:"I do not accept"})})]})]})]})})};try{Bo.displayName="RequestDataAccess",Bo.__docgenInfo={description:"",displayName:"RequestDataAccess",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPageKey | undefined"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement | ManagedACTAccessRequirement | SelfSignAccessRequirement | TermsOfUseAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!1,type:{name:"ManagedACTAccessRequirementStatus"}},showButton:{defaultValue:null,description:"",name:"showButton",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccess.tsx#RequestDataAccess"]={docgenInfo:Bo.__docgenInfo,name:"RequestDataAccess",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccess.tsx#RequestDataAccess"})}catch{}const IR=e=>{const{entityId:t,user:n,accessRequirement:r,accessRequirementStatus:o,onHide:a,requestDataStepCallback:i}=e,{accessToken:s}=ae(),[l,d]=E.exports.useState();return E.exports.useEffect(()=>{(async()=>{try{const f=await Fa(s,r.id);d(f)}catch(f){console.error("Error on get ManagedACTAccessRequirement",f)}})()},[s,r]),u(Bo,{accessRequirement:r,accessRequirementStatus:o,entityId:t,user:n,wikiPage:l,onHide:a,requestDataStepCallback:i})};try{ManagedACTAccessRequirement.displayName="ManagedACTAccessRequirement",ManagedACTAccessRequirement.__docgenInfo={description:"",displayName:"ManagedACTAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"ManagedACTAccessRequirementStatus"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((props: requestDataStepCallbackProps) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/ManagedACTAccessRequirement.tsx#ManagedACTAccessRequirement"]={docgenInfo:ManagedACTAccessRequirement.__docgenInfo,name:"ManagedACTAccessRequirement",path:"src/lib/containers/access_requirement_list/managedACTAccess/ManagedACTAccessRequirement.tsx#ManagedACTAccessRequirement"})}catch{}const Fo=e=>{const{requestDataStepCallback:t,managedACTAccessRequirement:n,onHide:r}=e,{accessToken:o}=ae(),[a,i]=E.exports.useState(""),[s,l]=E.exports.useState(""),[d,c]=E.exports.useState(""),[f,p]=E.exports.useState(),g=E.exports.useRef({});let h=!0;E.exports.useEffect(()=>(h&&(p(void 0),m()),()=>{h=!1}),[o]);const m=async()=>{try{const _=await oy(String(n.id),o);_.id&&(g.current=_,i(_.projectLead),l(_.institution),c(_.intendedDataUseStatement))}catch(_){console.log("RequestDataAccessStep1: Error getting research project data: ",_)}},v=(_="")=>I(z,{children:[u("strong",{children:"Unable to update research project data."}),u("br",{}),_]});return u(z,{children:I(ue,{className:"access-request-form1",onSubmit:_=>{_.preventDefault();const b=Object.assign({},g.current,{accessRequirementId:String(n.id),institution:s,projectLead:a,intendedDataUseStatement:d});try{ay(b,o).then(y=>{t==null||t({managedACTAccessRequirement:n,step:2,researchProjectId:y.id})}).catch(y=>{console.log("RequestDataAccessStep1: Error updating research project data: ",y),p({key:"danger",message:v(y.reason)})})}catch(y){console.log("RequestDataAccessStep1: Error updating research project data: ",y),p({key:"danger",message:v(y.reason)})}},children:[u(ie.Header,{closeButton:!0,children:u(ie.Title,{className:"AccessRequirementList__title",children:"Request Access"})}),I(ie.Body,{children:[u("p",{children:"Please tell us about your project."}),I(ue.Group,{children:[u(ue.Label,{htmlFor:"project-lead",children:"Project Lead"}),u(ue.Control,{id:"project-lead",type:"text",value:a,required:!0,onChange:_=>i(_.target.value)})]}),I(ue.Group,{children:[u(ue.Label,{htmlFor:"institution",children:"Institution"}),u(ue.Control,{id:"institution",type:"text",value:s,required:!0,onChange:_=>l(_.target.value)})]}),n.isIDURequired&&I(ue.Group,{children:[I(ue.Label,{htmlFor:"data-use",children:["Intended Data Use Statement -",n.isIDUPublic&&u("i",{id:"idu-visible",children:"this will be visible to the public"})]}),u(ue.Control,{id:"data-use",as:"textarea",value:d,rows:10,required:!0,onChange:_=>c(_.target.value)})]}),f&&u(tn,{variant:f.key,children:f.message})]}),I(ie.Footer,{children:[u(be,{variant:"link",onClick:()=>r==null?void 0:r(),children:"Cancel"}),u(be,{variant:"primary",type:"submit",children:"Save changes"})]})]})})};try{Fo.displayName="RequestDataAccessStep1",Fo.__docgenInfo={description:"",displayName:"RequestDataAccessStep1",props:{requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((props: requestDataStepCallbackProps) => void)"}},managedACTAccessRequirement:{defaultValue:null,description:"",name:"managedACTAccessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep1.tsx#RequestDataAccessStep1"]={docgenInfo:Fo.__docgenInfo,name:"RequestDataAccessStep1",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep1.tsx#RequestDataAccessStep1"})}catch{}const zt=e=>{const{id:t,fileHandleAssociation:n,className:r,variant:o,fileName:a}=e,{accessToken:i}=ae(),s=async()=>{if(!n.fileHandleId||!i)return;const l={requestedFiles:[n],includePreSignedURLs:!0,includeFileHandles:!1,includePreviewPreSignedURLs:!1};try{const c=(await en(l,i)).requestedFiles[0].preSignedURL;c?window.open(c):console.log("Fail to get file download link")}catch(d){console.log("Fail to get file download link",d)}};return u(z,{children:u(be,{id:t,variant:o,className:r,onClick:l=>s(),children:a})})};try{zt.displayName="DirectDownloadButton",zt.__docgenInfo={description:"",displayName:"DirectDownloadButton",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!0,type:{name:"string | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DirectDownloadButton.tsx#DirectDownloadButton"]={docgenInfo:zt.__docgenInfo,name:"DirectDownloadButton",path:"src/lib/containers/DirectDownloadButton.tsx#DirectDownloadButton"})}catch{}const $o=e=>{const{requestDataStepCallback:t,managedACTAccessRequirement:n,entityId:r,user:o,researchProjectId:a}=e,{accessToken:i}=ae(),[s,l]=E.exports.useState(),[d,c]=E.exports.useState(),[f,p]=E.exports.useState(),[g,h]=E.exports.useState([]),[m,v]=E.exports.useState(),[S,_]=E.exports.useState(),[b,y]=E.exports.useState(!1),[w,C]=E.exports.useState([]),x={},T={requestedFiles:[],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1};let N=!0;E.exports.useEffect(()=>(N&&(_(void 0),k()),()=>{N=!1}),[i,a]);const k=async()=>{const D=await iy(String(n.id),i);if(D.accessorChanges){const L=new Set;D.accessorChanges=D.accessorChanges.filter(F=>L.has(F.userId)?!1:L.add(F.userId))}D.concreteType==="org.sagebionetworks.repo.model.dataaccess.Renewal"&&y(!0),D.researchProjectId=a,v(D),q(D),M(D)},q=D=>{const L=D.accessorChanges,F=[];!L||!L.length?(F.push(o.ownerId),v(K=>Object.assign({},K,{accessorChanges:[{userId:o.ownerId,type:ht.GAIN_ACCESS}]}))):L.forEach(K=>{F.push(K.userId)});const Y=F.map(K=>sy(i,K));Promise.all(Y).then(K=>{const Z=K.map((Q,G)=>{var we;const he=L&&((we=L[G])==null?void 0:we.type)?L[G].type:ht.GAIN_ACCESS;return{profile:Q,accessType:he}});C(Z)})},M=D=>{if(n.isDUCRequired&&n.ducTemplateFileHandleId){const L={associateObjectId:String(n.id),associateObjectType:Ne.AccessRequirementAttachment,fileHandleId:n.ducTemplateFileHandleId};T.requestedFiles.push(L),x[n.ducTemplateFileHandleId]||(x[n.ducTemplateFileHandleId]=[]),x[n.ducTemplateFileHandleId].push("DUCTemplate"),l(L)}if(n.isDUCRequired&&D.ducFileHandleId){const L={associateObjectId:D.id,associateObjectType:Ne.DataAccessRequestAttachment,fileHandleId:D.ducFileHandleId};T.requestedFiles.push(L),x[D.ducFileHandleId]||(x[D.ducFileHandleId]=[]),x[D.ducFileHandleId].push("DUC"),c(L)}if(n.isIRBApprovalRequired&&D.irbFileHandleId){const L={associateObjectId:D.id,associateObjectType:Ne.DataAccessRequestAttachment,fileHandleId:D.irbFileHandleId};T.requestedFiles.push(L),x[D.irbFileHandleId]||(x[D.irbFileHandleId]=[]),x[D.irbFileHandleId].push("IRB"),p(L)}D.attachments&&D.attachments.length&&D.attachments.forEach(L=>{T.requestedFiles.push({associateObjectId:D.id,associateObjectType:Ne.DataAccessRequestAttachment,fileHandleId:L}),x[L]||(x[L]=[]),x[L].push("attachments")}),T.requestedFiles.length&&en(T,i).then(L=>{L.requestedFiles.forEach(F=>{const Y=F.fileHandle.fileName,K=x[F.fileHandleId];K.forEach(Z=>{switch(Z){case"DUCTemplate":l(Q=>Object.assign({},Q,{fileName:Y})),x[F.fileHandleId].splice(K.indexOf("DUCTemplate"),1);break;case"DUC":c(Q=>Object.assign({},Q,{fileName:Y})),x[F.fileHandleId].splice(K.indexOf("DUC"),1);break;case"IRB":p(Q=>Object.assign({},Q,{fileName:Y})),x[F.fileHandleId].splice(K.indexOf("IRB"),1);break;case"attachments":h(Q=>[...Q,{fileName:Y,associateObjectId:D.id,associateObjectType:Ne.DataAccessRequestAttachment,fileHandleId:F.fileHandleId}]),x[F.fileHandleId].splice(K.indexOf("attachments"),1);break}})})})},V=async()=>{if(m)try{const D=await Gf(m,i);if(D&&D.etag){const L={requestId:D.id,requestEtag:D.etag,subjectId:r,subjectType:Ua.ENTITY};v(K=>Object.assign({},K,{etag:D.etag}));const F=await cy(L,i),Y=A(F);F.state===ke.REJECTED?_({key:"danger",message:Y}):t==null||t({step:5})}else _({key:"danger",message:O()})}catch(D){console.log("RequestDataAccessStep2: Error updating form",D),_({key:"danger",message:O(D.reason)})}},O=(D="")=>I(z,{children:[u("strong",{children:"Sorry, there is an error in submitting your request."}),u("br",{}),D]}),A=D=>{const L="The information has been ";switch(D.state){case ke.SUBMITTED:return I("strong",{children:[L," submitted."]});case ke.APPROVED:return I("strong",{children:[L," approved."]});case ke.CANCELLED:return I("strong",{children:[L," canceled."]});case ke.REJECTED:return I(z,{children:[I("strong",{children:[L," rejected."]})," ",D.rejectedReason,". Please close this dialog and try again later."]});default:return u(z,{})}},R=D=>{const L=w.filter(Y=>Y.profile.ownerId!==D);C(L);const F=L.map(Y=>({userId:Y.profile.ownerId,type:Y.accessType}));v(Y=>Object.assign({},Y,{accessorChanges:F}))},P=D=>{const L=g.filter(Y=>Y.fileHandleId!==D);h(L);const F=L.map(Y=>Y.fileHandleId);v(Y=>Object.assign({},Y,{attachments:F}))},$=D=>{if(D.resp&&D.success){const L=D.resp;if(D.context==="attachments"){const F=m!=null&&m.attachments?m==null?void 0:m.attachments:[];F==null||F.push(L.fileHandleId),v(Y=>Object.assign({},Y,{attachments:F})),h(Y=>[...Y,{fileName:L.fileName,fileHandleId:L.fileHandleId}])}else v(F=>Object.assign({},F,{[D.context]:L.fileHandleId})),D.context==="ducFileHandleId"&&c(F=>Object.assign({},F,{fileName:L.fileName,fileHandleId:L.fileHandleId})),D.context==="irbFileHandleId"&&p(F=>Object.assign({},F,{fileName:L.fileName,fileHandleId:L.fileHandleId}))}else!D.success&&D.error&&(console.log("RequestDataAccessStep2: Error uploading the file",D.error),_({key:"danger",message:O(D.error.reason)}))},H=D=>{if(!w.map(F=>F.profile.ownerId).includes(D.ownerId)){C(K=>{var Z,Q;return[...K,{profile:{ownerId:D.ownerId,firstName:(Z=D.firstName)!=null?Z:"",lastName:(Q=D.lastName)!=null?Q:"",userName:D.userName},accessType:ht.GAIN_ACCESS}]});const F={userId:D.ownerId,type:ht.GAIN_ACCESS},Y=(m==null?void 0:m.accessorChanges)||[];Y.push(F),v(K=>Object.assign({},K,{accessorChanges:Y}))}},B=(D,L)=>{const F=D.target.value;switch(L){case"publications":v(Y=>Object.assign({},Y,{publication:F}));break;case"summaryOfUse":v(Y=>Object.assign({},Y,{summaryOfUse:F}));break}},U=(D,L)=>{const F=[...w],Y=F.findIndex(Q=>Q.profile.ownerId===L);F[Y].accessType=D,C(F);const K=(m==null?void 0:m.accessorChanges)||[],Z=K.findIndex(Q=>Q.userId===L);K[Z].type=D,v(Q=>Object.assign({},Q,{accessorChanges:K}))},j=()=>{let D="",L="";return n.isCertifiedUserRequired&&(D="https://help.synapse.org/docs/User-Types.2007072795.html#UserAccountTiers-CertifiedUsers",L="All data requesters must be a certified user."),n.isValidatedProfileRequired&&(D="https://help.synapse.org/docs/User-Types.2007072795.html#UserAccountTiers-ValidatedUsers",L="All data requesters must have a validated user profile."),D&&L?I(z,{children:[L,u("a",{href:D,target:"_blank",rel:"noreferrer",children:u(fe,{options:{icon:"info"}})})]}):u(z,{})};return u(z,{children:I(ue,{className:"access-request-form2",onSubmit:D=>D.preventDefault(),children:[u(ie.Header,{closeButton:!0,children:u(ie.Title,{className:"AccessRequirementList__title",children:"Request Access"})}),I(ie.Body,{children:[u("p",{children:"Please provide the information below to submit the request for access."}),I(ue.Group,{children:[u(ue.Label,{htmlFor:"requesters",style:{margin:"0"},children:"Data Requesters"}),u("br",{}),I("span",{className:"requester-label",children:[n.isDUCRequired&&I(z,{children:["This list should match those listed on your DUC.",u("br",{})]}),j()]}),u(bb,{id:"requesters",typeFilter:ly.USERS_ONLY,onSelectCallback:H,filterUserIds:w.map(D=>D.profile.ownerId)})]}),u(ue.Group,{style:{marginBottom:"4rem"},children:w.map((D,L)=>I("div",{className:"list-items",children:[u(Rl,{userProfile:D.profile,showAccountLevelIcon:!0,disableLink:!0,showFullName:!0}),o.ownerId!==D.profile.ownerId&&D.accessType===ht.GAIN_ACCESS&&u(be,{className:"clear-x",variant:"link",onClick:()=>R(D.profile.ownerId),children:u(fe,{options:{icon:"clear"}})}),b&&D.accessType!==ht.GAIN_ACCESS&&u(z,{children:u(Sb,{id:`accessor-renewal-${D.profile.ownerId}`,value:D.accessType,options:[{label:"Renew",value:ht.RENEW_ACCESS},{label:"Revoke",value:ht.REVOKE_ACCESS}],onChange:F=>U(F,D.profile.ownerId)})})]},`accessor-${L}`))}),(n==null?void 0:n.isDUCRequired)&&I(z,{children:[I(ue.Group,{children:[u(ue.Label,{htmlFor:"duc-temp",className:"SRC-noMargin",children:"DUC template"}),u("br",{}),s&&u("div",{children:u(zt,{fileHandleAssociation:{associateObjectId:s==null?void 0:s.associateObjectId,associateObjectType:s.associateObjectType,fileHandleId:s.fileHandleId},fileName:s.fileName,id:"duc-temp",variant:"link",className:"SRC-noPadding"})})]}),I(ue.Group,{children:[u(ue.Label,{htmlFor:"duc",className:"SRC-noMargin",children:"Upload DUC"}),u("br",{}),d&&u("div",{children:u(zt,{fileHandleAssociation:{associateObjectId:d.associateObjectId,associateObjectType:d.associateObjectType,fileHandleId:d.fileHandleId},fileName:d==null?void 0:d.fileName,id:"duc-download",variant:"link",className:"SRC-noPadding"})}),u(ri,{id:"duc-browse",variant:"light-primary-base",uploadCallback:$,context:"ducFileHandleId"})]})]}),(n==null?void 0:n.isIRBApprovalRequired)&&I(ue.Group,{children:[u(ue.Label,{htmlFor:"irb",className:"SRC-noMargin",children:"Upload IRB approval"}),u("br",{}),f&&u("div",{children:u(zt,{fileHandleAssociation:{associateObjectId:f.associateObjectId,associateObjectType:f.associateObjectType,fileHandleId:f.fileHandleId},fileName:f==null?void 0:f.fileName,id:"irb-download",variant:"link",className:"SRC-noPadding"})}),u(ri,{id:"irb-browse",variant:"light-primary-base",uploadCallback:$,context:"irbFileHandleId"})]}),(n==null?void 0:n.areOtherAttachmentsRequired)&&I(ue.Group,{children:[u(ue.Label,{className:"SRC-noMargin",children:"Upload other required documents"}),u("br",{}),g.map((D,L)=>I("div",{className:"list-items",children:[u(zt,{fileHandleAssociation:{associateObjectId:D.associateObjectId,associateObjectType:D.associateObjectType,fileHandleId:D.fileHandleId},fileName:D==null?void 0:D.fileName,variant:"link",className:"SRC-noPadding attachment-download"}),u(be,{className:"clear-x",variant:"link",onClick:()=>P(D.fileHandleId),children:u(fe,{options:{icon:"clear"}})})]},`file-attachment-${L}`)),u(ri,{id:"attachment-browse",variant:"light-primary-base",uploadCallback:$,context:"attachments"})]}),b&&I(z,{children:[I(ue.Group,{children:[u(ue.Label,{htmlFor:"publications",className:"SRC-noMargin",children:"Publication(s)"}),u(ue.Control,{id:"publications",as:"textarea",rows:3,onChange:D=>B(D,"publications")})]}),I(ue.Group,{children:[u(ue.Label,{htmlFor:"summaryOfUse",className:"SRC-noMargin",children:"Summary of use"}),u(ue.Control,{id:"summaryOfUse",as:"textarea",rows:3,onChange:D=>B(D,"summaryOfUse")})]})]}),S&&u(tn,{variant:S.key,children:S.message})]}),u(ie.Footer,{children:I(z,{children:[u(be,{variant:"link",onClick:()=>t==null?void 0:t({step:3,formSubmitRequestObject:m}),children:"Cancel"}),u(be,{variant:"primary",onClick:()=>V(),children:"Submit"})]})})]})})};try{$o.displayName="RequestDataAccessStep2",$o.__docgenInfo={description:"",displayName:"RequestDataAccessStep2",props:{managedACTAccessRequirement:{defaultValue:null,description:"",name:"managedACTAccessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!0,type:{name:"(props: requestDataStepCallbackProps) => void"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile"}},researchProjectId:{defaultValue:null,description:"",name:"researchProjectId",required:!0,type:{name:"string"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep2.tsx#RequestDataAccessStep2"]={docgenInfo:$o.__docgenInfo,name:"RequestDataAccessStep2",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep2.tsx#RequestDataAccessStep2"})}catch{}const Ho=e=>{const{onHide:t}=e;return I(z,{children:[u(ie.Header,{closeButton:!0,children:u(ie.Title,{className:"AccessRequirementList__title",children:"Your Data Access Request Has Been Submitted!"})}),u(ie.Body,{children:u("p",{style:{margin:"2rem 0"},children:"Your data access request been submitted and is currently being reviewed. Please allow for up to 2 weeks for your request to be reviewed and approved."})}),u(ie.Footer,{children:u(be,{variant:"primary",onClick:()=>t==null?void 0:t(),children:"Finish"})})]})};try{Ho.displayName="RequestDataAccessSuccess",Ho.__docgenInfo={description:"",displayName:"RequestDataAccessSuccess",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessSuccess.tsx#RequestDataAccessSuccess"]={docgenInfo:Ho.__docgenInfo,name:"RequestDataAccessSuccess",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessSuccess.tsx#RequestDataAccessSuccess"})}catch{}function NR({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:o}){const{accessToken:a}=ae(),[i,s]=E.exports.useState(void 0),[l,d]=E.exports.useState(void 0),[c,f]=E.exports.useState(!1);return E.exports.useEffect(()=>{(async()=>{try{f(!0);const g=await Fa(a,e.id);s(g);const h=dy|uy;if(t!=null&&t.ownerId){const m=await fy(t.ownerId,h,a);d(m)}}catch(g){console.error("Error on get Self Sign Access Requirement: ",g)}finally{f(!1)}})()},[e,a,t]),I(z,{children:[e.isCertifiedUserRequired&&I("div",{className:"requirement-container",children:[u(Dt,{isCompleted:l==null?void 0:l.isCertified}),I("div",{children:[I("p",{className:"self-sign-access-title bold-text",children:["You must first become a",u("a",{className:"self-sign-access-certified bold-text",href:`${De.PORTAL}#!Quiz:`,children:"\xA0certified user"})]}),c&&u("span",{className:"spinner"}),u("p",{className:`self-sign-access-certified-success-text ${l!=null&&l.isCertified?"show":"hidden"}`,children:"You are a certified user"})]})]}),e.isValidatedProfileRequired&&I("div",{className:"requirement-container",children:[u(Dt,{isCompleted:l==null?void 0:l.isVerified}),I("div",{children:[I("p",{className:"self-sign-access-title bold-text",children:["You must first apply to have your",u("a",{className:"self-sign-access-validated bold-text",href:`${De.PORTAL}#!Profile:v/settings`,children:"\xA0user profile validated"})]}),c&&u("span",{className:"spinner"}),u("p",{className:`self-sign-access-verified-success-text ${l!=null&&l.isVerified?"show":"hidden"}`,children:"You have applied to have user profile valiadation successfully"})]})]}),u(_n,{user:t,wikiPage:i,accessRequirement:e,accessRequirementStatus:r,onHide:n,entityId:o})]})}try{SelfSignAccessRequirement.displayName="SelfSignAccessRequirement",SelfSignAccessRequirement.__docgenInfo={description:"",displayName:"SelfSignAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"SelfSignAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/SelfSignAccessRequirement.tsx#SelfSignAccessRequirement"]={docgenInfo:SelfSignAccessRequirement.__docgenInfo,name:"SelfSignAccessRequirement",path:"src/lib/containers/access_requirement_list/SelfSignAccessRequirement.tsx#SelfSignAccessRequirement"})}catch{}function RR({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:o}){const{accessToken:a}=ae(),[i,s]=E.exports.useState(void 0),[l,d]=E.exports.useState(!1);return E.exports.useEffect(()=>{(async()=>{d(!0);try{const f=await Fa(a,e.id);s(f)}catch(f){console.error("Error on prepare terms of use ",f)}finally{d(!1)}})()},[a,e]),I(z,{children:[l&&u("span",{className:"spinner"}),u(_n,{user:t,wikiPage:i,accessRequirement:e,accessRequirementStatus:r,onHide:n,entityId:o})]})}try{TermsOfUseAccessRequirement.displayName="TermsOfUseAccessRequirement",TermsOfUseAccessRequirement.__docgenInfo={description:"",displayName:"TermsOfUseAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"TermsOfUseAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/TermsOfUseAccessRequirement.tsx#TermsOfUseAccessRequirement"]={docgenInfo:TermsOfUseAccessRequirement.__docgenInfo,name:"TermsOfUseAccessRequirement",path:"src/lib/containers/access_requirement_list/TermsOfUseAccessRequirement.tsx#TermsOfUseAccessRequirement"})}catch{}var Le=(e=>(e.SelfSignAccessRequirement="org.sagebionetworks.repo.model.SelfSignAccessRequirement",e.TermsOfUseAccessRequirement="org.sagebionetworks.repo.model.TermsOfUseAccessRequirement",e.ManagedACTAccessRequirement="org.sagebionetworks.repo.model.ManagedACTAccessRequirement",e.ACTAccessRequirement="org.sagebionetworks.repo.model.ACTAccessRequirement",e))(Le||{});const zo=e=>e.filter(AR).length>0,AR=e=>{switch(e.concreteType){case"org.sagebionetworks.repo.model.ACTAccessRequirement":case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":return!1;default:return!0}},xf=async(e,t)=>{const n=t.map(i=>my(e,i.id)),r=await Promise.all(n),o=t.map(i=>({accessRequirement:i,accessRequirementStatus:r.find(s=>Number(s.accessRequirementId)===i.id)}));return ib(o,i=>-1*Number(i.accessRequirementStatus.isApproved))};function Uo({entityId:e,onHide:t,accessRequirementFromProps:n,renderAsModal:r,numberOfFilesAffected:o}){var k;const{accessToken:a}=ae(),[i,s]=E.exports.useState(void 0),[l,d]=E.exports.useState(),[c,f]=E.exports.useState(),[p,g]=E.exports.useState(""),[h,m]=E.exports.useState(),v={ids:[e],type:"ENTITY_HEADER"},_=TR(a)||!i,b=tp(v),{data:y}=py();E.exports.useEffect(()=>{let q=!1;return(async()=>{try{if(!_)return;if(n){const V=await xf(a,n);q||s(V)}else{const V=await Kf(a,e),O=await xf(a,V);q||s(O)}}catch(V){console.error("Error on get access requirements: ",V)}})(),()=>{q=!0}},[a,e,n,_]);const w=Boolean(a),C=(q,M)=>{switch(q.concreteType){case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":return u(NR,{accessRequirement:q,accessRequirementStatus:M,user:y,onHide:t,entityId:e});case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":return u(RR,{accessRequirement:q,accessRequirementStatus:M,user:y,onHide:t,entityId:e});case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":return u(IR,{accessRequirement:q,accessRequirementStatus:M,user:y,onHide:t,entityId:e,requestDataStepCallback:x});case"org.sagebionetworks.repo.model.ACTAccessRequirement":return u(OR,{accessRequirement:q,accessRequirementStatus:M,user:y,onHide:t,entityId:e});default:return}},x=q=>{const{managedACTAccessRequirement:M,step:V,researchProjectId:O,formSubmitRequestObject:A}=q;M&&f(M),O&&g(O),A&&m(A),d(V)},T=I(z,{children:[u(ie.Header,{closeButton:!0,children:u(ie.Title,{className:"AccessRequirementList__title",children:"Data Access Request"})}),u(ie.Body,{children:I("div",{children:[u("h4",{className:"AccessRequirementList__instruction AccessRequirementList__access",children:"Access For:"}),u("span",{className:"AccessRequirementList__file-icon-container",children:u(fe,{options:{icon:"file",size:"30px"}})}),"\xA0",o&&I("span",{children:[o," File(s)"]}),!o&&u("a",{className:"AccessRequirementList__register-text-link",href:`${De.PORTAL}#!Synapse:${e}`,children:(k=b[0])==null?void 0:k.name}),u("h4",{className:"AccessRequirementList__instruction",style:{marginTop:"3rem"},children:"What do I need to do?"}),I("div",{className:"requirement-container",children:[u(Dt,{isCompleted:w}),I("div",{children:[!w&&I(z,{children:[I("p",{className:"AccessRequirementList__signin",children:[u("a",{className:`${gl} SRC-boldText `,children:"Sign in\xA0"}),"with a Sage Platform (Synapse) user account."]}),I("p",{children:["If you do not have a Sage Account, you can",u("a",{className:"register-text-link bold-text",href:`${De.PORTAL}#!RegisterAccount:0`,children:"\xA0Register for free."})]})]}),w&&I("p",{children:["You have signed in with the Sage Platform (Synapse) user account ",I("b",{children:[y==null?void 0:y.userName,"@synapse.org"]})]})]})]}),i==null?void 0:i.map(({accessRequirement:q,accessRequirementStatus:M})=>u(ge.Fragment,{children:C(q,M)},q.id))]})})]});let N=T;if(r){switch(l){case 1:N=u(Fo,{managedACTAccessRequirement:c,requestDataStepCallback:x,onHide:()=>t==null?void 0:t()});break;case 2:N=u($o,{user:y,researchProjectId:p,managedACTAccessRequirement:c,entityId:e,requestDataStepCallback:x,onHide:()=>t==null?void 0:t()});break;case 3:N=u(Vo,{formSubmitRequestObject:h,onHide:()=>t==null?void 0:t()});break;case 4:N=I(z,{children:[u(ie.Header,{closeButton:!1,children:u(ie.Title,{className:"AccessRequirementList__title",children:"Please Log In"})}),u(ie.Body,{className:"AccessRequirementList login-modal ",children:u(hy,{sessionCallback:()=>{window.location.reload()}})})]});break;case 5:N=u(Ho,{onHide:()=>t==null?void 0:t()});break;default:N=T}return u(ie,{className:l?"bootstrap-4-backport AccessRequirementList modal-auto-height":"bootstrap-4-backport AccessRequirementList",onHide:()=>t==null?void 0:t(),show:!0,animation:!1,centered:!0,scrollable:!0,size:"lg",children:N})}return u("div",{className:"AccessRequirementList",children:N})}try{Uo.displayName="AccessRequirementList",Uo.__docgenInfo={description:"",displayName:"AccessRequirementList",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirementFromProps:{defaultValue:null,description:"",name:"accessRequirementFromProps",required:!1,type:{name:"AccessRequirement[]"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},renderAsModal:{defaultValue:null,description:"",name:"renderAsModal",required:!1,type:{name:"boolean"}},numberOfFilesAffected:{defaultValue:null,description:"",name:"numberOfFilesAffected",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AccessRequirementList.tsx#AccessRequirementList"]={docgenInfo:Uo.__docgenInfo,name:"AccessRequirementList",path:"src/lib/containers/access_requirement_list/AccessRequirementList.tsx#AccessRequirementList"})}catch{}try{zo.displayName="checkHasUnsportedRequirement",zo.__docgenInfo={description:"",displayName:"checkHasUnsportedRequirement",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AccessRequirementList.tsx#checkHasUnsportedRequirement"]={docgenInfo:zo.__docgenInfo,name:"checkHasUnsportedRequirement",path:"src/lib/containers/access_requirement_list/AccessRequirementList.tsx#checkHasUnsportedRequirement"})}catch{}const kR={AccessBlockedToAnonymous:{icon:"accessClosed",color:e=>e.colors.warning,tooltipText:"You must sign in to access this file."},AccessBlockedByRestriction:{icon:"accessClosed",color:e=>e.colors.warning,tooltipText:"You must request access to this restricted file."},AccessBlockedByACL:{icon:"accessClosed",color:e=>e.colors.warning,tooltipText:"You do not have download access for this item."},Accessible:{icon:"accessOpen",color:e=>e.colors.success,tooltipText:""},NoFileHandle:{icon:"accessOpen",color:e=>e.colors.success,tooltipText:""}};function Tf(e){const{downloadType:t}=e;if(t){const n=kR[t];return u(gy.Consumer,{children:r=>u(fe,{options:{icon:n.icon,color:n.color(r),label:n.tooltipText}})})}return u(z,{})}function Yo(e,t){const[n,r]=ge.useState(),{accessToken:o}=ae(),a=parseInt(t!=null?t:""),{data:i,error:s}=Tp(e,Number.isNaN(a)?void 0:a,{includeEntity:!0,includePermissions:!0}),l=ge.useMemo(()=>({restrictableObjectType:Ua.ENTITY,objectId:e}),[e]),{data:d}=Ep(l),c=i==null?void 0:i.entity,f=i==null?void 0:i.permissions;return ge.useEffect(()=>{d&&d.hasUnmetAccessRequirement?r("AccessBlockedByRestriction"):c&&(f==null?void 0:f.canDownload)?Cl(c)&&c.dataFileHandleId?r("Accessible"):r("NoFileHandle"):f&&!f.canDownload&&r(o?"AccessBlockedByACL":"AccessBlockedToAnonymous")},[o,c,s,f,d]),n}function jo(e){const[t,n]=ge.useState(!1),[r,o]=ge.useState([]),{entityId:a,entityVersionNumber:i}=e,s=Yo(a,i),{accessToken:l}=ae(),d=ge.useMemo(()=>({restrictableObjectType:Ua.ENTITY,objectId:a}),[a]),{data:c}=Ep(d),f=()=>{Kf(l,a).then(h=>{zo(h)?window.open(`${Dy(Py.PORTAL_ENDPOINT)}#!AccessRequirements:ID=${a}&TYPE=ENTITY`,"_blank"):(o(h),n(!0))})},p=E.exports.useMemo(()=>{if(!c)return u(z,{});const h=c==null?void 0:c.hasUnmetAccessRequirement,m=c==null?void 0:c.restrictionLevel;let v="";if(h)v="Request Access";else{if(xp.OPEN===m)return u(z,{});v="View Terms"}return I(z,{children:[u("a",{style:{fontSize:"14px",cursor:"pointer",marginLeft:"5px",verticalAlign:"middle"},className:e.className,onClick:f,children:v}),t&&u(Uo,{entityId:a,accessRequirementFromProps:r,renderAsModal:!0,onHide:()=>{n(!1)}})]})},[a,c,r,t]);return s===void 0?u(z,{}):I("span",{style:{whiteSpace:"nowrap"},children:[s==="AccessBlockedToAnonymous"?u("button",{type:"button",className:gl,onClick:h=>{if(h.isTrusted){const m=new MouseEvent("click",{bubbles:!0});h.currentTarget.dispatchEvent(m)}},children:u(Tf,{downloadType:s})}):u(Tf,{downloadType:s}),p]})}try{Yo.displayName="useGetFileHandleDownloadType",Yo.__docgenInfo={description:`Determines whether an Entity is accessible for download, or if it is blocked by the ACL or unmet Access Requirements.

To make download available, and determine if the file is downloadable via the web, see {@link DirectDownload.tsx }`,displayName:"useGetFileHandleDownloadType",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HasAccessV2.tsx#useGetFileHandleDownloadType"]={docgenInfo:Yo.__docgenInfo,name:"useGetFileHandleDownloadType",path:"src/lib/containers/HasAccessV2.tsx#useGetFileHandleDownloadType"})}catch{}try{jo.displayName="HasAccessV2",jo.__docgenInfo={description:`HasAccess shows if the user has access to the file or not.

The component's behavior changes whether it's passed in a FileHandle or not.
If passed a file handle then it will give more detailed information about the download.`,displayName:"HasAccessV2",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HasAccessV2.tsx#HasAccessV2"]={docgenInfo:jo.__docgenInfo,name:"HasAccessV2",path:"src/lib/containers/HasAccessV2.tsx#HasAccessV2"})}catch{}const Wo=e=>{const{accessToken:t}=ae(),{entityIdList:n}=e,[r,o]=E.exports.useState([u(z,{})]),{ref:a,inView:i}=qn();let s=!0;E.exports.useEffect(()=>(i&&l(),()=>{s=!1}),[n,i]);const l=()=>{!n.length||yy(n,t).then(d=>{if(s){const c=d.results.map(f=>u("p",{children:u(zs,{entity:f,displayTextField:"name"})},f.id));o(c)}}).catch(d=>{console.log("EntityIdList: Error getting entity headers",d)})};return u("span",{ref:a,children:r})};try{Wo.displayName="EntityIdList",Wo.__docgenInfo={description:"",displayName:"EntityIdList",props:{entityIdList:{defaultValue:null,description:"",name:"entityIdList",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/EntityIdList.tsx#EntityIdList"]={docgenInfo:Wo.__docgenInfo,name:"EntityIdList",path:"src/lib/containers/EntityIdList.tsx#EntityIdList"})}catch{}const Go=e=>{const{accessToken:t}=ae(),{evaluationId:n}=e,[r,o]=E.exports.useState(),{ref:a,inView:i}=qn();let s=!0;E.exports.useEffect(()=>(s&&i&&l(),()=>{s=!1}),[n,i]);const l=()=>{!n||vy(n,t).then(d=>{o(d.name)}).catch(d=>{console.log("EvaluationIdListRenderer: Error getting evaluation queue names",d)})};return u("span",{ref:a,children:r})};try{Go.displayName="EvaluationIdRenderer",Go.__docgenInfo={description:"",displayName:"EvaluationIdRenderer",props:{evaluationId:{defaultValue:null,description:"",name:"evaluationId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/EvaluationIdRenderer.tsx#EvaluationIdRenderer"]={docgenInfo:Go.__docgenInfo,name:"EvaluationIdRenderer",path:"src/lib/containers/EvaluationIdRenderer.tsx#EvaluationIdRenderer"})}catch{}const Ko=e=>{const{accessToken:t}=ae(),{userIds:n}=e,[r,o]=E.exports.useState(),{ref:a,inView:i}=qn();let s=!0;E.exports.useEffect(()=>(s&&i&&l(),()=>{s=!1}),[n,i]);const l=()=>{!n.length||by(n,t).then(d=>{const c=d.list.map(f=>u(Rl,{userProfile:f,className:"SRC-marginFifteen"},f.ownerId));o(c)}).catch(d=>{console.log("UserIdList: Error getting user profiles",d)})};return u("span",{ref:a,children:r})};try{Ko.displayName="UserIdList",Ko.__docgenInfo={description:"",displayName:"UserIdList",props:{userIds:{defaultValue:null,description:"",name:"userIds",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/UserIdList.tsx#UserIdList"]={docgenInfo:Ko.__docgenInfo,name:"UserIdList",path:"src/lib/containers/UserIdList.tsx#UserIdList"})}catch{}const Qo=({columnType:e,columnValue:t,isBold:n,mapEntityIdToHeader:r,mapUserIdToHeader:o,columnLinkConfig:a,columnName:i,selectColumns:s,columnModels:l,rowData:d,rowId:c,rowVersionNumber:f})=>{const{entity:p}=_t();if(!t)return I("p",{className:"SRC-center-text SRC-inactive",children:[" ",fb]});if(a)return u(lr,{value:t,columnName:i,selectColumns:s,columnModels:l,isHeader:!1,labelLink:a,rowData:d,rowId:c});if(p&&(pn(p)||Tn(p)||rp(p))&&(i==="id"||i==="name")&&c&&f){const g=`syn${c.toString()}`;if(Object.prototype.hasOwnProperty.call(r,g))return u("p",{children:u(zs,{entity:r[g],versionNumber:f,className:`${n}`,showIcon:!1,displayTextField:i})})}switch(e){case re.ENTITYID:if(Object.prototype.hasOwnProperty.call(r,t))return u("p",{children:u(zs,{entity:r[t],className:`${n}`,displayTextField:"name"})});break;case re.DATE_LIST:{const g=JSON.parse(t);return I("p",{children:[g.map((h,m)=>I("span",{className:n,children:[new Date(h).toLocaleString(),m!==g.length-1?", ":""]},m))," "]})}case re.BOOLEAN_LIST:{const g=JSON.parse(t);return u("p",{children:g.map((h,m)=>I("span",{className:n,children:[h?"true":"false",m!==g.length-1?", ":""]},m))})}case re.FILEHANDLEID:return u(z,{children:p&&u(ar,{associatedObjectId:p.id,associatedObjectType:Ne.TableEntity,fileHandleId:t,displayFileName:!0})});case re.ENTITYID_LIST:{const g=JSON.parse(t);return u(Wo,{entityIdList:g})}case re.USERID_LIST:{const g=JSON.parse(t);return u(Ko,{userIds:g})}case re.STRING_LIST:case re.INTEGER_LIST:{const g=JSON.parse(t);return u("p",{children:g.map((h,m)=>I("span",{className:n,children:[h,m!==g.length-1?", ":""]},h))})}case re.EVALUATIONID:return u(Go,{evaluationId:t});case re.DATE:return u("p",{className:n,children:new Date(Number(t)).toLocaleString()});case re.USERID:if(Object.prototype.hasOwnProperty.call(o,t)){const{ownerId:g,userName:h}=o[t];if(o[t].isIndividual===!1){const m=h===_c?"public":"people";return h===_c?I("span",{children:[u(fe,{options:{icon:m}})," All registered Synapse users"]}):I("a",{target:"_blank",rel:"noopener noreferrer",href:`${De.PORTAL}#!Team:${g}`,children:[u(fe,{options:{icon:m}})," ",h]})}else return u(Xt,{userProfile:o[t],preSignedURL:o[t].clientPreSignedURL,size:"SMALL USER CARD"})}break;case re.LINK:return u("a",{target:"_blank",rel:"noopener noreferrer",href:t,children:t});case re.STRING:case re.DOUBLE:case re.INTEGER:case re.BOOLEAN:case re.LARGETEXT:return u("p",{className:n,children:t});default:return console.warn(`ColumnType ${e} has unspecified handler. Rendering the column value.`),u("p",{className:n,children:t})}return u("p",{className:n,children:t})};try{Qo.displayName="SynapseTableCell",Qo.__docgenInfo={description:"",displayName:"SynapseTableCell",props:{columnType:{defaultValue:null,description:"",name:"columnType",required:!0,type:{name:"enum",value:[{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'}]}},columnValue:{defaultValue:null,description:"",name:"columnValue",required:!0,type:{name:"string"}},isBold:{defaultValue:null,description:"",name:"isBold",required:!0,type:{name:"string"}},columnLinkConfig:{defaultValue:null,description:"",name:"columnLinkConfig",required:!1,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink"}},mapEntityIdToHeader:{defaultValue:null,description:"",name:"mapEntityIdToHeader",required:!0,type:{name:"Record<string, EntityHeader>"}},mapUserIdToHeader:{defaultValue:null,description:"",name:"mapUserIdToHeader",required:!0,type:{name:"Partial<UserGroupHeader & UserProfile>"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}},rowVersionNumber:{defaultValue:null,description:"",name:"rowVersionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_table_functions/SynapseTableCell.tsx#SynapseTableCell"]={docgenInfo:Qo.__docgenInfo,name:"SynapseTableCell",path:"src/lib/containers/synapse_table_functions/SynapseTableCell.tsx#SynapseTableCell"})}catch{}function Km(){return I("div",{className:"text-center",children:[Cb,u("h4",{children:"No Matching Results"}),u("p",{children:"Try checking the spelling or removing filters."})]})}const Qm=window.SQLParser.lexer,Of=(e,...t)=>{var r;const n=[];return(r=e==null?void 0:e.selectColumns)==null||r.forEach((o,a)=>{t.includes(o.columnType)&&n.push(a)}),n},If=(e,t,n)=>{var o;const r=new Set;return(o=e.queryResult)==null||o.queryResults.rows.forEach(a=>{a.values.forEach((i,s)=>{n.includes(s)&&!Object.prototype.hasOwnProperty.call(t,i)&&i&&r.add(i)})}),r};function LR(e){const t=[];if(Iy(e)){const n=Qm.tokenize(e),r=n.findIndex(i=>i[0]==="SELECT"),o=n.findIndex(i=>i[0]==="FROM");let a=0;for(let i=r+1;i<o-r-1;i+=1){const s=n[i];s[0]==="FUNCTION"&&s[1].toLowerCase()==="count"?t.push(a):s[0]==="SEPARATOR"&&(a+=1)}}return t}function qR(e,t,n){let r=Qm.tokenize(t);const o=r.findIndex(f=>f[0]==="SELECT"),a=r.findIndex(f=>f[0]==="FROM"),i=[];let s=0,l=!1;for(let f=o+1;f<a-o-1;f+=1){const p=r[f];p[0]==="FUNCTION"||p[1].toLocaleLowerCase()==="concat"?l=!0:p[0]==="LITERAL"&&!l?i.push({index:s,name:p[1]}):p[0]==="SEPARATOR"&&(s+=1,l=!1)}if(r=r.slice(0,r.findIndex(f=>f[0]==="GROUP")),r.splice(o+1,a-o-1,["STAR","*","1"]),n===void 0)return{synId:"",newSql:""};r.findIndex(f=>f[0]==="WHERE")===-1?r.push(["WHERE","WHERE","1"]):r.push(["CONDITIONAL","AND","1"]),i.forEach((f,p)=>{const g=e.values[f.index];g?r.push(["LITERAL",f.name,"1"],["OPERATOR","=","1"],["STRING",g,"1"],["CONDITIONAL","AND","1"]):r.push(["LITERAL",f.name,"1"],["OPERATOR","IS","1"],["BOOLEAN","null","1"],["CONDITIONAL","AND","1"])}),r.pop();const c=r[r.findIndex(f=>f[0]==="FROM")+1][1];return r.push(["EOF","","1"]),{synId:c,newSql:Ny(r)}}const DR=()=>{const{data:e,goToPage:t,pageSize:n,setPageSize:r,currentPage:o}=jy(),a=e==null?void 0:e.queryCount,i=(l,d)=>{t(d)},s=l=>{const d=l.target.value;r(d)};return o==1&&a&&a<10?u(z,{}):I("div",{children:[u(uw,{page:o,count:Math.ceil(a/n),color:"secondary",onChange:i,style:{display:"inline-block",float:"left"}}),u(St,{variant:"body1",style:{display:"inline-block"},children:`${a==null?void 0:a.toLocaleString()} total rows /`}),I("select",{name:"page size",onChange:s,style:{padding:"4px",marginLeft:"4px"},value:n,children:[u("option",{value:10,children:"10 per page"}),u("option",{value:25,children:"25 per page"}),u("option",{value:100,children:"100 per page"}),u("option",{value:500,children:"500 per page"})]})]})};function Xm(){return I(z,{children:[u("p",{className:"SRC-no-results-title",children:"There is currently no content here."}),u("p",{className:"SRC-no-results-description",children:"Information is always being updated, so check back later to see if content has been added."})]})}const Xo=e=>{const{onCopy:t}=e;return u(We,{title:"Copy IDs to the clipboard",enterNextDelay:Ca,placement:"right",children:u("span",{children:u("button",{"data-testid":"copySynIdsButton",onClick:t,children:u("span",{style:{height:15,marginTop:-1},children:u(fe,{options:{icon:"contentCopy"}})})})})})};try{Xo.displayName="InteractiveCopyIdsIcon",Xo.__docgenInfo={description:"",displayName:"InteractiveCopyIdsIcon",props:{onCopy:{defaultValue:null,description:"",name:"onCopy",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/InteractiveCopyIdsIcon.tsx#InteractiveCopyIdsIcon"]={docgenInfo:Xo.__docgenInfo,name:"InteractiveCopyIdsIcon",path:"src/lib/containers/InteractiveCopyIdsIcon.tsx#InteractiveCopyIdsIcon"})}catch{}const PR=()=>{const e=ae(),t=_t(),[n,r]=E.exports.useState(!1),[o,a]=E.exports.useState(),[i,s]=E.exports.useState();E.exports.useEffect(()=>(i||s(new AbortController),()=>{i&&i.abort()}),[i]);const l=()=>{r(!0);const{getLastQueryRequest:d}=t,c=d(),{sql:f}=c.query,{entityId:p,versionNumber:g}=Ry(f),h=g?`.${g}`:"";c.partMask=Cr,c.query={sql:`select id from ${p}${h}`},Yf(c,e.accessToken,i==null?void 0:i.signal).then(m=>{a(m)}).catch(m=>{console.error(m),Zt("Unable to query for all Synapse IDs to copy","danger")}).finally(()=>{r(!1)})};return E.exports.useEffect(()=>{if(o){const{rows:d}=o.queryResult.queryResults,c=d.map(f=>`${f.values[0]}`).join(`
`);navigator.clipboard.writeText(c).then(()=>{Zt("Successfully copied to clipboard"),a(void 0)})}},[o]),n?u(Ha,{size:25}):u(Xo,{onCopy:()=>{l()}})};var Gt=[],MR=function(){return Gt.some(function(e){return e.activeTargets.length>0})},VR=function(){return Gt.some(function(e){return e.skippedTargets.length>0})},Nf="ResizeObserver loop completed with undelivered notifications.",BR=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:Nf}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=Nf),window.dispatchEvent(e)},Sr;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Sr||(Sr={}));var Kt=function(e){return Object.freeze(e)},FR=function(){function e(t,n){this.inlineSize=t,this.blockSize=n,Kt(this)}return e}(),Zm=function(){function e(t,n,r,o){return this.x=t,this.y=n,this.width=r,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Kt(this)}return e.prototype.toJSON=function(){var t=this,n=t.x,r=t.y,o=t.top,a=t.right,i=t.bottom,s=t.left,l=t.width,d=t.height;return{x:n,y:r,top:o,right:a,bottom:i,left:s,width:l,height:d}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),ac=function(e){return e instanceof SVGElement&&"getBBox"in e},Jm=function(e){if(ac(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var o=e,a=o.offsetWidth,i=o.offsetHeight;return!(a||i||e.getClientRects().length)},Rf=function(e){var t,n;if(e instanceof Element)return!0;var r=(n=(t=e)===null||t===void 0?void 0:t.ownerDocument)===null||n===void 0?void 0:n.defaultView;return!!(r&&e instanceof r.Element)},$R=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},ir=typeof window<"u"?window:{},Qr=new WeakMap,Af=/auto|scroll/,HR=/^tb|vertical/,zR=/msie|trident/i.test(ir.navigator&&ir.navigator.userAgent),rt=function(e){return parseFloat(e||"0")},En=function(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=!1),new FR((n?t:e)||0,(n?e:t)||0)},kf=Kt({devicePixelContentBoxSize:En(),borderBoxSize:En(),contentBoxSize:En(),contentRect:new Zm(0,0,0,0)}),eg=function(e,t){if(t===void 0&&(t=!1),Qr.has(e)&&!t)return Qr.get(e);if(Jm(e))return Qr.set(e,kf),kf;var n=getComputedStyle(e),r=ac(e)&&e.ownerSVGElement&&e.getBBox(),o=!zR&&n.boxSizing==="border-box",a=HR.test(n.writingMode||""),i=!r&&Af.test(n.overflowY||""),s=!r&&Af.test(n.overflowX||""),l=r?0:rt(n.paddingTop),d=r?0:rt(n.paddingRight),c=r?0:rt(n.paddingBottom),f=r?0:rt(n.paddingLeft),p=r?0:rt(n.borderTopWidth),g=r?0:rt(n.borderRightWidth),h=r?0:rt(n.borderBottomWidth),m=r?0:rt(n.borderLeftWidth),v=f+d,S=l+c,_=m+g,b=p+h,y=s?e.offsetHeight-b-e.clientHeight:0,w=i?e.offsetWidth-_-e.clientWidth:0,C=o?v+_:0,x=o?S+b:0,T=r?r.width:rt(n.width)-C-w,N=r?r.height:rt(n.height)-x-y,k=T+v+w+_,q=N+S+y+b,M=Kt({devicePixelContentBoxSize:En(Math.round(T*devicePixelRatio),Math.round(N*devicePixelRatio),a),borderBoxSize:En(k,q,a),contentBoxSize:En(T,N,a),contentRect:new Zm(f,l,T,N)});return Qr.set(e,M),M},tg=function(e,t,n){var r=eg(e,n),o=r.borderBoxSize,a=r.contentBoxSize,i=r.devicePixelContentBoxSize;switch(t){case Sr.DEVICE_PIXEL_CONTENT_BOX:return i;case Sr.BORDER_BOX:return o;default:return a}},UR=function(){function e(t){var n=eg(t);this.target=t,this.contentRect=n.contentRect,this.borderBoxSize=Kt([n.borderBoxSize]),this.contentBoxSize=Kt([n.contentBoxSize]),this.devicePixelContentBoxSize=Kt([n.devicePixelContentBoxSize])}return e}(),ng=function(e){if(Jm(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},YR=function(){var e=1/0,t=[];Gt.forEach(function(i){if(i.activeTargets.length!==0){var s=[];i.activeTargets.forEach(function(d){var c=new UR(d.target),f=ng(d.target);s.push(c),d.lastReportedSize=tg(d.target,d.observedBox),f<e&&(e=f)}),t.push(function(){i.callback.call(i.observer,s,i.observer)}),i.activeTargets.splice(0,i.activeTargets.length)}});for(var n=0,r=t;n<r.length;n++){var o=r[n];o()}return e},Lf=function(e){Gt.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(o){o.isActive()&&(ng(o.target)>e?n.activeTargets.push(o):n.skippedTargets.push(o))})})},jR=function(){var e=0;for(Lf(e);MR();)e=YR(),Lf(e);return VR()&&BR(),e>0},Ms,rg=[],WR=function(){return rg.splice(0).forEach(function(e){return e()})},GR=function(e){if(!Ms){var t=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return WR()}).observe(n,r),Ms=function(){n.textContent=""+(t?t--:t++)}}rg.push(e),Ms()},KR=function(e){GR(function(){requestAnimationFrame(e)})},Zo=0,QR=function(){return!!Zo},XR=250,ZR={attributes:!0,characterData:!0,childList:!0,subtree:!0},qf=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Df=function(e){return e===void 0&&(e=0),Date.now()+e},Vs=!1,JR=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var n=this;if(t===void 0&&(t=XR),!Vs){Vs=!0;var r=Df(t);KR(function(){var o=!1;try{o=jR()}finally{if(Vs=!1,t=r-Df(),!QR())return;o?n.run(1e3):t>0?n.run(t):n.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,n=function(){return t.observer&&t.observer.observe(document.body,ZR)};document.body?n():ir.addEventListener("DOMContentLoaded",n)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),qf.forEach(function(n){return ir.addEventListener(n,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),qf.forEach(function(n){return ir.removeEventListener(n,t.listener,!0)}),this.stopped=!0)},e}(),pl=new JR,Pf=function(e){!Zo&&e>0&&pl.start(),Zo+=e,!Zo&&pl.stop()},eA=function(e){return!ac(e)&&!$R(e)&&getComputedStyle(e).display==="inline"},tA=function(){function e(t,n){this.target=t,this.observedBox=n||Sr.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=tg(this.target,this.observedBox,!0);return eA(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),nA=function(){function e(t,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=n}return e}(),Xr=new WeakMap,Mf=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},Zr=function(){function e(){}return e.connect=function(t,n){var r=new nA(t,n);Xr.set(t,r)},e.observe=function(t,n,r){var o=Xr.get(t),a=o.observationTargets.length===0;Mf(o.observationTargets,n)<0&&(a&&Gt.push(o),o.observationTargets.push(new tA(n,r&&r.box)),Pf(1),pl.schedule())},e.unobserve=function(t,n){var r=Xr.get(t),o=Mf(r.observationTargets,n),a=r.observationTargets.length===1;o>=0&&(a&&Gt.splice(Gt.indexOf(r),1),r.observationTargets.splice(o,1),Pf(-1))},e.disconnect=function(t){var n=this,r=Xr.get(t);r.observationTargets.slice().forEach(function(o){return n.unobserve(t,o.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}(),rA=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Zr.connect(this,t)}return e.prototype.observe=function(t,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Rf(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Zr.observe(this,t,n)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Rf(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Zr.unobserve(this,t)},e.prototype.disconnect=function(){Zr.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();const oA=ge[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],aA=oA,iA=e=>{const t=E.exports.useRef(e);return E.exports.useEffect(()=>{t.current=e}),t},sA=iA,lA=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:rA;function cA(){}function dA(e,t){const n=fA(),r=sA(t);return aA(()=>{let o=!1;const a=e&&"current"in e?e.current:e;if(!a)return cA;function i(s,l){o||r.current(s,l)}return n.subscribe(a,i),()=>{o=!0,n.unsubscribe(a,i)}},[e,n,r]),n.observer}function uA(){let e=!1,t=[];const n=new Map,r=new lA((o,a)=>{t=t.concat(o);function i(){const s=new Set;for(let l=0;l<t.length;l++){if(s.has(t[l].target))continue;s.add(t[l].target);const d=n.get(t[l].target);d==null||d.forEach(c=>c(t[l],a))}t=[],e=!1}e||window.requestAnimationFrame(i),e=!0});return{observer:r,subscribe(o,a){var i;r.observe(o);const s=(i=n.get(o))!==null&&i!==void 0?i:[];s.push(a),n.set(o,s)},unsubscribe(o,a){var i;const s=(i=n.get(o))!==null&&i!==void 0?i:[];if(s.length===1){r.unobserve(o),n.delete(o);return}const l=s.indexOf(a);l!==-1&&s.splice(l,1),n.set(o,s)}}}let Bs;const fA=()=>Bs||(Bs=uA());function Jo(e){const[t,n]=E.exports.useState(!1),[r,o]=E.exports.useState(!1),a=E.exports.useRef(null);return dA(a,({target:i})=>{if(!t&&i){const s=i.getElementsByTagName("p")[0];s&&o(s.scrollHeight>s.clientHeight||s.scrollWidth>s.clientWidth)}}),I("td",{...e,className:`ExpandableTableData ${e.className?e.className:""}`,"aria-expanded":t,ref:a,children:[r&&u("button",{className:"ExpandableTableData__expandButton",onClick:()=>n(!t),children:u(fe,{options:{color:"#aeb5bc",icon:t?"minusBoxOutline":"addBoxOutline"}})}),e.children]})}try{Jo.displayName="ExpandableTableDataCell",Jo.__docgenInfo={description:"",displayName:"ExpandableTableDataCell",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/ExpandableTableDataCell.tsx#ExpandableTableDataCell"]={docgenInfo:Jo.__docgenInfo,name:"ExpandableTableDataCell",path:"src/lib/containers/table/ExpandableTableDataCell.tsx#ExpandableTableDataCell"})}catch{}const pA={id:"",name:"",type:"org.sagebionetworks.repo.model.FileEntity",versionNumber:-1,versionLabel:"",benefactorId:-1,createdBy:"",createdOn:"",modifiedBy:"",modifiedOn:"",isLatestVersion:!0},hA=["","DESC","ASC"],Vf={resizeMode:"overflow",partialRefresh:"true",liveDrag:!0,headerOnly:"true"};class sr extends E.exports.Component{constructor(t){super(t),this.tableElement=void 0,this.showGroupRowData=n=>{const r=this.props.queryContext.getLastQueryRequest().query,o=qR(n,r.sql,this.props.queryContext.data);r.sql=o.newSql;const a=JSON.stringify(r),i=btoa(a);return`${De.PORTAL}#!Synapse:${o.synId}/tables/query/${i}`},this.renderTable=(n,r,o,a)=>{var S,_;const i=(_=(S=this.props.queryContext).getLastQueryRequest)==null?void 0:_.call(S),{queryContext:{entity:s},showAccessColumn:l,showDownloadColumn:d,isRowSelectionVisible:c}=this.props,f=s&&(pn(s)&&qy(s)||Tn(s)),p=l&&s&&this.isEntityViewOrDataset()&&this.allRowsHaveId(),g=!!this.props.synapseContext.accessToken,h=s&&f&&g&&this.allRowsHaveId(),m=!!(h&&!this.props.hideDownload),v=h&&d;return I("div",{className:"SynapseTable SRC-overflowAuto","data-testid":"SynapseTable",children:[I("table",{ref:b=>this.tableElement=b,className:"table table-striped table-condensed",children:[u("thead",{className:"SRC_bordered",children:u("tr",{children:this.createTableHeader(n,r,o,p,v,m,c,i)})}),u("tbody",{children:this.createTableRows(a,n,p,v,m,c)})]}),u("div",{className:"bootstrap-4-backport",style:{textAlign:"right"},children:u(DR,{})})]})},this.handleColumnSortPress=n=>r=>{let o=hn(this.state.columnIconSortState);o.length===0&&(o=Array(this.getLengthOfPropsData()).fill(0));const a=hn(this.state.sortedColumnSelection),i=this.findSelectionIndex(a,n.name);i!==-1&&a.splice(i,1),o[n.index]=(o[n.index]+1)%Tc.length,o[n.index]>0&&a.unshift({column:n.name,direction:hA[o[n.index]]});const s=this.props.queryContext.getLastQueryRequest();s.query.sort=a,s.query.offset=0,this.props.queryContext.executeQueryRequest(s),this.setState({columnIconSortState:o,sortedColumnSelection:a})},this.applyChangesFromQueryFilter=n=>{const r=this.props.queryContext.getLastQueryRequest();r.query.selectedFacets=n,r.query.offset=0,this.props.queryContext.executeQueryRequest(r)},this.componentDidMount=this.componentDidMount.bind(this),this.componentWillUnmount=this.componentWillUnmount.bind(this),this.componentDidUpdate=this.componentDidUpdate.bind(this),this.shouldComponentUpdate=this.shouldComponentUpdate.bind(this),this.handleColumnSortPress=this.handleColumnSortPress.bind(this),this.findSelectionIndex=this.findSelectionIndex.bind(this),this.advancedSearch=this.advancedSearch.bind(this),this.getLengthOfPropsData=this.getLengthOfPropsData.bind(this),this.configureFacetDropdown=this.configureFacetDropdown.bind(this),this.enableResize=this.enableResize.bind(this),this.disableResize=this.disableResize.bind(this),this.isEntityViewOrDataset=this.isEntityViewOrDataset.bind(this),this.allRowsHaveId=this.allRowsHaveId.bind(this),this.state={columnIconSortState:[],isExportTableDownloadOpen:!1,isExpanded:!1,isColumnSelectionOpen:!1,sortedColumnSelection:[],mapEntityIdToHeader:{},mapUserIdToHeader:{},isFetchingEntityHeaders:!1},this.getEntityHeadersInData=this.getEntityHeadersInData.bind(this)}componentWillUnmount(){this.disableResize()}componentDidMount(){this.getEntityHeadersInData(!0),this.enableResize()}shouldComponentUpdate(t,n){const{isFetchingEntityHeaders:r,...o}=this.state,{isFetchingEntityHeaders:a,...i}=n,s=!qr(this.props,t),l=!qr(o,i),d=s||l;return d&&this.disableResize(),d}componentDidUpdate(t,n){qr(t.queryContext.data,this.props.queryContext.data)?t.queryContext.entity&&this.props.queryContext.entity&&!qr(pn(t.queryContext.entity),pn(this.props.queryContext.entity))&&this.getEntityHeadersInData(!0):this.getEntityHeadersInData(!1),this.enableResize()}enableResize(){this.resizer?setTimeout(()=>{this.resizer.reset(Vf)},1e3):this.tableElement&&this.getLengthOfPropsData()>1&&(this.resizer=new ER(this.tableElement,Vf))}disableResize(){this.resizer&&this.resizer.reset({disable:!0})}async getEntityHeadersInData(t){var f,p,g;const{data:n,entity:r}=this.props.queryContext;if(!n||!r)return;if(this.state.isFetchingEntityHeaders&&!t)return;const o=hn(this.state.mapEntityIdToHeader),a=hn(this.state.mapUserIdToHeader),i=Of(n,re.ENTITYID),s=Of(n,re.USERID),l=If(n,o,i);(this.isEntityViewOrDataset()||r&&rp(r))&&this.allRowsHaveId()&&((g=(p=(f=n.queryResult)==null?void 0:f.queryResults)==null?void 0:p.rows)!=null?g:[]).forEach(m=>{const v=`syn${m.rowId}`;l.add(v)});const d=If(n,a,s);if(l.size===0&&d.size===0)return;if(this.setState({isFetchingEntityHeaders:!0}),l.size>0){const h=Array.from(l).map(m=>({targetId:m}));try{h.forEach(S=>{o[S.targetId]=pA});const m=await hl(h,this.props.synapseContext.accessToken),{results:v}=m;v.forEach(S=>{o[S.id]=S})}catch(m){console.error("Error on retrieving entity header list , ",m)}}const c=[];if(d.size>0){const h=Array.from(d);try{(await Sy(h,this.props.synapseContext.accessToken)).children.forEach(v=>{v.isIndividual?c.push(v.ownerId):a[v.ownerId]=v})}catch(m){console.error("Error on getGroupHeaders batch: ",m)}}if(c.length>0)try{(await dv(c)).list.forEach(m=>{a[m.ownerId]=m})}catch(h){console.error("Error on getUserProfile : ",h)}this.setState({mapEntityIdToHeader:o,mapUserIdToHeader:a,isFetchingEntityHeaders:!1})}render(){var m,v;if(!this.props.queryContext.data&&this.props.queryContext.isLoadingNewBundle)return dp;if(!this.props.queryContext.data)return u(z,{});const{queryContext:{data:t},showNoContentAvailableWhenEmpty:n}=this.props,{queryResult:r,columnModels:o=[]}=t,{facets:a=[]}=t,{isExpanded:i,isExportTableDownloadOpen:s}=this.state,l=this.props.queryContext.getLastQueryRequest();let d="";if(!(((v=(m=t.queryResult)==null?void 0:m.queryResults.rows.length)!=null?v:0)>0)&&l.query.offset===0)return l.query.additionalFilters?u(Km,{}):n?u(Xm,{}):I("div",{className:"text-center SRCBorderedPanel SRCBorderedPanel--padded2x",children:[yb,u("div",{style:{marginTop:"20px",fontStyle:"italic"},children:"This table is currently empty"})]});const{rows:f,headers:p}=r.queryResults,g=u("div",{children:this.renderTable(p,o,a,f)}),h=u(z,{children:I("div",{className:d,children:[s&&u(Wt,{onClose:()=>{this.setState({isExportTableDownloadOpen:!1})},queryBundleRequest:l}),u("div",{children:g})]})});return I(E.exports.Fragment,{children:[i&&I(ie,{animation:!1,show:!0,onHide:()=>this.setState({isExpanded:!1}),dialogClassName:"modal-90w",backdrop:"static",children:[u(ie.Header,{onHide:()=>this.setState({isExpanded:!1}),closeButton:!0}),u(ie.Body,{children:h})]}),!i&&h]})}allRowsHaveId(){var n,r;const{queryContext:{data:t}}=this.props;return(r=(n=t==null?void 0:t.queryResult)==null?void 0:n.queryResults.rows.every(o=>!!o.rowId))!=null?r:!1}isEntityViewOrDataset(){var n;const{queryContext:{entity:t}}=this.props;return(n=t&&(pn(t)||Tn(t)))!=null?n:!1}createTableRows(t,n,r,o,a,i){const s=[],{queryContext:{data:l},queryVisualizationContext:{columnsToShowInTable:d,selectedRowIndices:c,setSelectedRowIndices:f},columnLinks:p=[],linkCountToDisaggregatedQuery:g=!1}=this.props,{selectColumns:h=[],columnModels:m=[]}=l,{mapEntityIdToHeader:v,mapUserIdToHeader:S}=this.state,_=LR(this.props.queryContext.getLastQueryRequest().query.sql);return t.forEach((b,y)=>{var k,q,M;const w=(k=b.versionNumber)==null?void 0:k.toString(),C=`syn${b.rowId}`,x=b.values.map((V,O)=>{const A=n[O].name,R=d.includes(A),P=p.find(j=>j.matchColumnName===A),$=this.findSelectionIndex(this.state.sortedColumnSelection,A),B=_.includes(O)&&g,U=$===-1?"":"SRC-boldText";return R?u(Jo,{className:"SRC_noBorderTop",children:B?u("a",{href:this.showGroupRowData(b),target:"_blank",rel:"noopener noreferrer",children:u("p",{className:U,children:V})}):u(Qo,{columnType:n[O].columnType,columnValue:V,isBold:U,mapEntityIdToHeader:v,mapUserIdToHeader:S,columnLinkConfig:P,columnName:A,rowData:b.values,selectColumns:h,columnModels:m,rowId:b.rowId,rowVersionNumber:b.versionNumber})},`(${y}${V}${O})`):u("td",{className:"SRC-hidden"},`(${y},${O})`)});r&&x.unshift(u("td",{className:"SRC_noBorderTop",children:u(jo,{entityId:C,entityVersionNumber:w},C)},C));const T=((q=v[C])==null?void 0:q.type)=="org.sagebionetworks.repo.model.FileEntity";o&&x.unshift(u("td",{className:"SRC_noBorderTop direct-download",children:T&&u(ar,{associatedObjectId:C,entityVersionNumber:w})},`direct-download-${C}`)),a&&x.unshift(u("td",{className:"SRC_noBorderTop add-to-download-list-v2",children:T&&u(Mo,{entityId:C,entityVersionNumber:parseInt(w)})},`add-to-download-list-v2-${C}`)),i&&c&&x.unshift(u("td",{className:"SRC_noBorderTop",children:u(wb,{label:"",checked:c.includes(y),onChange:V=>{const O=[...c];if(V)O.push(y);else{const A=O.indexOf(y);A>-1&&O.splice(A,1)}f(O)}})},`(${y},rowSelectColumn)`));const N=u("tr",{children:x},(M=b.rowId)!=null?M:y);s.push(N)}),s}isSortableColumn(t){switch(t){case re.USERID:case re.ENTITYID:case re.FILEHANDLEID:case re.STRING_LIST:case re.INTEGER_LIST:case re.BOOLEAN_LIST:case re.DATE_LIST:case re.USERID_LIST:case re.ENTITYID_LIST:return!1;default:return!0}}createTableHeader(t,n,r,o,a,i,s,l){const{sortedColumnSelection:d,columnIconSortState:c}=this.state,{queryVisualizationContext:{facetAliases:f={},columnsToShowInTable:p},queryContext:{lockedColumn:g}}=this.props,h=t.map((m,v)=>{var _;if(p.includes(m.name)){const b=this.findSelectionIndex(d,m.name)!==-1,y=c[v]===void 0?0:c[v],w=r.findIndex(A=>A.columnName===m.name),C=w!==-1&&r[w].facetType==="enumeration",x=r[w],T=b?"SRC-primary-background-color SRC-anchor-light":"",N=b?"SRC-selected-table-icon tool-icon":"SRC-primary-text-color tool-icon",k=`SRC-tableHead SRC-hand-cursor SRC-sortPadding SRC-primary-background-color-hover  ${T}`,q=kt(m.name,f),M=n.find(A=>A.name===m.name),V=m.name.toLowerCase()===((_=g==null?void 0:g.columnName)==null?void 0:_.toLowerCase()),O=M&&M.name=="id"&&M.columnType==re.ENTITYID;return u("th",{children:I("div",{className:"SRC-split",children:[u("span",{style:{whiteSpace:"nowrap"},children:q}),I("div",{className:"SRC-centerContent",children:[C&&!V&&this.configureFacetDropdown(x,M,l,f),this.isSortableColumn(m.columnType)&&u("span",{role:"button","aria-label":"sort",tabIndex:0,className:k,onKeyPress:this.handleColumnSortPress({index:v,name:m.name}),onClick:this.handleColumnSortPress({index:v,name:m.name}),children:u($a,{type:Tc[y],cssClass:N})}),O&&u(PR,{})]})]})},m.name)}else return u("th",{className:"SRC-hidden"},m.name)});return o&&h.unshift(u("th",{children:u("div",{className:"SRC-centerContent",children:u("span",{style:{whiteSpace:"nowrap"},children:"Access"})})},"accessColumn")),a&&h.unshift(u("th",{children:u("div",{className:"SRC-centerContent",children:"\xA0"})},"downloadColumn")),i&&h.unshift(u("th",{"data-testid":"AddToDownloadListV2ColumnHeader",children:u("div",{className:"SRC-centerContent",children:"\xA0"})},"addToV2DownloadListColumn")),s&&h.unshift(u("th",{children:u("div",{className:"SRC-centerContent"})},"rowSelectionColumn")),h}findSelectionIndex(t,n){return t.length!==0?t.findIndex(r=>r.column===n):-1}advancedSearch(t){t&&t.preventDefault();const n=this.props.queryContext.getLastQueryRequest(),{query:r}=n,o=btoa(JSON.stringify(r)),a=n.entityId;window.open(`${De.PORTAL}#!Synapse:${a}/tables/query/${o}`,"_blank")}getLengthOfPropsData(){var n,r;const{data:t}=this.props.queryContext;return(r=(n=t==null?void 0:t.queryResult)==null?void 0:n.queryResults.headers.length)!=null?r:0}configureFacetDropdown(t,n,r,o){return u(Wy,{containerAs:"Dropdown",facetValues:t.facetValues,columnModel:n,facetAliases:o,onChange:a=>{Gy(r,t,this.applyChangesFromQueryFilter,a)},onClear:()=>{Ky(r,t,this.applyChangesFromQueryFilter)}})}}try{sr.displayName="SynapseTable",sr.__docgenInfo={description:"",displayName:"SynapseTable",props:{synapseContext:{defaultValue:null,description:"",name:"synapseContext",required:!0,type:{name:"SynapseContextType"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},linkCountToDisaggregatedQuery:{defaultValue:null,description:`If true, columns created by the COUNT function will render with a link to Synapse that opens the disaggregated query results filtered by the conditions of that row.
Note that this is very brittle and only supports one column at a time. See SWC-6075 for more information. Default false.`,name:"linkCountToDisaggregatedQuery",required:!1,type:{name:"boolean"}},showNoContentAvailableWhenEmpty:{defaultValue:null,description:"",name:"showNoContentAvailableWhenEmpty",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/SynapseTable.tsx#SynapseTable"]={docgenInfo:sr.__docgenInfo,name:"SynapseTable",path:"src/lib/containers/table/SynapseTable.tsx#SynapseTable"})}catch{}function og(){const{data:e}=_t(),{showLastUpdatedOn:t}=Er();return t&&e&&e.lastUpdatedOn?u("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:I(St,{variant:"body2",children:["Last updated on ",Al(xr(e.lastUpdatedOn))]})}):u(z,{})}const ea=e=>{const{tableConfiguration:t,cardConfiguration:n,hideDownload:r}=e,o=ae(),a=_t(),i=Er();return I("div",{className:`FilterAndView ${i.topLevelControlsState.showFacetFilter?kn:Ln}`,children:[t?u(sr,{...t,synapseContext:o,queryContext:a,queryVisualizationContext:i,hideDownload:r}):u(z,{}),n?u(dr,{...n}):u(z,{}),u(og,{})]})};try{ea.displayName="FilterAndView",ea.__docgenInfo={description:"",displayName:"FilterAndView",props:{tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!0,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext"> | undefined'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!0,type:{name:"CardConfiguration | undefined"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/query_wrapper_plot_nav/FilterAndView.tsx#FilterAndView"]={docgenInfo:ea.__docgenInfo,name:"FilterAndView",path:"src/lib/containers/query_wrapper_plot_nav/FilterAndView.tsx#FilterAndView"})}catch{}const mA="isShowingFacetFilters",gA="isHidingFacetFilters",ta=e=>{const[t,n]=E.exports.useState(!1),{searchParams:r,sql:o,sqlOperator:a,tableConfiguration:i,name:s,cardConfiguration:l,facetsToPlot:d,facetsToFilter:c,hideDownload:f,hideQueryCount:p,hideSqlEditorControl:g,searchConfiguration:h,limit:m=wy,initQueryJson:v,showLastUpdatedOn:S}=e,_=wl(o,r,a),b=v?JSON.parse(v):{sql:_,limit:m,offset:0},y=An(b.sql),{data:w}=Ol(y),C=w&&op(w)&&w.isSearchEnabled,x={entityId:y,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:Cr|_r|yl|Qf|vl|bl|ml|Sl,query:b};return u("div",{className:"QueryWrapperPlotNav",children:u(i?sp:tr,{...e,initQueryRequest:x,children:u(xl,{unitDescription:"results",rgbIndex:e.rgbIndex,facetAliases:e.facetAliases,visibleColumnCount:e.visibleColumnCount,defaultShowFacetVisualization:e.defaultShowFacetVisualization,defaultShowSearchBar:e.defaultShowSearchBox||C,showLastUpdatedOn:S,children:u(Tl,{children:N=>{if(N===void 0)throw new Error("No queryContext found when using QueryContextConsumer");const k=N==null?void 0:N.isFacetsAvailable;return u(ip,{children:q=>{if(q===void 0)throw new Error("No queryVisualizationContext found when using QueryVisualizationContextConsumer");const M=(q==null?void 0:q.topLevelControlsState.showFacetFilter)||(q==null?void 0:q.topLevelControlsState.showFacetFilter)===void 0;return I(z,{children:[u("div",{className:`ErrorBannerWrapper ${M?mA:gA}`,children:u(Qy,{})}),C?u(er,{helpUrl:h==null?void 0:h.fullTextSearchHelpURL}):u(nr,{...h,queryContext:N,queryVisualizationContext:q}),u(rr,{}),u(Ro,{getLastQueryRequest:N.getLastQueryRequest,topLevelControlsState:q.topLevelControlsState,setTopLevelControlsState:q.setTopLevelControlsState}),u(or,{showColumnSelection:i!==void 0,name:s,hideDownload:f,hideQueryCount:p,hideFacetFilterControl:!k,hideVisualizationsControl:!k,hideSqlEditorControl:g}),k&&u(z,{children:u(Xy,{facetsToFilter:c})}),u(Zy,{facetsToPlot:d}),u(ea,{tableConfiguration:i,hideDownload:f,cardConfiguration:l}),t&&u(Wt,{getLastQueryRequest:N.getLastQueryRequest,onClose:()=>n(!1)})]})}})}})})})})},yA=ta;try{ta.displayName="QueryWrapperPlotNav",ta.__docgenInfo={description:"",displayName:"QueryWrapperPlotNav",props:{searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},facetsToPlot:{defaultValue:null,description:"",name:"facetsToPlot",required:!1,type:{name:"string[]"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"If onQueryChange is set, the callback will be invoked when the Query changes",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"If onQueryResultBundleChange is set, the callback will be invoked when the QueryResultBundle changes",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},initQueryJson:{defaultValue:null,description:"If initQueryJson is set, it will be the Query used in the initial QueryBundleRequest",name:"initQueryJson",required:!1,type:{name:"string"}},tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!1,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext">'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!1,type:{name:"CardConfiguration"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},facetsToFilter:{defaultValue:null,description:"",name:"facetsToFilter",required:!1,type:{name:"string[]"}},visibleColumnCount:{defaultValue:null,description:"",name:"visibleColumnCount",required:!1,type:{name:"number"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},defaultShowFacetVisualization:{defaultValue:null,description:"",name:"defaultShowFacetVisualization",required:!1,type:{name:"boolean"}},defaultShowSearchBox:{defaultValue:null,description:"",name:"defaultShowSearchBox",required:!1,type:{name:"boolean"}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/query_wrapper_plot_nav/QueryWrapperPlotNav.tsx#QueryWrapperPlotNav"]={docgenInfo:ta.__docgenInfo,name:"QueryWrapperPlotNav",path:"src/lib/containers/query_wrapper_plot_nav/QueryWrapperPlotNav.tsx#QueryWrapperPlotNav"})}catch{}const vA=e=>hn({partMask:bl|_r|yl|vl|Cr|Sl,entityId:An(e),concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:e,limit:25,offset:0}}),na=e=>{const{title:t,searchParams:n,sqlOperator:r,showAccessColumn:o,sql:a,hideDownload:i,hideQueryCount:s,name:l,showTopLevelControls:d=!1,searchConfiguration:c,unitDescription:f="Results",rgbIndex:p,showLastUpdatedOn:g,...h}=e,m=vA(a);n&&(m.query.sql=wl(m.query.sql,n,r));const v=ae(),S=An(a),{data:_}=Ol(S);return u(sp,{...h,initQueryRequest:m,children:u(xl,{rgbIndex:p,unitDescription:f,showLastUpdatedOn:g,...h,children:u(Tl,{children:b=>{if(b===void 0)throw new Error("No queryContext found when calling QueryContextConsumer");return u(ip,{children:y=>{if(y===void 0)throw new Error("No queryVisualizationContext found when calling QueryVisualizationContextConsumer");return I(z,{children:[d&&u(or,{showColumnSelection:!0,name:l,hideDownload:i,hideQueryCount:s,hideFacetFilterControl:!0,hideVisualizationsControl:!0}),_&&op(_)&&_.isSearchEnabled?u(er,{helpUrl:c==null?void 0:c.fullTextSearchHelpURL}):u(nr,{...c,queryContext:b,queryVisualizationContext:y}),u(rr,{}),d&&u(lp,{frontText:""}),u(sr,{synapseContext:v,queryContext:b,queryVisualizationContext:y,showAccessColumn:o,title:t,"data-testid":"SynapseTable",...h}),u(og,{})]})}})}})})})},bA=na;try{na.displayName="StandaloneQueryWrapper",na.__docgenInfo={description:`This component was initially implemented on the portal side. It renders a SynapseTable if a title is provided.
If showTopLevelControls is set to true, then the SynapseTable will also include the TopLevelControls (search, export table, column selection).`,displayName:"StandaloneQueryWrapper",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},linkCountToDisaggregatedQuery:{defaultValue:null,description:`If true, columns created by the COUNT function will render with a link to Synapse that opens the disaggregated query results filtered by the conditions of that row.
Note that this is very brittle and only supports one column at a time. See SWC-6075 for more information. Default false.`,name:"linkCountToDisaggregatedQuery",required:!1,type:{name:"boolean"}},showNoContentAvailableWhenEmpty:{defaultValue:null,description:"",name:"showNoContentAvailableWhenEmpty",required:!1,type:{name:"boolean"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},showTopLevelControls:{defaultValue:null,description:"",name:"showTopLevelControls",required:!1,type:{name:"boolean"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/StandaloneQueryWrapper.tsx#StandaloneQueryWrapper"]={docgenInfo:na.__docgenInfo,name:"StandaloneQueryWrapper",path:"src/lib/containers/table/StandaloneQueryWrapper.tsx#StandaloneQueryWrapper"})}catch{}function ra(e){const{query:t,showquery:n,tableonly:r}=e,o=n==="true",a=r==="true",i="Items";return a?u(bA,{sql:t,name:i}):u(yA,{sql:t,hideSqlEditorControl:!o,name:i,defaultShowFacetVisualization:!1,tableConfiguration:{}})}try{ra.displayName="MarkdownSynapseTable",ra.__docgenInfo={description:"",displayName:"MarkdownSynapseTable",props:{query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"string"}},showquery:{defaultValue:null,description:"",name:"showquery",required:!0,type:{name:"string"}},tableonly:{defaultValue:null,description:"",name:"tableonly",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownSynapseTable.tsx#MarkdownSynapseTable"]={docgenInfo:ra.__docgenInfo,name:"MarkdownSynapseTable",path:"src/lib/containers/markdown/widget/MarkdownSynapseTable.tsx#MarkdownSynapseTable"})}catch{}const SA={1:"toc-indent1",2:"toc-indent2",3:"toc-indent3",4:"toc-indent4",5:"toc-indent5",6:"toc-indent6"};function oa(e){const{originalMarkup:t}=e,n=[],r=/<h([1-6]) id="(.*)" .*toc="true">(.*)<\/h[1-6]>/gm;let o="";return t.replace(r,(a,i,s,l)=>(o+=l,n.push(u("div",{children:u("a",{role:"link",className:`link ${SA[Number(i)]}`,"data-anchor":s,children:l})},l)),"")),u("div",{children:n},o)}try{oa.displayName="MarkdownTableOfContents",oa.__docgenInfo={description:"",displayName:"MarkdownTableOfContents",props:{originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownTableOfContents.tsx#MarkdownTableOfContents"]={docgenInfo:oa.__docgenInfo,name:"MarkdownTableOfContents",path:"src/lib/containers/markdown/widget/MarkdownTableOfContents.tsx#MarkdownTableOfContents"})}catch{}function aa(e){const{alias:t}=e;return u(Xt,{alias:t,size:ur})}try{aa.displayName="MarkdownUserBadge",aa.__docgenInfo={description:"",displayName:"MarkdownUserBadge",props:{alias:{defaultValue:null,description:"",name:"alias",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownUserBadge.tsx#MarkdownUserBadge"]={docgenInfo:aa.__docgenInfo,name:"MarkdownUserBadge",path:"src/lib/containers/markdown/widget/MarkdownUserBadge.tsx#MarkdownUserBadge"})}catch{}function ia(e){return u(Eb,{params:e})}try{ia.displayName="MarkdownVideo",ia.__docgenInfo={description:"",displayName:"MarkdownVideo",props:{width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"string"}},videoId:{defaultValue:null,description:"",name:"videoId",required:!1,type:{name:"string"}},vimeoId:{defaultValue:null,description:"",name:"vimeoId",required:!1,type:{name:"string"}},oggSynapseId:{defaultValue:null,description:"",name:"oggSynapseId",required:!1,type:{name:"string"}},mp4SynapseId:{defaultValue:null,description:"",name:"mp4SynapseId",required:!1,type:{name:"string"}},webmSynapseId:{defaultValue:null,description:"",name:"webmSynapseId",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownVideo.tsx#MarkdownVideo"]={docgenInfo:ia.__docgenInfo,name:"MarkdownVideo",path:"src/lib/containers/markdown/widget/MarkdownVideo.tsx#MarkdownVideo"})}catch{}function sa(e){const{widgetType:t,widgetParamsMapped:n,originalMarkup:r}=e;switch(t){case"buttonlink":return u(to,{...n});case"image":return u(Oo,{...n});case"plot":return u(Io,{...n});case"toc":return u(oa,{originalMarkup:r});case"badge":return u(aa,{...n});case"iduReport":return u(co,{...n});case"video":case"vimeo":case"youtube":return u(ia,{...n});case"synapsetable":return u(ra,{...n});case"provenance":return u(xo,{...n});case"preview":return u(io,{...n});default:return console.warn(`Unsupported widget: ${t}.`),u(z,{})}}function Bf(e){return u(Uf,{children:u(sa,{...e})})}try{sa.displayName="MarkdownWidget",sa.__docgenInfo={description:"",displayName:"MarkdownWidget",props:{widgetType:{defaultValue:null,description:"",name:"widgetType",required:!0,type:{name:"enum",value:[{value:'"image"'},{value:'"video"'},{value:'"buttonlink"'},{value:'"plot"'},{value:'"toc"'},{value:'"badge"'},{value:'"iduReport"'},{value:'"vimeo"'},{value:'"youtube"'},{value:'"synapsetable"'},{value:'"provenance"'},{value:'"preview"'}]}},widgetParamsMapped:{defaultValue:null,description:"",name:"widgetParamsMapped",required:!0,type:{name:"any"}},originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/MarkdownWidget.tsx#MarkdownWidget"]={docgenInfo:sa.__docgenInfo,name:"MarkdownWidget",path:"src/lib/containers/markdown/MarkdownWidget.tsx#MarkdownWidget"})}catch{}class la extends E.exports.Component{constructor(t){super(t),this.renderBookmarks=this.renderBookmarks.bind(this)}renderBookmarks(){const t=String(this.props.footnotes),n=/Synapse widget&gt;<\/span>(.*)</g;let r;const o=[];for(;r=n.exec(t);)o.push(r[1]);return o.map((a,i)=>{const s=i<o.length-1;return I(E.exports.Fragment,{children:[I("button",{className:"SRC-markdown-bookmark",id:`bookmark${i}`,children:["[",i+1,"]"]}),u("span",{dangerouslySetInnerHTML:{__html:a}}),s&&u("br",{})]},i)})}render(){return I(E.exports.Fragment,{children:[u("hr",{}),this.renderBookmarks()]})}}const wA=la;try{la.displayName="Bookmarks",la.__docgenInfo={description:"",displayName:"Bookmarks",props:{footnotes:{defaultValue:null,description:"",name:"footnotes",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/Bookmarks.tsx#Bookmarks"]={docgenInfo:la.__docgenInfo,name:"Bookmarks",path:"src/lib/containers/markdown/widget/Bookmarks.tsx#Bookmarks"})}catch{}const Fs=markdownit({html:!0});class Fe extends ge.Component{constructor(t){super(t),markdownitSynapse.init_markdown_it(Fs,markdownitSub,markdownitSup,markdownitCentertext,markdownitSynapseHeading,markdownitSynapseTable,markdownitStrikethroughAlt,markdownitContainer,markdownitEmphasisAlt,markdownitInlineComments,markdownitBr);const n="";Fs.use(markdownitSynapse,n,"https://synapse.org").use(markdownitMath,n);const r={};this.props.markdown&&(r.markdown=this.props.markdown),this.state={md:Fs,error:void 0,fileHandles:void 0,data:r,isLoading:!0},this.markupRef=ge.createRef(),this.handleLinkClicks=this.handleLinkClicks.bind(this),this.renderMarkdown=this.renderMarkdown.bind(this),this.recursiveRender=this.recursiveRender.bind(this),this.processMath=this.processMath.bind(this),this.getWikiAttachments=this.getWikiAttachments.bind(this),this.getWikiPageMarkdown=this.getWikiPageMarkdown.bind(this),this.createHTML=this.createHTML.bind(this),this.addBookmarks=this.addBookmarks.bind(this),this.addIdsToReferenceWidgets=this.addIdsToReferenceWidgets.bind(this),this.addIdsToTocWidgets=this.addIdsToTocWidgets.bind(this)}componentWillUnmount(){this.markupRef.current&&this.markupRef.current.removeEventListener("click",this.handleLinkClicks)}handleLinkClicks(t){const n=t.target;if(n.tagName==="A"||n.tagName==="BUTTON"){const r=t.target;if(r.id.substring(0,3)==="ref"){t.preventDefault();const o=Number(t.currentTarget.id.substring(3)),a=this.markupRef.current.querySelector(`#bookmark${o}`);try{a.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(i){console.log("error on scroll",i)}}else if(t.currentTarget.id!==null&&r.getAttribute("data-anchor")){t.preventDefault();const o=r.getAttribute("data-anchor"),a=this.markupRef.current.querySelector(`#${o}`);try{a.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(i){console.log("error on scroll",i)}}}}createHTML(t){if(!t)return{__html:""};const n=this.props.renderInline?this.state.md.renderInline(t):this.state.md.render(t);return{__html:$p(n,Hp)}}processMath(){if(!this.markupRef.current)return;const t=this.markupRef.current.querySelectorAll('[id^="mathjax-"]'),n=new RegExp(/\\[()[\]]/,"g");t.forEach(r=>{if(r.textContent&&!r.getAttribute("processed")){r.setAttribute("processed","true");const o=r.textContent.replace(n,"");return katex.render(o,r,{output:"html",throwOnError:!1})}})}addBookmarks(){markdownitSynapse.resetFootnotes(),this.createHTML(this.state.data.markdown);const t=this.createHTML(markdownitSynapse.footnotes()).__html;if(t.length>0)return u(wA,{footnotes:t})}async getWikiPageMarkdown(){const{ownerId:t,wikiId:n,objectType:r}=this.props;if(!(!t&&!n))try{const o=await Cy(this.context.accessToken,t,n,r);try{const a=await this.getWikiAttachments(n||o.id);this.setState({data:o,fileHandles:a,error:void 0})}catch(a){console.error("fileHandlesErr = ",a)}}catch(o){console.error(`Error on wiki markdown load
`,o),this.setState({error:o})}}async getWikiAttachments(t){const{ownerId:n,objectType:r}=this.props;if(!n){console.error("Cannot get wiki attachments without ownerId on Markdown Component");return}return await _y(this.context.accessToken,n,t,r).then(o=>o).catch(o=>{console.error("Error on wiki attachment load ",o)})}addIdsToReferenceWidgets(t){const n=/<span id="wikiReference.*?<span data-widgetparams.*?span>/g;let r=1;return t.replace(n,()=>{const o=r;return r+=1,`<a href="" id="ref${o}">[${o}]</a>`})}addIdsToTocWidgets(t){const n="SRC-header-";let r=1;const o=/<h[1-6] toc="true">.*<\/h[1-6]>/gm;return t.replace(o,a=>{const i=r;return r+=1,`${a.substring(0,3)} id="${n}${i}"${a.substring(3)}`})}renderMarkdown(){let t=this.createHTML(this.state.data.markdown).__html;if(t=this.addIdsToReferenceWidgets(t),t=this.addIdsToTocWidgets(t),t.length>0){const r=new DOMParser().parseFromString(t,"text/html");return u(z,{children:this.recursiveRender(r.body,t)})}}recursiveRender(t,n){if(t.nodeType===Node.TEXT_NODE)return I(z,{children:[" ",t.textContent," "]});if(t.nodeType===Node.ELEMENT_NODE&&t instanceof HTMLElement){const r=t.tagName.toLowerCase()==="body"?"span":t.tagName.toLowerCase(),o=t.getAttribute("data-widgetparams");if(o)return this.processHTMLWidgetMapping(o,n);const a=t.attributes,i={};for(let l=0;l<a.length;l++){let d="",c="";const f=a.item(l);f&&(d=f.name,c=f.value),d&&c&&(i[d]=c)}if(t.childNodes.length===0)return u(r,{...i});const s=Array.from(t.childNodes).map((l,d)=>u(ge.Fragment,{children:this.recursiveRender(l,n)},d));return u(r,{...i,children:s})}}decodeXml(t){const n={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'};return t.replace(/(&quot;|&lt;|&gt;|&amp;)/g,(r,o)=>n[o])}processHTMLWidgetMapping(t,n){const r=this.decodeXml(t),o=r.indexOf("?");if(o===-1)return u(Bf,{widgetType:r,widgetParamsMapped:{},originalMarkup:n},JSON.stringify(r));const a=r.substring(0,o),i={};return r.substring(o+1).split("&").forEach(s=>{let[l,d]=s.split("=");d=decodeURIComponent(d),i[l]=d}),u(Bf,{widgetType:a,widgetParamsMapped:i,originalMarkup:n},JSON.stringify(r))}async componentDidMount(){if(this.state.data.markdown){this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current);return}this.markupRef.current&&this.markupRef.current.addEventListener("click",this.handleLinkClicks),await this.getWikiPageMarkdown(),this.processMath(),this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current)}async componentDidUpdate(t){let n=this.props.ownerId!==t.ownerId;n=n||this.props.wikiId!==t.wikiId,n&&await this.getWikiPageMarkdown(),this.processMath()}render(){const{renderInline:t,loadingSkeletonRowCount:n}=this.props,{isLoading:r,error:o}=this.state,a={ownerId:this.props.ownerId,wikiId:this.props.wikiId,wikiPage:this.state.data,fileHandles:this.state.fileHandles};if(o)return u(Xf,{error:o});const i=this.addBookmarks(),s=I(To,{wikiContext:a,children:[r&&u(z,{children:n?u(kl,{numCols:1,numRows:n}):u("span",{className:"spinner"})}),this.renderMarkdown(),i&&u("div",{children:this.addBookmarks()})]});return t?u("span",{className:"markdown markdown-inline",ref:this.markupRef,children:s}):u("div",{className:"markdown",ref:this.markupRef,children:s})}}Fe.contextType=wr;try{Fe.displayName="MarkdownSynapse",Fe.__docgenInfo={description:"Basic Markdown functionality for Synapse, supporting Images/Plots/References/Bookmarks/buttonlinks",displayName:"MarkdownSynapse",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},markdown:{defaultValue:null,description:"",name:"markdown",required:!1,type:{name:"string"}},renderInline:{defaultValue:null,description:"",name:"renderInline",required:!1,type:{name:"boolean"}},objectType:{defaultValue:null,description:"",name:"objectType",required:!1,type:{name:"enum",value:[{value:'"ENTITY"'},{value:'"ENTITY_CONTAINER"'},{value:'"PRINCIPAL"'},{value:'"ACTIVITY"'},{value:'"EVALUATION"'},{value:'"SUBMISSION"'},{value:'"EVALUATION_SUBMISSIONS"'},{value:'"FILE"'},{value:'"MESSAGE"'},{value:'"WIKI"'},{value:'"FAVORITE"'},{value:'"ACCESS_REQUIREMENT"'},{value:'"ACCESS_APPROVAL"'},{value:'"TEAM"'},{value:'"TABLE"'},{value:'"ACCESS_CONTROL_LIST"'},{value:'"PROJECT_SETTING"'},{value:'"VERIFICATION_SUBMISSION"'},{value:'"CERTIFIED_USER_PASSING_RECORD"'},{value:'"FORUM"'},{value:'"THREAD"'},{value:'"REPLY"'},{value:'"FORM_GROUP"'},{value:'"FORM_DATA"'},{value:'"ENTITY_VIEW"'},{value:'"USER_PROFILE"'},{value:'"DATA_ACCESS_REQUEST"'},{value:'"DATA_ACCESS_SUBMISSION"'},{value:'"DATA_ACCESS_SUBMISSION_STATUS"'},{value:'"MEMBERSHIP_INVITATION"'}]}},loadingSkeletonRowCount:{defaultValue:null,description:"",name:"loadingSkeletonRowCount",required:!1,type:{name:"number"}},onMarkdownProcessingDone:{defaultValue:null,description:"",name:"onMarkdownProcessingDone",required:!1,type:{name:"((ref: HTMLInputElement | null) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/MarkdownSynapse.tsx#MarkdownSynapse"]={docgenInfo:Fe.__docgenInfo,name:"MarkdownSynapse",path:"src/lib/containers/markdown/MarkdownSynapse.tsx#MarkdownSynapse"})}catch{}const ca=({type:e,title:t,subTitle:n="",description:r,values:o,secondaryLabelLimit:a,isAlignToLeftNav:i,descriptionConfig:s,href:l,target:d,rgbIndex:c,icon:f})=>{const p=document.querySelector('meta[name="description"]'),[g]=E.exports.useState(document.title),[h]=E.exports.useState(p?p.getAttribute("content"):"");return E.exports.useEffect(()=>(t&&document.title!==t&&(document.title=t),(r||n)&&(p==null||p.setAttribute("content",r||n)),function(){document.title=g,p==null||p.setAttribute("content",h)})),u("div",{className:`SRC-portalCard SRC-portalCardHeader ${i?"isAlignToLeftNav":""}`,children:u("div",{className:"container-fluid container-full-width",children:u("div",{className:"row",children:u("div",{className:"col-md-offset-1 col-md-10",children:I("div",{className:"SRC-portalCardMain",children:[f,I("div",{style:{width:"100%"},children:[I("div",{className:"SRC-cardContent",style:{marginLeft:"15px"},children:[u("div",{className:"SRC-type",children:e}),u("div",{children:u("h3",{className:"SRC-boldText",style:{margin:"none"},children:l?u("a",{target:d,href:l,className:"highlight-link",children:t}):I("span",{children:[" ",t," "]})})}),n&&I("div",{className:"SRC-author",children:[" ",n," "]}),r&&u("span",{className:"SRC-font-size-base",children:s!=null&&s.isMarkdown?u(Fe,{markdown:r}):r})]}),u("div",{style:{borderTop:"1px solid rgba(26, 28, 41, 0.2)",marginTop:"15px",paddingTop:"5px"}}),u("div",{className:"SRC-cardContent",children:o&&u(El,{isHeader:!0,secondaryLabelLimit:a,values:o})})]})]})})})})})};try{ca.displayName="HeaderCard",ca.__docgenInfo={description:"",displayName:"HeaderCard",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subTitle:{defaultValue:{value:""},description:"",name:"subTitle",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[][]"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},href:{defaultValue:null,description:"",name:"href",required:!1,type:{name:"string"}},target:{defaultValue:null,description:"",name:"target",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"Element"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HeaderCard.tsx#HeaderCard"]={docgenInfo:ca.__docgenInfo,name:"HeaderCard",path:"src/lib/containers/HeaderCard.tsx#HeaderCard"})}catch{}const da=e=>{var d,c;const{fileHandleAssociation:t,showDownloadIcon:n,redirect:r=!1,displayValue:o}=e,{accessToken:a}=ae(),[i,s]=E.exports.useState();E.exports.useEffect(()=>{o===void 0&&(async()=>s(await en({requestedFiles:[t],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1},a)))()},[a,o,t]);let l;return i&&(l=(d=i.requestedFiles[0].fileHandle)==null?void 0:d.fileName),I("button",{onClick:()=>{a&&t&&Zf(t.fileHandleId,a,t.associateObjectType,t.associateObjectId,r).then(f=>{window.open(f,"_blank")}).catch(f=>{console.error("Error on retrieving file handle url ",f)})},className:`SRC-primary-text-color ${gl}`,type:"button",style:{padding:0},children:[(c=o!=null?o:l)!=null?c:t.fileHandleId,n&&u(fe,{options:{icon:"download"}})]})};try{da.displayName="FileHandleLink",da.__docgenInfo={description:"",displayName:"FileHandleLink",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},redirect:{defaultValue:null,description:"",name:"redirect",required:!1,type:{name:"boolean"}},showDownloadIcon:{defaultValue:null,description:"",name:"showDownloadIcon",required:!0,type:{name:"boolean"}},displayValue:{defaultValue:null,description:"",name:"displayValue",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/FileHandleLink.tsx#FileHandleLink"]={docgenInfo:da.__docgenInfo,name:"FileHandleLink",path:"src/lib/containers/widgets/FileHandleLink.tsx#FileHandleLink"})}catch{}const ua=e=>{const{fileHandleAssociation:{fileHandleId:t,associateObjectId:n,associateObjectType:r}}=e,{accessToken:o}=ae(),[a,i]=E.exports.useState(),{ref:s,inView:l}=qn({triggerOnce:!0,rootMargin:"500px 0px"});return E.exports.useEffect(()=>{(()=>{t&&n&&r&&l&&Zf(t,o,r,n,!1).then(c=>{i(c)}).catch(c=>{console.error("Error on retrieving file handle url ",c)})})()},[l,t,n,o,r]),u("span",{ref:s,children:a&&u("img",{src:a,alt:"",className:"ImageFileHandle",loading:"lazy"})})};try{ua.displayName="ImageFileHandle",ua.__docgenInfo={description:"",displayName:"ImageFileHandle",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"]={docgenInfo:ua.__docgenInfo,name:"ImageFileHandle",path:"src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"})}catch{}const ic=400,CA="SRC-short-description",_A="SRC-long-description",fa=e=>{let t="";const n=e.split(" ");let r=0;for(;t.length<ic&&r<n.length;)t+=`${n[r]} `,r+=1;return t=t.trim(),{previewText:t}},EA=(e,t,n)=>{var o;let r;return e&&t&&(ap(e)?r={fileHandleId:t,associateObjectId:(o=e==null?void 0:e.id)!=null?o:"",associateObjectType:Ne.TableEntity}:n&&(r={fileHandleId:t,associateObjectId:n,associateObjectType:Ne.FileEntity})),r},Pt=({columnName:e,value:t,selectColumns:n,columnModels:r})=>{if(!t)return{str:"",strList:void 0,columnModelType:void 0};const o=(n==null?void 0:n.find(i=>i.name===e))||(r==null?void 0:r.find(i=>i.name===e));if(o==null?void 0:o.columnType.endsWith("_LIST")){let i=t,s;try{return s=JSON.parse(i),i=s.join(", "),{strList:s,str:i,columnModelType:o==null?void 0:o.columnType}}catch(l){console.error("Could not parse multivalue string ",i," caught err ",l)}}return{str:t,columnModelType:o==null?void 0:o.columnType}},xA=(e,t,n)=>(t==null?void 0:t.findIndex(r=>r.name===e))||(n==null?void 0:n.findIndex(r=>r.name===e)),pa=e=>{const{synapseId:t,version:n}=e;return I("span",{children:[n,"\xA0\xA0",u("a",{target:bt.NEW_WINDOW,rel:"noopener noreferrer",href:`${De.PORTAL}#!Synapse:${t}.${n}`,children:"(Show Version History on Synapse)"})]})},lr=e=>{const{value:t,columnName:n,labelLink:r,selectColumns:o,columnModels:a,isHeader:i,className:s,rowData:l,rowId:d}=e;if(!t)return u(z,{children:t});const{strList:c,str:f,columnModelType:p}=Pt({columnName:n,value:t,selectColumns:o,columnModels:a});if(!f)return u(z,{children:f});let g=s;const h={};if(i&&(g=s==null?void 0:s.concat(" ","SRC-lightLink")),p===re.USERID_LIST&&c)return u(z,{children:c.map((v,S)=>I("span",{children:[u(Xt,{ownerId:v,size:ur,className:g}),S<c.length-1&&",\xA0\xA0"]},v))});if(p===re.USERID&&f)return u(Xt,{ownerId:f,size:ur,className:g});if(!r)return f.match(ep)?u("a",{target:bt.NEW_WINDOW,rel:"noopener noreferrer",href:`${De.PORTAL}#!Synapse:${f}`,className:g,children:f}):u(z,{children:f});let m;if(r.isMarkdown)c?m=u(z,{children:c.map((v,S)=>I("span",{children:[u(Fe,{renderInline:!0,markdown:v},v),S<c.length-1&&",\xA0\xA0"]},v))}):m=u(Fe,{renderInline:!0,markdown:t});else{const v=c||f.split(",");let S;if("target"in r&&(S=r.target),"linkColumnName"in r){const _=xA(r.linkColumnName,o,a);if(_==null)console.warn(`Could not determine column index of ${r.linkColumnName}`),m=u(z,{children:t});else{const b=l[_];Tb(b)?m=u(z,{children:t}):m=u(z,{children:v.map((y,w)=>I(ge.Fragment,{children:[u("a",{href:b!=null?b:void 0,target:S!=null?S:bt.NEW_WINDOW,rel:"noopener noreferrer",className:g,style:h,children:y},y),w<v.length-1&&u("span",{style:{marginRight:4},children:", "})]},y))})}}else m=u(z,{children:v.map((_,b)=>{const{baseURL:y,URLColumnName:w,wrapValueWithParens:C}=r,x=r.overrideValueWithRowID?`syn${d}`:_,T=C?`(${x})`:x,N=`/${y}?${w}=${T}`;return I(ge.Fragment,{children:[u("a",{href:N,className:g,style:h,target:S!=null?S:bt.CURRENT_WINDOW,children:_},_),b<v.length-1&&u("span",{style:{marginRight:4},children:", "})]},_)})})}return r.tooltipText?u(We,{title:r.tooltipText,enterNextDelay:300,children:u("span",{children:m})}):m};function TA(e,t,n,r){if(e){if(!t||!n)throw Error("Must specify CardLink and data for linking to work");const{matchColumnName:o,URLColumnName:a,overrideLinkURLColumnName:i,overrideValueWithRowID:s}=e;if(i&&n[i]){const d=n[i],c=t[d];if(c)return c}const l=n[o];if(l===void 0)console.error(`Could not find match for data: ${t} with columnName ${o}`);else{const d=s?`syn${r}`:t[l];if(d)return`/${e.baseURL}?${a}=${d}`}}}function Ff(e,t,n,r,o){var l,d;e=e.trim();let a=e,i=bt.CURRENT_WINDOW;e.match(ep)?a=`${De.PORTAL}#!Synapse:${e}`:e.match(Ay)?(i=bt.NEW_WINDOW,a=`https://dx.doi.org/${e}`):t?t&&(a=(l=TA(t,n,r,o))!=null?l:"",a.includes("/DetailsPage")&&(i=bt.NEW_WINDOW)):i=bt.NEW_WINDOW;const s=(d=t==null?void 0:t.target)!=null?d:i;return{href:a,target:s}}function ha(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:r,descriptionConfig:o}=e;let a=t;o!=null&&o.isMarkdown&&(a=u(Fe,{markdown:a}));const i=n||(o==null?void 0:o.showFullDescriptionByDefault);return u("div",{className:i?"":"SRC-hidden",children:u("span",{"data-search-handle":r,className:`SRC-font-size-base ${_A}`,children:a})})}function ma(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:r,descriptionConfig:o,toggleShowMore:a}=e;return o!=null&&o.showFullDescriptionByDefault?u(z,{}):I("div",{className:n?"SRC-hidden":"",children:[u("span",{"data-search-handle":r,className:`SRC-font-size-base ${CA} SRC-short-description`,children:fa(t).previewText}),t.length>=ic&&u("a",{style:{fontSize:"16px",cursor:"pointer",marginLeft:"5px"},className:"highlight-link",onClick:a,children:"...Show More"})]})}class cr extends ge.Component{constructor(t){super(t),this.getCutoff=n=>{let r="";const o=n.split(" ");let a=0;for(;r.length<ic&&a<o.length;)r+=`${o[a]} `,a+=1;return r=r.trim(),{previewText:r}},this.toggleShowMore=()=>{this.setState({hasClickedShowMore:!0})},this.renderTitle=({href:n,target:r,titleSearchHandle:o,title:a})=>n?u("a",{"data-search-handle":o,target:r,href:n,className:"highlight-link",children:a}):I("span",{"data-search-handle":o,children:[" ",a," "]}),this.state={hasClickedShowMore:!1}}render(){var he;const{schema:t,data:n,rowId:r,genericCardSchema:o,secondaryLabelLimit:a,selectColumns:i,columnModels:s,iconOptions:l,useTypeColumnForIcon:d=!1,isHeader:c=!1,titleLinkConfig:f,ctaLinkConfig:p,labelLinkConfig:g,facetAliases:h={},descriptionConfig:m,rgbIndex:v,columnIconOptions:S,queryContext:{entity:_}}=this.props,b=o,{hasClickedShowMore:y}=this.state,{link:w="",type:C}=b,x=n[t[b.title]];let T=b.subTitle&&n[t[b.subTitle]];T=(b==null?void 0:b.subTitle)&&Pt({value:T,columnName:b==null?void 0:b.subTitle,selectColumns:i,columnModels:s}).str;const N=n[t[b.description||""]],k=n[t[b.icon||""]],q=n[t[b.dataTypeIconNames||""]],M=n[t[b.imageFileHandleColumnName||""]],V=s==null?void 0:s.find(we=>b.link===we.name),O=V==null?void 0:V.columnType,A=n[t[w]]||"",{href:R,target:P}=Ff(A,f,n,t,r),$=[],{secondaryLabels:H=[]}=b,B=_&&!ap(_);for(let we=0;we<H.length;we+=1){const _e=H[we];let Ce=n[t[_e]],Me;if(Ce){if(B&&_e==="currentVersion"){const Ve=n[t.id];Ce=pa({synapseId:Ve,version:Ce}),Me="Version"}else{const Ve=g==null?void 0:g.find(Ue=>Ue.matchColumnName===_e);Ce=u(lr,{value:Ce,columnName:_e,labelLink:Ve,isHeader:c,selectColumns:i,columnModels:s,rowData:n}),Me=kt(_e,h)}const ze=[Me,Ce,_e];$.push(ze)}}const j=EA(_,M||A,n[t.id]),D=$.length>0,L={marginTop:c?"0px":void 0,marginBottom:c?"0px":void 0,paddingBottom:D||M?void 0:"15px"},F=I(z,{children:[!d&&M&&u("div",{className:"SRC-imageThumbnail",style:{padding:b.thumbnailRequiresPadding?"21px":void 0},children:j&&u(ua,{fileHandleAssociation:j})}),!d&&!M&&u("div",{className:"SRC-cardThumbnail",children:u($a,{iconOptions:l,value:k,type:C})}),d&&u("div",{className:"SRC-cardThumbnail",children:u(fe,{options:{icon:pv[n[t.type]]}})})]});if(c)return u(ca,{descriptionConfig:m,title:x,subTitle:T,description:N,type:C,icon:F,values:$,href:R,target:P,isAlignToLeftNav:!0,secondaryLabelLimit:a,rgbIndex:v});const Y=kt(b.title,h),K=kt(b.subTitle,h),Z=kt(b.description,h);let Q,G;if(p){const we=n[t[p.link]]||"",{href:_e,target:Ce}=Ff(we,void 0,n,t,r);Q=_e,G=Ce}return I("div",{style:L,className:"SRC-portalCard",children:[I("div",{className:"SRC-portalCardMain",children:[F,I("div",{className:"SRC-cardContent",children:[u("div",{className:"SRC-type",children:C}),((he=S==null?void 0:S.columns)==null?void 0:he.dataType)&&(q==null?void 0:q.length)&&u("div",{style:{marginTop:"20px"},children:u(xb,{iconConfigs:S.columns.dataType,iconNames:JSON.parse(q),useBackground:!0,useTheme:!0})}),u("div",{children:u("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"},children:!f&&O===re.FILEHANDLEID&&j?u(da,{fileHandleAssociation:j,showDownloadIcon:C!==Ey,displayValue:x}):this.renderTitle({href:R,target:P,titleSearchHandle:Y,title:x})})}),T&&u("div",{"data-search-handle":K,className:"SRC-author",children:T}),N&&u(ma,{description:N,hasClickedShowMore:y,descriptionSubTitle:Z,descriptionConfig:m,toggleShowMore:this.toggleShowMore}),N&&u(ha,{description:N,hasClickedShowMore:y,descriptionSubTitle:Z,descriptionConfig:m}),p&&Q&&G&&u("div",{className:"SRC-portalCardCTALink bootstrap-4-backport",children:u("a",{target:G,rel:"noopener noreferrer",href:Q,children:p.text})})]})]}),D&&u(El,{isHeader:!1,secondaryLabelLimit:a,values:$,columnIconOptions:S,className:`${M?"hasImage":"hasIcon"}`})]})}}cr.contextType=wr;try{ha.displayName="LongDescription",ha.__docgenInfo={description:"",displayName:"LongDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#LongDescription"]={docgenInfo:ha.__docgenInfo,name:"LongDescription",path:"src/lib/containers/GenericCard.tsx#LongDescription"})}catch{}try{ma.displayName="ShortDescription",ma.__docgenInfo={description:"",displayName:"ShortDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},toggleShowMore:{defaultValue:null,description:"",name:"toggleShowMore",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#ShortDescription"]={docgenInfo:ma.__docgenInfo,name:"ShortDescription",path:"src/lib/containers/GenericCard.tsx#ShortDescription"})}catch{}try{fa.displayName="getCutoff",fa.__docgenInfo={description:"",displayName:"getCutoff",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getCutoff"]={docgenInfo:fa.__docgenInfo,name:"getCutoff",path:"src/lib/containers/GenericCard.tsx#getCutoff"})}catch{}try{Pt.displayName="getValueOrMultiValue",Pt.__docgenInfo={description:"",displayName:"getValueOrMultiValue",props:{columnName:{defaultValue:null,description:"",name:"columnName",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getValueOrMultiValue"]={docgenInfo:Pt.__docgenInfo,name:"getValueOrMultiValue",path:"src/lib/containers/GenericCard.tsx#getValueOrMultiValue"})}catch{}try{pa.displayName="VersionLabel",pa.__docgenInfo={description:"",displayName:"VersionLabel",props:{synapseId:{defaultValue:null,description:"",name:"synapseId",required:!0,type:{name:"string"}},version:{defaultValue:null,description:"",name:"version",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#VersionLabel"]={docgenInfo:pa.__docgenInfo,name:"VersionLabel",path:"src/lib/containers/GenericCard.tsx#VersionLabel"})}catch{}try{lr.displayName="SynapseCardLabel",lr.__docgenInfo={description:"",displayName:"SynapseCardLabel",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},labelLink:{defaultValue:null,description:"",name:"labelLink",required:!0,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink | undefined"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!0,type:{name:"SelectColumn[] | undefined"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!0,type:{name:"ColumnModel[] | undefined"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#SynapseCardLabel"]={docgenInfo:lr.__docgenInfo,name:"SynapseCardLabel",path:"src/lib/containers/GenericCard.tsx#SynapseCardLabel"})}catch{}try{cr.displayName="GenericCard",cr.__docgenInfo={description:"Renders a card from a table query",displayName:"GenericCard",props:{selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},useTypeColumnForIcon:{defaultValue:null,description:"",name:"useTypeColumnForIcon",required:!1,type:{name:"boolean"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"Record<string, number>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"string[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}},tableId:{defaultValue:null,description:"",name:"tableId",required:!0,type:{name:"string | undefined"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#GenericCard"]={docgenInfo:cr.__docgenInfo,name:"GenericCard",path:"src/lib/containers/GenericCard.tsx#GenericCard"})}catch{}class Qt extends E.exports.Component{constructor(t){super(t),this.handleLinkClick=n=>r=>{r.preventDefault(),window.open(`${De.PORTAL}#!Synapse:${n}`,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:t,schema:n,selectColumns:r,columnModels:o}=this.props,a=t[n.datasetName],i=t[n.summary],s=Pt({columnName:"tumorType",value:t[n.tumorType],selectColumns:r,columnModels:o}).str,l=Pt({columnName:"diseaseFocus",value:t[n.diseaseFocus],selectColumns:r,columnModels:o}).str,d=t[n.id],c=t[n.fundingAgency],f=t[n.fileCount],p=jf(t[n.fileSize]),g=[["FUNDER",Pt({columnName:"fundingAgency",value:c,selectColumns:r,columnModels:o}).str],["SIZE",p],["FILES",f]];return I("div",{className:"SRC-portalCard SRC-typeDataset  ",children:[I("div",{className:"SRC-cardThumbnail",children:[u($a,{type:Jf}),u("div",{children:p})]}),I("div",{className:"SRC-cardContent SRC-dataset",children:[u("div",{className:"SRC-type",children:"Dataset "}),u("div",{children:u("h3",{children:u("a",{target:"_self",href:`${De.PORTAL}#!Synapse:${d}`,children:a})})}),I("div",{className:"SRC-description-dataset",children:[u("p",{className:"SRC-description-text",children:i}),u("div",{className:"SRC-cardAction bootstrap-4-backport",children:u(be,{className:"pill SRC-datasetButton",onClick:this.handleLinkClick(d),variant:"secondary",children:"Download Dataset"})})]}),u("div",{className:"SRC-cardAnnotations",children:u(My,{chips:[s,l]})})]}),u(El,{isHeader:!1,secondaryLabelLimit:this.props.secondaryLabelLimit,values:g})]})}}try{Qt.displayName="Dataset",Qt.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/Dataset.tsx#Dataset"]={docgenInfo:Qt.__docgenInfo,name:"Dataset",path:"src/lib/containers/row_renderers/Dataset.tsx#Dataset"})}catch{}class ga extends E.exports.Component{constructor(t){super(t),this.handleLinkClick=n=>r=>{r.preventDefault(),window.open(n,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:t,schema:n}=this.props,r=t[n.organizationName],o=t[n.organizationPath],a=t[n.summary],i=t[n.website],s=t[n.logo];let l=i.replace("https://","");l=l.replace("http://",""),l.charAt(l.length-1)==="/"&&(l=l.substring(0,l.length-1));const d=window.location.hash.substring(1)===o,c={};let f;return d?c.paddingBottom="42px":f=u("div",{className:"SRC-marginAuto SRC-cardAction bootstrap-4-backport",children:u(be,{className:"pill-xl",href:o,variant:"secondary",children:"View Funded Research"})}),I("div",{className:"SRC-portalCard SRC-typeFunder ",style:c,children:[I("div",{className:"SRC-cardContent",children:[u("div",{className:"SRC-type",children:"Organization"}),s&&u("div",{className:"SRC-cardThumbnail",children:u("img",{alt:"funder logo",className:"SRC-logo",src:s})}),u("div",{children:I("h3",{children:[d&&r,!d&&u("a",{href:o,children:r})]})}),u("div",{className:"SRC-website",children:u("a",{rel:"noopener noreferrer",target:"_blank",href:i,children:l})}),u("div",{className:"SRC-description",children:a})]}),f]})}}try{ga.displayName="Funder",ga.__docgenInfo={description:"",displayName:"Funder",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/Funder.tsx#Funder"]={docgenInfo:ga.__docgenInfo,name:"Funder",path:"src/lib/containers/row_renderers/Funder.tsx#Funder"})}catch{}try{Qt.displayName="Dataset",Qt.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/index.tsx#Dataset"]={docgenInfo:Qt.__docgenInfo,name:"Dataset",path:"src/lib/containers/row_renderers/index.tsx#Dataset"})}catch{}try{rowrenderers.displayName="rowrenderers",rowrenderers.__docgenInfo={description:"",displayName:"rowrenderers",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/index.tsx#rowrenderers"]={docgenInfo:rowrenderers.__docgenInfo,name:"rowrenderers",path:"src/lib/containers/row_renderers/index.tsx#rowrenderers"})}catch{}const un=(e,t)=>e>0?`${e} ${t}${e>1?"s":""} `:"",OA=(e,t)=>{const n=xr.duration(e,t),r=n.years(),o=n.months()%12,a=n.days()%31,i=n.hours()%24,s=n.minutes()%60,l=n.seconds()%60;return`${un(r,"year")}${un(o,"month")}${un(a,"day")}${un(i,"hour")}${un(s,"minute")}${un(l,"second")}`.trim()},ya=({data:e,schema:t})=>{const n=e[t.submitterName],r=e[t.submitterUserId],o=e[t.time],a=e[t.timeUnits],i=e[t.text],s=e[t.tag];return I("div",{className:"SRC-portalCard ObservationCard",children:[I("div",{className:"ObservationCard__submitter",children:[!r&&u("div",{children:n}),r&&u(Xt,{size:"SMALL USER CARD",ownerId:r})]}),o&&I("div",{className:"ObservationCard__time",children:[u(fe,{options:{icon:"time"}}),u("span",{children:OA(o,a)})]}),u("div",{className:"ObservationCard__text",children:u(Vy,{summary:i})}),u("div",{className:"ObservationCard__tags",children:s&&u("span",{className:"SRC-tag",children:s})})]})},va=()=>I("div",{className:"SRC-portalCard ObservationCard",children:[u("div",{className:"ObservationCard__submitter",children:u("span",{children:u(Hs,{width:"100px"})})}),u("div",{className:"ObservationCard__time",children:u(fe,{options:{icon:"time"}})}),u("div",{className:"ObservationCard__text",children:u(kl,{numCols:1,numRows:4})}),u("div",{className:"ObservationCard__tags",children:u(Hs,{width:"80px"})})]});try{ya.displayName="ObservationCard",ya.__docgenInfo={description:`Specialized Observation Card, initially implemented for the NF portal.
Expects the following columns: submitterName, submitterUserId, time, timeUnits, text, and tag.`,displayName:"ObservationCard",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"ObservationCardSchema"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"Record<string, string>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/ObservationCard.tsx#ObservationCard"]={docgenInfo:ya.__docgenInfo,name:"ObservationCard",path:"src/lib/containers/row_renderers/ObservationCard.tsx#ObservationCard"})}catch{}try{va.displayName="LoadingObservationCard",va.__docgenInfo={description:"",displayName:"LoadingObservationCard",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/ObservationCard.tsx#LoadingObservationCard"]={docgenInfo:va.__docgenInfo,name:"LoadingObservationCard",path:"src/lib/containers/row_renderers/ObservationCard.tsx#LoadingObservationCard"})}catch{}const dr=e=>{const{isHeader:t=!1,unitDescription:n,type:r,isLoading:o,secondaryLabelLimit:a=3,title:i,...s}=e,l=Jy(),{data:d,getLastQueryRequest:c,appendNextPageToResults:f,hasNextPage:p}=l,g=c(),h=(y,w)=>{switch(w){case Jf:return u(Qt,{...y});case Ty:return u(ga,{...y});case xy:return u(cr,{...y,queryContext:l});case ti:return u(ya,{...y});default:return u("div",{},y.key)}},m=d!=null&&d.queryResult.queryResults.tableId?[d==null?void 0:d.queryResult.queryResults.tableId]:[],v=tp({ids:m,type:"ENTITY_HEADER"});if(d){if(d&&d.queryResult.queryResults.rows.length===0)return g.query.additionalFilters?u(Km,{}):u(Xm,{})}else return I("div",{children:[o&&r===ti&&u(va,{}),o&&r!==ti&&dp]});const S={};d.queryResult.queryResults.headers.forEach((y,w)=>{S[y.name]=w});const _=p&&u("div",{className:"SRC-viewMore bootstrap-4-backport",children:u(be,{variant:"secondary",className:"pill-xl",onClick:()=>{f()},children:"View More"})});let b;if(r===Ec){const y=d.queryResult.queryResults.headers.findIndex(C=>C.columnType===re.USERID);if(y===-1)throw Error("Type MEDIUM_USER_CARD specified but no columnType USERID found");const w=d.queryResult.queryResults.rows.map(C=>C.values.filter(x=>x!==null)[y]);b=u(Ob,{data:d,list:w,size:Ec})}else{const y=d.queryResult.queryResults.rows;b=y.length?y.map(w=>{const x={key:JSON.stringify(w.values),type:r,schema:S,isHeader:t,secondaryLabelLimit:a,rowId:w.rowId,data:w.values,selectColumns:d.selectColumns,columnModels:d.columnModels,tableEntityConcreteType:v[0]&&v[0].type,tableId:d==null?void 0:d.queryResult.queryResults.tableId,...s};return h(x,r)}):u(z,{})}return I("div",{role:"list",children:[i&&u("h2",{className:"SRC-card-overview-title",children:i}),!i&&n&&u(lp,{frontText:"Displaying"}),b,_]})};try{dr.displayName="CardContainer",dr.__docgenInfo={description:"",displayName:"CardContainer",props:{isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/CardContainer.tsx#CardContainer"]={docgenInfo:dr.__docgenInfo,name:"CardContainer",path:"src/lib/containers/CardContainer.tsx#CardContainer"})}catch{}const ba=({sortConfig:e,facetAliases:t})=>{const{defaultColumn:n,defaultDirection:r,sortableColumns:o}=e,a=_t(),{getLastQueryRequest:i,executeQueryRequest:s}=a,[l,d]=E.exports.useState(n),[c,f]=E.exports.useState(r),p=o.map(h=>({value:h,label:kt(h,t)})),g=h=>{const m=i();let v="ASC";h===l&&(v=c==="ASC"?"DESC":"ASC");const S=h?[{column:h,direction:v}]:void 0;m.query.sort=S,s(m),d(h),f(v)};return I("div",{className:"QuerySortSelector bootstrap-4-backport",children:[u(St,{variant:"label",className:"sort-by-label SRC-inlineBlock",children:"Sort by"}),u(ov,{className:"react-select-container SRC-inlineBlock",value:sv(l,p),options:p,onChange:h=>g(h==null?void 0:h.value),components:{Control:lv},styles:{control:h=>({...h,marginLeft:"15px"})}})]})};try{ba.displayName="QuerySortSelector",ba.__docgenInfo={description:"",displayName:"QuerySortSelector",props:{sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!0,type:{name:"SortConfiguration"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/QuerySortSelector.tsx#QuerySortSelector"]={docgenInfo:ba.__docgenInfo,name:"QuerySortSelector",path:"src/lib/containers/QuerySortSelector.tsx#QuerySortSelector"})}catch{}var bt=(e=>(e.CURRENT_WINDOW="_self",e.NEW_WINDOW="_blank",e.PARENT_FRAME="_parent",e.FULL_WINDOW_BODY="_top",e))(bt||{});const Sa=e=>{const t=wl(e.sql,e.searchParams,e.sqlOperator),{sortConfig:n,facetAliases:r}=e,o=n?[{column:n.defaultColumn,direction:n.defaultDirection}]:void 0,a={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:An(t),query:{sql:t,limit:e.limit,sort:o},partMask:Cr|_r|yl|Qf|vl|bl|ml|Sl};return u(tr,{...e,initQueryRequest:a,children:I(xl,{rgbIndex:e.rgbIndex,unitDescription:e.unitDescription,facetAliases:e.facetAliases,children:[n&&u(ba,{sortConfig:n,facetAliases:r}),u(dr,{...e}),u(Tl,{children:i=>u(Xf,{error:i==null?void 0:i.error})})]})})},Vk=Sa;try{Sa.displayName="CardContainerLogic",Sa.__docgenInfo={description:"Class wraps around CardContainer and serves as a standalone logic container for rendering cards.",displayName:"CardContainerLogic",props:{limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"KeyValue"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!1,type:{name:"SortConfiguration"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/CardContainerLogic.tsx#CardContainerLogic"]={docgenInfo:Sa.__docgenInfo,name:"CardContainerLogic",path:"src/lib/containers/CardContainerLogic.tsx#CardContainerLogic"})}catch{}export{qb as A,Vk as C,ar as D,Bb as E,da as F,Mb as G,qt as H,Xo as I,Nb as L,Co as M,$b as P,yA as Q,Vb as S,Fe as a,Ib as b,Mk as c,Fb as d,ko as e,Le as f,Uo as g,Yb as h,jo as i,ua as j,Ff as k,EA as l,oR as m,bA as n,Yx as p,Tp as u};
