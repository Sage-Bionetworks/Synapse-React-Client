import{r as S}from"./jsx-runtime.36c99582.js";import{h as l,k as b,bd as F,be as d,am as p,bf as A,C as i,az as h}from"./index.7b571c3f.js";import{u as M}from"./useInfiniteQuery.84777ede.js";import{e as c}from"./queryKeys.e0d3085f.js";import{i as f}from"./TypeUtils.a2c41307.js";import{c as R}from"./cloneDeep.414171f8.js";const y={refetchOnWindowFocus:!1};function D(e,s){const{accessToken:a}=l();return b(c.tableQueryResult(e,!1),()=>F(e,a),{...y,...s})}function L(e,s,a){const{accessToken:r}=l();return b(c.tableQueryResultWithAsyncStatus(e,!1),()=>A(e,r,a),{...y,...s})}function N(e,s,a){const r=e.partMask&i,t={...e,partMask:r},n=r>0?s==null?void 0:s.enabled:!1;return L(t,{...s,enabled:n},a)}function U(e,s,a){const r=e.partMask&~i,t={...e,query:{...e.query,offset:void 0,limit:void 0,sort:void 0},partMask:r},n=r>0?s==null?void 0:s.enabled:!1;return L(t,{...s,enabled:n},a)}function H(e,s,a){const r=N(e,s,a),t=U(e,s,a);return S.exports.useMemo(()=>r.status==="error"?r:t.status==="error"?t:r.status==="loading"?r:t.status==="loading"?t:r.status==="idle"?d({},r,t):d({},t,r),[r,t])}function j(e,s,a){const{accessToken:r}=l();return M(c.tableQueryResult(e,!0),t=>{const n=t.pageParam?parseInt(t.pageParam):0;return A({...e,query:{...e.query,offset:n},partMask:n!==0?e.partMask&i:e.partMask},r,a)},{...y,...s,select:t=>{const n=t==null?void 0:t.pages[0];if(n.responseBody)for(let u=0;u<t.pages.length;u++){const o=t.pages[u];o.responseBody!=null&&(t.pages[u].responseBody={...n.responseBody,queryResult:o.responseBody.queryResult})}return t},getPreviousPageParam:t=>{var o;if(t.jobState!=="COMPLETE")return;const n=t.requestBody;if(n.query.offset==null||n.query.offset===0)return;const u=(o=n.query.limit)!=null?o:p;return Math.max(n.query.offset-u,0)},getNextPageParam:(t,n)=>{var E,g,_,T,Q;if(t.jobState!=="COMPLETE")return;const u=t.requestBody,o=(E=u.query.limit)!=null?E:p,m=(g=n[0].responseBody)==null?void 0:g.queryCount;if(!(m!=null&&((_=u.query.offset)!=null?_:0)+o>=m))return((T=t.responseBody.queryResult)==null?void 0:T.queryResults.rows.length)===o?((Q=u.query.offset)!=null?Q:0)+o:void 0}})}var I=(e=>(e.LIKE="LIKE",e))(I||{}),V=(e=>(e.HAS="HAS",e.HAS_LIKE="HAS_LIKE",e))(V||{});const v="org.sagebionetworks.repo.model.table.ColumnSingleValueQueryFilter",C="org.sagebionetworks.repo.model.table.ColumnMultiValueFunctionQueryFilter",P="org.sagebionetworks.repo.model.table.TextMatchesQueryFilter",z=f(P),w=f(v),O=f(C),q=(e,s)=>{var a,r;return(r=(a=s==null?void 0:s.selectColumns)==null?void 0:a.findIndex(t=>t.name===e))!=null?r:-1},J=(e,s)=>e==null||s==null||e.length===0||s.length===0?!1:e.filter(r=>!x(r)&&s.find(t=>t.name===r.columnName)).length>0,x=e=>e.facetType==="enumeration"&&e.facetValues.length==1&&e.facetValues[0].value==h;function X(e,s){var r;const a=s==null?void 0:s.columnName;if(a&&e){const t=R(e),n=(r=t.facets)==null?void 0:r.filter(u=>u.columnName.toLowerCase()!==a.toLowerCase());return t.facets=n,t}else return e}function Z(e,s){const a=Array.isArray(e.selectedFacets)&&e.selectedFacets.filter(t=>t.columnName!==(s==null?void 0:s.columnName)).length>0,r=Array.isArray(e.additionalFilters)&&e.additionalFilters.filter(t=>w(t)||O(t)?t.columnName!==(s==null?void 0:s.columnName):!0).length>0;return a||r}export{V as C,j as a,w as b,O as c,I as d,H as e,x as f,z as g,Z as h,J as i,q as j,X as r,D as u};
