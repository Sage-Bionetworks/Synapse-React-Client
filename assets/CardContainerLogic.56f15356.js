import{h as J,j as bl,k as Oa,l as wl,m as qa,n as rn,o as Qr,F as xe,p as Rt,q as hn,B as mn,r as Na,t as Cl,v as _l,w as gn,x as Ki,y as vl,z as Tl,A as Al,C as xl,D as Rl,H as Il,I as El,J as Ns,K as ka,L as Kr,M as La,N as Ol,Q as ql,R as se,T as Nl,V as kl,W as Ll,X as Dl,Y as Pl,U as Ml,f as Vl,Z as Fl,_ as Bl,$ as Gi,a0 as Ul,a1 as Da,a2 as Hl,a3 as $l,a4 as jl,a5 as Wl,a6 as zl,a7 as ks,a8 as xn,a9 as Yl,aa as Ql,ab as Kl,ac as Xi,ad as Pa,ae as Ji,af as Zi,ag as es,ah as Gl,ai as Xl,E as Ma,aj as Va,ak as Jl,al as Fa,O as ui,am as Ls,G as Zl,an as ec}from"./index.65b6889e.js";import{p as It,i as tc,f as nc,a as rc,b as ts,S as Ba,D as ic}from"./sqlFunctions.02978512.js";import{u as Ua}from"./useGetInfoFromIds.491c328a.js";import{C as W}from"./ColumnType.744125d2.js";import{j as a,a as C,F as D,r as I,R as ge}from"./jsx-runtime.9b9f5ec2.js";import{E as sc,i as yt,a as ac,b as _t,c as oc,d as Ha,h as lc,e as $a,f as ja}from"./EntityIcon.728bd872.js";import{P as Oe,g as cc,B as dc}from"./getEndpoint.bb7ded34.js";import{u as Qe,E as Gr,I as Xr,C as ns,a as uc,S as pc}from"./ElementWithTooltip.2814faf5.js";import{u as fc,T as Je}from"./Tooltip.6dc32b0d.js";import{S as pi,Q as Et,a as Ot,u as je,b as yn,c as hc,d as mc,i as gc,e as yc,C as Sc,f as bc,g as wc,E as Cc,h as _c,j as vc,k as rs,l as is,m as Wa,n as Tc,o as Ac,F as xc,p as za,T as Ya,q as Rc}from"./FacetNav.f584c833.js";import{u as Qa,a as Ic,i as Ec,r as Oc}from"./queryUtils.d630e895.js";import{u as ss}from"./useEntity.ac365d34.js";import{T as qt}from"./Typography.5121ab9c.js";import{S as qc}from"./react-select.esm.280fb03d.js";import{f as Nc,C as kc}from"./CustomSelectWidget.888b8830.js";import{c as $,A as Lc,B as Dc,C as Pc,D as Mc,G as Vc,H as dt,b as Fc,g as Bc}from"./iframe.8f6c7ea4.js";import{b as Uc,p as as,F as Hc}from"./core.esm.4e3f6aa1.js";import{B as de}from"./Button.17fde95a.js";import{u as Nt}from"./react-intersection-observer.esm.c63d6e7a.js";import{u as Ka}from"./useInfiniteQuery.63a858a4.js";import{U as lt,a as Ga,g as $c}from"./UserCard.96e69903.js";import{f as Xa}from"./DateFormatter.e6e193e6.js";import{h as Jr}from"./moment.a565bb48.js";import{S as Ja}from"./SkeletonTable.ec89eee6.js";import{S as Ai}from"./Skeleton.223a1071.js";import{c as jc,P as Wc}from"./factory.8f21ce6a.js";import{T as Vr,N as zc,I as Ds}from"./SynapseTableConstants.07ecdebd.js";import{I as ce,H as Yc,S as Qc,t as Kc}from"./IconSvg.4c036b55.js";import{u as xi}from"./use-deep-compare-effect.esm.1429f412.js";import{u as Gc}from"./useGetDownloadListStatistics.843ab56e.js";import{e as os}from"./queryKeys.e0d3085f.js";import{d as vt,C as Za}from"./ToastMessage.820cec30.js";import{A as Sn}from"./Alert.a1c2894f.js";import{r as Xc}from"./index.9efb4fab.js";import{i as eo,g as to,p as Jc,e as Zc,a as ed,c as td,o as nd,f as rd,b as id,d as sd,h as ad}from"./usePopperMarginModifiers.e3573a90.js";import{C as ls}from"./Collapse.f8b3c179.js";import{M as K,a as od,b as ld}from"./Modal.f6a7e351.js";import{D as Ye}from"./Dropdown.9cd9605c.js";import{Q as cd}from"./QueryCount.00ab6a45.js";import{c as ut}from"./createSvgIcon.0c80d9df.js";import{c as St}from"./cloneDeep.ed3f4363.js";import{N as dd}from"./NoData.1ba5ff82.js";import{u as no}from"./useGetAccessRequirement.ccba9a7c.js";import{B as ud,S as we}from"./ManagedACTAccessRequirementStatus.d3292bbe.js";import{F as fi}from"./FileUpload.59701399.js";import{U as pd}from"./UserSearchBox.c58d209c.js";import{R as fd}from"./RadioGroup.531df55e.js";import{s as hd}from"./union.0786fe8c.js";import{S as md,l as ro}from"./LoadingScreen.1cf3fc8a.js";import{E as Ri}from"./EntityLink.d9864344.js";import{n as gd}from"./uniq.9703bf37.js";import{C as yd}from"./Checkbox.1d278076.js";import{s as Sd}from"./NoSearchResults.a1729ee3.js";import{b as cs,_ as Fr,w as io,g as et,d as Ii,e as hi}from"./withStyles.c4d286cc.js";import{d as Fe}from"./toConsumableArray.c4898ee4.js";import{_ as bd}from"./slicedToArray.e72f11da.js";import{u as wd}from"./useTheme.b4767795.js";import{S as Cd}from"./SynapseVideo.818e1eb5.js";import{I as _d}from"./IconList.a14ba983.js";import{i as vd}from"./isEmpty.26f1ae05.js";import{U as Td}from"./UserCardList.f3856dea.js";const Ad=ut(a("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})),xd=ut(C(D,{children:[a("path",{d:"M6 20h12V10H6v10zm6-7c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z",opacity:".3"}),a("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"})]})),Rd=ut(a("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}));var ds=(r=>(r.APPROVED="APPROVED",r.REVOKED="REVOKED",r))(ds||{}),Id=(r=>(r.MODIFIED_ON="MODIFIED_ON",r.EXPIRED_ON="EXPIRED_ON",r))(Id||{}),Ue=(r=>(r.GAIN_ACCESS="GAIN_ACCESS",r.RENEW_ACCESS="RENEW_ACCESS",r.REVOKE_ACCESS="REVOKE_ACCESS",r))(Ue||{}),so=(r=>(r.ProxyFileHandle="org.sagebionetworks.repo.model.file.ProxyFileHandle",r.ExternalObjectStoreFileHandle="org.sagebionetworks.repo.model.file.ExternalObjectStoreFileHandle",r.ExternalFileHandle="org.sagebionetworks.repo.model.file.ExternalFileHandle",r))(so||{});function Ed(r){return Object.values(so).includes(r.concreteType)}var Zr=(r=>(r.ENTITY="ENTITY",r.EVALUATION="EVALUATION",r.TEAM="TEAM",r))(Zr||{}),ao=(r=>(r.OPEN="OPEN",r.RESTRICTED_BY_TERMS_OF_USE="RESTRICTED_BY_TERMS_OF_USE",r.CONTROLLED_BY_ACT="CONTROLLED_BY_ACT",r))(ao||{});function Od(r,e){const{accessToken:t}=J(),n={accessRequirementId:r};return Ka(["approvedSubmissionInfo",n],async i=>await bl({...n,nextPageToken:i.pageParam},t),{...e,getNextPageParam:i=>i.nextPageToken})}const qd={includeEntity:!0,includeEntityPath:!0,includeAnnotations:!0,includePermissions:!0,includeHasChildren:!0,includeAccessControlList:!0,includeFileHandles:!0,includeTableBundle:!0,includeRootWikiId:!0,includeBenefactorACL:!0,includeDOIAssociation:!0,includeFileName:!0,includeThreadCount:!0,includeRestrictionInformation:!0};function Nd(r,e=qd,t,n){const{accessToken:i}=J();return Oa(os.bundle(r,t,e),()=>wl(r,e,t,i),n)}function kd(r,e){const{accessToken:t}=J();return Oa(os.children(r,!1),()=>qa(r,t),e)}function sy(r,e){const{accessToken:t}=J();return Ka(os.children(r,!0),async n=>await qa({...r,includeTotalChildCount:n.pageParam?!1:r.includeTotalChildCount,nextPageToken:n.pageParam},t,n.signal),{...e,getNextPageParam:n=>n.nextPageToken})}var oo={},bn={},ei={},ti=$&&$.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ei,"__esModule",{value:!0});var Ld=ti(Lc),Dd=ti(Dc),mi=ti(Pc),Pd=ti(Mc);function Ae(r){return r===" "||r===`
`||r==="	"||r==="\f"||r==="\r"}function Ps(r){return r>="a"&&r<="z"||r>="A"&&r<="Z"}function he(r,e,t){var n=r.toLowerCase();return r===n?function(i,s){s===n?i._state=e:(i._state=t,i._index--)}:function(i,s){s===n||s===r?i._state=e:(i._state=t,i._index--)}}function ke(r,e){var t=r.toLowerCase();return function(n,i){i===t||i===r?n._state=e:(n._state=3,n._index--)}}var Md=he("C",24,16),Vd=he("D",25,16),Fd=he("A",26,16),Bd=he("T",27,16),Ud=he("A",28,16),Hd=ke("R",35),$d=ke("I",36),jd=ke("P",37),Wd=ke("T",38),zd=he("R",40,1),Yd=he("I",41,1),Qd=he("P",42,1),Kd=he("T",43,1),Gd=ke("Y",45),Xd=ke("L",46),Jd=ke("E",47),Zd=he("Y",49,1),eu=he("L",50,1),tu=he("E",51,1),nu=ke("I",54),ru=ke("T",55),iu=ke("L",56),su=ke("E",57),au=he("I",58,1),ou=he("T",59,1),lu=he("L",60,1),cu=he("E",61,1),du=he("#",63,64),uu=he("X",66,65),pu=function(){function r(e,t){var n;this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1,this.cbs=t,this.xmlMode=!!(e!=null&&e.xmlMode),this.decodeEntities=(n=e==null?void 0:e.decodeEntities)!==null&&n!==void 0?n:!0}return r.prototype.reset=function(){this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1},r.prototype.write=function(e){this.ended&&this.cbs.onerror(Error(".write() after done!")),this.buffer+=e,this.parse()},r.prototype.end=function(e){this.ended&&this.cbs.onerror(Error(".end() after done!")),e&&this.write(e),this.ended=!0,this.running&&this.finish()},r.prototype.pause=function(){this.running=!1},r.prototype.resume=function(){this.running=!0,this._index<this.buffer.length&&this.parse(),this.ended&&this.finish()},r.prototype.getAbsoluteIndex=function(){return this.bufferOffset+this._index},r.prototype.stateText=function(e){e==="<"?(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this._state=2,this.sectionStart=this._index):this.decodeEntities&&e==="&"&&(this.special===1||this.special===4)&&(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this.baseState=1,this._state=62,this.sectionStart=this._index)},r.prototype.isTagStartChar=function(e){return Ps(e)||this.xmlMode&&!Ae(e)&&e!=="/"&&e!==">"},r.prototype.stateBeforeTagName=function(e){e==="/"?this._state=5:e==="<"?(this.cbs.ontext(this.getSection()),this.sectionStart=this._index):e===">"||this.special!==1||Ae(e)?this._state=1:e==="!"?(this._state=15,this.sectionStart=this._index+1):e==="?"?(this._state=17,this.sectionStart=this._index+1):this.isTagStartChar(e)?(this._state=!this.xmlMode&&(e==="s"||e==="S")?32:!this.xmlMode&&(e==="t"||e==="T")?52:3,this.sectionStart=this._index):this._state=1},r.prototype.stateInTagName=function(e){(e==="/"||e===">"||Ae(e))&&(this.emitToken("onopentagname"),this._state=8,this._index--)},r.prototype.stateBeforeClosingTagName=function(e){Ae(e)||(e===">"?this._state=1:this.special!==1?this.special!==4&&(e==="s"||e==="S")?this._state=33:this.special===4&&(e==="t"||e==="T")?this._state=53:(this._state=1,this._index--):this.isTagStartChar(e)?(this._state=6,this.sectionStart=this._index):(this._state=20,this.sectionStart=this._index))},r.prototype.stateInClosingTagName=function(e){(e===">"||Ae(e))&&(this.emitToken("onclosetag"),this._state=7,this._index--)},r.prototype.stateAfterClosingTagName=function(e){e===">"&&(this._state=1,this.sectionStart=this._index+1)},r.prototype.stateBeforeAttributeName=function(e){e===">"?(this.cbs.onopentagend(),this._state=1,this.sectionStart=this._index+1):e==="/"?this._state=4:Ae(e)||(this._state=9,this.sectionStart=this._index)},r.prototype.stateInSelfClosingTag=function(e){e===">"?(this.cbs.onselfclosingtag(),this._state=1,this.sectionStart=this._index+1,this.special=1):Ae(e)||(this._state=8,this._index--)},r.prototype.stateInAttributeName=function(e){(e==="="||e==="/"||e===">"||Ae(e))&&(this.cbs.onattribname(this.getSection()),this.sectionStart=-1,this._state=10,this._index--)},r.prototype.stateAfterAttributeName=function(e){e==="="?this._state=11:e==="/"||e===">"?(this.cbs.onattribend(void 0),this._state=8,this._index--):Ae(e)||(this.cbs.onattribend(void 0),this._state=9,this.sectionStart=this._index)},r.prototype.stateBeforeAttributeValue=function(e){e==='"'?(this._state=12,this.sectionStart=this._index+1):e==="'"?(this._state=13,this.sectionStart=this._index+1):Ae(e)||(this._state=14,this.sectionStart=this._index,this._index--)},r.prototype.handleInAttributeValue=function(e,t){e===t?(this.emitToken("onattribdata"),this.cbs.onattribend(t),this._state=8):this.decodeEntities&&e==="&"&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},r.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,'"')},r.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,"'")},r.prototype.stateInAttributeValueNoQuotes=function(e){Ae(e)||e===">"?(this.emitToken("onattribdata"),this.cbs.onattribend(null),this._state=8,this._index--):this.decodeEntities&&e==="&"&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},r.prototype.stateBeforeDeclaration=function(e){this._state=e==="["?23:e==="-"?18:16},r.prototype.stateInDeclaration=function(e){e===">"&&(this.cbs.ondeclaration(this.getSection()),this._state=1,this.sectionStart=this._index+1)},r.prototype.stateInProcessingInstruction=function(e){e===">"&&(this.cbs.onprocessinginstruction(this.getSection()),this._state=1,this.sectionStart=this._index+1)},r.prototype.stateBeforeComment=function(e){e==="-"?(this._state=19,this.sectionStart=this._index+1):this._state=16},r.prototype.stateInComment=function(e){e==="-"&&(this._state=21)},r.prototype.stateInSpecialComment=function(e){e===">"&&(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index)),this._state=1,this.sectionStart=this._index+1)},r.prototype.stateAfterComment1=function(e){e==="-"?this._state=22:this._state=19},r.prototype.stateAfterComment2=function(e){e===">"?(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):e!=="-"&&(this._state=19)},r.prototype.stateBeforeCdata6=function(e){e==="["?(this._state=29,this.sectionStart=this._index+1):(this._state=16,this._index--)},r.prototype.stateInCdata=function(e){e==="]"&&(this._state=30)},r.prototype.stateAfterCdata1=function(e){e==="]"?this._state=31:this._state=29},r.prototype.stateAfterCdata2=function(e){e===">"?(this.cbs.oncdata(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):e!=="]"&&(this._state=29)},r.prototype.stateBeforeSpecialS=function(e){e==="c"||e==="C"?this._state=34:e==="t"||e==="T"?this._state=44:(this._state=3,this._index--)},r.prototype.stateBeforeSpecialSEnd=function(e){this.special===2&&(e==="c"||e==="C")?this._state=39:this.special===3&&(e==="t"||e==="T")?this._state=48:this._state=1},r.prototype.stateBeforeSpecialLast=function(e,t){(e==="/"||e===">"||Ae(e))&&(this.special=t),this._state=3,this._index--},r.prototype.stateAfterSpecialLast=function(e,t){e===">"||Ae(e)?(this.special=1,this._state=6,this.sectionStart=this._index-t,this._index--):this._state=1},r.prototype.parseFixedEntity=function(e){if(e===void 0&&(e=this.xmlMode?Pd.default:Dd.default),this.sectionStart+1<this._index){var t=this.buffer.substring(this.sectionStart+1,this._index);Object.prototype.hasOwnProperty.call(e,t)&&(this.emitPartial(e[t]),this.sectionStart=this._index+1)}},r.prototype.parseLegacyEntity=function(){for(var e=this.sectionStart+1,t=Math.min(this._index-e,6);t>=2;){var n=this.buffer.substr(e,t);if(Object.prototype.hasOwnProperty.call(mi.default,n)){this.emitPartial(mi.default[n]),this.sectionStart+=t+1;return}t--}},r.prototype.stateInNamedEntity=function(e){e===";"?(this.parseFixedEntity(),this.baseState===1&&this.sectionStart+1<this._index&&!this.xmlMode&&this.parseLegacyEntity(),this._state=this.baseState):(e<"0"||e>"9")&&!Ps(e)&&(this.xmlMode||this.sectionStart+1===this._index||(this.baseState!==1?e!=="="&&this.parseFixedEntity(mi.default):this.parseLegacyEntity()),this._state=this.baseState,this._index--)},r.prototype.decodeNumericEntity=function(e,t,n){var i=this.sectionStart+e;if(i!==this._index){var s=this.buffer.substring(i,this._index),o=parseInt(s,t);this.emitPartial(Ld.default(o)),this.sectionStart=n?this._index+1:this._index}this._state=this.baseState},r.prototype.stateInNumericEntity=function(e){e===";"?this.decodeNumericEntity(2,10,!0):(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(2,10,!1),this._index--)},r.prototype.stateInHexEntity=function(e){e===";"?this.decodeNumericEntity(3,16,!0):(e<"a"||e>"f")&&(e<"A"||e>"F")&&(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(3,16,!1),this._index--)},r.prototype.cleanup=function(){this.sectionStart<0?(this.buffer="",this.bufferOffset+=this._index,this._index=0):this.running&&(this._state===1?(this.sectionStart!==this._index&&this.cbs.ontext(this.buffer.substr(this.sectionStart)),this.buffer="",this.bufferOffset+=this._index,this._index=0):this.sectionStart===this._index?(this.buffer="",this.bufferOffset+=this._index,this._index=0):(this.buffer=this.buffer.substr(this.sectionStart),this._index-=this.sectionStart,this.bufferOffset+=this.sectionStart),this.sectionStart=0)},r.prototype.parse=function(){for(;this._index<this.buffer.length&&this.running;){var e=this.buffer.charAt(this._index);this._state===1?this.stateText(e):this._state===12?this.stateInAttributeValueDoubleQuotes(e):this._state===9?this.stateInAttributeName(e):this._state===19?this.stateInComment(e):this._state===20?this.stateInSpecialComment(e):this._state===8?this.stateBeforeAttributeName(e):this._state===3?this.stateInTagName(e):this._state===6?this.stateInClosingTagName(e):this._state===2?this.stateBeforeTagName(e):this._state===10?this.stateAfterAttributeName(e):this._state===13?this.stateInAttributeValueSingleQuotes(e):this._state===11?this.stateBeforeAttributeValue(e):this._state===5?this.stateBeforeClosingTagName(e):this._state===7?this.stateAfterClosingTagName(e):this._state===32?this.stateBeforeSpecialS(e):this._state===21?this.stateAfterComment1(e):this._state===14?this.stateInAttributeValueNoQuotes(e):this._state===4?this.stateInSelfClosingTag(e):this._state===16?this.stateInDeclaration(e):this._state===15?this.stateBeforeDeclaration(e):this._state===22?this.stateAfterComment2(e):this._state===18?this.stateBeforeComment(e):this._state===33?this.stateBeforeSpecialSEnd(e):this._state===53?au(this,e):this._state===39?zd(this,e):this._state===40?Yd(this,e):this._state===41?Qd(this,e):this._state===34?Hd(this,e):this._state===35?$d(this,e):this._state===36?jd(this,e):this._state===37?Wd(this,e):this._state===38?this.stateBeforeSpecialLast(e,2):this._state===42?Kd(this,e):this._state===43?this.stateAfterSpecialLast(e,6):this._state===44?Gd(this,e):this._state===29?this.stateInCdata(e):this._state===45?Xd(this,e):this._state===46?Jd(this,e):this._state===47?this.stateBeforeSpecialLast(e,3):this._state===48?Zd(this,e):this._state===49?eu(this,e):this._state===50?tu(this,e):this._state===51?this.stateAfterSpecialLast(e,5):this._state===52?nu(this,e):this._state===54?ru(this,e):this._state===55?iu(this,e):this._state===56?su(this,e):this._state===57?this.stateBeforeSpecialLast(e,4):this._state===58?ou(this,e):this._state===59?lu(this,e):this._state===60?cu(this,e):this._state===61?this.stateAfterSpecialLast(e,5):this._state===17?this.stateInProcessingInstruction(e):this._state===64?this.stateInNamedEntity(e):this._state===23?Md(this,e):this._state===62?du(this,e):this._state===24?Vd(this,e):this._state===25?Fd(this,e):this._state===30?this.stateAfterCdata1(e):this._state===31?this.stateAfterCdata2(e):this._state===26?Bd(this,e):this._state===27?Ud(this,e):this._state===28?this.stateBeforeCdata6(e):this._state===66?this.stateInHexEntity(e):this._state===65?this.stateInNumericEntity(e):this._state===63?uu(this,e):this.cbs.onerror(Error("unknown _state"),this._state),this._index++}this.cleanup()},r.prototype.finish=function(){this.sectionStart<this._index&&this.handleTrailingData(),this.cbs.onend()},r.prototype.handleTrailingData=function(){var e=this.buffer.substr(this.sectionStart);this._state===29||this._state===30||this._state===31?this.cbs.oncdata(e):this._state===19||this._state===21||this._state===22?this.cbs.oncomment(e):this._state===64&&!this.xmlMode?(this.parseLegacyEntity(),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):this._state===65&&!this.xmlMode?(this.decodeNumericEntity(2,10,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):this._state===66&&!this.xmlMode?(this.decodeNumericEntity(3,16,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):this._state!==3&&this._state!==8&&this._state!==11&&this._state!==10&&this._state!==9&&this._state!==13&&this._state!==12&&this._state!==14&&this._state!==6&&this.cbs.ontext(e)},r.prototype.getSection=function(){return this.buffer.substring(this.sectionStart,this._index)},r.prototype.emitToken=function(e){this.cbs[e](this.getSection()),this.sectionStart=-1},r.prototype.emitPartial=function(e){this.baseState!==1?this.cbs.onattribdata(e):this.cbs.ontext(e)},r}();ei.default=pu;var fu=$&&$.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bn,"__esModule",{value:!0});bn.Parser=void 0;var hu=fu(ei),mt=new Set(["input","option","optgroup","select","button","datalist","textarea"]),ie=new Set(["p"]),Ms={tr:new Set(["tr","th","td"]),th:new Set(["th"]),td:new Set(["thead","th","td"]),body:new Set(["head","link","script"]),li:new Set(["li"]),p:ie,h1:ie,h2:ie,h3:ie,h4:ie,h5:ie,h6:ie,select:mt,input:mt,output:mt,button:mt,datalist:mt,textarea:mt,option:new Set(["option"]),optgroup:new Set(["optgroup","option"]),dd:new Set(["dt","dd"]),dt:new Set(["dt","dd"]),address:ie,article:ie,aside:ie,blockquote:ie,details:ie,div:ie,dl:ie,fieldset:ie,figcaption:ie,figure:ie,footer:ie,form:ie,header:ie,hr:ie,main:ie,nav:ie,ol:ie,pre:ie,section:ie,table:ie,ul:ie,rt:new Set(["rt","rp"]),rp:new Set(["rt","rp"]),tbody:new Set(["thead","tbody"]),tfoot:new Set(["thead","tbody"])},gi=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),Vs=new Set(["math","svg"]),Fs=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),mu=/\s|\//,gu=function(){function r(e,t){t===void 0&&(t={});var n,i,s,o,l;this.startIndex=0,this.endIndex=null,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.options=t,this.cbs=e!=null?e:{},this.lowerCaseTagNames=(n=t.lowerCaseTags)!==null&&n!==void 0?n:!t.xmlMode,this.lowerCaseAttributeNames=(i=t.lowerCaseAttributeNames)!==null&&i!==void 0?i:!t.xmlMode,this.tokenizer=new((s=t.Tokenizer)!==null&&s!==void 0?s:hu.default)(this.options,this),(l=(o=this.cbs).onparserinit)===null||l===void 0||l.call(o,this)}return r.prototype.updatePosition=function(e){this.endIndex===null?this.tokenizer.sectionStart<=e?this.startIndex=0:this.startIndex=this.tokenizer.sectionStart-e:this.startIndex=this.endIndex+1,this.endIndex=this.tokenizer.getAbsoluteIndex()},r.prototype.ontext=function(e){var t,n;this.updatePosition(1),this.endIndex--,(n=(t=this.cbs).ontext)===null||n===void 0||n.call(t,e)},r.prototype.onopentagname=function(e){var t,n;if(this.lowerCaseTagNames&&(e=e.toLowerCase()),this.tagname=e,!this.options.xmlMode&&Object.prototype.hasOwnProperty.call(Ms,e))for(var i=void 0;this.stack.length>0&&Ms[e].has(i=this.stack[this.stack.length-1]);)this.onclosetag(i);(this.options.xmlMode||!gi.has(e))&&(this.stack.push(e),Vs.has(e)?this.foreignContext.push(!0):Fs.has(e)&&this.foreignContext.push(!1)),(n=(t=this.cbs).onopentagname)===null||n===void 0||n.call(t,e),this.cbs.onopentag&&(this.attribs={})},r.prototype.onopentagend=function(){var e,t;this.updatePosition(1),this.attribs&&((t=(e=this.cbs).onopentag)===null||t===void 0||t.call(e,this.tagname,this.attribs),this.attribs=null),!this.options.xmlMode&&this.cbs.onclosetag&&gi.has(this.tagname)&&this.cbs.onclosetag(this.tagname),this.tagname=""},r.prototype.onclosetag=function(e){if(this.updatePosition(1),this.lowerCaseTagNames&&(e=e.toLowerCase()),(Vs.has(e)||Fs.has(e))&&this.foreignContext.pop(),this.stack.length&&(this.options.xmlMode||!gi.has(e))){var t=this.stack.lastIndexOf(e);if(t!==-1)if(this.cbs.onclosetag)for(t=this.stack.length-t;t--;)this.cbs.onclosetag(this.stack.pop());else this.stack.length=t;else e==="p"&&!this.options.xmlMode&&(this.onopentagname(e),this.closeCurrentTag())}else!this.options.xmlMode&&(e==="br"||e==="p")&&(this.onopentagname(e),this.closeCurrentTag())},r.prototype.onselfclosingtag=function(){this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?this.closeCurrentTag():this.onopentagend()},r.prototype.closeCurrentTag=function(){var e,t,n=this.tagname;this.onopentagend(),this.stack[this.stack.length-1]===n&&((t=(e=this.cbs).onclosetag)===null||t===void 0||t.call(e,n),this.stack.pop())},r.prototype.onattribname=function(e){this.lowerCaseAttributeNames&&(e=e.toLowerCase()),this.attribname=e},r.prototype.onattribdata=function(e){this.attribvalue+=e},r.prototype.onattribend=function(e){var t,n;(n=(t=this.cbs).onattribute)===null||n===void 0||n.call(t,this.attribname,this.attribvalue,e),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribname="",this.attribvalue=""},r.prototype.getInstructionName=function(e){var t=e.search(mu),n=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n},r.prototype.ondeclaration=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("!"+t,"!"+e)}},r.prototype.onprocessinginstruction=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("?"+t,"?"+e)}},r.prototype.oncomment=function(e){var t,n,i,s;this.updatePosition(4),(n=(t=this.cbs).oncomment)===null||n===void 0||n.call(t,e),(s=(i=this.cbs).oncommentend)===null||s===void 0||s.call(i)},r.prototype.oncdata=function(e){var t,n,i,s,o,l;this.updatePosition(1),this.options.xmlMode||this.options.recognizeCDATA?((n=(t=this.cbs).oncdatastart)===null||n===void 0||n.call(t),(s=(i=this.cbs).ontext)===null||s===void 0||s.call(i,e),(l=(o=this.cbs).oncdataend)===null||l===void 0||l.call(o)):this.oncomment("[CDATA["+e+"]]")},r.prototype.onerror=function(e){var t,n;(n=(t=this.cbs).onerror)===null||n===void 0||n.call(t,e)},r.prototype.onend=function(){var e,t;if(this.cbs.onclosetag)for(var n=this.stack.length;n>0;this.cbs.onclosetag(this.stack[--n]));(t=(e=this.cbs).onend)===null||t===void 0||t.call(e)},r.prototype.reset=function(){var e,t,n,i;(t=(e=this.cbs).onreset)===null||t===void 0||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack=[],(i=(n=this.cbs).onparserinit)===null||i===void 0||i.call(n,this)},r.prototype.parseComplete=function(e){this.reset(),this.end(e)},r.prototype.write=function(e){this.tokenizer.write(e)},r.prototype.end=function(e){this.tokenizer.end(e)},r.prototype.pause=function(){this.tokenizer.pause()},r.prototype.resume=function(){this.tokenizer.resume()},r.prototype.parseChunk=function(e){this.write(e)},r.prototype.done=function(e){this.end(e)},r}();bn.Parser=gu;var We={},kt={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Doctype=r.CDATA=r.Tag=r.Style=r.Script=r.Comment=r.Directive=r.Text=r.Root=r.isTag=r.ElementType=void 0;var e;(function(n){n.Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype"})(e=r.ElementType||(r.ElementType={}));function t(n){return n.type===e.Tag||n.type===e.Script||n.type===e.Style}r.isTag=t,r.Root=e.Root,r.Text=e.Text,r.Directive=e.Directive,r.Comment=e.Comment,r.Script=e.Script,r.Style=e.Style,r.Tag=e.Tag,r.CDATA=e.CDATA,r.Doctype=e.Doctype})(kt);var Q={},pt=$&&$.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ut=$&&$.__assign||function(){return Ut=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ut.apply(this,arguments)};Object.defineProperty(Q,"__esModule",{value:!0});Q.cloneNode=Q.hasChildren=Q.isDocument=Q.isDirective=Q.isComment=Q.isText=Q.isCDATA=Q.isTag=Q.Element=Q.Document=Q.NodeWithChildren=Q.ProcessingInstruction=Q.Comment=Q.Text=Q.DataNode=Q.Node=void 0;var ue=kt,yu=new Map([[ue.ElementType.Tag,1],[ue.ElementType.Script,1],[ue.ElementType.Style,1],[ue.ElementType.Directive,1],[ue.ElementType.Text,3],[ue.ElementType.CDATA,4],[ue.ElementType.Comment,8],[ue.ElementType.Root,9]]),us=function(){function r(e){this.type=e,this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(r.prototype,"nodeType",{get:function(){var e;return(e=yu.get(this.type))!==null&&e!==void 0?e:1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),r.prototype.cloneNode=function(e){return e===void 0&&(e=!1),ps(this,e)},r}();Q.Node=us;var ni=function(r){pt(e,r);function e(t,n){var i=r.call(this,t)||this;return i.data=n,i}return Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.data},set:function(t){this.data=t},enumerable:!1,configurable:!0}),e}(us);Q.DataNode=ni;var lo=function(r){pt(e,r);function e(t){return r.call(this,ue.ElementType.Text,t)||this}return e}(ni);Q.Text=lo;var co=function(r){pt(e,r);function e(t){return r.call(this,ue.ElementType.Comment,t)||this}return e}(ni);Q.Comment=co;var uo=function(r){pt(e,r);function e(t,n){var i=r.call(this,ue.ElementType.Directive,n)||this;return i.name=t,i}return e}(ni);Q.ProcessingInstruction=uo;var ri=function(r){pt(e,r);function e(t,n){var i=r.call(this,t)||this;return i.children=n,i}return Object.defineProperty(e.prototype,"firstChild",{get:function(){var t;return(t=this.children[0])!==null&&t!==void 0?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.children},set:function(t){this.children=t},enumerable:!1,configurable:!0}),e}(us);Q.NodeWithChildren=ri;var po=function(r){pt(e,r);function e(t){return r.call(this,ue.ElementType.Root,t)||this}return e}(ri);Q.Document=po;var fo=function(r){pt(e,r);function e(t,n,i,s){i===void 0&&(i=[]),s===void 0&&(s=t==="script"?ue.ElementType.Script:t==="style"?ue.ElementType.Style:ue.ElementType.Tag);var o=r.call(this,s,i)||this;return o.name=t,o.attribs=n,o}return Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name},set:function(t){this.name=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){var t=this;return Object.keys(this.attribs).map(function(n){var i,s;return{name:n,value:t.attribs[n],namespace:(i=t["x-attribsNamespace"])===null||i===void 0?void 0:i[n],prefix:(s=t["x-attribsPrefix"])===null||s===void 0?void 0:s[n]}})},enumerable:!1,configurable:!0}),e}(ri);Q.Element=fo;function ho(r){return(0,ue.isTag)(r)}Q.isTag=ho;function mo(r){return r.type===ue.ElementType.CDATA}Q.isCDATA=mo;function go(r){return r.type===ue.ElementType.Text}Q.isText=go;function yo(r){return r.type===ue.ElementType.Comment}Q.isComment=yo;function So(r){return r.type===ue.ElementType.Directive}Q.isDirective=So;function bo(r){return r.type===ue.ElementType.Root}Q.isDocument=bo;function Su(r){return Object.prototype.hasOwnProperty.call(r,"children")}Q.hasChildren=Su;function ps(r,e){e===void 0&&(e=!1);var t;if(go(r))t=new lo(r.data);else if(yo(r))t=new co(r.data);else if(ho(r)){var n=e?yi(r.children):[],i=new fo(r.name,Ut({},r.attribs),n);n.forEach(function(d){return d.parent=i}),r.namespace!=null&&(i.namespace=r.namespace),r["x-attribsNamespace"]&&(i["x-attribsNamespace"]=Ut({},r["x-attribsNamespace"])),r["x-attribsPrefix"]&&(i["x-attribsPrefix"]=Ut({},r["x-attribsPrefix"])),t=i}else if(mo(r)){var n=e?yi(r.children):[],s=new ri(ue.ElementType.CDATA,n);n.forEach(function(c){return c.parent=s}),t=s}else if(bo(r)){var n=e?yi(r.children):[],o=new po(n);n.forEach(function(c){return c.parent=o}),r["x-mode"]&&(o["x-mode"]=r["x-mode"]),t=o}else if(So(r)){var l=new uo(r.name,r.data);r["x-name"]!=null&&(l["x-name"]=r["x-name"],l["x-publicId"]=r["x-publicId"],l["x-systemId"]=r["x-systemId"]),t=l}else throw new Error("Not implemented yet: ".concat(r.type));return t.startIndex=r.startIndex,t.endIndex=r.endIndex,r.sourceCodeLocation!=null&&(t.sourceCodeLocation=r.sourceCodeLocation),t}Q.cloneNode=ps;function yi(r){for(var e=r.map(function(n){return ps(n,!0)}),t=1;t<e.length;t++)e[t].prev=e[t-1],e[t-1].next=e[t];return e}(function(r){var e=$&&$.__createBinding||(Object.create?function(d,c,y,m){m===void 0&&(m=y);var f=Object.getOwnPropertyDescriptor(c,y);(!f||("get"in f?!c.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return c[y]}}),Object.defineProperty(d,m,f)}:function(d,c,y,m){m===void 0&&(m=y),d[m]=c[y]}),t=$&&$.__exportStar||function(d,c){for(var y in d)y!=="default"&&!Object.prototype.hasOwnProperty.call(c,y)&&e(c,d,y)};Object.defineProperty(r,"__esModule",{value:!0}),r.DomHandler=void 0;var n=kt,i=Q;t(Q,r);var s=/\s+/g,o={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1,xmlMode:!1},l=function(){function d(c,y,m){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof y=="function"&&(m=y,y=o),typeof c=="object"&&(y=c,c=void 0),this.callback=c!=null?c:null,this.options=y!=null?y:o,this.elementCB=m!=null?m:null}return d.prototype.onparserinit=function(c){this.parser=c},d.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},d.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},d.prototype.onerror=function(c){this.handleCallback(c)},d.prototype.onclosetag=function(){this.lastNode=null;var c=this.tagStack.pop();this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(c)},d.prototype.onopentag=function(c,y){var m=this.options.xmlMode?n.ElementType.Tag:void 0,f=new i.Element(c,y,void 0,m);this.addNode(f),this.tagStack.push(f)},d.prototype.ontext=function(c){var y=this.options.normalizeWhitespace,m=this.lastNode;if(m&&m.type===n.ElementType.Text)y?m.data=(m.data+c).replace(s," "):m.data+=c,this.options.withEndIndices&&(m.endIndex=this.parser.endIndex);else{y&&(c=c.replace(s," "));var f=new i.Text(c);this.addNode(f),this.lastNode=f}},d.prototype.oncomment=function(c){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=c;return}var y=new i.Comment(c);this.addNode(y),this.lastNode=y},d.prototype.oncommentend=function(){this.lastNode=null},d.prototype.oncdatastart=function(){var c=new i.Text(""),y=new i.NodeWithChildren(n.ElementType.CDATA,[c]);this.addNode(y),c.parent=y,this.lastNode=c},d.prototype.oncdataend=function(){this.lastNode=null},d.prototype.onprocessinginstruction=function(c,y){var m=new i.ProcessingInstruction(c,y);this.addNode(m)},d.prototype.handleCallback=function(c){if(typeof this.callback=="function")this.callback(c,this.dom);else if(c)throw c},d.prototype.addNode=function(c){var y=this.tagStack[this.tagStack.length-1],m=y.children[y.children.length-1];this.options.withStartIndices&&(c.startIndex=this.parser.startIndex),this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),y.children.push(c),m&&(c.prev=m,m.next=c),c.parent=y,this.lastNode=null},d}();r.DomHandler=l,r.default=l})(We);var ct={},fs={},Re={},hs={},Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.attributeNames=Tt.elementNames=void 0;Tt.elementNames=new Map([["altglyph","altGlyph"],["altglyphdef","altGlyphDef"],["altglyphitem","altGlyphItem"],["animatecolor","animateColor"],["animatemotion","animateMotion"],["animatetransform","animateTransform"],["clippath","clipPath"],["feblend","feBlend"],["fecolormatrix","feColorMatrix"],["fecomponenttransfer","feComponentTransfer"],["fecomposite","feComposite"],["feconvolvematrix","feConvolveMatrix"],["fediffuselighting","feDiffuseLighting"],["fedisplacementmap","feDisplacementMap"],["fedistantlight","feDistantLight"],["fedropshadow","feDropShadow"],["feflood","feFlood"],["fefunca","feFuncA"],["fefuncb","feFuncB"],["fefuncg","feFuncG"],["fefuncr","feFuncR"],["fegaussianblur","feGaussianBlur"],["feimage","feImage"],["femerge","feMerge"],["femergenode","feMergeNode"],["femorphology","feMorphology"],["feoffset","feOffset"],["fepointlight","fePointLight"],["fespecularlighting","feSpecularLighting"],["fespotlight","feSpotLight"],["fetile","feTile"],["feturbulence","feTurbulence"],["foreignobject","foreignObject"],["glyphref","glyphRef"],["lineargradient","linearGradient"],["radialgradient","radialGradient"],["textpath","textPath"]]);Tt.attributeNames=new Map([["definitionurl","definitionURL"],["attributename","attributeName"],["attributetype","attributeType"],["basefrequency","baseFrequency"],["baseprofile","baseProfile"],["calcmode","calcMode"],["clippathunits","clipPathUnits"],["diffuseconstant","diffuseConstant"],["edgemode","edgeMode"],["filterunits","filterUnits"],["glyphref","glyphRef"],["gradienttransform","gradientTransform"],["gradientunits","gradientUnits"],["kernelmatrix","kernelMatrix"],["kernelunitlength","kernelUnitLength"],["keypoints","keyPoints"],["keysplines","keySplines"],["keytimes","keyTimes"],["lengthadjust","lengthAdjust"],["limitingconeangle","limitingConeAngle"],["markerheight","markerHeight"],["markerunits","markerUnits"],["markerwidth","markerWidth"],["maskcontentunits","maskContentUnits"],["maskunits","maskUnits"],["numoctaves","numOctaves"],["pathlength","pathLength"],["patterncontentunits","patternContentUnits"],["patterntransform","patternTransform"],["patternunits","patternUnits"],["pointsatx","pointsAtX"],["pointsaty","pointsAtY"],["pointsatz","pointsAtZ"],["preservealpha","preserveAlpha"],["preserveaspectratio","preserveAspectRatio"],["primitiveunits","primitiveUnits"],["refx","refX"],["refy","refY"],["repeatcount","repeatCount"],["repeatdur","repeatDur"],["requiredextensions","requiredExtensions"],["requiredfeatures","requiredFeatures"],["specularconstant","specularConstant"],["specularexponent","specularExponent"],["spreadmethod","spreadMethod"],["startoffset","startOffset"],["stddeviation","stdDeviation"],["stitchtiles","stitchTiles"],["surfacescale","surfaceScale"],["systemlanguage","systemLanguage"],["tablevalues","tableValues"],["targetx","targetX"],["targety","targetY"],["textlength","textLength"],["viewbox","viewBox"],["viewtarget","viewTarget"],["xchannelselector","xChannelSelector"],["ychannelselector","yChannelSelector"],["zoomandpan","zoomAndPan"]]);var bt=$&&$.__assign||function(){return bt=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},bt.apply(this,arguments)},bu=$&&$.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),wu=$&&$.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Cu=$&&$.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&bu(e,r,t);return wu(e,r),e};Object.defineProperty(hs,"__esModule",{value:!0});var Be=Cu(kt),wo=Vc,Co=Tt,_u=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function vu(r,e){if(!!r)return Object.keys(r).map(function(t){var n,i,s=(n=r[t])!==null&&n!==void 0?n:"";return e.xmlMode==="foreign"&&(t=(i=Co.attributeNames.get(t))!==null&&i!==void 0?i:t),!e.emptyAttrs&&!e.xmlMode&&s===""?t:t+'="'+(e.decodeEntities!==!1?wo.encodeXML(s):s.replace(/"/g,"&quot;"))+'"'}).join(" ")}var Bs=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function ms(r,e){e===void 0&&(e={});for(var t=("length"in r)?r:[r],n="",i=0;i<t.length;i++)n+=Tu(t[i],e);return n}hs.default=ms;function Tu(r,e){switch(r.type){case Be.Root:return ms(r.children,e);case Be.Directive:case Be.Doctype:return Iu(r);case Be.Comment:return qu(r);case Be.CDATA:return Ou(r);case Be.Script:case Be.Style:case Be.Tag:return Ru(r,e);case Be.Text:return Eu(r,e)}}var Au=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),xu=new Set(["svg","math"]);function Ru(r,e){var t;e.xmlMode==="foreign"&&(r.name=(t=Co.elementNames.get(r.name))!==null&&t!==void 0?t:r.name,r.parent&&Au.has(r.parent.name)&&(e=bt(bt({},e),{xmlMode:!1}))),!e.xmlMode&&xu.has(r.name)&&(e=bt(bt({},e),{xmlMode:"foreign"}));var n="<"+r.name,i=vu(r.attribs,e);return i&&(n+=" "+i),r.children.length===0&&(e.xmlMode?e.selfClosingTags!==!1:e.selfClosingTags&&Bs.has(r.name))?(e.xmlMode||(n+=" "),n+="/>"):(n+=">",r.children.length>0&&(n+=ms(r.children,e)),(e.xmlMode||!Bs.has(r.name))&&(n+="</"+r.name+">")),n}function Iu(r){return"<"+r.data+">"}function Eu(r,e){var t=r.data||"";return e.decodeEntities!==!1&&!(!e.xmlMode&&r.parent&&_u.has(r.parent.name))&&(t=wo.encodeXML(t)),t}function Ou(r){return"<![CDATA["+r.children[0].data+"]]>"}function qu(r){return"<!--"+r.data+"-->"}var Nu=$&&$.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Re,"__esModule",{value:!0});Re.innerText=Re.textContent=Re.getText=Re.getInnerHTML=Re.getOuterHTML=void 0;var Pe=We,ku=Nu(hs),Lu=kt;function _o(r,e){return(0,ku.default)(r,e)}Re.getOuterHTML=_o;function Du(r,e){return(0,Pe.hasChildren)(r)?r.children.map(function(t){return _o(t,e)}).join(""):""}Re.getInnerHTML=Du;function Mn(r){return Array.isArray(r)?r.map(Mn).join(""):(0,Pe.isTag)(r)?r.name==="br"?`
`:Mn(r.children):(0,Pe.isCDATA)(r)?Mn(r.children):(0,Pe.isText)(r)?r.data:""}Re.getText=Mn;function Ei(r){return Array.isArray(r)?r.map(Ei).join(""):(0,Pe.hasChildren)(r)&&!(0,Pe.isComment)(r)?Ei(r.children):(0,Pe.isText)(r)?r.data:""}Re.textContent=Ei;function Oi(r){return Array.isArray(r)?r.map(Oi).join(""):(0,Pe.hasChildren)(r)&&(r.type===Lu.ElementType.Tag||(0,Pe.isCDATA)(r))?Oi(r.children):(0,Pe.isText)(r)?r.data:""}Re.innerText=Oi;var fe={};Object.defineProperty(fe,"__esModule",{value:!0});fe.prevElementSibling=fe.nextElementSibling=fe.getName=fe.hasAttrib=fe.getAttributeValue=fe.getSiblings=fe.getParent=fe.getChildren=void 0;var vo=We,Pu=[];function To(r){var e;return(e=r.children)!==null&&e!==void 0?e:Pu}fe.getChildren=To;function Ao(r){return r.parent||null}fe.getParent=Ao;function Mu(r){var e,t,n=Ao(r);if(n!=null)return To(n);for(var i=[r],s=r.prev,o=r.next;s!=null;)i.unshift(s),e=s,s=e.prev;for(;o!=null;)i.push(o),t=o,o=t.next;return i}fe.getSiblings=Mu;function Vu(r,e){var t;return(t=r.attribs)===null||t===void 0?void 0:t[e]}fe.getAttributeValue=Vu;function Fu(r,e){return r.attribs!=null&&Object.prototype.hasOwnProperty.call(r.attribs,e)&&r.attribs[e]!=null}fe.hasAttrib=Fu;function Bu(r){return r.name}fe.getName=Bu;function Uu(r){for(var e,t=r.next;t!==null&&!(0,vo.isTag)(t);)e=t,t=e.next;return t}fe.nextElementSibling=Uu;function Hu(r){for(var e,t=r.prev;t!==null&&!(0,vo.isTag)(t);)e=t,t=e.prev;return t}fe.prevElementSibling=Hu;var ve={};Object.defineProperty(ve,"__esModule",{value:!0});ve.prepend=ve.prependChild=ve.append=ve.appendChild=ve.replaceElement=ve.removeElement=void 0;function wn(r){if(r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),r.parent){var e=r.parent.children;e.splice(e.lastIndexOf(r),1)}}ve.removeElement=wn;function $u(r,e){var t=e.prev=r.prev;t&&(t.next=e);var n=e.next=r.next;n&&(n.prev=e);var i=e.parent=r.parent;if(i){var s=i.children;s[s.lastIndexOf(r)]=e}}ve.replaceElement=$u;function ju(r,e){if(wn(e),e.next=null,e.parent=r,r.children.push(e)>1){var t=r.children[r.children.length-2];t.next=e,e.prev=t}else e.prev=null}ve.appendChild=ju;function Wu(r,e){wn(e);var t=r.parent,n=r.next;if(e.next=n,e.prev=r,r.next=e,e.parent=t,n){if(n.prev=e,t){var i=t.children;i.splice(i.lastIndexOf(n),0,e)}}else t&&t.children.push(e)}ve.append=Wu;function zu(r,e){if(wn(e),e.parent=r,e.prev=null,r.children.unshift(e)!==1){var t=r.children[1];t.prev=e,e.next=t}else e.next=null}ve.prependChild=zu;function Yu(r,e){wn(e);var t=r.parent;if(t){var n=t.children;n.splice(n.indexOf(r),0,e)}r.prev&&(r.prev.next=e),e.parent=t,e.prev=r.prev,e.next=r,r.prev=e}ve.prepend=Yu;var Se={};Object.defineProperty(Se,"__esModule",{value:!0});Se.findAll=Se.existsOne=Se.findOne=Se.findOneChild=Se.find=Se.filter=void 0;var sn=We;function Qu(r,e,t,n){return t===void 0&&(t=!0),n===void 0&&(n=1/0),Array.isArray(e)||(e=[e]),gs(r,e,t,n)}Se.filter=Qu;function gs(r,e,t,n){for(var i=[],s=0,o=e;s<o.length;s++){var l=o[s];if(r(l)&&(i.push(l),--n<=0))break;if(t&&(0,sn.hasChildren)(l)&&l.children.length>0){var d=gs(r,l.children,t,n);if(i.push.apply(i,d),n-=d.length,n<=0)break}}return i}Se.find=gs;function Ku(r,e){return e.find(r)}Se.findOneChild=Ku;function xo(r,e,t){t===void 0&&(t=!0);for(var n=null,i=0;i<e.length&&!n;i++){var s=e[i];if((0,sn.isTag)(s))r(s)?n=s:t&&s.children.length>0&&(n=xo(r,s.children));else continue}return n}Se.findOne=xo;function Ro(r,e){return e.some(function(t){return(0,sn.isTag)(t)&&(r(t)||t.children.length>0&&Ro(r,t.children))})}Se.existsOne=Ro;function Gu(r,e){for(var t,n=[],i=e.filter(sn.isTag),s;s=i.shift();){var o=(t=s.children)===null||t===void 0?void 0:t.filter(sn.isTag);o&&o.length>0&&i.unshift.apply(i,o),r(s)&&n.push(s)}return n}Se.findAll=Gu;var Ie={};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.getElementsByTagType=Ie.getElementsByTagName=Ie.getElementById=Ie.getElements=Ie.testElement=void 0;var nt=We,ii=Se,Br={tag_name:function(r){return typeof r=="function"?function(e){return(0,nt.isTag)(e)&&r(e.name)}:r==="*"?nt.isTag:function(e){return(0,nt.isTag)(e)&&e.name===r}},tag_type:function(r){return typeof r=="function"?function(e){return r(e.type)}:function(e){return e.type===r}},tag_contains:function(r){return typeof r=="function"?function(e){return(0,nt.isText)(e)&&r(e.data)}:function(e){return(0,nt.isText)(e)&&e.data===r}}};function Io(r,e){return typeof e=="function"?function(t){return(0,nt.isTag)(t)&&e(t.attribs[r])}:function(t){return(0,nt.isTag)(t)&&t.attribs[r]===e}}function Xu(r,e){return function(t){return r(t)||e(t)}}function Eo(r){var e=Object.keys(r).map(function(t){var n=r[t];return Object.prototype.hasOwnProperty.call(Br,t)?Br[t](n):Io(t,n)});return e.length===0?null:e.reduce(Xu)}function Ju(r,e){var t=Eo(r);return t?t(e):!0}Ie.testElement=Ju;function Zu(r,e,t,n){n===void 0&&(n=1/0);var i=Eo(r);return i?(0,ii.filter)(i,e,t,n):[]}Ie.getElements=Zu;function ep(r,e,t){return t===void 0&&(t=!0),Array.isArray(e)||(e=[e]),(0,ii.findOne)(Io("id",r),e,t)}Ie.getElementById=ep;function tp(r,e,t,n){return t===void 0&&(t=!0),n===void 0&&(n=1/0),(0,ii.filter)(Br.tag_name(r),e,t,n)}Ie.getElementsByTagName=tp;function np(r,e,t,n){return t===void 0&&(t=!0),n===void 0&&(n=1/0),(0,ii.filter)(Br.tag_type(r),e,t,n)}Ie.getElementsByTagType=np;var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.uniqueSort=Ke.compareDocumentPosition=Ke.removeSubsets=void 0;var Us=We;function rp(r){for(var e=r.length;--e>=0;){var t=r[e];if(e>0&&r.lastIndexOf(t,e-1)>=0){r.splice(e,1);continue}for(var n=t.parent;n;n=n.parent)if(r.includes(n)){r.splice(e,1);break}}return r}Ke.removeSubsets=rp;function Oo(r,e){var t=[],n=[];if(r===e)return 0;for(var i=(0,Us.hasChildren)(r)?r:r.parent;i;)t.unshift(i),i=i.parent;for(i=(0,Us.hasChildren)(e)?e:e.parent;i;)n.unshift(i),i=i.parent;for(var s=Math.min(t.length,n.length),o=0;o<s&&t[o]===n[o];)o++;if(o===0)return 1;var l=t[o-1],d=l.children,c=t[o],y=n[o];return d.indexOf(c)>d.indexOf(y)?l===e?20:4:l===r?10:2}Ke.compareDocumentPosition=Oo;function ip(r){return r=r.filter(function(e,t,n){return!n.includes(e,t+1)}),r.sort(function(e,t){var n=Oo(e,t);return n&2?-1:n&4?1:0}),r}Ke.uniqueSort=ip;var si={};Object.defineProperty(si,"__esModule",{value:!0});si.getFeed=void 0;var sp=Re,Cn=Ie;function ap(r){var e=Ur(up,r);return e?e.name==="feed"?op(e):lp(e):null}si.getFeed=ap;function op(r){var e,t=r.children,n={type:"atom",items:(0,Cn.getElementsByTagName)("entry",t).map(function(o){var l,d=o.children,c={media:qo(d)};Ce(c,"id","id",d),Ce(c,"title","title",d);var y=(l=Ur("link",d))===null||l===void 0?void 0:l.attribs.href;y&&(c.link=y);var m=rt("summary",d)||rt("content",d);m&&(c.description=m);var f=rt("updated",d);return f&&(c.pubDate=new Date(f)),c})};Ce(n,"id","id",t),Ce(n,"title","title",t);var i=(e=Ur("link",t))===null||e===void 0?void 0:e.attribs.href;i&&(n.link=i),Ce(n,"description","subtitle",t);var s=rt("updated",t);return s&&(n.updated=new Date(s)),Ce(n,"author","email",t,!0),n}function lp(r){var e,t,n=(t=(e=Ur("channel",r.children))===null||e===void 0?void 0:e.children)!==null&&t!==void 0?t:[],i={type:r.name.substr(0,3),id:"",items:(0,Cn.getElementsByTagName)("item",r.children).map(function(o){var l=o.children,d={media:qo(l)};Ce(d,"id","guid",l),Ce(d,"title","title",l),Ce(d,"link","link",l),Ce(d,"description","description",l);var c=rt("pubDate",l);return c&&(d.pubDate=new Date(c)),d})};Ce(i,"title","title",n),Ce(i,"link","link",n),Ce(i,"description","description",n);var s=rt("lastBuildDate",n);return s&&(i.updated=new Date(s)),Ce(i,"author","managingEditor",n,!0),i}var cp=["url","type","lang"],dp=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function qo(r){return(0,Cn.getElementsByTagName)("media:content",r).map(function(e){for(var t=e.attribs,n={medium:t.medium,isDefault:!!t.isDefault},i=0,s=cp;i<s.length;i++){var o=s[i];t[o]&&(n[o]=t[o])}for(var l=0,d=dp;l<d.length;l++){var o=d[l];t[o]&&(n[o]=parseInt(t[o],10))}return t.expression&&(n.expression=t.expression),n})}function Ur(r,e){return(0,Cn.getElementsByTagName)(r,e,!0,1)[0]}function rt(r,e,t){return t===void 0&&(t=!1),(0,sp.textContent)((0,Cn.getElementsByTagName)(r,e,t,1)).trim()}function Ce(r,e,t,n,i){i===void 0&&(i=!1);var s=rt(t,n,i);s&&(r[e]=s)}function up(r){return r==="rss"||r==="feed"||r==="rdf:RDF"}(function(r){var e=$&&$.__createBinding||(Object.create?function(i,s,o,l){l===void 0&&(l=o),Object.defineProperty(i,l,{enumerable:!0,get:function(){return s[o]}})}:function(i,s,o,l){l===void 0&&(l=o),i[l]=s[o]}),t=$&&$.__exportStar||function(i,s){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,i,o)};Object.defineProperty(r,"__esModule",{value:!0}),r.hasChildren=r.isDocument=r.isComment=r.isText=r.isCDATA=r.isTag=void 0,t(Re,r),t(fe,r),t(ve,r),t(Se,r),t(Ie,r),t(Ke,r),t(si,r);var n=We;Object.defineProperty(r,"isTag",{enumerable:!0,get:function(){return n.isTag}}),Object.defineProperty(r,"isCDATA",{enumerable:!0,get:function(){return n.isCDATA}}),Object.defineProperty(r,"isText",{enumerable:!0,get:function(){return n.isText}}),Object.defineProperty(r,"isComment",{enumerable:!0,get:function(){return n.isComment}}),Object.defineProperty(r,"isDocument",{enumerable:!0,get:function(){return n.isDocument}}),Object.defineProperty(r,"hasChildren",{enumerable:!0,get:function(){return n.hasChildren}})})(fs);var pp=$&&$.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fp=$&&$.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),hp=$&&$.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),mp=$&&$.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&fp(e,r,t);return hp(e,r),e},gp=$&&$.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ct,"__esModule",{value:!0});ct.parseFeed=ct.FeedHandler=void 0;var yp=gp(We),Hr=mp(fs),Sp=bn,Hs;(function(r){r[r.image=0]="image",r[r.audio=1]="audio",r[r.video=2]="video",r[r.document=3]="document",r[r.executable=4]="executable"})(Hs||(Hs={}));var $s;(function(r){r[r.sample=0]="sample",r[r.full=1]="full",r[r.nonstop=2]="nonstop"})($s||($s={}));var No=function(r){pp(e,r);function e(t,n){var i=this;return typeof t=="object"&&(t=void 0,n=t),i=r.call(this,t,n)||this,i}return e.prototype.onend=function(){var t,n,i=Rn(bp,this.dom);if(!i){this.handleCallback(new Error("couldn't find root of feed"));return}var s={};if(i.name==="feed"){var o=i.children;s.type="atom",be(s,"id","id",o),be(s,"title","title",o);var l=Ws("href",Rn("link",o));l&&(s.link=l),be(s,"description","subtitle",o);var d=tt("updated",o);d&&(s.updated=new Date(d)),be(s,"author","email",o,!0),s.items=qi("entry",o).map(function(c){var y={},m=c.children;be(y,"id","id",m),be(y,"title","title",m);var f=Ws("href",Rn("link",m));f&&(y.link=f);var b=tt("summary",m)||tt("content",m);b&&(y.description=b);var h=tt("updated",m);return h&&(y.pubDate=new Date(h)),y.media=js(m),y})}else{var o=(n=(t=Rn("channel",i.children))===null||t===void 0?void 0:t.children)!==null&&n!==void 0?n:[];s.type=i.name.substr(0,3),s.id="",be(s,"title","title",o),be(s,"link","link",o),be(s,"description","description",o);var d=tt("lastBuildDate",o);d&&(s.updated=new Date(d)),be(s,"author","managingEditor",o,!0),s.items=qi("item",i.children).map(function(m){var f={},b=m.children;be(f,"id","guid",b),be(f,"title","title",b),be(f,"link","link",b),be(f,"description","description",b);var h=tt("pubDate",b);return h&&(f.pubDate=new Date(h)),f.media=js(b),f})}this.feed=s,this.handleCallback(null)},e}(yp.default);ct.FeedHandler=No;function js(r){return qi("media:content",r).map(function(e){var t={medium:e.attribs.medium,isDefault:!!e.attribs.isDefault};return e.attribs.url&&(t.url=e.attribs.url),e.attribs.fileSize&&(t.fileSize=parseInt(e.attribs.fileSize,10)),e.attribs.type&&(t.type=e.attribs.type),e.attribs.expression&&(t.expression=e.attribs.expression),e.attribs.bitrate&&(t.bitrate=parseInt(e.attribs.bitrate,10)),e.attribs.framerate&&(t.framerate=parseInt(e.attribs.framerate,10)),e.attribs.samplingrate&&(t.samplingrate=parseInt(e.attribs.samplingrate,10)),e.attribs.channels&&(t.channels=parseInt(e.attribs.channels,10)),e.attribs.duration&&(t.duration=parseInt(e.attribs.duration,10)),e.attribs.height&&(t.height=parseInt(e.attribs.height,10)),e.attribs.width&&(t.width=parseInt(e.attribs.width,10)),e.attribs.lang&&(t.lang=e.attribs.lang),t})}function qi(r,e){return Hr.getElementsByTagName(r,e,!0)}function Rn(r,e){return Hr.getElementsByTagName(r,e,!0,1)[0]}function tt(r,e,t){return t===void 0&&(t=!1),Hr.getText(Hr.getElementsByTagName(r,e,t,1)).trim()}function Ws(r,e){if(!e)return null;var t=e.attribs;return t[r]}function be(r,e,t,n,i){i===void 0&&(i=!1);var s=tt(t,n,i);s&&(r[e]=s)}function bp(r){return r==="rss"||r==="feed"||r==="rdf:RDF"}function wp(r,e){e===void 0&&(e={xmlMode:!0});var t=new No(e);return new Sp.Parser(t,e).end(r),t.feed}ct.parseFeed=wp;(function(r){var e=$&&$.__createBinding||(Object.create?function(h,p,g,w){w===void 0&&(w=g),Object.defineProperty(h,w,{enumerable:!0,get:function(){return p[g]}})}:function(h,p,g,w){w===void 0&&(w=g),h[w]=p[g]}),t=$&&$.__setModuleDefault||(Object.create?function(h,p){Object.defineProperty(h,"default",{enumerable:!0,value:p})}:function(h,p){h.default=p}),n=$&&$.__importStar||function(h){if(h&&h.__esModule)return h;var p={};if(h!=null)for(var g in h)g!=="default"&&Object.prototype.hasOwnProperty.call(h,g)&&e(p,h,g);return t(p,h),p},i=$&&$.__exportStar||function(h,p){for(var g in h)g!=="default"&&!Object.prototype.hasOwnProperty.call(p,g)&&e(p,h,g)},s=$&&$.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(r,"__esModule",{value:!0}),r.RssHandler=r.DefaultHandler=r.DomUtils=r.ElementType=r.Tokenizer=r.createDomStream=r.parseDOM=r.parseDocument=r.DomHandler=r.Parser=void 0;var o=bn;Object.defineProperty(r,"Parser",{enumerable:!0,get:function(){return o.Parser}});var l=We;Object.defineProperty(r,"DomHandler",{enumerable:!0,get:function(){return l.DomHandler}}),Object.defineProperty(r,"DefaultHandler",{enumerable:!0,get:function(){return l.DomHandler}});function d(h,p){var g=new l.DomHandler(void 0,p);return new o.Parser(g,p).end(h),g.root}r.parseDocument=d;function c(h,p){return d(h,p).children}r.parseDOM=c;function y(h,p,g){var w=new l.DomHandler(h,p,g);return new o.Parser(w,p)}r.createDomStream=y;var m=ei;Object.defineProperty(r,"Tokenizer",{enumerable:!0,get:function(){return s(m).default}});var f=n(kt);r.ElementType=f,i(ct,r),r.DomUtils=n(fs);var b=ct;Object.defineProperty(r,"RssHandler",{enumerable:!0,get:function(){return b.FeedHandler}})})(oo);var Cp=r=>{if(typeof r!="string")throw new TypeError("Expected a string");return r.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},ys={};Object.defineProperty(ys,"__esModule",{value:!0});/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function zs(r){return Object.prototype.toString.call(r)==="[object Object]"}function _p(r){var e,t;return zs(r)===!1?!1:(e=r.constructor,e===void 0?!0:(t=e.prototype,!(zs(t)===!1||t.hasOwnProperty("isPrototypeOf")===!1)))}ys.isPlainObject=_p;var vp=function(e){return Tp(e)&&!Ap(e)};function Tp(r){return!!r&&typeof r=="object"}function Ap(r){var e=Object.prototype.toString.call(r);return e==="[object RegExp]"||e==="[object Date]"||Ip(r)}var xp=typeof Symbol=="function"&&Symbol.for,Rp=xp?Symbol.for("react.element"):60103;function Ip(r){return r.$$typeof===Rp}function Ep(r){return Array.isArray(r)?[]:{}}function an(r,e){return e.clone!==!1&&e.isMergeableObject(r)?At(Ep(r),r,e):r}function Op(r,e,t){return r.concat(e).map(function(n){return an(n,t)})}function qp(r,e){if(!e.customMerge)return At;var t=e.customMerge(r);return typeof t=="function"?t:At}function Np(r){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r).filter(function(e){return r.propertyIsEnumerable(e)}):[]}function Ys(r){return Object.keys(r).concat(Np(r))}function ko(r,e){try{return e in r}catch{return!1}}function kp(r,e){return ko(r,e)&&!(Object.hasOwnProperty.call(r,e)&&Object.propertyIsEnumerable.call(r,e))}function Lp(r,e,t){var n={};return t.isMergeableObject(r)&&Ys(r).forEach(function(i){n[i]=an(r[i],t)}),Ys(e).forEach(function(i){kp(r,i)||(ko(r,i)&&t.isMergeableObject(e[i])?n[i]=qp(i,t)(r[i],e[i],t):n[i]=an(e[i],t))}),n}function At(r,e,t){t=t||{},t.arrayMerge=t.arrayMerge||Op,t.isMergeableObject=t.isMergeableObject||vp,t.cloneUnlessOtherwiseSpecified=an;var n=Array.isArray(e),i=Array.isArray(r),s=n===i;return s?n?t.arrayMerge(r,e,t):Lp(r,e,t):an(e,t)}At.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(n,i){return At(n,i,t)},{})};var Dp=At,Pp=Dp,Lo={exports:{}};(function(r){(function(e,t){r.exports?r.exports=t():e.parseSrcset=t()})($,function(){return function(e){function t(u){return u===" "||u==="	"||u===`
`||u==="\f"||u==="\r"}function n(u){var _,x=u.exec(e.substring(g));if(x)return _=x[0],g+=_.length,_}for(var i=e.length,s=/^[ \t\n\r\u000c]+/,o=/^[, \t\n\r\u000c]+/,l=/^[^ \t\n\r\u000c]+/,d=/[,]+$/,c=/^\d+$/,y=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,m,f,b,h,p,g=0,w=[];;){if(n(o),g>=i)return w;m=n(l),f=[],m.slice(-1)===","?(m=m.replace(d,""),S()):R()}function R(){for(n(s),b="",h="in descriptor";;){if(p=e.charAt(g),h==="in descriptor")if(t(p))b&&(f.push(b),b="",h="after descriptor");else if(p===","){g+=1,b&&f.push(b),S();return}else if(p==="(")b=b+p,h="in parens";else if(p===""){b&&f.push(b),S();return}else b=b+p;else if(h==="in parens")if(p===")")b=b+p,h="in descriptor";else if(p===""){f.push(b),S();return}else b=b+p;else if(h==="after descriptor"&&!t(p))if(p===""){S();return}else h="in descriptor",g-=1;g+=1}}function S(){var u=!1,_,x,A,O,E={},L,P,M,V,v;for(O=0;O<f.length;O++)L=f[O],P=L[L.length-1],M=L.substring(0,L.length-1),V=parseInt(M,10),v=parseFloat(M),c.test(M)&&P==="w"?((_||x)&&(u=!0),V===0?u=!0:_=V):y.test(M)&&P==="x"?((_||x||A)&&(u=!0),v<0?u=!0:x=v):c.test(M)&&P==="h"?((A||x)&&(u=!0),V===0?u=!0:A=V):u=!0;u?console&&console.log&&console.log("Invalid srcset descriptor found in '"+e+"' at '"+L+"'."):(E.url=m,_&&(E.w=_),x&&(E.d=x),A&&(E.h=A),w.push(E))}}})})(Lo);var Ss={exports:{}},le=String,Do=function(){return{isColorSupported:!1,reset:le,bold:le,dim:le,italic:le,underline:le,inverse:le,hidden:le,strikethrough:le,black:le,red:le,green:le,yellow:le,blue:le,magenta:le,cyan:le,white:le,gray:le,bgBlack:le,bgRed:le,bgGreen:le,bgYellow:le,bgBlue:le,bgMagenta:le,bgCyan:le,bgWhite:le}};Ss.exports=Do();Ss.exports.createColors=Do;let Qs=Ss.exports,Ks=dt;class on extends Error{constructor(e,t,n,i,s,o){super(e),this.name="CssSyntaxError",this.reason=e,s&&(this.file=s),i&&(this.source=i),o&&(this.plugin=o),typeof t<"u"&&typeof n<"u"&&(typeof t=="number"?(this.line=t,this.column=n):(this.line=t.line,this.column=t.column,this.endLine=n.line,this.endColumn=n.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,on)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=Qs.isColorSupported),Ks&&e&&(t=Ks(t));let n=t.split(/\r?\n/),i=Math.max(this.line-3,0),s=Math.min(this.line+2,n.length),o=String(s).length,l,d;if(e){let{bold:c,red:y,gray:m}=Qs.createColors(!0);l=f=>c(y(f)),d=f=>m(f)}else l=d=c=>c;return n.slice(i,s).map((c,y)=>{let m=i+1+y,f=" "+(" "+m).slice(-o)+" | ";if(m===this.line){let b=d(f.replace(/\d/g," "))+c.slice(0,this.column-1).replace(/[^\t]/g," ");return l(">")+d(f)+c+`
 `+b+l("^")}return" "+d(f)+c}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}}var bs=on;on.default=on;var _n={};_n.isClean=Symbol("isClean");_n.my=Symbol("my");const Gs={colon:": ",indent:"    ",beforeDecl:`
`,beforeRule:`
`,beforeOpen:" ",beforeClose:`
`,beforeComment:`
`,after:`
`,emptyBody:"",commentLeft:" ",commentRight:" ",semicolon:!1};function Mp(r){return r[0].toUpperCase()+r.slice(1)}class Ni{constructor(e){this.builder=e}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}document(e){this.body(e)}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}comment(e){let t=this.raw(e,"left","commentLeft"),n=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+n+"*/",e)}decl(e,t){let n=this.raw(e,"between","colon"),i=e.prop+n+this.rawValue(e,"value");e.important&&(i+=e.raws.important||" !important"),t&&(i+=";"),this.builder(i,e)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}atrule(e,t){let n="@"+e.name,i=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName<"u"?n+=e.raws.afterName:i&&(n+=" "),e.nodes)this.block(e,n+i);else{let s=(e.raws.between||"")+(t?";":"");this.builder(n+i+s,e)}}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let n=this.raw(e,"semicolon");for(let i=0;i<e.nodes.length;i++){let s=e.nodes[i],o=this.raw(s,"before");o&&this.builder(o),this.stringify(s,t!==i||n)}}block(e,t){let n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start");let i;e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,"after")):i=this.raw(e,"after","emptyBody"),i&&this.builder(i),this.builder("}",e,"end")}raw(e,t,n){let i;if(n||(n=t),t&&(i=e.raws[t],typeof i<"u"))return i;let s=e.parent;if(n==="before"&&(!s||s.type==="root"&&s.first===e||s&&s.type==="document"))return"";if(!s)return Gs[n];let o=e.root();if(o.rawCache||(o.rawCache={}),typeof o.rawCache[n]<"u")return o.rawCache[n];if(n==="before"||n==="after")return this.beforeAfter(e,n);{let l="raw"+Mp(n);this[l]?i=this[l](o,e):o.walk(d=>{if(i=d.raws[t],typeof i<"u")return!1})}return typeof i>"u"&&(i=Gs[n]),o.rawCache[n]=i,i}rawSemicolon(e){let t;return e.walk(n=>{if(n.nodes&&n.nodes.length&&n.last.type==="decl"&&(t=n.raws.semicolon,typeof t<"u"))return!1}),t}rawEmptyBody(e){let t;return e.walk(n=>{if(n.nodes&&n.nodes.length===0&&(t=n.raws.after,typeof t<"u"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(n=>{let i=n.parent;if(i&&i!==e&&i.parent&&i.parent===e&&typeof n.raws.before<"u"){let s=n.raws.before.split(`
`);return t=s[s.length-1],t=t.replace(/\S/g,""),!1}}),t}rawBeforeComment(e,t){let n;return e.walkComments(i=>{if(typeof i.raws.before<"u")return n=i.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),typeof n>"u"?n=this.raw(t,null,"beforeDecl"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeDecl(e,t){let n;return e.walkDecls(i=>{if(typeof i.raws.before<"u")return n=i.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),typeof n>"u"?n=this.raw(t,null,"beforeRule"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeRule(e){let t;return e.walk(n=>{if(n.nodes&&(n.parent!==e||e.first!==n)&&typeof n.raws.before<"u")return t=n.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeClose(e){let t;return e.walk(n=>{if(n.nodes&&n.nodes.length>0&&typeof n.raws.after<"u")return t=n.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeOpen(e){let t;return e.walk(n=>{if(n.type!=="decl"&&(t=n.raws.between,typeof t<"u"))return!1}),t}rawColon(e){let t;return e.walkDecls(n=>{if(typeof n.raws.between<"u")return t=n.raws.between.replace(/[^\s:]/g,""),!1}),t}beforeAfter(e,t){let n;e.type==="decl"?n=this.raw(e,null,"beforeDecl"):e.type==="comment"?n=this.raw(e,null,"beforeComment"):t==="before"?n=this.raw(e,null,"beforeRule"):n=this.raw(e,null,"beforeClose");let i=e.parent,s=0;for(;i&&i.type!=="root";)s+=1,i=i.parent;if(n.includes(`
`)){let o=this.raw(e,null,"indent");if(o.length)for(let l=0;l<s;l++)n+=o}return n}rawValue(e,t){let n=e[t],i=e.raws[t];return i&&i.value===n?i.raw:n}}var Po=Ni;Ni.default=Ni;let Vp=Po;function ki(r,e){new Vp(e).stringify(r)}var ai=ki;ki.default=ki;let{isClean:In,my:Fp}=_n,Bp=bs,Up=Po,Hp=ai;function Li(r,e){let t=new r.constructor;for(let n in r){if(!Object.prototype.hasOwnProperty.call(r,n)||n==="proxyCache")continue;let i=r[n],s=typeof i;n==="parent"&&s==="object"?e&&(t[n]=e):n==="source"?t[n]=i:Array.isArray(i)?t[n]=i.map(o=>Li(o,t)):(s==="object"&&i!==null&&(i=Li(i)),t[n]=i)}return t}class Di{constructor(e={}){this.raws={},this[In]=!1,this[Fp]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let n of e[t])typeof n.clone=="function"?this.append(n.clone()):this.append(n)}else this[t]=e[t]}error(e,t={}){if(this.source){let{start:n,end:i}=this.rangeBy(t);return this.source.input.error(e,{line:n.line,column:n.column},{line:i.line,column:i.column},t)}return new Bp(e)}warn(e,t,n){let i={node:this};for(let s in n)i[s]=n[s];return e.warn(t,i)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}toString(e=Hp){e.stringify&&(e=e.stringify);let t="";return e(this,n=>{t+=n}),t}assign(e={}){for(let t in e)this[t]=e[t];return this}clone(e={}){let t=Li(this);for(let n in e)t[n]=e[n];return t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}replaceWith(...e){if(this.parent){let t=this,n=!1;for(let i of e)i===this?n=!0:n?(this.parent.insertAfter(t,i),t=i):this.parent.insertBefore(t,i);n||this.remove()}return this}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}before(e){return this.parent.insertBefore(this,e),this}after(e){return this.parent.insertAfter(this,e),this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}raw(e,t){return new Up().raw(this,e,t)}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}toJSON(e,t){let n={},i=t==null;t=t||new Map;let s=0;for(let o in this){if(!Object.prototype.hasOwnProperty.call(this,o)||o==="parent"||o==="proxyCache")continue;let l=this[o];if(Array.isArray(l))n[o]=l.map(d=>typeof d=="object"&&d.toJSON?d.toJSON(null,t):d);else if(typeof l=="object"&&l.toJSON)n[o]=l.toJSON(null,t);else if(o==="source"){let d=t.get(l.input);d==null&&(d=s,t.set(l.input,s),s++),n[o]={inputId:d,start:l.start,end:l.end}}else n[o]=l}return i&&(n.inputs=[...t.keys()].map(o=>o.toJSON())),n}positionInside(e){let t=this.toString(),n=this.source.start.column,i=this.source.start.line;for(let s=0;s<e;s++)t[s]===`
`?(n=1,i+=1):n+=1;return{line:i,column:n}}positionBy(e){let t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){let n=this.toString().indexOf(e.word);n!==-1&&(t=this.positionInside(n))}return t}rangeBy(e){let t={line:this.source.start.line,column:this.source.start.column},n=this.source.end?{line:this.source.end.line,column:this.source.end.column+1}:{line:t.line,column:t.column+1};if(e.word){let i=this.toString().indexOf(e.word);i!==-1&&(t=this.positionInside(i),n=this.positionInside(i+e.word.length))}else e.start?t={line:e.start.line,column:e.start.column}:e.index&&(t=this.positionInside(e.index)),e.end?n={line:e.end.line,column:e.end.column}:e.endIndex?n=this.positionInside(e.endIndex):e.index&&(n=this.positionInside(e.index+1));return(n.line<t.line||n.line===t.line&&n.column<=t.column)&&(n={line:t.line,column:t.column+1}),{start:t,end:n}}getProxyProcessor(){return{set(e,t,n){return e[t]===n||(e[t]=n,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0},get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]}}}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}markDirty(){if(this[In]){this[In]=!1;let e=this;for(;e=e.parent;)e[In]=!1}}get proxyOf(){return this}}var oi=Di;Di.default=Di;let $p=oi;class Pi extends $p{constructor(e){e&&typeof e.value<"u"&&typeof e.value!="string"&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}}var li=Pi;Pi.default=Pi;let jp="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Wp=(r,e=21)=>(t=e)=>{let n="",i=t;for(;i--;)n+=r[Math.random()*r.length|0];return n},zp=(r=21)=>{let e="",t=r;for(;t--;)e+=jp[Math.random()*64|0];return e};const Yp=Object.freeze(Object.defineProperty({__proto__:null,nanoid:zp,customAlphabet:Wp},Symbol.toStringTag,{value:"Module"})),Qp=Fc(Yp);let{SourceMapConsumer:Xs,SourceMapGenerator:Js}=dt,{existsSync:Kp,readFileSync:Gp}=Uc,{dirname:Si,join:Xp}=as;function Jp(r){return Buffer?Buffer.from(r,"base64").toString():window.atob(r)}class Mi{constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let n=t.map?t.map.prev:void 0,i=this.loadMap(t.from,n);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Si(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new Xs(this.text)),this.consumerCache}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}startWith(e,t){return e?e.substr(0,t.length)===t:!1}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let n=e.lastIndexOf(t.pop()),i=e.indexOf("*/",n);n>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(n,i)))}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,n=/^data:application\/json;base64,/,i=/^data:application\/json;charset=utf-?8,/,s=/^data:application\/json,/;if(i.test(e)||s.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(t.test(e)||n.test(e))return Jp(e.substr(RegExp.lastMatch.length));let o=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+o)}loadFile(e){if(this.root=Si(e),Kp(e))return this.mapFile=e,Gp(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let n=t(e);if(n){let i=this.loadFile(n);if(!i)throw new Error("Unable to load previous source map: "+n.toString());return i}}else{if(t instanceof Xs)return Js.fromSourceMap(t).toString();if(t instanceof Js)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let n=this.annotation;return e&&(n=Xp(Si(e),n)),this.loadFile(n)}}}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}}var Mo=Mi;Mi.default=Mi;let{SourceMapConsumer:Zp,SourceMapGenerator:ef}=dt,{fileURLToPath:Zs,pathToFileURL:En}=dt,{resolve:Vi,isAbsolute:Fi}=as,{nanoid:tf}=Qp,bi=dt,ea=bs,nf=Mo,wi=Symbol("fromOffsetCache"),rf=Boolean(Zp&&ef),ta=Boolean(Vi&&Fi);class $r{constructor(e,t={}){if(e===null||typeof e>"u"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]==="\uFFFE"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!ta||/^\w+:\/\//.test(t.from)||Fi(t.from)?this.file=t.from:this.file=Vi(t.from)),ta&&rf){let n=new nf(this.css,t);if(n.text){this.map=n;let i=n.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+tf(6)+">"),this.map&&(this.map.file=this.from)}fromOffset(e){let t,n;if(this[wi])n=this[wi];else{let s=this.css.split(`
`);n=new Array(s.length);let o=0;for(let l=0,d=s.length;l<d;l++)n[l]=o,o+=s[l].length+1;this[wi]=n}t=n[n.length-1];let i=0;if(e>=t)i=n.length-1;else{let s=n.length-2,o;for(;i<s;)if(o=i+(s-i>>1),e<n[o])s=o-1;else if(e>=n[o+1])i=o+1;else{i=o;break}}return{line:i+1,col:e-n[i]+1}}error(e,t,n,i={}){let s,o,l;if(t&&typeof t=="object"){let c=t,y=n;if(typeof t.offset=="number"){let m=this.fromOffset(c.offset);t=m.line,n=m.col}else t=c.line,n=c.column;if(typeof y.offset=="number"){let m=this.fromOffset(y.offset);o=m.line,l=m.col}else o=y.line,l=y.column}else if(!n){let c=this.fromOffset(t);t=c.line,n=c.col}let d=this.origin(t,n,o,l);return d?s=new ea(e,d.endLine===void 0?d.line:{line:d.line,column:d.column},d.endLine===void 0?d.column:{line:d.endLine,column:d.endColumn},d.source,d.file,i.plugin):s=new ea(e,o===void 0?t:{line:t,column:n},o===void 0?n:{line:o,column:l},this.css,this.file,i.plugin),s.input={line:t,column:n,endLine:o,endColumn:l,source:this.css},this.file&&(En&&(s.input.url=En(this.file).toString()),s.input.file=this.file),s}origin(e,t,n,i){if(!this.map)return!1;let s=this.map.consumer(),o=s.originalPositionFor({line:e,column:t});if(!o.source)return!1;let l;typeof n=="number"&&(l=s.originalPositionFor({line:n,column:i}));let d;Fi(o.source)?d=En(o.source):d=new URL(o.source,this.map.consumer().sourceRoot||En(this.map.mapFile));let c={url:d.toString(),line:o.line,column:o.column,endLine:l&&l.line,endColumn:l&&l.column};if(d.protocol==="file:")if(Zs)c.file=Zs(d);else throw new Error("file: protocol is not available in this PostCSS build");let y=s.sourceContentFor(o.source);return y&&(c.source=y),c}mapResolve(e){return/^\w+:\/\//.test(e)?e:Vi(this.map.consumer().sourceRoot||this.map.root||".",e)}get from(){return this.file||this.id}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}}var ci=$r;$r.default=$r;bi&&bi.registerInput&&bi.registerInput($r);let{SourceMapConsumer:Vo,SourceMapGenerator:Vn}=dt,{dirname:Fn,resolve:Fo,relative:Bo,sep:Uo}=as,{pathToFileURL:na}=dt,sf=ci,af=Boolean(Vo&&Vn),of=Boolean(Fn&&Fo&&Bo&&Uo);class lf{constructor(e,t,n,i){this.stringify=e,this.mapOpts=n.map||{},this.root=t,this.opts=n,this.css=i}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new sf(this.css,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e<"u"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/(\n)?\/\*#[\S\s]*?\*\/$/gm,""))}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let n=t.source.input.from;n&&!e[n]&&(e[n]=!0,this.map.setSourceContent(this.toUrl(this.path(n)),t.source.input.css))}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),n=e.root||Fn(e.file),i;this.mapOpts.sourcesContent===!1?(i=new Vo(e.text),i.sourcesContent&&(i.sourcesContent=i.sourcesContent.map(()=>null))):i=e.consumer(),this.map.applySourceMap(i,t,this.toUrl(this.path(n)))}}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Vn.fromSourceMap(e)}else this.map=new Vn({file:this.outputFile()}),this.map.addMapping({source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>",generated:{line:1,column:0},original:{line:1,column:0}});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}path(e){if(e.indexOf("<")===0||/^\w+:\/\//.test(e)||this.mapOpts.absolute)return e;let t=this.opts.to?Fn(this.opts.to):".";return typeof this.mapOpts.annotation=="string"&&(t=Fn(Fo(t,this.mapOpts.annotation))),e=Bo(t,e),e}toUrl(e){return Uo==="\\"&&(e=e.replace(/\\/g,"/")),encodeURI(e).replace(/[#?]/g,encodeURIComponent)}sourcePath(e){if(this.mapOpts.from)return this.toUrl(this.mapOpts.from);if(this.mapOpts.absolute){if(na)return na(e.source.input.from).toString();throw new Error("`map.absolute` option is not available in this PostCSS build")}else return this.toUrl(this.path(e.source.input.from))}generateString(){this.css="",this.map=new Vn({file:this.outputFile()});let e=1,t=1,n="<no source>",i={source:"",generated:{line:0,column:0},original:{line:0,column:0}},s,o;this.stringify(this.root,(l,d,c)=>{if(this.css+=l,d&&c!=="end"&&(i.generated.line=e,i.generated.column=t-1,d.source&&d.source.start?(i.source=this.sourcePath(d),i.original.line=d.source.start.line,i.original.column=d.source.start.column-1,this.map.addMapping(i)):(i.source=n,i.original.line=1,i.original.column=0,this.map.addMapping(i))),s=l.match(/\n/g),s?(e+=s.length,o=l.lastIndexOf(`
`),t=l.length-o):t+=l.length,d&&c!=="start"){let y=d.parent||{raws:{}};(d.type!=="decl"||d!==y.last||y.raws.semicolon)&&(d.source&&d.source.end?(i.source=this.sourcePath(d),i.original.line=d.source.end.line,i.original.column=d.source.end.column-1,i.generated.line=e,i.generated.column=t-2,this.map.addMapping(i)):(i.source=n,i.original.line=1,i.original.column=0,i.generated.line=e,i.generated.column=t-1,this.map.addMapping(i)))}})}generate(){if(this.clearAnnotation(),of&&af&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}}var Ho=lf;let cf=oi;class Bi extends cf{constructor(e){super(e),this.type="comment"}}var di=Bi;Bi.default=Bi;let{isClean:$o,my:jo}=_n,Wo=li,zo=di,df=oi,Yo,ws,Cs;function Qo(r){return r.map(e=>(e.nodes&&(e.nodes=Qo(e.nodes)),delete e.source,e))}function Ko(r){if(r[$o]=!1,r.proxyOf.nodes)for(let e of r.proxyOf.nodes)Ko(e)}class Me extends df{push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),n,i;for(;this.indexes[t]<this.proxyOf.nodes.length&&(n=this.indexes[t],i=e(this.proxyOf.nodes[n],n),i!==!1);)this.indexes[t]+=1;return delete this.indexes[t],i}walk(e){return this.each((t,n)=>{let i;try{i=e(t,n)}catch(s){throw t.addToError(s)}return i!==!1&&t.walk&&(i=t.walk(e)),i})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((n,i)=>{if(n.type==="decl"&&e.test(n.prop))return t(n,i)}):this.walk((n,i)=>{if(n.type==="decl"&&n.prop===e)return t(n,i)}):(t=e,this.walk((n,i)=>{if(n.type==="decl")return t(n,i)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((n,i)=>{if(n.type==="rule"&&e.test(n.selector))return t(n,i)}):this.walk((n,i)=>{if(n.type==="rule"&&n.selector===e)return t(n,i)}):(t=e,this.walk((n,i)=>{if(n.type==="rule")return t(n,i)}))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((n,i)=>{if(n.type==="atrule"&&e.test(n.name))return t(n,i)}):this.walk((n,i)=>{if(n.type==="atrule"&&n.name===e)return t(n,i)}):(t=e,this.walk((n,i)=>{if(n.type==="atrule")return t(n,i)}))}walkComments(e){return this.walk((t,n)=>{if(t.type==="comment")return e(t,n)})}append(...e){for(let t of e){let n=this.normalize(t,this.last);for(let i of n)this.proxyOf.nodes.push(i)}return this.markDirty(),this}prepend(...e){e=e.reverse();for(let t of e){let n=this.normalize(t,this.first,"prepend").reverse();for(let i of n)this.proxyOf.nodes.unshift(i);for(let i in this.indexes)this.indexes[i]=this.indexes[i]+n.length}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}insertBefore(e,t){e=this.index(e);let n=e===0?"prepend":!1,i=this.normalize(t,this.proxyOf.nodes[e],n).reverse();for(let o of i)this.proxyOf.nodes.splice(e,0,o);let s;for(let o in this.indexes)s=this.indexes[o],e<=s&&(this.indexes[o]=s+i.length);return this.markDirty(),this}insertAfter(e,t){e=this.index(e);let n=this.normalize(t,this.proxyOf.nodes[e]).reverse();for(let s of n)this.proxyOf.nodes.splice(e+1,0,s);let i;for(let s in this.indexes)i=this.indexes[s],e<i&&(this.indexes[s]=i+n.length);return this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let n in this.indexes)t=this.indexes[n],t>=e&&(this.indexes[n]=t-1);return this.markDirty(),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}replaceValues(e,t,n){return n||(n=t,t={}),this.walkDecls(i=>{t.props&&!t.props.includes(i.prop)||t.fast&&!i.value.includes(t.fast)||(i.value=i.value.replace(e,n))}),this.markDirty(),this}every(e){return this.nodes.every(e)}some(e){return this.nodes.some(e)}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}get first(){if(!!this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(!!this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}normalize(e,t){if(typeof e=="string")e=Qo(Yo(e).nodes);else if(Array.isArray(e)){e=e.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value>"u")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new Wo(e)]}else if(e.selector)e=[new ws(e)];else if(e.name)e=[new Cs(e)];else if(e.text)e=[new zo(e)];else throw new Error("Unknown node type in node creation");return e.map(i=>(i[jo]||Me.rebuild(i),i=i.proxyOf,i.parent&&i.parent.removeChild(i),i[$o]&&Ko(i),typeof i.raws.before>"u"&&t&&typeof t.raws.before<"u"&&(i.raws.before=t.raws.before.replace(/\S/g,"")),i.parent=this.proxyOf,i))}getProxyProcessor(){return{set(e,t,n){return e[t]===n||(e[t]=n,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0},get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...n)=>e[t](...n.map(i=>typeof i=="function"?(s,o)=>i(s.toProxy(),o):i)):t==="every"||t==="some"?n=>e[t]((i,...s)=>n(i.toProxy(),...s)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(n=>n.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]}}}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}}Me.registerParse=r=>{Yo=r};Me.registerRule=r=>{ws=r};Me.registerAtRule=r=>{Cs=r};var ft=Me;Me.default=Me;Me.rebuild=r=>{r.type==="atrule"?Object.setPrototypeOf(r,Cs.prototype):r.type==="rule"?Object.setPrototypeOf(r,ws.prototype):r.type==="decl"?Object.setPrototypeOf(r,Wo.prototype):r.type==="comment"&&Object.setPrototypeOf(r,zo.prototype),r[jo]=!0,r.nodes&&r.nodes.forEach(e=>{Me.rebuild(e)})};let uf=ft,Go,Xo;class ln extends uf{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new Go(new Xo,this,e).stringify()}}ln.registerLazyResult=r=>{Go=r};ln.registerProcessor=r=>{Xo=r};var _s=ln;ln.default=ln;class Ui{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let n=t.node.rangeBy(t);this.line=n.start.line,this.column=n.start.column,this.endLine=n.end.line,this.endColumn=n.end.column}for(let n in t)this[n]=t[n]}toString(){return this.node?this.node.error(this.text,{plugin:this.plugin,index:this.index,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}var Jo=Ui;Ui.default=Ui;let pf=Jo;class Hi{constructor(e,t,n){this.processor=e,this.messages=[],this.root=t,this.opts=n,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let n=new pf(e,t);return this.messages.push(n),n}warnings(){return this.messages.filter(e=>e.type==="warning")}get content(){return this.css}}var vs=Hi;Hi.default=Hi;const Ci="'".charCodeAt(0),ra='"'.charCodeAt(0),On="\\".charCodeAt(0),ia="/".charCodeAt(0),qn=`
`.charCodeAt(0),Vt=" ".charCodeAt(0),Nn="\f".charCodeAt(0),kn="	".charCodeAt(0),Ln="\r".charCodeAt(0),ff="[".charCodeAt(0),hf="]".charCodeAt(0),mf="(".charCodeAt(0),gf=")".charCodeAt(0),yf="{".charCodeAt(0),Sf="}".charCodeAt(0),bf=";".charCodeAt(0),wf="*".charCodeAt(0),Cf=":".charCodeAt(0),_f="@".charCodeAt(0),Dn=/[\t\n\f\r "#'()/;[\\\]{}]/g,Pn=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,vf=/.[\n"'(/\\]/,sa=/[\da-f]/i;var Tf=function(e,t={}){let n=e.css.valueOf(),i=t.ignoreErrors,s,o,l,d,c,y,m,f,b,h,p=n.length,g=0,w=[],R=[];function S(){return g}function u(O){throw e.error("Unclosed "+O,g)}function _(){return R.length===0&&g>=p}function x(O){if(R.length)return R.pop();if(g>=p)return;let E=O?O.ignoreUnclosed:!1;switch(s=n.charCodeAt(g),s){case qn:case Vt:case kn:case Ln:case Nn:{o=g;do o+=1,s=n.charCodeAt(o);while(s===Vt||s===qn||s===kn||s===Ln||s===Nn);h=["space",n.slice(g,o)],g=o-1;break}case ff:case hf:case yf:case Sf:case Cf:case bf:case gf:{let L=String.fromCharCode(s);h=[L,L,g];break}case mf:{if(f=w.length?w.pop()[1]:"",b=n.charCodeAt(g+1),f==="url"&&b!==Ci&&b!==ra&&b!==Vt&&b!==qn&&b!==kn&&b!==Nn&&b!==Ln){o=g;do{if(y=!1,o=n.indexOf(")",o+1),o===-1)if(i||E){o=g;break}else u("bracket");for(m=o;n.charCodeAt(m-1)===On;)m-=1,y=!y}while(y);h=["brackets",n.slice(g,o+1),g,o],g=o}else o=n.indexOf(")",g+1),d=n.slice(g,o+1),o===-1||vf.test(d)?h=["(","(",g]:(h=["brackets",d,g,o],g=o);break}case Ci:case ra:{l=s===Ci?"'":'"',o=g;do{if(y=!1,o=n.indexOf(l,o+1),o===-1)if(i||E){o=g+1;break}else u("string");for(m=o;n.charCodeAt(m-1)===On;)m-=1,y=!y}while(y);h=["string",n.slice(g,o+1),g,o],g=o;break}case _f:{Dn.lastIndex=g+1,Dn.test(n),Dn.lastIndex===0?o=n.length-1:o=Dn.lastIndex-2,h=["at-word",n.slice(g,o+1),g,o],g=o;break}case On:{for(o=g,c=!0;n.charCodeAt(o+1)===On;)o+=1,c=!c;if(s=n.charCodeAt(o+1),c&&s!==ia&&s!==Vt&&s!==qn&&s!==kn&&s!==Ln&&s!==Nn&&(o+=1,sa.test(n.charAt(o)))){for(;sa.test(n.charAt(o+1));)o+=1;n.charCodeAt(o+1)===Vt&&(o+=1)}h=["word",n.slice(g,o+1),g,o],g=o;break}default:{s===ia&&n.charCodeAt(g+1)===wf?(o=n.indexOf("*/",g+2)+1,o===0&&(i||E?o=n.length:u("comment")),h=["comment",n.slice(g,o+1),g,o],g=o):(Pn.lastIndex=g+1,Pn.test(n),Pn.lastIndex===0?o=n.length-1:o=Pn.lastIndex-2,h=["word",n.slice(g,o+1),g,o],w.push(h),g=o);break}}return g++,h}function A(O){R.push(O)}return{back:A,nextToken:x,endOfFile:_,position:S}};let Zo=ft;class jr extends Zo{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}}var Ts=jr;jr.default=jr;Zo.registerAtRule(jr);let Af=ft,el,tl;class cn extends Af{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}removeChild(e,t){let n=this.index(e);return!t&&n===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[n].raws.before),super.removeChild(e)}normalize(e,t,n){let i=super.normalize(e);if(t){if(n==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let s of i)s.raws.before=t.raws.before}return i}toResult(e={}){return new el(new tl,this,e).stringify()}}cn.registerLazyResult=r=>{el=r};cn.registerProcessor=r=>{tl=r};var vn=cn;cn.default=cn;let dn={split(r,e,t){let n=[],i="",s=!1,o=0,l=!1,d=!1;for(let c of r)d?d=!1:c==="\\"?d=!0:l?c===l&&(l=!1):c==='"'||c==="'"?l=c:c==="("?o+=1:c===")"?o>0&&(o-=1):o===0&&e.includes(c)&&(s=!0),s?(i!==""&&n.push(i.trim()),i="",s=!1):i+=c;return(t||i!=="")&&n.push(i.trim()),n},space(r){let e=[" ",`
`,"	"];return dn.split(r,e)},comma(r){return dn.split(r,[","],!0)}};var nl=dn;dn.default=dn;let rl=ft,xf=nl;class Wr extends rl{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return xf.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,n=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(n)}}var As=Wr;Wr.default=Wr;rl.registerRule(Wr);let Rf=li,If=Tf,Ef=di,Of=Ts,qf=vn,aa=As;const oa={empty:!0,space:!0};function Nf(r){for(let e=r.length-1;e>=0;e--){let t=r[e],n=t[3]||t[2];if(n)return n}}class kf{constructor(e){this.input=e,this.root=new qf,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:e,start:{offset:0,line:1,column:1}}}createTokenizer(){this.tokenizer=If(this.input)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}comment(e){let t=new Ef;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]);let n=e[1].slice(2,-2);if(/^\s*$/.test(n))t.text="",t.raws.left=n,t.raws.right="";else{let i=n.match(/^(\s*)([^]*\S)(\s*)$/);t.text=i[2],t.raws.left=i[1],t.raws.right=i[3]}}emptyRule(e){let t=new aa;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}other(e){let t=!1,n=null,i=!1,s=null,o=[],l=e[1].startsWith("--"),d=[],c=e;for(;c;){if(n=c[0],d.push(c),n==="("||n==="[")s||(s=c),o.push(n==="("?")":"]");else if(l&&i&&n==="{")s||(s=c),o.push("}");else if(o.length===0)if(n===";")if(i){this.decl(d,l);return}else break;else if(n==="{"){this.rule(d);return}else if(n==="}"){this.tokenizer.back(d.pop()),t=!0;break}else n===":"&&(i=!0);else n===o[o.length-1]&&(o.pop(),o.length===0&&(s=null));c=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(s),t&&i){if(!l)for(;d.length&&(c=d[d.length-1][0],!(c!=="space"&&c!=="comment"));)this.tokenizer.back(d.pop());this.decl(d,l)}else this.unknownWord(d)}rule(e){e.pop();let t=new aa;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}decl(e,t){let n=new Rf;this.init(n,e[0][2]);let i=e[e.length-1];for(i[0]===";"&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(i[3]||i[2]||Nf(e));e[0][0]!=="word";)e.length===1&&this.unknownWord(e),n.raws.before+=e.shift()[1];for(n.source.start=this.getPosition(e[0][2]),n.prop="";e.length;){let c=e[0][0];if(c===":"||c==="space"||c==="comment")break;n.prop+=e.shift()[1]}n.raws.between="";let s;for(;e.length;)if(s=e.shift(),s[0]===":"){n.raws.between+=s[1];break}else s[0]==="word"&&/\w/.test(s[1])&&this.unknownWord([s]),n.raws.between+=s[1];(n.prop[0]==="_"||n.prop[0]==="*")&&(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1));let o=[],l;for(;e.length&&(l=e[0][0],!(l!=="space"&&l!=="comment"));)o.push(e.shift());this.precheckMissedSemicolon(e);for(let c=e.length-1;c>=0;c--){if(s=e[c],s[1].toLowerCase()==="!important"){n.important=!0;let y=this.stringFrom(e,c);y=this.spacesFromEnd(e)+y,y!==" !important"&&(n.raws.important=y);break}else if(s[1].toLowerCase()==="important"){let y=e.slice(0),m="";for(let f=c;f>0;f--){let b=y[f][0];if(m.trim().indexOf("!")===0&&b!=="space")break;m=y.pop()[1]+m}m.trim().indexOf("!")===0&&(n.important=!0,n.raws.important=m,e=y)}if(s[0]!=="space"&&s[0]!=="comment")break}e.some(c=>c[0]!=="space"&&c[0]!=="comment")&&(n.raws.between+=o.map(c=>c[1]).join(""),o=[]),this.raw(n,"value",o.concat(e),t),n.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}atrule(e){let t=new Of;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let n,i,s,o=!1,l=!1,d=[],c=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),n=e[0],n==="("||n==="["?c.push(n==="("?")":"]"):n==="{"&&c.length>0?c.push("}"):n===c[c.length-1]&&c.pop(),c.length===0)if(n===";"){t.source.end=this.getPosition(e[2]),this.semicolon=!0;break}else if(n==="{"){l=!0;break}else if(n==="}"){if(d.length>0){for(s=d.length-1,i=d[s];i&&i[0]==="space";)i=d[--s];i&&(t.source.end=this.getPosition(i[3]||i[2]))}this.end(e);break}else d.push(e);else d.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(d),d.length?(t.raws.afterName=this.spacesAndCommentsFromStart(d),this.raw(t,"params",d),o&&(e=d[d.length-1],t.source.end=this.getPosition(e[3]||e[2]),this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),l&&(t.nodes=[],this.current=t)}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{offset:e,line:t.line,column:t.col}}init(e,t){this.current.push(e),e.source={start:this.getPosition(t),input:this.input},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}raw(e,t,n,i){let s,o,l=n.length,d="",c=!0,y,m;for(let f=0;f<l;f+=1)s=n[f],o=s[0],o==="space"&&f===l-1&&!i?c=!1:o==="comment"?(m=n[f-1]?n[f-1][0]:"empty",y=n[f+1]?n[f+1][0]:"empty",!oa[m]&&!oa[y]?d.slice(-1)===","?c=!1:d+=s[1]:c=!1):d+=s[1];if(!c){let f=n.reduce((b,h)=>b+h[1],"");e.raws[t]={value:d,raw:f}}e[t]=d}spacesAndCommentsFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)n=e.pop()[1]+n;return n}spacesAndCommentsFromStart(e){let t,n="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)n+=e.shift()[1];return n}spacesFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],t==="space");)n=e.pop()[1]+n;return n}stringFrom(e,t){let n="";for(let i=t;i<e.length;i++)n+=e[i][1];return e.splice(t,e.length-t),n}colon(e){let t=0,n,i,s;for(let[o,l]of e.entries()){if(n=l,i=n[0],i==="("&&(t+=1),i===")"&&(t-=1),t===0&&i===":")if(!s)this.doubleColon(n);else{if(s[0]==="word"&&s[1]==="progid")continue;return o}s=n}return!1}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}precheckMissedSemicolon(){}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let n=0,i;for(let s=t-1;s>=0&&(i=e[s],!(i[0]!=="space"&&(n+=1,n===2)));s--);throw this.input.error("Missed semicolon",i[0]==="word"?i[3]+1:i[2])}}var Lf=kf;let Df=ft,Pf=Lf,Mf=ci;function zr(r,e){let t=new Mf(r,e),n=new Pf(t);try{n.parse()}catch(i){throw i}return n.root}var xs=zr;zr.default=zr;Df.registerParse(zr);let{isClean:De,my:Vf}=_n,Ff=Ho,Bf=ai,Uf=ft,Hf=_s,la=vs,$f=xs,jf=vn;const Wf={document:"Document",root:"Root",atrule:"AtRule",rule:"Rule",decl:"Declaration",comment:"Comment"},zf={postcssPlugin:!0,prepare:!0,Once:!0,Document:!0,Root:!0,Declaration:!0,Rule:!0,AtRule:!0,Comment:!0,DeclarationExit:!0,RuleExit:!0,AtRuleExit:!0,CommentExit:!0,RootExit:!0,DocumentExit:!0,OnceExit:!0},Yf={postcssPlugin:!0,prepare:!0,Once:!0},xt=0;function Ft(r){return typeof r=="object"&&typeof r.then=="function"}function il(r){let e=!1,t=Wf[r.type];return r.type==="decl"?e=r.prop.toLowerCase():r.type==="atrule"&&(e=r.name.toLowerCase()),e&&r.append?[t,t+"-"+e,xt,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:r.append?[t,xt,t+"Exit"]:[t,t+"Exit"]}function ca(r){let e;return r.type==="document"?e=["Document",xt,"DocumentExit"]:r.type==="root"?e=["Root",xt,"RootExit"]:e=il(r),{node:r,events:e,eventIndex:0,visitors:[],visitorIndex:0,iterator:0}}function $i(r){return r[De]=!1,r.nodes&&r.nodes.forEach(e=>$i(e)),r}let ji={};class Ze{constructor(e,t,n){this.stringified=!1,this.processed=!1;let i;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))i=$i(t);else if(t instanceof Ze||t instanceof la)i=$i(t.root),t.map&&(typeof n.map>"u"&&(n.map={}),n.map.inline||(n.map.inline=!1),n.map.prev=t.map);else{let s=$f;n.syntax&&(s=n.syntax.parse),n.parser&&(s=n.parser),s.parse&&(s=s.parse);try{i=s(t,n)}catch(o){this.processed=!0,this.error=o}i&&!i[Vf]&&Uf.rebuild(i)}this.result=new la(e,i,n),this.helpers={...ji,result:this.result,postcss:ji},this.plugins=this.processor.plugins.map(s=>typeof s=="object"&&s.prepare?{...s,...s.prepare(this.result)}:s)}get[Symbol.toStringTag](){return"LazyResult"}get processor(){return this.result.processor}get opts(){return this.result.opts}get css(){return this.stringify().css}get content(){return this.stringify().content}get map(){return this.stringify().map}get root(){return this.sync().root}get messages(){return this.sync().messages}warnings(){return this.sync().warnings()}toString(){return this.css}then(e,t){return this.async().then(e,t)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(Ft(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[De];)e[De]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=Bf;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let i=new Ff(t,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}walkSync(e){e[De]=!0;let t=il(e);for(let n of t)if(n===xt)e.nodes&&e.each(i=>{i[De]||this.walkSync(i)});else{let i=this.listeners[n];if(i&&this.visitSync(i,e.toProxy()))return}}visitSync(e,t){for(let[n,i]of e){this.result.lastPlugin=n;let s;try{s=i(t,this.helpers)}catch(o){throw this.handleError(o,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(Ft(s))throw this.getAsyncError()}}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(n=>e.Once(n,this.helpers));return Ft(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let n=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin?(e.plugin=n.postcssPlugin,e.setMessage()):n.postcssVersion}catch(i){console&&console.error&&console.error(i)}return e}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],n=this.runOnRoot(t);if(Ft(n))try{await n}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[De];){e[De]=!0;let t=[ca(e)];for(;t.length>0;){let n=this.visitTick(t);if(Ft(n))try{await n}catch(i){let s=t[t.length-1].node;throw this.handleError(i,s)}}}if(this.listeners.OnceExit)for(let[t,n]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let i=e.nodes.map(s=>n(s,this.helpers));await Promise.all(i)}else await n(e,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()}prepareVisitors(){this.listeners={};let e=(t,n,i)=>{this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push([t,i])};for(let t of this.plugins)if(typeof t=="object")for(let n in t){if(!zf[n]&&/^[A-Z]/.test(n))throw new Error(`Unknown event ${n} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!Yf[n])if(typeof t[n]=="object")for(let i in t[n])i==="*"?e(t,n,t[n][i]):e(t,n+"-"+i.toLowerCase(),t[n][i]);else typeof t[n]=="function"&&e(t,n,t[n])}this.hasListener=Object.keys(this.listeners).length>0}visitTick(e){let t=e[e.length-1],{node:n,visitors:i}=t;if(n.type!=="root"&&n.type!=="document"&&!n.parent){e.pop();return}if(i.length>0&&t.visitorIndex<i.length){let[o,l]=i[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===i.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=o;try{return l(n.toProxy(),this.helpers)}catch(d){throw this.handleError(d,n)}}if(t.iterator!==0){let o=t.iterator,l;for(;l=n.nodes[n.indexes[o]];)if(n.indexes[o]+=1,!l[De]){l[De]=!0,e.push(ca(l));return}t.iterator=0,delete n.indexes[o]}let s=t.events;for(;t.eventIndex<s.length;){let o=s[t.eventIndex];if(t.eventIndex+=1,o===xt){n.nodes&&n.nodes.length&&(n[De]=!0,t.iterator=n.getIterator());return}else if(this.listeners[o]){t.visitors=this.listeners[o];return}}e.pop()}}Ze.registerPostcss=r=>{ji=r};var sl=Ze;Ze.default=Ze;jf.registerLazyResult(Ze);Hf.registerLazyResult(Ze);let Qf=Ho,Kf=ai,Gf=xs;const Xf=vs;class Wi{constructor(e,t,n){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=n,this._map=void 0;let i,s=Kf;this.result=new Xf(this._processor,i,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,"root",{get(){return o.root}});let l=new Qf(s,i,this._opts,t);if(l.isMap()){let[d,c]=l.generate();d&&(this.result.css=d),c&&(this.result.map=c)}}get[Symbol.toStringTag](){return"NoWorkResult"}get processor(){return this.result.processor}get opts(){return this.result.opts}get css(){return this.result.css}get content(){return this.result.css}get map(){return this.result.map}get root(){if(this._root)return this._root;let e,t=Gf;try{e=t(this._css,this._opts)}catch(n){this.error=n}if(this.error)throw this.error;return this._root=e,e}get messages(){return[]}warnings(){return[]}toString(){return this._css}then(e,t){return this.async().then(e,t)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}sync(){if(this.error)throw this.error;return this.result}}var Jf=Wi;Wi.default=Wi;let Zf=Jf,eh=sl,th=_s,nh=vn;class un{constructor(e=[]){this.version="8.4.14",this.plugins=this.normalize(e)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}process(e,t={}){return this.plugins.length===0&&typeof t.parser>"u"&&typeof t.stringifier>"u"&&typeof t.syntax>"u"?new Zf(this,e,t):new eh(this,e,t)}normalize(e){let t=[];for(let n of e)if(n.postcss===!0?n=n():n.postcss&&(n=n.postcss),typeof n=="object"&&Array.isArray(n.plugins))t=t.concat(n.plugins);else if(typeof n=="object"&&n.postcssPlugin)t.push(n);else if(typeof n=="function")t.push(n);else if(!(typeof n=="object"&&(n.parse||n.stringify)))throw new Error(n+" is not a PostCSS plugin");return t}}var rh=un;un.default=un;nh.registerProcessor(un);th.registerProcessor(un);let ih=li,sh=Mo,ah=di,oh=Ts,lh=ci,ch=vn,dh=As;function pn(r,e){if(Array.isArray(r))return r.map(i=>pn(i));let{inputs:t,...n}=r;if(t){e=[];for(let i of t){let s={...i,__proto__:lh.prototype};s.map&&(s.map={...s.map,__proto__:sh.prototype}),e.push(s)}}if(n.nodes&&(n.nodes=r.nodes.map(i=>pn(i,e))),n.source){let{inputId:i,...s}=n.source;n.source=s,i!=null&&(n.source.input=e[i])}if(n.type==="root")return new ch(n);if(n.type==="decl")return new ih(n);if(n.type==="rule")return new dh(n);if(n.type==="comment")return new ah(n);if(n.type==="atrule")return new oh(n);throw new Error("Unknown node type: "+r.type)}var uh=pn;pn.default=pn;let ph=bs,al=li,fh=sl,hh=ft,Rs=rh,mh=ai,gh=uh,ol=_s,yh=Jo,ll=di,cl=Ts,Sh=vs,bh=ci,wh=xs,Ch=nl,dl=As,ul=vn,_h=oi;function re(...r){return r.length===1&&Array.isArray(r[0])&&(r=r[0]),new Rs(r)}re.plugin=function(e,t){let n=!1;function i(...o){console&&console.warn&&!n&&(n=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+`: \u91CC\u9762 postcss.plugin \u88AB\u5F03\u7528. \u8FC1\u79FB\u6307\u5357:
https://www.w3ctech.com/topic/2226`));let l=t(...o);return l.postcssPlugin=e,l.postcssVersion=new Rs().version,l}let s;return Object.defineProperty(i,"postcss",{get(){return s||(s=i()),s}}),i.process=function(o,l,d){return re([i(d)]).process(o,l)},i};re.stringify=mh;re.parse=wh;re.fromJSON=gh;re.list=Ch;re.comment=r=>new ll(r);re.atRule=r=>new cl(r);re.decl=r=>new al(r);re.rule=r=>new dl(r);re.root=r=>new ul(r);re.document=r=>new ol(r);re.CssSyntaxError=ph;re.Declaration=al;re.Container=hh;re.Processor=Rs;re.Document=ol;re.Comment=ll;re.Warning=yh;re.AtRule=cl;re.Result=Sh;re.Input=bh;re.Rule=dl;re.Root=ul;re.Node=_h;fh.registerPostcss(re);var vh=re;re.default=re;const Th=oo,da=Cp,{isPlainObject:Ah}=ys,ua=Pp,xh=Lo.exports,{parse:Rh}=vh,Ih=["img","audio","video","picture","svg","object","map","iframe","embed"],Eh=["script","style"];function Bt(r,e){r&&Object.keys(r).forEach(function(t){e(r[t],t)})}function He(r,e){return{}.hasOwnProperty.call(r,e)}function pa(r,e){const t=[];return Bt(r,function(n){e(n)&&t.push(n)}),t}function Oh(r){for(const e in r)if(He(r,e))return!1;return!0}function qh(r){return r.map(function(e){if(!e.url)throw new Error("URL missing");return e.url+(e.w?` ${e.w}w`:"")+(e.h?` ${e.h}h`:"")+(e.d?` ${e.d}x`:"")}).join(", ")}var Nh=fn;const kh=/^[^\0\t\n\f\r /<=>]+$/;function fn(r,e,t){if(r==null)return"";let n="",i="";function s(v,q){const k=this;this.tag=v,this.attribs=q||{},this.tagPosition=n.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){if(p.length){const B=p[p.length-1];B.text+=k.text}},this.updateParentNodeMediaChildren=function(){p.length&&Ih.includes(this.tag)&&p[p.length-1].mediaChildren.push(this.tag)}}e=Object.assign({},fn.defaults,e),e.parser=Object.assign({},Lh,e.parser),Eh.forEach(function(v){e.allowedTags&&e.allowedTags.indexOf(v)>-1&&!e.allowVulnerableTags&&console.warn(`

\u26A0\uFE0F Your \`allowedTags\` option includes, \`${v}\`, which is inherently
vulnerable to XSS attacks. Please remove it from \`allowedTags\`.
Or, to disable this warning, add the \`allowVulnerableTags\` option
and ensure you are accounting for this risk.

`)});const o=e.nonTextTags||["script","style","textarea","option"];let l,d;e.allowedAttributes&&(l={},d={},Bt(e.allowedAttributes,function(v,q){l[q]=[];const k=[];v.forEach(function(B){typeof B=="string"&&B.indexOf("*")>=0?k.push(da(B).replace(/\\\*/g,".*")):l[q].push(B)}),k.length&&(d[q]=new RegExp("^("+k.join("|")+")$"))}));const c={},y={},m={};Bt(e.allowedClasses,function(v,q){l&&(He(l,q)||(l[q]=[]),l[q].push("class")),c[q]=[],m[q]=[];const k=[];v.forEach(function(B){typeof B=="string"&&B.indexOf("*")>=0?k.push(da(B).replace(/\\\*/g,".*")):B instanceof RegExp?m[q].push(B):c[q].push(B)}),k.length&&(y[q]=new RegExp("^("+k.join("|")+")$"))});const f={};let b;Bt(e.transformTags,function(v,q){let k;typeof v=="function"?k=v:typeof v=="string"&&(k=fn.simpleTransform(v)),q==="*"?b=k:f[q]=k});let h,p,g,w,R,S,u=!1;x();const _=new Th.Parser({onopentag:function(v,q){if(e.enforceHtmlBoundary&&v==="html"&&x(),R){S++;return}const k=new s(v,q);p.push(k);let B=!1;const Z=!!k.text;let ee;if(He(f,v)&&(ee=f[v](v,q),k.attribs=q=ee.attribs,ee.text!==void 0&&(k.innerText=ee.text),v!==ee.tagName&&(k.name=v=ee.tagName,w[h]=ee.tagName)),b&&(ee=b(v,q),k.attribs=q=ee.attribs,v!==ee.tagName&&(k.name=v=ee.tagName,w[h]=ee.tagName)),(e.allowedTags&&e.allowedTags.indexOf(v)===-1||e.disallowedTagsMode==="recursiveEscape"&&!Oh(g)||e.nestingLimit!=null&&h>=e.nestingLimit)&&(B=!0,g[h]=!0,e.disallowedTagsMode==="discard"&&o.indexOf(v)!==-1&&(R=!0,S=1),g[h]=!0),h++,B){if(e.disallowedTagsMode==="discard")return;i=n,n=""}n+="<"+v,v==="script"&&(e.allowedScriptHostnames||e.allowedScriptDomains)&&(k.innerText=""),(!l||He(l,v)||l["*"])&&Bt(q,function(G,U){if(!kh.test(U)){delete k.attribs[U];return}let ae=!1;if(!l||He(l,v)&&l[v].indexOf(U)!==-1||l["*"]&&l["*"].indexOf(U)!==-1||He(d,v)&&d[v].test(U)||d["*"]&&d["*"].test(U))ae=!0;else if(l&&l[v]){for(const T of l[v])if(Ah(T)&&T.name&&T.name===U){ae=!0;let N="";if(T.multiple===!0){const F=G.split(" ");for(const H of F)T.values.indexOf(H)!==-1&&(N===""?N=H:N+=" "+H)}else T.values.indexOf(G)>=0&&(N=G);G=N}}if(ae){if(e.allowedSchemesAppliedToAttributes.indexOf(U)!==-1&&O(v,G)){delete k.attribs[U];return}if(v==="script"&&U==="src"){let T=!0;try{const N=E(G);if(e.allowedScriptHostnames||e.allowedScriptDomains){const F=(e.allowedScriptHostnames||[]).find(function(j){return j===N.url.hostname}),H=(e.allowedScriptDomains||[]).find(function(j){return N.url.hostname===j||N.url.hostname.endsWith(`.${j}`)});T=F||H}}catch{T=!1}if(!T){delete k.attribs[U];return}}if(v==="iframe"&&U==="src"){let T=!0;try{const N=E(G);if(N.isRelativeUrl)T=He(e,"allowIframeRelativeUrls")?e.allowIframeRelativeUrls:!e.allowedIframeHostnames&&!e.allowedIframeDomains;else if(e.allowedIframeHostnames||e.allowedIframeDomains){const F=(e.allowedIframeHostnames||[]).find(function(j){return j===N.url.hostname}),H=(e.allowedIframeDomains||[]).find(function(j){return N.url.hostname===j||N.url.hostname.endsWith(`.${j}`)});T=F||H}}catch{T=!1}if(!T){delete k.attribs[U];return}}if(U==="srcset")try{let T=xh(G);if(T.forEach(function(N){O("srcset",N.url)&&(N.evil=!0)}),T=pa(T,function(N){return!N.evil}),T.length)G=qh(pa(T,function(N){return!N.evil})),k.attribs[U]=G;else{delete k.attribs[U];return}}catch{delete k.attribs[U];return}if(U==="class"){const T=c[v],N=c["*"],F=y[v],H=m[v],j=y["*"],me=[F,j].concat(H).filter(function(te){return te});if(T&&N?G=V(G,ua(T,N),me):G=V(G,T||N,me),!G.length){delete k.attribs[U];return}}if(U==="style")try{const T=Rh(v+" {"+G+"}"),N=L(T,e.allowedStyles);if(G=P(N),G.length===0){delete k.attribs[U];return}}catch{delete k.attribs[U];return}n+=" "+U,G&&G.length&&(n+='="'+A(G,!0)+'"')}else delete k.attribs[U]}),e.selfClosing.indexOf(v)!==-1?n+=" />":(n+=">",k.innerText&&!Z&&!e.textFilter&&(n+=A(k.innerText),u=!0)),B&&(n=i+A(n),i="")},ontext:function(v){if(R)return;const q=p[p.length-1];let k;if(q&&(k=q.tag,v=q.innerText!==void 0?q.innerText:v),e.disallowedTagsMode==="discard"&&(k==="script"||k==="style"))n+=v;else{const B=A(v,!1);e.textFilter&&!u?n+=e.textFilter(B,k):u||(n+=B)}if(p.length){const B=p[p.length-1];B.text+=v}},onclosetag:function(v){if(R)if(S--,!S)R=!1;else return;const q=p.pop();if(!q)return;R=e.enforceHtmlBoundary?v==="html":!1,h--;const k=g[h];if(k){if(delete g[h],e.disallowedTagsMode==="discard"){q.updateParentNodeText();return}i=n,n=""}if(w[h]&&(v=w[h],delete w[h]),e.exclusiveFilter&&e.exclusiveFilter(q)){n=n.substr(0,q.tagPosition);return}if(q.updateParentNodeMediaChildren(),q.updateParentNodeText(),e.selfClosing.indexOf(v)!==-1){k&&(n=i,i="");return}n+="</"+v+">",k&&(n=i+A(n),i=""),u=!1}},e.parser);return _.write(r),_.end(),n;function x(){n="",h=0,p=[],g={},w={},R=!1,S=0}function A(v,q){return typeof v!="string"&&(v=v+""),e.parser.decodeEntities&&(v=v.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),q&&(v=v.replace(/"/g,"&quot;"))),v=v.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),q&&(v=v.replace(/"/g,"&quot;")),v}function O(v,q){for(q=q.replace(/[\x00-\x20]+/g,"");;){const Z=q.indexOf("<!--");if(Z===-1)break;const ee=q.indexOf("-->",Z+4);if(ee===-1)break;q=q.substring(0,Z)+q.substring(ee+3)}const k=q.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!k)return q.match(/^[/\\]{2}/)?!e.allowProtocolRelative:!1;const B=k[1].toLowerCase();return He(e.allowedSchemesByTag,v)?e.allowedSchemesByTag[v].indexOf(B)===-1:!e.allowedSchemes||e.allowedSchemes.indexOf(B)===-1}function E(v){if(v=v.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//"),v.startsWith("relative:"))throw new Error("relative: exploit attempt");let q="relative://relative-site";for(let Z=0;Z<100;Z++)q+=`/${Z}`;const k=new URL(v,q);return{isRelativeUrl:k&&k.hostname==="relative-site"&&k.protocol==="relative:",url:k}}function L(v,q){if(!q)return v;const k=v.nodes[0];let B;return q[k.selector]&&q["*"]?B=ua(q[k.selector],q["*"]):B=q[k.selector]||q["*"],B&&(v.nodes[0].nodes=k.nodes.reduce(M(B),[])),v}function P(v){return v.nodes[0].nodes.reduce(function(q,k){return q.push(`${k.prop}:${k.value}${k.important?" !important":""}`),q},[]).join(";")}function M(v){return function(q,k){return He(v,k.prop)&&v[k.prop].some(function(Z){return Z.test(k.value)})&&q.push(k),q}}function V(v,q,k){return q?(v=v.split(/\s+/),v.filter(function(B){return q.indexOf(B)!==-1||k.some(function(Z){return Z.test(B)})}).join(" ")):v}}const Lh={decodeEntities:!0};fn.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1};fn.simpleTransform=function(r,e,t){return t=t===void 0?!0:t,e=e||{},function(n,i){let s;if(t)for(s in e)i[s]=e[s];else i=e;return{tagName:r,attribs:i}}};const Dh=Nh;function Bn(r){let e="pill-xl ";const{align:t="",highlight:n=""}=r,i=t.toLowerCase();i==="left"&&(e+="floatLeft "),i==="right"&&(e+="floatright ");const s=n==="true"?"secondary":"light-secondary";return i==="center"?a("div",{className:"bootstrap-4-backport",style:{textAlign:"center"},children:a(de,{href:r.url,className:e,variant:s,children:r.text})}):a("span",{className:"bootstrap-4-backport",children:a(de,{href:r.url,className:e,variant:s,children:r.text})})}try{Bn.displayName="MarkdownButton",Bn.__docgenInfo={description:"",displayName:"MarkdownButton",props:{align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"string"}},highlight:{defaultValue:null,description:"",name:"highlight",required:!1,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownButton.tsx#MarkdownButton"]={docgenInfo:Bn.__docgenInfo,name:"MarkdownButton",path:"src/lib/containers/markdown/widget/MarkdownButton.tsx#MarkdownButton"})}catch{}function Ph(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=r.boundaryCount,t=e===void 0?1:e,n=r.componentName,i=n===void 0?"usePagination":n,s=r.count,o=s===void 0?1:s,l=r.defaultPage,d=l===void 0?1:l,c=r.disabled,y=c===void 0?!1:c,m=r.hideNextButton,f=m===void 0?!1:m,b=r.hidePrevButton,h=b===void 0?!1:b,p=r.onChange,g=r.page,w=r.showFirstButton,R=w===void 0?!1:w,S=r.showLastButton,u=S===void 0?!1:S,_=r.siblingCount,x=_===void 0?1:_,A=cs(r,["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"]),O=fc({controlled:g,default:d,name:i,state:"page"}),E=bd(O,2),L=E[0],P=E[1],M=function(ae,T){g||P(T),p&&p(ae,T)},V=function(ae,T){var N=T-ae+1;return Array.from({length:N},function(F,H){return ae+H})},v=V(1,Math.min(t,o)),q=V(Math.max(o-t+1,t+1),o),k=Math.max(Math.min(L-x,o-t-x*2-1),t+2),B=Math.min(Math.max(L+x,t+x*2+2),q[0]-2),Z=[].concat(Fe(R?["first"]:[]),Fe(h?[]:["previous"]),Fe(v),Fe(k>t+2?["start-ellipsis"]:t+1<o-t?[t+1]:[]),Fe(V(k,B)),Fe(B<o-t-1?["end-ellipsis"]:o-t>t?[o-t]:[]),Fe(q),Fe(f?[]:["next"]),Fe(u?["last"]:[])),ee=function(ae){switch(ae){case"first":return 1;case"previous":return L-1;case"next":return L+1;case"last":return o;default:return null}},G=Z.map(function(U){return typeof U=="number"?{onClick:function(T){M(T,U)},type:"page",page:U,selected:U===L,disabled:y,"aria-current":U===L?"true":void 0}:{onClick:function(T){M(T,ee(U))},type:U,page:ee(U),selected:!1,disabled:y||U.indexOf("ellipsis")===-1&&(U==="next"||U==="last"?L>=o:L<=1)}});return Fr({items:G},A)}const fa=ut(a("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"})),ha=ut(a("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"})),ma=ut(a("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),ga=ut(a("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}));var Mh=function(e){return{root:Fr({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:e.palette.text.primary}),page:{transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&$focusVisible":{backgroundColor:e.palette.action.focus},"&$selected":{backgroundColor:e.palette.action.selected,"&:hover, &$focusVisible":{backgroundColor:et(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.palette.action.selected}},"&$disabled":{opacity:1,color:e.palette.action.disabled,backgroundColor:e.palette.action.selected}},"&$disabled":{opacity:e.palette.action.disabledOpacity}},sizeSmall:{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px","& $icon":{fontSize:e.typography.pxToRem(18)}},sizeLarge:{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15),"& $icon":{fontSize:e.typography.pxToRem(22)}},textPrimary:{"&$selected":{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover, &$focusVisible":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}},"&$disabled":{color:e.palette.action.disabled}}},textSecondary:{"&$selected":{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover, &$focusVisible":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}},"&$disabled":{color:e.palette.action.disabled}}},outlined:{border:"1px solid ".concat(e.palette.type==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$selected":{"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}}},outlinedPrimary:{"&$selected":{color:e.palette.primary.main,border:"1px solid ".concat(et(e.palette.primary.main,.5)),backgroundColor:et(e.palette.primary.main,e.palette.action.activatedOpacity),"&:hover, &$focusVisible":{backgroundColor:et(e.palette.primary.main,e.palette.action.activatedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}},outlinedSecondary:{"&$selected":{color:e.palette.secondary.main,border:"1px solid ".concat(et(e.palette.secondary.main,.5)),backgroundColor:et(e.palette.secondary.main,e.palette.action.activatedOpacity),"&:hover, &$focusVisible":{backgroundColor:et(e.palette.secondary.main,e.palette.action.activatedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}},rounded:{borderRadius:e.shape.borderRadius},ellipsis:{height:"auto","&$disabled":{opacity:e.palette.action.disabledOpacity}},focusVisible:{},disabled:{},selected:{},icon:{fontSize:e.typography.pxToRem(20),margin:"0 -8px"}}},Vh=I.exports.forwardRef(function(e,t){var n=e.classes,i=e.className,s=e.color,o=s===void 0?"standard":s,l=e.component,d=e.disabled,c=d===void 0?!1:d,y=e.page,m=e.selected,f=m===void 0?!1:m,b=e.shape,h=b===void 0?"round":b,p=e.size,g=p===void 0?"medium":p,w=e.type,R=w===void 0?"page":w,S=e.variant,u=S===void 0?"text":S,_=cs(e,["classes","className","color","component","disabled","page","selected","shape","size","type","variant"]),x=wd(),A=x.direction==="rtl"?{previous:ga,next:ma,last:fa,first:ha}:{previous:ma,next:ga,first:fa,last:ha},O=A[R];return R==="start-ellipsis"||R==="end-ellipsis"?a("div",{ref:t,className:Ii(n.root,n.ellipsis,c&&n.disabled,g!=="medium"&&n["size".concat(hi(g))]),children:"\u2026"}):C(ud,{ref:t,component:l,disabled:c,focusVisibleClassName:n.focusVisible,className:Ii(n.root,n.page,n[u],n[h],i,o!=="standard"&&n["".concat(u).concat(hi(o))],c&&n.disabled,f&&n.selected,g!=="medium"&&n["size".concat(hi(g))]),..._,children:[R==="page"&&y,O?a(O,{className:n.icon}):null]})});const Fh=io(Mh,{name:"MuiPaginationItem"})(Vh);var Bh={root:{},ul:{display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}};function Uh(r,e,t){return r==="page"?"".concat(t?"":"Go to ","page ").concat(e):"Go to ".concat(r," page")}var Hh=I.exports.forwardRef(function(e,t){e.boundaryCount;var n=e.classes,i=e.className,s=e.color,o=s===void 0?"standard":s;e.count,e.defaultPage,e.disabled;var l=e.getItemAriaLabel,d=l===void 0?Uh:l;e.hideNextButton,e.hidePrevButton,e.onChange,e.page;var c=e.renderItem,y=c===void 0?function(u){return a(Fh,{...u})}:c,m=e.shape,f=m===void 0?"round":m;e.showFirstButton,e.showLastButton,e.siblingCount;var b=e.size,h=b===void 0?"medium":b,p=e.variant,g=p===void 0?"text":p,w=cs(e,["boundaryCount","classes","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"]),R=Ph(Fr({},e,{componentName:"Pagination"})),S=R.items;return a("nav",{"aria-label":"pagination navigation",className:Ii(n.root,i),ref:t,...w,children:a("ul",{className:n.ul,children:S.map(function(u,_){return a("li",{children:y(Fr({},u,{color:o,"aria-label":d(u.type,u.page,u.selected),shape:f,size:h,variant:g}))},_)})})})});const $h=io(Bh,{name:"MuiPagination"})(Hh),Un=({info:r})=>a(D,{children:r&&C("p",{className:"SubmissionInfoCard",children:[a("strong",{children:" Project Lead: "})," ",a("span",{children:r.projectLead})," ",a("br",{}),a("strong",{children:" Institution: "})," ",a("span",{children:r.institution})," ",a("br",{}),a("strong",{children:" Data Access Request Submitted By: "})," ",a(lt,{ownerId:r.submittedBy,size:rn})," ",a("br",{}),C("strong",{children:[" ","Intended Data Use Statement (accepted on"," ",Xa(Jr(r.modifiedOn),"M/D/YYYY"),"):"]}),a("div",{children:r.intendedDataUseStatement}),r.accessorChanges&&r.accessorChanges.map(e=>C("div",{children:[a(lt,{ownerId:e.userId,size:rn})," ",e.type]},`${e.userId}-${e.type}`))]})}),Ht=()=>C("p",{className:"SubmissionInfoCard",children:[a(Ja,{numCols:1,numRows:4}),a(Ai,{variant:"rect",width:"100%",height:80})]});try{Un.displayName="SubmissionInfoCard",Un.__docgenInfo={description:"",displayName:"SubmissionInfoCard",props:{info:{defaultValue:null,description:"",name:"info",required:!0,type:{name:"SubmissionInfo"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReportSubmissionInfo.tsx#SubmissionInfoCard"]={docgenInfo:Un.__docgenInfo,name:"SubmissionInfoCard",path:"src/lib/containers/IDUReportSubmissionInfo.tsx#SubmissionInfoCard"})}catch{}try{Ht.displayName="LoadingSubmissionInfoCard",Ht.__docgenInfo={description:"",displayName:"LoadingSubmissionInfoCard",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReportSubmissionInfo.tsx#LoadingSubmissionInfoCard"]={docgenInfo:Ht.__docgenInfo,name:"LoadingSubmissionInfoCard",path:"src/lib/containers/IDUReportSubmissionInfo.tsx#LoadingSubmissionInfoCard"})}catch{}const Hn=r=>{var m;const{accessRequirementId:e}=r,{ref:t,inView:n}=Nt(),{data:i,status:s,isLoading:o,hasNextPage:l,isFetchingNextPage:d,fetchNextPage:c}=Od(e,{useErrorBoundary:!0});I.exports.useEffect(()=>{s==="success"&&!d&&l&&c&&n&&c()},[s,l,d,c,n]);const y=(m=i==null?void 0:i.pages.flatMap(f=>f.results))!=null?m:[];return C(D,{children:[y.length>0&&C("div",{className:"IDUReport",children:[y.map(f=>C(ge.Fragment,{children:[a(Un,{info:f}),a("hr",{})]},JSON.stringify(f))),a("div",{ref:t})]}),(o||d)&&C(D,{children:[a(Ht,{}),a(Ht,{})]})]})},jh=Hn;try{Hn.displayName="IDUReport",Hn.__docgenInfo={description:"",displayName:"IDUReport",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReport.tsx#IDUReport"]={docgenInfo:Hn.__docgenInfo,name:"IDUReport",path:"src/lib/containers/IDUReport.tsx#IDUReport"})}catch{}function $n(r){const{accessRestrictionId:e}=r;return a(jh,{accessRequirementId:e})}try{$n.displayName="MarkdownIDUReport",$n.__docgenInfo={description:"",displayName:"MarkdownIDUReport",props:{accessRestrictionId:{defaultValue:null,description:"",name:"accessRestrictionId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownIDUReport.tsx#MarkdownIDUReport"]={docgenInfo:$n.__docgenInfo,name:"MarkdownIDUReport",path:"src/lib/containers/markdown/widget/MarkdownIDUReport.tsx#MarkdownIDUReport"})}catch{}class $t extends I.exports.Component{constructor(e){super(e),this.getEntity=this.getEntity.bind(this),this.getSynapseFiles=this.getSynapseFiles.bind(this),this.state={preSignedURL:""}}getEntity(){const{synapseId:e}=this.props;e&&Qr(this.context.accessToken,e).then(t=>{const n=[{associateObjectId:e,associateObjectType:xe.FileEntity,fileHandleId:t.dataFileHandleId}];this.getSynapseFiles(n,t.dataFileHandleId)})}getSynapseFiles(e,t){Rt({includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:e},this.context.accessToken).then(i=>{const{preSignedURL:s}=i.requestedFiles.filter(o=>o.fileHandleId===t)[0];this.setState({preSignedURL:s})}).catch(i=>{console.error("Error on getting image ",i)})}componentDidMount(){if(!this.props.wikiId)this.getEntity();else{const{fileName:e,fileResults:t=[]}=this.props,{id:n}=t.filter(s=>s.fileName===e)[0],i=[{associateObjectId:this.props.wikiId,associateObjectType:xe.WikiAttachment,fileHandleId:n}];this.getSynapseFiles(i,n)}}render(){const{params:e}=this.props,{align:t="",altText:n="synapse image"}=e;let i="auto";e.scale&&e.scale!=="100"&&(i=`${Number(e.scale)}%`);const s=t.toLowerCase();let o="";s==="left"&&(o="floatLeft"),s==="right"&&(o="floatright"),s==="center"&&(o="align-center");let l={width:i,height:i};return this.state.preSignedURL?a(I.exports.Fragment,{children:a("img",{alt:n,className:"img-fluid  "+o,src:this.state.preSignedURL,style:l})}):null}}$t.contextType=hn;const ya=$t;try{$t.displayName="SynapseImage",$t.__docgenInfo={description:"",displayName:"SynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},fileResults:{defaultValue:null,description:"",name:"fileResults",required:!1,type:{name:"FileHandle[]"}},params:{defaultValue:null,description:"",name:"params",required:!0,type:{name:"{ align: string; scale: string; responsive: string; altText: string; }"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/SynapseImage.tsx#SynapseImage"]={docgenInfo:$t.__docgenInfo,name:"SynapseImage",path:"src/lib/containers/widgets/SynapseImage.tsx#SynapseImage"})}catch{}const wt=ge.createContext(void 0),jn=({children:r,wikiContext:e})=>a(wt.Provider,{value:e,children:r}),_i=wt.Consumer;function pl(){const r=I.exports.useContext(wt);return r!=null?r:{}}try{wt.displayName="SynapseWikiContext",wt.__docgenInfo={description:"This must be exported to use the context in class components.",displayName:"SynapseWikiContext",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContext"]={docgenInfo:wt.__docgenInfo,name:"SynapseWikiContext",path:"src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContext"})}catch{}try{jn.displayName="SynapseWikiContextProvider",jn.__docgenInfo={description:"Provides context related to Synapse Wikis",displayName:"SynapseWikiContextProvider",props:{wikiContext:{defaultValue:null,description:"",name:"wikiContext",required:!1,type:{name:"SynapseWikiContextType"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextProvider"]={docgenInfo:jn.__docgenInfo,name:"SynapseWikiContextProvider",path:"src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextProvider"})}catch{}try{_i.displayName="SynapseWikiContextConsumer",_i.__docgenInfo={description:"",displayName:"SynapseWikiContextConsumer",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextConsumer"]={docgenInfo:_i.__docgenInfo,name:"SynapseWikiContextConsumer",path:"src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextConsumer"})}catch{}function Wn(r){const{wikiId:e,wikiPage:t,fileHandles:n}=pl();return r.fileName?n?a(ya,{params:r,fileName:r.fileName,wikiId:e||(t==null?void 0:t.id),fileResults:n.list}):a(D,{}):r.synapseId?a(ya,{params:r,synapseId:r.synapseId}):a(D,{})}try{Wn.displayName="MarkdownSynapseImage",Wn.__docgenInfo={description:"",displayName:"MarkdownSynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},align:{defaultValue:null,description:"",name:"align",required:!0,type:{name:"string"}},scale:{defaultValue:null,description:"",name:"scale",required:!0,type:{name:"string"}},responsive:{defaultValue:null,description:"",name:"responsive",required:!0,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownSynapseImage.tsx#MarkdownSynapseImage"]={docgenInfo:Wn.__docgenInfo,name:"MarkdownSynapseImage",path:"src/lib/containers/markdown/widget/MarkdownSynapseImage.tsx#MarkdownSynapseImage"})}catch{}const Wh=jc(Wc);class jt extends I.exports.Component{constructor(e){super(e),this.state={isLoaded:!1,queryData:{}},this.fetchPlotlyData=this.fetchPlotlyData.bind(this),this.showPlot=this.showPlot.bind(this)}componentDidMount(){this.fetchPlotlyData()}fetchPlotlyData(){const{query:e}=this.props.widgetparamsMapped,t={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:mn,entityId:It(e),query:{sql:e}};Na(t,this.context.accessToken).then(n=>{this.setState({isLoaded:!0,queryData:n})}).catch(n=>{console.log("Error on full table query ",n)})}showPlot(){var b,h,p,g;if(!this.state.isLoaded)return;const{title:e,xtitle:t,ytitle:n,type:i,xaxistype:s,showlegend:o}=this.props.widgetparamsMapped,l=this.state,d=this.props.widgetparamsMapped.horizontal.toLowerCase(),c={showlegend:o,title:e};t&&(c.xaxis={title:t}),s&&(c.xaxis={...c.xaxis,xaxistype:s.toLowerCase()}),n&&(c.yaxis={title:n});const y=[],m=d?"v":"h",f=(h=(b=l.queryData.queryResult)==null?void 0:b.queryResults.headers)!=null?h:[];for(let w=0;w<f.length-1;w+=1)y[w]={orientation:m,name:f[w+1].name,type:i.toLowerCase(),x:[],y:[]};for(const w of(g=(p=l.queryData.queryResult)==null?void 0:p.queryResults.rows)!=null?g:[])for(let R=1;R<w.values.length;R+=1){const S=w.values;y[R-1].x.push(S[0]),y[R-1].y.push(S[R])}return a(Wh,{layout:c,data:y})}render(){return this.state.isLoaded?this.showPlot():null}}jt.contextType=hn;const zh=jt;try{jt.displayName="SynapsePlot",jt.__docgenInfo={description:"",displayName:"SynapsePlot",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},widgetparamsMapped:{defaultValue:null,description:"",name:"widgetparamsMapped",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/SynapsePlot.tsx#SynapsePlot"]={docgenInfo:jt.__docgenInfo,name:"SynapsePlot",path:"src/lib/containers/widgets/SynapsePlot.tsx#SynapsePlot"})}catch{}function zn(r){const{ownerId:e,wikiId:t,wikiPage:n}=pl();return a(zh,{ownerId:e,wikiId:t||(n==null?void 0:n.id),widgetparamsMapped:r})}try{zn.displayName="MarkdownSynapsePlot",zn.__docgenInfo={description:"",displayName:"MarkdownSynapsePlot",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownSynapsePlot.tsx#MarkdownSynapsePlot"]={docgenInfo:zn.__docgenInfo,name:"MarkdownSynapsePlot",path:"src/lib/containers/markdown/widget/MarkdownSynapsePlot.tsx#MarkdownSynapsePlot"})}catch{}const Yh=200,Sa="ESTIMATED_DOWNLOAD_SPEED_EXPIRE_TIME",ba="ESTIMATED_DOWNLOAD_SPEED",Qh="syn12600511",Kh=r=>new Promise((e,t)=>{const n=localStorage.getItem(Sa),i=localStorage.getItem(ba);if(n&&i&&new Date().getTime()<Number(n)){e(Number(i));return}Qr(r,Qh).then(s=>{const o=s,l=[{associateObjectId:o.id,associateObjectType:xe.FileEntity,fileHandleId:o.dataFileHandleId}];Rt({includeFileHandles:!0,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:l},r).then(c=>{const y=c.requestedFiles[0].preSignedURL,m=c.requestedFiles[0].fileHandle,f=new Date().getTime();return Cl(m,y).then(()=>{const b=m.contentSize/((new Date().getTime()-f-Yh)/1e3),h=new Date().getTime();localStorage.setItem(Sa,(h+1e3*60*5).toString()),localStorage.setItem(ba,b.toString()),e(b)})})}).catch(s=>t(s))}),Gh=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];function fl(r){if(!r)return"";const e=Math.floor(Math.log(r)/Math.log(1024));return!r&&"0 Bytes"||(r/Math.pow(1024,e)).toFixed(2)+" "+Gh[e]}function Yn(r){const{numFiles:e,numBytes:t}=r,{accessToken:n}=J(),[i,s]=I.exports.useState({isLoading:!!t,downloadSpeed:0}),{isLoading:o,downloadSpeed:l}=i;I.exports.useEffect(()=>{n&&Kh(n).then(h=>{s({isLoading:!1,downloadSpeed:h})})},[n]);const d=o||l===0||!t?0:t/l,c=d===0,y=c?"":Jr.duration(d,"seconds").humanize(),m=e===0,f=m?"SRC-inactive":"SRC-primary-text-color",b=c?"SRC-inactive":"SRC-primary-text-color";return C("span",{className:"download-details-container",children:[C("span",{children:[a("span",{className:f,children:a(ce,{options:{icon:"file"}})}),m?a(pi,{width:50}):C(D,{children:[" ",e,"\xA0files "]})]}),t&&a(Je,{title:"This is the total size of all files. Zipped package(s) will likely be smaller.",enterNextDelay:Vr,placement:"top",children:C("span",{"data-testid":"numBytesUI",children:[a("span",{className:b,children:a(ce,{options:{icon:"database"}})}),c?a(pi,{width:50}):fl(t)]})}),t&&a(Je,{title:"This is an estimate of how long package download will take.",enterNextDelay:Vr,placement:"top",children:C("span",{"data-testid":"downloadTimeEstimateUI",children:[a("span",{className:b,children:a(ce,{options:{icon:"clock"}})}),o&&e>0?a(pi,{width:50}):y]})})]})}try{Yn.displayName="DownloadDetails",Yn.__docgenInfo={description:`Displays download information including number of files, size of download, and time to download.
Prefer to use {@link download_list_v2 /DownloadDetails} instead, particularly when you have information about file packaging in/eligibility`,displayName:"DownloadDetails",props:{numFiles:{defaultValue:null,description:"",name:"numFiles",required:!0,type:{name:"number"}},numBytes:{defaultValue:null,description:"",name:"numBytes",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/download_list/DownloadDetails.tsx#DownloadDetails"]={docgenInfo:Yn.__docgenInfo,name:"DownloadDetails",path:"src/lib/containers/download_list/DownloadDetails.tsx#DownloadDetails"})}catch{}async function Xh(r,e,t,n,i){try{const s={query:t==null?void 0:t.query,concreteType:"org.sagebionetworks.repo.model.download.AddToDownloadListRequest",parentId:n};return await vl(s,r),vt("File(s) were successfully added to your Download Cart.","success",{primaryButtonConfig:{text:"View Download Cart",onClick:i}}),e(),[0,""]}catch(s){return vt("danger",void 0,s.reason),e(),[0,""]}}const Wt={[2]:{className:"alert-info",infoText:"Would you like to add all files to the download cart?",closeText:"Cancel"},[3]:{className:"alert-info",infoText:C(D,{children:["Note: Files that you add will be mixed in with the files already in your download cart.",a("br",{}),"If you don\u2019t want to mix these files, clear your download cart before continuing."]}),closeText:"Cancel"},[1]:{className:"alert-info",infoText:"Adding Files To List",closeText:"Cancel"},[0]:{className:"alert-info",infoText:"Calculating File Size",closeText:"Cancel"},[4]:{className:"alert-danger",closeText:"Close",infoText:C(D,{children:["Please ",a(_l,{style:{color:"#337ab7"}})," to add files to your download cart."]})}},Jh=r=>{switch(r.status){case 0:case 1:return C("div",{children:[a("span",{className:"spinner white"}),a("span",{className:"spinner__text",children:Wt[r.status].infoText})]});case 4:return a(D,{children:Wt[r.status].infoText});case 2:case 3:return C(D,{children:[a(Yn,{numFiles:r.fileCount,numBytes:r.fileSize}),a("span",{className:"download-confirmation-infoText",children:Wt[r.status].infoText})]});default:return a(D,{})}},Qn=({getLastQueryRequest:r,folderId:e,fnClose:t,setTopLevelControlsState:n,topLevelControlsState:i})=>{const{accessToken:s,downloadCartPageUrl:o}=J(),{showDownloadConfirmation:l=!0}=i!=null?i:{},[d,c]=I.exports.useState(s?0:4),[y,m]=I.exports.useState(0),[f,b]=I.exports.useState(),{data:h,refetch:p}=Gc(),g=r(),[w,R]=I.exports.useState(!1),S=I.exports.useCallback((M,V,v)=>{if(s&&v){const q=v.totalNumberOfFiles>0,k=M!=null?M:0;c(q?3:2),m(k),b(V)}},[s]),{data:u,isSuccess:_}=kd({parentId:e,includeSumFileSizes:!0,includeTotalChildCount:!0,includeTypes:[sc.FILE]});xi(()=>{_&&u&&h&&S(u.totalChildCount,u.sumFileSizesBytes,h)},[S,e,_,u,h]);const x=gn|Ki,A={...g,partMask:x},{data:O}=Qa(A);xi(()=>{var M,V;if(O&&h){const v=(M=O.sumFileSizes)==null?void 0:M.greaterThan;S(O.queryCount,v||(V=O.sumFileSizes)==null?void 0:V.sumFileSizesBytes,h)}},[S,g,O,h]);const E=t?()=>t():()=>{n&&n(M=>({...M,showDownloadConfirmation:!1}))},L=async()=>{if(!s)c(4);else{c(1);const v=(await Xh(s,E,g,e,()=>R(!0)))[0];c(v),p()}};w&&(window.location.href=o);const P=i==null?void 0:i.showFacetFilter;return a(D,{children:C(Sn,{dismissible:!1,show:!0,variant:"info",transition:!1,className:`download-confirmation ${Wt[d].className} ${l?"":"hidden"}
          ${P?Et:Ot}
        `,children:[a(Jh,{status:d,fileCount:y,fileSize:f}),C("div",{className:"download-confirmation-action",children:[d!==1&&a("button",{className:"btn btn-link",onClick:E,children:Wt[d].closeText}),(d===2||d===3)&&a("button",{type:"button",className:"btn btn-primary",onClick:L,children:"Add"})]})]})})};try{Qn.displayName="DownloadConfirmation",Qn.__docgenInfo={description:"",displayName:"DownloadConfirmation",props:{fnClose:{defaultValue:null,description:"",name:"fnClose",required:!1,type:{name:"(() => void)"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},folderId:{defaultValue:null,description:"",name:"folderId",required:!1,type:{name:"string"}},topLevelControlsState:{defaultValue:null,description:"",name:"topLevelControlsState",required:!1,type:{name:"TopLevelControlsState"}},setTopLevelControlsState:{defaultValue:null,description:"",name:"setTopLevelControlsState",required:!1,type:{name:"Dispatch<SetStateAction<TopLevelControlsState>>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/download_list/DownloadConfirmation.tsx#DownloadConfirmation"]={docgenInfo:Qn.__docgenInfo,name:"DownloadConfirmation",path:"src/lib/containers/download_list/DownloadConfirmation.tsx#DownloadConfirmation"})}catch{}var wa=function(e){return e.reduce(function(t,n){var i=n[0],s=n[1];return t[i]=s,t},{})},Ca=typeof window<"u"&&window.document&&window.document.createElement?I.exports.useLayoutEffect:I.exports.useEffect;function Zh(r){var e=r.state;Object.keys(e.elements).forEach(function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},s=e.elements[t];!eo(s)||!to(s)||(Object.assign(s.style,n),Object.keys(i).forEach(function(o){var l=i[o];l===!1?s.removeAttribute(o):s.setAttribute(o,l===!0?"":l)}))})}function em(r){var e=r.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(n){var i=e.elements[n],s=e.attributes[n]||{},o=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:t[n]),l=o.reduce(function(d,c){return d[c]="",d},{});!eo(i)||!to(i)||(Object.assign(i.style,l),Object.keys(s).forEach(function(d){i.removeAttribute(d)}))})}}const tm={name:"applyStyles",enabled:!0,phase:"write",fn:Zh,effect:em,requires:["computeStyles"]};var nm=[Zc,ed,td,tm,nd,rd,id,sd,ad],rm=Jc({defaultModifiers:nm}),im=typeof Element<"u",sm=typeof Map=="function",am=typeof Set=="function",om=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Kn(r,e){if(r===e)return!0;if(r&&e&&typeof r=="object"&&typeof e=="object"){if(r.constructor!==e.constructor)return!1;var t,n,i;if(Array.isArray(r)){if(t=r.length,t!=e.length)return!1;for(n=t;n--!==0;)if(!Kn(r[n],e[n]))return!1;return!0}var s;if(sm&&r instanceof Map&&e instanceof Map){if(r.size!==e.size)return!1;for(s=r.entries();!(n=s.next()).done;)if(!e.has(n.value[0]))return!1;for(s=r.entries();!(n=s.next()).done;)if(!Kn(n.value[1],e.get(n.value[0])))return!1;return!0}if(am&&r instanceof Set&&e instanceof Set){if(r.size!==e.size)return!1;for(s=r.entries();!(n=s.next()).done;)if(!e.has(n.value[0]))return!1;return!0}if(om&&ArrayBuffer.isView(r)&&ArrayBuffer.isView(e)){if(t=r.length,t!=e.length)return!1;for(n=t;n--!==0;)if(r[n]!==e[n])return!1;return!0}if(r.constructor===RegExp)return r.source===e.source&&r.flags===e.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===e.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===e.toString();if(i=Object.keys(r),t=i.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[n]))return!1;if(im&&r instanceof Element)return!1;for(n=t;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&r.$$typeof)&&!Kn(r[i[n]],e[i[n]]))return!1;return!0}return r!==r&&e!==e}var lm=function(e,t){try{return Kn(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}},cm=[],dm=function(e,t,n){n===void 0&&(n={});var i=I.exports.useRef(null),s={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||cm},o=I.exports.useState({styles:{popper:{position:s.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),l=o[0],d=o[1],c=I.exports.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(b){var h=b.state,p=Object.keys(h.elements);Xc.exports.flushSync(function(){d({styles:wa(p.map(function(g){return[g,h.styles[g]||{}]})),attributes:wa(p.map(function(g){return[g,h.attributes[g]]}))})})},requires:["computeStyles"]}},[]),y=I.exports.useMemo(function(){var f={onFirstUpdate:s.onFirstUpdate,placement:s.placement,strategy:s.strategy,modifiers:[].concat(s.modifiers,[c,{name:"applyStyles",enabled:!1}])};return lm(i.current,f)?i.current||f:(i.current=f,f)},[s.onFirstUpdate,s.placement,s.strategy,s.modifiers,c]),m=I.exports.useRef();return Ca(function(){m.current&&m.current.setOptions(y)},[y]),Ca(function(){if(!(e==null||t==null)){var f=n.createPopper||rm,b=f(e,t,y);return m.current=b,function(){b.destroy(),m.current=null}}},[e,t,n.createPopper]),{state:m.current?m.current.state:null,styles:l.styles,attributes:l.attributes,update:m.current?m.current.update:null,forceUpdate:m.current?m.current.forceUpdate:null}};const Gn=({children:r,contentProps:e,placement:t,showCloseButton:n=!0,actionButton:i,strategy:s,style:o})=>{var R;t=t!=null?t:"bottom-start";const[l,d]=I.exports.useState(!1),[c,y]=I.exports.useState(null),[m,f]=I.exports.useState(null),[b,h]=I.exports.useState(null),{styles:p,attributes:g}=dm(c,m,{placement:t,strategy:s,modifiers:[{name:"arrow",options:{element:b}},{name:"offset",options:{offset:[0,10]}}]}),w=a(Za,{in:l,timeout:200,classNames:"fade-in-out",mountOnEnter:!0,children:C("div",{className:"Tooltip SRC-popover bootstrap-4-backport",style:{...o,...p.popper},ref:f,...g.popper,children:[a(qt,{variant:"body1",children:a(Ee,{...e})}),C("div",{className:"TooltipButtonContainer",children:[i&&a(de,{variant:(R=i.variant)!=null?R:"primary-500",className:"pill",onClick:()=>{i.onClick(),i.closePopoverOnClick&&d(!1)},children:i.content}),n&&a(de,{variant:"light",className:"pill",onClick:()=>d(!1),children:"Close"})]}),a("div",{className:"arrow","data-popper-arrow":!0,ref:h,style:p.arrow})]})});return C(D,{children:[a("span",{role:"button",className:"PopoverContainer bootstrap-4-backport",onClick:()=>d(S=>!S),ref:y,children:r}),w]})};try{Gn.displayName="MarkdownPopover",Gn.__docgenInfo={description:"",displayName:"MarkdownPopover",props:{contentProps:{defaultValue:null,description:"",name:"contentProps",required:!0,type:{name:"MarkdownSynapseProps"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},placement:{defaultValue:null,description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"bottom"'},{value:'"right"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},actionButton:{defaultValue:null,description:"",name:"actionButton",required:!1,type:{name:"{ content: ReactElement<any, string | JSXElementConstructor<any>>; variant: string; onClick: () => void; closePopoverOnClick: boolean; }"}},strategy:{defaultValue:null,description:"",name:"strategy",required:!1,type:{name:"enum",value:[{value:'"absolute"'},{value:'"fixed"'}]}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/MarkdownPopover.tsx#MarkdownPopover"]={docgenInfo:Gn.__docgenInfo,name:"MarkdownPopover",path:"src/lib/containers/MarkdownPopover.tsx#MarkdownPopover"})}catch{}const st=({markdownText:r,helpUrl:e,placement:t="bottom",showCloseButton:n=!0,className:i=""})=>a(D,{children:a(Gn,{contentProps:{markdown:r},placement:t,actionButton:e?{content:a(D,{children:"More info"}),closePopoverOnClick:!0,onClick:()=>window.open(e,"_blank"),variant:"primary"}:void 0,showCloseButton:n,strategy:"fixed",style:{maxWidth:"350px"},children:a(Yc,{className:`HelpButton ${i}`})})});try{st.displayName="HelpPopover",st.__docgenInfo={description:"",displayName:"HelpPopover",props:{markdownText:{defaultValue:null,description:"",name:"markdownText",required:!0,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}},placement:{defaultValue:{value:"bottom"},description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"bottom"'},{value:'"right"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HelpPopover.tsx#HelpPopover"]={docgenInfo:st.__docgenInfo,name:"HelpPopover",path:"src/lib/containers/HelpPopover.tsx#HelpPopover"})}catch{}const vi=3,zt=({helpMessage:r="This search bar is powered by MySQL Full Text Search.",helpUrl:e})=>{const{executeQueryRequest:t,getLastQueryRequest:n}=je(),{topLevelControlsState:{showSearchBar:i,showFacetFilter:s}}=yn(),[o,l]=I.exports.useState(""),d=I.exports.useRef(null),c=m=>{var f;if(m.preventDefault(),o.trim().length<vi)(f=d.current)==null||f.setCustomValidity(`Search term must have a minimum of ${vi} characters`);else{const b=n(),{additionalFilters:h=[]}=b.query,p={concreteType:"org.sagebionetworks.repo.model.table.TextMatchesQueryFilter",searchExpression:o};if(h.find(w=>w.concreteType==p.concreteType&&w.searchExpression==p.searchExpression))return;h.push(p),b.query.additionalFilters=h,t(b),l("")}},y=m=>{var f;(f=d.current)==null||f.setCustomValidity(""),l(m.currentTarget.value)};return a("div",{className:`QueryWrapperSearchInput ${s?Et:Ot}`,children:a(ls,{in:i,timeout:{enter:300,exit:300},children:C("div",{className:"QueryWrapperSearchInput__helppopoverwrapper",children:[C("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:c,children:[a("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:a(ce,{options:{icon:"search"}})}),a("input",{ref:d,minLength:vi,onChange:y,placeholder:"Enter Search Terms",value:o,type:"text"}),o.length>0&&a("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{l("")},children:a(ce,{options:{icon:"close"}})})]}),a("div",{className:"QueryWrapperSearchInput__helppopover",children:a(st,{markdownText:r,helpUrl:e,placement:"left"})})]})})})};try{zt.displayName="FullTextSearch",zt.__docgenInfo={description:"",displayName:"FullTextSearch",props:{helpMessage:{defaultValue:{value:"This search bar is powered by MySQL Full Text Search."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FullTextSearch.tsx#FullTextSearch"]={docgenInfo:zt.__docgenInfo,name:"FullTextSearch",path:"src/lib/containers/FullTextSearch.tsx#FullTextSearch"})}catch{}const zi="First line is the columns names.",Yi="Include row metadata (Row Id and Row Version).",Yr="Comma Separated Values (CSV)",_a="Tab Separated Values (TSV)",um={title:"Download query results",type:"object",properties:{"File Type":{type:"string",oneOf:[{const:Yr,title:Yr},{const:_a,title:_a}]},Contents:{type:"array",title:"Contents",items:{type:"string",enum:[zi,Yi]},uniqueItems:!0}}},pm={"File Type":{"ui:widget":"radio"},Contents:{"ui:widget":"checkboxes"}},fm={title:"Download query results",description:"File is ready for download. Select the download button to download the file.",type:"object"},hm={},mm=[um,fm],gm=[pm,hm];class at extends I.exports.Component{constructor(e){super(e),this.handleSubmit=t=>{this.state.step===0?this.handleDownloadSetup(t):this.onDownload()},this.handleDownloadSetup=t=>{this.setState({isLoading:!0});const{formData:n}=t,i=n["File Type"],s=n.Contents,{queryBundleRequest:o,getLastQueryRequest:l}=this.props,d=i===Yr?",":"	",c=s.includes(zi),y=s.includes(Yi),m=o!=null?o:l(),f=m.query.sql,b={sql:f,entityId:It(f),selectedFacets:m.query.selectedFacets,concreteType:"org.sagebionetworks.repo.model.table.DownloadFromTableRequest",writeHeader:c,includeRowIdAndRowVersion:y,csvTableDescriptor:{separator:d},additionalFilters:m.query.additionalFilters};Tl(b,this.context.accessToken).then(h=>{this.setState({isLoading:!1,step:1,data:h})}).catch(h=>{console.log("Error getDownloadFromTableRequest: ",h)})},this.onDownload=()=>{const{data:t}=this.state;Al(t.resultsFileHandleId,this.context.accessToken).then(n=>{window.location.href=n,this.props.onClose()})},this.handleChange=t=>{const{formData:n}=t;this.setState({formData:n})},this.state={isLoading:!1,step:0,formData:{"File Type":Yr,Contents:[zi,Yi]}}}render(){const e={position:"absolute",top:10,right:10,zIndex:10},t={height:50,width:50,backgroundSize:50};return a(K,{animation:!1,show:!0,onHide:this.props.onClose,backdrop:"static",children:C(K.Body,{children:[a("button",{style:e,onClick:this.props.onClose,children:a(ce,{options:{icon:"close"}})}),C(Hc,{schema:mm[this.state.step],uiSchema:gm[this.state.step],onChange:this.handleChange,formData:this.state.formData,onSubmit:this.handleSubmit,children:[this.state.isLoading&&a("div",{className:"SRC-centerAndJustifyContent",children:C("div",{className:"SRC-center-text",children:[a("p",{children:" Creating the File "}),a("div",{style:t,className:"spinner"}),a("p",{children:" Loading... "})]})}),C("div",{style:{textAlign:"right"},children:[a(de,{variant:"default",onClick:this.props.onClose,style:{marginRight:"5px"},children:"Cancel"}),a(de,{type:"submit",variant:"primary",children:this.state.step===0?"Next":"Download"})]})]})]})})}}at.contextType=hn;try{at.displayName="ModalDownload",at.__docgenInfo={description:"",displayName:"ModalDownload",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(...args: any[]) => void"}},includeEntityEtag:{defaultValue:null,description:"",name:"includeEntityEtag",required:!1,type:{name:"boolean"}},queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!1,type:{name:"QueryBundleRequest"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},sort:{defaultValue:null,description:"",name:"sort",required:!1,type:{name:"SortItem[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/ModalDownload.tsx#ModalDownload"]={docgenInfo:at.__docgenInfo,name:"ModalDownload",path:"src/lib/containers/ModalDownload.tsx#ModalDownload"})}catch{}function Yt(r){const{initQueryRequest:e,onQueryChange:t,onQueryResultBundleChange:n,lockedColumn:i,componentIndex:s,shouldDeepLink:o}=r,[l,d]=I.exports.useState(void 0),{entityId:c,versionNumber:y,getInitQueryRequest:m,getLastQueryRequest:f,setQuery:b}=hc({initQueryRequest:e,componentIndex:s,shouldDeepLink:o,onQueryChange:t}),h=I.exports.useMemo(()=>f(),[f]),{data:p,hasNextPage:g,fetchPreviousPage:w,fetchNextPage:R,isFetchingNextPage:S,isLoading:u,error:_,isPreviousData:x}=Ic(h,{keepPreviousData:!0},d),A=u||x,{data:O}=ss(c,y),[E,L]=I.exports.useState(0);async function P(){if(!g)throw new Error("Called appendNextPageToResults when there is no next page");await R(),L("ALL")}async function M(){if(!g)throw new Error("Called goToNextPage when there is no next page");if(E==="ALL")throw new Error("Cannot go to next page when all pages are displayed");await R(),L(E+1)}const V=E!=="ALL"&&E>0;async function v(){if(E==="ALL")throw new Error("Cannot go to previous page when all pages are displayed");if(!V)throw new Error("Called goToNextPage when there is no next page");await w(),L(E-1)}const q=I.exports.useMemo(()=>{var U,ae,T,N;if(!(p==null||p.pages.length===0||p.pages[0].responseBody==null))return E==="ALL"?{...p==null?void 0:p.pages[0].responseBody,queryResult:{...(U=p==null?void 0:p.pages[0].responseBody)==null?void 0:U.queryResult,queryResults:{...(T=(ae=p==null?void 0:p.pages[0].responseBody)==null?void 0:ae.queryResult)==null?void 0:T.queryResults,rows:(N=p.pages.flatMap(F=>{var H;return(H=F.responseBody.queryResult)==null?void 0:H.queryResults.rows}))!=null?N:[]}}}:p==null?void 0:p.pages[E].responseBody},[E,p]);I.exports.useEffect(()=>{q&&n&&n(JSON.stringify(q))},[q,n]);const k=q?Ec(q.facets,q.selectColumns):!0,Z={data:I.exports.useMemo(()=>Oc(q,i),[q,i]),isLoadingNewPage:S,hasNextPage:!!g,hasPreviousPage:!!V,isLoadingNewBundle:A,getLastQueryRequest:f,getInitQueryRequest:m,error:_,entity:O,executeQueryRequest:b,isFacetsAvailable:k,asyncJobStatus:l,appendNextPageToResults:P,goToNextPage:M,goToPreviousPage:v},{children:ee}=r;return a(mc,{queryContext:Z,children:a("div",{className:`SRC-wrapper ${A||S?"SRC-logo-cursor":""} ${k?"has-facets":""}`,children:ee})})}try{Yt.displayName="InfiniteQueryWrapper",Yt.__docgenInfo={description:"Component that manages the state of a Synapse table query. Data can be accessed via QueryContext using\neither `useQueryContext` or `QueryContextConsumer`.",displayName:"InfiniteQueryWrapper",props:{initQueryRequest:{defaultValue:null,description:"",name:"initQueryRequest",required:!0,type:{name:"QueryBundleRequest"}},componentIndex:{defaultValue:null,description:"",name:"componentIndex",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/InfiniteQueryWrapper.tsx#InfiniteQueryWrapper"]={docgenInfo:Yt.__docgenInfo,name:"InfiniteQueryWrapper",path:"src/lib/containers/InfiniteQueryWrapper.tsx#InfiniteQueryWrapper"})}catch{}class Qt extends ge.Component{constructor(e){var t;super(e),this.handleClickOutsideForm=n=>{var i,s;!((i=this.searchFormRef.current)!=null&&i.contains(n==null?void 0:n.target))&&!((s=this.radioFormRef.current)!=null&&s.contains(n==null?void 0:n.target))&&(this.state.didUpdateRanLast?this.setState({didUpdateRanLast:!1}):this.setState({show:!1}))},this.search=n=>{var b,h,p,g,w,R,S;n.preventDefault();const{searchText:i}=this.state;let{columnName:s}=this.state;const{searchable:o,lockedColumn:l}=this.props;if(s==="")if(o)s=o.filter(u=>u!==(l==null?void 0:l.columnName))[0];else{const u=(p=(h=(b=this.props.queryContext)==null?void 0:b.data)==null?void 0:h.columnModels)==null?void 0:p.filter(_=>_.name!==(l==null?void 0:l.columnName)).filter(_=>this.isSupportedColumn(_));s=(g=u==null?void 0:u[0].name)!=null?g:""}this.setState({show:!1});const{executeQueryRequest:d,getLastQueryRequest:c}=this.props.queryContext,y=c(),{additionalFilters:m=[]}=y.query,f=m.findIndex(u=>!!(gc(u)||yc(u)&&u.columnName===s));if(f===-1){const u=(S=(R=(w=this.props.queryContext)==null?void 0:w.data)==null?void 0:R.columnModels)==null?void 0:S.filter(_=>_.name===s)[0];if(u!=null&&u.columnType.endsWith("_LIST")){const _={columnName:s,function:Sc.HAS_LIKE,values:[`%${i}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnMultiValueFunctionQueryFilter"};m.push(_)}else{const _={columnName:s,operator:bc.LIKE,values:[`%${i}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnSingleValueQueryFilter"};m.push(_)}}else m[f].values.push(`%${i}%`);y.query.additionalFilters=m,d(y)},this.handleChange=n=>{this.setState({searchText:n.currentTarget.value})},this.isSupportedColumn=n=>{switch(n==null?void 0:n.columnType){case W.FILEHANDLEID:case W.ENTITYID:case W.DATE:case W.DATE_LIST:case W.USERID:return!1;default:return!0}},this.isSupportedColumnAndInProps=n=>{if(this.isSupportedColumn(n)){const{searchable:i}=this.props;return i==null?void 0:i.some(s=>s===(n==null?void 0:n.name))}return!1},this.state={show:!1,didUpdateRanLast:!1,searchText:"",columnName:(t=this.props.defaultColumn)!=null?t:""},this.searchFormRef=ge.createRef(),this.radioFormRef=ge.createRef()}componentDidMount(){document.addEventListener("click",this.handleClickOutsideForm)}componentDidUpdate(e){var t,n,i,s,o;!((t=e.queryVisualizationContext)!=null&&t.topLevelControlsState.showSearchBar)&&((n=this.props.queryVisualizationContext)==null?void 0:n.topLevelControlsState.showSearchBar)&&(this.setState({show:!0,didUpdateRanLast:!0}),(o=(s=(i=this.searchFormRef)==null?void 0:i.current)==null?void 0:s.querySelector("input"))==null||o.focus())}componentWillUnmount(){document.removeEventListener("click",this.handleClickOutsideForm)}render(){var m;const{searchable:e,lockedColumn:t,queryContext:{data:n},queryVisualizationContext:{topLevelControlsState:i,facetAliases:s}}=this.props,{searchText:o,show:l,columnName:d}=this.state;let c=[];e?c=e.map(f=>{var b;return(b=n==null?void 0:n.columnModels)==null?void 0:b.find(h=>h.name===f)}).filter(this.isSupportedColumnAndInProps).map(f=>f.name):n!=null&&n.columnModels&&(c=(m=n.columnModels)==null?void 0:m.filter(this.isSupportedColumn).map(f=>f.name)),c.length&&(t==null?void 0:t.columnName)&&(c=c.filter(f=>f!==(t==null?void 0:t.columnName)));const y=i==null?void 0:i.showFacetFilter;return C("div",{className:`QueryWrapperSearchInput ${y?Et:Ot}`,children:[a(ls,{in:i==null?void 0:i.showSearchBar,children:C("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:this.search,onClick:()=>{this.setState({show:!0})},ref:this.searchFormRef,children:[a("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:a(ce,{options:{icon:"search"}})}),a("input",{onChange:this.handleChange,onClick:()=>{this.setState({show:!0})},placeholder:"Enter Search Terms",value:o,type:"text"}),this.state.searchText.length>0&&a("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{this.setState({searchText:""})},children:a(ce,{options:{icon:"close"}})})]})}),a("div",{className:"QueryWrapperSearchInput__dropdown_pos",children:a(Za,{in:l,classNames:"QueryWrapperSearchInput__animate_dropdown",timeout:{enter:0,exit:300},children:C("form",{ref:this.radioFormRef,className:"QueryWrapperSearchInput__column-select QueryWrapperSearchInput__animate_height",children:[a("p",{className:"deemphasized",children:a("i",{children:" Search In Field: "})}),c.map((f,b)=>{const h=Qe(f,s);return a("div",{className:"radio",children:a("label",{children:C("span",{children:[a("input",{id:f,type:"radio",value:f,checked:d===""&&b===0||d===f,onClick:()=>{var g,w,R;(R=(w=(g=this.searchFormRef)==null?void 0:g.current)==null?void 0:w.querySelector("input"))==null||R.focus(),this.setState({columnName:f})}}),a("span",{children:h})]})})},`search-field-${f}-${b}`)})]})})})]})}}try{Qt.displayName="Search",Qt.__docgenInfo={description:"",displayName:"Search",props:{queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},isQueryWrapperMenuChild:{defaultValue:null,description:"",name:"isQueryWrapperMenuChild",required:!1,type:{name:"boolean"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},searchable:{defaultValue:null,description:"",name:"searchable",required:!1,type:{name:"SearchableColumnsV2"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},fullTextSearchHelpURL:{defaultValue:null,description:"",name:"fullTextSearchHelpURL",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/SearchV2.tsx#Search"]={docgenInfo:Qt.__docgenInfo,name:"Search",path:"src/lib/containers/SearchV2.tsx#Search"})}catch{}const ym="The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients.",Sm="https://help.synapse.org/docs/Searching-Tables-and-Views.2009596168.html#SearchingTablesandViews-UsingAdvancedSearchQueries",Kt=({helpMessage:r=ym,helpUrl:e=Sm})=>{const{executeQueryRequest:t,getLastQueryRequest:n}=je(),{topLevelControlsState:{showSqlEditor:i,showFacetFilter:s}}=yn(),[o,l]=I.exports.useState(""),d=I.exports.useRef(null);I.exports.useEffect(()=>{var m;if(i){const f=n().query.sql;l(f),(m=d.current)==null||m.focus()}},[i,n]);const c=m=>{m.preventDefault();const f=n();f.query.sql=o,f.query.offset=0,f.query.additionalFilters=[],f.query.selectedFacets=[],t(f)},y=m=>{var f;(f=d.current)==null||f.setCustomValidity(""),l(m.currentTarget.value)};return a("div",{className:`QueryWrapperSqlEditorInput ${s?Et:Ot}`,children:a(ls,{in:i,timeout:{enter:300,exit:300},children:C("div",{className:"QueryWrapperSqlEditorInput__helppopoverwrapper",children:[C("form",{className:"QueryWrapperSqlEditorInput__searchbar",onSubmit:c,children:[a(Qc,{className:"QueryWrapperSqlEditorInput__searchbar__searchicon"}),a("input",{ref:d,onChange:y,placeholder:"Enter Query",value:o,type:"text"})]}),a("div",{className:"QueryWrapperSqlEditorInput__helppopover",children:a(st,{markdownText:r,helpUrl:e,placement:"right"})})]})})})};try{Kt.displayName="SqlEditor",Kt.__docgenInfo={description:"",displayName:"SqlEditor",props:{helpMessage:{defaultValue:{value:"The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:{value:"https://help.synapse.org/docs/Searching-Tables-and-Views.2009596168.html#SearchingTablesandViews-UsingAdvancedSearchQueries"},description:"",name:"helpUrl",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/SqlEditor.tsx#SqlEditor"]={docgenInfo:Kt.__docgenInfo,name:"SqlEditor",path:"src/lib/containers/SqlEditor.tsx#SqlEditor"})}catch{}const Xn=r=>C(K,{animation:!1,show:!0,onHide:()=>r.onHide(),backdrop:"static",children:[a(K.Header,{closeButton:!0,children:a("span",{style:{fontWeight:"bold",color:"#515359",fontSize:"1.5em"},children:"Sign In Required"})}),C(od,{children:[a("p",{children:"Anyone can browse public content on the Synapse website, but in order to download and create content you will need to register for an account using an email address."}),C("p",{children:["To find out more see\xA0",a("a",{href:"https://help.synapse.org/docs/Managing-your-account.2055405596.html",target:"_blank",rel:"noopener noreferrer",children:"User Accounts"}),a("span",{children:" and "}),a("a",{href:"https://help.synapse.org/docs/Synapse-Governance.2004255211.html",rel:"noopener noreferrer",target:"_blank",children:"Governance Overview"}),"."]})]}),C(ld,{children:[a(de,{variant:"secondary",onClick:()=>r.onHide(),children:"CANCEL"}),a(de,{className:"SRC-SIGN-IN-CLASS",variant:"primary",onClick:()=>r.onHide(),children:"Sign in"})]})]});try{Xn.displayName="DownloadLoginModal",Xn.__docgenInfo={description:"",displayName:"DownloadLoginModal",props:{showModal:{defaultValue:null,description:"",name:"showModal",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/DownloadLoginModal.tsx#DownloadLoginModal"]={docgenInfo:Xn.__docgenInfo,name:"DownloadLoginModal",path:"src/lib/containers/table/table-top/DownloadLoginModal.tsx#DownloadLoginModal"})}catch{}const Jn=({show:r,title:e,onClose:t,pythonNotes:n,pythonCode:i,rNotes:s,rCode:o,cliNotes:l,cliCode:d,helpMarkdown:c,helpUrl:y})=>{let m;d?m="Command Line":i?m="Python":m="R";const[f,b]=I.exports.useState(m),h=C("p",{children:["Installation instructions are available at our"," ",a("a",{className:"ProgrammaticOptions__docslink",href:"https://help.synapse.org/docs/Installing-Synapse-API-Clients.1985249668.html",target:"_blank",rel:"noopener noreferrer",children:"Synapse API Documentation Site"}),"."]});return C(K,{className:"bootstrap-4-backport ProgrammaticOptions",backdrop:"static",animation:!1,show:r,onHide:t,size:"lg",children:[a(K.Header,{closeButton:!0,children:C(K.Title,{children:[e,"\xA0",c&&a(st,{markdownText:c,helpUrl:y})]})}),C(K.Body,{children:[C("div",{className:"Tabs",children:[d&&a("div",{className:"Tab",role:"tab",onClick:p=>{p.stopPropagation(),b("Command Line")},"aria-selected":f==="Command Line",children:"Command Line"}),o&&a("div",{className:"Tab",role:"tab",onClick:p=>{p.stopPropagation(),b("R")},"aria-selected":f==="R",children:"R"}),i&&a("div",{className:"Tab",role:"tab",onClick:p=>{p.stopPropagation(),b("Python")},"aria-selected":f==="Python",children:"Python"})]}),C("div",{className:"TabContent",children:[f==="Command Line"&&C(D,{children:[a("p",{children:l}),h,C("pre",{children:[" ",d," "]})]}),f==="R"&&C(D,{children:[a("p",{children:s}),h,a("pre",{children:o})]}),f==="Python"&&C(D,{children:[a("p",{children:n}),h,a("pre",{children:i})]})]})]}),a(K.Footer,{children:a(de,{variant:"primary",onClick:t,children:"OK"})})]})};try{Jn.displayName="ProgrammaticInstructionsModal",Jn.__docgenInfo={description:"Modal used to show programmatic instructions",displayName:"ProgrammaticInstructionsModal",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},pythonNotes:{defaultValue:null,description:"",name:"pythonNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},pythonCode:{defaultValue:null,description:"",name:"pythonCode",required:!1,type:{name:"string"}},rNotes:{defaultValue:null,description:"",name:"rNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},rCode:{defaultValue:null,description:"",name:"rCode",required:!1,type:{name:"string"}},cliNotes:{defaultValue:null,description:"",name:"cliNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},cliCode:{defaultValue:null,description:"",name:"cliCode",required:!1,type:{name:"string"}},helpMarkdown:{defaultValue:null,description:"",name:"helpMarkdown",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/ProgrammaticInstructionsModal.tsx#ProgrammaticInstructionsModal"]={docgenInfo:Jn.__docgenInfo,name:"ProgrammaticInstructionsModal",path:"src/lib/containers/ProgrammaticInstructionsModal.tsx#ProgrammaticInstructionsModal"})}catch{}function Zn({queryBundleRequest:r,queryResultBundle:e,onHide:t}){const[n,i]=I.exports.useState("");xi(()=>{(async()=>{const{query:d}=r,{sql:c,selectedFacets:y=[]}=d,{columnModels:m}=e;m||console.error("Column Models must be included to complete transform sql request");const f={concreteType:"org.sagebionetworks.repo.model.table.TransformSqlWithFacetsRequest",sqlToTransform:c,selectedFacets:y,schema:m};try{const b=await xl(f),h=b.transformedSql.toUpperCase().indexOf("FROM SYN"),p=`SELECT * ${b.transformedSql.substring(h)}`;i(p)}catch(b){console.error("Error on getTransformSqlWithFacetsRequest ",b)}})()},[r,e]);const s=I.exports.useMemo(()=>n.replace(/(["`])/g,"\\$1"),[n]),o=I.exports.useMemo(()=>n.replace(/"/g,'\\"'),[n]);return a(Jn,{show:!0,onClose:t,title:"Download Programmatically",cliNotes:a(D,{children:"This command line code will download Synapse files AND file annotations to your working directory."}),cliCode:`synapse get -q "${s}"`,rNotes:C(D,{children:["This R code will download file annotations only. Use"," ",C("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:["synGet","()"]})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),rCode:`query <- synTableQuery("${o}")
read.table(query$filepath, sep = ",")`,pythonNotes:C(D,{children:["This Python code will download file annotations only. Use"," ",a("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:"syn.get"})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),pythonCode:`query = syn.tableQuery("${o}")
query.asDataFrame()`})}try{Zn.displayName="ProgrammaticOptions",Zn.__docgenInfo={description:"",displayName:"ProgrammaticOptions",props:{queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!0,type:{name:"QueryBundleRequest"}},queryResultBundle:{defaultValue:null,description:"",name:"queryResultBundle",required:!0,type:{name:"QueryResultBundle"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/ProgrammaticTableDownload.tsx#ProgrammaticOptions"]={docgenInfo:Zn.__docgenInfo,name:"ProgrammaticOptions",path:"src/lib/containers/table/table-top/ProgrammaticTableDownload.tsx#ProgrammaticOptions"})}catch{}const bm="Add To Download Cart",wm="download",er=r=>{const{accessToken:e}=J(),{entity:t,data:n,getLastQueryRequest:i}=je(),s=i(),[o,l]=I.exports.useState(!1),[d,c]=I.exports.useState(!1),[y,m]=I.exports.useState(!1),{onDownloadFiles:f,darkTheme:b=!0}=r,h=t&&(yt(t)&&ac(t)||_t(t)),p=t&&_t(t)&&t.isLatestVersion;return C(I.exports.Fragment,{children:[C(Ye,{as:"span",children:[a(Gr,{idForToolTip:wm,tooltipText:"Download Options",size:"lg",darkTheme:b,icon:"download"}),C(Ye.Menu,{className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:[a(Ye.Item,{onClick:()=>{c(!0)},children:"Export Table"}),h&&a(Je,{title:"A draft version of a dataset cannot be added to the Download Cart",placement:"left",enterNextDelay:300,disableHoverListener:!p,children:a(Ye.Item,{className:p?"ignoreLink":void 0,disabled:p,style:p?{pointerEvents:"auto"}:{},onClick:()=>e?f():l(!0),children:bm})}),a(Je,{title:"A draft version of a dataset cannot be downloaded programmatically",placement:"left",enterNextDelay:300,disableHoverListener:!p,children:a(Ye.Item,{className:p?"ignoreLink":void 0,disabled:p,style:p?{pointerEvents:"auto"}:{},onClick:()=>m(!0),children:"Programmatic Options"})})]})]}),o&&a(Xn,{showModal:o,onHide:()=>l(!1)}),d&&a(at,{onClose:()=>c(!1),queryBundleRequest:s}),y&&n&&a(Zn,{onHide:()=>m(!1),queryBundleRequest:s,queryResultBundle:n})]})};try{er.displayName="DownloadOptions",er.__docgenInfo={description:"",displayName:"DownloadOptions",props:{onDownloadFiles:{defaultValue:null,description:"",name:"onDownloadFiles",required:!0,type:{name:"() => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/DownloadOptions.tsx#DownloadOptions"]={docgenInfo:er.__docgenInfo,name:"DownloadOptions",path:"src/lib/containers/table/table-top/DownloadOptions.tsx#DownloadOptions"})}catch{}const va="addAndRemoveColumns",tr=r=>{const{headers:e,isColumnSelected:t,toggleColumnSelection:n,darkTheme:i,facetAliases:s}=r,[o,l]=I.exports.useState(!1),d=(c,y,m)=>{m.source==="rootClose"?l(!1):l(!0)};return C(Ye,{as:"span",onToggle:(c,y,m)=>d(c,y,m),show:o,drop:"down",children:[a(Gr,{idForToolTip:va,tooltipText:"Show/Hide Columns",icon:i?"columnsdark":"columns",darkTheme:i}),a(Ye.Menu,{id:`${va}-dropdown`,className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:e==null?void 0:e.map(c=>{const{name:y}=c,m=t.includes(y),f={width:"11px",marginRight:"10px",visibility:m?void 0:"hidden"},b=m?"SRC-primary-text-color":"";return C(Ye.Item,{onClick:()=>n(y),children:[a("span",{className:b,style:f,children:a(ce,{options:{icon:"check",size:"14px"}})}),Qe(y,s)]},y)})})]})};try{tr.displayName="ColumnSelection",tr.__docgenInfo={description:"",displayName:"ColumnSelection",props:{headers:{defaultValue:null,description:"",name:"headers",required:!1,type:{name:"SelectColumn[]"}},isColumnSelected:{defaultValue:null,description:"",name:"isColumnSelected",required:!0,type:{name:"string[]"}},show:{defaultValue:null,description:"",name:"show",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(() => void)"}},toggleColumnSelection:{defaultValue:null,description:"",name:"toggleColumnSelection",required:!0,type:{name:"(name: string) => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/ColumnSelection.tsx#ColumnSelection"]={docgenInfo:tr.__docgenInfo,name:"ColumnSelection",path:"src/lib/containers/table/table-top/ColumnSelection.tsx#ColumnSelection"})}catch{}const Cm="Files may be unavailable because you do not have permission to see them, they have been deleted, or the Dataset has been misconfigured.",_m="Files may be unavailable because you do not have permission to see them or the Dataset was misconfigured.",nr=({entity:r})=>{var i,s;const e=r&&_t(r),t={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:`SELECT * FROM ${r.id}${!r.isLatestVersion&&r.versionNumber?`.${r.versionNumber}`:""}`},entityId:r.id,partMask:gn},{data:n}=Qa(t,{enabled:e});if(e&&n&&r){const o=n.queryCount,l=(s=(i=r.items)==null?void 0:i.length)!=null?s:0;if(o===l)return a(D,{});const d=l-o;let c="";return r.isLatestVersion?c=Cm:c=_m,C(qt,{className:"SRC-centerContent",style:{marginLeft:10},variant:"smallText1",color:"textSecondary",children:[a(Rd,{className:"SRC-color-warning",style:{fontSize:"16px"}}),d.toLocaleString()+" Unavailable",a(st,{className:"SRC-margin-left-5",markdownText:c,placement:"right"})]})}else return a(D,{})};try{nr.displayName="MissingQueryResultsWarning",nr.__docgenInfo={description:`If possible, this component will render a warning message if results may be missing from the query due to user permissions or
entities being deleted. If not possible, it will render an empty fragment.`,displayName:"MissingQueryResultsWarning",props:{entity:{defaultValue:null,description:"",name:"entity",required:!0,type:{name:"Table"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/MissingQueryResultsWarning.tsx#MissingQueryResultsWarning"]={docgenInfo:nr.__docgenInfo,name:"MissingQueryResultsWarning",path:"src/lib/containers/MissingQueryResultsWarning.tsx#MissingQueryResultsWarning"})}catch{}const vm=[{icon:"search",key:"showSearchBar",tooltipText:"Show / Hide Search Bar"},{icon:"chart",key:"showFacetVisualization",tooltipText:"Show / Hide Visualizations"},{icon:"download",key:"showDownloadConfirmation",tooltipText:"Show options for download"},{icon:Rl,key:"showSqlEditor",tooltipText:"Show / Hide the Advanced Query Editor"}],Gt=r=>{const{name:e,showColumnSelection:t=!1,hideDownload:n=!1,hideVisualizationsControl:i=!1,hideFacetFilterControl:s=!1,hideQueryCount:o=!1,hideSqlEditorControl:l=!0,customControls:d}=r,{data:c,entity:y,executeQueryRequest:m,getLastQueryRequest:f,getInitQueryRequest:b}=je(),{topLevelControlsState:h,setTopLevelControlsState:p,columnsToShowInTable:g,selectedRowIndices:w,facetAliases:R,setColumnsToShowInTable:S}=yn(),u=O=>{const E={[O]:!h[O]};O==="showSearchBar"&&(E.showDownloadConfirmation=!1),O==="showDownloadConfirmation"&&(E.showSearchBar=!1),p(L=>({...L,...E}))},_=()=>{m(f())},x=O=>{let E=St(g);E.includes(O)?E=E.filter(L=>L!==O):E.push(O),S(E)},A=h==null?void 0:h.showFacetFilter;return a("div",{className:`TopLevelControls ${A?Et:Ot}`,"data-testid":"TopLevelControls",children:C("div",{children:[C("div",{className:"TopLevelControls__querycount",children:[e&&C(D,{children:[C(qt,{variant:"sectionTitle",role:"heading",children:[e," ",!o&&a(cd,{sql:b().query.sql,parens:!0})]}),!o&&y&&a(nr,{entity:y})]}),!s&&C("a",{onClick:()=>u("showFacetFilter"),className:"TopLevelControls__querycount__facetFilterLink SRC-no-underline-on-hover",children:[a(Xr,{type:h.showFacetFilter?"close":"filter"}),C("span",{className:"TopLevelControls__querycount__facetFilterLink__text",children:[h.showFacetFilter?"Hide":"Show"," ","filters"]})]})]}),C("div",{className:"TopLevelControls__actions",children:[d&&d.map(O=>{var E;return C("button",{className:`btn SRC-roundBorder SRC-primary-background-color SRC-whiteText ${(E=O.classNames)!=null?E:""}`,style:{marginRight:"5px"},type:"button",onClick:()=>O.onClick({data:c,selectedRowIndices:w,refresh:_}),children:[O.icon,"\xA0",O.buttonText]},O.buttonText)}),vm.map(O=>{const{key:E,icon:L,tooltipText:P}=O;return E==="showDownloadConfirmation"&&n||E==="showFacetVisualization"&&i||E==="showSqlEditor"&&l?a(ge.Fragment,{},E):E==="showDownloadConfirmation"?a(er,{darkTheme:!0,onDownloadFiles:()=>u(E)},E):a(Gr,{idForToolTip:E,tooltipText:P,callbackFn:()=>u(E),darkTheme:!0,icon:L},E)}),t&&a(tr,{headers:c==null?void 0:c.selectColumns,isColumnSelected:g,toggleColumnSelection:x,darkTheme:!0,facetAliases:R})]})]})})};try{Gt.displayName="TopLevelControls",Gt.__docgenInfo={description:"",displayName:"TopLevelControls",props:{name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/TopLevelControls.tsx#TopLevelControls"]={docgenInfo:Gt.__docgenInfo,name:"TopLevelControls",path:"src/lib/containers/table/TopLevelControls.tsx#TopLevelControls"})}catch{}var hl={exports:{}};(function(r,e){(function(n,i){r.exports=i()})($,function(){return(()=>{var t={67:(s,o,l)=>{l.r(o),l.d(o,{default:()=>h});var d=l(887),c=l.n(d);function y(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function m(p,g,w){return g in p?Object.defineProperty(p,g,{value:w,enumerable:!0,configurable:!0,writable:!0}):p[g]=w,p}var f,b=(f=0,function(){return f++}),h=function p(g){var w=this,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};y(this,p),m(this,"ID","id"),m(this,"PX","px"),m(this,"RESIZABLE","grip-resizable"),m(this,"FLEX","grip-flex"),m(this,"legacyIE",navigator.userAgent.indexOf("Trident/4.0")>0),m(this,"reset",function(S){return w.init(S)}),m(this,"onResize",function(){var S=w.tb;if(S.classList.remove(w.RESIZABLE),S.opt.fixed){S.tableWidth=Number(window.getComputedStyle(S).width.replace(/px/,"")).valueOf();for(var u=0,_=0;_<S.columnCnt;_++)u+=S.columns[_].w;for(var x=0;x<S.columnCnt;x++)S.columns[x].style.width=Math.round(1e3*S.columns[x].w/u)/10+"%",S.columns[x].locked=!0}else w.applyBounds(),S.opt.resizeMode==="flex"&&S.opt.serialize&&w.serializeStore();S.classList.add(w.RESIZABLE),w.syncGrips()}),m(this,"onGripMouseDown",function(S){var u=S.target.parentNode.data,_=w.tb,x=_.grips[u.i],A=S.touches;if(x.ox=A?A[0].pageX:S.pageX,x.l=x.offsetLeft,x.x=x.l,w.createStyle(document.querySelector("head"),"*{cursor:"+_.opt.dragCursor+"!important}"),document.addEventListener("touchmove",w.onGripDrag),document.addEventListener("mousemove",w.onGripDrag),document.addEventListener("touchend",w.onGripDragOver),document.addEventListener("mouseup",w.onGripDragOver),x.classList.add(_.opt.draggingClass),w.grip=x,_.columns[u.i].locked)for(var O,E=0;E<_.columnCnt;E++)(O=_.columns[E]).locked=!1,O.w=Number(window.getComputedStyle(O).width.replace(/px/,"")).valueOf();S.preventDefault()}),m(this,"onGripDrag",function(S){var u=w.grip;if(u){var _=u.t,x=S.touches,A=(x?x[0].pageX:S.pageX)-u.ox+u.l,O=_.opt.minWidth,E=u.i,L=1.5*_.cellSpace+O+_.borderSpace,P=E===_.columnCnt-1,M=E?_.grips[E-1].offsetLeft+_.cellSpace+O:L,V=_.opt.fixed?E===_.columnCnt-1?_.tableWidth-L:_.grips[E+1].offsetLeft-_.cellSpace-O:1/0;if(A=Math.max(M,Math.min(V,A)),u.x=A,u.style.left=A+w.PX,P&&(u.w=_.columns[E].w+A-u.l),_.opt.liveDrag){P?(_.columns[E].style.width=u.w+w.PX,!_.opt.fixed&&_.opt.overflow?_.style.minWidth=_.tableWidth+A-u.l+w.PX:_.tableWidth=Number(window.getComputedStyle(_).width.replace(/px/,"")).valueOf()):w.syncCols(_,E,!1,_.opt),w.syncGrips();var v=_.opt.onDrag;v&&v(S)}S.preventDefault()}}),m(this,"onGripDragOver",function(S){var u=w.grip;document.removeEventListener("touchend",w.onGripDragOver),document.removeEventListener("mouseup",w.onGripDragOver),document.removeEventListener("touchmove",w.onGripDrag),document.removeEventListener("mousemove",w.onGripDrag);var _=document.querySelector("head").lastChild;if(_.parentNode.removeChild(_),u){if(u.classList.remove(u.t.opt.draggingClass),u.x-u.l!=0){var x=u.t,A=x.opt.onResize,O=u.i;if(O===x.columnCnt-1){var E=x.columns[O];E.style.width=u.w+w.PX,E.w=u.w}else w.syncCols(x,O,!0,x.opt);x.opt.fixed||w.applyBounds(),w.syncGrips(),A&&A(S),x.opt.serialize&&w.serializeStore()}w.grip=null}}),m(this,"init",function(S){if(S.disable)return w.destroy();var u=w.tb,_=u.getAttribute(w.ID)||w.RESIZABLE+b();if(!u.matches("table")||u.extended&&!S.partialRefresh)return null;var x=document.querySelector("head");if(w.createStyle(x," .grip-resizable{table-layout:fixed;} .grip-resizable > tbody > tr > td, .grip-resizable > tbody > tr > th{overflow:hidden} .grip-padding > tbody > tr > td, .grip-padding > tbody > tr > th{padding-left:0!important; padding-right:0!important;} .grip-container{ height:0px; position:relative;} .grip-handle{margin-left:-5px; position:absolute; z-index:5; } .grip-handle .grip-resizable{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;cursor: col-resize;top:0px} .grip-lastgrip{position:absolute; width:1px; } .grip-drag{ border-left:1px dotted black;	} .grip-flex{width:auto!important;} .grip-handle.grip-disabledgrip .grip-resizable{cursor:default; display:none;}"),S.hoverCursor&&S.hoverCursor!=="col-resize"){var A=".grip-handle .grip-resizable:hover{cursor:"+S.hoverCursor+"!important}";w.createStyle(x,A)}u.setAttribute(w.ID,_);var O=u.opt;u.opt=w.extendOptions(S);var E=w.getTableHeaders(u);if(w.extendTable(E),S.remoteTable&&S.remoteTable.matches("table")){var L=w.getTableHeaders(u.opt.remoteTable);E.length===L.length?w.extendRemoteTable(u.opt.remoteTable,L,u):console.warn("column count for remote table did not match")}return O}),m(this,"applyBounds",function(){var S=w.tb,u=S.columns.map(function(_){return window.getComputedStyle(_).width});S.style.width=window.getComputedStyle(S).width,S.tableWidth=Number(S.style.width.replace(/px/,"")).valueOf(),S.classList.remove(w.FLEX),S.columns.forEach(function(_,x){_.style.width=u[x],_.w=Number(u[x].replace(/px/,"")).valueOf()}),S.classList.add(w.FLEX)}),m(this,"serializeStore",function(){var S=w.store,u=w.tb;S[u.getAttribute(w.ID)]="";for(var _=0,x=0;x<u.columns.length;x++){var A=window.getComputedStyle(u.columns[x]).width.replace(/px/,"");S[u.getAttribute(w.ID)]+=A+";",_+=Number(A).valueOf()}S[u.getAttribute(w.ID)]+=_.toString(),u.opt.fixed||(S[u.getAttribute(w.ID)]+=";"+window.getComputedStyle(u).width.replace(/px/,""))}),m(this,"syncGrips",function(){var S=w.tb;S.gripContainer.style.width=S.tableWidth+w.PX;for(var u=0;u<S.columnCnt;u++){var _=S.columns[u],x=_.getBoundingClientRect(),A=S.getBoundingClientRect();S.grips[u].style.left=x.left-A.left+_.offsetWidth+S.cellSpace/2+w.PX,S.grips[u].style.height=(S.opt.headerOnly?S.columns[0].offsetHeight:S.offsetHeight)+w.PX}}),m(this,"destroy",function(){var S=w.tb,u=S.getAttribute(w.ID);return u?(w.store[u]="",S.classList.remove(w.RESIZABLE),S.classList.remove(w.FLEX),S.remote&&(S.remote.classList.remove(w.RESIZABLE),S.remote.classList.remove(w.FLEX)),S.gripContainer&&S.gripContainer.parentNode&&S.gripContainer.parentNode.removeChild(S.gripContainer),delete S.extended,S.opt):null}),m(this,"createStyle",function(S,u){var _=c()(u).toString(),x=S.querySelectorAll("style");if(!Array.from(x).filter(function(O){return O.gripid===_}).length){var A=document.createElement("style");A.type="text/css",A.gripid=_,A.styleSheet?A.styleSheet.cssText=u:A.appendChild(document.createTextNode(u)),S.appendChild(A)}}),m(this,"extendOptions",function(S){var u=Object.assign({},p.DEFAULTS,S);switch(u.fixed=!0,u.overflow=!1,u.resizeMode){case"flex":u.fixed=!1;break;case"overflow":u.fixed=!1,u.overflow=!0}return u}),m(this,"getTableHeaders",function(S){var u="#"+S.id,_=Array.from(S.querySelectorAll(u+">thead>tr:nth-of-type(1)>th"));return(_=_.concat(Array.from(S.querySelectorAll(u+">thead>tr:nth-of-type(1)>td")))).length||(_=(_=(_=(_=Array.from(S.querySelectorAll(u+">tbody>tr:nth-of-type(1)>th"))).concat(Array.from(S.querySelectorAll(u+">tr:nth-of-type(1)>th")))).concat(Array.from(S.querySelectorAll(u+">tbody>tr:nth-of-type(1)>td")))).concat(Array.from(S.querySelectorAll(u+">tr:nth-of-type(1)>td")))),w.filterInvisible(_,!1)}),m(this,"filterInvisible",function(S,u){return S.filter(function(_){var x=u?-1:_.offsetWidth,A=u?-1:_.offsetHeight;return!(x===0&&A===0||_.style&&_.style.display&&window.getComputedStyle(_).display==="none")})}),m(this,"extendTable",function(S){var u=w.tb;u.opt.removePadding&&u.classList.add("grip-padding"),u.classList.add(w.RESIZABLE),u.insertAdjacentHTML("beforebegin",'<div class="grip-container"/>'),u.grips=[],u.columns=[],u.tableWidth=Number(window.getComputedStyle(u).width.replace(/px/,"")).valueOf(),u.gripContainer=u.previousElementSibling,u.opt.marginLeft&&(u.gripContainer.style.marginLeft=u.opt.marginLeft),u.opt.marginRight&&(u.gripContainer.style.marginRight=u.opt.marginRight),u.cellSpace=parseInt(w.legacyIE?u.cellSpacing||u.currentStyle.borderSpacing:window.getComputedStyle(u).borderSpacing.split(" ")[0].replace(/px/,""))||2,u.borderSpace=parseInt(w.legacyIE?u.border||u.currentStyle.borderLeftWidth:window.getComputedStyle(u).borderLeftWidth.replace(/px/,""))||1,u.extended=!0,w.createGrips(S)}),m(this,"extendRemoteTable",function(S,u,_){_.opt.removePadding&&S.classList.add("grip-padding"),S.classList.add(w.RESIZABLE),S.getAttribute(w.ID)||S.setAttribute(w.ID,_.getAttribute(w.ID)+"remote"),S.columns=[],u.forEach(function(A,O){var E=u[O];E.w=_.columns[O].w,E.style.width=E.w+w.PX,E.removeAttribute("width"),S.columns.push(E)}),S.tableWidth=_.tableWidth,S.cellSpace=_.cellSpace,S.borderSpace=_.borderSpace;var x=Array.from(S.querySelectorAll("col"));S.columnGrp=w.filterInvisible(x,!0),S.columnGrp.forEach(function(A,O){A.removeAttribute("width"),A.style.width=_.columnGrp[O].style.width}),_.remote=S}),m(this,"createGrips",function(S){var u=w.tb;u.columnGrp=w.filterInvisible(Array.from(u.querySelectorAll("col")),!0),u.columnGrp.forEach(function(A){A.removeAttribute("width")}),u.columnCnt=S.length;var _=!1;w.store[u.getAttribute(w.ID)]&&(w.deserializeStore(S),_=!0),u.opt.widths||(u.opt.widths=[]),S.forEach(function(A,O){var E=S[O],L=u.opt.disabledColumns.indexOf(O)!==-1;w.createDiv(u.gripContainer,"grip-handle");var P=u.gripContainer.lastChild;!L&&u.opt.gripInnerHtml&&(P.innerHTML=u.opt.gripInnerHtml),w.createDiv(P,w.RESIZABLE),O===u.columnCnt-1&&(P.classList.add("grip-lastgrip"),u.opt.fixed&&(P.innerHTML="")),P.addEventListener("touchstart",w.onGripMouseDown,{capture:!0,passive:!0}),P.addEventListener("mousedown",w.onGripMouseDown,!0),L?P.classList.add("grip-disabledgrip"):(P.classList.remove("grip-disabledgrip"),P.addEventListener("touchstart",w.onGripMouseDown,{capture:!0,passive:!0}),P.addEventListener("mousedown",w.onGripMouseDown,!0)),P.t=u,P.i=O,u.opt.widths[O]?E.w=u.opt.widths[O]:E.w=_?Number(E.style.width.replace(/px/,"")).valueOf():Number(window.getComputedStyle(E).width.replace(/px/,"")).valueOf(),E.style.width=E.w+w.PX,E.removeAttribute("width"),P.data={i:O,t:u.getAttribute(w.ID),last:O===u.columnCnt-1},u.grips.push(P),u.columns.push(E)});var x=Array.from(u.querySelectorAll("td"));x.concat(Array.from(u.querySelectorAll("th"))),(x=(x=x.filter(function(A){for(var O=0;O<S.length;O++)if(S[O]===A)return!1;return!0})).filter(function(A){return!(A.querySelectorAll("table th").length||A.querySelectorAll("table td").length)})).forEach(function(A){A.removeAttribute("width")}),u.opt.fixed||(u.removeAttribute("width"),u.classList.add(w.FLEX)),w.syncGrips()}),m(this,"deserializeStore",function(S){var u=w.tb;if(u.columnGrp.forEach(function(O){O.removeAttribute("width")}),u.opt.flush)w.store[u.getAttribute(w.ID)]="";else{var _=w.store[u.getAttribute(w.ID)].split(";"),x=_[u.columnCnt+1];!u.opt.fixed&&x&&(u.style.width=x+w.PX,u.opt.overflow&&(u.style.minWidth=x+w.PX,u.tableWidth=Number(x).valueOf()));for(var A=0;A<u.columnCnt;A++)S[A].style.width=_[A]+w.PX,u.columnGrp[A]&&(u.columnGrp[A].style.width=100*Number(_[A]).valueOf()/Number(_[u.columnCnt]).valueOf()+"%")}}),m(this,"createDiv",function(S,u,_){var x=document.createElement("div");x.classList.add(u),_&&(x.innerHTML=_),S.appendChild(x)}),m(this,"syncCols",function(S,u,_,x){var A=S.remote,O=w.grip.x-w.grip.l,E=S.columns[u],L=S.columns[u+1];if(E&&L){var P=E.w+O,M=L.w-O,V=P+w.PX;if(E.style.width=V,S.columnGrp[u]&&S.columnGrp[u].style.width&&(S.columnGrp[u].style.width=V),A&&(A.columns[u].style.width=V,A.columnGrp[u]&&A.columnGrp[u].style.width&&(A.columnGrp[u].style.width=V)),x.fixed){var v=M+w.PX;L.style.width=v,S.columnGrp[u+1]&&S.columnGrp[u+1].style.width&&(S.columnGrp[u+1].style.width=v),A&&(A.columns[u+1].style.width=v,A.columnGrp[u+1]&&A.columnGrp[u+1].style.width&&(A.columnGrp[u+1].style.width=v))}else x.overflow&&(S.style.minWidth=S.tableWidth+O+w.PX);_&&(E.w=P,L.w=x.fixed?M:L.w,A&&(A.columns[u].w=P,A.columns[u+1].w=x.fixed?M:L.w))}});try{this.store=sessionStorage}catch{this.store={}}this.grip=null,this.tb=g,window.addEventListener("resize",this.onResize),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),this.init(R)};h.DEFAULTS={resizeMode:"fit",draggingClass:"grip-drag",gripInnerHtml:"",liveDrag:!1,minWidth:15,headerOnly:!1,hoverCursor:"col-resize",dragCursor:"col-resize",flush:!1,marginLeft:null,marginRight:null,remoteTable:null,disable:!1,partialRefresh:!1,disabledColumns:[],removePadding:!0,widths:[],serialize:!0,onDrag:null,onResize:null}},887:s=>{s.exports=function(l){for(var d=5381,c=l.length;c;)d=33*d^l.charCodeAt(--c);return d>>>0}}},n={};function i(s){if(n[s])return n[s].exports;var o=n[s]={exports:{}};return t[s](o,o.exports,i),o.exports}return i.n=s=>{var o=s&&s.__esModule?()=>s.default:()=>s;return i.d(o,{a:o}),o},i.d=(s,o)=>{for(var l in o)i.o(o,l)&&!i.o(s,l)&&Object.defineProperty(s,l,{enumerable:!0,get:o[l]})},i.o=(s,o)=>Object.prototype.hasOwnProperty.call(s,o),i.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i(67)})()})})(hl);const Tm=Bc(hl.exports),rr=r=>{const{entityId:e,entityVersionNumber:t}=r,{accessToken:n}=J(),i=Il();return n?a(D,{children:a(Je,{title:"Add this file to your Download Cart",placement:"right",enterNextDelay:300,children:a("a",{"data-testid":"AddToDownloadListV2",onClick:async()=>{try{await El(e,t,n),i.invalidateQueries(["downloadliststatsv2"]);const o=await Qr(n,e,t?t==null?void 0:t.toString():void 0);vt(`${o.name} was successfully added to your Download Cart.`,"success")}catch(o){vt(`Unable to add the file to your Download Cart. ${o}`,"danger")}},className:"ignoreLink",children:a(ce,{options:{icon:"addToCart"}})})})}):a(D,{})};try{rr.displayName="AddToDownloadListV2",rr.__docgenInfo={description:"",displayName:"AddToDownloadListV2",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/AddToDownloadListV2.tsx#AddToDownloadListV2"]={docgenInfo:rr.__docgenInfo,name:"AddToDownloadListV2",path:"src/lib/containers/AddToDownloadListV2.tsx#AddToDownloadListV2"})}catch{}var Qi={exports:{}};(function(r,e){(function(t,n){var i="1.0.2",s="",o="?",l="function",d="undefined",c="object",y="string",m="major",f="model",b="name",h="type",p="vendor",g="version",w="architecture",R="console",S="mobile",u="tablet",_="smarttv",x="wearable",A="embedded",O=255,E="Amazon",L="Apple",P="ASUS",M="BlackBerry",V="Browser",v="Chrome",q="Edge",k="Firefox",B="Google",Z="Huawei",ee="LG",G="Microsoft",U="Motorola",ae="Opera",T="Samsung",N="Sony",F="Xiaomi",H="Zebra",j="Facebook",me=function(z,ne){var Y={};for(var pe in z)ne[pe]&&ne[pe].length%2===0?Y[pe]=ne[pe].concat(z[pe]):Y[pe]=z[pe];return Y},te=function(z){for(var ne={},Y=0;Y<z.length;Y++)ne[z[Y].toUpperCase()]=z[Y];return ne},ze=function(z,ne){return typeof z===y?ye(ne).indexOf(ye(z))!==-1:!1},ye=function(z){return z.toLowerCase()},Te=function(z){return typeof z===y?z.replace(/[^\d\.]/g,s).split(".")[0]:n},qe=function(z,ne){if(typeof z===y)return z=z.replace(/^\s\s*/,s).replace(/\s\s*$/,s),typeof ne===d?z:z.substring(0,O)},Ve=function(z,ne){for(var Y=0,pe,X,An,oe,Mt,Le;Y<ne.length&&!Mt;){var Os=ne[Y],qs=ne[Y+1];for(pe=X=0;pe<Os.length&&!Mt;)if(Mt=Os[pe++].exec(z),Mt)for(An=0;An<qs.length;An++)Le=Mt[++X],oe=qs[An],typeof oe===c&&oe.length>0?oe.length===2?typeof oe[1]==l?this[oe[0]]=oe[1].call(this,Le):this[oe[0]]=oe[1]:oe.length===3?typeof oe[1]===l&&!(oe[1].exec&&oe[1].test)?this[oe[0]]=Le?oe[1].call(this,Le,oe[2]):n:this[oe[0]]=Le?Le.replace(oe[1],oe[2]):n:oe.length===4&&(this[oe[0]]=Le?oe[3].call(this,Le.replace(oe[1],oe[2])):n):this[oe]=Le||n;Y+=2}},Lt=function(z,ne){for(var Y in ne)if(typeof ne[Y]===c&&ne[Y].length>0){for(var pe=0;pe<ne[Y].length;pe++)if(ze(ne[Y][pe],z))return Y===o?n:Y}else if(ze(ne[Y],z))return Y===o?n:Y;return z},Dt={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Pt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Es={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[b,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[b,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[b,g],[/opios[\/ ]+([\w\.]+)/i],[g,[b,ae+" Mini"]],[/\bopr\/([\w\.]+)/i],[g,[b,ae]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[b,g],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[b,"UC"+V]],[/\bqbcore\/([\w\.]+)/i],[g,[b,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[g,[b,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[b,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[b,"IE"]],[/yabrowser\/([\w\.]+)/i],[g,[b,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[b,/(.+)/,"$1 Secure "+V],g],[/\bfocus\/([\w\.]+)/i],[g,[b,k+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[b,ae+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[b,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[b,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[b,ae+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[b,"MIUI "+V]],[/fxios\/([-\w\.]+)/i],[g,[b,k]],[/\bqihu|(qi?ho?o?|360)browser/i],[[b,"360 "+V]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[b,/(.+)/,"$1 "+V],g],[/(comodo_dragon)\/([\w\.]+)/i],[[b,/_/g," "],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[b,g],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[b],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[b,j],g],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[b,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[b,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[b,v+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[b,v+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[b,"Android "+V]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[b,g],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[g,[b,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[g,b],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[b,[g,Lt,Dt]],[/(webkit|khtml)\/([\w\.]+)/i],[b,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[b,"Netscape"],g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[b,k+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[b,g]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[w,"amd64"]],[/(ia32(?=;))/i],[[w,ye]],[/((?:i[346]|x)86)[;\)]/i],[[w,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[w,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[w,"armhf"]],[/windows (ce|mobile); ppc;/i],[[w,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[w,/ower/,s,ye]],[/(sun4\w)[;\)]/i],[[w,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[w,ye]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[p,T],[h,u]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[p,T],[h,S]],[/\((ip(?:hone|od)[\w ]*);/i],[f,[p,L],[h,S]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[p,L],[h,u]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[p,Z],[h,u]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[f,[p,Z],[h,S]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[p,F],[h,S]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[p,F],[h,u]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[p,"OPPO"],[h,S]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[p,"Vivo"],[h,S]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[f,[p,"Realme"],[h,S]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[p,U],[h,S]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[p,U],[h,u]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[p,ee],[h,u]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[p,ee],[h,S]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[p,"Lenovo"],[h,u]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[p,"Nokia"],[h,S]],[/(pixel c)\b/i],[f,[p,B],[h,u]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[p,B],[h,S]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[p,N],[h,S]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[p,N],[h,u]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[p,"OnePlus"],[h,S]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[p,E],[h,u]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[p,E],[h,S]],[/(playbook);[-\w\),; ]+(rim)/i],[f,p,[h,u]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[p,M],[h,S]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[p,P],[h,u]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[p,P],[h,S]],[/(nexus 9)/i],[f,[p,"HTC"],[h,u]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[p,[f,/_/g," "],[h,S]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[p,"Acer"],[h,u]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[p,"Meizu"],[h,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[p,"Sharp"],[h,S]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,f,[h,S]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,f,[h,u]],[/(surface duo)/i],[f,[p,G],[h,u]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[p,"Fairphone"],[h,S]],[/(u304aa)/i],[f,[p,"AT&T"],[h,S]],[/\bsie-(\w*)/i],[f,[p,"Siemens"],[h,S]],[/\b(rct\w+) b/i],[f,[p,"RCA"],[h,u]],[/\b(venue[\d ]{2,7}) b/i],[f,[p,"Dell"],[h,u]],[/\b(q(?:mv|ta)\w+) b/i],[f,[p,"Verizon"],[h,u]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[p,"Barnes & Noble"],[h,u]],[/\b(tm\d{3}\w+) b/i],[f,[p,"NuVision"],[h,u]],[/\b(k88) b/i],[f,[p,"ZTE"],[h,u]],[/\b(nx\d{3}j) b/i],[f,[p,"ZTE"],[h,S]],[/\b(gen\d{3}) b.+49h/i],[f,[p,"Swiss"],[h,S]],[/\b(zur\d{3}) b/i],[f,[p,"Swiss"],[h,u]],[/\b((zeki)?tb.*\b) b/i],[f,[p,"Zeki"],[h,u]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],f,[h,u]],[/\b(ns-?\w{0,9}) b/i],[f,[p,"Insignia"],[h,u]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[p,"NextBook"],[h,u]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],f,[h,S]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],f,[h,S]],[/\b(ph-1) /i],[f,[p,"Essential"],[h,S]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[p,"Envizen"],[h,u]],[/\b(trio[-\w\. ]+) b/i],[f,[p,"MachSpeed"],[h,u]],[/\btu_(1491) b/i],[f,[p,"Rotor"],[h,u]],[/(shield[\w ]+) b/i],[f,[p,"Nvidia"],[h,u]],[/(sprint) (\w+)/i],[p,f,[h,S]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[p,G],[h,S]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[p,H],[h,u]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[p,H],[h,S]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,f,[h,R]],[/droid.+; (shield) bui/i],[f,[p,"Nvidia"],[h,R]],[/(playstation [345portablevi]+)/i],[f,[p,N],[h,R]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[p,G],[h,R]],[/smart-tv.+(samsung)/i],[p,[h,_]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[p,T],[h,_]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,ee],[h,_]],[/(apple) ?tv/i],[p,[f,L+" TV"],[h,_]],[/crkey/i],[[f,v+"cast"],[p,B],[h,_]],[/droid.+aft(\w)( bui|\))/i],[f,[p,E],[h,_]],[/\(dtv[\);].+(aquos)/i],[f,[p,"Sharp"],[h,_]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[p,qe],[f,qe],[h,_]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,_]],[/((pebble))app/i],[p,f,[h,x]],[/droid.+; (glass) \d/i],[f,[p,B],[h,x]],[/droid.+; (wt63?0{2,3})\)/i],[f,[p,H],[h,x]],[/(quest( 2)?)/i],[f,[p,j],[h,x]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[h,A]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[f,[h,S]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[h,u]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,u]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[h,S]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[b,q+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[b,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[b,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,b]],os:[[/microsoft (windows) (vista|xp)/i],[b,g],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[b,[g,Lt,Pt]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[b,"Windows"],[g,Lt,Pt]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[b,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[b,"Mac OS"],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[g,b],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[b,g],[/\(bb(10);/i],[g,[b,M]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[b,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[b,k+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[b,"webOS"]],[/crkey\/([\d\.]+)/i],[g,[b,v+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[b,"Chromium OS"],g],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[b,g],[/(sunos) ?([\w\.\d]*)/i],[[b,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[b,g]]},Ne=function(z,ne){if(typeof z===c&&(ne=z,z=n),!(this instanceof Ne))return new Ne(z,ne).getResult();var Y=z||(typeof t!==d&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:s),pe=ne?me(Es,ne):Es;return this.getBrowser=function(){var X={};return X[b]=n,X[g]=n,Ve.call(X,Y,pe.browser),X.major=Te(X.version),X},this.getCPU=function(){var X={};return X[w]=n,Ve.call(X,Y,pe.cpu),X},this.getDevice=function(){var X={};return X[p]=n,X[f]=n,X[h]=n,Ve.call(X,Y,pe.device),X},this.getEngine=function(){var X={};return X[b]=n,X[g]=n,Ve.call(X,Y,pe.engine),X},this.getOS=function(){var X={};return X[b]=n,X[g]=n,Ve.call(X,Y,pe.os),X},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Y},this.setUA=function(X){return Y=typeof X===y&&X.length>O?qe(X,O):X,this},this.setUA(Y),this};Ne.VERSION=i,Ne.BROWSER=te([b,g,m]),Ne.CPU=te([w]),Ne.DEVICE=te([f,p,h,R,S,_,u,x,A]),Ne.ENGINE=Ne.OS=te([b,g]),r.exports&&(e=r.exports=Ne),e.UAParser=Ne;var ht=typeof t!==d&&(t.jQuery||t.Zepto);if(ht&&!ht.ua){var Tn=new Ne;ht.ua=Tn.getResult(),ht.ua.get=function(){return Tn.getUA()},ht.ua.set=function(z){Tn.setUA(z);var ne=Tn.getResult();for(var Y in ne)ht.ua[Y]=ne[Y]}}})(typeof window=="object"?window:$)})(Qi,Qi.exports);const Xt=r=>{const{accessToken:e}=J(),{associatedObjectId:t,entityVersionNumber:n,associatedObjectType:i,fileHandleId:s,displayFileName:o,onClickCallback:l}=r,{ref:d,inView:c}=Nt(),[y,m]=I.exports.useState(!1),[f,b]=I.exports.useState(!1),[h,p]=I.exports.useState(),[g,w]=I.exports.useState(),[R,S]=I.exports.useState("");let u=!0;I.exports.useEffect(()=>(u&&c&&O(),()=>{u=!1}),[e,c]);const _=async()=>{let L;const M=new Qi.exports.UAParser().getBrowser().name=="Safari";let V=null;M&&(V=window.open("","Safari Download","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,popup,width=600,height=200"),V.document.body.innerHTML="Downloading file on Safari...");try{i===xe.TableEntity?L=(await A(!0)).requestedFiles[0].preSignedURL:L=(await Ns(h,e,!1,!0)).preSignedURL}catch(v){console.log("Fail to get file download link: ",v)}L?(M&&V?(V.location=L,setTimeout(()=>{V&&V.close()},1e4)):window.open(L),l&&l(y)):(V==null||V.close(),console.log("Fail to get file download link"))},x=L=>L&&!L.isPreview?(b(!0),!0):(b(!1),!1),A=(L=!1)=>Rt({includeFileHandles:!0,includePreSignedURLs:L,includePreviewPreSignedURLs:!1,requestedFiles:[{associateObjectId:t,associateObjectType:i,fileHandleId:s}]},e),O=()=>Qr(e,t,n).then(async L=>{if(L.hasOwnProperty("dataFileHandleId"))return p(L),Ns(L,e,!0).then(P=>{const M=P.fileHandle;M&&x(M)&&Ed(M)&&(m(!0),w(M.externalURL))}).catch(P=>{console.log("Error on getFileEntityFileHandle = ",P)});if(i===xe.TableEntity){const M=(await A()).requestedFiles[0].fileHandle;o&&M&&x(M)&&S(M.fileName)}return Promise.resolve()}).catch(L=>{console.log("Error on getEntity = ",L)});return a(Je,{title:y?"Navigate to external link":"Download this file individually",enterNextDelay:Vr,placement:"left",children:a("span",{ref:d,children:(()=>y?a("button",{className:"btn-download-icon",onClick:()=>{l&&l(y)},children:a("a",{className:"ignoreLink",rel:"noreferrer",href:g,target:"_blank",children:a(ce,{options:{icon:"openInNewWindow"}})})}):f?C("button",{className:"btn-download-icon",onClick:_,children:[a(ce,{options:{icon:"download"}}),o&&R?R:""]}):a(D,{}))()})})};try{Xt.displayName="DirectDownload",Xt.__docgenInfo={description:"",displayName:"DirectDownload",props:{associatedObjectId:{defaultValue:null,description:"",name:"associatedObjectId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},associatedObjectType:{defaultValue:null,description:"",name:"associatedObjectType",required:!1,type:{name:"enum",value:[{value:'"FileEntity"'},{value:'"TableEntity"'},{value:'"WikiAttachment"'},{value:'"WikiMarkdown"'},{value:'"UserProfileAttachment"'},{value:'"MessageAttachment"'},{value:'"TeamAttachment"'},{value:'"SubmissionAttachment"'},{value:'"VerificationSubmission"'},{value:'"AccessRequirementAttachment"'},{value:'"DataAccessRequestAttachment"'},{value:'"DataAccessSubmissionAttachment"'}]}},fileHandleId:{defaultValue:null,description:"",name:"fileHandleId",required:!1,type:{name:"string"}},displayFileName:{defaultValue:null,description:"",name:"displayFileName",required:!1,type:{name:"boolean"}},onClickCallback:{defaultValue:null,description:"",name:"onClickCallback",required:!1,type:{name:"((isExternalLink: boolean) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DirectDownload.tsx#DirectDownload"]={docgenInfo:Xt.__docgenInfo,name:"DirectDownload",path:"src/lib/containers/DirectDownload.tsx#DirectDownload"})}catch{}const Am=r=>{const e=I.exports.useRef();return I.exports.useEffect(()=>{e.current=r}),e.current},xm=r=>Am(r)!==r;function Ge({isCompleted:r}){return a("div",{"data-testid":`AccessApprovalCheckMark-${r}`,className:`check-mark-container ${r?"green":"orange"}`,children:r?a(Ad,{}):a(xd,{})})}try{Ge.displayName="AccessApprovalCheckMark",Ge.__docgenInfo={description:"",displayName:"AccessApprovalCheckMark",props:{isCompleted:{defaultValue:null,description:"",name:"isCompleted",required:!0,type:{name:"boolean | undefined"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AccessApprovalCheckMark.tsx#AccessApprovalCheckMark"]={docgenInfo:Ge.__docgenInfo,name:"AccessApprovalCheckMark",path:"src/lib/containers/access_requirement_list/AccessApprovalCheckMark.tsx#AccessApprovalCheckMark"})}catch{}function Ct({user:r,wikiPage:e,accessRequirement:t,accessRequirementStatus:n,showButton:i=!0,entityId:s,onHide:o}){const{accessToken:l}=J(),[d,c]=I.exports.useState(!0),y=n==null?void 0:n.isApproved,[m,f]=I.exports.useState(y);let b="";t.concreteType===_e.ManagedACTAccessRequirement||t.concreteType===_e.ACTAccessRequirement?window.location.hostname==="www.synapse.org"||window.location.hostname==="staging.synapse.org"?b="Request access":b="Request access via Synapse.org":b="I Accept Terms of Use",I.exports.useEffect(()=>{f(y)},[y]);const h=()=>{window.open(`${Oe.PORTAL}#!AccessRequirement:AR_ID=${t.id}&TYPE=ENTITY&ID=${s}`)},p=()=>{if(t.concreteType===_e.ManagedACTAccessRequirement||t.concreteType===_e.ACTAccessRequirement)h(),o==null||o();else if(!m){const O={requirementId:t==null?void 0:t.id,submitterId:r==null?void 0:r.ownerId,accessorId:r==null?void 0:r.ownerId,state:ds.APPROVED};ka(l,O).then(E=>{f(!0)}).catch(E=>console.error("Error on post access approval: ",E))}},g=t.termsOfUse,w=t.actContactInfo,R=t.concreteType===_e.TermsOfUseAccessRequirement,S=t.concreteType===_e.ACTAccessRequirement,u=R&&g||S&&w;let _=a(D,{});e?_=a("div",{className:"AcceptRequirementsMarkdown",children:a(Ee,{wikiId:e==null?void 0:e.wikiPageId,ownerId:e==null?void 0:e.ownerObjectId,objectType:e==null?void 0:e.ownerObjectType})}):u&&(_=a(Ee,{markdown:R?g:w}));const x=t.concreteType===_e.ManagedACTAccessRequirement;return a(D,{children:C("div",{"data-testid":"AcceptedRequirements",className:"requirement-container",children:[a(Ge,{isCompleted:m}),C("div",{className:"terms-of-use-content",children:[m?C("div",{children:[C("p",{children:[x?"Your data access request has been approved.":"You have accepted the terms of use.",x&&a("a",{className:"update-request-button",onClick:()=>{h()},children:"Update Request"}),a("a",{className:"view-terms-button",onClick:()=>{c(!d)},children:"View Terms"})]}),a("div",{className:`view-terms ${d?"hidden":"show"}`,children:_})]}):_,l&&i&&C("div",{className:`button-container ${m?"hide":"default"}`,children:[a("div",{className:"accept-button-container",children:a("button",{className:"accept-button",onClick:p,children:b})}),a("div",{className:"not-accept-button-container",children:a("button",{className:"not-accpet-button",onClick:()=>o==null?void 0:o(),children:"I do not accept"})})]})]})]})})}try{Ct.displayName="AcceptedRequirements",Ct.__docgenInfo={description:"",displayName:"AcceptedRequirements",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPageKey | undefined"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement | ManagedACTAccessRequirement | TermsOfUseAccessRequirement | SelfSignAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus | undefined"}},showButton:{defaultValue:{value:"true"},description:"",name:"showButton",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AcceptedRequirements.tsx#AcceptedRequirements"]={docgenInfo:Ct.__docgenInfo,name:"AcceptedRequirements",path:"src/lib/containers/access_requirement_list/AcceptedRequirements.tsx#AcceptedRequirements"})}catch{}function Rm({accessRequirement:r,user:e,onHide:t,accessRequirementStatus:n,entityId:i}){const{accessToken:s}=J(),[o,l]=I.exports.useState();return I.exports.useEffect(()=>{(async()=>{try{const c=await Kr(s,r.id);l(c)}catch(c){console.error("Error on get ACTAccessRequirement",c)}})()},[s,r]),a(Ct,{accessRequirement:r,accessRequirementStatus:n,user:e,wikiPage:o,onHide:t,entityId:i})}try{ACTAccessRequirement.displayName="ACTAccessRequirement",ACTAccessRequirement.__docgenInfo={description:"",displayName:"ACTAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/ACTAccessRequirement.tsx#ACTAccessRequirement"]={docgenInfo:ACTAccessRequirement.__docgenInfo,name:"ACTAccessRequirement",path:"src/lib/containers/access_requirement_list/ACTAccessRequirement.tsx#ACTAccessRequirement"})}catch{}const ir=r=>{const{accessToken:e}=J(),{formSubmitRequestObject:t,onHide:n}=r,[i,s]=I.exports.useState(),[o,l]=I.exports.useState(!1),d=async()=>{if(t)try{await La(t,e)?n==null||n():(s({key:"danger",message:"Sorry, there is an error in submitting your request. Please close this dialog and try again later."}),l(!0))}catch(c){console.log("CancelRequestDataAccess: Error updating form",c),s({key:"danger",message:`Sorry, there is an error in submitting your request. ${c.reason||""}. Please close this dialog and try again later`}),l(!0)}};return C(D,{children:[a(K.Header,{closeButton:!0,children:a(K.Title,{className:"AccessRequirementList__title",children:"Save Changes"})}),C(K.Body,{children:[a("p",{children:"Would you like to save your recent changes?"}),i&&a(Sn,{variant:i.key,children:i.message})]}),C(K.Footer,{children:[!o&&C(D,{children:[a(de,{variant:"link",onClick:()=>n==null?void 0:n(),children:"Cancel"}),a(de,{variant:"primary",onClick:()=>d(),children:"Save changes"})]}),o&&a(de,{variant:"primary",onClick:()=>n==null?void 0:n(),children:"Close"})]})]})};try{ir.displayName="CancelRequestDataAccess",ir.__docgenInfo={description:"",displayName:"CancelRequestDataAccess",props:{formSubmitRequestObject:{defaultValue:null,description:"",name:"formSubmitRequestObject",required:!0,type:{name:"RequestInterface | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/CancelRequestDataAccess.tsx#CancelRequestDataAccess"]={docgenInfo:ir.__docgenInfo,name:"CancelRequestDataAccess",path:"src/lib/containers/access_requirement_list/managedACTAccess/CancelRequestDataAccess.tsx#CancelRequestDataAccess"})}catch{}const sr=r=>{const{user:e,wikiPage:t,accessRequirementStatus:n,accessRequirement:i,showButton:s=!0,onHide:o,requestDataStepCallback:l}=r,{accessToken:d}=J(),[c,y]=I.exports.useState(!0),m=n==null?void 0:n.isApproved,[f,b]=I.exports.useState(m),[h,p]=I.exports.useState(),[g,w]=I.exports.useState(),[R,S]=I.exports.useState(!1);I.exports.useEffect(()=>{b(m),n!=null&&n.currentSubmissionStatus&&(p(n.currentSubmissionStatus.state),A(n.currentSubmissionStatus))},[m]);const u=()=>{l==null||l({managedACTAccessRequirement:i,step:1})},_=async()=>{if(i.concreteType===_e.ManagedACTAccessRequirement)if(d)if(h===we.SUBMITTED&&!R){const k={key:"danger",message:C(D,{children:[a("strong",{children:"Error canceling your data access request."}),a("br",{}),"Please try again later."]})};try{(await Ol(n==null?void 0:n.currentSubmissionStatus.submissionId,d)).state===we.CANCELLED?(w({key:"success",message:a("strong",{children:"Your data access request has been canceled."})}),S(!0)):w(k)}catch(B){console.log("RequestDataAccess: error canceling data access request:",B),w(k)}}else u();else l==null||l({managedACTAccessRequirement:i,step:4});else if(!f){const k={requirementId:i==null?void 0:i.id,submitterId:e==null?void 0:e.ownerId,accessorId:e==null?void 0:e.ownerId,state:ds.APPROVED};ka(d,k).then(B=>{b(!0)}).catch(B=>console.error("Error on post access approval: ",B))}},x=()=>{if(i.concreteType===_e.ManagedACTAccessRequirement||i.concreteType===_e.ACTAccessRequirement)if(h){let k;switch(h){case we.SUBMITTED:k=R?"Update Request":"Cancel Request";break;case we.APPROVED:case we.REJECTED:case we.CANCELLED:k="Update Request"}return k}else return"Request access";else return"I Accept Terms of Use"},A=k=>{switch(k.state){case we.SUBMITTED:w({key:"primary",message:a("strong",{children:"You have submitted a data access request."})});break;case we.APPROVED:w({key:"success",message:a("strong",{children:"Your data access request has been approved."})});break;case we.REJECTED:w({key:"danger",message:C(D,{children:[a("strong",{children:"Your data access request has been rejected."}),a("br",{}),k.rejectedReason||""]})});break}return a(D,{})},O=i.termsOfUse,E=i.actContactInfo,L=i.concreteType===_e.TermsOfUseAccessRequirement,P=i.concreteType===_e.ACTAccessRequirement,M=L&&O||P&&E;let V=a(D,{});t?V=C("div",{className:"AcceptRequirementsMarkdown",children:[t&&a(Ee,{wikiId:t==null?void 0:t.wikiPageId,ownerId:t==null?void 0:t.ownerObjectId,objectType:t==null?void 0:t.ownerObjectType}),g&&a(Sn,{className:"access-requirement-list-alert",variant:g.key,children:g.message})]}):M&&(V=a(Ee,{markdown:L?O:E}));const v=i.concreteType===_e.ManagedACTAccessRequirement;return a(D,{children:C("div",{"data-testid":"RequestDataAccess",className:"requirement-container",children:[a(Ge,{isCompleted:f}),C("div",{className:"terms-of-use-content",children:[f?C("div",{children:[a("p",{children:v?"Your data access request has been approved.":"You have accepted the terms of use."}),C("p",{style:{marginBottom:"0"},children:[v&&a("button",{className:"update-request-button",onClick:()=>{u()},style:{paddingLeft:"0",marginRight:"2rem"},children:x()}),a("a",{onClick:()=>{y(!c)},children:"View Terms"})]}),a("div",{className:`view-terms ${c?"hidden":"show"}`,children:V})]}):V,s&&C("div",{className:`button-container ${f?"hide":"default"}`,children:[a("div",{className:"accept-button-container",children:a("button",{className:"accept-button",onClick:_,children:x()})}),a("div",{className:"not-accept-button-container",children:a("button",{className:"not-accpet-button",onClick:()=>o==null?void 0:o(),children:"I do not accept"})})]})]})]})})};try{sr.displayName="RequestDataAccess",sr.__docgenInfo={description:"",displayName:"RequestDataAccess",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPageKey | undefined"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement | ManagedACTAccessRequirement | TermsOfUseAccessRequirement | SelfSignAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!1,type:{name:"ManagedACTAccessRequirementStatus"}},showButton:{defaultValue:null,description:"",name:"showButton",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccess.tsx#RequestDataAccess"]={docgenInfo:sr.__docgenInfo,name:"RequestDataAccess",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccess.tsx#RequestDataAccess"})}catch{}const Im=r=>{const{entityId:e,user:t,accessRequirement:n,accessRequirementStatus:i,onHide:s,requestDataStepCallback:o}=r,{accessToken:l}=J(),[d,c]=I.exports.useState();return I.exports.useEffect(()=>{(async()=>{try{const m=await Kr(l,n.id);c(m)}catch(m){console.error("Error on get ManagedACTAccessRequirement",m)}})()},[l,n]),a(sr,{accessRequirement:n,accessRequirementStatus:i,entityId:e,user:t,wikiPage:d,onHide:s,requestDataStepCallback:o})};try{ManagedACTAccessRequirement.displayName="ManagedACTAccessRequirement",ManagedACTAccessRequirement.__docgenInfo={description:"",displayName:"ManagedACTAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"ManagedACTAccessRequirementStatus"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((props: requestDataStepCallbackProps) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/ManagedACTAccessRequirement.tsx#ManagedACTAccessRequirement"]={docgenInfo:ManagedACTAccessRequirement.__docgenInfo,name:"ManagedACTAccessRequirement",path:"src/lib/containers/access_requirement_list/managedACTAccess/ManagedACTAccessRequirement.tsx#ManagedACTAccessRequirement"})}catch{}const ar=r=>{const{requestDataStepCallback:e,managedACTAccessRequirement:t,onHide:n}=r,{accessToken:i}=J(),[s,o]=I.exports.useState(""),[l,d]=I.exports.useState(""),[c,y]=I.exports.useState(""),[m,f]=I.exports.useState(),b=I.exports.useRef({});let h=!0;I.exports.useEffect(()=>(h&&(f(void 0),p()),()=>{h=!1}),[i]);const p=async()=>{try{const R=await ql(String(t.id),i);R.id&&(b.current=R,o(R.projectLead),d(R.institution),y(R.intendedDataUseStatement))}catch(R){console.log("RequestDataAccessStep1: Error getting research project data: ",R)}},g=(R="")=>C(D,{children:[a("strong",{children:"Unable to update research project data."}),a("br",{}),R]});return a(D,{children:C(se,{className:"access-request-form1",onSubmit:R=>{R.preventDefault();const S=Object.assign({},b.current,{accessRequirementId:String(t.id),institution:l,projectLead:s,intendedDataUseStatement:c});try{Nl(S,i).then(u=>{e==null||e({managedACTAccessRequirement:t,step:2,researchProjectId:u.id})}).catch(u=>{console.log("RequestDataAccessStep1: Error updating research project data: ",u),f({key:"danger",message:g(u.reason)})})}catch(u){console.log("RequestDataAccessStep1: Error updating research project data: ",u),f({key:"danger",message:g(u.reason)})}},children:[a(K.Header,{closeButton:!0,children:a(K.Title,{className:"AccessRequirementList__title",children:"Request Access"})}),C(K.Body,{children:[a("p",{children:"Please tell us about your project."}),C(se.Group,{children:[a(se.Label,{htmlFor:"project-lead",children:"Project Lead"}),a(se.Control,{id:"project-lead",type:"text",value:s,required:!0,onChange:R=>o(R.target.value)})]}),C(se.Group,{children:[a(se.Label,{htmlFor:"institution",children:"Institution"}),a(se.Control,{id:"institution",type:"text",value:l,required:!0,onChange:R=>d(R.target.value)})]}),t.isIDURequired&&C(se.Group,{children:[C(se.Label,{htmlFor:"data-use",children:["Intended Data Use Statement -",t.isIDUPublic&&a("i",{id:"idu-visible",children:"this will be visible to the public"})]}),a(se.Control,{id:"data-use",as:"textarea",value:c,rows:10,required:!0,onChange:R=>y(R.target.value)})]}),m&&a(Sn,{variant:m.key,children:m.message})]}),C(K.Footer,{children:[a(de,{variant:"link",onClick:()=>n==null?void 0:n(),children:"Cancel"}),a(de,{variant:"primary",type:"submit",children:"Save changes"})]})]})})};try{ar.displayName="RequestDataAccessStep1",ar.__docgenInfo={description:"",displayName:"RequestDataAccessStep1",props:{requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((props: requestDataStepCallbackProps) => void)"}},managedACTAccessRequirement:{defaultValue:null,description:"",name:"managedACTAccessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep1.tsx#RequestDataAccessStep1"]={docgenInfo:ar.__docgenInfo,name:"RequestDataAccessStep1",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep1.tsx#RequestDataAccessStep1"})}catch{}const it=r=>{const{id:e,fileHandleAssociation:t,className:n,variant:i,fileName:s}=r,{accessToken:o}=J(),l=async()=>{if(!t.fileHandleId||!o)return;const d={requestedFiles:[t],includePreSignedURLs:!0,includeFileHandles:!1,includePreviewPreSignedURLs:!1};try{const y=(await Rt(d,o)).requestedFiles[0].preSignedURL;y?window.open(y):console.log("Fail to get file download link")}catch(c){console.log("Fail to get file download link",c)}};return a(D,{children:a(de,{id:e,variant:i,className:n,onClick:d=>l(),children:s})})};try{it.displayName="DirectDownloadButton",it.__docgenInfo={description:"",displayName:"DirectDownloadButton",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!0,type:{name:"string | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DirectDownloadButton.tsx#DirectDownloadButton"]={docgenInfo:it.__docgenInfo,name:"DirectDownloadButton",path:"src/lib/containers/DirectDownloadButton.tsx#DirectDownloadButton"})}catch{}const or=r=>{const{requestDataStepCallback:e,managedACTAccessRequirement:t,entityId:n,user:i,researchProjectId:s}=r,{accessToken:o}=J(),[l,d]=I.exports.useState(),[c,y]=I.exports.useState(),[m,f]=I.exports.useState(),[b,h]=I.exports.useState([]),[p,g]=I.exports.useState(),[w,R]=I.exports.useState(),[S,u]=I.exports.useState(!1),[_,x]=I.exports.useState([]),A={},O={requestedFiles:[],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1};let E=!0;I.exports.useEffect(()=>(E&&(R(void 0),L()),()=>{E=!1}),[o,s]);const L=async()=>{const T=await kl(String(t.id),o);if(T.accessorChanges){const N=new Set;T.accessorChanges=T.accessorChanges.filter(F=>N.has(F.userId)?!1:N.add(F.userId))}T.concreteType==="org.sagebionetworks.repo.model.dataaccess.Renewal"&&u(!0),T.researchProjectId=s,g(T),P(T),M(T)},P=T=>{const N=T.accessorChanges,F=[];!N||!N.length?(F.push(i.ownerId),g(j=>Object.assign({},j,{accessorChanges:[{userId:i.ownerId,type:Ue.GAIN_ACCESS}]}))):N.forEach(j=>{F.push(j.userId)});const H=F.map(j=>Ll(o,j));Promise.all(H).then(j=>{const me=j.map((te,ze)=>{var Te;const ye=N&&((Te=N[ze])==null?void 0:Te.type)?N[ze].type:Ue.GAIN_ACCESS;return{profile:te,accessType:ye}});x(me)})},M=T=>{if(t.isDUCRequired&&t.ducTemplateFileHandleId){const N={associateObjectId:String(t.id),associateObjectType:xe.AccessRequirementAttachment,fileHandleId:t.ducTemplateFileHandleId};O.requestedFiles.push(N),A[t.ducTemplateFileHandleId]||(A[t.ducTemplateFileHandleId]=[]),A[t.ducTemplateFileHandleId].push("DUCTemplate"),d(N)}if(t.isDUCRequired&&T.ducFileHandleId){const N={associateObjectId:T.id,associateObjectType:xe.DataAccessRequestAttachment,fileHandleId:T.ducFileHandleId};O.requestedFiles.push(N),A[T.ducFileHandleId]||(A[T.ducFileHandleId]=[]),A[T.ducFileHandleId].push("DUC"),y(N)}if(t.isIRBApprovalRequired&&T.irbFileHandleId){const N={associateObjectId:T.id,associateObjectType:xe.DataAccessRequestAttachment,fileHandleId:T.irbFileHandleId};O.requestedFiles.push(N),A[T.irbFileHandleId]||(A[T.irbFileHandleId]=[]),A[T.irbFileHandleId].push("IRB"),f(N)}T.attachments&&T.attachments.length&&T.attachments.forEach(N=>{O.requestedFiles.push({associateObjectId:T.id,associateObjectType:xe.DataAccessRequestAttachment,fileHandleId:N}),A[N]||(A[N]=[]),A[N].push("attachments")}),O.requestedFiles.length&&Rt(O,o).then(N=>{N.requestedFiles.forEach(F=>{const H=F.fileHandle.fileName,j=A[F.fileHandleId];j.forEach(me=>{switch(me){case"DUCTemplate":d(te=>Object.assign({},te,{fileName:H})),A[F.fileHandleId].splice(j.indexOf("DUCTemplate"),1);break;case"DUC":y(te=>Object.assign({},te,{fileName:H})),A[F.fileHandleId].splice(j.indexOf("DUC"),1);break;case"IRB":f(te=>Object.assign({},te,{fileName:H})),A[F.fileHandleId].splice(j.indexOf("IRB"),1);break;case"attachments":h(te=>[...te,{fileName:H,associateObjectId:T.id,associateObjectType:xe.DataAccessRequestAttachment,fileHandleId:F.fileHandleId}]),A[F.fileHandleId].splice(j.indexOf("attachments"),1);break}})})})},V=async()=>{if(p)try{const T=await La(p,o);if(T&&T.etag){const N={requestId:T.id,requestEtag:T.etag,subjectId:n,subjectType:Zr.ENTITY};g(j=>Object.assign({},j,{etag:T.etag}));const F=await Pl(N,o),H=q(F);F.state===we.REJECTED?R({key:"danger",message:H}):e==null||e({step:5})}else R({key:"danger",message:v()})}catch(T){console.log("RequestDataAccessStep2: Error updating form",T),R({key:"danger",message:v(T.reason)})}},v=(T="")=>C(D,{children:[a("strong",{children:"Sorry, there is an error in submitting your request."}),a("br",{}),T]}),q=T=>{const N="The information has been ";switch(T.state){case we.SUBMITTED:return C("strong",{children:[N," submitted."]});case we.APPROVED:return C("strong",{children:[N," approved."]});case we.CANCELLED:return C("strong",{children:[N," canceled."]});case we.REJECTED:return C(D,{children:[C("strong",{children:[N," rejected."]})," ",T.rejectedReason,". Please close this dialog and try again later."]});default:return a(D,{})}},k=T=>{const N=_.filter(H=>H.profile.ownerId!==T);x(N);const F=N.map(H=>({userId:H.profile.ownerId,type:H.accessType}));g(H=>Object.assign({},H,{accessorChanges:F}))},B=T=>{const N=b.filter(H=>H.fileHandleId!==T);h(N);const F=N.map(H=>H.fileHandleId);g(H=>Object.assign({},H,{attachments:F}))},Z=T=>{if(T.resp&&T.success){const N=T.resp;if(T.context==="attachments"){const F=p!=null&&p.attachments?p==null?void 0:p.attachments:[];F==null||F.push(N.fileHandleId),g(H=>Object.assign({},H,{attachments:F})),h(H=>[...H,{fileName:N.fileName,fileHandleId:N.fileHandleId}])}else g(F=>Object.assign({},F,{[T.context]:N.fileHandleId})),T.context==="ducFileHandleId"&&y(F=>Object.assign({},F,{fileName:N.fileName,fileHandleId:N.fileHandleId})),T.context==="irbFileHandleId"&&f(F=>Object.assign({},F,{fileName:N.fileName,fileHandleId:N.fileHandleId}))}else!T.success&&T.error&&(console.log("RequestDataAccessStep2: Error uploading the file",T.error),R({key:"danger",message:v(T.error.reason)}))},ee=T=>{if(!_.map(F=>F.profile.ownerId).includes(T.ownerId)){x(j=>{var me,te;return[...j,{profile:{ownerId:T.ownerId,firstName:(me=T.firstName)!=null?me:"",lastName:(te=T.lastName)!=null?te:"",userName:T.userName},accessType:Ue.GAIN_ACCESS}]});const F={userId:T.ownerId,type:Ue.GAIN_ACCESS},H=(p==null?void 0:p.accessorChanges)||[];H.push(F),g(j=>Object.assign({},j,{accessorChanges:H}))}},G=(T,N)=>{const F=T.target.value;switch(N){case"publications":g(H=>Object.assign({},H,{publication:F}));break;case"summaryOfUse":g(H=>Object.assign({},H,{summaryOfUse:F}));break}},U=(T,N)=>{const F=[..._],H=F.findIndex(te=>te.profile.ownerId===N);F[H].accessType=T,x(F);const j=(p==null?void 0:p.accessorChanges)||[],me=j.findIndex(te=>te.userId===N);j[me].type=T,g(te=>Object.assign({},te,{accessorChanges:j}))},ae=()=>{let T="",N="";return t.isCertifiedUserRequired&&(T="https://help.synapse.org/docs/User-Types.2007072795.html#UserAccountTiers-CertifiedUsers",N="All data requesters must be a certified user."),t.isValidatedProfileRequired&&(T="https://help.synapse.org/docs/User-Types.2007072795.html#UserAccountTiers-ValidatedUsers",N="All data requesters must have a validated user profile."),T&&N?C(D,{children:[N,a("a",{href:T,target:"_blank",rel:"noreferrer",children:a(ce,{options:{icon:"info"}})})]}):a(D,{})};return a(D,{children:C(se,{className:"access-request-form2",onSubmit:T=>T.preventDefault(),children:[a(K.Header,{closeButton:!0,children:a(K.Title,{className:"AccessRequirementList__title",children:"Request Access"})}),C(K.Body,{children:[a("p",{children:"Please provide the information below to submit the request for access."}),C(se.Group,{children:[a(se.Label,{htmlFor:"requesters",style:{margin:"0"},children:"Data Requesters"}),a("br",{}),C("span",{className:"requester-label",children:[t.isDUCRequired&&C(D,{children:["This list should match those listed on your DUC.",a("br",{})]}),ae()]}),a(pd,{id:"requesters",typeFilter:Dl.USERS_ONLY,onSelectCallback:ee,filterUserIds:_.map(T=>T.profile.ownerId)})]}),a(se.Group,{style:{marginBottom:"4rem"},children:_.map((T,N)=>C("div",{className:"list-items",children:[a(Ga,{userProfile:T.profile,showAccountLevelIcon:!0,disableLink:!0,showFullName:!0}),i.ownerId!==T.profile.ownerId&&T.accessType===Ue.GAIN_ACCESS&&a(de,{className:"clear-x",variant:"link",onClick:()=>k(T.profile.ownerId),children:a(ce,{options:{icon:"clear"}})}),S&&T.accessType!==Ue.GAIN_ACCESS&&a(D,{children:a(fd,{id:`accessor-renewal-${T.profile.ownerId}`,value:T.accessType,options:[{label:"Renew",value:Ue.RENEW_ACCESS},{label:"Revoke",value:Ue.REVOKE_ACCESS}],onChange:F=>U(F,T.profile.ownerId)})})]},`accessor-${N}`))}),(t==null?void 0:t.isDUCRequired)&&C(D,{children:[C(se.Group,{children:[a(se.Label,{htmlFor:"duc-temp",className:"SRC-noMargin",children:"DUC template"}),a("br",{}),l&&a("div",{children:a(it,{fileHandleAssociation:{associateObjectId:l==null?void 0:l.associateObjectId,associateObjectType:l.associateObjectType,fileHandleId:l.fileHandleId},fileName:l.fileName,id:"duc-temp",variant:"link",className:"SRC-noPadding"})})]}),C(se.Group,{children:[a(se.Label,{htmlFor:"duc",className:"SRC-noMargin",children:"Upload DUC"}),a("br",{}),c&&a("div",{children:a(it,{fileHandleAssociation:{associateObjectId:c.associateObjectId,associateObjectType:c.associateObjectType,fileHandleId:c.fileHandleId},fileName:c==null?void 0:c.fileName,id:"duc-download",variant:"link",className:"SRC-noPadding"})}),a(fi,{id:"duc-browse",variant:"light-primary-base",uploadCallback:Z,context:"ducFileHandleId"})]})]}),(t==null?void 0:t.isIRBApprovalRequired)&&C(se.Group,{children:[a(se.Label,{htmlFor:"irb",className:"SRC-noMargin",children:"Upload IRB approval"}),a("br",{}),m&&a("div",{children:a(it,{fileHandleAssociation:{associateObjectId:m.associateObjectId,associateObjectType:m.associateObjectType,fileHandleId:m.fileHandleId},fileName:m==null?void 0:m.fileName,id:"irb-download",variant:"link",className:"SRC-noPadding"})}),a(fi,{id:"irb-browse",variant:"light-primary-base",uploadCallback:Z,context:"irbFileHandleId"})]}),(t==null?void 0:t.areOtherAttachmentsRequired)&&C(se.Group,{children:[a(se.Label,{className:"SRC-noMargin",children:"Upload other required documents"}),a("br",{}),b.map((T,N)=>C("div",{className:"list-items",children:[a(it,{fileHandleAssociation:{associateObjectId:T.associateObjectId,associateObjectType:T.associateObjectType,fileHandleId:T.fileHandleId},fileName:T==null?void 0:T.fileName,variant:"link",className:"SRC-noPadding attachment-download"}),a(de,{className:"clear-x",variant:"link",onClick:()=>B(T.fileHandleId),children:a(ce,{options:{icon:"clear"}})})]},`file-attachment-${N}`)),a(fi,{id:"attachment-browse",variant:"light-primary-base",uploadCallback:Z,context:"attachments"})]}),S&&C(D,{children:[C(se.Group,{children:[a(se.Label,{htmlFor:"publications",className:"SRC-noMargin",children:"Publication(s)"}),a(se.Control,{id:"publications",as:"textarea",rows:3,onChange:T=>G(T,"publications")})]}),C(se.Group,{children:[a(se.Label,{htmlFor:"summaryOfUse",className:"SRC-noMargin",children:"Summary of use"}),a(se.Control,{id:"summaryOfUse",as:"textarea",rows:3,onChange:T=>G(T,"summaryOfUse")})]})]}),w&&a(Sn,{variant:w.key,children:w.message})]}),a(K.Footer,{children:C(D,{children:[a(de,{variant:"link",onClick:()=>e==null?void 0:e({step:3,formSubmitRequestObject:p}),children:"Cancel"}),a(de,{variant:"primary",onClick:()=>V(),children:"Submit"})]})})]})})};try{or.displayName="RequestDataAccessStep2",or.__docgenInfo={description:"",displayName:"RequestDataAccessStep2",props:{managedACTAccessRequirement:{defaultValue:null,description:"",name:"managedACTAccessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!0,type:{name:"(props: requestDataStepCallbackProps) => void"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile"}},researchProjectId:{defaultValue:null,description:"",name:"researchProjectId",required:!0,type:{name:"string"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep2.tsx#RequestDataAccessStep2"]={docgenInfo:or.__docgenInfo,name:"RequestDataAccessStep2",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep2.tsx#RequestDataAccessStep2"})}catch{}const lr=r=>{const{onHide:e}=r;return C(D,{children:[a(K.Header,{closeButton:!0,children:a(K.Title,{className:"AccessRequirementList__title",children:"Your Data Access Request Has Been Submitted!"})}),a(K.Body,{children:a("p",{style:{margin:"2rem 0"},children:"Your data access request been submitted and is currently being reviewed. Please allow for up to 2 weeks for your request to be reviewed and approved."})}),a(K.Footer,{children:a(de,{variant:"primary",onClick:()=>e==null?void 0:e(),children:"Finish"})})]})};try{lr.displayName="RequestDataAccessSuccess",lr.__docgenInfo={description:"",displayName:"RequestDataAccessSuccess",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessSuccess.tsx#RequestDataAccessSuccess"]={docgenInfo:lr.__docgenInfo,name:"RequestDataAccessSuccess",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessSuccess.tsx#RequestDataAccessSuccess"})}catch{}function Em({accessRequirement:r,user:e,onHide:t,accessRequirementStatus:n,entityId:i}){const{accessToken:s}=J(),[o,l]=I.exports.useState(void 0),[d,c]=I.exports.useState(void 0),[y,m]=I.exports.useState(!1);return I.exports.useEffect(()=>{(async()=>{try{m(!0);const b=await Kr(s,r.id);l(b);const h=Ml|Vl;if(e!=null&&e.ownerId){const p=await Fl(e.ownerId,h,s);c(p)}}catch(b){console.error("Error on get Self Sign Access Requirement: ",b)}finally{m(!1)}})()},[r,s,e]),C(D,{children:[r.isCertifiedUserRequired&&C("div",{className:"requirement-container",children:[a(Ge,{isCompleted:d==null?void 0:d.isCertified}),C("div",{children:[C("p",{className:"self-sign-access-title bold-text",children:["You must first become a",a("a",{className:"self-sign-access-certified bold-text",href:`${Oe.PORTAL}#!Quiz:`,children:"\xA0certified user"})]}),y&&a("span",{className:"spinner"}),a("p",{className:`self-sign-access-certified-success-text ${d!=null&&d.isCertified?"show":"hidden"}`,children:"You are a certified user"})]})]}),r.isValidatedProfileRequired&&C("div",{className:"requirement-container",children:[a(Ge,{isCompleted:d==null?void 0:d.isVerified}),C("div",{children:[C("p",{className:"self-sign-access-title bold-text",children:["You must first apply to have your",a("a",{className:"self-sign-access-validated bold-text",href:`${Oe.PORTAL}#!Profile:v/settings`,children:"\xA0user profile validated"})]}),y&&a("span",{className:"spinner"}),a("p",{className:`self-sign-access-verified-success-text ${d!=null&&d.isVerified?"show":"hidden"}`,children:"You have applied to have user profile valiadation successfully"})]})]}),a(Ct,{user:e,wikiPage:o,accessRequirement:r,accessRequirementStatus:n,onHide:t,entityId:i})]})}try{SelfSignAccessRequirement.displayName="SelfSignAccessRequirement",SelfSignAccessRequirement.__docgenInfo={description:"",displayName:"SelfSignAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"SelfSignAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/SelfSignAccessRequirement.tsx#SelfSignAccessRequirement"]={docgenInfo:SelfSignAccessRequirement.__docgenInfo,name:"SelfSignAccessRequirement",path:"src/lib/containers/access_requirement_list/SelfSignAccessRequirement.tsx#SelfSignAccessRequirement"})}catch{}function Om({accessRequirement:r,user:e,onHide:t,accessRequirementStatus:n,entityId:i}){const{accessToken:s}=J(),[o,l]=I.exports.useState(void 0),[d,c]=I.exports.useState(!1);return I.exports.useEffect(()=>{(async()=>{c(!0);try{const m=await Kr(s,r.id);l(m)}catch(m){console.error("Error on prepare terms of use ",m)}finally{c(!1)}})()},[s,r]),C(D,{children:[d&&a("span",{className:"spinner"}),a(Ct,{user:e,wikiPage:o,accessRequirement:r,accessRequirementStatus:n,onHide:t,entityId:i})]})}try{TermsOfUseAccessRequirement.displayName="TermsOfUseAccessRequirement",TermsOfUseAccessRequirement.__docgenInfo={description:"",displayName:"TermsOfUseAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"TermsOfUseAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/TermsOfUseAccessRequirement.tsx#TermsOfUseAccessRequirement"]={docgenInfo:TermsOfUseAccessRequirement.__docgenInfo,name:"TermsOfUseAccessRequirement",path:"src/lib/containers/access_requirement_list/TermsOfUseAccessRequirement.tsx#TermsOfUseAccessRequirement"})}catch{}var _e=(r=>(r.SelfSignAccessRequirement="org.sagebionetworks.repo.model.SelfSignAccessRequirement",r.TermsOfUseAccessRequirement="org.sagebionetworks.repo.model.TermsOfUseAccessRequirement",r.ManagedACTAccessRequirement="org.sagebionetworks.repo.model.ManagedACTAccessRequirement",r.ACTAccessRequirement="org.sagebionetworks.repo.model.ACTAccessRequirement",r))(_e||{});const cr=r=>r.filter(qm).length>0,qm=r=>{switch(r.concreteType){case"org.sagebionetworks.repo.model.ACTAccessRequirement":case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":return!1;default:return!0}},Ta=async(r,e)=>{const t=e.map(o=>Hl(r,o.id)),n=await Promise.all(t),i=e.map(o=>({accessRequirement:o,accessRequirementStatus:n.find(l=>Number(l.accessRequirementId)===o.id)}));return hd(i,o=>-1*Number(o.accessRequirementStatus.isApproved))};function dr({entityId:r,onHide:e,accessRequirementFromProps:t,renderAsModal:n,numberOfFilesAffected:i}){var L;const{accessToken:s}=J(),[o,l]=I.exports.useState(void 0),[d,c]=I.exports.useState(),[y,m]=I.exports.useState(),[f,b]=I.exports.useState(""),[h,p]=I.exports.useState(),g={ids:[r],type:"ENTITY_HEADER"},R=xm(s)||!o,S=Ua(g),{data:u}=Bl();I.exports.useEffect(()=>{let P=!1;return(async()=>{try{if(!R)return;if(t){const V=await Ta(s,t);P||l(V)}else{const V=await Da(s,r),v=await Ta(s,V);P||l(v)}}catch(V){console.error("Error on get access requirements: ",V)}})(),()=>{P=!0}},[s,r,t,R]);const _=Boolean(s),x=(P,M)=>{switch(P.concreteType){case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":return a(Em,{accessRequirement:P,accessRequirementStatus:M,user:u,onHide:e,entityId:r});case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":return a(Om,{accessRequirement:P,accessRequirementStatus:M,user:u,onHide:e,entityId:r});case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":return a(Im,{accessRequirement:P,accessRequirementStatus:M,user:u,onHide:e,entityId:r,requestDataStepCallback:A});case"org.sagebionetworks.repo.model.ACTAccessRequirement":return a(Rm,{accessRequirement:P,accessRequirementStatus:M,user:u,onHide:e,entityId:r});default:return}},A=P=>{const{managedACTAccessRequirement:M,step:V,researchProjectId:v,formSubmitRequestObject:q}=P;M&&m(M),v&&b(v),q&&p(q),c(V)},O=C(D,{children:[a(K.Header,{closeButton:!0,children:a(K.Title,{className:"AccessRequirementList__title",children:"Data Access Request"})}),a(K.Body,{children:C("div",{children:[a("h4",{className:"AccessRequirementList__instruction AccessRequirementList__access",children:"Access For:"}),a("span",{className:"AccessRequirementList__file-icon-container",children:a(ce,{options:{icon:"file",size:"30px"}})}),"\xA0",i&&C("span",{children:[i," File(s)"]}),!i&&a("a",{className:"AccessRequirementList__register-text-link",href:`${Oe.PORTAL}#!Synapse:${r}`,children:(L=S[0])==null?void 0:L.name}),a("h4",{className:"AccessRequirementList__instruction",style:{marginTop:"3rem"},children:"What do I need to do?"}),C("div",{className:"requirement-container",children:[a(Ge,{isCompleted:_}),C("div",{children:[!_&&C(D,{children:[C("p",{className:"AccessRequirementList__signin",children:[a("a",{className:`${Gi} SRC-boldText `,children:"Sign in\xA0"}),"with a Sage Platform (Synapse) user account."]}),C("p",{children:["If you do not have a Sage Account, you can",a("a",{className:"register-text-link bold-text",href:`${Oe.PORTAL}#!RegisterAccount:0`,children:"\xA0Register for free."})]})]}),_&&C("p",{children:["You have signed in with the Sage Platform (Synapse) user account ",C("b",{children:[u==null?void 0:u.userName,"@synapse.org"]})]})]})]}),o==null?void 0:o.map(({accessRequirement:P,accessRequirementStatus:M})=>a(ge.Fragment,{children:x(P,M)},P.id))]})})]});let E=O;if(n){switch(d){case 1:E=a(ar,{managedACTAccessRequirement:y,requestDataStepCallback:A,onHide:()=>e==null?void 0:e()});break;case 2:E=a(or,{user:u,researchProjectId:f,managedACTAccessRequirement:y,entityId:r,requestDataStepCallback:A,onHide:()=>e==null?void 0:e()});break;case 3:E=a(ir,{formSubmitRequestObject:h,onHide:()=>e==null?void 0:e()});break;case 4:E=C(D,{children:[a(K.Header,{closeButton:!1,children:a(K.Title,{className:"AccessRequirementList__title",children:"Please Log In"})}),a(K.Body,{className:"AccessRequirementList login-modal ",children:a(Ul,{sessionCallback:()=>{window.location.reload()}})})]});break;case 5:E=a(lr,{onHide:()=>e==null?void 0:e()});break;default:E=O}return a(K,{className:d?"bootstrap-4-backport AccessRequirementList modal-auto-height":"bootstrap-4-backport AccessRequirementList",onHide:()=>e==null?void 0:e(),show:!0,animation:!1,centered:!0,scrollable:!0,size:"lg",children:E})}return a("div",{className:"AccessRequirementList",children:E})}try{dr.displayName="AccessRequirementList",dr.__docgenInfo={description:"",displayName:"AccessRequirementList",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirementFromProps:{defaultValue:null,description:"",name:"accessRequirementFromProps",required:!1,type:{name:"AccessRequirement[]"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},renderAsModal:{defaultValue:null,description:"",name:"renderAsModal",required:!1,type:{name:"boolean"}},numberOfFilesAffected:{defaultValue:null,description:"",name:"numberOfFilesAffected",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AccessRequirementList.tsx#AccessRequirementList"]={docgenInfo:dr.__docgenInfo,name:"AccessRequirementList",path:"src/lib/containers/access_requirement_list/AccessRequirementList.tsx#AccessRequirementList"})}catch{}try{cr.displayName="checkHasUnsportedRequirement",cr.__docgenInfo={description:"",displayName:"checkHasUnsportedRequirement",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AccessRequirementList.tsx#checkHasUnsportedRequirement"]={docgenInfo:cr.__docgenInfo,name:"checkHasUnsportedRequirement",path:"src/lib/containers/access_requirement_list/AccessRequirementList.tsx#checkHasUnsportedRequirement"})}catch{}const Nm={AccessBlockedToAnonymous:{icon:"accessClosed",color:r=>r.colors.warning,tooltipText:"You must sign in to access this file."},AccessBlockedByRestriction:{icon:"accessClosed",color:r=>r.colors.warning,tooltipText:"You must request access to this restricted file."},AccessBlockedByACL:{icon:"accessClosed",color:r=>r.colors.warning,tooltipText:"You do not have download access for this item."},Accessible:{icon:"accessOpen",color:r=>r.colors.success,tooltipText:""},NoFileHandle:{icon:"accessOpen",color:r=>r.colors.success,tooltipText:""}};function Aa(r){const{downloadType:e}=r;if(e){const t=Nm[e];return a($l.Consumer,{children:n=>a(ce,{options:{icon:t.icon,color:t.color(n),label:t.tooltipText}})})}return a(D,{})}function ur(r,e){const[t,n]=ge.useState(),{accessToken:i}=J(),{data:s,error:o}=Nd(r,{includeEntity:!0,includePermissions:!0},parseInt(e!=null?e:"")),l=ge.useMemo(()=>({restrictableObjectType:Zr.ENTITY,objectId:r}),[r]),{data:d}=no(l),c=s==null?void 0:s.entity,y=s==null?void 0:s.permissions;return ge.useEffect(()=>{d&&d.hasUnmetAccessRequirement?n("AccessBlockedByRestriction"):c&&(y==null?void 0:y.canDownload)?oc(c)&&c.dataFileHandleId?n("Accessible"):n("NoFileHandle"):y&&!y.canDownload&&n(i?"AccessBlockedByACL":"AccessBlockedToAnonymous")},[i,c,o,y,d]),t}function pr(r){const[e,t]=ge.useState(!1),[n,i]=ge.useState([]),{entityId:s,entityVersionNumber:o}=r,l=ur(s,o),{accessToken:d}=J(),c=ge.useMemo(()=>({restrictableObjectType:Zr.ENTITY,objectId:s}),[s]),{data:y}=no(c),m=()=>{Da(d,s).then(h=>{cr(h)?window.open(`${cc(dc.PORTAL_ENDPOINT)}#!AccessRequirements:ID=${s}&TYPE=ENTITY`,"_blank"):(i(h),t(!0))})},f=I.exports.useMemo(()=>{if(!y)return a(D,{});const h=y==null?void 0:y.hasUnmetAccessRequirement,p=y==null?void 0:y.restrictionLevel;let g="";if(h)g="Request Access";else{if(ao.OPEN===p)return a(D,{});g="View Terms"}return C(D,{children:[a("a",{style:{fontSize:"14px",cursor:"pointer",marginLeft:"5px",verticalAlign:"middle"},className:r.className,onClick:m,children:g}),e&&a(dr,{entityId:s,accessRequirementFromProps:n,renderAsModal:!0,onHide:()=>{t(!1)}})]})},[s,y,n,e]);return l===void 0?a(D,{}):C("span",{style:{whiteSpace:"nowrap"},children:[l==="AccessBlockedToAnonymous"?a("button",{type:"button",className:Gi,onClick:h=>{if(h.isTrusted){const p=new MouseEvent("click",{bubbles:!0});h.currentTarget.dispatchEvent(p)}},children:a(Aa,{downloadType:l})}):a(Aa,{downloadType:l}),f]})}try{ur.displayName="useGetFileHandleDownloadType",ur.__docgenInfo={description:`Determines whether an Entity is accessible for download, or if it is blocked by the ACL or unmet Access Requirements.

To make download available, and determine if the file is downloadable via the web, see {@link DirectDownload.tsx }`,displayName:"useGetFileHandleDownloadType",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HasAccessV2.tsx#useGetFileHandleDownloadType"]={docgenInfo:ur.__docgenInfo,name:"useGetFileHandleDownloadType",path:"src/lib/containers/HasAccessV2.tsx#useGetFileHandleDownloadType"})}catch{}try{pr.displayName="HasAccessV2",pr.__docgenInfo={description:`HasAccess shows if the user has access to the file or not.

The component's behavior changes whether it's passed in a FileHandle or not.
If passed a file handle then it will give more detailed information about the download.`,displayName:"HasAccessV2",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HasAccessV2.tsx#HasAccessV2"]={docgenInfo:pr.__docgenInfo,name:"HasAccessV2",path:"src/lib/containers/HasAccessV2.tsx#HasAccessV2"})}catch{}const fr=r=>{const{accessToken:e}=J(),{entityIdList:t}=r,[n,i]=I.exports.useState([a(D,{})]),{ref:s,inView:o}=Nt();let l=!0;I.exports.useEffect(()=>(o&&d(),()=>{l=!1}),[t,o]);const d=()=>{!t.length||jl(t,e).then(c=>{if(l){const y=c.results.map(m=>a("p",{children:a(Ri,{entity:m,displayTextField:"name"})},m.id));i(y)}}).catch(c=>{console.log("EntityIdList: Error getting entity headers",c)})};return a("span",{ref:s,children:n})};try{fr.displayName="EntityIdList",fr.__docgenInfo={description:"",displayName:"EntityIdList",props:{entityIdList:{defaultValue:null,description:"",name:"entityIdList",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/EntityIdList.tsx#EntityIdList"]={docgenInfo:fr.__docgenInfo,name:"EntityIdList",path:"src/lib/containers/EntityIdList.tsx#EntityIdList"})}catch{}const hr=r=>{const{accessToken:e}=J(),{evaluationId:t}=r,[n,i]=I.exports.useState(),{ref:s,inView:o}=Nt();let l=!0;I.exports.useEffect(()=>(l&&o&&d(),()=>{l=!1}),[t,o]);const d=()=>{!t||Wl(t,e).then(c=>{i(c.name)}).catch(c=>{console.log("EvaluationIdListRenderer: Error getting evaluation queue names",c)})};return a("span",{ref:s,children:n})};try{hr.displayName="EvaluationIdRenderer",hr.__docgenInfo={description:"",displayName:"EvaluationIdRenderer",props:{evaluationId:{defaultValue:null,description:"",name:"evaluationId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/EvaluationIdRenderer.tsx#EvaluationIdRenderer"]={docgenInfo:hr.__docgenInfo,name:"EvaluationIdRenderer",path:"src/lib/containers/EvaluationIdRenderer.tsx#EvaluationIdRenderer"})}catch{}const mr=r=>{const{accessToken:e}=J(),{userIds:t}=r,[n,i]=I.exports.useState(),{ref:s,inView:o}=Nt();let l=!0;I.exports.useEffect(()=>(l&&o&&d(),()=>{l=!1}),[t,o]);const d=()=>{!t.length||zl(t,e).then(c=>{const y=c.list.map(m=>a(Ga,{userProfile:m,className:"SRC-marginFifteen"},m.ownerId));i(y)}).catch(c=>{console.log("UserIdList: Error getting user profiles",c)})};return a("span",{ref:s,children:n})};try{mr.displayName="UserIdList",mr.__docgenInfo={description:"",displayName:"UserIdList",props:{userIds:{defaultValue:null,description:"",name:"userIds",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/UserIdList.tsx#UserIdList"]={docgenInfo:mr.__docgenInfo,name:"UserIdList",path:"src/lib/containers/UserIdList.tsx#UserIdList"})}catch{}const gr=({columnType:r,columnValue:e,isBold:t,mapEntityIdToHeader:n,mapUserIdToHeader:i,columnLinkConfig:s,rowIndex:o,columnName:l,selectColumns:d,columnModels:c,rowData:y,rowId:m,rowVersionNumber:f})=>{const{entity:b}=je(),h=(p,g=20)=>!p||p.length<=g;if(!e)return C("p",{className:"SRC-center-text SRC-inactive",children:[" ",zc]});if(s)return a(en,{value:e,columnName:l,selectColumns:d,columnModels:c,isHeader:!1,labelLink:s,rowData:y});if(b&&(yt(b)||_t(b)||Ha(b))&&(l==="id"||l==="name")&&m&&f){const p=`syn${m.toString()}`;if(Object.prototype.hasOwnProperty.call(n,p))return a("p",{children:a(Ri,{entity:n[p],versionNumber:f,className:`${t}`,showIcon:!1,displayTextField:l})})}switch(r){case W.ENTITYID:if(Object.prototype.hasOwnProperty.call(n,e))return a("p",{children:a(Ri,{entity:n[e],className:`${t}`,displayTextField:"name"})});break;case W.DATE_LIST:{const p=JSON.parse(e);return C("p",{children:[p.map((g,w)=>C("span",{className:t,children:[new Date(g).toLocaleString(),w!==p.length-1?", ":""]},w))," "]})}case W.BOOLEAN_LIST:{const p=JSON.parse(e);return a("p",{children:p.map((g,w)=>C("span",{className:t,children:[g?"true":"false",w!==p.length-1?", ":""]},w))})}case W.FILEHANDLEID:return a(D,{children:b&&a(Xt,{associatedObjectId:b.id,associatedObjectType:xe.TableEntity,fileHandleId:e,displayFileName:!0})});case W.ENTITYID_LIST:{const p=JSON.parse(e);return a(fr,{entityIdList:p})}case W.USERID_LIST:{const p=JSON.parse(e);return a(mr,{userIds:p})}case W.STRING_LIST:case W.INTEGER_LIST:{const p=JSON.parse(e);return a("p",{children:p.map((g,w)=>C("span",{className:t,children:[g,w!==p.length-1?", ":""]},g))})}case W.EVALUATIONID:return a(hr,{evaluationId:e});case W.DATE:return a("p",{className:t,children:new Date(Number(e)).toLocaleString()});case W.USERID:if(Object.prototype.hasOwnProperty.call(i,e)){const{ownerId:p,userName:g}=i[e];if(i[e].isIndividual===!1){const w=g===ks?"public":"people";return g===ks?C("span",{children:[a(ce,{options:{icon:w}})," All registered Synapse users"]}):C("a",{target:"_blank",rel:"noopener noreferrer",href:`${Oe.PORTAL}#!Team:${p}`,children:[a(ce,{options:{icon:w}})," ",g]})}else return a(lt,{userProfile:i[e],preSignedURL:i[e].clientPreSignedURL,size:"SMALL USER CARD"})}break;case W.LINK:return a("a",{target:"_blank",rel:"noopener noreferrer",href:e,children:e});case W.STRING:case W.DOUBLE:case W.INTEGER:case W.BOOLEAN:case W.LARGETEXT:return h(e)?C("p",{className:t,children:[" ",e]}):a("div",{className:t,children:a(Gr,{tooltipText:e,callbackFn:gd,idForToolTip:`${l}_${o}`,children:C("p",{className:t,children:[" ",e]})})});default:return console.warn(`ColumnType ${r} has unspecified handler. Rendering the column value.`),a("p",{className:t,children:e})}return a("p",{className:t,children:e})};try{gr.displayName="SynapseTableCell",gr.__docgenInfo={description:"",displayName:"SynapseTableCell",props:{columnType:{defaultValue:null,description:"",name:"columnType",required:!0,type:{name:"enum",value:[{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'}]}},columnValue:{defaultValue:null,description:"",name:"columnValue",required:!0,type:{name:"string"}},isBold:{defaultValue:null,description:"",name:"isBold",required:!0,type:{name:"string"}},columnLinkConfig:{defaultValue:null,description:"",name:"columnLinkConfig",required:!1,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink"}},mapEntityIdToHeader:{defaultValue:null,description:"",name:"mapEntityIdToHeader",required:!0,type:{name:"Record<string, EntityHeader>"}},mapUserIdToHeader:{defaultValue:null,description:"",name:"mapUserIdToHeader",required:!0,type:{name:"Partial<UserGroupHeader & UserProfile>"}},rowIndex:{defaultValue:null,description:"",name:"rowIndex",required:!1,type:{name:"number"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}},rowVersionNumber:{defaultValue:null,description:"",name:"rowVersionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_table_functions/SynapseTableCell.tsx#SynapseTableCell"]={docgenInfo:gr.__docgenInfo,name:"SynapseTableCell",path:"src/lib/containers/synapse_table_functions/SynapseTableCell.tsx#SynapseTableCell"})}catch{}function ml(){return C("div",{className:"text-center",children:[Sd,a("h4",{children:"No Matching Results"}),a("p",{children:"Try checking the spelling or removing filters."})]})}const gl=window.SQLParser.lexer,xa=(r,...e)=>{var n;const t=[];return(n=r==null?void 0:r.selectColumns)==null||n.forEach((i,s)=>{e.includes(i.columnType)&&t.push(s)}),t},Ra=(r,e,t)=>{var i;const n=new Set;return(i=r.queryResult)==null||i.queryResults.rows.forEach(s=>{s.values.forEach((o,l)=>{t.includes(l)&&!Object.prototype.hasOwnProperty.call(e,o)&&o&&n.add(o)})}),n};function km(r){const e=[];if(tc(r)){const t=gl.tokenize(r),n=t.findIndex(o=>o[0]==="SELECT"),i=t.findIndex(o=>o[0]==="FROM");let s=0;for(let o=n+1;o<i-n-1;o+=1){const l=t[o];l[0]==="FUNCTION"&&l[1].toLowerCase()==="count"?e.push(s):l[0]==="SEPARATOR"&&(s+=1)}}return e}function Lm(r,e,t){let n=gl.tokenize(e);const i=n.findIndex(m=>m[0]==="SELECT"),s=n.findIndex(m=>m[0]==="FROM"),o=[];let l=0,d=!1;for(let m=i+1;m<s-i-1;m+=1){const f=n[m];f[0]==="FUNCTION"||f[1].toLocaleLowerCase()==="concat"?d=!0:f[0]==="LITERAL"&&!d?o.push({index:l,name:f[1]}):f[0]==="SEPARATOR"&&(l+=1,d=!1)}if(n=n.slice(0,n.findIndex(m=>m[0]==="GROUP")),n.splice(i+1,s-i-1,["STAR","*","1"]),t===void 0)return{synId:"",newSql:""};n.findIndex(m=>m[0]==="WHERE")===-1?n.push(["WHERE","WHERE","1"]):n.push(["CONDITIONAL","AND","1"]),o.forEach((m,f)=>{const b=r.values[m.index];b?n.push(["LITERAL",m.name,"1"],["OPERATOR","=","1"],["STRING",b,"1"],["CONDITIONAL","AND","1"]):n.push(["LITERAL",m.name,"1"],["OPERATOR","IS","1"],["BOOLEAN","null","1"],["CONDITIONAL","AND","1"])}),n.pop();const y=n[n.findIndex(m=>m[0]==="FROM")+1][1];return n.push(["EOF","","1"]),{synId:y,newSql:nc(n)}}const Dm=()=>{const{data:r,goToPage:e,pageSize:t,setPageSize:n,currentPage:i}=wc(),s=r==null?void 0:r.queryCount,o=(d,c)=>{e(c)},l=d=>{const c=d.target.value;n(c)};return i==1&&s&&s<10?a(D,{}):C("div",{children:[a($h,{page:i,count:Math.ceil(s/t),color:"secondary",onChange:o,style:{display:"inline-block",float:"left"}}),a(qt,{variant:"body1",style:{display:"inline-block"},children:`${s==null?void 0:s.toLocaleString()} total rows /`}),C("select",{name:"page size",onChange:l,style:{padding:"4px",marginLeft:"4px"},value:t,children:[a("option",{value:10,children:"10 per page"}),a("option",{value:25,children:"25 per page"}),a("option",{value:100,children:"100 per page"}),a("option",{value:500,children:"500 per page"})]})]})};function yl(){return C(D,{children:[a("p",{className:"SRC-no-results-title",children:"There is currently no content here."}),a("p",{className:"SRC-no-results-description",children:"Information is always being updated, so check back later to see if content has been added."})]})}const yr=r=>{const{onCopy:e}=r;return a(Je,{title:"Copy IDs to the clipboard",enterNextDelay:Vr,placement:"right",children:a("span",{children:a("button",{"data-testid":"copySynIdsButton",onClick:e,children:a("span",{style:{height:15,marginTop:-1},children:a(ce,{options:{icon:"contentCopy"}})})})})})};try{yr.displayName="InteractiveCopyIdsIcon",yr.__docgenInfo={description:"",displayName:"InteractiveCopyIdsIcon",props:{onCopy:{defaultValue:null,description:"",name:"onCopy",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/InteractiveCopyIdsIcon.tsx#InteractiveCopyIdsIcon"]={docgenInfo:yr.__docgenInfo,name:"InteractiveCopyIdsIcon",path:"src/lib/containers/InteractiveCopyIdsIcon.tsx#InteractiveCopyIdsIcon"})}catch{}const Pm=()=>{const r=J(),e=je(),[t,n]=I.exports.useState(!1),[i,s]=I.exports.useState(),[o,l]=I.exports.useState();I.exports.useEffect(()=>(o||l(new AbortController),()=>{o&&o.abort()}),[o]);const d=()=>{n(!0);const{getLastQueryRequest:c}=e,y=c(),{sql:m}=y.query,{entityId:f,versionNumber:b}=rc(m),h=b?`.${b}`:"";y.partMask=mn,y.query={sql:`select id from ${f}${h}`},Na(y,r.accessToken,o==null?void 0:o.signal).then(p=>{s(p)}).catch(p=>{console.error(p),vt("Unable to query for all Synapse IDs to copy","danger")}).finally(()=>{n(!1)})};return I.exports.useEffect(()=>{if(i){const{rows:c}=i.queryResult.queryResults,y=c.map(m=>`${m.values[0]}`).join(`
`);navigator.clipboard.writeText(y).then(()=>{vt("Successfully copied to clipboard"),s(void 0)})}},[i]),t?a(md,{size:25}):a(yr,{onCopy:()=>{d()}})},Mm={id:"",name:"",type:"org.sagebionetworks.repo.model.FileEntity",versionNumber:-1,versionLabel:"",benefactorId:-1,createdBy:"",createdOn:"",modifiedBy:"",modifiedOn:"",isLatestVersion:!0},Vm=["","DESC","ASC"],Ia={resizeMode:"overflow",partialRefresh:"true",liveDrag:!0,headerOnly:"true"};class Jt extends I.exports.Component{constructor(e){super(e),this.tableElement=void 0,this.showGroupRowData=t=>{const n=this.props.queryContext.getLastQueryRequest().query,i=Lm(t,n.sql,this.props.queryContext.data);n.sql=i.newSql;const s=JSON.stringify(n),o=btoa(s);return`${Oe.PORTAL}#!Synapse:${i.synId}/tables/query/${o}`},this.renderTable=(t,n,i,s)=>{var w,R;const o=(R=(w=this.props.queryContext).getLastQueryRequest)==null?void 0:R.call(w),{queryContext:{entity:l},showAccessColumn:d,showDownloadColumn:c,isRowSelectionVisible:y}=this.props,m=l&&(yt(l)&&lc(l)||_t(l)),f=d&&l&&this.isEntityViewOrDataset()&&this.allRowsHaveId(),b=!!this.props.synapseContext.accessToken,h=l&&m&&b&&this.allRowsHaveId(),p=!!(h&&!this.props.hideDownload),g=h&&c;return C("div",{className:"SynapseTable SRC-overflowAuto","data-testid":"SynapseTable",children:[C("table",{ref:S=>this.tableElement=S,className:"table table-striped table-condensed",children:[a("thead",{className:"SRC_bordered",children:a("tr",{children:this.createTableHeader(t,n,i,f,g,p,y,o)})}),a("tbody",{children:this.createTableRows(s,t,f,g,p,y)})]}),a("div",{className:"bootstrap-4-backport",style:{textAlign:"right"},children:a(Dm,{})})]})},this.handleColumnSortPress=t=>n=>{let i=St(this.state.columnIconSortState);i.length===0&&(i=Array(this.getLengthOfPropsData()).fill(0));const s=St(this.state.sortedColumnSelection),o=this.findSelectionIndex(s,t.name);o!==-1&&s.splice(o,1),i[t.index]=(i[t.index]+1)%Ds.length,i[t.index]>0&&s.unshift({column:t.name,direction:Vm[i[t.index]]});const l=this.props.queryContext.getLastQueryRequest();l.query.sort=s,l.query.offset=0,this.props.queryContext.executeQueryRequest(l),this.setState({columnIconSortState:i,sortedColumnSelection:s})},this.applyChangesFromQueryFilter=t=>{const n=this.props.queryContext.getLastQueryRequest();n.query.selectedFacets=t,n.query.offset=0,this.props.queryContext.executeQueryRequest(n)},this.componentDidMount=this.componentDidMount.bind(this),this.componentWillUnmount=this.componentWillUnmount.bind(this),this.componentDidUpdate=this.componentDidUpdate.bind(this),this.shouldComponentUpdate=this.shouldComponentUpdate.bind(this),this.handleColumnSortPress=this.handleColumnSortPress.bind(this),this.findSelectionIndex=this.findSelectionIndex.bind(this),this.advancedSearch=this.advancedSearch.bind(this),this.getLengthOfPropsData=this.getLengthOfPropsData.bind(this),this.configureFacetDropdown=this.configureFacetDropdown.bind(this),this.enableResize=this.enableResize.bind(this),this.disableResize=this.disableResize.bind(this),this.isEntityViewOrDataset=this.isEntityViewOrDataset.bind(this),this.allRowsHaveId=this.allRowsHaveId.bind(this),this.state={columnIconSortState:[],isExportTableDownloadOpen:!1,isExpanded:!1,isColumnSelectionOpen:!1,sortedColumnSelection:[],mapEntityIdToHeader:{},mapUserIdToHeader:{},isFetchingEntityHeaders:!1},this.getEntityHeadersInData=this.getEntityHeadersInData.bind(this)}componentWillUnmount(){this.disableResize()}componentDidMount(){this.getEntityHeadersInData(!0),this.enableResize()}shouldComponentUpdate(e,t){const{isFetchingEntityHeaders:n,...i}=this.state,{isFetchingEntityHeaders:s,...o}=t,l=!xn(this.props,e),d=!xn(i,o),c=l||d;return c&&this.disableResize(),c}componentDidUpdate(e,t){xn(e.queryContext.data,this.props.queryContext.data)?e.queryContext.entity&&this.props.queryContext.entity&&!xn(yt(e.queryContext.entity),yt(this.props.queryContext.entity))&&this.getEntityHeadersInData(!0):this.getEntityHeadersInData(!1),this.enableResize()}enableResize(){this.resizer?setTimeout(()=>{this.resizer.reset(Ia)},1e3):this.tableElement&&this.getLengthOfPropsData()>1&&(this.resizer=new Tm(this.tableElement,Ia))}disableResize(){this.resizer&&this.resizer.reset({disable:!0})}async getEntityHeadersInData(e){var m,f,b;const{data:t,entity:n}=this.props.queryContext;if(!t||!n)return;if(this.state.isFetchingEntityHeaders&&!e)return;const i=St(this.state.mapEntityIdToHeader),s=St(this.state.mapUserIdToHeader),o=xa(t,W.ENTITYID),l=xa(t,W.USERID),d=Ra(t,i,o);(this.isEntityViewOrDataset()||n&&Ha(n))&&this.allRowsHaveId()&&((b=(f=(m=t.queryResult)==null?void 0:m.queryResults)==null?void 0:f.rows)!=null?b:[]).forEach(p=>{const g=`syn${p.rowId}`;d.add(g)});const c=Ra(t,s,l);if(d.size===0&&c.size===0)return;if(this.setState({isFetchingEntityHeaders:!0}),d.size>0){const h=Array.from(d).map(p=>({targetId:p}));try{h.forEach(w=>{i[w.targetId]=Mm});const p=await Yl(h,this.props.synapseContext.accessToken),{results:g}=p;g.forEach(w=>{i[w.id]=w})}catch(p){console.error("Error on retrieving entity header list , ",p)}}const y=[];if(c.size>0){const h=Array.from(c);try{(await Ql(h,this.props.synapseContext.accessToken)).children.forEach(g=>{g.isIndividual?y.push(g.ownerId):s[g.ownerId]=g})}catch(p){console.error("Error on getGroupHeaders batch: ",p)}}if(y.length>0)try{(await $c(y)).list.forEach(p=>{s[p.ownerId]=p})}catch(h){console.error("Error on getUserProfile : ",h)}this.setState({mapEntityIdToHeader:i,mapUserIdToHeader:s,isFetchingEntityHeaders:!1})}render(){var p,g;if(!this.props.queryContext.data&&this.props.queryContext.isLoadingNewBundle)return ro;if(!this.props.queryContext.data)return a(D,{});const{queryContext:{data:e},showNoContentAvailableWhenEmpty:t}=this.props,{queryResult:n,columnModels:i=[]}=e,{facets:s=[]}=e,{isExpanded:o,isExportTableDownloadOpen:l}=this.state,d=this.props.queryContext.getLastQueryRequest();let c="";if(!(((g=(p=e.queryResult)==null?void 0:p.queryResults.rows.length)!=null?g:0)>0)&&d.query.offset===0)return d.query.additionalFilters?a(ml,{}):t?a(yl,{}):C("div",{className:"text-center SRCBorderedPanel SRCBorderedPanel--padded2x",children:[dd,a("div",{style:{marginTop:"20px",fontStyle:"italic"},children:"This table is currently empty"})]});const{rows:m,headers:f}=n.queryResults,b=a("div",{children:this.renderTable(f,i,s,m)}),h=a(D,{children:C("div",{className:c,children:[l&&a(at,{onClose:()=>{this.setState({isExportTableDownloadOpen:!1})},queryBundleRequest:d}),a("div",{children:b})]})});return C(I.exports.Fragment,{children:[o&&C(K,{animation:!1,show:!0,onHide:()=>this.setState({isExpanded:!1}),dialogClassName:"modal-90w",backdrop:"static",children:[a(K.Header,{onHide:()=>this.setState({isExpanded:!1}),closeButton:!0}),a(K.Body,{children:h})]}),!o&&h]})}allRowsHaveId(){var t,n;const{queryContext:{data:e}}=this.props;return(n=(t=e==null?void 0:e.queryResult)==null?void 0:t.queryResults.rows.every(i=>!!i.rowId))!=null?n:!1}isEntityViewOrDataset(){var t;const{queryContext:{entity:e}}=this.props;return(t=e&&(yt(e)||_t(e)))!=null?t:!1}createTableRows(e,t,n,i,s,o){const l=[],{queryContext:{data:d},queryVisualizationContext:{columnsToShowInTable:c,selectedRowIndices:y,setSelectedRowIndices:m},columnLinks:f=[],linkCountToDisaggregatedQuery:b=!1}=this.props,{selectColumns:h=[],columnModels:p=[]}=d,{mapEntityIdToHeader:g,mapUserIdToHeader:w}=this.state,R=km(this.props.queryContext.getLastQueryRequest().query.sql);return e.forEach((S,u)=>{var L,P,M;const _=(L=S.versionNumber)==null?void 0:L.toString(),x=`syn${S.rowId}`,A=S.values.map((V,v)=>{const q=t[v].name,k=c.includes(q),B=f.find(ae=>ae.matchColumnName===q),Z=this.findSelectionIndex(this.state.sortedColumnSelection,q),G=R.includes(v)&&b,U=Z===-1?"":"SRC-boldText";return k?a("td",{className:"SRC_noBorderTop SRC-synapseTableTd",children:G?a("a",{href:this.showGroupRowData(S),target:"_blank",rel:"noopener noreferrer",children:a("p",{className:U,children:V})}):a(gr,{columnType:t[v].columnType,columnValue:V,isBold:U,mapEntityIdToHeader:g,mapUserIdToHeader:w,rowIndex:u,columnLinkConfig:B,columnName:q,rowData:S.values,selectColumns:h,columnModels:p,rowId:S.rowId,rowVersionNumber:S.versionNumber})},`(${u}${V}${v})`):a("td",{className:"SRC-hidden"},`(${u},${v})`)});n&&A.unshift(a("td",{className:"SRC_noBorderTop",children:a(pr,{entityId:x,entityVersionNumber:_},x)},x));const O=((P=g[x])==null?void 0:P.type)=="org.sagebionetworks.repo.model.FileEntity";i&&A.unshift(a("td",{className:"SRC_noBorderTop direct-download",children:O&&a(Xt,{associatedObjectId:x,entityVersionNumber:_})},`direct-download-${x}`)),s&&A.unshift(a("td",{className:"SRC_noBorderTop add-to-download-list-v2",children:O&&a(rr,{entityId:x,entityVersionNumber:parseInt(_)})},`add-to-download-list-v2-${x}`)),o&&y&&A.unshift(a("td",{className:"SRC_noBorderTop",children:a(yd,{label:"",checked:y.includes(u),onChange:V=>{const v=[...y];if(V)v.push(u);else{const q=v.indexOf(u);q>-1&&v.splice(q,1)}m(v)}})},`(${u},rowSelectColumn)`));const E=a("tr",{children:A},(M=S.rowId)!=null?M:u);l.push(E)}),l}isSortableColumn(e){switch(e){case W.USERID:case W.ENTITYID:case W.FILEHANDLEID:case W.STRING_LIST:case W.INTEGER_LIST:case W.BOOLEAN_LIST:case W.DATE_LIST:case W.USERID_LIST:case W.ENTITYID_LIST:return!1;default:return!0}}createTableHeader(e,t,n,i,s,o,l,d){const{sortedColumnSelection:c,columnIconSortState:y}=this.state,{queryVisualizationContext:{facetAliases:m={},columnsToShowInTable:f},queryContext:{lockedColumn:b}}=this.props,h=e.map((p,g)=>{var R;if(f.includes(p.name)){const S=this.findSelectionIndex(c,p.name)!==-1,u=y[g]===void 0?0:y[g],_=n.findIndex(q=>q.columnName===p.name),x=_!==-1&&n[_].facetType==="enumeration",A=n[_],O=S?"SRC-primary-background-color SRC-anchor-light":"",E=S?"SRC-selected-table-icon tool-icon":"SRC-primary-text-color tool-icon",L=`SRC-tableHead SRC-hand-cursor SRC-sortPadding SRC-primary-background-color-hover  ${O}`,P=Qe(p.name,m),M=t.find(q=>q.name===p.name),V=p.name.toLowerCase()===((R=b==null?void 0:b.columnName)==null?void 0:R.toLowerCase()),v=M&&M.name=="id"&&M.columnType==W.ENTITYID;return a("th",{children:C("div",{className:"SRC-split",children:[a("span",{style:{whiteSpace:"nowrap"},children:P}),C("div",{className:"SRC-centerContent",children:[x&&!V&&this.configureFacetDropdown(A,M,d,m),this.isSortableColumn(p.columnType)&&a("span",{role:"button","aria-label":"sort",tabIndex:0,className:L,onKeyPress:this.handleColumnSortPress({index:g,name:p.name}),onClick:this.handleColumnSortPress({index:g,name:p.name}),children:a(Xr,{type:Ds[u],cssClass:E})}),v&&a(Pm,{})]})]})},p.name)}else return a("th",{className:"SRC-hidden"},p.name)});return i&&h.unshift(a("th",{children:a("div",{className:"SRC-centerContent",children:a("span",{style:{whiteSpace:"nowrap"},children:"Access"})})},"accessColumn")),s&&h.unshift(a("th",{children:a("div",{className:"SRC-centerContent",children:"\xA0"})},"downloadColumn")),o&&h.unshift(a("th",{"data-testid":"AddToDownloadListV2ColumnHeader",children:a("div",{className:"SRC-centerContent",children:"\xA0"})},"addToV2DownloadListColumn")),l&&h.unshift(a("th",{children:a("div",{className:"SRC-centerContent"})},"rowSelectionColumn")),h}findSelectionIndex(e,t){return e.length!==0?e.findIndex(n=>n.column===t):-1}advancedSearch(e){e&&e.preventDefault();const t=this.props.queryContext.getLastQueryRequest(),{query:n}=t,i=btoa(JSON.stringify(n)),s=t.entityId;window.open(`${Oe.PORTAL}#!Synapse:${s}/tables/query/${i}`,"_blank")}getLengthOfPropsData(){var t,n;const{data:e}=this.props.queryContext;return(n=(t=e==null?void 0:e.queryResult)==null?void 0:t.queryResults.headers.length)!=null?n:0}configureFacetDropdown(e,t,n,i){return a(Cc,{containerAs:"Dropdown",facetValues:e.facetValues,columnModel:t,facetAliases:i,onChange:s=>{_c(n,e,this.applyChangesFromQueryFilter,s)},onClear:()=>{vc(n,e,this.applyChangesFromQueryFilter)}})}}try{Jt.displayName="SynapseTable",Jt.__docgenInfo={description:"",displayName:"SynapseTable",props:{synapseContext:{defaultValue:null,description:"",name:"synapseContext",required:!0,type:{name:"SynapseContextType"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},linkCountToDisaggregatedQuery:{defaultValue:null,description:`If true, columns created by the COUNT function will render with a link to Synapse that opens the disaggregated query results filtered by the conditions of that row.
Note that this is very brittle and only supports one column at a time. See SWC-6075 for more information. Default false.`,name:"linkCountToDisaggregatedQuery",required:!1,type:{name:"boolean"}},showNoContentAvailableWhenEmpty:{defaultValue:null,description:"",name:"showNoContentAvailableWhenEmpty",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/SynapseTable.tsx#SynapseTable"]={docgenInfo:Jt.__docgenInfo,name:"SynapseTable",path:"src/lib/containers/table/SynapseTable.tsx#SynapseTable"})}catch{}function Sl(){const{data:r}=je(),{showLastUpdatedOn:e}=yn();return e&&r&&r.lastUpdatedOn?a("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:C(qt,{variant:"body2",children:["Last updated on ",Xa(Jr(r.lastUpdatedOn))]})}):a(D,{})}const Sr=r=>{const{tableConfiguration:e,cardConfiguration:t,hideDownload:n}=r,i=J(),s=je(),o=yn();return C("div",{className:`FilterAndView ${o.topLevelControlsState.showFacetFilter?Et:Ot}`,children:[e?a(Jt,{...e,synapseContext:i,queryContext:s,queryVisualizationContext:o,hideDownload:n}):a(D,{}),t?a(nn,{...t}):a(D,{}),a(Sl,{})]})};try{Sr.displayName="FilterAndView",Sr.__docgenInfo={description:"",displayName:"FilterAndView",props:{tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!0,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext"> | undefined'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!0,type:{name:"CardConfiguration | undefined"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/query_wrapper_plot_nav/FilterAndView.tsx#FilterAndView"]={docgenInfo:Sr.__docgenInfo,name:"FilterAndView",path:"src/lib/containers/query_wrapper_plot_nav/FilterAndView.tsx#FilterAndView"})}catch{}const Fm="isShowingFacetFilters",Bm="isHidingFacetFilters",br=r=>{const[e,t]=I.exports.useState(!1),{searchParams:n,sql:i,sqlOperator:s,tableConfiguration:o,name:l,cardConfiguration:d,facetsToPlot:c,facetsToFilter:y,hideDownload:m,hideQueryCount:f,hideSqlEditorControl:b,searchConfiguration:h,limit:p=Kl,initQueryJson:g,showLastUpdatedOn:w}=r,R=ts(i,n,s),S=g?JSON.parse(g):{sql:R,limit:p,offset:0},u=It(S.sql),{data:_}=ss(u),x=_&&$a(_)&&_.isSearchEnabled,A={entityId:u,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:mn|gn|Xi|Pa|Ji|Zi|Ki|es,query:S};return a("div",{className:"QueryWrapperPlotNav",children:a(o?za:Yt,{...r,initQueryRequest:A,children:a(rs,{unitDescription:"results",rgbIndex:r.rgbIndex,facetAliases:r.facetAliases,visibleColumnCount:r.visibleColumnCount,defaultShowFacetVisualization:r.defaultShowFacetVisualization,defaultShowSearchBar:r.defaultShowSearchBox||x,showLastUpdatedOn:w,children:a(is,{children:E=>{if(E===void 0)throw new Error("No queryContext found when using QueryContextConsumer");const L=E==null?void 0:E.isFacetsAvailable;return a(Wa,{children:P=>{if(P===void 0)throw new Error("No queryVisualizationContext found when using QueryVisualizationContextConsumer");const M=(P==null?void 0:P.topLevelControlsState.showFacetFilter)||(P==null?void 0:P.topLevelControlsState.showFacetFilter)===void 0;return C(D,{children:[a("div",{className:`ErrorBannerWrapper ${M?Fm:Bm}`,children:a(Tc,{})}),x?a(zt,{helpUrl:h==null?void 0:h.fullTextSearchHelpURL}):a(Qt,{...h,queryContext:E,queryVisualizationContext:P}),a(Kt,{}),a(Qn,{getLastQueryRequest:E.getLastQueryRequest,topLevelControlsState:P.topLevelControlsState,setTopLevelControlsState:P.setTopLevelControlsState}),a(Gt,{showColumnSelection:o!==void 0,name:l,hideDownload:m,hideQueryCount:f,hideFacetFilterControl:!L,hideVisualizationsControl:!L,hideSqlEditorControl:b}),L&&a(D,{children:a(Ac,{facetsToFilter:y})}),a(xc,{facetsToPlot:c}),a(Sr,{tableConfiguration:o,hideDownload:m,cardConfiguration:d}),e&&a(at,{getLastQueryRequest:E.getLastQueryRequest,onClose:()=>t(!1)})]})}})}})})})})},Um=br;try{br.displayName="QueryWrapperPlotNav",br.__docgenInfo={description:"",displayName:"QueryWrapperPlotNav",props:{searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},facetsToPlot:{defaultValue:null,description:"",name:"facetsToPlot",required:!1,type:{name:"string[]"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"If onQueryChange is set, the callback will be invoked when the Query changes",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"If onQueryResultBundleChange is set, the callback will be invoked when the QueryResultBundle changes",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},initQueryJson:{defaultValue:null,description:"If initQueryJson is set, it will be the Query used in the initial QueryBundleRequest",name:"initQueryJson",required:!1,type:{name:"string"}},tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!1,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext">'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!1,type:{name:"CardConfiguration"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},facetsToFilter:{defaultValue:null,description:"",name:"facetsToFilter",required:!1,type:{name:"string[]"}},visibleColumnCount:{defaultValue:null,description:"",name:"visibleColumnCount",required:!1,type:{name:"number"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},defaultShowFacetVisualization:{defaultValue:null,description:"",name:"defaultShowFacetVisualization",required:!1,type:{name:"boolean"}},defaultShowSearchBox:{defaultValue:null,description:"",name:"defaultShowSearchBox",required:!1,type:{name:"boolean"}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/query_wrapper_plot_nav/QueryWrapperPlotNav.tsx#QueryWrapperPlotNav"]={docgenInfo:br.__docgenInfo,name:"QueryWrapperPlotNav",path:"src/lib/containers/query_wrapper_plot_nav/QueryWrapperPlotNav.tsx#QueryWrapperPlotNav"})}catch{}const Hm=r=>St({partMask:Zi|gn|Xi|Ji|mn|es,entityId:It(r),concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:r,limit:25,offset:0}}),wr=r=>{const{title:e,searchParams:t,sqlOperator:n,showAccessColumn:i,sql:s,hideDownload:o,hideQueryCount:l,name:d,showTopLevelControls:c=!1,searchConfiguration:y,unitDescription:m="Results",rgbIndex:f,showLastUpdatedOn:b,...h}=r,p=Hm(s);t&&(p.query.sql=ts(p.query.sql,t,n));const g=J(),w=It(s),{data:R}=ss(w);return a(za,{...h,initQueryRequest:p,children:a(rs,{rgbIndex:f,unitDescription:m,showLastUpdatedOn:b,...h,children:a(is,{children:S=>{if(S===void 0)throw new Error("No queryContext found when calling QueryContextConsumer");return a(Wa,{children:u=>{if(u===void 0)throw new Error("No queryVisualizationContext found when calling QueryVisualizationContextConsumer");return C(D,{children:[c&&a(Gt,{showColumnSelection:!0,name:d,hideDownload:o,hideQueryCount:l,hideFacetFilterControl:!0,hideVisualizationsControl:!0}),R&&$a(R)&&R.isSearchEnabled?a(zt,{helpUrl:y==null?void 0:y.fullTextSearchHelpURL}):a(Qt,{...y,queryContext:S,queryVisualizationContext:u}),a(Kt,{}),c&&a(Ya,{frontText:""}),a(Jt,{synapseContext:g,queryContext:S,queryVisualizationContext:u,showAccessColumn:i,title:e,"data-testid":"SynapseTable",...h}),a(Sl,{})]})}})}})})})},$m=wr;try{wr.displayName="StandaloneQueryWrapper",wr.__docgenInfo={description:`This component was initially implemented on the portal side. It renders a SynapseTable if a title is provided.
If showTopLevelControls is set to true, then the SynapseTable will also include the TopLevelControls (search, export table, column selection).`,displayName:"StandaloneQueryWrapper",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},linkCountToDisaggregatedQuery:{defaultValue:null,description:`If true, columns created by the COUNT function will render with a link to Synapse that opens the disaggregated query results filtered by the conditions of that row.
Note that this is very brittle and only supports one column at a time. See SWC-6075 for more information. Default false.`,name:"linkCountToDisaggregatedQuery",required:!1,type:{name:"boolean"}},showNoContentAvailableWhenEmpty:{defaultValue:null,description:"",name:"showNoContentAvailableWhenEmpty",required:!1,type:{name:"boolean"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},showTopLevelControls:{defaultValue:null,description:"",name:"showTopLevelControls",required:!1,type:{name:"boolean"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/StandaloneQueryWrapper.tsx#StandaloneQueryWrapper"]={docgenInfo:wr.__docgenInfo,name:"StandaloneQueryWrapper",path:"src/lib/containers/table/StandaloneQueryWrapper.tsx#StandaloneQueryWrapper"})}catch{}function Cr(r){const{query:e,showquery:t,tableonly:n}=r,i=t==="true",s=n==="true",o="Items";return s?a($m,{sql:e,name:o}):a(Um,{sql:e,hideSqlEditorControl:!i,name:o,defaultShowFacetVisualization:!1,tableConfiguration:{}})}try{Cr.displayName="MarkdownSynapseTable",Cr.__docgenInfo={description:"",displayName:"MarkdownSynapseTable",props:{query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"string"}},showquery:{defaultValue:null,description:"",name:"showquery",required:!0,type:{name:"string"}},tableonly:{defaultValue:null,description:"",name:"tableonly",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownSynapseTable.tsx#MarkdownSynapseTable"]={docgenInfo:Cr.__docgenInfo,name:"MarkdownSynapseTable",path:"src/lib/containers/markdown/widget/MarkdownSynapseTable.tsx#MarkdownSynapseTable"})}catch{}const jm={1:"toc-indent1",2:"toc-indent2",3:"toc-indent3",4:"toc-indent4",5:"toc-indent5",6:"toc-indent6"};function _r(r){const{originalMarkup:e}=r,t=[],n=/<h([1-6]) id="(.*)" .*toc="true">(.*)<\/h[1-6]>/gm;let i="";return e.replace(n,(s,o,l,d)=>(i+=d,t.push(a("div",{children:a("a",{role:"link",className:`link ${jm[Number(o)]}`,"data-anchor":l,children:d})},d)),"")),a("div",{children:t},i)}try{_r.displayName="MarkdownTableOfContents",_r.__docgenInfo={description:"",displayName:"MarkdownTableOfContents",props:{originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownTableOfContents.tsx#MarkdownTableOfContents"]={docgenInfo:_r.__docgenInfo,name:"MarkdownTableOfContents",path:"src/lib/containers/markdown/widget/MarkdownTableOfContents.tsx#MarkdownTableOfContents"})}catch{}function vr(r){const{alias:e}=r;return a(lt,{alias:e,size:rn})}try{vr.displayName="MarkdownUserBadge",vr.__docgenInfo={description:"",displayName:"MarkdownUserBadge",props:{alias:{defaultValue:null,description:"",name:"alias",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownUserBadge.tsx#MarkdownUserBadge"]={docgenInfo:vr.__docgenInfo,name:"MarkdownUserBadge",path:"src/lib/containers/markdown/widget/MarkdownUserBadge.tsx#MarkdownUserBadge"})}catch{}function Tr(r){return a(Cd,{params:r})}try{Tr.displayName="MarkdownVideo",Tr.__docgenInfo={description:"",displayName:"MarkdownVideo",props:{width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"string"}},videoId:{defaultValue:null,description:"",name:"videoId",required:!1,type:{name:"string"}},vimeoId:{defaultValue:null,description:"",name:"vimeoId",required:!1,type:{name:"string"}},oggSynapseId:{defaultValue:null,description:"",name:"oggSynapseId",required:!1,type:{name:"string"}},mp4SynapseId:{defaultValue:null,description:"",name:"mp4SynapseId",required:!1,type:{name:"string"}},webmSynapseId:{defaultValue:null,description:"",name:"webmSynapseId",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownVideo.tsx#MarkdownVideo"]={docgenInfo:Tr.__docgenInfo,name:"MarkdownVideo",path:"src/lib/containers/markdown/widget/MarkdownVideo.tsx#MarkdownVideo"})}catch{}function Zt(r){const{widgetType:e,widgetParamsMapped:t,originalMarkup:n}=r;switch(e){case"buttonlink":return a(Bn,{...t});case"image":return a(Wn,{...t});case"plot":return a(zn,{...t});case"toc":return a(_r,{originalMarkup:n});case"badge":return a(vr,{...t});case"iduReport":return a($n,{...t});case"video":case"vimeo":case"youtube":return a(Tr,{...t});case"synapsetable":return a(Cr,{...t});default:return console.warn(`Unsupported widget: ${e}.`),a(D,{})}}try{Zt.displayName="MarkdownWidget",Zt.__docgenInfo={description:"",displayName:"MarkdownWidget",props:{widgetType:{defaultValue:null,description:"",name:"widgetType",required:!0,type:{name:"enum",value:[{value:'"image"'},{value:'"video"'},{value:'"buttonlink"'},{value:'"plot"'},{value:'"toc"'},{value:'"badge"'},{value:'"iduReport"'},{value:'"vimeo"'},{value:'"youtube"'},{value:'"synapsetable"'}]}},widgetParamsMapped:{defaultValue:null,description:"",name:"widgetParamsMapped",required:!0,type:{name:"any"}},originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/MarkdownWidget.tsx#MarkdownWidget"]={docgenInfo:Zt.__docgenInfo,name:"MarkdownWidget",path:"src/lib/containers/markdown/MarkdownWidget.tsx#MarkdownWidget"})}catch{}class Ar extends I.exports.Component{constructor(e){super(e),this.renderBookmarks=this.renderBookmarks.bind(this)}renderBookmarks(){const e=String(this.props.footnotes),t=/Synapse widget&gt;<\/span>(.*)</g;let n;const i=[];for(;n=t.exec(e);)i.push(n[1]);return i.map((s,o)=>{const l=o<i.length-1;return C(I.exports.Fragment,{children:[C("button",{className:"SRC-markdown-bookmark",id:`bookmark${o}`,children:["[",o+1,"]"]}),a("span",{dangerouslySetInnerHTML:{__html:s}}),l&&a("br",{})]},o)})}render(){return C(I.exports.Fragment,{children:[a("hr",{}),this.renderBookmarks()]})}}const Wm=Ar;try{Ar.displayName="Bookmarks",Ar.__docgenInfo={description:"",displayName:"Bookmarks",props:{footnotes:{defaultValue:null,description:"",name:"footnotes",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/Bookmarks.tsx#Bookmarks"]={docgenInfo:Ar.__docgenInfo,name:"Bookmarks",path:"src/lib/containers/markdown/widget/Bookmarks.tsx#Bookmarks"})}catch{}const Ti=markdownit({html:!0});class Ee extends I.exports.Component{constructor(e){super(e),markdownitSynapse.init_markdown_it(Ti,markdownitSub,markdownitSup,markdownitCentertext,markdownitSynapseHeading,markdownitSynapseTable,markdownitStrikethroughAlt,markdownitContainer,markdownitEmphasisAlt,markdownitInlineComments,markdownitBr);const t="";Ti.use(markdownitSynapse,t,"https://synapse.org").use(markdownitMath,t);const n={};this.props.markdown&&(n.markdown=this.props.markdown),this.state={md:Ti,error:void 0,fileHandles:void 0,data:n,isLoading:!0},this.markupRef=I.exports.createRef(),this.handleLinkClicks=this.handleLinkClicks.bind(this),this.renderMarkdown=this.renderMarkdown.bind(this),this.recursiveRender=this.recursiveRender.bind(this),this.processMath=this.processMath.bind(this),this.getWikiAttachments=this.getWikiAttachments.bind(this),this.getWikiPageMarkdown=this.getWikiPageMarkdown.bind(this),this.createHTML=this.createHTML.bind(this),this.addBookmarks=this.addBookmarks.bind(this),this.addIdsToReferenceWidgets=this.addIdsToReferenceWidgets.bind(this),this.addIdsToTocWidgets=this.addIdsToTocWidgets.bind(this)}componentWillUnmount(){this.markupRef.current&&this.markupRef.current.removeEventListener("click",this.handleLinkClicks)}handleLinkClicks(e){const t=e.target;if(t.tagName==="A"||t.tagName==="BUTTON"){const n=e.target;if(n.id.substring(0,3)==="ref"){e.preventDefault();const i=Number(e.currentTarget.id.substring(3)),s=this.markupRef.current.querySelector(`#bookmark${i}`);try{s.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(o){console.log("error on scroll",o)}}else if(e.currentTarget.id!==null&&n.getAttribute("data-anchor")){e.preventDefault();const i=n.getAttribute("data-anchor"),s=this.markupRef.current.querySelector(`#${i}`);try{s.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(o){console.log("error on scroll",o)}}}}createHTML(e){if(!e)return{__html:""};const t=this.props.renderInline?this.state.md.renderInline(e):this.state.md.render(e);return{__html:Dh(t,{allowedAttributes:{a:["href","target"],button:["class"],div:["class"],h1:["toc"],h2:["toc"],h3:["toc"],h4:["toc"],h5:["toc"],h6:["toc"],li:["class"],ol:["class"],span:["*"],table:["class"],th:["colspan"],thead:["class"],ul:["class"],img:["src","alt"]},allowedTags:["span","code","h1","h2","h3","h4","h5","p","b","i","em","strong","a","id","table","tr","td","tbody","th","thead","button","div","img","image","ol","ul","li","svg","g","br","hr","summary","details","strong"]})}}processMath(){if(!this.markupRef.current)return;const e=this.markupRef.current.querySelectorAll('[id^="mathjax-"]'),t=new RegExp(/\\[()[\]]/,"g");e.forEach(n=>{if(n.textContent&&!n.getAttribute("processed")){n.setAttribute("processed","true");const i=n.textContent.replace(t,"");return katex.render(i,n,{output:"html",throwOnError:!1})}})}addBookmarks(){markdownitSynapse.resetFootnotes(),this.createHTML(this.state.data.markdown);const e=this.createHTML(markdownitSynapse.footnotes()).__html;if(e.length>0)return a(Wm,{footnotes:e})}async getWikiPageMarkdown(){const{ownerId:e,wikiId:t,objectType:n}=this.props;if(!(!e&&!t))try{const i=await Gl(this.context.accessToken,e,t,n);try{const s=await this.getWikiAttachments(t||i.id);this.setState({data:i,fileHandles:s,error:void 0})}catch(s){console.error("fileHandlesErr = ",s)}}catch(i){console.error(`Error on wiki markdown load
`,i),this.setState({error:i})}}async getWikiAttachments(e){const{ownerId:t,objectType:n}=this.props;if(!t){console.error("Cannot get wiki attachments without ownerId on Markdown Component");return}return await Xl(this.context.accessToken,t,e,n).then(i=>i).catch(i=>{console.error("Error on wiki attachment load ",i)})}addIdsToReferenceWidgets(e){const t=/<span id="wikiReference.*?<span data-widgetparams.*?span>/g;let n=1;return e.replace(t,()=>{const i=n;return n+=1,`<a href="" id="ref${i}">[${i}]</a>`})}addIdsToTocWidgets(e){const t="SRC-header-";let n=1;const i=/<h[1-6] toc="true">.*<\/h[1-6]>/gm;return e.replace(i,s=>{const o=n;return n+=1,`${s.substring(0,3)} id="${t}${o}"${s.substring(3)}`})}renderMarkdown(){let e=this.createHTML(this.state.data.markdown).__html;if(e=this.addIdsToReferenceWidgets(e),e=this.addIdsToTocWidgets(e),e.length>0){const n=new DOMParser().parseFromString(e,"text/html");return a(D,{children:this.recursiveRender(n.body,e)})}}recursiveRender(e,t){if(e.nodeType===Node.TEXT_NODE)return C(D,{children:[" ",e.textContent," "]});if(e.nodeType===Node.ELEMENT_NODE&&e instanceof HTMLElement){const n=e.tagName.toLowerCase()==="body"?"span":e.tagName.toLowerCase(),i=e.getAttribute("data-widgetparams");if(i)return this.processHTMLWidgetMapping(i,t);const s=e.attributes,o={};for(let d=0;d<s.length;d++){let c="",y="";const m=s.item(d);m&&(c=m.name,y=m.value),c&&y&&(o[c]=y)}if(e.childNodes.length===0)return a(n,{...o});const l=Array.from(e.childNodes).map((d,c)=>a(I.exports.Fragment,{children:this.recursiveRender(d,t)},c));return a(n,{...o,children:l})}}decodeXml(e){const t={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'};return e.replace(/(&quot;|&lt;|&gt;|&amp;)/g,(n,i)=>t[i])}processHTMLWidgetMapping(e,t){const n=this.decodeXml(e),i=n.indexOf("?");if(i===-1)return a(Zt,{widgetType:n,widgetParamsMapped:{},originalMarkup:t},JSON.stringify(n));const s=n.substring(0,i),o={};return n.substring(i+1).split("&").forEach(l=>{let[d,c]=l.split("=");c=decodeURIComponent(c),o[d]=c}),a(Zt,{widgetType:s,widgetParamsMapped:o,originalMarkup:t},JSON.stringify(n))}async componentDidMount(){if(this.state.data.markdown){this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current);return}this.markupRef.current&&this.markupRef.current.addEventListener("click",this.handleLinkClicks),await this.getWikiPageMarkdown(),this.processMath(),this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current)}async componentDidUpdate(e){let t=this.props.ownerId!==e.ownerId;t=t||this.props.wikiId!==e.wikiId,t&&await this.getWikiPageMarkdown(),this.processMath()}render(){const{renderInline:e}=this.props,{isLoading:t,error:n}=this.state,i={ownerId:this.props.ownerId,wikiId:this.props.wikiId,wikiPage:this.state.data,fileHandles:this.state.fileHandles};if(n)return a(Ma,{error:n});const s=this.addBookmarks(),o=C(jn,{wikiContext:i,children:[t&&a("span",{className:"spinner"}),this.renderMarkdown(),s&&a("div",{children:this.addBookmarks()})]});return e?a("span",{className:"markdown markdown-inline",ref:this.markupRef,children:o}):a("div",{className:"markdown",ref:this.markupRef,children:o})}}Ee.contextType=hn;try{Ee.displayName="MarkdownSynapse",Ee.__docgenInfo={description:"Basic Markdown functionality for Synapse, supporting Images/Plots/References/Bookmarks/buttonlinks",displayName:"MarkdownSynapse",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},markdown:{defaultValue:null,description:"",name:"markdown",required:!1,type:{name:"string"}},renderInline:{defaultValue:null,description:"",name:"renderInline",required:!1,type:{name:"boolean"}},objectType:{defaultValue:null,description:"",name:"objectType",required:!1,type:{name:"enum",value:[{value:'"ENTITY"'},{value:'"ENTITY_CONTAINER"'},{value:'"PRINCIPAL"'},{value:'"ACTIVITY"'},{value:'"EVALUATION"'},{value:'"SUBMISSION"'},{value:'"EVALUATION_SUBMISSIONS"'},{value:'"FILE"'},{value:'"MESSAGE"'},{value:'"WIKI"'},{value:'"FAVORITE"'},{value:'"ACCESS_REQUIREMENT"'},{value:'"ACCESS_APPROVAL"'},{value:'"TEAM"'},{value:'"TABLE"'},{value:'"ACCESS_CONTROL_LIST"'},{value:'"PROJECT_SETTING"'},{value:'"VERIFICATION_SUBMISSION"'},{value:'"CERTIFIED_USER_PASSING_RECORD"'},{value:'"FORUM"'},{value:'"THREAD"'},{value:'"REPLY"'},{value:'"FORM_GROUP"'},{value:'"FORM_DATA"'},{value:'"ENTITY_VIEW"'},{value:'"USER_PROFILE"'},{value:'"DATA_ACCESS_REQUEST"'},{value:'"DATA_ACCESS_SUBMISSION"'},{value:'"DATA_ACCESS_SUBMISSION_STATUS"'},{value:'"MEMBERSHIP_INVITATION"'}]}},onMarkdownProcessingDone:{defaultValue:null,description:"",name:"onMarkdownProcessingDone",required:!1,type:{name:"((ref: HTMLInputElement | null) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/MarkdownSynapse.tsx#MarkdownSynapse"]={docgenInfo:Ee.__docgenInfo,name:"MarkdownSynapse",path:"src/lib/containers/markdown/MarkdownSynapse.tsx#MarkdownSynapse"})}catch{}const xr=({type:r,title:e,subTitle:t="",description:n,values:i,secondaryLabelLimit:s,isAlignToLeftNav:o,descriptionConfig:l,href:d,target:c,rgbIndex:y,icon:m})=>{const f=document.querySelector('meta[name="description"]'),[b]=I.exports.useState(document.title),[h]=I.exports.useState(f?f.getAttribute("content"):"");return I.exports.useEffect(()=>(e&&document.title!==e&&(document.title=e),(n||t)&&(f==null||f.setAttribute("content",n||t)),function(){document.title=b,f==null||f.setAttribute("content",h)})),a("div",{className:`SRC-portalCard SRC-portalCardHeader ${o?"isAlignToLeftNav":""}`,children:a("div",{className:"container-fluid container-full-width",children:a("div",{className:"row",children:a("div",{className:"col-md-offset-1 col-md-10",children:C("div",{className:"SRC-portalCardMain",children:[m,C("div",{style:{width:"100%"},children:[C("div",{className:"SRC-cardContent",style:{marginLeft:"15px"},children:[a("div",{className:"SRC-type",children:r}),a("div",{children:a("h3",{className:"SRC-boldText",style:{margin:"none"},children:d?a("a",{target:c,href:d,className:"highlight-link",children:e}):C("span",{children:[" ",e," "]})})}),t&&C("div",{className:"SRC-author",children:[" ",t," "]}),n&&a("span",{className:"SRC-font-size-base",children:l!=null&&l.isMarkdown?a(Ee,{markdown:n}):n})]}),a("div",{style:{borderTop:"1px solid rgba(26, 28, 41, 0.2)",marginTop:"15px",paddingTop:"5px"}}),a("div",{className:"SRC-cardContent",children:i&&a(ns,{isHeader:!0,secondaryLabelLimit:s,values:i})})]})]})})})})})};try{xr.displayName="HeaderCard",xr.__docgenInfo={description:"",displayName:"HeaderCard",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subTitle:{defaultValue:{value:""},description:"",name:"subTitle",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[][]"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},href:{defaultValue:null,description:"",name:"href",required:!1,type:{name:"string"}},target:{defaultValue:null,description:"",name:"target",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"Element"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HeaderCard.tsx#HeaderCard"]={docgenInfo:xr.__docgenInfo,name:"HeaderCard",path:"src/lib/containers/HeaderCard.tsx#HeaderCard"})}catch{}const Rr=r=>{var c,y;const{fileHandleAssociation:e,showDownloadIcon:t,redirect:n=!1,displayValue:i}=r,{accessToken:s}=J(),[o,l]=I.exports.useState();I.exports.useEffect(()=>{i===void 0&&(async()=>l(await Rt({requestedFiles:[e],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1},s)))()},[s,i,e]);let d;return o&&(d=(c=o.requestedFiles[0].fileHandle)==null?void 0:c.fileName),C("button",{onClick:()=>{s&&e&&Va(e.fileHandleId,s,e.associateObjectType,e.associateObjectId,n).then(m=>{window.open(m,"_blank")}).catch(m=>{console.error("Error on retrieving file handle url ",m)})},className:`SRC-primary-text-color ${Gi}`,type:"button",style:{padding:0},children:[(y=i!=null?i:d)!=null?y:e.fileHandleId,t&&a(ce,{options:{icon:"download"}})]})};try{Rr.displayName="FileHandleLink",Rr.__docgenInfo={description:"",displayName:"FileHandleLink",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},redirect:{defaultValue:null,description:"",name:"redirect",required:!1,type:{name:"boolean"}},showDownloadIcon:{defaultValue:null,description:"",name:"showDownloadIcon",required:!0,type:{name:"boolean"}},displayValue:{defaultValue:null,description:"",name:"displayValue",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/FileHandleLink.tsx#FileHandleLink"]={docgenInfo:Rr.__docgenInfo,name:"FileHandleLink",path:"src/lib/containers/widgets/FileHandleLink.tsx#FileHandleLink"})}catch{}const Ir=r=>{const{fileHandleAssociation:{fileHandleId:e,associateObjectId:t,associateObjectType:n}}=r,{accessToken:i}=J(),[s,o]=I.exports.useState(),{ref:l,inView:d}=Nt({triggerOnce:!0,rootMargin:"500px 0px"});return I.exports.useEffect(()=>{(()=>{e&&t&&n&&d&&Va(e,i,n,t,!1).then(y=>{o(y)}).catch(y=>{console.error("Error on retrieving file handle url ",y)})})()},[d,e,t,i,n]),a("span",{ref:l,children:s&&a("img",{src:s,alt:"",className:"ImageFileHandle",loading:"lazy"})})};try{Ir.displayName="ImageFileHandle",Ir.__docgenInfo={description:"",displayName:"ImageFileHandle",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"]={docgenInfo:Ir.__docgenInfo,name:"ImageFileHandle",path:"src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"})}catch{}const Is=400,zm="SRC-short-description",Ym="SRC-long-description",Er=r=>{let e="";const t=r.split(" ");let n=0;for(;e.length<Is&&n<t.length;)e+=`${t[n]} `,n+=1;return e=e.trim(),{previewText:e}},Qm=(r,e,t)=>{var i;let n;return r&&e&&(ja(r)?n={fileHandleId:e,associateObjectId:(i=r==null?void 0:r.id)!=null?i:"",associateObjectType:xe.TableEntity}:t&&(n={fileHandleId:e,associateObjectId:t,associateObjectType:xe.FileEntity})),n},Xe=({columnName:r,value:e,selectColumns:t,columnModels:n})=>{if(!e)return{str:"",strList:void 0,columnModelType:void 0};const i=(t==null?void 0:t.find(o=>o.name===r))||(n==null?void 0:n.find(o=>o.name===r));if(i==null?void 0:i.columnType.endsWith("_LIST")){let o=e,l;try{return l=JSON.parse(o),o=l.join(", "),{strList:l,str:o,columnModelType:i==null?void 0:i.columnType}}catch(d){console.error("Could not parse multivalue string ",o," caught err ",d)}}return{str:e,columnModelType:i==null?void 0:i.columnType}},Km=(r,e,t)=>(e==null?void 0:e.findIndex(n=>n.name===r))||(t==null?void 0:t.findIndex(n=>n.name===r)),Or=r=>{const{synapseId:e,version:t}=r;return C("span",{children:[t,"\xA0\xA0",a("a",{target:$e.NEW_WINDOW,rel:"noopener noreferrer",href:`${Oe.PORTAL}#!Synapse:${e}.${t}`,children:"(Show Version History on Synapse)"})]})},en=r=>{const{value:e,columnName:t,labelLink:n,selectColumns:i,columnModels:s,isHeader:o,className:l,rowData:d}=r;if(!e)return a(D,{children:e});const{strList:c,str:y,columnModelType:m}=Xe({columnName:t,value:e,selectColumns:i,columnModels:s});if(!y)return a(D,{children:y});let f=l;const b={};if(o&&(f=l==null?void 0:l.concat(" ","SRC-lightLink")),m===W.USERID_LIST&&c)return a(D,{children:c.map((p,g)=>C("span",{children:[a(lt,{ownerId:p,size:rn,className:f}),g<c.length-1&&",\xA0\xA0"]},p))});if(m===W.USERID&&y)return a(lt,{ownerId:y,size:rn,className:f});if(!n)return y.match(Ba)?a("a",{target:$e.NEW_WINDOW,rel:"noopener noreferrer",href:`${Oe.PORTAL}#!Synapse:${y}`,className:f,children:y}):a(D,{children:y});let h;if(n.isMarkdown)c?h=a(D,{children:c.map((p,g)=>C("span",{children:[a(Ee,{renderInline:!0,markdown:p},p),g<c.length-1&&",\xA0\xA0"]},p))}):h=a(Ee,{renderInline:!0,markdown:e});else{const p=c||y.split(",");let g;if("target"in n&&(g=n.target),"linkColumnName"in n){const w=Km(n.linkColumnName,i,s);if(w==null)console.warn(`Could not determine column index of ${n.linkColumnName}`),h=a(D,{children:e});else{const R=d[w];vd(R)?h=a(D,{children:e}):h=a(D,{children:p.map((S,u)=>C(ge.Fragment,{children:[a("a",{href:R!=null?R:void 0,target:g!=null?g:$e.NEW_WINDOW,rel:"noopener noreferrer",className:f,style:b,children:S},S),u<p.length-1&&a("span",{style:{marginRight:4},children:", "})]},S))})}}else h=a(D,{children:p.map((w,R)=>{const{baseURL:S,URLColumnName:u,wrapValueWithParens:_}=n,x=_?`(${w})`:w,A=`/${S}?${u}=${x}`;return C(ge.Fragment,{children:[a("a",{href:A,className:f,style:b,target:g!=null?g:$e.CURRENT_WINDOW,children:w},w),R<p.length-1&&a("span",{style:{marginRight:4},children:", "})]},w)})})}return n.tooltipText?a(Je,{title:n.tooltipText,enterNextDelay:300,children:a("span",{children:h})}):h};function Gm(r,e,t){if(r){if(!e||!t)throw Error("Must specify CardLink and data for linking to work");const{matchColumnName:n,URLColumnName:i,overrideLinkURLColumnName:s}=r;if(s&&t[s]){const l=t[s],d=e[l];if(d)return d}const o=t[n];if(o===void 0)console.error(`Could not find match for data: ${e} with columnName ${n}`);else{const l=e[o];if(l)return`/${r.baseURL}?${i}=${l}`}}}function Ea(r,e,t,n){var l,d;r=r.trim();let i=r,s=$e.CURRENT_WINDOW;r.match(Ba)?i=`${Oe.PORTAL}#!Synapse:${r}`:r.match(ic)?(s=$e.NEW_WINDOW,i=`https://dx.doi.org/${r}`):e?e&&(i=(l=Gm(e,t,n))!=null?l:"",i.includes("/DetailsPage")&&(s=$e.NEW_WINDOW)):s=$e.NEW_WINDOW;const o=(d=e==null?void 0:e.target)!=null?d:s;return{href:i,target:o}}function qr(r){const{description:e,hasClickedShowMore:t,descriptionSubTitle:n,descriptionConfig:i}=r;let s=e;i!=null&&i.isMarkdown&&(s=a(Ee,{markdown:s}));const o=t||(i==null?void 0:i.showFullDescriptionByDefault);return a("div",{className:o?"":"SRC-hidden",children:a("span",{"data-search-handle":n,className:`SRC-font-size-base ${Ym}`,children:s})})}function Nr(r){const{description:e,hasClickedShowMore:t,descriptionSubTitle:n,descriptionConfig:i,toggleShowMore:s}=r;return i!=null&&i.showFullDescriptionByDefault?a(D,{}):C("div",{className:t?"SRC-hidden":"",children:[a("span",{"data-search-handle":n,className:`SRC-font-size-base ${zm} SRC-short-description`,children:Er(e).previewText}),e.length>=Is&&a("a",{style:{fontSize:"16px",cursor:"pointer",marginLeft:"5px"},className:"highlight-link",onClick:s,children:"...Show More"})]})}class tn extends ge.Component{constructor(e){super(e),this.getCutoff=t=>{let n="";const i=t.split(" ");let s=0;for(;n.length<Is&&s<i.length;)n+=`${i[s]} `,s+=1;return n=n.trim(),{previewText:n}},this.toggleShowMore=()=>{this.setState({hasClickedShowMore:!0})},this.renderTitle=({href:t,target:n,titleSearchHandle:i,title:s})=>t?a("a",{"data-search-handle":i,target:n,href:t,className:"highlight-link",children:s}):C("span",{"data-search-handle":i,children:[" ",s," "]}),this.state={hasClickedShowMore:!1}}render(){var ze;const{schema:e,data:t,genericCardSchema:n,secondaryLabelLimit:i,selectColumns:s,columnModels:o,iconOptions:l,useTypeColumnForIcon:d=!1,isHeader:c=!1,titleLinkConfig:y,ctaLinkConfig:m,labelLinkConfig:f,facetAliases:b={},descriptionConfig:h,rgbIndex:p,columnIconOptions:g,queryContext:{entity:w}}=this.props,R=n,{hasClickedShowMore:S}=this.state,{link:u="",type:_}=R,x=t[e[R.title]];let A=R.subTitle&&t[e[R.subTitle]];A=(R==null?void 0:R.subTitle)&&Xe({value:A,columnName:R==null?void 0:R.subTitle,selectColumns:s,columnModels:o}).str;const O=t[e[R.description||""]],E=t[e[R.icon||""]],L=t[e[R.dataTypeIconNames||""]],P=t[e[R.imageFileHandleColumnName||""]],M=o==null?void 0:o.find(ye=>R.link===ye.name),V=M==null?void 0:M.columnType,v=t[e[u]]||"",{href:q,target:k}=Ea(v,y,t,e),B=[],{secondaryLabels:Z=[]}=R,ee=w&&!ja(w);for(let ye=0;ye<Z.length;ye+=1){const Te=Z[ye];let qe=t[e[Te]],Ve;if(qe){if(ee&&Te==="currentVersion"){const Dt=t[e.id];qe=Or({synapseId:Dt,version:qe}),Ve="Version"}else{const Dt=f==null?void 0:f.find(Pt=>Pt.matchColumnName===Te);qe=a(en,{value:qe,columnName:Te,labelLink:Dt,isHeader:c,selectColumns:s,columnModels:o,rowData:t}),Ve=Qe(Te,b)}const Lt=[Ve,qe,Te];B.push(Lt)}}const U=Qm(w,P||v,t[e.id]),ae=B.length>0,T={marginTop:c?"0px":void 0,marginBottom:c?"0px":void 0,paddingBottom:ae||P?void 0:"15px"},N=C(D,{children:[!d&&P&&a("div",{className:"SRC-imageThumbnail",style:{padding:R.thumbnailRequiresPadding?"21px":void 0},children:U&&a(Ir,{fileHandleAssociation:U})}),!d&&!P&&a("div",{className:"SRC-cardThumbnail",children:a(Xr,{iconOptions:l,value:E,type:_})}),d&&a("div",{className:"SRC-cardThumbnail",children:a(ce,{options:{icon:Kc[t[e.type]]}})})]});if(c)return a(xr,{descriptionConfig:h,title:x,subTitle:A,description:O,type:_,icon:N,values:B,href:q,target:k,isAlignToLeftNav:!0,secondaryLabelLimit:i,rgbIndex:p});const F=Qe(R.title,b),H=Qe(R.subTitle,b),j=Qe(R.description,b);let me,te;if(m){const ye=t[e[m.link]]||"",{href:Te,target:qe}=Ea(ye,void 0,t,e);me=Te,te=qe}return C("div",{style:T,className:"SRC-portalCard",children:[C("div",{className:"SRC-portalCardMain",children:[N,C("div",{className:"SRC-cardContent",children:[a("div",{className:"SRC-type",children:_}),((ze=g==null?void 0:g.columns)==null?void 0:ze.dataType)&&(L==null?void 0:L.length)&&a("div",{style:{marginTop:"20px"},children:a(_d,{iconConfigs:g.columns.dataType,iconNames:JSON.parse(L),useBackground:!0,useTheme:!0})}),a("div",{children:a("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"},children:!y&&V===W.FILEHANDLEID&&U?a(Rr,{fileHandleAssociation:U,showDownloadIcon:_!==Jl,displayValue:x}):this.renderTitle({href:q,target:k,titleSearchHandle:F,title:x})})}),A&&a("div",{"data-search-handle":H,className:"SRC-author",children:A}),O&&a(Nr,{description:O,hasClickedShowMore:S,descriptionSubTitle:j,descriptionConfig:h,toggleShowMore:this.toggleShowMore}),O&&a(qr,{description:O,hasClickedShowMore:S,descriptionSubTitle:j,descriptionConfig:h}),m&&me&&te&&a("div",{className:"SRC-portalCardCTALink bootstrap-4-backport",children:a("a",{target:te,rel:"noopener noreferrer",href:me,children:m.text})})]})]}),ae&&a(ns,{isHeader:!1,secondaryLabelLimit:i,values:B,columnIconOptions:g,className:`${P?"hasImage":"hasIcon"}`})]})}}tn.contextType=hn;try{qr.displayName="LongDescription",qr.__docgenInfo={description:"",displayName:"LongDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#LongDescription"]={docgenInfo:qr.__docgenInfo,name:"LongDescription",path:"src/lib/containers/GenericCard.tsx#LongDescription"})}catch{}try{Nr.displayName="ShortDescription",Nr.__docgenInfo={description:"",displayName:"ShortDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},toggleShowMore:{defaultValue:null,description:"",name:"toggleShowMore",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#ShortDescription"]={docgenInfo:Nr.__docgenInfo,name:"ShortDescription",path:"src/lib/containers/GenericCard.tsx#ShortDescription"})}catch{}try{Er.displayName="getCutoff",Er.__docgenInfo={description:"",displayName:"getCutoff",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getCutoff"]={docgenInfo:Er.__docgenInfo,name:"getCutoff",path:"src/lib/containers/GenericCard.tsx#getCutoff"})}catch{}try{Xe.displayName="getValueOrMultiValue",Xe.__docgenInfo={description:"",displayName:"getValueOrMultiValue",props:{columnName:{defaultValue:null,description:"",name:"columnName",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getValueOrMultiValue"]={docgenInfo:Xe.__docgenInfo,name:"getValueOrMultiValue",path:"src/lib/containers/GenericCard.tsx#getValueOrMultiValue"})}catch{}try{Or.displayName="VersionLabel",Or.__docgenInfo={description:"",displayName:"VersionLabel",props:{synapseId:{defaultValue:null,description:"",name:"synapseId",required:!0,type:{name:"string"}},version:{defaultValue:null,description:"",name:"version",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#VersionLabel"]={docgenInfo:Or.__docgenInfo,name:"VersionLabel",path:"src/lib/containers/GenericCard.tsx#VersionLabel"})}catch{}try{en.displayName="SynapseCardLabel",en.__docgenInfo={description:"",displayName:"SynapseCardLabel",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},labelLink:{defaultValue:null,description:"",name:"labelLink",required:!0,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink | undefined"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!0,type:{name:"SelectColumn[] | undefined"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!0,type:{name:"ColumnModel[] | undefined"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#SynapseCardLabel"]={docgenInfo:en.__docgenInfo,name:"SynapseCardLabel",path:"src/lib/containers/GenericCard.tsx#SynapseCardLabel"})}catch{}try{tn.displayName="GenericCard",tn.__docgenInfo={description:"Renders a card from a table query",displayName:"GenericCard",props:{selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},useTypeColumnForIcon:{defaultValue:null,description:"",name:"useTypeColumnForIcon",required:!1,type:{name:"boolean"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"Record<string, number>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"string[]"}},tableId:{defaultValue:null,description:"",name:"tableId",required:!0,type:{name:"string | undefined"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#GenericCard"]={docgenInfo:tn.__docgenInfo,name:"GenericCard",path:"src/lib/containers/GenericCard.tsx#GenericCard"})}catch{}class ot extends I.exports.Component{constructor(e){super(e),this.handleLinkClick=t=>n=>{n.preventDefault(),window.open(`${Oe.PORTAL}#!Synapse:${t}`,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:e,schema:t,selectColumns:n,columnModels:i}=this.props,s=e[t.datasetName],o=e[t.summary],l=Xe({columnName:"tumorType",value:e[t.tumorType],selectColumns:n,columnModels:i}).str,d=Xe({columnName:"diseaseFocus",value:e[t.diseaseFocus],selectColumns:n,columnModels:i}).str,c=e[t.id],y=e[t.fundingAgency],m=e[t.fileCount],f=fl(e[t.fileSize]),b=[["FUNDER",Xe({columnName:"fundingAgency",value:y,selectColumns:n,columnModels:i}).str],["SIZE",f],["FILES",m]];return C("div",{className:"SRC-portalCard SRC-typeDataset  ",children:[C("div",{className:"SRC-cardThumbnail",children:[a(Xr,{type:Fa}),a("div",{children:f})]}),C("div",{className:"SRC-cardContent SRC-dataset",children:[a("div",{className:"SRC-type",children:"Dataset "}),a("div",{children:a("h3",{children:a("a",{target:"_self",href:`${Oe.PORTAL}#!Synapse:${c}`,children:s})})}),C("div",{className:"SRC-description-dataset",children:[a("p",{className:"SRC-description-text",children:o}),a("div",{className:"SRC-cardAction bootstrap-4-backport",children:a(de,{className:"pill SRC-datasetButton",onClick:this.handleLinkClick(c),variant:"secondary",children:"Download Dataset"})})]}),a("div",{className:"SRC-cardAnnotations",children:a(uc,{chips:[l,d]})})]}),a(ns,{isHeader:!1,secondaryLabelLimit:this.props.secondaryLabelLimit,values:b})]})}}try{ot.displayName="Dataset",ot.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/Dataset.tsx#Dataset"]={docgenInfo:ot.__docgenInfo,name:"Dataset",path:"src/lib/containers/row_renderers/Dataset.tsx#Dataset"})}catch{}class kr extends I.exports.Component{constructor(e){super(e),this.handleLinkClick=t=>n=>{n.preventDefault(),window.open(t,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:e,schema:t}=this.props,n=e[t.organizationName],i=e[t.organizationPath],s=e[t.summary],o=e[t.website],l=e[t.logo];let d=o.replace("https://","");d=d.replace("http://",""),d.charAt(d.length-1)==="/"&&(d=d.substring(0,d.length-1));const c=window.location.hash.substring(1)===i,y={};let m;return c?y.paddingBottom="42px":m=a("div",{className:"SRC-marginAuto SRC-cardAction bootstrap-4-backport",children:a(de,{className:"pill-xl",href:i,variant:"secondary",children:"View Funded Research"})}),C("div",{className:"SRC-portalCard SRC-typeFunder ",style:y,children:[C("div",{className:"SRC-cardContent",children:[a("div",{className:"SRC-type",children:"Organization"}),l&&a("div",{className:"SRC-cardThumbnail",children:a("img",{alt:"funder logo",className:"SRC-logo",src:l})}),a("div",{children:C("h3",{children:[c&&n,!c&&a("a",{href:i,children:n})]})}),a("div",{className:"SRC-website",children:a("a",{rel:"noopener noreferrer",target:"_blank",href:o,children:d})}),a("div",{className:"SRC-description",children:s})]}),m]})}}try{kr.displayName="Funder",kr.__docgenInfo={description:"",displayName:"Funder",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/Funder.tsx#Funder"]={docgenInfo:kr.__docgenInfo,name:"Funder",path:"src/lib/containers/row_renderers/Funder.tsx#Funder"})}catch{}try{ot.displayName="Dataset",ot.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/index.tsx#Dataset"]={docgenInfo:ot.__docgenInfo,name:"Dataset",path:"src/lib/containers/row_renderers/index.tsx#Dataset"})}catch{}try{rowrenderers.displayName="rowrenderers",rowrenderers.__docgenInfo={description:"",displayName:"rowrenderers",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/index.tsx#rowrenderers"]={docgenInfo:rowrenderers.__docgenInfo,name:"rowrenderers",path:"src/lib/containers/row_renderers/index.tsx#rowrenderers"})}catch{}const gt=(r,e)=>r>0?`${r} ${e}${r>1?"s":""} `:"",Xm=(r,e)=>{const t=Jr.duration(r,e),n=t.years(),i=t.months()%12,s=t.days()%31,o=t.hours()%24,l=t.minutes()%60,d=t.seconds()%60;return`${gt(n,"year")}${gt(i,"month")}${gt(s,"day")}${gt(o,"hour")}${gt(l,"minute")}${gt(d,"second")}`.trim()},Lr=({data:r,schema:e})=>{const t=r[e.submitterName],n=r[e.submitterUserId],i=r[e.time],s=r[e.timeUnits],o=r[e.text],l=r[e.tag];return C("div",{className:"SRC-portalCard ObservationCard",children:[C("div",{className:"ObservationCard__submitter",children:[!n&&a("div",{children:t}),n&&a(lt,{size:"SMALL USER CARD",ownerId:n})]}),i&&C("div",{className:"ObservationCard__time",children:[a(ce,{options:{icon:"time"}}),a("span",{children:Xm(i,s)})]}),a("div",{className:"ObservationCard__text",children:a(pc,{summary:o})}),a("div",{className:"ObservationCard__tags",children:l&&a("span",{className:"SRC-tag",children:l})})]})},Dr=()=>C("div",{className:"SRC-portalCard ObservationCard",children:[a("div",{className:"ObservationCard__submitter",children:a("span",{children:a(Ai,{width:"100px"})})}),a("div",{className:"ObservationCard__time",children:a(ce,{options:{icon:"time"}})}),a("div",{className:"ObservationCard__text",children:a(Ja,{numCols:1,numRows:4})}),a("div",{className:"ObservationCard__tags",children:a(Ai,{width:"80px"})})]});try{Lr.displayName="ObservationCard",Lr.__docgenInfo={description:`Specialized Observation Card, initially implemented for the NF portal.
Expects the following columns: submitterName, submitterUserId, time, timeUnits, text, and tag.`,displayName:"ObservationCard",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"ObservationCardSchema"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"Record<string, string>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/ObservationCard.tsx#ObservationCard"]={docgenInfo:Lr.__docgenInfo,name:"ObservationCard",path:"src/lib/containers/row_renderers/ObservationCard.tsx#ObservationCard"})}catch{}try{Dr.displayName="LoadingObservationCard",Dr.__docgenInfo={description:"",displayName:"LoadingObservationCard",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/ObservationCard.tsx#LoadingObservationCard"]={docgenInfo:Dr.__docgenInfo,name:"LoadingObservationCard",path:"src/lib/containers/row_renderers/ObservationCard.tsx#LoadingObservationCard"})}catch{}const nn=r=>{const{isHeader:e=!1,unitDescription:t,type:n,isLoading:i,secondaryLabelLimit:s=3,title:o,...l}=r,d=Rc(),{data:c,getLastQueryRequest:y,appendNextPageToResults:m,hasNextPage:f}=d,b=y(),h=(u,_)=>{switch(_){case Fa:return a(ot,{...u});case ec:return a(kr,{...u});case Zl:return a(tn,{...u,queryContext:d});case ui:return a(Lr,{...u});default:return a("div",{},u.key)}},p=c!=null&&c.queryResult.queryResults.tableId?[c==null?void 0:c.queryResult.queryResults.tableId]:[],g=Ua({ids:p,type:"ENTITY_HEADER"});if(c){if(c&&c.queryResult.queryResults.rows.length===0)return b.query.additionalFilters?a(ml,{}):a(yl,{})}else return C("div",{children:[i&&n===ui&&a(Dr,{}),i&&n!==ui&&ro]});const w={};c.queryResult.queryResults.headers.forEach((u,_)=>{w[u.name]=_});const R=f&&a("div",{className:"SRC-viewMore bootstrap-4-backport",children:a(de,{variant:"secondary",className:"pill-xl",onClick:()=>{m()},children:"View More"})});let S;if(n===Ls){const u=c.queryResult.queryResults.headers.findIndex(x=>x.columnType===W.USERID);if(u===-1)throw Error("Type MEDIUM_USER_CARD specified but no columnType USERID found");const _=c.queryResult.queryResults.rows.map(x=>x.values.filter(A=>A!==null)[u]);S=a(Td,{data:c,list:_,size:Ls})}else{const u=c.queryResult.queryResults.rows;S=u.length?u.map(_=>{const A={key:JSON.stringify(_.values),type:n,schema:w,isHeader:e,secondaryLabelLimit:s,data:_.values,selectColumns:c.selectColumns,columnModels:c.columnModels,tableEntityConcreteType:g[0]&&g[0].type,tableId:c==null?void 0:c.queryResult.queryResults.tableId,...l};return h(A,n)}):a(D,{})}return C("div",{role:"list",children:[o&&a("h2",{className:"SRC-card-overview-title",children:o}),!o&&t&&a(Ya,{frontText:"Displaying"}),S,R]})};try{nn.displayName="CardContainer",nn.__docgenInfo={description:"",displayName:"CardContainer",props:{isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/CardContainer.tsx#CardContainer"]={docgenInfo:nn.__docgenInfo,name:"CardContainer",path:"src/lib/containers/CardContainer.tsx#CardContainer"})}catch{}const Pr=({sortConfig:r,facetAliases:e})=>{const{defaultColumn:t,defaultDirection:n,sortableColumns:i}=r,s=je(),{getLastQueryRequest:o,executeQueryRequest:l}=s,[d,c]=I.exports.useState(t),[y,m]=I.exports.useState(n),f=i.map(h=>({value:h,label:Qe(h,e)})),b=h=>{const p=o();let g="ASC";h===d&&(g=y==="ASC"?"DESC":"ASC");const w=h?[{column:h,direction:g}]:void 0;p.query.sort=w,l(p),c(h),m(g)};return C("div",{className:"QuerySortSelector bootstrap-4-backport",children:[a(qt,{variant:"label",className:"sort-by-label SRC-inlineBlock",children:"Sort by"}),a(qc,{className:"react-select-container SRC-inlineBlock",value:Nc(d,f),options:f,onChange:h=>b(h==null?void 0:h.value),components:{Control:kc},styles:{control:h=>({...h,marginLeft:"15px"})}})]})};try{Pr.displayName="QuerySortSelector",Pr.__docgenInfo={description:"",displayName:"QuerySortSelector",props:{sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!0,type:{name:"SortConfiguration"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/QuerySortSelector.tsx#QuerySortSelector"]={docgenInfo:Pr.__docgenInfo,name:"QuerySortSelector",path:"src/lib/containers/QuerySortSelector.tsx#QuerySortSelector"})}catch{}var $e=(r=>(r.CURRENT_WINDOW="_self",r.NEW_WINDOW="_blank",r.PARENT_FRAME="_parent",r.FULL_WINDOW_BODY="_top",r))($e||{});const Mr=r=>{const e=ts(r.sql,r.searchParams,r.sqlOperator),{sortConfig:t,facetAliases:n}=r,i=t?[{column:t.defaultColumn,direction:t.defaultDirection}]:void 0,s={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:It(e),query:{sql:e,limit:r.limit,sort:i},partMask:mn|gn|Xi|Pa|Ji|Zi|Ki|es};return a(Yt,{...r,initQueryRequest:s,children:C(rs,{rgbIndex:r.rgbIndex,unitDescription:r.unitDescription,facetAliases:r.facetAliases,children:[t&&a(Pr,{sortConfig:t,facetAliases:n}),a(nn,{...r}),a(is,{children:o=>a(Ma,{error:o==null?void 0:o.error})})]})})},ay=Mr;try{Mr.displayName="CardContainerLogic",Mr.__docgenInfo={description:"Class wraps around CardContainer and serves as a standalone logic container for rendering cards.",displayName:"CardContainerLogic",props:{limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"KeyValue"}},facetAliases:{defaultValue:null,description:"",name:"facetAliases",required:!1,type:{name:"Record<string, string>"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!1,type:{name:"SortConfiguration"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/CardContainerLogic.tsx#CardContainerLogic"]={docgenInfo:Mr.__docgenInfo,name:"CardContainerLogic",path:"src/lib/containers/CardContainerLogic.tsx#CardContainerLogic"})}catch{}export{Id as A,ay as C,Xt as D,so as E,Rr as F,st as H,yr as I,xd as L,Gn as M,Jn as P,Um as Q,_e as S,Ee as a,Ad as b,sy as c,fl as d,dr as e,pr as f,Ir as g,Ea as h,Qm as i,$m as j,Nd as u};
