import{j as c,l as S,bS as E,bT as I,U as C,bU as T,bV as l,bW as d}from"./index.68bd0253.js";import{u as f}from"./useInfiniteQuery.32675929.js";import{u as _}from"./useMutation.214258b2.js";import{D as g}from"./EntityChildren.50133102.js";import{r as b}from"./jsx-runtime.1ec48991.js";function k(s,t){const{accessToken:e}=c();return S(["moderators",s],()=>E(e,s),t)}function F(s,t,e,n,r,i){const{accessToken:u}=c();return f(["forumthread",s,"infinite",t,r,e,n],async a=>I(u,s,a.pageParam,t,e,n,r),{...i,getNextPageParam:(a,o)=>{if(a.results.length>0)return o.length*t}})}var m=(s=>(s.FORUM="FORUM",s.THREAD="THREAD",s.DATA_ACCESS_SUBMISSION="DATA_ACCESS_SUBMISSION",s.DATA_ACCESS_SUBMISSION_STATUS="DATA_ACCESS_SUBMISSION_STATUS",s))(m||{}),D=(s=>(s.SUBSCRIPTION_ID="SUBSCRIPTION_ID",s.SUBSCRIBER_ID="SUBSCRIBER_ID",s.OBJECT_ID="OBJECT_ID",s.OBJECT_TYPE="OBJECT_TYPE",s.CREATED_ON="CREATED_ON",s))(D||{});function U(s,t,e){const{accessToken:n}=c();return S([n,"subscription",s,t],async()=>{const i={objectType:t,idList:[s],sortByType:D.OBJECT_ID,sortDirection:g.ASC};return(await d(n,i)).results[0]},e)}function R(s){const t=C(),{accessToken:e}=c();return _(n=>T(e,n),{...s,onSuccess:async(n,r,i)=>{await t.invalidateQueries([e,"subscription"]),s!=null&&s.onSuccess&&await s.onSuccess(n,r,i)}})}function B(s){const t=C(),{accessToken:e}=c();return _(n=>l(e,n),{...s,onSuccess:async(n,r,i)=>{await t.invalidateQueries([e,"subscription"]),s!=null&&s.onSuccess&&await s.onSuccess(n,r,i)}})}const p=(s,t)=>{const{data:e,isLoading:n}=U(s,t),{mutate:r,isLoading:i}=R(),{mutate:u,isLoading:a}=B(),o=n||i||a,A=b.exports.useCallback(()=>{e?u(e.subscriptionId):r({objectId:s,objectType:t})},[u,s,t,r,e]);return{isLoading:o,subscription:e,toggleSubscribed:A}};export{m as S,p as a,F as b,k as u};
