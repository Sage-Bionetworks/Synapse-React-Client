import{j as t,a as n,r as h}from"./jsx-runtime.c28691f9.js";import{V as w,R as B,a4 as V,ac as U}from"./index.76b38c54.js";import{u as F,g as p}from"./queryUtils.29780774.js";import{u as H}from"./useShowDesktop.fd04cb42.js";import{E as K}from"./ExpandableContent.796a573e.js";import{Q as x}from"./QueryCount.6a250f74.js";import{B as O}from"./Button.01687609.js";import{q as P,j as Y}from"./SynapseConstants.290eab74.js";import"./iframe.180ebcad.js";import"./index.e19c4baa.js";import"./styled.0b15883e.js";import"./utils.147770f5.js";import"./TransitionGroupContext.4d4491d8.js";import"./useTheme.c2c5870a.js";import"./Alert.39b51be4.js";import"./hook.668b90b8.js";import"./createWithBsPrefix.e1e1b086.js";import"./divWithClassName.5d82b3d5.js";import"./index.35ce73ec.js";import"./Fade.467f608c.js";import"./isArray.00855dd8.js";import"./getEndpoint.bb7ded34.js";import"./Link.7916e978.js";import"./Typography.979062bc.js";import"./Button.5474ded1.js";import"./ButtonBase.62e27216.js";import"./emotion-react.browser.esm.07119d08.js";import"./useInfiniteQuery.4ac5428a.js";import"./queryKeys.e0d3085f.js";import"./QueryFilter.756f7d3e.js";import"./cloneDeep.cb414b63.js";import"./_baseClone.a1dc38d3.js";import"./_getTag.8cd19e02.js";import"./_Set.3ccae59b.js";import"./IconSvg.7c5a9ccb.js";import"./Tooltip.d4e3b915.js";import"./createSvgIcon.40781e98.js";import"./InfoOutlined.276d33db.js";import"./sqlFunctions.66d0ccb5.js";import"./RegularExpressions.3cd69849.js";function _({link:a,summary:r,countSql:i,title:l}){return t(K,{title:n("div",{className:"Goals__Mobile__Header",children:[i&&t("span",{className:"Goals__Mobile__Header__Count",children:t(x,{parens:!1,query:{sql:i}})}),n("span",{className:"Goals__Mobile__Header__Title",children:[" ",l," "]})]}),content:n("div",{className:"Goals__Mobile__Content bootstrap-4-backport",children:[t("p",{children:r}),t(O,{variant:"secondary",className:"pill Goals__Mobile__Content__Link",href:a,children:"EXPLORE"})]})})}try{_.displayName="GoalsMobile",_.__docgenInfo={description:"",displayName:"GoalsMobile",props:{countSql:{defaultValue:null,description:"",name:"countSql",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"string"}},link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},asset:{defaultValue:null,description:"",name:"asset",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/home_page/goals/Goals.Mobile.tsx#GoalsMobile"]={docgenInfo:_.__docgenInfo,name:"GoalsMobile",path:"src/lib/containers/home_page/goals/Goals.Mobile.tsx#GoalsMobile"})}catch{}function y({asset:a,link:r,summary:i,countSql:l,title:d}){return n("div",{className:"Goals__Card bootstrap-4-backport",children:[t("div",{className:"Goals__Card__header",style:{background:`url('${a}')`},children:n("p",{children:[n("span",{className:"Goals__Card__header__title",children:[" ",d," "]}),l&&t("span",{className:"Goals__Card__header__count",children:t(x,{parens:!1,query:{sql:l}})})]})}),n("div",{className:"Goals__Card__summary",children:[n("p",{children:[" ",i," "]}),t(O,{className:"pill Goals__Card__summary__link",variant:"secondary",href:r,children:"EXPLORE"})]})]})}try{y.displayName="GoalsDesktop",y.__docgenInfo={description:"",displayName:"GoalsDesktop",props:{countSql:{defaultValue:null,description:"",name:"countSql",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"string"}},link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},asset:{defaultValue:null,description:"",name:"asset",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/home_page/goals/Goals.Desktop.tsx#GoalsDesktop"]={docgenInfo:y.__docgenInfo,name:"GoalsDesktop",path:"src/lib/containers/home_page/goals/Goals.Desktop.tsx#GoalsDesktop"})}catch{}const f=a=>{const{entityId:r}=a,{accessToken:i}=w(),[l,d]=h.exports.useState(),[g,b]=h.exports.useState(),C=H(),L={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:r,partMask:P|Y,query:{sql:`select * from ${r} order by ItemOrder`}},{data:e}=F(L);h.exports.useEffect(()=>{(async()=>{var u;try{const o=p("Asset",e);let c=(u=e==null?void 0:e.queryResult.queryResults.rows.map(s=>s.values[o]))!=null?u:[];if(c.some(s=>s===null)&&console.warn("Row has null value(s) when no nulls expected"),c.length===0)return;const m=c.map(s=>({associateObjectId:r,associateObjectType:V.TableEntity,fileHandleId:s})),G=await U({includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:m},i);b(void 0),d(G.requestedFiles.filter(s=>s.preSignedURL!==void 0).map(s=>s.preSignedURL))}catch(o){console.error("Error on get data",o),b(o)}})()},[r,i,e]);const E=p("TableId",e),S=p("CountSql",e),M=p("Title",e),N=p("Summary",e),D=p("Link",e);return n("div",{className:`Goals${C?"__Desktop":""}`,children:[g&&t(B,{error:g}),e==null?void 0:e.queryResult.queryResults.rows.map((R,u)=>{var I;const o=R.values;o.some(v=>v===null)&&console.warn("Row has null value(s) when no nulls expected");const c=E>-1?o[E]:void 0;let m;S>-1&&o[S]?m=o[S]:c&&(m=`SELECT * FROM ${c}`);const q=o[M],G=o[N],s=o[D],A=(I=l==null?void 0:l[u])!=null?I:"",k={countSql:m,title:q,summary:G,link:s,asset:A};return C?t(y,{...k}):t(_,{...k})})]})},T=f;try{f.displayName="Goals",f.__docgenInfo={description:"",displayName:"Goals",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/home_page/goals/Goals.tsx#Goals"]={docgenInfo:f.__docgenInfo,name:"Goals",path:"src/lib/containers/home_page/goals/Goals.tsx#Goals"})}catch{}const De={parameters:{storySource:{source:`import React from 'react'
import { ComponentStory, ComponentMeta } from '@storybook/react'
import Goals from './Goals'

export default {
  title: 'Home Page/Goals',
  component: Goals,
} as ComponentMeta<typeof Goals>

const Template: ComponentStory<typeof Goals> = args => <Goals {...args} />

export const Demo = Template.bind({})
Demo.args = {
  entityId: 'syn22315959',
}
`,locationsMap:{demo:{startLoc:{col:47,line:10},endLoc:{col:74,line:10},startBody:{col:47,line:10},endBody:{col:74,line:10}}}}},title:"Home Page/Goals",component:T},j=a=>t(T,{...a}),Q=j.bind({});Q.args={entityId:"syn22315959"};const Ae=["Demo"];export{Q as Demo,Ae as __namedExportsOrder,De as default};
