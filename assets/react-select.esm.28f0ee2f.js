import{b as S,a as _}from"./toConsumableArray.b3669986.js";import{m as V,S as L,_ as I,h as A,a as r}from"./stateManager-845a3300.esm.2aae5abd.js";import{_ as D}from"./classCallCheck.8304ed06.js";import{j as k}from"./withStyles.8be28b48.js";import{_ as E}from"./inherits.98d6a15d.js";import{j as P}from"./jsx-runtime.2e925369.js";const R=window.React.Component;var q={cacheOptions:!1,defaultOptions:!1,filterOption:null,isLoading:!1},j=function(O){var c,h;return h=c=function(v){E(u,v);var m=I(u);function u(n){var t;return D(this,u),t=m.call(this),t.select=void 0,t.lastRequest=void 0,t.mounted=!1,t.handleInputChange=function(e,o){var a=t.props,i=a.cacheOptions,d=a.onInputChange,s=A(e,o,d);if(!s){delete t.lastRequest,t.setState({inputValue:"",loadedInputValue:"",loadedOptions:[],isLoading:!1,passEmptyOptions:!1});return}if(i&&t.state.optionsCache[s])t.setState({inputValue:s,loadedInputValue:s,loadedOptions:t.state.optionsCache[s],isLoading:!1,passEmptyOptions:!1});else{var f=t.lastRequest={};t.setState({inputValue:s,isLoading:!0,passEmptyOptions:!t.state.loadedInputValue},function(){t.loadOptions(s,function(p){!t.mounted||f===t.lastRequest&&(delete t.lastRequest,t.setState(function(l){return{isLoading:!1,loadedInputValue:s,loadedOptions:p||[],passEmptyOptions:!1,optionsCache:p?r(r({},l.optionsCache),{},S({},s,p)):l.optionsCache}}))})})}return s},t.state={defaultOptions:Array.isArray(n.defaultOptions)?n.defaultOptions:void 0,inputValue:typeof n.inputValue!="undefined"?n.inputValue:"",isLoading:n.defaultOptions===!0,loadedOptions:[],passEmptyOptions:!1,optionsCache:{},prevDefaultOptions:void 0,prevCacheOptions:void 0},t}return k(u,[{key:"componentDidMount",value:function(){var t=this;this.mounted=!0;var e=this.props.defaultOptions,o=this.state.inputValue;e===!0&&this.loadOptions(o,function(a){if(!!t.mounted){var i=!!t.lastRequest;t.setState({defaultOptions:a||[],isLoading:i})}})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"loadOptions",value:function(t,e){var o=this.props.loadOptions;if(!o)return e();var a=o(t,e);a&&typeof a.then=="function"&&a.then(e,function(){return e()})}},{key:"render",value:function(){var t=this,e=this.props;e.loadOptions;var o=e.isLoading,a=_(e,["loadOptions","isLoading"]),i=this.state,d=i.defaultOptions,s=i.inputValue,f=i.isLoading,p=i.loadedInputValue,l=i.loadedOptions,y=i.passEmptyOptions,g=y?[]:s&&p?l:d||[];return P(O,{...a,ref:function(C){t.select=C},options:g,isLoading:f||o,onInputChange:this.handleInputChange})}}],[{key:"getDerivedStateFromProps",value:function(t,e){var o=t.cacheOptions!==e.prevCacheOptions?{prevCacheOptions:t.cacheOptions,optionsCache:{}}:{},a=t.defaultOptions!==e.prevDefaultOptions?{prevDefaultOptions:t.defaultOptions,defaultOptions:Array.isArray(t.defaultOptions)?t.defaultOptions:void 0}:{};return r(r({},o),a)}}]),u}(R),c.defaultProps=q,h},w=V(L),b=j(w),G=b;export{G as A};
//# sourceMappingURL=react-select.esm.28f0ee2f.js.map
