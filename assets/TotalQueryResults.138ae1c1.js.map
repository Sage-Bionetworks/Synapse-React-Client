{"version":3,"file":"TotalQueryResults.138ae1c1.js","sources":["../../src/lib/containers/QueryContext.tsx","../../src/lib/assets/skeletons/SkeletonInlineBlock.tsx","../../src/lib/utils/functions/getDataFromFromStorage.ts","../../src/lib/utils/synapseTypes/Table/QueryFilter.ts","../../src/lib/containers/QueryVisualizationWrapper.tsx","../../src/lib/utils/functions/deepLinkingUtils.ts","../../src/lib/containers/QueryWrapper.tsx","../../src/lib/containers/widgets/facet-nav/SelectionCriteriaPill.tsx","../../src/lib/containers/widgets/query-filter/FacetFilterHeader.tsx","../../src/lib/containers/widgets/query-filter/EnumFacetFilter.tsx","../../src/lib/containers/widgets/Range.tsx","../../src/lib/containers/widgets/query-filter/RangeFacetFilter.tsx","../../src/lib/containers/widgets/query-filter/QueryFilter.tsx","../../src/lib/containers/TotalQueryResults.tsx"],"sourcesContent":["import * as React from 'react'\nimport { createContext, useContext } from 'react'\nimport { SynapseClientError } from '../utils/SynapseClientError'\nimport {\n  AsynchronousJobStatus,\n  QueryBundleRequest,\n  QueryResultBundle,\n  Table,\n} from '../utils/synapseTypes'\n\nexport const QUERY_FILTERS_EXPANDED_CSS: string = 'isShowingFacetFilters'\nexport const QUERY_FILTERS_COLLAPSED_CSS: string = 'isHidingFacetFilters'\n\n/*\n  For details page: to lock a facet name (e.g. study, grant) so that the facet name\n  and its all possible values will not appear on the details page. The facet name is\n  given by the url's search param. The type is defined here so that other child components\n  in SRC won't generate type errors.\n */\nexport type LockedFacet = {\n  facet?: string\n  value?: string\n}\n\nexport type QueryContextType = {\n  /** The entity being queried. Will be undefined while initially fetching */\n  entity: Table | undefined\n  /** The query results, which will be undefined while initially fetching a new bundle, but will not be unloaded when fetching new pages */\n  data: QueryResultBundle | undefined\n  /** Returns a deep clone of the current query bundle request */\n  getLastQueryRequest: () => QueryBundleRequest\n  /** Returns a deep clone of the initial query bundle request */\n  getInitQueryRequest: () => QueryBundleRequest\n  /** Updates the current query with the passed request */\n  executeQueryRequest: (param: QueryBundleRequest) => void\n  /** Returns true when loading a brand new query result bundle. Will not be true when just loading the next page of query results. */\n  isLoadingNewBundle: boolean\n  /** The error returned by the query request, if one is encountered */\n  error: SynapseClientError | null\n  /** The status of the asynchronous job. */\n  asyncJobStatus?: AsynchronousJobStatus<QueryBundleRequest, QueryResultBundle>\n  /** Whether or not facets are available to be filtered upon based on the current data */\n  isFacetsAvailable: boolean\n  /**\n   * A facet may be \"locked\" so that it is not modifiable by the user, for example when showing only data relevant to a particular facet value on a Details Page.\n   * The value of a locked facet will result in a client-side modification of the result bundle data.\n   */\n  lockedFacet?: LockedFacet\n}\n\nexport type PaginatedQueryContextType = QueryContextType & {\n  /** Navigates to a particular page, where the first page has value 1 */\n  goToPage: (pageNum: number) => void\n  /** The current page number, where page 1 is the first page. */\n  currentPage: number\n  /** Updates the page size */\n  setPageSize: (pageSize: number) => void\n  /** The current page size. */\n  pageSize: number\n}\n\nexport type InfiniteQueryContextType = QueryContextType & {\n  /** Returns true when loading a new page of query results */\n  isLoadingNewPage: boolean\n  /** Whether or not the query result bundle has a next page */\n  hasNextPage: boolean\n  /** Invoke this method to fetch and append the next page of rows to the data  */\n  appendNextPageToResults: () => Promise<void>\n  /** Invoke to fetch and update the data with the next page of query results */\n  goToNextPage: () => Promise<void>\n  /** Whether or not the query result bundle has a previous page */\n  hasPreviousPage: boolean\n  /** Invoke to fetch and update the data with the previous page of query results */\n  goToPreviousPage: () => Promise<void>\n}\n/**\n * This must be exported to use the context in class components.\n */\nexport const QueryContext = createContext<QueryContextType | undefined>(\n  undefined,\n)\n\nexport type QueryContextProviderProps = {\n  queryContext: QueryContextType\n}\n\n/**\n * Provides data related to a Synapse table query, and functions for iterating through pages of the data.\n */\nexport const QueryContextProvider: React.FC<QueryContextProviderProps> = ({\n  children,\n  queryContext,\n}) => {\n  return (\n    <QueryContext.Provider value={queryContext}>\n      {children}\n    </QueryContext.Provider>\n  )\n}\n\nexport function useQueryContext(): QueryContextType {\n  const context = useContext(QueryContext)\n  if (context === undefined) {\n    throw new Error('useQueryContext must be used within a QueryWrapper')\n  }\n  return context\n}\n\nexport function usePaginatedQueryContext(): PaginatedQueryContextType {\n  const context = useContext(QueryContext)\n  if (context === undefined) {\n    throw new Error(\n      'usePaginatedQueryContext must be used within a QueryWrapper',\n    )\n  }\n  // TODO: Identify more type-safe alternative to casting\n  return context as PaginatedQueryContextType\n}\n\nexport function useInfiniteQueryContext(): InfiniteQueryContextType {\n  const context = useContext(QueryContext)\n  if (context === undefined) {\n    throw new Error(\n      'useInfiniteQueryContext must be used within a QueryWrapper',\n    )\n  }\n  // TODO: Identify more type-safe alternative to casting\n  return context as InfiniteQueryContextType\n}\n\nexport const QueryContextConsumer = QueryContext.Consumer\n","import React from 'react'\nimport Skeleton, { SkeletonProps } from '@material-ui/lab/Skeleton'\n\n/**\n * Skeleton with a display value of `inline-block`. MUI applies `display: block` with high specificity, so it's easiest to just apply the style to the component.\n */\nexport const SkeletonInlineBlock: React.FC<SkeletonProps> = props => {\n  return (\n    <Skeleton\n      style={{ ...props.style, display: 'inline-block' }}\n      {...props}\n    ></Skeleton>\n  )\n}\n","import { EntityHeader, UserProfile } from '../synapseTypes'\nimport { SynapseConstants } from '..'\n\nexport const getStoredEntityHeaders = (): EntityHeader[] => {\n  try {\n    const lookUpEntityHeaders: EntityHeader[] = JSON.parse(\n      sessionStorage.getItem(SynapseConstants.ENTITY_HEADER_STORAGE_KEY) || '',\n    )\n    return lookUpEntityHeaders\n  } catch (e) {\n    return []\n  }\n}\n\nexport const getStoredUserProfiles = (): UserProfile[] => {\n  try {\n    const lookUpUserIds: UserProfile[] = JSON.parse(\n      sessionStorage.getItem(SynapseConstants.USER_PROFILE_STORAGE_KEY) || '',\n    )\n    return lookUpUserIds\n  } catch (e) {\n    return []\n  }\n}\n","import { isTypeViaConcreteTypeFactory } from '../../functions/TypeUtils'\n\nexport enum ColumnSingleValueFilterOperator {\n  LIKE = 'LIKE', // The LIKE operation. Use wildcard '%' in value sting for prefix/suffix matching.\n}\nexport enum ColumnMultiValueFunction {\n  HAS = 'HAS', // HAS function on multi-value columns, same as the predicate: 'columnName HAS ()'\n  HAS_LIKE = 'HAS_LIKE', // HAS_LIKE function on multi-value columns, same as the predicate: 'columnName HAS_LIKE ()'. Can be used for pattern matching using wildcard %.\n}\n\nconst COLUMN_SINGLE_VALUE_QUERY_FILTER_CONCRETE_TYPE_VALUE =\n  'org.sagebionetworks.repo.model.table.ColumnSingleValueQueryFilter'\ntype COLUMN_SINGLE_VALUE_QUERY_FILTER_CONCRETE_TYPE =\n  typeof COLUMN_SINGLE_VALUE_QUERY_FILTER_CONCRETE_TYPE_VALUE\n\n// A filter using a single value against a column. Values within the values list have an OR relationship\nexport interface ColumnSingleValueQueryFilter extends QueryFilter {\n  concreteType: COLUMN_SINGLE_VALUE_QUERY_FILTER_CONCRETE_TYPE\n  columnName: string // name of the column to filter\n  operator: ColumnSingleValueFilterOperator // Determines the filter operation to perform\n  values: string[] // Values to used with the filter.\n}\n\nconst COLUMN_MULTI_VALUE_FUNCTION_QUERY_FILTER_CONCRETE_TYPE_VALUE =\n  'org.sagebionetworks.repo.model.table.ColumnMultiValueFunctionQueryFilter'\ntype COLUMN_MULTI_VALUE_FUNCTION_QUERY_FILTER_CONCRETE_TYPE =\n  typeof COLUMN_MULTI_VALUE_FUNCTION_QUERY_FILTER_CONCRETE_TYPE_VALUE\n\n// A filter that applies multi-value columns functions.\nexport interface ColumnMultiValueFunctionQueryFilter extends QueryFilter {\n  concreteType: COLUMN_MULTI_VALUE_FUNCTION_QUERY_FILTER_CONCRETE_TYPE\n  columnName: string // name of the column to filter\n  function: ColumnMultiValueFunction // Determines the filter operation to perform\n  values: string[] // Values to used with the filter.\n}\n\n// https://docs.synapse.org/rest/org/sagebionetworks/repo/model/table/TextMatchesQueryFilter.html\nconst TEXT_MATCHES_QUERY_FILTER_CONCRETE_TYPE_VALUE =\n  'org.sagebionetworks.repo.model.table.TextMatchesQueryFilter'\ntype TEXT_MATCHES_QUERY_FILTER_CONCRETE_TYPE =\n  typeof TEXT_MATCHES_QUERY_FILTER_CONCRETE_TYPE_VALUE\nexport interface TextMatchesQueryFilter extends QueryFilter {\n  concreteType: TEXT_MATCHES_QUERY_FILTER_CONCRETE_TYPE\n  searchExpression: string\n}\n\nexport interface QueryFilter {\n  concreteType:\n    | TEXT_MATCHES_QUERY_FILTER_CONCRETE_TYPE\n    | COLUMN_SINGLE_VALUE_QUERY_FILTER_CONCRETE_TYPE\n    | COLUMN_MULTI_VALUE_FUNCTION_QUERY_FILTER_CONCRETE_TYPE\n}\n\nexport const isTextMatchesQueryFilter =\n  isTypeViaConcreteTypeFactory<TextMatchesQueryFilter>(\n    TEXT_MATCHES_QUERY_FILTER_CONCRETE_TYPE_VALUE,\n  )\n\nexport const isColumnSingleValueQueryFilter =\n  isTypeViaConcreteTypeFactory<ColumnSingleValueQueryFilter>(\n    COLUMN_SINGLE_VALUE_QUERY_FILTER_CONCRETE_TYPE_VALUE,\n  )\n\nexport const isColumnMultiValueFunctionQueryFilter =\n  isTypeViaConcreteTypeFactory<ColumnMultiValueFunctionQueryFilter>(\n    COLUMN_MULTI_VALUE_FUNCTION_QUERY_FILTER_CONCRETE_TYPE_VALUE,\n  )\n","import React, { createContext, useContext, useEffect, useState } from 'react'\nimport { useDeepCompareMemoize } from 'use-deep-compare-effect'\nimport { useQueryContext } from './QueryContext'\n\nexport type QueryVisualizationContextType = {\n  topLevelControlsState: TopLevelControlsState\n  setTopLevelControlsState: React.Dispatch<\n    React.SetStateAction<TopLevelControlsState>\n  >\n  columnsToShowInTable: string[]\n  setColumnsToShowInTable: (newState: string[]) => void\n  selectedRowIndices: number[]\n  setSelectedRowIndices: (newState: number[]) => void\n  // General UI related:\n  facetAliases?: Record<string, string>\n  rgbIndex?: number\n  unitDescription?: string\n  /** Whether to show when the table or view was last updated. */\n  showLastUpdatedOn?: boolean\n}\n\n/**\n * This must be exported to use the context in class components.\n */\nexport const QueryVisualizationContext = createContext<\n  QueryVisualizationContextType | undefined\n>(undefined)\n\nexport type QueryVisualizationContextProviderProps = {\n  queryVisualizationContext: QueryVisualizationContextType\n}\n\n/**\n * Provides fields and functions related to visualizing a Synapse table query. For actual query data, see QueryContextProvider.\n */\nexport const QueryVisualizationContextProvider: React.FunctionComponent<\n  QueryVisualizationContextProviderProps\n> = ({ children, queryVisualizationContext }) => {\n  return (\n    <QueryVisualizationContext.Provider value={queryVisualizationContext}>\n      {children}\n    </QueryVisualizationContext.Provider>\n  )\n}\n\nexport function useQueryVisualizationContext(): QueryVisualizationContextType {\n  const context = useContext(QueryVisualizationContext)\n  if (context === undefined) {\n    throw new Error(\n      'useQueryVisualizationContext must be used within a QueryWrapper',\n    )\n  }\n  return context\n}\n\nexport const QueryVisualizationContextConsumer =\n  QueryVisualizationContext.Consumer\n\nexport type QueryVisualizationWrapperProps = {\n  children: React.ReactNode | React.ReactNode[]\n  rgbIndex?: number\n  unitDescription?: string\n  facetAliases?: Record<string, string>\n  visibleColumnCount?: number\n  hiddenColumns?: string[]\n  defaultShowFacetVisualization?: boolean\n  defaultShowSearchBar?: boolean\n  showLastUpdatedOn?: boolean\n}\n\nexport type TopLevelControlsState = {\n  showFacetVisualization: boolean\n  showFacetFilter?: boolean\n  showColumnFilter: boolean\n  showSearchBar: boolean\n  showDownloadConfirmation: boolean\n  showColumnSelectDropdown: boolean\n  showSqlEditor: boolean\n}\n\n/**\n * QueryVisualizationWrapper manages UI state for components that query tables in Synapse. That state can be accessed\n * or updated using QueryVisualizationContext. A QueryVisualizationWrapper must be used within a QueryWrapper.\n */\nexport function QueryVisualizationWrapper(\n  props: QueryVisualizationWrapperProps,\n) {\n  const { data, getLastQueryRequest, isFacetsAvailable, isLoadingNewBundle } =\n    useQueryContext()\n\n  const [topLevelControlsState, setTopLevelControlsState] =\n    useState<TopLevelControlsState>({\n      showColumnFilter: true,\n      showFacetFilter: true,\n      showFacetVisualization: props.defaultShowFacetVisualization ?? true,\n      showSearchBar: props.defaultShowSearchBar ?? false,\n      showDownloadConfirmation: false,\n      showColumnSelectDropdown: false,\n      showSqlEditor: false,\n    })\n\n  useEffect(() => {\n    if (!isFacetsAvailable) {\n      setTopLevelControlsState(state => ({\n        ...state,\n        showFacetFilter: false,\n        showFacetVisualization: false,\n      }))\n    }\n  }, [isFacetsAvailable])\n\n  useEffect(() => {\n    if (isLoadingNewBundle) {\n      setSelectedRowIndices([])\n    }\n  }, [isLoadingNewBundle])\n\n  const [visibleColumns, setVisibleColumns] = useState<string[]>([])\n  const [selectedRowIndices, setSelectedRowIndices] = useState<number[]>([])\n\n  const lastQueryRequest = getLastQueryRequest()\n\n  // We deep-compare-memoize the selectColumns so we don't reset visible columns when the reference changes, but not the contents (e.g. on page change)\n  const selectColumns = useDeepCompareMemoize(data?.selectColumns)\n\n  useEffect(() => {\n    // SWC-6030: If sql changes, reset what columns are visible\n    setVisibleColumns(\n      selectColumns\n        ?.slice(0, props.visibleColumnCount ?? Infinity)\n        .map(el => el.name) ?? [],\n    )\n  }, [selectColumns, lastQueryRequest.query.sql, props.visibleColumnCount])\n\n  const context: QueryVisualizationContextType = {\n    topLevelControlsState,\n    setTopLevelControlsState,\n    columnsToShowInTable: visibleColumns,\n    setColumnsToShowInTable: setVisibleColumns,\n    selectedRowIndices,\n    setSelectedRowIndices,\n\n    facetAliases: props.facetAliases,\n    rgbIndex: props.rgbIndex,\n    unitDescription: props.unitDescription,\n    showLastUpdatedOn: props.showLastUpdatedOn,\n  }\n  /**\n   * Render the children without any formatting\n   */\n  const { children } = props\n  return (\n    <QueryVisualizationContextProvider queryVisualizationContext={context}>\n      {children}\n    </QueryVisualizationContextProvider>\n  )\n}\n","import { QueryBundleRequest } from '../synapseTypes/Table/QueryBundleRequest'\nimport { Query } from '../synapseTypes'\nimport { SynapseConstants } from '..'\nimport { parseEntityIdFromSqlStatement } from './sqlFunctions'\n\n//id consists of a component class/function name and it's index\nfunction getComponentSearchHashId(\n  componentName: string,\n  componentIndex: number,\n): string {\n  return `${componentName}${componentIndex}`\n}\n\n//returns updated search string with the component's info\nfunction patchSearchString(\n  componentSearchHashId: string,\n  stringifiedQuery: string,\n): string | undefined {\n  const searchString = window.location.search\n\n  const searchFragment = `${componentSearchHashId}=${stringifiedQuery}`\n  if (!searchString) {\n    return searchFragment\n  }\n\n  if (!searchString.includes(`${componentSearchHashId}=`)) {\n    //substr(1) because we don't want '?' character\n    return `${searchString.substr(1)}&${searchFragment}`\n  }\n  const searchHashes = window.location.search\n    .slice(searchString.indexOf('?') + 1)\n    .split('&')\n\n  const searchHashesUpdated = searchHashes\n    .map(item => {\n      const split = item.split('=')\n      if (split[0] === componentSearchHashId) {\n        return `${searchFragment}`\n      } else return item\n    })\n    .join('&')\n  return searchHashesUpdated\n}\n\n//gets a value for the search param for the component from the url\nexport function getSearchParamValueFromUrl(\n  componentName: string,\n  componentIndex: number,\n): string | undefined {\n  if (!window.location.search) {\n    return undefined\n  }\n  const componentSearchHashId = getComponentSearchHashId(\n    componentName,\n    componentIndex,\n  )\n  const hashes = window.location.search\n    .slice(window.location.search.indexOf('?') + 1)\n    .split('&')\n  const getSearchParamValue = hashes\n    .filter(item => {\n      const hash = item.split('=')\n      return hash[0] === componentSearchHashId\n    })\n    .map(item => item.split('=')[1])[0]\n  return getSearchParamValue\n    ? decodeURIComponent(getSearchParamValue)\n    : undefined\n}\n\n//updates the url with the components new search params\nexport function updateUrlWithNewSearchParam(\n  componentName: string,\n  componentIndex: number | undefined,\n  stringifiedQuery: string,\n) {\n  const componentSearchHashId =\n    componentIndex !== undefined\n      ? getComponentSearchHashId(componentName, componentIndex)\n      : componentName\n  const searchString = patchSearchString(\n    componentSearchHashId,\n    stringifiedQuery,\n  )\n  const location = window.location\n  const newURL = `${location.protocol}//${location.hostname}${\n    location.port ? ':' + location.port : ''\n  }${location.pathname}?${searchString}`\n\n  window.history.replaceState('object or string', 'Title', newURL)\n}\n\nexport function getQueryRequestFromLink(\n  componentName: string,\n  componentIndex: number,\n): QueryBundleRequest | undefined {\n  const searchParamValue = getSearchParamValueFromUrl(\n    componentName,\n    componentIndex,\n  )\n\n  let initQueryRequest: QueryBundleRequest | undefined = undefined\n  if (searchParamValue) {\n    const query = JSON.parse(searchParamValue) as Query\n    if (query.sql) {\n      initQueryRequest = {\n        concreteType: 'org.sagebionetworks.repo.model.table.QueryBundleRequest',\n        partMask:\n          SynapseConstants.BUNDLE_MASK_QUERY_COLUMN_MODELS |\n          SynapseConstants.BUNDLE_MASK_QUERY_FACETS |\n          SynapseConstants.BUNDLE_MASK_QUERY_SELECT_COLUMNS |\n          SynapseConstants.BUNDLE_MASK_QUERY_RESULTS,\n        entityId: parseEntityIdFromSqlStatement(query.sql),\n        query,\n      }\n    }\n  }\n  return initQueryRequest\n}\n","import { cloneDeep } from 'lodash-es'\nimport * as React from 'react'\nimport { useEffect, useMemo, useState } from 'react'\nimport useDeepCompareEffect, {\n  useDeepCompareEffectNoCheck,\n} from 'use-deep-compare-effect'\nimport * as DeepLinkingUtils from '../utils/functions/deepLinkingUtils'\nimport { isFacetAvailable } from '../utils/functions/queryUtils'\nimport { parseEntityIdAndVersionFromSqlStatement } from '../utils/functions/sqlFunctions'\nimport { useGetEntity } from '../utils/hooks/SynapseAPI/entity/useEntity'\nimport { useGetQueryResultBundleWithAsyncStatus } from '../utils/hooks/SynapseAPI/entity/useGetQueryResultBundle'\nimport { DEFAULT_PAGE_SIZE } from '../utils/SynapseConstants'\nimport {\n  AsynchronousJobStatus,\n  QueryBundleRequest,\n  QueryResultBundle,\n  Table,\n} from '../utils/synapseTypes'\nimport {\n  LockedFacet,\n  PaginatedQueryContextType,\n  QueryContextProvider,\n} from './QueryContext'\n\nexport const QUERY_FILTERS_EXPANDED_CSS: string = 'isShowingFacetFilters'\nexport const QUERY_FILTERS_COLLAPSED_CSS: string = 'isHidingFacetFilters'\n\nexport type QueryWrapperProps = {\n  children: React.ReactNode | React.ReactNode[]\n  initQueryRequest: QueryBundleRequest\n  componentIndex?: number //used for deep linking\n  shouldDeepLink?: boolean\n  onQueryChange?: (newQueryJson: string) => void\n  onQueryResultBundleChange?: (newQueryResultBundleJson: string) => void\n  lockedFacet?: LockedFacet\n}\n\nexport type SearchQuery = {\n  columnName: string\n  searchText: string\n}\n\n/**\n * Component that manages the state of a Synapse table query. Data can be accessed via QueryContext using\n * either `useQueryContext` or `QueryContextConsumer`.\n */\nexport function QueryWrapper(props: QueryWrapperProps) {\n  const { initQueryRequest, onQueryChange, onQueryResultBundleChange } = props\n  const [lastQueryRequest, setLastQueryRequest] =\n    useState<QueryBundleRequest>(initQueryRequest)\n  const [currentAsyncStatus, setCurrentAsyncStatus] = useState<\n    AsynchronousJobStatus<QueryBundleRequest, QueryResultBundle> | undefined\n  >(undefined)\n  const {\n    data: asyncJobStatus,\n    isLoading: queryIsLoading,\n    error,\n    isPreviousData: newQueryIsFetching,\n    remove,\n  } = useGetQueryResultBundleWithAsyncStatus(\n    lastQueryRequest,\n    {\n      // We use `keepPreviousData` because we don't want to clear out the current data when the query is modified via the UI\n      keepPreviousData: true,\n    },\n    setCurrentAsyncStatus,\n  )\n\n  const data = asyncJobStatus?.responseBody\n\n  // Indicate if we're fetching data for the first time (queryIsLoading) or if we're fetching data for a brand new query (newQueryIsFetching)\n  const isLoadingNewBundle = queryIsLoading || newQueryIsFetching\n\n  const { entityId, versionNumber } = parseEntityIdAndVersionFromSqlStatement(\n    lastQueryRequest.query.sql,\n  )!\n\n  const { data: entity } = useGetEntity<Table>(entityId, versionNumber)\n\n  const pageSize = lastQueryRequest.query.limit ?? DEFAULT_PAGE_SIZE\n  const currentPage = Math.ceil(\n    ((lastQueryRequest.query.offset ?? 0) + Number(pageSize)) / pageSize,\n  )\n\n  const setPageSize = (pageSize: number) => {\n    const lastQueryRequestDeepClone = getLastQueryRequest()\n    lastQueryRequestDeepClone.query.limit = pageSize\n    executeQueryRequest(lastQueryRequestDeepClone)\n  }\n\n  const goToPage = (pageNum: number) => {\n    const lastQueryRequestDeepClone = getLastQueryRequest()\n    lastQueryRequestDeepClone.query.offset = (pageNum - 1) * pageSize\n    executeQueryRequest(lastQueryRequestDeepClone)\n  }\n\n  useDeepCompareEffect(() => {\n    if (onQueryChange) {\n      onQueryChange(JSON.stringify(lastQueryRequest.query))\n    }\n  }, [onQueryChange, lastQueryRequest.query])\n\n  // data is sometimes undefined, which useDeepCompareEffect doesn't like\n  useDeepCompareEffectNoCheck(() => {\n    if (data && onQueryResultBundleChange) {\n      onQueryResultBundleChange(JSON.stringify(data))\n    }\n  }, [data, onQueryResultBundleChange])\n\n  const componentIndex = props.componentIndex ?? 0\n\n  const isFacetsAvailable = data\n    ? isFacetAvailable(data.facets, data.selectColumns)\n    : true\n\n  /**\n   * Inspect the URL to see if we have a particular query request that we must show.\n   */\n  useEffect(() => {\n    const query = DeepLinkingUtils.getQueryRequestFromLink(\n      'QueryWrapper',\n      componentIndex,\n    )\n    if (query) {\n      setLastQueryRequest(query)\n    }\n  }, [])\n\n  /**\n   * Pass down a deep clone (so no side affects on the child's part) of the\n   * last query request made\n   *\n   * @returns\n   * @memberof QueryWrapper\n   */\n  const getLastQueryRequest = React.useCallback(() => {\n    return cloneDeep(lastQueryRequest)\n  }, [lastQueryRequest])\n\n  /**\n   * Pass down a deep clone (so no side affects on the child's part) of the\n   * first query request made\n   *\n   * @returns\n   * @memberof QueryWrapper\n   */\n  function getInitQueryRequest(): QueryBundleRequest {\n    return cloneDeep(props.initQueryRequest)\n  }\n\n  /**\n   * Execute the given query request, updating all of the data in the QueryContext to match the new query\n   * @param {*} queryRequest Query request as specified by\n   *                         https://rest-docs.synapse.org/rest/org/sagebionetworks/repo/model/table/Query.html\n   */\n  function executeQueryRequest(queryRequest: QueryBundleRequest) {\n    const clonedQueryRequest = cloneDeep(queryRequest)\n\n    setLastQueryRequest(clonedQueryRequest)\n\n    if (clonedQueryRequest.query) {\n      const clonedQueryRequestJson = JSON.stringify(clonedQueryRequest.query)\n      const stringifiedQuery = encodeURIComponent(clonedQueryRequestJson)\n      if (props.shouldDeepLink) {\n        if (props.onQueryChange) {\n          props.onQueryChange(clonedQueryRequestJson)\n        } else {\n          DeepLinkingUtils.updateUrlWithNewSearchParam(\n            'QueryWrapper',\n            componentIndex,\n            stringifiedQuery,\n          )\n        }\n      }\n    }\n    /**\n     * TODO: We remove the cached data because it can interfere with user controls, such as the QueryFilter.\n     * For example, if you filter on a facet with value [\"a\"], then value [\"a\", \"b\"], then value [\"a\"] again,\n     * we'll have a cache hit on the last query, so we won't get a loading state, but the controls haven't been updated\n     * to handle cache hits. Forcing a cache miss here fixes this, but ideally the controls should handle this case.\n     */\n    remove()\n    // end TODO\n  }\n\n  /**\n   * remove a particular facet name (e.g. study) and its all possible values based on the parameter specified in the url\n   * this is to remove the facet from the charts, search and filter.\n   * @return data: QueryResultBundle\n   */\n  const dataWithLockedFacetRemoved = useMemo(() => {\n    const lockedFacet = props.lockedFacet?.facet\n    if (lockedFacet && data) {\n      // for details page, return data without the \"locked\" facet\n      const dataCopy: QueryResultBundle = cloneDeep(data)\n      const facets = dataCopy.facets?.filter(\n        item => item.columnName.toLowerCase() !== lockedFacet.toLowerCase(),\n      )\n      dataCopy.facets = facets\n      return dataCopy\n    } else {\n      // for other pages, just return the data\n      return data\n    }\n  }, [data, props.lockedFacet?.facet])\n\n  const context: PaginatedQueryContextType = {\n    data: dataWithLockedFacetRemoved,\n    currentPage,\n    pageSize,\n    setPageSize,\n    isLoadingNewBundle: isLoadingNewBundle,\n    getLastQueryRequest,\n    getInitQueryRequest,\n    error: error,\n    entity,\n    executeQueryRequest,\n    isFacetsAvailable,\n    asyncJobStatus: currentAsyncStatus,\n    goToPage,\n  }\n  /**\n   * Render the children without any formatting\n   */\n  const { children } = props\n  const loadingCursorClass = isLoadingNewBundle ? 'SRC-logo-cursor' : ''\n  return (\n    <QueryContextProvider queryContext={context}>\n      <div\n        className={`SRC-wrapper ${loadingCursorClass} ${\n          isFacetsAvailable ? 'has-facets' : ''\n        }`}\n      >\n        {children}\n      </div>\n    </QueryContextProvider>\n  )\n}\n","import { Close } from '@material-ui/icons'\nimport React from 'react'\nimport { FunctionComponent } from 'react'\nimport { SynapseConstants } from '../../../utils'\nimport { unCamelCase } from '../../../utils/functions/unCamelCase'\nimport {\n  FacetColumnResult,\n  FacetColumnResultRange,\n  FacetColumnResultValueCount,\n} from '../../../utils/synapseTypes'\nimport { ElementWithTooltip } from '../ElementWithTooltip'\n\nexport type FacetWithSelection = {\n  facet: FacetColumnResult\n  selectedValue?: FacetColumnResultValueCount\n  displayValue?: string\n}\n\nexport type SelectionCriteriaPillProps = (\n  | { readonly facetWithSelection: FacetWithSelection }\n  | {\n      filter: {\n        columnName?: string\n        value: string\n      }\n    }\n) & {\n  onRemove: () => void\n}\n\nconst SelectionCriteriaPill: FunctionComponent<\n  SelectionCriteriaPillProps\n> = props => {\n  let innerText,\n    tooltipText: string | null = ''\n  if ('facetWithSelection' in props) {\n    const { facetWithSelection } = props\n    if (facetWithSelection.facet.facetType === 'enumeration') {\n      innerText =\n        facetWithSelection.displayValue === SynapseConstants.VALUE_NOT_SET\n          ? SynapseConstants.FRIENDLY_VALUE_NOT_SET\n          : facetWithSelection.displayValue\n    } else {\n      innerText = `${(facetWithSelection.facet as FacetColumnResultRange)\n        .selectedMin!} \n        - ${(facetWithSelection.facet as FacetColumnResultRange).selectedMax!}`\n    }\n    tooltipText = `${unCamelCase(\n      facetWithSelection.facet.columnName!,\n    )}: ${innerText}`\n  } else if ('filter' in props) {\n    const { filter } = props\n    let filterValue = filter.value\n    if (filterValue?.startsWith('%') && filterValue?.endsWith('%')) {\n      // strip '%' wildcard character when using a LIKE condition\n      filterValue = filterValue.substring(1, filterValue.length - 1)\n    }\n\n    // For full-text search, set the pill text and tooltip text\n    innerText = filterValue\n    tooltipText = `Text matches: \"${filterValue}\"`\n\n    // If searching in a specific column, use different inner/tooltip text\n    if (filter.columnName) {\n      innerText = `\"${filterValue}\" in ${unCamelCase(filter?.columnName)}`\n      tooltipText = `${unCamelCase(filter?.columnName)}: ${filterValue}`\n    }\n  } else {\n    console.warn(\n      'Expected either facetWithSelection or filter in SelectionCriteriaPill but got neither',\n    )\n  }\n  const key = encodeURIComponent(tooltipText)\n  return (\n    <ElementWithTooltip\n      idForToolTip={`selectionCriteria_${key}`}\n      tooltipText={tooltipText}\n      callbackFn={() => {}}\n    >\n      <label\n        className=\"SelectionCriteriaPill\"\n        key={`SelectionCriteriaPill ${key}`}\n      >\n        <span>{innerText}</span>\n        <button\n          onClick={() => props.onRemove()}\n          className=\"SelectionCriteriaPill__btnRemove\"\n          title=\"deselect\"\n        >\n          <Close />\n        </button>\n      </label>\n    </ElementWithTooltip>\n  )\n}\n\nexport default SelectionCriteriaPill\n","import * as React from 'react'\nimport { unCamelCase } from '../../../utils/functions/unCamelCase'\nimport IconPlus from '../../../assets/icons/IconPlus'\nimport IconMinus from '../../../assets/icons/IconMinus'\n\nexport type FacetFilterHeaderProps = {\n  label: string\n  isCollapsed: boolean\n  onClick: Function\n  facetAliases: {} | undefined\n}\nexport const FacetFilterHeader: React.FunctionComponent<\n  FacetFilterHeaderProps\n> = ({ label, isCollapsed, onClick, facetAliases }: FacetFilterHeaderProps) => {\n  return (\n    <div className=\"FacetFilterHeader\">\n      <label className=\"FacetFilterHeader__label\">\n        {unCamelCase(label, facetAliases)}\n      </label>\n      <button\n        className=\"FacetFilterHeader__collapseToggleBtn\"\n        onClick={() => onClick(!isCollapsed)}\n      >\n        {isCollapsed ? (\n          <IconPlus className=\"icon-plus\" title=\"Expand Menu\" />\n        ) : (\n          <IconMinus className=\"icon-minus\" title=\"Collapse Menu\" />\n        )}\n      </button>\n    </div>\n  )\n}\n","import { Collapse } from '@material-ui/core'\nimport React, { useState } from 'react'\nimport { Dropdown } from 'react-bootstrap'\nimport useDeepCompareEffect from 'use-deep-compare-effect'\nimport { ElementWithTooltip } from '../../../containers/widgets/ElementWithTooltip'\nimport { SynapseConstants } from '../../../utils'\nimport useGetInfoFromIds from '../../../utils/hooks/useGetInfoFromIds'\nimport { ColumnType, UserGroupHeader } from '../../../utils/synapseTypes'\nimport { EntityHeader } from '../../../utils/synapseTypes/EntityHeader'\nimport {\n  FacetColumnResultValueCount,\n  SelectColumn,\n} from '../../../utils/synapseTypes/Table'\nimport IconSvg from '../../IconSvg'\nimport { Checkbox } from '../Checkbox'\nimport { FacetFilterHeader } from './FacetFilterHeader'\n\nexport type EnumFacetFilterProps = {\n  facetValues: FacetColumnResultValueCount[]\n  columnModel: SelectColumn\n  onChange: (facetNamesMap: Record<string, string>) => void\n  onClear: () => void\n  facetAliases?: Record<string, string>\n  containerAs?: 'Collapsible' | 'Dropdown'\n  dropdownType?: 'Icon' | 'SelectBox'\n  collapsed?: boolean\n}\n\nfunction valueToId(value: string): string {\n  return value.replace(/\\s/g, '').toLowerCase()\n}\n\nfunction valueToLabel(\n  facet: FacetColumnResultValueCount,\n  profiles: UserGroupHeader[] = [],\n  entityHeaders: EntityHeader[] = [],\n): string {\n  const { value } = facet\n  let displayValue = value\n  if (value === SynapseConstants.VALUE_NOT_SET) {\n    displayValue = SynapseConstants.FRIENDLY_VALUE_NOT_SET\n  }\n  const profile = profiles.find(profile => profile.ownerId === value)\n  if (profile) {\n    displayValue = profile ? profile.userName : `unknown (${value})`\n  }\n\n  const eh = entityHeaders.find(eh => eh.id === value)\n  if (eh) {\n    displayValue = eh ? eh.name : `unknown (${value})`\n  }\n\n  return `${displayValue}`\n}\n\nfunction formatFacetValuesForDisplay(\n  facetValues: FacetColumnResultValueCount[],\n  isShowAll: boolean,\n  visibleItemsCount: number,\n) {\n  //sort facets by count\n  const facets = [...facetValues.sort((a, b) => b.count - a.count)]\n  if (isShowAll || facets.length <= visibleItemsCount) {\n    return facets\n  } else {\n    //if we are not hiding elected facets\n    if (facets.slice(visibleItemsCount).find(item => item.isSelected)) {\n      return facets\n    } else {\n      return facets.splice(0, visibleItemsCount)\n    }\n  }\n}\n\n/************* QUERY ENUM CONMPONENT  *************/\n\nexport const EnumFacetFilter: React.FunctionComponent<EnumFacetFilterProps> = ({\n  facetValues,\n  columnModel,\n  onClear,\n  onChange,\n  facetAliases,\n  containerAs = 'Collapsible',\n  dropdownType = 'Icon',\n  collapsed = false,\n}: EnumFacetFilterProps) => {\n  const [isShowAll, setIsShowAll] = useState<boolean>(false)\n  const [isCollapsed, setIsCollapsed] = useState<boolean>(collapsed)\n  const [isShowDropdown, setIsShowDropdown] = useState<boolean>(false)\n  const [showSearch, setShowSearch] = useState<boolean>(false)\n  const [searchTerm, setSearchText] = useState<string>('')\n  const [filteredSet, setFilteredSet] =\n    useState<FacetColumnResultValueCount[]>(facetValues)\n\n  useDeepCompareEffect(() => {\n    setFilteredSet(facetValues)\n  }, [facetValues])\n\n  const visibleItemsCount = 5\n  const selectionDelay = 1500 // in ms\n  const textInput: React.RefObject<HTMLInputElement> = React.createRef()\n  const selectedValuesMap = {}\n  let timer: ReturnType<typeof setTimeout>\n\n  const allIsSelected = facetValues.filter(item => item.isSelected).length === 0\n\n  const userIds =\n    columnModel?.columnType === ColumnType.USERID ||\n    columnModel?.columnType === ColumnType.USERID_LIST\n      ? facetValues.map(facet => facet.value)\n      : []\n  const userGroupHeaders = useGetInfoFromIds<UserGroupHeader>({\n    ids: userIds,\n    type: 'USER_PROFILE',\n  })\n\n  const entityIds =\n    columnModel?.columnType === ColumnType.ENTITYID ||\n    columnModel?.columnType === ColumnType.ENTITYID_LIST\n      ? facetValues.map(facet => facet.value)\n      : []\n  const entityHeaders = useGetInfoFromIds<EntityHeader>({\n    ids: entityIds,\n    type: 'ENTITY_HEADER',\n  })\n\n  const handleTextInputFilterEvent = (\n    e: React.ChangeEvent<HTMLInputElement>,\n  ) => {\n    const inputValue: string = e.target.value\n    setSearchText(inputValue)\n    setIsShowAll(true) // While in filter search mode, display all filtered values\n\n    if (!inputValue) {\n      // if input field is empty, display all facet values\n      facetValues.forEach(obj => {\n        obj.isSelected = false\n      })\n      setFilteredSet(facetValues)\n    } else {\n      // display only facet values that contain text from the text input field\n      const filtered = facetValues.filter(obj => {\n        const label = valueToLabel(obj, userGroupHeaders, entityHeaders)\n        return label.toLowerCase().indexOf(inputValue.trim().toLowerCase()) > -1\n          ? obj\n          : null\n      })\n      setFilteredSet(filtered)\n    }\n  }\n\n  if (!columnModel) {\n    return <></>\n  }\n  const isDropdown = containerAs === 'Dropdown'\n  const content = (\n    <div className={isDropdown ? 'EnumFacetFilter__dropdown_menu' : ''}>\n      <div className=\"EnumFacetFilter__checkboxContainer--forAll\">\n        <div\n          className={\n            showSearch\n              ? 'EnumFacetFilter__search active'\n              : 'EnumFacetFilter__search'\n          }\n        >\n          <button // Close Search Button\n            className=\"EnumFacetFilter__closeSearch\"\n            onClick={() => {\n              setFilteredSet(facetValues)\n              setShowSearch(false)\n              setIsShowAll(false)\n            }}\n          >\n            <span className=\"EnumFacetFilter__previous\">\n              <IconSvg options={{ icon: 'arrowBack' }} />\n            </span>\n          </button>\n          {searchTerm.length > 0 && (\n            <button // Clear Search Filter Text Button\n              className=\"EnumFacetFilter__resetSearch\"\n              onClick={() => {\n                setSearchText('')\n                textInput.current?.focus()\n              }}\n            >\n              <span className=\"EnumFacetFilter__reset\">\n                <IconSvg options={{ icon: 'close' }} />\n              </span>\n            </button>\n          )}\n          <input // Search Filter Text\n            type=\"text\"\n            placeholder=\"Find values\"\n            value={searchTerm}\n            ref={textInput}\n            onChange={e => {\n              handleTextInputFilterEvent(e)\n            }}\n          />\n        </div>\n        {!showSearch && (\n          <div className=\"EnumFacetFilter__checkAll\">\n            <Checkbox\n              className=\"EnumFacetFilter__checkbox\"\n              onChange={() => {\n                onClear()\n              }}\n              key=\"select_all\"\n              checked={allIsSelected}\n              label=\"All\"\n              isSelectAll={true}\n            ></Checkbox>\n            <button\n              className=\"EnumFacetFilter__searchbtn\"\n              onClick={() => {\n                setSearchText('')\n                setShowSearch(true)\n                textInput.current?.focus()\n              }}\n            >\n              <span className=\"EnumFacetFilter__searchicon\">\n                <IconSvg options={{ icon: 'search' }} />\n              </span>\n            </button>\n          </div>\n        )}\n      </div>\n      <div>\n        {filteredSet.length > 0 &&\n          formatFacetValuesForDisplay(\n            filteredSet,\n            isShowAll || isDropdown,\n            visibleItemsCount,\n          ).map((facet, index: number) => (\n            <EnumFacetFilterOption\n              key={`checkLabel${index}`}\n              id={valueToId(facet.value)}\n              index={index}\n              label={valueToLabel(facet, userGroupHeaders, entityHeaders)}\n              count={facet.count}\n              isDropdown={isDropdown}\n              initialIsSelected={facet.isSelected}\n              onChange={(isChecked: boolean) => {\n                selectedValuesMap[facet.value] = isChecked\n                clearTimeout(timer)\n                timer = setTimeout(() => {\n                  onChange(selectedValuesMap)\n                  setIsShowDropdown(false)\n                }, selectionDelay)\n              }}\n            />\n          ))}\n        {!isDropdown && (\n          <>\n            {!isShowAll && filteredSet.length > visibleItemsCount && (\n              <button\n                className=\"EnumFacetFilter__showMoreFacetsBtn\"\n                onClick={() => setIsShowAll(true)}\n              >\n                <div className=\"EnumFacetFilter__checkboxContainer\">\n                  <div className=\"EnumFacetFilter__showMoreFacetsLabel\">\n                    Show all ({filteredSet.length})\n                  </div>\n                </div>\n              </button>\n            )}\n            {isShowAll && filteredSet.length > visibleItemsCount && (\n              <button\n                className=\"EnumFacetFilter__showMoreFacetsBtn\"\n                onClick={() => setIsShowAll(false)}\n              >\n                <div className=\"EnumFacetFilter__checkboxContainer\">\n                  <div className=\"EnumFacetFilter__showMoreFacetsLabel\">\n                    Show less\n                  </div>\n                </div>\n              </button>\n            )}\n          </>\n        )}\n        {filteredSet.length <= 0 && (\n          <div className=\"EnumFacetFilter__noMatch\">No match found</div>\n        )}\n      </div>\n    </div>\n  )\n\n  const onToggle = () => setIsShowDropdown(!isShowDropdown)\n\n  if (isDropdown) {\n    if (dropdownType === 'SelectBox') {\n      return (\n        <Dropdown\n          className={'EnumFacetFilter EnumFacetFilterSelect'}\n          show={isShowDropdown}\n          onToggle={onToggle}\n        >\n          <Dropdown.Toggle className=\"secondary-caret\" variant=\"gray-select\">\n            {allIsSelected && 'All'}\n            {!allIsSelected &&\n              facetValues.filter(item => item.isSelected).length === 1 &&\n              facetValues.filter(item => item.isSelected)[0].value}\n            {!allIsSelected &&\n              facetValues.filter(item => item.isSelected).length > 1 &&\n              'Multiple Values Selected'}\n          </Dropdown.Toggle>\n          <Dropdown.Menu>{content}</Dropdown.Menu>\n        </Dropdown>\n      )\n    } else {\n      return (\n        <Dropdown\n          className=\"EnumFacetFilter\"\n          show={isShowDropdown}\n          onToggle={onToggle}\n        >\n          <ElementWithTooltip\n            idForToolTip=\"facetFilterTooltip\"\n            tooltipText=\"Filter by specific facet\"\n            key=\"facetFilterTooltip\"\n            darkTheme={false}\n            icon={'filter'}\n          />\n          <Dropdown.Menu>{content}</Dropdown.Menu>\n        </Dropdown>\n      )\n    }\n  } else {\n    return (\n      <>\n        <FacetFilterHeader\n          facetAliases={facetAliases}\n          isCollapsed={isCollapsed}\n          label={columnModel.name}\n          onClick={(isCollapsed: boolean) => setIsCollapsed(isCollapsed)}\n        />\n        <Collapse className=\"EnumFacetFilter\" in={!isCollapsed}>\n          {content}\n        </Collapse>\n      </>\n    )\n  }\n}\n\ntype EnumFacetFilterOptionProps = {\n  readonly id: string\n  readonly index: number\n  readonly label: string\n  readonly count: number\n  readonly isDropdown: boolean\n  readonly initialIsSelected: boolean\n  readonly onChange: (selected: boolean) => void\n}\n\nfunction EnumFacetFilterOption({\n  id,\n  index,\n  label,\n  count,\n  isDropdown,\n  initialIsSelected,\n  onChange,\n}: EnumFacetFilterOptionProps) {\n  const [isSelected, setIsSelected] = useState(initialIsSelected)\n\n  React.useEffect(() => {\n    setIsSelected(initialIsSelected)\n  }, [initialIsSelected])\n\n  return (\n    <div\n      className=\"EnumFacetFilter__checkboxContainer\"\n      onClick={() => {\n        if (isDropdown) {\n          setIsSelected(!isSelected)\n          onChange(!isSelected)\n        }\n      }}\n    >\n      <Checkbox\n        className=\"EnumFacetFilter__checkbox\"\n        onClick={event => event.stopPropagation()}\n        onChange={newValue => {\n          setIsSelected(newValue)\n          onChange(newValue)\n        }}\n        key={`${id}-${index}`}\n        checked={isSelected}\n        label={label}\n      ></Checkbox>\n      {isDropdown && <span className=\"EnumFacetFilter__count\">({count})</span>}\n      {!isDropdown && <div className=\"EnumFacetFilter__count\">{count}</div>}\n    </div>\n  )\n}\n","import React, { useState } from 'react'\nimport moment from 'moment'\n\ntype ControlType = 'number' | 'date'\n\nexport type RangeValues<T = string | number> = {\n  min?: T\n  max?: T\n}\n\nexport type RangeProps = {\n  type: ControlType\n  initialValues?: RangeValues\n  className?: string\n  errorText?: string\n  onChange: (newValues: RangeValues) => void\n}\n\nexport const Range: React.FunctionComponent<RangeProps> = (\n  props: RangeProps,\n) => {\n  const errorText = 'Min value should be less then max value'\n  const [error, setError] = useState(false)\n  const [values, setValues] = useState(() =>\n    props.type === 'number' && props.initialValues\n      ? props.initialValues\n      : (props.initialValues && {\n          min: moment(props.initialValues.min).format('YYYY-MM-DD'),\n          max: moment(props.initialValues.max).format('YYYY-MM-DD'),\n        }) || {\n          min: undefined,\n          max: undefined,\n        },\n  )\n\n  const className = props.className ? `range ${props.className}` : `range`\n\n  const isValid = (\n    { min, max }: RangeValues,\n\n    type: ControlType = 'number',\n  ) => {\n    if (\n      min === null ||\n      min === undefined ||\n      max === null ||\n      max === undefined\n    ) {\n      setError(false)\n      return true\n    }\n\n    if (type === 'number') {\n      if (Number(min) > Number(max)) {\n        setError(true)\n        return false\n      }\n    } else if (Date.parse(min as string) > Date.parse(max as string)) {\n      setError(true)\n      return false\n    }\n    setError(false)\n    return true\n  }\n\n  const handleAppyChanges = (\n    values: RangeValues,\n    callBackFn: (newValues: RangeValues) => void,\n    type: ControlType = 'number',\n  ) => {\n    if (isValid(values, type)) {\n      callBackFn(values)\n    }\n  }\n\n  return (\n    <div className={className} style={{ display: 'flex', flexWrap: 'wrap' }}>\n      <div style={{ marginRight: '10px' }}>\n        <input\n          aria-label=\"min\"\n          key=\"range_min\"\n          type={props.type}\n          value={values.min}\n          onChange={({ target }: React.ChangeEvent<HTMLInputElement>) =>\n            setValues({ min: target.value, max: values.max })\n          }\n        />\n        <div>to</div>\n        <input\n          aria-label=\"max\"\n          key=\"range_max\"\n          type={props.type}\n          value={values.max}\n          onChange={({ target }: React.ChangeEvent<HTMLInputElement>) =>\n            setValues({ min: values.min, max: target.value })\n          }\n        />\n      </div>\n      <button\n        className=\"btn btn-link SRC-noPadding\"\n        onClick={() => handleAppyChanges(values, props.onChange, props.type)}\n      >\n        Apply\n      </button>\n      {error && (\n        <div className=\"SRC-danger-color\">{props.errorText || errorText}</div>\n      )}\n    </div>\n  )\n}\n","import { Collapse } from '@material-ui/core'\nimport * as React from 'react'\nimport { useState } from 'react'\nimport {\n  FRIENDLY_VALUE_NOT_SET,\n  VALUE_NOT_SET,\n} from '../../../utils/SynapseConstants'\nimport { SelectColumn } from '../../../utils/synapseTypes'\nimport { FacetColumnResultRange } from '../../../utils/synapseTypes/Table/FacetColumnResult'\nimport { RadioGroup } from '../RadioGroup'\nimport { Range, RangeValues } from '../Range'\nimport { RangeSlider } from '../RangeSlider'\nimport { FacetFilterHeader } from './FacetFilterHeader'\n\nexport enum RadioValuesEnum {\n  NOT_SET = 'org.sagebionetworks.UNDEFINED_NULL_NOTSET',\n  RANGE = 'RANGE',\n  ANY = '',\n}\n\nexport type RangeFacetFilterProps = {\n  facetResult: FacetColumnResultRange\n  columnModel: SelectColumn\n  onChange: (range: (RadioValuesEnum | number | string | undefined)[]) => void\n  facetAliases?: Record<string, string>\n  collapsed?: boolean\n}\n\nexport type RangeFacetFilterState = {\n  facetResult: FacetColumnResultRange\n  columnModel: SelectColumn\n}\n\nexport const RangeFacetFilter: React.FunctionComponent<\n  RangeFacetFilterProps\n> = ({\n  facetResult,\n  columnModel,\n  onChange,\n  facetAliases,\n  collapsed = false,\n}: RangeFacetFilterProps) => {\n  const [isCollapsed, setIsCollapsed] = useState<boolean>(collapsed)\n  const options = [\n    { label: FRIENDLY_VALUE_NOT_SET, value: RadioValuesEnum.NOT_SET },\n    { label: 'Any', value: RadioValuesEnum.ANY },\n    { label: 'Range', value: RadioValuesEnum.RANGE },\n  ]\n\n  let { columnMin, columnMax, selectedMin, selectedMax } = facetResult // the upper bound of the selected range\n\n  const hasAnyValue = !selectedMin && !selectedMax\n\n  selectedMin = selectedMin || columnMin\n  selectedMax = selectedMax || columnMax\n\n  const rangeType = columnModel.columnType === 'DOUBLE' ? 'number' : 'date'\n\n  const getRadioValue = (min: string, isAnyValue: boolean) => {\n    if (isAnyValue) {\n      return RadioValuesEnum.ANY\n    } else if (min === VALUE_NOT_SET) {\n      return RadioValuesEnum.NOT_SET\n    }\n    return RadioValuesEnum.RANGE\n  }\n\n  const handleRadioGroupChange = (\n    radioValue: RadioValuesEnum,\n    onChangeCallback: (\n      range: (RadioValuesEnum | number | string | undefined)[],\n    ) => void,\n  ) => {\n    setRadioValue(radioValue)\n\n    if (radioValue !== RadioValuesEnum.RANGE) {\n      onChangeCallback([radioValue, radioValue])\n    }\n  }\n\n  const [radioValue, setRadioValue] = useState(\n    getRadioValue(selectedMin, hasAnyValue),\n  )\n\n  const result = (\n    <div>\n      <FacetFilterHeader\n        isCollapsed={isCollapsed}\n        label={columnModel.name}\n        onClick={(isCollapsed: boolean) => setIsCollapsed(isCollapsed)}\n        facetAliases={facetAliases}\n      ></FacetFilterHeader>\n      <Collapse in={!isCollapsed}>\n        <RadioGroup\n          value={radioValue}\n          id=\"rangeSelector\"\n          options={options}\n          onChange={(radioValue: string) =>\n            handleRadioGroupChange(radioValue as RadioValuesEnum, onChange)\n          }\n        ></RadioGroup>\n        {radioValue === RadioValuesEnum.RANGE &&\n          (columnMin === columnMax ? (\n            <label>{columnMax}</label>\n          ) : (\n            <>\n              {columnModel.columnType === 'INTEGER' && (\n                <RangeSlider\n                  key=\"RangeSlider\"\n                  domain={[columnMin, columnMax]}\n                  initialValues={{ min: selectedMin, max: selectedMax }}\n                  step={1}\n                  doUpdateOnApply={true}\n                  onChange={(values: RangeValues) =>\n                    onChange([values.min, values.max])\n                  }\n                >\n                  ) {'>'}\n                </RangeSlider>\n              )}\n\n              {(columnModel.columnType === 'DATE' ||\n                columnModel.columnType === 'DOUBLE') && (\n                <Range\n                  key=\"Range\"\n                  initialValues={{\n                    min: selectedMin,\n                    max: selectedMax,\n                  }}\n                  type={rangeType}\n                  onChange={(values: RangeValues) =>\n                    onChange([values.min, values.max])\n                  }\n                ></Range>\n              )}\n            </>\n          ))}\n      </Collapse>\n    </div>\n  )\n  return result\n}\n","import * as React from 'react'\nimport { isSingleNotSetValue } from '../../../utils/functions/queryUtils'\nimport { QueryBundleRequest } from '../../../utils/synapseTypes'\nimport {\n  FacetColumnRangeRequest,\n  FacetColumnRequest,\n  FacetColumnValuesRequest,\n} from '../../../utils/synapseTypes/Table/FacetColumnRequest'\nimport {\n  FacetColumnResult,\n  FacetColumnResultRange,\n  FacetColumnResultValues,\n} from '../../../utils/synapseTypes/Table/FacetColumnResult'\nimport { useQueryVisualizationContext } from '../../QueryVisualizationWrapper'\nimport {\n  QUERY_FILTERS_COLLAPSED_CSS,\n  QUERY_FILTERS_EXPANDED_CSS,\n} from '../../QueryWrapper'\nimport { useQueryContext } from '../../QueryContext'\nimport { EnumFacetFilter } from './EnumFacetFilter'\nimport { RangeFacetFilter } from './RangeFacetFilter'\n\nexport type QueryFilterProps = {\n  facetsToFilter?: string[]\n}\n\nconst convertFacetToFacetColumnValuesRequest = (\n  facet: FacetColumnResultValues,\n): FacetColumnValuesRequest => ({\n  concreteType: 'org.sagebionetworks.repo.model.table.FacetColumnValuesRequest',\n  columnName: facet.columnName,\n  facetValues: facet.facetValues\n    .filter(facet => facet.isSelected === true)\n    .map(facet => facet.value),\n})\n\nconst convertFacetColumnRangeRequest = (\n  facet: FacetColumnResultRange,\n): FacetColumnRangeRequest => {\n  let result = {\n    concreteType:\n      'org.sagebionetworks.repo.model.table.FacetColumnRangeRequest',\n    columnName: facet.columnName, // The name of the faceted column\n  }\n\n  if (facet.columnMin) {\n    result = { ...result, ...{ min: facet.columnMin, max: facet.columnMax } }\n  }\n  return result\n}\n\nconst patchRequestFacets = (\n  changedFacet: FacetColumnRequest,\n  lastRequest?: QueryBundleRequest,\n): FacetColumnRequest[] => {\n  const selections = lastRequest?.query?.selectedFacets ?? []\n  const changedFacetIndex = selections.findIndex(\n    facet => facet.columnName === changedFacet.columnName,\n  )\n\n  const isEmptyValuesFacet =\n    changedFacet.concreteType ===\n      'org.sagebionetworks.repo.model.table.FacetColumnValuesRequest' &&\n    (!changedFacet.facetValues || !changedFacet.facetValues.length)\n  if (changedFacetIndex > -1) {\n    if (isEmptyValuesFacet) {\n      selections.splice(changedFacetIndex, 1)\n    } else {\n      selections[changedFacetIndex] = changedFacet\n    }\n  } else {\n    selections.push(changedFacet)\n  }\n  return selections\n}\n\nexport function applyChangesToValuesColumn(\n  lastRequest: QueryBundleRequest | undefined,\n  facet: FacetColumnResultValues,\n  onChangeFn: (result: FacetColumnRequest[]) => void,\n  facetName?: string,\n  checked: boolean = false,\n) {\n  if (facetName) {\n    facet.facetValues.forEach(facetValue => {\n      if (facetValue.value === facetName) {\n        facetValue.isSelected = checked\n      }\n    })\n  } else {\n    // else clear all\n    facet.facetValues.forEach(facet => {\n      facet.isSelected = false\n    })\n  }\n\n  const changedFacet = convertFacetToFacetColumnValuesRequest(facet)\n  const result = patchRequestFacets(changedFacet, lastRequest)\n  onChangeFn(result)\n}\n\n// This handles multiple checkbox selection with delay refresh\nexport const applyMultipleChangesToValuesColumn = (\n  lastRequest: QueryBundleRequest | undefined,\n  facet: FacetColumnResultValues,\n  onChangeFn: (result: FacetColumnRequest[]) => void,\n  facetNameMap?: Record<string, string>,\n) => {\n  const facetNames = (facetNameMap && Object.keys(facetNameMap)) || []\n  if (facetNames.length) {\n    facet.facetValues.forEach(facetValue => {\n      if (facetNames.includes(facetValue.value)) {\n        facetValue.isSelected = facetNameMap\n          ? !!facetNameMap[facetValue.value]\n          : false\n      }\n    })\n  }\n  const changedFacet = convertFacetToFacetColumnValuesRequest(facet)\n  const result = patchRequestFacets(changedFacet, lastRequest)\n  onChangeFn(result)\n}\n\n//rangeChanges\nexport const applyChangesToRangeColumn = (\n  lastRequest: QueryBundleRequest | undefined,\n  facet: FacetColumnResultRange,\n  onChangeFn: (result: FacetColumnRequest[]) => void,\n  values: string[],\n) => {\n  facet.columnMin = values[0]\n  facet.columnMax = values[1]\n  const changedFacet = convertFacetColumnRangeRequest(facet)\n  const result = patchRequestFacets(changedFacet, lastRequest)\n  onChangeFn(result)\n}\n\nexport const QueryFilter: React.FunctionComponent<QueryFilterProps> = ({\n  facetsToFilter,\n}): JSX.Element => {\n  const { data, isLoadingNewBundle, getLastQueryRequest, executeQueryRequest } =\n    useQueryContext()\n\n  const { facetAliases, topLevelControlsState } = useQueryVisualizationContext()\n\n  if (!data) {\n    return <></>\n  }\n  const { showFacetFilter } = topLevelControlsState\n  const columnModels = data.selectColumns\n  let facets = data.facets as FacetColumnResult[]\n  if (facetsToFilter) {\n    facets = facets.filter(facet => {\n      return facetsToFilter.includes(facet.columnName)\n    })\n  }\n  const lastRequest = getLastQueryRequest()\n\n  const applyChanges = (facets: FacetColumnRequest[]) => {\n    const queryRequest: QueryBundleRequest = getLastQueryRequest()\n    queryRequest.query.selectedFacets = facets\n    queryRequest.query.offset = 0\n    executeQueryRequest(queryRequest)\n  }\n\n  return (\n    <div\n      className={`QueryFilter ${\n        showFacetFilter\n          ? QUERY_FILTERS_EXPANDED_CSS\n          : QUERY_FILTERS_COLLAPSED_CSS\n      }`}\n    >\n      {isLoadingNewBundle && <div>Loading...</div>}\n      {!isLoadingNewBundle &&\n        facets.map((facet, index) => {\n          const columnModel = columnModels!.find(\n            model => model.name === facet.columnName,\n          )\n          const shouldStartCollapsed = index > 2\n          if (isSingleNotSetValue(facet)) {\n            return\n          }\n          return (\n            <div className=\"QueryFilter__facet\" key={facet.columnName}>\n              {facet.facetType === 'enumeration' && columnModel && (\n                <EnumFacetFilter\n                  containerAs=\"Collapsible\"\n                  collapsed={shouldStartCollapsed}\n                  facetValues={facet.facetValues}\n                  columnModel={columnModel}\n                  facetAliases={facetAliases}\n                  onChange={(facetNamesMap: Record<string, string>) =>\n                    applyMultipleChangesToValuesColumn(\n                      lastRequest,\n                      facet,\n                      applyChanges,\n                      facetNamesMap,\n                    )\n                  }\n                  onClear={() =>\n                    applyChangesToValuesColumn(lastRequest, facet, applyChanges)\n                  }\n                ></EnumFacetFilter>\n              )}\n              {facet.facetType === 'range' && columnModel && (\n                <RangeFacetFilter\n                  facetResult={facet}\n                  columnModel={columnModel}\n                  facetAliases={facetAliases}\n                  collapsed={shouldStartCollapsed}\n                  onChange={(values: string[]) =>\n                    applyChangesToRangeColumn(\n                      lastRequest,\n                      facet,\n                      applyChanges,\n                      values,\n                    )\n                  }\n                ></RangeFacetFilter>\n              )}\n            </div>\n          )\n        })}\n    </div>\n  )\n}\n","import { cloneDeep } from 'lodash-es'\nimport React, {\n  FunctionComponent,\n  useCallback,\n  useEffect,\n  useState,\n} from 'react'\nimport { Button } from 'react-bootstrap'\nimport { SkeletonInlineBlock } from '../assets/skeletons/SkeletonInlineBlock'\nimport {\n  getStoredEntityHeaders,\n  getStoredUserProfiles,\n} from '../utils/functions/getDataFromFromStorage'\nimport {\n  ColumnModel,\n  ColumnType,\n  EntityHeader,\n  FacetColumnRequest,\n  FacetColumnResult,\n  FacetColumnResultRange,\n  FacetColumnResultValues,\n  QueryBundleRequest,\n  UserProfile,\n} from '../utils/synapseTypes'\nimport {\n  isColumnMultiValueFunctionQueryFilter,\n  isColumnSingleValueQueryFilter,\n  isTextMatchesQueryFilter,\n  QueryFilter,\n  TextMatchesQueryFilter,\n} from '../utils/synapseTypes/Table/QueryFilter'\nimport { useQueryVisualizationContext } from './QueryVisualizationWrapper'\nimport {\n  QUERY_FILTERS_COLLAPSED_CSS,\n  QUERY_FILTERS_EXPANDED_CSS,\n} from './QueryWrapper'\nimport { useQueryContext } from './QueryContext'\nimport SelectionCriteriaPill, {\n  FacetWithSelection,\n  SelectionCriteriaPillProps,\n} from './widgets/facet-nav/SelectionCriteriaPill'\nimport {\n  applyChangesToRangeColumn,\n  applyChangesToValuesColumn,\n} from './widgets/query-filter/QueryFilter'\nimport { RadioValuesEnum } from './widgets/query-filter/RangeFacetFilter'\n\nexport type TotalQueryResultsProps = {\n  style?: React.CSSProperties\n  frontText: string\n  endText?: string\n  applyChanges?: (newFacets: FacetColumnRequest[]) => void\n  hideIfUnfiltered?: boolean\n}\n\n// This is a stateful component so that during load the component can hold onto the previous\n// total instead of showing 0 results for the intermittent loading state.\n\nconst TotalQueryResults: FunctionComponent<TotalQueryResultsProps> = ({\n  style,\n  frontText,\n  endText = '',\n  hideIfUnfiltered = false,\n}) => {\n  const {\n    data,\n    isLoadingNewBundle,\n    getLastQueryRequest,\n    executeQueryRequest,\n    getInitQueryRequest,\n    error,\n  } = useQueryContext()\n\n  const { topLevelControlsState, unitDescription } =\n    useQueryVisualizationContext()\n\n  const total = data?.queryCount\n  const [facetsWithSelection, setFacetsWithSelection] = useState<\n    FacetWithSelection[]\n  >([])\n\n  const applyChanges = (facets: FacetColumnRequest[]) => {\n    const queryRequest: QueryBundleRequest = cloneDeep(getLastQueryRequest())\n    queryRequest.query.selectedFacets = facets\n    queryRequest.query.offset = 0\n    executeQueryRequest(queryRequest)\n  }\n\n  const getEnumFacetsWithSelections = (\n    facets: FacetColumnResult[],\n  ): FacetColumnResultValues[] => {\n    const enumFacets = facets.filter(\n      facet => facet.facetType === 'enumeration',\n    ) as FacetColumnResultValues[]\n    const enumFacetsWithSelections = enumFacets.filter(\n      facet =>\n        facet.facetValues.filter(value => value.isSelected === true).length > 0,\n    )\n    return enumFacetsWithSelections\n  }\n\n  const getRangeFacetsWithSelections = (\n    facets: FacetColumnResult[],\n  ): FacetColumnResultRange[] => {\n    const rangeFacets = facets.filter(\n      facet => facet.facetType === 'range',\n    ) as FacetColumnResultRange[]\n    const rangeFacetsWithSelections = rangeFacets.filter(\n      facet => facet.selectedMax || facet.selectedMin,\n    )\n    return rangeFacetsWithSelections\n  }\n\n  const getDisplayValueForEntityColumn = (\n    entityHeaders: EntityHeader[],\n    facetValue: string,\n  ): string => {\n    const entity = entityHeaders.find(item => item.id === facetValue)\n    return entity?.name ?? facetValue\n  }\n\n  const getDisplayValueUserIdColumn = (\n    userProfiles: UserProfile[],\n    facetValue: string,\n  ): string => {\n    const userProfile = userProfiles.find(item => item.ownerId === facetValue)\n    return userProfile?.userName || facetValue\n  }\n\n  const transformEnumFacetsForSelectionDisplay = useCallback(\n    (\n      facets: FacetColumnResultValues[],\n      columnModels: ColumnModel[],\n    ): FacetWithSelection[] => {\n      const lookUpEntityHeaders = getStoredEntityHeaders()\n      const lookUpUserProfiles = getStoredUserProfiles()\n      const filteredEnumWithSelectedValuesOnly: FacetWithSelection[] = []\n      facets.forEach(facet => {\n        const columnModel = columnModels.find(\n          model => model.name === facet.columnName,\n        )\n        facet.facetValues.forEach(facetValue => {\n          if (facetValue.isSelected) {\n            let displayValue = facetValue.value\n            if (\n              columnModel?.columnType === ColumnType.ENTITYID ||\n              columnModel?.columnType === ColumnType.ENTITYID_LIST\n            ) {\n              displayValue = getDisplayValueForEntityColumn(\n                lookUpEntityHeaders,\n                facetValue.value,\n              )\n            } else if (\n              columnModel?.columnType === ColumnType.USERID ||\n              columnModel?.columnType === ColumnType.USERID_LIST\n            ) {\n              displayValue = getDisplayValueUserIdColumn(\n                lookUpUserProfiles,\n                facetValue.value,\n              )\n            }\n\n            filteredEnumWithSelectedValuesOnly.push({\n              facet,\n              displayValue,\n              selectedValue: facetValue,\n            })\n          }\n        })\n      })\n      return filteredEnumWithSelectedValuesOnly\n    },\n    [],\n  )\n\n  useEffect(() => {\n    if (data) {\n      const rangeFacetsWithSelections = getRangeFacetsWithSelections(\n        data.facets!,\n      )\n      const enumFacetsWithSelections = getEnumFacetsWithSelections(data.facets!)\n      const rangeFacetsForDisplay = rangeFacetsWithSelections.map(facet => ({\n        facet,\n      }))\n      const enumFacetsForDisplay = transformEnumFacetsForSelectionDisplay(\n        enumFacetsWithSelections,\n        data.columnModels!,\n      )\n\n      setFacetsWithSelection([\n        ...rangeFacetsForDisplay,\n        ...enumFacetsForDisplay,\n      ])\n    }\n  }, [data, transformEnumFacetsForSelectionDisplay])\n\n  const removeFacetSelection = (facetWithSelection: FacetWithSelection) => {\n    const { facet, selectedValue } = facetWithSelection\n    if (facet.facetType === 'enumeration') {\n      applyChangesToValuesColumn(\n        getLastQueryRequest(),\n        facet,\n        applyChanges,\n        selectedValue?.value,\n        false,\n      )\n    } else {\n      applyChangesToRangeColumn(getLastQueryRequest(), facet, applyChanges, [\n        RadioValuesEnum.ANY,\n        RadioValuesEnum.ANY,\n      ])\n    }\n  }\n\n  const removeColumnSearchQuerySelection = (\n    columnName: string,\n    value: string,\n  ) => {\n    const cloneLastQueryRequest = cloneDeep(getLastQueryRequest())\n    if (!cloneLastQueryRequest.query.additionalFilters) {\n      return\n    }\n    cloneLastQueryRequest.query.additionalFilters =\n      cloneLastQueryRequest.query.additionalFilters?.reduce(function (\n        filtered: QueryFilter[],\n        el: QueryFilter,\n      ) {\n        if (\n          isColumnSingleValueQueryFilter(el) ||\n          isColumnMultiValueFunctionQueryFilter(el)\n        ) {\n          // For column-specific QueryFilters, filter out matching values on the matching column\n          const newElement = {\n            columnName: el.columnName,\n            values:\n              el.columnName === columnName\n                ? el.values.filter(el => el !== value)\n                : el.values,\n            operator: isColumnSingleValueQueryFilter(el)\n              ? el.operator\n              : undefined,\n            function: isColumnMultiValueFunctionQueryFilter(el)\n              ? el.function\n              : undefined,\n            concreteType: el.concreteType,\n          }\n\n          // Drop this QueryFilter if it has no more values\n          if (newElement.values.length > 0) {\n            filtered.push(newElement)\n          }\n        } else {\n          // Don't alter/drop non-column-specific QueryFilters\n          filtered.push(el)\n        }\n        return filtered\n      },\n      [])\n\n    executeQueryRequest(cloneLastQueryRequest)\n  }\n\n  const removeTextMatchesQueryFilter = (\n    queryFilter: TextMatchesQueryFilter,\n  ) => {\n    const cloneLastQueryRequest = cloneDeep(getLastQueryRequest())\n    if (!cloneLastQueryRequest.query.additionalFilters) {\n      return\n    }\n    cloneLastQueryRequest.query.additionalFilters =\n      cloneLastQueryRequest.query.additionalFilters.filter(\n        el =>\n          !(\n            isTextMatchesQueryFilter(el) &&\n            el.searchExpression === queryFilter.searchExpression\n          ),\n      )\n    executeQueryRequest(cloneLastQueryRequest)\n  }\n\n  const clearAll = () => {\n    const initQueryRequest = cloneDeep(getInitQueryRequest())\n    initQueryRequest.query.additionalFilters = []\n    executeQueryRequest(initQueryRequest)\n  }\n\n  const searchSelectionCriteriaPillProps:\n    | (SelectionCriteriaPillProps & {\n        key: string\n      })[]\n    | undefined = getLastQueryRequest().query.additionalFilters?.reduce(\n    (\n      pillProps: (SelectionCriteriaPillProps & {\n        key: string\n      })[],\n      el: QueryFilter,\n    ) => {\n      if (isTextMatchesQueryFilter(el)) {\n        pillProps.push({\n          key: `fulltextsearch-${el.searchExpression}`,\n          filter: {\n            value: el.searchExpression,\n          },\n          onRemove: () => removeTextMatchesQueryFilter(el),\n        })\n      } else if (\n        isColumnSingleValueQueryFilter(el) ||\n        isColumnMultiValueFunctionQueryFilter(el)\n      ) {\n        const { columnName } = el\n        el.values.forEach(value => {\n          pillProps.push({\n            key: `columnsearch-${value}`,\n            filter: {\n              columnName,\n              value,\n            },\n            onRemove: () =>\n              removeColumnSearchQuerySelection(el.columnName, value),\n          })\n        })\n      } else {\n        console.warn('Encountered unexpected QueryFilter: ', el)\n      }\n      return pillProps\n    },\n    [],\n  )\n  const showFacetFilter = topLevelControlsState?.showFacetFilter\n  const hasFilters =\n    facetsWithSelection.length > 0 ||\n    (searchSelectionCriteriaPillProps &&\n      searchSelectionCriteriaPillProps.length > 0)\n  if (error) {\n    return <></>\n  }\n  return (\n    <div\n      className={`TotalQueryResults ${\n        showFacetFilter\n          ? QUERY_FILTERS_EXPANDED_CSS\n          : QUERY_FILTERS_COLLAPSED_CSS\n      }`}\n      style={style}\n    >\n      {isLoadingNewBundle ? (\n        <SkeletonInlineBlock width={100} />\n      ) : (\n        <>\n          {(hasFilters || !hideIfUnfiltered) && (\n            <span className=\"SRC-boldText SRC-centerContent\">\n              {frontText} {total?.toLocaleString()} {unitDescription} {endText}\n            </span>\n          )}\n          <div className=\"TotalQueryResults__selections\">\n            {searchSelectionCriteriaPillProps &&\n              searchSelectionCriteriaPillProps.map(props => (\n                <SelectionCriteriaPill {...props} key={props.key} />\n              ))}\n            {facetsWithSelection.map((selectedFacet, index) => (\n              <SelectionCriteriaPill\n                key={`facets-${\n                  selectedFacet.selectedValue?.value ??\n                  selectedFacet.displayValue ??\n                  index\n                }`}\n                facetWithSelection={selectedFacet}\n                onRemove={() => removeFacetSelection(selectedFacet)}\n              />\n            ))}\n            {(facetsWithSelection.length > 2 ||\n              (searchSelectionCriteriaPillProps &&\n                searchSelectionCriteriaPillProps.length > 2)) && (\n              <Button\n                onClick={clearAll}\n                variant=\"light\"\n                className=\"TotalQueryResults__clearall\"\n              >\n                Clear All\n              </Button>\n            )}\n          </div>\n        </>\n      )}\n    </div>\n  )\n}\n\nexport default TotalQueryResults\n"],"names":["createContext","children","_jsx","queryContext","useContext","style","props","SynapseConstants.ENTITY_HEADER_STORAGE_KEY","SynapseConstants.USER_PROFILE_STORAGE_KEY","queryVisualizationContext","data","getLastQueryRequest","isFacetsAvailable","isLoadingNewBundle","useState","useEffect","setTopLevelControlsState","state","setSelectedRowIndices","setVisibleColumns","topLevelControlsState","visibleColumns","selectedRowIndices","facetAliases","rgbIndex","unitDescription","showLastUpdatedOn","context","SynapseConstants.BUNDLE_MASK_QUERY_COLUMN_MODELS","SynapseConstants.BUNDLE_MASK_QUERY_FACETS","SynapseConstants.BUNDLE_MASK_QUERY_SELECT_COLUMNS","SynapseConstants.BUNDLE_MASK_QUERY_RESULTS","React","initQueryRequest","onQueryChange","onQueryResultBundleChange","asyncJobStatus","queryIsLoading","error","newQueryIsFetching","remove","entityId","versionNumber","entity","lastQueryRequestDeepClone","executeQueryRequest","useDeepCompareEffect","useDeepCompareEffectNoCheck","DeepLinkingUtils.getQueryRequestFromLink","setLastQueryRequest","DeepLinkingUtils","dataCopy","dataWithLockedFacetRemoved","currentPage","pageSize","setPageSize","getInitQueryRequest","currentAsyncStatus","goToPage","facetWithSelection","innerText","selectedMin","tooltipText","filter","filterValue","console","key","_jsxs","label","isCollapsed","onClick","value","SynapseConstants.VALUE_NOT_SET","displayValue","facetValues","columnModel","onClear","onChange","setFilteredSet","userIds","entityIds","setSearchText","setIsShowAll","obj","_Fragment","setShowSearch","textInput","searchTerm","handleTextInputFilterEvent","allIsSelected","count","isSelected","selectedValuesMap","clearTimeout","timer","setIsShowDropdown","isShowDropdown","content","name","id","index","isDropdown","initialIsSelected","setIsSelected","moment","undefined","min","max","setError","callBackFn","type","target","errorText","NOT_SET","RANGE","ANY","RadioValuesEnum","facetResult","FRIENDLY_VALUE_NOT_SET","columnMin","columnMax","selectedMax","setRadioValue","onChangeCallback","radioValue","rangeType","columnName","result","selections","facet","facetValue","onChangeFn","facetsToFilter","showFacetFilter","facets","queryRequest","QUERY_FILTERS_COLLAPSED_CSS","shouldStartCollapsed","frontText","filteredEnumWithSelectedValuesOnly","setFacetsWithSelection","selectedValue","applyChangesToValuesColumn","applyChangesToRangeColumn","cloneLastQueryRequest","values","concreteType","filtered","pillProps","searchExpression","el","selectedFacet","clearAll"],"mappings":"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"}