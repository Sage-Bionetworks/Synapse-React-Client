import{i as h,p as v}from"./sqlFunctions.b49ac766.js";import{aI as N,a0 as T,B as O}from"./index.87d1c7b9.js";import{C as V}from"./ColumnType.744125d2.js";import"./assert.ee5a549a.js";import{U as w}from"./UserCardList.b1be8dc4.js";import{a as b}from"./useUserBundle.1ce41d85.js";import{L as x}from"./UserCard.7f39e657.js";import{a as k}from"./use-deep-compare-effect.esm.9d3fc03b.js";import{a as B,j as u}from"./jsx-runtime.2e925369.js";import{B as M}from"./Button.77571428.js";const f=window.React.useState,Q="sage_rotate_uids",F=3,J=(e=[],s=F,r)=>{let o=[],t=[];const l=localStorage.getItem(r);if(l!=null&&(o=JSON.parse(l)),o.length){const a=e.filter(n=>!o.includes(n));if(a.length>=s)return t=a.slice(0,s),localStorage.setItem(r,JSON.stringify(o.concat(t))),t;{localStorage.removeItem(r);const n=e.slice(0,s-a.length);return localStorage.setItem(r,JSON.stringify(n)),a.concat(n)}}else return t=e.slice(0,s),localStorage.setItem(r,JSON.stringify(t)),t},d=({sql:e,count:s,useQueryResultUserData:r=!1,size:o=N,summaryLink:t,summaryLinkText:l,selectedFacets:a,searchParams:n,sqlOperator:R})=>{const{accessToken:y}=b(),[c,L]=f([]),[U,I]=f(),[m,S]=f();let C=!0;const _=`${Q}-${e}-${JSON.stringify(a)}`;return k(()=>(async function(){S(!0);const E=h(e,n,R),q=v(e),g=await T({partMask:O,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:q,query:{sql:E,selectedFacets:a}},y),{queryResult:p}=g;if(p.queryResults.rows){const A=p.queryResults.headers.findIndex(i=>i.columnType===V.USERID),D=p.queryResults.rows.map(i=>i.values[A]);if(C){const i=J(D,s,_);L(i),r&&I(g),S(!1)}}else console.log("UserCardListRotate: Error getting data")}(),()=>{C=!1}),[e,a,s,y,n,R]),B("div",{className:"UserCardListRotate bootstrap-4-backport",children:[m&&u(x,{}),!m&&c.length===0&&u("p",{className:"font-italic",children:"No one was found."}),!m&&c.length>0&&u(w,{list:c,size:o,data:U}),t&&l&&u("div",{className:"UserCardListRotate__summary",children:u(M,{className:"pill",variant:"secondary",size:"lg",href:t,children:l})})]})};var ae=d;try{d.displayName="UserCardListRotate",d.__docgenInfo={description:"",displayName:"UserCardListRotate",props:{sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"number"}},useQueryResultUserData:{defaultValue:{value:"false"},description:"",name:"useQueryResultUserData",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"LARGE USER CARD"},description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"AVATAR"'},{value:'"SMALL USER CARD"'},{value:'"MEDIUM USER CARD"'},{value:'"LARGE USER CARD"'}]}},summaryLink:{defaultValue:null,description:"",name:"summaryLink",required:!1,type:{name:"string"}},summaryLinkText:{defaultValue:null,description:"",name:"summaryLinkText",required:!1,type:{name:"string"}},selectedFacets:{defaultValue:null,description:"",name:"selectedFacets",required:!1,type:{name:"FacetColumnRequest[]"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"KeyValue"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/UserCardListRotate.tsx#UserCardListRotate"]={docgenInfo:d.__docgenInfo,name:"UserCardListRotate",path:"src/lib/containers/UserCardListRotate.tsx#UserCardListRotate"})}catch{}export{ae as U};
//# sourceMappingURL=UserCardListRotate.dad65ef1.js.map
