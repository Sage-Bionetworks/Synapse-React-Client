import{T as Wf,V as ie,W as Wg,X as Cr,Y as Gg,Z as Gf,_ as Sl,$ as xn,a0 as Kg,a1 as Xg,a2 as wl,a3 as Qg,a4 as Re,a5 as Zg,a6 as Kf,E as Ws,a7 as Jg,a8 as Xf,a9 as ey,aa as Oc,ab as _r,ac as An,ad as Qf,ae as ty,af as Zf,ag as ny,ah as ry,ai as Cl,aj as oy,ak as ay,al as hn,am as iy,an as Tn,ao as sy,ap as ly,aq as Ic,ar as Jf,as as $a,at as ep,au as cy,av as dy,aw as fe,ax as uy,ay as fy,az as py,aA as hy,aB as my,aC as gy,aD as yy,aE as vy,aF as tp,aG as by,aH as Sy,aI as wy,aJ as Cy,aK as np,aL as _y,x as qr,aM as Ey,aN as rp,aO as xy,aP as Ty,R as op,aQ as ap,aR as ip}from"./index.22d2125e.js";import{p as kn,a as Oy,g as _l}from"./sqlFunctions.d0deafe9.js";import{u as sp}from"./useGetInfoFromIds.5e8bec87.js";import{h as lp,T as Iy,M as Ny,i as Sa,j as Er,k as xr,l as El,m as Ry,n as Ay,c as ky,d as Ly,g as xl,o as Nc,p as qy,q as Tl,B as cp,r as Ol,s as Il,t as Nl,u as Py,v as dp,O as Gs,w as Rc,G as Dy,F as My}from"./SynapseConstants.290eab74.js";import{C as re}from"./ColumnType.744125d2.js";import{j as u,r as x,a as N,F as H,R as ge}from"./jsx-runtime.31268528.js";import{P as $e,g as Vy,B as By}from"./getEndpoint.bb7ded34.js";import{p as Fy,S as up,D as $y}from"./RegularExpressions.3cd69849.js";import{S as oi,Q as Ln,a as qn,u as Tt,b as Ct,c as Hy,d as zy,e as Uy,E as Yy,f as jy,g as Wy,h as Rl,N as wa,i as Al,j as fp,k as Gy,F as Ky,l as Xy,m as pp,T as hp,n as Qy}from"./FacetNav.5627db8b.js";import{u as mp,a as Zy,i as Jy,r as ev,h as tv,b as nv}from"./queryUtils.3c459226.js";import{u as kl}from"./useEntity.e61a2fe2.js";import{S as rv}from"./react-select.esm.61342118.js";import{i as ov,u as av,f as iv,C as sv}from"./CustomSelectWidget.695d030e.js";import{T as _t}from"./Typography.7deb443e.js";import{E as Ll,I as Ha,C as ql,a as lv,S as cv}from"./ElementWithTooltip.c6b5d0bb.js";import{B as _e}from"./Button.3eb9449f.js";import{e as Pl}from"./queryKeys.e0d3085f.js";import{S as za,l as gp}from"./LoadingScreen.f5aeb847.js";import{u as dv,U as On,a as Dl,g as uv}from"./UserCard.0f3fab61.js";import{W as fv}from"./WarningModal.0aedfe85.js";import{A as nn}from"./Alert.d1d035f0.js";import{u as Pn}from"./react-intersection-observer.esm.12900737.js";import{u as yp}from"./useInfiniteQuery.c6eed216.js";import{f as pr}from"./DateFormatter.5cb85eed.js";import{d as Bt}from"./dayjs.min.fa03b112.js";import{S as Ml}from"./SkeletonTable.8b5a914e.js";import{S as Ks}from"./Skeleton.855acef4.js";import{u as pv,T as Ke}from"./Tooltip.5176c19c.js";import{E as Ac}from"./EntityIcon.69a6cf7b.js";import{I as pe,H as hv,S as mv,t as gv}from"./IconSvg.1a319e23.js";import{t as Ua,c as Ya,G as rn,H as yv,j as Tr,J as vv,K as vp,L as bv,M as Sv,O as wv,P as Cv,Q as _v,R as bp,T as Ev,U as xv,V as Tv,e as Sp,W as wp,X as Ov,Y as Vl,Z as Cp,$ as _p,a0 as Iv,a1 as Nv,a2 as Ep,a3 as Rv,a4 as Av,a5 as kv,a6 as Lv,m as qv,a7 as Pv,g as Dv}from"./iframe.c7567c2d.js";import{_ as Mv,f as xp,a as Tp,b as Vv,c as Bv,d as Fv,e as $v,g as Hv,h as zv,i as Uv,j as Yv,k as jv,l as Wv,s as Gv,F as Kv}from"./core.esm.7a354c66.js";import{i as Xv}from"./isString.53ba3e66.js";import{_ as Qv}from"./index.browser.62786e23.js";import{r as Zv}from"./index.d5f32449.js";import{i as Op,g as Ip,p as Jv,e as eb,a as tb,c as nb,o as rb,f as ob,b as ab,d as ib,h as sb}from"./usePopperMarginModifiers.7853b5dc.js";import{C as Np,d as en}from"./ToastMessage.a10582c4.js";import{B as kc}from"./Button.5756842c.js";import{d as lb,s as cb}from"./union.8e76d114.js";import{i as db}from"./isEqual.81f70372.js";import{g as Bl,d as Fl,s as $t,A as wt,_ as Ee,e as $l,h as ja,i as Ca,j as Hl,D as cn}from"./styled.0bfd4c69.js";import{k as Rp,c as Ap}from"./emotion-react.browser.esm.d60ec8ed.js";import{c as ub,P as fb}from"./factory.f5aa0ef3.js";import{T as _a,N as pb,I as Lc}from"./SynapseTableConstants.07ecdebd.js";import{r as hb}from"./relativeTime.d35cf3f2.js";import{u as qc}from"./use-deep-compare-effect.esm.b33b0620.js";import{u as mb}from"./useGetDownloadListStatistics.3d14c4e1.js";import{M as ae,a as gb,b as yb}from"./Modal.befa9583.js";import{i as vb,a as bb,C as Sb,b as wb}from"./QueryFilter.90a1a7eb.js";import{D as Lt}from"./Dropdown.8938a9f4.js";import{Q as Cb}from"./QueryCount.2f8a0495.js";import{c as on}from"./createSvgIcon.f7c19e7b.js";import{c as zn}from"./cloneDeep.edfd3e7e.js";import{u as kp}from"./useGetAccessRequirement.b2c1473c.js";import{a as zl,R as _b}from"./RestrictionInformation.edfbac5a.js";import{S as Le}from"./ManagedACTAccessRequirementStatus.be369a71.js";import{F as ai}from"./FileUpload.399fb39e.js";import{U as Eb}from"./UserSearchBox.0e6910a6.js";import{R as xb}from"./RadioGroup.b4a59787.js";import{u as Lp}from"./useTheme.910eaec3.js";import{E as Xs}from"./EntityLink.fd06899a.js";import{C as Tb}from"./Checkbox.b2ac944e.js";import{B as Ob}from"./ButtonBase.34890086.js";import{u as Ib,U as Nb}from"./UserOrTeamBadge.86c3eff2.js";import{S as Rb}from"./SynapseVideo.7d3137d8.js";import{I as Ab}from"./IconList.bef16bba.js";import{i as kb}from"./isEmpty.7ec601bf.js";import{U as Lb}from"./UserCardList.3cb51c31.js";const qb=on(u("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"}),"CheckTwoTone"),Pb=on([u("path",{d:"M6 20h12V10H6v10zm6-7c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z",opacity:".3"},"0"),u("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"},"1")],"LockTwoTone"),Db=on(u("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"WarningSharp");function Mb(e){return Bl("MuiCircularProgress",e)}Fl("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Vb=["className","color","disableShrink","size","style","thickness","value","variant"];let Wa=e=>e,Pc,Dc,Mc,Vc;const Ot=44,Bb=Rp(Pc||(Pc=Wa`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Fb=Rp(Dc||(Dc=Wa`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),$b=e=>{const{classes:t,variant:n,color:r,disableShrink:o}=e,a={root:["root",n,`color${wt(r)}`],svg:["svg"],circle:["circle",`circle${wt(n)}`,o&&"circleDisableShrink"]};return Hl(a,Mb,t)},Hb=$t("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${wt(n.color)}`]]}})(({ownerState:e,theme:t})=>Ee({display:"inline-block"},e.variant==="determinate"&&{transition:t.transitions.create("transform")},e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main}),({ownerState:e})=>e.variant==="indeterminate"&&Ap(Mc||(Mc=Wa`
      animation: ${0} 1.4s linear infinite;
    `),Bb)),zb=$t("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),Ub=$t("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${wt(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(({ownerState:e,theme:t})=>Ee({stroke:"currentColor"},e.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&Ap(Vc||(Vc=Wa`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Fb)),Yb=x.exports.forwardRef(function(t,n){const r=$l({props:t,name:"MuiCircularProgress"}),{className:o,color:a="primary",disableShrink:i=!1,size:s=40,style:l,thickness:d=3.6,value:c=0,variant:f="indeterminate"}=r,p=ja(r,Vb),g=Ee({},r,{color:a,disableShrink:i,size:s,thickness:d,value:c,variant:f}),h=$b(g),m={},v={},b={};if(f==="determinate"){const E=2*Math.PI*((Ot-d)/2);m.strokeDasharray=E.toFixed(3),b["aria-valuenow"]=Math.round(c),m.strokeDashoffset=`${((100-c)/100*E).toFixed(3)}px`,v.transform="rotate(-90deg)"}return u(Hb,Ee({className:Ca(h.root,o),style:Ee({width:s,height:s},v,l),ownerState:g,ref:n,role:"progressbar"},b,p,{children:u(zb,{className:h.svg,ownerState:g,viewBox:`${Ot/2} ${Ot/2} ${Ot} ${Ot}`,children:u(Ub,{className:h.circle,style:m,ownerState:g,cx:Ot,cy:Ot,r:(Ot-d)/2,fill:"none",strokeWidth:d})})}))}),jb=Yb;function Wb(e){return Bl("MuiPagination",e)}Fl("MuiPagination",["root","ul","outlined","text"]);const Gb=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Kb(e={}){const{boundaryCount:t=1,componentName:n="usePagination",count:r=1,defaultPage:o=1,disabled:a=!1,hideNextButton:i=!1,hidePrevButton:s=!1,onChange:l,page:d,showFirstButton:c=!1,showLastButton:f=!1,siblingCount:p=1}=e,g=ja(e,Gb),[h,m]=pv({controlled:d,default:o,name:n,state:"page"}),v=(O,R)=>{d||m(R),l&&l(O,R)},b=(O,R)=>{const k=R-O+1;return Array.from({length:k},(P,V)=>O+V)},E=b(1,Math.min(t,r)),S=b(Math.max(r-t+1,t+1),r),y=Math.max(Math.min(h-p,r-t-p*2-1),t+2),w=Math.min(Math.max(h+p,t+p*2+2),S.length>0?S[0]-2:r-1),C=[...c?["first"]:[],...s?[]:["previous"],...E,...y>t+2?["start-ellipsis"]:t+1<r-t?[t+1]:[],...b(y,w),...w<r-t-1?["end-ellipsis"]:r-t>t?[r-t]:[],...S,...i?[]:["next"],...f?["last"]:[]],_=O=>{switch(O){case"first":return 1;case"previous":return h-1;case"next":return h+1;case"last":return r;default:return null}},T=C.map(O=>typeof O=="number"?{onClick:R=>{v(R,O)},type:"page",page:O,selected:O===h,disabled:a,"aria-current":O===h?"true":void 0}:{onClick:R=>{v(R,_(O))},type:O,page:_(O),selected:!1,disabled:a||O.indexOf("ellipsis")===-1&&(O==="next"||O==="last"?h>=r:h<=1)});return Ee({items:T},g)}function Xb(e){return Bl("MuiPaginationItem",e)}const Qb=Fl("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),Ge=Qb,ii=on(u("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),si=on(u("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),li=on(u("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),ci=on(u("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Zb=["className","color","component","components","disabled","page","selected","shape","size","type","variant"],qp=(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${wt(n.size)}`],n.variant==="text"&&t[`text${wt(n.color)}`],n.variant==="outlined"&&t[`outlined${wt(n.color)}`],n.shape==="rounded"&&t.rounded,n.type==="page"&&t.page,(n.type==="start-ellipsis"||n.type==="end-ellipsis")&&t.ellipsis,(n.type==="previous"||n.type==="next")&&t.previousNext,(n.type==="first"||n.type==="last")&&t.firstLast]},Jb=e=>{const{classes:t,color:n,disabled:r,selected:o,size:a,shape:i,type:s,variant:l}=e,d={root:["root",`size${wt(a)}`,l,i,n!=="standard"&&`${l}${wt(n)}`,r&&"disabled",o&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[s]],icon:["icon"]};return Hl(d,Xb,t)},eS=$t("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:qp})(({theme:e,ownerState:t})=>Ee({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${Ge.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),tS=$t(Ob,{name:"MuiPaginationItem",slot:"Root",overridesResolver:qp})(({theme:e,ownerState:t})=>Ee({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${Ge.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Ge.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ge.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selected} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:cn(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${Ge.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selected} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:cn(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${Ge.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:t})=>Ee({},t.variant==="text"&&{[`&.${Ge.selected}`]:Ee({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}},[`&.${Ge.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}},{[`&.${Ge.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},t.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Ge.selected}`]:Ee({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:cn(e.palette[t.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:cn(e.palette[t.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:cn(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ge.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:cn(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${Ge.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),nS=$t("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})(({theme:e,ownerState:t})=>Ee({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(22)})),rS=x.exports.forwardRef(function(t,n){const r=$l({props:t,name:"MuiPaginationItem"}),{className:o,color:a="standard",component:i,components:s={first:ii,last:si,next:ci,previous:li},disabled:l=!1,page:d,selected:c=!1,shape:f="circular",size:p="medium",type:g="page",variant:h="text"}=r,m=ja(r,Zb),v=Ee({},r,{color:a,disabled:l,selected:c,shape:f,size:p,type:g,variant:h}),b=Lp(),E=Jb(v),y=(b.direction==="rtl"?{previous:s.next||ci,next:s.previous||li,last:s.first||ii,first:s.last||si}:{previous:s.previous||li,next:s.next||ci,first:s.first||ii,last:s.last||si})[g];return g==="start-ellipsis"||g==="end-ellipsis"?u(eS,{ref:n,ownerState:v,className:Ca(E.root,o),children:"\u2026"}):N(tS,Ee({ref:n,ownerState:v,component:i,disabled:l,className:Ca(E.root,o)},m,{children:[g==="page"&&d,y?u(nS,{as:y,ownerState:v,className:E.icon}):null]}))}),oS=rS,aS=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],iS=e=>{const{classes:t,variant:n}=e;return Hl({root:["root",n],ul:["ul"]},Wb,t)},sS=$t("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})({}),lS=$t("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function cS(e,t,n){return e==="page"?`${n?"":"Go to "}page ${t}`:`Go to ${e} page`}const dS=x.exports.forwardRef(function(t,n){const r=$l({props:t,name:"MuiPagination"}),{boundaryCount:o=1,className:a,color:i="standard",count:s=1,defaultPage:l=1,disabled:d=!1,getItemAriaLabel:c=cS,hideNextButton:f=!1,hidePrevButton:p=!1,renderItem:g=T=>u(oS,Ee({},T)),shape:h="circular",showFirstButton:m=!1,showLastButton:v=!1,siblingCount:b=1,size:E="medium",variant:S="text"}=r,y=ja(r,aS),{items:w}=Kb(Ee({},r,{componentName:"Pagination"})),C=Ee({},r,{boundaryCount:o,color:i,count:s,defaultPage:l,disabled:d,getItemAriaLabel:c,hideNextButton:f,hidePrevButton:p,renderItem:g,shape:h,showFirstButton:m,showLastButton:v,siblingCount:b,size:E,variant:S}),_=iS(C);return u(sS,Ee({"aria-label":"pagination navigation",className:Ca(_.root,a),ownerState:C,ref:n},y,{children:u(lS,{className:_.ul,ownerState:C,children:w.map((T,O)=>u("li",{children:g(Ee({},T,{color:i,"aria-label":c(T.type,T.page,T.selected),shape:h,size:E,variant:S}))},O))})}))}),uS=dS;var Ul=(e=>(e.APPROVED="APPROVED",e.REVOKED="REVOKED",e))(Ul||{}),fS=(e=>(e.MODIFIED_ON="MODIFIED_ON",e.EXPIRED_ON="EXPIRED_ON",e))(fS||{}),mt=(e=>(e.GAIN_ACCESS="GAIN_ACCESS",e.RENEW_ACCESS="RENEW_ACCESS",e.REVOKE_ACCESS="REVOKE_ACCESS",e))(mt||{});const pS="org.sagebionetworks.repo.model.file.GoogleCloudFileHandle",hS="org.sagebionetworks.repo.model.file.S3FileHandle",Yl=Wf(hS,pS),mS="org.sagebionetworks.repo.model.file.ExternalFileHandle",gS="org.sagebionetworks.repo.model.file.ExternalObjectStoreFileHandle",yS="org.sagebionetworks.repo.model.file.ProxyFileHandle",vS=Wf(yS,gS,mS);function bS(e,t){const{accessToken:n}=ie(),r={accessRequirementId:e};return yp(["approvedSubmissionInfo",r],async o=>await Wg({...r,nextPageToken:o.pageParam},n),{...t,getNextPageParam:o=>o.nextPageToken})}function Pp(e,t,n=lp,r){const{accessToken:o}=ie();return Cr(Pl.bundle(e,t,n),()=>Gg(e,n,t,o),r)}function SS(e,t){const{accessToken:n}=ie();return Cr(Pl.children(e,!1),()=>Gf(e,n),t)}function tL(e,t){const{accessToken:n}=ie();return yp(Pl.children(e,!0),async r=>await Gf({...e,includeTotalChildCount:r.pageParam?!1:e.includeTotalChildCount,nextPageToken:r.pageParam},n,r.signal),{...t,getNextPageParam:r=>r.nextPageToken})}function wS(e,t){const{accessToken:n}=ie();return Cr(["entityHeaders",n,e],()=>Sl(e,n),t)}var Qs={exports:{}},we={},hr={exports:{}},an={};function Dp(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function CS(e,t,n){}function _S(e,t,n){}var ES=/javascript\s*\:/img;function xS(e,t){return ES.test(t)?"":t}an.whiteList=Dp();an.getDefaultWhiteList=Dp;an.onAttr=CS;an.onIgnoreAttr=_S;an.safeAttrValue=xS;var TS={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Mn=TS;function OS(e,t){e=Mn.trimRight(e),e[e.length-1]!==";"&&(e+=";");var n=e.length,r=!1,o=0,a=0,i="";function s(){if(!r){var c=Mn.trim(e.slice(o,a)),f=c.indexOf(":");if(f!==-1){var p=Mn.trim(c.slice(0,f)),g=Mn.trim(c.slice(f+1));if(p){var h=t(o,i.length,p,g,c);h&&(i+=h+"; ")}}}o=a+1}for(;a<n;a++){var l=e[a];if(l==="/"&&e[a+1]==="*"){var d=e.indexOf("*/",a+2);if(d===-1)break;a=d+1,o=a+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||s():l===`
`&&s()}return Mn.trim(i)}var IS=OS,Pr=an,NS=IS;function Bc(e){return e==null}function RS(e){var t={};for(var n in e)t[n]=e[n];return t}function Mp(e){e=RS(e||{}),e.whiteList=e.whiteList||Pr.whiteList,e.onAttr=e.onAttr||Pr.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Pr.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Pr.safeAttrValue,this.options=e}Mp.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,o=n.onAttr,a=n.onIgnoreAttr,i=n.safeAttrValue,s=NS(e,function(l,d,c,f,p){var g=r[c],h=!1;if(g===!0?h=g:typeof g=="function"?h=g(f):g instanceof RegExp&&(h=g.test(f)),h!==!0&&(h=!1),f=i(c,f),!!f){var m={position:d,sourcePosition:l,source:p,isWhite:h};if(h){var v=o(c,f,m);return Bc(v)?c+":"+f:v}else{var v=a(c,f,m);if(!Bc(v))return v}}});return s};var AS=Mp;(function(e,t){var n=an,r=AS;function o(i,s){var l=new r(s);return l.process(i)}t=e.exports=o,t.FilterCSS=r;for(var a in n)t[a]=n[a];typeof window<"u"&&(window.filterCSS=e.exports)})(hr,hr.exports);var jl={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,n=t.exec(e);return n?n.index:-1}},kS=hr.exports.FilterCSS,LS=hr.exports.getDefaultWhiteList,Ea=jl;function Vp(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Bp=new kS;function qS(e,t,n){}function PS(e,t,n){}function DS(e,t,n){}function MS(e,t,n){}function Fp(e){return e.replace(BS,"&lt;").replace(FS,"&gt;")}function VS(e,t,n,r){if(n=jp(n),t==="href"||t==="src"){if(n=Ea.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(t==="background"){if(Dr.lastIndex=0,Dr.test(n))return""}else if(t==="style"){if(Fc.lastIndex=0,Fc.test(n)||($c.lastIndex=0,$c.test(n)&&(Dr.lastIndex=0,Dr.test(n))))return"";r!==!1&&(r=r||Bp,n=r.process(n))}return n=Wp(n),n}var BS=/</g,FS=/>/g,$S=/"/g,HS=/&quot;/g,zS=/&#([a-zA-Z0-9]*);?/gim,US=/&colon;?/gim,YS=/&newline;?/gim,Dr=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Fc=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,$c=/u\s*r\s*l\s*\(.*/gi;function $p(e){return e.replace($S,"&quot;")}function Hp(e){return e.replace(HS,'"')}function zp(e){return e.replace(zS,function(n,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function Up(e){return e.replace(US,":").replace(YS," ")}function Yp(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return Ea.trim(t)}function jp(e){return e=Hp(e),e=zp(e),e=Up(e),e=Yp(e),e}function Wp(e){return e=$p(e),e=Fp(e),e}function jS(){return""}function WS(e,t){typeof t!="function"&&(t=function(){});var n=!Array.isArray(e);function r(i){return n?!0:Ea.indexOf(e,i)!==-1}var o=[],a=!1;return{onIgnoreTag:function(i,s,l){if(r(i))if(l.isClosing){var d="[/removed]",c=l.position+d.length;return o.push([a!==!1?a:l.position,c]),a=!1,d}else return a||(a=l.position),"[removed]";else return t(i,s,l)},remove:function(i){var s="",l=0;return Ea.forEach(o,function(d){s+=i.slice(l,d[0]),l=d[1]}),s+=i.slice(l),s}}}function GS(e){for(var t="",n=0;n<e.length;){var r=e.indexOf("<!--",n);if(r===-1){t+=e.slice(n);break}t+=e.slice(n,r);var o=e.indexOf("-->",r);if(o===-1)break;n=o+3}return t}function KS(e){var t=e.split("");return t=t.filter(function(n){var r=n.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}we.whiteList=Vp();we.getDefaultWhiteList=Vp;we.onTag=qS;we.onIgnoreTag=PS;we.onTagAttr=DS;we.onIgnoreTagAttr=MS;we.safeAttrValue=VS;we.escapeHtml=Fp;we.escapeQuote=$p;we.unescapeQuote=Hp;we.escapeHtmlEntities=zp;we.escapeDangerHtml5Entities=Up;we.clearNonPrintableCharacter=Yp;we.friendlyAttrValue=jp;we.escapeAttrValue=Wp;we.onIgnoreTagStripAll=jS;we.StripTagBody=WS;we.stripCommentTag=GS;we.stripBlankChar=KS;we.cssFilter=Bp;we.getDefaultCSSWhiteList=LS;var Ga={},Rt=jl;function XS(e){var t=Rt.spaceIndex(e),n;return t===-1?n=e.slice(1,-1):n=e.slice(1,t+1),n=Rt.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function QS(e){return e.slice(0,2)==="</"}function ZS(e,t,n){var r="",o=0,a=!1,i=!1,s=0,l=e.length,d="",c="";e:for(s=0;s<l;s++){var f=e.charAt(s);if(a===!1){if(f==="<"){a=s;continue}}else if(i===!1){if(f==="<"){r+=n(e.slice(o,s)),a=s,o=s;continue}if(f===">"||s===l-1){r+=n(e.slice(o,a)),c=e.slice(a,s+1),d=XS(c),r+=t(a,r.length,d,c,QS(c)),o=s+1,a=!1;continue}if(f==='"'||f==="'")for(var p=1,g=e.charAt(s-p);g.trim()===""||g==="=";){if(g==="="){i=f;continue e}g=e.charAt(s-++p)}}else if(f===i){i=!1;continue}}return o<l&&(r+=n(e.substr(o))),r}var JS=/[^a-zA-Z0-9\\_:.-]/gim;function ew(e,t){var n=0,r=0,o=[],a=!1,i=e.length;function s(p,g){if(p=Rt.trim(p),p=p.replace(JS,"").toLowerCase(),!(p.length<1)){var h=t(p,g||"");h&&o.push(h)}}for(var l=0;l<i;l++){var d=e.charAt(l),c,f;if(a===!1&&d==="="){a=e.slice(n,l),n=l+1,r=e.charAt(n)==='"'||e.charAt(n)==="'"?n:nw(e,l+1);continue}if(a!==!1&&l===r){if(f=e.indexOf(d,l+1),f===-1)break;c=Rt.trim(e.slice(r+1,f)),s(a,c),a=!1,l=f,n=l+1;continue}if(/\s|\n|\t/.test(d))if(e=e.replace(/\s|\n|\t/g," "),a===!1)if(f=tw(e,l),f===-1){c=Rt.trim(e.slice(n,l)),s(c),a=!1,n=l+1;continue}else{l=f-1;continue}else if(f=rw(e,l-1),f===-1){c=Rt.trim(e.slice(n,l)),c=Hc(c),s(a,c),a=!1,n=l+1;continue}else continue}return n<e.length&&(a===!1?s(e.slice(n)):s(a,Hc(Rt.trim(e.slice(n))))),Rt.trim(o.join(" "))}function tw(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="="?t:-1}}function nw(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="'"||n==='"'?t:-1}}function rw(e,t){for(;t>0;t--){var n=e[t];if(n!==" ")return n==="="?t:-1}}function ow(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function Hc(e){return ow(e)?e.substr(1,e.length-2):e}Ga.parseTag=ZS;Ga.parseAttr=ew;var aw=hr.exports.FilterCSS,Ze=we,Gp=Ga,iw=Gp.parseTag,sw=Gp.parseAttr,Jr=jl;function Mr(e){return e==null}function lw(e){var t=Jr.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=Jr.trim(e.slice(t+1,-1));var n=e[e.length-1]==="/";return n&&(e=Jr.trim(e.slice(0,-1))),{html:e,closing:n}}function cw(e){var t={};for(var n in e)t[n]=e[n];return t}function dw(e){var t={};for(var n in e)Array.isArray(e[n])?t[n.toLowerCase()]=e[n].map(function(r){return r.toLowerCase()}):t[n.toLowerCase()]=e[n];return t}function Kp(e){e=cw(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Ze.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=dw(e.whiteList||e.allowList):e.whiteList=Ze.whiteList,e.onTag=e.onTag||Ze.onTag,e.onTagAttr=e.onTagAttr||Ze.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Ze.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Ze.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Ze.safeAttrValue,e.escapeHtml=e.escapeHtml||Ze.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new aw(e.css))}Kp.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,r=n.whiteList,o=n.onTag,a=n.onIgnoreTag,i=n.onTagAttr,s=n.onIgnoreTagAttr,l=n.safeAttrValue,d=n.escapeHtml,c=t.cssFilter;n.stripBlankChar&&(e=Ze.stripBlankChar(e)),n.allowCommentTag||(e=Ze.stripCommentTag(e));var f=!1;n.stripIgnoreTagBody&&(f=Ze.StripTagBody(n.stripIgnoreTagBody,a),a=f.onIgnoreTag);var p=iw(e,function(g,h,m,v,b){var E={sourcePosition:g,position:h,isClosing:b,isWhite:Object.prototype.hasOwnProperty.call(r,m)},S=o(m,v,E);if(!Mr(S))return S;if(E.isWhite){if(E.isClosing)return"</"+m+">";var y=lw(v),w=r[m],C=sw(y.html,function(_,T){var O=Jr.indexOf(w,_)!==-1,R=i(m,_,T,O);return Mr(R)?O?(T=l(m,_,T,c),T?_+'="'+T+'"':_):(R=s(m,_,T,O),Mr(R)?void 0:R):R});return v="<"+m,C&&(v+=" "+C),y.closing&&(v+=" /"),v+=">",v}else return S=a(m,v,E),Mr(S)?d(v):S},d);return f&&(p=f.remove(p)),p};var uw=Kp;(function(e,t){var n=we,r=Ga,o=uw;function a(s,l){var d=new o(l);return d.process(s)}t=e.exports=a,t.filterXSS=a,t.FilterXSS=o,function(){for(var s in n)t[s]=n[s];for(var l in r)t[l]=r[l]}(),typeof window<"u"&&(window.filterXSS=e.exports);function i(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}i()&&(self.filterXSS=e.exports)})(Qs,Qs.exports);const Xp=Qs.exports,Qp={whiteList:{a:["target","href","title","ref"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],body:[],br:[],button:["class"],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:["class"],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],g:[],h1:["toc"],h2:["toc"],h3:["toc"],h4:["toc"],h5:["toc"],h6:["toc"],head:[],header:[],hr:[],html:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:["class"],mark:[],nav:[],noscript:[],ol:["class"],p:[],pre:[],s:[],section:[],small:[],span:["data-widgetparams","class","id"],sub:[],summary:[],sup:[],strong:[],svg:[],table:["width","border","align","valign","class"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign","class"],thead:["class","align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:["class"],video:["autoplay","controls","loop","preload","src","height","width"]},stripIgnoreTagBody:!0,allowCommentTag:!1,css:!1,onIgnoreTag:function(e,t,n){if(e==="!doctype")return t},safeAttrValue:function(e,t,n){return e==="img"&&t==="src"?n&&(n.startsWith("data:image/")||n.startsWith("http"))?n:"":n}};function eo(e){let t="pill-xl ";const{align:n="",highlight:r=""}=e,o=n.toLowerCase();o==="left"&&(t+="floatLeft "),o==="right"&&(t+="floatright ");const a=r==="true"?"secondary":"light-secondary";return o==="center"?u("div",{className:"bootstrap-4-backport",style:{textAlign:"center"},children:u(_e,{href:e.url,className:t,variant:a,children:e.text})}):u("span",{className:"bootstrap-4-backport",children:u(_e,{href:e.url,className:t,variant:a,children:e.text})})}try{eo.displayName="MarkdownButton",eo.__docgenInfo={description:"",displayName:"MarkdownButton",props:{align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"string"}},highlight:{defaultValue:null,description:"",name:"highlight",required:!1,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownButton.tsx#MarkdownButton"]={docgenInfo:eo.__docgenInfo,name:"MarkdownButton",path:"src/lib/containers/markdown/widget/MarkdownButton.tsx#MarkdownButton"})}catch{}async function fw(e,t,n){const r=new Set;try{let o=await xn(n,e,t);for(;Kg(o);){if(r.has(o.id))throw new Error("Link forms a cycle.");r.add(o.id),o=await xn(n,o.linksTo.targetId,o.linksTo.targetVersionNumber)}return o}catch(o){throw new Error(`${e} could not be resolved.
${o.message}`)}}function pw(e,t,n){const{accessToken:r}=ie();return Cr(["resolveLinkEntity",e,t],()=>fw(e,t,r),n)}function hw(e,t,n){const{accessToken:r}=ie();return Cr(["team",e,"member",t],()=>Xg(e,t,r),n)}function mw(e){const t=window.open("","");t==null||t.document.write(e),t==null||t.document.close()}function to(e){const{rawHtml:t}=e,[n,r]=x.exports.useState(!1);return N(H,{children:[u(fv,{title:"Open Untrusted Content in New Window?",modalBody:'Click "OK" to leave this page and open this content in a new window; this enables additional functionality, but should only be done if you trust the content.',show:n,confirmButtonText:"OK",confirmButtonVariant:"sds-primary",onConfirm:()=>{mw(t),r(!1)},onCancel:()=>r(!1)}),N(nn,{variant:"info",dismissible:!1,show:!0,transition:!1,children:["Limited rendering only."," ",u("a",{onClick:()=>r(!0),children:"External view available."})]})]})}try{to.displayName="SanitizedWarning",to.__docgenInfo={description:"",displayName:"SanitizedWarning",props:{rawHtml:{defaultValue:null,description:"",name:"rawHtml",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FilePreview/HtmlPreview/SanitizedWarning.tsx#SanitizedWarning"]={docgenInfo:to.__docgenInfo,name:"SanitizedWarning",path:"src/lib/containers/FilePreview/HtmlPreview/SanitizedWarning.tsx#SanitizedWarning"})}catch{}function gw(e){const{rawHtml:t,isLoading:n,isTrusted:r}=e;return x.exports.useMemo(()=>{if(!n)return r?t:Xp(t,Qp)},[n,r,t])}function no(e){const{createdByUserId:t,rawHtml:n}=e,{data:r,isLoading:o}=hw(Iy,t),i=gw({rawHtml:n,isLoading:o,isTrusted:!!r});return o?u(za,{}):N(H,{children:[n!==i&&u(to,{rawHtml:n}),u("iframe",{srcDoc:i,style:{border:0,width:"100%"}})]})}try{no.displayName="HtmlPreview",no.__docgenInfo={description:"Renders raw HTML. Uses file handle data to determine if the content should be sanitized.",displayName:"HtmlPreview",props:{createdByUserId:{defaultValue:null,description:"",name:"createdByUserId",required:!0,type:{name:"string"}},rawHtml:{defaultValue:null,description:"",name:"rawHtml",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FilePreview/HtmlPreview/HtmlPreview.tsx#HtmlPreview"]={docgenInfo:no.__docgenInfo,name:"HtmlPreview",path:"src/lib/containers/FilePreview/HtmlPreview/HtmlPreview.tsx#HtmlPreview"})}catch{}var Se=(e=>(e.PLAINTEXT="PLAINTEXT",e.CODE="CODE",e.ZIP="ZIP",e.CSV="CSV",e.IMAGE="IMAGE",e.NONE="NONE",e.TAB="TAB",e.HTML="HTML",e.PDF="PDF",e.IPYNB="IPYNB",e.VIDEO="VIDEO",e.MARKDOWN="MARKDOWN",e.TIFF="TIFF",e))(Se||{});const yw=30*Ny;function Xn(e){const{fileHandle:t,fileHandleAssociation:n,previewType:r}=e,o={requestedFiles:[n],includePreSignedURLs:!0,includeFileHandles:!1,includePreviewPreSignedURLs:!1},{data:a,isLoading:i}=dv(t,o,yw,{useErrorBoundary:!0});return i?u(za,{}):r===Se.HTML?u(no,{rawHtml:a,createdByUserId:t.createdBy}):(r!==Se.NONE&&console.warn(`Rendering a preview of type ${r} is not supported in Portals`),u(H,{}))}try{Xn.displayName="FileHandleContentRenderer",Xn.__docgenInfo={description:"Fetches the content for and renders the contents of a file handle.",displayName:"FileHandleContentRenderer",props:{fileHandle:{defaultValue:null,description:"The file handle whose contents should be downloaded and rendered",name:"fileHandle",required:!0,type:{name:"FileHandle"}},fileHandleAssociation:{defaultValue:null,description:"The association between the file handle and an object which will give the user permission to access the file data",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},previewType:{defaultValue:null,description:"Informs how to render the file data",name:"previewType",required:!0,type:{name:"enum",value:[{value:'"PLAINTEXT"'},{value:'"CODE"'},{value:'"ZIP"'},{value:'"CSV"'},{value:'"IMAGE"'},{value:'"NONE"'},{value:'"TAB"'},{value:'"HTML"'},{value:'"PDF"'},{value:'"IPYNB"'},{value:'"VIDEO"'},{value:'"MARKDOWN"'},{value:'"TIFF"'}]}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FilePreview/FileHandleContentRenderer.tsx#FileHandleContentRenderer"]={docgenInfo:Xn.__docgenInfo,name:"FileHandleContentRenderer",path:"src/lib/containers/FilePreview/FileHandleContentRenderer.tsx#FileHandleContentRenderer"})}catch{}const Zp=["image/bmp","image/pjpeg","image/jpeg","image/jpg","image/jpe","image/gif","image/png","image/svg+xml"],vw=[".mp4",".m4a",".m4p",".m4b",".m4r",".m4v"],bw=[".ogv",".ogg"],Sw=[...vw,...bw,".webm"],ww=[".cwl",".wdl",".json",".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx"],Cw=[".md",".markdown",".rmd"];function _w(e){const t=e.lastIndexOf(".");return t===-1?null:e.substring(t)}function Ew(e){if(!Yl(e))return Se.NONE;const t=_w(e.fileName);return t&&Sw.includes(t)?Se.VIDEO:t===".ipynb"?Se.IPYNB:Zp.includes(e.contentType)?Se.IMAGE:e.contentType==="text/html"?Se.HTML:e.contentType.toLowerCase().startsWith("application/pdf")?Se.PDF:t&&ww.includes(t)?Se.CODE:t&&Cw.includes(t)?Se.MARKDOWN:e.contentType==="image/tiff"?Se.TIFF:Se.NONE}function xw(e,t){const n=e.contentType;return Yl(e)?Zp.includes(e.contentType)?Se.IMAGE:n.toLowerCase().startsWith("text/")?n.toLowerCase()==="text/csv"?t.contentType==="application/zip"?Se.ZIP:Se.CSV:n.toLowerCase()==="text/tab-separated-values"?Se.TAB:Se.PLAINTEXT:n.toLowerCase().startsWith("application/pdf")?Se.PDF:Se.NONE:Se.NONE}function ro(e){const{bundle:t}=e,{accessToken:n}=ie(),r=!!n;if(!wl(t.entity))throw new Error(`Entity ${t.entity.id} is not a FileEntity`);const o=t.entity.dataFileHandleId,a=t.fileHandles.find(s=>s.id===o);if(!a&&!r)return u(nn,{dismissible:!1,show:!0,variant:"danger",transition:!1,children:u(Qg,{})});if(a){const s=Ew(a);if(s!==Se.NONE)return u(Xn,{fileHandle:a,fileHandleAssociation:{fileHandleId:o,associateObjectId:t.entity.id,associateObjectType:Re.FileEntity},previewType:s})}const i=t.fileHandles.find(s=>Yl(s)&&s.isPreview);if(i&&a){const s=xw(i,a);if(s!==Se.NONE)return u(Xn,{fileHandle:i,fileHandleAssociation:{fileHandleId:i.id,associateObjectId:t.entity.id,associateObjectType:Re.FileEntity},previewType:s})}throw new Error(`Could not render a preview for entity: ${t.entity.id}`)}try{ro.displayName="FileEntityPreview",ro.__docgenInfo={description:`Given an entity bundle that contains a FileEntity, render a preview of the file. The rendered preview will be determined based on the
content type and file name of the file handle(s) associated with the FileEntity.`,displayName:"FileEntityPreview",props:{bundle:{defaultValue:null,description:"An entity bundle containing a FileEntity, and its fileHandles",name:"bundle",required:!0,type:{name:"EntityBundle<{ readonly includeEntity: true; readonly includeEntityPath: true; readonly includeAnnotations: true; readonly includePermissions: true; readonly includeHasChildren: true; readonly includeAccessControlList: true; ... 7 more ...; readonly includeRestrictionInformation: true; }>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FilePreview/FileEntityPreview.tsx#FileEntityPreview"]={docgenInfo:ro.__docgenInfo,name:"FileEntityPreview",path:"src/lib/containers/FilePreview/FileEntityPreview.tsx#FileEntityPreview"})}catch{}function oo(e){let{entityId:t,versionNumber:n}=e;const{data:r,isLoading:o}=pw(t,n),a=r&&wl(r),{data:i,isLoading:s}=Pp(r==null?void 0:r.id,r==null?void 0:r.versionNumber,lp,{enabled:!!a,useErrorBoundary:!0});if(o||s)return u(za,{});if(a)return u(ro,{bundle:i});throw new Error(`${t} is not a File and cannot be previewed.`)}try{oo.displayName="EntityPreview",oo.__docgenInfo={description:"Returns a preview of an entity. Currently only works for FileEntities, and Links that resolve to FileEntities.",displayName:"EntityPreview",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FilePreview/EntityPreview.tsx#EntityPreview"]={docgenInfo:oo.__docgenInfo,name:"EntityPreview",path:"src/lib/containers/FilePreview/EntityPreview.tsx#EntityPreview"})}catch{}function ao(e){var a;const t=Fy(e.entityId);if(t==null)throw new Error(`${e.entityId} is not a valid Synapse ID`);const n=parseInt((a=e.versionNumber)!=null?a:""),r=t.targetId,o=Number.isNaN(n)?t.targetVersionNumber:n;return u(oo,{entityId:r,versionNumber:o})}try{ao.displayName="MarkdownEntityPreview",ao.__docgenInfo={description:"",displayName:"MarkdownEntityPreview",props:{entityId:{defaultValue:null,description:'A Synapse Entity ID that may optionally contain a "dot" version, e.g. syn123 or syn123.2',name:"entityId",required:!0,type:{name:"string"}},versionNumber:{defaultValue:null,description:"An optional Entity version number.",name:"versionNumber",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownEntityPreview.tsx#MarkdownEntityPreview"]={docgenInfo:ao.__docgenInfo,name:"MarkdownEntityPreview",path:"src/lib/containers/markdown/widget/MarkdownEntityPreview.tsx#MarkdownEntityPreview"})}catch{}const io=({info:e})=>u(H,{children:e&&N("p",{className:"SubmissionInfoCard",children:[u("strong",{children:" Project Lead: "})," ",u("span",{children:e.projectLead})," ",u("br",{}),u("strong",{children:" Institution: "})," ",u("span",{children:e.institution})," ",u("br",{}),u("strong",{children:" Data Access Request Submitted By: "})," ",u(On,{ownerId:e.submittedBy,size:Sa})," ",u("br",{}),N("strong",{children:[" ","Intended Data Use Statement (accepted on"," ",pr(Bt(e.modifiedOn),"M/D/YYYY"),"):"]}),u(De,{markdown:e.intendedDataUseStatement}),e.accessorChanges&&e.accessorChanges.map(t=>N("div",{children:[u(On,{ownerId:t.userId,size:Sa})," ",t.type]},`${t.userId}-${t.type}`))]})}),Qn=()=>N("p",{className:"SubmissionInfoCard",children:[u(Ml,{numCols:1,numRows:4}),u(Ks,{variant:"rectangular",width:"100%",height:80})]});try{io.displayName="SubmissionInfoCard",io.__docgenInfo={description:"",displayName:"SubmissionInfoCard",props:{info:{defaultValue:null,description:"",name:"info",required:!0,type:{name:"SubmissionInfo"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReportSubmissionInfo.tsx#SubmissionInfoCard"]={docgenInfo:io.__docgenInfo,name:"SubmissionInfoCard",path:"src/lib/containers/IDUReportSubmissionInfo.tsx#SubmissionInfoCard"})}catch{}try{Qn.displayName="LoadingSubmissionInfoCard",Qn.__docgenInfo={description:"",displayName:"LoadingSubmissionInfoCard",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReportSubmissionInfo.tsx#LoadingSubmissionInfoCard"]={docgenInfo:Qn.__docgenInfo,name:"LoadingSubmissionInfoCard",path:"src/lib/containers/IDUReportSubmissionInfo.tsx#LoadingSubmissionInfoCard"})}catch{}const so=e=>{var f;const{accessRequirementId:t}=e,{ref:n,inView:r}=Pn(),{data:o,status:a,isLoading:i,hasNextPage:s,isFetchingNextPage:l,fetchNextPage:d}=bS(t,{useErrorBoundary:!0});x.exports.useEffect(()=>{a==="success"&&!l&&s&&d&&r&&d()},[a,s,l,d,r]);const c=(f=o==null?void 0:o.pages.flatMap(p=>p.results))!=null?f:[];return N(H,{children:[c.length>0&&N("div",{className:"IDUReport",children:[c.map(p=>N(ge.Fragment,{children:[u(io,{info:p}),u("hr",{})]},JSON.stringify(p))),u("div",{ref:n})]}),(i||l)&&N(H,{children:[u(Qn,{}),u(Qn,{})]})]})};try{so.displayName="IDUReport",so.__docgenInfo={description:"",displayName:"IDUReport",props:{accessRequirementId:{defaultValue:null,description:"",name:"accessRequirementId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/IDUReport.tsx#IDUReport"]={docgenInfo:so.__docgenInfo,name:"IDUReport",path:"src/lib/containers/IDUReport.tsx#IDUReport"})}catch{}function lo(e){const{accessRestrictionId:t}=e;return u(so,{accessRequirementId:t})}try{lo.displayName="MarkdownIDUReport",lo.__docgenInfo={description:"",displayName:"MarkdownIDUReport",props:{accessRestrictionId:{defaultValue:null,description:"",name:"accessRestrictionId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownIDUReport.tsx#MarkdownIDUReport"]={docgenInfo:lo.__docgenInfo,name:"MarkdownIDUReport",path:"src/lib/containers/markdown/widget/MarkdownIDUReport.tsx#MarkdownIDUReport"})}catch{}function Tw(e){let t;const n=new Set,r=(d,c)=>{const f=typeof d=="function"?d(t):d;if(f!==t){const p=t;t=c?f:Object.assign({},t,f),n.forEach(g=>g(t,p))}},o=()=>t,a=(d,c=o,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=c(t);function g(){const h=c(t);if(!f(p,h)){const m=p;d(p=h,m)}}return n.add(g),()=>n.delete(g)},l={setState:r,getState:o,subscribe:(d,c,f)=>c||f?a(d,c,f):(n.add(d),()=>n.delete(d)),destroy:()=>n.clear()};return t=e(r,o,l),l}const Ow=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),zc=Ow?x.exports.useEffect:x.exports.useLayoutEffect;function Iw(e){const t=typeof e=="function"?Tw(e):e,n=(r=t.getState,o=Object.is)=>{const[,a]=x.exports.useReducer(v=>v+1,0),i=t.getState(),s=x.exports.useRef(i),l=x.exports.useRef(r),d=x.exports.useRef(o),c=x.exports.useRef(!1),f=x.exports.useRef();f.current===void 0&&(f.current=r(i));let p,g=!1;(s.current!==i||l.current!==r||d.current!==o||c.current)&&(p=r(i),g=!o(f.current,p)),zc(()=>{g&&(f.current=p),s.current=i,l.current=r,d.current=o,c.current=!1});const h=x.exports.useRef(i);zc(()=>{const v=()=>{try{const E=t.getState(),S=l.current(E);d.current(f.current,S)||(s.current=E,f.current=S,a())}catch{c.current=!0,a()}},b=t.subscribe(v);return t.getState()!==h.current&&v(),b},[]);const m=g?p:f.current;return x.exports.useDebugValue(m),m};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,t];return{next(){const o=r.length<=0;return{value:r.shift(),done:o}}}},n}function Nw(){const e=x.exports.createContext(void 0);return{Provider:({initialStore:o,createStore:a,children:i})=>{const s=x.exports.useRef();return s.current||(o&&(console.warn("Provider initialStore is deprecated and will be removed in the next version."),a||(a=()=>o)),s.current=a()),x.exports.createElement(e.Provider,{value:s.current},i)},useStore:(o,a=Object.is)=>{const i=x.exports.useContext(e);if(!i)throw new Error("Seems like you have not used zustand provider as an ancestor.");return i(o,a)},useStoreApi:()=>{const o=x.exports.useContext(e);if(!o)throw new Error("Seems like you have not used zustand provider as an ancestor.");return x.exports.useMemo(()=>({getState:o.getState,setState:o.setState,subscribe:o.subscribe,destroy:o.destroy}),[o])}}}var Rw={value:()=>{}};function Ka(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new co(n)}function co(e){this._=e}function Aw(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}co.prototype=Ka.prototype={constructor:co,on:function(e,t){var n=this._,r=Aw(e+"",n),o,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((o=(e=r[a]).type)&&(o=kw(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(o=(e=r[a]).type)n[o]=Uc(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Uc(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new co(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,a;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,o=a.length;r<o;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};function kw(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Uc(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Rw,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Zs="http://www.w3.org/1999/xhtml";const Yc={svg:"http://www.w3.org/2000/svg",xhtml:Zs,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xa(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Yc.hasOwnProperty(t)?{space:Yc[t],local:e}:e}function Lw(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Zs&&t.documentElement.namespaceURI===Zs?t.createElement(e):t.createElementNS(n,e)}}function qw(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Jp(e){var t=Xa(e);return(t.local?qw:Lw)(t)}function Pw(){}function Wl(e){return e==null?Pw:function(){return this.querySelector(e)}}function Dw(e){typeof e!="function"&&(e=Wl(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=new Array(i),l,d,c=0;c<i;++c)(l=a[c])&&(d=e.call(l,l.__data__,c,a))&&("__data__"in l&&(d.__data__=l.__data__),s[c]=d);return new He(r,this._parents)}function Mw(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Vw(){return[]}function eh(e){return e==null?Vw:function(){return this.querySelectorAll(e)}}function Bw(e){return function(){return Mw(e.apply(this,arguments))}}function Fw(e){typeof e=="function"?e=Bw(e):e=eh(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i=t[a],s=i.length,l,d=0;d<s;++d)(l=i[d])&&(r.push(e.call(l,l.__data__,d,i)),o.push(l));return new He(r,o)}function th(e){return function(){return this.matches(e)}}function nh(e){return function(t){return t.matches(e)}}var $w=Array.prototype.find;function Hw(e){return function(){return $w.call(this.children,e)}}function zw(){return this.firstElementChild}function Uw(e){return this.select(e==null?zw:Hw(typeof e=="function"?e:nh(e)))}var Yw=Array.prototype.filter;function jw(){return Array.from(this.children)}function Ww(e){return function(){return Yw.call(this.children,e)}}function Gw(e){return this.selectAll(e==null?jw:Ww(typeof e=="function"?e:nh(e)))}function Kw(e){typeof e!="function"&&(e=th(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],l,d=0;d<i;++d)(l=a[d])&&e.call(l,l.__data__,d,a)&&s.push(l);return new He(r,this._parents)}function rh(e){return new Array(e.length)}function Xw(){return new He(this._enter||this._groups.map(rh),this._parents)}function xa(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}xa.prototype={constructor:xa,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Qw(e){return function(){return e}}function Zw(e,t,n,r,o,a){for(var i=0,s,l=t.length,d=a.length;i<d;++i)(s=t[i])?(s.__data__=a[i],r[i]=s):n[i]=new xa(e,a[i]);for(;i<l;++i)(s=t[i])&&(o[i]=s)}function Jw(e,t,n,r,o,a,i){var s,l,d=new Map,c=t.length,f=a.length,p=new Array(c),g;for(s=0;s<c;++s)(l=t[s])&&(p[s]=g=i.call(l,l.__data__,s,t)+"",d.has(g)?o[s]=l:d.set(g,l));for(s=0;s<f;++s)g=i.call(e,a[s],s,a)+"",(l=d.get(g))?(r[s]=l,l.__data__=a[s],d.delete(g)):n[s]=new xa(e,a[s]);for(s=0;s<c;++s)(l=t[s])&&d.get(p[s])===l&&(o[s]=l)}function eC(e){return e.__data__}function tC(e,t){if(!arguments.length)return Array.from(this,eC);var n=t?Jw:Zw,r=this._parents,o=this._groups;typeof e!="function"&&(e=Qw(e));for(var a=o.length,i=new Array(a),s=new Array(a),l=new Array(a),d=0;d<a;++d){var c=r[d],f=o[d],p=f.length,g=nC(e.call(c,c&&c.__data__,d,r)),h=g.length,m=s[d]=new Array(h),v=i[d]=new Array(h),b=l[d]=new Array(p);n(c,f,m,v,b,g,t);for(var E=0,S=0,y,w;E<h;++E)if(y=m[E]){for(E>=S&&(S=E+1);!(w=v[S])&&++S<h;);y._next=w||null}}return i=new He(i,r),i._enter=s,i._exit=l,i}function nC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function rC(){return new He(this._exit||this._groups.map(rh),this._parents)}function oC(e,t,n){var r=this.enter(),o=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?a.remove():n(a),r&&o?r.merge(o).order():o}function aC(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),s=new Array(o),l=0;l<i;++l)for(var d=n[l],c=r[l],f=d.length,p=s[l]=new Array(f),g,h=0;h<f;++h)(g=d[h]||c[h])&&(p[h]=g);for(;l<o;++l)s[l]=n[l];return new He(s,this._parents)}function iC(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,a=r[o],i;--o>=0;)(i=r[o])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function sC(e){e||(e=lC);function t(f,p){return f&&p?e(f.__data__,p.__data__):!f-!p}for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i=n[a],s=i.length,l=o[a]=new Array(s),d,c=0;c<s;++c)(d=i[c])&&(l[c]=d);l.sort(t)}return new He(o,this._parents).order()}function lC(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function cC(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function dC(){return Array.from(this)}function uC(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null}function fC(){let e=0;for(const t of this)++e;return e}function pC(){return!this.node()}function hC(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],a=0,i=o.length,s;a<i;++a)(s=o[a])&&e.call(s,s.__data__,a,o);return this}function mC(e){return function(){this.removeAttribute(e)}}function gC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yC(e,t){return function(){this.setAttribute(e,t)}}function vC(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function bC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function SC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function wC(e,t){var n=Xa(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?gC:mC:typeof t=="function"?n.local?SC:bC:n.local?vC:yC)(n,t))}function oh(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function CC(e){return function(){this.style.removeProperty(e)}}function _C(e,t,n){return function(){this.style.setProperty(e,t,n)}}function EC(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function xC(e,t,n){return arguments.length>1?this.each((t==null?CC:typeof t=="function"?EC:_C)(e,t,n==null?"":n)):In(this.node(),e)}function In(e,t){return e.style.getPropertyValue(t)||oh(e).getComputedStyle(e,null).getPropertyValue(t)}function TC(e){return function(){delete this[e]}}function OC(e,t){return function(){this[e]=t}}function IC(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function NC(e,t){return arguments.length>1?this.each((t==null?TC:typeof t=="function"?IC:OC)(e,t)):this.node()[e]}function ah(e){return e.trim().split(/^|\s+/)}function Gl(e){return e.classList||new ih(e)}function ih(e){this._node=e,this._names=ah(e.getAttribute("class")||"")}ih.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function sh(e,t){for(var n=Gl(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function lh(e,t){for(var n=Gl(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function RC(e){return function(){sh(this,e)}}function AC(e){return function(){lh(this,e)}}function kC(e,t){return function(){(t.apply(this,arguments)?sh:lh)(this,e)}}function LC(e,t){var n=ah(e+"");if(arguments.length<2){for(var r=Gl(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?kC:t?RC:AC)(n,t))}function qC(){this.textContent=""}function PC(e){return function(){this.textContent=e}}function DC(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function MC(e){return arguments.length?this.each(e==null?qC:(typeof e=="function"?DC:PC)(e)):this.node().textContent}function VC(){this.innerHTML=""}function BC(e){return function(){this.innerHTML=e}}function FC(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function $C(e){return arguments.length?this.each(e==null?VC:(typeof e=="function"?FC:BC)(e)):this.node().innerHTML}function HC(){this.nextSibling&&this.parentNode.appendChild(this)}function zC(){return this.each(HC)}function UC(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function YC(){return this.each(UC)}function jC(e){var t=typeof e=="function"?e:Jp(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function WC(){return null}function GC(e,t){var n=typeof e=="function"?e:Jp(e),r=t==null?WC:typeof t=="function"?t:Wl(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function KC(){var e=this.parentNode;e&&e.removeChild(this)}function XC(){return this.each(KC)}function QC(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ZC(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function JC(e){return this.select(e?ZC:QC)}function e_(e){return arguments.length?this.property("__data__",e):this.node().__data__}function t_(e){return function(t){e.call(this,t,this.__data__)}}function n_(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function r_(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,o=t.length,a;n<o;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function o_(e,t,n){return function(){var r=this.__on,o,a=t_(t);if(r){for(var i=0,s=r.length;i<s;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),o.value=t;return}}this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(o):this.__on=[o]}}function a_(e,t,n){var r=n_(e+""),o,a=r.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,d=s.length,c;l<d;++l)for(o=0,c=s[l];o<a;++o)if((i=r[o]).type===c.type&&i.name===c.name)return c.value}return}for(s=t?o_:r_,o=0;o<a;++o)this.each(s(r[o],t,n));return this}function ch(e,t,n){var r=oh(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function i_(e,t){return function(){return ch(this,e,t)}}function s_(e,t){return function(){return ch(this,e,t.apply(this,arguments))}}function l_(e,t){return this.each((typeof t=="function"?s_:i_)(e,t))}function*c_(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length,i;o<a;++o)(i=r[o])&&(yield i)}var dh=[null];function He(e,t){this._groups=e,this._parents=t}function Or(){return new He([[document.documentElement]],dh)}function d_(){return this}He.prototype=Or.prototype={constructor:He,select:Dw,selectAll:Fw,selectChild:Uw,selectChildren:Gw,filter:Kw,data:tC,enter:Xw,exit:rC,join:oC,merge:aC,selection:d_,order:iC,sort:sC,call:cC,nodes:dC,node:uC,size:fC,empty:pC,each:hC,attr:wC,style:xC,property:NC,classed:LC,text:MC,html:$C,raise:zC,lower:YC,append:jC,insert:GC,remove:XC,clone:JC,datum:e_,on:a_,dispatch:l_,[Symbol.iterator]:c_};function Je(e){return typeof e=="string"?new He([[document.querySelector(e)]],[document.documentElement]):new He([[e]],dh)}function u_(e){let t;for(;t=e.sourceEvent;)e=t;return e}function it(e,t){if(e=u_(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const f_={passive:!1},mr={capture:!0,passive:!1};function di(e){e.stopImmediatePropagation()}function yn(e){e.preventDefault(),e.stopImmediatePropagation()}function uh(e){var t=e.document.documentElement,n=Je(e).on("dragstart.drag",yn,mr);"onselectstart"in t?n.on("selectstart.drag",yn,mr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function fh(e,t){var n=e.document.documentElement,r=Je(e).on("dragstart.drag",null);t&&(r.on("click.drag",yn,mr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Vr=e=>()=>e;function Js(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:a,x:i,y:s,dx:l,dy:d,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:c}})}Js.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function p_(e){return!e.ctrlKey&&!e.button}function h_(){return this.parentNode}function m_(e,t){return t==null?{x:e.x,y:e.y}:t}function g_(){return navigator.maxTouchPoints||"ontouchstart"in this}function y_(){var e=p_,t=h_,n=m_,r=g_,o={},a=Ka("start","drag","end"),i=0,s,l,d,c,f=0;function p(y){y.on("mousedown.drag",g).filter(r).on("touchstart.drag",v).on("touchmove.drag",b,f_).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(y,w){if(!(c||!e.call(this,y,w))){var C=S(this,t.call(this,y,w),y,w,"mouse");!C||(Je(y.view).on("mousemove.drag",h,mr).on("mouseup.drag",m,mr),uh(y.view),di(y),d=!1,s=y.clientX,l=y.clientY,C("start",y))}}function h(y){if(yn(y),!d){var w=y.clientX-s,C=y.clientY-l;d=w*w+C*C>f}o.mouse("drag",y)}function m(y){Je(y.view).on("mousemove.drag mouseup.drag",null),fh(y.view,d),yn(y),o.mouse("end",y)}function v(y,w){if(!!e.call(this,y,w)){var C=y.changedTouches,_=t.call(this,y,w),T=C.length,O,R;for(O=0;O<T;++O)(R=S(this,_,y,w,C[O].identifier,C[O]))&&(di(y),R("start",y,C[O]))}}function b(y){var w=y.changedTouches,C=w.length,_,T;for(_=0;_<C;++_)(T=o[w[_].identifier])&&(yn(y),T("drag",y,w[_]))}function E(y){var w=y.changedTouches,C=w.length,_,T;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),_=0;_<C;++_)(T=o[w[_].identifier])&&(di(y),T("end",y,w[_]))}function S(y,w,C,_,T,O){var R=a.copy(),k=it(O||C,w),P,V,I;if((I=n.call(y,new Js("beforestart",{sourceEvent:C,target:p,identifier:T,active:i,x:k[0],y:k[1],dx:0,dy:0,dispatch:R}),_))!=null)return P=I.x-k[0]||0,V=I.y-k[1]||0,function q(A,M,$){var z=k,B;switch(A){case"start":o[T]=q,B=i++;break;case"end":delete o[T],--i;case"drag":k=it($||M,w),B=i;break}R.call(A,y,new Js(A,{sourceEvent:M,subject:I,target:p,identifier:T,active:B,x:k[0]+P,y:k[1]+V,dx:k[0]-z[0],dy:k[1]-z[1],dispatch:R}),_)}}return p.filter=function(y){return arguments.length?(e=typeof y=="function"?y:Vr(!!y),p):e},p.container=function(y){return arguments.length?(t=typeof y=="function"?y:Vr(y),p):t},p.subject=function(y){return arguments.length?(n=typeof y=="function"?y:Vr(y),p):n},p.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:Vr(!!y),p):r},p.on=function(){var y=a.on.apply(a,arguments);return y===a?p:y},p.clickDistance=function(y){return arguments.length?(f=(y=+y)*y,p):Math.sqrt(f)},p}function Kl(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ph(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ir(){}var gr=.7,Ta=1/gr,vn="\\s*([+-]?\\d+)\\s*",yr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",v_=/^#([0-9a-f]{3,8})$/,b_=new RegExp(`^rgb\\(${vn},${vn},${vn}\\)$`),S_=new RegExp(`^rgb\\(${lt},${lt},${lt}\\)$`),w_=new RegExp(`^rgba\\(${vn},${vn},${vn},${yr}\\)$`),C_=new RegExp(`^rgba\\(${lt},${lt},${lt},${yr}\\)$`),__=new RegExp(`^hsl\\(${yr},${lt},${lt}\\)$`),E_=new RegExp(`^hsla\\(${yr},${lt},${lt},${yr}\\)$`),jc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Kl(Ir,vr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Wc,formatHex:Wc,formatHex8:x_,formatHsl:T_,formatRgb:Gc,toString:Gc});function Wc(){return this.rgb().formatHex()}function x_(){return this.rgb().formatHex8()}function T_(){return hh(this).formatHsl()}function Gc(){return this.rgb().formatRgb()}function vr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=v_.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Kc(t):n===3?new Pe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Br(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Br(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=b_.exec(e))?new Pe(t[1],t[2],t[3],1):(t=S_.exec(e))?new Pe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=w_.exec(e))?Br(t[1],t[2],t[3],t[4]):(t=C_.exec(e))?Br(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=__.exec(e))?Zc(t[1],t[2]/100,t[3]/100,1):(t=E_.exec(e))?Zc(t[1],t[2]/100,t[3]/100,t[4]):jc.hasOwnProperty(e)?Kc(jc[e]):e==="transparent"?new Pe(NaN,NaN,NaN,0):null}function Kc(e){return new Pe(e>>16&255,e>>8&255,e&255,1)}function Br(e,t,n,r){return r<=0&&(e=t=n=NaN),new Pe(e,t,n,r)}function O_(e){return e instanceof Ir||(e=vr(e)),e?(e=e.rgb(),new Pe(e.r,e.g,e.b,e.opacity)):new Pe}function el(e,t,n,r){return arguments.length===1?O_(e):new Pe(e,t,n,r==null?1:r)}function Pe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Kl(Pe,el,ph(Ir,{brighter(e){return e=e==null?Ta:Math.pow(Ta,e),new Pe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?gr:Math.pow(gr,e),new Pe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pe(Wt(this.r),Wt(this.g),Wt(this.b),Oa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xc,formatHex:Xc,formatHex8:I_,formatRgb:Qc,toString:Qc}));function Xc(){return`#${Ut(this.r)}${Ut(this.g)}${Ut(this.b)}`}function I_(){return`#${Ut(this.r)}${Ut(this.g)}${Ut(this.b)}${Ut((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qc(){const e=Oa(this.opacity);return`${e===1?"rgb(":"rgba("}${Wt(this.r)}, ${Wt(this.g)}, ${Wt(this.b)}${e===1?")":`, ${e})`}`}function Oa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Wt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ut(e){return e=Wt(e),(e<16?"0":"")+e.toString(16)}function Zc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new et(e,t,n,r)}function hh(e){if(e instanceof et)return new et(e.h,e.s,e.l,e.opacity);if(e instanceof Ir||(e=vr(e)),!e)return new et;if(e instanceof et)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,s=a-o,l=(a+o)/2;return s?(t===a?i=(n-r)/s+(n<r)*6:n===a?i=(r-t)/s+2:i=(t-n)/s+4,s/=l<.5?a+o:2-a-o,i*=60):s=l>0&&l<1?0:i,new et(i,s,l,e.opacity)}function N_(e,t,n,r){return arguments.length===1?hh(e):new et(e,t,n,r==null?1:r)}function et(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Kl(et,N_,ph(Ir,{brighter(e){return e=e==null?Ta:Math.pow(Ta,e),new et(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gr:Math.pow(gr,e),new et(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Pe(ui(e>=240?e-240:e+120,o,r),ui(e,o,r),ui(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new et(Jc(this.h),Fr(this.s),Fr(this.l),Oa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Oa(this.opacity);return`${e===1?"hsl(":"hsla("}${Jc(this.h)}, ${Fr(this.s)*100}%, ${Fr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Jc(e){return e=(e||0)%360,e<0?e+360:e}function Fr(e){return Math.max(0,Math.min(1,e||0))}function ui(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const mh=e=>()=>e;function R_(e,t){return function(n){return e+n*t}}function A_(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function k_(e){return(e=+e)==1?gh:function(t,n){return n-t?A_(t,n,e):mh(isNaN(t)?n:t)}}function gh(e,t){var n=t-e;return n?R_(e,n):mh(isNaN(e)?t:e)}const ed=function e(t){var n=k_(t);function r(o,a){var i=n((o=el(o)).r,(a=el(a)).r),s=n(o.g,a.g),l=n(o.b,a.b),d=gh(o.opacity,a.opacity);return function(c){return o.r=i(c),o.g=s(c),o.b=l(c),o.opacity=d(c),o+""}}return r.gamma=e,r}(1);function At(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var tl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fi=new RegExp(tl.source,"g");function L_(e){return function(){return e}}function q_(e){return function(t){return e(t)+""}}function P_(e,t){var n=tl.lastIndex=fi.lastIndex=0,r,o,a,i=-1,s=[],l=[];for(e=e+"",t=t+"";(r=tl.exec(e))&&(o=fi.exec(t));)(a=o.index)>n&&(a=t.slice(n,a),s[i]?s[i]+=a:s[++i]=a),(r=r[0])===(o=o[0])?s[i]?s[i]+=o:s[++i]=o:(s[++i]=null,l.push({i,x:At(r,o)})),n=fi.lastIndex;return n<t.length&&(a=t.slice(n),s[i]?s[i]+=a:s[++i]=a),s.length<2?l[0]?q_(l[0].x):L_(t):(t=l.length,function(d){for(var c=0,f;c<t;++c)s[(f=l[c]).i]=f.x(d);return s.join("")})}var td=180/Math.PI,nl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yh(e,t,n,r,o,a){var i,s,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*td,skewX:Math.atan(l)*td,scaleX:i,scaleY:s}}var $r;function D_(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?nl:yh(t.a,t.b,t.c,t.d,t.e,t.f)}function M_(e){return e==null||($r||($r=document.createElementNS("http://www.w3.org/2000/svg","g")),$r.setAttribute("transform",e),!(e=$r.transform.baseVal.consolidate()))?nl:(e=e.matrix,yh(e.a,e.b,e.c,e.d,e.e,e.f))}function vh(e,t,n,r){function o(d){return d.length?d.pop()+" ":""}function a(d,c,f,p,g,h){if(d!==f||c!==p){var m=g.push("translate(",null,t,null,n);h.push({i:m-4,x:At(d,f)},{i:m-2,x:At(c,p)})}else(f||p)&&g.push("translate("+f+t+p+n)}function i(d,c,f,p){d!==c?(d-c>180?c+=360:c-d>180&&(d+=360),p.push({i:f.push(o(f)+"rotate(",null,r)-2,x:At(d,c)})):c&&f.push(o(f)+"rotate("+c+r)}function s(d,c,f,p){d!==c?p.push({i:f.push(o(f)+"skewX(",null,r)-2,x:At(d,c)}):c&&f.push(o(f)+"skewX("+c+r)}function l(d,c,f,p,g,h){if(d!==f||c!==p){var m=g.push(o(g)+"scale(",null,",",null,")");h.push({i:m-4,x:At(d,f)},{i:m-2,x:At(c,p)})}else(f!==1||p!==1)&&g.push(o(g)+"scale("+f+","+p+")")}return function(d,c){var f=[],p=[];return d=e(d),c=e(c),a(d.translateX,d.translateY,c.translateX,c.translateY,f,p),i(d.rotate,c.rotate,f,p),s(d.skewX,c.skewX,f,p),l(d.scaleX,d.scaleY,c.scaleX,c.scaleY,f,p),d=c=null,function(g){for(var h=-1,m=p.length,v;++h<m;)f[(v=p[h]).i]=v.x(g);return f.join("")}}}var V_=vh(D_,"px, ","px)","deg)"),B_=vh(M_,", ",")",")"),F_=1e-12;function nd(e){return((e=Math.exp(e))+1/e)/2}function $_(e){return((e=Math.exp(e))-1/e)/2}function H_(e){return((e=Math.exp(2*e))-1)/(e+1)}const z_=function e(t,n,r){function o(a,i){var s=a[0],l=a[1],d=a[2],c=i[0],f=i[1],p=i[2],g=c-s,h=f-l,m=g*g+h*h,v,b;if(m<F_)b=Math.log(p/d)/t,v=function(_){return[s+_*g,l+_*h,d*Math.exp(t*_*b)]};else{var E=Math.sqrt(m),S=(p*p-d*d+r*m)/(2*d*n*E),y=(p*p-d*d-r*m)/(2*p*n*E),w=Math.log(Math.sqrt(S*S+1)-S),C=Math.log(Math.sqrt(y*y+1)-y);b=(C-w)/t,v=function(_){var T=_*b,O=nd(w),R=d/(n*E)*(O*H_(t*T+w)-$_(w));return[s+R*g,l+R*h,d*O/nd(t*T+w)]}}return v.duration=b*1e3*t/Math.SQRT2,v}return o.rho=function(a){var i=Math.max(.001,+a),s=i*i,l=s*s;return e(i,s,l)},o}(Math.SQRT2,2,4);var Nn=0,Un=0,Vn=0,bh=1e3,Ia,Yn,Na=0,tn=0,Qa=0,br=typeof performance=="object"&&performance.now?performance:Date,Sh=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Xl(){return tn||(Sh(U_),tn=br.now()+Qa)}function U_(){tn=0}function Ra(){this._call=this._time=this._next=null}Ra.prototype=wh.prototype={constructor:Ra,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Xl():+n)+(t==null?0:+t),!this._next&&Yn!==this&&(Yn?Yn._next=this:Ia=this,Yn=this),this._call=e,this._time=n,rl()},stop:function(){this._call&&(this._call=null,this._time=1/0,rl())}};function wh(e,t,n){var r=new Ra;return r.restart(e,t,n),r}function Y_(){Xl(),++Nn;for(var e=Ia,t;e;)(t=tn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Nn}function rd(){tn=(Na=br.now())+Qa,Nn=Un=0;try{Y_()}finally{Nn=0,W_(),tn=0}}function j_(){var e=br.now(),t=e-Na;t>bh&&(Qa-=t,Na=e)}function W_(){for(var e,t=Ia,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ia=n);Yn=e,rl(r)}function rl(e){if(!Nn){Un&&(Un=clearTimeout(Un));var t=e-tn;t>24?(e<1/0&&(Un=setTimeout(rd,e-br.now()-Qa)),Vn&&(Vn=clearInterval(Vn))):(Vn||(Na=br.now(),Vn=setInterval(j_,bh)),Nn=1,Sh(rd))}}function od(e,t,n){var r=new Ra;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var G_=Ka("start","end","cancel","interrupt"),K_=[],Ch=0,ad=1,ol=2,uo=3,id=4,al=5,fo=6;function Za(e,t,n,r,o,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;X_(e,n,{name:t,index:r,group:o,on:G_,tween:K_,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ch})}function Ql(e,t){var n=tt(e,t);if(n.state>Ch)throw new Error("too late; already scheduled");return n}function dt(e,t){var n=tt(e,t);if(n.state>uo)throw new Error("too late; already running");return n}function tt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function X_(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=wh(a,0,n.time);function a(d){n.state=ad,n.timer.restart(i,n.delay,n.time),n.delay<=d&&i(d-n.delay)}function i(d){var c,f,p,g;if(n.state!==ad)return l();for(c in r)if(g=r[c],g.name===n.name){if(g.state===uo)return od(i);g.state===id?(g.state=fo,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[c]):+c<t&&(g.state=fo,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[c])}if(od(function(){n.state===uo&&(n.state=id,n.timer.restart(s,n.delay,n.time),s(d))}),n.state=ol,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ol){for(n.state=uo,o=new Array(p=n.tween.length),c=0,f=-1;c<p;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++f]=g);o.length=f+1}}function s(d){for(var c=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(l),n.state=al,1),f=-1,p=o.length;++f<p;)o[f].call(e,c);n.state===al&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=fo,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function po(e,t){var n=e.__transition,r,o,a=!0,i;if(!!n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){a=!1;continue}o=r.state>ol&&r.state<al,r.state=fo,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}a&&delete e.__transition}}function Q_(e){return this.each(function(){po(this,e)})}function Z_(e,t){var n,r;return function(){var o=dt(this,e),a=o.tween;if(a!==n){r=n=a;for(var i=0,s=r.length;i<s;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function J_(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var a=dt(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var s={name:t,value:n},l=0,d=o.length;l<d;++l)if(o[l].name===t){o[l]=s;break}l===d&&o.push(s)}a.tween=o}}function eE(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=tt(this.node(),n).tween,o=0,a=r.length,i;o<a;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?Z_:J_)(n,e,t))}function Zl(e,t,n){var r=e._id;return e.each(function(){var o=dt(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return tt(o,r).value[t]}}function _h(e,t){var n;return(typeof t=="number"?At:t instanceof vr?ed:(n=vr(t))?(t=n,ed):P_)(e,t)}function tE(e){return function(){this.removeAttribute(e)}}function nE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rE(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttribute(e);return i===o?null:i===r?a:a=t(r=i,n)}}function oE(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?a:a=t(r=i,n)}}function aE(e,t,n){var r,o,a;return function(){var i,s=n(this),l;return s==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=s+"",i===l?null:i===r&&l===o?a:(o=l,a=t(r=i,s)))}}function iE(e,t,n){var r,o,a;return function(){var i,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=s+"",i===l?null:i===r&&l===o?a:(o=l,a=t(r=i,s)))}}function sE(e,t){var n=Xa(e),r=n==="transform"?B_:_h;return this.attrTween(e,typeof t=="function"?(n.local?iE:aE)(n,r,Zl(this,"attr."+e,t)):t==null?(n.local?nE:tE)(n):(n.local?oE:rE)(n,r,t))}function lE(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function cE(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function dE(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&cE(e,a)),n}return o._value=t,o}function uE(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&lE(e,a)),n}return o._value=t,o}function fE(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Xa(e);return this.tween(n,(r.local?dE:uE)(r,t))}function pE(e,t){return function(){Ql(this,e).delay=+t.apply(this,arguments)}}function hE(e,t){return t=+t,function(){Ql(this,e).delay=t}}function mE(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?pE:hE)(t,e)):tt(this.node(),t).delay}function gE(e,t){return function(){dt(this,e).duration=+t.apply(this,arguments)}}function yE(e,t){return t=+t,function(){dt(this,e).duration=t}}function vE(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?gE:yE)(t,e)):tt(this.node(),t).duration}function bE(e,t){if(typeof t!="function")throw new Error;return function(){dt(this,e).ease=t}}function SE(e){var t=this._id;return arguments.length?this.each(bE(t,e)):tt(this.node(),t).ease}function wE(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;dt(this,e).ease=n}}function CE(e){if(typeof e!="function")throw new Error;return this.each(wE(this._id,e))}function _E(e){typeof e!="function"&&(e=th(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],l,d=0;d<i;++d)(l=a[d])&&e.call(l,l.__data__,d,a)&&s.push(l);return new Et(r,this._parents,this._name,this._id)}function EE(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),s=0;s<a;++s)for(var l=t[s],d=n[s],c=l.length,f=i[s]=new Array(c),p,g=0;g<c;++g)(p=l[g]||d[g])&&(f[g]=p);for(;s<r;++s)i[s]=t[s];return new Et(i,this._parents,this._name,this._id)}function xE(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function TE(e,t,n){var r,o,a=xE(t)?Ql:dt;return function(){var i=a(this,e),s=i.on;s!==r&&(o=(r=s).copy()).on(t,n),i.on=o}}function OE(e,t){var n=this._id;return arguments.length<2?tt(this.node(),n).on.on(e):this.each(TE(n,e,t))}function IE(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function NE(){return this.on("end.remove",IE(this._id))}function RE(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Wl(e));for(var r=this._groups,o=r.length,a=new Array(o),i=0;i<o;++i)for(var s=r[i],l=s.length,d=a[i]=new Array(l),c,f,p=0;p<l;++p)(c=s[p])&&(f=e.call(c,c.__data__,p,s))&&("__data__"in c&&(f.__data__=c.__data__),d[p]=f,Za(d[p],t,n,p,d,tt(c,n)));return new Et(a,this._parents,t,n)}function AE(e){var t=this._name,n=this._id;typeof e!="function"&&(e=eh(e));for(var r=this._groups,o=r.length,a=[],i=[],s=0;s<o;++s)for(var l=r[s],d=l.length,c,f=0;f<d;++f)if(c=l[f]){for(var p=e.call(c,c.__data__,f,l),g,h=tt(c,n),m=0,v=p.length;m<v;++m)(g=p[m])&&Za(g,t,n,m,p,h);a.push(p),i.push(c)}return new Et(a,i,t,n)}var kE=Or.prototype.constructor;function LE(){return new kE(this._groups,this._parents)}function qE(e,t){var n,r,o;return function(){var a=In(this,e),i=(this.style.removeProperty(e),In(this,e));return a===i?null:a===n&&i===r?o:o=t(n=a,r=i)}}function Eh(e){return function(){this.style.removeProperty(e)}}function PE(e,t,n){var r,o=n+"",a;return function(){var i=In(this,e);return i===o?null:i===r?a:a=t(r=i,n)}}function DE(e,t,n){var r,o,a;return function(){var i=In(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),In(this,e))),i===l?null:i===r&&l===o?a:(o=l,a=t(r=i,s))}}function ME(e,t){var n,r,o,a="style."+t,i="end."+a,s;return function(){var l=dt(this,e),d=l.on,c=l.value[a]==null?s||(s=Eh(t)):void 0;(d!==n||o!==c)&&(r=(n=d).copy()).on(i,o=c),l.on=r}}function VE(e,t,n){var r=(e+="")=="transform"?V_:_h;return t==null?this.styleTween(e,qE(e,r)).on("end.style."+e,Eh(e)):typeof t=="function"?this.styleTween(e,DE(e,r,Zl(this,"style."+e,t))).each(ME(this._id,e)):this.styleTween(e,PE(e,r,t),n).on("end.style."+e,null)}function BE(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function FE(e,t,n){var r,o;function a(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&BE(e,i,n)),r}return a._value=t,a}function $E(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,FE(e,t,n==null?"":n))}function HE(e){return function(){this.textContent=e}}function zE(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function UE(e){return this.tween("text",typeof e=="function"?zE(Zl(this,"text",e)):HE(e==null?"":e+""))}function YE(e){return function(t){this.textContent=e.call(this,t)}}function jE(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&YE(o)),t}return r._value=e,r}function WE(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,jE(e))}function GE(){for(var e=this._name,t=this._id,n=xh(),r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,l,d=0;d<s;++d)if(l=i[d]){var c=tt(l,t);Za(l,e,n,d,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Et(r,this._parents,e,n)}function KE(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(a,i){var s={value:i},l={value:function(){--o===0&&a()}};n.each(function(){var d=dt(this,r),c=d.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),d.on=t}),o===0&&a()})}var XE=0;function Et(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function xh(){return++XE}var pt=Or.prototype;Et.prototype={constructor:Et,select:RE,selectAll:AE,selectChild:pt.selectChild,selectChildren:pt.selectChildren,filter:_E,merge:EE,selection:LE,transition:GE,call:pt.call,nodes:pt.nodes,node:pt.node,size:pt.size,empty:pt.empty,each:pt.each,on:OE,attr:sE,attrTween:fE,style:VE,styleTween:$E,text:UE,textTween:WE,remove:NE,tween:eE,delay:mE,duration:vE,ease:SE,easeVarying:CE,end:KE,[Symbol.iterator]:pt[Symbol.iterator]};function QE(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ZE={time:null,delay:0,duration:250,ease:QE};function JE(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function e0(e){var t,n;e instanceof Et?(t=e._id,e=e._name):(t=xh(),(n=ZE).time=Xl(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,l,d=0;d<s;++d)(l=i[d])&&Za(l,e,t,d,i,n||JE(l,t));return new Et(r,this._parents,e,t)}Or.prototype.interrupt=Q_;Or.prototype.transition=e0;const Hr=e=>()=>e;function t0(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function yt(e,t,n){this.k=e,this.x=t,this.y=n}yt.prototype={constructor:yt,scale:function(e){return e===1?this:new yt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new yt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Gt=new yt(1,0,0);yt.prototype;function pi(e){e.stopImmediatePropagation()}function Bn(e){e.preventDefault(),e.stopImmediatePropagation()}function n0(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function r0(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function sd(){return this.__zoom||Gt}function o0(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function a0(){return navigator.maxTouchPoints||"ontouchstart"in this}function i0(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function s0(){var e=n0,t=r0,n=i0,r=o0,o=a0,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,l=z_,d=Ka("start","zoom","end"),c,f,p,g=500,h=150,m=0,v=10;function b(I){I.property("__zoom",sd).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",R).filter(o).on("touchstart.zoom",k).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(I,q,A,M){var $=I.selection?I.selection():I;$.property("__zoom",sd),I!==$?w(I,q,A,M):$.interrupt().each(function(){C(this,arguments).event(M).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},b.scaleBy=function(I,q,A,M){b.scaleTo(I,function(){var $=this.__zoom.k,z=typeof q=="function"?q.apply(this,arguments):q;return $*z},A,M)},b.scaleTo=function(I,q,A,M){b.transform(I,function(){var $=t.apply(this,arguments),z=this.__zoom,B=A==null?y($):typeof A=="function"?A.apply(this,arguments):A,U=z.invert(B),G=typeof q=="function"?q.apply(this,arguments):q;return n(S(E(z,G),B,U),$,i)},A,M)},b.translateBy=function(I,q,A,M){b.transform(I,function(){return n(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof A=="function"?A.apply(this,arguments):A),t.apply(this,arguments),i)},null,M)},b.translateTo=function(I,q,A,M,$){b.transform(I,function(){var z=t.apply(this,arguments),B=this.__zoom,U=M==null?y(z):typeof M=="function"?M.apply(this,arguments):M;return n(Gt.translate(U[0],U[1]).scale(B.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof A=="function"?-A.apply(this,arguments):-A),z,i)},M,$)};function E(I,q){return q=Math.max(a[0],Math.min(a[1],q)),q===I.k?I:new yt(q,I.x,I.y)}function S(I,q,A){var M=q[0]-A[0]*I.k,$=q[1]-A[1]*I.k;return M===I.x&&$===I.y?I:new yt(I.k,M,$)}function y(I){return[(+I[0][0]+ +I[1][0])/2,(+I[0][1]+ +I[1][1])/2]}function w(I,q,A,M){I.on("start.zoom",function(){C(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(M).end()}).tween("zoom",function(){var $=this,z=arguments,B=C($,z).event(M),U=t.apply($,z),G=A==null?y(U):typeof A=="function"?A.apply($,z):A,D=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),L=$.__zoom,F=typeof q=="function"?q.apply($,z):q,Y=l(L.invert(G).concat(D/L.k),F.invert(G).concat(D/F.k));return function(K){if(K===1)K=F;else{var Q=Y(K),X=D/Q[2];K=new yt(X,G[0]-Q[0]*X,G[1]-Q[1]*X)}B.zoom(null,K)}})}function C(I,q,A){return!A&&I.__zooming||new _(I,q)}function _(I,q){this.that=I,this.args=q,this.active=0,this.sourceEvent=null,this.extent=t.apply(I,q),this.taps=0}_.prototype={event:function(I){return I&&(this.sourceEvent=I),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(I,q){return this.mouse&&I!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&I!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&I!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(I){var q=Je(this.that).datum();d.call(I,this.that,new t0(I,{sourceEvent:this.sourceEvent,target:b,type:I,transform:this.that.__zoom,dispatch:d}),q)}};function T(I,...q){if(!e.apply(this,arguments))return;var A=C(this,q).event(I),M=this.__zoom,$=Math.max(a[0],Math.min(a[1],M.k*Math.pow(2,r.apply(this,arguments)))),z=it(I);if(A.wheel)(A.mouse[0][0]!==z[0]||A.mouse[0][1]!==z[1])&&(A.mouse[1]=M.invert(A.mouse[0]=z)),clearTimeout(A.wheel);else{if(M.k===$)return;A.mouse=[z,M.invert(z)],po(this),A.start()}Bn(I),A.wheel=setTimeout(B,h),A.zoom("mouse",n(S(E(M,$),A.mouse[0],A.mouse[1]),A.extent,i));function B(){A.wheel=null,A.end()}}function O(I,...q){if(p||!e.apply(this,arguments))return;var A=I.currentTarget,M=C(this,q,!0).event(I),$=Je(I.view).on("mousemove.zoom",G,!0).on("mouseup.zoom",D,!0),z=it(I,A),B=I.clientX,U=I.clientY;uh(I.view),pi(I),M.mouse=[z,this.__zoom.invert(z)],po(this),M.start();function G(L){if(Bn(L),!M.moved){var F=L.clientX-B,Y=L.clientY-U;M.moved=F*F+Y*Y>m}M.event(L).zoom("mouse",n(S(M.that.__zoom,M.mouse[0]=it(L,A),M.mouse[1]),M.extent,i))}function D(L){$.on("mousemove.zoom mouseup.zoom",null),fh(L.view,M.moved),Bn(L),M.event(L).end()}}function R(I,...q){if(!!e.apply(this,arguments)){var A=this.__zoom,M=it(I.changedTouches?I.changedTouches[0]:I,this),$=A.invert(M),z=A.k*(I.shiftKey?.5:2),B=n(S(E(A,z),M,$),t.apply(this,q),i);Bn(I),s>0?Je(this).transition().duration(s).call(w,B,M,I):Je(this).call(b.transform,B,M,I)}}function k(I,...q){if(!!e.apply(this,arguments)){var A=I.touches,M=A.length,$=C(this,q,I.changedTouches.length===M).event(I),z,B,U,G;for(pi(I),B=0;B<M;++B)U=A[B],G=it(U,this),G=[G,this.__zoom.invert(G),U.identifier],$.touch0?!$.touch1&&$.touch0[2]!==G[2]&&($.touch1=G,$.taps=0):($.touch0=G,z=!0,$.taps=1+!!c);c&&(c=clearTimeout(c)),z&&($.taps<2&&(f=G[0],c=setTimeout(function(){c=null},g)),po(this),$.start())}}function P(I,...q){if(!!this.__zooming){var A=C(this,q).event(I),M=I.changedTouches,$=M.length,z,B,U,G;for(Bn(I),z=0;z<$;++z)B=M[z],U=it(B,this),A.touch0&&A.touch0[2]===B.identifier?A.touch0[0]=U:A.touch1&&A.touch1[2]===B.identifier&&(A.touch1[0]=U);if(B=A.that.__zoom,A.touch1){var D=A.touch0[0],L=A.touch0[1],F=A.touch1[0],Y=A.touch1[1],K=(K=F[0]-D[0])*K+(K=F[1]-D[1])*K,Q=(Q=Y[0]-L[0])*Q+(Q=Y[1]-L[1])*Q;B=E(B,Math.sqrt(K/Q)),U=[(D[0]+F[0])/2,(D[1]+F[1])/2],G=[(L[0]+Y[0])/2,(L[1]+Y[1])/2]}else if(A.touch0)U=A.touch0[0],G=A.touch0[1];else return;A.zoom("touch",n(S(B,U,G),A.extent,i))}}function V(I,...q){if(!!this.__zooming){var A=C(this,q).event(I),M=I.changedTouches,$=M.length,z,B;for(pi(I),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),z=0;z<$;++z)B=M[z],A.touch0&&A.touch0[2]===B.identifier?delete A.touch0:A.touch1&&A.touch1[2]===B.identifier&&delete A.touch1;if(A.touch1&&!A.touch0&&(A.touch0=A.touch1,delete A.touch1),A.touch0)A.touch0[1]=this.__zoom.invert(A.touch0[0]);else if(A.end(),A.taps===2&&(B=it(B,this),Math.hypot(f[0]-B[0],f[1]-B[1])<v)){var U=Je(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return b.wheelDelta=function(I){return arguments.length?(r=typeof I=="function"?I:Hr(+I),b):r},b.filter=function(I){return arguments.length?(e=typeof I=="function"?I:Hr(!!I),b):e},b.touchable=function(I){return arguments.length?(o=typeof I=="function"?I:Hr(!!I),b):o},b.extent=function(I){return arguments.length?(t=typeof I=="function"?I:Hr([[+I[0][0],+I[0][1]],[+I[1][0],+I[1][1]]]),b):t},b.scaleExtent=function(I){return arguments.length?(a[0]=+I[0],a[1]=+I[1],b):[a[0],a[1]]},b.translateExtent=function(I){return arguments.length?(i[0][0]=+I[0][0],i[1][0]=+I[1][0],i[0][1]=+I[0][1],i[1][1]=+I[1][1],b):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},b.constrain=function(I){return arguments.length?(n=I,b):n},b.duration=function(I){return arguments.length?(s=+I,b):s},b.interpolate=function(I){return arguments.length?(l=I,b):l},b.on=function(){var I=d.on.apply(d,arguments);return I===d?b:I},b.clickDistance=function(I){return arguments.length?(m=(I=+I)*I,b):Math.sqrt(m)},b.tapDistance=function(I){return arguments.length?(v=+I,b):v},b}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function il(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Th(e,t){if(!!e){if(typeof e=="string")return il(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return il(e,t)}}function l0(e){if(Array.isArray(e))return e}function c0(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,a=!1,i,s;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));o=!0);}catch(l){a=!0,s=l}finally{try{!o&&n.return!=null&&n.return()}finally{if(a)throw s}}return r}}function d0(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function se(e,t){return l0(e)||c0(e,t)||Th(e,t)||d0()}var Rn;(function(e){e.Strict="strict",e.Loose="loose"})(Rn||(Rn={}));var ld;(function(e){e.Lines="lines",e.Dots="dots"})(ld||(ld={}));var bn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(bn||(bn={}));var gt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(gt||(gt={}));var Sr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Sr||(Sr={}));var W;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(W||(W={}));var Jl=function(t){return{width:t.offsetWidth,height:t.offsetHeight}},Sn=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(t,n),r)},Oh=function(t,n){return{x:Sn(t.x,n[0][0],n[1][0]),y:Sn(t.y,n[0][1],n[1][1])}},Ih=function(t){var n,r;return((n=t.getRootNode)===null||n===void 0?void 0:n.call(t))||((r=window)===null||r===void 0?void 0:r.document)},u0=function(t,n){return{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x2,n.x2),y2:Math.max(t.y2,n.y2)}},Aa=function(t){var n=t.x,r=t.y,o=t.width,a=t.height;return{x:n,y:r,x2:n+o,y2:r+a}},f0=function(t){var n=t.x,r=t.y,o=t.x2,a=t.y2;return{x:n,y:r,width:o-n,height:a-r}},Nh=function(t){return!isNaN(t)&&isFinite(t)},Te=Symbol("internals");function cd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dd(e,t){var n=e.find(function(d){return d.id===t.parentNode});if(n){var r=t.position.x+t.width-n.width,o=t.position.y+t.height-n.height;if(r>0||o>0||t.position.x<0||t.position.y<0){var a,i;if(n.style=jn({},n.style)||{},n.style.width=(a=n.style.width)!==null&&a!==void 0?a:n.width,n.style.height=(i=n.style.height)!==null&&i!==void 0?i:n.height,r>0&&(n.style.width+=r),o>0&&(n.style.height+=o),t.position.x<0){var s=Math.abs(t.position.x);n.position.x=n.position.x-s,n.style.width+=s,t.position.x=0}if(t.position.y<0){var l=Math.abs(t.position.y);n.position.y=n.position.y-l,n.style.height+=l,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Rh(e,t){if(e.some(function(r){return r.type==="reset"}))return e.filter(function(r){return r.type==="reset"}).map(function(r){return r.item});var n=e.filter(function(r){return r.type==="add"}).map(function(r){return r.item});return t.reduce(function(r,o){var a=e.find(function(l){return l.id===o.id});if(a)switch(a.type){case"select":return r.push(jn(jn({},o),{},{selected:a.selected})),r;case"position":{var i=jn({},o);return typeof a.position<"u"&&(i.position=a.position),typeof a.positionAbsolute<"u"&&(i.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(i.dragging=a.dragging),i.expandParent&&dd(r,i),r.push(i),r}case"dimensions":{var s=jn({},o);return typeof a.dimensions<"u"&&(s.width=a.dimensions.width,s.height=a.dimensions.height),s.expandParent&&dd(r,s),r.push(s),r}case"remove":return r}return r.push(o),r},n)}function Ah(e,t){return Rh(e,t)}function p0(e,t){return Rh(e,t)}var kt=function(t,n){return{id:t,type:"select",selected:n}};function mn(e,t){return e.reduce(function(n,r){var o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(kt(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(kt(r.id,!1))),n},[])}function ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function kh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ud(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ud(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var fd=function(t,n,r){var o=n.querySelectorAll(t);if(!o||!o.length)return null;var a=Array.from(o),i=n.getBoundingClientRect();return a.map(function(s){var l=s.getBoundingClientRect();return kh({id:s.getAttribute("data-handleid"),position:s.getAttribute("data-handlepos"),x:(l.left-i.left)/r,y:(l.top-i.top)/r},Jl(s))})};function Fn(e,t,n){return n===void 0?n:function(r){var o=t().nodeInternals.get(e);n(r,kh({},o))}}function Lh(e){var t=e.id,n=e.store,r=n.getState(),o=r.addSelectedNodes,a=r.unselectNodesAndEdges,i=r.multiSelectionActive,s=r.nodeInternals,l=s.get(t);n.setState({nodesSelectionActive:!1}),l.selected?l.selected&&i&&a({nodes:[l]}):o([t])}function pd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var h0=function(t){return"id"in t&&"source"in t&&"target"in t},m0=function(t){var n=t.source,r=t.sourceHandle,o=t.target,a=t.targetHandle;return"reactflow__edge-".concat(n).concat(r||"","-").concat(o).concat(a||"")},sl=function(t,n){if(typeof t>"u")return"";if(typeof t=="string")return t;var r=n?"".concat(n,"__"):"";return"".concat(r).concat(Object.keys(t).sort().map(function(o){return"".concat(o,"=").concat(t[o])}).join("&"))},g0=function(t,n){return n.some(function(r){return r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)})},y0=function(t,n){if(!t.source||!t.target)return n;var r;return h0(t)?r=Zn({},t):r=Zn(Zn({},t),{},{id:m0(t)}),g0(r,n)?n:n.concat(r)},qh=function(t,n,r,o){var a=t.x,i=t.y,s=se(n,3),l=s[0],d=s[1],c=s[2],f=se(o,2),p=f[0],g=f[1],h={x:(a-l)/c,y:(i-d)/c};return r?{x:p*Math.round(h.x/p),y:g*Math.round(h.y/g)}:h},ec=function(t){if(t.length===0)return{x:0,y:0,width:0,height:0};var n=t.reduce(function(r,o){var a=o.positionAbsolute,i=o.position,s=o.width,l=o.height;return u0(r,Aa({x:a?a.x:i.x,y:a?a.y:i.y,width:s||0,height:l||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return f0(n)},Ph=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,1],o=se(r,3),a=o[0],i=o[1],s=o[2],l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,c=Aa({x:(n.x-a)/s,y:(n.y-i)/s,width:n.width/s,height:n.height/s}),f=[];return t.forEach(function(p){var g=p.positionAbsolute,h=p.width,m=p.height,v=p.selectable,b=v===void 0?!0:v;if(d&&!b)return!1;var E=Aa(Zn(Zn({},g),{},{width:h||0,height:m||0})),S=Math.max(0,Math.min(c.x2,E.x2)-Math.max(c.x,E.x)),y=Math.max(0,Math.min(c.y2,E.y2)-Math.max(c.y,E.y)),w=Math.ceil(S*y),C=typeof h>"u"||typeof m>"u"||h===null||m===null,_=l&&w>0,T=(h||0)*(m||0),O=C||_||w>=T;O&&f.push(p)}),f},tc=function(t,n){var r=t.map(function(o){return o.id});return n.filter(function(o){return r.includes(o.source)||r.includes(o.target)})},Dh=function(t,n,r,o,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:.1,s=n/(t.width*(1+i)),l=r/(t.height*(1+i)),d=Math.min(s,l),c=Sn(d,o,a),f=t.x+t.width/2,p=t.y+t.height/2,g=n/2-f*c,h=r/2-p*c;return[g,h,c]},zt=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.transition().duration(n)};function hd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mh(e,t,n,r){var o,a,i,s,l,d,c,f,p,g,h,m;if(!e.parentNode)return r;var v=t.get(e.parentNode);return Mh(v,t,n,{x:((o=r.x)!==null&&o!==void 0?o:0)+((a=(i=v.position)===null||i===void 0?void 0:i.x)!==null&&a!==void 0?a:0),y:((s=r.y)!==null&&s!==void 0?s:0)+((l=(d=v.position)===null||d===void 0?void 0:d.y)!==null&&l!==void 0?l:0),z:((c=(f=v[Te])===null||f===void 0?void 0:f.z)!==null&&c!==void 0?c:0)>((p=r.z)!==null&&p!==void 0?p:0)?(g=(h=v[Te])===null||h===void 0?void 0:h.z)!==null&&g!==void 0?g:0:(m=r.z)!==null&&m!==void 0?m:0})}function hi(e,t){var n=new Map,r={};return e.forEach(function(o){var a,i=Nh(o.zIndex)?o.zIndex:o.selected?1e3:0,s=t.get(o.id),l=gn(gn({width:s==null?void 0:s.width,height:s==null?void 0:s.height},o),{},{positionAbsolute:{x:o.position.x,y:o.position.y}});o.parentNode&&(l.parentNode=o.parentNode,r[o.parentNode]=!0),Object.defineProperty(l,Te,{enumerable:!1,value:{handleBounds:s==null||(a=s[Te])===null||a===void 0?void 0:a.handleBounds,z:i}}),n.set(o.id,l)}),n.forEach(function(o){if(o.parentNode&&!n.has(o.parentNode))throw new Error("Parent node ".concat(o.parentNode," not found"));if(o.parentNode||r[o.id]){var a,i,s=Mh(o,n,r,gn(gn({},o.position),{},{z:(a=(i=o[Te])===null||i===void 0?void 0:i.z)!==null&&a!==void 0?a:0})),l=s.x,d=s.y,c=s.z;o.positionAbsolute={x:l,y:d},o[Te].z=c,r[o.id]&&(o[Te].isParent=!0)}}),n}function Vh(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e(),r=n.nodeInternals,o=n.width,a=n.height,i=n.minZoom,s=n.maxZoom,l=n.d3Zoom,d=n.d3Selection,c=n.fitViewOnInitDone,f=n.fitViewOnInit;if((t.initial&&!c&&f||!t.initial)&&l&&d){var p=Array.from(r.values()).filter(function(T){return t.includeHiddenNodes?T.width&&T.height:!T.hidden}),g=p.every(function(T){return T.width&&T.height});if(p.length>0&&g){var h,m,v,b=ec(p),E=Dh(b,o,a,(h=t.minZoom)!==null&&h!==void 0?h:i,(m=t.maxZoom)!==null&&m!==void 0?m:s,(v=t.padding)!==null&&v!==void 0?v:.1),S=se(E,3),y=S[0],w=S[1],C=S[2],_=Gt.translate(y,w).scale(C);return typeof t.duration=="number"&&t.duration>0?l.transform(zt(d,t.duration),_):l.transform(d,_),!0}}return!1}function v0(e,t){return e.forEach(function(n){var r=t.get(n.id);if(r){var o;t.set(r.id,gn(gn({},r),{},(o={},ue(o,Te,r[Te]),ue(o,"selected",n.selected),o)))}}),new Map(t)}function b0(e,t){return t.map(function(n){var r=e.find(function(o){return o.id===n.id});return r&&(n.selected=r.selected),n})}function zr(e){var t=e.changedNodes,n=e.changedEdges,r=e.get,o=e.set,a=r(),i=a.nodeInternals,s=a.edges,l=a.onNodesChange,d=a.onEdgesChange,c=a.hasDefaultNodes,f=a.hasDefaultEdges;t!=null&&t.length&&(c&&o({nodeInternals:v0(t,i)}),l==null||l(t)),n!=null&&n.length&&(f&&o({edges:b0(n,s)}),d==null||d(n))}var md=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],gd={width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:md,nodeExtent:md,nodesSelectionActive:!1,userSelectionActive:!1,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:Rn.Strict,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,reactFlowVersion:"10.3.11",connectionStartHandle:null,connectOnClick:!0};function yd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var nc=Nw(),Bh=nc.Provider,xe=nc.useStore,ke=nc.useStoreApi,Fh=function(){return Iw(function(t,n){return ot(ot({},gd),{},{setNodes:function(o){t({nodeInternals:hi(o,n().nodeInternals)})},setEdges:function(o){var a=n(),i=a.defaultEdgeOptions,s=i===void 0?{}:i;t({edges:o.map(function(l){return ot(ot({},s),l)})})},setDefaultNodesAndEdges:function(o,a){var i=typeof o<"u",s=typeof a<"u",l=i?hi(o,new Map):new Map,d=s?a:[];t({nodeInternals:l,edges:d,hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:function(o){var a=n(),i=a.onNodesChange,s=a.nodeInternals,l=a.fitViewOnInit,d=a.fitViewOnInitDone,c=a.fitViewOnInitOptions,f=window.getComputedStyle(document.querySelector(".react-flow__viewport")),p=new window.DOMMatrixReadOnly(f.transform),g=p.m22,h=o.reduce(function(v,b){var E=s.get(b.id);if(E){var S=Jl(b.nodeElement),y=!!(S.width&&S.height&&(E.width!==S.width||E.height!==S.height||b.forceUpdate));y&&(s.set(E.id,ot(ot({},E),{},ue({},Te,ot(ot({},E[Te]),{},{handleBounds:{source:fd(".source",b.nodeElement,g),target:fd(".target",b.nodeElement,g)}})),S)),v.push({id:E.id,type:"dimensions",dimensions:S}))}return v},[]),m=d||l&&!d&&Vh(n,ot({initial:!0},c));t({nodeInternals:new Map(s),fitViewOnInitDone:m}),(h==null?void 0:h.length)>0&&(i==null||i(h))},updateNodePositions:function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=n(),l=s.onNodesChange,d=s.nodeInternals,c=s.hasDefaultNodes;if(c||l){var f=o.map(function(h){var m={id:h.id,type:"position",dragging:i};return a&&(m.positionAbsolute=h.positionAbsolute,m.position=h.position),m});if(f!=null&&f.length){if(c){var p=Ah(f,Array.from(d.values())),g=hi(p,d);t({nodeInternals:g})}l==null||l(f)}}},addSelectedNodes:function(o){var a=n(),i=a.multiSelectionActive,s=a.nodeInternals,l=a.edges,d,c=null;i?d=o.map(function(f){return kt(f,!0)}):(d=mn(Array.from(s.values()),o),c=mn(l,[])),zr({changedNodes:d,changedEdges:c,get:n,set:t})},addSelectedEdges:function(o){var a=n(),i=a.multiSelectionActive,s=a.edges,l=a.nodeInternals,d,c=null;i?d=o.map(function(f){return kt(f,!0)}):(d=mn(s,o),c=mn(Array.from(l.values()),[])),zr({changedNodes:c,changedEdges:d,get:n,set:t})},unselectNodesAndEdges:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=o.nodes,i=o.edges,s=n(),l=s.nodeInternals,d=s.edges,c=a||Array.from(l.values()),f=i||d,p=c.map(function(h){return h.selected=!1,kt(h.id,!1)}),g=f.map(function(h){return kt(h.id,!1)});zr({changedNodes:p,changedEdges:g,get:n,set:t})},setMinZoom:function(o){var a=n(),i=a.d3Zoom,s=a.maxZoom;i==null||i.scaleExtent([o,s]),t({minZoom:o})},setMaxZoom:function(o){var a=n(),i=a.d3Zoom,s=a.minZoom;i==null||i.scaleExtent([s,o]),t({maxZoom:o})},setTranslateExtent:function(o){var a=n(),i=a.d3Zoom;i==null||i.translateExtent(o),t({translateExtent:o})},resetSelectedElements:function(){var o=n(),a=o.nodeInternals,i=o.edges,s=Array.from(a.values()),l=s.filter(function(c){return c.selected}).map(function(c){return kt(c.id,!1)}),d=i.filter(function(c){return c.selected}).map(function(c){return kt(c.id,!1)});zr({changedNodes:l,changedEdges:d,get:n,set:t})},setNodeExtent:function(o){var a=n(),i=a.nodeInternals;i.forEach(function(s){s.positionAbsolute=Oh(s.position,o)}),t({nodeExtent:o,nodeInternals:new Map(i)})},reset:function(){return t(ot({},gd))}})})};function ze(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}function S0(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function Nr(e,t){if(e==null)return{};var n=S0(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(n[r]=e[r]))}return n}function w0(e){if(Array.isArray(e))return il(e)}function C0(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kt(e){return w0(e)||C0(e)||Th(e)||_0()}var E0={zoomIn:function(){},zoomOut:function(){},zoomTo:function(t){},getZoom:function(){return 1},setViewport:function(t){},getViewport:function(){return{x:0,y:0,zoom:1}},fitView:function(){},setCenter:function(t,n){},fitBounds:function(t){},project:function(t){return t},initialized:!1},x0=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}},T0=function(){var t=ke(),n=xe(x0,ze),r=n.d3Zoom,o=n.d3Selection,a=x.exports.useMemo(function(){return o&&r?{zoomIn:function(s){return r.scaleBy(zt(o,s==null?void 0:s.duration),1.2)},zoomOut:function(s){return r.scaleBy(zt(o,s==null?void 0:s.duration),1/1.2)},zoomTo:function(s,l){return r.scaleTo(zt(o,l==null?void 0:l.duration),s)},getZoom:function(){return t.getState().transform[2]},setViewport:function(s,l){var d,c,f,p=se(t.getState().transform,3),g=p[0],h=p[1],m=p[2],v=Gt.translate((d=s.x)!==null&&d!==void 0?d:g,(c=s.y)!==null&&c!==void 0?c:h).scale((f=s.zoom)!==null&&f!==void 0?f:m);r.transform(zt(o,l==null?void 0:l.duration),v)},getViewport:function(){var s=se(t.getState().transform,3),l=s[0],d=s[1],c=s[2];return{x:l,y:d,zoom:c}},fitView:function(s){return Vh(t.getState,s)},setCenter:function(s,l,d){var c=t.getState(),f=c.width,p=c.height,g=c.maxZoom,h=typeof(d==null?void 0:d.zoom)<"u"?d.zoom:g,m=f/2-s*h,v=p/2-l*h,b=Gt.translate(m,v).scale(h);r.transform(zt(o,d==null?void 0:d.duration),b)},fitBounds:function(s,l){var d,c=t.getState(),f=c.width,p=c.height,g=c.minZoom,h=c.maxZoom,m=Dh(s,f,p,g,h,(d=l==null?void 0:l.padding)!==null&&d!==void 0?d:.1),v=se(m,3),b=v[0],E=v[1],S=v[2],y=Gt.translate(b,E).scale(S);r.transform(zt(o,l==null?void 0:l.duration),y)},project:function(s){var l=t.getState(),d=l.transform,c=l.snapToGrid,f=l.snapGrid;return qh(s,d,c,f)},initialized:!0}:E0},[r,o]);return a},O0=["initialized"];function vd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rc(){var e=T0(),t=e.initialized,n=Nr(e,O0),r=ke(),o=x.exports.useCallback(function(){var g=r.getState(),h=g.nodeInternals,m=Array.from(h.values());return m.map(function(v){return dn({},v)})},[]),a=x.exports.useCallback(function(g){var h=r.getState(),m=h.nodeInternals;return m.get(g)},[]),i=x.exports.useCallback(function(){var g=r.getState(),h=g.edges,m=h===void 0?[]:h;return m.map(function(v){return dn({},v)})},[]),s=x.exports.useCallback(function(g){var h=r.getState(),m=h.edges,v=m===void 0?[]:m;return v.find(function(b){return b.id===g})},[]),l=x.exports.useCallback(function(g){var h=r.getState(),m=h.nodeInternals,v=h.setNodes,b=h.hasDefaultNodes,E=h.onNodesChange,S=Array.from(m.values()),y=typeof g=="function"?g(S):g;if(b)v(y);else if(E){var w=y.length===0?S.map(function(C){return{type:"remove",id:C.id}}):y.map(function(C){return{item:C,type:"reset"}});E(w)}},[]),d=x.exports.useCallback(function(g){var h=r.getState(),m=h.edges,v=m===void 0?[]:m,b=h.setEdges,E=h.hasDefaultEdges,S=h.onEdgesChange,y=typeof g=="function"?g(v):g;if(E)b(y);else if(S){var w=y.length===0?v.map(function(C){return{type:"remove",id:C.id}}):y.map(function(C){return{item:C,type:"reset"}});S(w)}},[]),c=x.exports.useCallback(function(g){var h=Array.isArray(g)?g:[g],m=r.getState(),v=m.nodeInternals,b=m.setNodes,E=m.hasDefaultNodes,S=m.onNodesChange;if(E){var y=Array.from(v.values()),w=[].concat(y,Kt(h));b(w)}else if(S){var C=h.map(function(_){return{item:_,type:"add"}});S(C)}},[]),f=x.exports.useCallback(function(g){var h=Array.isArray(g)?g:[g],m=r.getState(),v=m.edges,b=v===void 0?[]:v,E=m.setEdges,S=m.hasDefaultEdges,y=m.onEdgesChange;if(S)E([].concat(Kt(b),Kt(h)));else if(y){var w=h.map(function(C){return{item:C,type:"add"}});y(w)}},[]),p=x.exports.useCallback(function(){var g=r.getState(),h=g.nodeInternals,m=g.edges,v=m===void 0?[]:m,b=g.transform,E=Array.from(h.values()),S=se(b,3),y=S[0],w=S[1],C=S[2];return{nodes:E.map(function(_){return dn({},_)}),edges:v.map(function(_){return dn({},_)}),viewport:{x:y,y:w,zoom:C}}},[]);return dn(dn({},n),{},{viewportInitialized:t,getNodes:o,getNode:a,getEdges:i,getEdge:s,setNodes:l,setEdges:d,addNodes:c,addEdges:f,toObject:p})}function Xe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Xe(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}function I0(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:u("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function N0(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:u("path",{d:"M0 0h32v4.2H0z"})})}function R0(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:u("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function A0(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function k0(){return u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}var L0=["children","className"];function bd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function q0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Ur=function(t){var n=t.children,r=t.className,o=Nr(t,L0);return u("button",{...q0({type:"button",className:Xe(["react-flow__controls-button",r])},o),children:n})},P0=function(t){return t.nodesDraggable&&t.nodesConnectable&&t.elementsSelectable},$h=function(t){var n=t.style,r=t.showZoom,o=r===void 0?!0:r,a=t.showFitView,i=a===void 0?!0:a,s=t.showInteractive,l=s===void 0?!0:s,d=t.fitViewOptions,c=t.onZoomIn,f=t.onZoomOut,p=t.onFitView,g=t.onInteractiveChange,h=t.className,m=t.children,v=ke(),b=x.exports.useState(!1),E=se(b,2),S=E[0],y=E[1],w=xe(P0),C=rc(),_=C.zoomIn,T=C.zoomOut,O=C.fitView;if(x.exports.useEffect(function(){y(!0)},[]),!S)return null;var R=function(){_==null||_(),c==null||c()},k=function(){T==null||T(),f==null||f()},P=function(){O==null||O(d),p==null||p()},V=function(){v.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),g==null||g(!w)};return N("div",{className:Xe(["react-flow__controls",h]),style:n,children:[o&&N(H,{children:[u(Ur,{onClick:R,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",children:u(I0,{})}),u(Ur,{onClick:k,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",children:u(N0,{})})]}),i&&u(Ur,{className:"react-flow__controls-fitview",onClick:P,title:"fit view","aria-label":"fit view",children:u(R0,{})}),l&&u(Ur,{className:"react-flow__controls-interactive",onClick:V,title:"toggle interactivity","aria-label":"toggle interactivity",children:w?u(k0,{}):u(A0,{})}),m]})};$h.displayName="Controls";var D0=x.exports.memo($h),M0=["paid-pro","paid-sponsor","paid-enterprise","paid-custom"];function V0(e){var t=e.proOptions,n=e.position,r=n===void 0?"bottom-right":n;if(t!=null&&t.account&&M0.includes(t==null?void 0:t.account)&&t!==null&&t!==void 0&&t.hideAttribution)return null;var o="".concat(r).split("-");return u("div",{className:Xe(["react-flow__attribution"].concat(Kt(o))),"data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev/pricing",children:u("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer",children:"React Flow"})})}var B0=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"];function Sd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function F0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var $0=function(t){var n=t.x,r=t.y,o=t.label,a=t.labelStyle,i=a===void 0?{}:a,s=t.labelShowBg,l=s===void 0?!0:s,d=t.labelBgStyle,c=d===void 0?{}:d,f=t.labelBgPadding,p=f===void 0?[2,4]:f,g=t.labelBgBorderRadius,h=g===void 0?2:g,m=t.children,v=t.className,b=Nr(t,B0),E=x.exports.useRef(null),S=x.exports.useState({x:0,y:0,width:0,height:0}),y=se(S,2),w=y[0],C=y[1],_=Xe(["react-flow__edge-textwrapper",v]);return x.exports.useEffect(function(){if(E.current){var T=E.current.getBBox();C({x:T.x,y:T.y,width:T.width,height:T.height})}},[o]),typeof o>"u"||!o?null:N("g",{...F0({transform:"translate(".concat(n-w.width/2," ").concat(r-w.height/2,")"),className:_},b),children:[l&&u("rect",{width:w.width+2*p[0],x:-p[0],y:-p[1],height:w.height+2*p[1],className:"react-flow__edge-textbg",style:c,rx:h,ry:h}),u("text",{className:"react-flow__edge-text",y:w.height/2,dy:"0.3em",ref:E,style:i,children:o}),m]})},H0=x.exports.memo($0),Ja=function(e){var t=e.path,n=e.centerX,r=e.centerY,o=e.label,a=e.labelStyle,i=e.labelShowBg,s=e.labelBgStyle,l=e.labelBgPadding,d=e.labelBgBorderRadius,c=e.style,f=e.markerEnd,p=e.markerStart,g=o?u(H0,{x:n,y:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:d}):null;return N(H,{children:[u("path",{style:c,d:t,className:"react-flow__edge-path",markerEnd:f,markerStart:p}),g]})};function ka(e){var t=e.pos,n=e.x1,r=e.y1,o=e.x2,a=e.y2,i,s;switch(t){case W.Left:case W.Right:i=.5*(n+o),s=r;break;case W.Top:case W.Bottom:i=n,s=.5*(r+a);break}return[i,s]}function Hh(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=ka({pos:o,x1:t,y1:n,x2:a,y2:i}),c=se(d,2),f=c[0],p=c[1],g=ka({pos:l,x1:a,y1:i,x2:t,y2:n}),h=se(g,2),m=h[0],v=h[1];return"M".concat(t,",").concat(n," C").concat(f,",").concat(p," ").concat(m,",").concat(v," ").concat(a,",").concat(i)}function z0(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=ka({pos:o,x1:t,y1:n,x2:a,y2:i}),c=se(d,2),f=c[0],p=c[1],g=ka({pos:l,x1:a,y1:i,x2:t,y2:n}),h=se(g,2),m=h[0],v=h[1],b=t*.125+f*.375+m*.375+a*.125,E=n*.125+p*.375+v*.375+i*.125,S=Math.abs(b-t),y=Math.abs(E-n);return[b,E,S,y]}var zh=x.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.sourcePosition,i=a===void 0?W.Bottom:a,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.label,c=e.labelStyle,f=e.labelShowBg,p=e.labelBgStyle,g=e.labelBgPadding,h=e.labelBgBorderRadius,m=e.style,v=e.markerEnd,b=e.markerStart,E={sourceX:t,sourceY:n,sourcePosition:i,targetX:r,targetY:o,targetPosition:l},S=Hh(E),y=z0(E),w=se(y,2),C=w[0],_=w[1];return u(Ja,{path:S,centerX:C,centerY:_,label:d,labelStyle:c,labelShowBg:f,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:h,style:m,markerEnd:v,markerStart:b})});function wd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function U0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Cd=[W.Left,W.Right],Uh=function(t){var n=t.sourceX,r=t.sourceY,o=t.targetX,a=t.targetY,i=t.sourcePosition,s=i===void 0?W.Bottom:i,l=t.targetPosition,d=l===void 0?W.Top:l,c=Cd.includes(s),f=Cd.includes(d),p=c&&!f||f&&!c;if(p){var g=c?Math.abs(o-n):0,h=n>o?n-g:n+g,m=c?0:Math.abs(a-r),v=r<a?r+m:r-m;return[h,v,g,m]}var b=Math.abs(o-n)/2,E=o<n?o+b:o-b,S=Math.abs(a-r)/2,y=a<r?a+S:a-S;return[E,y,b,S]};function $n(e,t,n){return n===void 0?n:function(r){var o=t().edges.find(function(a){return a.id===e});n(r,U0({},o))}}var mi=function(t,n,r){return"L ".concat(t,",").concat(n-r,"Q ").concat(t,",").concat(n," ").concat(t+r,",").concat(n)},gi=function(t,n,r){return"L ".concat(t+r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-r)},yi=function(t,n,r){return"L ".concat(t,",").concat(n-r,"Q ").concat(t,",").concat(n," ").concat(t-r,",").concat(n)},vi=function(t,n,r){return"L ".concat(t-r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-r)},bi=function(t,n,r){return"L ".concat(t+r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+r)},Si=function(t,n,r){return"L ".concat(t,",").concat(n+r,"Q ").concat(t,",").concat(n," ").concat(t+r,",").concat(n)},wi=function(t,n,r){return"L ".concat(t,",").concat(n+r,"Q ").concat(t,",").concat(n," ").concat(t-r,",").concat(n)},Ci=function(t,n,r){return"L ".concat(t-r,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+r)};function ll(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.borderRadius,c=d===void 0?5:d,f=e.centerX,p=e.centerY,g=Uh({sourceX:t,sourceY:n,targetX:a,targetY:i}),h=se(g,4),m=h[0],v=h[1],b=h[2],E=h[3],S=Math.min(c,Math.abs(a-t)),y=Math.min(c,Math.abs(i-n)),w=Math.min(S,y,b,E),C=[W.Left,W.Right],_=typeof f<"u"?f:m,T=typeof p<"u"?p:v,O=null,R=null;return t<=a?(O=n<=i?mi(t,T,w):Si(t,T,w),R=n<=i?Ci(a,T,w):vi(a,T,w)):(O=n<i?yi(t,T,w):wi(t,T,w),R=n<i?bi(a,T,w):gi(a,T,w)),C.includes(o)&&C.includes(l)?t<=a?(O=n<=i?Ci(_,n,w):vi(_,n,w),R=n<=i?mi(_,i,w):Si(_,i,w)):(o===W.Right&&l===W.Left||o===W.Left&&l===W.Right||o===W.Left&&l===W.Left)&&(O=n<=i?bi(_,n,w):gi(_,n,w),R=n<=i?yi(_,i,w):wi(_,i,w)):C.includes(o)&&!C.includes(l)?(t<=a?O=n<=i?Ci(a,n,w):vi(a,n,w):O=n<=i?bi(a,n,w):gi(a,n,w),R=""):!C.includes(o)&&C.includes(l)&&(t<=a?O=n<=i?mi(t,i,w):Si(t,i,w):O=n<=i?yi(t,i,w):wi(t,i,w),R=""),"M ".concat(t,",").concat(n).concat(O).concat(R,"L ").concat(a,",").concat(i)}var oc=x.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.label,i=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,d=e.labelBgPadding,c=e.labelBgBorderRadius,f=e.style,p=e.sourcePosition,g=p===void 0?W.Bottom:p,h=e.targetPosition,m=h===void 0?W.Top:h,v=e.markerEnd,b=e.markerStart,E=e.borderRadius,S=E===void 0?5:E,y=Uh({sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:g,targetPosition:m}),w=se(y,2),C=w[0],_=w[1],T=ll({sourceX:t,sourceY:n,sourcePosition:g,targetX:r,targetY:o,targetPosition:m,borderRadius:S});return u(Ja,{path:T,centerX:C,centerY:_,label:a,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:c,style:f,markerEnd:v,markerStart:b})});function _d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ed(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_d(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_d(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Yh=x.exports.memo(function(e){return u(oc,{...Ed(Ed({},e),{},{borderRadius:0})})}),jh=x.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.label,i=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,d=e.labelBgPadding,c=e.labelBgBorderRadius,f=e.style,p=e.markerEnd,g=e.markerStart,h=Math.abs(o-n)/2,m=o<n?o+h:o-h,v=Math.abs(r-t)/2,b=r<t?r+v:r-v,E="M ".concat(t,",").concat(n,"L ").concat(r,",").concat(o);return u(Ja,{path:E,centerX:b,centerY:m,label:a,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:c,style:f,markerEnd:p,markerStart:g})});function Yr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function La(e){var t=e.pos,n=e.x1,r=e.y1,o=e.x2,a=e.y2,i=e.c,s,l;switch(t){case W.Left:s=n-Yr(n-o,i),l=r;break;case W.Right:s=n+Yr(o-n,i),l=r;break;case W.Top:s=n,l=r-Yr(r-a,i);break;case W.Bottom:s=n,l=r+Yr(a-r,i);break}return[s,l]}function Wh(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.curvature,c=d===void 0?.25:d,f=La({pos:o,x1:t,y1:n,x2:a,y2:i,c}),p=se(f,2),g=p[0],h=p[1],m=La({pos:l,x1:a,y1:i,x2:t,y2:n,c}),v=se(m,2),b=v[0],E=v[1];return"M".concat(t,",").concat(n," C").concat(g,",").concat(h," ").concat(b,",").concat(E," ").concat(a,",").concat(i)}function Y0(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=r===void 0?W.Bottom:r,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.curvature,c=d===void 0?.25:d,f=La({pos:o,x1:t,y1:n,x2:a,y2:i,c}),p=se(f,2),g=p[0],h=p[1],m=La({pos:l,x1:a,y1:i,x2:t,y2:n,c}),v=se(m,2),b=v[0],E=v[1],S=t*.125+g*.375+b*.375+a*.125,y=n*.125+h*.375+E*.375+i*.125,w=Math.abs(S-t),C=Math.abs(y-n);return[S,y,w,C]}var cl=x.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.sourcePosition,i=a===void 0?W.Bottom:a,s=e.targetPosition,l=s===void 0?W.Top:s,d=e.label,c=e.labelStyle,f=e.labelShowBg,p=e.labelBgStyle,g=e.labelBgPadding,h=e.labelBgBorderRadius,m=e.style,v=e.markerEnd,b=e.markerStart,E=e.curvature,S={sourceX:t,sourceY:n,sourcePosition:i,targetX:r,targetY:o,targetPosition:l,curvature:E},y=Wh(S),w=Y0(S),C=se(w,2),_=C[0],T=C[1];return u(Ja,{path:y,centerX:_,centerY:T,label:d,labelStyle:c,labelShowBg:f,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:h,style:m,markerEnd:v,markerStart:b})}),ac=x.exports.createContext(null),j0=ac.Provider;ac.Consumer;function dl(e,t,n,r,o,a,i){var s=i.elementFromPoint(e.clientX,e.clientY),l=(s==null?void 0:s.classList.contains("target"))||!1,d=(s==null?void 0:s.classList.contains("source"))||!1,c={elementBelow:s,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(s&&(l||d)){c.isHoveringHandle=!0;var f=s.getAttribute("data-nodeid"),p=s.getAttribute("data-handleid"),g=n?{source:f,sourceHandle:p,target:r,targetHandle:o}:{source:r,sourceHandle:o,target:f,targetHandle:p};c.connection=g;var h=t===Rn.Strict?n&&d||!n&&l:!0;h&&(c.isValid=a(g))}return c}function xd(e){e==null||e.classList.remove("react-flow__handle-valid"),e==null||e.classList.remove("react-flow__handle-connecting")}function Gh(e){var t=e.event,n=e.handleId,r=e.nodeId,o=e.onConnect,a=e.isTarget,i=e.getState,s=e.setState,l=e.isValidConnection,d=e.elementEdgeUpdaterType,c=e.onEdgeUpdateEnd,f=t.target.closest(".react-flow"),p=Ih(t.target);if(!p)return;var g=p.elementFromPoint(t.clientX,t.clientY),h=g==null?void 0:g.classList.contains("target"),m=g==null?void 0:g.classList.contains("source");if(!f||!h&&!m&&!d)return;var v=i(),b=v.onConnectStart,E=v.connectionMode,S=d||(h?"target":"source"),y=f.getBoundingClientRect(),w;s({connectionPosition:{x:t.clientX-y.left,y:t.clientY-y.top},connectionNodeId:r,connectionHandleId:n,connectionHandleType:S}),b==null||b(t,{nodeId:r,handleId:n,handleType:S});function C(T){s({connectionPosition:{x:T.clientX-y.left,y:T.clientY-y.top}});var O=dl(T,E,a,r,n,l,p),R=O.connection,k=O.elementBelow,P=O.isValid,V=O.isHoveringHandle;if(!V)return xd(w);R.source!==R.target&&k&&(w=k,k.classList.add("react-flow__handle-connecting"),k.classList.toggle("react-flow__handle-valid",P))}function _(T){var O=i(),R=O.onConnectStop,k=O.onConnectEnd,P=dl(T,E,a,r,n,l,p),V=P.connection,I=P.isValid;R==null||R(T),I&&(o==null||o(V)),k==null||k(T),d&&c&&c(T),xd(w),s({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),p.removeEventListener("mousemove",C),p.removeEventListener("mouseup",_)}p.addEventListener("mousemove",C),p.addEventListener("mouseup",_)}var W0=["type","position","isValidConnection","isConnectable","id","onConnect","children","className","onMouseDown"];function Td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function _i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Td(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Td(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var G0=function(){return!0},K0=function(t){return{connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick}},Kh=x.exports.forwardRef(function(e,t){var n=e.type,r=n===void 0?"source":n,o=e.position,a=o===void 0?W.Top:o,i=e.isValidConnection,s=i===void 0?G0:i,l=e.isConnectable,d=l===void 0?!0:l,c=e.id,f=e.onConnect,p=e.children,g=e.className,h=e.onMouseDown,m=Nr(e,W0),v=ke(),b=x.exports.useContext(ac),E=xe(K0,ze),S=E.connectionStartHandle,y=E.connectOnClick,w=c||null,C=r==="target",_=function(k){var P=v.getState(),V=P.defaultEdgeOptions,I=P.onConnect,q=P.hasDefaultEdges,A=_i(_i({},V),k);if(q){var M=v.getState(),$=M.edges;v.setState({edges:y0(A,$)})}I==null||I(A),f==null||f(A)},T=function(k){k.button===0&&Gh({event:k,handleId:w,nodeId:b,onConnect:_,isTarget:C,getState:v.getState,setState:v.setState,isValidConnection:s}),h==null||h(k)},O=function(k){var P=v.getState(),V=P.onClickConnectStart,I=P.onClickConnectStop,q=P.onClickConnectEnd,A=P.connectionMode;if(!S){V==null||V(k,{nodeId:b,handleId:w,handleType:r}),v.setState({connectionStartHandle:{nodeId:b,type:r,handleId:w}});return}var M=Ih(k.target),$=dl(k,A,S.type==="target",S.nodeId,S.handleId||null,s,M),z=$.connection,B=$.isValid;I==null||I(k),B&&_(z),q==null||q(k),v.setState({connectionStartHandle:null})};return u("div",{..._i({"data-handleid":w,"data-nodeid":b,"data-handlepos":a,className:Xe(["react-flow__handle","react-flow__handle-".concat(a),"nodrag",g,{source:!C,target:C,connectable:d,connecting:(S==null?void 0:S.nodeId)===b&&(S==null?void 0:S.handleId)===w&&(S==null?void 0:S.type)===r}]),onMouseDown:T,onClick:y?O:void 0,ref:t},m),children:p})});Kh.displayName="Handle";var qa=x.exports.memo(Kh),Xh=function(t){var n=t.data,r=t.isConnectable,o=t.targetPosition,a=o===void 0?W.Top:o,i=t.sourcePosition,s=i===void 0?W.Bottom:i;return N(H,{children:[u(qa,{type:"target",position:a,isConnectable:r}),n==null?void 0:n.label,u(qa,{type:"source",position:s,isConnectable:r})]})};Xh.displayName="DefaultNode";var ul=x.exports.memo(Xh),Qh=function(t){var n=t.data,r=t.isConnectable,o=t.sourcePosition,a=o===void 0?W.Bottom:o;return N(H,{children:[n==null?void 0:n.label,u(qa,{type:"source",position:a,isConnectable:r})]})};Qh.displayName="InputNode";var Zh=x.exports.memo(Qh),Jh=function(t){var n=t.data,r=t.isConnectable,o=t.targetPosition,a=o===void 0?W.Top:o;return N(H,{children:[u(qa,{type:"target",position:a,isConnectable:r}),n==null?void 0:n.label]})};Jh.displayName="OutputNode";var em=x.exports.memo(Jh),X0=function(t){return{selectedNodes:Array.from(t.nodeInternals.values()).filter(function(n){return n.selected}),selectedEdges:t.edges.filter(function(n){return n.selected})}},Q0=function(t,n){var r=t.selectedNodes.map(function(s){return s.id}),o=n.selectedNodes.map(function(s){return s.id}),a=t.selectedEdges.map(function(s){return s.id}),i=n.selectedEdges.map(function(s){return s.id});return ze(r,o)&&ze(a,i)};function Z0(e){var t=e.onSelectionChange,n=xe(X0,Q0),r=n.selectedNodes,o=n.selectedEdges;return x.exports.useEffect(function(){t({nodes:r,edges:o})},[r,o]),null}var J0=x.exports.memo(Z0),ex=function(t){return{setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset}};function It(e,t){x.exports.useEffect(function(){typeof e<"u"&&t(e)},[e])}function he(e,t,n){x.exports.useEffect(function(){typeof t<"u"&&n(ue({},e,t))},[t])}var tx=function(t){var n=t.nodes,r=t.edges,o=t.defaultNodes,a=t.defaultEdges,i=t.onConnect,s=t.onConnectStart,l=t.onConnectStop,d=t.onConnectEnd,c=t.onClickConnectStart,f=t.onClickConnectStop,p=t.onClickConnectEnd,g=t.nodesDraggable,h=t.nodesConnectable,m=t.minZoom,v=t.maxZoom,b=t.nodeExtent,E=t.onNodesChange,S=t.onEdgesChange,y=t.elementsSelectable,w=t.connectionMode,C=t.snapGrid,_=t.snapToGrid,T=t.translateExtent,O=t.connectOnClick,R=t.defaultEdgeOptions,k=t.fitView,P=t.fitViewOptions,V=t.onNodesDelete,I=t.onEdgesDelete,q=t.onNodeDrag,A=t.onNodeDragStart,M=t.onNodeDragStop,$=t.onSelectionDrag,z=t.onSelectionDragStart,B=t.onSelectionDragStop,U=xe(ex,ze),G=U.setNodes,D=U.setEdges,L=U.setDefaultNodesAndEdges,F=U.setMinZoom,Y=U.setMaxZoom,K=U.setTranslateExtent,Q=U.setNodeExtent,X=U.reset,j=ke();return x.exports.useEffect(function(){return L(o,a),function(){X()}},[]),he("defaultEdgeOptions",R,j.setState),he("connectionMode",w,j.setState),he("onConnect",i,j.setState),he("onConnectStart",s,j.setState),he("onConnectStop",l,j.setState),he("onConnectEnd",d,j.setState),he("onClickConnectStart",c,j.setState),he("onClickConnectStop",f,j.setState),he("onClickConnectEnd",p,j.setState),he("nodesDraggable",g,j.setState),he("nodesConnectable",h,j.setState),he("elementsSelectable",y,j.setState),he("snapToGrid",_,j.setState),he("snapGrid",C,j.setState),he("onNodesChange",E,j.setState),he("onEdgesChange",S,j.setState),he("connectOnClick",O,j.setState),he("fitViewOnInit",k,j.setState),he("fitViewOnInitOptions",P,j.setState),he("onNodesDelete",V,j.setState),he("onEdgesDelete",I,j.setState),he("onNodeDrag",q,j.setState),he("onNodeDragStart",A,j.setState),he("onNodeDragStop",M,j.setState),he("onSelectionDrag",$,j.setState),he("onSelectionDragStart",z,j.setState),he("onSelectionDragStop",B,j.setState),It(n,G),It(r,D),It(o,G),It(a,D),It(m,F),It(v,Y),It(T,K),It(b,Q),null},nx=".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__container{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__viewport{pointer-events:none;transform-origin:0 0;z-index:2}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow .react-flow__edges{overflow:visible;pointer-events:none}.react-flow .react-flow__connectionline{z-index:1001}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{box-sizing:border-box;pointer-events:all;position:absolute;transform-origin:0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{pointer-events:none;transform-origin:left top;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none;position:absolute}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__controls{bottom:20px;left:15px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:20px;position:absolute;right:15px;z-index:5}.react-flow__attribution{background:hsla(0,0%,100%,.5);color:#999;font-size:10px;padding:2px 3px;position:absolute;z-index:1000}.react-flow__attribution a{color:#555;text-decoration:none}.react-flow__attribution.top{top:0}.react-flow__attribution.bottom{bottom:0}.react-flow__attribution.left{left:0}.react-flow__attribution.right{right:0}.react-flow__attribution.center{left:50%;transform:translateX(-50%)}",rx=nx,ox=".react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-group,.react-flow__node-input,.react-flow__node-output{background:#fff;border:1px solid #1a192b;border-radius:3px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selected,.react-flow__node-group.selected,.react-flow__node-input.selected,.react-flow__node-output.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle,.react-flow__node-group .react-flow__handle,.react-flow__node-input .react-flow__handle,.react-flow__node-output .react-flow__handle{background:#1a192b}.react-flow__node-default.selectable:hover,.react-flow__node-group.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-default.selectable.selected,.react-flow__node-group.selectable.selected,.react-flow__node-input.selectable.selected,.react-flow__node-output.selectable.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-group{background:hsla(0,0%,94%,.25);border-color:#1a192b}.react-flow__nodesselection-rect,.react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}",ax=ox,ix=function(t,n,r){return r===W.Left?t-n:r===W.Right?t+n:t},sx=function(t,n,r){return r===W.Top?t-n:r===W.Bottom?t+n:t},Od=function(t){var n=t.className,r=t.position,o=t.centerX,a=t.centerY,i=t.radius,s=i===void 0?10:i;return u("circle",{className:Xe(["react-flow__edgeupdater",n]),cx:ix(o,s,r),cy:sx(a,s,r),r:s,stroke:"transparent",fill:"transparent"})},un=function(e){var t=function(r){var o=r.id,a=r.className,i=r.type,s=r.data,l=r.onClick,d=r.onEdgeDoubleClick,c=r.selected,f=r.animated,p=r.label,g=r.labelStyle,h=r.labelShowBg,m=r.labelBgStyle,v=r.labelBgPadding,b=r.labelBgBorderRadius,E=r.style,S=r.source,y=r.target,w=r.sourceX,C=r.sourceY,_=r.targetX,T=r.targetY,O=r.sourcePosition,R=r.targetPosition,k=r.elementsSelectable,P=r.hidden,V=r.sourceHandleId,I=r.targetHandleId,q=r.onContextMenu,A=r.onMouseEnter,M=r.onMouseMove,$=r.onMouseLeave,z=r.edgeUpdaterRadius,B=r.onEdgeUpdate,U=r.onEdgeUpdateStart,G=r.onEdgeUpdateEnd,D=r.markerEnd,L=r.markerStart,F=r.rfId,Y=x.exports.useState(!1),K=se(Y,2),Q=K[0],X=K[1],j=ke(),ce=function(oe){var Ne=j.getState(),Oe=Ne.edges,ft=Ne.addSelectedEdges,rt=Oe.find(function(ln){return ln.id===o});k&&(j.setState({nodesSelectionActive:!1}),ft([o])),l==null||l(oe,rt)},ye=$n(o,j.getState,d),be=$n(o,j.getState,q),Ce=$n(o,j.getState,A),Ve=$n(o,j.getState,M),Ue=$n(o,j.getState,$),Be=function(oe,Ne){var Oe=Ne?y:S,ft=(Ne?I:V)||null,rt=Ne?"target":"source",ln=function(){return!0},ni=Ne,Dn=j.getState().edges.find(function(Ht){return Ht.id===o});U==null||U(oe,Dn,rt);var Ar=G?function(Ht){return G(Ht,Dn,rt)}:void 0,ri=function(kr){return B==null?void 0:B(Dn,kr)};Gh({event:oe,handleId:ft,nodeId:Oe,onConnect:ri,isTarget:ni,getState:j.getState,setState:j.setState,isValidConnection:ln,elementEdgeUpdaterType:rt,onEdgeUpdateEnd:Ar})},Ye=function(oe){return Be(oe,!0)},Ie=function(oe){return Be(oe,!1)},je=function(){return X(!0)},ut=function(){return X(!1)},J=x.exports.useMemo(function(){return"url(#".concat(sl(L,F),")")},[L,F]),le=x.exports.useMemo(function(){return"url(#".concat(sl(D,F),")")},[D,F]);if(P)return null;var ee=!k&&!l,me=typeof B<"u",ne=Xe(["react-flow__edge","react-flow__edge-".concat(i),a,{selected:c,animated:f,inactive:ee,updating:Q}]);return N("g",{className:ne,onClick:ce,onDoubleClick:ye,onContextMenu:be,onMouseEnter:Ce,onMouseMove:Ve,onMouseLeave:Ue,children:[u(e,{id:o,source:S,target:y,selected:c,animated:f,label:p,labelStyle:g,labelShowBg:h,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:b,data:s,style:E,sourceX:w,sourceY:C,targetX:_,targetY:T,sourcePosition:O,targetPosition:R,sourceHandleId:V,targetHandleId:I,markerStart:J,markerEnd:le}),me&&u("g",{onMouseDown:Ye,onMouseEnter:je,onMouseOut:ut,children:u(Od,{position:O,centerX:w,centerY:C,radius:z})}),me&&u("g",{onMouseDown:Ie,onMouseEnter:je,onMouseOut:ut,children:u(Od,{position:R,centerX:_,centerY:T,radius:z})})]})};return t.displayName="EdgeWrapper",x.exports.memo(t)};function Id(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Nd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Id(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Id(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lx(e){var t={default:un(e.default||cl),straight:un(e.bezier||jh),step:un(e.step||Yh),smoothstep:un(e.step||oc),simplebezier:un(e.simplebezier||zh)},n={},r=Object.keys(e).filter(function(o){return!["default","bezier"].includes(o)}).reduce(function(o,a){return o[a]=un(e[a]||cl),o},n);return Nd(Nd({},t),r)}function Rd(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,a=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case W.Top:return{x:r+a/2,y:o};case W.Right:return{x:r+a,y:o+i/2};case W.Bottom:return{x:r+a/2,y:o+i};case W.Left:return{x:r,y:o+i/2}}}function Ad(e,t){if(!e)return null;var n=null;return e.length===1||!t?n=e[0]:t&&(n=e.find(function(r){return r.id===t})),typeof n>"u"?null:n}var cx=function(t,n,r,o,a,i){var s=Rd(r,t,n),l=Rd(i,o,a);return{sourceX:s.x,sourceY:s.y,targetX:l.x,targetY:l.y}};function dx(e){var t=e.sourcePos,n=e.targetPos,r=e.sourceWidth,o=e.sourceHeight,a=e.targetWidth,i=e.targetHeight,s=e.width,l=e.height,d=e.transform,c={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+r,n.x+a),y2:Math.max(t.y+o,n.y+i)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);var f=Aa({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:s/d[2],height:l/d[2]}),p=Math.max(0,Math.min(f.x2,c.x2)-Math.max(f.x,c.x)),g=Math.max(0,Math.min(f.y2,c.y2)-Math.max(f.y,c.y)),h=Math.ceil(p*g);return h>0}function kd(e,t){var n,r,o,a,i,s=e.get(t),l=(s==null||(n=s[Te])===null||n===void 0?void 0:n.handleBounds)||null,d=!s||!l||!s.width||!s.height||typeof((r=s.positionAbsolute)===null||r===void 0?void 0:r.x)>"u"||typeof((o=s.positionAbsolute)===null||o===void 0?void 0:o.y)>"u";return[{x:(s==null||(a=s.positionAbsolute)===null||a===void 0?void 0:a.x)||0,y:(s==null||(i=s.positionAbsolute)===null||i===void 0?void 0:i.y)||0,width:(s==null?void 0:s.width)||0,height:(s==null?void 0:s.height)||0},l,!d]}var ux=typeof document<"u"?document:null,Pa=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{target:ux},n=x.exports.useState(!1),r=se(n,2),o=r[0],a=r[1],i=x.exports.useRef(new Set([])),s=x.exports.useMemo(function(){if(e!==null){var f=Array.isArray(e)?e:[e],p=f.filter(function(h){return typeof h=="string"}).map(function(h){return h.split("+")}),g=p.reduce(function(h,m){return h.concat.apply(h,Kt(m))},[]);return[p,g]}return[[],[]]},[e]),l=se(s,2),d=l[0],c=l[1];return x.exports.useEffect(function(){if(e!==null){var f,p,g=function(b){if(Pd(b))return!1;var E=qd(b.code,c);i.current.add(b[E]),Ld(d,i.current,!1)&&(b.preventDefault(),a(!0))},h=function(b){if(Pd(b))return!1;var E=qd(b.code,c);Ld(d,i.current,!0)?(a(!1),i.current.clear()):i.current.delete(b[E])},m=function(){i.current.clear(),a(!1)};return t==null||(f=t.target)===null||f===void 0||f.addEventListener("keydown",g),t==null||(p=t.target)===null||p===void 0||p.addEventListener("keyup",h),window.addEventListener("blur",m),function(){var v,b;t==null||(v=t.target)===null||v===void 0||v.removeEventListener("keydown",g),t==null||(b=t.target)===null||b===void 0||b.removeEventListener("keyup",h),window.removeEventListener("blur",m)}}},[e,a]),o};function Ld(e,t,n){return e.filter(function(r){return n||r.length===t.size}).some(function(r){return r.every(function(o){return t.has(o)})})}function qd(e,t){return t.includes(e)?"code":"key"}function Pd(e){var t=e.target;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))}var fx=function(t){return{onNodesChange:t.onNodesChange,onEdgesChange:t.onEdgesChange}},px=function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,r=ke(),o=xe(fx,ze),a=o.onNodesChange,i=o.onEdgesChange,s=Pa(t),l=Pa(n);x.exports.useEffect(function(){var d=r.getState(),c=d.nodeInternals,f=d.edges,p=d.hasDefaultNodes,g=d.hasDefaultEdges,h=d.onNodesDelete,m=d.onEdgesDelete,v=Array.from(c.values()),b=v.reduce(function(T,O){return(!O.selected&&O.parentNode&&T.find(function(R){return R.id===O.parentNode})||O.selected)&&T.push(O),T},[]),E=f.filter(function(T){return T.selected});if(s&&(b||E)){var S=tc(b,f),y=[].concat(Kt(E),Kt(S)),w=y.reduce(function(T,O){return T.includes(O.id)||T.push(O.id),T},[]);if((g||p)&&(g&&r.setState({edges:f.filter(function(T){return!w.includes(T.id)})}),p&&(b.forEach(function(T){c.delete(T.id)}),r.setState({nodeInternals:new Map(c)}))),w.length>0&&(m==null||m(y),i)){var C=w.map(function(T){return{id:T,type:"remove"}});i(C)}if(b.length>0&&(h==null||h(b),a)){var _=b.map(function(T){return{id:T.id,type:"remove"}});a(_)}r.setState({nodesSelectionActive:!1})}},[s,a,i]),x.exports.useEffect(function(){r.setState({multiSelectionActive:l})},[l])};function hx(e){var t=ke();x.exports.useEffect(function(){var n,r=function(){if(!!e.current){var a=Jl(e.current);t.setState({width:a.width||500,height:a.height||500})}};return r(),window.onresize=r,e.current&&(n=new ResizeObserver(function(){return r()}),n.observe(e.current)),function(){window.onresize=null,n&&e.current&&n.unobserve(e.current)}},[])}var mx=function(t,n){return t.x!==n.x||t.y!==n.y||t.zoom!==n.k},Ei=function(t){return{x:t.x,y:t.y,zoom:t.k}},jr=function(t,n){return t.target.closest(".".concat(n))},gx=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler}},yx=function(t){var n=t.onMove,r=t.onMoveStart,o=t.onMoveEnd,a=t.zoomOnScroll,i=a===void 0?!0:a,s=t.zoomOnPinch,l=s===void 0?!0:s,d=t.panOnScroll,c=d===void 0?!1:d,f=t.panOnScrollSpeed,p=f===void 0?.5:f,g=t.panOnScrollMode,h=g===void 0?bn.Free:g,m=t.zoomOnDoubleClick,v=m===void 0?!0:m,b=t.selectionKeyPressed,E=t.elementsSelectable,S=t.panOnDrag,y=S===void 0?!0:S,w=t.defaultPosition,C=w===void 0?[0,0]:w,_=t.defaultZoom,T=_===void 0?1:_,O=t.zoomActivationKeyCode,R=t.preventScrolling,k=R===void 0?!0:R,P=t.children,V=t.noWheelClassName,I=t.noPanClassName,q=ke(),A=x.exports.useRef(!1),M=x.exports.useRef(null),$=x.exports.useRef({x:0,y:0,zoom:0}),z=xe(gx,ze),B=z.d3Zoom,U=z.d3Selection,G=z.d3ZoomHandler,D=Pa(O);return hx(M),x.exports.useEffect(function(){if(M.current){var L=q.getState(),F=L.minZoom,Y=L.maxZoom,K=L.translateExtent,Q=s0().scaleExtent([F,Y]).translateExtent(K),X=Je(M.current).call(Q),j=Sn(C[0],K[0][0],K[1][0]),ce=Sn(C[1],K[0][1],K[1][1]),ye=Sn(T,F,Y),be=Gt.translate(j,ce).scale(ye);Q.transform(X,be),q.setState({d3Zoom:Q,d3Selection:X,d3ZoomHandler:X.on("wheel.zoom"),transform:[j,ce,ye]})}},[]),x.exports.useEffect(function(){U&&B&&(c&&!D?U.on("wheel",function(L){if(jr(L,V))return!1;L.preventDefault(),L.stopImmediatePropagation();var F=U.property("__zoom").k||1;if(L.ctrlKey&&l){var Y=it(L),K=-L.deltaY*(L.deltaMode===1?.05:L.deltaMode?1:.002)*10,Q=F*Math.pow(2,K);B.scaleTo(U,Q,Y);return}var X=L.deltaMode===1?20:1,j=h===bn.Vertical?0:L.deltaX*X,ce=h===bn.Horizontal?0:L.deltaY*X;B.translateBy(U,-(j/F)*p,-(ce/F)*p)}).on("wheel.zoom",null):typeof G<"u"&&U.on("wheel",function(L){if(!k||jr(L,V))return null;L.preventDefault()}).on("wheel.zoom",G))},[c,h,U,B,G,D,l,k,V]),x.exports.useEffect(function(){B&&(b&&!A.current?B.on("zoom",null):b||B.on("zoom",function(L){if(q.setState({transform:[L.transform.x,L.transform.y,L.transform.k]}),n){var F=Ei(L.transform);n(L.sourceEvent,F)}}))},[b,B,n]),x.exports.useEffect(function(){B&&B.on("start",function(L){if(A.current=!0,r){var F=Ei(L.transform);$.current=F,r(L.sourceEvent,F)}})},[B,r]),x.exports.useEffect(function(){B&&B.on("end",function(L){if(A.current=!1,o&&mx($.current,L.transform)){var F=Ei(L.transform);$.current=F,o(L.sourceEvent,F)}})},[B,o]),x.exports.useEffect(function(){B&&B.filter(function(L){var F=D||i,Y=l&&L.ctrlKey;return!y&&!F&&!c&&!v&&!l||b||!v&&L.type==="dblclick"||jr(L,V)&&L.type==="wheel"||jr(L,I)&&L.type!=="wheel"||!l&&L.ctrlKey&&L.type==="wheel"||!F&&!c&&!Y&&L.type==="wheel"||!y&&(L.type==="mousedown"||L.type==="touchstart")?!1:(!L.ctrlKey||L.type==="wheel")&&!L.button})},[B,i,l,c,v,y,b,E,D]),u("div",{className:"react-flow__renderer react-flow__container",ref:M,children:P})};function Dd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Md(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vd(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}var vx=function(t){return{userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable}},Bd={startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},bx=x.exports.memo(function(e){var t=e.selectionKeyPressed,n=ke(),r=x.exports.useRef(0),o=x.exports.useRef(0),a=x.exports.useRef(),i=x.exports.useState(Bd),s=se(i,2),l=s[0],d=s[1],c=xe(vx,ze),f=c.userSelectionActive,p=c.elementsSelectable,g=f||t;if(!p||!g)return null;var h=function(){d(Bd),n.setState({userSelectionActive:!1}),r.current=0,o.current=0},m=function(y){var w=y.target.closest(".react-flow");a.current=w.getBoundingClientRect();var C=Vd(y,a.current);d({width:0,height:0,startX:C.x,startY:C.y,x:C.x,y:C.y,draw:!0}),n.setState({userSelectionActive:!0,nodesSelectionActive:!1})},v=function(y){var w,C;if(!(!t||!l.draw||!a.current)){var _=Vd(y,a.current),T=(w=l.startX)!==null&&w!==void 0?w:0,O=(C=l.startY)!==null&&C!==void 0?C:0,R=Md(Md({},l),{},{x:_.x<T?_.x:T,y:_.y<O?_.y:O,width:Math.abs(_.x-T),height:Math.abs(_.y-O)}),k=n.getState(),P=k.nodeInternals,V=k.edges,I=k.transform,q=k.onNodesChange,A=k.onEdgesChange,M=Array.from(P.values()),$=Ph(P,R,I,!1,!0),z=tc($,V).map(function(D){return D.id}),B=$.map(function(D){return D.id});if(r.current!==B.length){r.current=B.length;var U=mn(M,B);U.length&&(q==null||q(U))}if(o.current!==z.length){o.current=z.length;var G=mn(V,z);G.length&&(A==null||A(G))}d(R)}},b=function(){n.setState({nodesSelectionActive:r.current>0}),h()},E=function(){n.setState({nodesSelectionActive:!1}),h()};return u("div",{className:"react-flow__selectionpane react-flow__container",onMouseDown:m,onMouseMove:v,onMouseUp:b,onMouseLeave:E,children:l.draw&&u("div",{className:"react-flow__selection react-flow__container",style:{width:l.width,height:l.height,transform:"translate(".concat(l.x,"px, ").concat(l.y,"px)")}})})});function Fd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function $d(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tm(e,t){if(!e.parentNode)return!1;var n=t.get(e.parentNode);return n?n.selected?!0:tm(n,t):!1}function Hd(e,t,n){var r=e;do{var o;if((o=r)!==null&&o!==void 0&&o.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Sx(e,t,n){return Array.from(e.values()).filter(function(r){return(r.selected||r.id===n)&&(!r.parentNode||!tm(r,e))}).map(function(r){var o,a,i,s;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:t.x-((o=(a=r.positionAbsolute)===null||a===void 0?void 0:a.x)!==null&&o!==void 0?o:0),y:t.y-((i=(s=r.positionAbsolute)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode,width:r.width,height:r.height}})}function wx(e,t,n,r){var o=e.extent||r,a={x:t.x-e.distance.x,y:t.y-e.distance.y};if(e.extent==="parent")if(e.parentNode&&e.width&&e.height){var i=n.get(e.parentNode);o=i!=null&&i.positionAbsolute&&i!==null&&i!==void 0&&i.width&&i!==null&&i!==void 0&&i.height?[[i.positionAbsolute.x,i.positionAbsolute.y],[i.positionAbsolute.x+i.width-e.width,i.positionAbsolute.y+i.height-e.height]]:o}else o=r;else if(e.extent&&e.parentNode){var s,l,d,c,f=n.get(e.parentNode),p=(s=f==null||(l=f.positionAbsolute)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,g=(d=f==null||(c=f.positionAbsolute)===null||c===void 0?void 0:c.y)!==null&&d!==void 0?d:0;o=[[e.extent[0][0]+p,e.extent[0][1]+g],[e.extent[1][0]+p,e.extent[1][1]+g]]}var h={x:0,y:0};if(e.parentNode){var m,v,b,E,S=n.get(e.parentNode);h={x:(m=S==null||(v=S.positionAbsolute)===null||v===void 0?void 0:v.x)!==null&&m!==void 0?m:0,y:(b=S==null||(E=S.positionAbsolute)===null||E===void 0?void 0:E.y)!==null&&b!==void 0?b:0}}return e.positionAbsolute=o?Oh(a,o):a,e.position={x:e.positionAbsolute.x-h.x,y:e.positionAbsolute.y-h.y},e}function xi(e){var t=e.nodeId,n=e.dragItems,r=e.nodeInternals,o=n.map(function(a){var i=r.get(a.id);return $d($d({},i),{},{position:a.position,positionAbsolute:a.positionAbsolute})});return[t?o.find(function(a){return a.id===t}):o[0],o]}function Ti(e){return function(t,n,r){return e==null?void 0:e(t,r)}}function nm(e){var t=e.nodeRef,n=e.disabled,r=n===void 0?!1:n,o=e.noDragClassName,a=e.handleSelector,i=e.nodeId,s=e.isSelectable,l=e.selectNodesOnDrag,d=x.exports.useState(!1),c=se(d,2),f=c[0],p=c[1],g=ke(),h=x.exports.useRef(),m=x.exports.useRef({x:null,y:null}),v=x.exports.useCallback(function(b){var E=b.sourceEvent,S=g.getState(),y=S.transform,w=S.snapGrid,C=S.snapToGrid,_=E.touches?E.touches[0].clientX:E.clientX,T=E.touches?E.touches[0].clientY:E.clientY,O=qh({x:_,y:T},y,C,w);return O},[]);return x.exports.useEffect(function(){if(t!=null&&t.current){var b=Je(t.current);if(r)b.on(".drag",null);else{var E=y_().on("start",function(S){var y=g.getState(),w=y.nodeInternals,C=y.multiSelectionActive,_=y.unselectNodesAndEdges,T=y.onNodeDragStart,O=y.onSelectionDragStart,R=i?T:Ti(O);if(!l&&!C&&i){var k;(k=w.get(i))!==null&&k!==void 0&&k.selected||_()}i&&s&&l&&Lh({id:i,store:g});var P=v(S);if(m.current=P,h.current=Sx(w,P,i),R&&h.current){var V=xi({nodeId:i,dragItems:h.current,nodeInternals:w}),I=se(V,2),q=I[0],A=I[1];R(S.sourceEvent,q,A)}}).on("drag",function(S){var y=g.getState(),w=y.updateNodePositions,C=y.nodeInternals,_=y.nodeExtent,T=y.onNodeDrag,O=y.onSelectionDrag,R=v(S);if((m.current.x!==R.x||m.current.y!==R.y)&&h.current){m.current=R,h.current=h.current.map(function(A){return wx(A,R,C,_)});var k=i?T:Ti(O);if(w(h.current,!0,!0),p(!0),k){var P=xi({nodeId:i,dragItems:h.current,nodeInternals:C}),V=se(P,2),I=V[0],q=V[1];k(S.sourceEvent,I,q)}}S.on("end",function(A){if(p(!1),h.current){var M=g.getState(),$=M.updateNodePositions,z=M.nodeInternals,B=M.onNodeDragStop,U=M.onSelectionDragStop,G=i?B:Ti(U);if($(h.current,!1,!1),G){var D=xi({nodeId:i,dragItems:h.current,nodeInternals:z}),L=se(D,2),F=L[0],Y=L[1];G(A.sourceEvent,F,Y)}}})}).filter(function(S){var y=S.target,w=!S.button&&(!o||!Hd(y,".".concat(o),t))&&(!a||Hd(y,a,t));return w});return b.call(E),function(){b.on(".drag",null)}}}},[t,r,o,a,s,g,i,l,v]),f}function zd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Cx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var _x=function(t){return Cx({transformString:"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")"),userSelectionActive:t.userSelectionActive},ec(Array.from(t.nodeInternals.values()).filter(function(n){return n.selected})))},Ex=function(t){var n=Array.from(t.nodeInternals.values()).filter(function(r){return r.selected});return ec(n)};function xx(e){var t=e.onSelectionContextMenu,n=e.noPanClassName,r=ke(),o=xe(_x,ze),a=o.transformString,i=o.userSelectionActive,s=xe(Ex,ze),l=s.width,d=s.height,c=s.x,f=s.y,p=x.exports.useRef(null);if(nm({nodeRef:p}),i||!l||!d)return null;var g=t?function(h){var m=Array.from(r.getState().nodeInternals.values()).filter(function(v){return v.selected});t(h,m)}:void 0;return u("div",{className:Xe(["react-flow__nodesselection","react-flow__container",n]),style:{transform:a},children:u("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:g,style:{width:l,height:d,top:f,left:c}})})}var Tx=x.exports.memo(xx),Ox=function(t){return t.nodesSelectionActive},rm=function(t){var n=t.children,r=t.onPaneClick,o=t.onPaneContextMenu,a=t.onPaneScroll,i=t.deleteKeyCode,s=t.onMove,l=t.onMoveStart,d=t.onMoveEnd,c=t.selectionKeyCode,f=t.multiSelectionKeyCode,p=t.zoomActivationKeyCode,g=t.elementsSelectable,h=t.zoomOnScroll,m=t.zoomOnPinch,v=t.panOnScroll,b=t.panOnScrollSpeed,E=t.panOnScrollMode,S=t.zoomOnDoubleClick,y=t.panOnDrag,w=t.defaultPosition,C=t.defaultZoom,_=t.preventScrolling,T=t.onSelectionContextMenu,O=t.noWheelClassName,R=t.noPanClassName,k=ke(),P=xe(Ox),V=Pa(c);px({deleteKeyCode:i,multiSelectionKeyCode:f});var I=function($){r==null||r($),k.getState().resetSelectedElements(),k.setState({nodesSelectionActive:!1})},q=o?function(M){return o(M)}:void 0,A=a?function(M){return a(M)}:void 0;return N(yx,{onMove:s,onMoveStart:l,onMoveEnd:d,selectionKeyPressed:V,elementsSelectable:g,zoomOnScroll:h,zoomOnPinch:m,panOnScroll:v,panOnScrollSpeed:b,panOnScrollMode:E,zoomOnDoubleClick:S,panOnDrag:y,defaultPosition:w,defaultZoom:C,zoomActivationKeyCode:p,preventScrolling:_,noWheelClassName:O,noPanClassName:R,children:[n,u(bx,{selectionKeyPressed:V}),P&&u(Tx,{onSelectionContextMenu:T,noPanClassName:R}),u("div",{className:"react-flow__pane react-flow__container",onClick:I,onContextMenu:q,onWheel:A})]})};rm.displayName="FlowRenderer";var Ix=x.exports.memo(rm);function Nx(e){var t=xe(x.exports.useCallback(function(n){return e?Ph(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):Array.from(n.nodeInternals.values())},[e]));return t}var Rx=function(t){return{nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions}},om=function(t){var n=xe(Rx,ze),r=n.nodesDraggable,o=n.nodesConnectable,a=n.elementsSelectable,i=n.updateNodeDimensions,s=Nx(t.onlyRenderVisibleElements),l=x.exports.useRef(),d=x.exports.useMemo(function(){if(typeof ResizeObserver>"u")return null;var c=new ResizeObserver(function(f){var p=f.map(function(g){return{id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}});i(p)});return l.current=c,c},[]);return x.exports.useEffect(function(){return function(){var c;l==null||(c=l.current)===null||c===void 0||c.disconnect()}},[]),u("div",{className:"react-flow__nodes react-flow__container",children:s.map(function(c){var f,p,g,h,m,v,b,E=c.type||"default";t.nodeTypes[E]||(E="default");var S=t.nodeTypes[E]||t.nodeTypes.default,y=!!(c.draggable||r&&typeof c.draggable>"u"),w=!!(c.selectable||a&&typeof c.selectable>"u"),C=!!(c.connectable||o&&typeof c.connectable>"u");return u(S,{id:c.id,className:c.className,style:c.style,type:E,data:c.data,sourcePosition:c.sourcePosition||W.Bottom,targetPosition:c.targetPosition||W.Top,hidden:c.hidden,xPos:(f=(p=c.positionAbsolute)===null||p===void 0?void 0:p.x)!==null&&f!==void 0?f:0,yPos:(g=(h=c.positionAbsolute)===null||h===void 0?void 0:h.y)!==null&&g!==void 0?g:0,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!c.selected,isDraggable:y,isSelectable:w,isConnectable:C,resizeObserver:d,dragHandle:c.dragHandle,zIndex:(m=(v=c[Te])===null||v===void 0?void 0:v.z)!==null&&m!==void 0?m:0,isParent:!!((b=c[Te])!==null&&b!==void 0&&b.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!c.width&&!!c.height},c.id)})})};om.displayName="NodeRenderer";var Ax=x.exports.memo(om),fn;function Ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Yd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ud(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ud(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var kx=(fn={},ue(fn,W.Left,W.Right),ue(fn,W.Right,W.Left),ue(fn,W.Top,W.Bottom),ue(fn,W.Bottom,W.Top),fn),Lx=function(e){var t,n,r,o,a,i=e.connectionNodeId,s=e.connectionHandleType,l=e.connectionLineStyle,d=e.connectionLineType,c=d===void 0?gt.Bezier:d,f=e.isConnectable,p=e.CustomConnectionLineComponent,g=xe(x.exports.useCallback(function(z){return{fromNode:z.nodeInternals.get(i),handleId:z.connectionHandleId,toX:(z.connectionPosition.x-z.transform[0])/z.transform[2],toY:(z.connectionPosition.y-z.transform[1])/z.transform[2]}},[i]),ze),h=g.fromNode,m=g.handleId,v=g.toX,b=g.toY,E=h==null||(t=h[Te])===null||t===void 0?void 0:t.handleBounds;if(!h||!f||!(E!=null&&E[s]))return null;var S=E[s],y=m?S.find(function(z){return z.id===m}):S[0],w=y?y.x+y.width/2:((n=h==null?void 0:h.width)!==null&&n!==void 0?n:0)/2,C=y?y.y+y.height/2:(r=h==null?void 0:h.height)!==null&&r!==void 0?r:0,_=((h==null||(o=h.positionAbsolute)===null||o===void 0?void 0:o.x)||0)+w,T=((h==null||(a=h.positionAbsolute)===null||a===void 0?void 0:a.y)||0)+C,O=y==null?void 0:y.position;if(!O)return null;var R=kx[O],k,P,V,I,q,A;switch(s){case"source":k=_,P=T,V=O,I=v,q=b,A=R;break;case"target":k=v,P=b,V=R,I=_,q=T,A=O;break}if(p)return u("g",{className:"react-flow__connection",children:u(p,{connectionLineType:c,connectionLineStyle:l,fromNode:h,fromHandle:y,fromX:_,fromY:T,toX:v,toY:b,fromPosition:O,toPosition:R,sourcePosition:V,targetPosition:A,sourceNode:h,sourceHandle:y,targetX:I,targetY:q,sourceX:k,sourceY:P})});var M="",$={sourceX:k,sourceY:P,sourcePosition:V,targetX:I,targetY:q,targetPosition:A};return c===gt.Bezier?M=Wh($):c===gt.Step?M=ll(Yd(Yd({},$),{},{borderRadius:0})):c===gt.SmoothStep?M=ll($):c===gt.SimpleBezier?M=Hh($):M="M".concat(k,",").concat(P," ").concat(I,",").concat(q),u("g",{className:"react-flow__connection",children:u("path",{d:M,className:"react-flow__connection-path",style:l})})};function fl(e){return fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fl(e)}var Wr,qx=function(t){var n=t.color,r=n===void 0?"none":n,o=t.strokeWidth,a=o===void 0?1:o;return u("polyline",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:a,fill:"none",points:"-5,-4 0,0 -5,4"})},Px=function(t){var n=t.color,r=n===void 0?"none":n,o=t.strokeWidth,a=o===void 0?1:o;return u("polyline",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:a,fill:r,points:"-5,-4 0,0 -5,4 -5,-4"})},jd=(Wr={},ue(Wr,Sr.Arrow,qx),ue(Wr,Sr.ArrowClosed,Px),Wr);function Dx(e){var t=x.exports.useMemo(function(){var n=jd.hasOwnProperty(e);return n?jd[e]:function(){return null}},[e]);return t}function Wd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Mx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Wd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Vx=function(t){var n=t.id,r=t.type,o=t.color,a=t.width,i=a===void 0?12.5:a,s=t.height,l=s===void 0?12.5:s,d=t.markerUnits,c=d===void 0?"strokeWidth":d,f=t.strokeWidth,p=t.orient,g=p===void 0?"auto":p,h=Dx(r);return ge.createElement("marker",{className:"react-flow__arrowhead",id:n,markerWidth:"".concat(i),markerHeight:"".concat(l),viewBox:"-10 -10 20 20",markerUnits:c,orient:g,refX:"0",refY:"0"},ge.createElement(h,{color:o,strokeWidth:f}))},Bx=function(t){var n=t.defaultColor,r=t.rfId;return function(o){var a=[];return o.edges.reduce(function(i,s){return[s.markerStart,s.markerEnd].forEach(function(l){if(l&&fl(l)==="object"){var d=sl(l,r);a.includes(d)||(i.push(Mx({id:d,color:l.color||n},l)),a.push(d))}}),i},[]).sort(function(i,s){return i.id.localeCompare(s.id)})}},am=function(t){var n=t.defaultColor,r=t.rfId,o=xe(x.exports.useCallback(Bx({defaultColor:n,rfId:r}),[n,r]),function(a,i){return!(a.length!==i.length||a.some(function(s,l){return s.id!==i[l].id}))});return u("defs",{children:o.map(function(a){return u(Vx,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id)})})};am.displayName="MarkerDefinitions";var Fx=x.exports.memo(am),$x=[{level:0,isMaxLevel:!0,edges:[]}];function Hx(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=-1,o=e.reduce(function(i,s){var l=Nh(s.zIndex),d=l?s.zIndex:0;if(n){var c,f,p,g;d=l?s.zIndex:Math.max(((c=t.get(s.source))===null||c===void 0||(f=c[Te])===null||f===void 0?void 0:f.z)||0,((p=t.get(s.target))===null||p===void 0||(g=p[Te])===null||g===void 0?void 0:g.z)||0)}return i[d]?i[d].push(s):i[d]=[s],r=d>r?d:r,i},{}),a=Object.entries(o).map(function(i){var s=se(i,2),l=s[0],d=s[1],c=+l;return{edges:d,level:c,isMaxLevel:c===r}});return a.length===0?$x:a}function zx(e,t,n){var r=xe(x.exports.useCallback(function(o){return e?o.edges.filter(function(a){var i=t.get(a.source),s=t.get(a.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&dx({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:s.width,targetHeight:s.height,width:o.width,height:o.height,transform:o.transform})}):o.edges},[e,t]));return Hx(r,t,n)}var Ux=function(t){return{connectionNodeId:t.connectionNodeId,connectionHandleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals}},im=function(t){var n=xe(Ux,ze),r=n.connectionNodeId,o=n.connectionHandleType,a=n.nodesConnectable,i=n.elementsSelectable,s=n.width,l=n.height,d=n.connectionMode,c=n.nodeInternals,f=zx(t.onlyRenderVisibleElements,c,t.elevateEdgesOnSelect);if(!s)return null;var p=t.connectionLineType,g=t.defaultMarkerColor,h=t.connectionLineStyle,m=t.connectionLineComponent,v=t.connectionLineContainerStyle,b=r&&o;return N(H,{children:[f.map(function(E){var S=E.level,y=E.edges,w=E.isMaxLevel;return N("svg",{style:{zIndex:S},width:s,height:l,className:"react-flow__edges react-flow__container",children:[w&&u(Fx,{defaultColor:g,rfId:t.rfId}),u("g",{children:y.map(function(C){var _=kd(c,C.source),T=se(_,3),O=T[0],R=T[1],k=T[2],P=kd(c,C.target),V=se(P,3),I=V[0],q=V[1],A=V[2];if(!k||!A)return null;var M=C.type||"default",$=t.edgeTypes[M]||t.edgeTypes.default,z=d===Rn.Strict?q.target:q.target||q.source,B=Ad(R.source,C.sourceHandle||null),U=Ad(z,C.targetHandle||null),G=(B==null?void 0:B.position)||W.Bottom,D=(U==null?void 0:U.position)||W.Top;if(!B||!U)return null;var L=cx(O,B,G,I,U,D),F=L.sourceX,Y=L.sourceY,K=L.targetX,Q=L.targetY;return u($,{id:C.id,className:Xe([C.className,t.noPanClassName]),type:M,data:C.data,selected:!!C.selected,animated:!!C.animated,hidden:!!C.hidden,label:C.label,labelStyle:C.labelStyle,labelShowBg:C.labelShowBg,labelBgStyle:C.labelBgStyle,labelBgPadding:C.labelBgPadding,labelBgBorderRadius:C.labelBgBorderRadius,style:C.style,source:C.source,target:C.target,sourceHandleId:C.sourceHandle,targetHandleId:C.targetHandle,markerEnd:C.markerEnd,markerStart:C.markerStart,sourceX:F,sourceY:Y,targetX:K,targetY:Q,sourcePosition:G,targetPosition:D,elementsSelectable:i,onEdgeUpdate:t.onEdgeUpdate,onContextMenu:t.onEdgeContextMenu,onMouseEnter:t.onEdgeMouseEnter,onMouseMove:t.onEdgeMouseMove,onMouseLeave:t.onEdgeMouseLeave,onClick:t.onEdgeClick,edgeUpdaterRadius:t.edgeUpdaterRadius,onEdgeDoubleClick:t.onEdgeDoubleClick,onEdgeUpdateStart:t.onEdgeUpdateStart,onEdgeUpdateEnd:t.onEdgeUpdateEnd,rfId:t.rfId},C.id)})})]},S)}),b&&u("svg",{style:v,width:s,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container",children:u(Lx,{connectionNodeId:r,connectionHandleType:o,connectionLineStyle:h,connectionLineType:p,isConnectable:a,CustomConnectionLineComponent:m})})]})};im.displayName="EdgeRenderer";var Yx=x.exports.memo(im),jx=function(t){return"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")")};function Wx(e){var t=e.children,n=xe(jx);return u("div",{className:"react-flow__viewport react-flow__container",style:{transform:n},children:t})}function Gx(e){var t=rc(),n=x.exports.useRef(!1);x.exports.useEffect(function(){!n.current&&t.viewportInitialized&&e&&(setTimeout(function(){return e(t)},1),n.current=!0)},[e,t.viewportInitialized])}var sm=function(t){var n=t.nodeTypes,r=t.edgeTypes,o=t.onMove,a=t.onMoveStart,i=t.onMoveEnd,s=t.onInit,l=t.onNodeClick,d=t.onEdgeClick,c=t.onNodeDoubleClick,f=t.onEdgeDoubleClick,p=t.onNodeMouseEnter,g=t.onNodeMouseMove,h=t.onNodeMouseLeave,m=t.onNodeContextMenu,v=t.onSelectionContextMenu,b=t.connectionLineType,E=t.connectionLineStyle,S=t.connectionLineComponent,y=t.connectionLineContainerStyle,w=t.selectionKeyCode,C=t.multiSelectionKeyCode,_=t.zoomActivationKeyCode,T=t.deleteKeyCode,O=t.onlyRenderVisibleElements,R=t.elementsSelectable,k=t.selectNodesOnDrag,P=t.defaultZoom,V=t.defaultPosition,I=t.preventScrolling,q=t.defaultMarkerColor,A=t.zoomOnScroll,M=t.zoomOnPinch,$=t.panOnScroll,z=t.panOnScrollSpeed,B=t.panOnScrollMode,U=t.zoomOnDoubleClick,G=t.panOnDrag,D=t.onPaneClick,L=t.onPaneScroll,F=t.onPaneContextMenu,Y=t.onEdgeUpdate,K=t.onEdgeContextMenu,Q=t.onEdgeMouseEnter,X=t.onEdgeMouseMove,j=t.onEdgeMouseLeave,ce=t.edgeUpdaterRadius,ye=t.onEdgeUpdateStart,be=t.onEdgeUpdateEnd,Ce=t.noDragClassName,Ve=t.noWheelClassName,Ue=t.noPanClassName,Be=t.elevateEdgesOnSelect,Ye=t.id;return Gx(s),u(Ix,{onPaneClick:D,onPaneContextMenu:F,onPaneScroll:L,deleteKeyCode:T,selectionKeyCode:w,multiSelectionKeyCode:C,zoomActivationKeyCode:_,elementsSelectable:R,onMove:o,onMoveStart:a,onMoveEnd:i,zoomOnScroll:A,zoomOnPinch:M,zoomOnDoubleClick:U,panOnScroll:$,panOnScrollSpeed:z,panOnScrollMode:B,panOnDrag:G,defaultPosition:V,defaultZoom:P,onSelectionContextMenu:v,preventScrolling:I,noDragClassName:Ce,noWheelClassName:Ve,noPanClassName:Ue,children:N(Wx,{children:[u(Yx,{edgeTypes:r,onEdgeClick:d,onEdgeDoubleClick:f,connectionLineType:b,connectionLineStyle:E,connectionLineComponent:S,connectionLineContainerStyle:y,onEdgeUpdate:Y,onlyRenderVisibleElements:O,onEdgeContextMenu:K,onEdgeMouseEnter:Q,onEdgeMouseMove:X,onEdgeMouseLeave:j,onEdgeUpdateStart:ye,onEdgeUpdateEnd:be,edgeUpdaterRadius:ce,defaultMarkerColor:q,noPanClassName:Ue,elevateEdgesOnSelect:!!Be,rfId:Ye}),u(Ax,{nodeTypes:n,onNodeClick:l,onNodeDoubleClick:c,onNodeMouseEnter:p,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:m,selectNodesOnDrag:k,onlyRenderVisibleElements:O,noPanClassName:Ue,noDragClassName:Ce})]})})};sm.displayName="GraphView";var Kx=x.exports.memo(sm),lm=function(){return null};lm.displayName="GroupNode";function Gd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Kd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Hn=function(e){var t=function(r){var o=r.id,a=r.type,i=r.data,s=r.xPos,l=r.yPos,d=r.selected,c=r.onClick,f=r.onMouseEnter,p=r.onMouseMove,g=r.onMouseLeave,h=r.onContextMenu,m=r.onDoubleClick,v=r.style,b=r.className,E=r.isDraggable,S=r.isSelectable,y=r.isConnectable,w=r.selectNodesOnDrag,C=r.sourcePosition,_=r.targetPosition,T=r.hidden,O=r.resizeObserver,R=r.dragHandle,k=r.zIndex,P=r.isParent,V=r.noPanClassName,I=r.noDragClassName,q=r.initialized,A=ke(),M=x.exports.useRef(null),$=x.exports.useRef(C),z=x.exports.useRef(_),B=x.exports.useRef(a),U=S||E||c||f||p||g,G=Fn(o,A.getState,f),D=Fn(o,A.getState,p),L=Fn(o,A.getState,g),F=Fn(o,A.getState,h),Y=Fn(o,A.getState,m),K=function(j){if(S&&(!w||!E)&&Lh({id:o,store:A}),c){var ce=A.getState().nodeInternals.get(o);c(j,Kd({},ce))}};x.exports.useEffect(function(){if(M.current&&!T){var X=M.current;return O==null||O.observe(X),function(){return O==null?void 0:O.unobserve(X)}}},[T]),x.exports.useEffect(function(){var X=B.current!==a,j=$.current!==C,ce=z.current!==_;M.current&&(X||j||ce)&&(X&&(B.current=a),j&&($.current=C),ce&&(z.current=_),A.getState().updateNodeDimensions([{id:o,nodeElement:M.current,forceUpdate:!0}]))},[o,a,C,_]);var Q=nm({nodeRef:M,disabled:T||!E,noDragClassName:I,handleSelector:R,nodeId:o,isSelectable:S,selectNodesOnDrag:w});return T?null:u("div",{className:Xe(["react-flow__node","react-flow__node-".concat(a),V,b,{selected:d,selectable:S,parent:P}]),ref:M,style:Kd({zIndex:k,transform:"translate(".concat(s,"px,").concat(l,"px)"),pointerEvents:U?"all":"none",visibility:q?"visible":"hidden"},v),onMouseEnter:G,onMouseMove:D,onMouseLeave:L,onContextMenu:F,onClick:K,onDoubleClick:Y,"data-id":o,children:u(j0,{value:o,children:u(e,{id:o,data:i,type:a,xPos:s,yPos:l,selected:d,isConnectable:y,sourcePosition:C,targetPosition:_,dragging:Q,dragHandle:R,zIndex:k})})})};return t.displayName="NodeWrapper",x.exports.memo(t)};function Xd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Qd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xd(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xx(e){var t={input:Hn(e.input||Zh),default:Hn(e.default||ul),output:Hn(e.output||em),group:Hn(e.group||lm)},n={},r=Object.keys(e).filter(function(o){return!["input","default","output","group"].includes(o)}).reduce(function(o,a){return o[a]=Hn(e[a]||ul),o},n);return Qd(Qd({},t),r)}function Zd(e,t){x.exports.useRef(null);var n=x.exports.useMemo(function(){return t(e)},[e]);return n}function Jd(e){if(!(!e||typeof document>"u")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");t.appendChild(n),n.appendChild(document.createTextNode(e))}}var cm=function(t){var n=t.children,r=!0;try{ke()}catch{r=!1}return r?u(H,{children:n}):u(Bh,{createStore:Fh,children:n})};cm.displayName="ReactFlowWrapper";var Qx=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectStop","onConnectEnd","onClickConnectStart","onClickConnectStop","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateEdgesOnSelect"];function eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function tu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eu(Object(n),!0).forEach(function(r){ue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eu(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}Jd(rx),Jd(ax);var Zx={input:Zh,default:ul,output:em},Jx={default:cl,straight:jh,step:Yh,smoothstep:oc,simplebezier:zh},eT=[15,15],tT=[0,0],dm=x.exports.forwardRef(function(e,t){var n=e.nodes,r=e.edges,o=e.defaultNodes,a=e.defaultEdges,i=e.className,s=e.nodeTypes,l=s===void 0?Zx:s,d=e.edgeTypes,c=d===void 0?Jx:d,f=e.onNodeClick,p=e.onEdgeClick,g=e.onInit,h=e.onMove,m=e.onMoveStart,v=e.onMoveEnd,b=e.onConnect,E=e.onConnectStart,S=e.onConnectStop,y=e.onConnectEnd,w=e.onClickConnectStart,C=e.onClickConnectStop,_=e.onClickConnectEnd,T=e.onNodeMouseEnter,O=e.onNodeMouseMove,R=e.onNodeMouseLeave,k=e.onNodeContextMenu,P=e.onNodeDoubleClick,V=e.onNodeDragStart,I=e.onNodeDrag,q=e.onNodeDragStop,A=e.onNodesDelete,M=e.onEdgesDelete,$=e.onSelectionChange,z=e.onSelectionDragStart,B=e.onSelectionDrag,U=e.onSelectionDragStop,G=e.onSelectionContextMenu,D=e.connectionMode,L=D===void 0?Rn.Strict:D,F=e.connectionLineType,Y=F===void 0?gt.Bezier:F,K=e.connectionLineStyle,Q=e.connectionLineComponent,X=e.connectionLineContainerStyle,j=e.deleteKeyCode,ce=j===void 0?"Backspace":j,ye=e.selectionKeyCode,be=ye===void 0?"Shift":ye,Ce=e.multiSelectionKeyCode,Ve=Ce===void 0?"Meta":Ce,Ue=e.zoomActivationKeyCode,Be=Ue===void 0?"Meta":Ue,Ye=e.snapToGrid,Ie=Ye===void 0?!1:Ye,je=e.snapGrid,ut=je===void 0?eT:je,J=e.onlyRenderVisibleElements,le=J===void 0?!1:J,ee=e.selectNodesOnDrag,me=ee===void 0?!0:ee,ne=e.nodesDraggable,We=e.nodesConnectable,oe=e.elementsSelectable,Ne=e.minZoom,Oe=e.maxZoom,ft=e.defaultZoom,rt=ft===void 0?1:ft,ln=e.defaultPosition,ni=ln===void 0?tT:ln,Dn=e.translateExtent,Ar=e.preventScrolling,ri=Ar===void 0?!0:Ar,Ht=e.nodeExtent,kr=e.defaultMarkerColor,ug=kr===void 0?"#b1b1b7":kr,pc=e.zoomOnScroll,fg=pc===void 0?!0:pc,hc=e.zoomOnPinch,pg=hc===void 0?!0:hc,mc=e.panOnScroll,hg=mc===void 0?!1:mc,gc=e.panOnScrollSpeed,mg=gc===void 0?.5:gc,yc=e.panOnScrollMode,gg=yc===void 0?bn.Free:yc,vc=e.zoomOnDoubleClick,yg=vc===void 0?!0:vc,bc=e.panOnDrag,vg=bc===void 0?!0:bc,bg=e.onPaneClick,Sg=e.onPaneScroll,wg=e.onPaneContextMenu,Cg=e.children,_g=e.onEdgeUpdate,Eg=e.onEdgeContextMenu,xg=e.onEdgeDoubleClick,Tg=e.onEdgeMouseEnter,Og=e.onEdgeMouseMove,Ig=e.onEdgeMouseLeave,Ng=e.onEdgeUpdateStart,Rg=e.onEdgeUpdateEnd,Sc=e.edgeUpdaterRadius,Ag=Sc===void 0?10:Sc,kg=e.onNodesChange,Lg=e.onEdgesChange,wc=e.noDragClassName,qg=wc===void 0?"nodrag":wc,Cc=e.noWheelClassName,Pg=Cc===void 0?"nowheel":Cc,_c=e.noPanClassName,Dg=_c===void 0?"nopan":_c,Ec=e.fitView,Mg=Ec===void 0?!1:Ec,Vg=e.fitViewOptions,xc=e.connectOnClick,Bg=xc===void 0?!0:xc,Fg=e.attributionPosition,$g=e.proOptions,Hg=e.defaultEdgeOptions,Tc=e.elevateEdgesOnSelect,zg=Tc===void 0?!1:Tc,Lr=Nr(e,Qx),Ug=Zd(l,Xx),Yg=Zd(c,lx),jg=Xe(["react-flow",i]);return u("div",{...tu(tu({},Lr),{},{ref:t,className:jg}),children:N(cm,{children:[u(Kx,{onInit:g,onMove:h,onMoveStart:m,onMoveEnd:v,onNodeClick:f,onEdgeClick:p,onNodeMouseEnter:T,onNodeMouseMove:O,onNodeMouseLeave:R,onNodeContextMenu:k,onNodeDoubleClick:P,nodeTypes:Ug,edgeTypes:Yg,connectionLineType:Y,connectionLineStyle:K,connectionLineComponent:Q,connectionLineContainerStyle:X,selectionKeyCode:be,deleteKeyCode:ce,multiSelectionKeyCode:Ve,zoomActivationKeyCode:Be,onlyRenderVisibleElements:le,selectNodesOnDrag:me,defaultZoom:rt,defaultPosition:ni,preventScrolling:ri,zoomOnScroll:fg,zoomOnPinch:pg,zoomOnDoubleClick:yg,panOnScroll:hg,panOnScrollSpeed:mg,panOnScrollMode:gg,panOnDrag:vg,onPaneClick:bg,onPaneScroll:Sg,onPaneContextMenu:wg,onSelectionContextMenu:G,onEdgeUpdate:_g,onEdgeContextMenu:Eg,onEdgeDoubleClick:xg,onEdgeMouseEnter:Tg,onEdgeMouseMove:Og,onEdgeMouseLeave:Ig,onEdgeUpdateStart:Ng,onEdgeUpdateEnd:Rg,edgeUpdaterRadius:Ag,defaultMarkerColor:ug,noDragClassName:qg,noWheelClassName:Pg,noPanClassName:Dg,elevateEdgesOnSelect:zg,id:Lr==null?void 0:Lr.id}),u(tx,{nodes:n,edges:r,defaultNodes:o,defaultEdges:a,onConnect:b,onConnectStart:E,onConnectStop:S,onConnectEnd:y,onClickConnectStart:w,onClickConnectStop:C,onClickConnectEnd:_,nodesDraggable:ne,nodesConnectable:We,elementsSelectable:oe,minZoom:Ne,maxZoom:Oe,nodeExtent:Ht,onNodesChange:kg,onEdgesChange:Lg,snapToGrid:Ie,snapGrid:ut,connectionMode:L,translateExtent:Dn,connectOnClick:Bg,defaultEdgeOptions:Hg,fitView:Mg,fitViewOptions:Vg,onNodesDelete:A,onEdgesDelete:M,onNodeDragStart:V,onNodeDrag:I,onNodeDragStop:q,onSelectionDrag:B,onSelectionDragStart:z,onSelectionDragStop:U}),$&&u(J0,{onSelectionChange:$}),Cg,u(V0,{proOptions:$g,position:Fg})]})})});dm.displayName="ReactFlow";var um=function(t){var n=t.children;return u(Bh,{createStore:Fh,children:n})};um.displayName="ReactFlowProvider";function fm(e){return function(t){var n=x.exports.useState(t),r=se(n,2),o=r[0],a=r[1],i=x.exports.useCallback(function(s){return a(function(l){return e(s,l)})},[]);return[o,a,i]}}var nT=fm(Ah),rT=fm(p0);const ho=e=>{const{data:t}=Zg(e.modifiedBy),n=pr(Bt(e.modifiedOn)),{name:r,description:o}=e;return x.exports.useMemo(()=>N(H,{children:[r&&u(Ke,{title:r,placement:"top",enterNextDelay:200,children:u("span",{children:u(_t,{variant:"smallText1",className:"name",children:r})})}),o&&u(Ke,{title:o,placement:"top",enterNextDelay:200,children:u("span",{children:u(_t,{variant:"smallText1",className:"description",children:o})})}),t&&u(Dl,{userProfile:t}),u("div",{children:n})]}),[r,o,t,n])};try{ho.displayName="ActivityNodeLabel",ho.__docgenInfo={description:"",displayName:"ActivityNodeLabel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},etag:{defaultValue:null,description:"",name:"etag",required:!0,type:{name:"string"}},createdOn:{defaultValue:null,description:"",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"",name:"modifiedBy",required:!0,type:{name:"string"}},used:{defaultValue:null,description:"",name:"used",required:!1,type:{name:"(UsedURL | UsedEntity)[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ActivityNodeLabel.tsx#ActivityNodeLabel"]={docgenInfo:ho.__docgenInfo,name:"ActivityNodeLabel",path:"src/lib/containers/provenance/ActivityNodeLabel.tsx#ActivityNodeLabel"})}catch{}const oT=new Set([".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx",".cwl",".wdl",".json"]),mo=e=>{const{entityHeader:t}=e;if(t){const n=Kf(t==null?void 0:t.type);if(n==Ws.FILE){const r=t.name.lastIndexOf(".");if(r>-1){const o=t.name.slice(r);if(oT.has(o.toLowerCase()))return u(pe,{icon:"code"})}}else return u(Ac,{type:n,includeTooltip:!1})}return u(Ac,{type:Ws.FILE,includeTooltip:!1})};try{mo.displayName="ProvenanceEntityIcon",mo.__docgenInfo={description:"",displayName:"ProvenanceEntityIcon",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!1,type:{name:"EntityHeader"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceEntityIcon.tsx#ProvenanceEntityIcon"]={docgenInfo:mo.__docgenInfo,name:"ProvenanceEntityIcon",path:"src/lib/containers/provenance/ProvenanceEntityIcon.tsx#ProvenanceEntityIcon"})}catch{}const go=e=>{const t=e.versionNumber?`.${e.versionNumber}`:"",n=`${e.id}${t}`;return x.exports.useMemo(()=>N(H,{children:[u("div",{children:u(mo,{entityHeader:e})}),N(H,{children:[u("div",{children:u(Ke,{title:e.name,placement:"top",enterNextDelay:300,children:u("a",{href:`${$e.PORTAL}#!Synapse:${n}`,children:e.name})})}),Jg(Kf(e.type))&&N("div",{children:[N("div",{children:["v.",e.versionNumber]}),!e.isLatestVersion&&u("div",{children:"(old version)"})]})]})]}),[e,n])};try{go.displayName="EntityNodeLabel",go.__docgenInfo={description:"",displayName:"EntityNodeLabel",props:{name:{defaultValue:null,description:"The name of the entity",name:"name",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"The id of the entity",name:"id",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"The type of the entity",name:"type",required:!0,type:{name:"enum",value:[{value:'"org.sagebionetworks.repo.model.table.EntityView"'},{value:'"org.sagebionetworks.repo.model.table.SubmissionView"'},{value:'"org.sagebionetworks.repo.model.table.Dataset"'},{value:'"org.sagebionetworks.repo.model.table.DatasetCollection"'},{value:'"org.sagebionetworks.repo.model.Link"'},{value:'"org.sagebionetworks.repo.model.docker.DockerRepository"'},{value:'"org.sagebionetworks.repo.model.FileEntity"'},{value:'"org.sagebionetworks.repo.model.table.TableEntity"'},{value:'"org.sagebionetworks.repo.model.table.MaterializedView"'},{value:'"org.sagebionetworks.repo.model.Folder"'},{value:'"org.sagebionetworks.repo.model.Project"'}]}},versionNumber:{defaultValue:null,description:"The version number of the entity",name:"versionNumber",required:!1,type:{name:"number"}},versionLabel:{defaultValue:null,description:"The user defined version label of the entity",name:"versionLabel",required:!1,type:{name:"string"}},benefactorId:{defaultValue:null,description:"The ID of the entity that this Entity's ACL is inherited from.",name:"benefactorId",required:!0,type:{name:"number"}},createdOn:{defaultValue:null,description:"The date this entity was created.",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"The date this entity was last modified.",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"The ID of the user that created this entity.",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"The ID of the user that last modified this entity.",name:"modifiedBy",required:!0,type:{name:"string"}},isLatestVersion:{defaultValue:null,description:"If this version is the latest version of the entity",name:"isLatestVersion",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/EntityNodeLabel.tsx#EntityNodeLabel"]={docgenInfo:go.__docgenInfo,name:"EntityNodeLabel",path:"src/lib/containers/provenance/EntityNodeLabel.tsx#EntityNodeLabel"})}catch{}var pm={exports:{}};(function(e,t){(function(n,r){typeof Ua=="function"&&!0?e.exports=r():n.pluralize=r()})(Ya,function(){var n=[],r=[],o={},a={},i={};function s(m){return typeof m=="string"?new RegExp("^"+m+"$","i"):m}function l(m,v){return m===v?v:m===m.toLowerCase()?v.toLowerCase():m===m.toUpperCase()?v.toUpperCase():m[0]===m[0].toUpperCase()?v.charAt(0).toUpperCase()+v.substr(1).toLowerCase():v.toLowerCase()}function d(m,v){return m.replace(/\$(\d{1,2})/g,function(b,E){return v[E]||""})}function c(m,v){return m.replace(v[0],function(b,E){var S=d(v[1],arguments);return l(b===""?m[E-1]:b,S)})}function f(m,v,b){if(!m.length||o.hasOwnProperty(m))return v;for(var E=b.length;E--;){var S=b[E];if(S[0].test(v))return c(v,S)}return v}function p(m,v,b){return function(E){var S=E.toLowerCase();return v.hasOwnProperty(S)?l(E,S):m.hasOwnProperty(S)?l(E,m[S]):f(S,E,b)}}function g(m,v,b,E){return function(S){var y=S.toLowerCase();return v.hasOwnProperty(y)?!0:m.hasOwnProperty(y)?!1:f(y,y,b)===y}}function h(m,v,b){var E=v===1?h.singular(m):h.plural(m);return(b?v+" ":"")+E}return h.plural=p(i,a,n),h.isPlural=g(i,a,n),h.singular=p(a,i,r),h.isSingular=g(a,i,r),h.addPluralRule=function(m,v){n.push([s(m),v])},h.addSingularRule=function(m,v){r.push([s(m),v])},h.addUncountableRule=function(m){if(typeof m=="string"){o[m.toLowerCase()]=!0;return}h.addPluralRule(m,"$0"),h.addSingularRule(m,"$0")},h.addIrregularRule=function(m,v){v=v.toLowerCase(),m=m.toLowerCase(),i[m]=v,a[v]=m},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(m){return h.addIrregularRule(m[0],m[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(m){return h.addPluralRule(m[0],m[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(m){return h.addSingularRule(m[0],m[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[e]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(h.addUncountableRule),h})})(pm);const aT=pm.exports,yo=e=>{const{itemCount:t}=e;return x.exports.useMemo(()=>u(H,{children:N("a",{children:["Show ",t," ",aT("item",t),"\u2026"]})}),[t])};try{yo.displayName="ExpandGraphNodeLabel",yo.__docgenInfo={description:"",displayName:"ExpandGraphNodeLabel",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!0,type:{name:"EntityHeader"}},itemCount:{defaultValue:null,description:"",name:"itemCount",required:!0,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ExpandGraphNodeLabel.tsx#ExpandGraphNodeLabel"]={docgenInfo:yo.__docgenInfo,name:"ExpandGraphNodeLabel",path:"src/lib/containers/provenance/ExpandGraphNodeLabel.tsx#ExpandGraphNodeLabel"})}catch{}const iT=/^(.+?\.)?github\.com$/,sT=/^(.+?\.)?githubusercontent\.com$/,vo=e=>{const{url:t}=e;let n="link";const r=new URL(t),{hostname:o}=r;return(o.match(iT)||o.match(sT))&&(n="github"),u(pe,{icon:n})};try{vo.displayName="ProvenanceExternalIcon",vo.__docgenInfo={description:"",displayName:"ProvenanceExternalIcon",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceExternalIcon.tsx#ProvenanceExternalIcon"]={docgenInfo:vo.__docgenInfo,name:"ProvenanceExternalIcon",path:"src/lib/containers/provenance/ProvenanceExternalIcon.tsx#ProvenanceExternalIcon"})}catch{}const bo=e=>x.exports.useMemo(()=>N(H,{children:[u("div",{children:u(vo,{url:e.url})}),u(Ke,{title:e.name,placement:"top",enterNextDelay:300,children:u("a",{href:e.url,rel:"noopener noreferrer",children:e.name})})]}),[e.name,e.url]);try{bo.displayName="ExternalGraphNodeLabel",bo.__docgenInfo={description:"",displayName:"ExternalGraphNodeLabel",props:{concreteType:{defaultValue:null,description:"",name:"concreteType",required:!0,type:{name:'"org.sagebionetworks.repo.model.provenance.UsedURL"'}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},wasExecuted:{defaultValue:null,description:"",name:"wasExecuted",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ExternalGraphNodeLabel.tsx#ExternalGraphNodeLabel"]={docgenInfo:bo.__docgenInfo,name:"ExternalGraphNodeLabel",path:"src/lib/containers/provenance/ExternalGraphNodeLabel.tsx#ExternalGraphNodeLabel"})}catch{}var Oi,nu;function lT(){if(nu)return Oi;nu=1;var e=Mv,t=4;function n(r){return e(r,t)}return Oi=n,Oi}var Ii={exports:{}},ru;function hm(){return ru||(ru=1,function(e){e.exports=xp}(Ii)),Ii.exports}var Ni,ou;function cT(){if(ou)return Ni;ou=1;var e=Tp;function t(n,r){var o=[];return e(n,function(a,i,s){r(a,i,s)&&o.push(a)}),o}return Ni=t,Ni}var Ri,au;function mm(){if(au)return Ri;au=1;var e=yv,t=cT(),n=rn,r=Tr;function o(a,i){var s=r(a)?e:t;return s(a,n(i))}return Ri=o,Ri}var Ai,iu;function dT(){if(iu)return Ai;iu=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,o){return r!=null&&t.call(r,o)}return Ai=n,Ai}var ki,su;function gm(){if(su)return ki;su=1;var e=dT(),t=vv;function n(r,o){return r!=null&&t(r,o,e)}return ki=n,ki}var Li,lu;function ym(){if(lu)return Li;lu=1;function e(t){return t===void 0}return Li=e,Li}var qi,cu;function vm(){if(cu)return qi;cu=1;var e=vp,t=rn,n=Vv,r=Tr;function o(a,i){var s=r(a)?e:n;return s(a,t(i))}return qi=o,qi}var Pi,du;function uT(){if(du)return Pi;du=1;function e(t,n,r,o,a){return a(t,function(i,s,l){r=o?(o=!1,i):n(r,i,s,l)}),r}return Pi=e,Pi}var Di,uu;function bm(){if(uu)return Di;uu=1;var e=bv,t=Tp,n=rn,r=uT(),o=Tr;function a(i,s,l){var d=o(i)?e:r,c=arguments.length<3;return d(i,n(s),l,c,t)}return Di=a,Di}var Mi,fu;function fT(){if(fu)return Mi;fu=1;var e=Sv,t=e("length");return Mi=t,Mi}var Vi,pu;function pT(){if(pu)return Vi;pu=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",i="["+e+"]",s="["+o+"]",l="\\ud83c[\\udffb-\\udfff]",d="(?:"+s+"|"+l+")",c="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",h=d+"?",m="["+a+"]?",v="(?:"+g+"(?:"+[c,f,p].join("|")+")"+m+h+")*",b=m+h+v,E="(?:"+[c+s+"?",s,f,p,i].join("|")+")",S=RegExp(l+"(?="+l+")|"+E+b,"g");function y(w){for(var C=S.lastIndex=0;S.test(w);)++C;return C}return Vi=y,Vi}var Bi,hu;function hT(){if(hu)return Bi;hu=1;var e=fT(),t=wv,n=pT();function r(o){return t(o)?n(o):e(o)}return Bi=r,Bi}var Fi,mu;function mT(){if(mu)return Fi;mu=1;var e=Cv,t=_v,n=bp,r=Xv,o=hT(),a="[object Map]",i="[object Set]";function s(l){if(l==null)return 0;if(n(l))return r(l)?o(l):l.length;var d=t(l);return d==a||d==i?l.size:e(l).length}return Fi=s,Fi}var $i,gu;function gT(){if(gu)return $i;gu=1;var e=Bv,t=Fv,n=Ev,r=rn,o=xv,a=Tr,i=Tv.exports,s=Sp,l=wp,d=Ov;function c(f,p,g){var h=a(f),m=h||i(f)||d(f);if(p=r(p),g==null){var v=f&&f.constructor;m?g=h?new v:[]:l(f)?g=s(v)?t(o(f)):{}:g={}}return(m?e:n)(f,function(b,E,S){return p(g,b,E,S)}),g}return $i=c,$i}var Hi,yu;function yT(){if(yu)return Hi;yu=1;var e=vp;function t(n,r){return e(r,function(o){return n[o]})}return Hi=t,Hi}var zi,vu;function Sm(){if(vu)return zi;vu=1;var e=yT(),t=Vl;function n(r){return r==null?[]:e(r,t(r))}return zi=n,zi}var Ui,bu;function Qe(){if(bu)return Ui;bu=1;var e;if(typeof Ua=="function")try{e={clone:lT(),constant:Cp,each:hm(),filter:mm(),has:gm(),isArray:Tr,isEmpty:ov,isFunction:Sp,isUndefined:ym(),keys:Vl,map:vm(),reduce:bm(),size:mT(),transform:gT(),union:av,values:Sm()}}catch{}return e||(e=window._),Ui=e,Ui}var Yi,Su;function ic(){if(Su)return Yi;Su=1;var e=Qe();Yi=o;var t="\0",n="\0",r="";function o(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(c){return this._label=c,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return e.keys(this._nodes)},o.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(f){return e.isEmpty(c._in[f])})},o.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(f){return e.isEmpty(c._out[f])})},o.prototype.setNodes=function(c,f){var p=arguments,g=this;return e.each(c,function(h){p.length>1?g.setNode(h,f):g.setNode(h)}),this},o.prototype.setNode=function(c,f){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=f),this):(this._nodes[c]=arguments.length>1?f:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},o.prototype.node=function(c){return this._nodes[c]},o.prototype.hasNode=function(c){return e.has(this._nodes,c)},o.prototype.removeNode=function(c){var f=this;if(e.has(this._nodes,c)){var p=function(g){f.removeEdge(f._edgeObjs[g])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(g){f.setParent(g)}),delete this._children[c]),e.each(e.keys(this._in[c]),p),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),p),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},o.prototype.setParent=function(c,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=n;else{f+="";for(var p=f;!e.isUndefined(p);p=this.parent(p))if(p===c)throw new Error("Setting "+f+" as parent of "+c+" would create a cycle");this.setNode(f)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=f,this._children[f][c]=!0,this},o.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},o.prototype.parent=function(c){if(this._isCompound){var f=this._parent[c];if(f!==n)return f}},o.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var f=this._children[c];if(f)return e.keys(f)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},o.prototype.predecessors=function(c){var f=this._preds[c];if(f)return e.keys(f)},o.prototype.successors=function(c){var f=this._sucs[c];if(f)return e.keys(f)},o.prototype.neighbors=function(c){var f=this.predecessors(c);if(f)return e.union(f,this.successors(c))},o.prototype.isLeaf=function(c){var f;return this.isDirected()?f=this.successors(c):f=this.neighbors(c),f.length===0},o.prototype.filterNodes=function(c){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var p=this;e.each(this._nodes,function(m,v){c(v)&&f.setNode(v,m)}),e.each(this._edgeObjs,function(m){f.hasNode(m.v)&&f.hasNode(m.w)&&f.setEdge(m,p.edge(m))});var g={};function h(m){var v=p.parent(m);return v===void 0||f.hasNode(v)?(g[m]=v,v):v in g?g[v]:h(v)}return this._isCompound&&e.each(f.nodes(),function(m){f.setParent(m,h(m))}),f},o.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return e.values(this._edgeObjs)},o.prototype.setPath=function(c,f){var p=this,g=arguments;return e.reduce(c,function(h,m){return g.length>1?p.setEdge(h,m,f):p.setEdge(h,m),m}),this},o.prototype.setEdge=function(){var c,f,p,g,h=!1,m=arguments[0];typeof m=="object"&&m!==null&&"v"in m?(c=m.v,f=m.w,p=m.name,arguments.length===2&&(g=arguments[1],h=!0)):(c=m,f=arguments[1],p=arguments[3],arguments.length>2&&(g=arguments[2],h=!0)),c=""+c,f=""+f,e.isUndefined(p)||(p=""+p);var v=s(this._isDirected,c,f,p);if(e.has(this._edgeLabels,v))return h&&(this._edgeLabels[v]=g),this;if(!e.isUndefined(p)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this._edgeLabels[v]=h?g:this._defaultEdgeLabelFn(c,f,p);var b=l(this._isDirected,c,f,p);return c=b.v,f=b.w,Object.freeze(b),this._edgeObjs[v]=b,a(this._preds[f],c),a(this._sucs[c],f),this._in[f][v]=b,this._out[c][v]=b,this._edgeCount++,this},o.prototype.edge=function(c,f,p){var g=arguments.length===1?d(this._isDirected,arguments[0]):s(this._isDirected,c,f,p);return this._edgeLabels[g]},o.prototype.hasEdge=function(c,f,p){var g=arguments.length===1?d(this._isDirected,arguments[0]):s(this._isDirected,c,f,p);return e.has(this._edgeLabels,g)},o.prototype.removeEdge=function(c,f,p){var g=arguments.length===1?d(this._isDirected,arguments[0]):s(this._isDirected,c,f,p),h=this._edgeObjs[g];return h&&(c=h.v,f=h.w,delete this._edgeLabels[g],delete this._edgeObjs[g],i(this._preds[f],c),i(this._sucs[c],f),delete this._in[f][g],delete this._out[c][g],this._edgeCount--),this},o.prototype.inEdges=function(c,f){var p=this._in[c];if(p){var g=e.values(p);return f?e.filter(g,function(h){return h.v===f}):g}},o.prototype.outEdges=function(c,f){var p=this._out[c];if(p){var g=e.values(p);return f?e.filter(g,function(h){return h.w===f}):g}},o.prototype.nodeEdges=function(c,f){var p=this.inEdges(c,f);if(p)return p.concat(this.outEdges(c,f))};function a(c,f){c[f]?c[f]++:c[f]=1}function i(c,f){--c[f]||delete c[f]}function s(c,f,p,g){var h=""+f,m=""+p;if(!c&&h>m){var v=h;h=m,m=v}return h+r+m+r+(e.isUndefined(g)?t:g)}function l(c,f,p,g){var h=""+f,m=""+p;if(!c&&h>m){var v=h;h=m,m=v}var b={v:h,w:m};return g&&(b.name=g),b}function d(c,f){return s(c,f.v,f.w,f.name)}return Yi}var ji,wu;function vT(){return wu||(wu=1,ji="2.1.8"),ji}var Wi,Cu;function bT(){return Cu||(Cu=1,Wi={Graph:ic(),version:vT()}),Wi}var Gi,_u;function ST(){if(_u)return Gi;_u=1;var e=Qe(),t=ic();Gi={write:n,read:a};function n(i){var s={options:{directed:i.isDirected(),multigraph:i.isMultigraph(),compound:i.isCompound()},nodes:r(i),edges:o(i)};return e.isUndefined(i.graph())||(s.value=e.clone(i.graph())),s}function r(i){return e.map(i.nodes(),function(s){var l=i.node(s),d=i.parent(s),c={v:s};return e.isUndefined(l)||(c.value=l),e.isUndefined(d)||(c.parent=d),c})}function o(i){return e.map(i.edges(),function(s){var l=i.edge(s),d={v:s.v,w:s.w};return e.isUndefined(s.name)||(d.name=s.name),e.isUndefined(l)||(d.value=l),d})}function a(i){var s=new t(i.options).setGraph(i.value);return e.each(i.nodes,function(l){s.setNode(l.v,l.value),l.parent&&s.setParent(l.v,l.parent)}),e.each(i.edges,function(l){s.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),s}return Gi}var Ki,Eu;function wT(){if(Eu)return Ki;Eu=1;var e=Qe();Ki=t;function t(n){var r={},o=[],a;function i(s){e.has(r,s)||(r[s]=!0,a.push(s),e.each(n.successors(s),i),e.each(n.predecessors(s),i))}return e.each(n.nodes(),function(s){a=[],i(s),a.length&&o.push(a)}),o}return Ki}var Xi,xu;function wm(){if(xu)return Xi;xu=1;var e=Qe();Xi=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var o=this._keyIndices;if(n=String(n),!e.has(o,n)){var a=this._arr,i=a.length;return o[n]=i,a.push({key:n,priority:r}),this._decrease(i),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var o=this._keyIndices[n];if(r>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[o].priority+" New: "+r);this._arr[o].priority=r,this._decrease(o)},t.prototype._heapify=function(n){var r=this._arr,o=2*n,a=o+1,i=n;o<r.length&&(i=r[o].priority<r[i].priority?o:i,a<r.length&&(i=r[a].priority<r[i].priority?a:i),i!==n&&(this._swap(n,i),this._heapify(i)))},t.prototype._decrease=function(n){for(var r=this._arr,o=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<o));)this._swap(n,a),n=a},t.prototype._swap=function(n,r){var o=this._arr,a=this._keyIndices,i=o[n],s=o[r];o[n]=s,o[r]=i,a[s.key]=n,a[i.key]=r},Xi}var Qi,Tu;function Cm(){if(Tu)return Qi;Tu=1;var e=Qe(),t=wm();Qi=r;var n=e.constant(1);function r(a,i,s,l){return o(a,String(i),s||n,l||function(d){return a.outEdges(d)})}function o(a,i,s,l){var d={},c=new t,f,p,g=function(h){var m=h.v!==f?h.v:h.w,v=d[m],b=s(h),E=p.distance+b;if(b<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+b);E<v.distance&&(v.distance=E,v.predecessor=f,c.decrease(m,E))};for(a.nodes().forEach(function(h){var m=h===i?0:Number.POSITIVE_INFINITY;d[h]={distance:m},c.add(h,m)});c.size()>0&&(f=c.removeMin(),p=d[f],p.distance!==Number.POSITIVE_INFINITY);)l(f).forEach(g);return d}return Qi}var Zi,Ou;function CT(){if(Ou)return Zi;Ou=1;var e=Cm(),t=Qe();Zi=n;function n(r,o,a){return t.transform(r.nodes(),function(i,s){i[s]=e(r,s,o,a)},{})}return Zi}var Ji,Iu;function _m(){if(Iu)return Ji;Iu=1;var e=Qe();Ji=t;function t(n){var r=0,o=[],a={},i=[];function s(l){var d=a[l]={onStack:!0,lowlink:r,index:r++};if(o.push(l),n.successors(l).forEach(function(p){e.has(a,p)?a[p].onStack&&(d.lowlink=Math.min(d.lowlink,a[p].index)):(s(p),d.lowlink=Math.min(d.lowlink,a[p].lowlink))}),d.lowlink===d.index){var c=[],f;do f=o.pop(),a[f].onStack=!1,c.push(f);while(l!==f);i.push(c)}}return n.nodes().forEach(function(l){e.has(a,l)||s(l)}),i}return Ji}var es,Nu;function _T(){if(Nu)return es;Nu=1;var e=Qe(),t=_m();es=n;function n(r){return e.filter(t(r),function(o){return o.length>1||o.length===1&&r.hasEdge(o[0],o[0])})}return es}var ts,Ru;function ET(){if(Ru)return ts;Ru=1;var e=Qe();ts=n;var t=e.constant(1);function n(o,a,i){return r(o,a||t,i||function(s){return o.outEdges(s)})}function r(o,a,i){var s={},l=o.nodes();return l.forEach(function(d){s[d]={},s[d][d]={distance:0},l.forEach(function(c){d!==c&&(s[d][c]={distance:Number.POSITIVE_INFINITY})}),i(d).forEach(function(c){var f=c.v===d?c.w:c.v,p=a(c);s[d][f]={distance:p,predecessor:d}})}),l.forEach(function(d){var c=s[d];l.forEach(function(f){var p=s[f];l.forEach(function(g){var h=p[d],m=c[g],v=p[g],b=h.distance+m.distance;b<v.distance&&(v.distance=b,v.predecessor=m.predecessor)})})}),s}return ts}var ns,Au;function Em(){if(Au)return ns;Au=1;var e=Qe();ns=t,t.CycleException=n;function t(r){var o={},a={},i=[];function s(l){if(e.has(a,l))throw new n;e.has(o,l)||(a[l]=!0,o[l]=!0,e.each(r.predecessors(l),s),delete a[l],i.push(l))}if(e.each(r.sinks(),s),e.size(o)!==r.nodeCount())throw new n;return i}function n(){}return n.prototype=new Error,ns}var rs,ku;function xT(){if(ku)return rs;ku=1;var e=Em();rs=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return rs}var os,Lu;function xm(){if(Lu)return os;Lu=1;var e=Qe();os=t;function t(r,o,a){e.isArray(o)||(o=[o]);var i=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],l={};return e.each(o,function(d){if(!r.hasNode(d))throw new Error("Graph does not have node: "+d);n(r,d,a==="post",l,i,s)}),s}function n(r,o,a,i,s,l){e.has(i,o)||(i[o]=!0,a||l.push(o),e.each(s(o),function(d){n(r,d,a,i,s,l)}),a&&l.push(o))}return os}var as,qu;function TT(){if(qu)return as;qu=1;var e=xm();as=t;function t(n,r){return e(n,r,"post")}return as}var is,Pu;function OT(){if(Pu)return is;Pu=1;var e=xm();is=t;function t(n,r){return e(n,r,"pre")}return is}var ss,Du;function IT(){if(Du)return ss;Du=1;var e=Qe(),t=ic(),n=wm();ss=r;function r(o,a){var i=new t,s={},l=new n,d;function c(p){var g=p.v===d?p.w:p.v,h=l.priority(g);if(h!==void 0){var m=a(p);m<h&&(s[g]=d,l.decrease(g,m))}}if(o.nodeCount()===0)return i;e.each(o.nodes(),function(p){l.add(p,Number.POSITIVE_INFINITY),i.setNode(p)}),l.decrease(o.nodes()[0],0);for(var f=!1;l.size()>0;){if(d=l.removeMin(),e.has(s,d))i.setEdge(d,s[d]);else{if(f)throw new Error("Input graph is not connected: "+o);f=!0}o.nodeEdges(d).forEach(c)}return i}return ss}var ls,Mu;function NT(){return Mu||(Mu=1,ls={components:wT(),dijkstra:Cm(),dijkstraAll:CT(),findCycles:_T(),floydWarshall:ET(),isAcyclic:xT(),postorder:TT(),preorder:OT(),prim:IT(),tarjan:_m(),topsort:Em()}),ls}var cs,Vu;function RT(){if(Vu)return cs;Vu=1;var e=bT();return cs={Graph:e.Graph,json:ST(),alg:NT(),version:e.version},cs}var Da;if(typeof Ua=="function")try{Da=RT()}catch{}Da||(Da=window.graphlib);var nt=Da,ds,Bu;function AT(){if(Bu)return ds;Bu=1;var e=rn,t=bp,n=Vl;function r(o){return function(a,i,s){var l=Object(a);if(!t(a)){var d=e(i);a=n(a),i=function(f){return d(l[f],f,l)}}var c=o(a,i,s);return c>-1?l[d?a[c]:c]:void 0}}return ds=r,ds}var us,Fu;function kT(){if(Fu)return us;Fu=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return us=t,us}var fs,$u;function LT(){if($u)return fs;$u=1;var e=kT(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return fs=n,fs}var ps,Hu;function qT(){if(Hu)return ps;Hu=1;var e=LT(),t=wp,n=_p,r=0/0,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt;function l(d){if(typeof d=="number")return d;if(n(d))return r;if(t(d)){var c=typeof d.valueOf=="function"?d.valueOf():d;d=t(c)?c+"":c}if(typeof d!="string")return d===0?d:+d;d=e(d);var f=a.test(d);return f||i.test(d)?s(d.slice(2),f?2:8):o.test(d)?r:+d}return ps=l,ps}var hs,zu;function Tm(){if(zu)return hs;zu=1;var e=qT(),t=1/0,n=17976931348623157e292;function r(o){if(!o)return o===0?o:0;if(o=e(o),o===t||o===-t){var a=o<0?-1:1;return a*n}return o===o?o:0}return hs=r,hs}var ms,Uu;function PT(){if(Uu)return ms;Uu=1;var e=Tm();function t(n){var r=e(n),o=r%1;return r===r?o?r-o:r:0}return ms=t,ms}var gs,Yu;function DT(){if(Yu)return gs;Yu=1;var e=Qv,t=rn,n=PT(),r=Math.max;function o(a,i,s){var l=a==null?0:a.length;if(!l)return-1;var d=s==null?0:n(s);return d<0&&(d=r(l+d,0)),e(a,t(i),d)}return gs=o,gs}var ys,ju;function MT(){if(ju)return ys;ju=1;var e=AT(),t=DT(),n=e(t);return ys=n,ys}var vs,Wu;function VT(){if(Wu)return vs;Wu=1;var e=Iv,t=$v,n=Nv;function r(o,a){return o==null?o:e(o,t(a),n)}return vs=r,vs}var bs,Gu;function sc(){if(Gu)return bs;Gu=1;var e=_p;function t(n,r,o){for(var a=-1,i=n.length;++a<i;){var s=n[a],l=r(s);if(l!=null&&(d===void 0?l===l&&!e(l):o(l,d)))var d=l,c=s}return c}return bs=t,bs}var Ss,Ku;function BT(){if(Ku)return Ss;Ku=1;function e(t,n){return t>n}return Ss=e,Ss}var ws,Xu;function FT(){if(Xu)return ws;Xu=1;var e=sc(),t=BT(),n=Ep;function r(o){return o&&o.length?e(o,n,t):void 0}return ws=r,ws}var Cs,Qu;function $T(){if(Qu)return Cs;Qu=1;var e=zv,t=Hv,n=t(function(r,o,a){e(r,o,a)});return Cs=n,Cs}var _s,Zu;function Om(){if(Zu)return _s;Zu=1;function e(t,n){return t<n}return _s=e,_s}var Es,Ju;function HT(){if(Ju)return Es;Ju=1;var e=sc(),t=Om(),n=Ep;function r(o){return o&&o.length?e(o,n,t):void 0}return Es=r,Es}var xs,ef;function zT(){if(ef)return xs;ef=1;var e=sc(),t=rn,n=Om();function r(o,a){return o&&o.length?e(o,t(a),n):void 0}return xs=r,xs}var Ts,tf;function UT(){if(tf)return Ts;tf=1;var e=Rv,t=function(){return e.Date.now()};return Ts=t,Ts}var Os,nf;function YT(){if(nf)return Os;nf=1;var e=Math.ceil,t=Math.max;function n(r,o,a,i){for(var s=-1,l=t(e((o-r)/(a||1)),0),d=Array(l);l--;)d[i?l:++s]=r,r+=a;return d}return Os=n,Os}var Is,rf;function jT(){if(rf)return Is;rf=1;var e=YT(),t=Uv,n=Tm();function r(o){return function(a,i,s){return s&&typeof s!="number"&&t(a,i,s)&&(i=s=void 0),a=n(a),i===void 0?(i=a,a=0):i=n(i),s=s===void 0?a<i?1:-1:n(s),e(a,i,s,o)}}return Is=r,Is}var Ns,of;function WT(){if(of)return Ns;of=1;var e=jT(),t=e();return Ns=t,Ns}var Rs,af;function GT(){if(af)return Rs;af=1;var e=Av,t=0;function n(r){var o=++t;return e(r)+o}return Rs=n,Rs}var As,sf;function KT(){if(sf)return As;sf=1;function e(t,n,r){for(var o=-1,a=t.length,i=n.length,s={};++o<a;){var l=o<i?n[o]:void 0;r(s,t[o],l)}return s}return As=e,As}var ks,lf;function XT(){if(lf)return ks;lf=1;var e=kv,t=KT();function n(r,o){return t(r||[],o||[],e)}return ks=n,ks}var Ma;if(typeof Ua=="function")try{Ma={cloneDeep:Yv,constant:Cp,defaults:jv,each:hm(),filter:mm(),find:MT(),flatten:Lv,forEach:xp,forIn:VT(),has:gm(),isUndefined:ym(),last:Wv,map:vm(),mapValues:qv,max:FT(),merge:$T(),min:HT(),minBy:zT(),now:UT(),pick:Pv,range:WT(),reduce:bm(),sortBy:Gv,uniqueId:GT(),values:Sm(),zipObject:XT()}}catch{}Ma||(Ma=window._);var ve=Ma,QT=ei;function ei(){var e={};e._next=e._prev=e,this._sentinel=e}ei.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Im(t),t};ei.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Im(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};ei.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,ZT)),n=n._prev;return"["+e.join(", ")+"]"};function Im(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function ZT(e,t){if(e!=="_next"&&e!=="_prev")return t}var vt=ve,JT=nt.Graph,eO=QT,tO=rO,nO=vt.constant(1);function rO(e,t){if(e.nodeCount()<=1)return[];var n=aO(e,t||nO),r=oO(n.graph,n.buckets,n.zeroIdx);return vt.flatten(vt.map(r,function(o){return e.outEdges(o.v,o.w)}),!0)}function oO(e,t,n){for(var r=[],o=t[t.length-1],a=t[0],i;e.nodeCount();){for(;i=a.dequeue();)Ls(e,t,n,i);for(;i=o.dequeue();)Ls(e,t,n,i);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(i=t[s].dequeue(),i){r=r.concat(Ls(e,t,n,i,!0));break}}}return r}function Ls(e,t,n,r,o){var a=o?[]:void 0;return vt.forEach(e.inEdges(r.v),function(i){var s=e.edge(i),l=e.node(i.v);o&&a.push({v:i.v,w:i.w}),l.out-=s,pl(t,n,l)}),vt.forEach(e.outEdges(r.v),function(i){var s=e.edge(i),l=i.w,d=e.node(l);d.in-=s,pl(t,n,d)}),e.removeNode(r.v),a}function aO(e,t){var n=new JT,r=0,o=0;vt.forEach(e.nodes(),function(s){n.setNode(s,{v:s,in:0,out:0})}),vt.forEach(e.edges(),function(s){var l=n.edge(s.v,s.w)||0,d=t(s),c=l+d;n.setEdge(s.v,s.w,c),o=Math.max(o,n.node(s.v).out+=d),r=Math.max(r,n.node(s.w).in+=d)});var a=vt.range(o+r+3).map(function(){return new eO}),i=r+1;return vt.forEach(n.nodes(),function(s){pl(a,i,n.node(s))}),{graph:n,buckets:a,zeroIdx:i}}function pl(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var Yt=ve,iO=tO,sO={run:lO,undo:dO};function lO(e){var t=e.graph().acyclicer==="greedy"?iO(e,n(e)):cO(e);Yt.forEach(t,function(r){var o=e.edge(r);e.removeEdge(r),o.forwardName=r.name,o.reversed=!0,e.setEdge(r.w,r.v,o,Yt.uniqueId("rev"))});function n(r){return function(o){return r.edge(o).weight}}}function cO(e){var t=[],n={},r={};function o(a){Yt.has(r,a)||(r[a]=!0,n[a]=!0,Yt.forEach(e.outEdges(a),function(i){Yt.has(n,i.w)?t.push(i):o(i.w)}),delete n[a])}return Yt.forEach(e.nodes(),o),t}function dO(e){Yt.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var de=ve,Nm=nt.Graph,Me={addDummyNode:Rm,simplify:uO,asNonCompoundGraph:fO,successorWeights:pO,predecessorWeights:hO,intersectRect:mO,buildLayerMatrix:gO,normalizeRanks:yO,removeEmptyRanks:vO,addBorderNode:bO,maxRank:Am,partition:SO,time:wO,notime:CO};function Rm(e,t,n,r){var o;do o=de.uniqueId(r);while(e.hasNode(o));return n.dummy=t,e.setNode(o,n),o}function uO(e){var t=new Nm().setGraph(e.graph());return de.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),de.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})}),t}function fO(e){var t=new Nm({multigraph:e.isMultigraph()}).setGraph(e.graph());return de.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),de.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function pO(e){var t=de.map(e.nodes(),function(n){var r={};return de.forEach(e.outEdges(n),function(o){r[o.w]=(r[o.w]||0)+e.edge(o).weight}),r});return de.zipObject(e.nodes(),t)}function hO(e){var t=de.map(e.nodes(),function(n){var r={};return de.forEach(e.inEdges(n),function(o){r[o.v]=(r[o.v]||0)+e.edge(o).weight}),r});return de.zipObject(e.nodes(),t)}function mO(e,t){var n=e.x,r=e.y,o=t.x-n,a=t.y-r,i=e.width/2,s=e.height/2;if(!o&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var l,d;return Math.abs(a)*i>Math.abs(o)*s?(a<0&&(s=-s),l=s*o/a,d=s):(o<0&&(i=-i),l=i,d=i*a/o),{x:n+l,y:r+d}}function gO(e){var t=de.map(de.range(Am(e)+1),function(){return[]});return de.forEach(e.nodes(),function(n){var r=e.node(n),o=r.rank;de.isUndefined(o)||(t[o][r.order]=n)}),t}function yO(e){var t=de.min(de.map(e.nodes(),function(n){return e.node(n).rank}));de.forEach(e.nodes(),function(n){var r=e.node(n);de.has(r,"rank")&&(r.rank-=t)})}function vO(e){var t=de.min(de.map(e.nodes(),function(a){return e.node(a).rank})),n=[];de.forEach(e.nodes(),function(a){var i=e.node(a).rank-t;n[i]||(n[i]=[]),n[i].push(a)});var r=0,o=e.graph().nodeRankFactor;de.forEach(n,function(a,i){de.isUndefined(a)&&i%o!==0?--r:r&&de.forEach(a,function(s){e.node(s).rank+=r})})}function bO(e,t,n,r){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=r),Rm(e,"border",o,t)}function Am(e){return de.max(de.map(e.nodes(),function(t){var n=e.node(t).rank;if(!de.isUndefined(n))return n}))}function SO(e,t){var n={lhs:[],rhs:[]};return de.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function wO(e,t){var n=de.now();try{return t()}finally{console.log(e+" time: "+(de.now()-n)+"ms")}}function CO(e,t){return t()}var km=ve,_O=Me,EO={run:xO,undo:OO};function xO(e){e.graph().dummyChains=[],km.forEach(e.edges(),function(t){TO(e,t)})}function TO(e,t){var n=t.v,r=e.node(n).rank,o=t.w,a=e.node(o).rank,i=t.name,s=e.edge(t),l=s.labelRank;if(a!==r+1){e.removeEdge(t);var d,c,f;for(f=0,++r;r<a;++f,++r)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:t,rank:r},d=_O.addDummyNode(e,"edge",c,"_d"),r===l&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),e.setEdge(n,d,{weight:s.weight},i),f===0&&e.graph().dummyChains.push(d),n=d;e.setEdge(n,o,{weight:s.weight},i)}}function OO(e){km.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,o;for(e.setEdge(n.edgeObj,r);n.dummy;)o=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=o,n=e.node(t)})}var Gr=ve,ti={longestPath:IO,slack:NO};function IO(e){var t={};function n(r){var o=e.node(r);if(Gr.has(t,r))return o.rank;t[r]=!0;var a=Gr.min(Gr.map(e.outEdges(r),function(i){return n(i.w)-e.edge(i).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),o.rank=a}Gr.forEach(e.sources(),n)}function NO(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Va=ve,RO=nt.Graph,Ba=ti.slack,Lm=AO;function AO(e){var t=new RO({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var o,a;kO(t,e)<r;)o=LO(t,e),a=t.hasNode(o.v)?Ba(e,o):-Ba(e,o),qO(t,e,a);return t}function kO(e,t){function n(r){Va.forEach(t.nodeEdges(r),function(o){var a=o.v,i=r===a?o.w:a;!e.hasNode(i)&&!Ba(t,o)&&(e.setNode(i,{}),e.setEdge(r,i,{}),n(i))})}return Va.forEach(e.nodes(),n),e.nodeCount()}function LO(e,t){return Va.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return Ba(t,n)})}function qO(e,t,n){Va.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var xt=ve,PO=Lm,DO=ti.slack,MO=ti.longestPath,VO=nt.alg.preorder,BO=nt.alg.postorder,FO=Me.simplify,$O=sn;sn.initLowLimValues=cc;sn.initCutValues=lc;sn.calcCutValue=qm;sn.leaveEdge=Dm;sn.enterEdge=Mm;sn.exchangeEdges=Vm;function sn(e){e=FO(e),MO(e);var t=PO(e);cc(t),lc(t,e);for(var n,r;n=Dm(t);)r=Mm(t,e,n),Vm(t,e,n,r)}function lc(e,t){var n=BO(e,e.nodes());n=n.slice(0,n.length-1),xt.forEach(n,function(r){HO(e,t,r)})}function HO(e,t,n){var r=e.node(n),o=r.parent;e.edge(n,o).cutvalue=qm(e,t,n)}function qm(e,t,n){var r=e.node(n),o=r.parent,a=!0,i=t.edge(n,o),s=0;return i||(a=!1,i=t.edge(o,n)),s=i.weight,xt.forEach(t.nodeEdges(n),function(l){var d=l.v===n,c=d?l.w:l.v;if(c!==o){var f=d===a,p=t.edge(l).weight;if(s+=f?p:-p,UO(e,n,c)){var g=e.edge(n,c).cutvalue;s+=f?-g:g}}}),s}function cc(e,t){arguments.length<2&&(t=e.nodes()[0]),Pm(e,{},1,t)}function Pm(e,t,n,r,o){var a=n,i=e.node(r);return t[r]=!0,xt.forEach(e.neighbors(r),function(s){xt.has(t,s)||(n=Pm(e,t,n,s,r))}),i.low=a,i.lim=n++,o?i.parent=o:delete i.parent,n}function Dm(e){return xt.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Mm(e,t,n){var r=n.v,o=n.w;t.hasEdge(r,o)||(r=n.w,o=n.v);var a=e.node(r),i=e.node(o),s=a,l=!1;a.lim>i.lim&&(s=i,l=!0);var d=xt.filter(t.edges(),function(c){return l===cf(e,e.node(c.v),s)&&l!==cf(e,e.node(c.w),s)});return xt.minBy(d,function(c){return DO(t,c)})}function Vm(e,t,n,r){var o=n.v,a=n.w;e.removeEdge(o,a),e.setEdge(r.v,r.w,{}),cc(e),lc(e,t),zO(e,t)}function zO(e,t){var n=xt.find(e.nodes(),function(o){return!t.node(o).parent}),r=VO(e,n);r=r.slice(1),xt.forEach(r,function(o){var a=e.node(o).parent,i=t.edge(o,a),s=!1;i||(i=t.edge(a,o),s=!0),t.node(o).rank=t.node(a).rank+(s?i.minlen:-i.minlen)})}function UO(e,t,n){return e.hasEdge(t,n)}function cf(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var YO=ti,Bm=YO.longestPath,jO=Lm,WO=$O,GO=KO;function KO(e){switch(e.graph().ranker){case"network-simplex":df(e);break;case"tight-tree":QO(e);break;case"longest-path":XO(e);break;default:df(e)}}var XO=Bm;function QO(e){Bm(e),jO(e)}function df(e){WO(e)}var hl=ve,ZO=JO;function JO(e){var t=tI(e);hl.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),o=r.edgeObj,a=eI(e,t,o.v,o.w),i=a.path,s=a.lca,l=0,d=i[l],c=!0;n!==o.w;){if(r=e.node(n),c){for(;(d=i[l])!==s&&e.node(d).maxRank<r.rank;)l++;d===s&&(c=!1)}if(!c){for(;l<i.length-1&&e.node(d=i[l+1]).minRank<=r.rank;)l++;d=i[l]}e.setParent(n,d),n=e.successors(n)[0]}})}function eI(e,t,n,r){var o=[],a=[],i=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim),l,d;l=n;do l=e.parent(l),o.push(l);while(l&&(t[l].low>i||s>t[l].lim));for(d=l,l=r;(l=e.parent(l))!==d;)a.push(l);return{path:o.concat(a.reverse()),lca:d}}function tI(e){var t={},n=0;function r(o){var a=n;hl.forEach(e.children(o),r),t[o]={low:a,lim:n++}}return hl.forEach(e.children(),r),t}var bt=ve,ml=Me,nI={run:rI,cleanup:iI};function rI(e){var t=ml.addDummyNode(e,"root",{},"_root"),n=oI(e),r=bt.max(bt.values(n))-1,o=2*r+1;e.graph().nestingRoot=t,bt.forEach(e.edges(),function(i){e.edge(i).minlen*=o});var a=aI(e)+1;bt.forEach(e.children(),function(i){Fm(e,t,o,a,r,n,i)}),e.graph().nodeRankFactor=o}function Fm(e,t,n,r,o,a,i){var s=e.children(i);if(!s.length){i!==t&&e.setEdge(t,i,{weight:0,minlen:n});return}var l=ml.addBorderNode(e,"_bt"),d=ml.addBorderNode(e,"_bb"),c=e.node(i);e.setParent(l,i),c.borderTop=l,e.setParent(d,i),c.borderBottom=d,bt.forEach(s,function(f){Fm(e,t,n,r,o,a,f);var p=e.node(f),g=p.borderTop?p.borderTop:f,h=p.borderBottom?p.borderBottom:f,m=p.borderTop?r:2*r,v=g!==h?1:o-a[i]+1;e.setEdge(l,g,{weight:m,minlen:v,nestingEdge:!0}),e.setEdge(h,d,{weight:m,minlen:v,nestingEdge:!0})}),e.parent(i)||e.setEdge(t,l,{weight:0,minlen:o+a[i]})}function oI(e){var t={};function n(r,o){var a=e.children(r);a&&a.length&&bt.forEach(a,function(i){n(i,o+1)}),t[r]=o}return bt.forEach(e.children(),function(r){n(r,1)}),t}function aI(e){return bt.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function iI(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,bt.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var qs=ve,sI=Me,lI=cI;function cI(e){function t(n){var r=e.children(n),o=e.node(n);if(r.length&&qs.forEach(r,t),qs.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var a=o.minRank,i=o.maxRank+1;a<i;++a)uf(e,"borderLeft","_bl",n,o,a),uf(e,"borderRight","_br",n,o,a)}}qs.forEach(e.children(),t)}function uf(e,t,n,r,o,a){var i={width:0,height:0,rank:a,borderType:t},s=o[t][a-1],l=sI.addDummyNode(e,"border",i,n);o[t][a]=l,e.setParent(l,r),s&&e.setEdge(s,l,{weight:1})}var st=ve,dI={adjust:uI,undo:fI};function uI(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&$m(e)}function fI(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&pI(e),(t==="lr"||t==="rl")&&(hI(e),$m(e))}function $m(e){st.forEach(e.nodes(),function(t){ff(e.node(t))}),st.forEach(e.edges(),function(t){ff(e.edge(t))})}function ff(e){var t=e.width;e.width=e.height,e.height=t}function pI(e){st.forEach(e.nodes(),function(t){Ps(e.node(t))}),st.forEach(e.edges(),function(t){var n=e.edge(t);st.forEach(n.points,Ps),st.has(n,"y")&&Ps(n)})}function Ps(e){e.y=-e.y}function hI(e){st.forEach(e.nodes(),function(t){Ds(e.node(t))}),st.forEach(e.edges(),function(t){var n=e.edge(t);st.forEach(n.points,Ds),st.has(n,"x")&&Ds(n)})}function Ds(e){var t=e.x;e.x=e.y,e.y=t}var ht=ve,mI=gI;function gI(e){var t={},n=ht.filter(e.nodes(),function(s){return!e.children(s).length}),r=ht.max(ht.map(n,function(s){return e.node(s).rank})),o=ht.map(ht.range(r+1),function(){return[]});function a(s){if(!ht.has(t,s)){t[s]=!0;var l=e.node(s);o[l.rank].push(s),ht.forEach(e.successors(s),a)}}var i=ht.sortBy(n,function(s){return e.node(s).rank});return ht.forEach(i,a),o}var Nt=ve,yI=vI;function vI(e,t){for(var n=0,r=1;r<t.length;++r)n+=bI(e,t[r-1],t[r]);return n}function bI(e,t,n){for(var r=Nt.zipObject(n,Nt.map(n,function(d,c){return c})),o=Nt.flatten(Nt.map(t,function(d){return Nt.sortBy(Nt.map(e.outEdges(d),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var i=2*a-1;a-=1;var s=Nt.map(new Array(i),function(){return 0}),l=0;return Nt.forEach(o.forEach(function(d){var c=d.pos+a;s[c]+=d.weight;for(var f=0;c>0;)c%2&&(f+=s[c+1]),c=c-1>>1,s[c]+=d.weight;l+=d.weight*f})),l}var pf=ve,SI=wI;function wI(e,t){return pf.map(t,function(n){var r=e.inEdges(n);if(r.length){var o=pf.reduce(r,function(a,i){var s=e.edge(i),l=e.node(i.v);return{sum:a.sum+s.weight*l.order,weight:a.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:n}})}var Fe=ve,CI=_I;function _I(e,t){var n={};Fe.forEach(e,function(o,a){var i=n[o.v]={indegree:0,in:[],out:[],vs:[o.v],i:a};Fe.isUndefined(o.barycenter)||(i.barycenter=o.barycenter,i.weight=o.weight)}),Fe.forEach(t.edges(),function(o){var a=n[o.v],i=n[o.w];!Fe.isUndefined(a)&&!Fe.isUndefined(i)&&(i.indegree++,a.out.push(n[o.w]))});var r=Fe.filter(n,function(o){return!o.indegree});return EI(r)}function EI(e){var t=[];function n(a){return function(i){i.merged||(Fe.isUndefined(i.barycenter)||Fe.isUndefined(a.barycenter)||i.barycenter>=a.barycenter)&&xI(a,i)}}function r(a){return function(i){i.in.push(a),--i.indegree===0&&e.push(i)}}for(;e.length;){var o=e.pop();t.push(o),Fe.forEach(o.in.reverse(),n(o)),Fe.forEach(o.out,r(o))}return Fe.map(Fe.filter(t,function(a){return!a.merged}),function(a){return Fe.pick(a,["vs","i","barycenter","weight"])})}function xI(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var Wn=ve,TI=Me,OI=II;function II(e,t){var n=TI.partition(e,function(c){return Wn.has(c,"barycenter")}),r=n.lhs,o=Wn.sortBy(n.rhs,function(c){return-c.i}),a=[],i=0,s=0,l=0;r.sort(NI(!!t)),l=hf(a,o,l),Wn.forEach(r,function(c){l+=c.vs.length,a.push(c.vs),i+=c.barycenter*c.weight,s+=c.weight,l=hf(a,o,l)});var d={vs:Wn.flatten(a,!0)};return s&&(d.barycenter=i/s,d.weight=s),d}function hf(e,t,n){for(var r;t.length&&(r=Wn.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function NI(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var qt=ve,RI=SI,AI=CI,kI=OI,LI=Hm;function Hm(e,t,n,r){var o=e.children(t),a=e.node(t),i=a?a.borderLeft:void 0,s=a?a.borderRight:void 0,l={};i&&(o=qt.filter(o,function(h){return h!==i&&h!==s}));var d=RI(e,o);qt.forEach(d,function(h){if(e.children(h.v).length){var m=Hm(e,h.v,n,r);l[h.v]=m,qt.has(m,"barycenter")&&PI(h,m)}});var c=AI(d,n);qI(c,l);var f=kI(c,r);if(i&&(f.vs=qt.flatten([i,f.vs,s],!0),e.predecessors(i).length)){var p=e.node(e.predecessors(i)[0]),g=e.node(e.predecessors(s)[0]);qt.has(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+p.order+g.order)/(f.weight+2),f.weight+=2}return f}function qI(e,t){qt.forEach(e,function(n){n.vs=qt.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function PI(e,t){qt.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var Gn=ve,DI=nt.Graph,MI=VI;function VI(e,t,n){var r=BI(e),o=new DI({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(a){return e.node(a)});return Gn.forEach(e.nodes(),function(a){var i=e.node(a),s=e.parent(a);(i.rank===t||i.minRank<=t&&t<=i.maxRank)&&(o.setNode(a),o.setParent(a,s||r),Gn.forEach(e[n](a),function(l){var d=l.v===a?l.w:l.v,c=o.edge(d,a),f=Gn.isUndefined(c)?0:c.weight;o.setEdge(d,a,{weight:e.edge(l).weight+f})}),Gn.has(i,"minRank")&&o.setNode(a,{borderLeft:i.borderLeft[t],borderRight:i.borderRight[t]}))}),o}function BI(e){for(var t;e.hasNode(t=Gn.uniqueId("_root")););return t}var FI=ve,$I=HI;function HI(e,t,n){var r={},o;FI.forEach(n,function(a){for(var i=e.parent(a),s,l;i;){if(s=e.parent(i),s?(l=r[s],r[s]=i):(l=o,o=i),l&&l!==i){t.setEdge(l,i);return}i=s}})}var Pt=ve,zI=mI,UI=yI,YI=LI,jI=MI,WI=$I,GI=nt.Graph,mf=Me,KI=XI;function XI(e){var t=mf.maxRank(e),n=gf(e,Pt.range(1,t+1),"inEdges"),r=gf(e,Pt.range(t-1,-1,-1),"outEdges"),o=zI(e);yf(e,o);for(var a=Number.POSITIVE_INFINITY,i,s=0,l=0;l<4;++s,++l){QI(s%2?n:r,s%4>=2),o=mf.buildLayerMatrix(e);var d=UI(e,o);d<a&&(l=0,i=Pt.cloneDeep(o),a=d)}yf(e,i)}function gf(e,t,n){return Pt.map(t,function(r){return jI(e,r,n)})}function QI(e,t){var n=new GI;Pt.forEach(e,function(r){var o=r.graph().root,a=YI(r,o,n,t);Pt.forEach(a.vs,function(i,s){r.node(i).order=s}),WI(r,n,a.vs)})}function yf(e,t){Pt.forEach(t,function(n){Pt.forEach(n,function(r,o){e.node(r).order=o})})}var Z=ve,ZI=nt.Graph,JI=Me,eN={positionX:rN,findType1Conflicts:zm,findType2Conflicts:Um,addConflict:dc,hasConflict:Ym,verticalAlignment:jm,horizontalCompaction:Wm,alignCoordinates:Km,findSmallestWidthAlignment:Gm,balance:Xm};function zm(e,t){var n={};function r(o,a){var i=0,s=0,l=o.length,d=Z.last(a);return Z.forEach(a,function(c,f){var p=tN(e,c),g=p?e.node(p).order:l;(p||c===d)&&(Z.forEach(a.slice(s,f+1),function(h){Z.forEach(e.predecessors(h),function(m){var v=e.node(m),b=v.order;(b<i||g<b)&&!(v.dummy&&e.node(h).dummy)&&dc(n,m,h)})}),s=f+1,i=g)}),a}return Z.reduce(t,r),n}function Um(e,t){var n={};function r(a,i,s,l,d){var c;Z.forEach(Z.range(i,s),function(f){c=a[f],e.node(c).dummy&&Z.forEach(e.predecessors(c),function(p){var g=e.node(p);g.dummy&&(g.order<l||g.order>d)&&dc(n,p,c)})})}function o(a,i){var s=-1,l,d=0;return Z.forEach(i,function(c,f){if(e.node(c).dummy==="border"){var p=e.predecessors(c);p.length&&(l=e.node(p[0]).order,r(i,d,f,s,l),d=f,s=l)}r(i,d,i.length,l,a.length)}),i}return Z.reduce(t,o),n}function tN(e,t){if(e.node(t).dummy)return Z.find(e.predecessors(t),function(n){return e.node(n).dummy})}function dc(e,t,n){if(t>n){var r=t;t=n,n=r}var o=e[t];o||(e[t]=o={}),o[n]=!0}function Ym(e,t,n){if(t>n){var r=t;t=n,n=r}return Z.has(e[t],n)}function jm(e,t,n,r){var o={},a={},i={};return Z.forEach(t,function(s){Z.forEach(s,function(l,d){o[l]=l,a[l]=l,i[l]=d})}),Z.forEach(t,function(s){var l=-1;Z.forEach(s,function(d){var c=r(d);if(c.length){c=Z.sortBy(c,function(m){return i[m]});for(var f=(c.length-1)/2,p=Math.floor(f),g=Math.ceil(f);p<=g;++p){var h=c[p];a[d]===d&&l<i[h]&&!Ym(n,d,h)&&(a[h]=d,a[d]=o[d]=o[h],l=i[h])}}})}),{root:o,align:a}}function Wm(e,t,n,r,o){var a={},i=nN(e,t,n,o),s=o?"borderLeft":"borderRight";function l(f,p){for(var g=i.nodes(),h=g.pop(),m={};h;)m[h]?f(h):(m[h]=!0,g.push(h),g=g.concat(p(h))),h=g.pop()}function d(f){a[f]=i.inEdges(f).reduce(function(p,g){return Math.max(p,a[g.v]+i.edge(g))},0)}function c(f){var p=i.outEdges(f).reduce(function(h,m){return Math.min(h,a[m.w]-i.edge(m))},Number.POSITIVE_INFINITY),g=e.node(f);p!==Number.POSITIVE_INFINITY&&g.borderType!==s&&(a[f]=Math.max(a[f],p))}return l(d,i.predecessors.bind(i)),l(c,i.successors.bind(i)),Z.forEach(r,function(f){a[f]=a[n[f]]}),a}function nN(e,t,n,r){var o=new ZI,a=e.graph(),i=oN(a.nodesep,a.edgesep,r);return Z.forEach(t,function(s){var l;Z.forEach(s,function(d){var c=n[d];if(o.setNode(c),l){var f=n[l],p=o.edge(f,c);o.setEdge(f,c,Math.max(i(e,d,l),p||0))}l=d})}),o}function Gm(e,t){return Z.minBy(Z.values(t),function(n){var r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return Z.forIn(n,function(a,i){var s=aN(e,i)/2;r=Math.max(a+s,r),o=Math.min(a-s,o)}),r-o})}function Km(e,t){var n=Z.values(t),r=Z.min(n),o=Z.max(n);Z.forEach(["u","d"],function(a){Z.forEach(["l","r"],function(i){var s=a+i,l=e[s],d;if(l!==t){var c=Z.values(l);d=i==="l"?r-Z.min(c):o-Z.max(c),d&&(e[s]=Z.mapValues(l,function(f){return f+d}))}})})}function Xm(e,t){return Z.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var o=Z.sortBy(Z.map(e,r));return(o[1]+o[2])/2})}function rN(e){var t=JI.buildLayerMatrix(e),n=Z.merge(zm(e,t),Um(e,t)),r={},o;Z.forEach(["u","d"],function(i){o=i==="u"?t:Z.values(t).reverse(),Z.forEach(["l","r"],function(s){s==="r"&&(o=Z.map(o,function(f){return Z.values(f).reverse()}));var l=(i==="u"?e.predecessors:e.successors).bind(e),d=jm(e,o,n,l),c=Wm(e,o,d.root,d.align,s==="r");s==="r"&&(c=Z.mapValues(c,function(f){return-f})),r[i+s]=c})});var a=Gm(e,r);return Km(r,a),Xm(r,e.graph().align)}function oN(e,t,n){return function(r,o,a){var i=r.node(o),s=r.node(a),l=0,d;if(l+=i.width/2,Z.has(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":d=-i.width/2;break;case"r":d=i.width/2;break}if(d&&(l+=n?d:-d),d=0,l+=(i.dummy?t:e)/2,l+=(s.dummy?t:e)/2,l+=s.width/2,Z.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":d=s.width/2;break;case"r":d=-s.width/2;break}return d&&(l+=n?d:-d),d=0,l}}function aN(e,t){return e.node(t).width}var Kn=ve,Qm=Me,iN=eN.positionX,sN=lN;function lN(e){e=Qm.asNonCompoundGraph(e),cN(e),Kn.forEach(iN(e),function(t,n){e.node(n).x=t})}function cN(e){var t=Qm.buildLayerMatrix(e),n=e.graph().ranksep,r=0;Kn.forEach(t,function(o){var a=Kn.max(Kn.map(o,function(i){return e.node(i).height}));Kn.forEach(o,function(i){e.node(i).y=r+a/2}),r+=a+n})}var te=ve,vf=sO,bf=EO,dN=GO,uN=Me.normalizeRanks,fN=ZO,pN=Me.removeEmptyRanks,Sf=nI,hN=lI,wf=dI,mN=KI,gN=sN,Ft=Me,yN=nt.Graph,vN=bN;function bN(e,t){var n=t&&t.debugTiming?Ft.time:Ft.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return RN(e)});n("  runLayout",function(){SN(r,n)}),n("  updateInputGraph",function(){wN(e,r)})})}function SN(e,t){t("    makeSpaceForEdgeLabels",function(){AN(e)}),t("    removeSelfEdges",function(){FN(e)}),t("    acyclic",function(){vf.run(e)}),t("    nestingGraph.run",function(){Sf.run(e)}),t("    rank",function(){dN(Ft.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){kN(e)}),t("    removeEmptyRanks",function(){pN(e)}),t("    nestingGraph.cleanup",function(){Sf.cleanup(e)}),t("    normalizeRanks",function(){uN(e)}),t("    assignRankMinMax",function(){LN(e)}),t("    removeEdgeLabelProxies",function(){qN(e)}),t("    normalize.run",function(){bf.run(e)}),t("    parentDummyChains",function(){fN(e)}),t("    addBorderSegments",function(){hN(e)}),t("    order",function(){mN(e)}),t("    insertSelfEdges",function(){$N(e)}),t("    adjustCoordinateSystem",function(){wf.adjust(e)}),t("    position",function(){gN(e)}),t("    positionSelfEdges",function(){HN(e)}),t("    removeBorderNodes",function(){BN(e)}),t("    normalize.undo",function(){bf.undo(e)}),t("    fixupEdgeLabelCoords",function(){MN(e)}),t("    undoCoordinateSystem",function(){wf.undo(e)}),t("    translateGraph",function(){PN(e)}),t("    assignNodeIntersects",function(){DN(e)}),t("    reversePoints",function(){VN(e)}),t("    acyclic.undo",function(){vf.undo(e)})}function wN(e,t){te.forEach(e.nodes(),function(n){var r=e.node(n),o=t.node(n);r&&(r.x=o.x,r.y=o.y,t.children(n).length&&(r.width=o.width,r.height=o.height))}),te.forEach(e.edges(),function(n){var r=e.edge(n),o=t.edge(n);r.points=o.points,te.has(o,"x")&&(r.x=o.x,r.y=o.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var CN=["nodesep","edgesep","ranksep","marginx","marginy"],_N={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},EN=["acyclicer","ranker","rankdir","align"],xN=["width","height"],TN={width:0,height:0},ON=["minlen","weight","width","height","labeloffset"],IN={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},NN=["labelpos"];function RN(e){var t=new yN({multigraph:!0,compound:!0}),n=Vs(e.graph());return t.setGraph(te.merge({},_N,Ms(n,CN),te.pick(n,EN))),te.forEach(e.nodes(),function(r){var o=Vs(e.node(r));t.setNode(r,te.defaults(Ms(o,xN),TN)),t.setParent(r,e.parent(r))}),te.forEach(e.edges(),function(r){var o=Vs(e.edge(r));t.setEdge(r,te.merge({},IN,Ms(o,ON),te.pick(o,NN)))}),t}function AN(e){var t=e.graph();t.ranksep/=2,te.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function kN(e){te.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),o=e.node(t.w),a={rank:(o.rank-r.rank)/2+r.rank,e:t};Ft.addDummyNode(e,"edge-proxy",a,"_ep")}})}function LN(e){var t=0;te.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=te.max(t,r.maxRank))}),e.graph().maxRank=t}function qN(e){te.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function PN(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,o=0,a=e.graph(),i=a.marginx||0,s=a.marginy||0;function l(d){var c=d.x,f=d.y,p=d.width,g=d.height;t=Math.min(t,c-p/2),n=Math.max(n,c+p/2),r=Math.min(r,f-g/2),o=Math.max(o,f+g/2)}te.forEach(e.nodes(),function(d){l(e.node(d))}),te.forEach(e.edges(),function(d){var c=e.edge(d);te.has(c,"x")&&l(c)}),t-=i,r-=s,te.forEach(e.nodes(),function(d){var c=e.node(d);c.x-=t,c.y-=r}),te.forEach(e.edges(),function(d){var c=e.edge(d);te.forEach(c.points,function(f){f.x-=t,f.y-=r}),te.has(c,"x")&&(c.x-=t),te.has(c,"y")&&(c.y-=r)}),a.width=n-t+i,a.height=o-r+s}function DN(e){te.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),o=e.node(t.w),a,i;n.points?(a=n.points[0],i=n.points[n.points.length-1]):(n.points=[],a=o,i=r),n.points.unshift(Ft.intersectRect(r,a)),n.points.push(Ft.intersectRect(o,i))})}function MN(e){te.forEach(e.edges(),function(t){var n=e.edge(t);if(te.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function VN(e){te.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function BN(e){te.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),o=e.node(n.borderBottom),a=e.node(te.last(n.borderLeft)),i=e.node(te.last(n.borderRight));n.width=Math.abs(i.x-a.x),n.height=Math.abs(o.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}}),te.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function FN(e){te.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function $N(e){var t=Ft.buildLayerMatrix(e);te.forEach(t,function(n){var r=0;te.forEach(n,function(o,a){var i=e.node(o);i.order=a+r,te.forEach(i.selfEdges,function(s){Ft.addDummyNode(e,"selfedge",{width:s.label.width,height:s.label.height,rank:i.rank,order:a+ ++r,e:s.e,label:s.label},"_se")}),delete i.selfEdges})})}function HN(e){te.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),o=r.x+r.width/2,a=r.y,i=n.x-o,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:o+2*i/3,y:a-s},{x:o+5*i/6,y:a-s},{x:o+i,y:a},{x:o+5*i/6,y:a+s},{x:o+2*i/3,y:a+s}],n.label.x=n.x,n.label.y=n.y}})}function Ms(e,t){return te.mapValues(te.pick(e,t),Number)}function Vs(e){var t={};return te.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var Kr=ve,zN=Me,UN=nt.Graph,YN={debugOrdering:jN};function jN(e){var t=zN.buildLayerMatrix(e),n=new UN({compound:!0,multigraph:!0}).setGraph({});return Kr.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),Kr.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),Kr.forEach(t,function(r,o){var a="layer"+o;n.setNode(a,{rank:"same"}),Kr.reduce(r,function(i,s){return n.setEdge(i,s,{style:"invis"}),s})}),n}var WN="0.8.5",Zm={graphlib:nt,layout:vN,debug:YN,util:{time:Me.time,notime:Me.notime},version:WN},Cf=function(t){return t.reduce(function(n,r){var o=r[0],a=r[1];return n[o]=a,n},{})},_f=typeof window<"u"&&window.document&&window.document.createElement?x.exports.useLayoutEffect:x.exports.useEffect;function GN(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},o=t.attributes[n]||{},a=t.elements[n];!Op(a)||!Ip(a)||(Object.assign(a.style,r),Object.keys(o).forEach(function(i){var s=o[i];s===!1?a.removeAttribute(i):a.setAttribute(i,s===!0?"":s)}))})}function KN(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var o=t.elements[r],a=t.attributes[r]||{},i=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),s=i.reduce(function(l,d){return l[d]="",l},{});!Op(o)||!Ip(o)||(Object.assign(o.style,s),Object.keys(a).forEach(function(l){o.removeAttribute(l)}))})}}const XN={name:"applyStyles",enabled:!0,phase:"write",fn:GN,effect:KN,requires:["computeStyles"]};var QN=[eb,tb,nb,XN,rb,ob,ab,ib,sb],ZN=Jv({defaultModifiers:QN}),JN=typeof Element<"u",eR=typeof Map=="function",tR=typeof Set=="function",nR=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function So(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,o;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!So(e[r],t[r]))return!1;return!0}var a;if(eR&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a=e.entries();!(r=a.next()).done;)if(!t.has(r.value[0]))return!1;for(a=e.entries();!(r=a.next()).done;)if(!So(r.value[1],t.get(r.value[0])))return!1;return!0}if(tR&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a=e.entries();!(r=a.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(nR&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[r]))return!1;if(JN&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((o[r]==="_owner"||o[r]==="__v"||o[r]==="__o")&&e.$$typeof)&&!So(e[o[r]],t[o[r]]))return!1;return!0}return e!==e&&t!==t}var rR=function(t,n){try{return So(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}},oR=[],aR=function(t,n,r){r===void 0&&(r={});var o=x.exports.useRef(null),a={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||oR},i=x.exports.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=i[0],l=i[1],d=x.exports.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(g){var h=g.state,m=Object.keys(h.elements);Zv.exports.flushSync(function(){l({styles:Cf(m.map(function(v){return[v,h.styles[v]||{}]})),attributes:Cf(m.map(function(v){return[v,h.attributes[v]]}))})})},requires:["computeStyles"]}},[]),c=x.exports.useMemo(function(){var p={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[d,{name:"applyStyles",enabled:!1}])};return rR(o.current,p)?o.current||p:(o.current=p,p)},[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,d]),f=x.exports.useRef();return _f(function(){f.current&&f.current.setOptions(c)},[c]),_f(function(){if(!(t==null||n==null)){var p=r.createPopper||ZN,g=p(t,n,c);return f.current=g,function(){g.destroy(),f.current=null}}},[t,n,r.createPopper]),{state:f.current?f.current.state:null,styles:s.styles,attributes:s.attributes,update:f.current?f.current.update:null,forceUpdate:f.current?f.current.forceUpdate:null}};const wo=({children:e,contentProps:t,placement:n,showCloseButton:r=!0,actionButton:o,strategy:a,style:i})=>{n=n!=null?n:"bottom-start";const[s,l]=x.exports.useState(!1),[d,c]=x.exports.useState(null),[f,p]=x.exports.useState(null),[g,h]=x.exports.useState(null),{styles:m,attributes:v}=aR(d,f,{placement:n,strategy:a,modifiers:[{name:"arrow",options:{element:g}},{name:"offset",options:{offset:[0,10]}}]}),b=u(Np,{in:s,timeout:200,classNames:"fade-in-out",mountOnEnter:!0,children:N("div",{className:"Tooltip SRC-popover bootstrap-4-backport",style:{...i,...m.popper},ref:p,...v.popper,children:[u(_t,{variant:"body1",children:u(De,{...t})}),N("div",{className:"TooltipButtonContainer",children:[o&&u(kc,{color:"primary",variant:"contained",onClick:()=>{o.onClick(),o.closePopoverOnClick&&l(!1)},children:o.content}),r&&u(kc,{variant:"outlined",onClick:()=>l(!1),children:"Close"})]}),u("div",{className:"arrow","data-popper-arrow":!0,ref:h,style:m.arrow})]})});return N(H,{children:[u("span",{role:"button",className:"PopoverContainer bootstrap-4-backport",onClick:()=>l(E=>!E),ref:c,children:e}),b]})};try{wo.displayName="MarkdownPopover",wo.__docgenInfo={description:"",displayName:"MarkdownPopover",props:{contentProps:{defaultValue:null,description:"",name:"contentProps",required:!0,type:{name:"MarkdownSynapseProps"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},placement:{defaultValue:null,description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"bottom"'},{value:'"right"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},actionButton:{defaultValue:null,description:"",name:"actionButton",required:!1,type:{name:"{ content: ReactElement<any, string | JSXElementConstructor<any>>; variant: string; onClick: () => void; closePopoverOnClick: boolean; }"}},strategy:{defaultValue:null,description:"",name:"strategy",required:!1,type:{name:"enum",value:[{value:'"absolute"'},{value:'"fixed"'}]}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/MarkdownPopover.tsx#MarkdownPopover"]={docgenInfo:wo.__docgenInfo,name:"MarkdownPopover",path:"src/lib/containers/MarkdownPopover.tsx#MarkdownPopover"})}catch{}const Dt=({markdownText:e,helpUrl:t,placement:n="bottom",showCloseButton:r=!0,className:o=""})=>u(H,{children:u(wo,{contentProps:{markdown:e},placement:n,actionButton:t?{content:u(H,{children:"More info"}),closePopoverOnClick:!0,onClick:()=>window.open(t,"_blank"),variant:"primary"}:void 0,showCloseButton:r,strategy:"fixed",style:{maxWidth:"350px"},children:u(hv,{className:`HelpButton ${o}`})})});try{Dt.displayName="HelpPopover",Dt.__docgenInfo={description:"",displayName:"HelpPopover",props:{markdownText:{defaultValue:null,description:"",name:"markdownText",required:!0,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}},placement:{defaultValue:{value:"bottom"},description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"auto-start"'},{value:'"auto-end"'},{value:'"top"'},{value:'"bottom"'},{value:'"right"'},{value:'"left"'},{value:'"top-start"'},{value:'"top-end"'},{value:'"bottom-start"'},{value:'"bottom-end"'},{value:'"right-start"'},{value:'"right-end"'},{value:'"left-start"'},{value:'"left-end"'}]}},showCloseButton:{defaultValue:{value:"true"},description:"",name:"showCloseButton",required:!1,type:{name:"boolean"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HelpPopover.tsx#HelpPopover"]={docgenInfo:Dt.__docgenInfo,name:"HelpPopover",path:"src/lib/containers/HelpPopover.tsx#HelpPopover"})}catch{}const iR=()=>N(H,{children:[u(_t,{variant:"smallText1",className:"description",children:"Undefined"}),u(Dt,{placement:"top",markdownText:"Provenance tracks the relationship  between data, code and analytical results.",helpUrl:"https://help.synapse.org/docs/Provenance.1972470373.html"})]}),Co=e=>{const t=e.targetVersionNumber?`.${e.targetVersionNumber}`:"",n=`${e.targetId}${t}`;return x.exports.useMemo(()=>N(H,{children:[u("div",{children:u(pe,{icon:"fileOutlined"})}),u("span",{children:n})]}),[n])};try{Co.displayName="EntityPlaceholderNodeLabel",Co.__docgenInfo={description:"This node type is used if the user cannot access the entity for some reason",displayName:"EntityPlaceholderNodeLabel",props:{targetId:{defaultValue:null,description:"",name:"targetId",required:!0,type:{name:"string"}},targetVersionNumber:{defaultValue:null,description:"",name:"targetVersionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/EntityPlaceholderNodeLabel.tsx#EntityPlaceholderNodeLabel"]={docgenInfo:Co.__docgenInfo,name:"EntityPlaceholderNodeLabel",path:"src/lib/containers/provenance/EntityPlaceholderNodeLabel.tsx#EntityPlaceholderNodeLabel"})}catch{}var Ae=(e=>(e.ENTITY="EntityNode",e.ENTITY_PLACEHOLDER="EntityPlaceholderNode",e.EXTERNAL="ExternalNode",e.ACTIVITY="ActivityNode",e.EXPAND="ExpandNode",e.UNDEFINED="UndefinedNode",e))(Ae||{});const Jn=e=>{const{type:t,data:n}=e;let r;switch(t){case"EntityNode":r=u(go,{...n});break;case"EntityPlaceholderNode":r=u(Co,{...n});break;case"ExternalNode":r=u(bo,{...n});break;case"ActivityNode":r=u(ho,{...n});break;case"ExpandNode":r=u(yo,{...n});break;case"UndefinedNode":r=u(iR,{});break;default:r=N("p",{children:["Unrecognized node type: ",t]});break}const o={label:r,props:n,type:t};return{id:ct(e),position:{x:100,y:100},data:o,connectable:!1,draggable:!1,className:`${t}`}},Jm=(e,t)=>{const n=ct(e),r=ct(t);return{id:`${n}-${r}`,source:n,target:r,animated:!0,type:gt.SimpleBezier,markerEnd:{type:Sr.ArrowClosed}}},ct=e=>{var r,o,a,i;const{type:t,data:n}=e;switch(t){case"EntityNode":return`${n.id}.${(r=n.versionNumber)!=null?r:"latest"}`;case"EntityPlaceholderNode":return`${n.targetId}.${(o=n.targetVersionNumber)!=null?o:"latest"}`;case"ExternalNode":return`${n.url}`;case"ActivityNode":return`${n.id}`;case"ExpandNode":return`expand.node.${n.entityHeader.id}.${(a=n.entityHeader.versionNumber)!=null?a:"latest"}`;case"UndefinedNode":return`undefined.dummy.node.${n.id}.${(i=n.versionNumber)!=null?i:"latest"}`}},pn=new Zm.graphlib.Graph;pn.setDefaultEdgeLabel(()=>({}));const Ef=e=>e.data.type=="ExpandNode"?30:100,xf=e=>e.data.type=="ExpandNode"?30:172,sR=(e,t,n)=>{const r=n==="LR";return pn.setGraph({rankdir:n}),e.forEach(o=>{pn.setNode(o.id,{width:xf(o),height:Ef(o)})}),t.forEach(o=>{pn.setEdge(o.source,o.target)}),Zm.layout(pn),e.forEach(o=>{const a=pn.node(o.id);return o.targetPosition=r?W.Left:W.Top,o.sourcePosition=r?W.Right:W.Bottom,o.position={x:a.x-xf(o)/2,y:a.y-Ef(o)/2},o}),{nodes:e,edges:t}},Tf=(e,t)=>lb(e,t,db).length==0;try{Jn.displayName="getProvenanceNode",Jn.__docgenInfo={description:"",displayName:"getProvenanceNode",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceUtils.tsx#getProvenanceNode"]={docgenInfo:Jn.__docgenInfo,name:"getProvenanceNode",path:"src/lib/containers/provenance/ProvenanceUtils.tsx#getProvenanceNode"})}catch{}try{ct.displayName="getNodeId",ct.__docgenInfo={description:"",displayName:"getNodeId",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceUtils.tsx#getNodeId"]={docgenInfo:ct.__docgenInfo,name:"getNodeId",path:"src/lib/containers/provenance/ProvenanceUtils.tsx#getNodeId"})}catch{}const lR="org.sagebionetworks.repo.model.provenance.UsedEntity",Of=e=>{const{entityHeader:t,rootEntityHeaders:n}=e;return(n==null?void 0:n.find(o=>t.id==o.id&&t.versionNumber==o.versionNumber))!==void 0},eg=(e,t)=>t.find(r=>r.id===ct(e))===void 0,cR=(e,t)=>{const n={type:Ae.ENTITY,data:e};return t.find(r=>r.id===ct(n))},dR=(e,t,n)=>n.find(o=>o.source===ct(e)&&o.target===ct(t))===void 0,Rr=e=>{const{newNodeProps:t,existingNodeProps:n,nodesCopy:r,edgesCopy:o}=e;eg(t,r)&&r.push(Jn(t)),dR(t,n,o)&&o.push(Jm(t,n))},uR=e=>{const{activity:t,entityHeader:n,nodesCopy:r,edgesCopy:o}=e,a={type:Ae.ACTIVITY,data:t},i={type:Ae.ENTITY,data:n};Rr({newNodeProps:a,existingNodeProps:i,nodesCopy:r,edgesCopy:o})},fR=e=>{const{entityHeader:t,itemCount:n=0,nodesCopy:r,edgesCopy:o}=e,a={type:Ae.EXPAND,data:{itemCount:n,entityHeader:t}},i={type:Ae.ENTITY,data:t};Rr({newNodeProps:a,existingNodeProps:i,nodesCopy:r,edgesCopy:o})},pR=e=>{const{ref:t,activity:n,nodesCopy:r,edgesCopy:o}=e,a={type:Ae.ENTITY_PLACEHOLDER,data:t},i={type:Ae.ACTIVITY,data:n};Rr({newNodeProps:a,existingNodeProps:i,nodesCopy:r,edgesCopy:o})},hR=e=>{const{entityHeader:t,nodesCopy:n,edgesCopy:r}=e,o={type:Ae.UNDEFINED,data:t},a={type:Ae.ENTITY,data:t};Rr({newNodeProps:o,existingNodeProps:a,nodesCopy:n,edgesCopy:r})},mR=e=>{const{usedURL:t,activity:n,nodesCopy:r,edgesCopy:o}=e,a={type:Ae.ACTIVITY,data:n},i={type:Ae.EXTERNAL,data:t};Rr({newNodeProps:i,existingNodeProps:a,nodesCopy:r,edgesCopy:o})},gR=e=>{const{entityHeader:t,activity:n,nodesCopy:r,edgesCopy:o}=e,a={type:Ae.ENTITY,data:t};if(eg(a,r)&&(r.push(Jn(a)),n)){const i={type:Ae.ACTIVITY,data:n};o.push(Jm(a,i))}},Bs=400,Fs=.85,yR=e=>{const{entityRefs:t,containerHeight:n="200px",initialNodes:r=[],initialEdges:o=[],onNodesChangedListener:a,onEdgesChangedListener:i}=e,{accessToken:s}=ie(),[l,d]=ge.useState(r),[c,f]=ge.useState(o),[p,g,h]=nT([]),[m,v,b]=rT([]),[E,S]=x.exports.useState(),y=ey(),{data:w,isSuccess:C}=wS(t,{useErrorBoundary:!0});if(C&&w.totalNumberOfResults==0){const q=t.map(A=>A.targetId).join(",");y(`Unable to load provenance for the given Synapse IDs: ${q}`)}const _=w==null?void 0:w.results,[T,O]=ge.useState(!1),R=rc(),k=x.exports.useCallback((q,A)=>{S(A)},[]),P=x.exports.useCallback(async q=>{var B;const{entityHeader:A,nodesCopy:M,edgesCopy:$,usedInActivity:z}=q;gR({entityHeader:A,activity:z,nodesCopy:M,edgesCopy:$});try{const U=await Oc(A.id,A.versionNumber,s);(!Of({entityHeader:A,rootEntityHeaders:_})||U.used&&U.used.length>=Bs)&&fR({entityHeader:A,itemCount:(B=U.used)==null?void 0:B.length,nodesCopy:M,edgesCopy:$})}catch(U){console.error(U),Of({entityHeader:A,rootEntityHeaders:_})&&hR({entityHeader:A,nodesCopy:M,edgesCopy:$})}},[s,_]);x.exports.useEffect(()=>{!T&&p.length>0&&setTimeout(()=>{if(_){const q=cR(_[0],p);if(q){const A=R.getZoom(),M=A>Fs?Fs:A;R==null||R.setCenter(q.position.x+150,q.position.y-30,{zoom:M,duration:0})}O(!0)}})},[T,p,R,_]);const V=x.exports.useCallback(async q=>{const{entityHeader:A,nodesCopy:M,edgesCopy:$}=q;try{const z=await Oc(A.id,A.versionNumber,s);if(uR({activity:z,entityHeader:A,nodesCopy:M,edgesCopy:$}),z.used&&z.used.length<Bs){const B=[];z.used.forEach(F=>{F.concreteType==lR?B.push(F.reference):mR({usedURL:F,activity:z,nodesCopy:M,edgesCopy:$})});const U=await Sl(B,s),{results:G}=U;B.filter(F=>G.find(Y=>Y.id==F.targetId)==null).forEach(F=>{pR({ref:F,activity:z,nodesCopy:M,edgesCopy:$})});const L=[];G.forEach(F=>{L.push(P({entityHeader:F,nodesCopy:M,edgesCopy:$,usedInActivity:z}))}),await Promise.allSettled(L)}}catch(z){console.error(z)}},[s,P]);x.exports.useEffect(()=>{if(_&&l.length==0){const q=[...l],A=[...c],M=[];_.forEach($=>{const z=P({entityHeader:$,nodesCopy:q,edgesCopy:A});M.push(z);const B=V({entityHeader:$,nodesCopy:q,edgesCopy:A});M.push(B)}),Promise.allSettled(M).finally(()=>{d(q),f(A)})}},[P,y,V,_,t,c,l]),x.exports.useEffect(()=>{const q=E==null?void 0:E.data;if(E&&(q==null?void 0:q.type)==Ae.EXPAND){const A=q.props;if(A.itemCount>Bs){en("Web visualization does not support expanding this many items at this time.","danger");return}else{q.label=u(jb,{size:30});const M=l.filter(B=>B.id!=E.id),$=tc([E],c)[0],z=c.filter(B=>B!=$);V({entityHeader:A.entityHeader,nodesCopy:M,edgesCopy:z}).finally(()=>{d(M),f(z)})}S(void 0)}},[E,l,c,V]),x.exports.useEffect(()=>{const{nodes:q,edges:A}=sR(l,c,"TB");Tf(q,p)||(g(q),a&&a(q)),Tf(A,m)||(v(A),i&&i(A))},[l,c,p,m,g,v,T,R,t,a,i]);const I=x.exports.useCallback(q=>{q&&typeof q.deltaX<"u"&&typeof q.deltaY<"u"&&window.scrollTo(window.scrollX+q.deltaX,window.scrollY+q.deltaY)},[]);return u("div",{className:"bootstrap-4-backport ProvenanceWidget",role:"graphics-doc",style:{width:"100%",height:n},children:u(dm,{defaultZoom:Fs,nodes:p,edges:m,onNodeClick:k,onNodesChange:h,onEdgesChange:b,attributionPosition:"bottom-right",onConnect:void 0,zoomOnScroll:!1,onPaneScroll:I,children:u(D0,{})})})},_o=e=>u(Xf,{children:u(um,{children:u(yR,{...e})})}),vR=_o;try{_o.displayName="ProvenanceGraph",_o.__docgenInfo={description:"",displayName:"ProvenanceGraph",props:{entityRefs:{defaultValue:null,description:"",name:"entityRefs",required:!0,type:{name:"ReferenceList"}},containerHeight:{defaultValue:null,description:"",name:"containerHeight",required:!1,type:{name:"string"}},initialNodes:{defaultValue:null,description:"",name:"initialNodes",required:!1,type:{name:"Node<any>[]"}},initialEdges:{defaultValue:null,description:"",name:"initialEdges",required:!1,type:{name:"Edge<any>[]"}},onNodesChangedListener:{defaultValue:null,description:"",name:"onNodesChangedListener",required:!1,type:{name:"((nodes: Node<any>[]) => void)"}},onEdgesChangedListener:{defaultValue:null,description:"",name:"onEdgesChangedListener",required:!1,type:{name:"((edges: Edge<any>[]) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceGraph.tsx#ProvenanceGraph"]={docgenInfo:_o.__docgenInfo,name:"ProvenanceGraph",path:"src/lib/containers/provenance/ProvenanceGraph.tsx#ProvenanceGraph"})}catch{}function Eo(e){const{entityList:t,displayHeightPx:n}=e,r=t.split(",").map(a=>{const i=a.split("/version/");return{targetId:i[0],targetVersionNumber:i.length>1?parseInt(i[1]):void 0}}),o=n?`${n}px`:void 0;return u(vR,{entityRefs:r,containerHeight:o})}try{Eo.displayName="MarkdownProvenanceGraph",Eo.__docgenInfo={description:"",displayName:"MarkdownProvenanceGraph",props:{entityList:{defaultValue:null,description:"",name:"entityList",required:!0,type:{name:"string"}},displayHeightPx:{defaultValue:null,description:"",name:"displayHeightPx",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownProvenanceGraph.tsx#MarkdownProvenanceGraph"]={docgenInfo:Eo.__docgenInfo,name:"MarkdownProvenanceGraph",path:"src/lib/containers/markdown/widget/MarkdownProvenanceGraph.tsx#MarkdownProvenanceGraph"})}catch{}class wn extends x.exports.Component{constructor(t){super(t),this.getEntity=this.getEntity.bind(this),this.getSynapseFiles=this.getSynapseFiles.bind(this),this.state={preSignedURL:""}}getEntity(){const{synapseId:t}=this.props;t&&xn(this.context.accessToken,t).then(n=>{const r=[{associateObjectId:t,associateObjectType:Re.FileEntity,fileHandleId:n.dataFileHandleId}];this.getSynapseFiles(r,n.dataFileHandleId)})}getSynapseFiles(t,n){An({includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:t},this.context.accessToken).then(o=>{const{preSignedURL:a}=o.requestedFiles.filter(i=>i.fileHandleId===n)[0];this.setState({preSignedURL:a})}).catch(o=>{console.error("Error on getting image ",o)})}componentDidMount(){if(!this.props.wikiId)this.getEntity();else{const{fileName:t,fileResults:n=[]}=this.props,{id:r}=n.filter(a=>a.fileName===t)[0],o=[{associateObjectId:this.props.wikiId,associateObjectType:Re.WikiAttachment,fileHandleId:r}];this.getSynapseFiles(o,r)}}render(){const{params:t}=this.props,{align:n="",altText:r="synapse image"}=t;let o="auto";t.scale&&t.scale!=="100"&&(o=`${Number(t.scale)}%`);const a=n.toLowerCase();let i="";a==="left"&&(i="floatLeft"),a==="right"&&(i="floatright"),a==="center"&&(i="align-center");let s={width:o,height:o};return this.state.preSignedURL?u(x.exports.Fragment,{children:u("img",{alt:r,className:"img-fluid  "+i,src:this.state.preSignedURL,style:s})}):null}}wn.contextType=_r;try{wn.displayName="SynapseImage",wn.__docgenInfo={description:"",displayName:"SynapseImage",props:{wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},fileResults:{defaultValue:null,description:"",name:"fileResults",required:!1,type:{name:"FileHandle[]"}},params:{defaultValue:null,description:"",name:"params",required:!0,type:{name:"{ align: string; scale: string; responsive: string; altText: string; }"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/SynapseImage.tsx#SynapseImage"]={docgenInfo:wn.__docgenInfo,name:"SynapseImage",path:"src/lib/containers/widgets/SynapseImage.tsx#SynapseImage"})}catch{}const Cn=ge.createContext(void 0),xo=({children:e,wikiContext:t})=>u(Cn.Provider,{value:t,children:e}),$s=Cn.Consumer;function tg(){const e=x.exports.useContext(Cn);return e!=null?e:{}}try{Cn.displayName="SynapseWikiContext",Cn.__docgenInfo={description:"This must be exported to use the context in class components.",displayName:"SynapseWikiContext",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContext"]={docgenInfo:Cn.__docgenInfo,name:"SynapseWikiContext",path:"src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContext"})}catch{}try{xo.displayName="SynapseWikiContextProvider",xo.__docgenInfo={description:"Provides context related to Synapse Wikis",displayName:"SynapseWikiContextProvider",props:{wikiContext:{defaultValue:null,description:"",name:"wikiContext",required:!1,type:{name:"SynapseWikiContextType"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextProvider"]={docgenInfo:xo.__docgenInfo,name:"SynapseWikiContextProvider",path:"src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextProvider"})}catch{}try{$s.displayName="SynapseWikiContextConsumer",$s.__docgenInfo={description:"",displayName:"SynapseWikiContextConsumer",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextConsumer"]={docgenInfo:$s.__docgenInfo,name:"SynapseWikiContextConsumer",path:"src/lib/containers/markdown/SynapseWikiContext.tsx#SynapseWikiContextConsumer"})}catch{}function To(e){const{wikiId:t,wikiPage:n,fileHandles:r}=tg();return e.fileName?r?u(wn,{params:e,fileName:e.fileName,wikiId:t||(n==null?void 0:n.id),fileResults:r.list}):u(H,{}):e.synapseId?u(wn,{params:e,synapseId:e.synapseId}):u(H,{})}try{To.displayName="MarkdownSynapseImage",To.__docgenInfo={description:"",displayName:"MarkdownSynapseImage",props:{fileName:{defaultValue:null,description:"",name:"fileName",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},synapseId:{defaultValue:null,description:"",name:"synapseId",required:!1,type:{name:"string"}},align:{defaultValue:null,description:"",name:"align",required:!0,type:{name:"string"}},scale:{defaultValue:null,description:"",name:"scale",required:!0,type:{name:"string"}},responsive:{defaultValue:null,description:"",name:"responsive",required:!0,type:{name:"string"}},altText:{defaultValue:null,description:"",name:"altText",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownSynapseImage.tsx#MarkdownSynapseImage"]={docgenInfo:To.__docgenInfo,name:"MarkdownSynapseImage",path:"src/lib/containers/markdown/widget/MarkdownSynapseImage.tsx#MarkdownSynapseImage"})}catch{}const bR=ub(fb);class er extends x.exports.Component{constructor(t){super(t),this.state={isLoaded:!1,queryData:{}},this.fetchPlotlyData=this.fetchPlotlyData.bind(this),this.showPlot=this.showPlot.bind(this)}componentDidMount(){this.fetchPlotlyData()}fetchPlotlyData(){const{query:t}=this.props.widgetparamsMapped,n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:Er,entityId:kn(t),query:{sql:t}};Qf(n,this.context.accessToken).then(r=>{this.setState({isLoaded:!0,queryData:r})}).catch(r=>{console.log("Error on full table query ",r)})}showPlot(){var g,h,m,v;if(!this.state.isLoaded)return;const{title:t,xtitle:n,ytitle:r,type:o,xaxistype:a,showlegend:i}=this.props.widgetparamsMapped,s=this.state,l=this.props.widgetparamsMapped.horizontal.toLowerCase(),d={showlegend:i,title:t};n&&(d.xaxis={title:n}),a&&(d.xaxis={...d.xaxis,xaxistype:a.toLowerCase()}),r&&(d.yaxis={title:r});const c=[],f=l?"v":"h",p=(h=(g=s.queryData.queryResult)==null?void 0:g.queryResults.headers)!=null?h:[];for(let b=0;b<p.length-1;b+=1)c[b]={orientation:f,name:p[b+1].name,type:o.toLowerCase(),x:[],y:[]};for(const b of(v=(m=s.queryData.queryResult)==null?void 0:m.queryResults.rows)!=null?v:[])for(let E=1;E<b.values.length;E+=1){const S=b.values;c[E-1].x.push(S[0]),c[E-1].y.push(S[E])}return u(bR,{layout:d,data:c})}render(){return this.state.isLoaded?this.showPlot():null}}er.contextType=_r;try{er.displayName="SynapsePlot",er.__docgenInfo={description:"",displayName:"SynapsePlot",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},widgetparamsMapped:{defaultValue:null,description:"",name:"widgetparamsMapped",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/SynapsePlot.tsx#SynapsePlot"]={docgenInfo:er.__docgenInfo,name:"SynapsePlot",path:"src/lib/containers/widgets/SynapsePlot.tsx#SynapsePlot"})}catch{}function Oo(e){const{ownerId:t,wikiId:n,wikiPage:r}=tg();return u(er,{ownerId:t,wikiId:n||(r==null?void 0:r.id),widgetparamsMapped:e})}try{Oo.displayName="MarkdownSynapsePlot",Oo.__docgenInfo={description:"",displayName:"MarkdownSynapsePlot",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownSynapsePlot.tsx#MarkdownSynapsePlot"]={docgenInfo:Oo.__docgenInfo,name:"MarkdownSynapsePlot",path:"src/lib/containers/markdown/widget/MarkdownSynapsePlot.tsx#MarkdownSynapsePlot"})}catch{}const SR=200,If="ESTIMATED_DOWNLOAD_SPEED_EXPIRE_TIME",Nf="ESTIMATED_DOWNLOAD_SPEED",wR="syn12600511",CR=e=>new Promise((t,n)=>{const r=localStorage.getItem(If),o=localStorage.getItem(Nf);if(r&&o&&new Date().getTime()<Number(r)){t(Number(o));return}xn(e,wR).then(a=>{const i=a,s=[{associateObjectId:i.id,associateObjectType:Re.FileEntity,fileHandleId:i.dataFileHandleId}];An({includeFileHandles:!0,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:s},e).then(d=>{const c=d.requestedFiles[0].preSignedURL,f=d.requestedFiles[0].fileHandle,p=new Date().getTime();return ty(f,c).then(()=>{const g=f.contentSize/((new Date().getTime()-p-SR)/1e3),h=new Date().getTime();localStorage.setItem(If,(h+1e3*60*5).toString()),localStorage.setItem(Nf,g.toString()),t(g)})})}).catch(a=>n(a))});var ng={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ya,function(){var n,r,o=1e3,a=6e4,i=36e5,s=864e5,l=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=31536e6,c=2592e6,f=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,p={years:d,months:c,days:s,hours:i,minutes:a,seconds:o,milliseconds:1,weeks:6048e5},g=function(w){return w instanceof y},h=function(w,C,_){return new y(w,_,C.$l)},m=function(w){return r.p(w)+"s"},v=function(w){return w<0},b=function(w){return v(w)?Math.ceil(w):Math.floor(w)},E=function(w){return Math.abs(w)},S=function(w,C){return w?v(w)?{negative:!0,format:""+E(w)+C}:{negative:!1,format:""+w+C}:{negative:!1,format:""}},y=function(){function w(_,T,O){var R=this;if(this.$d={},this.$l=O,_===void 0&&(this.$ms=0,this.parseFromMilliseconds()),T)return h(_*p[m(T)],this);if(typeof _=="number")return this.$ms=_,this.parseFromMilliseconds(),this;if(typeof _=="object")return Object.keys(_).forEach(function(V){R.$d[m(V)]=_[V]}),this.calMilliseconds(),this;if(typeof _=="string"){var k=_.match(f);if(k){var P=k.slice(2).map(function(V){return V!=null?Number(V):0});return this.$d.years=P[0],this.$d.months=P[1],this.$d.weeks=P[2],this.$d.days=P[3],this.$d.hours=P[4],this.$d.minutes=P[5],this.$d.seconds=P[6],this.calMilliseconds(),this}}return this}var C=w.prototype;return C.calMilliseconds=function(){var _=this;this.$ms=Object.keys(this.$d).reduce(function(T,O){return T+(_.$d[O]||0)*p[O]},0)},C.parseFromMilliseconds=function(){var _=this.$ms;this.$d.years=b(_/d),_%=d,this.$d.months=b(_/c),_%=c,this.$d.days=b(_/s),_%=s,this.$d.hours=b(_/i),_%=i,this.$d.minutes=b(_/a),_%=a,this.$d.seconds=b(_/o),_%=o,this.$d.milliseconds=_},C.toISOString=function(){var _=S(this.$d.years,"Y"),T=S(this.$d.months,"M"),O=+this.$d.days||0;this.$d.weeks&&(O+=7*this.$d.weeks);var R=S(O,"D"),k=S(this.$d.hours,"H"),P=S(this.$d.minutes,"M"),V=this.$d.seconds||0;this.$d.milliseconds&&(V+=this.$d.milliseconds/1e3);var I=S(V,"S"),q=_.negative||T.negative||R.negative||k.negative||P.negative||I.negative,A=k.format||P.format||I.format?"T":"",M=(q?"-":"")+"P"+_.format+T.format+R.format+A+k.format+P.format+I.format;return M==="P"||M==="-P"?"P0D":M},C.toJSON=function(){return this.toISOString()},C.format=function(_){var T=_||"YYYY-MM-DDTHH:mm:ss",O={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return T.replace(l,function(R,k){return k||String(O[R])})},C.as=function(_){return this.$ms/p[m(_)]},C.get=function(_){var T=this.$ms,O=m(_);return O==="milliseconds"?T%=1e3:T=O==="weeks"?b(T/p[O]):this.$d[O],T===0?0:T},C.add=function(_,T,O){var R;return R=T?_*p[m(T)]:g(_)?_.$ms:h(_,this).$ms,h(this.$ms+R*(O?-1:1),this)},C.subtract=function(_,T){return this.add(_,T,!0)},C.locale=function(_){var T=this.clone();return T.$l=_,T},C.clone=function(){return h(this.$ms,this)},C.humanize=function(_){return n().add(this.$ms,"ms").locale(this.$l).fromNow(!_)},C.milliseconds=function(){return this.get("milliseconds")},C.asMilliseconds=function(){return this.as("milliseconds")},C.seconds=function(){return this.get("seconds")},C.asSeconds=function(){return this.as("seconds")},C.minutes=function(){return this.get("minutes")},C.asMinutes=function(){return this.as("minutes")},C.hours=function(){return this.get("hours")},C.asHours=function(){return this.as("hours")},C.days=function(){return this.get("days")},C.asDays=function(){return this.as("days")},C.weeks=function(){return this.get("weeks")},C.asWeeks=function(){return this.as("weeks")},C.months=function(){return this.get("months")},C.asMonths=function(){return this.as("months")},C.years=function(){return this.get("years")},C.asYears=function(){return this.as("years")},w}();return function(w,C,_){n=_,r=_().$utils(),_.duration=function(R,k){var P=_.locale();return h(R,{$l:P},k)},_.isDuration=g;var T=C.prototype.add,O=C.prototype.subtract;C.prototype.add=function(R,k){return g(R)&&(R=R.asMilliseconds()),T.bind(this)(R,k)},C.prototype.subtract=function(R,k){return g(R)&&(R=R.asMilliseconds()),O.bind(this)(R,k)}}})})(ng);const _R=ng.exports;Bt.extend(_R);Bt.extend(hb);function Io(e){const{numFiles:t,numBytes:n}=e,{accessToken:r}=ie(),[o,a]=x.exports.useState({isLoading:!!n,downloadSpeed:0}),{isLoading:i,downloadSpeed:s}=o;x.exports.useEffect(()=>{r&&CR(r).then(h=>{a({isLoading:!1,downloadSpeed:h})})},[r]);const l=i||s===0||!n?0:n/s,d=l===0,c=d?"":Bt.duration({seconds:l}).humanize(),f=t===0,p=f?"SRC-inactive":"SRC-primary-text-color",g=d?"SRC-inactive":"SRC-primary-text-color";return N("span",{className:"download-details-container",children:[N("span",{children:[u("span",{className:p,children:u(pe,{icon:"file"})}),f?u(oi,{width:50}):N(H,{children:[" ",t,"\xA0files "]})]}),n&&u(Ke,{title:"This is the total size of all files. Zipped package(s) will likely be smaller.",enterNextDelay:_a,placement:"top",children:N("span",{"data-testid":"numBytesUI",children:[u("span",{className:g,children:u(pe,{icon:"database"})}),d?u(oi,{width:50}):Zf(n)]})}),n&&u(Ke,{title:"This is an estimate of how long package download will take.",enterNextDelay:_a,placement:"top",children:N("span",{"data-testid":"downloadTimeEstimateUI",children:[u("span",{className:g,children:u(pe,{icon:"clock"})}),i&&t>0?u(oi,{width:50}):c]})})]})}try{Io.displayName="DownloadDetails",Io.__docgenInfo={description:`Displays download information including number of files, size of download, and time to download.
Prefer to use {@link download_list_v2 /DownloadDetails} instead, particularly when you have information about file packaging in/eligibility`,displayName:"DownloadDetails",props:{numFiles:{defaultValue:null,description:"",name:"numFiles",required:!0,type:{name:"number"}},numBytes:{defaultValue:null,description:"",name:"numBytes",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/download_list/DownloadDetails.tsx#DownloadDetails"]={docgenInfo:Io.__docgenInfo,name:"DownloadDetails",path:"src/lib/containers/download_list/DownloadDetails.tsx#DownloadDetails"})}catch{}async function ER(e,t,n,r,o){try{const a={query:n==null?void 0:n.query,concreteType:"org.sagebionetworks.repo.model.download.AddToDownloadListRequest",parentId:r};return await ry(a,e),en("File(s) were successfully added to your Download Cart.","success",{primaryButtonConfig:{text:"View Download Cart",onClick:o}}),t(),[0,""]}catch(a){return en("danger",void 0,a.reason),t(),[0,""]}}const tr={[2]:{className:"alert-info",infoText:"Would you like to add all files to the download cart?",closeText:"Cancel"},[3]:{className:"alert-info",infoText:N(H,{children:["Note: Files that you add will be mixed in with the files already in your download cart.",u("br",{}),"If you don\u2019t want to mix these files, clear your download cart before continuing."]}),closeText:"Cancel"},[1]:{className:"alert-info",infoText:"Adding Files To List",closeText:"Cancel"},[0]:{className:"alert-info",infoText:"Calculating File Size",closeText:"Cancel"},[4]:{className:"alert-danger",closeText:"Close",infoText:N(H,{children:["Please ",u(ny,{style:{color:"#337ab7"}})," to add files to your download cart."]})}},xR=e=>{switch(e.status){case 0:case 1:return N("div",{children:[u("span",{className:"spinner white"}),u("span",{className:"spinner__text",children:tr[e.status].infoText})]});case 4:return u(H,{children:tr[e.status].infoText});case 2:case 3:return N(H,{children:[u(Io,{numFiles:e.fileCount,numBytes:e.fileSize}),u("span",{className:"download-confirmation-infoText",children:tr[e.status].infoText})]});default:return u(H,{})}},No=({getLastQueryRequest:e,folderId:t,fnClose:n,setTopLevelControlsState:r,topLevelControlsState:o})=>{const{accessToken:a,downloadCartPageUrl:i}=ie(),{showDownloadConfirmation:s=!0}=o!=null?o:{},[l,d]=x.exports.useState(a?0:4),[c,f]=x.exports.useState(0),[p,g]=x.exports.useState(),{data:h,refetch:m}=mb(),v=e(),[b,E]=x.exports.useState(!1),S=x.exports.useCallback((P,V,I)=>{if(a&&I){const q=I.totalNumberOfFiles>0,A=P!=null?P:0;d(q?3:2),f(A),g(V)}},[a]),{data:y,isSuccess:w}=SS({parentId:t,includeSumFileSizes:!0,includeTotalChildCount:!0,includeTypes:[Ws.FILE]});qc(()=>{w&&y&&h&&S(y.totalChildCount,y.sumFileSizesBytes,h)},[S,t,w,y,h]);const C=xr|El,_={...v,partMask:C},{data:T}=mp(_);qc(()=>{var P,V;if(T&&h){const I=(P=T.sumFileSizes)==null?void 0:P.greaterThan;S(T.queryCount,I||(V=T.sumFileSizes)==null?void 0:V.sumFileSizesBytes,h)}},[S,v,T,h]);const O=n?()=>n():()=>{r&&r(P=>({...P,showDownloadConfirmation:!1}))},R=async()=>{if(!a)d(4);else{d(1);const I=(await ER(a,O,v,t,()=>E(!0)))[0];d(I),m()}};b&&(window.location.href=i);const k=o==null?void 0:o.showFacetFilter;return u(H,{children:N(nn,{dismissible:!1,show:!0,variant:"info",transition:!1,className:`download-confirmation ${tr[l].className} ${s?"":"hidden"}
          ${k?Ln:qn}
        `,children:[u(xR,{status:l,fileCount:c,fileSize:p}),N("div",{className:"download-confirmation-action",children:[l!==1&&u("button",{className:"btn btn-link",onClick:O,children:tr[l].closeText}),(l===2||l===3)&&u("button",{type:"button",className:"btn btn-primary",onClick:R,children:"Add"})]})]})})};try{No.displayName="DownloadConfirmation",No.__docgenInfo={description:"",displayName:"DownloadConfirmation",props:{fnClose:{defaultValue:null,description:"",name:"fnClose",required:!1,type:{name:"(() => void)"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},folderId:{defaultValue:null,description:"",name:"folderId",required:!1,type:{name:"string"}},topLevelControlsState:{defaultValue:null,description:"",name:"topLevelControlsState",required:!1,type:{name:"TopLevelControlsState"}},setTopLevelControlsState:{defaultValue:null,description:"",name:"setTopLevelControlsState",required:!1,type:{name:"Dispatch<SetStateAction<TopLevelControlsState>>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/download_list/DownloadConfirmation.tsx#DownloadConfirmation"]={docgenInfo:No.__docgenInfo,name:"DownloadConfirmation",path:"src/lib/containers/download_list/DownloadConfirmation.tsx#DownloadConfirmation"})}catch{}const Hs=3,nr=({helpMessage:e="This search bar is powered by MySQL Full Text Search.",helpUrl:t})=>{const{executeQueryRequest:n,getLastQueryRequest:r}=Tt(),{topLevelControlsState:{showSearchBar:o,showFacetFilter:a}}=Ct(),[i,s]=x.exports.useState(""),l=x.exports.useRef(null),d=f=>{var p;if(f.preventDefault(),i.trim().length<Hs)(p=l.current)==null||p.setCustomValidity(`Search term must have a minimum of ${Hs} characters`);else{const g=r(),{additionalFilters:h=[]}=g.query,m={concreteType:"org.sagebionetworks.repo.model.table.TextMatchesQueryFilter",searchExpression:i};if(h.find(b=>b.concreteType==m.concreteType&&b.searchExpression==m.searchExpression))return;h.push(m),g.query.additionalFilters=h,n(g),s("")}},c=f=>{var p;(p=l.current)==null||p.setCustomValidity(""),s(f.currentTarget.value)};return u("div",{className:`QueryWrapperSearchInput ${a?Ln:qn}`,children:u(Cl,{in:o,timeout:{enter:300,exit:300},children:N("div",{className:"QueryWrapperSearchInput__helppopoverwrapper",children:[N("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:d,children:[u("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:u(pe,{icon:"search"})}),u("input",{ref:l,minLength:Hs,onChange:c,placeholder:"Enter Search Terms",value:i,type:"text"}),i.length>0&&u("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{s("")},children:u(pe,{icon:"close"})})]}),u("div",{className:"QueryWrapperSearchInput__helppopover",children:u(Dt,{markdownText:e,helpUrl:t,placement:"left"})})]})})})};try{nr.displayName="FullTextSearch",nr.__docgenInfo={description:"",displayName:"FullTextSearch",props:{helpMessage:{defaultValue:{value:"This search bar is powered by MySQL Full Text Search."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/FullTextSearch.tsx#FullTextSearch"]={docgenInfo:nr.__docgenInfo,name:"FullTextSearch",path:"src/lib/containers/FullTextSearch.tsx#FullTextSearch"})}catch{}const gl="First line is the columns names.",yl="Include row metadata (Row Id and Row Version).",Fa="Comma Separated Values (CSV)",Rf="Tab Separated Values (TSV)",TR={title:"Download query results",type:"object",properties:{"File Type":{type:"string",oneOf:[{const:Fa,title:Fa},{const:Rf,title:Rf}]},Contents:{type:"array",title:"Contents",items:{type:"string",enum:[gl,yl]},uniqueItems:!0}}},OR={"File Type":{"ui:widget":"radio"},Contents:{"ui:widget":"checkboxes"}},IR={title:"Download query results",description:"File is ready for download. Select the download button to download the file.",type:"object"},NR={},RR=[TR,IR],AR=[OR,NR];class Xt extends x.exports.Component{constructor(t){super(t),this.handleSubmit=n=>{this.state.step===0?this.handleDownloadSetup(n):this.onDownload()},this.handleDownloadSetup=n=>{this.setState({isLoading:!0});const{formData:r}=n,o=r["File Type"],a=r.Contents,{queryBundleRequest:i,getLastQueryRequest:s}=this.props,l=o===Fa?",":"	",d=a.includes(gl),c=a.includes(yl),f=i!=null?i:s(),p=f.query.sql,g={sql:p,entityId:kn(p),selectedFacets:f.query.selectedFacets,concreteType:"org.sagebionetworks.repo.model.table.DownloadFromTableRequest",writeHeader:d,includeRowIdAndRowVersion:c,csvTableDescriptor:{separator:l},additionalFilters:f.query.additionalFilters};oy(g,this.context.accessToken).then(h=>{this.setState({isLoading:!1,step:1,data:h})}).catch(h=>{console.log("Error getDownloadFromTableRequest: ",h)})},this.onDownload=()=>{const{data:n}=this.state;ay(n.resultsFileHandleId,this.context.accessToken).then(r=>{window.location.href=r,this.props.onClose()})},this.handleChange=n=>{const{formData:r}=n;this.setState({formData:r})},this.state={isLoading:!1,step:0,formData:{"File Type":Fa,Contents:[gl,yl]}}}render(){const t={position:"absolute",top:10,right:10,zIndex:10},n={height:50,width:50,backgroundSize:50};return u(ae,{animation:!1,show:!0,onHide:this.props.onClose,backdrop:"static",children:N(ae.Body,{children:[u("button",{style:t,onClick:this.props.onClose,children:u(pe,{icon:"close"})}),N(Kv,{schema:RR[this.state.step],uiSchema:AR[this.state.step],onChange:this.handleChange,formData:this.state.formData,onSubmit:this.handleSubmit,children:[this.state.isLoading&&u("div",{className:"SRC-centerAndJustifyContent",children:N("div",{className:"SRC-center-text",children:[u("p",{children:" Creating the File "}),u("div",{style:n,className:"spinner"}),u("p",{children:" Loading... "})]})}),N("div",{style:{textAlign:"right"},children:[u(_e,{variant:"default",onClick:this.props.onClose,style:{marginRight:"5px"},children:"Cancel"}),u(_e,{type:"submit",variant:"primary",children:this.state.step===0?"Next":"Download"})]})]})]})})}}Xt.contextType=_r;try{Xt.displayName="ModalDownload",Xt.__docgenInfo={description:"",displayName:"ModalDownload",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(...args: any[]) => void"}},includeEntityEtag:{defaultValue:null,description:"",name:"includeEntityEtag",required:!1,type:{name:"boolean"}},queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!1,type:{name:"QueryBundleRequest"}},getLastQueryRequest:{defaultValue:null,description:"",name:"getLastQueryRequest",required:!1,type:{name:"(() => QueryBundleRequest)"}},offset:{defaultValue:null,description:"",name:"offset",required:!1,type:{name:"number"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},sort:{defaultValue:null,description:"",name:"sort",required:!1,type:{name:"SortItem[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/ModalDownload.tsx#ModalDownload"]={docgenInfo:Xt.__docgenInfo,name:"ModalDownload",path:"src/lib/containers/ModalDownload.tsx#ModalDownload"})}catch{}function rr(e){const{initQueryRequest:t,onQueryChange:n,onQueryResultBundleChange:r,lockedColumn:o,componentIndex:a,shouldDeepLink:i}=e,[s,l]=x.exports.useState(void 0),{entityId:d,versionNumber:c,getInitQueryRequest:f,getLastQueryRequest:p,setQuery:g,resetQuery:h,removeQueryFilter:m,removeValueFromQueryFilter:v,removeSelectedFacet:b,removeValueFromSelectedFacet:E}=Hy({initQueryRequest:t,componentIndex:a,shouldDeepLink:i,onQueryChange:n}),S=x.exports.useMemo(()=>p(),[p]),{data:y,hasNextPage:w,fetchPreviousPage:C,fetchNextPage:_,isFetchingNextPage:T,isLoading:O,error:R,isPreviousData:k}=Zy(S,{keepPreviousData:!0},l),P=O||k,{data:V}=kl(d,c),[I,q]=x.exports.useState(0);async function A(){if(!w)throw new Error("Called appendNextPageToResults when there is no next page");await _(),q("ALL")}async function M(){if(!w)throw new Error("Called goToNextPage when there is no next page");if(I==="ALL")throw new Error("Cannot go to next page when all pages are displayed");await _(),q(I+1)}const $=I!=="ALL"&&I>0;async function z(){if(I==="ALL")throw new Error("Cannot go to previous page when all pages are displayed");if(!$)throw new Error("Called goToNextPage when there is no next page");await C(),q(I-1)}const B=x.exports.useMemo(()=>{var Q,X,j,ce;if(!(y==null||y.pages.length===0||y.pages[0].responseBody==null))return I==="ALL"?{...y==null?void 0:y.pages[0].responseBody,queryResult:{...(Q=y==null?void 0:y.pages[0].responseBody)==null?void 0:Q.queryResult,queryResults:{...(j=(X=y==null?void 0:y.pages[0].responseBody)==null?void 0:X.queryResult)==null?void 0:j.queryResults,rows:(ce=y.pages.flatMap(ye=>{var be;return(be=ye.responseBody.queryResult)==null?void 0:be.queryResults.rows}))!=null?ce:[]}}}:y==null?void 0:y.pages[I].responseBody},[I,y]);x.exports.useEffect(()=>{B&&r&&r(JSON.stringify(B))},[B,r]);const U=B?Jy(B.facets,B.selectColumns):!0,G=x.exports.useMemo(()=>ev(B,o),[B,o]),D=x.exports.useMemo(()=>{const Q=p();return tv(Q.query,o)},[p,o]),L=x.exports.useCallback(Q=>{var X,j;return(j=(X=B==null?void 0:B.columnModels)==null?void 0:X.find(ce=>ce.name===Q))!=null?j:null},[B==null?void 0:B.columnModels]),F={data:G,isLoadingNewPage:T,hasNextPage:!!w,hasPreviousPage:$,isLoadingNewBundle:P,getLastQueryRequest:p,getInitQueryRequest:f,error:R,entity:V,executeQueryRequest:g,isFacetsAvailable:U,asyncJobStatus:s,appendNextPageToResults:A,goToNextPage:M,goToPreviousPage:z,hasResettableFilters:D,resetQuery:h,removeQueryFilter:m,removeValueFromQueryFilter:v,removeSelectedFacet:b,removeValueFromSelectedFacet:E,lockedColumn:o,getColumnModel:L},{children:Y}=e;return u(zy,{queryContext:F,children:u("div",{className:`SRC-wrapper ${P||T?"SRC-logo-cursor":""} ${U?"has-facets":""}`,children:Y})})}try{rr.displayName="InfiniteQueryWrapper",rr.__docgenInfo={description:"Component that manages the state of a Synapse table query. Data can be accessed via QueryContext using\neither `useQueryContext` or `QueryContextConsumer`.",displayName:"InfiniteQueryWrapper",props:{initQueryRequest:{defaultValue:null,description:"",name:"initQueryRequest",required:!0,type:{name:"QueryBundleRequest"}},componentIndex:{defaultValue:null,description:"",name:"componentIndex",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/InfiniteQueryWrapper.tsx#InfiniteQueryWrapper"]={docgenInfo:rr.__docgenInfo,name:"InfiniteQueryWrapper",path:"src/lib/containers/InfiniteQueryWrapper.tsx#InfiniteQueryWrapper"})}catch{}class or extends ge.Component{constructor(t){var n;super(t),this.handleClickOutsideForm=r=>{var o,a;!((o=this.searchFormRef.current)!=null&&o.contains(r==null?void 0:r.target))&&!((a=this.radioFormRef.current)!=null&&a.contains(r==null?void 0:r.target))&&(this.state.didUpdateRanLast?this.setState({didUpdateRanLast:!1}):this.setState({show:!1}))},this.search=r=>{var g,h,m,v,b,E,S;r.preventDefault();const{searchText:o}=this.state;let{columnName:a}=this.state;const{searchable:i,lockedColumn:s}=this.props;if(a==="")if(i)a=i.filter(y=>y!==(s==null?void 0:s.columnName))[0];else{const y=(m=(h=(g=this.props.queryContext)==null?void 0:g.data)==null?void 0:h.columnModels)==null?void 0:m.filter(w=>w.name!==(s==null?void 0:s.columnName)).filter(w=>this.isSupportedColumn(w));a=(v=y==null?void 0:y[0].name)!=null?v:""}this.setState({show:!1});const{executeQueryRequest:l,getLastQueryRequest:d}=this.props.queryContext,c=d(),{additionalFilters:f=[]}=c.query,p=f.findIndex(y=>!!(vb(y)||bb(y)&&y.columnName===a));if(p===-1){const y=(S=(E=(b=this.props.queryContext)==null?void 0:b.data)==null?void 0:E.columnModels)==null?void 0:S.filter(w=>w.name===a)[0];if(y!=null&&y.columnType.endsWith("_LIST")){const w={columnName:a,function:Sb.HAS_LIKE,values:[`%${o}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnMultiValueFunctionQueryFilter"};f.push(w)}else{const w={columnName:a,operator:wb.LIKE,values:[`%${o}%`],concreteType:"org.sagebionetworks.repo.model.table.ColumnSingleValueQueryFilter"};f.push(w)}}else f[p].values.push(`%${o}%`);c.query.additionalFilters=f,l(c)},this.handleChange=r=>{this.setState({searchText:r.currentTarget.value})},this.isSupportedColumn=r=>{switch(r==null?void 0:r.columnType){case re.FILEHANDLEID:case re.ENTITYID:case re.DATE:case re.DATE_LIST:case re.USERID:return!1;default:return!0}},this.isSupportedColumnAndInProps=r=>{if(this.isSupportedColumn(r)){const{searchable:o}=this.props;return o==null?void 0:o.some(a=>a===(r==null?void 0:r.name))}return!1},this.state={show:!1,didUpdateRanLast:!1,searchText:"",columnName:(n=this.props.defaultColumn)!=null?n:""},this.searchFormRef=ge.createRef(),this.radioFormRef=ge.createRef()}componentDidMount(){document.addEventListener("click",this.handleClickOutsideForm)}componentDidUpdate(t){var n,r,o,a,i;!((n=t.queryVisualizationContext)!=null&&n.topLevelControlsState.showSearchBar)&&((r=this.props.queryVisualizationContext)==null?void 0:r.topLevelControlsState.showSearchBar)&&(this.setState({show:!0,didUpdateRanLast:!0}),(i=(a=(o=this.searchFormRef)==null?void 0:o.current)==null?void 0:a.querySelector("input"))==null||i.focus())}componentWillUnmount(){document.removeEventListener("click",this.handleClickOutsideForm)}render(){var f;const{searchable:t,lockedColumn:n,queryContext:{data:r},queryVisualizationContext:{topLevelControlsState:o,getColumnDisplayName:a}}=this.props,{searchText:i,show:s,columnName:l}=this.state;let d=[];t?d=t.map(p=>{var g;return(g=r==null?void 0:r.columnModels)==null?void 0:g.find(h=>h.name===p)}).filter(this.isSupportedColumnAndInProps).map(p=>p.name):r!=null&&r.columnModels&&(d=(f=r.columnModels)==null?void 0:f.filter(this.isSupportedColumn).map(p=>p.name)),d.length&&(n==null?void 0:n.columnName)&&(d=d.filter(p=>p!==(n==null?void 0:n.columnName)));const c=o==null?void 0:o.showFacetFilter;return N("div",{className:`QueryWrapperSearchInput ${c?Ln:qn}`,children:[u(Cl,{in:o==null?void 0:o.showSearchBar,children:N("form",{className:"QueryWrapperSearchInput__searchbar",onSubmit:this.search,onClick:()=>{this.setState({show:!0})},ref:this.searchFormRef,children:[u("span",{className:"QueryWrapperSearchInput__searchbar__searchicon",children:u(pe,{icon:"search"})}),u("input",{onChange:this.handleChange,onClick:()=>{this.setState({show:!0})},placeholder:"Enter Search Terms",value:i,type:"text"}),this.state.searchText.length>0&&u("button",{className:"QueryWrapperSearchInput__searchbar__clearbutton",type:"button",onClick:()=>{this.setState({searchText:""})},children:u(pe,{icon:"close"})})]})}),u("div",{className:"QueryWrapperSearchInput__dropdown_pos",children:u(Np,{in:s,classNames:"QueryWrapperSearchInput__animate_dropdown",timeout:{enter:0,exit:300},children:N("form",{ref:this.radioFormRef,className:"QueryWrapperSearchInput__column-select QueryWrapperSearchInput__animate_height",children:[u("p",{className:"deemphasized",children:u("i",{children:" Search In Field: "})}),d.map((p,g)=>{const h=a(p);return u("div",{className:"radio",children:u("label",{children:N("span",{children:[u("input",{id:p,type:"radio",value:p,checked:l===""&&g===0||l===p,onClick:()=>{var v,b,E;(E=(b=(v=this.searchFormRef)==null?void 0:v.current)==null?void 0:b.querySelector("input"))==null||E.focus(),this.setState({columnName:p})}}),u("span",{children:h})]})})},`search-field-${p}-${g}`)})]})})})]})}}try{or.displayName="Search",or.__docgenInfo={description:"",displayName:"Search",props:{queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},isQueryWrapperMenuChild:{defaultValue:null,description:"",name:"isQueryWrapperMenuChild",required:!1,type:{name:"boolean"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},searchable:{defaultValue:null,description:"",name:"searchable",required:!1,type:{name:"SearchableColumnsV2"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},fullTextSearchHelpURL:{defaultValue:null,description:"",name:"fullTextSearchHelpURL",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/SearchV2.tsx#Search"]={docgenInfo:or.__docgenInfo,name:"Search",path:"src/lib/containers/SearchV2.tsx#Search"})}catch{}const kR="The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients.",LR="https://help.synapse.org/docs/Querying-Tables,-Views,-and-Datasets.2667642897.html#QueryingTables,Views,andDatasets-UsingAdvancedSearchQueries",ar=({helpMessage:e=kR,helpUrl:t=LR})=>{const{executeQueryRequest:n,getLastQueryRequest:r}=Tt(),{topLevelControlsState:{showSqlEditor:o,showFacetFilter:a}}=Ct(),[i,s]=x.exports.useState(""),l=x.exports.useRef(null);x.exports.useEffect(()=>{var f;if(o){const p=r().query.sql;s(p),(f=l.current)==null||f.focus()}},[o,r]);const d=f=>{f.preventDefault();const p=r();p.query.sql=i,p.query.offset=0,p.query.additionalFilters=[],p.query.selectedFacets=[],n(p)},c=f=>{var p;(p=l.current)==null||p.setCustomValidity(""),s(f.currentTarget.value)};return u("div",{className:`QueryWrapperSqlEditorInput ${a?Ln:qn}`,children:u(Cl,{in:o,timeout:{enter:300,exit:300},children:N("div",{className:"QueryWrapperSqlEditorInput__helppopoverwrapper",children:[N("form",{className:"QueryWrapperSqlEditorInput__searchbar",onSubmit:d,children:[u(mv,{className:"QueryWrapperSqlEditorInput__searchbar__searchicon"}),u("input",{ref:l,onChange:c,placeholder:"Enter Query",value:i,type:"text"})]}),u("div",{className:"QueryWrapperSqlEditorInput__helppopover",children:u(Dt,{markdownText:e,helpUrl:t,placement:"right"})})]})})})};try{ar.displayName="SqlEditor",ar.__docgenInfo={description:"",displayName:"SqlEditor",props:{helpMessage:{defaultValue:{value:"The data within tables and views can be retrieved by using a SQL-like query language either from the web interface or from the programmatic clients."},description:"",name:"helpMessage",required:!1,type:{name:"string"}},helpUrl:{defaultValue:{value:"https://help.synapse.org/docs/Querying-Tables,-Views,-and-Datasets.2667642897.html#QueryingTables,Views,andDatasets-UsingAdvancedSearchQueries"},description:"",name:"helpUrl",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/SqlEditor.tsx#SqlEditor"]={docgenInfo:ar.__docgenInfo,name:"SqlEditor",path:"src/lib/containers/SqlEditor.tsx#SqlEditor"})}catch{}const Ro=e=>N(ae,{animation:!1,show:!0,onHide:()=>e.onHide(),backdrop:"static",children:[u(ae.Header,{closeButton:!0,children:u("span",{style:{fontWeight:"bold",color:"#515359",fontSize:"1.5em"},children:"Sign In Required"})}),N(gb,{children:[u("p",{children:"Anyone can browse public content on the Synapse website, but in order to download and create content you will need to register for an account using an email address."}),N("p",{children:["To find out more see\xA0",u("a",{href:"https://help.synapse.org/docs/Managing-your-account.2055405596.html",target:"_blank",rel:"noopener noreferrer",children:"User Accounts"}),u("span",{children:" and "}),u("a",{href:"https://help.synapse.org/docs/Synapse-Governance.2004255211.html",rel:"noopener noreferrer",target:"_blank",children:"Governance Overview"}),"."]})]}),N(yb,{children:[u(_e,{variant:"secondary",onClick:()=>e.onHide(),children:"CANCEL"}),u(_e,{className:"SRC-SIGN-IN-CLASS",variant:"primary",onClick:()=>e.onHide(),children:"Sign in"})]})]});try{Ro.displayName="DownloadLoginModal",Ro.__docgenInfo={description:"",displayName:"DownloadLoginModal",props:{showModal:{defaultValue:null,description:"",name:"showModal",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/DownloadLoginModal.tsx#DownloadLoginModal"]={docgenInfo:Ro.__docgenInfo,name:"DownloadLoginModal",path:"src/lib/containers/table/table-top/DownloadLoginModal.tsx#DownloadLoginModal"})}catch{}const Ao=({show:e,title:t,onClose:n,pythonNotes:r,pythonCode:o,rNotes:a,rCode:i,cliNotes:s,cliCode:l,helpMarkdown:d,helpUrl:c})=>{let f;l?f="Command Line":o?f="Python":f="R";const[p,g]=x.exports.useState(f),h=N("p",{children:["Installation instructions are available at our"," ",u("a",{className:"ProgrammaticOptions__docslink",href:"https://help.synapse.org/docs/Installing-Synapse-API-Clients.1985249668.html",target:"_blank",rel:"noopener noreferrer",children:"Synapse API Documentation Site"}),"."]});return N(ae,{className:"bootstrap-4-backport ProgrammaticOptions",backdrop:"static",animation:!1,show:e,onHide:n,size:"lg",children:[u(ae.Header,{closeButton:!0,children:N(ae.Title,{children:[t,"\xA0",d&&u(Dt,{markdownText:d,helpUrl:c})]})}),N(ae.Body,{children:[N("div",{className:"Tabs",children:[l&&u("div",{className:"Tab",role:"tab",onClick:m=>{m.stopPropagation(),g("Command Line")},"aria-selected":p==="Command Line",children:"Command Line"}),i&&u("div",{className:"Tab",role:"tab",onClick:m=>{m.stopPropagation(),g("R")},"aria-selected":p==="R",children:"R"}),o&&u("div",{className:"Tab",role:"tab",onClick:m=>{m.stopPropagation(),g("Python")},"aria-selected":p==="Python",children:"Python"})]}),N("div",{className:"TabContent",children:[p==="Command Line"&&N(H,{children:[u("p",{children:s}),h,N("pre",{children:[" ",l," "]})]}),p==="R"&&N(H,{children:[u("p",{children:a}),h,u("pre",{children:i})]}),p==="Python"&&N(H,{children:[u("p",{children:r}),h,u("pre",{children:o})]})]})]}),u(ae.Footer,{children:u(_e,{variant:"primary",onClick:n,children:"OK"})})]})};try{Ao.displayName="ProgrammaticInstructionsModal",Ao.__docgenInfo={description:"Modal used to show programmatic instructions",displayName:"ProgrammaticInstructionsModal",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},pythonNotes:{defaultValue:null,description:"",name:"pythonNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},pythonCode:{defaultValue:null,description:"",name:"pythonCode",required:!1,type:{name:"string"}},rNotes:{defaultValue:null,description:"",name:"rNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},rCode:{defaultValue:null,description:"",name:"rCode",required:!1,type:{name:"string"}},cliNotes:{defaultValue:null,description:"",name:"cliNotes",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},cliCode:{defaultValue:null,description:"",name:"cliCode",required:!1,type:{name:"string"}},helpMarkdown:{defaultValue:null,description:"",name:"helpMarkdown",required:!1,type:{name:"string"}},helpUrl:{defaultValue:null,description:"",name:"helpUrl",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/ProgrammaticInstructionsModal.tsx#ProgrammaticInstructionsModal"]={docgenInfo:Ao.__docgenInfo,name:"ProgrammaticInstructionsModal",path:"src/lib/containers/ProgrammaticInstructionsModal.tsx#ProgrammaticInstructionsModal"})}catch{}function ko({queryBundleRequest:e,onHide:t}){var f;const[n,r]=x.exports.useState("..."),{data:o,isLoading:a,isPreviousData:i}=nv({...e,partMask:Ry},{keepPreviousData:!0,useErrorBoundary:!0}),s=(f=o==null?void 0:o.responseBody)==null?void 0:f.combinedSql,l=a||i;x.exports.useEffect(()=>{if(s&&!l){const p=s.toUpperCase().indexOf("FROM SYN"),g=`SELECT * ${s.substring(p)}`;r(g)}},[s,l]);const d=x.exports.useMemo(()=>n.replace(/(["`])/g,"\\$1"),[n]),c=x.exports.useMemo(()=>n.replace(/"/g,'\\"'),[n]);return u(Ao,{show:!0,onClose:t,title:"Download Programmatically",cliNotes:u(H,{children:"This command line code will download Synapse files AND file annotations to your working directory."}),cliCode:`synapse get -q "${d}"`,rNotes:N(H,{children:["This R code will download file annotations only. Use"," ",N("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:["synGet","()"]})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),rCode:`query <- synTableQuery("${c}")
read.table(query$filepath, sep = ",")`,pythonNotes:N(H,{children:["This Python code will download file annotations only. Use"," ",u("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.synapse.org/docs/Get-Started-with-Downloading-Data.2004254837.html#GetStartedwithDownloadingData-DownloadingFiles",children:"syn.get"})," ","to loop over the list of Synapse IDs from the file annotations to download files."]}),pythonCode:`query = syn.tableQuery("${c}")
query.asDataFrame()`})}try{ko.displayName="ProgrammaticOptions",ko.__docgenInfo={description:"",displayName:"ProgrammaticOptions",props:{queryBundleRequest:{defaultValue:null,description:"",name:"queryBundleRequest",required:!0,type:{name:"QueryBundleRequest"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/ProgrammaticOptions.tsx#ProgrammaticOptions"]={docgenInfo:ko.__docgenInfo,name:"ProgrammaticOptions",path:"src/lib/containers/table/table-top/ProgrammaticOptions.tsx#ProgrammaticOptions"})}catch{}const qR="Add To Download Cart",Lo=e=>{const{accessToken:t}=ie(),{entity:n,data:r,getLastQueryRequest:o}=Tt(),a=o(),[i,s]=x.exports.useState(!1),[l,d]=x.exports.useState(!1),[c,f]=x.exports.useState(!1),{onDownloadFiles:p,darkTheme:g=!0}=e,h=n&&(hn(n)&&iy(n)||Tn(n)),m=n&&Tn(n)&&n.isLatestVersion;return N(x.exports.Fragment,{children:[N(Lt,{as:"span",children:[u(Ll,{tooltipText:"Download Options",size:"lg",darkTheme:g,icon:"download"}),N(Lt.Menu,{className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:[u(Lt.Item,{onClick:()=>{d(!0)},children:"Export Table"}),h&&u(Ke,{title:m?"A draft version of a dataset cannot be added to the Download Cart":null,placement:"left",enterNextDelay:300,describeChild:!0,children:u(Lt.Item,{role:"button",className:m?"ignoreLink":void 0,disabled:m,style:m?{pointerEvents:"auto"}:{},onClick:()=>t?p():s(!0),children:qR})}),u(Ke,{title:m?"A draft version of a dataset cannot be downloaded programmatically":null,placement:"left",enterNextDelay:300,describeChild:!0,children:u(Lt.Item,{className:m?"ignoreLink":void 0,disabled:m,style:m?{pointerEvents:"auto"}:{},onClick:()=>f(!0),children:"Programmatic Options"})})]})]}),i&&u(Ro,{showModal:i,onHide:()=>s(!1)}),l&&u(Xt,{onClose:()=>d(!1),queryBundleRequest:a}),c&&r&&u(ko,{onHide:()=>f(!1),queryBundleRequest:a})]})};try{Lo.displayName="DownloadOptions",Lo.__docgenInfo={description:"",displayName:"DownloadOptions",props:{onDownloadFiles:{defaultValue:null,description:"",name:"onDownloadFiles",required:!0,type:{name:"() => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/DownloadOptions.tsx#DownloadOptions"]={docgenInfo:Lo.__docgenInfo,name:"DownloadOptions",path:"src/lib/containers/table/table-top/DownloadOptions.tsx#DownloadOptions"})}catch{}const PR="addAndRemoveColumns",qo=e=>{const{headers:t,isColumnSelected:n,toggleColumnSelection:r,darkTheme:o}=e,{getColumnDisplayName:a}=Ct(),[i,s]=x.exports.useState(!1),l=(d,c,f)=>{f.source==="rootClose"?s(!1):s(!0)};return N(Lt,{as:"span",onToggle:(d,c,f)=>l(d,c,f),show:i,drop:"down",children:[u(Ll,{tooltipText:"Show/Hide Columns",icon:o?"columnsdark":"columns",darkTheme:o}),u(Lt.Menu,{id:`${PR}-dropdown`,className:"SRC-primary-color-hover-dropdown",alignRight:!0,children:t==null?void 0:t.map(d=>{const{name:c}=d,f=n.includes(c),p={width:"11px",marginRight:"10px",visibility:f?void 0:"hidden"},g=f?"SRC-primary-text-color":"";return N(Lt.Item,{onClick:()=>r(c),children:[u("span",{className:g,style:p,children:u(pe,{icon:"check",sx:{width:"14px"}})}),a(c)]},c)})})]})};try{qo.displayName="ColumnSelection",qo.__docgenInfo={description:"",displayName:"ColumnSelection",props:{headers:{defaultValue:null,description:"",name:"headers",required:!1,type:{name:"SelectColumn[]"}},isColumnSelected:{defaultValue:null,description:"",name:"isColumnSelected",required:!0,type:{name:"string[]"}},show:{defaultValue:null,description:"",name:"show",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(() => void)"}},toggleColumnSelection:{defaultValue:null,description:"",name:"toggleColumnSelection",required:!0,type:{name:"(name: string) => void"}},darkTheme:{defaultValue:null,description:"",name:"darkTheme",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/table-top/ColumnSelection.tsx#ColumnSelection"]={docgenInfo:qo.__docgenInfo,name:"ColumnSelection",path:"src/lib/containers/table/table-top/ColumnSelection.tsx#ColumnSelection"})}catch{}const DR="Files may be unavailable because you do not have permission to see them, they have been deleted, or the Dataset has been misconfigured.",MR="Files may be unavailable because you do not have permission to see them or the Dataset was misconfigured.",Po=({entity:e})=>{var o,a;const t=e&&Tn(e),n={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:`SELECT * FROM ${e.id}${!e.isLatestVersion&&e.versionNumber?`.${e.versionNumber}`:""}`},entityId:e.id,partMask:xr},{data:r}=mp(n,{enabled:t});if(t&&r&&e){const i=r.queryCount,s=(a=(o=e.items)==null?void 0:o.length)!=null?a:0;if(i===s)return u(H,{});const l=s-i;let d="";return e.isLatestVersion?d=DR:d=MR,N(_t,{className:"SRC-centerContent",style:{marginLeft:10},variant:"smallText1",color:"textSecondary",children:[u(Db,{className:"SRC-color-warning",style:{fontSize:"16px"}}),l.toLocaleString()+" Unavailable",u(Dt,{className:"SRC-margin-left-5",markdownText:d,placement:"right"})]})}else return u(H,{})};try{Po.displayName="MissingQueryResultsWarning",Po.__docgenInfo={description:`If possible, this component will render a warning message if results may be missing from the query due to user permissions or
entities being deleted. If not possible, it will render an empty fragment.`,displayName:"MissingQueryResultsWarning",props:{entity:{defaultValue:null,description:"",name:"entity",required:!0,type:{name:"Table"}},versionNumber:{defaultValue:null,description:"",name:"versionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/MissingQueryResultsWarning.tsx#MissingQueryResultsWarning"]={docgenInfo:Po.__docgenInfo,name:"MissingQueryResultsWarning",path:"src/lib/containers/MissingQueryResultsWarning.tsx#MissingQueryResultsWarning"})}catch{}const VR=[{icon:"search",key:"showSearchBar",tooltipText:"Show / Hide Search Bar"},{icon:"chart",key:"showFacetVisualization",tooltipText:"Show / Hide Visualizations"},{icon:"download",key:"showDownloadConfirmation",tooltipText:"Show options for download"},{icon:Ay,key:"showSqlEditor",tooltipText:"Show / Hide the Advanced Query Editor"}],ir=e=>{const{name:t,showColumnSelection:n=!1,hideDownload:r=!1,hideVisualizationsControl:o=!1,hideFacetFilterControl:a=!1,hideQueryCount:i=!1,hideSqlEditorControl:s=!0,customControls:l}=e,{data:d,entity:c,executeQueryRequest:f,getLastQueryRequest:p,getInitQueryRequest:g,lockedColumn:h}=Tt(),{topLevelControlsState:m,setTopLevelControlsState:v,columnsToShowInTable:b,selectedRowIndices:E,setColumnsToShowInTable:S}=Ct(),y=O=>{const R={[O]:!m[O]};O==="showSearchBar"&&(R.showDownloadConfirmation=!1),O==="showDownloadConfirmation"&&(R.showSearchBar=!1),v(k=>({...k,...R}))},w=()=>{f(p())},C=x.exports.useMemo(()=>{var R,k;const O=g();return{sql:O.query.sql,selectedFacets:((R=O.query.selectedFacets)!=null?R:[]).filter(P=>P.columnName===(h==null?void 0:h.columnName)),additionalFilters:((k=O.query.additionalFilters)!=null?k:[]).filter(P=>"columnName"in P?P.columnName===(h==null?void 0:h.columnName):!0)}},[g,h==null?void 0:h.columnName]),_=O=>{let R=zn(b);R.includes(O)?R=R.filter(k=>k!==O):R.push(O),S(R)},T=m==null?void 0:m.showFacetFilter;return u("div",{className:`TopLevelControls ${T?Ln:qn}`,"data-testid":"TopLevelControls",children:N("div",{children:[N("div",{className:"TopLevelControls__querycount",children:[t&&N(H,{children:[N(_t,{variant:"sectionTitle",role:"heading",children:[t," ",!i&&u(Cb,{query:C,parens:!0})]}),!i&&c&&u(Po,{entity:c})]}),!a&&N("a",{onClick:()=>y("showFacetFilter"),className:"TopLevelControls__querycount__facetFilterLink SRC-no-underline-on-hover",children:[u(Ha,{type:m.showFacetFilter?"close":"filter"}),N("span",{className:"TopLevelControls__querycount__facetFilterLink__text",children:[m.showFacetFilter?"Hide":"Show"," ","filters"]})]})]}),N("div",{className:"TopLevelControls__actions",children:[l&&l.map(O=>{var R;return N("button",{className:`btn SRC-roundBorder SRC-primary-background-color SRC-whiteText ${(R=O.classNames)!=null?R:""}`,style:{marginRight:"5px"},type:"button",onClick:()=>O.onClick({data:d,selectedRowIndices:E,refresh:w}),children:[O.icon,"\xA0",O.buttonText]},O.buttonText)}),VR.map(O=>{const{key:R,icon:k,tooltipText:P}=O;return R==="showDownloadConfirmation"&&r||R==="showFacetVisualization"&&o||R==="showSqlEditor"&&s?u(ge.Fragment,{},R):R==="showDownloadConfirmation"?u(Lo,{darkTheme:!0,onDownloadFiles:()=>y(R)},R):u(Ll,{tooltipText:P,callbackFn:()=>y(R),darkTheme:!0,icon:k},R)}),n&&u(qo,{headers:d==null?void 0:d.selectColumns,isColumnSelected:b,toggleColumnSelection:_,darkTheme:!0})]})]})})};try{ir.displayName="TopLevelControls",ir.__docgenInfo={description:"",displayName:"TopLevelControls",props:{name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/TopLevelControls.tsx#TopLevelControls"]={docgenInfo:ir.__docgenInfo,name:"TopLevelControls",path:"src/lib/containers/table/TopLevelControls.tsx#TopLevelControls"})}catch{}var rg={exports:{}};(function(e,t){(function(r,o){e.exports=o()})(Ya,function(){return(()=>{var n={67:(a,i,s)=>{s.r(i),s.d(i,{default:()=>h});var l=s(887),d=s.n(l);function c(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function f(m,v,b){return v in m?Object.defineProperty(m,v,{value:b,enumerable:!0,configurable:!0,writable:!0}):m[v]=b,m}var p,g=(p=0,function(){return p++}),h=function m(v){var b=this,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c(this,m),f(this,"ID","id"),f(this,"PX","px"),f(this,"RESIZABLE","grip-resizable"),f(this,"FLEX","grip-flex"),f(this,"legacyIE",navigator.userAgent.indexOf("Trident/4.0")>0),f(this,"reset",function(S){return b.init(S)}),f(this,"onResize",function(){var S=b.tb;if(S.classList.remove(b.RESIZABLE),S.opt.fixed){S.tableWidth=Number(window.getComputedStyle(S).width.replace(/px/,"")).valueOf();for(var y=0,w=0;w<S.columnCnt;w++)y+=S.columns[w].w;for(var C=0;C<S.columnCnt;C++)S.columns[C].style.width=Math.round(1e3*S.columns[C].w/y)/10+"%",S.columns[C].locked=!0}else b.applyBounds(),S.opt.resizeMode==="flex"&&S.opt.serialize&&b.serializeStore();S.classList.add(b.RESIZABLE),b.syncGrips()}),f(this,"onGripMouseDown",function(S){var y=S.target.parentNode.data,w=b.tb,C=w.grips[y.i],_=S.touches;if(C.ox=_?_[0].pageX:S.pageX,C.l=C.offsetLeft,C.x=C.l,b.createStyle(document.querySelector("head"),"*{cursor:"+w.opt.dragCursor+"!important}"),document.addEventListener("touchmove",b.onGripDrag),document.addEventListener("mousemove",b.onGripDrag),document.addEventListener("touchend",b.onGripDragOver),document.addEventListener("mouseup",b.onGripDragOver),C.classList.add(w.opt.draggingClass),b.grip=C,w.columns[y.i].locked)for(var T,O=0;O<w.columnCnt;O++)(T=w.columns[O]).locked=!1,T.w=Number(window.getComputedStyle(T).width.replace(/px/,"")).valueOf();S.preventDefault()}),f(this,"onGripDrag",function(S){var y=b.grip;if(y){var w=y.t,C=S.touches,_=(C?C[0].pageX:S.pageX)-y.ox+y.l,T=w.opt.minWidth,O=y.i,R=1.5*w.cellSpace+T+w.borderSpace,k=O===w.columnCnt-1,P=O?w.grips[O-1].offsetLeft+w.cellSpace+T:R,V=w.opt.fixed?O===w.columnCnt-1?w.tableWidth-R:w.grips[O+1].offsetLeft-w.cellSpace-T:1/0;if(_=Math.max(P,Math.min(V,_)),y.x=_,y.style.left=_+b.PX,k&&(y.w=w.columns[O].w+_-y.l),w.opt.liveDrag){k?(w.columns[O].style.width=y.w+b.PX,!w.opt.fixed&&w.opt.overflow?w.style.minWidth=w.tableWidth+_-y.l+b.PX:w.tableWidth=Number(window.getComputedStyle(w).width.replace(/px/,"")).valueOf()):b.syncCols(w,O,!1,w.opt),b.syncGrips();var I=w.opt.onDrag;I&&I(S)}S.preventDefault()}}),f(this,"onGripDragOver",function(S){var y=b.grip;document.removeEventListener("touchend",b.onGripDragOver),document.removeEventListener("mouseup",b.onGripDragOver),document.removeEventListener("touchmove",b.onGripDrag),document.removeEventListener("mousemove",b.onGripDrag);var w=document.querySelector("head").lastChild;if(w.parentNode.removeChild(w),y){if(y.classList.remove(y.t.opt.draggingClass),y.x-y.l!=0){var C=y.t,_=C.opt.onResize,T=y.i;if(T===C.columnCnt-1){var O=C.columns[T];O.style.width=y.w+b.PX,O.w=y.w}else b.syncCols(C,T,!0,C.opt);C.opt.fixed||b.applyBounds(),b.syncGrips(),_&&_(S),C.opt.serialize&&b.serializeStore()}b.grip=null}}),f(this,"init",function(S){if(S.disable)return b.destroy();var y=b.tb,w=y.getAttribute(b.ID)||b.RESIZABLE+g();if(!y.matches("table")||y.extended&&!S.partialRefresh)return null;var C=document.querySelector("head");if(b.createStyle(C," .grip-resizable{table-layout:fixed;} .grip-resizable > tbody > tr > td, .grip-resizable > tbody > tr > th{overflow:hidden} .grip-padding > tbody > tr > td, .grip-padding > tbody > tr > th{padding-left:0!important; padding-right:0!important;} .grip-container{ height:0px; position:relative;} .grip-handle{margin-left:-5px; position:absolute; z-index:5; } .grip-handle .grip-resizable{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;cursor: col-resize;top:0px} .grip-lastgrip{position:absolute; width:1px; } .grip-drag{ border-left:1px dotted black;	} .grip-flex{width:auto!important;} .grip-handle.grip-disabledgrip .grip-resizable{cursor:default; display:none;}"),S.hoverCursor&&S.hoverCursor!=="col-resize"){var _=".grip-handle .grip-resizable:hover{cursor:"+S.hoverCursor+"!important}";b.createStyle(C,_)}y.setAttribute(b.ID,w);var T=y.opt;y.opt=b.extendOptions(S);var O=b.getTableHeaders(y);if(b.extendTable(O),S.remoteTable&&S.remoteTable.matches("table")){var R=b.getTableHeaders(y.opt.remoteTable);O.length===R.length?b.extendRemoteTable(y.opt.remoteTable,R,y):console.warn("column count for remote table did not match")}return T}),f(this,"applyBounds",function(){var S=b.tb,y=S.columns.map(function(w){return window.getComputedStyle(w).width});S.style.width=window.getComputedStyle(S).width,S.tableWidth=Number(S.style.width.replace(/px/,"")).valueOf(),S.classList.remove(b.FLEX),S.columns.forEach(function(w,C){w.style.width=y[C],w.w=Number(y[C].replace(/px/,"")).valueOf()}),S.classList.add(b.FLEX)}),f(this,"serializeStore",function(){var S=b.store,y=b.tb;S[y.getAttribute(b.ID)]="";for(var w=0,C=0;C<y.columns.length;C++){var _=window.getComputedStyle(y.columns[C]).width.replace(/px/,"");S[y.getAttribute(b.ID)]+=_+";",w+=Number(_).valueOf()}S[y.getAttribute(b.ID)]+=w.toString(),y.opt.fixed||(S[y.getAttribute(b.ID)]+=";"+window.getComputedStyle(y).width.replace(/px/,""))}),f(this,"syncGrips",function(){var S=b.tb;S.gripContainer.style.width=S.tableWidth+b.PX;for(var y=0;y<S.columnCnt;y++){var w=S.columns[y],C=w.getBoundingClientRect(),_=S.getBoundingClientRect();S.grips[y].style.left=C.left-_.left+w.offsetWidth+S.cellSpace/2+b.PX,S.grips[y].style.height=(S.opt.headerOnly?S.columns[0].offsetHeight:S.offsetHeight)+b.PX}}),f(this,"destroy",function(){var S=b.tb,y=S.getAttribute(b.ID);return y?(b.store[y]="",S.classList.remove(b.RESIZABLE),S.classList.remove(b.FLEX),S.remote&&(S.remote.classList.remove(b.RESIZABLE),S.remote.classList.remove(b.FLEX)),S.gripContainer&&S.gripContainer.parentNode&&S.gripContainer.parentNode.removeChild(S.gripContainer),delete S.extended,S.opt):null}),f(this,"createStyle",function(S,y){var w=d()(y).toString(),C=S.querySelectorAll("style");if(!Array.from(C).filter(function(T){return T.gripid===w}).length){var _=document.createElement("style");_.type="text/css",_.gripid=w,_.styleSheet?_.styleSheet.cssText=y:_.appendChild(document.createTextNode(y)),S.appendChild(_)}}),f(this,"extendOptions",function(S){var y=Object.assign({},m.DEFAULTS,S);switch(y.fixed=!0,y.overflow=!1,y.resizeMode){case"flex":y.fixed=!1;break;case"overflow":y.fixed=!1,y.overflow=!0}return y}),f(this,"getTableHeaders",function(S){var y="#"+S.id,w=Array.from(S.querySelectorAll(y+">thead>tr:nth-of-type(1)>th"));return(w=w.concat(Array.from(S.querySelectorAll(y+">thead>tr:nth-of-type(1)>td")))).length||(w=(w=(w=(w=Array.from(S.querySelectorAll(y+">tbody>tr:nth-of-type(1)>th"))).concat(Array.from(S.querySelectorAll(y+">tr:nth-of-type(1)>th")))).concat(Array.from(S.querySelectorAll(y+">tbody>tr:nth-of-type(1)>td")))).concat(Array.from(S.querySelectorAll(y+">tr:nth-of-type(1)>td")))),b.filterInvisible(w,!1)}),f(this,"filterInvisible",function(S,y){return S.filter(function(w){var C=y?-1:w.offsetWidth,_=y?-1:w.offsetHeight;return!(C===0&&_===0||w.style&&w.style.display&&window.getComputedStyle(w).display==="none")})}),f(this,"extendTable",function(S){var y=b.tb;y.opt.removePadding&&y.classList.add("grip-padding"),y.classList.add(b.RESIZABLE),y.insertAdjacentHTML("beforebegin",'<div class="grip-container"/>'),y.grips=[],y.columns=[],y.tableWidth=Number(window.getComputedStyle(y).width.replace(/px/,"")).valueOf(),y.gripContainer=y.previousElementSibling,y.opt.marginLeft&&(y.gripContainer.style.marginLeft=y.opt.marginLeft),y.opt.marginRight&&(y.gripContainer.style.marginRight=y.opt.marginRight),y.cellSpace=parseInt(b.legacyIE?y.cellSpacing||y.currentStyle.borderSpacing:window.getComputedStyle(y).borderSpacing.split(" ")[0].replace(/px/,""))||2,y.borderSpace=parseInt(b.legacyIE?y.border||y.currentStyle.borderLeftWidth:window.getComputedStyle(y).borderLeftWidth.replace(/px/,""))||1,y.extended=!0,b.createGrips(S)}),f(this,"extendRemoteTable",function(S,y,w){w.opt.removePadding&&S.classList.add("grip-padding"),S.classList.add(b.RESIZABLE),S.getAttribute(b.ID)||S.setAttribute(b.ID,w.getAttribute(b.ID)+"remote"),S.columns=[],y.forEach(function(_,T){var O=y[T];O.w=w.columns[T].w,O.style.width=O.w+b.PX,O.removeAttribute("width"),S.columns.push(O)}),S.tableWidth=w.tableWidth,S.cellSpace=w.cellSpace,S.borderSpace=w.borderSpace;var C=Array.from(S.querySelectorAll("col"));S.columnGrp=b.filterInvisible(C,!0),S.columnGrp.forEach(function(_,T){_.removeAttribute("width"),_.style.width=w.columnGrp[T].style.width}),w.remote=S}),f(this,"createGrips",function(S){var y=b.tb;y.columnGrp=b.filterInvisible(Array.from(y.querySelectorAll("col")),!0),y.columnGrp.forEach(function(_){_.removeAttribute("width")}),y.columnCnt=S.length;var w=!1;b.store[y.getAttribute(b.ID)]&&(b.deserializeStore(S),w=!0),y.opt.widths||(y.opt.widths=[]),S.forEach(function(_,T){var O=S[T],R=y.opt.disabledColumns.indexOf(T)!==-1;b.createDiv(y.gripContainer,"grip-handle");var k=y.gripContainer.lastChild;!R&&y.opt.gripInnerHtml&&(k.innerHTML=y.opt.gripInnerHtml),b.createDiv(k,b.RESIZABLE),T===y.columnCnt-1&&(k.classList.add("grip-lastgrip"),y.opt.fixed&&(k.innerHTML="")),k.addEventListener("touchstart",b.onGripMouseDown,{capture:!0,passive:!0}),k.addEventListener("mousedown",b.onGripMouseDown,!0),R?k.classList.add("grip-disabledgrip"):(k.classList.remove("grip-disabledgrip"),k.addEventListener("touchstart",b.onGripMouseDown,{capture:!0,passive:!0}),k.addEventListener("mousedown",b.onGripMouseDown,!0)),k.t=y,k.i=T,y.opt.widths[T]?O.w=y.opt.widths[T]:O.w=w?Number(O.style.width.replace(/px/,"")).valueOf():Number(window.getComputedStyle(O).width.replace(/px/,"")).valueOf(),O.style.width=O.w+b.PX,O.removeAttribute("width"),k.data={i:T,t:y.getAttribute(b.ID),last:T===y.columnCnt-1},y.grips.push(k),y.columns.push(O)});var C=Array.from(y.querySelectorAll("td"));C.concat(Array.from(y.querySelectorAll("th"))),(C=(C=C.filter(function(_){for(var T=0;T<S.length;T++)if(S[T]===_)return!1;return!0})).filter(function(_){return!(_.querySelectorAll("table th").length||_.querySelectorAll("table td").length)})).forEach(function(_){_.removeAttribute("width")}),y.opt.fixed||(y.removeAttribute("width"),y.classList.add(b.FLEX)),b.syncGrips()}),f(this,"deserializeStore",function(S){var y=b.tb;if(y.columnGrp.forEach(function(T){T.removeAttribute("width")}),y.opt.flush)b.store[y.getAttribute(b.ID)]="";else{var w=b.store[y.getAttribute(b.ID)].split(";"),C=w[y.columnCnt+1];!y.opt.fixed&&C&&(y.style.width=C+b.PX,y.opt.overflow&&(y.style.minWidth=C+b.PX,y.tableWidth=Number(C).valueOf()));for(var _=0;_<y.columnCnt;_++)S[_].style.width=w[_]+b.PX,y.columnGrp[_]&&(y.columnGrp[_].style.width=100*Number(w[_]).valueOf()/Number(w[y.columnCnt]).valueOf()+"%")}}),f(this,"createDiv",function(S,y,w){var C=document.createElement("div");C.classList.add(y),w&&(C.innerHTML=w),S.appendChild(C)}),f(this,"syncCols",function(S,y,w,C){var _=S.remote,T=b.grip.x-b.grip.l,O=S.columns[y],R=S.columns[y+1];if(O&&R){var k=O.w+T,P=R.w-T,V=k+b.PX;if(O.style.width=V,S.columnGrp[y]&&S.columnGrp[y].style.width&&(S.columnGrp[y].style.width=V),_&&(_.columns[y].style.width=V,_.columnGrp[y]&&_.columnGrp[y].style.width&&(_.columnGrp[y].style.width=V)),C.fixed){var I=P+b.PX;R.style.width=I,S.columnGrp[y+1]&&S.columnGrp[y+1].style.width&&(S.columnGrp[y+1].style.width=I),_&&(_.columns[y+1].style.width=I,_.columnGrp[y+1]&&_.columnGrp[y+1].style.width&&(_.columnGrp[y+1].style.width=I))}else C.overflow&&(S.style.minWidth=S.tableWidth+T+b.PX);w&&(O.w=k,R.w=C.fixed?P:R.w,_&&(_.columns[y].w=k,_.columns[y+1].w=C.fixed?P:R.w))}});try{this.store=sessionStorage}catch{this.store={}}this.grip=null,this.tb=v,window.addEventListener("resize",this.onResize),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),this.init(E)};h.DEFAULTS={resizeMode:"fit",draggingClass:"grip-drag",gripInnerHtml:"",liveDrag:!1,minWidth:15,headerOnly:!1,hoverCursor:"col-resize",dragCursor:"col-resize",flush:!1,marginLeft:null,marginRight:null,remoteTable:null,disable:!1,partialRefresh:!1,disabledColumns:[],removePadding:!0,widths:[],serialize:!0,onDrag:null,onResize:null}},887:a=>{a.exports=function(s){for(var l=5381,d=s.length;d;)l=33*l^s.charCodeAt(--d);return l>>>0}}},r={};function o(a){if(r[a])return r[a].exports;var i=r[a]={exports:{}};return n[a](i,i.exports,o),i.exports}return o.n=a=>{var i=a&&a.__esModule?()=>a.default:()=>a;return o.d(i,{a:i}),i},o.d=(a,i)=>{for(var s in i)o.o(i,s)&&!o.o(a,s)&&Object.defineProperty(a,s,{enumerable:!0,get:i[s]})},o.o=(a,i)=>Object.prototype.hasOwnProperty.call(a,i),o.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o(67)})()})})(rg);const BR=Dv(rg.exports),Do=e=>{const{entityId:t,entityVersionNumber:n}=e,{accessToken:r}=ie(),o=sy();return r?u(H,{children:u(Ke,{title:"Add this file to your Download Cart",placement:"right",enterNextDelay:300,children:u("a",{"data-testid":"AddToDownloadListV2",onClick:async()=>{try{await ly(t,n,r),o.invalidateQueries(["downloadliststatsv2"]);const i=await xn(r,t,n?n==null?void 0:n.toString():void 0);en(`${i.name} was successfully added to your Download Cart.`,"success")}catch(i){en(`Unable to add the file to your Download Cart. ${i}`,"danger")}},className:"ignoreLink",children:u(pe,{icon:"addToCart"})})})}):u(H,{})};try{Do.displayName="AddToDownloadListV2",Do.__docgenInfo={description:"",displayName:"AddToDownloadListV2",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/AddToDownloadListV2.tsx#AddToDownloadListV2"]={docgenInfo:Do.__docgenInfo,name:"AddToDownloadListV2",path:"src/lib/containers/AddToDownloadListV2.tsx#AddToDownloadListV2"})}catch{}var vl={exports:{}};(function(e,t){(function(n,r){var o="1.0.2",a="",i="?",s="function",l="undefined",d="object",c="string",f="major",p="model",g="name",h="type",m="vendor",v="version",b="architecture",E="console",S="mobile",y="tablet",w="smarttv",C="wearable",_="embedded",T=255,O="Amazon",R="Apple",k="ASUS",P="BlackBerry",V="Browser",I="Chrome",q="Edge",A="Firefox",M="Google",$="Huawei",z="LG",B="Microsoft",U="Motorola",G="Opera",D="Samsung",L="Sony",F="Xiaomi",Y="Zebra",K="Facebook",Q=function(J,le){var ee={};for(var me in J)le[me]&&le[me].length%2===0?ee[me]=le[me].concat(J[me]):ee[me]=J[me];return ee},X=function(J){for(var le={},ee=0;ee<J.length;ee++)le[J[ee].toUpperCase()]=J[ee];return le},j=function(J,le){return typeof J===c?ce(le).indexOf(ce(J))!==-1:!1},ce=function(J){return J.toLowerCase()},ye=function(J){return typeof J===c?J.replace(/[^\d\.]/g,a).split(".")[0]:r},be=function(J,le){if(typeof J===c)return J=J.replace(/^\s\s*/,a).replace(/\s\s*$/,a),typeof le===l?J:J.substring(0,T)},Ce=function(J,le){for(var ee=0,me,ne,We,oe,Ne,Oe;ee<le.length&&!Ne;){var ft=le[ee],rt=le[ee+1];for(me=ne=0;me<ft.length&&!Ne;)if(Ne=ft[me++].exec(J),Ne)for(We=0;We<rt.length;We++)Oe=Ne[++ne],oe=rt[We],typeof oe===d&&oe.length>0?oe.length===2?typeof oe[1]==s?this[oe[0]]=oe[1].call(this,Oe):this[oe[0]]=oe[1]:oe.length===3?typeof oe[1]===s&&!(oe[1].exec&&oe[1].test)?this[oe[0]]=Oe?oe[1].call(this,Oe,oe[2]):r:this[oe[0]]=Oe?Oe.replace(oe[1],oe[2]):r:oe.length===4&&(this[oe[0]]=Oe?oe[3].call(this,Oe.replace(oe[1],oe[2])):r):this[oe]=Oe||r;ee+=2}},Ve=function(J,le){for(var ee in le)if(typeof le[ee]===d&&le[ee].length>0){for(var me=0;me<le[ee].length;me++)if(j(le[ee][me],J))return ee===i?r:ee}else if(j(le[ee],J))return ee===i?r:ee;return J},Ue={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Be={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ye={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[g,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,v],[/opios[\/ ]+([\w\.]+)/i],[v,[g,G+" Mini"]],[/\bopr\/([\w\.]+)/i],[v,[g,G]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[g,v],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[g,"UC"+V]],[/\bqbcore\/([\w\.]+)/i],[v,[g,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[v,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[g,"IE"]],[/yabrowser\/([\w\.]+)/i],[v,[g,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure "+V],v],[/\bfocus\/([\w\.]+)/i],[v,[g,A+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[g,G+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[g,G+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[g,"MIUI "+V]],[/fxios\/([-\w\.]+)/i],[v,[g,A]],[/\bqihu|(qi?ho?o?|360)browser/i],[[g,"360 "+V]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1 "+V],v],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[g,v],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,K],v],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[g,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[g,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[g,I+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,I+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[g,"Android "+V]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,v],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[v,[g,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[v,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[v,Ve,Ue]],[/(webkit|khtml)\/([\w\.]+)/i],[g,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[g,A+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[g,v]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[b,"amd64"]],[/(ia32(?=;))/i],[[b,ce]],[/((?:i[346]|x)86)[;\)]/i],[[b,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[b,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[b,"armhf"]],[/windows (ce|mobile); ppc;/i],[[b,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[b,/ower/,a,ce]],[/(sun4\w)[;\)]/i],[[b,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[b,ce]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[p,[m,D],[h,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[p,[m,D],[h,S]],[/\((ip(?:hone|od)[\w ]*);/i],[p,[m,R],[h,S]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[p,[m,R],[h,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[p,[m,$],[h,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[p,[m,$],[h,S]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[p,/_/g," "],[m,F],[h,S]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[p,/_/g," "],[m,F],[h,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[p,[m,"OPPO"],[h,S]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[p,[m,"Vivo"],[h,S]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[p,[m,"Realme"],[h,S]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[p,[m,U],[h,S]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[p,[m,U],[h,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[p,[m,z],[h,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[p,[m,z],[h,S]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[p,[m,"Lenovo"],[h,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[p,/_/g," "],[m,"Nokia"],[h,S]],[/(pixel c)\b/i],[p,[m,M],[h,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[p,[m,M],[h,S]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[m,L],[h,S]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[p,"Xperia Tablet"],[m,L],[h,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[p,[m,"OnePlus"],[h,S]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[p,[m,O],[h,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[p,/(.+)/g,"Fire Phone $1"],[m,O],[h,S]],[/(playbook);[-\w\),; ]+(rim)/i],[p,m,[h,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[p,[m,P],[h,S]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[p,[m,k],[h,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[p,[m,k],[h,S]],[/(nexus 9)/i],[p,[m,"HTC"],[h,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[m,[p,/_/g," "],[h,S]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[p,[m,"Acer"],[h,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[p,[m,"Meizu"],[h,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[p,[m,"Sharp"],[h,S]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,p,[h,S]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,p,[h,y]],[/(surface duo)/i],[p,[m,B],[h,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[p,[m,"Fairphone"],[h,S]],[/(u304aa)/i],[p,[m,"AT&T"],[h,S]],[/\bsie-(\w*)/i],[p,[m,"Siemens"],[h,S]],[/\b(rct\w+) b/i],[p,[m,"RCA"],[h,y]],[/\b(venue[\d ]{2,7}) b/i],[p,[m,"Dell"],[h,y]],[/\b(q(?:mv|ta)\w+) b/i],[p,[m,"Verizon"],[h,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[p,[m,"Barnes & Noble"],[h,y]],[/\b(tm\d{3}\w+) b/i],[p,[m,"NuVision"],[h,y]],[/\b(k88) b/i],[p,[m,"ZTE"],[h,y]],[/\b(nx\d{3}j) b/i],[p,[m,"ZTE"],[h,S]],[/\b(gen\d{3}) b.+49h/i],[p,[m,"Swiss"],[h,S]],[/\b(zur\d{3}) b/i],[p,[m,"Swiss"],[h,y]],[/\b((zeki)?tb.*\b) b/i],[p,[m,"Zeki"],[h,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],p,[h,y]],[/\b(ns-?\w{0,9}) b/i],[p,[m,"Insignia"],[h,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[p,[m,"NextBook"],[h,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],p,[h,S]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],p,[h,S]],[/\b(ph-1) /i],[p,[m,"Essential"],[h,S]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[p,[m,"Envizen"],[h,y]],[/\b(trio[-\w\. ]+) b/i],[p,[m,"MachSpeed"],[h,y]],[/\btu_(1491) b/i],[p,[m,"Rotor"],[h,y]],[/(shield[\w ]+) b/i],[p,[m,"Nvidia"],[h,y]],[/(sprint) (\w+)/i],[m,p,[h,S]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[m,B],[h,S]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[p,[m,Y],[h,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[p,[m,Y],[h,S]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,p,[h,E]],[/droid.+; (shield) bui/i],[p,[m,"Nvidia"],[h,E]],[/(playstation [345portablevi]+)/i],[p,[m,L],[h,E]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[p,[m,B],[h,E]],[/smart-tv.+(samsung)/i],[m,[h,w]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[m,D],[h,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,z],[h,w]],[/(apple) ?tv/i],[m,[p,R+" TV"],[h,w]],[/crkey/i],[[p,I+"cast"],[m,M],[h,w]],[/droid.+aft(\w)( bui|\))/i],[p,[m,O],[h,w]],[/\(dtv[\);].+(aquos)/i],[p,[m,"Sharp"],[h,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[m,be],[p,be],[h,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,w]],[/((pebble))app/i],[m,p,[h,C]],[/droid.+; (glass) \d/i],[p,[m,M],[h,C]],[/droid.+; (wt63?0{2,3})\)/i],[p,[m,Y],[h,C]],[/(quest( 2)?)/i],[p,[m,K],[h,C]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[h,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[p,[h,S]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[p,[h,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,y]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[h,S]],[/(android[-\w\. ]{0,9});.+buil/i],[p,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[g,q+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[g,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,v],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[g,[v,Ve,Be]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[g,"Windows"],[v,Ve,Be]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,"Mac OS"],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[v,g],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[g,v],[/\(bb(10);/i],[v,[g,P]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[g,A+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[g,"webOS"]],[/crkey\/([\d\.]+)/i],[v,[g,I+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[g,"Chromium OS"],v],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,v],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[g,v]]},Ie=function(J,le){if(typeof J===d&&(le=J,J=r),!(this instanceof Ie))return new Ie(J,le).getResult();var ee=J||(typeof n!==l&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:a),me=le?Q(Ye,le):Ye;return this.getBrowser=function(){var ne={};return ne[g]=r,ne[v]=r,Ce.call(ne,ee,me.browser),ne.major=ye(ne.version),ne},this.getCPU=function(){var ne={};return ne[b]=r,Ce.call(ne,ee,me.cpu),ne},this.getDevice=function(){var ne={};return ne[m]=r,ne[p]=r,ne[h]=r,Ce.call(ne,ee,me.device),ne},this.getEngine=function(){var ne={};return ne[g]=r,ne[v]=r,Ce.call(ne,ee,me.engine),ne},this.getOS=function(){var ne={};return ne[g]=r,ne[v]=r,Ce.call(ne,ee,me.os),ne},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ee},this.setUA=function(ne){return ee=typeof ne===c&&ne.length>T?be(ne,T):ne,this},this.setUA(ee),this};Ie.VERSION=o,Ie.BROWSER=X([g,v,f]),Ie.CPU=X([b]),Ie.DEVICE=X([p,m,h,E,S,w,y,C,_]),Ie.ENGINE=Ie.OS=X([g,v]),e.exports&&(t=e.exports=Ie),t.UAParser=Ie;var je=typeof n!==l&&(n.jQuery||n.Zepto);if(je&&!je.ua){var ut=new Ie;je.ua=ut.getResult(),je.ua.get=function(){return ut.getUA()},je.ua.set=function(J){ut.setUA(J);var le=ut.getResult();for(var ee in le)je.ua[ee]=le[ee]}}})(typeof window=="object"?window:Ya)})(vl,vl.exports);const sr=e=>{const{accessToken:t}=ie(),{associatedObjectId:n,entityVersionNumber:r,associatedObjectType:o,fileHandleId:a,displayFileName:i,onClickCallback:s}=e,{ref:l,inView:d}=Pn(),[c,f]=x.exports.useState(!1),[p,g]=x.exports.useState(!1),[h,m]=x.exports.useState(),[v,b]=x.exports.useState(),[E,S]=x.exports.useState("");let y=!0;x.exports.useEffect(()=>(y&&d&&T(),()=>{y=!1}),[t,d]);const w=async()=>{let R;const P=new vl.exports.UAParser().getBrowser().name=="Safari";let V=null;P&&(V=window.open("","Safari Download","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,popup,width=600,height=200"),V.document.body.innerHTML="Downloading file on Safari...");try{o===Re.TableEntity?R=(await _(!0)).requestedFiles[0].preSignedURL:R=(await Ic(h,t,!1,!0)).preSignedURL}catch(I){console.log("Fail to get file download link: ",I)}R?(P&&V?(V.location=R,setTimeout(()=>{V&&V.close()},1e4)):window.open(R),s&&s(c)):(V==null||V.close(),console.log("Fail to get file download link"))},C=R=>R&&!R.isPreview?(g(!0),!0):(g(!1),!1),_=(R=!1)=>An({includeFileHandles:!0,includePreSignedURLs:R,includePreviewPreSignedURLs:!1,requestedFiles:[{associateObjectId:n,associateObjectType:o,fileHandleId:a}]},t),T=()=>xn(t,n,r).then(async R=>{if(R.hasOwnProperty("dataFileHandleId"))return m(R),Ic(R,t,!0).then(k=>{const P=k.fileHandle;P&&C(P)&&vS(P)&&(f(!0),b(P.externalURL))}).catch(k=>{console.log("Error on getFileEntityFileHandle = ",k)});if(o===Re.TableEntity){const P=(await _()).requestedFiles[0].fileHandle;i&&P&&C(P)&&S(P.fileName)}return Promise.resolve()}).catch(R=>{console.log("Error on getEntity = ",R)});return u(Ke,{title:c?"Navigate to external link":"Download this file individually",enterNextDelay:_a,placement:"left",children:u("span",{ref:l,children:(()=>c?u("button",{className:"btn-download-icon",onClick:()=>{s&&s(c)},children:u("a",{className:"ignoreLink",rel:"noreferrer",href:v,target:"_blank",children:u(pe,{icon:"openInNewWindow"})})}):p?N("button",{className:"btn-download-icon",onClick:w,children:[u(pe,{icon:"download"}),i&&E?E:""]}):u(H,{}))()})})};try{sr.displayName="DirectDownload",sr.__docgenInfo={description:"",displayName:"DirectDownload",props:{associatedObjectId:{defaultValue:null,description:"",name:"associatedObjectId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},associatedObjectType:{defaultValue:null,description:"",name:"associatedObjectType",required:!1,type:{name:"enum",value:[{value:'"FileEntity"'},{value:'"TableEntity"'},{value:'"WikiAttachment"'},{value:'"WikiMarkdown"'},{value:'"UserProfileAttachment"'},{value:'"MessageAttachment"'},{value:'"TeamAttachment"'},{value:'"SubmissionAttachment"'},{value:'"VerificationSubmission"'},{value:'"AccessRequirementAttachment"'},{value:'"DataAccessRequestAttachment"'},{value:'"DataAccessSubmissionAttachment"'}]}},fileHandleId:{defaultValue:null,description:"",name:"fileHandleId",required:!1,type:{name:"string"}},displayFileName:{defaultValue:null,description:"",name:"displayFileName",required:!1,type:{name:"boolean"}},onClickCallback:{defaultValue:null,description:"",name:"onClickCallback",required:!1,type:{name:"((isExternalLink: boolean) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DirectDownload.tsx#DirectDownload"]={docgenInfo:sr.__docgenInfo,name:"DirectDownload",path:"src/lib/containers/DirectDownload.tsx#DirectDownload"})}catch{}const FR=e=>{const t=x.exports.useRef();return x.exports.useEffect(()=>{t.current=e}),t.current},$R=e=>FR(e)!==e;function Mt({isCompleted:e}){return u("div",{"data-testid":`AccessApprovalCheckMark-${e}`,className:`check-mark-container ${e?"green":"orange"}`,children:e?u(qb,{}):u(Pb,{})})}try{Mt.displayName="AccessApprovalCheckMark",Mt.__docgenInfo={description:"",displayName:"AccessApprovalCheckMark",props:{isCompleted:{defaultValue:null,description:"",name:"isCompleted",required:!0,type:{name:"boolean | undefined"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AccessApprovalCheckMark.tsx#AccessApprovalCheckMark"]={docgenInfo:Mt.__docgenInfo,name:"AccessApprovalCheckMark",path:"src/lib/containers/access_requirement_list/AccessApprovalCheckMark.tsx#AccessApprovalCheckMark"})}catch{}function _n({user:e,wikiPage:t,accessRequirement:n,accessRequirementStatus:r,showButton:o=!0,entityId:a,onHide:i}){const{accessToken:s}=ie(),[l,d]=x.exports.useState(!0),c=r==null?void 0:r.isApproved,[f,p]=x.exports.useState(c);let g="";n.concreteType===qe.ManagedACTAccessRequirement||n.concreteType===qe.ACTAccessRequirement?window.location.hostname==="www.synapse.org"||window.location.hostname==="staging.synapse.org"?g="Request access":g="Request access via Synapse.org":g="I Accept Terms of Use",x.exports.useEffect(()=>{p(c)},[c]);const h=()=>{window.open(`${$e.PORTAL}#!AccessRequirement:AR_ID=${n.id}&TYPE=ENTITY&ID=${a}`)},m=()=>{if(n.concreteType===qe.ManagedACTAccessRequirement||n.concreteType===qe.ACTAccessRequirement)h(),i==null||i();else if(!f){const T={requirementId:n==null?void 0:n.id,submitterId:e==null?void 0:e.ownerId,accessorId:e==null?void 0:e.ownerId,state:Ul.APPROVED};Jf(s,T).then(O=>{p(!0)}).catch(O=>console.error("Error on post access approval: ",O))}},v=n.termsOfUse,b=n.actContactInfo,E=n.concreteType===qe.TermsOfUseAccessRequirement,S=n.concreteType===qe.ACTAccessRequirement,y=E&&v||S&&b;let w=u(H,{});t?w=u("div",{className:"AcceptRequirementsMarkdown",children:u(De,{wikiId:t==null?void 0:t.wikiPageId,ownerId:t==null?void 0:t.ownerObjectId,objectType:t==null?void 0:t.ownerObjectType})}):y&&(w=u(De,{markdown:E?v:b}));const C=n.concreteType===qe.ManagedACTAccessRequirement;return u(H,{children:N("div",{"data-testid":"AcceptedRequirements",className:"requirement-container",children:[u(Mt,{isCompleted:f}),N("div",{className:"terms-of-use-content",children:[f?N("div",{children:[N("p",{children:[C?"Your data access request has been approved.":"You have accepted the terms of use.",C&&u("a",{className:"update-request-button",onClick:()=>{h()},children:"Update Request"}),u("a",{className:"view-terms-button",onClick:()=>{d(!l)},children:"View Terms"})]}),u("div",{className:`view-terms ${l?"hidden":"show"}`,children:w})]}):w,s&&o&&N("div",{className:`button-container ${f?"hide":"default"}`,children:[u("div",{className:"accept-button-container",children:u("button",{className:"accept-button",onClick:m,children:g})}),u("div",{className:"not-accept-button-container",children:u("button",{className:"not-accpet-button",onClick:()=>i==null?void 0:i(),children:"I do not accept"})})]})]})]})})}try{_n.displayName="AcceptedRequirements",_n.__docgenInfo={description:"",displayName:"AcceptedRequirements",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPageKey | undefined"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement | ManagedACTAccessRequirement | SelfSignAccessRequirement | TermsOfUseAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus | undefined"}},showButton:{defaultValue:{value:"true"},description:"",name:"showButton",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AcceptedRequirements.tsx#AcceptedRequirements"]={docgenInfo:_n.__docgenInfo,name:"AcceptedRequirements",path:"src/lib/containers/access_requirement_list/AcceptedRequirements.tsx#AcceptedRequirements"})}catch{}function HR({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:o}){const{accessToken:a}=ie(),[i,s]=x.exports.useState();return x.exports.useEffect(()=>{(async()=>{try{const d=await $a(a,e.id);s(d)}catch(d){console.error("Error on get ACTAccessRequirement",d)}})()},[a,e]),u(_n,{accessRequirement:e,accessRequirementStatus:r,user:t,wikiPage:i,onHide:n,entityId:o})}try{ACTAccessRequirement.displayName="ACTAccessRequirement",ACTAccessRequirement.__docgenInfo={description:"",displayName:"ACTAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/ACTAccessRequirement.tsx#ACTAccessRequirement"]={docgenInfo:ACTAccessRequirement.__docgenInfo,name:"ACTAccessRequirement",path:"src/lib/containers/access_requirement_list/ACTAccessRequirement.tsx#ACTAccessRequirement"})}catch{}const Mo=e=>{const{accessToken:t}=ie(),{formSubmitRequestObject:n,onHide:r}=e,[o,a]=x.exports.useState(),[i,s]=x.exports.useState(!1),l=async()=>{if(n)try{await ep(n,t)?r==null||r():(a({key:"danger",message:"Sorry, there is an error in submitting your request. Please close this dialog and try again later."}),s(!0))}catch(d){console.log("CancelRequestDataAccess: Error updating form",d),a({key:"danger",message:`Sorry, there is an error in submitting your request. ${d.reason||""}. Please close this dialog and try again later`}),s(!0)}};return N(H,{children:[u(ae.Header,{closeButton:!0,children:u(ae.Title,{className:"AccessRequirementList__title",children:"Save Changes"})}),N(ae.Body,{children:[u("p",{children:"Would you like to save your recent changes?"}),o&&u(nn,{variant:o.key,children:o.message})]}),N(ae.Footer,{children:[!i&&N(H,{children:[u(_e,{variant:"link",onClick:()=>r==null?void 0:r(),children:"Cancel"}),u(_e,{variant:"primary",onClick:()=>l(),children:"Save changes"})]}),i&&u(_e,{variant:"primary",onClick:()=>r==null?void 0:r(),children:"Close"})]})]})};try{Mo.displayName="CancelRequestDataAccess",Mo.__docgenInfo={description:"",displayName:"CancelRequestDataAccess",props:{formSubmitRequestObject:{defaultValue:null,description:"",name:"formSubmitRequestObject",required:!0,type:{name:"RequestInterface | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/CancelRequestDataAccess.tsx#CancelRequestDataAccess"]={docgenInfo:Mo.__docgenInfo,name:"CancelRequestDataAccess",path:"src/lib/containers/access_requirement_list/managedACTAccess/CancelRequestDataAccess.tsx#CancelRequestDataAccess"})}catch{}const Vo=e=>{const{user:t,wikiPage:n,accessRequirementStatus:r,accessRequirement:o,showButton:a=!0,onHide:i,requestDataStepCallback:s}=e,{accessToken:l}=ie(),[d,c]=x.exports.useState(!0),f=r==null?void 0:r.isApproved,[p,g]=x.exports.useState(f),[h,m]=x.exports.useState(),[v,b]=x.exports.useState(),[E,S]=x.exports.useState(!1);x.exports.useEffect(()=>{g(f),r!=null&&r.currentSubmissionStatus&&(m(r.currentSubmissionStatus.state),_(r.currentSubmissionStatus))},[f]);const y=()=>{s==null||s({managedACTAccessRequirement:o,step:1})},w=async()=>{if(o.concreteType===qe.ManagedACTAccessRequirement)if(l)if(h===Le.SUBMITTED&&!E){const A={key:"danger",message:N(H,{children:[u("strong",{children:"Error canceling your data access request."}),u("br",{}),"Please try again later."]})};try{(await cy(r==null?void 0:r.currentSubmissionStatus.submissionId,l)).state===Le.CANCELLED?(b({key:"success",message:u("strong",{children:"Your data access request has been canceled."})}),S(!0)):b(A)}catch(M){console.log("RequestDataAccess: error canceling data access request:",M),b(A)}}else y();else s==null||s({managedACTAccessRequirement:o,step:4});else if(!p){const A={requirementId:o==null?void 0:o.id,submitterId:t==null?void 0:t.ownerId,accessorId:t==null?void 0:t.ownerId,state:Ul.APPROVED};Jf(l,A).then(M=>{g(!0)}).catch(M=>console.error("Error on post access approval: ",M))}},C=()=>{if(o.concreteType===qe.ManagedACTAccessRequirement||o.concreteType===qe.ACTAccessRequirement)if(h){let A;switch(h){case Le.SUBMITTED:A=E?"Update Request":"Cancel Request";break;case Le.APPROVED:case Le.REJECTED:case Le.CANCELLED:A="Update Request"}return A}else return"Request access";else return"I Accept Terms of Use"},_=A=>{switch(A.state){case Le.SUBMITTED:b({key:"primary",message:u("strong",{children:"You have submitted a data access request."})});break;case Le.APPROVED:b({key:"success",message:u("strong",{children:"Your data access request has been approved."})});break;case Le.REJECTED:b({key:"danger",message:N(H,{children:[u("strong",{children:"Your data access request has been rejected."}),u("br",{}),A.rejectedReason||""]})});break}return u(H,{})},T=o.termsOfUse,O=o.actContactInfo,R=o.concreteType===qe.TermsOfUseAccessRequirement,k=o.concreteType===qe.ACTAccessRequirement,P=R&&T||k&&O;let V=u(H,{});n?V=N("div",{className:"AcceptRequirementsMarkdown",children:[n&&u(De,{wikiId:n==null?void 0:n.wikiPageId,ownerId:n==null?void 0:n.ownerObjectId,objectType:n==null?void 0:n.ownerObjectType}),v&&u(nn,{className:"access-requirement-list-alert",variant:v.key,children:v.message})]}):P&&(V=u(De,{markdown:R?T:O}));const I=o.concreteType===qe.ManagedACTAccessRequirement;return u(H,{children:N("div",{"data-testid":"RequestDataAccess",className:"requirement-container",children:[u(Mt,{isCompleted:p}),N("div",{className:"terms-of-use-content",children:[p?N("div",{children:[u("p",{children:I?"Your data access request has been approved.":"You have accepted the terms of use."}),N("p",{style:{marginBottom:"0"},children:[I&&u("button",{className:"update-request-button",onClick:()=>{y()},style:{paddingLeft:"0",marginRight:"2rem"},children:C()}),u("a",{onClick:()=>{c(!d)},children:"View Terms"})]}),u("div",{className:`view-terms ${d?"hidden":"show"}`,children:V})]}):V,a&&N("div",{className:`button-container ${p?"hide":"default"}`,children:[u("div",{className:"accept-button-container",children:u("button",{className:"accept-button",onClick:w,children:C()})}),u("div",{className:"not-accept-button-container",children:u("button",{className:"not-accpet-button",onClick:()=>i==null?void 0:i(),children:"I do not accept"})})]})]})]})})};try{Vo.displayName="RequestDataAccess",Vo.__docgenInfo={description:"",displayName:"RequestDataAccess",props:{user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},wikiPage:{defaultValue:null,description:"",name:"wikiPage",required:!0,type:{name:"WikiPageKey | undefined"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"AccessRequirement | ManagedACTAccessRequirement | SelfSignAccessRequirement | TermsOfUseAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!1,type:{name:"ManagedACTAccessRequirementStatus"}},showButton:{defaultValue:null,description:"",name:"showButton",required:!1,type:{name:"boolean"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccess.tsx#RequestDataAccess"]={docgenInfo:Vo.__docgenInfo,name:"RequestDataAccess",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccess.tsx#RequestDataAccess"})}catch{}const zR=e=>{const{entityId:t,user:n,accessRequirement:r,accessRequirementStatus:o,onHide:a,requestDataStepCallback:i}=e,{accessToken:s}=ie(),[l,d]=x.exports.useState();return x.exports.useEffect(()=>{(async()=>{try{const f=await $a(s,r.id);d(f)}catch(f){console.error("Error on get ManagedACTAccessRequirement",f)}})()},[s,r]),u(Vo,{accessRequirement:r,accessRequirementStatus:o,entityId:t,user:n,wikiPage:l,onHide:a,requestDataStepCallback:i})};try{ManagedACTAccessRequirement.displayName="ManagedACTAccessRequirement",ManagedACTAccessRequirement.__docgenInfo={description:"",displayName:"ManagedACTAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"ManagedACTAccessRequirementStatus"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((props: requestDataStepCallbackProps) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/ManagedACTAccessRequirement.tsx#ManagedACTAccessRequirement"]={docgenInfo:ManagedACTAccessRequirement.__docgenInfo,name:"ManagedACTAccessRequirement",path:"src/lib/containers/access_requirement_list/managedACTAccess/ManagedACTAccessRequirement.tsx#ManagedACTAccessRequirement"})}catch{}const Bo=e=>{const{requestDataStepCallback:t,managedACTAccessRequirement:n,onHide:r}=e,{accessToken:o}=ie(),[a,i]=x.exports.useState(""),[s,l]=x.exports.useState(""),[d,c]=x.exports.useState(""),[f,p]=x.exports.useState(),g=x.exports.useRef({});let h=!0;x.exports.useEffect(()=>(h&&(p(void 0),m()),()=>{h=!1}),[o]);const m=async()=>{try{const E=await dy(String(n.id),o);E.id&&(g.current=E,i(E.projectLead),l(E.institution),c(E.intendedDataUseStatement))}catch(E){console.log("RequestDataAccessStep1: Error getting research project data: ",E)}},v=(E="")=>N(H,{children:[u("strong",{children:"Unable to update research project data."}),u("br",{}),E]});return u(H,{children:N(fe,{className:"access-request-form1",onSubmit:E=>{E.preventDefault();const S=Object.assign({},g.current,{accessRequirementId:String(n.id),institution:s,projectLead:a,intendedDataUseStatement:d});try{uy(S,o).then(y=>{t==null||t({managedACTAccessRequirement:n,step:2,researchProjectId:y.id})}).catch(y=>{console.log("RequestDataAccessStep1: Error updating research project data: ",y),p({key:"danger",message:v(y.reason)})})}catch(y){console.log("RequestDataAccessStep1: Error updating research project data: ",y),p({key:"danger",message:v(y.reason)})}},children:[u(ae.Header,{closeButton:!0,children:u(ae.Title,{className:"AccessRequirementList__title",children:"Request Access"})}),N(ae.Body,{children:[u("p",{children:"Please tell us about your project."}),N(fe.Group,{children:[u(fe.Label,{htmlFor:"project-lead",children:"Project Lead"}),u(fe.Control,{id:"project-lead",type:"text",value:a,required:!0,onChange:E=>i(E.target.value)})]}),N(fe.Group,{children:[u(fe.Label,{htmlFor:"institution",children:"Institution"}),u(fe.Control,{id:"institution",type:"text",value:s,required:!0,onChange:E=>l(E.target.value)})]}),n.isIDURequired&&N(fe.Group,{children:[N(fe.Label,{htmlFor:"data-use",children:["Intended Data Use Statement -",n.isIDUPublic&&u("i",{id:"idu-visible",children:"this will be visible to the public"})]}),u(fe.Control,{id:"data-use",as:"textarea",value:d,rows:10,required:!0,onChange:E=>c(E.target.value)})]}),f&&u(nn,{variant:f.key,children:f.message})]}),N(ae.Footer,{children:[u(_e,{variant:"link",onClick:()=>r==null?void 0:r(),children:"Cancel"}),u(_e,{variant:"primary",type:"submit",children:"Save changes"})]})]})})};try{Bo.displayName="RequestDataAccessStep1",Bo.__docgenInfo={description:"",displayName:"RequestDataAccessStep1",props:{requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!1,type:{name:"((props: requestDataStepCallbackProps) => void)"}},managedACTAccessRequirement:{defaultValue:null,description:"",name:"managedACTAccessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep1.tsx#RequestDataAccessStep1"]={docgenInfo:Bo.__docgenInfo,name:"RequestDataAccessStep1",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep1.tsx#RequestDataAccessStep1"})}catch{}const jt=e=>{const{id:t,fileHandleAssociation:n,className:r,variant:o,fileName:a}=e,{accessToken:i}=ie(),s=async()=>{if(!n.fileHandleId||!i)return;const l={requestedFiles:[n],includePreSignedURLs:!0,includeFileHandles:!1,includePreviewPreSignedURLs:!1};try{const c=(await An(l,i)).requestedFiles[0].preSignedURL;c?window.open(c):console.log("Fail to get file download link")}catch(d){console.log("Fail to get file download link",d)}};return u(H,{children:u(_e,{id:t,variant:o,className:r,onClick:l=>s(),children:a})})};try{jt.displayName="DirectDownloadButton",jt.__docgenInfo={description:"",displayName:"DirectDownloadButton",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},fileName:{defaultValue:null,description:"",name:"fileName",required:!0,type:{name:"string | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DirectDownloadButton.tsx#DirectDownloadButton"]={docgenInfo:jt.__docgenInfo,name:"DirectDownloadButton",path:"src/lib/containers/DirectDownloadButton.tsx#DirectDownloadButton"})}catch{}const Fo=e=>{const{requestDataStepCallback:t,managedACTAccessRequirement:n,entityId:r,user:o,researchProjectId:a}=e,{accessToken:i}=ie(),[s,l]=x.exports.useState(),[d,c]=x.exports.useState(),[f,p]=x.exports.useState(),[g,h]=x.exports.useState([]),[m,v]=x.exports.useState(),[b,E]=x.exports.useState(),[S,y]=x.exports.useState(!1),[w,C]=x.exports.useState([]),_={},T={requestedFiles:[],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1};let O=!0;x.exports.useEffect(()=>(O&&(E(void 0),R()),()=>{O=!1}),[i,a]);const R=async()=>{const D=await fy(String(n.id),i);if(D.accessorChanges){const L=new Set;D.accessorChanges=D.accessorChanges.filter(F=>L.has(F.userId)?!1:L.add(F.userId))}D.concreteType==="org.sagebionetworks.repo.model.dataaccess.Renewal"&&y(!0),D.researchProjectId=a,v(D),k(D),P(D)},k=D=>{const L=D.accessorChanges,F=[];!L||!L.length?(F.push(o.ownerId),v(K=>Object.assign({},K,{accessorChanges:[{userId:o.ownerId,type:mt.GAIN_ACCESS}]}))):L.forEach(K=>{F.push(K.userId)});const Y=F.map(K=>py(i,K));Promise.all(Y).then(K=>{const Q=K.map((X,j)=>{var ye;const ce=L&&((ye=L[j])==null?void 0:ye.type)?L[j].type:mt.GAIN_ACCESS;return{profile:X,accessType:ce}});C(Q)})},P=D=>{if(n.isDUCRequired&&n.ducTemplateFileHandleId){const L={associateObjectId:String(n.id),associateObjectType:Re.AccessRequirementAttachment,fileHandleId:n.ducTemplateFileHandleId};T.requestedFiles.push(L),_[n.ducTemplateFileHandleId]||(_[n.ducTemplateFileHandleId]=[]),_[n.ducTemplateFileHandleId].push("DUCTemplate"),l(L)}if(n.isDUCRequired&&D.ducFileHandleId){const L={associateObjectId:D.id,associateObjectType:Re.DataAccessRequestAttachment,fileHandleId:D.ducFileHandleId};T.requestedFiles.push(L),_[D.ducFileHandleId]||(_[D.ducFileHandleId]=[]),_[D.ducFileHandleId].push("DUC"),c(L)}if(n.isIRBApprovalRequired&&D.irbFileHandleId){const L={associateObjectId:D.id,associateObjectType:Re.DataAccessRequestAttachment,fileHandleId:D.irbFileHandleId};T.requestedFiles.push(L),_[D.irbFileHandleId]||(_[D.irbFileHandleId]=[]),_[D.irbFileHandleId].push("IRB"),p(L)}D.attachments&&D.attachments.length&&D.attachments.forEach(L=>{T.requestedFiles.push({associateObjectId:D.id,associateObjectType:Re.DataAccessRequestAttachment,fileHandleId:L}),_[L]||(_[L]=[]),_[L].push("attachments")}),T.requestedFiles.length&&An(T,i).then(L=>{L.requestedFiles.forEach(F=>{const Y=F.fileHandle.fileName,K=_[F.fileHandleId];K.forEach(Q=>{switch(Q){case"DUCTemplate":l(X=>Object.assign({},X,{fileName:Y})),_[F.fileHandleId].splice(K.indexOf("DUCTemplate"),1);break;case"DUC":c(X=>Object.assign({},X,{fileName:Y})),_[F.fileHandleId].splice(K.indexOf("DUC"),1);break;case"IRB":p(X=>Object.assign({},X,{fileName:Y})),_[F.fileHandleId].splice(K.indexOf("IRB"),1);break;case"attachments":h(X=>[...X,{fileName:Y,associateObjectId:D.id,associateObjectType:Re.DataAccessRequestAttachment,fileHandleId:F.fileHandleId}]),_[F.fileHandleId].splice(K.indexOf("attachments"),1);break}})})})},V=async()=>{if(m)try{const D=await ep(m,i);if(D&&D.etag){const L={requestId:D.id,requestEtag:D.etag,subjectId:r,subjectType:zl.ENTITY};v(K=>Object.assign({},K,{etag:D.etag}));const F=await my(L,i),Y=q(F);F.state===Le.REJECTED?E({key:"danger",message:Y}):t==null||t({step:5})}else E({key:"danger",message:I()})}catch(D){console.log("RequestDataAccessStep2: Error updating form",D),E({key:"danger",message:I(D.reason)})}},I=(D="")=>N(H,{children:[u("strong",{children:"Sorry, there is an error in submitting your request."}),u("br",{}),D]}),q=D=>{const L="The information has been ";switch(D.state){case Le.SUBMITTED:return N("strong",{children:[L," submitted."]});case Le.APPROVED:return N("strong",{children:[L," approved."]});case Le.CANCELLED:return N("strong",{children:[L," canceled."]});case Le.REJECTED:return N(H,{children:[N("strong",{children:[L," rejected."]})," ",D.rejectedReason,". Please close this dialog and try again later."]});default:return u(H,{})}},A=D=>{const L=w.filter(Y=>Y.profile.ownerId!==D);C(L);const F=L.map(Y=>({userId:Y.profile.ownerId,type:Y.accessType}));v(Y=>Object.assign({},Y,{accessorChanges:F}))},M=D=>{const L=g.filter(Y=>Y.fileHandleId!==D);h(L);const F=L.map(Y=>Y.fileHandleId);v(Y=>Object.assign({},Y,{attachments:F}))},$=D=>{if(D.resp&&D.success){const L=D.resp;if(D.context==="attachments"){const F=m!=null&&m.attachments?m==null?void 0:m.attachments:[];F==null||F.push(L.fileHandleId),v(Y=>Object.assign({},Y,{attachments:F})),h(Y=>[...Y,{fileName:L.fileName,fileHandleId:L.fileHandleId}])}else v(F=>Object.assign({},F,{[D.context]:L.fileHandleId})),D.context==="ducFileHandleId"&&c(F=>Object.assign({},F,{fileName:L.fileName,fileHandleId:L.fileHandleId})),D.context==="irbFileHandleId"&&p(F=>Object.assign({},F,{fileName:L.fileName,fileHandleId:L.fileHandleId}))}else!D.success&&D.error&&(console.log("RequestDataAccessStep2: Error uploading the file",D.error),E({key:"danger",message:I(D.error.reason)}))},z=D=>{if(!w.map(F=>F.profile.ownerId).includes(D.ownerId)){C(K=>{var Q,X;return[...K,{profile:{ownerId:D.ownerId,firstName:(Q=D.firstName)!=null?Q:"",lastName:(X=D.lastName)!=null?X:"",userName:D.userName},accessType:mt.GAIN_ACCESS}]});const F={userId:D.ownerId,type:mt.GAIN_ACCESS},Y=(m==null?void 0:m.accessorChanges)||[];Y.push(F),v(K=>Object.assign({},K,{accessorChanges:Y}))}},B=(D,L)=>{const F=D.target.value;switch(L){case"publications":v(Y=>Object.assign({},Y,{publication:F}));break;case"summaryOfUse":v(Y=>Object.assign({},Y,{summaryOfUse:F}));break}},U=(D,L)=>{const F=[...w],Y=F.findIndex(X=>X.profile.ownerId===L);F[Y].accessType=D,C(F);const K=(m==null?void 0:m.accessorChanges)||[],Q=K.findIndex(X=>X.userId===L);K[Q].type=D,v(X=>Object.assign({},X,{accessorChanges:K}))},G=()=>{let D="",L="";return n.isCertifiedUserRequired&&(D="https://help.synapse.org/docs/User-Types.2007072795.html#UserAccountTiers-CertifiedUsers",L="All data requesters must be a certified user."),n.isValidatedProfileRequired&&(D="https://help.synapse.org/docs/User-Types.2007072795.html#UserAccountTiers-ValidatedUsers",L="All data requesters must have a validated user profile."),D&&L?N(H,{children:[L,u("a",{href:D,target:"_blank",rel:"noreferrer",children:u(pe,{icon:"info"})})]}):u(H,{})};return u(H,{children:N(fe,{className:"access-request-form2",onSubmit:D=>D.preventDefault(),children:[u(ae.Header,{closeButton:!0,children:u(ae.Title,{className:"AccessRequirementList__title",children:"Request Access"})}),N(ae.Body,{children:[u("p",{children:"Please provide the information below to submit the request for access."}),N(fe.Group,{children:[u(fe.Label,{htmlFor:"requesters",style:{margin:"0"},children:"Data Requesters"}),u("br",{}),N("span",{className:"requester-label",children:[n.isDUCRequired&&N(H,{children:["This list should match those listed on your DUC.",u("br",{})]}),G()]}),u(Eb,{id:"requesters",typeFilter:hy.USERS_ONLY,onSelectCallback:z,filterUserIds:w.map(D=>D.profile.ownerId)})]}),u(fe.Group,{style:{marginBottom:"4rem"},children:w.map((D,L)=>N("div",{className:"list-items",children:[u(Dl,{userProfile:D.profile,showAccountLevelIcon:!0,disableLink:!0,showFullName:!0}),o.ownerId!==D.profile.ownerId&&D.accessType===mt.GAIN_ACCESS&&u(_e,{className:"clear-x",variant:"link",onClick:()=>A(D.profile.ownerId),children:u(pe,{icon:"clear"})}),S&&D.accessType!==mt.GAIN_ACCESS&&u(H,{children:u(xb,{id:`accessor-renewal-${D.profile.ownerId}`,value:D.accessType,options:[{label:"Renew",value:mt.RENEW_ACCESS},{label:"Revoke",value:mt.REVOKE_ACCESS}],onChange:F=>U(F,D.profile.ownerId)})})]},`accessor-${L}`))}),(n==null?void 0:n.isDUCRequired)&&N(H,{children:[N(fe.Group,{children:[u(fe.Label,{htmlFor:"duc-temp",className:"SRC-noMargin",children:"DUC template"}),u("br",{}),s&&u("div",{children:u(jt,{fileHandleAssociation:{associateObjectId:s==null?void 0:s.associateObjectId,associateObjectType:s.associateObjectType,fileHandleId:s.fileHandleId},fileName:s.fileName,id:"duc-temp",variant:"link",className:"SRC-noPadding"})})]}),N(fe.Group,{children:[u(fe.Label,{htmlFor:"duc",className:"SRC-noMargin",children:"Upload DUC"}),u("br",{}),d&&u("div",{children:u(jt,{fileHandleAssociation:{associateObjectId:d.associateObjectId,associateObjectType:d.associateObjectType,fileHandleId:d.fileHandleId},fileName:d==null?void 0:d.fileName,id:"duc-download",variant:"link",className:"SRC-noPadding"})}),u(ai,{id:"duc-browse",variant:"light-primary-base",uploadCallback:$,context:"ducFileHandleId"})]})]}),(n==null?void 0:n.isIRBApprovalRequired)&&N(fe.Group,{children:[u(fe.Label,{htmlFor:"irb",className:"SRC-noMargin",children:"Upload IRB approval"}),u("br",{}),f&&u("div",{children:u(jt,{fileHandleAssociation:{associateObjectId:f.associateObjectId,associateObjectType:f.associateObjectType,fileHandleId:f.fileHandleId},fileName:f==null?void 0:f.fileName,id:"irb-download",variant:"link",className:"SRC-noPadding"})}),u(ai,{id:"irb-browse",variant:"light-primary-base",uploadCallback:$,context:"irbFileHandleId"})]}),(n==null?void 0:n.areOtherAttachmentsRequired)&&N(fe.Group,{children:[u(fe.Label,{className:"SRC-noMargin",children:"Upload other required documents"}),u("br",{}),g.map((D,L)=>N("div",{className:"list-items",children:[u(jt,{fileHandleAssociation:{associateObjectId:D.associateObjectId,associateObjectType:D.associateObjectType,fileHandleId:D.fileHandleId},fileName:D==null?void 0:D.fileName,variant:"link",className:"SRC-noPadding attachment-download"}),u(_e,{className:"clear-x",variant:"link",onClick:()=>M(D.fileHandleId),children:u(pe,{icon:"clear"})})]},`file-attachment-${L}`)),u(ai,{id:"attachment-browse",variant:"light-primary-base",uploadCallback:$,context:"attachments"})]}),S&&N(H,{children:[N(fe.Group,{children:[u(fe.Label,{htmlFor:"publications",className:"SRC-noMargin",children:"Publication(s)"}),u(fe.Control,{id:"publications",as:"textarea",rows:3,onChange:D=>B(D,"publications")})]}),N(fe.Group,{children:[u(fe.Label,{htmlFor:"summaryOfUse",className:"SRC-noMargin",children:"Summary of use"}),u(fe.Control,{id:"summaryOfUse",as:"textarea",rows:3,onChange:D=>B(D,"summaryOfUse")})]})]}),b&&u(nn,{variant:b.key,children:b.message})]}),u(ae.Footer,{children:N(H,{children:[u(_e,{variant:"link",onClick:()=>t==null?void 0:t({step:3,formSubmitRequestObject:m}),children:"Cancel"}),u(_e,{variant:"primary",onClick:()=>V(),children:"Submit"})]})})]})})};try{Fo.displayName="RequestDataAccessStep2",Fo.__docgenInfo={description:"",displayName:"RequestDataAccessStep2",props:{managedACTAccessRequirement:{defaultValue:null,description:"",name:"managedACTAccessRequirement",required:!0,type:{name:"ManagedACTAccessRequirement"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},requestDataStepCallback:{defaultValue:null,description:"",name:"requestDataStepCallback",required:!0,type:{name:"(props: requestDataStepCallbackProps) => void"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile"}},researchProjectId:{defaultValue:null,description:"",name:"researchProjectId",required:!0,type:{name:"string"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep2.tsx#RequestDataAccessStep2"]={docgenInfo:Fo.__docgenInfo,name:"RequestDataAccessStep2",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessStep2.tsx#RequestDataAccessStep2"})}catch{}const $o=e=>{const{onHide:t}=e;return N(H,{children:[u(ae.Header,{closeButton:!0,children:u(ae.Title,{className:"AccessRequirementList__title",children:"Your Data Access Request Has Been Submitted!"})}),u(ae.Body,{children:u("p",{style:{margin:"2rem 0"},children:"Your data access request been submitted and is currently being reviewed. Please allow for up to 2 weeks for your request to be reviewed and approved."})}),u(ae.Footer,{children:u(_e,{variant:"primary",onClick:()=>t==null?void 0:t(),children:"Finish"})})]})};try{$o.displayName="RequestDataAccessSuccess",$o.__docgenInfo={description:"",displayName:"RequestDataAccessSuccess",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessSuccess.tsx#RequestDataAccessSuccess"]={docgenInfo:$o.__docgenInfo,name:"RequestDataAccessSuccess",path:"src/lib/containers/access_requirement_list/managedACTAccess/RequestDataAccessSuccess.tsx#RequestDataAccessSuccess"})}catch{}function UR({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:o}){const{accessToken:a}=ie(),[i,s]=x.exports.useState(void 0),[l,d]=x.exports.useState(void 0),[c,f]=x.exports.useState(!1);return x.exports.useEffect(()=>{(async()=>{try{f(!0);const g=await $a(a,e.id);s(g);const h=ky|Ly;if(t!=null&&t.ownerId){const m=await gy(t.ownerId,h,a);d(m)}}catch(g){console.error("Error on get Self Sign Access Requirement: ",g)}finally{f(!1)}})()},[e,a,t]),N(H,{children:[e.isCertifiedUserRequired&&N("div",{className:"requirement-container",children:[u(Mt,{isCompleted:l==null?void 0:l.isCertified}),N("div",{children:[N("p",{className:"self-sign-access-title bold-text",children:["You must first become a",u("a",{className:"self-sign-access-certified bold-text",href:`${$e.PORTAL}#!Quiz:`,children:"\xA0certified user"})]}),c&&u("span",{className:"spinner"}),u("p",{className:`self-sign-access-certified-success-text ${l!=null&&l.isCertified?"show":"hidden"}`,children:"You are a certified user"})]})]}),e.isValidatedProfileRequired&&N("div",{className:"requirement-container",children:[u(Mt,{isCompleted:l==null?void 0:l.isVerified}),N("div",{children:[N("p",{className:"self-sign-access-title bold-text",children:["You must first apply to have your",u("a",{className:"self-sign-access-validated bold-text",href:`${$e.PORTAL}#!Profile:v/settings`,children:"\xA0user profile validated"})]}),c&&u("span",{className:"spinner"}),u("p",{className:`self-sign-access-verified-success-text ${l!=null&&l.isVerified?"show":"hidden"}`,children:"You have applied to have user profile valiadation successfully"})]})]}),u(_n,{user:t,wikiPage:i,accessRequirement:e,accessRequirementStatus:r,onHide:n,entityId:o})]})}try{SelfSignAccessRequirement.displayName="SelfSignAccessRequirement",SelfSignAccessRequirement.__docgenInfo={description:"",displayName:"SelfSignAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"SelfSignAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/SelfSignAccessRequirement.tsx#SelfSignAccessRequirement"]={docgenInfo:SelfSignAccessRequirement.__docgenInfo,name:"SelfSignAccessRequirement",path:"src/lib/containers/access_requirement_list/SelfSignAccessRequirement.tsx#SelfSignAccessRequirement"})}catch{}function YR({accessRequirement:e,user:t,onHide:n,accessRequirementStatus:r,entityId:o}){const{accessToken:a}=ie(),[i,s]=x.exports.useState(void 0),[l,d]=x.exports.useState(!1);return x.exports.useEffect(()=>{(async()=>{d(!0);try{const f=await $a(a,e.id);s(f)}catch(f){console.error("Error on prepare terms of use ",f)}finally{d(!1)}})()},[a,e]),N(H,{children:[l&&u("span",{className:"spinner"}),u(_n,{user:t,wikiPage:i,accessRequirement:e,accessRequirementStatus:r,onHide:n,entityId:o})]})}try{TermsOfUseAccessRequirement.displayName="TermsOfUseAccessRequirement",TermsOfUseAccessRequirement.__docgenInfo={description:"",displayName:"TermsOfUseAccessRequirement",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirement:{defaultValue:null,description:"",name:"accessRequirement",required:!0,type:{name:"TermsOfUseAccessRequirement"}},accessRequirementStatus:{defaultValue:null,description:"",name:"accessRequirementStatus",required:!0,type:{name:"AccessRequirementStatus"}},user:{defaultValue:null,description:"",name:"user",required:!0,type:{name:"UserProfile | undefined"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"Function"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/TermsOfUseAccessRequirement.tsx#TermsOfUseAccessRequirement"]={docgenInfo:TermsOfUseAccessRequirement.__docgenInfo,name:"TermsOfUseAccessRequirement",path:"src/lib/containers/access_requirement_list/TermsOfUseAccessRequirement.tsx#TermsOfUseAccessRequirement"})}catch{}var qe=(e=>(e.SelfSignAccessRequirement="org.sagebionetworks.repo.model.SelfSignAccessRequirement",e.TermsOfUseAccessRequirement="org.sagebionetworks.repo.model.TermsOfUseAccessRequirement",e.ManagedACTAccessRequirement="org.sagebionetworks.repo.model.ManagedACTAccessRequirement",e.ACTAccessRequirement="org.sagebionetworks.repo.model.ACTAccessRequirement",e))(qe||{});const Ho=e=>e.filter(jR).length>0,jR=e=>{switch(e.concreteType){case"org.sagebionetworks.repo.model.ACTAccessRequirement":case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":return!1;default:return!0}},Af=async(e,t)=>{const n=t.map(i=>by(e,i.id)),r=await Promise.all(n),o=t.map(i=>({accessRequirement:i,accessRequirementStatus:r.find(s=>Number(s.accessRequirementId)===i.id)}));return cb(o,i=>-1*Number(i.accessRequirementStatus.isApproved))};function zo({entityId:e,onHide:t,accessRequirementFromProps:n,renderAsModal:r,numberOfFilesAffected:o}){var R;const{accessToken:a}=ie(),[i,s]=x.exports.useState(void 0),[l,d]=x.exports.useState(),[c,f]=x.exports.useState(),[p,g]=x.exports.useState(""),[h,m]=x.exports.useState(),v={ids:[e],type:"ENTITY_HEADER"},E=$R(a)||!i,S=sp(v),{data:y}=yy();x.exports.useEffect(()=>{let k=!1;return(async()=>{try{if(!E)return;if(n){const V=await Af(a,n);k||s(V)}else{const V=await tp(a,e),I=await Af(a,V);k||s(I)}}catch(V){console.error("Error on get access requirements: ",V)}})(),()=>{k=!0}},[a,e,n,E]);const w=Boolean(a),C=(k,P)=>{switch(k.concreteType){case"org.sagebionetworks.repo.model.SelfSignAccessRequirement":return u(UR,{accessRequirement:k,accessRequirementStatus:P,user:y,onHide:t,entityId:e});case"org.sagebionetworks.repo.model.TermsOfUseAccessRequirement":return u(YR,{accessRequirement:k,accessRequirementStatus:P,user:y,onHide:t,entityId:e});case"org.sagebionetworks.repo.model.ManagedACTAccessRequirement":return u(zR,{accessRequirement:k,accessRequirementStatus:P,user:y,onHide:t,entityId:e,requestDataStepCallback:_});case"org.sagebionetworks.repo.model.ACTAccessRequirement":return u(HR,{accessRequirement:k,accessRequirementStatus:P,user:y,onHide:t,entityId:e});default:return}},_=k=>{const{managedACTAccessRequirement:P,step:V,researchProjectId:I,formSubmitRequestObject:q}=k;P&&f(P),I&&g(I),q&&m(q),d(V)},T=N(H,{children:[u(ae.Header,{closeButton:!0,children:u(ae.Title,{className:"AccessRequirementList__title",children:"Data Access Request"})}),u(ae.Body,{children:N("div",{children:[u("h4",{className:"AccessRequirementList__instruction AccessRequirementList__access",children:"Access For:"}),u("span",{className:"AccessRequirementList__file-icon-container",children:u(pe,{icon:"file",sx:{width:"30px"}})}),"\xA0",o&&N("span",{children:[o," File(s)"]}),!o&&u("a",{className:"AccessRequirementList__register-text-link",href:`${$e.PORTAL}#!Synapse:${e}`,children:(R=S[0])==null?void 0:R.name}),u("h4",{className:"AccessRequirementList__instruction",style:{marginTop:"3rem"},children:"What do I need to do?"}),N("div",{className:"requirement-container",children:[u(Mt,{isCompleted:w}),N("div",{children:[!w&&N(H,{children:[N("p",{className:"AccessRequirementList__signin",children:[u("a",{className:`${xl} SRC-boldText `,children:"Sign in\xA0"}),"with a Sage Platform (Synapse) user account."]}),N("p",{children:["If you do not have a Sage Account, you can",u("a",{className:"register-text-link bold-text",href:`${$e.PORTAL}#!RegisterAccount:0`,children:"\xA0Register for free."})]})]}),w&&N("p",{children:["You have signed in with the Sage Platform (Synapse) user account ",N("b",{children:[y==null?void 0:y.userName,"@synapse.org"]})]})]})]}),i==null?void 0:i.map(({accessRequirement:k,accessRequirementStatus:P})=>u(ge.Fragment,{children:C(k,P)},k.id))]})})]});let O=T;if(r){switch(l){case 1:O=u(Bo,{managedACTAccessRequirement:c,requestDataStepCallback:_,onHide:()=>t==null?void 0:t()});break;case 2:O=u(Fo,{user:y,researchProjectId:p,managedACTAccessRequirement:c,entityId:e,requestDataStepCallback:_,onHide:()=>t==null?void 0:t()});break;case 3:O=u(Mo,{formSubmitRequestObject:h,onHide:()=>t==null?void 0:t()});break;case 4:O=N(H,{children:[u(ae.Header,{closeButton:!1,children:u(ae.Title,{className:"AccessRequirementList__title",children:"Please Log In"})}),u(ae.Body,{className:"AccessRequirementList login-modal ",children:u(vy,{sessionCallback:()=>{window.location.reload()}})})]});break;case 5:O=u($o,{onHide:()=>t==null?void 0:t()});break;default:O=T}return u(ae,{className:l?"bootstrap-4-backport AccessRequirementList modal-auto-height":"bootstrap-4-backport AccessRequirementList",onHide:()=>t==null?void 0:t(),show:!0,animation:!1,centered:!0,scrollable:!0,size:"lg",children:O})}return u("div",{className:"AccessRequirementList",children:O})}try{zo.displayName="AccessRequirementList",zo.__docgenInfo={description:"",displayName:"AccessRequirementList",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},accessRequirementFromProps:{defaultValue:null,description:"",name:"accessRequirementFromProps",required:!1,type:{name:"AccessRequirement[]"}},onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},renderAsModal:{defaultValue:null,description:"",name:"renderAsModal",required:!1,type:{name:"boolean"}},numberOfFilesAffected:{defaultValue:null,description:"",name:"numberOfFilesAffected",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AccessRequirementList.tsx#AccessRequirementList"]={docgenInfo:zo.__docgenInfo,name:"AccessRequirementList",path:"src/lib/containers/access_requirement_list/AccessRequirementList.tsx#AccessRequirementList"})}catch{}try{Ho.displayName="checkHasUnsportedRequirement",Ho.__docgenInfo={description:"",displayName:"checkHasUnsportedRequirement",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/access_requirement_list/AccessRequirementList.tsx#checkHasUnsportedRequirement"]={docgenInfo:Ho.__docgenInfo,name:"checkHasUnsportedRequirement",path:"src/lib/containers/access_requirement_list/AccessRequirementList.tsx#checkHasUnsportedRequirement"})}catch{}const WR={AccessBlockedToAnonymous:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You must sign in to access this file."},AccessBlockedByRestriction:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You must request access to this restricted file."},AccessBlockedByACL:{icon:"accessClosed",color:e=>e.palette.warning.main,tooltipText:"You do not have download access for this item."},Accessible:{icon:"accessOpen",color:e=>e.palette.success.main,tooltipText:""},NoFileHandle:{icon:"accessOpen",color:e=>e.palette.success.main,tooltipText:""}};function kf(e){const{downloadType:t}=e,n=Lp();if(t){const r=WR[t];return u(pe,{icon:r.icon,label:r.tooltipText,sx:{color:r.color(n)}})}return u(H,{})}function Uo(e,t){const[n,r]=ge.useState(),{accessToken:o}=ie(),a=parseInt(t!=null?t:""),{data:i,error:s}=Pp(e,Number.isNaN(a)?void 0:a,{includeEntity:!0,includePermissions:!0}),l=ge.useMemo(()=>({restrictableObjectType:zl.ENTITY,objectId:e}),[e]),{data:d}=kp(l),c=i==null?void 0:i.entity,f=i==null?void 0:i.permissions;return ge.useEffect(()=>{d&&d.hasUnmetAccessRequirement?r("AccessBlockedByRestriction"):c&&(f==null?void 0:f.canDownload)?wl(c)&&c.dataFileHandleId?r("Accessible"):r("NoFileHandle"):f&&!f.canDownload&&r(o?"AccessBlockedByACL":"AccessBlockedToAnonymous")},[o,c,s,f,d]),n}function Yo(e){const[t,n]=ge.useState(!1),[r,o]=ge.useState([]),{entityId:a,entityVersionNumber:i}=e,s=Uo(a,i),{accessToken:l}=ie(),d=ge.useMemo(()=>({restrictableObjectType:zl.ENTITY,objectId:a}),[a]),{data:c}=kp(d),f=()=>{tp(l,a).then(h=>{Ho(h)?window.open(`${Vy(By.PORTAL_ENDPOINT)}#!AccessRequirements:ID=${a}&TYPE=ENTITY`,"_blank"):(o(h),n(!0))})},p=x.exports.useMemo(()=>{if(!c)return u(H,{});const h=c==null?void 0:c.hasUnmetAccessRequirement,m=c==null?void 0:c.restrictionLevel;let v="";if(h)v="Request Access";else{if(_b.OPEN===m)return u(H,{});v="View Terms"}return N(H,{children:[u("a",{style:{fontSize:"14px",cursor:"pointer",marginLeft:"5px",verticalAlign:"middle"},className:e.className,onClick:f,children:v}),t&&u(zo,{entityId:a,accessRequirementFromProps:r,renderAsModal:!0,onHide:()=>{n(!1)}})]})},[a,c,r,t]);return s===void 0?u(H,{}):N("span",{style:{whiteSpace:"nowrap"},children:[s==="AccessBlockedToAnonymous"?u("button",{type:"button",className:xl,onClick:h=>{if(h.isTrusted){const m=new MouseEvent("click",{bubbles:!0});h.currentTarget.dispatchEvent(m)}},children:u(kf,{downloadType:s})}):u(kf,{downloadType:s}),p]})}try{Uo.displayName="useGetFileHandleDownloadType",Uo.__docgenInfo={description:`Determines whether an Entity is accessible for download, or if it is blocked by the ACL or unmet Access Requirements.

To make download available, and determine if the file is downloadable via the web, see {@link DirectDownload.tsx }`,displayName:"useGetFileHandleDownloadType",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HasAccessV2.tsx#useGetFileHandleDownloadType"]={docgenInfo:Uo.__docgenInfo,name:"useGetFileHandleDownloadType",path:"src/lib/containers/HasAccessV2.tsx#useGetFileHandleDownloadType"})}catch{}try{Yo.displayName="HasAccessV2",Yo.__docgenInfo={description:`HasAccess shows if the user has access to the file or not.

The component's behavior changes whether it's passed in a FileHandle or not.
If passed a file handle then it will give more detailed information about the download.`,displayName:"HasAccessV2",props:{onHide:{defaultValue:null,description:"",name:"onHide",required:!1,type:{name:"(() => void)"}},entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}},entityVersionNumber:{defaultValue:null,description:"",name:"entityVersionNumber",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HasAccessV2.tsx#HasAccessV2"]={docgenInfo:Yo.__docgenInfo,name:"HasAccessV2",path:"src/lib/containers/HasAccessV2.tsx#HasAccessV2"})}catch{}const jo=e=>{const{accessToken:t}=ie(),{entityIdList:n}=e,[r,o]=x.exports.useState([u(H,{})]),{ref:a,inView:i}=Pn();let s=!0;x.exports.useEffect(()=>(i&&l(),()=>{s=!1}),[n,i]);const l=()=>{!n.length||Sy(n,t).then(d=>{if(s){const c=d.results.map(f=>u("p",{children:u(Xs,{entity:f,displayTextField:"name"})},f.id));o(c)}}).catch(d=>{console.log("EntityIdList: Error getting entity headers",d)})};return u("span",{ref:a,children:r})};try{jo.displayName="EntityIdList",jo.__docgenInfo={description:"",displayName:"EntityIdList",props:{entityIdList:{defaultValue:null,description:"",name:"entityIdList",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/EntityIdList.tsx#EntityIdList"]={docgenInfo:jo.__docgenInfo,name:"EntityIdList",path:"src/lib/containers/EntityIdList.tsx#EntityIdList"})}catch{}const Wo=e=>{const{accessToken:t}=ie(),{evaluationId:n}=e,[r,o]=x.exports.useState(),{ref:a,inView:i}=Pn();let s=!0;x.exports.useEffect(()=>(s&&i&&l(),()=>{s=!1}),[n,i]);const l=()=>{!n||wy(n,t).then(d=>{o(d.name)}).catch(d=>{console.log("EvaluationIdListRenderer: Error getting evaluation queue names",d)})};return u("span",{ref:a,children:r})};try{Wo.displayName="EvaluationIdRenderer",Wo.__docgenInfo={description:"",displayName:"EvaluationIdRenderer",props:{evaluationId:{defaultValue:null,description:"",name:"evaluationId",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/EvaluationIdRenderer.tsx#EvaluationIdRenderer"]={docgenInfo:Wo.__docgenInfo,name:"EvaluationIdRenderer",path:"src/lib/containers/EvaluationIdRenderer.tsx#EvaluationIdRenderer"})}catch{}const Go=e=>{const{accessToken:t}=ie(),{userIds:n}=e,[r,o]=x.exports.useState(),{ref:a,inView:i}=Pn();let s=!0;x.exports.useEffect(()=>(s&&i&&l(),()=>{s=!1}),[n,i]);const l=()=>{!n.length||Cy(n,t).then(d=>{const c=d.list.map(f=>u(Dl,{userProfile:f,className:"SRC-marginFifteen"},f.ownerId));o(c)}).catch(d=>{console.log("UserIdList: Error getting user profiles",d)})};return u("span",{ref:a,children:r})};try{Go.displayName="UserIdList",Go.__docgenInfo={description:"",displayName:"UserIdList",props:{userIds:{defaultValue:null,description:"",name:"userIds",required:!0,type:{name:"string[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/UserIdList.tsx#UserIdList"]={docgenInfo:Go.__docgenInfo,name:"UserIdList",path:"src/lib/containers/UserIdList.tsx#UserIdList"})}catch{}const Ko=({columnType:e,columnValue:t,isBold:n,mapEntityIdToHeader:r,mapUserIdToHeader:o,columnLinkConfig:a,columnName:i,selectColumns:s,columnModels:l,rowData:d,rowId:c,rowVersionNumber:f})=>{const{entity:p}=Tt();if(!t)return N("p",{className:"SRC-center-text SRC-inactive",children:[" ",pb]});if(a)return u(dr,{value:t,columnName:i,selectColumns:s,columnModels:l,isHeader:!1,labelLink:a,rowData:d,rowId:c});if(p&&(hn(p)||Tn(p)||np(p))&&(i==="id"||i==="name")&&c&&f){const g=`syn${c.toString()}`;if(Object.prototype.hasOwnProperty.call(r,g))return u("p",{children:u(Xs,{entity:r[g],versionNumber:f,className:`${n}`,showIcon:!1,displayTextField:i})})}switch(e){case re.ENTITYID:if(Object.prototype.hasOwnProperty.call(r,t))return u("p",{children:u(Xs,{entity:r[t],className:`${n}`,displayTextField:"name"})});break;case re.DATE_LIST:{const g=JSON.parse(t);return N("p",{children:[g.map((h,m)=>N("span",{className:n,children:[pr(Bt(Number(h))),m!==g.length-1?", ":""]},m))," "]})}case re.BOOLEAN_LIST:{const g=JSON.parse(t);return u("p",{children:g.map((h,m)=>N("span",{className:n,children:[h?"true":"false",m!==g.length-1?", ":""]},m))})}case re.FILEHANDLEID:return u(H,{children:p&&u(sr,{associatedObjectId:p.id,associatedObjectType:Re.TableEntity,fileHandleId:t,displayFileName:!0})});case re.ENTITYID_LIST:{const g=JSON.parse(t);return u(jo,{entityIdList:g})}case re.USERID_LIST:{const g=JSON.parse(t);return u(Go,{userIds:g})}case re.STRING_LIST:case re.INTEGER_LIST:{const g=JSON.parse(t);return u("p",{children:g.map((h,m)=>N("span",{className:n,children:[h,m!==g.length-1?", ":""]},h))})}case re.EVALUATIONID:return u(Wo,{evaluationId:t});case re.DATE:return u("p",{className:n,children:pr(Bt(Number(t)))});case re.USERID:if(Object.prototype.hasOwnProperty.call(o,t)){const{ownerId:g,userName:h}=o[t];if(o[t].isIndividual===!1){const m=h===Nc?"public":"people";return h===Nc?N("span",{children:[u(pe,{icon:m})," All registered Synapse users"]}):N("a",{target:"_blank",rel:"noopener noreferrer",href:`${$e.PORTAL}#!Team:${g}`,children:[u(pe,{icon:m})," ",h]})}else return u(On,{userProfile:o[t],preSignedURL:o[t].clientPreSignedURL,size:"SMALL USER CARD"})}break;case re.LINK:return u("a",{target:"_blank",rel:"noopener noreferrer",href:t,children:t});case re.STRING:case re.DOUBLE:case re.INTEGER:case re.BOOLEAN:case re.LARGETEXT:return u("p",{className:n,children:t});default:return console.warn(`ColumnType ${e} has unspecified handler. Rendering the column value.`),u("p",{className:n,children:t})}return u("p",{className:n,children:t})};try{Ko.displayName="SynapseTableCell",Ko.__docgenInfo={description:"",displayName:"SynapseTableCell",props:{columnType:{defaultValue:null,description:"",name:"columnType",required:!0,type:{name:"enum",value:[{value:'"STRING"'},{value:'"DOUBLE"'},{value:'"BOOLEAN"'},{value:'"INTEGER"'},{value:'"DATE"'},{value:'"FILEHANDLEID"'},{value:'"ENTITYID"'},{value:'"LINK"'},{value:'"LARGETEXT"'},{value:'"USERID"'},{value:'"STRING_LIST"'},{value:'"INTEGER_LIST"'},{value:'"BOOLEAN_LIST"'},{value:'"DATE_LIST"'},{value:'"USERID_LIST"'},{value:'"ENTITYID_LIST"'},{value:'"EVALUATIONID"'}]}},columnValue:{defaultValue:null,description:"",name:"columnValue",required:!0,type:{name:"string"}},isBold:{defaultValue:null,description:"",name:"isBold",required:!0,type:{name:"string"}},columnLinkConfig:{defaultValue:null,description:"",name:"columnLinkConfig",required:!1,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink"}},mapEntityIdToHeader:{defaultValue:null,description:"",name:"mapEntityIdToHeader",required:!0,type:{name:"Record<string, EntityHeader>"}},mapUserIdToHeader:{defaultValue:null,description:"",name:"mapUserIdToHeader",required:!0,type:{name:"Partial<UserGroupHeader & UserProfile>"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}},rowVersionNumber:{defaultValue:null,description:"",name:"rowVersionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_table_functions/SynapseTableCell.tsx#SynapseTableCell"]={docgenInfo:Ko.__docgenInfo,name:"SynapseTableCell",path:"src/lib/containers/synapse_table_functions/SynapseTableCell.tsx#SynapseTableCell"})}catch{}const Lf=(e,...t)=>{var r;const n=[];return(r=e==null?void 0:e.selectColumns)==null||r.forEach((o,a)=>{t.includes(o.columnType)&&n.push(a)}),n},qf=(e,t,n)=>{var o;const r=new Set;return(o=e.queryResult)==null||o.queryResults.rows.forEach(a=>{a.values.forEach((i,s)=>{n.includes(s)&&!Object.prototype.hasOwnProperty.call(t,i)&&i&&r.add(i)})}),r},GR=()=>{const{data:e,goToPage:t,pageSize:n,setPageSize:r,currentPage:o}=Uy(),a=e==null?void 0:e.queryCount,i=(l,d)=>{t(d)},s=l=>{const d=l.target.value;r(d)};return o==1&&a&&a<10?u(H,{}):N("div",{children:[u(uS,{page:o,count:Math.ceil(a/n),color:"secondary",onChange:i,style:{display:"inline-block",float:"left"}}),u(_t,{variant:"body1",style:{display:"inline-block"},children:`${a==null?void 0:a.toLocaleString()} total rows /`}),N("select",{name:"page size",onChange:s,style:{padding:"4px",marginLeft:"4px"},value:n,children:[u("option",{value:10,children:"10 per page"}),u("option",{value:25,children:"25 per page"}),u("option",{value:100,children:"100 per page"}),u("option",{value:500,children:"500 per page"})]})]})},Xo=e=>{const{onCopy:t}=e;return u(Ke,{title:"Copy IDs to the clipboard",enterNextDelay:_a,placement:"right",children:u("span",{children:u("button",{"data-testid":"copySynIdsButton",onClick:t,children:u("span",{style:{height:15,marginTop:-1},children:u(pe,{icon:"contentCopy"})})})})})};try{Xo.displayName="InteractiveCopyIdsIcon",Xo.__docgenInfo={description:"",displayName:"InteractiveCopyIdsIcon",props:{onCopy:{defaultValue:null,description:"",name:"onCopy",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/InteractiveCopyIdsIcon.tsx#InteractiveCopyIdsIcon"]={docgenInfo:Xo.__docgenInfo,name:"InteractiveCopyIdsIcon",path:"src/lib/containers/InteractiveCopyIdsIcon.tsx#InteractiveCopyIdsIcon"})}catch{}const KR=()=>{const e=ie(),t=Tt(),[n,r]=x.exports.useState(!1),[o,a]=x.exports.useState(),[i,s]=x.exports.useState();x.exports.useEffect(()=>(i||s(new AbortController),()=>{i&&i.abort()}),[i]);const l=()=>{r(!0);const{getLastQueryRequest:d}=t,c=d(),{sql:f}=c.query,{entityId:p,versionNumber:g}=Oy(f),h=g?`.${g}`:"";c.partMask=Er;const m=`${p}${h}`,v=f.indexOf(m);c.query.sql=`select id from ${m}${f.substring(v+m.length)}`,Qf(c,e.accessToken,i==null?void 0:i.signal).then(b=>{a(b)}).catch(b=>{console.error(b),en("Unable to query for all Synapse IDs to copy","danger")}).finally(()=>{r(!1)})};return x.exports.useEffect(()=>{if(o){const{rows:d}=o.queryResult.queryResults,c=d.map(f=>`${f.values[0]}`).join(`
`);navigator.clipboard.writeText(c).then(()=>{en("Successfully copied to clipboard"),a(void 0)})}},[o]),n?u(za,{size:25}):u(Xo,{onCopy:()=>{l()}})};var Qt=[],XR=function(){return Qt.some(function(e){return e.activeTargets.length>0})},QR=function(){return Qt.some(function(e){return e.skippedTargets.length>0})},Pf="ResizeObserver loop completed with undelivered notifications.",ZR=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:Pf}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=Pf),window.dispatchEvent(e)},wr;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(wr||(wr={}));var Zt=function(e){return Object.freeze(e)},JR=function(){function e(t,n){this.inlineSize=t,this.blockSize=n,Zt(this)}return e}(),og=function(){function e(t,n,r,o){return this.x=t,this.y=n,this.width=r,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Zt(this)}return e.prototype.toJSON=function(){var t=this,n=t.x,r=t.y,o=t.top,a=t.right,i=t.bottom,s=t.left,l=t.width,d=t.height;return{x:n,y:r,top:o,right:a,bottom:i,left:s,width:l,height:d}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),uc=function(e){return e instanceof SVGElement&&"getBBox"in e},ag=function(e){if(uc(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var o=e,a=o.offsetWidth,i=o.offsetHeight;return!(a||i||e.getClientRects().length)},Df=function(e){var t,n;if(e instanceof Element)return!0;var r=(n=(t=e)===null||t===void 0?void 0:t.ownerDocument)===null||n===void 0?void 0:n.defaultView;return!!(r&&e instanceof r.Element)},eA=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},lr=typeof window<"u"?window:{},Xr=new WeakMap,Mf=/auto|scroll/,tA=/^tb|vertical/,nA=/msie|trident/i.test(lr.navigator&&lr.navigator.userAgent),at=function(e){return parseFloat(e||"0")},En=function(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=!1),new JR((n?t:e)||0,(n?e:t)||0)},Vf=Zt({devicePixelContentBoxSize:En(),borderBoxSize:En(),contentBoxSize:En(),contentRect:new og(0,0,0,0)}),ig=function(e,t){if(t===void 0&&(t=!1),Xr.has(e)&&!t)return Xr.get(e);if(ag(e))return Xr.set(e,Vf),Vf;var n=getComputedStyle(e),r=uc(e)&&e.ownerSVGElement&&e.getBBox(),o=!nA&&n.boxSizing==="border-box",a=tA.test(n.writingMode||""),i=!r&&Mf.test(n.overflowY||""),s=!r&&Mf.test(n.overflowX||""),l=r?0:at(n.paddingTop),d=r?0:at(n.paddingRight),c=r?0:at(n.paddingBottom),f=r?0:at(n.paddingLeft),p=r?0:at(n.borderTopWidth),g=r?0:at(n.borderRightWidth),h=r?0:at(n.borderBottomWidth),m=r?0:at(n.borderLeftWidth),v=f+d,b=l+c,E=m+g,S=p+h,y=s?e.offsetHeight-S-e.clientHeight:0,w=i?e.offsetWidth-E-e.clientWidth:0,C=o?v+E:0,_=o?b+S:0,T=r?r.width:at(n.width)-C-w,O=r?r.height:at(n.height)-_-y,R=T+v+w+E,k=O+b+y+S,P=Zt({devicePixelContentBoxSize:En(Math.round(T*devicePixelRatio),Math.round(O*devicePixelRatio),a),borderBoxSize:En(R,k,a),contentBoxSize:En(T,O,a),contentRect:new og(f,l,T,O)});return Xr.set(e,P),P},sg=function(e,t,n){var r=ig(e,n),o=r.borderBoxSize,a=r.contentBoxSize,i=r.devicePixelContentBoxSize;switch(t){case wr.DEVICE_PIXEL_CONTENT_BOX:return i;case wr.BORDER_BOX:return o;default:return a}},rA=function(){function e(t){var n=ig(t);this.target=t,this.contentRect=n.contentRect,this.borderBoxSize=Zt([n.borderBoxSize]),this.contentBoxSize=Zt([n.contentBoxSize]),this.devicePixelContentBoxSize=Zt([n.devicePixelContentBoxSize])}return e}(),lg=function(e){if(ag(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},oA=function(){var e=1/0,t=[];Qt.forEach(function(i){if(i.activeTargets.length!==0){var s=[];i.activeTargets.forEach(function(d){var c=new rA(d.target),f=lg(d.target);s.push(c),d.lastReportedSize=sg(d.target,d.observedBox),f<e&&(e=f)}),t.push(function(){i.callback.call(i.observer,s,i.observer)}),i.activeTargets.splice(0,i.activeTargets.length)}});for(var n=0,r=t;n<r.length;n++){var o=r[n];o()}return e},Bf=function(e){Qt.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(o){o.isActive()&&(lg(o.target)>e?n.activeTargets.push(o):n.skippedTargets.push(o))})})},aA=function(){var e=0;for(Bf(e);XR();)e=oA(),Bf(e);return QR()&&ZR(),e>0},zs,cg=[],iA=function(){return cg.splice(0).forEach(function(e){return e()})},sA=function(e){if(!zs){var t=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return iA()}).observe(n,r),zs=function(){n.textContent=""+(t?t--:t++)}}cg.push(e),zs()},lA=function(e){sA(function(){requestAnimationFrame(e)})},Qo=0,cA=function(){return!!Qo},dA=250,uA={attributes:!0,characterData:!0,childList:!0,subtree:!0},Ff=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],$f=function(e){return e===void 0&&(e=0),Date.now()+e},Us=!1,fA=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var n=this;if(t===void 0&&(t=dA),!Us){Us=!0;var r=$f(t);lA(function(){var o=!1;try{o=aA()}finally{if(Us=!1,t=r-$f(),!cA())return;o?n.run(1e3):t>0?n.run(t):n.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,n=function(){return t.observer&&t.observer.observe(document.body,uA)};document.body?n():lr.addEventListener("DOMContentLoaded",n)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Ff.forEach(function(n){return lr.addEventListener(n,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Ff.forEach(function(n){return lr.removeEventListener(n,t.listener,!0)}),this.stopped=!0)},e}(),bl=new fA,Hf=function(e){!Qo&&e>0&&bl.start(),Qo+=e,!Qo&&bl.stop()},pA=function(e){return!uc(e)&&!eA(e)&&getComputedStyle(e).display==="inline"},hA=function(){function e(t,n){this.target=t,this.observedBox=n||wr.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=sg(this.target,this.observedBox,!0);return pA(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),mA=function(){function e(t,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=n}return e}(),Qr=new WeakMap,zf=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},Zr=function(){function e(){}return e.connect=function(t,n){var r=new mA(t,n);Qr.set(t,r)},e.observe=function(t,n,r){var o=Qr.get(t),a=o.observationTargets.length===0;zf(o.observationTargets,n)<0&&(a&&Qt.push(o),o.observationTargets.push(new hA(n,r&&r.box)),Hf(1),bl.schedule())},e.unobserve=function(t,n){var r=Qr.get(t),o=zf(r.observationTargets,n),a=r.observationTargets.length===1;o>=0&&(a&&Qt.splice(Qt.indexOf(r),1),r.observationTargets.splice(o,1),Hf(-1))},e.disconnect=function(t){var n=this,r=Qr.get(t);r.observationTargets.slice().forEach(function(o){return n.unobserve(t,o.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}(),gA=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Zr.connect(this,t)}return e.prototype.observe=function(t,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Df(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Zr.observe(this,t,n)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Df(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Zr.unobserve(this,t)},e.prototype.disconnect=function(){Zr.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();const yA=ge[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],vA=yA,bA=e=>{const t=x.exports.useRef(e);return x.exports.useEffect(()=>{t.current=e}),t},SA=bA,wA=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:gA;function CA(){}function _A(e,t){const n=xA(),r=SA(t);return vA(()=>{let o=!1;const a=e&&"current"in e?e.current:e;if(!a)return CA;function i(s,l){o||r.current(s,l)}return n.subscribe(a,i),()=>{o=!0,n.unsubscribe(a,i)}},[e,n,r]),n.observer}function EA(){let e=!1,t=[];const n=new Map,r=new wA((o,a)=>{t=t.concat(o);function i(){const s=new Set;for(let l=0;l<t.length;l++){if(s.has(t[l].target))continue;s.add(t[l].target);const d=n.get(t[l].target);d==null||d.forEach(c=>c(t[l],a))}t=[],e=!1}e||window.requestAnimationFrame(i),e=!0});return{observer:r,subscribe(o,a){var i;r.observe(o);const s=(i=n.get(o))!==null&&i!==void 0?i:[];s.push(a),n.set(o,s)},unsubscribe(o,a){var i;const s=(i=n.get(o))!==null&&i!==void 0?i:[];if(s.length===1){r.unobserve(o),n.delete(o);return}const l=s.indexOf(a);l!==-1&&s.splice(l,1),n.set(o,s)}}}let Ys;const xA=()=>Ys||(Ys=EA());function Zo(e){const[t,n]=x.exports.useState(!1),[r,o]=x.exports.useState(!1),a=x.exports.useRef(null);return _A(a,({target:i})=>{if(!t&&i){const s=i.getElementsByTagName("p")[0];s&&o(s.scrollHeight>s.clientHeight||s.scrollWidth>s.clientWidth)}}),N("td",{...e,className:`ExpandableTableData ${e.className?e.className:""}`,"aria-expanded":t,ref:a,children:[r&&u("button",{className:"ExpandableTableData__expandButton",onClick:()=>n(!t),children:u(pe,{icon:t?"minusBoxOutline":"addBoxOutline",sx:{color:"grey.600"}})}),e.children]})}try{Zo.displayName="ExpandableTableDataCell",Zo.__docgenInfo={description:"",displayName:"ExpandableTableDataCell",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/ExpandableTableDataCell.tsx#ExpandableTableDataCell"]={docgenInfo:Zo.__docgenInfo,name:"ExpandableTableDataCell",path:"src/lib/containers/table/ExpandableTableDataCell.tsx#ExpandableTableDataCell"})}catch{}const TA={id:"",name:"",type:"org.sagebionetworks.repo.model.FileEntity",versionNumber:-1,versionLabel:"",benefactorId:-1,createdBy:"",createdOn:"",modifiedBy:"",modifiedOn:"",isLatestVersion:!0},OA=["","DESC","ASC"],Uf={resizeMode:"overflow",partialRefresh:"true",liveDrag:!0,headerOnly:"true"};class cr extends x.exports.Component{constructor(t){super(t),this.tableElement=void 0,this.renderTable=(n,r,o,a)=>{var b,E;const i=(E=(b=this.props.queryContext).getLastQueryRequest)==null?void 0:E.call(b),{queryContext:{entity:s},showAccessColumn:l,showDownloadColumn:d,isRowSelectionVisible:c}=this.props,f=s&&(hn(s)&&_y(s)||Tn(s)),p=l&&s&&this.isEntityViewOrDataset()&&this.allRowsHaveId(),g=!!this.props.synapseContext.accessToken,h=s&&f&&g&&this.allRowsHaveId(),m=!!(h&&!this.props.hideDownload),v=h&&d;return N("div",{className:"SynapseTable SRC-overflowAuto","data-testid":"SynapseTable",children:[N("table",{ref:S=>this.tableElement=S,className:"table table-striped table-condensed",children:[u("thead",{className:"SRC_bordered",children:u("tr",{children:this.createTableHeader(n,r,o,p,v,m,c,i)})}),u("tbody",{children:this.createTableRows(a,n,p,v,m,c)})]}),u("div",{className:"bootstrap-4-backport",style:{textAlign:"right"},children:u(GR,{})})]})},this.handleColumnSortPress=n=>r=>{let o=zn(this.state.columnIconSortState);o.length===0&&(o=Array(this.getLengthOfPropsData()).fill(0));const a=zn(this.state.sortedColumnSelection),i=this.findSelectionIndex(a,n.name);i!==-1&&a.splice(i,1),o[n.index]=(o[n.index]+1)%Lc.length,o[n.index]>0&&a.unshift({column:n.name,direction:OA[o[n.index]]});const s=this.props.queryContext.getLastQueryRequest();s.query.sort=a,s.query.offset=0,this.props.queryContext.executeQueryRequest(s),this.setState({columnIconSortState:o,sortedColumnSelection:a})},this.applyChangesFromQueryFilter=n=>{const r=this.props.queryContext.getLastQueryRequest();r.query.selectedFacets=n,r.query.offset=0,this.props.queryContext.executeQueryRequest(r)},this.componentDidMount=this.componentDidMount.bind(this),this.componentWillUnmount=this.componentWillUnmount.bind(this),this.componentDidUpdate=this.componentDidUpdate.bind(this),this.shouldComponentUpdate=this.shouldComponentUpdate.bind(this),this.handleColumnSortPress=this.handleColumnSortPress.bind(this),this.findSelectionIndex=this.findSelectionIndex.bind(this),this.advancedSearch=this.advancedSearch.bind(this),this.getLengthOfPropsData=this.getLengthOfPropsData.bind(this),this.configureFacetDropdown=this.configureFacetDropdown.bind(this),this.enableResize=this.enableResize.bind(this),this.disableResize=this.disableResize.bind(this),this.isEntityViewOrDataset=this.isEntityViewOrDataset.bind(this),this.allRowsHaveId=this.allRowsHaveId.bind(this),this.state={columnIconSortState:[],isExportTableDownloadOpen:!1,isExpanded:!1,isColumnSelectionOpen:!1,sortedColumnSelection:[],mapEntityIdToHeader:{},mapUserIdToHeader:{},isFetchingEntityHeaders:!1},this.getEntityHeadersInData=this.getEntityHeadersInData.bind(this)}componentWillUnmount(){this.disableResize()}componentDidMount(){this.getEntityHeadersInData(!0),this.enableResize()}shouldComponentUpdate(t,n){const{isFetchingEntityHeaders:r,...o}=this.state,{isFetchingEntityHeaders:a,...i}=n,s=!qr(this.props,t),l=!qr(o,i),d=s||l;return d&&this.disableResize(),d}componentDidUpdate(t,n){qr(t.queryContext.data,this.props.queryContext.data)?t.queryContext.entity&&this.props.queryContext.entity&&!qr(hn(t.queryContext.entity),hn(this.props.queryContext.entity))&&this.getEntityHeadersInData(!0):this.getEntityHeadersInData(!1),this.enableResize()}enableResize(){this.resizer?setTimeout(()=>{this.resizer.reset(Uf)},1e3):this.tableElement&&this.getLengthOfPropsData()>1&&(this.resizer=new BR(this.tableElement,Uf))}disableResize(){this.resizer&&this.resizer.reset({disable:!0})}async getEntityHeadersInData(t){var f,p,g;const{data:n,entity:r}=this.props.queryContext;if(!n||!r)return;if(this.state.isFetchingEntityHeaders&&!t)return;const o=zn(this.state.mapEntityIdToHeader),a=zn(this.state.mapUserIdToHeader),i=Lf(n,re.ENTITYID),s=Lf(n,re.USERID),l=qf(n,o,i);(this.isEntityViewOrDataset()||r&&np(r))&&this.allRowsHaveId()&&((g=(p=(f=n.queryResult)==null?void 0:f.queryResults)==null?void 0:p.rows)!=null?g:[]).forEach(m=>{const v=`syn${m.rowId}`;l.add(v)});const d=qf(n,a,s);if(l.size===0&&d.size===0)return;if(this.setState({isFetchingEntityHeaders:!0}),l.size>0){const h=Array.from(l).map(m=>({targetId:m}));try{h.forEach(b=>{o[b.targetId]=TA});const m=await Sl(h,this.props.synapseContext.accessToken),{results:v}=m;v.forEach(b=>{o[b.id]=b})}catch(m){console.error("Error on retrieving entity header list , ",m)}}const c=[];if(d.size>0){const h=Array.from(d);try{(await Ey(h,this.props.synapseContext.accessToken)).children.forEach(v=>{v.isIndividual?c.push(v.ownerId):a[v.ownerId]=v})}catch(m){console.error("Error on getGroupHeaders batch: ",m)}}if(c.length>0)try{(await uv(c)).list.forEach(m=>{a[m.ownerId]=m})}catch(h){console.error("Error on getUserProfile : ",h)}this.setState({mapEntityIdToHeader:o,mapUserIdToHeader:a,isFetchingEntityHeaders:!1})}render(){var m,v;if(!this.props.queryContext.data&&this.props.queryContext.isLoadingNewBundle)return gp;if(!this.props.queryContext.data)return u(H,{});const{queryContext:{data:t},queryVisualizationContext:{NoContentPlaceholder:n}}=this.props,{queryResult:r,columnModels:o=[]}=t,{facets:a=[]}=t,{isExpanded:i,isExportTableDownloadOpen:s}=this.state,l=this.props.queryContext.getLastQueryRequest();let d="";if(!(((v=(m=t.queryResult)==null?void 0:m.queryResults.rows.length)!=null?v:0)>0)&&l.query.offset===0)return u(n,{});const{rows:f,headers:p}=r.queryResults,g=u("div",{children:this.renderTable(p,o,a,f)}),h=u(H,{children:N("div",{className:d,children:[s&&u(Xt,{onClose:()=>{this.setState({isExportTableDownloadOpen:!1})},queryBundleRequest:l}),u("div",{children:g})]})});return N(x.exports.Fragment,{children:[i&&N(ae,{animation:!1,show:!0,onHide:()=>this.setState({isExpanded:!1}),dialogClassName:"modal-90w",backdrop:"static",children:[u(ae.Header,{onHide:()=>this.setState({isExpanded:!1}),closeButton:!0}),u(ae.Body,{children:h})]}),!i&&h]})}allRowsHaveId(){var n,r;const{queryContext:{data:t}}=this.props;return(r=(n=t==null?void 0:t.queryResult)==null?void 0:n.queryResults.rows.every(o=>!!o.rowId))!=null?r:!1}isEntityViewOrDataset(){var n;const{queryContext:{entity:t}}=this.props;return(n=t&&(hn(t)||Tn(t)))!=null?n:!1}createTableRows(t,n,r,o,a,i){const s=[],{queryContext:{data:l},queryVisualizationContext:{columnsToShowInTable:d,selectedRowIndices:c,setSelectedRowIndices:f},columnLinks:p=[]}=this.props,{selectColumns:g=[],columnModels:h=[]}=l,{mapEntityIdToHeader:m,mapUserIdToHeader:v}=this.state;return t.forEach((b,E)=>{var T,O,R;const S=(T=b.versionNumber)==null?void 0:T.toString(),y=`syn${b.rowId}`,w=b.values.map((k,P)=>{const V=n[P].name,I=d.includes(V),q=p.find($=>$.matchColumnName===V),M=this.findSelectionIndex(this.state.sortedColumnSelection,V)===-1?"":"SRC-boldText";return I?u(Zo,{className:"SRC_noBorderTop",children:u(Ko,{columnType:n[P].columnType,columnValue:k,isBold:M,mapEntityIdToHeader:m,mapUserIdToHeader:v,columnLinkConfig:q,columnName:V,rowData:b.values,selectColumns:g,columnModels:h,rowId:b.rowId,rowVersionNumber:b.versionNumber})},`(${E}${k}${P})`):u("td",{className:"SRC-hidden"},`(${E},${P})`)});r&&w.unshift(u("td",{className:"SRC_noBorderTop",children:u(Yo,{entityId:y,entityVersionNumber:S},y)},y));const C=((O=m[y])==null?void 0:O.type)=="org.sagebionetworks.repo.model.FileEntity";o&&w.unshift(u("td",{className:"SRC_noBorderTop direct-download",children:C&&u(sr,{associatedObjectId:y,entityVersionNumber:S})},`direct-download-${y}`)),a&&w.unshift(u("td",{className:"SRC_noBorderTop add-to-download-list-v2",children:C&&u(Do,{entityId:y,entityVersionNumber:parseInt(S)})},`add-to-download-list-v2-${y}`)),i&&c&&w.unshift(u("td",{className:"SRC_noBorderTop",children:u(Tb,{label:"",checked:c.includes(E),onChange:k=>{const P=[...c];if(k)P.push(E);else{const V=P.indexOf(E);V>-1&&P.splice(V,1)}f(P)}})},`(${E},rowSelectColumn)`));const _=u("tr",{children:w},(R=b.rowId)!=null?R:E);s.push(_)}),s}isSortableColumn(t){switch(t){case re.USERID:case re.ENTITYID:case re.FILEHANDLEID:case re.STRING_LIST:case re.INTEGER_LIST:case re.BOOLEAN_LIST:case re.DATE_LIST:case re.USERID_LIST:case re.ENTITYID_LIST:return!1;default:return!0}}createTableHeader(t,n,r,o,a,i,s,l){const{sortedColumnSelection:d,columnIconSortState:c}=this.state,{queryVisualizationContext:{getColumnDisplayName:f,columnsToShowInTable:p},queryContext:{lockedColumn:g}}=this.props,h=t.map((m,v)=>{var E;if(p.includes(m.name)){const S=this.findSelectionIndex(d,m.name)!==-1,y=c[v]===void 0?0:c[v],w=r.findIndex(q=>q.columnName===m.name),C=w!==-1&&r[w].facetType==="enumeration",_=r[w],T=S?"SRC-primary-background-color SRC-anchor-light":"",O=S?"SRC-selected-table-icon tool-icon":"SRC-primary-text-color tool-icon",R=`SRC-tableHead SRC-hand-cursor SRC-sortPadding SRC-primary-background-color-hover  ${T}`,k=f(m.name),P=n.find(q=>q.name===m.name),V=m.name.toLowerCase()===((E=g==null?void 0:g.columnName)==null?void 0:E.toLowerCase()),I=P&&P.name=="id"&&P.columnType==re.ENTITYID;return u("th",{children:N("div",{className:"SRC-split",children:[u("span",{style:{whiteSpace:"nowrap"},children:k}),N("div",{className:"SRC-centerContent",children:[C&&!V&&this.configureFacetDropdown(_,P,l),this.isSortableColumn(m.columnType)&&u("span",{role:"button","aria-label":"sort",tabIndex:0,className:R,onKeyPress:this.handleColumnSortPress({index:v,name:m.name}),onClick:this.handleColumnSortPress({index:v,name:m.name}),children:u(Ha,{type:Lc[y],cssClass:O})}),I&&u(KR,{})]})]})},m.name)}else return u("th",{className:"SRC-hidden"},m.name)});return o&&h.unshift(u("th",{children:u("div",{className:"SRC-centerContent",children:u("span",{style:{whiteSpace:"nowrap"},children:"Access"})})},"accessColumn")),a&&h.unshift(u("th",{children:u("div",{className:"SRC-centerContent",children:"\xA0"})},"downloadColumn")),i&&h.unshift(u("th",{"data-testid":"AddToDownloadListV2ColumnHeader",children:u("div",{className:"SRC-centerContent",children:"\xA0"})},"addToV2DownloadListColumn")),s&&h.unshift(u("th",{children:u("div",{className:"SRC-centerContent"})},"rowSelectionColumn")),h}findSelectionIndex(t,n){return t.length!==0?t.findIndex(r=>r.column===n):-1}advancedSearch(t){t&&t.preventDefault();const n=this.props.queryContext.getLastQueryRequest(),{query:r}=n,o=btoa(JSON.stringify(r)),a=n.entityId;window.open(`${$e.PORTAL}#!Synapse:${a}/tables/query/${o}`,"_blank")}getLengthOfPropsData(){var n,r;const{data:t}=this.props.queryContext;return(r=(n=t==null?void 0:t.queryResult)==null?void 0:n.queryResults.headers.length)!=null?r:0}configureFacetDropdown(t,n,r){return u(Yy,{containerAs:"Dropdown",facetValues:t.facetValues,columnModel:n,onChange:o=>{jy(r,t,this.applyChangesFromQueryFilter,o)},onClear:()=>{Wy(r,t,this.applyChangesFromQueryFilter)}})}}try{cr.displayName="SynapseTable",cr.__docgenInfo={description:"",displayName:"SynapseTable",props:{synapseContext:{defaultValue:null,description:"",name:"synapseContext",required:!0,type:{name:"SynapseContextType"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/SynapseTable.tsx#SynapseTable"]={docgenInfo:cr.__docgenInfo,name:"SynapseTable",path:"src/lib/containers/table/SynapseTable.tsx#SynapseTable"})}catch{}function dg(){const{data:e}=Tt(),{showLastUpdatedOn:t}=Ct();return t&&e&&e.lastUpdatedOn?u("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:N(_t,{variant:"body1Italic",children:["Last updated on ",pr(Bt(e.lastUpdatedOn))]})}):u(H,{})}const Jo=e=>{const{tableConfiguration:t,cardConfiguration:n,hideDownload:r}=e,o=ie(),a=Tt(),i=Ct();return N("div",{className:`FilterAndView ${i.topLevelControlsState.showFacetFilter?Ln:qn}`,children:[t?u(cr,{...t,synapseContext:o,queryContext:a,queryVisualizationContext:i,hideDownload:r}):u(H,{}),n?u(fr,{...n}):u(H,{}),u(dg,{})]})};try{Jo.displayName="FilterAndView",Jo.__docgenInfo={description:"",displayName:"FilterAndView",props:{tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!0,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext"> | undefined'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!0,type:{name:"CardConfiguration | undefined"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/query_wrapper_plot_nav/FilterAndView.tsx#FilterAndView"]={docgenInfo:Jo.__docgenInfo,name:"FilterAndView",path:"src/lib/containers/query_wrapper_plot_nav/FilterAndView.tsx#FilterAndView"})}catch{}const IA="isShowingFacetFilters",NA="isHidingFacetFilters",ea=e=>{const[t,n]=x.exports.useState(!1),{searchParams:r,sql:o,sqlOperator:a,tableConfiguration:i,name:s,cardConfiguration:l,facetsToPlot:d,facetsToFilter:c,hideDownload:f,hideQueryCount:p,hideSqlEditorControl:g,searchConfiguration:h,limit:m=qy,initQueryJson:v,showLastUpdatedOn:b}=e,E=_l(r,a),S=v?JSON.parse(v):{sql:o,additionalFilters:E,limit:m,offset:0},y=kn(S.sql),{data:w}=kl(y),C=w&&rp(w)&&w.isSearchEnabled,_={entityId:y,concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",partMask:Er|xr|Tl|cp|Ol|Il|El|Nl,query:S};return u("div",{className:"QueryWrapperPlotNav",children:u(i?pp:rr,{...e,initQueryRequest:_,children:u(Rl,{unitDescription:"results",rgbIndex:e.rgbIndex,columnAliases:e.columnAliases,visibleColumnCount:e.visibleColumnCount,defaultShowFacetVisualization:e.defaultShowFacetVisualization,defaultShowSearchBar:e.defaultShowSearchBox||C,showLastUpdatedOn:b,noContentPlaceholderType:wa.INTERACTIVE,children:u(Al,{children:O=>{if(O===void 0)throw new Error("No queryContext found when using QueryContextConsumer");const R=O==null?void 0:O.isFacetsAvailable;return u(fp,{children:k=>{if(k===void 0)throw new Error("No queryVisualizationContext found when using QueryVisualizationContextConsumer");const P=(k==null?void 0:k.topLevelControlsState.showFacetFilter)||(k==null?void 0:k.topLevelControlsState.showFacetFilter)===void 0;return N(H,{children:[u("div",{className:`ErrorBannerWrapper ${P?IA:NA}`,children:u(Gy,{})}),C?u(nr,{helpUrl:h==null?void 0:h.fullTextSearchHelpURL}):u(or,{...h,queryContext:O,queryVisualizationContext:k}),u(ar,{}),u(No,{getLastQueryRequest:O.getLastQueryRequest,topLevelControlsState:k.topLevelControlsState,setTopLevelControlsState:k.setTopLevelControlsState}),u(ir,{showColumnSelection:i!==void 0,name:s,hideDownload:f,hideQueryCount:p,hideFacetFilterControl:!R,hideVisualizationsControl:!R,hideSqlEditorControl:g}),R&&u(H,{children:u(Ky,{facetsToFilter:c})}),u(Xy,{facetsToPlot:d}),u(Jo,{tableConfiguration:i,hideDownload:f,cardConfiguration:l}),t&&u(Xt,{getLastQueryRequest:O.getLastQueryRequest,onClose:()=>n(!1)})]})}})}})})})})},RA=ea;try{ea.displayName="QueryWrapperPlotNav",ea.__docgenInfo={description:"",displayName:"QueryWrapperPlotNav",props:{searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},facetsToPlot:{defaultValue:null,description:"",name:"facetsToPlot",required:!1,type:{name:"string[]"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},shouldDeepLink:{defaultValue:null,description:"",name:"shouldDeepLink",required:!1,type:{name:"boolean"}},onQueryChange:{defaultValue:null,description:"If onQueryChange is set, the callback will be invoked when the Query changes",name:"onQueryChange",required:!1,type:{name:"((newQueryJson: string) => void)"}},onQueryResultBundleChange:{defaultValue:null,description:"If onQueryResultBundleChange is set, the callback will be invoked when the QueryResultBundle changes",name:"onQueryResultBundleChange",required:!1,type:{name:"((newQueryResultBundleJson: string) => void)"}},initQueryJson:{defaultValue:null,description:"If initQueryJson is set, it will be the Query used in the initial QueryBundleRequest",name:"initQueryJson",required:!1,type:{name:"string"}},tableConfiguration:{defaultValue:null,description:"",name:"tableConfiguration",required:!1,type:{name:'Omit<SynapseTableProps, "synapseContext" | "queryContext" | "queryVisualizationContext">'}},cardConfiguration:{defaultValue:null,description:"",name:"cardConfiguration",required:!1,type:{name:"CardConfiguration"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},facetsToFilter:{defaultValue:null,description:"",name:"facetsToFilter",required:!1,type:{name:"string[]"}},defaultColumn:{defaultValue:null,description:"",name:"defaultColumn",required:!1,type:{name:"string"}},defaultShowSearchBox:{defaultValue:null,description:"",name:"defaultShowSearchBox",required:!1,type:{name:"boolean"}},lockedColumn:{defaultValue:null,description:"",name:"lockedColumn",required:!1,type:{name:"LockedColumn"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}},defaultShowFacetVisualization:{defaultValue:null,description:"",name:"defaultShowFacetVisualization",required:!1,type:{name:"boolean"}},visibleColumnCount:{defaultValue:null,description:"",name:"visibleColumnCount",required:!1,type:{name:"number"}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/query_wrapper_plot_nav/QueryWrapperPlotNav.tsx#QueryWrapperPlotNav"]={docgenInfo:ea.__docgenInfo,name:"QueryWrapperPlotNav",path:"src/lib/containers/query_wrapper_plot_nav/QueryWrapperPlotNav.tsx#QueryWrapperPlotNav"})}catch{}const AA=e=>({partMask:Il|xr|Tl|Ol|Er|Nl,entityId:kn(e),concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",query:{sql:e,limit:25,offset:0}}),ta=e=>{const{title:t,searchParams:n,sqlOperator:r,showAccessColumn:o,sql:a,hideDownload:i,hideQueryCount:s,name:l,showTopLevelControls:d=!1,searchConfiguration:c,unitDescription:f="Results",rgbIndex:p,showLastUpdatedOn:g,noContentPlaceholderType:h=d?wa.INTERACTIVE:wa.STATIC,...m}=e,v=AA(a);n&&(v.query.additionalFilters=_l(n,r));const b=ie(),E=kn(a),{data:S}=kl(E);return u(pp,{...m,initQueryRequest:v,children:u(Rl,{rgbIndex:p,unitDescription:f,showLastUpdatedOn:g,noContentPlaceholderType:h,...m,children:u(Al,{children:y=>{if(y===void 0)throw new Error("No queryContext found when calling QueryContextConsumer");return u(fp,{children:w=>{if(w===void 0)throw new Error("No queryVisualizationContext found when calling QueryVisualizationContextConsumer");return N(H,{children:[d&&u(ir,{showColumnSelection:!0,name:l,hideDownload:i,hideQueryCount:s,hideFacetFilterControl:!0,hideVisualizationsControl:!0}),S&&rp(S)&&S.isSearchEnabled?u(nr,{helpUrl:c==null?void 0:c.fullTextSearchHelpURL}):u(or,{...c,queryContext:y,queryVisualizationContext:w}),u(ar,{}),d&&u(hp,{frontText:""}),u(cr,{synapseContext:b,queryContext:y,queryVisualizationContext:w,showAccessColumn:o,title:t,"data-testid":"SynapseTable",...m}),u(dg,{})]})}})}})})})},kA=ta;try{ta.displayName="StandaloneQueryWrapper",ta.__docgenInfo={description:`This component was initially implemented on the portal side. It renders a SynapseTable if a title is provided.
If showTopLevelControls is set to true, then the SynapseTable will also include the TopLevelControls (search, export table, column selection).`,displayName:"StandaloneQueryWrapper",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},hideDownload:{defaultValue:null,description:"",name:"hideDownload",required:!1,type:{name:"boolean"}},showAccessColumn:{defaultValue:null,description:"",name:"showAccessColumn",required:!1,type:{name:"boolean"}},showDownloadColumn:{defaultValue:null,description:"",name:"showDownloadColumn",required:!1,type:{name:"boolean"}},columnLinks:{defaultValue:null,description:"",name:"columnLinks",required:!1,type:{name:"LabelLinkConfig"}},isRowSelectionVisible:{defaultValue:null,description:"",name:"isRowSelectionVisible",required:!1,type:{name:"boolean"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"{ facetValue: string; }"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},showTopLevelControls:{defaultValue:null,description:"",name:"showTopLevelControls",required:!1,type:{name:"boolean"}},searchConfiguration:{defaultValue:null,description:"",name:"searchConfiguration",required:!1,type:{name:'Omit<SearchV2Props, "queryContext" | "queryVisualizationContext">'}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hideVisualizationsControl:{defaultValue:null,description:"",name:"hideVisualizationsControl",required:!1,type:{name:"boolean"}},hideFacetFilterControl:{defaultValue:null,description:"",name:"hideFacetFilterControl",required:!1,type:{name:"boolean"}},hideQueryCount:{defaultValue:null,description:"",name:"hideQueryCount",required:!1,type:{name:"boolean"}},hideSqlEditorControl:{defaultValue:null,description:"",name:"hideSqlEditorControl",required:!1,type:{name:"boolean"}},showColumnSelection:{defaultValue:null,description:"",name:"showColumnSelection",required:!1,type:{name:"boolean"}},customControls:{defaultValue:null,description:"",name:"customControls",required:!1,type:{name:"CustomControl[]"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}},showLastUpdatedOn:{defaultValue:null,description:"",name:"showLastUpdatedOn",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/table/StandaloneQueryWrapper.tsx#StandaloneQueryWrapper"]={docgenInfo:ta.__docgenInfo,name:"StandaloneQueryWrapper",path:"src/lib/containers/table/StandaloneQueryWrapper.tsx#StandaloneQueryWrapper"})}catch{}function na(e){const{query:t,showquery:n,tableonly:r}=e,o=n==="true",a=r==="true",i="Items";return a?u(kA,{sql:t,name:i}):u(RA,{sql:t,hideSqlEditorControl:!o,name:i,defaultShowFacetVisualization:!1,tableConfiguration:{}})}try{na.displayName="MarkdownSynapseTable",na.__docgenInfo={description:"",displayName:"MarkdownSynapseTable",props:{query:{defaultValue:null,description:"",name:"query",required:!0,type:{name:"string"}},showquery:{defaultValue:null,description:"",name:"showquery",required:!0,type:{name:"string"}},tableonly:{defaultValue:null,description:"",name:"tableonly",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownSynapseTable.tsx#MarkdownSynapseTable"]={docgenInfo:na.__docgenInfo,name:"MarkdownSynapseTable",path:"src/lib/containers/markdown/widget/MarkdownSynapseTable.tsx#MarkdownSynapseTable"})}catch{}const LA={1:"toc-indent1",2:"toc-indent2",3:"toc-indent3",4:"toc-indent4",5:"toc-indent5",6:"toc-indent6"};function ra(e){const{originalMarkup:t}=e,n=[],r=/<h([1-6]) id="(.*)" .*toc="true">(.*)<\/h[1-6]>/gm;let o="";return t.replace(r,(a,i,s,l)=>(o+=l,n.push(u("div",{children:u("a",{role:"link",className:`link ${LA[Number(i)]}`,"data-anchor":s,children:l})},l)),"")),u("div",{children:n},o)}try{ra.displayName="MarkdownTableOfContents",ra.__docgenInfo={description:"",displayName:"MarkdownTableOfContents",props:{originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownTableOfContents.tsx#MarkdownTableOfContents"]={docgenInfo:ra.__docgenInfo,name:"MarkdownTableOfContents",path:"src/lib/containers/markdown/widget/MarkdownTableOfContents.tsx#MarkdownTableOfContents"})}catch{}function oa(e){const{alias:t}=e,{data:n}=Ib([t]);return n?u(Nb,{principalId:n[0].ownerId}):u(H,{})}try{oa.displayName="MarkdownUserOrTeamBadge",oa.__docgenInfo={description:"",displayName:"MarkdownUserOrTeamBadge",props:{alias:{defaultValue:null,description:"",name:"alias",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownUserOrTeamBadge.tsx#MarkdownUserOrTeamBadge"]={docgenInfo:oa.__docgenInfo,name:"MarkdownUserOrTeamBadge",path:"src/lib/containers/markdown/widget/MarkdownUserOrTeamBadge.tsx#MarkdownUserOrTeamBadge"})}catch{}function aa(e){return u(Rb,{params:e})}try{aa.displayName="MarkdownVideo",aa.__docgenInfo={description:"",displayName:"MarkdownVideo",props:{width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"string"}},videoId:{defaultValue:null,description:"",name:"videoId",required:!1,type:{name:"string"}},vimeoId:{defaultValue:null,description:"",name:"vimeoId",required:!1,type:{name:"string"}},oggSynapseId:{defaultValue:null,description:"",name:"oggSynapseId",required:!1,type:{name:"string"}},mp4SynapseId:{defaultValue:null,description:"",name:"mp4SynapseId",required:!1,type:{name:"string"}},webmSynapseId:{defaultValue:null,description:"",name:"webmSynapseId",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/MarkdownVideo.tsx#MarkdownVideo"]={docgenInfo:aa.__docgenInfo,name:"MarkdownVideo",path:"src/lib/containers/markdown/widget/MarkdownVideo.tsx#MarkdownVideo"})}catch{}function ia(e){const{widgetType:t,widgetParamsMapped:n,originalMarkup:r}=e;switch(t){case"buttonlink":return u(eo,{...n});case"image":return u(To,{...n});case"plot":return u(Oo,{...n});case"toc":return u(ra,{originalMarkup:r});case"badge":return u(oa,{...n});case"iduReport":return u(lo,{...n});case"video":case"vimeo":case"youtube":return u(aa,{...n});case"synapsetable":return u(na,{...n});case"provenance":return u(Eo,{...n});case"preview":return u(ao,{...n});default:return console.warn(`Unsupported widget: ${t}.`),u(H,{})}}function Yf(e){return u(Xf,{children:u(ia,{...e})})}try{ia.displayName="MarkdownWidget",ia.__docgenInfo={description:"",displayName:"MarkdownWidget",props:{widgetType:{defaultValue:null,description:"",name:"widgetType",required:!0,type:{name:"enum",value:[{value:'"image"'},{value:'"video"'},{value:'"buttonlink"'},{value:'"plot"'},{value:'"toc"'},{value:'"badge"'},{value:'"iduReport"'},{value:'"vimeo"'},{value:'"youtube"'},{value:'"synapsetable"'},{value:'"provenance"'},{value:'"preview"'}]}},widgetParamsMapped:{defaultValue:null,description:"",name:"widgetParamsMapped",required:!0,type:{name:"any"}},originalMarkup:{defaultValue:null,description:"",name:"originalMarkup",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/MarkdownWidget.tsx#MarkdownWidget"]={docgenInfo:ia.__docgenInfo,name:"MarkdownWidget",path:"src/lib/containers/markdown/MarkdownWidget.tsx#MarkdownWidget"})}catch{}class sa extends x.exports.Component{constructor(t){super(t),this.renderBookmarks=this.renderBookmarks.bind(this)}renderBookmarks(){const t=String(this.props.footnotes),n=/Synapse widget&gt;<\/span>(.*)</g;let r;const o=[];for(;r=n.exec(t);)o.push(r[1]);return o.map((a,i)=>{const s=i<o.length-1;return N(x.exports.Fragment,{children:[N("button",{className:"SRC-markdown-bookmark",id:`bookmark${i}`,children:["[",i+1,"]"]}),u("span",{dangerouslySetInnerHTML:{__html:a}}),s&&u("br",{})]},i)})}render(){return N(x.exports.Fragment,{children:[u("hr",{}),this.renderBookmarks()]})}}const qA=sa;try{sa.displayName="Bookmarks",sa.__docgenInfo={description:"",displayName:"Bookmarks",props:{footnotes:{defaultValue:null,description:"",name:"footnotes",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/widget/Bookmarks.tsx#Bookmarks"]={docgenInfo:sa.__docgenInfo,name:"Bookmarks",path:"src/lib/containers/markdown/widget/Bookmarks.tsx#Bookmarks"})}catch{}const js=markdownit({html:!0});class De extends ge.Component{constructor(t){super(t),markdownitSynapse.init_markdown_it(js,markdownitSub,markdownitSup,markdownitCentertext,markdownitSynapseHeading,markdownitSynapseTable,markdownitStrikethroughAlt,markdownitContainer,markdownitEmphasisAlt,markdownitInlineComments,markdownitBr);const n="";js.use(markdownitSynapse,n,"https://synapse.org").use(markdownitMath,n);const r={};this.props.markdown&&(r.markdown=this.props.markdown),this.state={md:js,error:void 0,fileHandles:void 0,data:r,isLoading:!0},this.markupRef=ge.createRef(),this.handleLinkClicks=this.handleLinkClicks.bind(this),this.renderMarkdown=this.renderMarkdown.bind(this),this.recursiveRender=this.recursiveRender.bind(this),this.processMath=this.processMath.bind(this),this.getWikiAttachments=this.getWikiAttachments.bind(this),this.getWikiPageMarkdown=this.getWikiPageMarkdown.bind(this),this.createHTML=this.createHTML.bind(this),this.addBookmarks=this.addBookmarks.bind(this),this.addIdsToReferenceWidgets=this.addIdsToReferenceWidgets.bind(this),this.addIdsToTocWidgets=this.addIdsToTocWidgets.bind(this)}componentWillUnmount(){this.markupRef.current&&this.markupRef.current.removeEventListener("click",this.handleLinkClicks)}handleLinkClicks(t){const n=t.target;if(n.tagName==="A"||n.tagName==="BUTTON"){const r=t.target;if(r.id.substring(0,3)==="ref"){t.preventDefault();const o=Number(t.currentTarget.id.substring(3)),a=this.markupRef.current.querySelector(`#bookmark${o}`);try{a.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(i){console.log("error on scroll",i)}}else if(t.currentTarget.id!==null&&r.getAttribute("data-anchor")){t.preventDefault();const o=r.getAttribute("data-anchor"),a=this.markupRef.current.querySelector(`#${o}`);try{a.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}catch(i){console.log("error on scroll",i)}}}}createHTML(t){if(!t)return{__html:""};const n=this.props.renderInline?this.state.md.renderInline(t):this.state.md.render(t);return{__html:Xp(n,Qp)}}processMath(){if(!this.markupRef.current)return;const t=this.markupRef.current.querySelectorAll('[id^="mathjax-"]'),n=new RegExp(/\\[()[\]]/,"g");t.forEach(r=>{if(r.textContent&&!r.getAttribute("processed")){r.setAttribute("processed","true");const o=r.textContent.replace(n,"");return katex.render(o,r,{output:"html",throwOnError:!1})}})}addBookmarks(){markdownitSynapse.resetFootnotes(),this.createHTML(this.state.data.markdown);const t=this.createHTML(markdownitSynapse.footnotes()).__html;if(t.length>0)return u(qA,{footnotes:t})}async getWikiPageMarkdown(){const{ownerId:t,wikiId:n,objectType:r}=this.props;if(!(!t&&!n))try{const o=await xy(this.context.accessToken,t,n,r);try{const a=await this.getWikiAttachments(n||o.id);this.setState({data:o,fileHandles:a,error:void 0})}catch(a){console.error("fileHandlesErr = ",a)}}catch(o){console.error(`Error on wiki markdown load
`,o),this.setState({error:o})}}async getWikiAttachments(t){const{ownerId:n,objectType:r}=this.props;if(!n){console.error("Cannot get wiki attachments without ownerId on Markdown Component");return}return await Ty(this.context.accessToken,n,t,r).then(o=>o).catch(o=>{console.error("Error on wiki attachment load ",o)})}addIdsToReferenceWidgets(t){const n=/<span id="wikiReference.*?<span data-widgetparams.*?span>/g;let r=1;return t.replace(n,()=>{const o=r;return r+=1,`<a href="" id="ref${o}">[${o}]</a>`})}addIdsToTocWidgets(t){const n="SRC-header-";let r=1;const o=/<h[1-6] toc="true">.*<\/h[1-6]>/gm;return t.replace(o,a=>{const i=r;return r+=1,`${a.substring(0,3)} id="${n}${i}"${a.substring(3)}`})}renderMarkdown(){let t=this.createHTML(this.state.data.markdown).__html;if(t=this.addIdsToReferenceWidgets(t),t=this.addIdsToTocWidgets(t),t.length>0){const r=new DOMParser().parseFromString(t,"text/html");return u(H,{children:this.recursiveRender(r.body,t)})}}recursiveRender(t,n){if(t.nodeType===Node.TEXT_NODE)return N(H,{children:[" ",t.textContent," "]});if(t.nodeType===Node.ELEMENT_NODE&&t instanceof HTMLElement){const r=t.tagName.toLowerCase()==="body"?"span":t.tagName.toLowerCase(),o=t.getAttribute("data-widgetparams");if(o)return this.processHTMLWidgetMapping(o,n);const a=t.attributes,i={};for(let l=0;l<a.length;l++){let d="",c="";const f=a.item(l);f&&(d=f.name,c=f.value),d&&c&&(i[d]=c)}if(t.childNodes.length===0)return u(r,{...i});const s=Array.from(t.childNodes).map((l,d)=>u(ge.Fragment,{children:this.recursiveRender(l,n)},d));return u(r,{...i,children:s})}}decodeXml(t){const n={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'};return t.replace(/(&quot;|&lt;|&gt;|&amp;)/g,(r,o)=>n[o])}processHTMLWidgetMapping(t,n){const r=this.decodeXml(t),o=r.indexOf("?");if(o===-1)return u(Yf,{widgetType:r,widgetParamsMapped:{},originalMarkup:n},JSON.stringify(r));const a=r.substring(0,o),i={};return r.substring(o+1).split("&").forEach(s=>{let[l,d]=s.split("=");d=decodeURIComponent(d),i[l]=d}),u(Yf,{widgetType:a,widgetParamsMapped:i,originalMarkup:n},JSON.stringify(r))}async componentDidMount(){if(this.state.data.markdown){this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current);return}this.markupRef.current&&this.markupRef.current.addEventListener("click",this.handleLinkClicks),await this.getWikiPageMarkdown(),this.processMath(),this.setState({isLoading:!1}),this.props.onMarkdownProcessingDone&&this.props.onMarkdownProcessingDone(this.markupRef.current)}async componentDidUpdate(t){let n=this.props.ownerId!==t.ownerId;n=n||this.props.wikiId!==t.wikiId,n&&await this.getWikiPageMarkdown(),this.processMath()}render(){const{renderInline:t,loadingSkeletonRowCount:n}=this.props,{isLoading:r,error:o}=this.state,a={ownerId:this.props.ownerId,wikiId:this.props.wikiId,wikiPage:this.state.data,fileHandles:this.state.fileHandles};if(o)return u(op,{error:o});const i=this.addBookmarks(),s=N(xo,{wikiContext:a,children:[r&&u(H,{children:n?u(Ml,{numCols:1,numRows:n}):u("span",{className:"spinner"})}),this.renderMarkdown(),i&&u("div",{children:this.addBookmarks()})]});return t?u("span",{className:"markdown markdown-inline",ref:this.markupRef,children:s}):u("div",{className:"markdown",ref:this.markupRef,children:s})}}De.contextType=_r;try{De.displayName="MarkdownSynapse",De.__docgenInfo={description:"Basic Markdown functionality for Synapse, supporting Images/Plots/References/Bookmarks/buttonlinks",displayName:"MarkdownSynapse",props:{ownerId:{defaultValue:null,description:"",name:"ownerId",required:!1,type:{name:"string"}},wikiId:{defaultValue:null,description:"",name:"wikiId",required:!1,type:{name:"string"}},markdown:{defaultValue:null,description:"",name:"markdown",required:!1,type:{name:"string"}},renderInline:{defaultValue:null,description:"",name:"renderInline",required:!1,type:{name:"boolean"}},objectType:{defaultValue:null,description:"",name:"objectType",required:!1,type:{name:"enum",value:[{value:'"ENTITY"'},{value:'"ENTITY_CONTAINER"'},{value:'"PRINCIPAL"'},{value:'"ACTIVITY"'},{value:'"EVALUATION"'},{value:'"SUBMISSION"'},{value:'"EVALUATION_SUBMISSIONS"'},{value:'"FILE"'},{value:'"MESSAGE"'},{value:'"WIKI"'},{value:'"FAVORITE"'},{value:'"ACCESS_REQUIREMENT"'},{value:'"ACCESS_APPROVAL"'},{value:'"TEAM"'},{value:'"TABLE"'},{value:'"ACCESS_CONTROL_LIST"'},{value:'"PROJECT_SETTING"'},{value:'"VERIFICATION_SUBMISSION"'},{value:'"CERTIFIED_USER_PASSING_RECORD"'},{value:'"FORUM"'},{value:'"THREAD"'},{value:'"REPLY"'},{value:'"FORM_GROUP"'},{value:'"FORM_DATA"'},{value:'"ENTITY_VIEW"'},{value:'"USER_PROFILE"'},{value:'"DATA_ACCESS_REQUEST"'},{value:'"DATA_ACCESS_SUBMISSION"'},{value:'"DATA_ACCESS_SUBMISSION_STATUS"'},{value:'"MEMBERSHIP_INVITATION"'}]}},loadingSkeletonRowCount:{defaultValue:null,description:"",name:"loadingSkeletonRowCount",required:!1,type:{name:"number"}},onMarkdownProcessingDone:{defaultValue:null,description:"",name:"onMarkdownProcessingDone",required:!1,type:{name:"((ref: HTMLInputElement | null) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/markdown/MarkdownSynapse.tsx#MarkdownSynapse"]={docgenInfo:De.__docgenInfo,name:"MarkdownSynapse",path:"src/lib/containers/markdown/MarkdownSynapse.tsx#MarkdownSynapse"})}catch{}const la=({type:e,title:t,subTitle:n="",description:r,values:o,secondaryLabelLimit:a,isAlignToLeftNav:i,descriptionConfig:s,href:l,target:d,rgbIndex:c,icon:f})=>{const p=document.querySelector('meta[name="description"]'),[g]=x.exports.useState(document.title),[h]=x.exports.useState(p?p.getAttribute("content"):"");return x.exports.useEffect(()=>(t&&document.title!==t&&(document.title=t),(r||n)&&(p==null||p.setAttribute("content",r||n)),function(){document.title=g,p==null||p.setAttribute("content",h)})),u("div",{className:`SRC-portalCard SRC-portalCardHeader ${i?"isAlignToLeftNav":""}`,children:u("div",{className:"container-fluid container-full-width",children:u("div",{className:"row",children:u("div",{className:"col-md-offset-1 col-md-10",children:N("div",{className:"SRC-portalCardMain",children:[f,N("div",{style:{width:"100%"},children:[N("div",{className:"SRC-cardContent",style:{marginLeft:"15px"},children:[u("div",{className:"SRC-type",children:e}),u("div",{children:u("h3",{className:"SRC-boldText",style:{margin:"none"},children:l?u("a",{target:d,href:l,className:"highlight-link",children:t}):N("span",{children:[" ",t," "]})})}),n&&N("div",{className:"SRC-author",children:[" ",n," "]}),r&&u("span",{className:"SRC-font-size-base",children:s!=null&&s.isMarkdown?u(De,{markdown:r}):r})]}),u("div",{style:{borderTop:"1px solid rgba(26, 28, 41, 0.2)",marginTop:"15px",paddingTop:"5px"}}),u("div",{className:"SRC-cardContent",children:o&&u(ql,{isHeader:!0,secondaryLabelLimit:a,values:o})})]})]})})})})})};try{la.displayName="HeaderCard",la.__docgenInfo={description:"",displayName:"HeaderCard",props:{rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},subTitle:{defaultValue:{value:""},description:"",name:"subTitle",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"string[][]"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},href:{defaultValue:null,description:"",name:"href",required:!1,type:{name:"string"}},target:{defaultValue:null,description:"",name:"target",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"Element"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/HeaderCard.tsx#HeaderCard"]={docgenInfo:la.__docgenInfo,name:"HeaderCard",path:"src/lib/containers/HeaderCard.tsx#HeaderCard"})}catch{}const ca=e=>{var d,c;const{fileHandleAssociation:t,showDownloadIcon:n,redirect:r=!1,displayValue:o}=e,{accessToken:a}=ie(),[i,s]=x.exports.useState();x.exports.useEffect(()=>{o===void 0&&(async()=>s(await An({requestedFiles:[t],includeFileHandles:!0,includePreSignedURLs:!1,includePreviewPreSignedURLs:!1},a)))()},[a,o,t]);let l;return i&&(l=(d=i.requestedFiles[0].fileHandle)==null?void 0:d.fileName),N("button",{onClick:()=>{a&&t&&ap(t.fileHandleId,a,t.associateObjectType,t.associateObjectId,r).then(f=>{window.open(f,"_blank")}).catch(f=>{console.error("Error on retrieving file handle url ",f)})},className:`SRC-primary-text-color ${xl}`,type:"button",style:{padding:0},children:[(c=o!=null?o:l)!=null?c:t.fileHandleId,n&&u(pe,{icon:"download"})]})};try{ca.displayName="FileHandleLink",ca.__docgenInfo={description:"",displayName:"FileHandleLink",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}},redirect:{defaultValue:null,description:"",name:"redirect",required:!1,type:{name:"boolean"}},showDownloadIcon:{defaultValue:null,description:"",name:"showDownloadIcon",required:!0,type:{name:"boolean"}},displayValue:{defaultValue:null,description:"",name:"displayValue",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/FileHandleLink.tsx#FileHandleLink"]={docgenInfo:ca.__docgenInfo,name:"FileHandleLink",path:"src/lib/containers/widgets/FileHandleLink.tsx#FileHandleLink"})}catch{}const da=e=>{const{fileHandleAssociation:{fileHandleId:t,associateObjectId:n,associateObjectType:r}}=e,{accessToken:o}=ie(),[a,i]=x.exports.useState(),{ref:s,inView:l}=Pn({triggerOnce:!0,rootMargin:"500px 0px"});return x.exports.useEffect(()=>{(()=>{t&&n&&r&&l&&ap(t,o,r,n,!1).then(c=>{i(c)}).catch(c=>{console.error("Error on retrieving file handle url ",c)})})()},[l,t,n,o,r]),u("span",{ref:s,children:a&&u("img",{src:a,alt:"",className:"ImageFileHandle",loading:"lazy"})})};try{da.displayName="ImageFileHandle",da.__docgenInfo={description:"",displayName:"ImageFileHandle",props:{fileHandleAssociation:{defaultValue:null,description:"",name:"fileHandleAssociation",required:!0,type:{name:"FileHandleAssociation"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"]={docgenInfo:da.__docgenInfo,name:"ImageFileHandle",path:"src/lib/containers/widgets/ImageFileHandle.tsx#ImageFileHandle"})}catch{}const fc=400,PA="SRC-short-description",DA="SRC-long-description",ua=e=>{let t="";const n=e.split(" ");let r=0;for(;t.length<fc&&r<n.length;)t+=`${n[r]} `,r+=1;return t=t.trim(),{previewText:t}},MA=(e,t,n)=>{var o;let r;return e&&t&&(ip(e)?r={fileHandleId:t,associateObjectId:(o=e==null?void 0:e.id)!=null?o:"",associateObjectType:Re.TableEntity}:n&&(r={fileHandleId:t,associateObjectId:n,associateObjectType:Re.FileEntity})),r},Vt=({columnName:e,value:t,selectColumns:n,columnModels:r})=>{if(!t)return{str:"",strList:void 0,columnModelType:void 0};const o=(n==null?void 0:n.find(i=>i.name===e))||(r==null?void 0:r.find(i=>i.name===e));if(o==null?void 0:o.columnType.endsWith("_LIST")){let i=t,s;try{return s=JSON.parse(i),i=s.join(", "),{strList:s,str:i,columnModelType:o==null?void 0:o.columnType}}catch(l){console.error("Could not parse multivalue string ",i," caught err ",l)}}return{str:t,columnModelType:o==null?void 0:o.columnType}},VA=(e,t,n)=>(t==null?void 0:t.findIndex(r=>r.name===e))||(n==null?void 0:n.findIndex(r=>r.name===e)),fa=e=>{const{synapseId:t,version:n}=e;return N("span",{children:[n,"\xA0\xA0",u("a",{target:St.NEW_WINDOW,rel:"noopener noreferrer",href:`${$e.PORTAL}#!Synapse:${t}.${n}`,children:"(Show Version History on Synapse)"})]})},dr=e=>{const{value:t,columnName:n,labelLink:r,selectColumns:o,columnModels:a,isHeader:i,className:s,rowData:l,rowId:d}=e;if(!t)return u(H,{children:t});const{strList:c,str:f,columnModelType:p}=Vt({columnName:n,value:t,selectColumns:o,columnModels:a});if(!f)return u(H,{children:f});let g=s;const h={};if(i&&(g=s==null?void 0:s.concat(" ","SRC-lightLink")),p===re.USERID_LIST&&c)return u(H,{children:c.map((v,b)=>N("span",{children:[u(On,{ownerId:v,size:Sa,className:g}),b<c.length-1&&",\xA0\xA0"]},v))});if(p===re.USERID&&f)return u(On,{ownerId:f,size:Sa,className:g});if(!r)return f.match(up)?u("a",{target:St.NEW_WINDOW,rel:"noopener noreferrer",href:`${$e.PORTAL}#!Synapse:${f}`,className:g,children:f}):u(H,{children:f});let m;if(r.isMarkdown)c?m=u(H,{children:c.map((v,b)=>N("span",{children:[u(De,{renderInline:!0,markdown:v},v),b<c.length-1&&",\xA0\xA0"]},v))}):m=u(De,{renderInline:!0,markdown:t});else{const v=c||f.split(",");let b;if("target"in r&&(b=r.target),"linkColumnName"in r){const E=VA(r.linkColumnName,o,a);if(E==null)console.warn(`Could not determine column index of ${r.linkColumnName}`),m=u(H,{children:t});else{const S=l[E];kb(S)?m=u(H,{children:t}):m=u(H,{children:v.map((y,w)=>N(ge.Fragment,{children:[u("a",{href:S!=null?S:void 0,target:b!=null?b:St.NEW_WINDOW,rel:"noopener noreferrer",className:g,style:h,children:y},y),w<v.length-1&&u("span",{style:{marginRight:4},children:", "})]},y))})}}else m=u(H,{children:v.map((E,S)=>{const{baseURL:y,URLColumnName:w,wrapValueWithParens:C}=r,_=r.overrideValueWithRowID?`syn${d}`:E,T=C?`(${_})`:_,O=`/${y}?${w}=${T}`;return N(ge.Fragment,{children:[u("a",{href:O,className:g,style:h,target:b!=null?b:St.CURRENT_WINDOW,children:E},E),S<v.length-1&&u("span",{style:{marginRight:4},children:", "})]},E)})})}return r.tooltipText?u(Ke,{title:r.tooltipText,enterNextDelay:300,children:u("span",{children:m})}):m};function BA(e,t,n,r){if(e){if(!t||!n)throw Error("Must specify CardLink and data for linking to work");const{matchColumnName:o,URLColumnName:a,overrideLinkURLColumnName:i,overrideValueWithRowID:s}=e;if(i&&n[i]){const d=n[i],c=t[d];if(c)return c}const l=n[o];if(l===void 0)console.error(`Could not find match for data: ${t} with columnName ${o}`);else{const d=s?`syn${r}`:t[l];if(d)return`/${e.baseURL}?${a}=${d}`}}}function jf(e,t,n,r,o){var l,d;e=e.trim();let a=e,i=St.CURRENT_WINDOW;e.match(up)?a=`${$e.PORTAL}#!Synapse:${e}`:e.match($y)?(i=St.NEW_WINDOW,a=`https://dx.doi.org/${e}`):t?t&&(a=(l=BA(t,n,r,o))!=null?l:"",a.includes("/DetailsPage")&&(i=St.NEW_WINDOW)):i=St.NEW_WINDOW;const s=(d=t==null?void 0:t.target)!=null?d:i;return{href:a,target:s}}function pa(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:r,descriptionConfig:o}=e;let a=t;o!=null&&o.isMarkdown&&(a=u(De,{markdown:a}));const i=n||(o==null?void 0:o.showFullDescriptionByDefault);return u("div",{className:i?"":"SRC-hidden",children:u("span",{"data-search-handle":r,className:`SRC-font-size-base ${DA}`,children:a})})}function ha(e){const{description:t,hasClickedShowMore:n,descriptionSubTitle:r,descriptionConfig:o,toggleShowMore:a}=e;return o!=null&&o.showFullDescriptionByDefault?u(H,{}):N("div",{className:n?"SRC-hidden":"",children:[u("span",{"data-search-handle":r,className:`SRC-font-size-base ${PA} SRC-short-description`,children:ua(t).previewText}),t.length>=fc&&u("a",{style:{fontSize:"16px",cursor:"pointer",marginLeft:"5px"},className:"highlight-link",onClick:a,children:"...Show More"})]})}class ur extends ge.Component{constructor(t){super(t),this.getCutoff=n=>{let r="";const o=n.split(" ");let a=0;for(;r.length<fc&&a<o.length;)r+=`${o[a]} `,a+=1;return r=r.trim(),{previewText:r}},this.toggleShowMore=()=>{this.setState({hasClickedShowMore:!0})},this.renderTitle=({href:n,target:r,titleSearchHandle:o,title:a})=>n?u("a",{"data-search-handle":o,target:r,href:n,className:"highlight-link",children:a}):N("span",{"data-search-handle":o,children:[" ",a," "]}),this.state={hasClickedShowMore:!1}}render(){var ce;const{schema:t,data:n,rowId:r,genericCardSchema:o,secondaryLabelLimit:a,selectColumns:i,columnModels:s,iconOptions:l,useTypeColumnForIcon:d=!1,isHeader:c=!1,titleLinkConfig:f,ctaLinkConfig:p,labelLinkConfig:g,descriptionConfig:h,rgbIndex:m,columnIconOptions:v,queryContext:{entity:b},queryVisualizationContext:{getColumnDisplayName:E}}=this.props,S=o,{hasClickedShowMore:y}=this.state,{link:w="",type:C}=S,_=n[t[S.title]];let T=S.subTitle&&n[t[S.subTitle]];T=(S==null?void 0:S.subTitle)&&Vt({value:T,columnName:S==null?void 0:S.subTitle,selectColumns:i,columnModels:s}).str;const O=n[t[S.description||""]],R=n[t[S.icon||""]],k=n[t[S.dataTypeIconNames||""]],P=n[t[S.imageFileHandleColumnName||""]],V=s==null?void 0:s.find(ye=>S.link===ye.name),I=V==null?void 0:V.columnType,q=n[t[w]]||"",{href:A,target:M}=jf(q,f,n,t,r),$=[],{secondaryLabels:z=[]}=S,B=b&&!ip(b);for(let ye=0;ye<z.length;ye+=1){const be=z[ye];let Ce=n[t[be]],Ve;if(Ce){if(B&&be==="currentVersion"){const Be=n[t.id];Ce=fa({synapseId:Be,version:Ce}),Ve="Version"}else{const Be=g==null?void 0:g.find(Ye=>Ye.matchColumnName===be);Ce=u(dr,{value:Ce,columnName:be,labelLink:Be,isHeader:c,selectColumns:i,columnModels:s,rowData:n}),Ve=E(be)}const Ue=[Ve,Ce,be];$.push(Ue)}}const G=MA(b,P||q,n[t.id]),D=$.length>0,L={marginTop:c?"0px":void 0,marginBottom:c?"0px":void 0,paddingBottom:D||P?void 0:"15px"},F=N(H,{children:[!d&&P&&u("div",{className:"SRC-imageThumbnail",style:{padding:S.thumbnailRequiresPadding?"21px":void 0},children:G&&u(da,{fileHandleAssociation:G})}),!d&&!P&&u("div",{className:"SRC-cardThumbnail",children:u(Ha,{iconOptions:l,value:R,type:C})}),d&&u("div",{className:"SRC-cardThumbnail",children:u(pe,{icon:gv[n[t.type]]})})]});if(c)return u(la,{descriptionConfig:h,title:_,subTitle:T,description:O,type:C,icon:F,values:$,href:A,target:M,isAlignToLeftNav:!0,secondaryLabelLimit:a,rgbIndex:m});const Y=E(S.title),K=E(S.subTitle),Q=E(S.description);let X,j;if(p){const ye=n[t[p.link]]||"",{href:be,target:Ce}=jf(ye,void 0,n,t,r);X=be,j=Ce}return N("div",{style:L,className:"SRC-portalCard",children:[N("div",{className:"SRC-portalCardMain",children:[F,N("div",{className:"SRC-cardContent",children:[u("div",{className:"SRC-type",children:C}),((ce=v==null?void 0:v.columns)==null?void 0:ce.dataType)&&(k==null?void 0:k.length)&&u("div",{style:{marginTop:"20px"},children:u(Ab,{iconConfigs:v.columns.dataType,iconNames:JSON.parse(k),useBackground:!0,useTheme:!0})}),u("div",{children:u("h3",{className:"SRC-boldText SRC-blackText",style:{margin:"none"},children:!f&&I===re.FILEHANDLEID&&G?u(ca,{fileHandleAssociation:G,showDownloadIcon:C!==Py,displayValue:_}):this.renderTitle({href:A,target:M,titleSearchHandle:Y,title:_})})}),T&&u("div",{"data-search-handle":K,className:"SRC-author",children:T}),O&&u(ha,{description:O,hasClickedShowMore:y,descriptionSubTitle:Q,descriptionConfig:h,toggleShowMore:this.toggleShowMore}),O&&u(pa,{description:O,hasClickedShowMore:y,descriptionSubTitle:Q,descriptionConfig:h}),p&&X&&j&&u("div",{className:"SRC-portalCardCTALink bootstrap-4-backport",children:u("a",{target:j,rel:"noopener noreferrer",href:X,children:p.text})})]})]}),D&&u(ql,{isHeader:!1,secondaryLabelLimit:a,values:$,columnIconOptions:v,className:`${P?"hasImage":"hasIcon"}`})]})}}ur.contextType=_r;try{pa.displayName="LongDescription",pa.__docgenInfo={description:"",displayName:"LongDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#LongDescription"]={docgenInfo:pa.__docgenInfo,name:"LongDescription",path:"src/lib/containers/GenericCard.tsx#LongDescription"})}catch{}try{ha.displayName="ShortDescription",ha.__docgenInfo={description:"",displayName:"ShortDescription",props:{description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},hasClickedShowMore:{defaultValue:null,description:"",name:"hasClickedShowMore",required:!0,type:{name:"boolean"}},descriptionSubTitle:{defaultValue:null,description:"",name:"descriptionSubTitle",required:!0,type:{name:"any"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},toggleShowMore:{defaultValue:null,description:"",name:"toggleShowMore",required:!0,type:{name:"() => void"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#ShortDescription"]={docgenInfo:ha.__docgenInfo,name:"ShortDescription",path:"src/lib/containers/GenericCard.tsx#ShortDescription"})}catch{}try{ua.displayName="getCutoff",ua.__docgenInfo={description:"",displayName:"getCutoff",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getCutoff"]={docgenInfo:ua.__docgenInfo,name:"getCutoff",path:"src/lib/containers/GenericCard.tsx#getCutoff"})}catch{}try{Vt.displayName="getValueOrMultiValue",Vt.__docgenInfo={description:"",displayName:"getValueOrMultiValue",props:{columnName:{defaultValue:null,description:"",name:"columnName",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#getValueOrMultiValue"]={docgenInfo:Vt.__docgenInfo,name:"getValueOrMultiValue",path:"src/lib/containers/GenericCard.tsx#getValueOrMultiValue"})}catch{}try{fa.displayName="VersionLabel",fa.__docgenInfo={description:"",displayName:"VersionLabel",props:{synapseId:{defaultValue:null,description:"",name:"synapseId",required:!0,type:{name:"string"}},version:{defaultValue:null,description:"",name:"version",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#VersionLabel"]={docgenInfo:fa.__docgenInfo,name:"VersionLabel",path:"src/lib/containers/GenericCard.tsx#VersionLabel"})}catch{}try{dr.displayName="SynapseCardLabel",dr.__docgenInfo={description:"",displayName:"SynapseCardLabel",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},columnName:{defaultValue:null,description:"",name:"columnName",required:!0,type:{name:"string"}},labelLink:{defaultValue:null,description:"",name:"labelLink",required:!0,type:{name:"CardLink | ColumnSpecifiedLink | MarkdownLink | undefined"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!0,type:{name:"SelectColumn[] | undefined"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!0,type:{name:"ColumnModel[] | undefined"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rowData:{defaultValue:null,description:"",name:"rowData",required:!0,type:{name:"(string | null)[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#SynapseCardLabel"]={docgenInfo:dr.__docgenInfo,name:"SynapseCardLabel",path:"src/lib/containers/GenericCard.tsx#SynapseCardLabel"})}catch{}try{ur.displayName="GenericCard",ur.__docgenInfo={description:"Renders a card from a table query",displayName:"GenericCard",props:{selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},useTypeColumnForIcon:{defaultValue:null,description:"",name:"useTypeColumnForIcon",required:!1,type:{name:"boolean"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"Record<string, number>"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"string[]"}},rowId:{defaultValue:null,description:"",name:"rowId",required:!1,type:{name:"number"}},tableId:{defaultValue:null,description:"",name:"tableId",required:!0,type:{name:"string | undefined"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},queryContext:{defaultValue:null,description:"",name:"queryContext",required:!0,type:{name:"QueryContextType"}},queryVisualizationContext:{defaultValue:null,description:"",name:"queryVisualizationContext",required:!0,type:{name:"QueryVisualizationContextType"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/GenericCard.tsx#GenericCard"]={docgenInfo:ur.__docgenInfo,name:"GenericCard",path:"src/lib/containers/GenericCard.tsx#GenericCard"})}catch{}class Jt extends x.exports.Component{constructor(t){super(t),this.handleLinkClick=n=>r=>{r.preventDefault(),window.open(`${$e.PORTAL}#!Synapse:${n}`,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:t,schema:n,selectColumns:r,columnModels:o}=this.props,a=t[n.datasetName],i=t[n.summary],s=Vt({columnName:"tumorType",value:t[n.tumorType],selectColumns:r,columnModels:o}).str,l=Vt({columnName:"diseaseFocus",value:t[n.diseaseFocus],selectColumns:r,columnModels:o}).str,d=t[n.id],c=t[n.fundingAgency],f=t[n.fileCount],p=Zf(t[n.fileSize]),g=[["FUNDER",Vt({columnName:"fundingAgency",value:c,selectColumns:r,columnModels:o}).str],["SIZE",p],["FILES",f]];return N("div",{className:"SRC-portalCard SRC-typeDataset  ",children:[N("div",{className:"SRC-cardThumbnail",children:[u(Ha,{type:dp}),u("div",{children:p})]}),N("div",{className:"SRC-cardContent SRC-dataset",children:[u("div",{className:"SRC-type",children:"Dataset "}),u("div",{children:u("h3",{children:u("a",{target:"_self",href:`${$e.PORTAL}#!Synapse:${d}`,children:a})})}),N("div",{className:"SRC-description-dataset",children:[u("p",{className:"SRC-description-text",children:i}),u("div",{className:"SRC-cardAction bootstrap-4-backport",children:u(_e,{className:"pill SRC-datasetButton",onClick:this.handleLinkClick(d),variant:"secondary",children:"Download Dataset"})})]}),u("div",{className:"SRC-cardAnnotations",children:u(lv,{chips:[s,l]})})]}),u(ql,{isHeader:!1,secondaryLabelLimit:this.props.secondaryLabelLimit,values:g})]})}}try{Jt.displayName="Dataset",Jt.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/Dataset.tsx#Dataset"]={docgenInfo:Jt.__docgenInfo,name:"Dataset",path:"src/lib/containers/row_renderers/Dataset.tsx#Dataset"})}catch{}class ma extends x.exports.Component{constructor(t){super(t),this.handleLinkClick=n=>r=>{r.preventDefault(),window.open(n,"_blank")},this.handleLinkClick=this.handleLinkClick.bind(this)}render(){const{data:t,schema:n}=this.props,r=t[n.organizationName],o=t[n.organizationPath],a=t[n.summary],i=t[n.website],s=t[n.logo];let l=i.replace("https://","");l=l.replace("http://",""),l.charAt(l.length-1)==="/"&&(l=l.substring(0,l.length-1));const d=window.location.hash.substring(1)===o,c={};let f;return d?c.paddingBottom="42px":f=u("div",{className:"SRC-marginAuto SRC-cardAction bootstrap-4-backport",children:u(_e,{className:"pill-xl",href:o,variant:"secondary",children:"View Funded Research"})}),N("div",{className:"SRC-portalCard SRC-typeFunder ",style:c,children:[N("div",{className:"SRC-cardContent",children:[u("div",{className:"SRC-type",children:"Organization"}),s&&u("div",{className:"SRC-cardThumbnail",children:u("img",{alt:"funder logo",className:"SRC-logo",src:s})}),u("div",{children:N("h3",{children:[d&&r,!d&&u("a",{href:o,children:r})]})}),u("div",{className:"SRC-website",children:u("a",{rel:"noopener noreferrer",target:"_blank",href:i,children:l})}),u("div",{className:"SRC-description",children:a})]}),f]})}}try{ma.displayName="Funder",ma.__docgenInfo={description:"",displayName:"Funder",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/Funder.tsx#Funder"]={docgenInfo:ma.__docgenInfo,name:"Funder",path:"src/lib/containers/row_renderers/Funder.tsx#Funder"})}catch{}try{Jt.displayName="Dataset",Jt.__docgenInfo={description:"",displayName:"Dataset",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},selectColumns:{defaultValue:null,description:"",name:"selectColumns",required:!1,type:{name:"SelectColumn[]"}},columnModels:{defaultValue:null,description:"",name:"columnModels",required:!1,type:{name:"ColumnModel[]"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/index.tsx#Dataset"]={docgenInfo:Jt.__docgenInfo,name:"Dataset",path:"src/lib/containers/row_renderers/index.tsx#Dataset"})}catch{}try{rowrenderers.displayName="rowrenderers",rowrenderers.__docgenInfo={description:"",displayName:"rowrenderers",props:{data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},schema:{defaultValue:null,description:"",name:"schema",required:!1,type:{name:"any"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/index.tsx#rowrenderers"]={docgenInfo:rowrenderers.__docgenInfo,name:"rowrenderers",path:"src/lib/containers/row_renderers/index.tsx#rowrenderers"})}catch{}const ga=({data:e,schema:t})=>{const n=e[t.submitterName],r=e[t.submitterUserId],o=e[t.time],a=e[t.timeUnits],i=e[t.text],s=e[t.tag];return N("div",{className:"SRC-portalCard ObservationCard",children:[N("div",{className:"ObservationCard__submitter",children:[!r&&u("div",{children:n}),r&&u(On,{size:"SMALL USER CARD",ownerId:r})]}),o&&N("div",{className:"ObservationCard__time",children:[u(pe,{icon:"time"}),N("span",{children:[`${o} ${a}`,Number(o)>1?"s":""]})]}),u("div",{className:"ObservationCard__text",children:u(cv,{summary:i})}),u("div",{className:"ObservationCard__tags",children:s&&u("span",{className:"SRC-tag",children:s})})]})},ya=()=>N("div",{className:"SRC-portalCard ObservationCard",children:[u("div",{className:"ObservationCard__submitter",children:u("span",{children:u(Ks,{width:"100px"})})}),u("div",{className:"ObservationCard__time",children:u(pe,{icon:"time"})}),u("div",{className:"ObservationCard__text",children:u(Ml,{numCols:1,numRows:4})}),u("div",{className:"ObservationCard__tags",children:u(Ks,{width:"80px"})})]});try{ga.displayName="ObservationCard",ga.__docgenInfo={description:`Specialized Observation Card, initially implemented for the NF portal.
Expects the following columns: submitterName, submitterUserId, time, timeUnits, text, and tag.`,displayName:"ObservationCard",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"ObservationCardSchema"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"Record<string, string>"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/ObservationCard.tsx#ObservationCard"]={docgenInfo:ga.__docgenInfo,name:"ObservationCard",path:"src/lib/containers/row_renderers/ObservationCard.tsx#ObservationCard"})}catch{}try{ya.displayName="LoadingObservationCard",ya.__docgenInfo={description:"",displayName:"LoadingObservationCard",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/row_renderers/ObservationCard.tsx#LoadingObservationCard"]={docgenInfo:ya.__docgenInfo,name:"LoadingObservationCard",path:"src/lib/containers/row_renderers/ObservationCard.tsx#LoadingObservationCard"})}catch{}function FA(e){const{propsToPass:t,type:n}=e;switch(n){case dp:return u(Jt,{...t});case My:return u(ma,{...t});case Dy:return u(ur,{...t});case Gs:return u(ga,{...t});default:return u("div",{})}}const fr=e=>{const{isHeader:t=!1,unitDescription:n,type:r,isLoading:o,secondaryLabelLimit:a=3,title:i,...s}=e,l=Qy(),{NoContentPlaceholder:d}=Ct(),{data:c,appendNextPageToResults:f,hasNextPage:p}=l,g=Ct(),h=c!=null&&c.queryResult.queryResults.tableId?[c==null?void 0:c.queryResult.queryResults.tableId]:[],m=sp({ids:h,type:"ENTITY_HEADER"});if(c){if(c&&c.queryResult.queryResults.rows.length===0)return u(d,{})}else return N("div",{children:[o&&r===Gs&&u(ya,{}),o&&r!==Gs&&gp]});const v={};c.queryResult.queryResults.headers.forEach((S,y)=>{v[S.name]=y});const b=p&&u("div",{className:"SRC-viewMore bootstrap-4-backport",children:u(_e,{variant:"secondary",className:"pill-xl",onClick:()=>{f()},children:"View More"})});let E;if(r===Rc){const S=c.queryResult.queryResults.headers.findIndex(w=>w.columnType===re.USERID);if(S===-1)throw Error("Type MEDIUM_USER_CARD specified but no columnType USERID found");const y=c.queryResult.queryResults.rows.map(w=>w.values[S]);E=u(Lb,{data:c,list:y,size:Rc})}else{const S=c.queryResult.queryResults.rows;E=S.length?S.map((y,w)=>{var T;const _={key:JSON.stringify(y.values),type:r,schema:v,isHeader:t,secondaryLabelLimit:a,rowId:y.rowId,data:y.values,selectColumns:c.selectColumns,columnModels:c.columnModels,tableEntityConcreteType:m[0]&&m[0].type,tableId:c==null?void 0:c.queryResult.queryResults.tableId,queryContext:l,queryVisualizationContext:g,...s};return u(FA,{propsToPass:_,type:r},(T=y.rowId)!=null?T:w)}):u(H,{})}return N("div",{role:"list",children:[i&&u("h2",{className:"SRC-card-overview-title",children:i}),!i&&n&&u(hp,{frontText:"Displaying"}),E,b]})};try{fr.displayName="CardContainer",fr.__docgenInfo={description:"",displayName:"CardContainer",props:{isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/CardContainer.tsx#CardContainer"]={docgenInfo:fr.__docgenInfo,name:"CardContainer",path:"src/lib/containers/CardContainer.tsx#CardContainer"})}catch{}const va=({sortConfig:e})=>{const{defaultColumn:t,defaultDirection:n,sortableColumns:r}=e,o=Tt(),{getLastQueryRequest:a,executeQueryRequest:i}=o,{getColumnDisplayName:s}=Ct(),[l,d]=x.exports.useState(t),[c,f]=x.exports.useState(n),p=r.map(h=>({value:h,label:s(h)})),g=h=>{const m=a();let v="ASC";h===l&&(v=c==="ASC"?"DESC":"ASC");const b=h?[{column:h,direction:v}]:void 0;m.query.sort=b,i(m),d(h),f(v)};return N("div",{className:"QuerySortSelector bootstrap-4-backport",children:[u(_t,{variant:"label",className:"sort-by-label SRC-inlineBlock",children:"Sort by"}),u(rv,{className:"react-select-container SRC-inlineBlock",value:iv(l,p),options:p,onChange:h=>g(h==null?void 0:h.value),components:{Control:sv},styles:{control:h=>({...h,marginLeft:"15px"})}})]})};try{va.displayName="QuerySortSelector",va.__docgenInfo={description:"",displayName:"QuerySortSelector",props:{sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!0,type:{name:"SortConfiguration"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/QuerySortSelector.tsx#QuerySortSelector"]={docgenInfo:va.__docgenInfo,name:"QuerySortSelector",path:"src/lib/containers/QuerySortSelector.tsx#QuerySortSelector"})}catch{}var St=(e=>(e.CURRENT_WINDOW="_self",e.NEW_WINDOW="_blank",e.PARENT_FRAME="_parent",e.FULL_WINDOW_BODY="_top",e))(St||{});const ba=e=>{var s;const t=kn(e.sql),n=_l(e.searchParams,e.sqlOperator),{sortConfig:r,columnAliases:o}=e,a=r?[{column:r.defaultColumn,direction:r.defaultDirection}]:void 0,i={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:t,query:{sql:e.sql,limit:e.limit,sort:a,additionalFilters:n},partMask:Er|xr|Tl|cp|Ol|Il|El|Nl};return u(rr,{...e,initQueryRequest:i,children:N(Rl,{rgbIndex:e.rgbIndex,unitDescription:e.unitDescription,columnAliases:o,noContentPlaceholderType:(s=e.noContentPlaceholderType)!=null?s:wa.STATIC,children:[r&&u(va,{sortConfig:r}),u(fr,{...e}),u(Al,{children:l=>u(op,{error:l==null?void 0:l.error})})]})})},nL=ba;try{ba.displayName="CardContainerLogic",ba.__docgenInfo={description:"Class wraps around CardContainer and serves as a standalone logic container for rendering cards.",displayName:"CardContainerLogic",props:{limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},sqlOperator:{defaultValue:null,description:"",name:"sqlOperator",required:!1,type:{name:"enum",value:[{value:'"LIKE"'},{value:'"="'},{value:'"HAS"'}]}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"Record<string, string>"}},isHeader:{defaultValue:null,description:"",name:"isHeader",required:!1,type:{name:"boolean"}},isAlignToLeftNav:{defaultValue:null,description:"",name:"isAlignToLeftNav",required:!1,type:{name:"boolean"}},sql:{defaultValue:null,description:"",name:"sql",required:!0,type:{name:"string"}},sortConfig:{defaultValue:null,description:"",name:"sortConfig",required:!1,type:{name:"SortConfiguration"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}},hasInternalLink:{defaultValue:null,description:"",name:"hasInternalLink",required:!1,type:{name:"boolean"}},iconOptions:{defaultValue:null,description:"",name:"iconOptions",required:!1,type:{name:"IconOptions"}},genericCardSchema:{defaultValue:null,description:"",name:"genericCardSchema",required:!1,type:{name:"GenericCardSchema"}},secondaryLabelLimit:{defaultValue:null,description:"",name:"secondaryLabelLimit",required:!1,type:{name:"number"}},titleLinkConfig:{defaultValue:null,description:"",name:"titleLinkConfig",required:!1,type:{name:"CardLink"}},ctaLinkConfig:{defaultValue:null,description:"",name:"ctaLinkConfig",required:!1,type:{name:"CTACardLink"}},labelLinkConfig:{defaultValue:null,description:"",name:"labelLinkConfig",required:!1,type:{name:"LabelLinkConfig"}},descriptionConfig:{defaultValue:null,description:"",name:"descriptionConfig",required:!1,type:{name:"DescriptionConfig"}},rgbIndex:{defaultValue:null,description:"",name:"rgbIndex",required:!1,type:{name:"number"}},columnIconOptions:{defaultValue:null,description:"",name:"columnIconOptions",required:!1,type:{name:"ColumnIconConfigs"}},unitDescription:{defaultValue:null,description:"",name:"unitDescription",required:!1,type:{name:"string"}},columnAliases:{defaultValue:null,description:"Mapping from column name to the name that should be shown for the column",name:"columnAliases",required:!1,type:{name:"Record<string, string>"}},noContentPlaceholderType:{defaultValue:null,description:"Default is INTERACTIVE",name:"noContentPlaceholderType",required:!1,type:{name:"enum",value:[{value:'"INTERACTIVE"'},{value:'"STATIC"'}]}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/CardContainerLogic.tsx#CardContainerLogic"]={docgenInfo:ba.__docgenInfo,name:"CardContainerLogic",path:"src/lib/containers/CardContainerLogic.tsx#CardContainerLogic"})}catch{}export{fS as A,nL as C,sr as D,mS as E,ca as F,pS as G,Dt as H,Xo as I,Pb as L,wo as M,yS as P,RA as Q,hS as S,De as a,qb as b,tL as c,_R as d,gS as e,mt as f,Ao as g,qe as h,zo as i,wS as j,Yo as k,da as l,jf as m,MA as n,vR as o,aT as p,kA as q,Pp as u};
