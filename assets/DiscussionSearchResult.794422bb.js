import{r as o,j as e,a as m,F as A}from"./jsx-runtime.2ff8811e.js";import{j as U,bV as E,c6 as N,bS as M,a3 as R,bW as b}from"./index.3bd83fcc.js";import{h as L}from"./moment.a565bb48.js";import{U as v}from"./UserCard.91d6c8b2.js";import{h as K}from"./SynapseConstants.b6aa8bf5.js";import{I as _}from"./IconSvg.6f3c0dc5.js";import{S as j}from"./SkeletonTable.0cb13ee1.js";import{P as k}from"./getEndpoint.bb7ded34.js";import{R as P}from"./Row.d20789f7.js";import{C as T}from"./isArray.c66fbb5a.js";import{S as Y}from"./Skeleton.cb3b50d8.js";import{T as I}from"./Typography.58720d37.js";const d=async i=>(await fetch(i,{method:"GET",headers:{Accept:"*/*","Access-Control-Request-Headers":"authorization","Content-Type":"text/plain; charset=utf-8"}})).text(),u=i=>{const{threadId:h,replyId:l}=i,{accessToken:t}=U(),[s,x]=o.exports.useState(),[O,C]=o.exports.useState(""),[a,w]=o.exports.useState(),[p,g]=o.exports.useState(),[S,f]=o.exports.useState(!1),D=async()=>{let n;const c=await E(h,t);if(f(!0),l){const r=await N(l,t);n=await M(r.messageKey,t),g(await R(t,r.createdBy)),w(r)}else g(await R(t,c.createdBy)),n=await b(c.messageKey,t);C(await d(n.messageUrl)),x(c),f(!1)};return o.exports.useEffect(()=>{D()},[]),e("div",{className:"search-result-container",children:m(P,{children:[e(T,{xs:1,children:S?e(Y,{variant:"circular",width:"40px",height:"40px"}):l?e(_,{icon:"replyTwoTone"}):e(_,{icon:"chatTwoTone"})}),e(T,{xs:11,children:S?e(j,{numCols:1,numRows:4}):m(A,{children:[e(I,{variant:"headline3",children:e("a",{className:"link",href:((n,c,r)=>{let y=`${k.PORTAL}#!Synapse:${c}/discussion/threadId=${n}`;return r&&(y+=`&replyId=${r}`),y})(s==null?void 0:s.id,s==null?void 0:s.projectId,a==null?void 0:a.id),children:s==null?void 0:s.title})}),e("div",{className:"truncated",children:e(I,{variant:"body1",children:O})}),m("div",{className:"search-result-footer",children:[l?"Reply":"Thread"," by"," ",e(v,{size:K,ownerId:p==null?void 0:p.ownerId})," ",L(a==null?void 0:a.createdOn).format("l LT")]})]})})]})})};try{d.displayName="getMessage",d.__docgenInfo={description:"",displayName:"getMessage",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DiscussionSearchResult.tsx#getMessage"]={docgenInfo:d.__docgenInfo,name:"getMessage",path:"src/lib/containers/DiscussionSearchResult.tsx#getMessage"})}catch{}try{u.displayName="DiscussionSearchResult",u.__docgenInfo={description:"",displayName:"DiscussionSearchResult",props:{threadId:{defaultValue:null,description:"",name:"threadId",required:!0,type:{name:"string"}},replyId:{defaultValue:null,description:"",name:"replyId",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/DiscussionSearchResult.tsx#DiscussionSearchResult"]={docgenInfo:u.__docgenInfo,name:"DiscussionSearchResult",path:"src/lib/containers/DiscussionSearchResult.tsx#DiscussionSearchResult"})}catch{}export{u as D,d as g};
