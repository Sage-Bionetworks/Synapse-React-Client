import{b as bo,A as ef,c as dr,ay as ct,h as $l,g as Dl}from"./iframe.1c77586e.js";import{u as la,b as je,e as Ue,r as Ae,a as pr,i as oe}from"./url.8b2e32b4.js";import{b as ze}from"./index.66e0b57e.js";import{e as Dn,P as Il}from"./react-router.03d1f2ee.js";import{j as P,a as re,F as me,c as Pl,r as Ur}from"./jsx-runtime.ed0bc2e8.js";import{bv as ca,o as Bl,Z as Fl,q as Ll,dl as jl,dm as Ul,ch as Wl,dn as ql,dp as Hl,ab as Vl,dq as Yl}from"./index.444e3572.js";import{F as Kl}from"./core.esm.241c4529.js";import{I as bn}from"./IconSvg.af973a0c.js";import{c as rf}from"./cloneDeep.c1db8169.js";import{k as zl}from"./_getTag.09032bbf.js";import{f as Gl,h as Jl,i as ha,a as Xl,l as ee,b as Ql}from"./lodash.default.43ccce09.js";import{g as Wr}from"./isEmpty.c32e2e50.js";import{e as da}from"./isArray.69d02dee.js";import{W as Zl}from"./WarningModal.57553bf6.js";import{A as pa}from"./Alert.e70a23c6.js";import{B as ec}from"./Button.ead7d59a.js";import"./index.35ce73ec.js";import"./withStyles.5eea39d5.js";import"./index.68bd2905.js";import"./utils.31a80d71.js";import"./getEndpoint.bb7ded34.js";import"./SvgIcon.1c3fe3f1.js";import"./index.57d09176.js";import"./pick.fbb2f290.js";import"./uniqueId.e6e71b68.js";import"./isSymbol.3ae1367c.js";import"./_baseClone.32511df5.js";import"./_baseSlice.50189bc5.js";import"./index.browser.0b0b54ae.js";import"./union.ec09b824.js";import"./without.ae039a4c.js";import"./_cacheHas.2f01a71b.js";import"./uniq.e0b70e96.js";import"./toInteger.c1671d6c.js";import"./_Set.79ce457d.js";import"./_setToArray.a82100c8.js";import"./Tooltip.9455954b.js";import"./createSvgIcon.b88943f5.js";import"./makeStyles.83c340c0.js";import"./InfoOutlined.10c65527.js";import"./toLower.f8fc8363.js";import"./upperFirst.83631a22.js";import"./times.12135b85.js";import"./isEqual.7b80062a.js";import"./groupBy.3d35b60d.js";import"./Modal.2df339d5.js";import"./useWaitForDOMRef.2b50b75b.js";import"./inheritsLoose.02c5cdc5.js";import"./removeClass.27874bcb.js";import"./hasClass.56fd144a.js";var rr={exports:{}};const rc=!1,tc=/\r?\n/,nc=/\bono[ @]/;function ic(e){return Boolean(e&&e.configurable&&typeof e.get=="function")}function oc(e){return Boolean(!e||e.writable||typeof e.set=="function")}function tf(e,r){let t=nf(e.stack),n=r?r.stack:void 0;return t&&n?t+`

`+n:t||n}function ac(e,r,t){t?Object.defineProperty(r,"stack",{get:()=>{let n=e.get.apply(r);return tf({stack:n},t)},enumerable:!1,configurable:!0}):sc(r,e)}function nf(e){if(e){let r=e.split(tc),t;for(let n=0;n<r.length;n++){let i=r[n];if(nc.test(i))t===void 0&&(t=n);else if(t!==void 0){r.splice(t,n-t);break}}if(r.length>0)return r.join(`
`)}return e}function sc(e,r){Object.defineProperty(e,"stack",{get:()=>nf(r.get.apply(e)),enumerable:!1,configurable:!0})}const fc=["function","symbol","undefined"],uc=["constructor","prototype","__proto__"],lc=Object.getPrototypeOf({});function of(){let e={},r=this;for(let t of af(r))if(typeof t=="string"){let n=r[t],i=typeof n;fc.includes(i)||(e[t]=n)}return e}function af(e,r=[]){let t=[];for(;e&&e!==lc;)t=t.concat(Object.getOwnPropertyNames(e),Object.getOwnPropertySymbols(e)),e=Object.getPrototypeOf(e);let n=new Set(t);for(let i of r.concat(uc))n.delete(i);return n}const cc=["name","message","stack"];function nn(e,r,t){let n=e;return hc(n,r),r&&typeof r=="object"&&dc(n,r),n.toJSON=of,t&&typeof t=="object"&&Object.assign(n,t),n}function hc(e,r){let t=Object.getOwnPropertyDescriptor(e,"stack");ic(t)?ac(t,e,r):oc(t)&&(e.stack=tf(e,r))}function dc(e,r){let t=af(r,cc),n=e,i=r;for(let o of t)if(n[o]===void 0)try{n[o]=i[o]}catch{}}function pc(e){return e=e||{},{concatMessages:e.concatMessages===void 0?!0:Boolean(e.concatMessages),format:e.format===void 0?rc:typeof e.format=="function"?e.format:!1}}function gc(e,r){let t,n,i,o="";return typeof e[0]=="string"?i=e:typeof e[1]=="string"?(e[0]instanceof Error?t=e[0]:n=e[0],i=e.slice(1)):(t=e[0],n=e[1],i=e.slice(2)),i.length>0&&(r.format?o=r.format.apply(void 0,i):o=i.join(" ")),r.concatMessages&&t&&t.message&&(o+=(o?` 
`:"")+t.message),{originalError:t,props:n,message:o}}const _r=wo;function wo(e,r){r=pc(r);function t(...n){let{originalError:i,props:o,message:a}=gc(n,r),s=new e(a);return nn(s,i,o)}return t[Symbol.species]=e,t}wo.toJSON=function(r){return of.call(r)};wo.extend=function(r,t,n){return n||t instanceof Error?nn(r,t,n):t?nn(r,void 0,t):nn(r)};const ga=tr;tr.error=new _r(Error);tr.eval=new _r(EvalError);tr.range=new _r(RangeError);tr.reference=new _r(ReferenceError);tr.syntax=new _r(SyntaxError);tr.type=new _r(TypeError);tr.uri=new _r(URIError);const vc=tr;function tr(...e){let r=e[0];if(typeof r=="object"&&typeof r.name=="string"){for(let t of Object.values(vc))if(typeof t=="function"&&t.name==="ono"){let n=t[Symbol.species];if(n&&n!==Error&&(r instanceof n||r.name===n.name))return t.apply(void 0,e)}}return tr.error.apply(void 0,e)}typeof module=="object"&&typeof module.exports=="object"&&(module.exports=Object.assign(module.exports.default,module.exports));const mc=Object.freeze(Object.defineProperty({__proto__:null,ono:ga,default:ga,Ono:_r},Symbol.toStringTag,{value:"Module"})),Dr=bo(mc);var Ie={exports:{}};(function(e,r){let t=/^win/.test(process.platform),n=/\//g,i=/^(\w{2,}):\/\//i,o=e.exports,a=/~1/g,s=/~0/g,f=[/\?/g,"%3F",/\#/g,"%23"],u=[/\%23/g,"#",/\%24/g,"$",/\%26/g,"&",/\%2C/g,",",/\%40/g,"@"];r.parse=la.parse,r.resolve=la.resolve,r.cwd=function(){if(process.browser)return location.href;let l=process.cwd(),p=l.slice(-1);return p==="/"||p==="\\"?l:l+"/"},r.getProtocol=function(l){let p=i.exec(l);if(p)return p[1].toLowerCase()},r.getExtension=function(l){let p=l.lastIndexOf(".");return p>=0?o.stripQuery(l.substr(p).toLowerCase()):""},r.stripQuery=function(l){let p=l.indexOf("?");return p>=0&&(l=l.substr(0,p)),l},r.getHash=function(l){let p=l.indexOf("#");return p>=0?l.substr(p):"#"},r.stripHash=function(l){let p=l.indexOf("#");return p>=0&&(l=l.substr(0,p)),l},r.isHttp=function(l){let p=o.getProtocol(l);return p==="http"||p==="https"?!0:p===void 0?process.browser:!1},r.isFileSystemPath=function(l){if(process.browser)return!1;let p=o.getProtocol(l);return p===void 0||p==="file"},r.fromFileSystemPath=function(l){t&&(l=l.replace(/\\/g,"/")),l=encodeURI(l);for(let p=0;p<f.length;p+=2)l=l.replace(f[p],f[p+1]);return l},r.toFileSystemPath=function(l,p){l=decodeURI(l);for(let d=0;d<u.length;d+=2)l=l.replace(u[d],u[d+1]);let h=l.substr(0,7).toLowerCase()==="file://";return h&&(l=l[7]==="/"?l.substr(8):l.substr(7),t&&l[1]==="/"&&(l=l[0]+":"+l.substr(1)),p?l="file:///"+l:(h=!1,l=t?l:"/"+l)),t&&!h&&(l=l.replace(n,"\\"),l.substr(1,2)===":\\"&&(l=l[0].toUpperCase()+l.substr(1))),l},r.safePointerToPath=function(l){return l.length<=1||l[0]!=="#"||l[1]!=="/"?[]:l.slice(2).split("/").map(p=>decodeURIComponent(p).replace(a,"/").replace(s,"~"))}})(Ie,Ie.exports);var pe={};const{Ono:sf}=Dr,{stripHash:ff,toFileSystemPath:yc}=Ie.exports,Er=pe.JSONParserError=class extends Error{constructor(r,t){super(),this.code="EUNKNOWN",this.message=r,this.source=t,this.path=null,sf.extend(this)}get footprint(){return`${this.path}+${this.source}+${this.code}+${this.message}`}};Sr(Er);const uf=pe.JSONParserErrorGroup=class lf extends Error{constructor(r){super(),this.files=r,this.message=`${this.errors.length} error${this.errors.length>1?"s":""} occurred while reading '${yc(r.$refs._root$Ref.path)}'`,sf.extend(this)}static getParserErrors(r){const t=[];for(const n of Object.values(r.$refs._$refs))n.errors&&t.push(...n.errors);return t}get errors(){return lf.getParserErrors(this.files)}};Sr(uf);const bc=pe.ParserError=class extends Er{constructor(r,t){super(`Error parsing ${t}: ${r}`,t),this.code="EPARSER"}};Sr(bc);const wc=pe.UnmatchedParserError=class extends Er{constructor(r){super(`Could not find parser for "${r}"`,r),this.code="EUNMATCHEDPARSER"}};Sr(wc);const _c=pe.ResolverError=class extends Er{constructor(r,t){super(r.message||`Error reading file "${t}"`,t),this.code="ERESOLVER","code"in r&&(this.ioErrorCode=String(r.code))}};Sr(_c);const Ec=pe.UnmatchedResolverError=class extends Er{constructor(r){super(`Could not find resolver for "${r}"`,r),this.code="EUNMATCHEDRESOLVER"}};Sr(Ec);const Sc=pe.MissingPointerError=class extends Er{constructor(r,t){super(`Token "${r}" does not exist.`,ff(t)),this.code="EMISSINGPOINTER"}};Sr(Sc);const xc=pe.InvalidPointerError=class extends Er{constructor(r,t){super(`Invalid $ref pointer "${r}". Pointers must begin with "#/"`,ff(t)),this.code="EINVALIDPOINTER"}};Sr(xc);function Sr(e){Object.defineProperty(e.prototype,"name",{value:e.name,enumerable:!0})}pe.isHandledError=function(e){return e instanceof Er||e instanceof uf};pe.normalizeError=function(e){return e.path===null&&(e.path=[]),e};var oi,va;function In(){if(va)return oi;va=1,oi=c;const e=Mt(),r=Ie.exports,{JSONParserError:t,InvalidPointerError:n,MissingPointerError:i,isHandledError:o}=pe,a=/\//g,s=/~/g,f=/~1/g,u=/~0/g;function c(d,v,w){this.$ref=d,this.path=v,this.originalPath=w||v,this.value=void 0,this.circular=!1,this.indirections=0}c.prototype.resolve=function(d,v,w){let y=c.parse(this.path,this.originalPath);this.value=h(d);for(let _=0;_<y.length;_++){if(l(this,v)&&(this.path=c.join(this.path,y.slice(_))),typeof this.value=="object"&&this.value!==null&&"$ref"in this.value)return this;let C=y[_];if(this.value[C]===void 0||this.value[C]===null)throw this.value=null,new i(C,this.originalPath);this.value=this.value[C]}return(!this.value||this.value.$ref&&r.resolve(this.path,this.value.$ref)!==w)&&l(this,v),this},c.prototype.set=function(d,v,w){let y=c.parse(this.path),_;if(y.length===0)return this.value=v,v;this.value=h(d);for(let C=0;C<y.length-1;C++)l(this,w),_=y[C],this.value&&this.value[_]!==void 0?this.value=this.value[_]:this.value=p(this,_,{});return l(this,w),_=y[y.length-1],p(this,_,v),d},c.parse=function(d,v){let w=r.getHash(d).substr(1);if(!w)return[];w=w.split("/");for(let y=0;y<w.length;y++)w[y]=decodeURIComponent(w[y].replace(f,"/").replace(u,"~"));if(w[0]!=="")throw new n(w,v===void 0?d:v);return w.slice(1)},c.join=function(d,v){d.indexOf("#")===-1&&(d+="#"),v=Array.isArray(v)?v:[v];for(let w=0;w<v.length;w++){let y=v[w];d+="/"+encodeURIComponent(y.replace(s,"~0").replace(a,"~1"))}return d};function l(d,v){if(e.isAllowed$Ref(d.value,v)){let w=r.resolve(d.path,d.value.$ref);if(w===d.path)d.circular=!0;else{let y=d.$ref.$refs._resolve(w,d.path,v);return y===null?!1:(d.indirections+=y.indirections+1,e.isExtended$Ref(d.value)?(d.value=e.dereference(d.value,y.value),!1):(d.$ref=y.$ref,d.path=y.path,d.value=y.value,!0))}}}function p(d,v,w){if(d.value&&typeof d.value=="object")v==="-"&&Array.isArray(d.value)?d.value.push(w):d.value[v]=w;else throw new t(`Error assigning $ref pointer "${d.path}". 
Cannot set "${v}" of a non-object.`);return w}function h(d){if(o(d))throw d;return d}return oi}var ai,ma;function Mt(){if(ma)return ai;ma=1,ai=s;const e=In(),{InvalidPointerError:r,isHandledError:t,normalizeError:n}=pe,{safePointerToPath:i,stripHash:o,getHash:a}=Ie.exports;function s(){this.path=void 0,this.value=void 0,this.$refs=void 0,this.pathType=void 0,this.errors=void 0}return s.prototype.addError=function(f){this.errors===void 0&&(this.errors=[]);const u=this.errors.map(({footprint:c})=>c);Array.isArray(f.errors)?this.errors.push(...f.errors.map(n).filter(({footprint:c})=>!u.includes(c))):u.includes(f.footprint)||this.errors.push(n(f))},s.prototype.exists=function(f,u){try{return this.resolve(f,u),!0}catch{return!1}},s.prototype.get=function(f,u){return this.resolve(f,u).value},s.prototype.resolve=function(f,u,c,l){let p=new e(this,f,c);try{return p.resolve(this.value,u,l)}catch(h){if(!u||!u.continueOnError||!t(h))throw h;return h.path===null&&(h.path=i(a(l))),h instanceof r&&(h.source=o(l)),this.addError(h),null}},s.prototype.set=function(f,u){let c=new e(this,f);this.value=c.set(this.value,u)},s.is$Ref=function(f){return f&&typeof f=="object"&&typeof f.$ref=="string"&&f.$ref.length>0},s.isExternal$Ref=function(f){return s.is$Ref(f)&&f.$ref[0]!=="#"},s.isAllowed$Ref=function(f,u){if(s.is$Ref(f)){if(f.$ref.substr(0,2)==="#/"||f.$ref==="#")return!0;if(f.$ref[0]!=="#"&&(!u||u.resolve.external))return!0}},s.isExtended$Ref=function(f){return s.is$Ref(f)&&Object.keys(f).length>1},s.dereference=function(f,u){if(u&&typeof u=="object"&&s.isExtended$Ref(f)){let c={};for(let l of Object.keys(f))l!=="$ref"&&(c[l]=f[l]);for(let l of Object.keys(u))l in c||(c[l]=u[l]);return c}else return u},ai}const{ono:cf}=Dr,Rc=Mt(),gr=Ie.exports;var Ac=Ke;function Ke(){this.circular=!1,this._$refs={},this._root$Ref=null}Ke.prototype.paths=function(e){return hf(this._$refs,arguments).map(t=>t.decoded)};Ke.prototype.values=function(e){let r=this._$refs;return hf(r,arguments).reduce((n,i)=>(n[i.decoded]=r[i.encoded].value,n),{})};Ke.prototype.toJSON=Ke.prototype.values;Ke.prototype.exists=function(e,r){try{return this._resolve(e,"",r),!0}catch{return!1}};Ke.prototype.get=function(e,r){return this._resolve(e,"",r).value};Ke.prototype.set=function(e,r){let t=gr.resolve(this._root$Ref.path,e),n=gr.stripHash(t),i=this._$refs[n];if(!i)throw cf(`Error resolving $ref pointer "${e}". 
"${n}" not found.`);i.set(t,r)};Ke.prototype._add=function(e){let r=gr.stripHash(e),t=new Rc;return t.path=r,t.$refs=this,this._$refs[r]=t,this._root$Ref=this._root$Ref||t,t};Ke.prototype._resolve=function(e,r,t){let n=gr.resolve(this._root$Ref.path,e),i=gr.stripHash(n),o=this._$refs[i];if(!o)throw cf(`Error resolving $ref pointer "${e}". 
"${i}" not found.`);return o.resolve(n,t,e,r)};Ke.prototype._get$Ref=function(e){e=gr.resolve(this._root$Ref.path,e);let r=gr.stripHash(e);return this._$refs[r]};function hf(e,r){let t=Object.keys(e);return r=Array.isArray(r[0])?r[0]:Array.prototype.slice.call(r),r.length>0&&r[0]&&(t=t.filter(n=>r.indexOf(e[n].pathType)!==-1)),t.map(n=>({encoded:n,decoded:e[n].pathType==="file"?gr.toFileSystemPath(n,!0):n}))}var $t={};$t.all=function(e){return Object.keys(e).filter(r=>typeof e[r]=="object").map(r=>(e[r].name=r,e[r]))};$t.filter=function(e,r,t){return e.filter(n=>!!df(n,r,t))};$t.sort=function(e){for(let r of e)r.order=r.order||Number.MAX_SAFE_INTEGER;return e.sort((r,t)=>r.order-t.order)};$t.run=function(e,r,t,n){let i,o,a=0;return new Promise((s,f)=>{u();function u(){if(i=e[a++],!i)return f(o);try{let h=df(i,r,t,c,n);if(h&&typeof h.then=="function")h.then(l,p);else if(h!==void 0)l(h);else if(a===e.length)throw new Error("No promise has been returned or callback has been called.")}catch(h){p(h)}}function c(h,d){h?p(h):l(d)}function l(h){s({plugin:i,result:h})}function p(h){o={plugin:i,error:h},u()}})};function df(e,r,t,n,i){let o=e[r];if(typeof o=="function")return o.apply(e,[t,n,i]);if(!n){if(o instanceof RegExp)return o.test(t.url);if(typeof o=="string")return o===t.extension;if(Array.isArray(o))return o.indexOf(t.extension)!==-1}return o}const{ono:Vi}=Dr,ya=Ie.exports,ur=$t,{ResolverError:ba,ParserError:wa,UnmatchedParserError:Oc,UnmatchedResolverError:Tc,isHandledError:Cc}=pe;var pf=Nc;async function Nc(e,r,t){e=ya.stripHash(e);let n=r._add(e),i={url:e,extension:ya.getExtension(e)};try{const o=await kc(i,t,r);n.pathType=o.plugin.name,i.data=o.result;const a=await Mc(i,t,r);return n.value=a.result,a.result}catch(o){throw Cc(o)&&(n.value=o),o}}function kc(e,r,t){return new Promise((n,i)=>{let o=ur.all(r.resolve);o=ur.filter(o,"canRead",e),ur.sort(o),ur.run(o,"read",e,t).then(n,a);function a(s){!s&&r.continueOnError?i(new Tc(e.url)):!s||!("error"in s)?i(Vi.syntax(`Unable to resolve $ref pointer "${e.url}"`)):s.error instanceof ba?i(s.error):i(new ba(s,e.url))}})}function Mc(e,r,t){return new Promise((n,i)=>{let o=ur.all(r.parse),a=ur.filter(o,"canParse",e),s=a.length>0?a:o;ur.sort(s),ur.run(s,"parse",e,t).then(f,u);function f(c){!c.plugin.allowEmpty&&$c(c.result)?i(Vi.syntax(`Error parsing "${e.url}" as ${c.plugin.name}. 
Parsed value is empty`)):n(c)}function u(c){!c&&r.continueOnError?i(new Oc(e.url)):!c||!("error"in c)?i(Vi.syntax(`Unable to parse ${e.url}`)):c.error instanceof wa?i(c.error):i(new wa(c.error.message,e.url))}})}function $c(e){return e===void 0||typeof e=="object"&&Object.keys(e).length===0||typeof e=="string"&&e.trim().length===0||Buffer.isBuffer(e)&&e.length===0}const{ParserError:Dc}=pe;var Ic={order:100,allowEmpty:!0,canParse:".json",async parse(e){let r=e.data;if(Buffer.isBuffer(r)&&(r=r.toString()),typeof r=="string"){if(r.trim().length===0)return;try{return JSON.parse(r)}catch(t){throw new Dc(t.message,e.url)}}else return r}},le={},Dt={},We={};function gf(e){return typeof e>"u"||e===null}function Pc(e){return typeof e=="object"&&e!==null}function Bc(e){return Array.isArray(e)?e:gf(e)?[]:[e]}function Fc(e,r){var t,n,i,o;if(r)for(o=Object.keys(r),t=0,n=o.length;t<n;t+=1)i=o[t],e[i]=r[i];return e}function Lc(e,r){var t="",n;for(n=0;n<r;n+=1)t+=e;return t}function jc(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}We.isNothing=gf;We.isObject=Pc;We.toArray=Bc;We.repeat=Lc;We.isNegativeZero=jc;We.extend=Fc;function pt(e,r){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=r,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}pt.prototype=Object.create(Error.prototype);pt.prototype.constructor=pt;pt.prototype.toString=function(r){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!r&&this.mark&&(t+=" "+this.mark.toString()),t};var It=pt,_a=We;function _o(e,r,t,n,i){this.name=e,this.buffer=r,this.position=t,this.line=n,this.column=i}_o.prototype.getSnippet=function(r,t){var n,i,o,a,s;if(!this.buffer)return null;for(r=r||4,t=t||75,n="",i=this.position;i>0&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(i-1))===-1;)if(i-=1,this.position-i>t/2-1){n=" ... ",i+=5;break}for(o="",a=this.position;a<this.buffer.length&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(a))===-1;)if(a+=1,a-this.position>t/2-1){o=" ... ",a-=5;break}return s=this.buffer.slice(i,a),_a.repeat(" ",r)+n+s+o+`
`+_a.repeat(" ",r+this.position-i+n.length)+"^"};_o.prototype.toString=function(r){var t,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),r||(t=this.getSnippet(),t&&(n+=`:
`+t)),n};var Uc=_o,Ea=It,Wc=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],qc=["scalar","sequence","mapping"];function Hc(e){var r={};return e!==null&&Object.keys(e).forEach(function(t){e[t].forEach(function(n){r[String(n)]=t})}),r}function Vc(e,r){if(r=r||{},Object.keys(r).forEach(function(t){if(Wc.indexOf(t)===-1)throw new Ea('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=r.kind||null,this.resolve=r.resolve||function(){return!0},this.construct=r.construct||function(t){return t},this.instanceOf=r.instanceOf||null,this.predicate=r.predicate||null,this.represent=r.represent||null,this.defaultStyle=r.defaultStyle||null,this.styleAliases=Hc(r.styleAliases||null),qc.indexOf(this.kind)===-1)throw new Ea('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Se=Vc,Sa=We,on=It,Yc=Se;function Yi(e,r,t){var n=[];return e.include.forEach(function(i){t=Yi(i,r,t)}),e[r].forEach(function(i){t.forEach(function(o,a){o.tag===i.tag&&o.kind===i.kind&&n.push(a)}),t.push(i)}),t.filter(function(i,o){return n.indexOf(o)===-1})}function Kc(){var e={scalar:{},sequence:{},mapping:{},fallback:{}},r,t;function n(i){e[i.kind][i.tag]=e.fallback[i.tag]=i}for(r=0,t=arguments.length;r<t;r+=1)arguments[r].forEach(n);return e}function qr(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(r){if(r.loadKind&&r.loadKind!=="scalar")throw new on("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=Yi(this,"implicit",[]),this.compiledExplicit=Yi(this,"explicit",[]),this.compiledTypeMap=Kc(this.compiledImplicit,this.compiledExplicit)}qr.DEFAULT=null;qr.create=function(){var r,t;switch(arguments.length){case 1:r=qr.DEFAULT,t=arguments[0];break;case 2:r=arguments[0],t=arguments[1];break;default:throw new on("Wrong number of arguments for Schema.create function")}if(r=Sa.toArray(r),t=Sa.toArray(t),!r.every(function(n){return n instanceof qr}))throw new on("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every(function(n){return n instanceof Yc}))throw new on("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new qr({include:r,explicit:t})};var tt=qr,zc=Se,Gc=new zc("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Jc=Se,Xc=new Jc("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Qc=Se,Zc=new Qc("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),eh=tt,Eo=new eh({explicit:[Gc,Xc,Zc]}),rh=Se;function th(e){if(e===null)return!0;var r=e.length;return r===1&&e==="~"||r===4&&(e==="null"||e==="Null"||e==="NULL")}function nh(){return null}function ih(e){return e===null}var oh=new rh("tag:yaml.org,2002:null",{kind:"scalar",resolve:th,construct:nh,predicate:ih,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"}),ah=Se;function sh(e){if(e===null)return!1;var r=e.length;return r===4&&(e==="true"||e==="True"||e==="TRUE")||r===5&&(e==="false"||e==="False"||e==="FALSE")}function fh(e){return e==="true"||e==="True"||e==="TRUE"}function uh(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var lh=new ah("tag:yaml.org,2002:bool",{kind:"scalar",resolve:sh,construct:fh,predicate:uh,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"}),ch=We,hh=Se;function dh(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function ph(e){return 48<=e&&e<=55}function gh(e){return 48<=e&&e<=57}function vh(e){if(e===null)return!1;var r=e.length,t=0,n=!1,i;if(!r)return!1;if(i=e[t],(i==="-"||i==="+")&&(i=e[++t]),i==="0"){if(t+1===r)return!0;if(i=e[++t],i==="b"){for(t++;t<r;t++)if(i=e[t],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(t++;t<r;t++)if(i=e[t],i!=="_"){if(!dh(e.charCodeAt(t)))return!1;n=!0}return n&&i!=="_"}for(;t<r;t++)if(i=e[t],i!=="_"){if(!ph(e.charCodeAt(t)))return!1;n=!0}return n&&i!=="_"}if(i==="_")return!1;for(;t<r;t++)if(i=e[t],i!=="_"){if(i===":")break;if(!gh(e.charCodeAt(t)))return!1;n=!0}return!n||i==="_"?!1:i!==":"?!0:/^(:[0-5]?[0-9])+$/.test(e.slice(t))}function mh(e){var r=e,t=1,n,i,o=[];return r.indexOf("_")!==-1&&(r=r.replace(/_/g,"")),n=r[0],(n==="-"||n==="+")&&(n==="-"&&(t=-1),r=r.slice(1),n=r[0]),r==="0"?0:n==="0"?r[1]==="b"?t*parseInt(r.slice(2),2):r[1]==="x"?t*parseInt(r,16):t*parseInt(r,8):r.indexOf(":")!==-1?(r.split(":").forEach(function(a){o.unshift(parseInt(a,10))}),r=0,i=1,o.forEach(function(a){r+=a*i,i*=60}),t*r):t*parseInt(r,10)}function yh(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!ch.isNegativeZero(e)}var bh=new hh("tag:yaml.org,2002:int",{kind:"scalar",resolve:vh,construct:mh,predicate:yh,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),vf=We,wh=Se,_h=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Eh(e){return!(e===null||!_h.test(e)||e[e.length-1]==="_")}function Sh(e){var r,t,n,i;return r=e.replace(/_/g,"").toLowerCase(),t=r[0]==="-"?-1:1,i=[],"+-".indexOf(r[0])>=0&&(r=r.slice(1)),r===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:r===".nan"?NaN:r.indexOf(":")>=0?(r.split(":").forEach(function(o){i.unshift(parseFloat(o,10))}),r=0,n=1,i.forEach(function(o){r+=o*n,n*=60}),t*r):t*parseFloat(r,10)}var xh=/^[-+]?[0-9]+e/;function Rh(e,r){var t;if(isNaN(e))switch(r){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(r){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(r){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(vf.isNegativeZero(e))return"-0.0";return t=e.toString(10),xh.test(t)?t.replace("e",".e"):t}function Ah(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||vf.isNegativeZero(e))}var Oh=new wh("tag:yaml.org,2002:float",{kind:"scalar",resolve:Eh,construct:Sh,predicate:Ah,represent:Rh,defaultStyle:"lowercase"}),Th=tt,mf=new Th({include:[Eo],implicit:[oh,lh,bh,Oh]}),Ch=tt,yf=new Ch({include:[mf]}),Nh=Se,bf=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),wf=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function kh(e){return e===null?!1:bf.exec(e)!==null||wf.exec(e)!==null}function Mh(e){var r,t,n,i,o,a,s,f=0,u=null,c,l,p;if(r=bf.exec(e),r===null&&(r=wf.exec(e)),r===null)throw new Error("Date resolve error");if(t=+r[1],n=+r[2]-1,i=+r[3],!r[4])return new Date(Date.UTC(t,n,i));if(o=+r[4],a=+r[5],s=+r[6],r[7]){for(f=r[7].slice(0,3);f.length<3;)f+="0";f=+f}return r[9]&&(c=+r[10],l=+(r[11]||0),u=(c*60+l)*6e4,r[9]==="-"&&(u=-u)),p=new Date(Date.UTC(t,n,i,o,a,s,f)),u&&p.setTime(p.getTime()-u),p}function $h(e){return e.toISOString()}var Dh=new Nh("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:kh,construct:Mh,instanceOf:Date,represent:$h}),Ih=Se;function Ph(e){return e==="<<"||e===null}var Bh=new Ih("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Ph}),Cr;try{var Fh=ef;Cr=Fh("buffer").Buffer}catch{}var Lh=Se,So=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function jh(e){if(e===null)return!1;var r,t,n=0,i=e.length,o=So;for(t=0;t<i;t++)if(r=o.indexOf(e.charAt(t)),!(r>64)){if(r<0)return!1;n+=6}return n%8===0}function Uh(e){var r,t,n=e.replace(/[\r\n=]/g,""),i=n.length,o=So,a=0,s=[];for(r=0;r<i;r++)r%4===0&&r&&(s.push(a>>16&255),s.push(a>>8&255),s.push(a&255)),a=a<<6|o.indexOf(n.charAt(r));return t=i%4*6,t===0?(s.push(a>>16&255),s.push(a>>8&255),s.push(a&255)):t===18?(s.push(a>>10&255),s.push(a>>2&255)):t===12&&s.push(a>>4&255),Cr?Cr.from?Cr.from(s):new Cr(s):s}function Wh(e){var r="",t=0,n,i,o=e.length,a=So;for(n=0;n<o;n++)n%3===0&&n&&(r+=a[t>>18&63],r+=a[t>>12&63],r+=a[t>>6&63],r+=a[t&63]),t=(t<<8)+e[n];return i=o%3,i===0?(r+=a[t>>18&63],r+=a[t>>12&63],r+=a[t>>6&63],r+=a[t&63]):i===2?(r+=a[t>>10&63],r+=a[t>>4&63],r+=a[t<<2&63],r+=a[64]):i===1&&(r+=a[t>>2&63],r+=a[t<<4&63],r+=a[64],r+=a[64]),r}function qh(e){return Cr&&Cr.isBuffer(e)}var Hh=new Lh("tag:yaml.org,2002:binary",{kind:"scalar",resolve:jh,construct:Uh,predicate:qh,represent:Wh}),Vh=Se,Yh=Object.prototype.hasOwnProperty,Kh=Object.prototype.toString;function zh(e){if(e===null)return!0;var r=[],t,n,i,o,a,s=e;for(t=0,n=s.length;t<n;t+=1){if(i=s[t],a=!1,Kh.call(i)!=="[object Object]")return!1;for(o in i)if(Yh.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(r.indexOf(o)===-1)r.push(o);else return!1}return!0}function Gh(e){return e!==null?e:[]}var Jh=new Vh("tag:yaml.org,2002:omap",{kind:"sequence",resolve:zh,construct:Gh}),Xh=Se,Qh=Object.prototype.toString;function Zh(e){if(e===null)return!0;var r,t,n,i,o,a=e;for(o=new Array(a.length),r=0,t=a.length;r<t;r+=1){if(n=a[r],Qh.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[r]=[i[0],n[i[0]]]}return!0}function ed(e){if(e===null)return[];var r,t,n,i,o,a=e;for(o=new Array(a.length),r=0,t=a.length;r<t;r+=1)n=a[r],i=Object.keys(n),o[r]=[i[0],n[i[0]]];return o}var rd=new Xh("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Zh,construct:ed}),td=Se,nd=Object.prototype.hasOwnProperty;function id(e){if(e===null)return!0;var r,t=e;for(r in t)if(nd.call(t,r)&&t[r]!==null)return!1;return!0}function od(e){return e!==null?e:{}}var ad=new td("tag:yaml.org,2002:set",{kind:"mapping",resolve:id,construct:od}),sd=tt,Pt=new sd({include:[yf],implicit:[Dh,Bh],explicit:[Hh,Jh,rd,ad]}),fd=Se;function ud(){return!0}function ld(){}function cd(){return""}function hd(e){return typeof e>"u"}var dd=new fd("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:ud,construct:ld,predicate:hd,represent:cd}),pd=Se;function gd(e){if(e===null||e.length===0)return!1;var r=e,t=/\/([gim]*)$/.exec(e),n="";return!(r[0]==="/"&&(t&&(n=t[1]),n.length>3||r[r.length-n.length-1]!=="/"))}function vd(e){var r=e,t=/\/([gim]*)$/.exec(e),n="";return r[0]==="/"&&(t&&(n=t[1]),r=r.slice(1,r.length-n.length-1)),new RegExp(r,n)}function md(e){var r="/"+e.source+"/";return e.global&&(r+="g"),e.multiline&&(r+="m"),e.ignoreCase&&(r+="i"),r}function yd(e){return Object.prototype.toString.call(e)==="[object RegExp]"}var bd=new pd("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:gd,construct:vd,predicate:yd,represent:md}),wn;try{var wd=ef;wn=wd("esprima")}catch{typeof window<"u"&&(wn=window.esprima)}var _d=Se;function Ed(e){if(e===null)return!1;try{var r="("+e+")",t=wn.parse(r,{range:!0});return!(t.type!=="Program"||t.body.length!==1||t.body[0].type!=="ExpressionStatement"||t.body[0].expression.type!=="ArrowFunctionExpression"&&t.body[0].expression.type!=="FunctionExpression")}catch{return!1}}function Sd(e){var r="("+e+")",t=wn.parse(r,{range:!0}),n=[],i;if(t.type!=="Program"||t.body.length!==1||t.body[0].type!=="ExpressionStatement"||t.body[0].expression.type!=="ArrowFunctionExpression"&&t.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return t.body[0].expression.params.forEach(function(o){n.push(o.name)}),i=t.body[0].expression.body.range,t.body[0].expression.body.type==="BlockStatement"?new Function(n,r.slice(i[0]+1,i[1]-1)):new Function(n,"return "+r.slice(i[0],i[1]))}function xd(e){return e.toString()}function Rd(e){return Object.prototype.toString.call(e)==="[object Function]"}var Ad=new _d("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:Ed,construct:Sd,predicate:Rd,represent:xd}),xa=tt,Pn=xa.DEFAULT=new xa({include:[Pt],explicit:[dd,bd,Ad]}),Qe=We,_f=It,Od=Uc,Ki=Pt,Td=Pn,kr=Object.prototype.hasOwnProperty,_n=1,Ef=2,Sf=3,En=4,si=1,Cd=2,Ra=3,Nd=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,kd=/[\x85\u2028\u2029]/,Md=/[,\[\]\{\}]/,xf=/^(?:!|!!|![a-z\-]+!)$/i,Rf=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Aa(e){return Object.prototype.toString.call(e)}function Ze(e){return e===10||e===13}function Nr(e){return e===9||e===32}function $e(e){return e===9||e===32||e===10||e===13}function Hr(e){return e===44||e===91||e===93||e===123||e===125}function $d(e){var r;return 48<=e&&e<=57?e-48:(r=e|32,97<=r&&r<=102?r-97+10:-1)}function Dd(e){return e===120?2:e===117?4:e===85?8:0}function Id(e){return 48<=e&&e<=57?e-48:-1}function Oa(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function Pd(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var Af=new Array(256),Of=new Array(256);for(var Br=0;Br<256;Br++)Af[Br]=Oa(Br)?1:0,Of[Br]=Oa(Br);function Bd(e,r){this.input=e,this.filename=r.filename||null,this.schema=r.schema||Td,this.onWarning=r.onWarning||null,this.legacy=r.legacy||!1,this.json=r.json||!1,this.listener=r.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function Tf(e,r){return new _f(r,new Od(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function K(e,r){throw Tf(e,r)}function Sn(e,r){e.onWarning&&e.onWarning.call(null,Tf(e,r))}var Ta={YAML:function(r,t,n){var i,o,a;r.version!==null&&K(r,"duplication of %YAML directive"),n.length!==1&&K(r,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&K(r,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&K(r,"unacceptable YAML version of the document"),r.version=n[0],r.checkLineBreaks=a<2,a!==1&&a!==2&&Sn(r,"unsupported YAML version of the document")},TAG:function(r,t,n){var i,o;n.length!==2&&K(r,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],xf.test(i)||K(r,"ill-formed tag handle (first argument) of the TAG directive"),kr.call(r.tagMap,i)&&K(r,'there is a previously declared suffix for "'+i+'" tag handle'),Rf.test(o)||K(r,"ill-formed tag prefix (second argument) of the TAG directive"),r.tagMap[i]=o}};function hr(e,r,t,n){var i,o,a,s;if(r<t){if(s=e.input.slice(r,t),n)for(i=0,o=s.length;i<o;i+=1)a=s.charCodeAt(i),a===9||32<=a&&a<=1114111||K(e,"expected valid JSON character");else Nd.test(s)&&K(e,"the stream contains non-printable characters");e.result+=s}}function Ca(e,r,t,n){var i,o,a,s;for(Qe.isObject(t)||K(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(t),a=0,s=i.length;a<s;a+=1)o=i[a],kr.call(r,o)||(r[o]=t[o],n[o]=!0)}function Vr(e,r,t,n,i,o,a,s){var f,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),f=0,u=i.length;f<u;f+=1)Array.isArray(i[f])&&K(e,"nested arrays are not supported inside keys"),typeof i=="object"&&Aa(i[f])==="[object Object]"&&(i[f]="[object Object]");if(typeof i=="object"&&Aa(i)==="[object Object]"&&(i="[object Object]"),i=String(i),r===null&&(r={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(f=0,u=o.length;f<u;f+=1)Ca(e,r,o[f],t);else Ca(e,r,o,t);else!e.json&&!kr.call(t,i)&&kr.call(r,i)&&(e.line=a||e.line,e.position=s||e.position,K(e,"duplicated mapping key")),r[i]=o,delete t[i];return r}function xo(e){var r;r=e.input.charCodeAt(e.position),r===10?e.position++:r===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):K(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function de(e,r,t){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Nr(i);)i=e.input.charCodeAt(++e.position);if(r&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Ze(i))for(xo(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return t!==-1&&n!==0&&e.lineIndent<t&&Sn(e,"deficient indentation"),n}function Bn(e){var r=e.position,t;return t=e.input.charCodeAt(r),!!((t===45||t===46)&&t===e.input.charCodeAt(r+1)&&t===e.input.charCodeAt(r+2)&&(r+=3,t=e.input.charCodeAt(r),t===0||$e(t)))}function Ro(e,r){r===1?e.result+=" ":r>1&&(e.result+=Qe.repeat(`
`,r-1))}function Fd(e,r,t){var n,i,o,a,s,f,u,c,l=e.kind,p=e.result,h;if(h=e.input.charCodeAt(e.position),$e(h)||Hr(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=e.input.charCodeAt(e.position+1),$e(i)||t&&Hr(i)))return!1;for(e.kind="scalar",e.result="",o=a=e.position,s=!1;h!==0;){if(h===58){if(i=e.input.charCodeAt(e.position+1),$e(i)||t&&Hr(i))break}else if(h===35){if(n=e.input.charCodeAt(e.position-1),$e(n))break}else{if(e.position===e.lineStart&&Bn(e)||t&&Hr(h))break;if(Ze(h))if(f=e.line,u=e.lineStart,c=e.lineIndent,de(e,!1,-1),e.lineIndent>=r){s=!0,h=e.input.charCodeAt(e.position);continue}else{e.position=a,e.line=f,e.lineStart=u,e.lineIndent=c;break}}s&&(hr(e,o,a,!1),Ro(e,e.line-f),o=a=e.position,s=!1),Nr(h)||(a=e.position+1),h=e.input.charCodeAt(++e.position)}return hr(e,o,a,!1),e.result?!0:(e.kind=l,e.result=p,!1)}function Ld(e,r){var t,n,i;if(t=e.input.charCodeAt(e.position),t!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(t=e.input.charCodeAt(e.position))!==0;)if(t===39)if(hr(e,n,e.position,!0),t=e.input.charCodeAt(++e.position),t===39)n=e.position,e.position++,i=e.position;else return!0;else Ze(t)?(hr(e,n,i,!0),Ro(e,de(e,!1,r)),n=i=e.position):e.position===e.lineStart&&Bn(e)?K(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);K(e,"unexpected end of the stream within a single quoted scalar")}function jd(e,r){var t,n,i,o,a,s;if(s=e.input.charCodeAt(e.position),s!==34)return!1;for(e.kind="scalar",e.result="",e.position++,t=n=e.position;(s=e.input.charCodeAt(e.position))!==0;){if(s===34)return hr(e,t,e.position,!0),e.position++,!0;if(s===92){if(hr(e,t,e.position,!0),s=e.input.charCodeAt(++e.position),Ze(s))de(e,!1,r);else if(s<256&&Af[s])e.result+=Of[s],e.position++;else if((a=Dd(s))>0){for(i=a,o=0;i>0;i--)s=e.input.charCodeAt(++e.position),(a=$d(s))>=0?o=(o<<4)+a:K(e,"expected hexadecimal character");e.result+=Pd(o),e.position++}else K(e,"unknown escape sequence");t=n=e.position}else Ze(s)?(hr(e,t,n,!0),Ro(e,de(e,!1,r)),t=n=e.position):e.position===e.lineStart&&Bn(e)?K(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}K(e,"unexpected end of the stream within a double quoted scalar")}function Ud(e,r){var t=!0,n,i=e.tag,o,a=e.anchor,s,f,u,c,l,p={},h,d,v,w;if(w=e.input.charCodeAt(e.position),w===91)f=93,l=!1,o=[];else if(w===123)f=125,l=!0,o={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),w=e.input.charCodeAt(++e.position);w!==0;){if(de(e,!0,r),w=e.input.charCodeAt(e.position),w===f)return e.position++,e.tag=i,e.anchor=a,e.kind=l?"mapping":"sequence",e.result=o,!0;t||K(e,"missed comma between flow collection entries"),d=h=v=null,u=c=!1,w===63&&(s=e.input.charCodeAt(e.position+1),$e(s)&&(u=c=!0,e.position++,de(e,!0,r))),n=e.line,Jr(e,r,_n,!1,!0),d=e.tag,h=e.result,de(e,!0,r),w=e.input.charCodeAt(e.position),(c||e.line===n)&&w===58&&(u=!0,w=e.input.charCodeAt(++e.position),de(e,!0,r),Jr(e,r,_n,!1,!0),v=e.result),l?Vr(e,o,p,d,h,v):u?o.push(Vr(e,null,p,d,h,v)):o.push(h),de(e,!0,r),w=e.input.charCodeAt(e.position),w===44?(t=!0,w=e.input.charCodeAt(++e.position)):t=!1}K(e,"unexpected end of the stream within a flow collection")}function Wd(e,r){var t,n,i=si,o=!1,a=!1,s=r,f=0,u=!1,c,l;if(l=e.input.charCodeAt(e.position),l===124)n=!1;else if(l===62)n=!0;else return!1;for(e.kind="scalar",e.result="";l!==0;)if(l=e.input.charCodeAt(++e.position),l===43||l===45)si===i?i=l===43?Ra:Cd:K(e,"repeat of a chomping mode identifier");else if((c=Id(l))>=0)c===0?K(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?K(e,"repeat of an indentation width identifier"):(s=r+c-1,a=!0);else break;if(Nr(l)){do l=e.input.charCodeAt(++e.position);while(Nr(l));if(l===35)do l=e.input.charCodeAt(++e.position);while(!Ze(l)&&l!==0)}for(;l!==0;){for(xo(e),e.lineIndent=0,l=e.input.charCodeAt(e.position);(!a||e.lineIndent<s)&&l===32;)e.lineIndent++,l=e.input.charCodeAt(++e.position);if(!a&&e.lineIndent>s&&(s=e.lineIndent),Ze(l)){f++;continue}if(e.lineIndent<s){i===Ra?e.result+=Qe.repeat(`
`,o?1+f:f):i===si&&o&&(e.result+=`
`);break}for(n?Nr(l)?(u=!0,e.result+=Qe.repeat(`
`,o?1+f:f)):u?(u=!1,e.result+=Qe.repeat(`
`,f+1)):f===0?o&&(e.result+=" "):e.result+=Qe.repeat(`
`,f):e.result+=Qe.repeat(`
`,o?1+f:f),o=!0,a=!0,f=0,t=e.position;!Ze(l)&&l!==0;)l=e.input.charCodeAt(++e.position);hr(e,t,e.position,!1)}return!0}function Na(e,r){var t,n=e.tag,i=e.anchor,o=[],a,s=!1,f;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),f=e.input.charCodeAt(e.position);f!==0&&!(f!==45||(a=e.input.charCodeAt(e.position+1),!$e(a)));){if(s=!0,e.position++,de(e,!0,-1)&&e.lineIndent<=r){o.push(null),f=e.input.charCodeAt(e.position);continue}if(t=e.line,Jr(e,r,Sf,!1,!0),o.push(e.result),de(e,!0,-1),f=e.input.charCodeAt(e.position),(e.line===t||e.lineIndent>r)&&f!==0)K(e,"bad indentation of a sequence entry");else if(e.lineIndent<r)break}return s?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function qd(e,r,t){var n,i,o,a,s=e.tag,f=e.anchor,u={},c={},l=null,p=null,h=null,d=!1,v=!1,w;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),w=e.input.charCodeAt(e.position);w!==0;){if(n=e.input.charCodeAt(e.position+1),o=e.line,a=e.position,(w===63||w===58)&&$e(n))w===63?(d&&(Vr(e,u,c,l,p,null),l=p=h=null),v=!0,d=!0,i=!0):d?(d=!1,i=!0):K(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,w=n;else if(Jr(e,t,Ef,!1,!0))if(e.line===o){for(w=e.input.charCodeAt(e.position);Nr(w);)w=e.input.charCodeAt(++e.position);if(w===58)w=e.input.charCodeAt(++e.position),$e(w)||K(e,"a whitespace character is expected after the key-value separator within a block mapping"),d&&(Vr(e,u,c,l,p,null),l=p=h=null),v=!0,d=!1,i=!1,l=e.tag,p=e.result;else if(v)K(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=s,e.anchor=f,!0}else if(v)K(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=s,e.anchor=f,!0;else break;if((e.line===o||e.lineIndent>r)&&(Jr(e,r,En,!0,i)&&(d?p=e.result:h=e.result),d||(Vr(e,u,c,l,p,h,o,a),l=p=h=null),de(e,!0,-1),w=e.input.charCodeAt(e.position)),e.lineIndent>r&&w!==0)K(e,"bad indentation of a mapping entry");else if(e.lineIndent<r)break}return d&&Vr(e,u,c,l,p,null),v&&(e.tag=s,e.anchor=f,e.kind="mapping",e.result=u),v}function Hd(e){var r,t=!1,n=!1,i,o,a;if(a=e.input.charCodeAt(e.position),a!==33)return!1;if(e.tag!==null&&K(e,"duplication of a tag property"),a=e.input.charCodeAt(++e.position),a===60?(t=!0,a=e.input.charCodeAt(++e.position)):a===33?(n=!0,i="!!",a=e.input.charCodeAt(++e.position)):i="!",r=e.position,t){do a=e.input.charCodeAt(++e.position);while(a!==0&&a!==62);e.position<e.length?(o=e.input.slice(r,e.position),a=e.input.charCodeAt(++e.position)):K(e,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!$e(a);)a===33&&(n?K(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(r-1,e.position+1),xf.test(i)||K(e,"named tag handle cannot contain such characters"),n=!0,r=e.position+1)),a=e.input.charCodeAt(++e.position);o=e.input.slice(r,e.position),Md.test(o)&&K(e,"tag suffix cannot contain flow indicator characters")}return o&&!Rf.test(o)&&K(e,"tag name cannot contain such characters: "+o),t?e.tag=o:kr.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:K(e,'undeclared tag handle "'+i+'"'),!0}function Vd(e){var r,t;if(t=e.input.charCodeAt(e.position),t!==38)return!1;for(e.anchor!==null&&K(e,"duplication of an anchor property"),t=e.input.charCodeAt(++e.position),r=e.position;t!==0&&!$e(t)&&!Hr(t);)t=e.input.charCodeAt(++e.position);return e.position===r&&K(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(r,e.position),!0}function Yd(e){var r,t,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),r=e.position;n!==0&&!$e(n)&&!Hr(n);)n=e.input.charCodeAt(++e.position);return e.position===r&&K(e,"name of an alias node must contain at least one character"),t=e.input.slice(r,e.position),e.anchorMap.hasOwnProperty(t)||K(e,'unidentified alias "'+t+'"'),e.result=e.anchorMap[t],de(e,!0,-1),!0}function Jr(e,r,t,n,i){var o,a,s,f=1,u=!1,c=!1,l,p,h,d,v;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=s=En===t||Sf===t,n&&de(e,!0,-1)&&(u=!0,e.lineIndent>r?f=1:e.lineIndent===r?f=0:e.lineIndent<r&&(f=-1)),f===1)for(;Hd(e)||Vd(e);)de(e,!0,-1)?(u=!0,s=o,e.lineIndent>r?f=1:e.lineIndent===r?f=0:e.lineIndent<r&&(f=-1)):s=!1;if(s&&(s=u||i),(f===1||En===t)&&(_n===t||Ef===t?d=r:d=r+1,v=e.position-e.lineStart,f===1?s&&(Na(e,v)||qd(e,v,d))||Ud(e,d)?c=!0:(a&&Wd(e,d)||Ld(e,d)||jd(e,d)?c=!0:Yd(e)?(c=!0,(e.tag!==null||e.anchor!==null)&&K(e,"alias node should not have any properties")):Fd(e,d,_n===t)&&(c=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):f===0&&(c=s&&Na(e,v))),e.tag!==null&&e.tag!=="!")if(e.tag==="?"){for(l=0,p=e.implicitTypes.length;l<p;l+=1)if(h=e.implicitTypes[l],h.resolve(e.result)){e.result=h.construct(e.result),e.tag=h.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else kr.call(e.typeMap[e.kind||"fallback"],e.tag)?(h=e.typeMap[e.kind||"fallback"][e.tag],e.result!==null&&h.kind!==e.kind&&K(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+h.kind+'", not "'+e.kind+'"'),h.resolve(e.result)?(e.result=h.construct(e.result),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):K(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):K(e,"unknown tag !<"+e.tag+">");return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||c}function Kd(e){var r=e.position,t,n,i,o=!1,a;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};(a=e.input.charCodeAt(e.position))!==0&&(de(e,!0,-1),a=e.input.charCodeAt(e.position),!(e.lineIndent>0||a!==37));){for(o=!0,a=e.input.charCodeAt(++e.position),t=e.position;a!==0&&!$e(a);)a=e.input.charCodeAt(++e.position);for(n=e.input.slice(t,e.position),i=[],n.length<1&&K(e,"directive name must not be less than one character in length");a!==0;){for(;Nr(a);)a=e.input.charCodeAt(++e.position);if(a===35){do a=e.input.charCodeAt(++e.position);while(a!==0&&!Ze(a));break}if(Ze(a))break;for(t=e.position;a!==0&&!$e(a);)a=e.input.charCodeAt(++e.position);i.push(e.input.slice(t,e.position))}a!==0&&xo(e),kr.call(Ta,n)?Ta[n](e,n,i):Sn(e,'unknown document directive "'+n+'"')}if(de(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,de(e,!0,-1)):o&&K(e,"directives end mark is expected"),Jr(e,e.lineIndent-1,En,!1,!0),de(e,!0,-1),e.checkLineBreaks&&kd.test(e.input.slice(r,e.position))&&Sn(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Bn(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,de(e,!0,-1));return}if(e.position<e.length-1)K(e,"end of the stream or a document separator is expected");else return}function Cf(e,r){e=String(e),r=r||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var t=new Bd(e,r);for(t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)Kd(t);return t.documents}function zi(e,r,t){var n=Cf(e,t),i,o;if(typeof r!="function")return n;for(i=0,o=n.length;i<o;i+=1)r(n[i])}function Nf(e,r){var t=Cf(e,r);if(t.length!==0){if(t.length===1)return t[0];throw new _f("expected a single document in the stream, but found more")}}function zd(e,r,t){if(typeof r=="function")zi(e,r,Qe.extend({schema:Ki},t));else return zi(e,Qe.extend({schema:Ki},t))}function Gd(e,r){return Nf(e,Qe.extend({schema:Ki},r))}Dt.loadAll=zi;Dt.load=Nf;Dt.safeLoadAll=zd;Dt.safeLoad=Gd;var Ao={},Bt=We,Ft=It,Jd=Pn,Xd=Pt,kf=Object.prototype.toString,Mf=Object.prototype.hasOwnProperty,Qd=9,xn=10,Zd=32,ep=33,rp=34,$f=35,tp=37,np=38,ip=39,op=42,Df=44,ap=45,If=58,sp=62,fp=63,up=64,Pf=91,Bf=93,lp=96,Ff=123,cp=124,Lf=125,Ne={};Ne[0]="\\0";Ne[7]="\\a";Ne[8]="\\b";Ne[9]="\\t";Ne[10]="\\n";Ne[11]="\\v";Ne[12]="\\f";Ne[13]="\\r";Ne[27]="\\e";Ne[34]='\\"';Ne[92]="\\\\";Ne[133]="\\N";Ne[160]="\\_";Ne[8232]="\\L";Ne[8233]="\\P";var hp=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function dp(e,r){var t,n,i,o,a,s,f;if(r===null)return{};for(t={},n=Object.keys(r),i=0,o=n.length;i<o;i+=1)a=n[i],s=String(r[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),f=e.compiledTypeMap.fallback[a],f&&Mf.call(f.styleAliases,s)&&(s=f.styleAliases[s]),t[a]=s;return t}function ka(e){var r,t,n;if(r=e.toString(16).toUpperCase(),e<=255)t="x",n=2;else if(e<=65535)t="u",n=4;else if(e<=4294967295)t="U",n=8;else throw new Ft("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+Bt.repeat("0",n-r.length)+r}function pp(e){this.schema=e.schema||Jd,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Bt.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=dp(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Ma(e,r){for(var t=Bt.repeat(" ",r),n=0,i=-1,o="",a,s=e.length;n<s;)i=e.indexOf(`
`,n),i===-1?(a=e.slice(n),n=s):(a=e.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=t),o+=a;return o}function Gi(e,r){return`
`+Bt.repeat(" ",e.indent*r)}function gp(e,r){var t,n,i;for(t=0,n=e.implicitTypes.length;t<n;t+=1)if(i=e.implicitTypes[t],i.resolve(r))return!0;return!1}function jf(e){return e===Zd||e===Qd}function gt(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==65279||65536<=e&&e<=1114111}function $a(e){return gt(e)&&e!==65279&&e!==Df&&e!==Pf&&e!==Bf&&e!==Ff&&e!==Lf&&e!==If&&e!==$f}function vp(e){return gt(e)&&e!==65279&&!jf(e)&&e!==ap&&e!==fp&&e!==If&&e!==Df&&e!==Pf&&e!==Bf&&e!==Ff&&e!==Lf&&e!==$f&&e!==np&&e!==op&&e!==ep&&e!==cp&&e!==sp&&e!==ip&&e!==rp&&e!==tp&&e!==up&&e!==lp}function Uf(e){var r=/^\n* /;return r.test(e)}var Wf=1,qf=2,Hf=3,Vf=4,an=5;function mp(e,r,t,n,i){var o,a,s=!1,f=!1,u=n!==-1,c=-1,l=vp(e.charCodeAt(0))&&!jf(e.charCodeAt(e.length-1));if(r)for(o=0;o<e.length;o++){if(a=e.charCodeAt(o),!gt(a))return an;l=l&&$a(a)}else{for(o=0;o<e.length;o++){if(a=e.charCodeAt(o),a===xn)s=!0,u&&(f=f||o-c-1>n&&e[c+1]!==" ",c=o);else if(!gt(a))return an;l=l&&$a(a)}f=f||u&&o-c-1>n&&e[c+1]!==" "}return!s&&!f?l&&!i(e)?Wf:qf:t>9&&Uf(e)?an:f?Vf:Hf}function yp(e,r,t,n){e.dump=function(){if(r.length===0)return"''";if(!e.noCompatMode&&hp.indexOf(r)!==-1)return"'"+r+"'";var i=e.indent*Math.max(1,t),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),a=n||e.flowLevel>-1&&t>=e.flowLevel;function s(f){return gp(e,f)}switch(mp(r,a,e.indent,o,s)){case Wf:return r;case qf:return"'"+r.replace(/'/g,"''")+"'";case Hf:return"|"+Da(r,e.indent)+Ia(Ma(r,i));case Vf:return">"+Da(r,e.indent)+Ia(Ma(bp(r,o),i));case an:return'"'+wp(r)+'"';default:throw new Ft("impossible error: invalid scalar style")}}()}function Da(e,r){var t=Uf(e)?String(r):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),o=i?"+":n?"":"-";return t+o+`
`}function Ia(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function bp(e,r){for(var t=/(\n+)([^\n]*)/g,n=function(){var u=e.indexOf(`
`);return u=u!==-1?u:e.length,t.lastIndex=u,Pa(e.slice(0,u),r)}(),i=e[0]===`
`||e[0]===" ",o,a;a=t.exec(e);){var s=a[1],f=a[2];o=f[0]===" ",n+=s+(!i&&!o&&f!==""?`
`:"")+Pa(f,r),i=o}return n}function Pa(e,r){if(e===""||e[0]===" ")return e;for(var t=/ [^ ]/g,n,i=0,o,a=0,s=0,f="";n=t.exec(e);)s=n.index,s-i>r&&(o=a>i?a:s,f+=`
`+e.slice(i,o),i=o+1),a=s;return f+=`
`,e.length-i>r&&a>i?f+=e.slice(i,a)+`
`+e.slice(a+1):f+=e.slice(i),f.slice(1)}function wp(e){for(var r="",t,n,i,o=0;o<e.length;o++){if(t=e.charCodeAt(o),t>=55296&&t<=56319&&(n=e.charCodeAt(o+1),n>=56320&&n<=57343)){r+=ka((t-55296)*1024+n-56320+65536),o++;continue}i=Ne[t],r+=!i&&gt(t)?e[o]:i||ka(t)}return r}function _p(e,r,t){var n="",i=e.tag,o,a;for(o=0,a=t.length;o<a;o+=1)Mr(e,r,t[o],!1,!1)&&(o!==0&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function Ep(e,r,t,n){var i="",o=e.tag,a,s;for(a=0,s=t.length;a<s;a+=1)Mr(e,r+1,t[a],!0,!0)&&((!n||a!==0)&&(i+=Gi(e,r)),e.dump&&xn===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function Sp(e,r,t){var n="",i=e.tag,o=Object.keys(t),a,s,f,u,c;for(a=0,s=o.length;a<s;a+=1)c=e.condenseFlow?'"':"",a!==0&&(c+=", "),f=o[a],u=t[f],Mr(e,r,f,!1,!1)&&(e.dump.length>1024&&(c+="? "),c+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Mr(e,r,u,!1,!1)&&(c+=e.dump,n+=c));e.tag=i,e.dump="{"+n+"}"}function xp(e,r,t,n){var i="",o=e.tag,a=Object.keys(t),s,f,u,c,l,p;if(e.sortKeys===!0)a.sort();else if(typeof e.sortKeys=="function")a.sort(e.sortKeys);else if(e.sortKeys)throw new Ft("sortKeys must be a boolean or a function");for(s=0,f=a.length;s<f;s+=1)p="",(!n||s!==0)&&(p+=Gi(e,r)),u=a[s],c=t[u],Mr(e,r+1,u,!0,!0,!0)&&(l=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,l&&(e.dump&&xn===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,l&&(p+=Gi(e,r)),Mr(e,r+1,c,!0,l)&&(e.dump&&xn===e.dump.charCodeAt(0)?p+=":":p+=": ",p+=e.dump,i+=p));e.tag=o,e.dump=i||"{}"}function Ba(e,r,t){var n,i,o,a,s,f;for(i=t?e.explicitTypes:e.implicitTypes,o=0,a=i.length;o<a;o+=1)if(s=i[o],(s.instanceOf||s.predicate)&&(!s.instanceOf||typeof r=="object"&&r instanceof s.instanceOf)&&(!s.predicate||s.predicate(r))){if(e.tag=t?s.tag:"?",s.represent){if(f=e.styleMap[s.tag]||s.defaultStyle,kf.call(s.represent)==="[object Function]")n=s.represent(r,f);else if(Mf.call(s.represent,f))n=s.represent[f](r,f);else throw new Ft("!<"+s.tag+'> tag resolver accepts not "'+f+'" style');e.dump=n}return!0}return!1}function Mr(e,r,t,n,i,o){e.tag=null,e.dump=t,Ba(e,t,!1)||Ba(e,t,!0);var a=kf.call(e.dump);n&&(n=e.flowLevel<0||e.flowLevel>r);var s=a==="[object Object]"||a==="[object Array]",f,u;if(s&&(f=e.duplicates.indexOf(t),u=f!==-1),(e.tag!==null&&e.tag!=="?"||u||e.indent!==2&&r>0)&&(i=!1),u&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(s&&u&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(xp(e,r,e.dump,i),u&&(e.dump="&ref_"+f+e.dump)):(Sp(e,r,e.dump),u&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object Array]"){var c=e.noArrayIndent&&r>0?r-1:r;n&&e.dump.length!==0?(Ep(e,c,e.dump,i),u&&(e.dump="&ref_"+f+e.dump)):(_p(e,c,e.dump),u&&(e.dump="&ref_"+f+" "+e.dump))}else if(a==="[object String]")e.tag!=="?"&&yp(e,e.dump,r,o);else{if(e.skipInvalid)return!1;throw new Ft("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function Rp(e,r){var t=[],n=[],i,o;for(Ji(e,t,n),i=0,o=n.length;i<o;i+=1)r.duplicates.push(t[n[i]]);r.usedDuplicates=new Array(o)}function Ji(e,r,t){var n,i,o;if(e!==null&&typeof e=="object")if(i=r.indexOf(e),i!==-1)t.indexOf(i)===-1&&t.push(i);else if(r.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)Ji(e[i],r,t);else for(n=Object.keys(e),i=0,o=n.length;i<o;i+=1)Ji(e[n[i]],r,t)}function Yf(e,r){r=r||{};var t=new pp(r);return t.noRefs||Rp(e,t),Mr(t,0,e,!0,!0)?t.dump+`
`:""}function Ap(e,r){return Yf(e,Bt.extend({schema:Xd},r))}Ao.dump=Yf;Ao.safeDump=Ap;var Fn=Dt,Kf=Ao;function Ln(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}le.Type=Se;le.Schema=tt;le.FAILSAFE_SCHEMA=Eo;le.JSON_SCHEMA=mf;le.CORE_SCHEMA=yf;le.DEFAULT_SAFE_SCHEMA=Pt;le.DEFAULT_FULL_SCHEMA=Pn;le.load=Fn.load;le.loadAll=Fn.loadAll;le.safeLoad=Fn.safeLoad;le.safeLoadAll=Fn.safeLoadAll;le.dump=Kf.dump;le.safeDump=Kf.safeDump;le.YAMLException=It;le.MINIMAL_SCHEMA=Eo;le.SAFE_SCHEMA=Pt;le.DEFAULT_SCHEMA=Pn;le.scan=Ln("scan");le.parse=Ln("parse");le.compose=Ln("compose");le.addConstructor=Ln("addConstructor");var Op=le,Tp=Op;const{ParserError:Cp}=pe,Np=Tp;var kp={order:200,allowEmpty:!0,canParse:[".yaml",".yml",".json"],async parse(e){let r=e.data;if(Buffer.isBuffer(r)&&(r=r.toString()),typeof r=="string")try{return Np.load(r)}catch(t){throw new Cp(t.message,e.url)}else return r}};const{ParserError:Mp}=pe;let $p=/\.(txt|htm|html|md|xml|js|min|map|css|scss|less|svg)$/i;var Dp={order:300,allowEmpty:!0,encoding:"utf8",canParse(e){return(typeof e.data=="string"||Buffer.isBuffer(e.data))&&$p.test(e.url)},parse(e){if(typeof e.data=="string")return e.data;if(Buffer.isBuffer(e.data))return e.data.toString(this.encoding);throw new Mp("data is not text",e.url)}};let Ip=/\.(jpeg|jpg|gif|png|bmp|ico)$/i;var Pp={order:400,allowEmpty:!0,canParse(e){return Buffer.isBuffer(e.data)&&Ip.test(e.url)},parse(e){return Buffer.isBuffer(e.data)?e.data:Buffer.from(e.data)}},zf={exports:{}};(function(e){/**
 * @license IDBWrapper - A cross-browser wrapper for IndexedDB
 * Version 1.7.2
 * Copyright (c) 2011 - 2017 Jens Arps
 * http://jensarps.de/
 *
 * Licensed under the MIT license
 */(function(r,t,n){e.exports?e.exports=t():n[r]=t()})("IDBStore",function(){var r=function(u){throw u},t=function(){},n={storeName:"Store",storePrefix:"IDBWrapper-",dbVersion:1,keyPath:"id",autoIncrement:!0,onStoreReady:function(){},onError:r,indexes:[],implementationPreference:["indexedDB","webkitIndexedDB","mozIndexedDB","shimIndexedDB"]},i=function(u,c){typeof c>"u"&&typeof u=="function"&&(c=u),Object.prototype.toString.call(u)!="[object Object]"&&(u={});for(var l in n)this[l]=typeof u[l]<"u"?u[l]:n[l];this.dbName=this.storePrefix+this.storeName,this.dbVersion=parseInt(this.dbVersion,10)||1,c&&(this.onStoreReady=c);var p=typeof window=="object"?window:self,h=this.implementationPreference.filter(function(d){return d in p});this.implementation=h[0],this.idb=p[this.implementation],this.keyRange=p.IDBKeyRange||p.webkitIDBKeyRange||p.mozIDBKeyRange,this.consts={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_NO_DUPLICATE:"nextunique",PREV:"prev",PREV_NO_DUPLICATE:"prevunique"},this.openDB()},o={constructor:i,version:"1.7.2",db:null,dbName:null,dbVersion:null,store:null,storeName:null,storePrefix:null,keyPath:null,autoIncrement:null,indexes:null,implementationPreference:null,implementation:"",onStoreReady:null,onError:null,_insertIdCount:0,openDB:function(){var u=this.idb.open(this.dbName,this.dbVersion),c=!1;u.onerror=function(l){if(f(l))this.onError(new Error("The version number provided is lower than the existing one."));else{var p;if(l.target.error)p=l.target.error;else{var h="IndexedDB unknown error occurred when opening DB "+this.dbName+" version "+this.dbVersion;"errorCode"in l.target&&(h+=" with error code "+l.target.errorCode),p=new Error(h)}this.onError(p)}}.bind(this),u.onsuccess=function(l){if(!c){if(this.db){this.onStoreReady();return}if(this.db=l.target.result,typeof this.db.version=="string"){this.onError(new Error("The IndexedDB implementation in this browser is outdated. Please upgrade your browser."));return}if(!this.db.objectStoreNames.contains(this.storeName)){this.onError(new Error("Object store couldn't be created."));return}var p=this.db.transaction([this.storeName],this.consts.READ_ONLY);this.store=p.objectStore(this.storeName);var h=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(d){var v=d.name;if(!v){c=!0,this.onError(new Error("Cannot create index: No index name given."));return}if(this.normalizeIndexData(d),this.hasIndex(v)){var w=this.store.index(v),y=this.indexComplies(w,d);y||(c=!0,this.onError(new Error('Cannot modify index "'+v+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),h.splice(h.indexOf(v),1)}else c=!0,this.onError(new Error('Cannot create new index "'+v+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))},this),h.length&&(c=!0,this.onError(new Error('Cannot delete index(es) "'+h.toString()+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),c||this.onStoreReady()}}.bind(this),u.onupgradeneeded=function(l){if(this.db=l.target.result,this.db.objectStoreNames.contains(this.storeName))this.store=l.target.transaction.objectStore(this.storeName);else{var p={autoIncrement:this.autoIncrement};this.keyPath!==null&&(p.keyPath=this.keyPath),this.store=this.db.createObjectStore(this.storeName,p)}var h=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(d){var v=d.name;if(v||(c=!0,this.onError(new Error("Cannot create index: No index name given."))),this.normalizeIndexData(d),this.hasIndex(v)){var w=this.store.index(v),y=this.indexComplies(w,d);y||(this.store.deleteIndex(v),this.store.createIndex(v,d.keyPath,{unique:d.unique,multiEntry:d.multiEntry})),h.splice(h.indexOf(v),1)}else this.store.createIndex(v,d.keyPath,{unique:d.unique,multiEntry:d.multiEntry})},this),h.length&&h.forEach(function(d){this.store.deleteIndex(d)},this)}.bind(this)},deleteDatabase:function(u,c){if(this.idb.deleteDatabase){this.db.close();var l=this.idb.deleteDatabase(this.dbName);l.onsuccess=u,l.onerror=c}else c(new Error("Browser does not support IndexedDB deleteDatabase!"))},put:function(u,c,l,p){this.keyPath!==null&&(p=l,l=c,c=u),p||(p=r),l||(l=t);var h=!1,d=null,v,w=this.db.transaction([this.storeName],this.consts.READ_WRITE);return w.oncomplete=function(){var y=h?l:p;y(d)},w.onabort=p,w.onerror=p,this.keyPath!==null?(this._addIdPropertyIfNeeded(c),v=w.objectStore(this.storeName).put(c)):v=w.objectStore(this.storeName).put(c,u),v.onsuccess=function(y){h=!0,d=y.target.result},v.onerror=p,w},get:function(u,c,l){l||(l=r),c||(c=t);var p=!1,h=null,d=this.db.transaction([this.storeName],this.consts.READ_ONLY);d.oncomplete=function(){var w=p?c:l;w(h)},d.onabort=l,d.onerror=l;var v=d.objectStore(this.storeName).get(u);return v.onsuccess=function(w){p=!0,h=w.target.result},v.onerror=l,d},remove:function(u,c,l){l||(l=r),c||(c=t);var p=!1,h=null,d=this.db.transaction([this.storeName],this.consts.READ_WRITE);d.oncomplete=function(){var w=p?c:l;w(h)},d.onabort=l,d.onerror=l;var v=d.objectStore(this.storeName).delete(u);return v.onsuccess=function(w){p=!0,h=w.target.result},v.onerror=l,d},batch:function(u,c,l){if(l||(l=r),c||(c=t),Object.prototype.toString.call(u)!="[object Array]")l(new Error("dataArray argument must be of type Array."));else if(u.length===0)return c(!0);var p=u.length,h=!1,d=!1,v=this.db.transaction([this.storeName],this.consts.READ_WRITE);v.oncomplete=function(){var y=d?c:l;y(d)},v.onabort=l,v.onerror=l;var w=function(){p--,p===0&&!h&&(h=!0,d=!0)};return u.forEach(function(y){var _=y.type,C=y.key,b=y.value,g=function(N){v.abort(),h||(h=!0,l(N,_,C))};if(_=="remove"){var m=v.objectStore(this.storeName).delete(C);m.onsuccess=w,m.onerror=g}else if(_=="put"){var S;this.keyPath!==null?(this._addIdPropertyIfNeeded(b),S=v.objectStore(this.storeName).put(b)):S=v.objectStore(this.storeName).put(b,C),S.onsuccess=w,S.onerror=g}},this),v},putBatch:function(u,c,l){var p=u.map(function(h){return{type:"put",value:h}});return this.batch(p,c,l)},upsertBatch:function(u,c,l,p){typeof c=="function"&&(l=c,p=l,c={}),p||(p=r),l||(l=t),c||(c={}),Object.prototype.toString.call(u)!="[object Array]"&&p(new Error("dataArray argument must be of type Array."));var h=c.keyField||this.keyPath,d=u.length,v=!1,w=!1,y=0,_=this.db.transaction([this.storeName],this.consts.READ_WRITE);_.oncomplete=function(){w?l(u):p(!1)},_.onabort=p,_.onerror=p;var C=function(b){var g=u[y++];g[h]=b.target.result,d--,d===0&&!v&&(v=!0,w=!0)};return u.forEach(function(b){var g=b.key,m=function(N){_.abort(),v||(v=!0,p(N))},S;this.keyPath!==null?(this._addIdPropertyIfNeeded(b),S=_.objectStore(this.storeName).put(b)):S=_.objectStore(this.storeName).put(b,g),S.onsuccess=C,S.onerror=m},this),_},removeBatch:function(u,c,l){var p=u.map(function(h){return{type:"remove",key:h}});return this.batch(p,c,l)},getBatch:function(u,c,l,p){if(l||(l=r),c||(c=t),p||(p="sparse"),Object.prototype.toString.call(u)!="[object Array]")l(new Error("keyArray argument must be of type Array."));else if(u.length===0)return c([]);var h=[],d=u.length,v=!1,w=null,y=this.db.transaction([this.storeName],this.consts.READ_ONLY);y.oncomplete=function(){var C=v?c:l;C(w)},y.onabort=l,y.onerror=l;var _=function(C){C.target.result||p=="dense"?h.push(C.target.result):p=="sparse"&&h.length++,d--,d===0&&(v=!0,w=h)};return u.forEach(function(C){var b=function(m){w=m,l(m),y.abort()},g=y.objectStore(this.storeName).get(C);g.onsuccess=_,g.onerror=b},this),y},getAll:function(u,c){c||(c=r),u||(u=t);var l=this.db.transaction([this.storeName],this.consts.READ_ONLY),p=l.objectStore(this.storeName);return p.getAll?this._getAllNative(l,p,u,c):this._getAllCursor(l,p,u,c),l},_getAllNative:function(u,c,l,p){var h=!1,d=null;u.oncomplete=function(){var w=h?l:p;w(d)},u.onabort=p,u.onerror=p;var v=c.getAll();v.onsuccess=function(w){h=!0,d=w.target.result},v.onerror=p},_getAllCursor:function(u,c,l,p){var h=[],d=!1,v=null;u.oncomplete=function(){var y=d?l:p;y(v)},u.onabort=p,u.onerror=p;var w=c.openCursor();w.onsuccess=function(y){var _=y.target.result;_?(h.push(_.value),_.continue()):(d=!0,v=h)},w.onError=p},clear:function(u,c){c||(c=r),u||(u=t);var l=!1,p=null,h=this.db.transaction([this.storeName],this.consts.READ_WRITE);h.oncomplete=function(){var v=l?u:c;v(p)},h.onabort=c,h.onerror=c;var d=h.objectStore(this.storeName).clear();return d.onsuccess=function(v){l=!0,p=v.target.result},d.onerror=c,h},_addIdPropertyIfNeeded:function(u){typeof u[this.keyPath]>"u"&&(u[this.keyPath]=this._insertIdCount+++Date.now())},getIndexList:function(){return this.store.indexNames},hasIndex:function(u){return this.store.indexNames.contains(u)},normalizeIndexData:function(u){u.keyPath=u.keyPath||u.name,u.unique=!!u.unique,u.multiEntry=!!u.multiEntry},indexComplies:function(u,c){var l=["keyPath","unique","multiEntry"].every(function(p){if(p=="multiEntry"&&u[p]===void 0&&c[p]===!1)return!0;if(p=="keyPath"&&Object.prototype.toString.call(c[p])=="[object Array]"){var h=c.keyPath,d=u.keyPath;if(typeof d=="string")return h.toString()==d;if(!(typeof d.contains=="function"||typeof d.indexOf=="function")||d.length!==h.length)return!1;for(var v=0,w=h.length;v<w;v++)if(!(d.contains&&d.contains(h[v])||d.indexOf(h[v]!==-1)))return!1;return!0}return c[p]==u[p]});return l},iterate:function(u,c){c=s({index:null,order:"ASC",autoContinue:!0,filterDuplicates:!1,keyRange:null,writeAccess:!1,onEnd:null,onError:r,limit:1/0,offset:0,allowItemRejection:!1},c||{});var l=c.order.toLowerCase()=="desc"?"PREV":"NEXT";c.filterDuplicates&&(l+="_NO_DUPLICATE");var p=!1,h=this.db.transaction([this.storeName],this.consts[c.writeAccess?"READ_WRITE":"READ_ONLY"]),d=h.objectStore(this.storeName);c.index&&(d=d.index(c.index));var v=0;h.oncomplete=function(){if(!p){c.onError(null);return}c.onEnd?c.onEnd():u(null)},h.onabort=c.onError,h.onerror=c.onError;var w=d.openCursor(c.keyRange,this.consts[l]);return w.onerror=c.onError,w.onsuccess=function(y){var _=y.target.result;if(_)if(c.offset)_.advance(c.offset),c.offset=0;else{var C=u(_.value,_,h);(!c.allowItemRejection||C!==!1)&&v++,c.autoContinue&&(v+c.offset<c.limit?_.continue():p=!0)}else p=!0},h},query:function(u,c){var l=[],p=0;return c=c||{},c.autoContinue=!0,c.writeAccess=!1,c.allowItemRejection=!!c.filter,c.onEnd=function(){u(l,p)},this.iterate(function(h){p++;var d=c.filter?c.filter(h):!0;return d!==!1&&l.push(h),d},c)},count:function(u,c){c=s({index:null,keyRange:null},c||{});var l=c.onError||r,p=!1,h=null,d=this.db.transaction([this.storeName],this.consts.READ_ONLY);d.oncomplete=function(){var y=p?u:l;y(h)},d.onabort=l,d.onerror=l;var v=d.objectStore(this.storeName);c.index&&(v=v.index(c.index));var w=v.count(c.keyRange);return w.onsuccess=function(y){p=!0,h=y.target.result},w.onError=l,d},makeKeyRange:function(u){var c,l=typeof u.lower<"u",p=typeof u.upper<"u",h=typeof u.only<"u";switch(!0){case h:c=this.keyRange.only(u.only);break;case(l&&p):c=this.keyRange.bound(u.lower,u.upper,u.excludeLower,u.excludeUpper);break;case l:c=this.keyRange.lowerBound(u.lower,u.excludeLower);break;case p:c=this.keyRange.upperBound(u.upper,u.excludeUpper);break;default:throw new Error('Cannot create KeyRange. Provide one or both of "lower" or "upper" value, or an "only" value.')}return c}},a={};function s(u,c){var l,p;for(l in c)p=c[l],p!==a[l]&&p!==u[l]&&(u[l]=p);return u}function f(u){return"error"in u.target?u.target.error.name=="VersionError":"errorCode"in u.target?u.target.errorCode==12:!1}return i.prototype=o,i.version=o.version,i},dr)})(zf);var nt={},Bp=Fp;function Fp(){for(var e={},r=0;r<arguments.length;r++){var t=arguments[r];for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}return e}function Oo(e){this.db=e,this._ended=!1,this._nexting=!1}Oo.prototype.next=function(e){var r=this;if(typeof e!="function")throw new Error("next() requires a callback argument");if(r._ended)return e(new Error("cannot call next() after end()"));if(r._nexting)return e(new Error("cannot call next() before previous next() has completed"));if(r._nexting=!0,typeof r._next=="function")return r._next(function(){r._nexting=!1,e.apply(null,arguments)});process.nextTick(function(){r._nexting=!1,e()})};Oo.prototype.end=function(e){if(typeof e!="function")throw new Error("end() requires a callback argument");if(this._ended)return e(new Error("end() already called on iterator"));if(this._ended=!0,typeof this._end=="function")return this._end(e);process.nextTick(e)};var Lp=Oo;function it(e){this._db=e,this._operations=[],this._written=!1}it.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")};it.prototype.put=function(e,r){this._checkWritten();var t=this._db._checkKeyValue(e,"key",this._db._isBuffer);if(t||(t=this._db._checkKeyValue(r,"value",this._db._isBuffer),t))throw t;return this._db._isBuffer(e)||(e=String(e)),this._db._isBuffer(r)||(r=String(r)),typeof this._put=="function"?this._put(e,r):this._operations.push({type:"put",key:e,value:r}),this};it.prototype.del=function(e){this._checkWritten();var r=this._db._checkKeyValue(e,"key",this._db._isBuffer);if(r)throw r;return this._db._isBuffer(e)||(e=String(e)),typeof this._del=="function"?this._del(e):this._operations.push({type:"del",key:e}),this};it.prototype.clear=function(){return this._checkWritten(),this._operations=[],typeof this._clear=="function"&&this._clear(),this};it.prototype.write=function(e,r){if(this._checkWritten(),typeof e=="function"&&(r=e),typeof r!="function")throw new Error("write() requires a callback argument");if(typeof e!="object"&&(e={}),this._written=!0,typeof this._write=="function")return this._write(r);if(typeof this._db._batch=="function")return this._db._batch(this._operations,e,r);process.nextTick(r)};var jp=it,Up=Bp,Gf=Lp,Jf=jp;function Be(e){if(!arguments.length||e===void 0)throw new Error("constructor requires at least a location argument");if(typeof e!="string")throw new Error("constructor requires a location string argument");this.location=e}Be.prototype.open=function(e,r){if(typeof e=="function"&&(r=e),typeof r!="function")throw new Error("open() requires a callback argument");if(typeof e!="object"&&(e={}),typeof this._open=="function")return this._open(e,r);process.nextTick(r)};Be.prototype.close=function(e){if(typeof e!="function")throw new Error("close() requires a callback argument");if(typeof this._close=="function")return this._close(e);process.nextTick(e)};Be.prototype.get=function(e,r,t){var n;if(typeof r=="function"&&(t=r),typeof t!="function")throw new Error("get() requires a callback argument");if(n=this._checkKeyValue(e,"key",this._isBuffer))return t(n);if(this._isBuffer(e)||(e=String(e)),typeof r!="object"&&(r={}),typeof this._get=="function")return this._get(e,r,t);process.nextTick(function(){t(new Error("NotFound"))})};Be.prototype.put=function(e,r,t,n){var i;if(typeof t=="function"&&(n=t),typeof n!="function")throw new Error("put() requires a callback argument");if((i=this._checkKeyValue(e,"key",this._isBuffer))||(i=this._checkKeyValue(r,"value",this._isBuffer)))return n(i);if(this._isBuffer(e)||(e=String(e)),!this._isBuffer(r)&&!process.browser&&(r=String(r)),typeof t!="object"&&(t={}),typeof this._put=="function")return this._put(e,r,t,n);process.nextTick(n)};Be.prototype.del=function(e,r,t){var n;if(typeof r=="function"&&(t=r),typeof t!="function")throw new Error("del() requires a callback argument");if(n=this._checkKeyValue(e,"key",this._isBuffer))return t(n);if(this._isBuffer(e)||(e=String(e)),typeof r!="object"&&(r={}),typeof this._del=="function")return this._del(e,r,t);process.nextTick(t)};Be.prototype.batch=function(e,r,t){if(!arguments.length)return this._chainedBatch();if(typeof r=="function"&&(t=r),typeof t!="function")throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return t(new Error("batch(array) requires an array argument"));typeof r!="object"&&(r={});for(var n=0,i=e.length,o,a;n<i;n++)if(o=e[n],typeof o=="object"&&((a=this._checkKeyValue(o.type,"type",this._isBuffer))||(a=this._checkKeyValue(o.key,"key",this._isBuffer))||o.type=="put"&&(a=this._checkKeyValue(o.value,"value",this._isBuffer))))return t(a);if(typeof this._batch=="function")return this._batch(e,r,t);process.nextTick(t)};Be.prototype.approximateSize=function(e,r,t){if(e==null||r==null||typeof e=="function"||typeof r=="function")throw new Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if(typeof t!="function")throw new Error("approximateSize() requires a callback argument");if(this._isBuffer(e)||(e=String(e)),this._isBuffer(r)||(r=String(r)),typeof this._approximateSize=="function")return this._approximateSize(e,r,t);process.nextTick(function(){t(null,0)})};Be.prototype._setupIteratorOptions=function(e){var r=this;return e=Up(e),["start","end","gt","gte","lt","lte"].forEach(function(t){e[t]&&r._isBuffer(e[t])&&e[t].length===0&&delete e[t]}),e.reverse=!!e.reverse,e.reverse&&e.lt&&(e.start=e.lt),e.reverse&&e.lte&&(e.start=e.lte),!e.reverse&&e.gt&&(e.start=e.gt),!e.reverse&&e.gte&&(e.start=e.gte),(e.reverse&&e.lt&&!e.lte||!e.reverse&&e.gt&&!e.gte)&&(e.exclusiveStart=!0),e};Be.prototype.iterator=function(e){return typeof e!="object"&&(e={}),e=this._setupIteratorOptions(e),typeof this._iterator=="function"?this._iterator(e):new Gf(this)};Be.prototype._chainedBatch=function(){return new Jf(this)};Be.prototype._isBuffer=function(e){return Buffer.isBuffer(e)};Be.prototype._checkKeyValue=function(e,r){if(e==null)return new Error(r+" cannot be `null` or `undefined`");if(this._isBuffer(e)){if(e.length===0)return new Error(r+" cannot be an empty Buffer")}else if(String(e)==="")return new Error(r+" cannot be an empty String")};nt.AbstractLevelDOWN=Be;nt.AbstractIterator=Gf;nt.AbstractChainedBatch=Jf;var Xf={};(function(e){e.compare=function(h,d){if(Buffer.isBuffer(h)){for(var v=Math.min(h.length,d.length),w=0;w<v;w++){var y=h[w]-d[w];if(y)return y}return h.length-d.length}return h<d?-1:h>d?1:0};function r(h){return h!==void 0&&h!==""}function t(h,d){return Object.hasOwnProperty.call(h,d)}function n(h,d){return Object.hasOwnProperty.call(h,d)&&d}var i=e.lowerBoundKey=function(h){return n(h,"gt")||n(h,"gte")||n(h,"min")||(h.reverse?n(h,"end"):n(h,"start"))||void 0},o=e.lowerBound=function(h,d){var v=i(h);return v?h[v]:d},a=e.lowerBoundInclusive=function(h){return!t(h,"gt")},s=e.upperBoundInclusive=function(h){return!t(h,"lt")},f=e.lowerBoundExclusive=function(h){return!a(h)},u=e.upperBoundExclusive=function(h){return!s(h)},c=e.upperBoundKey=function(h){return n(h,"lt")||n(h,"lte")||n(h,"max")||(h.reverse?n(h,"start"):n(h,"end"))||void 0},l=e.upperBound=function(h,d){var v=c(h);return v?h[v]:d};e.start=function(h,d){return h.reverse?l(h,d):o(h,d)},e.end=function(h,d){return h.reverse?o(h,d):l(h,d)},e.startInclusive=function(h){return h.reverse?s(h):a(h)},e.endInclusive=function(h){return h.reverse?a(h):s(h)};function p(h){return h}e.toLtgt=function(h,d,v,w,y){d=d||{},v=v||p;var _=arguments.length>3,C=e.lowerBoundKey(h),b=e.upperBoundKey(h);return C?C==="gt"?d.gt=v(h.gt,!1):d.gte=v(h[C],!1):_&&(d.gte=v(w,!1)),b?b==="lt"?d.lt=v(h.lt,!0):d.lte=v(h[b],!0):_&&(d.lte=v(y,!0)),h.reverse!=null&&(d.reverse=!!h.reverse),t(d,"max")&&delete d.max,t(d,"min")&&delete d.min,t(d,"start")&&delete d.start,t(d,"end")&&delete d.end,d},e.contains=function(h,d,v){v=v||e.compare;var w=o(h);if(r(w)){var y=v(d,w);if(y<0||y===0&&f(h))return!1}var _=l(h);if(r(_)){var y=v(d,_);if(y>0||y===0&&u(h))return!1}return!0},e.filter=function(h,d){return function(v){return e.contains(h,v,d)}}})(Xf);var Wp=je,Qf=nt.AbstractIterator,zt=Xf,qp=Lt;function Lt(e,r){r||(r={}),this.options=r,Qf.call(this,e),this._order=r.reverse?"DESC":"ASC",this._limit=r.limit,this._count=0,this._done=!1;var t=zt.lowerBound(r),n=zt.upperBound(r);try{this._keyRange=t||n?this.db.makeKeyRange({lower:t,upper:n,excludeLower:zt.lowerBoundExclusive(r),excludeUpper:zt.upperBoundExclusive(r)}):null}catch{this._keyRangeError=!0}this.callback=null}Wp.inherits(Lt,Qf);Lt.prototype.createIterator=function(){var e=this;e.iterator=e.db.iterate(function(){e.onItem.apply(e,arguments)},{keyRange:e._keyRange,autoContinue:!1,order:e._order,onError:function(r){console.log("horrible error",r)}})};Lt.prototype.onItem=function(e,r,t){if(!r&&this.callback){this.callback(),this.callback=!1;return}var n=!0;!!this._limit&&this._limit>0&&this._count++>=this._limit&&(n=!1),n&&this.callback(!1,r.key,r.value),r&&r.continue()};Lt.prototype._next=function(e){if(!e)return new Error("next() requires a callback argument");if(this._keyRangeError)return e();this._started||(this.createIterator(),this._started=!0),this.callback=e};var Hp=ze.Buffer,Vp=Yp;function Yp(e){return Hp.isBuffer(e)||/\[object (.+Array|Array.+)\]/.test(Object.prototype.toString.call(e))}var fi={exports:{}},ui,Fa;function Kp(){if(Fa)return ui;Fa=1;var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,t=function(n){var i=typeof n=="function"&&!(n instanceof RegExp)||r.call(n)==="[object Function]";return!i&&typeof window<"u"&&(i=n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt),i};return ui=function(i,o){if(!t(o))throw new TypeError("iterator must be a function");var a,s,f=typeof i=="string",u=i.length,c=arguments.length>2?arguments[2]:null;if(u===+u)for(a=0;a<u;a++)c===null?o(f?i.charAt(a):i[a],a,i):o.call(c,f?i.charAt(a):i[a],a,i);else for(s in i)e.call(i,s)&&(c===null?o(i[s],s,i):o.call(c,i[s],s,i))},ui}var li,La;function zp(){if(La)return li;La=1;var e=Object.prototype.toString;return li=function(t){var n=e.call(t),i=n==="[object Arguments]";return i||(i=n!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&e.call(t.callee)==="[object Function]"),i},li}var ja;function Gp(){return ja||(ja=1,function(){var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,t=Kp(),n=zp(),i=!{toString:null}.propertyIsEnumerable("toString"),o=function(){}.propertyIsEnumerable("prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s;s=function(u){var c=u!==null&&typeof u=="object",l=r.call(u)==="[object Function]",p=n(u),h=[];if(!c&&!l&&!p)throw new TypeError("Object.keys called on a non-object");if(p)t(u,function(_){h.push(_)});else{var d,v=o&&l;for(d in u)!(v&&d==="prototype")&&e.call(u,d)&&h.push(d)}if(i){var w=u.constructor,y=w&&w.prototype===u;t(a,function(_){!(y&&_==="constructor")&&e.call(u,_)&&h.push(_)})}return h},fi.exports=s}()),fi.exports}var Jp=Object.keys||Gp(),Xp=Qp;function Qp(e){return e!==null&&(typeof e=="object"||typeof e=="function")}var Zp=Jp,eg=Xp,rg=tg;function tg(){for(var e={},r=0;r<arguments.length;r++){var t=arguments[r];if(!!eg(t))for(var n=Zp(t),i=0;i<n.length;i++){var o=n[i];e[o]=t[o]}}return e}var ng=function(e){return typeof Buffer._augment=="function"&&Buffer.TYPED_ARRAY_SUPPORT?Buffer._augment(e):new Buffer(e)},ig=Ce,og=zf.exports,ag=nt.AbstractLevelDOWN,sg=je,fg=qp,ug=Vp,lg=rg,Zf=ng;function Ce(e){if(!(this instanceof Ce))return new Ce(e);if(!e)throw new Error("constructor requires at least a location argument");this.IDBOptions={},this.location=e}sg.inherits(Ce,ag);Ce.prototype._open=function(e,r){var t=this,n={storeName:this.location,autoIncrement:!1,keyPath:null,onStoreReady:function(){r&&r(null,t.idb)},onError:function(i){r&&r(i)}};lg(n,e),this.IDBOptions=n,this.idb=new og(n)};Ce.prototype._get=function(e,r,t){this.idb.get(e,function(n){if(n===void 0)return t(new Error("NotFound"));var i=!0;return r.asBuffer===!1&&(i=!1),r.raw&&(i=!1),i&&(n instanceof Uint8Array?n=Zf(n):n=new Buffer(String(n))),t(null,n,e)},t)};Ce.prototype._del=function(e,r,t){this.idb.remove(e,t,t)};Ce.prototype._put=function(e,r,t,n){r instanceof ArrayBuffer&&(r=Zf(new Uint8Array(r)));var i=this.convertEncoding(e,r,t);Buffer.isBuffer(i.value)&&(typeof r.toArrayBuffer=="function"?i.value=new Uint8Array(r.toArrayBuffer()):i.value=new Uint8Array(r)),this.idb.put(i.key,i.value,function(){n()},n)};Ce.prototype.convertEncoding=function(e,r,t){if(t.raw)return{key:e,value:r};if(r){var n=r.toString();n==="NaN"&&(r="NaN")}var i=t.valueEncoding,o={key:e,value:r};return r&&(!i||i!=="binary")&&typeof o.value!="object"&&(o.value=n),o};Ce.prototype.iterator=function(e){return typeof e!="object"&&(e={}),new fg(this.idb,e)};Ce.prototype._batch=function(e,r,t){var n,i,o,a,s=[];if(e.length===0)return setTimeout(t,0);for(n=0;n<e.length;n++){o={},a=e[n],s[n]=o;var f=this.convertEncoding(a.key,a.value,r);a.key=f.key,a.value=f.value;for(i in a)i==="type"&&a[i]=="del"?o[i]="remove":o[i]=a[i]}return this.idb.batch(s,function(){t()},t)};Ce.prototype._close=function(e){this.idb.db.close(),e()};Ce.prototype._approximateSize=function(e,r,t){var n=new Error("Not implemented");if(t)return t(n);throw n};Ce.prototype._isBuffer=function(e){return Buffer.isBuffer(e)};Ce.destroy=function(e,r){if(typeof e=="object")var t=e.IDBOptions.storePrefix||"IDBWrapper-",n=e.location;else var t="IDBWrapper-",n=e;var i=indexedDB.deleteDatabase(t+n);i.onsuccess=function(){r()},i.onerror=function(o){r(o)}};Ce.prototype._checkKeyValue=function(e,r){if(e==null)return new Error(r+" cannot be `null` or `undefined`");if(e==null)return new Error(r+" cannot be `null` or `undefined`");if(ug(e)&&e.byteLength===0)return new Error(r+" cannot be an empty ArrayBuffer");if(String(e)==="")return new Error(r+" cannot be an empty String");if(e.length===0)return new Error(r+" cannot be an empty Array")};var jt={exports:{}},jn=cg;function cg(){for(var e={},r=0;r<arguments.length;r++){var t=arguments[r];for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}return e}var eu={exports:{}};/*!
  * prr
  * (c) 2013 Rod Vagg <rod@vagg.org>
  * https://github.com/rvagg/prr
  * License: MIT
  */(function(e){(function(r,t,n){e.exports?e.exports=n():t[r]=n()})("prr",dr,function(){var r=typeof Object.defineProperty=="function"?function(i,o,a){return Object.defineProperty(i,o,a),i}:function(i,o,a){return i[o]=a.value,i},t=function(i,o){var a=typeof o=="object",s=!a&&typeof o=="string",f=function(u){return a?!!o[u]:s?o.indexOf(u[0])>-1:!1};return{enumerable:f("enumerable"),configurable:f("configurable"),writable:f("writable"),value:i}},n=function(i,o,a,s){var f;if(s=t(a,s),typeof o=="object"){for(f in o)Object.hasOwnProperty.call(o,f)&&(s.value=o[f],r(i,f,s));return i}return r(i,o,s)};return n})})(eu);var hg=je,ru=nt.AbstractLevelDOWN;function xr(e){ru.call(this,typeof e=="string"?e:""),this._db=void 0,this._operations=[]}hg.inherits(xr,ru);xr.prototype.setDb=function(e){this._db=e,this._operations.forEach(function(r){e[r.method].apply(e,r.args)})};xr.prototype._open=function(e,r){return process.nextTick(r)};xr.prototype._operation=function(e,r){if(this._db)return this._db[e].apply(this._db,r);this._operations.push({method:e,args:r})};"put get del batch approximateSize".split(" ").forEach(function(e){xr.prototype["_"+e]=function(){this._operation(e,arguments)}});xr.prototype._isBuffer=function(e){return Buffer.isBuffer(e)};xr.prototype._iterator=function(){throw new TypeError("not implemented")};var dg=xr,To={exports:{}},tu={exports:{}};/*!
  * prr
  * (c) 2013 Rod Vagg <rod@vagg.org>
  * https://github.com/rvagg/prr
  * License: MIT
  */(function(e){(function(r,t,n){e.exports?e.exports=n():t[r]=n()})("prr",dr,function(){var r=typeof Object.defineProperty=="function"?function(i,o,a){return Object.defineProperty(i,o,a),i}:function(i,o,a){return i[o]=a.value,i},t=function(i,o){var a=typeof o=="object",s=!a&&typeof o=="string",f=function(u){return a?!!o[u]:s?o.indexOf(u[0])>-1:!1};return{enumerable:f("enumerable"),configurable:f("configurable"),writable:f("writable"),value:i}},n=function(i,o,a,s){var f;if(s=t(a,s),typeof o=="object"){for(f in o)Object.hasOwnProperty.call(o,f)&&(s.value=o[f],r(i,f,s));return i}return r(i,o,s)};return n})})(tu);var pg=tu.exports;function nu(e,r,t){!!r&&typeof r!="string"&&(r=r.message||r.name),pg(this,{type:e,name:e,cause:typeof r!="string"?r:t,message:r},"ewr")}function Co(e,r){Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),nu.call(this,"CustomError",e,r)}Co.prototype=new Error;function gg(e,r,t){var n=function(i,o){nu.call(this,r,i,o),r=="FilesystemError"&&(this.code=this.cause.code,this.path=this.cause.path,this.errno=this.cause.errno,this.message=(e.errno[this.cause.errno]?e.errno[this.cause.errno].description:this.cause.message)+(this.cause.path?" ["+this.cause.path+"]":"")),Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,n)};return n.prototype=t?new t:new Co,n}var vg=function(e){var r=function(t,n){return gg(e,t,n)};return{CustomError:Co,FilesystemError:r("FilesystemError"),createError:r}};(function(e){var r=e.exports.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];e.exports.errno={},e.exports.code={},r.forEach(function(t){e.exports.errno[t.errno]=t,e.exports.code[t.code]=t}),e.exports.custom=vg(e.exports),e.exports.create=e.exports.custom.createError})(To);var Tr=To.exports.create,Or=Tr("LevelUPError"),No=Tr("NotFoundError",Or);No.prototype.notFound=!0;No.prototype.status=404;var fr={LevelUPError:Or,InitializationError:Tr("InitializationError",Or),OpenError:Tr("OpenError",Or),ReadError:Tr("ReadError",Or),WriteError:Tr("WriteError",Or),NotFoundError:No,EncodingError:Tr("EncodingError",Or)},Xi={exports:{}},J={};function mg(e){return Array.isArray?Array.isArray(e):Un(e)==="[object Array]"}J.isArray=mg;function yg(e){return typeof e=="boolean"}J.isBoolean=yg;function bg(e){return e===null}J.isNull=bg;function wg(e){return e==null}J.isNullOrUndefined=wg;function _g(e){return typeof e=="number"}J.isNumber=_g;function Eg(e){return typeof e=="string"}J.isString=Eg;function Sg(e){return typeof e=="symbol"}J.isSymbol=Sg;function xg(e){return e===void 0}J.isUndefined=xg;function Rg(e){return Un(e)==="[object RegExp]"}J.isRegExp=Rg;function Ag(e){return typeof e=="object"&&e!==null}J.isObject=Ag;function Og(e){return Un(e)==="[object Date]"}J.isDate=Og;function Tg(e){return Un(e)==="[object Error]"||e instanceof Error}J.isError=Tg;function Cg(e){return typeof e=="function"}J.isFunction=Cg;function Ng(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}J.isPrimitive=Ng;J.isBuffer=ze.Buffer.isBuffer;function Un(e){return Object.prototype.toString.call(e)}var iu=ye,kg=Dn,Rn=ze.Buffer;ye.ReadableState=au;var An=Ue.exports.EventEmitter;An.listenerCount||(An.listenerCount=function(e,r){return e.listeners(r).length});var vt=Ae(),ou=J;ou.inherits=oe.exports;var Yr;ou.inherits(ye,vt);function au(e,r){e=e||{};var t=e.highWaterMark;this.highWaterMark=t||t===0?t:16*1024,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(Yr||(Yr=pr().StringDecoder),this.decoder=new Yr(e.encoding),this.encoding=e.encoding)}function ye(e){if(!(this instanceof ye))return new ye(e);this._readableState=new au(e),this.readable=!0,vt.call(this)}ye.prototype.push=function(e,r){var t=this._readableState;return typeof e=="string"&&!t.objectMode&&(r=r||t.defaultEncoding,r!==t.encoding&&(e=new Rn(e,r),r="")),su(this,t,e,r,!1)};ye.prototype.unshift=function(e){var r=this._readableState;return su(this,r,e,"",!0)};function su(e,r,t,n,i){var o=Dg(r,t);if(o)e.emit("error",o);else if(t==null)r.reading=!1,r.ended||Ig(e,r);else if(r.objectMode||t&&t.length>0)if(r.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(r.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else r.decoder&&!i&&!n&&(t=r.decoder.write(t)),r.length+=r.objectMode?1:t.length,i?r.buffer.unshift(t):(r.reading=!1,r.buffer.push(t)),r.needReadable&&Wn(e),Pg(e,r);else i||(r.reading=!1);return Mg(r)}function Mg(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}ye.prototype.setEncoding=function(e){Yr||(Yr=pr().StringDecoder),this._readableState.decoder=new Yr(e),this._readableState.encoding=e};var Ua=8388608;function $g(e){if(e>=Ua)e=Ua;else{e--;for(var r=1;r<32;r<<=1)e|=e>>r;e++}return e}function Wa(e,r){return r.length===0&&r.ended?0:r.objectMode?e===0?0:1:e===null||isNaN(e)?r.flowing&&r.buffer.length?r.buffer[0].length:r.length:e<=0?0:(e>r.highWaterMark&&(r.highWaterMark=$g(e)),e>r.length?r.ended?r.length:(r.needReadable=!0,0):e)}ye.prototype.read=function(e){var r=this._readableState;r.calledRead=!0;var t=e,n;if((typeof e!="number"||e>0)&&(r.emittedReadable=!1),e===0&&r.needReadable&&(r.length>=r.highWaterMark||r.ended))return Wn(this),null;if(e=Wa(e,r),e===0&&r.ended)return n=null,r.length>0&&r.decoder&&(n=Zi(e,r),r.length-=n.length),r.length===0&&eo(this),n;var i=r.needReadable;return r.length-e<=r.highWaterMark&&(i=!0),(r.ended||r.reading)&&(i=!1),i&&(r.reading=!0,r.sync=!0,r.length===0&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1),i&&!r.reading&&(e=Wa(t,r)),e>0?n=Zi(e,r):n=null,n===null&&(r.needReadable=!0,e=0),r.length-=e,r.length===0&&!r.ended&&(r.needReadable=!0),r.ended&&!r.endEmitted&&r.length===0&&eo(this),n};function Dg(e,r){var t=null;return!Rn.isBuffer(r)&&typeof r!="string"&&r!==null&&r!==void 0&&!e.objectMode&&(t=new TypeError("Invalid non-string/buffer chunk")),t}function Ig(e,r){if(r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&(r.buffer.push(t),r.length+=r.objectMode?1:t.length)}r.ended=!0,r.length>0?Wn(e):eo(e)}function Wn(e){var r=e._readableState;r.needReadable=!1,!r.emittedReadable&&(r.emittedReadable=!0,r.sync?process.nextTick(function(){qa(e)}):qa(e))}function qa(e){e.emit("readable")}function Pg(e,r){r.readingMore||(r.readingMore=!0,process.nextTick(function(){Bg(e,r)}))}function Bg(e,r){for(var t=r.length;!r.reading&&!r.flowing&&!r.ended&&r.length<r.highWaterMark&&(e.read(0),t!==r.length);)t=r.length;r.readingMore=!1}ye.prototype._read=function(e){this.emit("error",new Error("not implemented"))};ye.prototype.pipe=function(e,r){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1;var i=(!r||r.end!==!1)&&e!==process.stdout&&e!==process.stderr,o=i?s:u;n.endEmitted?process.nextTick(o):t.once("end",o),e.on("unpipe",a);function a(d){d===t&&u()}function s(){e.end()}var f=Fg(t);e.on("drain",f);function u(){e.removeListener("close",l),e.removeListener("finish",p),e.removeListener("drain",f),e.removeListener("error",c),e.removeListener("unpipe",a),t.removeListener("end",s),t.removeListener("end",u),(!e._writableState||e._writableState.needDrain)&&f()}function c(d){h(),e.removeListener("error",c),An.listenerCount(e,"error")===0&&e.emit("error",d)}!e._events||!e._events.error?e.on("error",c):kg(e._events.error)?e._events.error.unshift(c):e._events.error=[c,e._events.error];function l(){e.removeListener("finish",p),h()}e.once("close",l);function p(){e.removeListener("close",l),h()}e.once("finish",p);function h(){t.unpipe(e)}return e.emit("pipe",t),n.flowing||(this.on("readable",Qi),n.flowing=!0,process.nextTick(function(){ko(t)})),e};function Fg(e){return function(){var r=e._readableState;r.awaitDrain--,r.awaitDrain===0&&ko(e)}}function ko(e){var r=e._readableState,t;r.awaitDrain=0;function n(i,o,a){var s=i.write(t);s===!1&&r.awaitDrain++}for(;r.pipesCount&&(t=e.read())!==null;)if(r.pipesCount===1?n(r.pipes):fu(r.pipes,n),e.emit("data",t),r.awaitDrain>0)return;if(r.pipesCount===0){r.flowing=!1,An.listenerCount(e,"data")>0&&qn(e);return}r.ranOut=!0}function Qi(){this._readableState.ranOut&&(this._readableState.ranOut=!1,ko(this))}ye.prototype.unpipe=function(e){var r=this._readableState;if(r.pipesCount===0)return this;if(r.pipesCount===1)return e&&e!==r.pipes?this:(e||(e=r.pipes),r.pipes=null,r.pipesCount=0,this.removeListener("readable",Qi),r.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var t=r.pipes,n=r.pipesCount;r.pipes=null,r.pipesCount=0,this.removeListener("readable",Qi),r.flowing=!1;for(var i=0;i<n;i++)t[i].emit("unpipe",this);return this}var i=Lg(r.pipes,e);return i===-1?this:(r.pipes.splice(i,1),r.pipesCount-=1,r.pipesCount===1&&(r.pipes=r.pipes[0]),e.emit("unpipe",this),this)};ye.prototype.on=function(e,r){var t=vt.prototype.on.call(this,e,r);if(e==="data"&&!this._readableState.flowing&&qn(this),e==="readable"&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&Wn(this):this.read(0))}return t};ye.prototype.addListener=ye.prototype.on;ye.prototype.resume=function(){qn(this),this.read(0),this.emit("resume")};ye.prototype.pause=function(){qn(this,!0),this.emit("pause")};function qn(e,r){var t=e._readableState;if(t.flowing)throw new Error("Cannot switch to old mode now.");var n=r||!1,i=!1;e.readable=!0,e.pipe=vt.prototype.pipe,e.on=e.addListener=vt.prototype.on,e.on("readable",function(){i=!0;for(var o;!n&&(o=e.read())!==null;)e.emit("data",o);o===null&&(i=!1,e._readableState.needReadable=!0)}),e.pause=function(){n=!0,this.emit("pause")},e.resume=function(){n=!1,i?process.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}ye.prototype.wrap=function(e){var r=this._readableState,t=!1,n=this;e.on("end",function(){if(r.decoder&&!r.ended){var a=r.decoder.end();a&&a.length&&n.push(a)}n.push(null)}),e.on("data",function(a){if(r.decoder&&(a=r.decoder.write(a)),!(r.objectMode&&a==null)&&!(!r.objectMode&&(!a||!a.length))){var s=n.push(a);s||(t=!0,e.pause())}});for(var i in e)typeof e[i]=="function"&&typeof this[i]>"u"&&(this[i]=function(a){return function(){return e[a].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return fu(o,function(a){e.on(a,n.emit.bind(n,a))}),n._read=function(a){t&&(t=!1,e.resume())},n};ye._fromList=Zi;function Zi(e,r){var t=r.buffer,n=r.length,i=!!r.decoder,o=!!r.objectMode,a;if(t.length===0)return null;if(n===0)a=null;else if(o)a=t.shift();else if(!e||e>=n)i?a=t.join(""):a=Rn.concat(t,n),t.length=0;else if(e<t[0].length){var s=t[0];a=s.slice(0,e),t[0]=s.slice(e)}else if(e===t[0].length)a=t.shift();else{i?a="":a=new Rn(e);for(var f=0,u=0,c=t.length;u<c&&f<e;u++){var s=t[0],l=Math.min(e-f,s.length);i?a+=s.slice(0,l):s.copy(a,f,0,l),l<s.length?t[0]=s.slice(l):t.shift(),f+=l}}return a}function eo(e){var r=e._readableState;if(r.length>0)throw new Error("endReadable called on non-empty stream");!r.endEmitted&&r.calledRead&&(r.ended=!0,process.nextTick(function(){!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function fu(e,r){for(var t=0,n=e.length;t<n;t++)r(e[t],t)}function Lg(e,r){for(var t=0,n=e.length;t<n;t++)if(e[t]===r)return t;return-1}var ci,Ha;function Mo(){if(Ha)return ci;Ha=1,ci=i;var e=Object.keys||function(s){var f=[];for(var u in s)f.push(u);return f},r=J;r.inherits=oe.exports;var t=iu,n=uu();r.inherits(i,t),a(e(n.prototype),function(s){i.prototype[s]||(i.prototype[s]=n.prototype[s])});function i(s){if(!(this instanceof i))return new i(s);t.call(this,s),n.call(this,s),s&&s.readable===!1&&(this.readable=!1),s&&s.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,s&&s.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",o)}function o(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}function a(s,f){for(var u=0,c=s.length;u<c;u++)f(s[u],u)}return ci}var hi,Va;function uu(){if(Va)return hi;Va=1,hi=o;var e=ze.Buffer;o.WritableState=i;var r=J;r.inherits=oe.exports;var t=Ae();r.inherits(o,t);function n(b,g,m){this.chunk=b,this.encoding=g,this.callback=m}function i(b,g){b=b||{};var m=b.highWaterMark;this.highWaterMark=m||m===0?m:16*1024,this.objectMode=!!b.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var S=b.decodeStrings===!1;this.decodeStrings=!S,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(N){h(g,N)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(b){var g=Mo();if(!(this instanceof o)&&!(this instanceof g))return new o(b);this._writableState=new i(b,this),this.writable=!0,t.call(this)}o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function a(b,g,m){var S=new Error("write after end");b.emit("error",S),process.nextTick(function(){m(S)})}function s(b,g,m,S){var N=!0;if(!e.isBuffer(m)&&typeof m!="string"&&m!==null&&m!==void 0&&!g.objectMode){var B=new TypeError("Invalid non-string/buffer chunk");b.emit("error",B),process.nextTick(function(){S(B)}),N=!1}return N}o.prototype.write=function(b,g,m){var S=this._writableState,N=!1;return typeof g=="function"&&(m=g,g=null),e.isBuffer(b)?g="buffer":g||(g=S.defaultEncoding),typeof m!="function"&&(m=function(){}),S.ended?a(this,S,m):s(this,S,b,m)&&(N=u(this,S,b,g,m)),N};function f(b,g,m){return!b.objectMode&&b.decodeStrings!==!1&&typeof g=="string"&&(g=new e(g,m)),g}function u(b,g,m,S,N){m=f(g,m,S),e.isBuffer(m)&&(S="buffer");var B=g.objectMode?1:m.length;g.length+=B;var U=g.length<g.highWaterMark;return U||(g.needDrain=!0),g.writing?g.buffer.push(new n(m,S,N)):c(b,g,B,m,S,N),U}function c(b,g,m,S,N,B){g.writelen=m,g.writecb=B,g.writing=!0,g.sync=!0,b._write(S,N,g.onwrite),g.sync=!1}function l(b,g,m,S,N){m?process.nextTick(function(){N(S)}):N(S),b._writableState.errorEmitted=!0,b.emit("error",S)}function p(b){b.writing=!1,b.writecb=null,b.length-=b.writelen,b.writelen=0}function h(b,g){var m=b._writableState,S=m.sync,N=m.writecb;if(p(m),g)l(b,m,S,g,N);else{var B=y(b,m);!B&&!m.bufferProcessing&&m.buffer.length&&w(b,m),S?process.nextTick(function(){d(b,m,B,N)}):d(b,m,B,N)}}function d(b,g,m,S){m||v(b,g),S(),m&&_(b,g)}function v(b,g){g.length===0&&g.needDrain&&(g.needDrain=!1,b.emit("drain"))}function w(b,g){g.bufferProcessing=!0;for(var m=0;m<g.buffer.length;m++){var S=g.buffer[m],N=S.chunk,B=S.encoding,U=S.callback,Q=g.objectMode?1:N.length;if(c(b,g,Q,N,B,U),g.writing){m++;break}}g.bufferProcessing=!1,m<g.buffer.length?g.buffer=g.buffer.slice(m):g.buffer.length=0}o.prototype._write=function(b,g,m){m(new Error("not implemented"))},o.prototype.end=function(b,g,m){var S=this._writableState;typeof b=="function"?(m=b,b=null,g=null):typeof g=="function"&&(m=g,g=null),typeof b<"u"&&b!==null&&this.write(b,g),!S.ending&&!S.finished&&C(this,S,m)};function y(b,g){return g.ending&&g.length===0&&!g.finished&&!g.writing}function _(b,g){var m=y(b,g);return m&&(g.finished=!0,b.emit("finish")),m}function C(b,g,m){g.ending=!0,_(b,g),m&&(g.finished?process.nextTick(m):b.once("finish",m)),g.ended=!0}return hi}var lu=vr,$o=Mo(),cu=J;cu.inherits=oe.exports;cu.inherits(vr,$o);function jg(e,r){this.afterTransform=function(t,n){return Ug(r,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function Ug(e,r,t){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,t!=null&&e.push(t),i&&i(r);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function vr(e){if(!(this instanceof vr))return new vr(e);$o.call(this,e),this._transformState=new jg(e,this);var r=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){typeof this._flush=="function"?this._flush(function(t){Ya(r,t)}):Ya(r)})}vr.prototype.push=function(e,r){return this._transformState.needTransform=!1,$o.prototype.push.call(this,e,r)};vr.prototype._transform=function(e,r,t){throw new Error("not implemented")};vr.prototype._write=function(e,r,t){var n=this._transformState;if(n.writecb=t,n.writechunk=e,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};vr.prototype._read=function(e){var r=this._transformState;r.writechunk!==null&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0};function Ya(e,r){if(r)return e.emit("error",r);var t=e._writableState;e._readableState;var n=e._transformState;if(t.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}var Wg=mt,hu=lu,du=J;du.inherits=oe.exports;du.inherits(mt,hu);function mt(e){if(!(this instanceof mt))return new mt(e);hu.call(this,e)}mt.prototype._transform=function(e,r,t){t(null,e)};(function(e,r){var t=Ae();r=e.exports=iu,r.Stream=t,r.Readable=r,r.Writable=uu(),r.Duplex=Mo(),r.Transform=lu,r.PassThrough=Wg,!process.browser&&process.env.READABLE_STREAM==="disable"&&(e.exports=Ae())})(Xi,Xi.exports);const qg="levelup",Hg="Fast & simple storage - a Node.js-style LevelDB wrapper",Vg="0.18.6",Yg=["Rod Vagg <r@va.gg> (https://github.com/rvagg)","John Chesley <john@chesl.es> (https://github.com/chesles/)","Jake Verbaten <raynos2@gmail.com> (https://github.com/raynos)","Dominic Tarr <dominic.tarr@gmail.com> (https://github.com/dominictarr)","Max Ogden <max@maxogden.com> (https://github.com/maxogden)","Lars-Magnus Skog <lars.magnus.skog@gmail.com> (https://github.com/ralphtheninja)","David Bj\xF6rklund <david.bjorklund@gmail.com> (https://github.com/kesla)","Julian Gruber <julian@juliangruber.com> (https://github.com/juliangruber)","Paolo Fragomeni <paolo@async.ly> (https://github.com/hij1nx)","Anton Whalley <anton.whalley@nearform.com> (https://github.com/No9)","Matteo Collina <matteo.collina@gmail.com> (https://github.com/mcollina)","Pedro Teixeira <pedro.teixeira@gmail.com> (https://github.com/pgte)","James Halliday <mail@substack.net> (https://github.com/substack)"],Kg={type:"git",url:"https://github.com/rvagg/node-levelup.git"},zg="https://github.com/rvagg/node-levelup",Gg=["leveldb","stream","database","db","store","storage","json"],Jg="lib/levelup.js",Xg={bl:"~0.8.1","deferred-leveldown":"~0.2.0",errno:"~0.1.1",prr:"~0.0.0","readable-stream":"~1.0.26",semver:"~2.3.1",xtend:"~3.0.0"},Qg={leveldown:"~0.10.0",bustermove:"*",tap:"*",referee:"*",rimraf:"*",async:"*",fstream:"*",tar:"*",mkfiletree:"*",readfiletree:"*","slow-stream":">=0.0.4",delayed:"*",boganipsum:"*",du:"*",memdown:"*","msgpack-js":"*"},Zg={leveldown:!1,"leveldown/package":!1,semver:!1},ev={test:"tap test/*-test.js --stderr",functionaltests:"node ./test/functional/fstream-test.js && node ./test/functional/binary-data-test.js && node ./test/functional/compat-test.js",alltests:"npm test && npm run-script functionaltests"},rv="MIT",tv={name:qg,description:Hg,version:Vg,contributors:Yg,repository:Kg,homepage:zg,keywords:Gg,main:Jg,dependencies:Xg,devDependencies:Qg,browser:Zg,scripts:ev,license:rv};var nv=jn,di=fr.LevelUPError,pu=["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le"],gu={createIfMissing:!0,errorIfExists:!1,keyEncoding:"utf8",valueEncoding:"utf8",compression:!0},pi,vu=function(){function e(t){return t==null||Buffer.isBuffer(t)}var r={};return r.utf8=r["utf-8"]={encode:function(t){return e(t)?t:String(t)},decode:function(t){return t},buffer:!1,type:"utf8"},r.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},pu.forEach(function(t){r[t]||(r[t]={encode:function(n){return e(n)?n:new Buffer(n,t)},decode:function(n){return process.browser?n.toString(t):n},buffer:!0,type:t})}),r}(),Ka=function(){var e={};return pu.forEach(function(r){e[r]={valueEncoding:r}}),e}();function iv(e,r,t){e.readStream().pipe(r.writeStream()).on("close",t||function(){}).on("error",t||function(n){throw n})}function ov(e,r){var t=typeof r=="string";return!t&&r&&r.encoding&&!r.valueEncoding&&(r.valueEncoding=r.encoding),nv(e&&e.options||{},t?Ka[r]||Ka[gu.valueEncoding]:r)}function av(){if(pi)return pi;var e=tv.devDependencies.leveldown,r="Could not locate LevelDOWN, try `npm install leveldown`",t;try{t=ct.version}catch{throw new di(r)}if(!ct.satisfies(t,e))throw new di("Installed version of LevelDOWN ("+t+") does not match required version ("+e+")");try{return pi=ct}catch{throw new di(r)}}function sv(e,r,t){return typeof t=="function"?t(r):e.emit("error",r)}function Do(e,r){var t=r&&r.keyEncoding||e.keyEncoding||"utf8";return vu[t]||t}function Io(e,r){var t=r&&(r.valueEncoding||r.encoding)||e.valueEncoding||e.encoding||"utf8";return vu[t]||t}function fv(e,r,t){return Do(r,t).encode(e)}function uv(e,r,t){return Io(r,t).encode(e)}function lv(e,r){return Do(r).decode(e)}function cv(e,r){return Io(r).decode(e)}function hv(e,r){return Io(e,r).buffer}function dv(e,r){return Do(e,r).buffer}var Hn={defaultOptions:gu,copy:iv,getOptions:ov,getLevelDOWN:av,dispatchError:sv,encodeKey:fv,encodeValue:uv,isValueAsBuffer:hv,isKeyAsBuffer:dv,decodeValue:cv,decodeKey:lv},mu=Xi.exports.Readable,pv=je.inherits,gv=jn,vv=fr.EncodingError,lr=Hn,mv={keys:!0,values:!0},yv=function(e,r){return{key:lr.decodeKey(e,this._options),value:lr.decodeValue(r,this._options)}},bv=function(e){return lr.decodeKey(e,this._options)},wv=function(e,r){return lr.decodeValue(r,this._options)},_v=function(){return null};function mr(e,r,t){if(!(this instanceof mr))return new mr(e,r,t);mu.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this._db=r,e=this._options=gv(mv,e),this._keyEncoding=e.keyEncoding||e.encoding,this._valueEncoding=e.valueEncoding||e.encoding,typeof this._options.start<"u"&&(this._options.start=lr.encodeKey(this._options.start,this._options)),typeof this._options.end<"u"&&(this._options.end=lr.encodeKey(this._options.end,this._options)),typeof this._options.limit!="number"&&(this._options.limit=-1),this._options.keyAsBuffer=lr.isKeyAsBuffer(this._options),this._options.valueAsBuffer=lr.isValueAsBuffer(this._options),this._makeData=this._options.keys&&this._options.values?yv:this._options.keys?bv:this._options.values?wv:_v;var n=this;this._db.isOpen()?this._iterator=t(this._options):this._db.once("ready",function(){n._destroyed||(n._iterator=t(n._options))})}pv(mr,mu);mr.prototype._read=function e(){var r=this;if(!r._db.isOpen())return r._db.once("ready",function(){e.call(r)});r._destroyed||r._iterator.next(function(t,n,i){if(t||n===void 0&&i===void 0)return!t&&!r._destroyed&&r.push(null),r._cleanup(t);try{i=r._makeData(n,i)}catch(o){return r._cleanup(new vv(o))}r._destroyed||r.push(i)})};mr.prototype._cleanup=function(e){if(!this._destroyed){this._destroyed=!0;var r=this;e&&r.emit("error",e),r._iterator?r._iterator.end(function(){r._iterator=null,r.emit("close")}):r.emit("close")}};mr.prototype.destroy=function(){this._cleanup()};mr.prototype.toString=function(){return"LevelUP.ReadStream"};var Ev=mr,ro={exports:{}},yu=be,Sv=Dn,On=ze.Buffer;be.ReadableState=wu;var Tn=Ue.exports.EventEmitter;Tn.listenerCount||(Tn.listenerCount=function(e,r){return e.listeners(r).length});var yt=Ae(),bu=J;bu.inherits=oe.exports;var Kr;bu.inherits(be,yt);function wu(e,r){e=e||{};var t=e.highWaterMark;this.highWaterMark=t||t===0?t:16*1024,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(Kr||(Kr=pr().StringDecoder),this.decoder=new Kr(e.encoding),this.encoding=e.encoding)}function be(e){if(!(this instanceof be))return new be(e);this._readableState=new wu(e),this.readable=!0,yt.call(this)}be.prototype.push=function(e,r){var t=this._readableState;return typeof e=="string"&&!t.objectMode&&(r=r||t.defaultEncoding,r!==t.encoding&&(e=new On(e,r),r="")),_u(this,t,e,r,!1)};be.prototype.unshift=function(e){var r=this._readableState;return _u(this,r,e,"",!0)};function _u(e,r,t,n,i){var o=Av(r,t);if(o)e.emit("error",o);else if(t==null)r.reading=!1,r.ended||Ov(e,r);else if(r.objectMode||t&&t.length>0)if(r.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(r.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else r.decoder&&!i&&!n&&(t=r.decoder.write(t)),r.length+=r.objectMode?1:t.length,i?r.buffer.unshift(t):(r.reading=!1,r.buffer.push(t)),r.needReadable&&Vn(e),Tv(e,r);else i||(r.reading=!1);return xv(r)}function xv(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}be.prototype.setEncoding=function(e){Kr||(Kr=pr().StringDecoder),this._readableState.decoder=new Kr(e),this._readableState.encoding=e};var za=8388608;function Rv(e){if(e>=za)e=za;else{e--;for(var r=1;r<32;r<<=1)e|=e>>r;e++}return e}function Ga(e,r){return r.length===0&&r.ended?0:r.objectMode?e===0?0:1:e===null||isNaN(e)?r.flowing&&r.buffer.length?r.buffer[0].length:r.length:e<=0?0:(e>r.highWaterMark&&(r.highWaterMark=Rv(e)),e>r.length?r.ended?r.length:(r.needReadable=!0,0):e)}be.prototype.read=function(e){var r=this._readableState;r.calledRead=!0;var t=e,n;if((typeof e!="number"||e>0)&&(r.emittedReadable=!1),e===0&&r.needReadable&&(r.length>=r.highWaterMark||r.ended))return Vn(this),null;if(e=Ga(e,r),e===0&&r.ended)return n=null,r.length>0&&r.decoder&&(n=no(e,r),r.length-=n.length),r.length===0&&io(this),n;var i=r.needReadable;return r.length-e<=r.highWaterMark&&(i=!0),(r.ended||r.reading)&&(i=!1),i&&(r.reading=!0,r.sync=!0,r.length===0&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1),i&&!r.reading&&(e=Ga(t,r)),e>0?n=no(e,r):n=null,n===null&&(r.needReadable=!0,e=0),r.length-=e,r.length===0&&!r.ended&&(r.needReadable=!0),r.ended&&!r.endEmitted&&r.length===0&&io(this),n};function Av(e,r){var t=null;return!On.isBuffer(r)&&typeof r!="string"&&r!==null&&r!==void 0&&!e.objectMode&&(t=new TypeError("Invalid non-string/buffer chunk")),t}function Ov(e,r){if(r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&(r.buffer.push(t),r.length+=r.objectMode?1:t.length)}r.ended=!0,r.length>0?Vn(e):io(e)}function Vn(e){var r=e._readableState;r.needReadable=!1,!r.emittedReadable&&(r.emittedReadable=!0,r.sync?process.nextTick(function(){Ja(e)}):Ja(e))}function Ja(e){e.emit("readable")}function Tv(e,r){r.readingMore||(r.readingMore=!0,process.nextTick(function(){Cv(e,r)}))}function Cv(e,r){for(var t=r.length;!r.reading&&!r.flowing&&!r.ended&&r.length<r.highWaterMark&&(e.read(0),t!==r.length);)t=r.length;r.readingMore=!1}be.prototype._read=function(e){this.emit("error",new Error("not implemented"))};be.prototype.pipe=function(e,r){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1;var i=(!r||r.end!==!1)&&e!==process.stdout&&e!==process.stderr,o=i?s:u;n.endEmitted?process.nextTick(o):t.once("end",o),e.on("unpipe",a);function a(d){d===t&&u()}function s(){e.end()}var f=Nv(t);e.on("drain",f);function u(){e.removeListener("close",l),e.removeListener("finish",p),e.removeListener("drain",f),e.removeListener("error",c),e.removeListener("unpipe",a),t.removeListener("end",s),t.removeListener("end",u),(!e._writableState||e._writableState.needDrain)&&f()}function c(d){h(),e.removeListener("error",c),Tn.listenerCount(e,"error")===0&&e.emit("error",d)}!e._events||!e._events.error?e.on("error",c):Sv(e._events.error)?e._events.error.unshift(c):e._events.error=[c,e._events.error];function l(){e.removeListener("finish",p),h()}e.once("close",l);function p(){e.removeListener("close",l),h()}e.once("finish",p);function h(){t.unpipe(e)}return e.emit("pipe",t),n.flowing||(this.on("readable",to),n.flowing=!0,process.nextTick(function(){Po(t)})),e};function Nv(e){return function(){var r=e._readableState;r.awaitDrain--,r.awaitDrain===0&&Po(e)}}function Po(e){var r=e._readableState,t;r.awaitDrain=0;function n(i,o,a){var s=i.write(t);s===!1&&r.awaitDrain++}for(;r.pipesCount&&(t=e.read())!==null;)if(r.pipesCount===1?n(r.pipes):Eu(r.pipes,n),e.emit("data",t),r.awaitDrain>0)return;if(r.pipesCount===0){r.flowing=!1,Tn.listenerCount(e,"data")>0&&Yn(e);return}r.ranOut=!0}function to(){this._readableState.ranOut&&(this._readableState.ranOut=!1,Po(this))}be.prototype.unpipe=function(e){var r=this._readableState;if(r.pipesCount===0)return this;if(r.pipesCount===1)return e&&e!==r.pipes?this:(e||(e=r.pipes),r.pipes=null,r.pipesCount=0,this.removeListener("readable",to),r.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var t=r.pipes,n=r.pipesCount;r.pipes=null,r.pipesCount=0,this.removeListener("readable",to),r.flowing=!1;for(var i=0;i<n;i++)t[i].emit("unpipe",this);return this}var i=kv(r.pipes,e);return i===-1?this:(r.pipes.splice(i,1),r.pipesCount-=1,r.pipesCount===1&&(r.pipes=r.pipes[0]),e.emit("unpipe",this),this)};be.prototype.on=function(e,r){var t=yt.prototype.on.call(this,e,r);if(e==="data"&&!this._readableState.flowing&&Yn(this),e==="readable"&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&Vn(this):this.read(0))}return t};be.prototype.addListener=be.prototype.on;be.prototype.resume=function(){Yn(this),this.read(0),this.emit("resume")};be.prototype.pause=function(){Yn(this,!0),this.emit("pause")};function Yn(e,r){var t=e._readableState;if(t.flowing)throw new Error("Cannot switch to old mode now.");var n=r||!1,i=!1;e.readable=!0,e.pipe=yt.prototype.pipe,e.on=e.addListener=yt.prototype.on,e.on("readable",function(){i=!0;for(var o;!n&&(o=e.read())!==null;)e.emit("data",o);o===null&&(i=!1,e._readableState.needReadable=!0)}),e.pause=function(){n=!0,this.emit("pause")},e.resume=function(){n=!1,i?process.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}be.prototype.wrap=function(e){var r=this._readableState,t=!1,n=this;e.on("end",function(){if(r.decoder&&!r.ended){var a=r.decoder.end();a&&a.length&&n.push(a)}n.push(null)}),e.on("data",function(a){if(r.decoder&&(a=r.decoder.write(a)),!(r.objectMode&&a==null)&&!(!r.objectMode&&(!a||!a.length))){var s=n.push(a);s||(t=!0,e.pause())}});for(var i in e)typeof e[i]=="function"&&typeof this[i]>"u"&&(this[i]=function(a){return function(){return e[a].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return Eu(o,function(a){e.on(a,n.emit.bind(n,a))}),n._read=function(a){t&&(t=!1,e.resume())},n};be._fromList=no;function no(e,r){var t=r.buffer,n=r.length,i=!!r.decoder,o=!!r.objectMode,a;if(t.length===0)return null;if(n===0)a=null;else if(o)a=t.shift();else if(!e||e>=n)i?a=t.join(""):a=On.concat(t,n),t.length=0;else if(e<t[0].length){var s=t[0];a=s.slice(0,e),t[0]=s.slice(e)}else if(e===t[0].length)a=t.shift();else{i?a="":a=new On(e);for(var f=0,u=0,c=t.length;u<c&&f<e;u++){var s=t[0],l=Math.min(e-f,s.length);i?a+=s.slice(0,l):s.copy(a,f,0,l),l<s.length?t[0]=s.slice(l):t.shift(),f+=l}}return a}function io(e){var r=e._readableState;if(r.length>0)throw new Error("endReadable called on non-empty stream");!r.endEmitted&&r.calledRead&&(r.ended=!0,process.nextTick(function(){!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function Eu(e,r){for(var t=0,n=e.length;t<n;t++)r(e[t],t)}function kv(e,r){for(var t=0,n=e.length;t<n;t++)if(e[t]===r)return t;return-1}var gi,Xa;function Bo(){if(Xa)return gi;Xa=1,gi=i;var e=Object.keys||function(s){var f=[];for(var u in s)f.push(u);return f},r=J;r.inherits=oe.exports;var t=yu,n=Su();r.inherits(i,t),a(e(n.prototype),function(s){i.prototype[s]||(i.prototype[s]=n.prototype[s])});function i(s){if(!(this instanceof i))return new i(s);t.call(this,s),n.call(this,s),s&&s.readable===!1&&(this.readable=!1),s&&s.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,s&&s.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",o)}function o(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}function a(s,f){for(var u=0,c=s.length;u<c;u++)f(s[u],u)}return gi}var vi,Qa;function Su(){if(Qa)return vi;Qa=1,vi=o;var e=ze.Buffer;o.WritableState=i;var r=J;r.inherits=oe.exports;var t=Ae();r.inherits(o,t);function n(b,g,m){this.chunk=b,this.encoding=g,this.callback=m}function i(b,g){b=b||{};var m=b.highWaterMark;this.highWaterMark=m||m===0?m:16*1024,this.objectMode=!!b.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var S=b.decodeStrings===!1;this.decodeStrings=!S,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(N){h(g,N)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(b){var g=Bo();if(!(this instanceof o)&&!(this instanceof g))return new o(b);this._writableState=new i(b,this),this.writable=!0,t.call(this)}o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function a(b,g,m){var S=new Error("write after end");b.emit("error",S),process.nextTick(function(){m(S)})}function s(b,g,m,S){var N=!0;if(!e.isBuffer(m)&&typeof m!="string"&&m!==null&&m!==void 0&&!g.objectMode){var B=new TypeError("Invalid non-string/buffer chunk");b.emit("error",B),process.nextTick(function(){S(B)}),N=!1}return N}o.prototype.write=function(b,g,m){var S=this._writableState,N=!1;return typeof g=="function"&&(m=g,g=null),e.isBuffer(b)?g="buffer":g||(g=S.defaultEncoding),typeof m!="function"&&(m=function(){}),S.ended?a(this,S,m):s(this,S,b,m)&&(N=u(this,S,b,g,m)),N};function f(b,g,m){return!b.objectMode&&b.decodeStrings!==!1&&typeof g=="string"&&(g=new e(g,m)),g}function u(b,g,m,S,N){m=f(g,m,S),e.isBuffer(m)&&(S="buffer");var B=g.objectMode?1:m.length;g.length+=B;var U=g.length<g.highWaterMark;return U||(g.needDrain=!0),g.writing?g.buffer.push(new n(m,S,N)):c(b,g,B,m,S,N),U}function c(b,g,m,S,N,B){g.writelen=m,g.writecb=B,g.writing=!0,g.sync=!0,b._write(S,N,g.onwrite),g.sync=!1}function l(b,g,m,S,N){m?process.nextTick(function(){N(S)}):N(S),b._writableState.errorEmitted=!0,b.emit("error",S)}function p(b){b.writing=!1,b.writecb=null,b.length-=b.writelen,b.writelen=0}function h(b,g){var m=b._writableState,S=m.sync,N=m.writecb;if(p(m),g)l(b,m,S,g,N);else{var B=y(b,m);!B&&!m.bufferProcessing&&m.buffer.length&&w(b,m),S?process.nextTick(function(){d(b,m,B,N)}):d(b,m,B,N)}}function d(b,g,m,S){m||v(b,g),S(),m&&_(b,g)}function v(b,g){g.length===0&&g.needDrain&&(g.needDrain=!1,b.emit("drain"))}function w(b,g){g.bufferProcessing=!0;for(var m=0;m<g.buffer.length;m++){var S=g.buffer[m],N=S.chunk,B=S.encoding,U=S.callback,Q=g.objectMode?1:N.length;if(c(b,g,Q,N,B,U),g.writing){m++;break}}g.bufferProcessing=!1,m<g.buffer.length?g.buffer=g.buffer.slice(m):g.buffer.length=0}o.prototype._write=function(b,g,m){m(new Error("not implemented"))},o.prototype.end=function(b,g,m){var S=this._writableState;typeof b=="function"?(m=b,b=null,g=null):typeof g=="function"&&(m=g,g=null),typeof b<"u"&&b!==null&&this.write(b,g),!S.ending&&!S.finished&&C(this,S,m)};function y(b,g){return g.ending&&g.length===0&&!g.finished&&!g.writing}function _(b,g){var m=y(b,g);return m&&(g.finished=!0,b.emit("finish")),m}function C(b,g,m){g.ending=!0,_(b,g),m&&(g.finished?process.nextTick(m):b.once("finish",m)),g.ended=!0}return vi}var xu=yr,Fo=Bo(),Ru=J;Ru.inherits=oe.exports;Ru.inherits(yr,Fo);function Mv(e,r){this.afterTransform=function(t,n){return $v(r,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function $v(e,r,t){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,t!=null&&e.push(t),i&&i(r);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function yr(e){if(!(this instanceof yr))return new yr(e);Fo.call(this,e),this._transformState=new Mv(e,this);var r=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){typeof this._flush=="function"?this._flush(function(t){Za(r,t)}):Za(r)})}yr.prototype.push=function(e,r){return this._transformState.needTransform=!1,Fo.prototype.push.call(this,e,r)};yr.prototype._transform=function(e,r,t){throw new Error("not implemented")};yr.prototype._write=function(e,r,t){var n=this._transformState;if(n.writecb=t,n.writechunk=e,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};yr.prototype._read=function(e){var r=this._transformState;r.writechunk!==null&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0};function Za(e,r){if(r)return e.emit("error",r);var t=e._writableState;e._readableState;var n=e._transformState;if(t.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}var Dv=bt,Au=xu,Ou=J;Ou.inherits=oe.exports;Ou.inherits(bt,Au);function bt(e){if(!(this instanceof bt))return new bt(e);Au.call(this,e)}bt.prototype._transform=function(e,r,t){t(null,e)};(function(e,r){var t=Ae();r=e.exports=yu,r.Stream=t,r.Readable=r,r.Writable=Su(),r.Duplex=Bo(),r.Transform=xu,r.PassThrough=Dv,!process.browser&&process.env.READABLE_STREAM==="disable"&&(e.exports=Ae())})(ro,ro.exports);var Lo=ro.exports.Duplex,Iv=je;function Ee(e){if(!(this instanceof Ee))return new Ee(e);if(this._bufs=[],this.length=0,typeof e=="function"){this._callback=e;var r=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",function(t){t.on("error",r)}),this.on("unpipe",function(t){t.removeListener("error",r)})}else Buffer.isBuffer(e)?this.append(e):Array.isArray(e)&&e.forEach(function(t){Buffer.isBuffer(t)&&this.append(t)}.bind(this));Lo.call(this)}Iv.inherits(Ee,Lo);Ee.prototype._offset=function(e){for(var r=0,t=0,n;t<this._bufs.length;t++){if(n=r+this._bufs[t].length,e<n)return[t,e-r];r=n}};Ee.prototype.append=function(e){return this._bufs.push(Buffer.isBuffer(e)?e:new Buffer(e)),this.length+=e.length,this};Ee.prototype._write=function(e,r,t){this.append(e),t&&t()};Ee.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)};Ee.prototype.end=function(e){Lo.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)};Ee.prototype.get=function(e){return this.slice(e,e+1)[0]};Ee.prototype.slice=function(e,r){return this.copy(null,0,e,r)};Ee.prototype.copy=function(e,r,t,n){if((typeof t!="number"||t<0)&&(t=0),(typeof n!="number"||n>this.length)&&(n=this.length),t>=this.length)return e||new Buffer(0);if(n<=0)return e||new Buffer(0);var i=!!e,o=this._offset(t),a=n-t,s=a,f=i&&r||0,u=o[1],c,l;if(t===0&&n==this.length){if(!i)return Buffer.concat(this._bufs);for(l=0;l<this._bufs.length;l++)this._bufs[l].copy(e,f),f+=this._bufs[l].length;return e}if(s<=this._bufs[o[0]].length-u)return i?this._bufs[o[0]].copy(e,r,u,u+s):this._bufs[o[0]].slice(u,u+s);for(i||(e=new Buffer(a)),l=o[0];l<this._bufs.length;l++){if(c=this._bufs[l].length-u,s>c)this._bufs[l].copy(e,f,u);else{this._bufs[l].copy(e,f,u,u+s);break}f+=c,s-=c,u&&(u=0)}return e};Ee.prototype.toString=function(e,r,t){return this.slice(r,t).toString(e)};Ee.prototype.consume=function(e){for(;this._bufs.length;)if(e>this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};Ee.prototype.duplicate=function(){for(var e=0,r=new Ee;e<this._bufs.length;e++)r.append(this._bufs[e]);return r};Ee.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)};(function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var r in e)(function(t){Ee.prototype[t]=function(n){return this.slice(n,n+e[t])[t](0)}})(r)})();var Pv=Ee,Tu=Ae().Stream,Bv=je.inherits,Fv=jn,Lv=Pv,jo=dr.setImmediate||process.nextTick,jv=Hn.getOptions,Uv={type:"put"};function Pe(e,r){if(!(this instanceof Pe))return new Pe(e,r);Tu.call(this),this._options=Fv(Uv,jv(r,e)),this._db=r,this._buffer=[],this._status="init",this._end=!1,this.writable=!0,this.readable=!1;var t=this,n=function(){!t.writable||(t._status="ready",t.emit("ready"),t._process())};r.isOpen()?jo(n):r.once("ready",n)}Bv(Pe,Tu);Pe.prototype.write=function(e){return this.writable?(this._buffer.push(e),this._status!="init"&&this._processDelayed(),this._options.maxBufferLength&&this._buffer.length>this._options.maxBufferLength?(this._writeBlock=!0,!1):!0):!1};Pe.prototype.end=function(e){var r=this;e&&this.write(e),jo(function(){r._end=!0,r._process()})};Pe.prototype.destroy=function(){this.writable=!1,this.end()};Pe.prototype.destroySoon=function(){this.end()};Pe.prototype.add=function(e){if(!!e.props)return e.props.Directory?e.pipe(this._db.writeStream(this._options)):(e.props.File||e.File||e.type=="File")&&this._write(e),!0};Pe.prototype._processDelayed=function(){var e=this;jo(function(){e._process()})};Pe.prototype._process=function(){var e,r=this,t=function(n){if(!!r.writable){if(r._status!="closed"&&(r._status="ready"),n)return r.writable=!1,r.emit("error",n);r._process()}};if(r._status!="ready"&&r.writable){r._buffer.length&&r._status!="closed"&&r._processDelayed();return}if(r._buffer.length&&r.writable){r._status="writing",e=r._buffer,r._buffer=[],r._db.batch(e.map(function(n){return{type:n.type||r._options.type,key:n.key,value:n.value,keyEncoding:n.keyEncoding||r._options.keyEncoding,valueEncoding:n.valueEncoding||n.encoding||r._options.valueEncoding}}),t),r._writeBlock&&(r._writeBlock=!1,r.emit("drain"));return}r._end&&r._status!="closed"&&(r._status="closed",r.writable=!1,r.emit("close"))};Pe.prototype._write=function(e){var r=e.path||e.props.path,t=this;!r||e.pipe(Lv(function(n,i){if(n)return t.writable=!1,t.emit("error",n);t._options.fstreamRoot&&r.indexOf(t._options.fstreamRoot)>-1&&(r=r.substr(t._options.fstreamRoot.length+1)),t.write({key:r,value:i.slice(0)})}))};Pe.prototype.toString=function(){return"LevelUP.WriteStream"};var Wv=Pe,wt=Hn,_t=fr.WriteError,Cu=wt.getOptions,qv=wt.dispatchError;function Ut(e){this._levelup=e,this.batch=e.db.batch(),this.ops=[]}Ut.prototype.put=function(e,r,t){t=Cu(this._levelup,t);var n=wt.encodeKey(e,t),i=wt.encodeValue(r,t);try{this.batch.put(n,i)}catch(o){throw new _t(o)}return this.ops.push({type:"put",key:n,value:i}),this};Ut.prototype.del=function(e,r){r=Cu(this._levelup,r);var t=wt.encodeKey(e,r);try{this.batch.del(t)}catch(n){throw new _t(n)}return this.ops.push({type:"del",key:t}),this};Ut.prototype.clear=function(){try{this.batch.clear()}catch(e){throw new _t(e)}return this.ops=[],this};Ut.prototype.write=function(e){var r=this._levelup,t=this.ops;try{this.batch.write(function(n){if(n)return qv(r,new _t(n),e);r.emit("batch",t),e&&e()})}catch(n){throw new _t(n)}};var Hv=Ut,Nu=Ue.exports.EventEmitter,Vv=je.inherits,Wt=jn,Yv=eu.exports,Kv=dg,er=fr.WriteError,sn=fr.ReadError,zv=fr.NotFoundError,ku=fr.OpenError,Gv=fr.EncodingError,Jv=fr.InitializationError,Xv=Ev,Qv=Wv,Oe=Hn,Zv=Hv,Kn=Oe.getOptions,em=Oe.defaultOptions,Mu=Oe.getLevelDOWN,Te=Oe.dispatchError;function zn(e,r){return typeof e=="function"?e:r}function fe(e,r,t){if(!(this instanceof fe))return new fe(e,r,t);var n;if(Nu.call(this),this.setMaxListeners(1/0),typeof e=="function"?(r=typeof r=="object"?r:{},r.db=e,e=null):typeof e=="object"&&typeof e.db=="function"&&(r=e,e=null),typeof r=="function"&&(t=r,r={}),(!r||typeof r.db!="function")&&typeof e!="string"){if(n=new Jv("Must provide a location for the database"),t)return process.nextTick(function(){t(n)});throw n}r=Kn(this,r),this.options=Wt(em,r),this._status="new",Yv(this,"location",e,"e"),this.open(t)}Vv(fe,Nu);fe.prototype.open=function(e){var r=this,t,n;if(this.isOpen())return e&&process.nextTick(function(){e(null,r)}),this;if(this._isOpening())return e&&this.once("open",function(){e(null,r)});this.emit("opening"),this._status="opening",this.db=new Kv(this.location),t=this.options.db||Mu(),n=t(this.location),n.open(this.options,function(i){if(i)return Te(r,new ku(i),e);r.db.setDb(n),r.db=n,r._status="open",e&&e(null,r),r.emit("open"),r.emit("ready")})};fe.prototype.close=function(e){var r=this;if(this.isOpen())this._status="closing",this.db.close(function(){r._status="closed",r.emit("closed"),e&&e.apply(null,arguments)}),this.emit("closing"),this.db=null;else{if(this._status=="closed"&&e)return process.nextTick(e);this._status=="closing"&&e?this.once("closed",e):this._isOpening()&&this.once("open",function(){r.close(e)})}};fe.prototype.isOpen=function(){return this._status=="open"};fe.prototype._isOpening=function(){return this._status=="opening"};fe.prototype.isClosed=function(){return/^clos/.test(this._status)};fe.prototype.get=function(e,r,t){var n=this,i;if(t=zn(r,t),typeof t!="function")return Te(this,new sn("get() requires key and callback arguments"));if(!this._isOpening()&&!this.isOpen())return Te(this,new sn("Database is not open"),t);r=Oe.getOptions(this,r),i=Oe.encodeKey(e,r),r.asBuffer=Oe.isValueAsBuffer(r),this.db.get(i,r,function(o,a){if(o)return/notfound/i.test(o)?o=new zv("Key not found in database ["+e+"]",o):o=new sn(o),Te(n,o,t);if(t){try{a=Oe.decodeValue(a,r)}catch(s){return t(new Gv(s))}t(null,a)}})};fe.prototype.put=function(e,r,t,n){var i=this,o,a;if(n=zn(t,n),e==null||r===null||r===void 0)return Te(this,new er("put() requires key and value arguments"),n);if(!this._isOpening()&&!this.isOpen())return Te(this,new er("Database is not open"),n);t=Kn(this,t),o=Oe.encodeKey(e,t),a=Oe.encodeValue(r,t),this.db.put(o,a,t,function(s){if(s)return Te(i,new er(s),n);i.emit("put",e,r),n&&n()})};fe.prototype.del=function(e,r,t){var n=this,i;if(t=zn(r,t),e==null)return Te(this,new er("del() requires a key argument"),t);if(!this._isOpening()&&!this.isOpen())return Te(this,new er("Database is not open"),t);r=Kn(this,r),i=Oe.encodeKey(e,r),this.db.del(i,r,function(o){if(o)return Te(n,new er(o),t);n.emit("del",e),t&&t()})};fe.prototype.batch=function(e,r,t){var n=this,i,o,a;if(!arguments.length)return new Zv(this);if(t=zn(r,t),!Array.isArray(e))return Te(this,new er("batch() requires an array argument"),t);if(!this._isOpening()&&!this.isOpen())return Te(this,new er("Database is not open"),t);r=Kn(this,r),i=r.keyEncoding,o=r.valueEncoding,a=e.map(function(s){if(s.type===void 0||s.key===void 0)return{};var f=s.keyEncoding||i,u=s.valueEncoding||s.encoding||o,c;return f!="utf8"&&f!="binary"||u!="utf8"&&u!="binary"?(c={type:s.type,key:Oe.encodeKey(s.key,r,s)},s.value!==void 0&&(c.value=Oe.encodeValue(s.value,r,s)),c):s}),this.db.batch(a,r,function(s){if(s)return Te(n,new er(s),t);n.emit("batch",e),t&&t()})};fe.prototype.approximateSize=function(e,r,t){var n=this,i,o;if(e==null||r===null||r===void 0||typeof t!="function")return Te(this,new sn("approximateSize() requires start, end and callback arguments"),t);if(i=Oe.encodeKey(e,this.options),o=Oe.encodeKey(r,this.options),!this._isOpening()&&!this.isOpen())return Te(this,new er("Database is not open"),t);this.db.approximateSize(i,o,function(a,s){if(a)return Te(n,new ku(a),t);t&&t(null,s)})};fe.prototype.readStream=fe.prototype.createReadStream=function(e){var r=this;return e=Wt(this.options,e),new Xv(e,this,function(t){return r.db.iterator(t)})};fe.prototype.keyStream=fe.prototype.createKeyStream=function(e){return this.createReadStream(Wt(e,{keys:!0,values:!1}))};fe.prototype.valueStream=fe.prototype.createValueStream=function(e){return this.createReadStream(Wt(e,{keys:!1,values:!0}))};fe.prototype.writeStream=fe.prototype.createWriteStream=function(e){return new Qv(Wt(e),this)};fe.prototype.toString=function(){return"LevelUP"};function $u(e){return function(r,t){Mu()[e](r,t||function(){})}}jt.exports=fe;jt.exports.copy=Oe.copy;jt.exports.destroy=$u("destroy");jt.exports.repair=$u("repair");var Du={},Iu={exports:{}},Pu=we,rm=Dn,Cn=ze.Buffer;we.ReadableState=Fu;var Nn=Ue.exports.EventEmitter;Nn.listenerCount||(Nn.listenerCount=function(e,r){return e.listeners(r).length});var Et=Ae(),Bu=J;Bu.inherits=oe.exports;var zr;Bu.inherits(we,Et);function Fu(e,r){e=e||{};var t=e.highWaterMark;this.highWaterMark=t||t===0?t:16*1024,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(zr||(zr=pr().StringDecoder),this.decoder=new zr(e.encoding),this.encoding=e.encoding)}function we(e){if(!(this instanceof we))return new we(e);this._readableState=new Fu(e),this.readable=!0,Et.call(this)}we.prototype.push=function(e,r){var t=this._readableState;return typeof e=="string"&&!t.objectMode&&(r=r||t.defaultEncoding,r!==t.encoding&&(e=new Cn(e,r),r="")),Lu(this,t,e,r,!1)};we.prototype.unshift=function(e){var r=this._readableState;return Lu(this,r,e,"",!0)};function Lu(e,r,t,n,i){var o=im(r,t);if(o)e.emit("error",o);else if(t==null)r.reading=!1,r.ended||om(e,r);else if(r.objectMode||t&&t.length>0)if(r.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(r.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else r.decoder&&!i&&!n&&(t=r.decoder.write(t)),r.length+=r.objectMode?1:t.length,i?r.buffer.unshift(t):(r.reading=!1,r.buffer.push(t)),r.needReadable&&Gn(e),am(e,r);else i||(r.reading=!1);return tm(r)}function tm(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}we.prototype.setEncoding=function(e){zr||(zr=pr().StringDecoder),this._readableState.decoder=new zr(e),this._readableState.encoding=e};var es=8388608;function nm(e){if(e>=es)e=es;else{e--;for(var r=1;r<32;r<<=1)e|=e>>r;e++}return e}function rs(e,r){return r.length===0&&r.ended?0:r.objectMode?e===0?0:1:e===null||isNaN(e)?r.flowing&&r.buffer.length?r.buffer[0].length:r.length:e<=0?0:(e>r.highWaterMark&&(r.highWaterMark=nm(e)),e>r.length?r.ended?r.length:(r.needReadable=!0,0):e)}we.prototype.read=function(e){var r=this._readableState;r.calledRead=!0;var t=e,n;if((typeof e!="number"||e>0)&&(r.emittedReadable=!1),e===0&&r.needReadable&&(r.length>=r.highWaterMark||r.ended))return Gn(this),null;if(e=rs(e,r),e===0&&r.ended)return n=null,r.length>0&&r.decoder&&(n=ao(e,r),r.length-=n.length),r.length===0&&so(this),n;var i=r.needReadable;return r.length-e<=r.highWaterMark&&(i=!0),(r.ended||r.reading)&&(i=!1),i&&(r.reading=!0,r.sync=!0,r.length===0&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1),i&&!r.reading&&(e=rs(t,r)),e>0?n=ao(e,r):n=null,n===null&&(r.needReadable=!0,e=0),r.length-=e,r.length===0&&!r.ended&&(r.needReadable=!0),r.ended&&!r.endEmitted&&r.length===0&&so(this),n};function im(e,r){var t=null;return!Cn.isBuffer(r)&&typeof r!="string"&&r!==null&&r!==void 0&&!e.objectMode&&(t=new TypeError("Invalid non-string/buffer chunk")),t}function om(e,r){if(r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&(r.buffer.push(t),r.length+=r.objectMode?1:t.length)}r.ended=!0,r.length>0?Gn(e):so(e)}function Gn(e){var r=e._readableState;r.needReadable=!1,!r.emittedReadable&&(r.emittedReadable=!0,r.sync?process.nextTick(function(){ts(e)}):ts(e))}function ts(e){e.emit("readable")}function am(e,r){r.readingMore||(r.readingMore=!0,process.nextTick(function(){sm(e,r)}))}function sm(e,r){for(var t=r.length;!r.reading&&!r.flowing&&!r.ended&&r.length<r.highWaterMark&&(e.read(0),t!==r.length);)t=r.length;r.readingMore=!1}we.prototype._read=function(e){this.emit("error",new Error("not implemented"))};we.prototype.pipe=function(e,r){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1;var i=(!r||r.end!==!1)&&e!==process.stdout&&e!==process.stderr,o=i?s:u;n.endEmitted?process.nextTick(o):t.once("end",o),e.on("unpipe",a);function a(d){d===t&&u()}function s(){e.end()}var f=fm(t);e.on("drain",f);function u(){e.removeListener("close",l),e.removeListener("finish",p),e.removeListener("drain",f),e.removeListener("error",c),e.removeListener("unpipe",a),t.removeListener("end",s),t.removeListener("end",u),(!e._writableState||e._writableState.needDrain)&&f()}function c(d){h(),e.removeListener("error",c),Nn.listenerCount(e,"error")===0&&e.emit("error",d)}!e._events||!e._events.error?e.on("error",c):rm(e._events.error)?e._events.error.unshift(c):e._events.error=[c,e._events.error];function l(){e.removeListener("finish",p),h()}e.once("close",l);function p(){e.removeListener("close",l),h()}e.once("finish",p);function h(){t.unpipe(e)}return e.emit("pipe",t),n.flowing||(this.on("readable",oo),n.flowing=!0,process.nextTick(function(){Uo(t)})),e};function fm(e){return function(){var r=e._readableState;r.awaitDrain--,r.awaitDrain===0&&Uo(e)}}function Uo(e){var r=e._readableState,t;r.awaitDrain=0;function n(i,o,a){var s=i.write(t);s===!1&&r.awaitDrain++}for(;r.pipesCount&&(t=e.read())!==null;)if(r.pipesCount===1?n(r.pipes):ju(r.pipes,n),e.emit("data",t),r.awaitDrain>0)return;if(r.pipesCount===0){r.flowing=!1,Nn.listenerCount(e,"data")>0&&Jn(e);return}r.ranOut=!0}function oo(){this._readableState.ranOut&&(this._readableState.ranOut=!1,Uo(this))}we.prototype.unpipe=function(e){var r=this._readableState;if(r.pipesCount===0)return this;if(r.pipesCount===1)return e&&e!==r.pipes?this:(e||(e=r.pipes),r.pipes=null,r.pipesCount=0,this.removeListener("readable",oo),r.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var t=r.pipes,n=r.pipesCount;r.pipes=null,r.pipesCount=0,this.removeListener("readable",oo),r.flowing=!1;for(var i=0;i<n;i++)t[i].emit("unpipe",this);return this}var i=um(r.pipes,e);return i===-1?this:(r.pipes.splice(i,1),r.pipesCount-=1,r.pipesCount===1&&(r.pipes=r.pipes[0]),e.emit("unpipe",this),this)};we.prototype.on=function(e,r){var t=Et.prototype.on.call(this,e,r);if(e==="data"&&!this._readableState.flowing&&Jn(this),e==="readable"&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&Gn(this):this.read(0))}return t};we.prototype.addListener=we.prototype.on;we.prototype.resume=function(){Jn(this),this.read(0),this.emit("resume")};we.prototype.pause=function(){Jn(this,!0),this.emit("pause")};function Jn(e,r){var t=e._readableState;if(t.flowing)throw new Error("Cannot switch to old mode now.");var n=r||!1,i=!1;e.readable=!0,e.pipe=Et.prototype.pipe,e.on=e.addListener=Et.prototype.on,e.on("readable",function(){i=!0;for(var o;!n&&(o=e.read())!==null;)e.emit("data",o);o===null&&(i=!1,e._readableState.needReadable=!0)}),e.pause=function(){n=!0,this.emit("pause")},e.resume=function(){n=!1,i?process.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}we.prototype.wrap=function(e){var r=this._readableState,t=!1,n=this;e.on("end",function(){if(r.decoder&&!r.ended){var a=r.decoder.end();a&&a.length&&n.push(a)}n.push(null)}),e.on("data",function(a){if(r.decoder&&(a=r.decoder.write(a)),!(r.objectMode&&a==null)&&!(!r.objectMode&&(!a||!a.length))){var s=n.push(a);s||(t=!0,e.pause())}});for(var i in e)typeof e[i]=="function"&&typeof this[i]>"u"&&(this[i]=function(a){return function(){return e[a].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return ju(o,function(a){e.on(a,n.emit.bind(n,a))}),n._read=function(a){t&&(t=!1,e.resume())},n};we._fromList=ao;function ao(e,r){var t=r.buffer,n=r.length,i=!!r.decoder,o=!!r.objectMode,a;if(t.length===0)return null;if(n===0)a=null;else if(o)a=t.shift();else if(!e||e>=n)i?a=t.join(""):a=Cn.concat(t,n),t.length=0;else if(e<t[0].length){var s=t[0];a=s.slice(0,e),t[0]=s.slice(e)}else if(e===t[0].length)a=t.shift();else{i?a="":a=new Cn(e);for(var f=0,u=0,c=t.length;u<c&&f<e;u++){var s=t[0],l=Math.min(e-f,s.length);i?a+=s.slice(0,l):s.copy(a,f,0,l),l<s.length?t[0]=s.slice(l):t.shift(),f+=l}}return a}function so(e){var r=e._readableState;if(r.length>0)throw new Error("endReadable called on non-empty stream");!r.endEmitted&&r.calledRead&&(r.ended=!0,process.nextTick(function(){!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function ju(e,r){for(var t=0,n=e.length;t<n;t++)r(e[t],t)}function um(e,r){for(var t=0,n=e.length;t<n;t++)if(e[t]===r)return t;return-1}var mi,ns;function Xn(){if(ns)return mi;ns=1,mi=i;var e=Object.keys||function(s){var f=[];for(var u in s)f.push(u);return f},r=J;r.inherits=oe.exports;var t=Pu,n=Wo();r.inherits(i,t),a(e(n.prototype),function(s){i.prototype[s]||(i.prototype[s]=n.prototype[s])});function i(s){if(!(this instanceof i))return new i(s);t.call(this,s),n.call(this,s),s&&s.readable===!1&&(this.readable=!1),s&&s.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,s&&s.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",o)}function o(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}function a(s,f){for(var u=0,c=s.length;u<c;u++)f(s[u],u)}return mi}var yi,is;function Wo(){if(is)return yi;is=1,yi=o;var e=ze.Buffer;o.WritableState=i;var r=J;r.inherits=oe.exports;var t=Ae();r.inherits(o,t);function n(b,g,m){this.chunk=b,this.encoding=g,this.callback=m}function i(b,g){b=b||{};var m=b.highWaterMark;this.highWaterMark=m||m===0?m:16*1024,this.objectMode=!!b.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var S=b.decodeStrings===!1;this.decodeStrings=!S,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(N){h(g,N)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(b){var g=Xn();if(!(this instanceof o)&&!(this instanceof g))return new o(b);this._writableState=new i(b,this),this.writable=!0,t.call(this)}o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function a(b,g,m){var S=new Error("write after end");b.emit("error",S),process.nextTick(function(){m(S)})}function s(b,g,m,S){var N=!0;if(!e.isBuffer(m)&&typeof m!="string"&&m!==null&&m!==void 0&&!g.objectMode){var B=new TypeError("Invalid non-string/buffer chunk");b.emit("error",B),process.nextTick(function(){S(B)}),N=!1}return N}o.prototype.write=function(b,g,m){var S=this._writableState,N=!1;return typeof g=="function"&&(m=g,g=null),e.isBuffer(b)?g="buffer":g||(g=S.defaultEncoding),typeof m!="function"&&(m=function(){}),S.ended?a(this,S,m):s(this,S,b,m)&&(N=u(this,S,b,g,m)),N};function f(b,g,m){return!b.objectMode&&b.decodeStrings!==!1&&typeof g=="string"&&(g=new e(g,m)),g}function u(b,g,m,S,N){m=f(g,m,S),e.isBuffer(m)&&(S="buffer");var B=g.objectMode?1:m.length;g.length+=B;var U=g.length<g.highWaterMark;return U||(g.needDrain=!0),g.writing?g.buffer.push(new n(m,S,N)):c(b,g,B,m,S,N),U}function c(b,g,m,S,N,B){g.writelen=m,g.writecb=B,g.writing=!0,g.sync=!0,b._write(S,N,g.onwrite),g.sync=!1}function l(b,g,m,S,N){m?process.nextTick(function(){N(S)}):N(S),b._writableState.errorEmitted=!0,b.emit("error",S)}function p(b){b.writing=!1,b.writecb=null,b.length-=b.writelen,b.writelen=0}function h(b,g){var m=b._writableState,S=m.sync,N=m.writecb;if(p(m),g)l(b,m,S,g,N);else{var B=y(b,m);!B&&!m.bufferProcessing&&m.buffer.length&&w(b,m),S?process.nextTick(function(){d(b,m,B,N)}):d(b,m,B,N)}}function d(b,g,m,S){m||v(b,g),S(),m&&_(b,g)}function v(b,g){g.length===0&&g.needDrain&&(g.needDrain=!1,b.emit("drain"))}function w(b,g){g.bufferProcessing=!0;for(var m=0;m<g.buffer.length;m++){var S=g.buffer[m],N=S.chunk,B=S.encoding,U=S.callback,Q=g.objectMode?1:N.length;if(c(b,g,Q,N,B,U),g.writing){m++;break}}g.bufferProcessing=!1,m<g.buffer.length?g.buffer=g.buffer.slice(m):g.buffer.length=0}o.prototype._write=function(b,g,m){m(new Error("not implemented"))},o.prototype.end=function(b,g,m){var S=this._writableState;typeof b=="function"?(m=b,b=null,g=null):typeof g=="function"&&(m=g,g=null),typeof b<"u"&&b!==null&&this.write(b,g),!S.ending&&!S.finished&&C(this,S,m)};function y(b,g){return g.ending&&g.length===0&&!g.finished&&!g.writing}function _(b,g){var m=y(b,g);return m&&(g.finished=!0,b.emit("finish")),m}function C(b,g,m){g.ending=!0,_(b,g),m&&(g.finished?process.nextTick(m):b.once("finish",m)),g.ended=!0}return yi}(function(e){e.exports=Wo()})(Iu);var fo={exports:{}},Uu=br,qo=Xn(),Wu=J;Wu.inherits=oe.exports;Wu.inherits(br,qo);function lm(e,r){this.afterTransform=function(t,n){return cm(r,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function cm(e,r,t){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,t!=null&&e.push(t),i&&i(r);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function br(e){if(!(this instanceof br))return new br(e);qo.call(this,e),this._transformState=new lm(e,this);var r=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){typeof this._flush=="function"?this._flush(function(t){os(r,t)}):os(r)})}br.prototype.push=function(e,r){return this._transformState.needTransform=!1,qo.prototype.push.call(this,e,r)};br.prototype._transform=function(e,r,t){throw new Error("not implemented")};br.prototype._write=function(e,r,t){var n=this._transformState;if(n.writecb=t,n.writechunk=e,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};br.prototype._read=function(e){var r=this._transformState;r.writechunk!==null&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0};function os(e,r){if(r)return e.emit("error",r);var t=e._writableState;e._readableState;var n=e._transformState;if(t.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}var hm=St,qu=Uu,Hu=J;Hu.inherits=oe.exports;Hu.inherits(St,qu);function St(e){if(!(this instanceof St))return new St(e);qu.call(this,e)}St.prototype._transform=function(e,r,t){t(null,e)};(function(e,r){var t=Ae();r=e.exports=Pu,r.Stream=t,r.Readable=r,r.Writable=Wo(),r.Duplex=Xn(),r.Transform=Uu,r.PassThrough=hm,!process.browser&&process.env.READABLE_STREAM==="disable"&&(e.exports=Ae())})(fo,fo.exports);var Vu={exports:{}};(function(e){e.exports=Xn()})(Vu);(function(e){var r=Iu.exports,t=fo.exports,n=Vu.exports,i=new Buffer(0),o=function(){},a=function(u){return typeof u=="function"?u:function(c){c(null,u)}},s=function(u,c){var l=!1,p=!1;return u._read=function(){l=!0},u.destroy=function(){p=!0},c(function(h,d){if(h)return u.emit("error",h);var v=function(){for(var w;(w=d.read())!==null;)l=!1,u.push(w)};if(d.on("readable",function(){l&&v()}),d.on("end",function(){v(),u.push(null)}),d.on("error",function(w){u.emit("error",w)}),d.on("close",function(){v(),process.nextTick(function(){u.emit("close")})}),u._read=function(){l=!0,v()},u.destroy=function(){p||(p=!0,d.destroy&&d.destroy())},p){p=!1,u.destroy();return}l&&v()}),u},f=function(u,c){var l=o,p=!1;return u._write=function(h,d,v){l=v},u.destroy=function(){p=!0},u.write(i),c(function(h,d){if(h)return u.emit("error",h);d.on("close",function(){u.emit("close")}),d.on("error",function(w){u.emit("error",w)}),u._write=function(w,y,_){if(w===i)return _();d.write(w,y,_)};var v=u.emit;if(d.on("finish",function(){v.call(u,"finish")}),u.destroy=function(){p||(p=!0,d.destroy&&d.destroy())},u.emit=function(w){if(w!=="finish")return v.apply(u,arguments);d.end()},p){p=!1,u.destroy();return}l()}),u};e.readable=function(u,c){return arguments.length===1?e.readable(null,u):(u||(u={}),s(new t(u),a(c)))},e.writable=function(u,c){return arguments.length===1?e.writable(null,u):(u||(u={}),f(new r(u),a(c)))},e.duplex=function(u,c,l){if(arguments.length===2)return e.duplex(null,u,c);u||(u={});var p=new n(u);return f(p,a(c)),s(p,a(l)),p}})(Du);var Yu={exports:{}},Ho={};(function(e){var r=e.range=function(n){return n==null?{}:typeof r=="string"?{min:r,max:r+"\xFF"}:n};e.prefix=function(n,i,o){n=e.range(n);var a={};return o=o||"\xFF",n instanceof RegExp||typeof n=="function"?(a.min=i,a.max=i+o,a.inner=function(s){var f=s.substring(i.length);return n.test?n.test(f):n(f)}):typeof n=="object"&&(a.min=i+(n.min||n.start||""),a.max=i+(n.max||n.end||o||"~"),a.reverse=!!n.reverse),a};var t=e.checker=function(n){if(n||(n={}),typeof n=="string")return function(i){return i.indexOf(n)==0};if(n instanceof RegExp)return function(i){return n.test(i)};if(typeof n=="object")return function(i){var o=n.min||n.start,a=n.max||n.end;return i=String(i),(!o||i>=o)&&(!a||i<=a)&&(!n.inner||(n.inner.test?n.inner.test(i):n.inner(i)))};if(typeof n=="function")return n};e.satisfies=function(n,i){return t(i)(n)}})(Ho);var Ku={exports:{}};(function(e){function r(i){return Object.prototype.toString.call(i)}var t={isArray:function(i){return Array.isArray(i)||typeof i=="object"&&r(i)==="[object Array]"},isDate:function(i){return typeof i=="object"&&r(i)==="[object Date]"},isRegExp:function(i){return typeof i=="object"&&r(i)==="[object RegExp]"},getRegExpFlags:function(i){var o="";return i.global&&(o+="g"),i.ignoreCase&&(o+="i"),i.multiline&&(o+="m"),o}};e.exports=n;function n(i,o,a,s){var f=[],u=[],c=typeof Buffer<"u";typeof o>"u"&&(o=!0),typeof a>"u"&&(a=1/0);function l(p,h){if(p===null)return null;if(h==0)return p;var d,v;if(typeof p!="object")return p;if(t.isArray(p))d=[];else if(t.isRegExp(p))d=new RegExp(p.source,t.getRegExpFlags(p)),p.lastIndex&&(d.lastIndex=p.lastIndex);else if(t.isDate(p))d=new Date(p.getTime());else{if(c&&Buffer.isBuffer(p))return d=new Buffer(p.length),p.copy(d),d;typeof s>"u"?(v=Object.getPrototypeOf(p),d=Object.create(v)):(d=Object.create(s),v=s)}if(o){var w=f.indexOf(p);if(w!=-1)return u[w];f.push(p),u.push(d)}for(var y in p){var _;v&&(_=Object.getOwnPropertyDescriptor(v,y)),!(_&&_.set==null)&&(d[y]=l(p[y],h-1))}return d}return l(i,a)}n.clonePrototype=function(i){if(i===null)return null;var o=function(){};return o.prototype=i,new o}})(Ku);var dm=Ku.exports,zu=function(r){r=dm(r);var t=r.reverse,n=r.max||r.end,i=r.min||r.start,o=[i,n];return i!=null&&n!=null&&o.sort(),t&&(o=o.reverse()),r.start=o[0],r.end=o[1],delete r.min,delete r.max,r},bi={exports:{}},wi={exports:{}},as;function pm(){if(as)return wi.exports;as=1;/**!
 * is
 * the definitive JavaScript type testing library
 * 
 * @copyright 2013 Enrico Marino
 * @license MIT
 */var e=Object.prototype,r=e.hasOwnProperty,t=e.toString,n=function(a){return a!==a},i={boolean:1,number:1,string:1,undefined:1},o=wi.exports={};return o.a=o.type=function(a,s){return typeof a===s},o.defined=function(a){return a!==void 0},o.empty=function(a){var s=t.call(a),f;if(s==="[object Array]"||s==="[object Arguments]")return a.length===0;if(s==="[object Object]"){for(f in a)if(r.call(a,f))return!1;return!0}return s==="[object String]"?a==="":!1},o.equal=function(a,s){var f=t.call(a),u;if(f!==t.call(s))return!1;if(f==="[object Object]"){for(u in a)if(!o.equal(a[u],s[u]))return!1;return!0}if(f==="[object Array]"){if(u=a.length,u!==s.length)return!1;for(;--u;)if(!o.equal(a[u],s[u]))return!1;return!0}return f==="[object Function]"?a.prototype===s.prototype:f==="[object Date]"?a.getTime()===s.getTime():a===s},o.hosted=function(a,s){var f=typeof s[a];return f==="object"?!!s[a]:!i[f]},o.instance=o.instanceof=function(a,s){return a instanceof s},o.null=function(a){return a===null},o.undefined=function(a){return a===void 0},o.arguments=function(a){var s=t.call(a)==="[object Arguments]",f=!o.array(a)&&o.arraylike(a)&&o.object(a)&&o.fn(a.callee);return s||f},o.array=function(a){return t.call(a)==="[object Array]"},o.arguments.empty=function(a){return o.arguments(a)&&a.length===0},o.array.empty=function(a){return o.array(a)&&a.length===0},o.arraylike=function(a){return!!a&&!o.boolean(a)&&r.call(a,"length")&&isFinite(a.length)&&o.number(a.length)&&a.length>=0},o.boolean=function(a){return t.call(a)==="[object Boolean]"},o.false=function(a){return o.boolean(a)&&(a===!1||a.valueOf()===!1)},o.true=function(a){return o.boolean(a)&&(a===!0||a.valueOf()===!0)},o.date=function(a){return t.call(a)==="[object Date]"},o.element=function(a){return a!==void 0&&typeof HTMLElement<"u"&&a instanceof HTMLElement&&a.nodeType===1},o.error=function(a){return t.call(a)==="[object Error]"},o.fn=o.function=function(a){var s=typeof window<"u"&&a===window.alert;return s||t.call(a)==="[object Function]"},o.number=function(a){return t.call(a)==="[object Number]"},o.infinite=function(a){return a===1/0||a===-1/0},o.decimal=function(a){return o.number(a)&&!n(a)&&!o.infinite(a)&&a%1!==0},o.divisibleBy=function(a,s){var f=o.infinite(a),u=o.infinite(s),c=o.number(a)&&!n(a)&&o.number(s)&&!n(s)&&s!==0;return f||u||c&&a%s===0},o.int=function(a){return o.number(a)&&!n(a)&&a%1===0},o.maximum=function(a,s){if(n(a))throw new TypeError("NaN is not a valid value");if(!o.arraylike(s))throw new TypeError("second argument must be array-like");for(var f=s.length;--f>=0;)if(a<s[f])return!1;return!0},o.minimum=function(a,s){if(n(a))throw new TypeError("NaN is not a valid value");if(!o.arraylike(s))throw new TypeError("second argument must be array-like");for(var f=s.length;--f>=0;)if(a>s[f])return!1;return!0},o.nan=function(a){return!o.number(a)||a!==a},o.even=function(a){return o.infinite(a)||o.number(a)&&a===a&&a%2===0},o.odd=function(a){return o.infinite(a)||o.number(a)&&a===a&&a%2!==0},o.ge=function(a,s){if(n(a)||n(s))throw new TypeError("NaN is not a valid value");return!o.infinite(a)&&!o.infinite(s)&&a>=s},o.gt=function(a,s){if(n(a)||n(s))throw new TypeError("NaN is not a valid value");return!o.infinite(a)&&!o.infinite(s)&&a>s},o.le=function(a,s){if(n(a)||n(s))throw new TypeError("NaN is not a valid value");return!o.infinite(a)&&!o.infinite(s)&&a<=s},o.lt=function(a,s){if(n(a)||n(s))throw new TypeError("NaN is not a valid value");return!o.infinite(a)&&!o.infinite(s)&&a<s},o.within=function(a,s,f){if(n(a)||n(s)||n(f))throw new TypeError("NaN is not a valid value");if(!o.number(a)||!o.number(s)||!o.number(f))throw new TypeError("all arguments must be numbers");var u=o.infinite(a)||o.infinite(s)||o.infinite(f);return u||a>=s&&a<=f},o.object=function(a){return a&&t.call(a)==="[object Object]"},o.hash=function(a){return o.object(a)&&a.constructor===Object&&!a.nodeType&&!a.setInterval},o.regexp=function(a){return t.call(a)==="[object RegExp]"},o.string=function(a){return t.call(a)==="[object String]"},wi.exports}var _i,ss;function gm(){if(ss)return _i;ss=1;var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString;return _i=function(n,i,o){if(r.call(i)!=="[object Function]")throw new TypeError("iterator must be a function");var a=n.length;if(a===+a)for(var s=0;s<a;s++)i.call(o,n[s],s,n);else for(var f in n)e.call(n,f)&&i.call(o,n[f],f,n)},_i}var fs;function vm(){return fs||(fs=1,function(){var e=Object.prototype.hasOwnProperty,r=pm(),t=gm(),n=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o;o=function(s){if(!r.object(s)&&!r.array(s))throw new TypeError("Object.keys called on a non-object");var f,u=[];for(f in s)e.call(s,f)&&u.push(f);return n&&t(i,function(c){e.call(s,c)&&u.push(c)}),u},bi.exports=o}()),bi.exports}var mm=Object.keys||vm(),ym=bm;function bm(e){return e!==null&&(typeof e=="object"||typeof e=="function")}var wm=mm,_m=ym,Em=Sm;function Sm(){for(var e={},r=0;r<arguments.length;r++){var t=arguments[r];if(!!_m(t))for(var n=wm(t),i=0;i<n.length;i++){var o=n[i];e[o]=t[o]}}return e}function us(e,r,t,n){var i={type:e,key:r,value:t,options:n};return n&&n.prefix&&(i.prefix=n.prefix,delete n.prefix),this._operations.push(i),this}function Gu(e){this._operations=[],this._sdb=e,this.put=us.bind(this,"put"),this.del=us.bind(this,"del")}var Ju=Gu.prototype;Ju.clear=function(){this._operations=[]};Ju.write=function(e){this._sdb.batch(this._operations,e)};var Xu=Gu,xm=Ue.exports.EventEmitter,Rm=je.inherits,Vo=Ho,Qu=zu,Zu=Em,Am=Xu;Rm(Xr,xm);function Xr(e,r,t){if(typeof t=="string"&&(console.error("db.sublevel(name, seperator<string>) is depreciated"),console.error("use db.sublevel(name, {sep: separator})) if you must"),t={sep:t}),!(this instanceof Xr))return new Xr(e,r,t);if(!e)throw new Error("must provide db");if(!r)throw new Error("must provide prefix");t=t||{},t.sep=t.sep||"\xFF",this._parent=e,this._options=t,this.options=t,this._prefix=r,this._root=Ir(this),e.sublevels[r]=this,this.sublevels={},this.methods={};var n=this;this.hooks={pre:function(){return n.pre.apply(n,arguments)},post:function(){return n.post.apply(n,arguments)}}}var he=Xr.prototype;he._key=function(e){var r=this._options.sep;return r+this._prefix+r+e};he._getOptsAndCb=function(e,r){return typeof e=="function"&&(r=e,e={}),{opts:Zu(e,this._options),cb:r}};he.sublevel=function(e,r){return this.sublevels[e]?this.sublevels[e]:new Xr(this,e,r||this._options)};he.put=function(e,r,t,n){var i=this._getOptsAndCb(t,n);this._root.put(this.prefix(e),r,i.opts,i.cb)};he.get=function(e,r,t){var n=this._getOptsAndCb(r,t);this._root.get(this.prefix(e),n.opts,n.cb)};he.del=function(e,r,t){var n=this._getOptsAndCb(r,t);this._root.del(this.prefix(e),n.opts,n.cb)};he.batch=function(e,r,t){if(!Array.isArray(e))return new Am(this);var n=this,i=this._getOptsAndCb(r,t);e.forEach(function(o){typeof o.prefix=="string"?o.key=o.prefix+o.key:o.key=(o.prefix||n).prefix(o.key),o.prefix&&(o.prefix=null)}),this._root.batch(e,i.opts,i.cb)};he._getKeyEncoding=function(){if(this.options.keyEncoding)return this.options.keyEncoding;if(this._parent&&this._parent._getKeyEncoding)return this._parent._getKeyEncoding()};he._getValueEncoding=function(){if(this.options.valueEncoding)return this.options.valueEncoding;if(this._parent&&this._parent._getValueEncoding)return this._parent._getValueEncoding()};he.prefix=function(e){var r=this._options.sep;return this._parent.prefix()+r+this._prefix+r+(e||"")};he.keyStream=he.createKeyStream=function(e){return e=e||{},e.keys=!0,e.values=!1,this.createReadStream(e)};he.valueStream=he.createValueStream=function(e){return e=e||{},e.keys=!1,e.values=!0,e.keys=!1,this.createReadStream(e)};function Om(e,r){["valueEncoding","encoding","keyEncoding","reverse","values","keys","limit","fillCache"].forEach(function(t){r.hasOwnProperty(t)&&(e[t]=r[t])})}he.readStream=he.createReadStream=function(e){e=e||{};var r=Ir(this),t=this.prefix(),n=Vo.prefix(e,t);Om(n,Zu(e,this._options));var i=r.createReadStream(n);if(n.values===!1){var o=i.read;if(o)i.read=function(s){var f=o.call(this,s);return f&&(f=f.substring(t.length)),f};else{var a=i.emit;i.emit=function(s,f){s==="data"?a.call(this,"data",f.substring(t.length)):a.call(this,s,f)}}return i}else{if(n.keys===!1)return i;var o=i.read;return o?i.read=function(f){var u=o.call(this,f);return u&&(u.key=u.key.substring(t.length)),u}:i.on("data",function(f){f.key=f.key.substring(t.length)}),i}};he.writeStream=he.createWriteStream=function(){var e=Ir(this),r=this.prefix(),t=e.createWriteStream.apply(e,arguments),n=t.write,i=this._options.encoding,o=this._options.valueEncoding,a=this._options.keyEncoding,s=!i&&!o&&!a;return t.write=s?function(f){return f.key=r+f.key,n.call(t,f)}:function(f){return f.key=r+f.key,i&&typeof f.encoding>"u"&&(f.encoding=i),o&&typeof f.valueEncoding>"u"&&(f.valueEncoding=o),a&&typeof f.keyEncoding>"u"&&(f.keyEncoding=a),n.call(t,f)},t};he.approximateSize=function(){var e=Ir(db);return e.approximateSize.apply(e,arguments)};function Ir(e){return e._parent?Ir(e._parent):e}he.pre=function(e,r){r||(r=e,e=null),e=Vo.prefix(e,this.prefix(),this._options.sep);var t=Ir(this._parent),n=this.prefix();return t.hooks.pre(Qu(e),function(i,o,a){r({key:i.key.substring(n.length),value:i.value,type:i.type},function(s,f){o(s,s.prefix?f:f||n)},a)})};he.post=function(e,r){r||(r=e,e=null);var t=Ir(this._parent),n=this.prefix();return e=Vo.prefix(e,n,this._options.sep),t.hooks.post(Qu(e),function(i){r({key:i.key.substring(n.length),value:i.value,type:i.type})})};Yu.exports=Xr;var ls=Ho,Tm=function(e){if(e.hooks)return;var r=[],t=[];function n(p){return p&&(typeof p=="string"?p:typeof p.prefix=="string"?p.prefix:typeof p.prefix=="function"?p.prefix():"")}function i(p){if(p&&p._getKeyEncoding)return p._getKeyEncoding(p)}function o(p){if(p&&p._getValueEncoding)return p._getValueEncoding(p)}function a(p,h){return function(){var d=p.indexOf(h);return~d?(p.splice(d,1),!0):!1}}e.hooks={post:function(p,h){h||(h=p,p="");var d={test:ls.checker(p),hook:h};return r.push(d),a(r,d)},pre:function(p,h){h||(h=p,p="");var d={test:ls.checker(p),hook:h,safe:p.safe!==!1};return t.push(d),a(t,d)},posthooks:r,prehooks:t};function s(p){p&&p.type&&r.forEach(function(h){h.test(p.key)&&h.hook(p)})}e.on("put",function(p,h){s({type:"put",key:p,value:h})}),e.on("del",function(p,h){s({type:"del",key:p,value:h})}),e.on("batch",function(h){h.forEach(s)});var f=e.put,u=e.del,c=e.batch;function l(p,h,d,v){try{h.forEach(function y(_,C){t.forEach(function(b){if(b.test(String(_.key))){var g={add:function(m,S){if(typeof m>"u")return this;if(m===!1)return delete h[C];var N=n(m.prefix)||n(S)||b.prefix||"";if(N&&(m.prefix=N),m.key=N+m.key,b.safe&&b.test(String(m.key)))throw new Error("prehook cannot insert into own range");var B=m.keyEncoding||i(m.prefix),U=m.valueEncoding||o(m.prefix);return B&&(m.keyEncoding=B),U&&(m.valueEncoding=U),h.push(m),y(m,h.length-1),this},put:function(m,S){return typeof m=="object"&&(m.type="put"),this.add(m,S)},del:function(m,S){return typeof m=="object"&&(m.type="del"),this.add(m,S)},veto:function(){return this.add(!1)}};b.hook.call(g,_,g.add,h)}})})}catch(y){return(v||d)(y)}if(h=h.filter(function(y){return y&&y.type}),h.length==1&&!p){var w=h[0];return w.type=="put"?f.call(e,w.key,w.value,d,v):u.call(e,w.key,d,v)}return c.call(e,h,d,v)}e.put=function(p,h,d,v){var w=[{key:p,value:h,type:"put"}];return l(!1,w,d,v)},e.del=function(p,h,d){var v=[{key:p,type:"del"}];return l(!1,v,h,d)},e.batch=function(p,h,d){return l(!0,p,h,d)}};Ue.exports.EventEmitter;process.nextTick;var Cm=Yu.exports,Nm=Xu,km=zu,Mm=Tm,$m=function(e,r){function t(){}t.prototype=e;var n=new t;if(n.sublevel)return n;r=r||{};var i=r.sep=r.sep||"\xFF";n._options=r,Mm(n),n.sublevels={},n.sublevel=function(s,f){return n.sublevels[s]?n.sublevels[s]:new Cm(n,s,f||this._options)},n.methods={},n.prefix=function(s){return""+(s||"")},n.pre=function(s,f){return f||(f=s,s={max:i}),n.hooks.pre(s,f)},n.post=function(s,f){return f||(f=s,s={max:i}),n.hooks.post(s,f)};function o(s){return function(f){return f=f||{},f=km(f),f.reverse?f.start=f.start||i:f.end=f.end||i,s.call(n,f)}}n.readStream=n.createReadStream=o(n.createReadStream),n.keyStream=n.createKeyStream=o(n.createKeyStream),n.valuesStream=n.createValueStream=o(n.createValueStream);var a=n.batch;return n.batch=function(s,f,u){if(!Array.isArray(s))return new Nm(n);s.forEach(function(c){c.prefix&&(typeof c.prefix.prefix=="function"?c.key=c.prefix.prefix(c.key):typeof c.prefix=="string"&&(c.key=c.prefix+c.key))}),a.call(n,s,f,u)},n},el={exports:{}},Ei,cs;function rl(){if(cs)return Ei;cs=1,Ei=f;var e=Dn,r=ze.Buffer;f.ReadableState=s;var t=Ue.exports.EventEmitter;t.listenerCount||(t.listenerCount=function(A,R){return A.listeners(R).length});var n=Ae(),i=J;i.inherits=oe.exports;var o,a=je;a&&a.debuglog?a=a.debuglog("stream"):a=function(){},i.inherits(f,n);function s(A,R){var D=Qr();A=A||{};var j=A.highWaterMark,z=A.objectMode?16:16*1024;this.highWaterMark=j||j===0?j:z,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!A.objectMode,R instanceof D&&(this.objectMode=this.objectMode||!!A.readableObjectMode),this.defaultEncoding=A.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,A.encoding&&(o||(o=pr().StringDecoder),this.decoder=new o(A.encoding),this.encoding=A.encoding)}function f(A){if(Qr(),!(this instanceof f))return new f(A);this._readableState=new s(A,this),this.readable=!0,n.call(this)}f.prototype.push=function(A,R){var D=this._readableState;return i.isString(A)&&!D.objectMode&&(R=R||D.defaultEncoding,R!==D.encoding&&(A=new r(A,R),R="")),u(this,D,A,R,!1)},f.prototype.unshift=function(A){var R=this._readableState;return u(this,R,A,"",!0)};function u(A,R,D,j,z){var k=d(R,D);if(k)A.emit("error",k);else if(i.isNullOrUndefined(D))R.reading=!1,R.ended||v(A,R);else if(R.objectMode||D&&D.length>0)if(R.ended&&!z){var O=new Error("stream.push() after EOF");A.emit("error",O)}else if(R.endEmitted&&z){var O=new Error("stream.unshift() after end event");A.emit("error",O)}else R.decoder&&!z&&!j&&(D=R.decoder.write(D)),z||(R.reading=!1),R.flowing&&R.length===0&&!R.sync?(A.emit("data",D),A.read(0)):(R.length+=R.objectMode?1:D.length,z?R.buffer.unshift(D):R.buffer.push(D),R.needReadable&&w(A)),_(A,R);else z||(R.reading=!1);return c(R)}function c(A){return!A.ended&&(A.needReadable||A.length<A.highWaterMark||A.length===0)}f.prototype.setEncoding=function(A){return o||(o=pr().StringDecoder),this._readableState.decoder=new o(A),this._readableState.encoding=A,this};var l=8388608;function p(A){if(A>=l)A=l;else{A--;for(var R=1;R<32;R<<=1)A|=A>>R;A++}return A}function h(A,R){return R.length===0&&R.ended?0:R.objectMode?A===0?0:1:isNaN(A)||i.isNull(A)?R.flowing&&R.buffer.length?R.buffer[0].length:R.length:A<=0?0:(A>R.highWaterMark&&(R.highWaterMark=p(A)),A>R.length?R.ended?R.length:(R.needReadable=!0,0):A)}f.prototype.read=function(A){a("read",A);var R=this._readableState,D=A;if((!i.isNumber(A)||A>0)&&(R.emittedReadable=!1),A===0&&R.needReadable&&(R.length>=R.highWaterMark||R.ended))return a("read: emitReadable",R.length,R.ended),R.length===0&&R.ended?B(this):w(this),null;if(A=h(A,R),A===0&&R.ended)return R.length===0&&B(this),null;var j=R.needReadable;a("need readable",j),(R.length===0||R.length-A<R.highWaterMark)&&(j=!0,a("length less than watermark",j)),(R.ended||R.reading)&&(j=!1,a("reading or ended",j)),j&&(a("do read"),R.reading=!0,R.sync=!0,R.length===0&&(R.needReadable=!0),this._read(R.highWaterMark),R.sync=!1),j&&!R.reading&&(A=h(D,R));var z;return A>0?z=N(A,R):z=null,i.isNull(z)&&(R.needReadable=!0,A=0),R.length-=A,R.length===0&&!R.ended&&(R.needReadable=!0),D!==A&&R.ended&&R.length===0&&B(this),i.isNull(z)||this.emit("data",z),z};function d(A,R){var D=null;return!i.isBuffer(R)&&!i.isString(R)&&!i.isNullOrUndefined(R)&&!A.objectMode&&(D=new TypeError("Invalid non-string/buffer chunk")),D}function v(A,R){if(R.decoder&&!R.ended){var D=R.decoder.end();D&&D.length&&(R.buffer.push(D),R.length+=R.objectMode?1:D.length)}R.ended=!0,w(A)}function w(A){var R=A._readableState;R.needReadable=!1,R.emittedReadable||(a("emitReadable",R.flowing),R.emittedReadable=!0,R.sync?process.nextTick(function(){y(A)}):y(A))}function y(A){a("emit readable"),A.emit("readable"),S(A)}function _(A,R){R.readingMore||(R.readingMore=!0,process.nextTick(function(){C(A,R)}))}function C(A,R){for(var D=R.length;!R.reading&&!R.flowing&&!R.ended&&R.length<R.highWaterMark&&(a("maybeReadMore read 0"),A.read(0),D!==R.length);)D=R.length;R.readingMore=!1}f.prototype._read=function(A){this.emit("error",new Error("not implemented"))},f.prototype.pipe=function(A,R){var D=this,j=this._readableState;switch(j.pipesCount){case 0:j.pipes=A;break;case 1:j.pipes=[j.pipes,A];break;default:j.pipes.push(A);break}j.pipesCount+=1,a("pipe count=%d opts=%j",j.pipesCount,R);var z=(!R||R.end!==!1)&&A!==process.stdout&&A!==process.stderr,k=z?I:L;j.endEmitted?process.nextTick(k):D.once("end",k),A.on("unpipe",O);function O(E){a("onunpipe"),E===D&&L()}function I(){a("onend"),A.end()}var T=b(D);A.on("drain",T);function L(){a("cleanup"),A.removeListener("close",X),A.removeListener("finish",Y),A.removeListener("drain",T),A.removeListener("error",V),A.removeListener("unpipe",O),D.removeListener("end",I),D.removeListener("end",L),D.removeListener("data",M),j.awaitDrain&&(!A._writableState||A._writableState.needDrain)&&T()}D.on("data",M);function M(E){a("ondata");var x=A.write(E);x===!1&&(a("false write response, pause",D._readableState.awaitDrain),D._readableState.awaitDrain++,D.pause())}function V(E){a("onerror",E),q(),A.removeListener("error",V),t.listenerCount(A,"error")===0&&A.emit("error",E)}!A._events||!A._events.error?A.on("error",V):e(A._events.error)?A._events.error.unshift(V):A._events.error=[V,A._events.error];function X(){A.removeListener("finish",Y),q()}A.once("close",X);function Y(){a("onfinish"),A.removeListener("close",X),q()}A.once("finish",Y);function q(){a("unpipe"),D.unpipe(A)}return A.emit("pipe",D),j.flowing||(a("pipe resume"),D.resume()),A};function b(A){return function(){var R=A._readableState;a("pipeOnDrain",R.awaitDrain),R.awaitDrain&&R.awaitDrain--,R.awaitDrain===0&&t.listenerCount(A,"data")&&(R.flowing=!0,S(A))}}f.prototype.unpipe=function(A){var R=this._readableState;if(R.pipesCount===0)return this;if(R.pipesCount===1)return A&&A!==R.pipes?this:(A||(A=R.pipes),R.pipes=null,R.pipesCount=0,R.flowing=!1,A&&A.emit("unpipe",this),this);if(!A){var D=R.pipes,j=R.pipesCount;R.pipes=null,R.pipesCount=0,R.flowing=!1;for(var z=0;z<j;z++)D[z].emit("unpipe",this);return this}var z=Q(R.pipes,A);return z===-1?this:(R.pipes.splice(z,1),R.pipesCount-=1,R.pipesCount===1&&(R.pipes=R.pipes[0]),A.emit("unpipe",this),this)},f.prototype.on=function(A,R){var D=n.prototype.on.call(this,A,R);if(A==="data"&&this._readableState.flowing!==!1&&this.resume(),A==="readable"&&this.readable){var j=this._readableState;if(!j.readableListening)if(j.readableListening=!0,j.emittedReadable=!1,j.needReadable=!0,j.reading)j.length&&w(this);else{var z=this;process.nextTick(function(){a("readable nexttick read 0"),z.read(0)})}}return D},f.prototype.addListener=f.prototype.on,f.prototype.resume=function(){var A=this._readableState;return A.flowing||(a("resume"),A.flowing=!0,A.reading||(a("resume read 0"),this.read(0)),g(this,A)),this};function g(A,R){R.resumeScheduled||(R.resumeScheduled=!0,process.nextTick(function(){m(A,R)}))}function m(A,R){R.resumeScheduled=!1,A.emit("resume"),S(A),R.flowing&&!R.reading&&A.read(0)}f.prototype.pause=function(){return a("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(a("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function S(A){var R=A._readableState;if(a("flow",R.flowing),R.flowing)do var D=A.read();while(D!==null&&R.flowing)}f.prototype.wrap=function(A){var R=this._readableState,D=!1,j=this;A.on("end",function(){if(a("wrapped end"),R.decoder&&!R.ended){var O=R.decoder.end();O&&O.length&&j.push(O)}j.push(null)}),A.on("data",function(O){if(a("wrapped data"),R.decoder&&(O=R.decoder.write(O)),!(!O||!R.objectMode&&!O.length)){var I=j.push(O);I||(D=!0,A.pause())}});for(var z in A)i.isFunction(A[z])&&i.isUndefined(this[z])&&(this[z]=function(O){return function(){return A[O].apply(A,arguments)}}(z));var k=["error","close","destroy","pause","resume"];return U(k,function(O){A.on(O,j.emit.bind(j,O))}),j._read=function(O){a("wrapped _read",O),D&&(D=!1,A.resume())},j},f._fromList=N;function N(A,R){var D=R.buffer,j=R.length,z=!!R.decoder,k=!!R.objectMode,O;if(D.length===0)return null;if(j===0)O=null;else if(k)O=D.shift();else if(!A||A>=j)z?O=D.join(""):O=r.concat(D,j),D.length=0;else if(A<D[0].length){var I=D[0];O=I.slice(0,A),D[0]=I.slice(A)}else if(A===D[0].length)O=D.shift();else{z?O="":O=new r(A);for(var T=0,L=0,M=D.length;L<M&&T<A;L++){var I=D[0],V=Math.min(A-T,I.length);z?O+=I.slice(0,V):I.copy(O,T,0,V),V<I.length?D[0]=I.slice(V):D.shift(),T+=V}}return O}function B(A){var R=A._readableState;if(R.length>0)throw new Error("endReadable called on non-empty stream");R.endEmitted||(R.ended=!0,process.nextTick(function(){!R.endEmitted&&R.length===0&&(R.endEmitted=!0,A.readable=!1,A.emit("end"))}))}function U(A,R){for(var D=0,j=A.length;D<j;D++)R(A[D],D)}function Q(A,R){for(var D=0,j=A.length;D<j;D++)if(A[D]===R)return D;return-1}return Ei}var Si,hs;function Qr(){if(hs)return Si;hs=1,Si=i;var e=Object.keys||function(s){var f=[];for(var u in s)f.push(u);return f},r=J;r.inherits=oe.exports;var t=rl(),n=Yo();r.inherits(i,t),a(e(n.prototype),function(s){i.prototype[s]||(i.prototype[s]=n.prototype[s])});function i(s){if(!(this instanceof i))return new i(s);t.call(this,s),n.call(this,s),s&&s.readable===!1&&(this.readable=!1),s&&s.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,s&&s.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",o)}function o(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}function a(s,f){for(var u=0,c=s.length;u<c;u++)f(s[u],u)}return Si}var xi,ds;function Yo(){if(ds)return xi;ds=1,xi=o;var e=ze.Buffer;o.WritableState=i;var r=J;r.inherits=oe.exports;var t=Ae();r.inherits(o,t);function n(g,m,S){this.chunk=g,this.encoding=m,this.callback=S}function i(g,m){var S=Qr();g=g||{};var N=g.highWaterMark,B=g.objectMode?16:16*1024;this.highWaterMark=N||N===0?N:B,this.objectMode=!!g.objectMode,m instanceof S&&(this.objectMode=this.objectMode||!!g.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var U=g.decodeStrings===!1;this.decodeStrings=!U,this.defaultEncoding=g.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Q){h(m,Q)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(g){var m=Qr();if(!(this instanceof o)&&!(this instanceof m))return new o(g);this._writableState=new i(g,this),this.writable=!0,t.call(this)}o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function a(g,m,S){var N=new Error("write after end");g.emit("error",N),process.nextTick(function(){S(N)})}function s(g,m,S,N){var B=!0;if(!r.isBuffer(S)&&!r.isString(S)&&!r.isNullOrUndefined(S)&&!m.objectMode){var U=new TypeError("Invalid non-string/buffer chunk");g.emit("error",U),process.nextTick(function(){N(U)}),B=!1}return B}o.prototype.write=function(g,m,S){var N=this._writableState,B=!1;return r.isFunction(m)&&(S=m,m=null),r.isBuffer(g)?m="buffer":m||(m=N.defaultEncoding),r.isFunction(S)||(S=function(){}),N.ended?a(this,N,S):s(this,N,g,S)&&(N.pendingcb++,B=u(this,N,g,m,S)),B},o.prototype.cork=function(){var g=this._writableState;g.corked++},o.prototype.uncork=function(){var g=this._writableState;g.corked&&(g.corked--,!g.writing&&!g.corked&&!g.finished&&!g.bufferProcessing&&g.buffer.length&&w(this,g))};function f(g,m,S){return!g.objectMode&&g.decodeStrings!==!1&&r.isString(m)&&(m=new e(m,S)),m}function u(g,m,S,N,B){S=f(m,S,N),r.isBuffer(S)&&(N="buffer");var U=m.objectMode?1:S.length;m.length+=U;var Q=m.length<m.highWaterMark;return Q||(m.needDrain=!0),m.writing||m.corked?m.buffer.push(new n(S,N,B)):c(g,m,!1,U,S,N,B),Q}function c(g,m,S,N,B,U,Q){m.writelen=N,m.writecb=Q,m.writing=!0,m.sync=!0,S?g._writev(B,m.onwrite):g._write(B,U,m.onwrite),m.sync=!1}function l(g,m,S,N,B){S?process.nextTick(function(){m.pendingcb--,B(N)}):(m.pendingcb--,B(N)),g._writableState.errorEmitted=!0,g.emit("error",N)}function p(g){g.writing=!1,g.writecb=null,g.length-=g.writelen,g.writelen=0}function h(g,m){var S=g._writableState,N=S.sync,B=S.writecb;if(p(S),m)l(g,S,N,m,B);else{var U=y(g,S);!U&&!S.corked&&!S.bufferProcessing&&S.buffer.length&&w(g,S),N?process.nextTick(function(){d(g,S,U,B)}):d(g,S,U,B)}}function d(g,m,S,N){S||v(g,m),m.pendingcb--,N(),C(g,m)}function v(g,m){m.length===0&&m.needDrain&&(m.needDrain=!1,g.emit("drain"))}function w(g,m){if(m.bufferProcessing=!0,g._writev&&m.buffer.length>1){for(var S=[],N=0;N<m.buffer.length;N++)S.push(m.buffer[N].callback);m.pendingcb++,c(g,m,!0,m.length,m.buffer,"",function(D){for(var j=0;j<S.length;j++)m.pendingcb--,S[j](D)}),m.buffer=[]}else{for(var N=0;N<m.buffer.length;N++){var B=m.buffer[N],U=B.chunk,Q=B.encoding,A=B.callback,R=m.objectMode?1:U.length;if(c(g,m,!1,R,U,Q,A),m.writing){N++;break}}N<m.buffer.length?m.buffer=m.buffer.slice(N):m.buffer.length=0}m.bufferProcessing=!1}o.prototype._write=function(g,m,S){S(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(g,m,S){var N=this._writableState;r.isFunction(g)?(S=g,g=null,m=null):r.isFunction(m)&&(S=m,m=null),r.isNullOrUndefined(g)||this.write(g,m),N.corked&&(N.corked=1,this.uncork()),!N.ending&&!N.finished&&b(this,N,S)};function y(g,m){return m.ending&&m.length===0&&!m.finished&&!m.writing}function _(g,m){m.prefinished||(m.prefinished=!0,g.emit("prefinish"))}function C(g,m){var S=y(g,m);return S&&(m.pendingcb===0?(_(g,m),m.finished=!0,g.emit("finish")):_(g,m)),S}function b(g,m,S){m.ending=!0,C(g,m),S&&(m.finished?process.nextTick(S):g.once("finish",S)),m.ended=!0}return xi}(function(e){e.exports=Yo()})(el);var uo={exports:{}},tl=wr,Ko=Qr(),qt=J;qt.inherits=oe.exports;qt.inherits(wr,Ko);function Dm(e,r){this.afterTransform=function(t,n){return Im(r,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function Im(e,r,t){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,qt.isNullOrUndefined(t)||e.push(t),i&&i(r);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function wr(e){if(!(this instanceof wr))return new wr(e);Ko.call(this,e),this._transformState=new Dm(e,this);var r=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){qt.isFunction(this._flush)?this._flush(function(t){ps(r,t)}):ps(r)})}wr.prototype.push=function(e,r){return this._transformState.needTransform=!1,Ko.prototype.push.call(this,e,r)};wr.prototype._transform=function(e,r,t){throw new Error("not implemented")};wr.prototype._write=function(e,r,t){var n=this._transformState;if(n.writecb=t,n.writechunk=e,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};wr.prototype._read=function(e){var r=this._transformState;!qt.isNull(r.writechunk)&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0};function ps(e,r){if(r)return e.emit("error",r);var t=e._writableState,n=e._transformState;if(t.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}var Pm=xt,nl=tl,il=J;il.inherits=oe.exports;il.inherits(xt,nl);function xt(e){if(!(this instanceof xt))return new xt(e);nl.call(this,e)}xt.prototype._transform=function(e,r,t){t(null,e)};(function(e,r){r=e.exports=rl(),r.Stream=Ae(),r.Readable=r,r.Writable=Yo(),r.Duplex=Qr(),r.Transform=tl,r.PassThrough=Pm,!process.browser&&process.env.READABLE_STREAM==="disable"&&(e.exports=Ae())})(uo,uo.exports);var kn={exports:{}},Bm=function(r){var t=r.reverse,n=r.end,i=r.start,o=[i,n];return i!=null&&n!=null&&o.sort(),t&&(o=o.reverse()),r.start=o[0],r.end=o[1],r};(function(e,r){var t=Bm;r=e.exports=i,r.first=o,r.last=a;function n(s,f,u){var c=[];return f.forEach(function(l){function p(h){u(l,h)!==!1&&c.forEach(function(d){d()})}s.on(l,p),c.push(function(){s.removeListener(l,p)})}),s}function i(s,f,u){f.limit=f.reverse?2:1,n(s.createReadStream(f),["data","error","end"],function(c,l){if(f.reverse&&l&&f.start&&l.key.toString()>f.start)return!1;c=="error"?u(l):c=="end"?u(new Error("range not found"),null,null):u(null,l.key,l.value)})}function o(s,f,u){return u||(u=f,f={}),f.reverse=!1,i(s,t(f),u)}function a(s,f,u){return u||(u=f,f={}),f.start,f.reverse=!0,i(s,t(f),function(c,l,p){if(c){var h=f.start;f.start=null,i(s,f,function(d,v,w){if(!v)return u(c,null,null);var y=v.toString();y<=h&&(!f.end||y>=f.end)?u(d,v,w):u(c,null,null)})}else u(c,l,p)})}})(kn,kn.exports);var Ht={exports:{}},Fm=ol;function ol(e,r){if(e&&r)return ol(e)(r);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){t[n]=e[n]}),t;function t(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var o=e.apply(this,n),a=n[n.length-1];return typeof o=="function"&&o!==a&&Object.keys(a).forEach(function(s){o[s]=a[s]}),o}}var al=Fm;Ht.exports=al(fn);Ht.exports.strict=al(sl);fn.proto=fn(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return fn(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return sl(this)},configurable:!0})});function fn(e){var r=function(){return r.called?r.value:(r.called=!0,r.value=e.apply(this,arguments))};return r.called=!1,r}function sl(e){var r=function(){if(r.called)throw new Error(r.onceError);return r.called=!0,r.value=e.apply(this,arguments)},t=e.name||"Function wrapped with `once`";return r.onceError=t+" shouldn't be called more than once",r.called=!1,r}var Ri=el.exports,gs=uo.exports,Lm=kn.exports,vs=je,ms=Ht.exports,ys=new Buffer(0),Gt={encode:function(e){return typeof e=="string"?e=new Buffer(e):e},decode:function(e){return Buffer.isBuffer(e)?e:new Buffer(e)},buffer:!0,type:"raw"},Ai=function(){},Oi=function(e){return e=e.toString(16),"00000000".slice(0,-e.length)+e},jm=function(e,r){var t=new Buffer(r);return e.copy(t),t},Um=function(e,r){r||(r={});var t={},n=r.blockSize||65536,i=r.batch||100,o=new Buffer(n);e.put("\0","ignore",Ai);var a={},s=function(c,l,p,h,d){var v=function(){--a[c].locks||delete a[c]},w=function(y){if(y.locks++,!y.block&&!l){y.block=p,d(null,y.block,v);return}y.block||(y.block=new Buffer(n)),y.block.length<l+p.length&&(y.block=jm(y.block,l+p.length)),p.copy(y.block,l),!h&&l+p.length<y.block.length&&(y.block=y.block.slice(0,l+p.length)),d(null,y.block,v)};if(a[c])return w(a[c]);e.get(c,{valueEncoding:Gt},function(y,_){if(y&&!y.notFound)return d(y);a[c]||(a[c]={locks:0,block:_}),w(a[c])})},f=function(c,l){if(!(this instanceof f))return new f(c,l);l||(l={}),this.name=c,this.blocks=[],this.batch=[],this.bytesWritten=0,this.truncate=!l.append,this.append=l.append,this._shouldInitAppend=this.append&&l.start===void 0,this._destroyed=!1,this._init(l.start||0),Ri.call(this)};vs.inherits(f,Ri),f.prototype._init=function(c){this.blockIndex=c/n|0,this.blockOffset=c-this.blockIndex*n,this.blockLength=this.blockOffset},f.prototype._flush=function(c){if(!this.batch.length)return c();var l=this.batch[this.batch.length-1].key,p=this.batch;if(this.batch=[],!this.truncate)return e.batch(p,c);this.truncate=!1,this._truncate(p,l,c)},f.prototype._truncate=function(c,l,p){p=ms(p);var h=[],d=e.createKeyStream({start:l,end:this.name+"\xFF\xFF"});d.on("error",p),d.on("data",function(v){h.push({type:"del",key:v})}),d.on("end",function(){h.push.apply(h,c),e.batch(h,p)})},f.prototype._writeBlock=function(c){var l=this.blocks.length===1?this.blocks[0]:Buffer.concat(this.blocks,this.blockLength-this.blockOffset),p=this.blockIndex,h=this.blockOffset,d=this;this.blockOffset=0,this.blockLength=0,this.blockIndex++,this.blocks=[];var v=this.name+"\xFF"+Oi(p),w=function(y,_,C){return y.length&&d.batch.push({type:"put",key:v,value:y,valueEncoding:Gt}),!_&&d.batch.length<i?C():d._flush(C)};if(!h&&l.length===n||!h&&!this.append)return w(l,!1,c);s(v,h,l,this.append,function(y,_,C){if(y)return c(y);w(_,!0,function(b){C(),c(b)})})},f.prototype._initAppend=function(c,l,p){var h=this;this._shouldInitAppend=!1,t.size(this.name,function(d,v){if(d)return p(d);h._init(v),h._write(c,l,p)})},f.prototype._write=function(c,l,p){if(!c.length||this._destroyed)return p();if(this._shouldInitAppend)return this._initAppend(c,l,p);var h=this,d,v=n-this.blockLength,w=function(y){if(y)return p(y);if(d)return h._write(d,l,p);p()};if(c.length>v&&(d=c.slice(v),c=c.slice(0,v)),this.bytesWritten+=c.length,this.blockLength+=c.length,this.blocks.push(c),c.length<v)return w();this._writeBlock(w)},f.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,process.nextTick(this.emit.bind(this,"close")))},f.prototype.end=function(c){var l=this,p=arguments;c&&typeof c!="function"&&(this.write(c),c=ys),this.write(ys,function(){l._writeBlock(function(h){if(h)return l.emit("error",h);l._flush(function(d){if(d)return l.emit("error",d);Ri.prototype.end.apply(l,p)})})})};var u=function(c,l){l||(l={});var p=this,h=l.start||0,d=h/n|0,v=h-d*n,w=c+"\xFF"+Oi(d);this.name=c,this._missing=(typeof l.end=="number"?l.end:1/0)-h+1,this._paused=!1,this._destroyed=!1,this._reader=e.createReadStream({start:w,end:c+"\xFF\xFF",valueEncoding:Gt});var y=function(_){return w=c+"\xFF"+Oi(++d),p._missing?v&&(_=_.slice(v),v=0,!_.length)?!0:(_.length>p._missing&&(_=_.slice(0,p._missing)),p._missing-=_.length,p._pause(!p.push(_)),!!p._missing):!1};this._reader.on("data",function(_){for(;_.key>w;)if(!y(o))return;y(_.value)}),this._reader.on("error",function(_){p.emit("error",_)}),this._reader.on("end",function(){p.push(null)}),gs.call(this)};return vs.inherits(u,gs),u.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this._reader.destroy(),process.nextTick(this.emit.bind(this,"close")))},u.prototype._pause=function(c){this._paused!==c&&(this._paused=c,this._paused?this._reader.pause():this._reader.resume())},u.prototype._read=function(){this._pause(!1)},t.remove=function(c,l){l=ms(l||Ai);var p=[],h=e.createKeyStream({start:c+"\xFF",end:c+"\xFF\xFF"});h.on("error",l),h.on("data",function(d){p.push({type:"del",key:d})}),h.on("end",function(){e.batch(p,l)})},t.size=function(c,l){Lm.last(e,{start:c+"\xFF",end:c+"\xFF\xFF",valueEncoding:Gt},function(p,h,d){if(p&&p.message==="range not found")return l(null,0);if(p)return l(p);if(h.slice(0,c.length+1)!==c+"\xFF")return l(null,0);l(null,parseInt(h.toString().slice(c.length+1),16)*n+d.length)})},t.write=function(c,l,p,h){if(typeof p=="function")return t.write(c,l,null,p);p||(p={}),h||(h=Ai);var d=t.createWriteStream(c,p);d.on("error",h),d.on("finish",function(){h()}),d.write(l),d.end()},t.read=function(c,l,p){if(typeof l=="function")return t.read(c,null,l);l||(l={});var h=t.createReadStream(c,l),d=[];h.on("error",p),h.on("data",function(v){d.push(v)}),h.on("end",function(){p(null,d.length===1?d[0]:Buffer.concat(d))})},t.createReadStream=function(c,l){return new u(c,l)},t.createWriteStream=function(c,l){return new f(c,l)},t},fl=function(e,r){return parseInt(e.toString(),r||8)},zo={};(function(e){var r=To.exports;Object.keys(r.code).forEach(function(t){var n=r.code[t];e[t]=function(i){var o=new Error(t+", "+n.description+(i?" '"+i+"'":""));return o.errno=n.errno,o.code=t,o.path=i,o}})})(zo);function Je(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function bs(e,r){for(var t="",n=0,i=-1,o=0,a,s=0;s<=e.length;++s){if(s<e.length)a=e.charCodeAt(s);else{if(a===47)break;a=47}if(a===47){if(!(i===s-1||o===1))if(i!==s-1&&o===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var f=t.lastIndexOf("/");if(f!==t.length-1){f===-1?(t="",n=0):(t=t.slice(0,f),n=t.length-1-t.lastIndexOf("/")),i=s,o=0;continue}}else if(t.length===2||t.length===1){t="",n=0,i=s,o=0;continue}}r&&(t.length>0?t+="/..":t="..",n=2)}else t.length>0?t+="/"+e.slice(i+1,s):t=e.slice(i+1,s),n=s-i-1;i=s,o=0}else a===46&&o!==-1?++o:o=-1}return t}function Wm(e,r){var t=r.dir||r.root,n=r.base||(r.name||"")+(r.ext||"");return t?t===r.root?t+n:t+e+n:n}var Gr={resolve:function(){for(var r="",t=!1,n,i=arguments.length-1;i>=-1&&!t;i--){var o;i>=0?o=arguments[i]:(n===void 0&&(n=process.cwd()),o=n),Je(o),o.length!==0&&(r=o+"/"+r,t=o.charCodeAt(0)===47)}return r=bs(r,!t),t?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(r){if(Je(r),r.length===0)return".";var t=r.charCodeAt(0)===47,n=r.charCodeAt(r.length-1)===47;return r=bs(r,!t),r.length===0&&!t&&(r="."),r.length>0&&n&&(r+="/"),t?"/"+r:r},isAbsolute:function(r){return Je(r),r.length>0&&r.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var r,t=0;t<arguments.length;++t){var n=arguments[t];Je(n),n.length>0&&(r===void 0?r=n:r+="/"+n)}return r===void 0?".":Gr.normalize(r)},relative:function(r,t){if(Je(r),Je(t),r===t||(r=Gr.resolve(r),t=Gr.resolve(t),r===t))return"";for(var n=1;n<r.length&&r.charCodeAt(n)===47;++n);for(var i=r.length,o=i-n,a=1;a<t.length&&t.charCodeAt(a)===47;++a);for(var s=t.length,f=s-a,u=o<f?o:f,c=-1,l=0;l<=u;++l){if(l===u){if(f>u){if(t.charCodeAt(a+l)===47)return t.slice(a+l+1);if(l===0)return t.slice(a+l)}else o>u&&(r.charCodeAt(n+l)===47?c=l:l===0&&(c=0));break}var p=r.charCodeAt(n+l),h=t.charCodeAt(a+l);if(p!==h)break;p===47&&(c=l)}var d="";for(l=n+c+1;l<=i;++l)(l===i||r.charCodeAt(l)===47)&&(d.length===0?d+="..":d+="/..");return d.length>0?d+t.slice(a+c):(a+=c,t.charCodeAt(a)===47&&++a,t.slice(a))},_makeLong:function(r){return r},dirname:function(r){if(Je(r),r.length===0)return".";for(var t=r.charCodeAt(0),n=t===47,i=-1,o=!0,a=r.length-1;a>=1;--a)if(t=r.charCodeAt(a),t===47){if(!o){i=a;break}}else o=!1;return i===-1?n?"/":".":n&&i===1?"//":r.slice(0,i)},basename:function(r,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Je(r);var n=0,i=-1,o=!0,a;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";var s=t.length-1,f=-1;for(a=r.length-1;a>=0;--a){var u=r.charCodeAt(a);if(u===47){if(!o){n=a+1;break}}else f===-1&&(o=!1,f=a+1),s>=0&&(u===t.charCodeAt(s)?--s===-1&&(i=a):(s=-1,i=f))}return n===i?i=f:i===-1&&(i=r.length),r.slice(n,i)}else{for(a=r.length-1;a>=0;--a)if(r.charCodeAt(a)===47){if(!o){n=a+1;break}}else i===-1&&(o=!1,i=a+1);return i===-1?"":r.slice(n,i)}},extname:function(r){Je(r);for(var t=-1,n=0,i=-1,o=!0,a=0,s=r.length-1;s>=0;--s){var f=r.charCodeAt(s);if(f===47){if(!o){n=s+1;break}continue}i===-1&&(o=!1,i=s+1),f===46?t===-1?t=s:a!==1&&(a=1):t!==-1&&(a=-1)}return t===-1||i===-1||a===0||a===1&&t===i-1&&t===n+1?"":r.slice(t,i)},format:function(r){if(r===null||typeof r!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof r);return Wm("/",r)},parse:function(r){Je(r);var t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;var n=r.charCodeAt(0),i=n===47,o;i?(t.root="/",o=1):o=0;for(var a=-1,s=0,f=-1,u=!0,c=r.length-1,l=0;c>=o;--c){if(n=r.charCodeAt(c),n===47){if(!u){s=c+1;break}continue}f===-1&&(u=!1,f=c+1),n===46?a===-1?a=c:l!==1&&(l=1):a!==-1&&(l=-1)}return a===-1||f===-1||l===0||l===1&&a===f-1&&a===s+1?f!==-1&&(s===0&&i?t.base=t.name=r.slice(1,f):t.base=t.name=r.slice(s,f)):(s===0&&i?(t.name=r.slice(1,a),t.base=r.slice(1,f)):(t.name=r.slice(s,a),t.base=r.slice(s,f)),t.ext=r.slice(a,f)),s>0?t.dir=r.slice(0,s-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Gr.posix=Gr;var qm=Gr,lo={exports:{}},Zr={exports:{}};typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?Zr.exports={nextTick:Hm}:Zr.exports=process;function Hm(e,r,t,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,o,a;switch(i){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,r)});case 3:return process.nextTick(function(){e.call(null,r,t)});case 4:return process.nextTick(function(){e.call(null,r,t,n)});default:for(o=new Array(i-1),a=0;a<o.length;)o[a++]=arguments[a];return process.nextTick(function(){e.apply(null,o)})}}var Vm={}.toString,Ym=Array.isArray||function(e){return Vm.call(e)=="[object Array]"},ul=Ue.exports.EventEmitter,et={exports:{}};(function(e,r){var t=ze,n=t.Buffer;function i(a,s){for(var f in a)s[f]=a[f]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=t:(i(t,r),r.Buffer=o);function o(a,s,f){return n(a,s,f)}i(n,o),o.from=function(a,s,f){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,s,f)},o.alloc=function(a,s,f){if(typeof a!="number")throw new TypeError("Argument must be a number");var u=n(a);return s!==void 0?typeof f=="string"?u.fill(s,f):u.fill(s):u.fill(0),u},o.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},o.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(a)}})(et,et.exports);var Ti={exports:{}},ws;function Km(){return ws||(ws=1,function(e){function r(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")}var t=et.exports.Buffer,n=je;function i(o,a,s){o.copy(a,s)}e.exports=function(){function o(){r(this,o),this.head=null,this.tail=null,this.length=0}return o.prototype.push=function(s){var f={data:s,next:null};this.length>0?this.tail.next=f:this.head=f,this.tail=f,++this.length},o.prototype.unshift=function(s){var f={data:s,next:this.head};this.length===0&&(this.tail=f),this.head=f,++this.length},o.prototype.shift=function(){if(this.length!==0){var s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}},o.prototype.clear=function(){this.head=this.tail=null,this.length=0},o.prototype.join=function(s){if(this.length===0)return"";for(var f=this.head,u=""+f.data;f=f.next;)u+=s+f.data;return u},o.prototype.concat=function(s){if(this.length===0)return t.alloc(0);if(this.length===1)return this.head.data;for(var f=t.allocUnsafe(s>>>0),u=this.head,c=0;u;)i(u.data,f,c),c+=u.data.length,u=u.next;return f},o}(),n&&n.inspect&&n.inspect.custom&&(e.exports.prototype[n.inspect.custom]=function(){var o=n.inspect({length:this.length});return this.constructor.name+" "+o})}(Ti)),Ti.exports}var _s=Zr.exports;function zm(e,r){var t=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(r?r(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&_s.nextTick(Es,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(o){!r&&o?(_s.nextTick(Es,t,o),t._writableState&&(t._writableState.errorEmitted=!0)):r&&r(o)}),this)}function Gm(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Es(e,r){e.emit("error",r)}var ll={destroy:zm,undestroy:Gm},Ci,Ss;function cl(){if(Ss)return Ci;Ss=1;var e=Zr.exports;Ci=v;function r(k){var O=this;this.next=null,this.entry=null,this.finish=function(){z(O,k)}}var t=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:e.nextTick,n;v.WritableState=h;var i=Object.create(J);i.inherits=oe.exports;var o={deprecate:$l},a=ul,s=et.exports.Buffer,f=dr.Uint8Array||function(){};function u(k){return s.from(k)}function c(k){return s.isBuffer(k)||k instanceof f}var l=ll;i.inherits(v,a);function p(){}function h(k,O){n=n||rt(),k=k||{};var I=O instanceof n;this.objectMode=!!k.objectMode,I&&(this.objectMode=this.objectMode||!!k.writableObjectMode);var T=k.highWaterMark,L=k.writableHighWaterMark,M=this.objectMode?16:16*1024;T||T===0?this.highWaterMark=T:I&&(L||L===0)?this.highWaterMark=L:this.highWaterMark=M,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var V=k.decodeStrings===!1;this.decodeStrings=!V,this.defaultEncoding=k.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(X){S(O,X)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}h.prototype.getBuffer=function(){for(var O=this.bufferedRequest,I=[];O;)I.push(O),O=O.next;return I},function(){try{Object.defineProperty(h.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var d;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(k){return d.call(this,k)?!0:this!==v?!1:k&&k._writableState instanceof h}})):d=function(k){return k instanceof this};function v(k){if(n=n||rt(),!d.call(v,this)&&!(this instanceof n))return new v(k);this._writableState=new h(k,this),this.writable=!0,k&&(typeof k.write=="function"&&(this._write=k.write),typeof k.writev=="function"&&(this._writev=k.writev),typeof k.destroy=="function"&&(this._destroy=k.destroy),typeof k.final=="function"&&(this._final=k.final)),a.call(this)}v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function w(k,O){var I=new Error("write after end");k.emit("error",I),e.nextTick(O,I)}function y(k,O,I,T){var L=!0,M=!1;return I===null?M=new TypeError("May not write null values to stream"):typeof I!="string"&&I!==void 0&&!O.objectMode&&(M=new TypeError("Invalid non-string/buffer chunk")),M&&(k.emit("error",M),e.nextTick(T,M),L=!1),L}v.prototype.write=function(k,O,I){var T=this._writableState,L=!1,M=!T.objectMode&&c(k);return M&&!s.isBuffer(k)&&(k=u(k)),typeof O=="function"&&(I=O,O=null),M?O="buffer":O||(O=T.defaultEncoding),typeof I!="function"&&(I=p),T.ended?w(this,I):(M||y(this,T,k,I))&&(T.pendingcb++,L=C(this,T,M,k,O,I)),L},v.prototype.cork=function(){var k=this._writableState;k.corked++},v.prototype.uncork=function(){var k=this._writableState;k.corked&&(k.corked--,!k.writing&&!k.corked&&!k.finished&&!k.bufferProcessing&&k.bufferedRequest&&U(this,k))},v.prototype.setDefaultEncoding=function(O){if(typeof O=="string"&&(O=O.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((O+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+O);return this._writableState.defaultEncoding=O,this};function _(k,O,I){return!k.objectMode&&k.decodeStrings!==!1&&typeof O=="string"&&(O=s.from(O,I)),O}Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function C(k,O,I,T,L,M){if(!I){var V=_(O,T,L);T!==V&&(I=!0,L="buffer",T=V)}var X=O.objectMode?1:T.length;O.length+=X;var Y=O.length<O.highWaterMark;if(Y||(O.needDrain=!0),O.writing||O.corked){var q=O.lastBufferedRequest;O.lastBufferedRequest={chunk:T,encoding:L,isBuf:I,callback:M,next:null},q?q.next=O.lastBufferedRequest:O.bufferedRequest=O.lastBufferedRequest,O.bufferedRequestCount+=1}else b(k,O,!1,X,T,L,M);return Y}function b(k,O,I,T,L,M,V){O.writelen=T,O.writecb=V,O.writing=!0,O.sync=!0,I?k._writev(L,O.onwrite):k._write(L,M,O.onwrite),O.sync=!1}function g(k,O,I,T,L){--O.pendingcb,I?(e.nextTick(L,T),e.nextTick(D,k,O),k._writableState.errorEmitted=!0,k.emit("error",T)):(L(T),k._writableState.errorEmitted=!0,k.emit("error",T),D(k,O))}function m(k){k.writing=!1,k.writecb=null,k.length-=k.writelen,k.writelen=0}function S(k,O){var I=k._writableState,T=I.sync,L=I.writecb;if(m(I),O)g(k,I,T,O,L);else{var M=Q(I);!M&&!I.corked&&!I.bufferProcessing&&I.bufferedRequest&&U(k,I),T?t(N,k,I,M,L):N(k,I,M,L)}}function N(k,O,I,T){I||B(k,O),O.pendingcb--,T(),D(k,O)}function B(k,O){O.length===0&&O.needDrain&&(O.needDrain=!1,k.emit("drain"))}function U(k,O){O.bufferProcessing=!0;var I=O.bufferedRequest;if(k._writev&&I&&I.next){var T=O.bufferedRequestCount,L=new Array(T),M=O.corkedRequestsFree;M.entry=I;for(var V=0,X=!0;I;)L[V]=I,I.isBuf||(X=!1),I=I.next,V+=1;L.allBuffers=X,b(k,O,!0,O.length,L,"",M.finish),O.pendingcb++,O.lastBufferedRequest=null,M.next?(O.corkedRequestsFree=M.next,M.next=null):O.corkedRequestsFree=new r(O),O.bufferedRequestCount=0}else{for(;I;){var Y=I.chunk,q=I.encoding,E=I.callback,x=O.objectMode?1:Y.length;if(b(k,O,!1,x,Y,q,E),I=I.next,O.bufferedRequestCount--,O.writing)break}I===null&&(O.lastBufferedRequest=null)}O.bufferedRequest=I,O.bufferProcessing=!1}v.prototype._write=function(k,O,I){I(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(k,O,I){var T=this._writableState;typeof k=="function"?(I=k,k=null,O=null):typeof O=="function"&&(I=O,O=null),k!=null&&this.write(k,O),T.corked&&(T.corked=1,this.uncork()),!T.ending&&!T.finished&&j(this,T,I)};function Q(k){return k.ending&&k.length===0&&k.bufferedRequest===null&&!k.finished&&!k.writing}function A(k,O){k._final(function(I){O.pendingcb--,I&&k.emit("error",I),O.prefinished=!0,k.emit("prefinish"),D(k,O)})}function R(k,O){!O.prefinished&&!O.finalCalled&&(typeof k._final=="function"?(O.pendingcb++,O.finalCalled=!0,e.nextTick(A,k,O)):(O.prefinished=!0,k.emit("prefinish")))}function D(k,O){var I=Q(O);return I&&(R(k,O),O.pendingcb===0&&(O.finished=!0,k.emit("finish"))),I}function j(k,O,I){O.ending=!0,D(k,O),I&&(O.finished?e.nextTick(I):k.once("finish",I)),O.ended=!0,k.writable=!1}function z(k,O,I){var T=k.entry;for(k.entry=null;T;){var L=T.callback;O.pendingcb--,L(I),T=T.next}O.corkedRequestsFree?O.corkedRequestsFree.next=k:O.corkedRequestsFree=k}return Object.defineProperty(v.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(k){!this._writableState||(this._writableState.destroyed=k)}}),v.prototype.destroy=l.destroy,v.prototype._undestroy=l.undestroy,v.prototype._destroy=function(k,O){this.end(),O(k)},Ci}var Ni,xs;function rt(){if(xs)return Ni;xs=1;var e=Zr.exports,r=Object.keys||function(l){var p=[];for(var h in l)p.push(h);return p};Ni=f;var t=Object.create(J);t.inherits=oe.exports;var n=hl(),i=cl();t.inherits(f,n);for(var o=r(i.prototype),a=0;a<o.length;a++){var s=o[a];f.prototype[s]||(f.prototype[s]=i.prototype[s])}function f(l){if(!(this instanceof f))return new f(l);n.call(this,l),i.call(this,l),l&&l.readable===!1&&(this.readable=!1),l&&l.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,l&&l.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",u)}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function u(){this.allowHalfOpen||this._writableState.ended||e.nextTick(c,this)}function c(l){l.end()}return Object.defineProperty(f.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(l){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=l,this._writableState.destroyed=l)}}),f.prototype._destroy=function(l,p){this.push(null),this.end(),e.nextTick(p,l)},Ni}var ki={},Rs;function As(){if(Rs)return ki;Rs=1;var e=et.exports.Buffer,r=e.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(y){if(!y)return"utf8";for(var _;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(_)return;y=(""+y).toLowerCase(),_=!0}}function n(y){var _=t(y);if(typeof _!="string"&&(e.isEncoding===r||!r(y)))throw new Error("Unknown encoding: "+y);return _||y}ki.StringDecoder=i;function i(y){this.encoding=n(y);var _;switch(this.encoding){case"utf16le":this.text=l,this.end=p,_=4;break;case"utf8":this.fillLast=f,_=4;break;case"base64":this.text=h,this.end=d,_=3;break;default:this.write=v,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(_)}i.prototype.write=function(y){if(y.length===0)return"";var _,C;if(this.lastNeed){if(_=this.fillLast(y),_===void 0)return"";C=this.lastNeed,this.lastNeed=0}else C=0;return C<y.length?_?_+this.text(y,C):this.text(y,C):_||""},i.prototype.end=c,i.prototype.text=u,i.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function o(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function a(y,_,C){var b=_.length-1;if(b<C)return 0;var g=o(_[b]);return g>=0?(g>0&&(y.lastNeed=g-1),g):--b<C||g===-2?0:(g=o(_[b]),g>=0?(g>0&&(y.lastNeed=g-2),g):--b<C||g===-2?0:(g=o(_[b]),g>=0?(g>0&&(g===2?g=0:y.lastNeed=g-3),g):0))}function s(y,_,C){if((_[0]&192)!==128)return y.lastNeed=0,"\uFFFD";if(y.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return y.lastNeed=1,"\uFFFD";if(y.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return y.lastNeed=2,"\uFFFD"}}function f(y){var _=this.lastTotal-this.lastNeed,C=s(this,y);if(C!==void 0)return C;if(this.lastNeed<=y.length)return y.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,_,0,y.length),this.lastNeed-=y.length}function u(y,_){var C=a(this,y,_);if(!this.lastNeed)return y.toString("utf8",_);this.lastTotal=C;var b=y.length-(C-this.lastNeed);return y.copy(this.lastChar,0,b),y.toString("utf8",_,b)}function c(y){var _=y&&y.length?this.write(y):"";return this.lastNeed?_+"\uFFFD":_}function l(y,_){if((y.length-_)%2===0){var C=y.toString("utf16le",_);if(C){var b=C.charCodeAt(C.length-1);if(b>=55296&&b<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],C.slice(0,-1)}return C}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",_,y.length-1)}function p(y){var _=y&&y.length?this.write(y):"";if(this.lastNeed){var C=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,C)}return _}function h(y,_){var C=(y.length-_)%3;return C===0?y.toString("base64",_):(this.lastNeed=3-C,this.lastTotal=3,C===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",_,y.length-C))}function d(y){var _=y&&y.length?this.write(y):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function v(y){return y.toString(this.encoding)}function w(y){return y&&y.length?this.write(y):""}return ki}var Mi,Os;function hl(){if(Os)return Mi;Os=1;var e=Zr.exports;Mi=_;var r=Ym,t;_.ReadableState=y,Ue.exports.EventEmitter;var n=function(E,x){return E.listeners(x).length},i=ul,o=et.exports.Buffer,a=dr.Uint8Array||function(){};function s(E){return o.from(E)}function f(E){return o.isBuffer(E)||E instanceof a}var u=Object.create(J);u.inherits=oe.exports;var c=je,l=void 0;c&&c.debuglog?l=c.debuglog("stream"):l=function(){};var p=Km(),h=ll,d;u.inherits(_,i);var v=["error","close","destroy","pause","resume"];function w(E,x,$){if(typeof E.prependListener=="function")return E.prependListener(x,$);!E._events||!E._events[x]?E.on(x,$):r(E._events[x])?E._events[x].unshift($):E._events[x]=[$,E._events[x]]}function y(E,x){t=t||rt(),E=E||{};var $=x instanceof t;this.objectMode=!!E.objectMode,$&&(this.objectMode=this.objectMode||!!E.readableObjectMode);var F=E.highWaterMark,G=E.readableHighWaterMark,W=this.objectMode?16:16*1024;F||F===0?this.highWaterMark=F:$&&(G||G===0)?this.highWaterMark=G:this.highWaterMark=W,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=E.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,E.encoding&&(d||(d=As().StringDecoder),this.decoder=new d(E.encoding),this.encoding=E.encoding)}function _(E){if(t=t||rt(),!(this instanceof _))return new _(E);this._readableState=new y(E,this),this.readable=!0,E&&(typeof E.read=="function"&&(this._read=E.read),typeof E.destroy=="function"&&(this._destroy=E.destroy)),i.call(this)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(E){!this._readableState||(this._readableState.destroyed=E)}}),_.prototype.destroy=h.destroy,_.prototype._undestroy=h.undestroy,_.prototype._destroy=function(E,x){this.push(null),x(E)},_.prototype.push=function(E,x){var $=this._readableState,F;return $.objectMode?F=!0:typeof E=="string"&&(x=x||$.defaultEncoding,x!==$.encoding&&(E=o.from(E,x),x=""),F=!0),C(this,E,x,!1,F)},_.prototype.unshift=function(E){return C(this,E,null,!0,!1)};function C(E,x,$,F,G){var W=E._readableState;if(x===null)W.reading=!1,U(E,W);else{var H;G||(H=g(W,x)),H?E.emit("error",H):W.objectMode||x&&x.length>0?(typeof x!="string"&&!W.objectMode&&Object.getPrototypeOf(x)!==o.prototype&&(x=s(x)),F?W.endEmitted?E.emit("error",new Error("stream.unshift() after end event")):b(E,W,x,!0):W.ended?E.emit("error",new Error("stream.push() after EOF")):(W.reading=!1,W.decoder&&!$?(x=W.decoder.write(x),W.objectMode||x.length!==0?b(E,W,x,!1):R(E,W)):b(E,W,x,!1))):F||(W.reading=!1)}return m(W)}function b(E,x,$,F){x.flowing&&x.length===0&&!x.sync?(E.emit("data",$),E.read(0)):(x.length+=x.objectMode?1:$.length,F?x.buffer.unshift($):x.buffer.push($),x.needReadable&&Q(E)),R(E,x)}function g(E,x){var $;return!f(x)&&typeof x!="string"&&x!==void 0&&!E.objectMode&&($=new TypeError("Invalid non-string/buffer chunk")),$}function m(E){return!E.ended&&(E.needReadable||E.length<E.highWaterMark||E.length===0)}_.prototype.isPaused=function(){return this._readableState.flowing===!1},_.prototype.setEncoding=function(E){return d||(d=As().StringDecoder),this._readableState.decoder=new d(E),this._readableState.encoding=E,this};var S=8388608;function N(E){return E>=S?E=S:(E--,E|=E>>>1,E|=E>>>2,E|=E>>>4,E|=E>>>8,E|=E>>>16,E++),E}function B(E,x){return E<=0||x.length===0&&x.ended?0:x.objectMode?1:E!==E?x.flowing&&x.length?x.buffer.head.data.length:x.length:(E>x.highWaterMark&&(x.highWaterMark=N(E)),E<=x.length?E:x.ended?x.length:(x.needReadable=!0,0))}_.prototype.read=function(E){l("read",E),E=parseInt(E,10);var x=this._readableState,$=E;if(E!==0&&(x.emittedReadable=!1),E===0&&x.needReadable&&(x.length>=x.highWaterMark||x.ended))return l("read: emitReadable",x.length,x.ended),x.length===0&&x.ended?X(this):Q(this),null;if(E=B(E,x),E===0&&x.ended)return x.length===0&&X(this),null;var F=x.needReadable;l("need readable",F),(x.length===0||x.length-E<x.highWaterMark)&&(F=!0,l("length less than watermark",F)),x.ended||x.reading?(F=!1,l("reading or ended",F)):F&&(l("do read"),x.reading=!0,x.sync=!0,x.length===0&&(x.needReadable=!0),this._read(x.highWaterMark),x.sync=!1,x.reading||(E=B($,x)));var G;return E>0?G=T(E,x):G=null,G===null?(x.needReadable=!0,E=0):x.length-=E,x.length===0&&(x.ended||(x.needReadable=!0),$!==E&&x.ended&&X(this)),G!==null&&this.emit("data",G),G};function U(E,x){if(!x.ended){if(x.decoder){var $=x.decoder.end();$&&$.length&&(x.buffer.push($),x.length+=x.objectMode?1:$.length)}x.ended=!0,Q(E)}}function Q(E){var x=E._readableState;x.needReadable=!1,x.emittedReadable||(l("emitReadable",x.flowing),x.emittedReadable=!0,x.sync?e.nextTick(A,E):A(E))}function A(E){l("emit readable"),E.emit("readable"),I(E)}function R(E,x){x.readingMore||(x.readingMore=!0,e.nextTick(D,E,x))}function D(E,x){for(var $=x.length;!x.reading&&!x.flowing&&!x.ended&&x.length<x.highWaterMark&&(l("maybeReadMore read 0"),E.read(0),$!==x.length);)$=x.length;x.readingMore=!1}_.prototype._read=function(E){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(E,x){var $=this,F=this._readableState;switch(F.pipesCount){case 0:F.pipes=E;break;case 1:F.pipes=[F.pipes,E];break;default:F.pipes.push(E);break}F.pipesCount+=1,l("pipe count=%d opts=%j",F.pipesCount,x);var G=(!x||x.end!==!1)&&E!==process.stdout&&E!==process.stderr,W=G?ke:Me;F.endEmitted?e.nextTick(W):$.once("end",W),E.on("unpipe",H);function H(De,or){l("onunpipe"),De===$&&or&&or.hasUnpiped===!1&&(or.hasUnpiped=!0,ve())}function ke(){l("onend"),E.end()}var ge=j($);E.on("drain",ge);var ne=!1;function ve(){l("cleanup"),E.removeListener("close",ce),E.removeListener("finish",ie),E.removeListener("drain",ge),E.removeListener("error",ue),E.removeListener("unpipe",H),$.removeListener("end",ke),$.removeListener("end",Me),$.removeListener("data",se),ne=!0,F.awaitDrain&&(!E._writableState||E._writableState.needDrain)&&ge()}var ae=!1;$.on("data",se);function se(De){l("ondata"),ae=!1;var or=E.write(De);or===!1&&!ae&&((F.pipesCount===1&&F.pipes===E||F.pipesCount>1&&q(F.pipes,E)!==-1)&&!ne&&(l("false write response, pause",$._readableState.awaitDrain),$._readableState.awaitDrain++,ae=!0),$.pause())}function ue(De){l("onerror",De),Me(),E.removeListener("error",ue),n(E,"error")===0&&E.emit("error",De)}w(E,"error",ue);function ce(){E.removeListener("finish",ie),Me()}E.once("close",ce);function ie(){l("onfinish"),E.removeListener("close",ce),Me()}E.once("finish",ie);function Me(){l("unpipe"),$.unpipe(E)}return E.emit("pipe",$),F.flowing||(l("pipe resume"),$.resume()),E};function j(E){return function(){var x=E._readableState;l("pipeOnDrain",x.awaitDrain),x.awaitDrain&&x.awaitDrain--,x.awaitDrain===0&&n(E,"data")&&(x.flowing=!0,I(E))}}_.prototype.unpipe=function(E){var x=this._readableState,$={hasUnpiped:!1};if(x.pipesCount===0)return this;if(x.pipesCount===1)return E&&E!==x.pipes?this:(E||(E=x.pipes),x.pipes=null,x.pipesCount=0,x.flowing=!1,E&&E.emit("unpipe",this,$),this);if(!E){var F=x.pipes,G=x.pipesCount;x.pipes=null,x.pipesCount=0,x.flowing=!1;for(var W=0;W<G;W++)F[W].emit("unpipe",this,$);return this}var H=q(x.pipes,E);return H===-1?this:(x.pipes.splice(H,1),x.pipesCount-=1,x.pipesCount===1&&(x.pipes=x.pipes[0]),E.emit("unpipe",this,$),this)},_.prototype.on=function(E,x){var $=i.prototype.on.call(this,E,x);if(E==="data")this._readableState.flowing!==!1&&this.resume();else if(E==="readable"){var F=this._readableState;!F.endEmitted&&!F.readableListening&&(F.readableListening=F.needReadable=!0,F.emittedReadable=!1,F.reading?F.length&&Q(this):e.nextTick(z,this))}return $},_.prototype.addListener=_.prototype.on;function z(E){l("readable nexttick read 0"),E.read(0)}_.prototype.resume=function(){var E=this._readableState;return E.flowing||(l("resume"),E.flowing=!0,k(this,E)),this};function k(E,x){x.resumeScheduled||(x.resumeScheduled=!0,e.nextTick(O,E,x))}function O(E,x){x.reading||(l("resume read 0"),E.read(0)),x.resumeScheduled=!1,x.awaitDrain=0,E.emit("resume"),I(E),x.flowing&&!x.reading&&E.read(0)}_.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function I(E){var x=E._readableState;for(l("flow",x.flowing);x.flowing&&E.read()!==null;);}_.prototype.wrap=function(E){var x=this,$=this._readableState,F=!1;E.on("end",function(){if(l("wrapped end"),$.decoder&&!$.ended){var H=$.decoder.end();H&&H.length&&x.push(H)}x.push(null)}),E.on("data",function(H){if(l("wrapped data"),$.decoder&&(H=$.decoder.write(H)),!($.objectMode&&H==null)&&!(!$.objectMode&&(!H||!H.length))){var ke=x.push(H);ke||(F=!0,E.pause())}});for(var G in E)this[G]===void 0&&typeof E[G]=="function"&&(this[G]=function(H){return function(){return E[H].apply(E,arguments)}}(G));for(var W=0;W<v.length;W++)E.on(v[W],this.emit.bind(this,v[W]));return this._read=function(H){l("wrapped _read",H),F&&(F=!1,E.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=T;function T(E,x){if(x.length===0)return null;var $;return x.objectMode?$=x.buffer.shift():!E||E>=x.length?(x.decoder?$=x.buffer.join(""):x.buffer.length===1?$=x.buffer.head.data:$=x.buffer.concat(x.length),x.buffer.clear()):$=L(E,x.buffer,x.decoder),$}function L(E,x,$){var F;return E<x.head.data.length?(F=x.head.data.slice(0,E),x.head.data=x.head.data.slice(E)):E===x.head.data.length?F=x.shift():F=$?M(E,x):V(E,x),F}function M(E,x){var $=x.head,F=1,G=$.data;for(E-=G.length;$=$.next;){var W=$.data,H=E>W.length?W.length:E;if(H===W.length?G+=W:G+=W.slice(0,E),E-=H,E===0){H===W.length?(++F,$.next?x.head=$.next:x.head=x.tail=null):(x.head=$,$.data=W.slice(H));break}++F}return x.length-=F,G}function V(E,x){var $=o.allocUnsafe(E),F=x.head,G=1;for(F.data.copy($),E-=F.data.length;F=F.next;){var W=F.data,H=E>W.length?W.length:E;if(W.copy($,$.length-E,0,H),E-=H,E===0){H===W.length?(++G,F.next?x.head=F.next:x.head=x.tail=null):(x.head=F,F.data=W.slice(H));break}++G}return x.length-=G,$}function X(E){var x=E._readableState;if(x.length>0)throw new Error('"endReadable()" called on non-empty stream');x.endEmitted||(x.ended=!0,e.nextTick(Y,x,E))}function Y(E,x){!E.endEmitted&&E.length===0&&(E.endEmitted=!0,x.readable=!1,x.emit("end"))}function q(E,x){for(var $=0,F=E.length;$<F;$++)if(E[$]===x)return $;return-1}return Mi}var dl=sr,Qn=rt(),pl=Object.create(J);pl.inherits=oe.exports;pl.inherits(sr,Qn);function Jm(e,r){var t=this._transformState;t.transforming=!1;var n=t.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));t.writechunk=null,t.writecb=null,r!=null&&this.push(r),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function sr(e){if(!(this instanceof sr))return new sr(e);Qn.call(this,e),this._transformState={afterTransform:Jm.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Xm)}function Xm(){var e=this;typeof this._flush=="function"?this._flush(function(r,t){Ts(e,r,t)}):Ts(this,null,null)}sr.prototype.push=function(e,r){return this._transformState.needTransform=!1,Qn.prototype.push.call(this,e,r)};sr.prototype._transform=function(e,r,t){throw new Error("_transform() is not implemented")};sr.prototype._write=function(e,r,t){var n=this._transformState;if(n.writecb=t,n.writechunk=e,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};sr.prototype._read=function(e){var r=this._transformState;r.writechunk!==null&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0};sr.prototype._destroy=function(e,r){var t=this;Qn.prototype._destroy.call(this,e,function(n){r(n),t.emit("close")})};function Ts(e,r,t){if(r)return e.emit("error",r);if(t!=null&&e.push(t),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}var Qm=Rt,gl=dl,vl=Object.create(J);vl.inherits=oe.exports;vl.inherits(Rt,gl);function Rt(e){if(!(this instanceof Rt))return new Rt(e);gl.call(this,e)}Rt.prototype._transform=function(e,r,t){t(null,e)};(function(e,r){r=e.exports=hl(),r.Stream=r,r.Readable=r,r.Writable=cl(),r.Duplex=rt(),r.Transform=dl,r.PassThrough=Qm})(lo,lo.exports);var Zm=Object.prototype.toString,Go=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function ey(e){return Zm.call(e).slice(8,-1)==="ArrayBuffer"}function ry(e,r,t){r>>>=0;var n=e.byteLength-r;if(n<0)throw new RangeError("'offset' is out of bounds");if(t===void 0)t=n;else if(t>>>=0,t>n)throw new RangeError("'length' is out of bounds");return Go?Buffer.from(e.slice(r,r+t)):new Buffer(new Uint8Array(e.slice(r,r+t)))}function ty(e,r){if((typeof r!="string"||r==="")&&(r="utf8"),!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');return Go?Buffer.from(e,r):new Buffer(e,r)}function ny(e,r,t){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return ey(e)?ry(e,r,t):typeof e=="string"?ty(e,r):Go?Buffer.from(e):new Buffer(e)}var iy=ny,$i={},Cs;function oy(){return Cs||(Cs=1,function(e){var r=void 0,t=1e5,n=function(){var T=Object.prototype.toString,L=Object.prototype.hasOwnProperty;return{Class:function(M){return T.call(M).replace(/^\[object *|\]$/g,"")},HasProperty:function(M,V){return V in M},HasOwnProperty:function(M,V){return L.call(M,V)},IsCallable:function(M){return typeof M=="function"},ToInt32:function(M){return M>>0},ToUint32:function(M){return M>>>0}}}(),i=Math.LN2,o=Math.abs,a=Math.floor,s=Math.log,f=Math.min,u=Math.pow,c=Math.round;function l(T){if(h&&p){var L=h(T),M;for(M=0;M<L.length;M+=1)p(T,L[M],{value:T[L[M]],writable:!1,enumerable:!1,configurable:!1})}}var p;Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}}()?p=Object.defineProperty:p=function(T,L,M){if(!T===Object(T))throw new TypeError("Object.defineProperty called on non-object");return n.HasProperty(M,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(T,L,M.get),n.HasProperty(M,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(T,L,M.set),n.HasProperty(M,"value")&&(T[L]=M.value),T};var h=Object.getOwnPropertyNames||function(T){if(T!==Object(T))throw new TypeError("Object.getOwnPropertyNames called on non-object");var L=[],M;for(M in T)n.HasOwnProperty(T,M)&&L.push(M);return L};function d(T){if(!p)return;if(T.length>t)throw new RangeError("Array too large for polyfill");function L(V){p(T,V,{get:function(){return T._getter(V)},set:function(X){T._setter(V,X)},enumerable:!0,configurable:!1})}var M;for(M=0;M<T.length;M+=1)L(M)}function v(T,L){var M=32-L;return T<<M>>M}function w(T,L){var M=32-L;return T<<M>>>M}function y(T){return[T&255]}function _(T){return v(T[0],8)}function C(T){return[T&255]}function b(T){return w(T[0],8)}function g(T){return T=c(Number(T)),[T<0?0:T>255?255:T&255]}function m(T){return[T>>8&255,T&255]}function S(T){return v(T[0]<<8|T[1],16)}function N(T){return[T>>8&255,T&255]}function B(T){return w(T[0]<<8|T[1],16)}function U(T){return[T>>24&255,T>>16&255,T>>8&255,T&255]}function Q(T){return v(T[0]<<24|T[1]<<16|T[2]<<8|T[3],32)}function A(T){return[T>>24&255,T>>16&255,T>>8&255,T&255]}function R(T){return w(T[0]<<24|T[1]<<16|T[2]<<8|T[3],32)}function D(T,L,M){var V=(1<<L-1)-1,X,Y,q,E,x,$,F;function G(W){var H=a(W),ke=W-H;return ke<.5?H:ke>.5||H%2?H+1:H}for(T!==T?(Y=(1<<L)-1,q=u(2,M-1),X=0):T===1/0||T===-1/0?(Y=(1<<L)-1,q=0,X=T<0?1:0):T===0?(Y=0,q=0,X=1/T===-1/0?1:0):(X=T<0,T=o(T),T>=u(2,1-V)?(Y=f(a(s(T)/i),1023),q=G(T/u(2,Y)*u(2,M)),q/u(2,M)>=2&&(Y=Y+1,q=1),Y>V?(Y=(1<<L)-1,q=0):(Y=Y+V,q=q-u(2,M))):(Y=0,q=G(T/u(2,1-V-M)))),x=[],E=M;E;E-=1)x.push(q%2?1:0),q=a(q/2);for(E=L;E;E-=1)x.push(Y%2?1:0),Y=a(Y/2);for(x.push(X?1:0),x.reverse(),$=x.join(""),F=[];$.length;)F.push(parseInt($.substring(0,8),2)),$=$.substring(8);return F}function j(T,L,M){var V=[],X,Y,q,E,x,$,F,G;for(X=T.length;X;X-=1)for(q=T[X-1],Y=8;Y;Y-=1)V.push(q%2?1:0),q=q>>1;return V.reverse(),E=V.join(""),x=(1<<L-1)-1,$=parseInt(E.substring(0,1),2)?-1:1,F=parseInt(E.substring(1,1+L),2),G=parseInt(E.substring(1+L),2),F===(1<<L)-1?G!==0?NaN:$*(1/0):F>0?$*u(2,F-x)*(1+G/u(2,M)):G!==0?$*u(2,-(x-1))*(G/u(2,M)):$<0?-0:0}function z(T){return j(T,11,52)}function k(T){return D(T,11,52)}function O(T){return j(T,8,23)}function I(T){return D(T,8,23)}(function(){var T=function(H){if(H=n.ToInt32(H),H<0)throw new RangeError("ArrayBuffer size is not a small enough positive integer");this.byteLength=H,this._bytes=[],this._bytes.length=H;var ke;for(ke=0;ke<this.byteLength;ke+=1)this._bytes[ke]=0;l(this)};e.ArrayBuffer=e.ArrayBuffer||T;var L=function(){};function M(W,H,ke){var ge;return ge=function(ne,ve,ae){var se,ue,ce,ie;if(!arguments.length||typeof arguments[0]=="number"){if(this.length=n.ToInt32(arguments[0]),ae<0)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new T(this.byteLength),this.byteOffset=0}else if(typeof arguments[0]=="object"&&arguments[0].constructor===ge)for(se=arguments[0],this.length=se.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new T(this.byteLength),this.byteOffset=0,ce=0;ce<this.length;ce+=1)this._setter(ce,se._getter(ce));else if(typeof arguments[0]=="object"&&!(arguments[0]instanceof T||n.Class(arguments[0])==="ArrayBuffer"))for(ue=arguments[0],this.length=n.ToUint32(ue.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new T(this.byteLength),this.byteOffset=0,ce=0;ce<this.length;ce+=1)ie=ue[ce],this._setter(ce,Number(ie));else if(typeof arguments[0]=="object"&&(arguments[0]instanceof T||n.Class(arguments[0])==="ArrayBuffer")){if(this.buffer=ne,this.byteOffset=n.ToUint32(ve),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=n.ToUint32(ae),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else throw new TypeError("Unexpected argument type(s)");this.constructor=ge,l(this),d(this)},ge.prototype=new L,ge.prototype.BYTES_PER_ELEMENT=W,ge.prototype._pack=H,ge.prototype._unpack=ke,ge.BYTES_PER_ELEMENT=W,ge.prototype._getter=function(ne){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if(ne=n.ToUint32(ne),ne>=this.length)return r;var ve=[],ae,se;for(ae=0,se=this.byteOffset+ne*this.BYTES_PER_ELEMENT;ae<this.BYTES_PER_ELEMENT;ae+=1,se+=1)ve.push(this.buffer._bytes[se]);return this._unpack(ve)},ge.prototype.get=ge.prototype._getter,ge.prototype._setter=function(ne,ve){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if(ne=n.ToUint32(ne),ne>=this.length)return r;var ae=this._pack(ve),se,ue;for(se=0,ue=this.byteOffset+ne*this.BYTES_PER_ELEMENT;se<this.BYTES_PER_ELEMENT;se+=1,ue+=1)this.buffer._bytes[ue]=ae[se]},ge.prototype.set=function(ne,ve){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var ae,se,ue,ce,ie,Me,De,or,Kt,ii;if(typeof arguments[0]=="object"&&arguments[0].constructor===this.constructor){if(ae=arguments[0],ue=n.ToUint32(arguments[1]),ue+ae.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(or=this.byteOffset+ue*this.BYTES_PER_ELEMENT,Kt=ae.length*this.BYTES_PER_ELEMENT,ae.buffer===this.buffer){for(ii=[],ie=0,Me=ae.byteOffset;ie<Kt;ie+=1,Me+=1)ii[ie]=ae.buffer._bytes[Me];for(ie=0,De=or;ie<Kt;ie+=1,De+=1)this.buffer._bytes[De]=ii[ie]}else for(ie=0,Me=ae.byteOffset,De=or;ie<Kt;ie+=1,Me+=1,De+=1)this.buffer._bytes[De]=ae.buffer._bytes[Me]}else if(typeof arguments[0]=="object"&&typeof arguments[0].length<"u"){if(se=arguments[0],ce=n.ToUint32(se.length),ue=n.ToUint32(arguments[1]),ue+ce>this.length)throw new RangeError("Offset plus length of array is out of range");for(ie=0;ie<ce;ie+=1)Me=se[ie],this._setter(ue+ie,Number(Me))}else throw new TypeError("Unexpected argument type(s)")},ge.prototype.subarray=function(ne,ve){function ae(ue,ce,ie){return ue<ce?ce:ue>ie?ie:ue}ne=n.ToInt32(ne),ve=n.ToInt32(ve),arguments.length<1&&(ne=0),arguments.length<2&&(ve=this.length),ne<0&&(ne=this.length+ne),ve<0&&(ve=this.length+ve),ne=ae(ne,0,this.length),ve=ae(ve,0,this.length);var se=ve-ne;return se<0&&(se=0),new this.constructor(this.buffer,this.byteOffset+ne*this.BYTES_PER_ELEMENT,se)},ge}var V=M(1,y,_),X=M(1,C,b),Y=M(1,g,b),q=M(2,m,S),E=M(2,N,B),x=M(4,U,Q),$=M(4,A,R),F=M(4,I,O),G=M(8,k,z);e.Int8Array=e.Int8Array||V,e.Uint8Array=e.Uint8Array||X,e.Uint8ClampedArray=e.Uint8ClampedArray||Y,e.Int16Array=e.Int16Array||q,e.Uint16Array=e.Uint16Array||E,e.Int32Array=e.Int32Array||x,e.Uint32Array=e.Uint32Array||$,e.Float32Array=e.Float32Array||F,e.Float64Array=e.Float64Array||G})(),function(){function T(Y,q){return n.IsCallable(Y.get)?Y.get(q):Y[q]}var L=function(){var Y=new e.Uint16Array([4660]),q=new e.Uint8Array(Y.buffer);return T(q,0)===18}(),M=function(q,E,x){if(arguments.length===0)q=new e.ArrayBuffer(0);else if(!(q instanceof e.ArrayBuffer||n.Class(q)==="ArrayBuffer"))throw new TypeError("TypeError");if(this.buffer=q||new e.ArrayBuffer(0),this.byteOffset=n.ToUint32(E),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(arguments.length<3?this.byteLength=this.buffer.byteLength-this.byteOffset:this.byteLength=n.ToUint32(x),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");l(this)};function V(Y){return function(q,E){if(q=n.ToUint32(q),q+Y.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");q+=this.byteOffset;var x=new e.Uint8Array(this.buffer,q,Y.BYTES_PER_ELEMENT),$=[],F;for(F=0;F<Y.BYTES_PER_ELEMENT;F+=1)$.push(T(x,F));return Boolean(E)===Boolean(L)&&$.reverse(),T(new Y(new e.Uint8Array($).buffer),0)}}M.prototype.getUint8=V(e.Uint8Array),M.prototype.getInt8=V(e.Int8Array),M.prototype.getUint16=V(e.Uint16Array),M.prototype.getInt16=V(e.Int16Array),M.prototype.getUint32=V(e.Uint32Array),M.prototype.getInt32=V(e.Int32Array),M.prototype.getFloat32=V(e.Float32Array),M.prototype.getFloat64=V(e.Float64Array);function X(Y){return function(q,E,x){if(q=n.ToUint32(q),q+Y.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var $=new Y([E]),F=new e.Uint8Array($.buffer),G=[],W,H;for(W=0;W<Y.BYTES_PER_ELEMENT;W+=1)G.push(T(F,W));Boolean(x)===Boolean(L)&&G.reverse(),H=new e.Uint8Array(this.buffer,q,Y.BYTES_PER_ELEMENT),H.set(G)}}M.prototype.setUint8=X(e.Uint8Array),M.prototype.setInt8=X(e.Int8Array),M.prototype.setUint16=X(e.Uint16Array),M.prototype.setInt16=X(e.Int16Array),M.prototype.setUint32=X(e.Uint32Array),M.prototype.setInt32=X(e.Int32Array),M.prototype.setFloat32=X(e.Float32Array),M.prototype.setFloat64=X(e.Float64Array),e.DataView=e.DataView||M}()}($i)),$i}var ml=lo.exports.Writable,ay=oe.exports,At=iy;if(typeof Uint8Array>"u")var yl=oy().Uint8Array;else var yl=Uint8Array;function $r(e,r){if(!(this instanceof $r))return new $r(e,r);typeof e=="function"&&(r=e,e={}),e||(e={});var t=e.encoding,n=!1;t?(t=String(t).toLowerCase(),(t==="u8"||t==="uint8")&&(t="uint8array")):n=!0,ml.call(this,{objectMode:!0}),this.encoding=t,this.shouldInferEncoding=n,r&&this.on("finish",function(){r(this.getBody())}),this.body=[]}var sy=$r;ay($r,ml);$r.prototype._write=function(e,r,t){this.body.push(e),t()};$r.prototype.inferEncoding=function(e){var r=e===void 0?this.body[0]:e;return Buffer.isBuffer(r)?"buffer":typeof Uint8Array<"u"&&r instanceof Uint8Array?"uint8array":Array.isArray(r)?"array":typeof r=="string"?"string":Object.prototype.toString.call(r)==="[object Object]"?"object":"buffer"};$r.prototype.getBody=function(){return!this.encoding&&this.body.length===0?[]:(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),this.encoding==="array"?cy(this.body):this.encoding==="string"?uy(this.body):this.encoding==="buffer"?ly(this.body):this.encoding==="uint8array"?hy(this.body):this.body)};function fy(e){return/Array\]$/.test(Object.prototype.toString.call(e))}function bl(e){return typeof e=="string"||fy(e)||e&&typeof e.subarray=="function"}function uy(e){for(var r=[],t=0;t<e.length;t++){var n=e[t];typeof n=="string"||Buffer.isBuffer(n)?r.push(n):bl(n)?r.push(At(n)):r.push(At(String(n)))}return Buffer.isBuffer(e[0])?(r=Buffer.concat(r),r=r.toString("utf8")):r=r.join(""),r}function ly(e){for(var r=[],t=0;t<e.length;t++){var n=e[t];Buffer.isBuffer(n)?r.push(n):bl(n)?r.push(At(n)):r.push(At(String(n)))}return Buffer.concat(r)}function cy(e){for(var r=[],t=0;t<e.length;t++)r.push.apply(r,e[t]);return r}function hy(e){for(var r=0,t=0;t<e.length;t++)typeof e[t]=="string"&&(e[t]=At(e[t])),r+=e[t].length;for(var n=new yl(r),t=0,i=0;t<e.length;t++)for(var o=e[t],a=0;a<o.length;a++)n[i++]=o[a];return n}var Di=function(e){return e?typeof e=="string"?new Date(e):e:new Date},Rr=function(e){this.uid=e.uid||0,this.gid=e.gid||0,this.mode=e.mode||0,this.size=e.size||0,this.mtime=Di(e.mtime),this.atime=Di(e.atime),this.ctime=Di(e.ctime),this.type=e.type,this.target=e.target,this.link=e.link,this.blob=e.blob};Rr.prototype.isDirectory=function(){return this.type==="directory"};Rr.prototype.isFile=function(){return this.type==="file"};Rr.prototype.isBlockDevice=function(){return!1};Rr.prototype.isCharacterDevice=function(){return!1};Rr.prototype.isSymbolicLink=function(){return this.type==="symlink"};Rr.prototype.isFIFO=function(){return!1};Rr.prototype.isSocket=function(){return!1};var dy=function(e){return new Rr(e)},py=gy;function gy(e){return e!==null&&(typeof e=="object"||typeof e=="function")}var vy=py,my=yy;function yy(){for(var e={},r=0;r<arguments.length;r++){var t=arguments[r];if(!!vy(t))for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}return e}var co=qm,by=Ht.exports,wy=sy,_y=fl,un=dy,Ey=my,st=zo,Sy=un({type:"directory",mode:_y(777),size:4096}),Fr=function(e){return e=e[0]==="/"?e:"/"+e,e=co.normalize(e),e==="/"?e:e[e.length-1]==="/"?e.slice(0,-1):e},Jt=function(e){var r=e.split("/").length.toString(36);return"0000000000".slice(r.length)+r+e},xy=function(e){var r={};r.normalize=Fr,r.get=function(n,i){if(n=Fr(n),n==="/")return process.nextTick(i.bind(null,null,Sy,"/"));e.get(Jt(n),{valueEncoding:"json"},function(o,a){if(o&&o.notFound)return i(st.ENOENT(n),null,n);if(o)return i(o,null,n);i(null,un(a),n)})},r.writable=function(n,i){if(n=Fr(n),n==="/")return process.nextTick(i.bind(null,st.EPERM(n)));r.follow(co.dirname(n),function(o,a){if(o)return i(o);if(!a.isDirectory())return i(st.ENOTDIR(n));i(null,n)})},r.list=function(n,i){n=Fr(n);var o=Jt(n==="/"?n:n+"/"),a=e.createKeyStream({start:o,end:o+"\xFF"});i=by(i),a.on("error",i),a.pipe(wy({encoding:"object"},function(s){s=s.map(function(f){return f.split("/").pop()}),i(null,s)}))};var t=function(n,i){var o="/",a=n.split("/").slice(1),s=function(){r.get(co.join(o,a.shift()),function(f,u,c){if(f)return i(f,u,n);if(o=u.target||c,!a.length)return i(null,u,c);s()})};s()};return r.follow=function(n,i){t(Fr(n),function o(a,s,f){if(a)return i(a,null,f);if(s.target)return r.get(s.target,o);i(null,un(s),f)})},r.update=function(n,i,o){r.get(n,function(a,s,f){if(a)return o(a);if(f==="/")return o(st.EPERM(f));r.put(f,Ey(s,i),o)})},r.put=function(n,i,o){r.writable(n,function(a,s){if(a)return o(a);e.put(Jt(s),un(i),{valueEncoding:"json"},o)})},r.del=function(n,i){if(n=Fr(n),n==="/")return process.nextTick(i.bind(null,st.EPERM(n)));e.del(Jt(n),i)},r},Ii=Ue.exports,Ry=function(){var e={},r=new Ii.EventEmitter;return r.watch=function(t,n){return e[t]||(e[t]=new Ii.EventEmitter,e[t].setMaxListeners(0)),n&&e[t].on("change",n),e[t]},r.watcher=function(t,n){var i=new Ii.EventEmitter,o=function(){i.emit("change","change",t)};return r.watch(t,o),n&&i.on("change",n),i.close=function(){r.unwatch(t,o)},i},r.unwatch=function(t,n){!e[t]||(n?e[t].removeListener("change",n):e[t].removeAllListeners("change"),e[t].listeners("change").length||delete e[t])},r.change=function(t){e[t]&&e[t].emit("change"),r.emit("change",t)},r.cb=function(t,n){return function(i,o){t&&r.change(t),n&&n(i,o)}},r},Ns=Du,Ay=$m,Oy=Um,Ty=kn.exports,Cy=Ht.exports,ft=fl,Z=zo,Ny=xy,ky=Ry,qe=function(e,r,t){process.nextTick(function(){e(r,t)})},xe=function(){},My=function(e,r){var t={};e=Ay(e);var n=Oy(e.sublevel("blobs"),r),i=Ny(e.sublevel("stats")),o=e.sublevel("links"),a=ky(),s=[],f=Date.now(),u=function(){return++f};t.mkdir=function(h,d,v){if(typeof d=="function")return t.mkdir(h,null,d);d||(d=ft(777)),v||(v=xe),i.follow(h,function(w,y,_){if(w&&w.code!=="ENOENT")return v(w);if(y)return v(Z.EEXIST(_));i.put(_,{type:"directory",mode:d,size:4096},a.cb(_,v))})},t.rmdir=function(h,d){d||(d=xe),i.follow(h,function(v,w,y){if(v)return d(v);t.readdir(y,function(_,C){if(_)return d(_);if(C.length)return d(Z.ENOTEMPTY(y));i.del(y,a.cb(y,d))})})},t.readdir=function(h,d){i.follow(h,function(v,w,y){if(v)return d(v);if(!w)return d(Z.ENOENT(y));if(!w.isDirectory())return d(Z.ENOTDIR(y));i.list(y,d)})};var c=function(h,d,v){d(h,function(w,y,_){if(w)return v(w);if(!y.isFile())return v(null,y);var C=y&&y.blob||_;n.size(C,function(b,g){if(b)return v(b);y.size=g,v(null,y)})})};t.stat=function(h,d){c(h,i.follow,d)},t.lstat=function(h,d){c(h,i.get,d)},t.exists=function(h,d){i.follow(h,function(v){d(!v)})};var l=function(h,d,v,w){w||(w=xe),d(h,function(y,_,C){if(y)return w(y);i.update(C,{mode:v},a.cb(C,w))})};t.chmod=function(h,d,v){l(h,i.follow,d,v)},t.lchmod=function(h,d,v){l(h,i.get,d,v)};var p=function(h,d,v,w,y){y||(y=xe),d(h,function(_,C,b){if(_)return y(_);i.update(b,{uid:v,gid:w},a.cb(b,y))})};return t.chown=function(h,d,v,w){p(h,i.follow,d,v,w)},t.lchown=function(h,d,v,w){p(h,i.get,d,v,w)},t.utimes=function(h,d,v,w){w||(w=xe),i.follow(h,function(y,_,C){if(y)return w(y);var b={};d&&(b.atime=d),v&&(b.mtime=v),i.update(C,b,a.cb(C,w))})},t.rename=function(h,d,v){v||(v=xe),i.follow(h,function(w,y,_){if(w)return v(w);var C=function(){v=a.cb(d,a.cb(_,v)),i.put(d,y,function(b){if(b)return v(b);i.del(_,v)})};i.follow(d,function(b,g,m){if(b&&b.code!=="ENOENT")return v(b);if(!g)return C();if(y.isDirectory()!==g.isDirectory())return v(Z.EISDIR(_));if(g.isDirectory()){t.readdir(m,function(S,N){if(S)return v(S);if(N.length)return v(Z.ENOTEMPTY(_));C()});return}C()})})},t.realpath=function(h,d,v){if(typeof d=="function")return t.realpath(h,null,d);i.follow(h,function(w,y,_){if(w)return v(w);v(null,_)})},t.writeFile=function(h,d,v,w){if(typeof v=="function")return t.writeFile(h,d,null,v);typeof v=="string"&&(v={encoding:v}),v||(v={}),w||(w=xe),Buffer.isBuffer(d)||(d=new Buffer(d,v.encoding||"utf-8"));var y=v.flags||"w";v.append=y[0]!=="w",i.follow(h,function(_,C,b){if(_&&_.code!=="ENOENT")return w(_);if(C&&C.isDirectory())return w(Z.EISDIR(b));if(C&&y[1]==="x")return w(Z.EEXIST(b));var g=C&&C.blob||b;i.writable(b,function(m){if(m)return w(m);n.write(g,d,v,function(S){if(S)return w(S);i.put(b,{ctime:C&&C.ctime,mtime:new Date,mode:v.mode||ft(666),type:"file"},a.cb(b,w))})})})},t.appendFile=function(h,d,v,w){if(typeof v=="function")return t.appendFile(h,d,null,v);typeof v=="string"&&(v={encoding:v}),v||(v={}),v.flags="a",t.writeFile(h,d,v,w)},t.unlink=function(h,d){d||(d=xe),i.get(h,function(v,w,y){if(v)return d(v);if(w.isDirectory())return d(Z.EISDIR(y));var _=function(b){Ty(o,{start:b+"\xFF",end:b+"\xFF\xFF"},function(g){if(g)return n.remove(b,d);d()})},C=function(){var b=w.link.slice(0,w.link.indexOf("\xFF"));o.del(w.link,function(g){if(g)return d(g);_(b)})};i.del(y,a.cb(y,function(b){if(b)return d(b);if(w.link)return C();o.del(y+"\xFF",function(g){if(g)return d(g);_(y)})}))})},t.readFile=function(h,d,v){if(typeof d=="function")return t.readFile(h,null,d);typeof d=="string"&&(d={encoding:d}),d||(d={}),d.encoding,d.flag,i.follow(h,function(w,y,_){if(w)return v(w);if(y.isDirectory())return v(Z.EISDIR(_));var C=y&&y.blob||_;n.read(C,function(b,g){if(b)return v(b);v(null,d.encoding?g.toString(d.encoding):g)})})},t.createReadStream=function(h,d){d||(d={});var v=!1,w=Ns.readable(function(y){i.follow(h,function(_,C,b){if(_)return y(_);if(C.isDirectory())return y(Z.EISDIR(b));var g=C&&C.blob||b,m=n.createReadStream(g,d);w.emit("open"),m.on("end",function(){process.nextTick(function(){v||w.emit("close")})}),y(null,m)})});return w.on("close",function(){v=!0}),w},t.createWriteStream=function(h,d){d||(d={});var v=d.flags||"w",w=!1,y=d.mode||ft(666);d.append=v[0]==="a";var _=Ns.writable(function(C){i.follow(h,function(b,g,m){if(b&&b.code!=="ENOENT")return C(b);if(g&&g.isDirectory())return C(Z.EISDIR(m));if(g&&v[1]==="x")return C(Z.EEXIST(m));var S=g&&g.blob||m;i.writable(S,function(N){if(N)return C(N);var B=g?g.ctime:new Date,U={ctime:B,mtime:new Date,mode:y,type:"file"};i.put(m,U,function(Q){if(Q)return C(Q);var A=n.createWriteStream(S,d);_.emit("open"),A.on("finish",function(){U.mtime=new Date,i.put(m,U,function(){a.change(m),w||_.emit("close")})}),C(null,A)})})})});return _.on("close",function(){w=!0}),_},t.truncate=function(h,d,v){i.follow(h,function(w,y,_){if(w)return v(w);var C=y&&y.blob||_;n.size(C,function(b,g){if(b)return v(b);i.writable(_,function(m){if(m)return v(m);if(v=Cy(a.cb(_,v)),!d)return n.remove(C,v);var S=n.createWriteStream(C,{start:g<d?d-1:d});S.on("error",v),S.on("finish",v),g<d&&S.write(new Buffer([0])),S.end()})})})},t.watchFile=function(h,d,v){return typeof d=="function"?t.watchFile(h,null,d):a.watch(i.normalize(h),v)},t.unwatchFile=function(h,d){a.unwatch(i.normalize(h),d)},t.watch=function(h,d,v){return typeof d=="function"?t.watch(h,null,d):a.watcher(i.normalize(h),v)},t.notify=function(h){a.on("change",h)},t.open=function(h,d,v,w){if(typeof v=="function")return t.open(h,d,null,v);i.follow(h,function(y,_,C){if(y&&y.code!=="ENOENT")return w(y);var b=d[0],g=d[1]==="+"||d[2]==="+",m=_&&_.blob||C,S={key:C,blob:m,mode:v||ft(666),readable:b==="r"||(b==="w"||b==="a")&&g,writable:b==="w"||b==="a"||b==="r"&&g,append:b==="a"};if(b==="r"&&y)return w(y);if(d[1]==="x"&&_)return w(Z.EEXIST(C));if(_&&_.isDirectory())return w(Z.EISDIR(C));n.size(m,function(N,B){if(N)return w(N);S.append&&(S.writePos=B),i.writable(C,function(U){if(U)return w(U);var Q=function(R){if(R)return w(R);var D=s.indexOf(null);D===-1&&(D=10+s.push(s.length+10)-1),S.fd=D,s[D]=S,a.change(C),w(null,S.fd)},A=function(R){if(R)return w(R);if(_)return Q();i.put(m,{ctime:_&&_.ctime,type:"file"},Q)};if(!S.append&&S.writable)return n.remove(m,A);A()})})})},t.close=function(h,d){var v=s[h];if(!v)return qe(d,Z.EBADF());s[h]=null,qe(a.cb(v.key,d))},t.write=function(h,d,v,w,y,_){var C=s[h];if(_||(_=xe),!C||!C.writable)return qe(_,Z.EBADF());y===null&&(y=C.writePos||0);var b=d.slice(v,v+w);C.writePos=y+b.length,n.write(C.blob,b,{start:y,append:!0},function(g){if(g)return _(g);_(null,w,d)})},t.read=function(h,d,v,w,y,_){var C=s[h];if(_||(_=xe),!C||!C.readable)return qe(_,Z.EBADF());y===null&&(y=t.readPos||0),n.read(C.blob,{start:y,end:y+w-1},function(b,g){if(b)return _(b);var m=g.slice(0,w);m.copy(d,v),t.readPos=y+m.length,_(null,m.length,d)})},t.fsync=function(h,d){var v=s[h];if(d||(d=xe),!v||!v.writable)return qe(d,Z.EBADF());qe(d)},t.ftruncate=function(h,d,v){var w=s[h];if(v||(v=xe),!w)return qe(v,Z.EBADF());t.truncate(w.blob,d,v)},t.fchown=function(h,d,v,w){var y=s[h];if(w||(w=xe),!y)return qe(w,Z.EBADF());t.chown(y.key,d,v,w)},t.fchmod=function(h,d,v){var w=s[h];if(v||(v=xe),!w)return qe(v,Z.EBADF());t.chmod(w.key,d,v)},t.futimes=function(h,d,v,w){var y=s[h];if(w||(w=xe),!y)return qe(w,Z.EBADF());t.utimes(y.key,d,v,w)},t.fstat=function(h,d){var v=s[h];if(!v)return qe(d,Z.EBADF());t.stat(v.key,d)},t.symlink=function(h,d,v){v||(v=xe),i.follow(h,function(w,y,_){if(w)return v(w);i.get(d,function(C,b){if(C&&C.code!=="ENOENT")return v(C);if(b)return v(Z.EEXIST(d));i.put(d,{type:"symlink",target:_,mode:ft(777)},v)})})},t.readlink=function(h,d){i.get(h,function(v,w){if(v)return d(v);if(!w.target)return d(Z.EINVAL(h));d(null,w.target)})},t.link=function(h,d,v){v||(v=xe),i.follow(h,function(w,y,_){if(w)return v(w);if(!y.isFile())return v(Z.EINVAL(_));i.get(d,function(C,b){if(C&&C.code!=="ENOENT")return v(C);if(b)return v(Z.EEXIST(d));var g=_+"\xFF"+u();o.put(_+"\xFF",_,function(m){if(m)return v(m);o.put(g,_,function(S){if(S)return v(S);i.put(d,{type:"file",link:g,blob:_,mode:y.mode},v)})})})})},t},$y=ig,Dy=jt.exports,Iy=My,Py=Dy("level-filesystem",{db:$y}),By=Iy(Py);const Fy=By,{ono:Pi}=Dr,ks=Ie.exports,{ResolverError:Bi}=pe;var Ly={order:100,canRead(e){return ks.isFileSystemPath(e.url)},read(e){return new Promise((r,t)=>{let n;try{n=ks.toFileSystemPath(e.url)}catch(i){t(new Bi(Pi.uri(i,`Malformed URI: ${e.url}`),e.url))}try{Fy.readFile(n,(i,o)=>{i?t(new Bi(Pi(i,`Error opening file "${n}"`),n)):r(o)})}catch(i){t(new Bi(Pi(i,`Error opening file "${n}"`),n))}})}};const jy=ct,Uy=ct,{ono:Xt}=Dr,ht=Ie.exports,{ResolverError:Ms}=pe;var Wy={order:200,headers:null,timeout:5e3,redirects:5,withCredentials:!1,canRead(e){return ht.isHttp(e.url)},read(e){let r=ht.parse(e.url);return process.browser&&!r.protocol&&(r.protocol=ht.parse(location.href).protocol),wl(r,this)}};function wl(e,r,t){return new Promise((n,i)=>{e=ht.parse(e),t=t||[],t.push(e.href),qy(e,r).then(o=>{if(o.statusCode>=400)throw Xt({status:o.statusCode},`HTTP ERROR ${o.statusCode}`);if(o.statusCode>=300)if(t.length>r.redirects)i(new Ms(Xt({status:o.statusCode},`Error downloading ${t[0]}. 
Too many redirects: 
  ${t.join(` 
  `)}`)));else if(o.headers.location){let a=ht.resolve(e,o.headers.location);wl(a,r,t).then(n,i)}else throw Xt({status:o.statusCode},`HTTP ${o.statusCode} redirect with no location header`);else n(o.body||Buffer.alloc(0))}).catch(o=>{i(new Ms(Xt(o,`Error downloading ${e.href}`),e.href))})})}function qy(e,r){return new Promise((t,n)=>{let o=(e.protocol==="https:"?Uy:jy).get({hostname:e.hostname,port:e.port,path:e.path,auth:e.auth,protocol:e.protocol,headers:r.headers||{},withCredentials:r.withCredentials});typeof o.setTimeout=="function"&&o.setTimeout(r.timeout),o.on("timeout",()=>{o.abort()}),o.on("error",n),o.once("response",a=>{a.body=Buffer.alloc(0),a.on("data",s=>{a.body=Buffer.concat([a.body,Buffer.from(s)])}),a.on("error",n),a.on("end",()=>{t(a)})})})}const Hy=Ic,Vy=kp,Yy=Dp,Ky=Pp,zy=Ly,Gy=Wy;var Jy=Jo;function Jo(e){ho(this,Jo.defaults),ho(this,e)}Jo.defaults={parse:{json:Hy,yaml:Vy,text:Yy,binary:Ky},resolve:{file:zy,http:Gy,external:!0},continueOnError:!1,dereference:{circular:!0}};function ho(e,r){if($s(r)){let t=Object.keys(r);for(let n=0;n<t.length;n++){let i=t[n],o=r[i],a=e[i];$s(o)?e[i]=ho(a||{},o):o!==void 0&&(e[i]=o)}}return e}function $s(e){return e&&typeof e=="object"&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}const Ds=Jy;var Xy=Qy;function Qy(e){let r,t,n,i;return e=Array.prototype.slice.call(e),typeof e[e.length-1]=="function"&&(i=e.pop()),typeof e[0]=="string"?(r=e[0],typeof e[2]=="object"?(t=e[1],n=e[2]):(t=void 0,n=e[1])):(r="",t=e[0],n=e[1]),n instanceof Ds||(n=new Ds(n)),{path:r,schema:t,options:n,callback:i}}const Is=Mt(),Zy=In(),eb=pf,ut=Ie.exports,{isHandledError:rb}=pe;var tb=nb;function nb(e,r){if(!r.resolve.external)return Promise.resolve();try{let t=Xo(e.schema,e.$refs._root$Ref.path+"#",e.$refs,r);return Promise.all(t)}catch(t){return Promise.reject(t)}}function Xo(e,r,t,n,i){i=i||new Set;let o=[];if(e&&typeof e=="object"&&!ArrayBuffer.isView(e)&&!i.has(e))if(i.add(e),Is.isExternal$Ref(e))o.push(Ps(e,r,t,n));else for(let a of Object.keys(e)){let s=Zy.join(r,a),f=e[a];Is.isExternal$Ref(f)?o.push(Ps(f,s,t,n)):o=o.concat(Xo(f,s,t,n,i))}return o}async function Ps(e,r,t,n){let i=ut.resolve(r,e.$ref),o=ut.stripHash(i);if(e=t._$refs[o],e)return Promise.resolve(e.value);try{const a=await eb(i,t,n);let s=Xo(a,o+"#",t,n);return Promise.all(s)}catch(a){if(!n.continueOnError||!rb(a))throw a;return t._$refs[o]&&(a.source=ut.stripHash(r),a.path=ut.safePointerToPath(ut.getHash(r))),[]}}const Mn=Mt(),Ot=In(),Fi=Ie.exports;var ib=ob;function ob(e,r){let t=[];Qo(e,"schema",e.$refs._root$Ref.path+"#","#",0,t,e.$refs,r),ab(t)}function Qo(e,r,t,n,i,o,a,s){let f=r===null?e:e[r];if(f&&typeof f=="object"&&!ArrayBuffer.isView(f))if(Mn.isAllowed$Ref(f))Bs(e,r,t,n,i,o,a,s);else{let u=Object.keys(f).sort((c,l)=>c==="definitions"?-1:l==="definitions"?1:c.length-l.length);for(let c of u){let l=Ot.join(t,c),p=Ot.join(n,c),h=f[c];Mn.isAllowed$Ref(h)?Bs(f,c,t,p,i,o,a,s):Qo(f,c,l,p,i,o,a,s)}}}function Bs(e,r,t,n,i,o,a,s){let f=r===null?e:e[r],u=Fi.resolve(t,f.$ref),c=a._resolve(u,n,s);if(c===null)return;let l=Ot.parse(n).length,p=Fi.stripHash(c.path),h=Fi.getHash(c.path),d=p!==a._root$Ref.path,v=Mn.isExtended$Ref(f);i+=c.indirections;let w=sb(o,e,r);if(w)if(l<w.depth||i<w.indirections)fb(o,w);else return;o.push({$ref:f,parent:e,key:r,pathFromRoot:n,depth:l,file:p,hash:h,value:c.value,circular:c.circular,extended:v,external:d,indirections:i}),w||Qo(c.value,null,c.path,n,i+1,o,a,s)}function ab(e){e.sort((i,o)=>{if(i.file!==o.file)return i.file<o.file?-1:1;if(i.hash!==o.hash)return i.hash<o.hash?-1:1;if(i.circular!==o.circular)return i.circular?-1:1;if(i.extended!==o.extended)return i.extended?1:-1;if(i.indirections!==o.indirections)return i.indirections-o.indirections;if(i.depth!==o.depth)return i.depth-o.depth;{let a=i.pathFromRoot.lastIndexOf("/definitions"),s=o.pathFromRoot.lastIndexOf("/definitions");return a!==s?s-a:i.pathFromRoot.length-o.pathFromRoot.length}});let r,t,n;for(let i of e)i.external?i.file===r&&i.hash===t?i.$ref.$ref=n:i.file===r&&i.hash.indexOf(t+"/")===0?i.$ref.$ref=Ot.join(n,Ot.parse(i.hash.replace(t,"#"))):(r=i.file,t=i.hash,n=i.pathFromRoot,i.$ref=i.parent[i.key]=Mn.dereference(i.$ref,i.value),i.circular&&(i.$ref.$ref=i.pathFromRoot)):i.$ref.$ref=i.hash}function sb(e,r,t){for(let n=0;n<e.length;n++){let i=e[n];if(i.parent===r&&i.key===t)return i}}function fb(e,r){let t=e.indexOf(r);e.splice(t,1)}const po=Mt(),Fs=In(),{ono:ub}=Dr,lb=Ie.exports;var cb=hb;function hb(e,r){let t=Zo(e.schema,e.$refs._root$Ref.path,"#",new Set,new Set,new Map,e.$refs,r);e.$refs.circular=t.circular,e.schema=t.value}function Zo(e,r,t,n,i,o,a,s){let f,u={value:e,circular:!1};if((s.dereference.circular==="ignore"||!i.has(e))&&e&&typeof e=="object"&&!ArrayBuffer.isView(e)){if(n.add(e),i.add(e),po.isAllowed$Ref(e,s))f=Ls(e,r,t,n,i,o,a,s),u.circular=f.circular,u.value=f.value;else for(const c of Object.keys(e)){let l=Fs.join(r,c),p=Fs.join(t,c),h=e[c],d=!1;po.isAllowed$Ref(h,s)?(f=Ls(h,l,p,n,i,o,a,s),d=f.circular,e[c]!==f.value&&(e[c]=f.value)):n.has(h)?d=_l(l,a,s):(f=Zo(h,l,p,n,i,o,a,s),d=f.circular,e[c]!==f.value&&(e[c]=f.value)),u.circular=u.circular||d}n.delete(e)}return u}function Ls(e,r,t,n,i,o,a,s){let f=lb.resolve(r,e.$ref);const u=o.get(f);if(u){const v=Object.keys(e);if(v.length>1){const w={};for(let y of v)y!=="$ref"&&!(y in u.value)&&(w[y]=e[y]);return{circular:u.circular,value:Object.assign({},u.value,w)}}return u}let c=a._resolve(f,r,s);if(c===null)return{circular:!1,value:null};let l=c.circular,p=l||n.has(c.value);p&&_l(r,a,s);let h=po.dereference(e,c.value);if(!p){let v=Zo(h,c.path,t,n,i,o,a,s);p=v.circular,h=v.value}p&&!l&&s.dereference.circular==="ignore"&&(h=e),l&&(h.$ref=t);const d={circular:p,value:h};return Object.keys(e).length===1&&o.set(f,d),d}function _l(e,r,t){if(r.circular=!0,!t.dereference.circular)throw ub.reference(`Circular $ref pointer found at ${e}`);return!0}var js=dr.process&&process.nextTick||dr.setImmediate||function(e){setTimeout(e,0)},pb=function(r,t){if(r){t.then(function(n){js(function(){r(null,n)})},function(n){js(function(){r(n)})});return}else return t};const El=Ac,gb=pf,Zn=Xy,vb=tb,mb=ib,yb=cb,Lr=Ie.exports,{JSONParserError:bb,InvalidPointerError:wb,MissingPointerError:_b,ResolverError:Eb,ParserError:Sb,UnmatchedParserError:xb,UnmatchedResolverError:Rb,isHandledError:Ab,JSONParserErrorGroup:Us}=pe,Ve=pb,{ono:Ws}=Dr;rr.exports=nr;rr.exports.default=nr;rr.exports.JSONParserError=bb;rr.exports.InvalidPointerError=wb;rr.exports.MissingPointerError=_b;rr.exports.ResolverError=Eb;rr.exports.ParserError=Sb;rr.exports.UnmatchedParserError=xb;rr.exports.UnmatchedResolverError=Rb;function nr(){this.schema=null,this.$refs=new El}nr.parse=function(r,t,n,i){let o=this,a=new o;return a.parse.apply(a,arguments)};nr.prototype.parse=async function(r,t,n,i){let o=Zn(arguments),a;if(!o.path&&!o.schema){let u=Ws(`Expected a file path, URL, or object. Got ${o.path||o.schema}`);return Ve(o.callback,Promise.reject(u))}this.schema=null,this.$refs=new El;let s="http";if(Lr.isFileSystemPath(o.path)&&(o.path=Lr.fromFileSystemPath(o.path),s="file"),o.path=Lr.resolve(Lr.cwd(),o.path),o.schema&&typeof o.schema=="object"){let u=this.$refs._add(o.path);u.value=o.schema,u.pathType=s,a=Promise.resolve(o.schema)}else a=gb(o.path,this.$refs,o.options);let f=this;try{let u=await a;if(u!==null&&typeof u=="object"&&!Buffer.isBuffer(u))return f.schema=u,Ve(o.callback,Promise.resolve(f.schema));if(o.options.continueOnError)return f.schema=null,Ve(o.callback,Promise.resolve(f.schema));throw Ws.syntax(`"${f.$refs._root$Ref.path||u}" is not a valid JSON Schema`)}catch(u){return!o.options.continueOnError||!Ab(u)?Ve(o.callback,Promise.reject(u)):(this.$refs._$refs[Lr.stripHash(o.path)]&&this.$refs._$refs[Lr.stripHash(o.path)].addError(u),Ve(o.callback,Promise.resolve(null)))}};nr.resolve=function(r,t,n,i){let o=this,a=new o;return a.resolve.apply(a,arguments)};nr.prototype.resolve=async function(r,t,n,i){let o=this,a=Zn(arguments);try{return await this.parse(a.path,a.schema,a.options),await vb(o,a.options),ea(o),Ve(a.callback,Promise.resolve(o.$refs))}catch(s){return Ve(a.callback,Promise.reject(s))}};nr.bundle=function(r,t,n,i){let o=this,a=new o;return a.bundle.apply(a,arguments)};nr.prototype.bundle=async function(r,t,n,i){let o=this,a=Zn(arguments);try{return await this.resolve(a.path,a.schema,a.options),mb(o,a.options),ea(o),Ve(a.callback,Promise.resolve(o.schema))}catch(s){return Ve(a.callback,Promise.reject(s))}};nr.dereference=function(r,t,n,i){let o=this,a=new o;return a.dereference.apply(a,arguments)};nr.prototype.dereference=async function(r,t,n,i){let o=this,a=Zn(arguments);try{return await this.resolve(a.path,a.schema,a.options),yb(o,a.options),ea(o),Ve(a.callback,Promise.resolve(o.schema))}catch(s){return Ve(a.callback,Promise.reject(s))}};function ea(e){if(Us.getParserErrors(e).length>0)throw new Us(e)}var go={exports:{}},Ye={},ar={},Vt={},dt=typeof Symbol=="function"?Symbol("curriable placeholder"):60881;function Ob(e,r){function t(n){return function(){var i=n.length,o=arguments,a=o.length,s=[],f=0,u=r,c;if(i)for(var l=-1;++l<i;)s[l]=c=n[l]===dt&&f<a?o[f++]:n[l],c!==dt&&--u;if(f<a)for(;f<a;)s[s.length]=c=o[f],c!==dt&&f<r&&--u,++f;return u>0?t(s):e.apply(this,s)}}return t([])}function Pr(e,r){var t=typeof r=="number"?r:e.length,n=Ob(e,t);return n.arity=t,n.fn=e,n}Pr.__=dt;function Tb(e){return e===dt}Pr.isPlaceholder=Tb;function Cb(e){return e.fn}Pr.uncurry=Cb;var Qt,Zt,He,jr,Nb=typeof Buffer<"u"&&typeof Buffer.from=="function",kb=typeof Uint16Array=="function",Mb=/\[object (HTML(.*)Element)\]/,$b=/\[object (SVG(.*)Element)\]/,Db=["Arguments","Array","ArrayBuffer","Boolean","DataView","Date","DocumentFragment","Error","Event","Float32Array","Float64Array","Function","Generator","GeneratorFunction","HTMLElement","Int8Array","Int16Array","Int32Array","Map","Null","Number","Object","Promise","RegExp","Set","String","Symbol","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","Undefined","WeakMap","WeakSet","Window"],Xe=Db.reduce(function(e,r){return e["[object "+r+"]"]=r,e},{}),te=Object.keys(Xe).reduce(function(e,r){return e[Xe[r].toUpperCase()]=r,e},{}),Ib={"[object Map]":!0,"[object Set]":!0},Pb={boolean:!0,function:!0,number:!0,string:!0,undefined:!0},Bb=(Qt={},Qt[te.ARGUMENTS]=!0,Qt[te.ARRAY]=!0,Qt),Fb=(Zt={},Zt[te.REGEXP]=!0,Zt[te.SYMBOL]=!0,Zt),Lb=(He={},He[te.FLOAT32ARRAY]=!0,He[te.FLOAT64ARRAY]=!0,He[te.INT8ARRAY]=!0,He[te.INT16ARRAY]=!0,He[te.INT32ARRAY]=!0,He[te.UINT8ARRAY]=!0,He[te.UINT8CLAMPEDARRAY]=!0,He[te.UINT16ARRAY]=!0,He[te.UINT32ARRAY]=!0,He),jb=(jr={},jr[te.GENERATOR]=!0,jr[te.PROMISE]=!0,jr[te.WEAKMAP]=!0,jr[te.WEAKSET]=!0,jr),Ub=/^\s*function\s*([^(]*)/i,Sl=Object.prototype.toString,Wb=Object.keys;function qb(e){return e.name||(e.toString().match(Ub)||[])[1]||"anonymous"}function Hb(e){for(var r=e.length,t=5381,n=52711,i;r--;)i=e.charCodeAt(r),t=t*33^i,n=n*33^i;return(t>>>0)*4096+(n>>>0)}function Vb(e){return{bubbles:e.bubbles,cancelBubble:e.cancelBubble,cancelable:e.cancelable,composed:e.composed,currentTarget:e.currentTarget,defaultPrevented:e.defaultPrevented,eventPhase:e.eventPhase,isTrusted:e.isTrusted,returnValue:e.returnValue,target:e.target,type:e.type}}function xl(e,r){return e>r}function Yb(e,r){return e[0]>r[0]}function vo(e,r){for(var t,n,i=0;i<e.length;++i){for(n=e[i],t=i-1;~t&&r(e[t],n);--t)e[t+1]=e[t];e[t+1]=n}return e}function Kb(e,r,t){var n=typeof e.get=="function",i=[];n?(e.forEach(function(u,c){i.push([ln(c,r,t),ln(u,r,t)])}),vo(i,Yb)):(e.forEach(function(u){i.push(ln(u,r,t))}),vo(i,xl));for(var o=qb(e.constructor)+"|[",a=0,s=i.length,f;a<s;++a)f=i[a],o+=(a?",":"")+(n?"["+f[0]+","+f[1]+"]":f);return o+"]"}function zb(e){for(var r=vo(Wb(e),xl),t={},n,i=0;i<r.length;++i)n=r[i],t[n]=e[n];return t}function Gb(e){return String.fromCharCode.apply(null,new Uint16Array(e))}function Jb(e){return Buffer.from(e).toString("utf8")}function Xb(){return""}var qs=function(){return Nb?Jb:kb?Gb:Xb}();function Qb(e){for(var r=e.children,t="",n=0;n<r.length;++n)t+=r[n].outerHTML;return t}function Hs(e,r){for(var t=0;t<e.length;++t)if(e[t]===r)return t+1;return 0}function $n(e,r,t,n){if(n===void 0){var i=typeof e;if(i==="string"||Pb[i])return i+"|"+e;if(e===null)return"null|"+e}var o=n||Sl.call(e);return Bb[o]?e:o===te.OBJECT?zb(e):Fb[o]?Xe[o]+"|"+e.toString():Ib[o]?Kb(e,r,t):o===te.DATE?Xe[o]+"|"+e.getTime():o===te.ERROR?Xe[o]+"|"+e.stack:o===te.EVENT?Vb(e):jb[o]?Xe[o]+"|NOT_ENUMERABLE":Mb.test(o)||$b.test(o)?o.slice(8,-1)+"|"+e.outerHTML:o===te.DOCUMENTFRAGMENT?Xe[o]+"|"+Qb(e):Lb[o]?Xe[o]+"|"+e.join(","):o===te.ARRAYBUFFER?Xe[o]+"|"+qs(e):o===te.DATAVIEW?Xe[o]+"|"+qs(e.buffer):e}function Zb(e,r){return e===void 0&&(e=[]),r===void 0&&(r=[]),function(t,n){if(typeof n=="object")if(e.length){var i=Hs(e,this);i===0?e.push(this):(e.splice(i),r.splice(i)),r.push(t);var o=Hs(e,n);if(o!==0)return"[~"+(r.slice(0,o).join(".")||".")+"]";e.push(n)}else e[0]=n,r[0]=t;return t&&this[t]instanceof Date?$n(this[t],e,r,te.DATE):$n(n,e,r)}}function ln(e,r,t){if(!e||typeof e!="object")return $n(e,r,t);var n=Sl.call(e);return n===te.DATE||n===te.REGEXP?$n(e,r,t,n):JSON.stringify(e,Zb(r,t))}function Le(e){return Hb(ln(e))}Le.is=Pr(function(e,r){return Le(e)===Le(r)});Le.is.all=Pr(function(e){for(var r=Le.is(e),t=1;t<arguments.length;++t)if(!r(arguments[t]))return!1;return!0},2);Le.is.any=Pr(function(e){for(var r=Le.is(e),t=1;t<arguments.length;t++)if(r(arguments[t]))return!0;return!1},2);Le.is.not=Pr(function(e,r){return Le(e)!==Le(r)});const ew=Object.freeze(Object.defineProperty({__proto__:null,hash:Le,default:Le},Symbol.toStringTag,{value:"Module"})),rw=bo(ew);Object.defineProperty(Vt,"__esModule",{value:!0});var tw=function(){function e(r,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),nw=rw,iw=ow(nw);function ow(e){return e&&e.__esModule?e:{default:e}}function aw(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var ra=function(){function e(r,t,n){aw(this,e),this.id=r;var i={cache:!0};if(typeof n>"u"&&(n=i),typeof t!="function"?(this.value=t,this.type=this.constructor.CONSTANT):(this.calculationMethod=t,this.type=this.constructor.DYNAMIC),!this.id)throw new Error("factId required");if(typeof this.value>"u"&&typeof this.calculationMethod>"u")throw new Error("facts must have a value or method");return this.priority=parseInt(n.priority||1,10),this.options=Object.assign({},i,n),this.cacheKeyMethod=this.defaultCacheKeys,this}return tw(e,[{key:"isConstant",value:function(){return this.type===this.constructor.CONSTANT}},{key:"isDynamic",value:function(){return this.type===this.constructor.DYNAMIC}},{key:"calculate",value:function(t,n){return this.hasOwnProperty("value")?this.value:this.calculationMethod(t,n)}},{key:"defaultCacheKeys",value:function(t,n){return{params:n,id:t}}},{key:"getCacheKey",value:function(t){if(this.options.cache===!0){var n=this.cacheKeyMethod(this.id,t),i=e.hashFromObject(n);return i}}}],[{key:"hashFromObject",value:function(t){return(0,iw.default)(t)}}]),e}();ra.CONSTANT="CONSTANT";ra.DYNAMIC="DYNAMIC";Vt.default=ra;var ei={},ta={},ot={};Object.defineProperty(ot,"__esModule",{value:!0});ot.default=sw;function sw(e){(typeof process<"u"&&process.env&&process.env.DEBUG&&process.env.DEBUG.match(/json-rules-engine/)||typeof window<"u"&&window.localStorage&&window.localStorage.debug&&window.localStorage.debug.match(/json-rules-engine/))&&console.log(e)}function fw(e){return!!e&&typeof e=="object"}var Rl=fw;Object.defineProperty(ta,"__esModule",{value:!0});var uw=function(){function e(r,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),lw=ot,cw=Al(lw),hw=Rl,dw=Al(hw);function Al(e){return e&&e.__esModule?e:{default:e}}function pw(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var gw=function(){function e(r){if(pw(this,e),!r)throw new Error("Condition: constructor options required");var t=e.booleanOperator(r);if(Object.assign(this,r),t){var n=r[t];if(!Array.isArray(n))throw new Error('"'+t+'" must be an array');this.operator=t,this.priority=parseInt(r.priority,10)||1,this[t]=n.map(function(i){return new e(i)})}else{if(!r.hasOwnProperty("fact"))throw new Error('Condition: constructor "fact" property required');if(!r.hasOwnProperty("operator"))throw new Error('Condition: constructor "operator" property required');if(!r.hasOwnProperty("value"))throw new Error('Condition: constructor "value" property required');r.hasOwnProperty("priority")&&(r.priority=parseInt(r.priority,10))}}return uw(e,[{key:"toJSON",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n={};this.priority&&(n.priority=this.priority);var i=e.booleanOperator(this);return i?n[i]=this[i].map(function(o){return o.toJSON(t)}):(n.operator=this.operator,n.value=this.value,n.fact=this.fact,this.factResult!==void 0&&(n.factResult=this.factResult),this.result!==void 0&&(n.result=this.result),this.params&&(n.params=this.params),this.path&&(n.path=this.path)),t?JSON.stringify(n):n}},{key:"_getValue",value:function(t){var n=this.value;return(0,dw.default)(n)&&n.hasOwnProperty("fact")?t.factValue(n.fact,n.params,n.path):Promise.resolve(n)}},{key:"evaluate",value:function(t,n){var i=this;if(!t)return Promise.reject(new Error("almanac required"));if(!n)return Promise.reject(new Error("operatorMap required"));if(this.isBooleanOperator())return Promise.reject(new Error("Cannot evaluate() a boolean condition"));var o=n.get(this.operator);return o?this._getValue(t).then(function(a){return t.factValue(i.fact,i.params,i.path).then(function(s){var f=o.evaluate(s,a);return(0,cw.default)("condition::evaluate <"+s+" "+i.operator+" "+a+"?> ("+f+")"),{result:f,leftHandSideValue:s,rightHandSideValue:a,operator:i.operator}})}):Promise.reject(new Error("Unknown operator: "+this.operator))}},{key:"booleanOperator",value:function(){return e.booleanOperator(this)}},{key:"isBooleanOperator",value:function(){return e.booleanOperator(this)!==void 0}}],[{key:"booleanOperator",value:function(t){if(t.hasOwnProperty("any"))return"any";if(t.hasOwnProperty("all"))return"all"}}]),e}();ta.default=gw;var na={},Ol={exports:{}};(function(e){var r=function(){function t(p,h){return h!=null&&p instanceof h}var n;try{n=Map}catch{n=function(){}}var i;try{i=Set}catch{i=function(){}}var o;try{o=Promise}catch{o=function(){}}function a(p,h,d,v,w){typeof h=="object"&&(d=h.depth,v=h.prototype,w=h.includeNonEnumerable,h=h.circular);var y=[],_=[],C=typeof Buffer<"u";typeof h>"u"&&(h=!0),typeof d>"u"&&(d=1/0);function b(g,m){if(g===null)return null;if(m===0)return g;var S,N;if(typeof g!="object")return g;if(t(g,n))S=new n;else if(t(g,i))S=new i;else if(t(g,o))S=new o(function(k,O){g.then(function(I){k(b(I,m-1))},function(I){O(b(I,m-1))})});else if(a.__isArray(g))S=[];else if(a.__isRegExp(g))S=new RegExp(g.source,l(g)),g.lastIndex&&(S.lastIndex=g.lastIndex);else if(a.__isDate(g))S=new Date(g.getTime());else{if(C&&Buffer.isBuffer(g))return Buffer.allocUnsafe?S=Buffer.allocUnsafe(g.length):S=new Buffer(g.length),g.copy(S),S;t(g,Error)?S=Object.create(g):typeof v>"u"?(N=Object.getPrototypeOf(g),S=Object.create(N)):(S=Object.create(v),N=v)}if(h){var B=y.indexOf(g);if(B!=-1)return _[B];y.push(g),_.push(S)}t(g,n)&&g.forEach(function(k,O){var I=b(O,m-1),T=b(k,m-1);S.set(I,T)}),t(g,i)&&g.forEach(function(k){var O=b(k,m-1);S.add(O)});for(var U in g){var Q;N&&(Q=Object.getOwnPropertyDescriptor(N,U)),!(Q&&Q.set==null)&&(S[U]=b(g[U],m-1))}if(Object.getOwnPropertySymbols)for(var A=Object.getOwnPropertySymbols(g),U=0;U<A.length;U++){var R=A[U],D=Object.getOwnPropertyDescriptor(g,R);D&&!D.enumerable&&!w||(S[R]=b(g[R],m-1),D.enumerable||Object.defineProperty(S,R,{enumerable:!1}))}if(w)for(var j=Object.getOwnPropertyNames(g),U=0;U<j.length;U++){var z=j[U],D=Object.getOwnPropertyDescriptor(g,z);D&&D.enumerable||(S[z]=b(g[z],m-1),Object.defineProperty(S,z,{enumerable:!1}))}return S}return b(p,d)}a.clonePrototype=function(h){if(h===null)return null;var d=function(){};return d.prototype=h,new d};function s(p){return Object.prototype.toString.call(p)}a.__objToStr=s;function f(p){return typeof p=="object"&&s(p)==="[object Date]"}a.__isDate=f;function u(p){return typeof p=="object"&&s(p)==="[object Array]"}a.__isArray=u;function c(p){return typeof p=="object"&&s(p)==="[object RegExp]"}a.__isRegExp=c;function l(p){var h="";return p.global&&(h+="g"),p.ignoreCase&&(h+="i"),p.multiline&&(h+="m"),h}return a.__getRegExpFlags=l,a}();e.exports&&(e.exports=r)})(Ol);Object.defineProperty(na,"__esModule",{value:!0});var vw=function(){function e(r,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),mw=Ol.exports,en=yw(mw);function yw(e){return e&&e.__esModule?e:{default:e}}function bw(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var ww=function(){function e(r,t,n,i){bw(this,e),this.conditions=(0,en.default)(r),this.event=(0,en.default)(t),this.priority=(0,en.default)(n),this.name=(0,en.default)(i),this.result=null}return vw(e,[{key:"setResult",value:function(t){this.result=t}},{key:"toJSON",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n={conditions:this.conditions.toJSON(!1),event:this.event,priority:this.priority,name:this.name,result:this.result};return t?JSON.stringify(n):n}}]),e}();na.default=ww;Object.defineProperty(ei,"__esModule",{value:!0});var _w=function(){function e(r,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),Ew=ta,Sw=ia(Ew),xw=na,Rw=ia(xw),Aw=Ue.exports,Ow=ot,Li=ia(Ow);function ia(e){return e&&e.__esModule?e:{default:e}}function Tw(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Cw(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function Nw(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var kw=function(e){Nw(r,e);function r(t){Tw(this,r);var n=Cw(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));typeof t=="string"&&(t=JSON.parse(t)),t&&t.conditions&&n.setConditions(t.conditions),t&&t.onSuccess&&n.on("success",t.onSuccess),t&&t.onFailure&&n.on("failure",t.onFailure),t&&(t.name||t.name===0)&&n.setName(t.name);var i=t&&t.priority||1;n.setPriority(i);var o=t&&t.event||{type:"unknown"};return n.setEvent(o),n}return _w(r,[{key:"setPriority",value:function(n){if(n=parseInt(n,10),n<=0)throw new Error("Priority must be greater than zero");return this.priority=n,this}},{key:"setName",value:function(n){if(!n&&n!==0)throw new Error('Rule "name" must be defined');return this.name=n,this}},{key:"setConditions",value:function(n){if(!n.hasOwnProperty("all")&&!n.hasOwnProperty("any"))throw new Error('"conditions" root must contain a single instance of "all" or "any"');return this.conditions=new Sw.default(n),this}},{key:"setEvent",value:function(n){if(!n)throw new Error("Rule: setEvent() requires event object");if(!n.hasOwnProperty("type"))throw new Error('Rule: setEvent() requires event object with "type" property');return this.event={type:n.type},n.params&&(this.event.params=n.params),this}},{key:"setEngine",value:function(n){return this.engine=n,this}},{key:"toJSON",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i={conditions:this.conditions.toJSON(!1),priority:this.priority,event:this.event,name:this.name};return n?JSON.stringify(i):i}},{key:"prioritizeConditions",value:function(n){var i=this,o=n.reduce(function(a,s){var f=s.priority;if(!f){var u=i.engine.getFact(s.fact);f=u&&u.priority||1}return a[f]||(a[f]=[]),a[f].push(s),a},{});return Object.keys(o).sort(function(a,s){return Number(a)>Number(s)?-1:1}).map(function(a){return o[a]})}},{key:"evaluate",value:function(n){var i=this,o=new Rw.default(this.conditions,this.event,this.priority,this.name),a=function(h){if(h.isBooleanOperator()){var d=h[h.operator],v=void 0;return h.operator==="all"?v=c(d):v=u(d),v.then(function(w){var y=w===!0;return h.result=y,y})}else return h.evaluate(n,i.engine.operators).then(function(w){var y=w.result;return h.factResult=w.leftHandSideValue,h.result=y,y})},s=function(h,d){return Array.isArray(h)||(h=[h]),Promise.all(h.map(function(v){return a(v)})).then(function(v){return(0,Li.default)("rule::evaluateConditions results",v),d.call(v,function(w){return w===!0})})},f=function(h,d){if(h.length===0)return Promise.resolve(!0);var v=Array.prototype.some;d==="all"&&(v=Array.prototype.every);for(var w=i.prioritizeConditions(h),y=Promise.resolve(),_=function(g){var m=w[g],S=!1;y=y.then(function(N){return d==="any"&&N===!0||S?((0,Li.default)("prioritizeAndRun::detected truthy result; skipping remaining conditions"),S=!0,!0):d==="all"&&N===!1||S?((0,Li.default)("prioritizeAndRun::detected falsey result; skipping remaining conditions"),S=!0,!1):s(m,v)})},C=0;C<w.length;C++)_(C);return y},u=function(h){return f(h,"any")},c=function(h){return f(h,"all")},l=function(h){return o.setResult(h),h?i.emit("success",o.event,n,o):i.emit("failure",o.event,n,o),o};return o.conditions.any?u(o.conditions.any).then(function(p){return l(p)}):c(o.conditions.all).then(function(p){return l(p)})}}]),r}(Aw.EventEmitter);ei.default=kw;var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});var Mw=function(){function e(r,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();function $w(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var Dw=function(){function e(r,t,n){if($w(this,e),this.name=String(r),!r)throw new Error("Missing operator name");if(typeof t!="function")throw new Error("Missing operator callback");this.cb=t,this.factValueValidator=n,this.factValueValidator||(this.factValueValidator=function(){return!0})}return Mw(e,[{key:"evaluate",value:function(t,n){return this.factValueValidator(t)&&this.cb(t,n)}}]),e}();Yt.default=Dw;var oa={},aa={};Object.defineProperty(aa,"__esModule",{value:!0});function Iw(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Pw(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function Bw(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}aa.UndefinedFactError=function(e){Bw(r,e);function r(){var t;Iw(this,r);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=Pw(this,(t=r.__proto__||Object.getPrototypeOf(r)).call.apply(t,[this].concat(i)));return a.code="UNDEFINED_FACT",a}return r}(Error);var ji,Vs;function Fw(){return Vs||(Vs=1,ji=function(e){var r=this,t;if(arguments.length<2)t=function(){if(this instanceof t){var o=r.apply(this,arguments);return Object(o)===o?o:this}else return r.apply(e,arguments)};else{for(var n=new Array(arguments.length-1),i=1;i<arguments.length;i++)n[i-1]=arguments[i];t=function(){var o=n.length,a=new Array(o+arguments.length),s;for(s=0;s<o;s++)a[s]=n[s];for(s=0;s<arguments.length;s++)a[o+s]=arguments[s];if(this instanceof t){var f=r.apply(this,a);return Object(f)===f?f:this}else return r.apply(e,a)}}return t.prototype=r.prototype,t}),ji}/*!
 * imports.
 */var Lw=Function.prototype.bind||Fw();/*!
 * exports.
 */var jw=Uw;function Uw(e,r){var t=function(){return arguments.length===0?t:arguments.length>1?e.apply(r,arguments):Lw.call(e,r,arguments[0])};return t.uncurry=function(){return e},t}var mo={exports:{}},yo={exports:{}},Tt=1e3,Ct=Tt*60,Nt=Ct*60,kt=Nt*24,Ww=kt*365.25,qw=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return Hw(e);if(t==="number"&&isNaN(e)===!1)return r.long?Yw(e):Vw(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Hw(e){if(e=String(e),!(e.length>100)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!!r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*Ww;case"days":case"day":case"d":return t*kt;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Nt;case"minutes":case"minute":case"mins":case"min":case"m":return t*Ct;case"seconds":case"second":case"secs":case"sec":case"s":return t*Tt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Vw(e){return e>=kt?Math.round(e/kt)+"d":e>=Nt?Math.round(e/Nt)+"h":e>=Ct?Math.round(e/Ct)+"m":e>=Tt?Math.round(e/Tt)+"s":e+"ms"}function Yw(e){return rn(e,kt,"day")||rn(e,Nt,"hour")||rn(e,Ct,"minute")||rn(e,Tt,"second")||e+" ms"}function rn(e,r,t){if(!(e<r))return e<r*1.5?Math.floor(e/r)+" "+t:Math.ceil(e/r)+" "+t+"s"}(function(e,r){r=e.exports=i.debug=i.default=i,r.coerce=f,r.disable=a,r.enable=o,r.enabled=s,r.humanize=qw,r.names=[],r.skips=[],r.formatters={};var t;function n(u){var c=0,l;for(l in u)c=(c<<5)-c+u.charCodeAt(l),c|=0;return r.colors[Math.abs(c)%r.colors.length]}function i(u){function c(){if(!!c.enabled){var l=c,p=+new Date,h=p-(t||p);l.diff=h,l.prev=t,l.curr=p,t=p;for(var d=new Array(arguments.length),v=0;v<d.length;v++)d[v]=arguments[v];d[0]=r.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");var w=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,function(_,C){if(_==="%%")return _;w++;var b=r.formatters[C];if(typeof b=="function"){var g=d[w];_=b.call(l,g),d.splice(w,1),w--}return _}),r.formatArgs.call(l,d);var y=c.log||r.log||console.log.bind(console);y.apply(l,d)}}return c.namespace=u,c.enabled=r.enabled(u),c.useColors=r.useColors(),c.color=n(u),typeof r.init=="function"&&r.init(c),c}function o(u){r.save(u),r.names=[],r.skips=[];for(var c=(typeof u=="string"?u:"").split(/[\s,]+/),l=c.length,p=0;p<l;p++)!c[p]||(u=c[p].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function a(){r.enable("")}function s(u){var c,l;for(c=0,l=r.skips.length;c<l;c++)if(r.skips[c].test(u))return!1;for(c=0,l=r.names.length;c<l;c++)if(r.names[c].test(u))return!0;return!1}function f(u){return u instanceof Error?u.stack||u.message:u}})(yo,yo.exports);(function(e,r){r=e.exports=yo.exports,r.log=i,r.formatArgs=n,r.save=o,r.load=a,r.useColors=t,r.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:s(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function t(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}r.formatters.j=function(f){try{return JSON.stringify(f)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}};function n(f){var u=this.useColors;if(f[0]=(u?"%c":"")+this.namespace+(u?" %c":" ")+f[0]+(u?"%c ":" ")+"+"+r.humanize(this.diff),!!u){var c="color: "+this.color;f.splice(1,0,c,"color: inherit");var l=0,p=0;f[0].replace(/%[a-zA-Z%]/g,function(h){h!=="%%"&&(l++,h==="%c"&&(p=l))}),f.splice(p,0,c)}}function i(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(f){try{f==null?r.storage.removeItem("debug"):r.storage.debug=f}catch{}}function a(){var f;try{f=r.storage.debug}catch{}return!f&&typeof process<"u"&&"env"in process&&(f=process.env.DEBUG),f}r.enable(a());function s(){try{return window.localStorage}catch{}}})(mo,mo.exports);/*!
 * exports.
 */var Kw=Jw;/*!
 * regexp patterns.
 */var zw=/\[([^\[\]]+)\]/g,Gw=/^[.]*|[.]*$/g;function Jw(e){return{}.toString.call(e)=="[object String]"?e.replace(zw,".$1").replace(Gw,""):""}var Xw=Object.prototype.toString;function Qw(e){for(var r=-1,t=e0(Zw(e).split(".")),n=t.length,i=[];++r<n;)i.push(r0(t[r]));return i}function Zw(e){return(Xw.call(e)==="[object String]"?e:"").replace(/\\\./g,"\uFFFF")}function e0(e){for(var r=-1,t=e.length,n=[];++r<t;)e[r]&&n.push(e[r]);return n}function r0(e){return e.replace(/\uffff/g,".")}/*!
 * exports.
 */var t0=Qw,n0=jw,Ys=mo.exports("selectn"),i0=Kw,o0=t0,a0=Object.prototype.toString,s0=n0(f0);function f0(e,r){Ys("arguments:",{path:e,object:r});for(var t=-1,n=a0.call(e)==="[object Array]"?e:o0(i0(e)),i=n.length,o=i?r:void 0;++t<i;){if(Object(o)!==o)return;o=o[n[t]]}return Ys("ref:",o),typeof o=="function"?o():o}Object.defineProperty(oa,"__esModule",{value:!0});var Ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u0=function(){function e(r,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),l0=Vt,Ui=ri(l0),c0=aa,h0=ot,lt=ri(h0),d0=s0,p0=ri(d0),g0=Rl,v0=ri(g0);function ri(e){return e&&e.__esModule?e:{default:e}}function m0(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var y0=function(){function e(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};m0(this,e),this.factMap=new Map(r),this.factResultsCache=new Map,this.allowUndefinedFacts=Boolean(n.allowUndefinedFacts);for(var i in t){var o=void 0;t[i]instanceof Ui.default?o=t[i]:o=new Ui.default(i,t[i]),this._addConstantFact(o),(0,lt.default)("almanac::constructor initialized runtime fact:"+o.id+" with "+o.value+"<"+Ks(o.value)+">")}}return u0(e,[{key:"_getFact",value:function(t){return this.factMap.get(t)}},{key:"_addConstantFact",value:function(t){this.factMap.set(t.id,t),this._setFactValue(t,{},t.value)}},{key:"_setFactValue",value:function(t,n,i){var o=t.getCacheKey(n),a=Promise.resolve(i);return o&&this.factResultsCache.set(o,a),a}},{key:"addRuntimeFact",value:function(t,n){var i=new Ui.default(t,n);return this._addConstantFact(i)}},{key:"factValue",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",o=void 0,a=this._getFact(t);if(a===void 0)return this.allowUndefinedFacts?Promise.resolve(void 0):Promise.reject(new c0.UndefinedFactError("Undefined fact: "+t));if(a.isConstant())o=Promise.resolve(a.calculate(n,this));else{var s=a.getCacheKey(n),f=s&&this.factResultsCache.get(s);f?(o=Promise.resolve(f),(0,lt.default)("almanac::factValue cache hit for fact:"+t)):((0,lt.default)("almanac::factValue cache miss for fact:"+t+"; calculating"),o=this._setFactValue(a,n,a.calculate(n,this)))}return i?o.then(function(u){if((0,v0.default)(u)){var c=(0,p0.default)(i)(u);return(0,lt.default)("condition::evaluate extracting object property "+i+", received: "+c),c}else return(0,lt.default)("condition::evaluate could not compute object path("+i+") of non-object: "+u+" <"+(typeof u>"u"?"undefined":Ks(u))+">; continuing with "+u),u}):o}}]),e}();oa.default=y0;var sa={};Object.defineProperty(sa,"__esModule",{value:!0});var b0=function(){var r=[];return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.event&&r.push(t.event),r}};sa.SuccessEventFact=b0;var fa={};Object.defineProperty(fa,"__esModule",{value:!0});var w0=Yt,ir=_0(w0);function _0(e){return e&&e.__esModule?e:{default:e}}var Ge=[];Ge.push(new ir.default("equal",function(e,r){return e===r}));Ge.push(new ir.default("notEqual",function(e,r){return e!==r}));Ge.push(new ir.default("in",function(e,r){return r.indexOf(e)>-1}));Ge.push(new ir.default("notIn",function(e,r){return r.indexOf(e)===-1}));Ge.push(new ir.default("contains",function(e,r){return e.indexOf(r)>-1},Array.isArray));Ge.push(new ir.default("doesNotContain",function(e,r){return e.indexOf(r)===-1},Array.isArray));function ti(e){return Number.parseFloat(e).toString()!=="NaN"}Ge.push(new ir.default("lessThan",function(e,r){return e<r},ti));Ge.push(new ir.default("lessThanInclusive",function(e,r){return e<=r},ti));Ge.push(new ir.default("greaterThan",function(e,r){return e>r},ti));Ge.push(new ir.default("greaterThanInclusive",function(e,r){return e>=r},ti));fa.default=Ge;Object.defineProperty(ar,"__esModule",{value:!0});ar.FINISHED=ar.RUNNING=ar.READY=void 0;var E0=function(){function e(r,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),S0=Vt,tn=at(S0),x0=ei,Wi=at(x0),R0=Yt,qi=at(R0),A0=oa,O0=at(A0),T0=Ue.exports,C0=sa,N0=fa,k0=at(N0),M0=ot,Ar=at(M0);function at(e){return e&&e.__esModule?e:{default:e}}function $0(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function D0(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function I0(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var P0=ar.READY="READY",zs=ar.RUNNING="RUNNING",Gs=ar.FINISHED="FINISHED",B0=function(e){I0(r,e);function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$0(this,r);var i=D0(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return i.rules=[],i.allowUndefinedFacts=n.allowUndefinedFacts||!1,i.operators=new Map,i.facts=new Map,i.status=P0,t.map(function(o){return i.addRule(o)}),k0.default.map(function(o){return i.addOperator(o)}),i}return E0(r,[{key:"addRule",value:function(n){if(!n)throw new Error("Engine: addRule() requires options");if(!n.hasOwnProperty("conditions"))throw new Error('Engine: addRule() argument requires "conditions" property');if(!n.hasOwnProperty("event"))throw new Error('Engine: addRule() argument requires "event" property');var i=void 0;return n instanceof Wi.default?i=n:i=new Wi.default(n),i.setEngine(this),this.rules.push(i),this.prioritizedRules=null,this}},{key:"removeRule",value:function(n){if(!(n instanceof Wi.default))throw new Error("Engine: removeRule() rule must be a instance of Rule");var i=this.rules.indexOf(n);return i===-1?!1:(this.prioritizedRules=null,Boolean(this.rules.splice(i,1).length))}},{key:"addOperator",value:function(n,i){var o=void 0;n instanceof qi.default?o=n:o=new qi.default(n,i),(0,Ar.default)("engine::addOperator name:"+o.name),this.operators.set(o.name,o)}},{key:"removeOperator",value:function(n){var i=void 0;return n instanceof qi.default?i=n.name:i=n,this.operators.delete(i)}},{key:"addFact",value:function(n,i,o){var a=n,s=void 0;return n instanceof tn.default?(a=n.id,s=n):s=new tn.default(n,i,o),(0,Ar.default)("engine::addFact id:"+a),this.facts.set(a,s),this}},{key:"removeFact",value:function(n){var i=void 0;return n instanceof tn.default?i=n.id:i=n,this.facts.delete(i)}},{key:"prioritizeRules",value:function(){if(!this.prioritizedRules){var n=this.rules.reduce(function(i,o){var a=o.priority;return i[a]||(i[a]=[]),i[a].push(o),i},{});this.prioritizedRules=Object.keys(n).sort(function(i,o){return Number(i)>Number(o)?-1:1}).map(function(i){return n[i]})}return this.prioritizedRules}},{key:"stop",value:function(){return this.status=Gs,this}},{key:"getFact",value:function(n){return this.facts.get(n)}},{key:"evaluateRules",value:function(n,i){var o=this;return Promise.all(n.map(function(a){if(o.status!==zs){(0,Ar.default)("engine::run status:"+o.status+"; skipping remaining rules");return}return a.evaluate(i).then(function(s){(0,Ar.default)("engine::run ruleResult:"+s.result),s.result?(o.emit("success",a.event,i,s),o.emit(a.event.type,a.event.params,i,s),i.factValue("success-events",{event:a.event})):o.emit("failure",a.event,i,s)})}))}},{key:"run",value:function(){var n=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,Ar.default)("engine::run started"),(0,Ar.default)("engine::run runtimeFacts:",i),i["success-events"]=new tn.default("success-events",(0,C0.SuccessEventFact)(),{cache:!1}),this.status=zs;var o=new O0.default(this.facts,i,{allowUndefinedFacts:this.allowUndefinedFacts}),a=this.prioritizeRules(),s=Promise.resolve();return new Promise(function(f,u){a.map(function(c){return s=s.then(function(){return n.evaluateRules(c,o)}).catch(u),s}),s.then(function(){return n.status=Gs,(0,Ar.default)("engine::run completed"),o.factValue("success-events")}).then(function(c){f({events:c,almanac:o})}).catch(u)})}}]),r}(T0.EventEmitter);ar.default=B0;Object.defineProperty(Ye,"__esModule",{value:!0});Ye.Engine=Ye.Operator=Ye.Rule=Ye.Fact=void 0;Ye.default=function(e,r){return new Tl.default(e,r)};var F0=ar,Tl=ni(F0),L0=Vt,j0=ni(L0),U0=ei,W0=ni(U0),q0=Yt,H0=ni(q0);function ni(e){return e&&e.__esModule?e:{default:e}}Ye.Fact=j0.default;Ye.Rule=W0.default;Ye.Operator=H0.default;Ye.Engine=Tl.default;(function(e){e.exports=Ye})(go);var Fe=(e=>(e[e.TODO=0]="TODO",e[e.PROGRESS=1]="PROGRESS",e[e.COMPLETED=2]="COMPLETED",e[e.EXCLUDED=3]="EXCLUDED",e[e.ERROR=4]="ERROR",e))(Fe||{}),_e=(e=>(e[e.PREVIOUS=0]="PREVIOUS",e[e.NEXT=1]="NEXT",e[e.GO_TO_STEP=2]="GO_TO_STEP",e[e.SAVE=3]="SAVE",e[e.SUBMIT=4]="SUBMIT",e[e.VALIDATE=5]="VALIDATE",e[e.NONE=6]="NONE",e))(_e||{}),Re=(e=>(e[e.PROGRESS=0]="PROGRESS",e[e.ERROR=1]="ERROR",e[e.SAVE_SUCCESS=2]="SAVE_SUCCESS",e[e.SUBMIT_SUCCESS=3]="SUBMIT_SUCCESS",e[e.ERROR_CRITICAL=4]="ERROR_CRITICAL",e))(Re||{});function cn(e){let r=P(me,{});return e.isSubmitted?r=P("div",{children:"Your information has been submitted"}):e.bodyText&&(r=P("div",{dangerouslySetInnerHTML:{__html:e.bodyText}})),re("div",{className:`submission-header${e.isSubmitted?" submitted":""}`,children:[P("h2",{children:e.title}),r,P("hr",{})]})}try{cn.displayName="Header",cn.__docgenInfo={description:"",displayName:"Header",props:{isSubmitted:{defaultValue:null,description:"",name:"isSubmitted",required:!1,type:{name:"boolean"}},bodyText:{defaultValue:null,description:"",name:"bodyText",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/Header.tsx#Header"]={docgenInfo:cn.__docgenInfo,name:"Header",path:"src/lib/containers/synapse_form_wrapper/Header.tsx#Header"})}catch{}function hn(e){const r=e.stepList.filter(o=>o.child!==!0),t=(o,a,s,f)=>{let u="circle";return s||f?{iconDef:u}:(a?u="block":o===Fe.COMPLETED?u="checkCircle":o===Fe.ERROR&&(u="errorOutlined"),{iconDef:u})},n=(o,a=!1)=>{let s="item";return o&&(s=`${s} pointed `),a&&(s=`${s} static`),s},i=(o,a,s=!1)=>{if(!o||o.child&&!s)return P(me,{});const f=(l,p,h)=>!l.inProgress&&(!p||!!l.final)?P("button",{className:"btn btn-link",onClick:()=>h(l),children:l.title}):P("span",{children:l.title}),u=t(o.state,o.excluded,o.static,o.final),c=n(o.inProgress,o.static);return re("div",{className:c,children:[P(bn,{options:{icon:u.iconDef}}),f(o,a,e.onStepChange)]})};return P("div",{className:"SRC-menuLayout json-forms-menu",style:{flex:"1"},children:P("ul",{children:r.map((o,a)=>re("li",{className:"item-wrap",children:[i(o,!!e.isWizardMode),o.children&&o.children.length>0&&P("div",{className:"subMenu",children:P("ul",{children:o.children&&o.children.map((s,f)=>{const u=e.stepList.find(c=>c.id===s);return typeof u>"u"?P(me,{}):P("li",{className:"item-wrap",children:i(u,!!e.isWizardMode,!0)},f+s)})})})]},a+o.id))})})}try{hn.displayName="StepsSideNav",hn.__docgenInfo={description:"",displayName:"StepsSideNav",props:{stepList:{defaultValue:null,description:"",name:"stepList",required:!0,type:{name:"Step[]"}},onStepChange:{defaultValue:null,description:"",name:"onStepChange",required:!0,type:{name:"Function"}},isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/StepsSideNav.tsx#StepsSideNav"]={docgenInfo:hn.__docgenInfo,name:"StepsSideNav",path:"src/lib/containers/synapse_form_wrapper/StepsSideNav.tsx#StepsSideNav"})}catch{}function dn(e){const t=(o=>o.isWizardMode?o.previousStepIds&&o.previousStepIds.length>0:o.steps.findIndex(a=>a.id===o.currentStep.id)>0)(e)?P("button",{type:"button",onClick:o=>e.onNavAction(_e.PREVIOUS),className:"btn btn-link nav-link prev",children:P(bn,{options:{icon:"chevronLeft"}})}):P(me,{}),n=e.currentStep.final?P(me,{}):P("button",{type:"button",onClick:o=>e.onNavAction(_e.NEXT),className:"btn btn-link nav-link next",children:P(bn,{options:{icon:"chevronRight"}})}),i=P("button",{type:"button",className:"btn btn-action save",disabled:e.isFormSubmitted,onClick:o=>e.onNavAction(_e.SAVE),children:"SAVE"});return re("div",{children:[P("hr",{}),re("div",{className:"buttonWrapper pull-right",children:[t," ",n," ",i]})]})}function pn(e){const r=e.steps.find(t=>t.id===e.nextStepId);return typeof r>"u"?P(me,{}):re("span",{className:"nav-link",children:[P("a",{onClick:t=>e.onNavAction(r),children:r.title}),P(bn,{options:{icon:"chevronRight"}})]})}try{dn.displayName="NavButtons",dn.__docgenInfo={description:"",displayName:"NavButtons",props:{isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}},previousStepIds:{defaultValue:null,description:"",name:"previousStepIds",required:!0,type:{name:"string[]"}},onNavAction:{defaultValue:null,description:"",name:"onNavAction",required:!0,type:{name:"Function"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"Step[]"}},currentStep:{defaultValue:null,description:"",name:"currentStep",required:!0,type:{name:"Step"}},isFormSubmitted:{defaultValue:null,description:"",name:"isFormSubmitted",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/NavButtons.tsx#NavButtons"]={docgenInfo:dn.__docgenInfo,name:"NavButtons",path:"src/lib/containers/synapse_form_wrapper/NavButtons.tsx#NavButtons"})}catch{}try{pn.displayName="NextStepLink",pn.__docgenInfo={description:"",displayName:"NextStepLink",props:{onNavAction:{defaultValue:null,description:"",name:"onNavAction",required:!0,type:{name:"Function"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"Step[]"}},nextStepId:{defaultValue:null,description:"",name:"nextStepId",required:!0,type:{name:"string | undefined"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/NavButtons.tsx#NextStepLink"]={docgenInfo:pn.__docgenInfo,name:"NextStepLink",path:"src/lib/containers/synapse_form_wrapper/NavButtons.tsx#NextStepLink"})}catch{}function gn(e){const r=re("div",{children:[P("h6",{children:"Data"}),P("pre",{children:JSON.stringify(e.formData,null,2)})]});return P(me,{children:!e.hidden&&r})}try{gn.displayName="DataDebug",gn.__docgenInfo={description:"",displayName:"DataDebug",props:{formData:{defaultValue:null,description:"",name:"formData",required:!0,type:{name:"any"}},hidden:{defaultValue:null,description:"",name:"hidden",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/DataDebug.tsx#DataDebug"]={docgenInfo:gn.__docgenInfo,name:"DataDebug",path:"src/lib/containers/synapse_form_wrapper/DataDebug.tsx#DataDebug"})}catch{}function V0(e,r,t){const n=/\[\d+\]\./g,i=/\.(\d)+/g;e=e.replace(i,"[$1]");const a=`${e.split(".").join(".properties.")}.title`,s=`${e}.ui:title`,f=a.replace(n,".items."),u=s.replace(n,".items."),c=a.match(n);let l=Jl(c);l&&(l=l.substring(1,l.length-2),l=isNaN(parseInt(l))?"":parseInt(l)+1+"");const p=Wr(t,s)||Wr(r.properties,a)||Wr(t,u)||Wr(r.properties,f)||`${f}`;return`${l?"["+l+"] ":""}${p}`}function Y0(e,r,t,n){function i(f,u,c){const l=".";return Object.keys(f).forEach(p=>{if(f[p]===null)u[c+p]="";else if(da(f[p])&&!ha(f[p]))for(const h in f[p])if(da(f[p][h])||ca(f[p])&&!ha(f[p][h]))i(f[p][h],u,`${c}${p}[${h}]${l}`);else{let d=u[`${c}${p}`];d=d?d+", ":"",u[`${c}${p}`]=d+f[p][h]}else ca(f[p])&&!Xl(f[p])?i(f[p],u,`${c}${p}${l}`):u[c+p]=f[p]}),u}const o=i(rf(e),[],"");return zl(o).map(f=>{let u=o[f];o[f]===!1&&(u="false"),o[f]===!0&&(u="true");const c=f.indexOf(".");return{screen:Gl(r,{id:f.substring(0,c)}),label:V0(f,t,n),value:u}}).filter(f=>f.label.indexOf(".properties.included.title")===-1).filter(f=>f.screen&&typeof f.value<"u").map(f=>({label:f.label,value:f.value,screen:f.screen})).sort((f,u)=>f.screen.order-u.screen.order)}function vn(e){let r=[];r=Y0(rf(e.formData),e.steps,e.schema,e.uiSchema);let t="";const n=re(me,{children:[P("table",{className:"table summary-table-header",children:P("thead",{children:re("tr",{children:[P("th",{children:"Step"}),P("th",{children:"Label"}),P("th",{children:"Value"})]})})}),P("div",{className:"scroll-area table-body",children:P("table",{className:"table summary-table",children:P("tbody",{children:r.map((i,o)=>re("tr",{children:[P("td",{children:t!==i.screen.id&&(t=i.screen.id)&&P("span",{children:i.screen.title})}),P("td",{children:i.label}),P("td",{children:i.value})]},o+i.screen.id+i.label))})})})]});return re(me,{children:[P("p",{className:"step-exclude-directions",children:"Below is all of the data you have entered. Before submitting, click 'Validate' to ensure that all of the required data has been entered."}),P("button",{className:"nav-link pull-right",onClick:()=>window.print(),children:"Print this data"}),P("div",{className:"panel panel-default padding-full wrap",children:P("div",{className:"summary scroll-area",children:n})})]})}try{vn.displayName="SummaryTable",vn.__docgenInfo={description:"",displayName:"SummaryTable",props:{isWizard:{defaultValue:null,description:"",name:"isWizard",required:!1,type:{name:"boolean"}},formData:{defaultValue:null,description:"",name:"formData",required:!0,type:{name:"any"}},callbackFn:{defaultValue:null,description:"",name:"callbackFn",required:!1,type:{name:"Function"}},steps:{defaultValue:null,description:"",name:"steps",required:!0,type:{name:"Step[]"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"FormSchema"}},uiSchema:{defaultValue:null,description:"",name:"uiSchema",required:!0,type:{name:"UiSchema"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/SummaryTable.tsx#SummaryTable"]={docgenInfo:vn.__docgenInfo,name:"SummaryTable",path:"src/lib/containers/synapse_form_wrapper/SummaryTable.tsx#SummaryTable"})}catch{}var Cl={exports:{}},ua={};const Nl=bo(Pl);var cr=Nl.jsx,Js=Nl.jsxs;Object.defineProperty(ua,"__esModule",{value:!0});var K0=Ur.exports,z0=cr("svg",{viewBox:"-2 -5 14 20",height:"100%",width:"100%",style:{position:"absolute",top:0},children:cr("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"})}),G0=cr("svg",{height:"100%",width:"100%",viewBox:"-2 -5 17 21",style:{position:"absolute",top:0},children:cr("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"})});function J0(e,r,t,n,i){var o=(e-t)/(r-t);if(o===0)return n;if(o===1)return i;for(var a="#",s=1;s<6;s+=2){var f=parseInt(n.substr(s,2),16),u=parseInt(i.substr(s,2),16),c=Math.round((1-o)*f+o*u).toString(16);c.length===1&&(c="0"+c),a+=c}return a}function Xs(e){if(e.length===7)return e;for(var r="#",t=1;t<4;t+=1)r+=e[t]+e[t];return r}function Qs(e,r,t,n,i){return J0(e,r,t,Xs(n),Xs(i))}function X0(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)===-1&&(t[n]=e[n]);return t}var Zs=function(e){function r(t){e.call(this,t);var n=t.height,i=t.width,o=t.checked;this.t=t.handleDiameter||n-2,this.i=Math.max(i-n,i-(n+this.t)/2),this.o=Math.max(0,(n-this.t)/2),this.state={s:o?this.i:this.o},this.n=0,this.e=0,this.h=this.h.bind(this),this.r=this.r.bind(this),this.a=this.a.bind(this),this.c=this.c.bind(this),this.l=this.l.bind(this),this.u=this.u.bind(this),this.f=this.f.bind(this),this.p=this.p.bind(this),this.b=this.b.bind(this),this.g=this.g.bind(this),this.v=this.v.bind(this),this.w=this.w.bind(this)}return e&&(r.__proto__=e),((r.prototype=Object.create(e&&e.prototype)).constructor=r).prototype.componentDidUpdate=function(t){t.checked!==this.props.checked&&this.setState({s:this.props.checked?this.i:this.o})},r.prototype.k=function(t){this.y.focus(),this.setState({C:t,M:!0,m:Date.now()})},r.prototype.x=function(t){var n=this.state,i=n.C,o=n.s,a=(this.props.checked?this.i:this.o)+t-i;n.R||t===i||this.setState({R:!0});var s=Math.min(this.i,Math.max(this.o,a));s!==o&&this.setState({s})},r.prototype.S=function(t){var n=this.state,i=n.s,o=n.R,a=n.m,s=this.props.checked,f=(this.i+this.o)/2,u=Date.now()-a;!o||u<250?this.T(t):s?f<i?this.setState({s:this.i}):this.T(t):i<f?this.setState({s:this.o}):this.T(t),this.setState({R:!1,M:!1}),this.n=Date.now()},r.prototype.h=function(t){t.preventDefault(),typeof t.button=="number"&&t.button!==0||(this.k(t.clientX),window.addEventListener("mousemove",this.r),window.addEventListener("mouseup",this.a))},r.prototype.r=function(t){t.preventDefault(),this.x(t.clientX)},r.prototype.a=function(t){this.S(t),window.removeEventListener("mousemove",this.r),window.removeEventListener("mouseup",this.a)},r.prototype.c=function(t){this.$=null,this.k(t.touches[0].clientX)},r.prototype.l=function(t){this.x(t.touches[0].clientX)},r.prototype.u=function(t){t.preventDefault(),this.S(t)},r.prototype.p=function(t){50<Date.now()-this.n&&(this.T(t),50<Date.now()-this.e&&this.setState({M:!1}))},r.prototype.b=function(){this.e=Date.now()},r.prototype.g=function(){this.setState({M:!0})},r.prototype.v=function(){this.setState({M:!1})},r.prototype.w=function(t){this.y=t},r.prototype.f=function(t){t.preventDefault(),this.y.focus(),this.T(t),this.setState({M:!1})},r.prototype.T=function(t){var n=this.props;(0,n.onChange)(!n.checked,t,n.id)},r.prototype.render=function(){var t=this.props,n=t.disabled,i=t.className,o=t.offColor,a=t.onColor,s=t.offHandleColor,f=t.onHandleColor,u=t.checkedIcon,c=t.uncheckedIcon,l=t.boxShadow,p=t.activeBoxShadow,h=t.height,d=t.width,v=X0(t,["disabled","className","offColor","onColor","offHandleColor","onHandleColor","checkedIcon","uncheckedIcon","boxShadow","activeBoxShadow","height","width","handleDiameter"]),w=this.state,y=w.s,_=w.R,C=w.M,b={position:"relative",display:"inline-block",textAlign:"left",opacity:n?.5:1,direction:"ltr",borderRadius:h/2,WebkitTransition:"opacity 0.25s",MozTransition:"opacity 0.25s",transition:"opacity 0.25s",touchAction:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},g={height:h,width:d,margin:Math.max(0,(this.t-h)/2),position:"relative",background:Qs(y,this.i,this.o,o,a),borderRadius:h/2,cursor:n?"default":"pointer",WebkitTransition:_?null:"background 0.25s",MozTransition:_?null:"background 0.25s",transition:_?null:"background 0.25s"},m={height:h,width:Math.min(1.5*h,d-(this.t+h)/2+1),position:"relative",opacity:(y-this.o)/(this.i-this.o),pointerEvents:"none",WebkitTransition:_?null:"opacity 0.25s",MozTransition:_?null:"opacity 0.25s",transition:_?null:"opacity 0.25s"},S={height:h,width:Math.min(1.5*h,d-(this.t+h)/2+1),position:"absolute",opacity:1-(y-this.o)/(this.i-this.o),right:0,top:0,pointerEvents:"none",WebkitTransition:_?null:"opacity 0.25s",MozTransition:_?null:"opacity 0.25s",transition:_?null:"opacity 0.25s"},N={height:this.t,width:this.t,background:Qs(y,this.i,this.o,s,f),display:"inline-block",cursor:n?"default":"pointer",borderRadius:"50%",position:"absolute",transform:"translateX("+y+"px)",top:Math.max(0,(h-this.t)/2),outline:0,boxShadow:C?p:l,border:0,WebkitTransition:_?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",MozTransition:_?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",transition:_?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s"};return Js("div",{className:i,style:b,children:[Js("div",{className:"react-switch-bg",style:g,onClick:n?null:this.f,onMouseDown:function(B){return B.preventDefault()},children:[u&&cr("div",{style:m,children:u}),c&&cr("div",{style:S,children:c})]}),cr("div",{className:"react-switch-handle",style:N,onClick:function(B){return B.preventDefault()},onMouseDown:n?null:this.h,onTouchStart:n?null:this.c,onTouchMove:n?null:this.l,onTouchEnd:n?null:this.u,onTouchCancel:n?null:this.v}),cr("input",{type:"checkbox",role:"switch",disabled:n,style:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1},...v,ref:this.w,onFocus:this.g,onBlur:this.v,onKeyUp:this.b,onChange:this.p})]})},r}(K0.Component);Zs.defaultProps={disabled:!1,offColor:"#888",onColor:"#080",offHandleColor:"#fff",onHandleColor:"#fff",uncheckedIcon:z0,checkedIcon:G0,boxShadow:null,activeBoxShadow:"0 0 2px 3px #3bf",height:28,width:56},ua.default=Zs;(function(e){e.exports=ua})(Cl);const Q0=Dl(Cl.exports);class mn extends Ur.exports.Component{constructor(r){super(r),this.excludeWarningText=re("div",{children:[P("p",{children:"This action will clear any entered data on this page and remove this form from your submission. You can include it again at anytime. Only this page will be affected."}),P("p",{children:"Are you sure you want to skip this step and clear any entered data?"})]}),this.excludeWarningHeader="Skip This Step?",this.unsavedDataWarning="You might have some unsaved data. Are you sure you want to leave?",this.navAction=_e.NONE,this.extraErrors=[],this.isNewForm=i=>Object.keys(i).length==1&&Object.keys(i)[0]==="metadata"||Object.keys(i).length==0,this.getFirstStep=(i,o)=>this.isNewForm(o)?i[0]:i.find(a=>a.final===!0)||i[0],this.onUnload=i=>this.state.hasUnsavedChanges?(i.preventDefault(),i.returnValue=this.unsavedDataWarning):void 0,this.setupBeforeUnloadListener=()=>{window.addEventListener("beforeunload",this.onUnload)},this._setIncludedPropInFormDataNonWizard=(i,o)=>{const a={},s=i.formData;return Object.keys(o).forEach(f=>{ee.get(o[f],"properties.included")&&ee.set(a,`${f}.included`,!0)}),{...s,...a}},this._setIncludedPropInFormDataWizard=i=>{const o=i.currentStep.id,a=ee.cloneDeep(i.formData);return ee.set(a,`${o}.included`,!0),a},this.getSchema=({id:i,final:o})=>o?this.props.schema:ee.pick(this.props.schema,["title","type",`properties.${i}`]),this.getNextStepId=async(i,o,a)=>{if(a)return a;if(!i.rules||i.rules.length===0)return i.default;const s=new go.exports.Engine(i.rules);try{const f=await s.run(o);return f.events.length>0?f.events[0].params.next:i.default}catch{return i.default}},this.moveStep=async(i,o,a,s=[...this.state.previousStepIds])=>{var h;const f=this.state.currentStep;let u;(h=this.formRef)!=null&&h.current&&this.formRef.current.setState({errorSchema:{}});const c=this.props.isWizardMode&&!o;c&&s.push(f.id),a?u=Fe.ERROR:(u=Fe.COMPLETED,!c&&this.props.isWizardMode&&(u=Fe.TODO)),o=await this.getNextStepId(f,i,o);const l=this.state.steps.map(d=>d.id===f.id?{...d,state:u,inProgress:!1}:d.id===o?{...d,inProgress:!0}:d);c&&ee.set(i,`${o}.included`,!0);const p=this.state.steps.find(d=>d.id===o);this.props.isWizardMode&&p.final&&Object.keys(i).forEach(d=>{i[d].included===void 0&&(i[d]={})}),this.saveStepState(s,l,p,i)},this.saveStepState=(i,o,a,s)=>{this.setState({previousStepIds:i,steps:o,currentStep:a,formData:s,hasValidated:!1,doShowErrors:!1})},this.goPrevious=async(i,o)=>{let a;const s=[...this.state.previousStepIds];if(this.props.isWizardMode)a=s.pop(),this.isSubmitScreen()||ee.set(i,`${this.state.currentStep.id}.included`,void 0);else{const f=ee.findIndex(this.state.steps,{id:this.state.currentStep.id});f>0&&(a=this.state.steps[f-1].id)}if(!ee.isUndefined(a))return this.moveStep(i,a,o,s)},this.triggerAction=async i=>{if(i===_e.SAVE)return this.props.onSave(this.state.formData);this.navAction=i,this.extraErrors=await this.runCustomValidation(this.state.formData,this.state.currentStep,this.state.steps),this.submitButtonRef.current&&this.submitButtonRef.current.click()},this.triggerStepChange=i=>{this.nextStep=i,this.triggerAction(_e.GO_TO_STEP)},this.onError=i=>{if(this.setState({doShowErrors:!0,hasValidated:!1}),this.navAction===_e.VALIDATE){const o=this.setStepStatusForFailedValidation(i.props,this.state.steps,!!this.props.isWizardMode,this.state.formData,this.getSchema(this.state.currentStep).properties||this.getSchema(this.state.currentStep));this.setState({steps:o}),this.formDivRef.current.scrollTo(0,0),this.state.isLoadingSaved&&(this.moveStep(this.state.formData,o[0].id,!0),this.setState({isLoadingSaved:!1}))}},this.setStepStatusForFailedValidation=(i,o,a,s,f)=>{const u=i.map(p=>ee.trimStart(p.property,".").split(".")[0]),c=Object.keys(f);return o.map(p=>{if(u.indexOf(p.id)>-1)return{...p,state:Fe.ERROR};if(c.indexOf(p.id)>-1){let h=Fe.COMPLETED;return a&&!ee.get(s[p.id],"included")&&(h=p.state),{...p,state:h}}else return p})},this.onSubmit=()=>{this.performAction(this.navAction,this.state.currentStep.state===Fe.ERROR)},this.isSubmitScreen=()=>this.state.currentStep.final===!0&&!this.state.isLoadingSaved,this.showExcludeStateWarningModal=(i,o=!1)=>{this.setState({modalContext:{action:this.toggleExcludeStep,arguments:[i,!0,o]}})},this.toggleExcludeStep=(i,o)=>{this.setState((a,s)=>{const f=a.steps.map(l=>l.id===i?{...l,excluded:o}:l),u=ee.cloneDeep(a.formData),c=ee.cloneDeep(a.currentStep);return c.id===i&&(c.excluded=o),o?u[i]={}:ee.set(u,`${i}.included`,!0),{steps:f,formData:u,modalContext:void 0,currentStep:c}})},this.renderNotification=i=>i===Re.SAVE_SUCCESS?P("div",{className:"notification-area",children:" Successfully saved "}):i===Re.SUBMIT_SUCCESS?P("div",{className:"notification-area",children:" Successfully submitted "}):i===Re.PROGRESS?P("div",{className:"notification-area",children:" working on it ...."}):P(me,{}),this.renderTextForStaticScreen=()=>{if(!this.state.currentStep.copy)return P(me,{});const i=this.state.currentStep.copy;return P("div",{className:"static-screen",dangerouslySetInnerHTML:{__html:i}})},this.renderOptionalFormSubheader=(i=!1)=>{if(i)return P(me,{});const o=this.state.currentStep;return o.excluded===!0?re("div",{className:"step-exclude-directions",children:["This form is currently not included in the submission.",P("button",{className:"btn btn-link",onClick:()=>this.toggleExcludeStep(o.id,!1),children:"INCLUDE"})]}):o.excluded===!1?re("div",{className:"step-exclude-directions",children:['This form is currently included in the submission. Enter some data if you have it, or click "Skip".',P("button",{className:"btn btn-link",onClick:()=>this.showExcludeStateWarningModal(this.state.currentStep.id),children:"SKIP"})]}):P(me,{})},this.renderHelpToggle=(i,o,a)=>i.static||i.final?P(me,{}):P(me,{children:re("label",{className:"pull-right toggle-help-label",children:[P("span",{children:"Hide help"}),P(Q0,{checkedIcon:!1,uncheckedIcon:!1,height:20,width:45,className:"toggle-help",offColor:"#ccc",onChange:()=>a(),checked:o}),P("span",{children:"Show help"})]})}),this.runCustomValidation=async(i,o,a)=>{const s=[];let f=o.validationRules||[],u={[o.id]:i[o.id]};if(o.final&&(f=a.reduce((p,h)=>h.validationRules&&h.validationRules.length>0?p.concat(h.validationRules):p,[]),u=ee.cloneDeep(i)),f.length===0)return[];const c=[];f.forEach(p=>{const h=p.event.params.property;if(h.indexOf("[*]")===-1)c.push(p);else{const d=h.split("[*]")[0].substring(1),v=ee.get(i,d);if(Array.isArray(v)&&typeof v!="string")for(let w=0;w<v.length;w++){const y=JSON.parse(JSON.stringify(p).replace(/\[\*\]/g,`[${w}]`));c.push(y)}else c.push(p)}});const l=new go.exports.Engine(c,{allowUndefinedFacts:!0});try{(await l.run(u)).events.forEach(d=>{const v={...d.params,params:{},stack:`${d.params.property} ${d.params.message}`};s.push(v)})}catch(p){console.log(p)}return s},this.transformErrors=i=>{if(this.extraErrors.forEach(a=>{i.find(s=>s.stack===a.stack)||i.push(a)}),this.navAction!==_e.SUBMIT&&this.navAction!==_e.VALIDATE&&(!this.props.isWizardMode||this.state.currentStep.final)){const a={...this.state.currentStep};return i.length>0?a.state=Fe.ERROR:a.state=Fe.COMPLETED,this.setState({currentStep:a}),[]}return i.filter(a=>a.name==="required").forEach(a=>{const s=a.property.substring(0,a.property.lastIndexOf("."));ee.remove(i,f=>f.property.indexOf(s)>-1&&(f.name==="enum"||f.name==="oneOf"))}),i.map(a=>(a.message=a.message.replace("property","field"),a))},this.renderErrorListTemplate=i=>{const{errors:o}=i,a=o.map((s,f)=>Z0(this.state.steps,s,this.uiSchema,f,this.props.schema)).sort((s,f)=>s.order-f.order).map(s=>s.element);return P("div",{className:"form-error-summary",children:P("ul",{className:"error-detail",children:a})})},this.uiSchema=kl(ee.cloneDeep(r.uiSchema),"ui:help");const t=r.navSchema.steps.map((i,o)=>({...i,inProgress:o===0})).sort((i,o)=>i.order-o.order);this.formRef=Ur.exports.createRef(),this.formDivRef=Ur.exports.createRef(),this.submitButtonRef=Ur.exports.createRef();const n=this.getFirstStep(t,r.formData);this.state={currentStep:n,steps:t,previousStepIds:[],formData:r.formData,doShowErrors:!1,doShowHelp:!0,hasUnsavedChanges:!1,isSubmitted:r.isSubmitted,isLoadingSaved:!this.isNewForm(this.props.formData)}}componentWillUnmount(){window.removeEventListener("beforeunload",this.onUnload)}componentDidUpdate(r){const t=this.props.callbackStatus!==r.callbackStatus,n=this.props.callbackStatus===Re.SAVE_SUCCESS||this.props.callbackStatus===Re.SUBMIT_SUCCESS;t&&n&&(this.setState({hasUnsavedChanges:!1}),this.props.callbackStatus===Re.SUBMIT_SUCCESS&&(this.setState({isSubmitted:!0}),window.history.back()))}componentDidMount(){this.setupBeforeUnloadListener(),this.isNewForm(this.state.formData)?this.setState(t=>({formData:this.props.isWizardMode?this._setIncludedPropInFormDataWizard(t):this._setIncludedPropInFormDataNonWizard(t,this.props.schema)})):this.triggerAction(_e.VALIDATE)}handleOnChange({formData:r}){if(!this.isSubmitScreen()&&!this.state.currentStep.excluded){const t=!ee.isEqual(this.state.formData,r);this.setState({formData:r,hasUnsavedChanges:t})}}performAction(r,t){const n=this.state.formData;switch(r){case _e.NEXT:return this.moveStep(n,void 0,t);case _e.PREVIOUS:return this.goPrevious(n,t);case _e.GO_TO_STEP:return this.nextStep?this.moveStep(n,this.nextStep.id,t):void 0;case _e.SUBMIT:{this.props.onSubmit(n);return}case _e.VALIDATE:{const i=this.setStepStatusForFailedValidation([],this.state.steps,!!this.props.isWizardMode,this.state.formData,this.getSchema(this.state.currentStep).properties||this.getSchema(this.state.currentStep)),o={...this.state.currentStep,state:Fe.COMPLETED};this.setState({hasValidated:!0,currentStep:o,steps:i}),this.state.isLoadingSaved&&(this.moveStep(this.state.formData,i[0].id,!1),this.setState({isLoadingSaved:!1}));return}default:return}}render(){return re("div",{className:"outter-wrap",children:[P(Il,{when:this.state.hasUnsavedChanges,message:this.unsavedDataWarning}),P(cn,{isSubmitted:this.state.isSubmitted,bodyText:this.state.currentStep.description,title:this.props.formTitle}),P("div",{children:re("div",{className:"inner-wrap",children:[P(hn,{stepList:this.state.steps,isWizardMode:this.props.isWizardMode,onStepChange:this.triggerStepChange}),this.state.isLoadingSaved&&P("div",{className:"text-center",children:P("span",{className:"spinner"})}),re("div",{className:"form-wrap",children:[P("div",{className:"form-title",children:this.state.currentStep.title}),this.renderNotification(this.props.callbackStatus),re("div",{className:`right-top-actions ${this.state.isSubmitted?"hide":""}`,children:[!this.state.currentStep.static&&P("button",{type:"button",className:"btn btn-action save pull-right",onClick:()=>this.triggerAction(_e.VALIDATE),children:"VALIDATE"}),this.renderHelpToggle(this.state.currentStep,this.state.doShowHelp,()=>this.setState({doShowHelp:!this.state.doShowHelp})),this.isSubmitScreen()&&P("button",{type:"button",className:"btn btn-action save pull-right",disabled:this.state.isSubmitted,onClick:()=>this.triggerAction(_e.SUBMIT),children:"SUBMIT"})]}),this.renderOptionalFormSubheader(this.props.isWizardMode),re("div",{className:this.isSubmitScreen()||this.state.currentStep.static?"hide-form-only":"wrap",children:[this.state.hasValidated&&P("div",{className:"notification-area",children:"Great! All required data on this form has been entered."}),re("div",{ref:this.formDivRef,className:`scroll-area ${this.state.currentStep.excluded?"disabled":" "} `,children:[P(Kl,{noHtml5Validate:!0,className:this.state.doShowHelp?"submissionInputForm":"submissionInputForm no-help",liveValidate:!1,formData:this.state.formData,schema:this.getSchema(this.state.currentStep),uiSchema:this.uiSchema,onSubmit:this.onSubmit,onChange:r=>this.handleOnChange(r),onError:r=>this.onError({props:r,form:this.formRef}),showErrorList:!!this.state.doShowErrors||!!this.props.isWizardMode,ErrorList:this.renderErrorListTemplate,transformErrors:this.transformErrors,ref:this.formRef,disabled:this.state.currentStep.excluded||this.state.isSubmitted,children:P("div",{style:{display:"none"},children:P("button",{type:"submit",ref:this.submitButtonRef})})}),this.renderTextForStaticScreen(),!this.props.isWizardMode&&P(pn,{steps:this.state.steps,nextStepId:this.state.currentStep.default,onNavAction:r=>this.triggerStepChange(r)})]})]}),this.isSubmitScreen()&&P(vn,{formData:this.state.formData,steps:this.state.steps,callbackFn:r=>this.showExcludeStateWarningModal(r,!0),uiSchema:this.props.uiSchema,schema:this.props.schema}),P(dn,{currentStep:this.state.currentStep,steps:this.state.steps,previousStepIds:this.state.previousStepIds,isFormSubmitted:this.state.isSubmitted,onNavAction:r=>this.triggerAction(r)})]})]})}),this.state.modalContext&&P(Zl,{show:!0,title:this.excludeWarningHeader,modalBody:this.excludeWarningText,className:`theme-${this.props.formClass}`,onConfirmCallbackArgs:this.state.modalContext.arguments,onCancel:()=>this.setState({modalContext:void 0}),onConfirm:(r,t)=>this.toggleExcludeStep(r,t)}),P(gn,{formData:this.state.formData,hidden:!0})]})}}function Z0(e,r,t,n,i){const o=ee.trimStart(r.property,"."),a=o.split("."),s=`${a.join(".properties.")}.title`,f=`${o}.ui:title`,u=s.replace(/\[.*?\]/,".items"),c=f.replace(/\[.*?\]/,".items"),l=s.match(/\[.*?\]/);let p=ee.first(l);p&&(p=p.substring(1,p.length-1),p=isNaN(parseInt(p))?"":` [${parseInt(p)+1}]`);const h=ee.get(t,f)||ee.get(i.properties,s)||ee.get(t,c)||ee.get(i.properties,u)||r.property,d=ee.find(e,{id:a[0]})||{title:a[0],order:0},v=P("li",{className:"",children:re("span",{children:[re("strong",{children:[d.title,p,":"]}),h,"\xA0 ",r.message]})},n);return{order:d.order,element:v}}function kl(e,r){return ee.keys(e).some(t=>{if(t===r){const n=e[t];return e[t]=P("span",{dangerouslySetInnerHTML:{__html:n}}),e}e[t]&&typeof e[t]=="object"&&kl(e[t],r)}),e}try{mn.displayName="SynapseForm",mn.__docgenInfo={description:"",displayName:"SynapseForm",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"FormSchema"}},uiSchema:{defaultValue:null,description:"",name:"uiSchema",required:!0,type:{name:"UiSchema"}},navSchema:{defaultValue:null,description:"",name:"navSchema",required:!0,type:{name:"{ steps: any[]; }"}},formData:{defaultValue:null,description:"",name:"formData",required:!0,type:{name:"IFormData"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"Function"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!0,type:{name:"Function"}},formTitle:{defaultValue:null,description:"",name:"formTitle",required:!0,type:{name:"string"}},formClass:{defaultValue:null,description:"",name:"formClass",required:!1,type:{name:"string"}},isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}},callbackStatus:{defaultValue:null,description:"",name:"callbackStatus",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"}]}},isSubmitted:{defaultValue:null,description:"",name:"isSubmitted",required:!1,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/SynapseForm.tsx#SynapseForm"]={docgenInfo:mn.__docgenInfo,name:"SynapseForm",path:"src/lib/containers/synapse_form_wrapper/SynapseForm.tsx#SynapseForm"})}catch{}async function Hi(e,r,t,n){try{const i=await Bl(e,r,t),o=await Fl(i,e,!0,!0),a=await Ll(o.fileHandle,o.preSignedURL),s=JSON.parse(a);return{version:i.versionNumber,content:s}}catch(i){const o={message:`${i.message}:  configuration data for ${r} failed to load`};return n&&n(o),Promise.reject(o)}}class yn extends Ur.exports.Component{constructor(r){var t,n;super(r),this.getFileEntityDataDereferenced=async(i,o,a)=>{const{version:s,content:f}=await Hi(i,o,a,this.onError),u=await rr.exports.dereference(f);return{version:s,content:u}},this.getData=async i=>{if(!!i)try{let o={},a,s,f,u,c;const{searchParams:l}=this.props;if(l&&({dataFileHandleId:a,submitted:s}=l),a){const d=await jl(a,i);o=JSON.parse(d),s&&o&&o.metadata&&({formSchemaVersion:f,uiSchemaVersion:u,navSchemaVersion:c}=o.metadata)}const p=[this.getFileEntityDataDereferenced(i,this.props.formSchemaEntityId,f),Hi(i,this.props.formUiSchemaEntityId,u,this.onError),Hi(i,this.props.formNavSchemaEntityId,c,this.onError)],h=await Promise.all(p);a||(o={metadata:{formSchemaVersion:h[0].version,uiSchemaVersion:h[1].version,navSchemaVersion:h[2].version}}),this.setState({formData:o,formSchema:h[0].content,formUiSchema:h[1].content,formNavSchema:h[2].content,isLoading:!1})}catch(o){this.onError({message:o})}finally{this.setState({isLoading:!1})}},this.finishedProcessing=(i,o)=>{this.setState({isLoading:!1,notification:{type:i,message:o},status:i}),setTimeout(()=>{this.setState({status:void 0})},7e3)},this.onError=i=>{this.setState({notification:{type:Re.ERROR,message:i.message,name:i.name},status:Re.ERROR,isLoading:!1})},this.submitForm=async i=>{await this.saveToFile(i),this.setState({isLoading:!0}),await Ul(this.state.formDataId,this.props.token),this.finishedProcessing(Re.SUBMIT_SUCCESS,"File Submitted")},this.createOrUpdateFormDataFile=async(i,o)=>{i=`${i}.json`;const a=await Wl(this.props.token,i,o),{searchParams:s}=this.props,f=s&&s.formGroupId;if(!f)throw console.error("formGroupId must be defined"),"formGroupId must be defined";try{const u=a.fileHandleId;let c;return this.state.formDataId?c=await ql(this.state.formDataId,i,u,this.props.token):c=await Hl(f,i,u,this.props.token),c}catch(u){throw this.onError(u),u}},this.saveToFile=async i=>{const o=Wr(i,this.props.fileNamePath);if(this.setState({status:Re.PROGRESS,notification:{type:Re.PROGRESS,message:"Progress"},isLoading:!0}),!o){let a="File Name";try{const s=`${this.props.fileNamePath.replace(".",".properties.")}.title`;a=Wr(this.state.formSchema.properties,s,a)}finally{const s=`Please Provide the ${a} before saving`;this.onError({message:s})}return}try{const a=new Blob([JSON.stringify(i)],{type:"text/json"}),s=await this.createOrUpdateFormDataFile(o,a);this.setState({formDataId:s.formDataId}),this.finishedProcessing(Re.SAVE_SUCCESS,"File Saved")}catch(a){this.onError({message:a})}},this.isReadyToDisplayForm=i=>this.state.status!==Re.ERROR_CRITICAL&&i.formSchema&&i.formUiSchema&&i.formNavSchema&&i.formData,this.renderLoader=(i,o)=>Ql([Re.ERROR,Re.ERROR_CRITICAL],i.status)&&o.token&&i.isLoading?P("div",{className:"text-center",children:P("span",{className:"spinner"})}):P(me,{}),this.renderNotification=i=>i?i.type===Re.ERROR?re(pa,{variant:"danger",onClose:()=>this.setState({status:void 0}),children:[P(pa.Heading,{children:"Error"}),re("p",{children:[i.name," ",i.message]})]}):P(me,{}):P(me,{}),this.renderUnauthenticatedView=i=>i?P(me,{}):re("div",{className:"panel padding-full unauthenticated text-center bootstrap-4-backport",children:["Please",P(ec,{variant:"light-primary-base",style:{margin:"10px"},className:`pill ${Vl}`,children:"sign in"}),"to initiate or continue your submission"]}),this.state={isLoading:!0,formDataId:(n=(t=this.props)==null?void 0:t.searchParams)==null?void 0:n.formDataId}}async componentDidMount(){await this.getData(this.props.token)}async componentDidUpdate(r){this.props.token!==r.token&&await this.getData(this.props.token)}render(){return P("div",{className:`theme-${this.props.formClass}`,children:re("div",{className:"SRC-ReactJsonForm",children:[this.renderNotification(this.state.notification),this.renderLoader(this.state,this.props),this.renderUnauthenticatedView(this.props.token),this.isReadyToDisplayForm(this.state)&&P("div",{children:P(mn,{schema:this.state.formSchema,uiSchema:this.state.formUiSchema,formData:this.state.formData,navSchema:this.state.formNavSchema,isWizardMode:this.props.isWizardMode,formTitle:this.props.formTitle,formClass:this.props.formClass,callbackStatus:this.state.status,onSave:r=>this.saveToFile(r),onSubmit:r=>this.submitForm(r),isSubmitted:this.props.searchParams&&!!this.props.searchParams.submitted})})]})})}}const Ml=yn;try{yn.displayName="SynapseFormWrapper",yn.__docgenInfo={description:"",displayName:"SynapseFormWrapper",props:{formSchemaEntityId:{defaultValue:null,description:"",name:"formSchemaEntityId",required:!0,type:{name:"string"}},formUiSchemaEntityId:{defaultValue:null,description:"",name:"formUiSchemaEntityId",required:!0,type:{name:"string"}},formNavSchemaEntityId:{defaultValue:null,description:"",name:"formNavSchemaEntityId",required:!0,type:{name:"string"}},token:{defaultValue:null,description:"",name:"token",required:!1,type:{name:"string"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!1,type:{name:"UploadToolSearchParams"}},isWizardMode:{defaultValue:null,description:"",name:"isWizardMode",required:!1,type:{name:"boolean"}},fileNamePath:{defaultValue:null,description:"",name:"fileNamePath",required:!0,type:{name:"string"}},formTitle:{defaultValue:null,description:"",name:"formTitle",required:!0,type:{name:"string"}},formClass:{defaultValue:null,description:"",name:"formClass",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/synapse_form_wrapper/SynapseFormWrapper.tsx#SynapseFormWrapper"]={docgenInfo:yn.__docgenInfo,name:"SynapseFormWrapper",path:"src/lib/containers/synapse_form_wrapper/SynapseFormWrapper.tsx#SynapseFormWrapper"})}catch{}const oE={parameters:{storySource:{source:`import React from 'react'
import { ComponentStory, ComponentMeta } from '@storybook/react'
import SynapseFormWrapper from './SynapseFormWrapper'
import { SynapseContextConsumer } from '../../utils/SynapseContext'

export default {
  title: 'Synapse/SynapseFormWrapper',
  component: SynapseFormWrapper,
} as ComponentMeta<typeof SynapseFormWrapper>

const Template: ComponentStory<typeof SynapseFormWrapper> = args => (
  <SynapseContextConsumer>
    {synapseContext => (
      <SynapseFormWrapper {...args} token={synapseContext?.accessToken} />
    )}
  </SynapseContextConsumer>
)

export const Demo = Template.bind({})
Demo.args = {
  formTitle: 'Your Contribution Request',
  formClass: 'contribution-request',
  formSchemaEntityId: 'syn20692910',
  fileNamePath: 'study.submission_name',
  formUiSchemaEntityId: 'syn20692911',
  formNavSchemaEntityId: 'syn20968007',
  isWizardMode: true,
}
`,locationsMap:{demo:{startLoc:{col:60,line:11},endLoc:{col:1,line:17},startBody:{col:60,line:11},endBody:{col:1,line:17}}}}},title:"Synapse/SynapseFormWrapper",component:Ml},e_=e=>P(Yl,{children:r=>P(Ml,{...e,token:r==null?void 0:r.accessToken})}),r_=e_.bind({});r_.args={formTitle:"Your Contribution Request",formClass:"contribution-request",formSchemaEntityId:"syn20692910",fileNamePath:"study.submission_name",formUiSchemaEntityId:"syn20692911",formNavSchemaEntityId:"syn20968007",isWizardMode:!0};const aE=["Demo"];export{r_ as Demo,aE as __namedExportsOrder,oE as default};
