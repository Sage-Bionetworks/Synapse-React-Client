import{V as R,N as h,z as Q,Q as b,B as l}from"./index.07273d6a.js";import{a as y,c as S}from"./useUserBundle.220e8a9a.js";import{u as v}from"./useInfiniteQuery.c68b4874.js";import{e as i}from"./queryKeys.e0d3085f.js";const _=(e,t)=>{var u,r;return(r=(u=t==null?void 0:t.selectColumns)==null?void 0:u.findIndex(s=>s.name===e))!=null?r:-1},O=(e,t)=>e==null||t==null||e.length===0||t.length===0?!1:e.filter(r=>!k(r)&&t.find(s=>s.name===r.columnName)).length>0,k=e=>e.facetType==="enumeration"&&e.facetValues.length==1&&e.facetValues[0].value==R,f={refetchOnWindowFocus:!1};function V(e,t){const{accessToken:u}=y();return S(i.tableQueryResult(e,!1),()=>h(e,u),{...f,...t})}function M(e,t,u){const{accessToken:r}=y();return S(i.tableQueryResultWithAsyncStatus(e,!1),()=>b(e,r,u),{...f,...t})}function E(e,t,u){const r=e.partMask&l,s={...e,partMask:r},n=r>0?t==null?void 0:t.enabled:!1;return M(s,{...t,enabled:n},u)}function T(e,t,u){const r=e.partMask&~l,s={...e,query:{...e.query,offset:void 0,limit:void 0,sort:void 0},partMask:r},n=r>0?t==null?void 0:t.enabled:!1;return M(s,{...t,enabled:n},u)}function w(e,t,u){var a;const r=E(e,t,u),s=T(e,t,u);return{...r,data:r.data&&s.data?{...r.data,responseBody:r.data.responseBody?{...(a=s.data)==null?void 0:a.responseBody,queryResult:r.data.responseBody.queryResult}:void 0}:void 0}}function G(e,t,u){const{accessToken:r}=y();return v(i.tableQueryResult(e,!0),s=>{const n=s.pageParam?parseInt(s.pageParam):0;return b({...e,query:{...e.query,offset:n},partMask:n!==0?e.partMask&l:e.partMask},r,u)},{...f,...t,select:s=>{const n=s==null?void 0:s.pages[0];if(n.responseBody)for(let a=0;a<s.pages.length;a++){const o=s.pages[a];o.responseBody!=null&&(s.pages[a].responseBody={...n.responseBody,queryResult:o.responseBody.queryResult})}return s},getPreviousPageParam:s=>{var o;if(s.jobState!=="COMPLETE")return;const n=s.requestBody;if(n.query.offset==null||n.query.offset===0)return;const a=(o=n.query.limit)!=null?o:Q;return Math.max(n.query.offset-a,0)},getNextPageParam:(s,n)=>{var d,g,m,p;if(s.jobState!=="COMPLETE")return;const a=s.requestBody,o=(d=a.query.limit)!=null?d:Q,c=(g=n[0].responseBody)==null?void 0:g.queryCount;if(!(c!=null&&((m=a.query.offset)!=null?m:0)+o>=c))return s.responseBody.queryResult.queryResults.rows.length===o?((p=a.query.offset)!=null?p:0)+o:void 0}})}export{w as a,k as b,V as c,_ as g,O as i,G as u};
//# sourceMappingURL=useGetQueryResultBundle.924ce97e.js.map
