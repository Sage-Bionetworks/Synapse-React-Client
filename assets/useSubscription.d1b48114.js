import{j as c,l as A,U as a,c3 as E,c4 as I,c5 as l}from"./index.f37f3b8f.js";import{u as S}from"./useMutation.65911f81.js";import{D as T}from"./EntityChildren.50133102.js";import{r as R}from"./jsx-runtime.e755df9d.js";var U=(s=>(s.FORUM="FORUM",s.THREAD="THREAD",s.DATA_ACCESS_SUBMISSION="DATA_ACCESS_SUBMISSION",s.DATA_ACCESS_SUBMISSION_STATUS="DATA_ACCESS_SUBMISSION_STATUS",s))(U||{}),o=(s=>(s.SUBSCRIPTION_ID="SUBSCRIPTION_ID",s.SUBSCRIBER_ID="SUBSCRIBER_ID",s.OBJECT_ID="OBJECT_ID",s.OBJECT_TYPE="OBJECT_TYPE",s.CREATED_ON="CREATED_ON",s))(o||{});function d(s,n,i){const{accessToken:t}=c();return A([t,"subscription",s,n],async()=>{const u={objectType:n,idList:[s],sortByType:o.OBJECT_ID,sortDirection:T.ASC};return(await l(t,u)).results[0]},i)}function B(s){const n=a(),{accessToken:i}=c();return S(t=>E(i,t),{...s,onSuccess:async(t,e,u)=>{await n.invalidateQueries([i,"subscription"]),s!=null&&s.onSuccess&&await s.onSuccess(t,e,u)}})}function O(s){const n=a(),{accessToken:i}=c();return S(t=>I(i,t),{...s,onSuccess:async(t,e,u)=>{await n.invalidateQueries([i,"subscription"]),s!=null&&s.onSuccess&&await s.onSuccess(t,e,u)}})}const b=(s,n)=>{const{data:i,isLoading:t}=d(s,n),{mutate:e,isLoading:u}=B(),{mutate:r,isLoading:C}=O(),_=t||u||C,D=R.exports.useCallback(()=>{i?r(i.subscriptionId):e({objectId:s,objectType:n})},[r,s,n,e,i]);return{isLoading:_,subscription:i,toggleSubscribed:D}};export{U as S,b as u};
