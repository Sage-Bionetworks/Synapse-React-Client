import{f as k,aV as E,aW as N,aX as O}from"./index.857eb08b.js";import{k as d}from"./ToastMessage.72011e3e.js";import{M as B}from"./MarkdownPopover.10ea94ea.js";import{T as m}from"./Typography.e0d7a65e.js";import{a as r,j as t,F as g}from"./jsx-runtime.00d70968.js";import{B as w}from"./Button.fda23eee.js";import{H as Q}from"./IconSvg.e3afc045.js";import"./withStyles.d50e1a5a.js";import"./objectWithoutPropertiesLoose.5e7699d1.js";import"./toConsumableArray.c4898ee4.js";import"./FullWidthAlert.9ae706f1.js";import"./Tooltip.006e7cf4.js";import"./SvgIcon.53be2b5b.js";import"./slicedToArray.e72f11da.js";import"./makeStyles.733638f6.js";import"./index.57d09176.js";import"./index.35ce73ec.js";import"./assert.761db4f8.js";import"./iframe.99697dbc.js";import"./getEndpoint.bb7ded34.js";import"./usePopperMarginModifiers.0428ddea.js";import"./useWaitForDOMRef.064fee4c.js";import"./MarkdownSynapse.1673d150.js";import"./UserCard.ebe2bd0e.js";import"./IconCopy.095bf867.js";import"./SkeletonTable.6f049078.js";import"./times.d9098488.js";import"./toInteger.c98e535d.js";import"./Skeleton.c897a2bf.js";import"./Overlay.b3559176.js";import"./factory.ad29f54f.js";import"./sqlFunctions.b49ac766.js";import"./SynapseVideo.e02aa4f7.js";import"./react-intersection-observer.esm.e445ee86.js";import"./DateFormatter.74ae9227.js";import"./moment.a565bb48.js";import"./index.8dcb89ef.js";import"./index.8b566c2c.js";import"./index.66e0b57e.js";import"./index.440cefe9.js";import"./InfoOutlined.31277c73.js";const L="org.sagebionetworks.repo.model.quiz.MultichoiceResponse",M=window.React,H=window.React.useEffect,u=window.React.useState,p=()=>{const{accessToken:a}=k(),T=E(),[i,_]=u(),[l,f]=u([]),[o,h]=u(),C=M.useRef(null),x="https://help.synapse.org/docs/Getting-Started.2055471150.html",y=async()=>{try{_(await N(a))}catch(e){T(e)}};H(()=>{y()},[a]);const S=(e,s)=>{const c=[...l.filter(n=>n.questionIndex!==e),{questionIndex:e,answerIndex:[s],concreteType:L}];f(c)},R=()=>{var e;(e=C.current)==null||e.reset(),f([]),h(void 0),y()},v=async()=>{try{if(i&&i.questions.length===l.length){const e={quizId:i.id,questionResponses:l},s=await O(a,e);h(s),window.scrollTo(0,0)}else d("Please answer all of the questions and try again.","warning")}catch(e){d(e.reason,"danger")}},I=e=>e?{content:t(g,{children:"More info"}),closePopoverOnClick:!0,onClick:()=>window.open(e,"_blank"),variant:"primary"}:void 0;return r("div",{className:"bootstrap-4-backport CertificationQuiz",children:[o&&t("div",{children:r(g,{children:[!o.passed&&t("div",{className:"failBanner",children:"Quiz Failed"}),r(m,{variant:"hintText",children:["Score: ",o.score," / ",i==null?void 0:i.questions.length]}),o.passed?d(`You passed the Synapse Certification Quiz on ${o.passedOn}`,"success"):r(m,{variant:"body1",children:["Please review the items shown in red below, and"," ",t("a",{href:"#",onClick:e=>{e.preventDefault(),R()},children:"try again"}),"."]})]})}),r("div",{className:"CertificationQuiz__container",children:[r(w,{onClick:()=>window.open(x,"_blank"),className:"help-button",variant:"light-secondary",children:[t(Q,{className:"HelpButton",style:{marginRight:"4px"}}),"Help"]}),i?t("div",{dangerouslySetInnerHTML:{__html:i.header}}):"",t("form",{ref:C,onSubmit:e=>e.preventDefault(),children:t("ol",{children:i==null?void 0:i.questions.map(e=>{var s,c;return r("li",{role:e.exclusive?"radiogroup":void 0,children:[t("div",{dangerouslySetInnerHTML:{__html:e.prompt},className:o&&((c=(s=o.corrections)==null?void 0:s.find(n=>n.question.questionIndex===e.questionIndex))!=null&&c.isCorrect?"":"incorrectQuestion")}),e.answers.map(n=>r("div",{children:[t("input",{id:`${e.questionIndex}-${n.answerIndex}`,name:`${e.questionIndex}`,type:e.exclusive?"radio":"checkbox",value:n.answerIndex,onClick:b=>S(e.questionIndex,Number(b.currentTarget.value)),disabled:!!o}),t("label",{style:{fontWeight:400},htmlFor:`${e.questionIndex}-${n.answerIndex}`,children:n.prompt})]},`${e.questionIndex}-${n.answerIndex}`)),t(B,{contentProps:{markdown:e.helpText},placement:"right",actionButton:I(e.docLink),showCloseButton:!0,children:r(m,{variant:"hintText",color:"primary",children:[t(Q,{className:"HelpButton",style:{marginRight:"4px"}}),"Need help answering this question?"]})})]},e.questionIndex)})})}),!o&&t(w,{className:"help-button",variant:"primary",onClick:()=>v(),children:"Submit"})]})]})},z=p;try{p.displayName="CertificationQuiz",p.__docgenInfo={description:"",displayName:"CertificationQuiz",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/CertificationQuiz.tsx#CertificationQuiz"]={docgenInfo:p.__docgenInfo,name:"CertificationQuiz",path:"src/lib/containers/CertificationQuiz.tsx#CertificationQuiz"})}catch{}const ve={parameters:{storySource:{source:`import React from 'react'
import { ComponentStory, ComponentMeta } from '@storybook/react'

import CertificationQuiz from './CertificationQuiz'

export default {
  title: 'Synapse/CertificationQuiz',
  component: CertificationQuiz,
  argTypes: {},
} as ComponentMeta<typeof CertificationQuiz>

const Template: ComponentStory<typeof CertificationQuiz> = args => (
  <CertificationQuiz {...args} />
)

export const CertificationQuizDemo = Template.bind({})
CertificationQuizDemo.args = {}
`,locationsMap:{"certification-quiz-demo":{startLoc:{col:59,line:12},endLoc:{col:1,line:14},startBody:{col:59,line:12},endBody:{col:1,line:14}}}}},title:"Synapse/CertificationQuiz",component:z,argTypes:{}},$=a=>t(z,{...a}),P=$.bind({});P.args={};const Ie=["CertificationQuizDemo"];export{P as CertificationQuizDemo,Ie as __namedExportsOrder,ve as default};
