import{h as Se,_ as R,u as me,S as he,b as Oe}from"./Select-54ac8379.esm.edd779c2.js";import{e as ge}from"./toConsumableArray.c4898ee4.js";import{_ as i}from"./slicedToArray.e72f11da.js";import{b as ve}from"./withStyles.5fe35516.js";import{j as A}from"./jsx-runtime.00d70968.js";import{f as _e,bE as Ie,bH as ye}from"./index.37b550c9.js";import{a as Ce}from"./useGetAccessRequirement.0be5e16c.js";import{S as Re}from"./Skeleton.99b24529.js";const W=window.React.useRef,u=window.React.useState,z=window.React.useEffect,F=window.React.useCallback;var Ae=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function be(t){var n=t.defaultOptions,e=n===void 0?!1:n,p=t.cacheOptions,l=p===void 0?!1:p,f=t.loadOptions;t.options;var o=t.isLoading,b=o===void 0?!1:o,_=t.onInputChange,m=t.filterOption,I=m===void 0?null:m,r=ve(t,Ae),h=r.inputValue,s=W(void 0),c=W(!1),y=u(Array.isArray(e)?e:void 0),d=i(y,2),J=d[0],$=d[1],Q=u(typeof h<"u"?h:""),T=i(Q,2),N=T[0],w=T[1],U=u(e===!0),j=i(U,2),X=j[0],O=j[1],Z=u(void 0),D=i(Z,2),x=D[0],L=D[1],ee=u([]),k=i(ee,2),te=k[0],q=k[1],ne=u(!1),K=i(ne,2),ae=K[0],C=K[1],se=u({}),M=i(se,2),g=M[0],Y=M[1],re=u(void 0),G=i(re,2),oe=G[0],ie=G[1],ue=u(void 0),H=i(ue,2),ce=H[0],de=H[1];l!==ce&&(Y({}),de(l)),e!==oe&&($(Array.isArray(e)?e:void 0),ie(e)),z(function(){return c.current=!0,function(){c.current=!1}},[]);var B=F(function(v,S){if(!f)return S();var a=f(v,S);a&&typeof a.then=="function"&&a.then(S,function(){return S()})},[f]);z(function(){e===!0&&B(N,function(v){!c.current||($(v||[]),O(!!s.current))})},[]);var pe=F(function(v,S){var a=Se(v,S,_);if(!a){s.current=void 0,w(""),L(""),q([]),O(!1),C(!1);return}if(l&&g[a])w(a),L(a),q(g[a]),O(!1),C(!1);else{var fe=s.current={};w(a),O(!0),C(!x),B(a,function(V){!c||fe===s.current&&(s.current=void 0,O(!1),L(a),q(V||[]),C(!1),Y(V?R(R({},g),{},ge({},a,V)):g))})}},[l,B,x,g,_]),le=ae?[]:N&&x?te:J||[];return R(R({},r),{},{options:le,isLoading:X||b,onInputChange:pe,filterOption:I})}const we=window.React.forwardRef;var xe=we(function(t,n){var e=be(t),p=me(e);return A(he,{ref:n,...p})});const Le=xe;function E(t,n){return t.toString()===n?n:`${n} (${t})`}const qe={Control:t=>{var n;return A(Oe.Control,{...t,className:`form-control ${(n=t.className)!=null?n:""}`})}};function P(t){var m,I;const{inputId:n,initialId:e,onChange:p,placeholder:l}=t,{accessToken:f}=_e(),{data:o,isLoading:b}=Ce(e,{enabled:!!e});async function _(r){var c,y;const h=parseInt(r);let s;return h&&(s=[await Ie(f,h)]),s||(s=(c=await ye(f,{nameContains:r}))==null?void 0:c.results),(y=s==null?void 0:s.map(d=>({id:d.id.toString(),value:d.id.toString(),label:E(d.id,d.name)})))!=null?y:[]}return e&&b?A(Re,{width:"100%"}):A(Le,{className:"bootstrap-4-backport",defaultInputValue:e?E(e,(m=o==null?void 0:o.name)!=null?m:e.toString()):void 0,defaultOptions:e?[{id:e,value:e,label:E(e,(I=o==null?void 0:o.name)!=null?I:e.toString())}]:!0,inputId:n,cacheOptions:!0,isClearable:!0,styles:{control:r=>({...r,display:"flex !important"})},components:qe,loadOptions:_,onChange:r=>{p(r==null?void 0:r.id.toString())},placeholder:l})}try{P.displayName="AccessRequirementSearchBox",P.__docgenInfo={description:"",displayName:"AccessRequirementSearchBox",props:{inputId:{defaultValue:null,description:"",name:"inputId",required:!1,type:{name:"string"}},initialId:{defaultValue:null,description:"",name:"initialId",required:!1,type:{name:"string | number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(accessRequirementId?: string | undefined) => void"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/dataaccess/AccessRequirementSearchBox.tsx#AccessRequirementSearchBox"]={docgenInfo:P.__docgenInfo,name:"AccessRequirementSearchBox",path:"src/lib/containers/dataaccess/AccessRequirementSearchBox.tsx#AccessRequirementSearchBox"})}catch{}export{P as A};
