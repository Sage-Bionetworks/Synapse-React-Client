import{a as ne,F as fe,j as O}from"./jsx-runtime.2e925369.js";import{h as Xl}from"./moment.53181859.js";import{f as Ul}from"./DateFormatter.fee2144f.js";import{aD as Gl,b5 as Kl,w as ql,b4 as Fl,cC as Rr,x as Zl}from"./index.c30c6724.js";import{T as An}from"./Tooltip.6c95fe7b.js";import{T as Bo}from"./Typography.bfdf676e.js";import{a as Wl}from"./UserCard.16ac30e7.js";import{c as ya,E as Ar,a as Ql}from"./EntityTypeUtils.5f58e4c9.js";import{P as Jl}from"./getEndpoint.0de7fccf.js";import"./assert.e526af90.js";import{E as Lr}from"./EntityIcon.b3525fb5.js";import{I as or}from"./IconSvg.c485205d.js";import{p as ec}from"./pluralize.2295ca48.js";import{A as ba}from"./iframe.8e991f72.js";import{H as tc}from"./HelpPopover.38369141.js";import{d as nc}from"./differenceWith.5c323c11.js";import{i as oc}from"./isEqual.b35c974d.js";import{u as rc}from"./useGetEntityHeaders.b0716586.js";import{d as ic}from"./ToastMessage.f82ed562.js";import{a as Br}from"./objectWithoutPropertiesLoose.090b3c10.js";import{a as ac}from"./toConsumableArray.b3669986.js";import{w as sc,b as zr,d as lc}from"./withStyles.8be28b48.js";import"./Alert.eafe86e9.js";import"./index.f252d424.js";import"./Button.c582ea4c.js";import"./Transition.d42a873e.js";import"./index.06f4a415.js";import"./toString.8ef640ae.js";import"./SvgIcon.31249d58.js";import"./createSvgIcon.d78a924b.js";import"./useTheme.8804f8cd.js";import"./makeStyles.9dfaa099.js";import"./IconCopy.b1eba79c.js";import"./SkeletonTable.0a492fd5.js";import"./times.76539a73.js";import"./toInteger.e47ae0a9.js";import"./Skeleton.8dd0668e.js";import"./Overlay.88992b99.js";import"./useWaitForDOMRef.c89dbc64.js";import"./usePopperMarginModifiers.31225551.js";import"./hasClass.56fd144a.js";import"./TypeUtils.a2c41307.js";import"./index.8cde812d.js";import"./InfoOutlined.22a371fd.js";import"./MarkdownPopover.ee7425a2.js";import"./MarkdownSynapse.2a2a6997.js";import"./factory.b613c54a.js";import"./sqlFunctions.b49ac766.js";import"./SynapseVideo.feb1d13a.js";import"./react-intersection-observer.m.66de6abb.js";import"./HelpOutlineTwoTone.5e2fed5c.js";import"./_baseDifference.39de497d.js";import"./_cacheHas.4c866dba.js";import"./_baseIsEqual.fefc85ee.js";import"./_setToArray.a82100c8.js";import"./FullWidthAlert.e7125a09.js";import"./removeClass.27874bcb.js";import"./uniqueId.fa0dadf5.js";const dn=window.React;var je=44,cc=function(t){return{root:{display:"inline-block"},static:{transition:t.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:t.transitions.create("transform")},colorPrimary:{color:t.palette.primary.main},colorSecondary:{color:t.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:t.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:t.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}},uc=dn.forwardRef(function(t,n){var o=t.classes,r=t.className,i=t.color,a=i===void 0?"primary":i,s=t.disableShrink,l=s===void 0?!1:s,u=t.size,c=u===void 0?40:u,d=t.style,f=t.thickness,h=f===void 0?3.6:f,v=t.value,m=v===void 0?0:v,b=t.variant,y=b===void 0?"indeterminate":b,C=ac(t,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),E={},g={},w={};if(y==="determinate"||y==="static"){var x=2*Math.PI*((je-h)/2);E.strokeDasharray=x.toFixed(3),w["aria-valuenow"]=Math.round(m),E.strokeDashoffset="".concat(((100-m)/100*x).toFixed(3),"px"),g.transform="rotate(-90deg)"}return dn.createElement("div",Br({className:zr(o.root,r,a!=="inherit"&&o["color".concat(lc(a))],{determinate:o.determinate,indeterminate:o.indeterminate,static:o.static}[y]),style:Br({width:c,height:c},g,d),ref:n,role:"progressbar"},w,C),dn.createElement("svg",{className:o.svg,viewBox:"".concat(je/2," ").concat(je/2," ").concat(je," ").concat(je)},dn.createElement("circle",{className:zr(o.circle,l&&o.circleDisableShrink,{determinate:o.circleDeterminate,indeterminate:o.circleIndeterminate,static:o.circleStatic}[y]),style:E,cx:je,cy:je,r:(je-h)/2,fill:"none",strokeWidth:h})))}),dc=sc(cc,{name:"MuiCircularProgress",flip:!1})(uc);const fc=window.React.useReducer,ft=window.React.useRef,hc=window.React.useDebugValue,vc=window.React.useEffect,pc=window.React.useLayoutEffect;function gc(e){let t;const n=new Set,o=(u,c)=>{const d=typeof u=="function"?u(t):u;if(d!==t){const f=t;t=c?d:Object.assign({},t,d),n.forEach(h=>h(t,f))}},r=()=>t,i=(u,c=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=c(t);function h(){const v=c(t);if(!d(f,v)){const m=f;u(f=v,m)}}return n.add(h),()=>n.delete(h)},l={setState:o,getState:r,subscribe:(u,c,d)=>c||d?i(u,c,d):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return t=e(o,r,l),l}const mc=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Vr=mc?vc:pc;function yc(e){const t=typeof e=="function"?gc(e):e,n=(o=t.getState,r=Object.is)=>{const[,i]=fc(b=>b+1,0),a=t.getState(),s=ft(a),l=ft(o),u=ft(r),c=ft(!1),d=ft();d.current===void 0&&(d.current=o(a));let f,h=!1;(s.current!==a||l.current!==o||u.current!==r||c.current)&&(f=o(a),h=!r(d.current,f)),Vr(()=>{h&&(d.current=f),s.current=a,l.current=o,u.current=r,c.current=!1});const v=ft(a);Vr(()=>{const b=()=>{try{const C=t.getState(),E=l.current(C);u.current(d.current,E)||(s.current=C,d.current=E,i())}catch{c.current=!0,i()}},y=t.subscribe(b);return t.getState()!==v.current&&b(),y},[]);const m=h?f:d.current;return hc(m),m};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const o=[n,t];return{next(){const r=o.length<=0;return{value:o.shift(),done:r}}}},n}const bc=window.React.createContext,wc=window.React.useRef,Sc=window.React.createElement,jr=window.React.useContext,Ec=window.React.useMemo;function xc(){const e=bc(void 0);return{Provider:({initialStore:r,createStore:i,children:a})=>{const s=wc();return s.current||(r&&(console.warn("Provider initialStore is deprecated and will be removed in the next version."),i||(i=()=>r)),s.current=i()),Sc(e.Provider,{value:s.current},a)},useStore:(r,i=Object.is)=>{const a=jr(e);if(!a)throw new Error("Seems like you have not used zustand provider as an ancestor.");return a(r,i)},useStoreApi:()=>{const r=jr(e);if(!r)throw new Error("Seems like you have not used zustand provider as an ancestor.");return Ec(()=>({getState:r.getState,setState:r.setState,subscribe:r.subscribe,destroy:r.destroy}),[r])}}}var Cc={value:()=>{}};function Qn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Nn(n)}function Nn(e){this._=e}function Nc(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Nn.prototype=Qn.prototype={constructor:Nn,on:function(e,t){var n=this._,o=Nc(e+"",n),r,i=-1,a=o.length;if(arguments.length<2){for(;++i<a;)if((r=(e=o[i]).type)&&(r=Oc(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(r=(e=o[i]).type)n[r]=Yr(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Yr(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Nn(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function Oc(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function Yr(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=Cc,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var zo="http://www.w3.org/1999/xhtml",Hr={svg:"http://www.w3.org/2000/svg",xhtml:zo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Hr.hasOwnProperty(t)?{space:Hr[t],local:e}:e}function Pc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===zo&&t.documentElement.namespaceURI===zo?t.createElement(e):t.createElementNS(n,e)}}function _c(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function wa(e){var t=Jn(e);return(t.local?_c:Pc)(t)}function kc(){}function rr(e){return e==null?kc:function(){return this.querySelector(e)}}function Mc(e){typeof e!="function"&&(e=rr(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=new Array(a),l,u,c=0;c<a;++c)(l=i[c])&&(u=e.call(l,l.__data__,c,i))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new pe(o,this._parents)}function Dc(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ic(){return[]}function Sa(e){return e==null?Ic:function(){return this.querySelectorAll(e)}}function Tc(e){return function(){return Dc(e.apply(this,arguments))}}function $c(e){typeof e=="function"?e=Tc(e):e=Sa(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a=t[i],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(o.push(e.call(l,l.__data__,u,a)),r.push(l));return new pe(o,r)}function Ea(e){return function(){return this.matches(e)}}function xa(e){return function(t){return t.matches(e)}}var Rc=Array.prototype.find;function Ac(e){return function(){return Rc.call(this.children,e)}}function Lc(){return this.firstElementChild}function Bc(e){return this.select(e==null?Lc:Ac(typeof e=="function"?e:xa(e)))}var zc=Array.prototype.filter;function Vc(){return Array.from(this.children)}function jc(e){return function(){return zc.call(this.children,e)}}function Yc(e){return this.selectAll(e==null?Vc:jc(typeof e=="function"?e:xa(e)))}function Hc(e){typeof e!="function"&&(e=Ea(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=[],l,u=0;u<a;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&s.push(l);return new pe(o,this._parents)}function Ca(e){return new Array(e.length)}function Xc(){return new pe(this._enter||this._groups.map(Ca),this._parents)}function Ln(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ln.prototype={constructor:Ln,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Uc(e){return function(){return e}}function Gc(e,t,n,o,r,i){for(var a=0,s,l=t.length,u=i.length;a<u;++a)(s=t[a])?(s.__data__=i[a],o[a]=s):n[a]=new Ln(e,i[a]);for(;a<l;++a)(s=t[a])&&(r[a]=s)}function Kc(e,t,n,o,r,i,a){var s,l,u=new Map,c=t.length,d=i.length,f=new Array(c),h;for(s=0;s<c;++s)(l=t[s])&&(f[s]=h=a.call(l,l.__data__,s,t)+"",u.has(h)?r[s]=l:u.set(h,l));for(s=0;s<d;++s)h=a.call(e,i[s],s,i)+"",(l=u.get(h))?(o[s]=l,l.__data__=i[s],u.delete(h)):n[s]=new Ln(e,i[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(f[s])===l&&(r[s]=l)}function qc(e){return e.__data__}function Fc(e,t){if(!arguments.length)return Array.from(this,qc);var n=t?Kc:Gc,o=this._parents,r=this._groups;typeof e!="function"&&(e=Uc(e));for(var i=r.length,a=new Array(i),s=new Array(i),l=new Array(i),u=0;u<i;++u){var c=o[u],d=r[u],f=d.length,h=Zc(e.call(c,c&&c.__data__,u,o)),v=h.length,m=s[u]=new Array(v),b=a[u]=new Array(v),y=l[u]=new Array(f);n(c,d,m,b,y,h,t);for(var C=0,E=0,g,w;C<v;++C)if(g=m[C]){for(C>=E&&(E=C+1);!(w=b[E])&&++E<v;);g._next=w||null}}return a=new pe(a,o),a._enter=s,a._exit=l,a}function Zc(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Wc(){return new pe(this._exit||this._groups.map(Ca),this._parents)}function Qc(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function Jc(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),s=new Array(r),l=0;l<a;++l)for(var u=n[l],c=o[l],d=u.length,f=s[l]=new Array(d),h,v=0;v<d;++v)(h=u[v]||c[v])&&(f[v]=h);for(;l<r;++l)s[l]=n[l];return new pe(s,this._parents)}function eu(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],a;--r>=0;)(a=o[r])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function tu(e){e||(e=nu);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a=n[i],s=a.length,l=r[i]=new Array(s),u,c=0;c<s;++c)(u=a[c])&&(l[c]=u);l.sort(t)}return new pe(r,this._parents).order()}function nu(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ou(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ru(){return Array.from(this)}function iu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null}function au(){let e=0;for(const t of this)++e;return e}function su(){return!this.node()}function lu(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,a=r.length,s;i<a;++i)(s=r[i])&&e.call(s,s.__data__,i,r);return this}function cu(e){return function(){this.removeAttribute(e)}}function uu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function du(e,t){return function(){this.setAttribute(e,t)}}function fu(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function hu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function vu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function pu(e,t){var n=Jn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?uu:cu:typeof t=="function"?n.local?vu:hu:n.local?fu:du)(n,t))}function Na(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function gu(e){return function(){this.style.removeProperty(e)}}function mu(e,t,n){return function(){this.style.setProperty(e,t,n)}}function yu(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function bu(e,t,n){return arguments.length>1?this.each((t==null?gu:typeof t=="function"?yu:mu)(e,t,n==null?"":n)):xt(this.node(),e)}function xt(e,t){return e.style.getPropertyValue(t)||Na(e).getComputedStyle(e,null).getPropertyValue(t)}function wu(e){return function(){delete this[e]}}function Su(e,t){return function(){this[e]=t}}function Eu(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function xu(e,t){return arguments.length>1?this.each((t==null?wu:typeof t=="function"?Eu:Su)(e,t)):this.node()[e]}function Oa(e){return e.trim().split(/^|\s+/)}function ir(e){return e.classList||new Pa(e)}function Pa(e){this._node=e,this._names=Oa(e.getAttribute("class")||"")}Pa.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function _a(e,t){for(var n=ir(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function ka(e,t){for(var n=ir(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function Cu(e){return function(){_a(this,e)}}function Nu(e){return function(){ka(this,e)}}function Ou(e,t){return function(){(t.apply(this,arguments)?_a:ka)(this,e)}}function Pu(e,t){var n=Oa(e+"");if(arguments.length<2){for(var o=ir(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Ou:t?Cu:Nu)(n,t))}function _u(){this.textContent=""}function ku(e){return function(){this.textContent=e}}function Mu(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Du(e){return arguments.length?this.each(e==null?_u:(typeof e=="function"?Mu:ku)(e)):this.node().textContent}function Iu(){this.innerHTML=""}function Tu(e){return function(){this.innerHTML=e}}function $u(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Ru(e){return arguments.length?this.each(e==null?Iu:(typeof e=="function"?$u:Tu)(e)):this.node().innerHTML}function Au(){this.nextSibling&&this.parentNode.appendChild(this)}function Lu(){return this.each(Au)}function Bu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zu(){return this.each(Bu)}function Vu(e){var t=typeof e=="function"?e:wa(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ju(){return null}function Yu(e,t){var n=typeof e=="function"?e:wa(e),o=t==null?ju:typeof t=="function"?t:rr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Hu(){var e=this.parentNode;e&&e.removeChild(this)}function Xu(){return this.each(Hu)}function Uu(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Gu(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ku(e){return this.select(e?Gu:Uu)}function qu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Fu(e){return function(t){e.call(this,t,this.__data__)}}function Zu(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Wu(e){return function(){var t=this.__on;if(!!t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function Qu(e,t,n){return function(){var o=this.__on,r,i=Fu(t);if(o){for(var a=0,s=o.length;a<s;++a)if((r=o[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function Ju(e,t,n){var o=Zu(e+""),r,i=o.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(r=0,c=s[l];r<i;++r)if((a=o[r]).type===c.type&&a.name===c.name)return c.value}return}for(s=t?Qu:Wu,r=0;r<i;++r)this.each(s(o[r],t,n));return this}function Ma(e,t,n){var o=Na(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function ed(e,t){return function(){return Ma(this,e,t)}}function td(e,t){return function(){return Ma(this,e,t.apply(this,arguments))}}function nd(e,t){return this.each((typeof t=="function"?td:ed)(e,t))}function*od(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,a;r<i;++r)(a=o[r])&&(yield a)}var Da=[null];function pe(e,t){this._groups=e,this._parents=t}function Jt(){return new pe([[document.documentElement]],Da)}function rd(){return this}pe.prototype=Jt.prototype={constructor:pe,select:Mc,selectAll:$c,selectChild:Bc,selectChildren:Yc,filter:Hc,data:Fc,enter:Xc,exit:Wc,join:Qc,merge:Jc,selection:rd,order:eu,sort:tu,call:ou,nodes:ru,node:iu,size:au,empty:su,each:lu,attr:pu,style:bu,property:xu,classed:Pu,text:Du,html:Ru,raise:Lu,lower:zu,append:Vu,insert:Yu,remove:Xu,clone:Ku,datum:qu,on:Ju,dispatch:nd,[Symbol.iterator]:od};function ye(e){return typeof e=="string"?new pe([[document.querySelector(e)]],[document.documentElement]):new pe([[e]],Da)}function id(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ce(e,t){if(e=id(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const ad={passive:!1},Kt={capture:!0,passive:!1};function uo(e){e.stopImmediatePropagation()}function bt(e){e.preventDefault(),e.stopImmediatePropagation()}function Ia(e){var t=e.document.documentElement,n=ye(e).on("dragstart.drag",bt,Kt);"onselectstart"in t?n.on("selectstart.drag",bt,Kt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ta(e,t){var n=e.document.documentElement,o=ye(e).on("dragstart.drag",null);t&&(o.on("click.drag",bt,Kt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var fn=e=>()=>e;function Vo(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:a,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Vo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function sd(e){return!e.ctrlKey&&!e.button}function ld(){return this.parentNode}function cd(e,t){return t==null?{x:e.x,y:e.y}:t}function ud(){return navigator.maxTouchPoints||"ontouchstart"in this}function dd(){var e=sd,t=ld,n=cd,o=ud,r={},i=Qn("start","drag","end"),a=0,s,l,u,c,d=0;function f(g){g.on("mousedown.drag",h).filter(o).on("touchstart.drag",b).on("touchmove.drag",y,ad).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(g,w){if(!(c||!e.call(this,g,w))){var x=E(this,t.call(this,g,w),g,w,"mouse");!x||(ye(g.view).on("mousemove.drag",v,Kt).on("mouseup.drag",m,Kt),Ia(g.view),uo(g),u=!1,s=g.clientX,l=g.clientY,x("start",g))}}function v(g){if(bt(g),!u){var w=g.clientX-s,x=g.clientY-l;u=w*w+x*x>d}r.mouse("drag",g)}function m(g){ye(g.view).on("mousemove.drag mouseup.drag",null),Ta(g.view,u),bt(g),r.mouse("end",g)}function b(g,w){if(!!e.call(this,g,w)){var x=g.changedTouches,k=t.call(this,g,w),P=x.length,T,A;for(T=0;T<P;++T)(A=E(this,k,g,w,x[T].identifier,x[T]))&&(uo(g),A("start",g,x[T]))}}function y(g){var w=g.changedTouches,x=w.length,k,P;for(k=0;k<x;++k)(P=r[w[k].identifier])&&(bt(g),P("drag",g,w[k]))}function C(g){var w=g.changedTouches,x=w.length,k,P;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),k=0;k<x;++k)(P=r[w[k].identifier])&&(uo(g),P("end",g,w[k]))}function E(g,w,x,k,P,T){var A=i.copy(),R=Ce(T||x,w),V,z,p;if((p=n.call(g,new Vo("beforestart",{sourceEvent:x,target:f,identifier:P,active:a,x:R[0],y:R[1],dx:0,dy:0,dispatch:A}),k))!=null)return V=p.x-R[0]||0,z=p.y-R[1]||0,function N(S,_,M){var $=R,D;switch(S){case"start":r[P]=N,D=a++;break;case"end":delete r[P],--a;case"drag":R=Ce(M||_,w),D=a;break}A.call(S,g,new Vo(S,{sourceEvent:_,subject:p,target:f,identifier:P,active:D,x:R[0]+V,y:R[1]+z,dx:R[0]-$[0],dy:R[1]-$[1],dispatch:A}),k)}}return f.filter=function(g){return arguments.length?(e=typeof g=="function"?g:fn(!!g),f):e},f.container=function(g){return arguments.length?(t=typeof g=="function"?g:fn(g),f):t},f.subject=function(g){return arguments.length?(n=typeof g=="function"?g:fn(g),f):n},f.touchable=function(g){return arguments.length?(o=typeof g=="function"?g:fn(!!g),f):o},f.on=function(){var g=i.on.apply(i,arguments);return g===i?f:g},f.clickDistance=function(g){return arguments.length?(d=(g=+g)*g,f):Math.sqrt(d)},f}function ar(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function $a(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function en(){}var qt=.7,Bn=1/qt,wt="\\s*([+-]?\\d+)\\s*",Ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fd=/^#([0-9a-f]{3,8})$/,hd=new RegExp(`^rgb\\(${wt},${wt},${wt}\\)$`),vd=new RegExp(`^rgb\\(${Oe},${Oe},${Oe}\\)$`),pd=new RegExp(`^rgba\\(${wt},${wt},${wt},${Ft}\\)$`),gd=new RegExp(`^rgba\\(${Oe},${Oe},${Oe},${Ft}\\)$`),md=new RegExp(`^hsl\\(${Ft},${Oe},${Oe}\\)$`),yd=new RegExp(`^hsla\\(${Ft},${Oe},${Oe},${Ft}\\)$`),Xr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ar(en,Zt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ur,formatHex:Ur,formatHex8:bd,formatHsl:wd,formatRgb:Gr,toString:Gr});function Ur(){return this.rgb().formatHex()}function bd(){return this.rgb().formatHex8()}function wd(){return Ra(this).formatHsl()}function Gr(){return this.rgb().formatRgb()}function Zt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=fd.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Kr(t):n===3?new de(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?hn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?hn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hd.exec(e))?new de(t[1],t[2],t[3],1):(t=vd.exec(e))?new de(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pd.exec(e))?hn(t[1],t[2],t[3],t[4]):(t=gd.exec(e))?hn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=md.exec(e))?Zr(t[1],t[2]/100,t[3]/100,1):(t=yd.exec(e))?Zr(t[1],t[2]/100,t[3]/100,t[4]):Xr.hasOwnProperty(e)?Kr(Xr[e]):e==="transparent"?new de(NaN,NaN,NaN,0):null}function Kr(e){return new de(e>>16&255,e>>8&255,e&255,1)}function hn(e,t,n,o){return o<=0&&(e=t=n=NaN),new de(e,t,n,o)}function Sd(e){return e instanceof en||(e=Zt(e)),e?(e=e.rgb(),new de(e.r,e.g,e.b,e.opacity)):new de}function jo(e,t,n,o){return arguments.length===1?Sd(e):new de(e,t,n,o==null?1:o)}function de(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}ar(de,jo,$a(en,{brighter(e){return e=e==null?Bn:Math.pow(Bn,e),new de(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qt:Math.pow(qt,e),new de(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new de(ot(this.r),ot(this.g),ot(this.b),zn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qr,formatHex:qr,formatHex8:Ed,formatRgb:Fr,toString:Fr}));function qr(){return`#${tt(this.r)}${tt(this.g)}${tt(this.b)}`}function Ed(){return`#${tt(this.r)}${tt(this.g)}${tt(this.b)}${tt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Fr(){const e=zn(this.opacity);return`${e===1?"rgb(":"rgba("}${ot(this.r)}, ${ot(this.g)}, ${ot(this.b)}${e===1?")":`, ${e})`}`}function zn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ot(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tt(e){return e=ot(e),(e<16?"0":"")+e.toString(16)}function Zr(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new be(e,t,n,o)}function Ra(e){if(e instanceof be)return new be(e.h,e.s,e.l,e.opacity);if(e instanceof en||(e=Zt(e)),!e)return new be;if(e instanceof be)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,s=i-r,l=(i+r)/2;return s?(t===i?a=(n-o)/s+(n<o)*6:n===i?a=(o-t)/s+2:a=(t-n)/s+4,s/=l<.5?i+r:2-i-r,a*=60):s=l>0&&l<1?0:a,new be(a,s,l,e.opacity)}function xd(e,t,n,o){return arguments.length===1?Ra(e):new be(e,t,n,o==null?1:o)}function be(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}ar(be,xd,$a(en,{brighter(e){return e=e==null?Bn:Math.pow(Bn,e),new be(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qt:Math.pow(qt,e),new be(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new de(fo(e>=240?e-240:e+120,r,o),fo(e,r,o),fo(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new be(Wr(this.h),vn(this.s),vn(this.l),zn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=zn(this.opacity);return`${e===1?"hsl(":"hsla("}${Wr(this.h)}, ${vn(this.s)*100}%, ${vn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Wr(e){return e=(e||0)%360,e<0?e+360:e}function vn(e){return Math.max(0,Math.min(1,e||0))}function fo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var Aa=e=>()=>e;function Cd(e,t){return function(n){return e+n*t}}function Nd(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Od(e){return(e=+e)==1?La:function(t,n){return n-t?Nd(t,n,e):Aa(isNaN(t)?n:t)}}function La(e,t){var n=t-e;return n?Cd(e,n):Aa(isNaN(e)?t:e)}var Qr=function e(t){var n=Od(t);function o(r,i){var a=n((r=jo(r)).r,(i=jo(i)).r),s=n(r.g,i.g),l=n(r.b,i.b),u=La(r.opacity,i.opacity);return function(c){return r.r=a(c),r.g=s(c),r.b=l(c),r.opacity=u(c),r+""}}return o.gamma=e,o}(1);function Xe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Yo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ho=new RegExp(Yo.source,"g");function Pd(e){return function(){return e}}function _d(e){return function(t){return e(t)+""}}function kd(e,t){var n=Yo.lastIndex=ho.lastIndex=0,o,r,i,a=-1,s=[],l=[];for(e=e+"",t=t+"";(o=Yo.exec(e))&&(r=ho.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),s[a]?s[a]+=i:s[++a]=i),(o=o[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:Xe(o,r)})),n=ho.lastIndex;return n<t.length&&(i=t.slice(n),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?_d(l[0].x):Pd(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}var Jr=180/Math.PI,Ho={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ba(e,t,n,o,r,i){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Jr,skewX:Math.atan(l)*Jr,scaleX:a,scaleY:s}}var pn;function Md(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ho:Ba(t.a,t.b,t.c,t.d,t.e,t.f)}function Dd(e){return e==null||(pn||(pn=document.createElementNS("http://www.w3.org/2000/svg","g")),pn.setAttribute("transform",e),!(e=pn.transform.baseVal.consolidate()))?Ho:(e=e.matrix,Ba(e.a,e.b,e.c,e.d,e.e,e.f))}function za(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,c,d,f,h,v){if(u!==d||c!==f){var m=h.push("translate(",null,t,null,n);v.push({i:m-4,x:Xe(u,d)},{i:m-2,x:Xe(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function a(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(r(d)+"rotate(",null,o)-2,x:Xe(u,c)})):c&&d.push(r(d)+"rotate("+c+o)}function s(u,c,d,f){u!==c?f.push({i:d.push(r(d)+"skewX(",null,o)-2,x:Xe(u,c)}):c&&d.push(r(d)+"skewX("+c+o)}function l(u,c,d,f,h,v){if(u!==d||c!==f){var m=h.push(r(h)+"scale(",null,",",null,")");v.push({i:m-4,x:Xe(u,d)},{i:m-2,x:Xe(c,f)})}else(d!==1||f!==1)&&h.push(r(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),i(u.translateX,u.translateY,c.translateX,c.translateY,d,f),a(u.rotate,c.rotate,d,f),s(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var v=-1,m=f.length,b;++v<m;)d[(b=f[v]).i]=b.x(h);return d.join("")}}}var Id=za(Md,"px, ","px)","deg)"),Td=za(Dd,", ",")",")"),$d=1e-12;function ei(e){return((e=Math.exp(e))+1/e)/2}function Rd(e){return((e=Math.exp(e))-1/e)/2}function Ad(e){return((e=Math.exp(2*e))-1)/(e+1)}var Ld=function e(t,n,o){function r(i,a){var s=i[0],l=i[1],u=i[2],c=a[0],d=a[1],f=a[2],h=c-s,v=d-l,m=h*h+v*v,b,y;if(m<$d)y=Math.log(f/u)/t,b=function(k){return[s+k*h,l+k*v,u*Math.exp(t*k*y)]};else{var C=Math.sqrt(m),E=(f*f-u*u+o*m)/(2*u*n*C),g=(f*f-u*u-o*m)/(2*f*n*C),w=Math.log(Math.sqrt(E*E+1)-E),x=Math.log(Math.sqrt(g*g+1)-g);y=(x-w)/t,b=function(k){var P=k*y,T=ei(w),A=u/(n*C)*(T*Ad(t*P+w)-Rd(w));return[s+A*h,l+A*v,u*T/ei(t*P+w)]}}return b.duration=y*1e3*t/Math.SQRT2,b}return r.rho=function(i){var a=Math.max(.001,+i),s=a*a,l=s*s;return e(a,s,l)},r}(Math.SQRT2,2,4),Ct=0,Bt=0,Tt=0,Va=1e3,Vn,zt,jn=0,at=0,eo=0,Wt=typeof performance=="object"&&performance.now?performance:Date,ja=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function sr(){return at||(ja(Bd),at=Wt.now()+eo)}function Bd(){at=0}function Yn(){this._call=this._time=this._next=null}Yn.prototype=Ya.prototype={constructor:Yn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?sr():+n)+(t==null?0:+t),!this._next&&zt!==this&&(zt?zt._next=this:Vn=this,zt=this),this._call=e,this._time=n,Xo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xo())}};function Ya(e,t,n){var o=new Yn;return o.restart(e,t,n),o}function zd(){sr(),++Ct;for(var e=Vn,t;e;)(t=at-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ct}function ti(){at=(jn=Wt.now())+eo,Ct=Bt=0;try{zd()}finally{Ct=0,jd(),at=0}}function Vd(){var e=Wt.now(),t=e-jn;t>Va&&(eo-=t,jn=e)}function jd(){for(var e,t=Vn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Vn=n);zt=e,Xo(o)}function Xo(e){if(!Ct){Bt&&(Bt=clearTimeout(Bt));var t=e-at;t>24?(e<1/0&&(Bt=setTimeout(ti,e-Wt.now()-eo)),Tt&&(Tt=clearInterval(Tt))):(Tt||(jn=Wt.now(),Tt=setInterval(Vd,Va)),Ct=1,ja(ti))}}function ni(e,t,n){var o=new Yn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Yd=Qn("start","end","cancel","interrupt"),Hd=[],Ha=0,oi=1,Uo=2,On=3,ri=4,Go=5,Pn=6;function to(e,t,n,o,r,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Xd(e,n,{name:t,index:o,group:r,on:Yd,tween:Hd,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Ha})}function lr(e,t){var n=we(e,t);if(n.state>Ha)throw new Error("too late; already scheduled");return n}function _e(e,t){var n=we(e,t);if(n.state>On)throw new Error("too late; already running");return n}function we(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Xd(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=Ya(i,0,n.time);function i(u){n.state=oi,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,d,f,h;if(n.state!==oi)return l();for(c in o)if(h=o[c],h.name===n.name){if(h.state===On)return ni(a);h.state===ri?(h.state=Pn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=Pn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(ni(function(){n.state===On&&(n.state=ri,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Uo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Uo){for(n.state=On,r=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Go,1),d=-1,f=r.length;++d<f;)r[d].call(e,c);n.state===Go&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Pn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function _n(e,t){var n=e.__transition,o,r,i=!0,a;if(!!n){t=t==null?null:t+"";for(a in n){if((o=n[a]).name!==t){i=!1;continue}r=o.state>Uo&&o.state<Go,o.state=Pn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[a]}i&&delete e.__transition}}function Ud(e){return this.each(function(){_n(this,e)})}function Gd(e,t){var n,o;return function(){var r=_e(this,e),i=r.tween;if(i!==n){o=n=i;for(var a=0,s=o.length;a<s;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}r.tween=o}}function Kd(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=_e(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var s={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=s;break}l===u&&r.push(s)}i.tween=r}}function qd(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=we(this.node(),n).tween,r=0,i=o.length,a;r<i;++r)if((a=o[r]).name===e)return a.value;return null}return this.each((t==null?Gd:Kd)(n,e,t))}function cr(e,t,n){var o=e._id;return e.each(function(){var r=_e(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return we(r,o).value[t]}}function Xa(e,t){var n;return(typeof t=="number"?Xe:t instanceof Zt?Qr:(n=Zt(t))?(t=n,Qr):kd)(e,t)}function Fd(e){return function(){this.removeAttribute(e)}}function Zd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Wd(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttribute(e);return a===r?null:a===o?i:i=t(o=a,n)}}function Qd(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===o?i:i=t(o=a,n)}}function Jd(e,t,n){var o,r,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s)))}}function ef(e,t,n){var o,r,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s)))}}function tf(e,t){var n=Jn(e),o=n==="transform"?Td:Xa;return this.attrTween(e,typeof t=="function"?(n.local?ef:Jd)(n,o,cr(this,"attr."+e,t)):t==null?(n.local?Zd:Fd)(n):(n.local?Qd:Wd)(n,o,t))}function nf(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function of(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function rf(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&of(e,i)),n}return r._value=t,r}function af(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&nf(e,i)),n}return r._value=t,r}function sf(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Jn(e);return this.tween(n,(o.local?rf:af)(o,t))}function lf(e,t){return function(){lr(this,e).delay=+t.apply(this,arguments)}}function cf(e,t){return t=+t,function(){lr(this,e).delay=t}}function uf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?lf:cf)(t,e)):we(this.node(),t).delay}function df(e,t){return function(){_e(this,e).duration=+t.apply(this,arguments)}}function ff(e,t){return t=+t,function(){_e(this,e).duration=t}}function hf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?df:ff)(t,e)):we(this.node(),t).duration}function vf(e,t){if(typeof t!="function")throw new Error;return function(){_e(this,e).ease=t}}function pf(e){var t=this._id;return arguments.length?this.each(vf(t,e)):we(this.node(),t).ease}function gf(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;_e(this,e).ease=n}}function mf(e){if(typeof e!="function")throw new Error;return this.each(gf(this._id,e))}function yf(e){typeof e!="function"&&(e=Ea(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=[],l,u=0;u<a;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&s.push(l);return new Be(o,this._parents,this._name,this._id)}function bf(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),s=0;s<i;++s)for(var l=t[s],u=n[s],c=l.length,d=a[s]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;s<o;++s)a[s]=t[s];return new Be(a,this._parents,this._name,this._id)}function wf(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Sf(e,t,n){var o,r,i=wf(t)?lr:_e;return function(){var a=i(this,e),s=a.on;s!==o&&(r=(o=s).copy()).on(t,n),a.on=r}}function Ef(e,t){var n=this._id;return arguments.length<2?we(this.node(),n).on.on(e):this.each(Sf(n,e,t))}function xf(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Cf(){return this.on("end.remove",xf(this._id))}function Nf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=rr(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var s=o[a],l=s.length,u=i[a]=new Array(l),c,d,f=0;f<l;++f)(c=s[f])&&(d=e.call(c,c.__data__,f,s))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,to(u[f],t,n,f,u,we(c,n)));return new Be(i,this._parents,t,n)}function Of(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Sa(e));for(var o=this._groups,r=o.length,i=[],a=[],s=0;s<r;++s)for(var l=o[s],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,v=we(c,n),m=0,b=f.length;m<b;++m)(h=f[m])&&to(h,t,n,m,f,v);i.push(f),a.push(c)}return new Be(i,a,t,n)}var Pf=Jt.prototype.constructor;function _f(){return new Pf(this._groups,this._parents)}function kf(e,t){var n,o,r;return function(){var i=xt(this,e),a=(this.style.removeProperty(e),xt(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}function Ua(e){return function(){this.style.removeProperty(e)}}function Mf(e,t,n){var o,r=n+"",i;return function(){var a=xt(this,e);return a===r?null:a===o?i:i=t(o=a,n)}}function Df(e,t,n){var o,r,i;return function(){var a=xt(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),xt(this,e))),a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s))}}function If(e,t){var n,o,r,i="style."+t,a="end."+i,s;return function(){var l=_e(this,e),u=l.on,c=l.value[i]==null?s||(s=Ua(t)):void 0;(u!==n||r!==c)&&(o=(n=u).copy()).on(a,r=c),l.on=o}}function Tf(e,t,n){var o=(e+="")=="transform"?Id:Xa;return t==null?this.styleTween(e,kf(e,o)).on("end.style."+e,Ua(e)):typeof t=="function"?this.styleTween(e,Df(e,o,cr(this,"style."+e,t))).each(If(this._id,e)):this.styleTween(e,Mf(e,o,t),n).on("end.style."+e,null)}function $f(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Rf(e,t,n){var o,r;function i(){var a=t.apply(this,arguments);return a!==r&&(o=(r=a)&&$f(e,a,n)),o}return i._value=t,i}function Af(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Rf(e,t,n==null?"":n))}function Lf(e){return function(){this.textContent=e}}function Bf(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function zf(e){return this.tween("text",typeof e=="function"?Bf(cr(this,"text",e)):Lf(e==null?"":e+""))}function Vf(e){return function(t){this.textContent=e.call(this,t)}}function jf(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Vf(r)),t}return o._value=e,o}function Yf(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,jf(e))}function Hf(){for(var e=this._name,t=this._id,n=Ga(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var c=we(l,t);to(l,e,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Be(o,this._parents,e,n)}function Xf(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,a){var s={value:a},l={value:function(){--r===0&&i()}};n.each(function(){var u=_e(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),r===0&&i()})}var Uf=0;function Be(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Ga(){return++Uf}var De=Jt.prototype;Be.prototype={constructor:Be,select:Nf,selectAll:Of,selectChild:De.selectChild,selectChildren:De.selectChildren,filter:yf,merge:bf,selection:_f,transition:Hf,call:De.call,nodes:De.nodes,node:De.node,size:De.size,empty:De.empty,each:De.each,on:Ef,attr:tf,attrTween:sf,style:Tf,styleTween:Af,text:zf,textTween:Yf,remove:Cf,tween:qd,delay:uf,duration:hf,ease:pf,easeVarying:mf,end:Xf,[Symbol.iterator]:De[Symbol.iterator]};function Gf(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Kf={time:null,delay:0,duration:250,ease:Gf};function qf(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ff(e){var t,n;e instanceof Be?(t=e._id,e=e._name):(t=Ga(),(n=Kf).time=sr(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],s=a.length,l,u=0;u<s;++u)(l=a[u])&&to(l,e,t,u,a,n||qf(l,t));return new Be(o,this._parents,e,t)}Jt.prototype.interrupt=Ud;Jt.prototype.transition=Ff;var gn=e=>()=>e;function Zf(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Re(e,t,n){this.k=e,this.x=t,this.y=n}Re.prototype={constructor:Re,scale:function(e){return e===1?this:new Re(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Re(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rt=new Re(1,0,0);Re.prototype;function vo(e){e.stopImmediatePropagation()}function $t(e){e.preventDefault(),e.stopImmediatePropagation()}function Wf(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Qf(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ii(){return this.__zoom||rt}function Jf(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function eh(){return navigator.maxTouchPoints||"ontouchstart"in this}function th(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function nh(){var e=Wf,t=Qf,n=th,o=Jf,r=eh,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Ld,u=Qn("start","zoom","end"),c,d,f,h=500,v=150,m=0,b=10;function y(p){p.property("__zoom",ii).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",A).filter(r).on("touchstart.zoom",R).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(p,N,S,_){var M=p.selection?p.selection():p;M.property("__zoom",ii),p!==M?w(p,N,S,_):M.interrupt().each(function(){x(this,arguments).event(_).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},y.scaleBy=function(p,N,S,_){y.scaleTo(p,function(){var M=this.__zoom.k,$=typeof N=="function"?N.apply(this,arguments):N;return M*$},S,_)},y.scaleTo=function(p,N,S,_){y.transform(p,function(){var M=t.apply(this,arguments),$=this.__zoom,D=S==null?g(M):typeof S=="function"?S.apply(this,arguments):S,L=$.invert(D),H=typeof N=="function"?N.apply(this,arguments):N;return n(E(C($,H),D,L),M,a)},S,_)},y.translateBy=function(p,N,S,_){y.transform(p,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),a)},null,_)},y.translateTo=function(p,N,S,_,M){y.transform(p,function(){var $=t.apply(this,arguments),D=this.__zoom,L=_==null?g($):typeof _=="function"?_.apply(this,arguments):_;return n(rt.translate(L[0],L[1]).scale(D.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof S=="function"?-S.apply(this,arguments):-S),$,a)},_,M)};function C(p,N){return N=Math.max(i[0],Math.min(i[1],N)),N===p.k?p:new Re(N,p.x,p.y)}function E(p,N,S){var _=N[0]-S[0]*p.k,M=N[1]-S[1]*p.k;return _===p.x&&M===p.y?p:new Re(p.k,_,M)}function g(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function w(p,N,S,_){p.on("start.zoom",function(){x(this,arguments).event(_).start()}).on("interrupt.zoom end.zoom",function(){x(this,arguments).event(_).end()}).tween("zoom",function(){var M=this,$=arguments,D=x(M,$).event(_),L=t.apply(M,$),H=S==null?g(L):typeof S=="function"?S.apply(M,$):S,U=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),I=M.__zoom,Y=typeof N=="function"?N.apply(M,$):N,Z=l(I.invert(H).concat(U/I.k),Y.invert(H).concat(U/Y.k));return function(q){if(q===1)q=Y;else{var Q=Z(q),ee=U/Q[2];q=new Re(ee,H[0]-Q[0]*ee,H[1]-Q[1]*ee)}D.zoom(null,q)}})}function x(p,N,S){return!S&&p.__zooming||new k(p,N)}function k(p,N){this.that=p,this.args=N,this.active=0,this.sourceEvent=null,this.extent=t.apply(p,N),this.taps=0}k.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,N){return this.mouse&&p!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var N=ye(this.that).datum();u.call(p,this.that,new Zf(p,{sourceEvent:this.sourceEvent,target:y,type:p,transform:this.that.__zoom,dispatch:u}),N)}};function P(p,...N){if(!e.apply(this,arguments))return;var S=x(this,N).event(p),_=this.__zoom,M=Math.max(i[0],Math.min(i[1],_.k*Math.pow(2,o.apply(this,arguments)))),$=Ce(p);if(S.wheel)(S.mouse[0][0]!==$[0]||S.mouse[0][1]!==$[1])&&(S.mouse[1]=_.invert(S.mouse[0]=$)),clearTimeout(S.wheel);else{if(_.k===M)return;S.mouse=[$,_.invert($)],_n(this),S.start()}$t(p),S.wheel=setTimeout(D,v),S.zoom("mouse",n(E(C(_,M),S.mouse[0],S.mouse[1]),S.extent,a));function D(){S.wheel=null,S.end()}}function T(p,...N){if(f||!e.apply(this,arguments))return;var S=p.currentTarget,_=x(this,N,!0).event(p),M=ye(p.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",U,!0),$=Ce(p,S),D=p.clientX,L=p.clientY;Ia(p.view),vo(p),_.mouse=[$,this.__zoom.invert($)],_n(this),_.start();function H(I){if($t(I),!_.moved){var Y=I.clientX-D,Z=I.clientY-L;_.moved=Y*Y+Z*Z>m}_.event(I).zoom("mouse",n(E(_.that.__zoom,_.mouse[0]=Ce(I,S),_.mouse[1]),_.extent,a))}function U(I){M.on("mousemove.zoom mouseup.zoom",null),Ta(I.view,_.moved),$t(I),_.event(I).end()}}function A(p,...N){if(!!e.apply(this,arguments)){var S=this.__zoom,_=Ce(p.changedTouches?p.changedTouches[0]:p,this),M=S.invert(_),$=S.k*(p.shiftKey?.5:2),D=n(E(C(S,$),_,M),t.apply(this,N),a);$t(p),s>0?ye(this).transition().duration(s).call(w,D,_,p):ye(this).call(y.transform,D,_,p)}}function R(p,...N){if(!!e.apply(this,arguments)){var S=p.touches,_=S.length,M=x(this,N,p.changedTouches.length===_).event(p),$,D,L,H;for(vo(p),D=0;D<_;++D)L=S[D],H=Ce(L,this),H=[H,this.__zoom.invert(H),L.identifier],M.touch0?!M.touch1&&M.touch0[2]!==H[2]&&(M.touch1=H,M.taps=0):(M.touch0=H,$=!0,M.taps=1+!!c);c&&(c=clearTimeout(c)),$&&(M.taps<2&&(d=H[0],c=setTimeout(function(){c=null},h)),_n(this),M.start())}}function V(p,...N){if(!!this.__zooming){var S=x(this,N).event(p),_=p.changedTouches,M=_.length,$,D,L,H;for($t(p),$=0;$<M;++$)D=_[$],L=Ce(D,this),S.touch0&&S.touch0[2]===D.identifier?S.touch0[0]=L:S.touch1&&S.touch1[2]===D.identifier&&(S.touch1[0]=L);if(D=S.that.__zoom,S.touch1){var U=S.touch0[0],I=S.touch0[1],Y=S.touch1[0],Z=S.touch1[1],q=(q=Y[0]-U[0])*q+(q=Y[1]-U[1])*q,Q=(Q=Z[0]-I[0])*Q+(Q=Z[1]-I[1])*Q;D=C(D,Math.sqrt(q/Q)),L=[(U[0]+Y[0])/2,(U[1]+Y[1])/2],H=[(I[0]+Z[0])/2,(I[1]+Z[1])/2]}else if(S.touch0)L=S.touch0[0],H=S.touch0[1];else return;S.zoom("touch",n(E(D,L,H),S.extent,a))}}function z(p,...N){if(!!this.__zooming){var S=x(this,N).event(p),_=p.changedTouches,M=_.length,$,D;for(vo(p),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),$=0;$<M;++$)D=_[$],S.touch0&&S.touch0[2]===D.identifier?delete S.touch0:S.touch1&&S.touch1[2]===D.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(D=Ce(D,this),Math.hypot(d[0]-D[0],d[1]-D[1])<b)){var L=ye(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return y.wheelDelta=function(p){return arguments.length?(o=typeof p=="function"?p:gn(+p),y):o},y.filter=function(p){return arguments.length?(e=typeof p=="function"?p:gn(!!p),y):e},y.touchable=function(p){return arguments.length?(r=typeof p=="function"?p:gn(!!p),y):r},y.extent=function(p){return arguments.length?(t=typeof p=="function"?p:gn([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),y):t},y.scaleExtent=function(p){return arguments.length?(i[0]=+p[0],i[1]=+p[1],y):[i[0],i[1]]},y.translateExtent=function(p){return arguments.length?(a[0][0]=+p[0][0],a[1][0]=+p[1][0],a[0][1]=+p[0][1],a[1][1]=+p[1][1],y):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},y.constrain=function(p){return arguments.length?(n=p,y):n},y.duration=function(p){return arguments.length?(s=+p,y):s},y.interpolate=function(p){return arguments.length?(l=p,y):l},y.on=function(){var p=u.on.apply(u,arguments);return p===u?y:p},y.clickDistance=function(p){return arguments.length?(m=(p=+p)*p,y):Math.sqrt(m)},y.tapDistance=function(p){return arguments.length?(b=+p,y):b},y}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ko(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Ka(e,t){if(!!e){if(typeof e=="string")return Ko(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ko(e,t)}}function oh(e){if(Array.isArray(e))return e}function rh(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],r=!0,i=!1,a,s;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(o.push(a.value),!(t&&o.length===t));r=!0);}catch(l){i=!0,s=l}finally{try{!r&&n.return!=null&&n.return()}finally{if(i)throw s}}return o}}function ih(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K(e,t){return oh(e)||rh(e,t)||Ka(e,t)||ih()}var Nt;(function(e){e.Strict="strict",e.Loose="loose"})(Nt||(Nt={}));var ai;(function(e){e.Lines="lines",e.Dots="dots"})(ai||(ai={}));var St;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(St||(St={}));var $e;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})($e||($e={}));var Qt;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Qt||(Qt={}));var B;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(B||(B={}));var ur=function(t){return{width:t.offsetWidth,height:t.offsetHeight}},Et=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(t,n),o)},qa=function(t,n){return{x:Et(t.x,n[0][0],n[1][0]),y:Et(t.y,n[0][1],n[1][1])}},Fa=function(t){var n,o;return((n=t.getRootNode)===null||n===void 0?void 0:n.call(t))||((o=window)===null||o===void 0?void 0:o.document)},ah=function(t,n){return{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x2,n.x2),y2:Math.max(t.y2,n.y2)}},Hn=function(t){var n=t.x,o=t.y,r=t.width,i=t.height;return{x:n,y:o,x2:n+r,y2:o+i}},sh=function(t){var n=t.x,o=t.y,r=t.x2,i=t.y2;return{x:n,y:o,width:r-n,height:i-o}},Za=function(t){return!isNaN(t)&&isFinite(t)},se=Symbol("internals");function si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?si(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):si(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function li(e,t){var n=e.find(function(u){return u.id===t.parentNode});if(n){var o=t.position.x+t.width-n.width,r=t.position.y+t.height-n.height;if(o>0||r>0||t.position.x<0||t.position.y<0){var i,a;if(n.style=Vt({},n.style)||{},n.style.width=(i=n.style.width)!==null&&i!==void 0?i:n.width,n.style.height=(a=n.style.height)!==null&&a!==void 0?a:n.height,o>0&&(n.style.width+=o),r>0&&(n.style.height+=r),t.position.x<0){var s=Math.abs(t.position.x);n.position.x=n.position.x-s,n.style.width+=s,t.position.x=0}if(t.position.y<0){var l=Math.abs(t.position.y);n.position.y=n.position.y-l,n.style.height+=l,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Wa(e,t){if(e.some(function(o){return o.type==="reset"}))return e.filter(function(o){return o.type==="reset"}).map(function(o){return o.item});var n=e.filter(function(o){return o.type==="add"}).map(function(o){return o.item});return t.reduce(function(o,r){var i=e.find(function(l){return l.id===r.id});if(i)switch(i.type){case"select":return o.push(Vt(Vt({},r),{},{selected:i.selected})),o;case"position":{var a=Vt({},r);return typeof i.position!="undefined"&&(a.position=i.position),typeof i.positionAbsolute!="undefined"&&(a.positionAbsolute=i.positionAbsolute),typeof i.dragging!="undefined"&&(a.dragging=i.dragging),a.expandParent&&li(o,a),o.push(a),o}case"dimensions":{var s=Vt({},r);return typeof i.dimensions!="undefined"&&(s.width=i.dimensions.width,s.height=i.dimensions.height),s.expandParent&&li(o,s),o.push(s),o}case"remove":return o}return o.push(r),o},n)}function Qa(e,t){return Wa(e,t)}function lh(e,t){return Wa(e,t)}var Ue=function(t,n){return{id:t,type:"select",selected:n}};function mt(e,t){return e.reduce(function(n,o){var r=t.includes(o.id);return!o.selected&&r?(o.selected=!0,n.push(Ue(o.id,!0))):o.selected&&!r&&(o.selected=!1,n.push(Ue(o.id,!1))),n},[])}function ci(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Ja(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ci(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ci(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var ui=function(t,n,o){var r=n.querySelectorAll(t);if(!r||!r.length)return null;var i=Array.from(r),a=n.getBoundingClientRect();return i.map(function(s){var l=s.getBoundingClientRect();return Ja({id:s.getAttribute("data-handleid"),position:s.getAttribute("data-handlepos"),x:(l.left-a.left)/o,y:(l.top-a.top)/o},ur(s))})};function Rt(e,t,n){return n===void 0?n:function(o){var r=t().nodeInternals.get(e);n(o,Ja({},r))}}function es(e){var t=e.id,n=e.store,o=n.getState(),r=o.addSelectedNodes,i=o.unselectNodesAndEdges,a=o.multiSelectionActive,s=o.nodeInternals,l=s.get(t);n.setState({nodesSelectionActive:!1}),l.selected?l.selected&&a&&i({nodes:[l]}):r([t])}function di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?di(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):di(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var ch=function(t){return"id"in t&&"source"in t&&"target"in t},uh=function(t){var n=t.source,o=t.sourceHandle,r=t.target,i=t.targetHandle;return"reactflow__edge-".concat(n).concat(o||"","-").concat(r).concat(i||"")},qo=function(t,n){if(typeof t=="undefined")return"";if(typeof t=="string")return t;var o=n?"".concat(n,"__"):"";return"".concat(o).concat(Object.keys(t).sort().map(function(r){return"".concat(r,"=").concat(t[r])}).join("&"))},dh=function(t,n){return n.some(function(o){return o.source===t.source&&o.target===t.target&&(o.sourceHandle===t.sourceHandle||!o.sourceHandle&&!t.sourceHandle)&&(o.targetHandle===t.targetHandle||!o.targetHandle&&!t.targetHandle)})},fh=function(t,n){if(!t.source||!t.target)return n;var o;return ch(t)?o=Xt({},t):o=Xt(Xt({},t),{},{id:uh(t)}),dh(o,n)?n:n.concat(o)},ts=function(t,n,o,r){var i=t.x,a=t.y,s=K(n,3),l=s[0],u=s[1],c=s[2],d=K(r,2),f=d[0],h=d[1],v={x:(i-l)/c,y:(a-u)/c};return o?{x:f*Math.round(v.x/f),y:h*Math.round(v.y/h)}:v},dr=function(t){if(t.length===0)return{x:0,y:0,width:0,height:0};var n=t.reduce(function(o,r){var i=r.positionAbsolute,a=r.position,s=r.width,l=r.height;return ah(o,Hn({x:i?i.x:a.x,y:i?i.y:a.y,width:s||0,height:l||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return sh(n)},ns=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,1],r=K(o,3),i=r[0],a=r[1],s=r[2],l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,c=Hn({x:(n.x-i)/s,y:(n.y-a)/s,width:n.width/s,height:n.height/s}),d=[];return t.forEach(function(f){var h=f.positionAbsolute,v=f.width,m=f.height,b=f.selectable,y=b===void 0?!0:b;if(u&&!y)return!1;var C=Hn(Xt(Xt({},h),{},{width:v||0,height:m||0})),E=Math.max(0,Math.min(c.x2,C.x2)-Math.max(c.x,C.x)),g=Math.max(0,Math.min(c.y2,C.y2)-Math.max(c.y,C.y)),w=Math.ceil(E*g),x=typeof v=="undefined"||typeof m=="undefined"||v===null||m===null,k=l&&w>0,P=(v||0)*(m||0),T=x||k||w>=P;T&&d.push(f)}),d},fr=function(t,n){var o=t.map(function(r){return r.id});return n.filter(function(r){return o.includes(r.source)||o.includes(r.target)})},os=function(t,n,o,r,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:.1,s=n/(t.width*(1+a)),l=o/(t.height*(1+a)),u=Math.min(s,l),c=Et(u,r,i),d=t.x+t.width/2,f=t.y+t.height/2,h=n/2-d*c,v=o/2-f*c;return[h,v,c]},et=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.transition().duration(n)};function fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fi(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fi(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function rs(e,t,n,o){var r,i,a,s,l,u,c,d,f,h,v,m;if(!e.parentNode)return o;var b=t.get(e.parentNode);return rs(b,t,n,{x:((r=o.x)!==null&&r!==void 0?r:0)+((i=(a=b.position)===null||a===void 0?void 0:a.x)!==null&&i!==void 0?i:0),y:((s=o.y)!==null&&s!==void 0?s:0)+((l=(u=b.position)===null||u===void 0?void 0:u.y)!==null&&l!==void 0?l:0),z:((c=(d=b[se])===null||d===void 0?void 0:d.z)!==null&&c!==void 0?c:0)>((f=o.z)!==null&&f!==void 0?f:0)?(h=(v=b[se])===null||v===void 0?void 0:v.z)!==null&&h!==void 0?h:0:(m=o.z)!==null&&m!==void 0?m:0})}function po(e,t){var n=new Map,o={};return e.forEach(function(r){var i,a=Za(r.zIndex)?r.zIndex:r.selected?1e3:0,s=t.get(r.id),l=yt(yt({width:s==null?void 0:s.width,height:s==null?void 0:s.height},r),{},{positionAbsolute:{x:r.position.x,y:r.position.y}});r.parentNode&&(l.parentNode=r.parentNode,o[r.parentNode]=!0),Object.defineProperty(l,se,{enumerable:!1,value:{handleBounds:s==null||(i=s[se])===null||i===void 0?void 0:i.handleBounds,z:a}}),n.set(r.id,l)}),n.forEach(function(r){if(r.parentNode&&!n.has(r.parentNode))throw new Error("Parent node ".concat(r.parentNode," not found"));if(r.parentNode||o[r.id]){var i,a,s=rs(r,n,o,yt(yt({},r.position),{},{z:(i=(a=r[se])===null||a===void 0?void 0:a.z)!==null&&i!==void 0?i:0})),l=s.x,u=s.y,c=s.z;r.positionAbsolute={x:l,y:u},r[se].z=c,o[r.id]&&(r[se].isParent=!0)}}),n}function is(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e(),o=n.nodeInternals,r=n.width,i=n.height,a=n.minZoom,s=n.maxZoom,l=n.d3Zoom,u=n.d3Selection,c=n.fitViewOnInitDone,d=n.fitViewOnInit;if((t.initial&&!c&&d||!t.initial)&&l&&u){var f=Array.from(o.values()).filter(function(P){return t.includeHiddenNodes?P.width&&P.height:!P.hidden}),h=f.every(function(P){return P.width&&P.height});if(f.length>0&&h){var v,m,b,y=dr(f),C=os(y,r,i,(v=t.minZoom)!==null&&v!==void 0?v:a,(m=t.maxZoom)!==null&&m!==void 0?m:s,(b=t.padding)!==null&&b!==void 0?b:.1),E=K(C,3),g=E[0],w=E[1],x=E[2],k=rt.translate(g,w).scale(x);return typeof t.duration=="number"&&t.duration>0?l.transform(et(u,t.duration),k):l.transform(u,k),!0}}return!1}function hh(e,t){return e.forEach(function(n){var o=t.get(n.id);if(o){var r;t.set(o.id,yt(yt({},o),{},(r={},W(r,se,o[se]),W(r,"selected",n.selected),r)))}}),new Map(t)}function vh(e,t){return t.map(function(n){var o=e.find(function(r){return r.id===n.id});return o&&(n.selected=o.selected),n})}function mn(e){var t=e.changedNodes,n=e.changedEdges,o=e.get,r=e.set,i=o(),a=i.nodeInternals,s=i.edges,l=i.onNodesChange,u=i.onEdgesChange,c=i.hasDefaultNodes,d=i.hasDefaultEdges;t!=null&&t.length&&(c&&r({nodeInternals:hh(t,a)}),l==null||l(t)),n!=null&&n.length&&(d&&r({edges:vh(n,s)}),u==null||u(n))}var hi=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],vi={width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:hi,nodeExtent:hi,nodesSelectionActive:!1,userSelectionActive:!1,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:Nt.Strict,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,reactFlowVersion:"10.3.11",connectionStartHandle:null,connectOnClick:!0};function pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pi(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pi(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var hr=xc(),as=hr.Provider,ae=hr.useStore,ue=hr.useStoreApi,ss=function(){return yc(function(t,n){return xe(xe({},vi),{},{setNodes:function(r){t({nodeInternals:po(r,n().nodeInternals)})},setEdges:function(r){var i=n(),a=i.defaultEdgeOptions,s=a===void 0?{}:a;t({edges:r.map(function(l){return xe(xe({},s),l)})})},setDefaultNodesAndEdges:function(r,i){var a=typeof r!="undefined",s=typeof i!="undefined",l=a?po(r,new Map):new Map,u=s?i:[];t({nodeInternals:l,edges:u,hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:function(r){var i=n(),a=i.onNodesChange,s=i.nodeInternals,l=i.fitViewOnInit,u=i.fitViewOnInitDone,c=i.fitViewOnInitOptions,d=window.getComputedStyle(document.querySelector(".react-flow__viewport")),f=new window.DOMMatrixReadOnly(d.transform),h=f.m22,v=r.reduce(function(b,y){var C=s.get(y.id);if(C){var E=ur(y.nodeElement),g=!!(E.width&&E.height&&(C.width!==E.width||C.height!==E.height||y.forceUpdate));g&&(s.set(C.id,xe(xe({},C),{},W({},se,xe(xe({},C[se]),{},{handleBounds:{source:ui(".source",y.nodeElement,h),target:ui(".target",y.nodeElement,h)}})),E)),b.push({id:C.id,type:"dimensions",dimensions:E}))}return b},[]),m=u||l&&!u&&is(n,xe({initial:!0},c));t({nodeInternals:new Map(s),fitViewOnInitDone:m}),(v==null?void 0:v.length)>0&&(a==null||a(v))},updateNodePositions:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=n(),l=s.onNodesChange,u=s.nodeInternals,c=s.hasDefaultNodes;if(c||l){var d=r.map(function(v){var m={id:v.id,type:"position",dragging:a};return i&&(m.positionAbsolute=v.positionAbsolute,m.position=v.position),m});if(d!=null&&d.length){if(c){var f=Qa(d,Array.from(u.values())),h=po(f,u);t({nodeInternals:h})}l==null||l(d)}}},addSelectedNodes:function(r){var i=n(),a=i.multiSelectionActive,s=i.nodeInternals,l=i.edges,u,c=null;a?u=r.map(function(d){return Ue(d,!0)}):(u=mt(Array.from(s.values()),r),c=mt(l,[])),mn({changedNodes:u,changedEdges:c,get:n,set:t})},addSelectedEdges:function(r){var i=n(),a=i.multiSelectionActive,s=i.edges,l=i.nodeInternals,u,c=null;a?u=r.map(function(d){return Ue(d,!0)}):(u=mt(s,r),c=mt(Array.from(l.values()),[])),mn({changedNodes:c,changedEdges:u,get:n,set:t})},unselectNodesAndEdges:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.nodes,a=r.edges,s=n(),l=s.nodeInternals,u=s.edges,c=i||Array.from(l.values()),d=a||u,f=c.map(function(v){return v.selected=!1,Ue(v.id,!1)}),h=d.map(function(v){return Ue(v.id,!1)});mn({changedNodes:f,changedEdges:h,get:n,set:t})},setMinZoom:function(r){var i=n(),a=i.d3Zoom,s=i.maxZoom;a==null||a.scaleExtent([r,s]),t({minZoom:r})},setMaxZoom:function(r){var i=n(),a=i.d3Zoom,s=i.minZoom;a==null||a.scaleExtent([s,r]),t({maxZoom:r})},setTranslateExtent:function(r){var i=n(),a=i.d3Zoom;a==null||a.translateExtent(r),t({translateExtent:r})},resetSelectedElements:function(){var r=n(),i=r.nodeInternals,a=r.edges,s=Array.from(i.values()),l=s.filter(function(c){return c.selected}).map(function(c){return Ue(c.id,!1)}),u=a.filter(function(c){return c.selected}).map(function(c){return Ue(c.id,!1)});mn({changedNodes:l,changedEdges:u,get:n,set:t})},setNodeExtent:function(r){var i=n(),a=i.nodeInternals;a.forEach(function(s){s.positionAbsolute=qa(s.position,r)}),t({nodeExtent:r,nodeInternals:new Map(a)})},reset:function(){return t(xe({},vi))}})})};function ge(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!Object.is(e[n[o]],t[n[o]]))return!1;return!0}const ph=window.React.useMemo,Ie=window.React.useCallback;function gh(e,t){if(e==null)return{};var n={},o=Object.keys(e),r,i;for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function tn(e,t){if(e==null)return{};var n=gh(e,t),o,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],!(t.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,o)||(n[o]=e[o]))}return n}function mh(e){if(Array.isArray(e))return Ko(e)}function yh(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bh(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function it(e){return mh(e)||yh(e)||Ka(e)||bh()}var wh={zoomIn:function(){},zoomOut:function(){},zoomTo:function(t){},getZoom:function(){return 1},setViewport:function(t){},getViewport:function(){return{x:0,y:0,zoom:1}},fitView:function(){},setCenter:function(t,n){},fitBounds:function(t){},project:function(t){return t},initialized:!1},Sh=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}},Eh=function(){var t=ue(),n=ae(Sh,ge),o=n.d3Zoom,r=n.d3Selection,i=ph(function(){return r&&o?{zoomIn:function(s){return o.scaleBy(et(r,s==null?void 0:s.duration),1.2)},zoomOut:function(s){return o.scaleBy(et(r,s==null?void 0:s.duration),1/1.2)},zoomTo:function(s,l){return o.scaleTo(et(r,l==null?void 0:l.duration),s)},getZoom:function(){return t.getState().transform[2]},setViewport:function(s,l){var u,c,d,f=K(t.getState().transform,3),h=f[0],v=f[1],m=f[2],b=rt.translate((u=s.x)!==null&&u!==void 0?u:h,(c=s.y)!==null&&c!==void 0?c:v).scale((d=s.zoom)!==null&&d!==void 0?d:m);o.transform(et(r,l==null?void 0:l.duration),b)},getViewport:function(){var s=K(t.getState().transform,3),l=s[0],u=s[1],c=s[2];return{x:l,y:u,zoom:c}},fitView:function(s){return is(t.getState,s)},setCenter:function(s,l,u){var c=t.getState(),d=c.width,f=c.height,h=c.maxZoom,v=typeof(u==null?void 0:u.zoom)!="undefined"?u.zoom:h,m=d/2-s*v,b=f/2-l*v,y=rt.translate(m,b).scale(v);o.transform(et(r,u==null?void 0:u.duration),y)},fitBounds:function(s,l){var u,c=t.getState(),d=c.width,f=c.height,h=c.minZoom,v=c.maxZoom,m=os(s,d,f,h,v,(u=l==null?void 0:l.padding)!==null&&u!==void 0?u:.1),b=K(m,3),y=b[0],C=b[1],E=b[2],g=rt.translate(y,C).scale(E);o.transform(et(r,l==null?void 0:l.duration),g)},project:function(s){var l=t.getState(),u=l.transform,c=l.snapToGrid,d=l.snapGrid;return ts(s,u,c,d)},initialized:!0}:wh},[o,r]);return i},xh=["initialized"];function gi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gi(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gi(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function vr(){var e=Eh(),t=e.initialized,n=tn(e,xh),o=ue(),r=Ie(function(){var h=o.getState(),v=h.nodeInternals,m=Array.from(v.values());return m.map(function(b){return ht({},b)})},[]),i=Ie(function(h){var v=o.getState(),m=v.nodeInternals;return m.get(h)},[]),a=Ie(function(){var h=o.getState(),v=h.edges,m=v===void 0?[]:v;return m.map(function(b){return ht({},b)})},[]),s=Ie(function(h){var v=o.getState(),m=v.edges,b=m===void 0?[]:m;return b.find(function(y){return y.id===h})},[]),l=Ie(function(h){var v=o.getState(),m=v.nodeInternals,b=v.setNodes,y=v.hasDefaultNodes,C=v.onNodesChange,E=Array.from(m.values()),g=typeof h=="function"?h(E):h;if(y)b(g);else if(C){var w=g.length===0?E.map(function(x){return{type:"remove",id:x.id}}):g.map(function(x){return{item:x,type:"reset"}});C(w)}},[]),u=Ie(function(h){var v=o.getState(),m=v.edges,b=m===void 0?[]:m,y=v.setEdges,C=v.hasDefaultEdges,E=v.onEdgesChange,g=typeof h=="function"?h(b):h;if(C)y(g);else if(E){var w=g.length===0?b.map(function(x){return{type:"remove",id:x.id}}):g.map(function(x){return{item:x,type:"reset"}});E(w)}},[]),c=Ie(function(h){var v=Array.isArray(h)?h:[h],m=o.getState(),b=m.nodeInternals,y=m.setNodes,C=m.hasDefaultNodes,E=m.onNodesChange;if(C){var g=Array.from(b.values()),w=[].concat(g,it(v));y(w)}else if(E){var x=v.map(function(k){return{item:k,type:"add"}});E(x)}},[]),d=Ie(function(h){var v=Array.isArray(h)?h:[h],m=o.getState(),b=m.edges,y=b===void 0?[]:b,C=m.setEdges,E=m.hasDefaultEdges,g=m.onEdgesChange;if(E)C([].concat(it(y),it(v)));else if(g){var w=v.map(function(x){return{item:x,type:"add"}});g(w)}},[]),f=Ie(function(){var h=o.getState(),v=h.nodeInternals,m=h.edges,b=m===void 0?[]:m,y=h.transform,C=Array.from(v.values()),E=K(y,3),g=E[0],w=E[1],x=E[2];return{nodes:C.map(function(k){return ht({},k)}),edges:b.map(function(k){return ht({},k)}),viewport:{x:g,y:w,zoom:x}}},[]);return ht(ht({},n),{},{viewportInitialized:t,getNodes:r,getNode:i,getEdges:a,getEdge:s,setNodes:l,setEdges:u,addNodes:c,addEdges:d,toObject:f})}function me(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=me(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const Ch=window.React.memo,Nh=window.React.useState,Oh=window.React.useEffect;function Ph(){return O("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:O("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function _h(){return O("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:O("path",{d:"M0 0h32v4.2H0z"})})}function kh(){return O("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:O("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Mh(){return O("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:O("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Dh(){return O("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:O("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}var Ih=["children","className"];function mi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Th(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mi(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mi(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var yn=function(t){var n=t.children,o=t.className,r=tn(t,Ih);return O("button",{...Th({type:"button",className:me(["react-flow__controls-button",o])},r),children:n})},$h=function(t){return t.nodesDraggable&&t.nodesConnectable&&t.elementsSelectable},ls=function(t){var n=t.style,o=t.showZoom,r=o===void 0?!0:o,i=t.showFitView,a=i===void 0?!0:i,s=t.showInteractive,l=s===void 0?!0:s,u=t.fitViewOptions,c=t.onZoomIn,d=t.onZoomOut,f=t.onFitView,h=t.onInteractiveChange,v=t.className,m=t.children,b=ue(),y=Nh(!1),C=K(y,2),E=C[0],g=C[1],w=ae($h),x=vr(),k=x.zoomIn,P=x.zoomOut,T=x.fitView;if(Oh(function(){g(!0)},[]),!E)return null;var A=function(){k==null||k(),c==null||c()},R=function(){P==null||P(),d==null||d()},V=function(){T==null||T(u),f==null||f()},z=function(){b.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),h==null||h(!w)};return ne("div",{className:me(["react-flow__controls",v]),style:n,children:[r&&ne(fe,{children:[O(yn,{onClick:A,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",children:O(Ph,{})}),O(yn,{onClick:R,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",children:O(_h,{})})]}),a&&O(yn,{className:"react-flow__controls-fitview",onClick:V,title:"fit view","aria-label":"fit view",children:O(kh,{})}),l&&O(yn,{className:"react-flow__controls-interactive",onClick:z,title:"toggle interactivity","aria-label":"toggle interactivity",children:w?O(Dh,{}):O(Mh,{})}),m]})};ls.displayName="Controls";var Rh=Ch(ls);const yi=window.React,re=window.React.memo,ie=window.React.useRef,Pt=window.React.useState,oe=window.React.useEffect,Ah=window.React.createContext,cs=window.React.forwardRef,Lh=window.React.useContext,Ot=window.React.useMemo,_t=window.React.useCallback;var Bh=["paid-pro","paid-sponsor","paid-enterprise","paid-custom"];function zh(e){var t=e.proOptions,n=e.position,o=n===void 0?"bottom-right":n;if(t!=null&&t.account&&Bh.includes(t==null?void 0:t.account)&&t!==null&&t!==void 0&&t.hideAttribution)return null;var r="".concat(o).split("-");return O("div",{className:me(["react-flow__attribution"].concat(it(r))),"data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev/pricing",children:O("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer",children:"React Flow"})})}var Vh=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"];function bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function jh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bi(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bi(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Yh=function(t){var n=t.x,o=t.y,r=t.label,i=t.labelStyle,a=i===void 0?{}:i,s=t.labelShowBg,l=s===void 0?!0:s,u=t.labelBgStyle,c=u===void 0?{}:u,d=t.labelBgPadding,f=d===void 0?[2,4]:d,h=t.labelBgBorderRadius,v=h===void 0?2:h,m=t.children,b=t.className,y=tn(t,Vh),C=ie(null),E=Pt({x:0,y:0,width:0,height:0}),g=K(E,2),w=g[0],x=g[1],k=me(["react-flow__edge-textwrapper",b]);return oe(function(){if(C.current){var P=C.current.getBBox();x({x:P.x,y:P.y,width:P.width,height:P.height})}},[r]),typeof r=="undefined"||!r?null:ne("g",{...jh({transform:"translate(".concat(n-w.width/2," ").concat(o-w.height/2,")"),className:k},y),children:[l&&O("rect",{width:w.width+2*f[0],x:-f[0],y:-f[1],height:w.height+2*f[1],className:"react-flow__edge-textbg",style:c,rx:v,ry:v}),O("text",{className:"react-flow__edge-text",y:w.height/2,dy:"0.3em",ref:C,style:a,children:r}),m]})},Hh=re(Yh),no=function(e){var t=e.path,n=e.centerX,o=e.centerY,r=e.label,i=e.labelStyle,a=e.labelShowBg,s=e.labelBgStyle,l=e.labelBgPadding,u=e.labelBgBorderRadius,c=e.style,d=e.markerEnd,f=e.markerStart,h=r?O(Hh,{x:n,y:o,label:r,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u}):null;return ne(fe,{children:[O("path",{style:c,d:t,className:"react-flow__edge-path",markerEnd:d,markerStart:f}),h]})};function Xn(e){var t=e.pos,n=e.x1,o=e.y1,r=e.x2,i=e.y2,a,s;switch(t){case B.Left:case B.Right:a=.5*(n+r),s=o;break;case B.Top:case B.Bottom:a=n,s=.5*(o+i);break}return[a,s]}function us(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?B.Bottom:o,i=e.targetX,a=e.targetY,s=e.targetPosition,l=s===void 0?B.Top:s,u=Xn({pos:r,x1:t,y1:n,x2:i,y2:a}),c=K(u,2),d=c[0],f=c[1],h=Xn({pos:l,x1:i,y1:a,x2:t,y2:n}),v=K(h,2),m=v[0],b=v[1];return"M".concat(t,",").concat(n," C").concat(d,",").concat(f," ").concat(m,",").concat(b," ").concat(i,",").concat(a)}function Xh(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?B.Bottom:o,i=e.targetX,a=e.targetY,s=e.targetPosition,l=s===void 0?B.Top:s,u=Xn({pos:r,x1:t,y1:n,x2:i,y2:a}),c=K(u,2),d=c[0],f=c[1],h=Xn({pos:l,x1:i,y1:a,x2:t,y2:n}),v=K(h,2),m=v[0],b=v[1],y=t*.125+d*.375+m*.375+i*.125,C=n*.125+f*.375+b*.375+a*.125,E=Math.abs(y-t),g=Math.abs(C-n);return[y,C,E,g]}var ds=re(function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,i=e.sourcePosition,a=i===void 0?B.Bottom:i,s=e.targetPosition,l=s===void 0?B.Top:s,u=e.label,c=e.labelStyle,d=e.labelShowBg,f=e.labelBgStyle,h=e.labelBgPadding,v=e.labelBgBorderRadius,m=e.style,b=e.markerEnd,y=e.markerStart,C={sourceX:t,sourceY:n,sourcePosition:a,targetX:o,targetY:r,targetPosition:l},E=us(C),g=Xh(C),w=K(g,2),x=w[0],k=w[1];return O(no,{path:E,centerX:x,centerY:k,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:v,style:m,markerEnd:b,markerStart:y})});function wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Uh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wi(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Si=[B.Left,B.Right],fs=function(t){var n=t.sourceX,o=t.sourceY,r=t.targetX,i=t.targetY,a=t.sourcePosition,s=a===void 0?B.Bottom:a,l=t.targetPosition,u=l===void 0?B.Top:l,c=Si.includes(s),d=Si.includes(u),f=c&&!d||d&&!c;if(f){var h=c?Math.abs(r-n):0,v=n>r?n-h:n+h,m=c?0:Math.abs(i-o),b=o<i?o+m:o-m;return[v,b,h,m]}var y=Math.abs(r-n)/2,C=r<n?r+y:r-y,E=Math.abs(i-o)/2,g=i<o?i+E:i-E;return[C,g,y,E]};function At(e,t,n){return n===void 0?n:function(o){var r=t().edges.find(function(i){return i.id===e});n(o,Uh({},r))}}var go=function(t,n,o){return"L ".concat(t,",").concat(n-o,"Q ").concat(t,",").concat(n," ").concat(t+o,",").concat(n)},mo=function(t,n,o){return"L ".concat(t+o,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-o)},yo=function(t,n,o){return"L ".concat(t,",").concat(n-o,"Q ").concat(t,",").concat(n," ").concat(t-o,",").concat(n)},bo=function(t,n,o){return"L ".concat(t-o,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-o)},wo=function(t,n,o){return"L ".concat(t+o,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+o)},So=function(t,n,o){return"L ".concat(t,",").concat(n+o,"Q ").concat(t,",").concat(n," ").concat(t+o,",").concat(n)},Eo=function(t,n,o){return"L ".concat(t,",").concat(n+o,"Q ").concat(t,",").concat(n," ").concat(t-o,",").concat(n)},xo=function(t,n,o){return"L ".concat(t-o,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+o)};function Fo(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?B.Bottom:o,i=e.targetX,a=e.targetY,s=e.targetPosition,l=s===void 0?B.Top:s,u=e.borderRadius,c=u===void 0?5:u,d=e.centerX,f=e.centerY,h=fs({sourceX:t,sourceY:n,targetX:i,targetY:a}),v=K(h,4),m=v[0],b=v[1],y=v[2],C=v[3],E=Math.min(c,Math.abs(i-t)),g=Math.min(c,Math.abs(a-n)),w=Math.min(E,g,y,C),x=[B.Left,B.Right],k=typeof d!="undefined"?d:m,P=typeof f!="undefined"?f:b,T=null,A=null;return t<=i?(T=n<=a?go(t,P,w):So(t,P,w),A=n<=a?xo(i,P,w):bo(i,P,w)):(T=n<a?yo(t,P,w):Eo(t,P,w),A=n<a?wo(i,P,w):mo(i,P,w)),x.includes(r)&&x.includes(l)?t<=i?(T=n<=a?xo(k,n,w):bo(k,n,w),A=n<=a?go(k,a,w):So(k,a,w)):(r===B.Right&&l===B.Left||r===B.Left&&l===B.Right||r===B.Left&&l===B.Left)&&(T=n<=a?wo(k,n,w):mo(k,n,w),A=n<=a?yo(k,a,w):Eo(k,a,w)):x.includes(r)&&!x.includes(l)?(t<=i?T=n<=a?xo(i,n,w):bo(i,n,w):T=n<=a?wo(i,n,w):mo(i,n,w),A=""):!x.includes(r)&&x.includes(l)&&(t<=i?T=n<=a?go(t,a,w):So(t,a,w):T=n<=a?yo(t,a,w):Eo(t,a,w),A=""),"M ".concat(t,",").concat(n).concat(T).concat(A,"L ").concat(i,",").concat(a)}var pr=re(function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,i=e.label,a=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,u=e.labelBgPadding,c=e.labelBgBorderRadius,d=e.style,f=e.sourcePosition,h=f===void 0?B.Bottom:f,v=e.targetPosition,m=v===void 0?B.Top:v,b=e.markerEnd,y=e.markerStart,C=e.borderRadius,E=C===void 0?5:C,g=fs({sourceX:t,sourceY:n,targetX:o,targetY:r,sourcePosition:h,targetPosition:m}),w=K(g,2),x=w[0],k=w[1],P=Fo({sourceX:t,sourceY:n,sourcePosition:h,targetX:o,targetY:r,targetPosition:m,borderRadius:E});return O(no,{path:P,centerX:x,centerY:k,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:b,markerStart:y})});function Ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function xi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ei(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ei(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var hs=re(function(e){return O(pr,{...xi(xi({},e),{},{borderRadius:0})})}),vs=re(function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,i=e.label,a=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,u=e.labelBgPadding,c=e.labelBgBorderRadius,d=e.style,f=e.markerEnd,h=e.markerStart,v=Math.abs(r-n)/2,m=r<n?r+v:r-v,b=Math.abs(o-t)/2,y=o<t?o+b:o-b,C="M ".concat(t,",").concat(n,"L ").concat(o,",").concat(r);return O(no,{path:C,centerX:y,centerY:m,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:f,markerStart:h})});function bn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Un(e){var t=e.pos,n=e.x1,o=e.y1,r=e.x2,i=e.y2,a=e.c,s,l;switch(t){case B.Left:s=n-bn(n-r,a),l=o;break;case B.Right:s=n+bn(r-n,a),l=o;break;case B.Top:s=n,l=o-bn(o-i,a);break;case B.Bottom:s=n,l=o+bn(i-o,a);break}return[s,l]}function ps(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?B.Bottom:o,i=e.targetX,a=e.targetY,s=e.targetPosition,l=s===void 0?B.Top:s,u=e.curvature,c=u===void 0?.25:u,d=Un({pos:r,x1:t,y1:n,x2:i,y2:a,c}),f=K(d,2),h=f[0],v=f[1],m=Un({pos:l,x1:i,y1:a,x2:t,y2:n,c}),b=K(m,2),y=b[0],C=b[1];return"M".concat(t,",").concat(n," C").concat(h,",").concat(v," ").concat(y,",").concat(C," ").concat(i,",").concat(a)}function Gh(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?B.Bottom:o,i=e.targetX,a=e.targetY,s=e.targetPosition,l=s===void 0?B.Top:s,u=e.curvature,c=u===void 0?.25:u,d=Un({pos:r,x1:t,y1:n,x2:i,y2:a,c}),f=K(d,2),h=f[0],v=f[1],m=Un({pos:l,x1:i,y1:a,x2:t,y2:n,c}),b=K(m,2),y=b[0],C=b[1],E=t*.125+h*.375+y*.375+i*.125,g=n*.125+v*.375+C*.375+a*.125,w=Math.abs(E-t),x=Math.abs(g-n);return[E,g,w,x]}var Zo=re(function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,i=e.sourcePosition,a=i===void 0?B.Bottom:i,s=e.targetPosition,l=s===void 0?B.Top:s,u=e.label,c=e.labelStyle,d=e.labelShowBg,f=e.labelBgStyle,h=e.labelBgPadding,v=e.labelBgBorderRadius,m=e.style,b=e.markerEnd,y=e.markerStart,C=e.curvature,E={sourceX:t,sourceY:n,sourcePosition:a,targetX:o,targetY:r,targetPosition:l,curvature:C},g=ps(E),w=Gh(E),x=K(w,2),k=x[0],P=x[1];return O(no,{path:g,centerX:k,centerY:P,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:v,style:m,markerEnd:b,markerStart:y})}),gr=Ah(null),Kh=gr.Provider;gr.Consumer;function Wo(e,t,n,o,r,i,a){var s=a.elementFromPoint(e.clientX,e.clientY),l=(s==null?void 0:s.classList.contains("target"))||!1,u=(s==null?void 0:s.classList.contains("source"))||!1,c={elementBelow:s,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(s&&(l||u)){c.isHoveringHandle=!0;var d=s.getAttribute("data-nodeid"),f=s.getAttribute("data-handleid"),h=n?{source:d,sourceHandle:f,target:o,targetHandle:r}:{source:o,sourceHandle:r,target:d,targetHandle:f};c.connection=h;var v=t===Nt.Strict?n&&u||!n&&l:!0;v&&(c.isValid=i(h))}return c}function Ci(e){e==null||e.classList.remove("react-flow__handle-valid"),e==null||e.classList.remove("react-flow__handle-connecting")}function gs(e){var t=e.event,n=e.handleId,o=e.nodeId,r=e.onConnect,i=e.isTarget,a=e.getState,s=e.setState,l=e.isValidConnection,u=e.elementEdgeUpdaterType,c=e.onEdgeUpdateEnd,d=t.target.closest(".react-flow"),f=Fa(t.target);if(!f)return;var h=f.elementFromPoint(t.clientX,t.clientY),v=h==null?void 0:h.classList.contains("target"),m=h==null?void 0:h.classList.contains("source");if(!d||!v&&!m&&!u)return;var b=a(),y=b.onConnectStart,C=b.connectionMode,E=u||(v?"target":"source"),g=d.getBoundingClientRect(),w;s({connectionPosition:{x:t.clientX-g.left,y:t.clientY-g.top},connectionNodeId:o,connectionHandleId:n,connectionHandleType:E}),y==null||y(t,{nodeId:o,handleId:n,handleType:E});function x(P){s({connectionPosition:{x:P.clientX-g.left,y:P.clientY-g.top}});var T=Wo(P,C,i,o,n,l,f),A=T.connection,R=T.elementBelow,V=T.isValid,z=T.isHoveringHandle;if(!z)return Ci(w);A.source!==A.target&&R&&(w=R,R.classList.add("react-flow__handle-connecting"),R.classList.toggle("react-flow__handle-valid",V))}function k(P){var T=a(),A=T.onConnectStop,R=T.onConnectEnd,V=Wo(P,C,i,o,n,l,f),z=V.connection,p=V.isValid;A==null||A(P),p&&(r==null||r(z)),R==null||R(P),u&&c&&c(P),Ci(w),s({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),f.removeEventListener("mousemove",x),f.removeEventListener("mouseup",k)}f.addEventListener("mousemove",x),f.addEventListener("mouseup",k)}var qh=["type","position","isValidConnection","isConnectable","id","onConnect","children","className","onMouseDown"];function Ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Co(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ni(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ni(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Fh=function(){return!0},Zh=function(t){return{connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick}},ms=cs(function(e,t){var n=e.type,o=n===void 0?"source":n,r=e.position,i=r===void 0?B.Top:r,a=e.isValidConnection,s=a===void 0?Fh:a,l=e.isConnectable,u=l===void 0?!0:l,c=e.id,d=e.onConnect,f=e.children,h=e.className,v=e.onMouseDown,m=tn(e,qh),b=ue(),y=Lh(gr),C=ae(Zh,ge),E=C.connectionStartHandle,g=C.connectOnClick,w=c||null,x=o==="target",k=function(R){var V=b.getState(),z=V.defaultEdgeOptions,p=V.onConnect,N=V.hasDefaultEdges,S=Co(Co({},z),R);if(N){var _=b.getState(),M=_.edges;b.setState({edges:fh(S,M)})}p==null||p(S),d==null||d(S)},P=function(R){R.button===0&&gs({event:R,handleId:w,nodeId:y,onConnect:k,isTarget:x,getState:b.getState,setState:b.setState,isValidConnection:s}),v==null||v(R)},T=function(R){var V=b.getState(),z=V.onClickConnectStart,p=V.onClickConnectStop,N=V.onClickConnectEnd,S=V.connectionMode;if(!E){z==null||z(R,{nodeId:y,handleId:w,handleType:o}),b.setState({connectionStartHandle:{nodeId:y,type:o,handleId:w}});return}var _=Fa(R.target),M=Wo(R,S,E.type==="target",E.nodeId,E.handleId||null,s,_),$=M.connection,D=M.isValid;p==null||p(R),D&&k($),N==null||N(R),b.setState({connectionStartHandle:null})};return O("div",{...Co({"data-handleid":w,"data-nodeid":y,"data-handlepos":i,className:me(["react-flow__handle","react-flow__handle-".concat(i),"nodrag",h,{source:!x,target:x,connectable:u,connecting:(E==null?void 0:E.nodeId)===y&&(E==null?void 0:E.handleId)===w&&(E==null?void 0:E.type)===o}]),onMouseDown:P,onClick:g?T:void 0,ref:t},m),children:f})});ms.displayName="Handle";var Gn=re(ms),ys=function(t){var n=t.data,o=t.isConnectable,r=t.targetPosition,i=r===void 0?B.Top:r,a=t.sourcePosition,s=a===void 0?B.Bottom:a;return ne(fe,{children:[O(Gn,{type:"target",position:i,isConnectable:o}),n==null?void 0:n.label,O(Gn,{type:"source",position:s,isConnectable:o})]})};ys.displayName="DefaultNode";var Qo=re(ys),bs=function(t){var n=t.data,o=t.isConnectable,r=t.sourcePosition,i=r===void 0?B.Bottom:r;return ne(fe,{children:[n==null?void 0:n.label,O(Gn,{type:"source",position:i,isConnectable:o})]})};bs.displayName="InputNode";var ws=re(bs),Ss=function(t){var n=t.data,o=t.isConnectable,r=t.targetPosition,i=r===void 0?B.Top:r;return ne(fe,{children:[O(Gn,{type:"target",position:i,isConnectable:o}),n==null?void 0:n.label]})};Ss.displayName="OutputNode";var Es=re(Ss),Wh=function(t){return{selectedNodes:Array.from(t.nodeInternals.values()).filter(function(n){return n.selected}),selectedEdges:t.edges.filter(function(n){return n.selected})}},Qh=function(t,n){var o=t.selectedNodes.map(function(s){return s.id}),r=n.selectedNodes.map(function(s){return s.id}),i=t.selectedEdges.map(function(s){return s.id}),a=n.selectedEdges.map(function(s){return s.id});return ge(o,r)&&ge(i,a)};function Jh(e){var t=e.onSelectionChange,n=ae(Wh,Qh),o=n.selectedNodes,r=n.selectedEdges;return oe(function(){t({nodes:o,edges:r})},[o,r]),null}var ev=re(Jh),tv=function(t){return{setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset}};function Ye(e,t){oe(function(){typeof e!="undefined"&&t(e)},[e])}function J(e,t,n){oe(function(){typeof t!="undefined"&&n(W({},e,t))},[t])}var nv=function(t){var n=t.nodes,o=t.edges,r=t.defaultNodes,i=t.defaultEdges,a=t.onConnect,s=t.onConnectStart,l=t.onConnectStop,u=t.onConnectEnd,c=t.onClickConnectStart,d=t.onClickConnectStop,f=t.onClickConnectEnd,h=t.nodesDraggable,v=t.nodesConnectable,m=t.minZoom,b=t.maxZoom,y=t.nodeExtent,C=t.onNodesChange,E=t.onEdgesChange,g=t.elementsSelectable,w=t.connectionMode,x=t.snapGrid,k=t.snapToGrid,P=t.translateExtent,T=t.connectOnClick,A=t.defaultEdgeOptions,R=t.fitView,V=t.fitViewOptions,z=t.onNodesDelete,p=t.onEdgesDelete,N=t.onNodeDrag,S=t.onNodeDragStart,_=t.onNodeDragStop,M=t.onSelectionDrag,$=t.onSelectionDragStart,D=t.onSelectionDragStop,L=ae(tv,ge),H=L.setNodes,U=L.setEdges,I=L.setDefaultNodesAndEdges,Y=L.setMinZoom,Z=L.setMaxZoom,q=L.setTranslateExtent,Q=L.setNodeExtent,ee=L.reset,j=ue();return oe(function(){return I(r,i),function(){ee()}},[]),J("defaultEdgeOptions",A,j.setState),J("connectionMode",w,j.setState),J("onConnect",a,j.setState),J("onConnectStart",s,j.setState),J("onConnectStop",l,j.setState),J("onConnectEnd",u,j.setState),J("onClickConnectStart",c,j.setState),J("onClickConnectStop",d,j.setState),J("onClickConnectEnd",f,j.setState),J("nodesDraggable",h,j.setState),J("nodesConnectable",v,j.setState),J("elementsSelectable",g,j.setState),J("snapToGrid",k,j.setState),J("snapGrid",x,j.setState),J("onNodesChange",C,j.setState),J("onEdgesChange",E,j.setState),J("connectOnClick",T,j.setState),J("fitViewOnInit",R,j.setState),J("fitViewOnInitOptions",V,j.setState),J("onNodesDelete",z,j.setState),J("onEdgesDelete",p,j.setState),J("onNodeDrag",N,j.setState),J("onNodeDragStart",S,j.setState),J("onNodeDragStop",_,j.setState),J("onSelectionDrag",M,j.setState),J("onSelectionDragStart",$,j.setState),J("onSelectionDragStop",D,j.setState),Ye(n,H),Ye(o,U),Ye(r,H),Ye(i,U),Ye(m,Y),Ye(b,Z),Ye(P,q),Ye(y,Q),null},ov=".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__container{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__viewport{pointer-events:none;transform-origin:0 0;z-index:2}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow .react-flow__edges{overflow:visible;pointer-events:none}.react-flow .react-flow__connectionline{z-index:1001}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{box-sizing:border-box;pointer-events:all;position:absolute;transform-origin:0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{pointer-events:none;transform-origin:left top;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none;position:absolute}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__controls{bottom:20px;left:15px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:20px;position:absolute;right:15px;z-index:5}.react-flow__attribution{background:hsla(0,0%,100%,.5);color:#999;font-size:10px;padding:2px 3px;position:absolute;z-index:1000}.react-flow__attribution a{color:#555;text-decoration:none}.react-flow__attribution.top{top:0}.react-flow__attribution.bottom{bottom:0}.react-flow__attribution.left{left:0}.react-flow__attribution.right{right:0}.react-flow__attribution.center{left:50%;transform:translateX(-50%)}",rv=ov,iv=".react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-group,.react-flow__node-input,.react-flow__node-output{background:#fff;border:1px solid #1a192b;border-radius:3px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selected,.react-flow__node-group.selected,.react-flow__node-input.selected,.react-flow__node-output.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle,.react-flow__node-group .react-flow__handle,.react-flow__node-input .react-flow__handle,.react-flow__node-output .react-flow__handle{background:#1a192b}.react-flow__node-default.selectable:hover,.react-flow__node-group.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-default.selectable.selected,.react-flow__node-group.selectable.selected,.react-flow__node-input.selectable.selected,.react-flow__node-output.selectable.selected{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-group{background:hsla(0,0%,94%,.25);border-color:#1a192b}.react-flow__nodesselection-rect,.react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}",av=iv,sv=function(t,n,o){return o===B.Left?t-n:o===B.Right?t+n:t},lv=function(t,n,o){return o===B.Top?t-n:o===B.Bottom?t+n:t},Oi=function(t){var n=t.className,o=t.position,r=t.centerX,i=t.centerY,a=t.radius,s=a===void 0?10:a;return O("circle",{className:me(["react-flow__edgeupdater",n]),cx:sv(r,s,o),cy:lv(i,s,o),r:s,stroke:"transparent",fill:"transparent"})},vt=function(e){var t=function(o){var r=o.id,i=o.className,a=o.type,s=o.data,l=o.onClick,u=o.onEdgeDoubleClick,c=o.selected,d=o.animated,f=o.label,h=o.labelStyle,v=o.labelShowBg,m=o.labelBgStyle,b=o.labelBgPadding,y=o.labelBgBorderRadius,C=o.style,E=o.source,g=o.target,w=o.sourceX,x=o.sourceY,k=o.targetX,P=o.targetY,T=o.sourcePosition,A=o.targetPosition,R=o.elementsSelectable,V=o.hidden,z=o.sourceHandleId,p=o.targetHandleId,N=o.onContextMenu,S=o.onMouseEnter,_=o.onMouseMove,M=o.onMouseLeave,$=o.edgeUpdaterRadius,D=o.onEdgeUpdate,L=o.onEdgeUpdateStart,H=o.onEdgeUpdateEnd,U=o.markerEnd,I=o.markerStart,Y=o.rfId,Z=Pt(!1),q=K(Z,2),Q=q[0],ee=q[1],j=ue(),le=function(Ee){var Me=j.getState(),Dt=Me.edges,ut=Me.addSelectedEdges,Qe=Dt.find(function(dt){return dt.id===r});R&&(j.setState({nodesSelectionActive:!1}),ut([r])),l==null||l(Ee,Qe)},ke=At(r,j.getState,u),Fe=At(r,j.getState,N),Ze=At(r,j.getState,S),kt=At(r,j.getState,_),Ve=At(r,j.getState,M),lt=function(Ee,Me){var Dt=Me?g:E,ut=(Me?p:z)||null,Qe=Me?"target":"source",dt=function(){return!0},lo=Me,It=j.getState().edges.find(function(Je){return Je.id===r});L==null||L(Ee,It,Qe);var ln=H?function(Je){return H(Je,It,Qe)}:void 0,co=function(cn){return D==null?void 0:D(It,cn)};gs({event:Ee,handleId:ut,nodeId:Dt,onConnect:co,isTarget:lo,getState:j.getState,setState:j.setState,isValidConnection:dt,elementEdgeUpdaterType:Qe,onEdgeUpdateEnd:ln})},ct=function(Ee){return lt(Ee,!0)},io=function(Ee){return lt(Ee,!1)},Mt=function(){return ee(!0)},on=function(){return ee(!1)},rn=Ot(function(){return"url(#".concat(qo(I,Y),")")},[I,Y]),ao=Ot(function(){return"url(#".concat(qo(U,Y),")")},[U,Y]);if(V)return null;var an=!R&&!l,sn=typeof D!="undefined",so=me(["react-flow__edge","react-flow__edge-".concat(a),i,{selected:c,animated:d,inactive:an,updating:Q}]);return ne("g",{className:so,onClick:le,onDoubleClick:ke,onContextMenu:Fe,onMouseEnter:Ze,onMouseMove:kt,onMouseLeave:Ve,children:[O(e,{id:r,source:E,target:g,selected:c,animated:d,label:f,labelStyle:h,labelShowBg:v,labelBgStyle:m,labelBgPadding:b,labelBgBorderRadius:y,data:s,style:C,sourceX:w,sourceY:x,targetX:k,targetY:P,sourcePosition:T,targetPosition:A,sourceHandleId:z,targetHandleId:p,markerStart:rn,markerEnd:ao}),sn&&O("g",{onMouseDown:ct,onMouseEnter:Mt,onMouseOut:on,children:O(Oi,{position:T,centerX:w,centerY:x,radius:$})}),sn&&O("g",{onMouseDown:io,onMouseEnter:Mt,onMouseOut:on,children:O(Oi,{position:A,centerX:k,centerY:P,radius:$})})]})};return t.displayName="EdgeWrapper",re(t)};function Pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function _i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pi(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pi(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function cv(e){var t={default:vt(e.default||Zo),straight:vt(e.bezier||vs),step:vt(e.step||hs),smoothstep:vt(e.step||pr),simplebezier:vt(e.simplebezier||ds)},n={},o=Object.keys(e).filter(function(r){return!["default","bezier"].includes(r)}).reduce(function(r,i){return r[i]=vt(e[i]||Zo),r},n);return _i(_i({},t),o)}function ki(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=((n==null?void 0:n.x)||0)+t.x,r=((n==null?void 0:n.y)||0)+t.y,i=(n==null?void 0:n.width)||t.width,a=(n==null?void 0:n.height)||t.height;switch(e){case B.Top:return{x:o+i/2,y:r};case B.Right:return{x:o+i,y:r+a/2};case B.Bottom:return{x:o+i/2,y:r+a};case B.Left:return{x:o,y:r+a/2}}}function Mi(e,t){if(!e)return null;var n=null;return e.length===1||!t?n=e[0]:t&&(n=e.find(function(o){return o.id===t})),typeof n=="undefined"?null:n}var uv=function(t,n,o,r,i,a){var s=ki(o,t,n),l=ki(a,r,i);return{sourceX:s.x,sourceY:s.y,targetX:l.x,targetY:l.y}};function dv(e){var t=e.sourcePos,n=e.targetPos,o=e.sourceWidth,r=e.sourceHeight,i=e.targetWidth,a=e.targetHeight,s=e.width,l=e.height,u=e.transform,c={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+o,n.x+i),y2:Math.max(t.y+r,n.y+a)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);var d=Hn({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:s/u[2],height:l/u[2]}),f=Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x)),h=Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y)),v=Math.ceil(f*h);return v>0}function Di(e,t){var n,o,r,i,a,s=e.get(t),l=(s==null||(n=s[se])===null||n===void 0?void 0:n.handleBounds)||null,u=!s||!l||!s.width||!s.height||typeof((o=s.positionAbsolute)===null||o===void 0?void 0:o.x)=="undefined"||typeof((r=s.positionAbsolute)===null||r===void 0?void 0:r.y)=="undefined";return[{x:(s==null||(i=s.positionAbsolute)===null||i===void 0?void 0:i.x)||0,y:(s==null||(a=s.positionAbsolute)===null||a===void 0?void 0:a.y)||0,width:(s==null?void 0:s.width)||0,height:(s==null?void 0:s.height)||0},l,!u]}var fv=typeof document!="undefined"?document:null,Kn=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{target:fv},n=Pt(!1),o=K(n,2),r=o[0],i=o[1],a=ie(new Set([])),s=Ot(function(){if(e!==null){var d=Array.isArray(e)?e:[e],f=d.filter(function(v){return typeof v=="string"}).map(function(v){return v.split("+")}),h=f.reduce(function(v,m){return v.concat.apply(v,it(m))},[]);return[f,h]}return[[],[]]},[e]),l=K(s,2),u=l[0],c=l[1];return oe(function(){if(e!==null){var d,f,h=function(y){if($i(y))return!1;var C=Ti(y.code,c);a.current.add(y[C]),Ii(u,a.current,!1)&&(y.preventDefault(),i(!0))},v=function(y){if($i(y))return!1;var C=Ti(y.code,c);Ii(u,a.current,!0)?(i(!1),a.current.clear()):a.current.delete(y[C])},m=function(){a.current.clear(),i(!1)};return t==null||(d=t.target)===null||d===void 0||d.addEventListener("keydown",h),t==null||(f=t.target)===null||f===void 0||f.addEventListener("keyup",v),window.addEventListener("blur",m),function(){var b,y;t==null||(b=t.target)===null||b===void 0||b.removeEventListener("keydown",h),t==null||(y=t.target)===null||y===void 0||y.removeEventListener("keyup",v),window.removeEventListener("blur",m)}}},[e,i]),r};function Ii(e,t,n){return e.filter(function(o){return n||o.length===t.size}).some(function(o){return o.every(function(r){return t.has(r)})})}function Ti(e,t){return t.includes(e)?"code":"key"}function $i(e){var t=e.target;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))}var hv=function(t){return{onNodesChange:t.onNodesChange,onEdgesChange:t.onEdgesChange}},vv=function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,o=ue(),r=ae(hv,ge),i=r.onNodesChange,a=r.onEdgesChange,s=Kn(t),l=Kn(n);oe(function(){var u=o.getState(),c=u.nodeInternals,d=u.edges,f=u.hasDefaultNodes,h=u.hasDefaultEdges,v=u.onNodesDelete,m=u.onEdgesDelete,b=Array.from(c.values()),y=b.reduce(function(P,T){return(!T.selected&&T.parentNode&&P.find(function(A){return A.id===T.parentNode})||T.selected)&&P.push(T),P},[]),C=d.filter(function(P){return P.selected});if(s&&(y||C)){var E=fr(y,d),g=[].concat(it(C),it(E)),w=g.reduce(function(P,T){return P.includes(T.id)||P.push(T.id),P},[]);if((h||f)&&(h&&o.setState({edges:d.filter(function(P){return!w.includes(P.id)})}),f&&(y.forEach(function(P){c.delete(P.id)}),o.setState({nodeInternals:new Map(c)}))),w.length>0&&(m==null||m(g),a)){var x=w.map(function(P){return{id:P,type:"remove"}});a(x)}if(y.length>0&&(v==null||v(y),i)){var k=y.map(function(P){return{id:P.id,type:"remove"}});i(k)}o.setState({nodesSelectionActive:!1})}},[s,i,a]),oe(function(){o.setState({multiSelectionActive:l})},[l])};function pv(e){var t=ue();oe(function(){var n,o=function(){if(!!e.current){var i=ur(e.current);t.setState({width:i.width||500,height:i.height||500})}};return o(),window.onresize=o,e.current&&(n=new ResizeObserver(function(){return o()}),n.observe(e.current)),function(){window.onresize=null,n&&e.current&&n.unobserve(e.current)}},[])}var gv=function(t,n){return t.x!==n.x||t.y!==n.y||t.zoom!==n.k},No=function(t){return{x:t.x,y:t.y,zoom:t.k}},wn=function(t,n){return t.target.closest(".".concat(n))},mv=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler}},yv=function(t){var n=t.onMove,o=t.onMoveStart,r=t.onMoveEnd,i=t.zoomOnScroll,a=i===void 0?!0:i,s=t.zoomOnPinch,l=s===void 0?!0:s,u=t.panOnScroll,c=u===void 0?!1:u,d=t.panOnScrollSpeed,f=d===void 0?.5:d,h=t.panOnScrollMode,v=h===void 0?St.Free:h,m=t.zoomOnDoubleClick,b=m===void 0?!0:m,y=t.selectionKeyPressed,C=t.elementsSelectable,E=t.panOnDrag,g=E===void 0?!0:E,w=t.defaultPosition,x=w===void 0?[0,0]:w,k=t.defaultZoom,P=k===void 0?1:k,T=t.zoomActivationKeyCode,A=t.preventScrolling,R=A===void 0?!0:A,V=t.children,z=t.noWheelClassName,p=t.noPanClassName,N=ue(),S=ie(!1),_=ie(null),M=ie({x:0,y:0,zoom:0}),$=ae(mv,ge),D=$.d3Zoom,L=$.d3Selection,H=$.d3ZoomHandler,U=Kn(T);return pv(_),oe(function(){if(_.current){var I=N.getState(),Y=I.minZoom,Z=I.maxZoom,q=I.translateExtent,Q=nh().scaleExtent([Y,Z]).translateExtent(q),ee=ye(_.current).call(Q),j=Et(x[0],q[0][0],q[1][0]),le=Et(x[1],q[0][1],q[1][1]),ke=Et(P,Y,Z),Fe=rt.translate(j,le).scale(ke);Q.transform(ee,Fe),N.setState({d3Zoom:Q,d3Selection:ee,d3ZoomHandler:ee.on("wheel.zoom"),transform:[j,le,ke]})}},[]),oe(function(){L&&D&&(c&&!U?L.on("wheel",function(I){if(wn(I,z))return!1;I.preventDefault(),I.stopImmediatePropagation();var Y=L.property("__zoom").k||1;if(I.ctrlKey&&l){var Z=Ce(I),q=-I.deltaY*(I.deltaMode===1?.05:I.deltaMode?1:.002)*10,Q=Y*Math.pow(2,q);D.scaleTo(L,Q,Z);return}var ee=I.deltaMode===1?20:1,j=v===St.Vertical?0:I.deltaX*ee,le=v===St.Horizontal?0:I.deltaY*ee;D.translateBy(L,-(j/Y)*f,-(le/Y)*f)}).on("wheel.zoom",null):typeof H!="undefined"&&L.on("wheel",function(I){if(!R||wn(I,z))return null;I.preventDefault()}).on("wheel.zoom",H))},[c,v,L,D,H,U,l,R,z]),oe(function(){D&&(y&&!S.current?D.on("zoom",null):y||D.on("zoom",function(I){if(N.setState({transform:[I.transform.x,I.transform.y,I.transform.k]}),n){var Y=No(I.transform);n(I.sourceEvent,Y)}}))},[y,D,n]),oe(function(){D&&D.on("start",function(I){if(S.current=!0,o){var Y=No(I.transform);M.current=Y,o(I.sourceEvent,Y)}})},[D,o]),oe(function(){D&&D.on("end",function(I){if(S.current=!1,r&&gv(M.current,I.transform)){var Y=No(I.transform);M.current=Y,r(I.sourceEvent,Y)}})},[D,r]),oe(function(){D&&D.filter(function(I){var Y=U||a,Z=l&&I.ctrlKey;return!g&&!Y&&!c&&!b&&!l||y||!b&&I.type==="dblclick"||wn(I,z)&&I.type==="wheel"||wn(I,p)&&I.type!=="wheel"||!l&&I.ctrlKey&&I.type==="wheel"||!Y&&!c&&!Z&&I.type==="wheel"||!g&&(I.type==="mousedown"||I.type==="touchstart")?!1:(!I.ctrlKey||I.type==="wheel")&&!I.button})},[D,a,l,c,b,g,y,C,U]),O("div",{className:"react-flow__renderer react-flow__container",ref:_,children:V})};function Ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Ai(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ri(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ri(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Li(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}var bv=function(t){return{userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable}},Bi={startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},wv=re(function(e){var t=e.selectionKeyPressed,n=ue(),o=ie(0),r=ie(0),i=ie(),a=Pt(Bi),s=K(a,2),l=s[0],u=s[1],c=ae(bv,ge),d=c.userSelectionActive,f=c.elementsSelectable,h=d||t;if(!f||!h)return null;var v=function(){u(Bi),n.setState({userSelectionActive:!1}),o.current=0,r.current=0},m=function(g){var w=g.target.closest(".react-flow");i.current=w.getBoundingClientRect();var x=Li(g,i.current);u({width:0,height:0,startX:x.x,startY:x.y,x:x.x,y:x.y,draw:!0}),n.setState({userSelectionActive:!0,nodesSelectionActive:!1})},b=function(g){var w,x;if(!(!t||!l.draw||!i.current)){var k=Li(g,i.current),P=(w=l.startX)!==null&&w!==void 0?w:0,T=(x=l.startY)!==null&&x!==void 0?x:0,A=Ai(Ai({},l),{},{x:k.x<P?k.x:P,y:k.y<T?k.y:T,width:Math.abs(k.x-P),height:Math.abs(k.y-T)}),R=n.getState(),V=R.nodeInternals,z=R.edges,p=R.transform,N=R.onNodesChange,S=R.onEdgesChange,_=Array.from(V.values()),M=ns(V,A,p,!1,!0),$=fr(M,z).map(function(U){return U.id}),D=M.map(function(U){return U.id});if(o.current!==D.length){o.current=D.length;var L=mt(_,D);L.length&&(N==null||N(L))}if(r.current!==$.length){r.current=$.length;var H=mt(z,$);H.length&&(S==null||S(H))}u(A)}},y=function(){n.setState({nodesSelectionActive:o.current>0}),v()},C=function(){n.setState({nodesSelectionActive:!1}),v()};return O("div",{className:"react-flow__selectionpane react-flow__container",onMouseDown:m,onMouseMove:b,onMouseUp:y,onMouseLeave:C,children:l.draw&&O("div",{className:"react-flow__selection react-flow__container",style:{width:l.width,height:l.height,transform:"translate(".concat(l.x,"px, ").concat(l.y,"px)")}})})});function zi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Vi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zi(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zi(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function xs(e,t){if(!e.parentNode)return!1;var n=t.get(e.parentNode);return n?n.selected?!0:xs(n,t):!1}function ji(e,t,n){var o=e;do{var r;if((r=o)!==null&&r!==void 0&&r.matches(t))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function Sv(e,t,n){return Array.from(e.values()).filter(function(o){return(o.selected||o.id===n)&&(!o.parentNode||!xs(o,e))}).map(function(o){var r,i,a,s;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:t.x-((r=(i=o.positionAbsolute)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0),y:t.y-((a=(s=o.positionAbsolute)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode,width:o.width,height:o.height}})}function Ev(e,t,n,o){var r=e.extent||o,i={x:t.x-e.distance.x,y:t.y-e.distance.y};if(e.extent==="parent")if(e.parentNode&&e.width&&e.height){var a=n.get(e.parentNode);r=a!=null&&a.positionAbsolute&&a!==null&&a!==void 0&&a.width&&a!==null&&a!==void 0&&a.height?[[a.positionAbsolute.x,a.positionAbsolute.y],[a.positionAbsolute.x+a.width-e.width,a.positionAbsolute.y+a.height-e.height]]:r}else r=o;else if(e.extent&&e.parentNode){var s,l,u,c,d=n.get(e.parentNode),f=(s=d==null||(l=d.positionAbsolute)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,h=(u=d==null||(c=d.positionAbsolute)===null||c===void 0?void 0:c.y)!==null&&u!==void 0?u:0;r=[[e.extent[0][0]+f,e.extent[0][1]+h],[e.extent[1][0]+f,e.extent[1][1]+h]]}var v={x:0,y:0};if(e.parentNode){var m,b,y,C,E=n.get(e.parentNode);v={x:(m=E==null||(b=E.positionAbsolute)===null||b===void 0?void 0:b.x)!==null&&m!==void 0?m:0,y:(y=E==null||(C=E.positionAbsolute)===null||C===void 0?void 0:C.y)!==null&&y!==void 0?y:0}}return e.positionAbsolute=r?qa(i,r):i,e.position={x:e.positionAbsolute.x-v.x,y:e.positionAbsolute.y-v.y},e}function Oo(e){var t=e.nodeId,n=e.dragItems,o=e.nodeInternals,r=n.map(function(i){var a=o.get(i.id);return Vi(Vi({},a),{},{position:i.position,positionAbsolute:i.positionAbsolute})});return[t?r.find(function(i){return i.id===t}):r[0],r]}function Po(e){return function(t,n,o){return e==null?void 0:e(t,o)}}function Cs(e){var t=e.nodeRef,n=e.disabled,o=n===void 0?!1:n,r=e.noDragClassName,i=e.handleSelector,a=e.nodeId,s=e.isSelectable,l=e.selectNodesOnDrag,u=Pt(!1),c=K(u,2),d=c[0],f=c[1],h=ue(),v=ie(),m=ie({x:null,y:null}),b=_t(function(y){var C=y.sourceEvent,E=h.getState(),g=E.transform,w=E.snapGrid,x=E.snapToGrid,k=C.touches?C.touches[0].clientX:C.clientX,P=C.touches?C.touches[0].clientY:C.clientY,T=ts({x:k,y:P},g,x,w);return T},[]);return oe(function(){if(t!=null&&t.current){var y=ye(t.current);if(o)y.on(".drag",null);else{var C=dd().on("start",function(E){var g=h.getState(),w=g.nodeInternals,x=g.multiSelectionActive,k=g.unselectNodesAndEdges,P=g.onNodeDragStart,T=g.onSelectionDragStart,A=a?P:Po(T);if(!l&&!x&&a){var R;(R=w.get(a))!==null&&R!==void 0&&R.selected||k()}a&&s&&l&&es({id:a,store:h});var V=b(E);if(m.current=V,v.current=Sv(w,V,a),A&&v.current){var z=Oo({nodeId:a,dragItems:v.current,nodeInternals:w}),p=K(z,2),N=p[0],S=p[1];A(E.sourceEvent,N,S)}}).on("drag",function(E){var g=h.getState(),w=g.updateNodePositions,x=g.nodeInternals,k=g.nodeExtent,P=g.onNodeDrag,T=g.onSelectionDrag,A=b(E);if((m.current.x!==A.x||m.current.y!==A.y)&&v.current){m.current=A,v.current=v.current.map(function(S){return Ev(S,A,x,k)});var R=a?P:Po(T);if(w(v.current,!0,!0),f(!0),R){var V=Oo({nodeId:a,dragItems:v.current,nodeInternals:x}),z=K(V,2),p=z[0],N=z[1];R(E.sourceEvent,p,N)}}E.on("end",function(S){if(f(!1),v.current){var _=h.getState(),M=_.updateNodePositions,$=_.nodeInternals,D=_.onNodeDragStop,L=_.onSelectionDragStop,H=a?D:Po(L);if(M(v.current,!1,!1),H){var U=Oo({nodeId:a,dragItems:v.current,nodeInternals:$}),I=K(U,2),Y=I[0],Z=I[1];H(S.sourceEvent,Y,Z)}}})}).filter(function(E){var g=E.target,w=!E.button&&(!r||!ji(g,".".concat(r),t))&&(!i||ji(g,i,t));return w});return y.call(C),function(){y.on(".drag",null)}}}},[t,o,r,i,s,h,a,l,b]),d}function Yi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function xv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Yi(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yi(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Cv=function(t){return xv({transformString:"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")"),userSelectionActive:t.userSelectionActive},dr(Array.from(t.nodeInternals.values()).filter(function(n){return n.selected})))},Nv=function(t){var n=Array.from(t.nodeInternals.values()).filter(function(o){return o.selected});return dr(n)};function Ov(e){var t=e.onSelectionContextMenu,n=e.noPanClassName,o=ue(),r=ae(Cv,ge),i=r.transformString,a=r.userSelectionActive,s=ae(Nv,ge),l=s.width,u=s.height,c=s.x,d=s.y,f=ie(null);if(Cs({nodeRef:f}),a||!l||!u)return null;var h=t?function(v){var m=Array.from(o.getState().nodeInternals.values()).filter(function(b){return b.selected});t(v,m)}:void 0;return O("div",{className:me(["react-flow__nodesselection","react-flow__container",n]),style:{transform:i},children:O("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,style:{width:l,height:u,top:d,left:c}})})}var Pv=re(Ov),_v=function(t){return t.nodesSelectionActive},Ns=function(t){var n=t.children,o=t.onPaneClick,r=t.onPaneContextMenu,i=t.onPaneScroll,a=t.deleteKeyCode,s=t.onMove,l=t.onMoveStart,u=t.onMoveEnd,c=t.selectionKeyCode,d=t.multiSelectionKeyCode,f=t.zoomActivationKeyCode,h=t.elementsSelectable,v=t.zoomOnScroll,m=t.zoomOnPinch,b=t.panOnScroll,y=t.panOnScrollSpeed,C=t.panOnScrollMode,E=t.zoomOnDoubleClick,g=t.panOnDrag,w=t.defaultPosition,x=t.defaultZoom,k=t.preventScrolling,P=t.onSelectionContextMenu,T=t.noWheelClassName,A=t.noPanClassName,R=ue(),V=ae(_v),z=Kn(c);vv({deleteKeyCode:a,multiSelectionKeyCode:d});var p=function(M){o==null||o(M),R.getState().resetSelectedElements(),R.setState({nodesSelectionActive:!1})},N=r?function(_){return r(_)}:void 0,S=i?function(_){return i(_)}:void 0;return ne(yv,{onMove:s,onMoveStart:l,onMoveEnd:u,selectionKeyPressed:z,elementsSelectable:h,zoomOnScroll:v,zoomOnPinch:m,panOnScroll:b,panOnScrollSpeed:y,panOnScrollMode:C,zoomOnDoubleClick:E,panOnDrag:g,defaultPosition:w,defaultZoom:x,zoomActivationKeyCode:f,preventScrolling:k,noWheelClassName:T,noPanClassName:A,children:[n,O(wv,{selectionKeyPressed:z}),V&&O(Pv,{onSelectionContextMenu:P,noPanClassName:A}),O("div",{className:"react-flow__pane react-flow__container",onClick:p,onContextMenu:N,onWheel:S})]})};Ns.displayName="FlowRenderer";var kv=re(Ns);function Mv(e){var t=ae(_t(function(n){return e?ns(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):Array.from(n.nodeInternals.values())},[e]));return t}var Dv=function(t){return{nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions}},Os=function(t){var n=ae(Dv,ge),o=n.nodesDraggable,r=n.nodesConnectable,i=n.elementsSelectable,a=n.updateNodeDimensions,s=Mv(t.onlyRenderVisibleElements),l=ie(),u=Ot(function(){if(typeof ResizeObserver=="undefined")return null;var c=new ResizeObserver(function(d){var f=d.map(function(h){return{id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}});a(f)});return l.current=c,c},[]);return oe(function(){return function(){var c;l==null||(c=l.current)===null||c===void 0||c.disconnect()}},[]),O("div",{className:"react-flow__nodes react-flow__container",children:s.map(function(c){var d,f,h,v,m,b,y,C=c.type||"default";t.nodeTypes[C]||(C="default");var E=t.nodeTypes[C]||t.nodeTypes.default,g=!!(c.draggable||o&&typeof c.draggable=="undefined"),w=!!(c.selectable||i&&typeof c.selectable=="undefined"),x=!!(c.connectable||r&&typeof c.connectable=="undefined");return O(E,{id:c.id,className:c.className,style:c.style,type:C,data:c.data,sourcePosition:c.sourcePosition||B.Bottom,targetPosition:c.targetPosition||B.Top,hidden:c.hidden,xPos:(d=(f=c.positionAbsolute)===null||f===void 0?void 0:f.x)!==null&&d!==void 0?d:0,yPos:(h=(v=c.positionAbsolute)===null||v===void 0?void 0:v.y)!==null&&h!==void 0?h:0,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!c.selected,isDraggable:g,isSelectable:w,isConnectable:x,resizeObserver:u,dragHandle:c.dragHandle,zIndex:(m=(b=c[se])===null||b===void 0?void 0:b.z)!==null&&m!==void 0?m:0,isParent:!!((y=c[se])!==null&&y!==void 0&&y.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!c.width&&!!c.height},c.id)})})};Os.displayName="NodeRenderer";var Iv=re(Os),pt;function Hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Xi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Hi(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hi(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Tv=(pt={},W(pt,B.Left,B.Right),W(pt,B.Right,B.Left),W(pt,B.Top,B.Bottom),W(pt,B.Bottom,B.Top),pt),$v=function(e){var t,n,o,r,i,a=e.connectionNodeId,s=e.connectionHandleType,l=e.connectionLineStyle,u=e.connectionLineType,c=u===void 0?$e.Bezier:u,d=e.isConnectable,f=e.CustomConnectionLineComponent,h=ae(_t(function($){return{fromNode:$.nodeInternals.get(a),handleId:$.connectionHandleId,toX:($.connectionPosition.x-$.transform[0])/$.transform[2],toY:($.connectionPosition.y-$.transform[1])/$.transform[2]}},[a]),ge),v=h.fromNode,m=h.handleId,b=h.toX,y=h.toY,C=v==null||(t=v[se])===null||t===void 0?void 0:t.handleBounds;if(!v||!d||!(C!=null&&C[s]))return null;var E=C[s],g=m?E.find(function($){return $.id===m}):E[0],w=g?g.x+g.width/2:((n=v==null?void 0:v.width)!==null&&n!==void 0?n:0)/2,x=g?g.y+g.height/2:(o=v==null?void 0:v.height)!==null&&o!==void 0?o:0,k=((v==null||(r=v.positionAbsolute)===null||r===void 0?void 0:r.x)||0)+w,P=((v==null||(i=v.positionAbsolute)===null||i===void 0?void 0:i.y)||0)+x,T=g==null?void 0:g.position;if(!T)return null;var A=Tv[T],R,V,z,p,N,S;switch(s){case"source":R=k,V=P,z=T,p=b,N=y,S=A;break;case"target":R=b,V=y,z=A,p=k,N=P,S=T;break}if(f)return O("g",{className:"react-flow__connection",children:O(f,{connectionLineType:c,connectionLineStyle:l,fromNode:v,fromHandle:g,fromX:k,fromY:P,toX:b,toY:y,fromPosition:T,toPosition:A,sourcePosition:z,targetPosition:S,sourceNode:v,sourceHandle:g,targetX:p,targetY:N,sourceX:R,sourceY:V})});var _="",M={sourceX:R,sourceY:V,sourcePosition:z,targetX:p,targetY:N,targetPosition:S};return c===$e.Bezier?_=ps(M):c===$e.Step?_=Fo(Xi(Xi({},M),{},{borderRadius:0})):c===$e.SmoothStep?_=Fo(M):c===$e.SimpleBezier?_=us(M):_="M".concat(R,",").concat(V," ").concat(p,",").concat(N),O("g",{className:"react-flow__connection",children:O("path",{d:_,className:"react-flow__connection-path",style:l})})};function Jo(e){return Jo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jo(e)}var Sn,Rv=function(t){var n=t.color,o=n===void 0?"none":n,r=t.strokeWidth,i=r===void 0?1:r;return O("polyline",{stroke:o,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:i,fill:"none",points:"-5,-4 0,0 -5,4"})},Av=function(t){var n=t.color,o=n===void 0?"none":n,r=t.strokeWidth,i=r===void 0?1:r;return O("polyline",{stroke:o,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:i,fill:o,points:"-5,-4 0,0 -5,4 -5,-4"})},Ui=(Sn={},W(Sn,Qt.Arrow,Rv),W(Sn,Qt.ArrowClosed,Av),Sn);function Lv(e){var t=Ot(function(){var n=Ui.hasOwnProperty(e);return n?Ui[e]:function(){return null}},[e]);return t}function Gi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Bv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gi(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gi(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var zv=function(t){var n=t.id,o=t.type,r=t.color,i=t.width,a=i===void 0?12.5:i,s=t.height,l=s===void 0?12.5:s,u=t.markerUnits,c=u===void 0?"strokeWidth":u,d=t.strokeWidth,f=t.orient,h=f===void 0?"auto":f,v=Lv(o);return yi.createElement("marker",{className:"react-flow__arrowhead",id:n,markerWidth:"".concat(a),markerHeight:"".concat(l),viewBox:"-10 -10 20 20",markerUnits:c,orient:h,refX:"0",refY:"0"},yi.createElement(v,{color:r,strokeWidth:d}))},Vv=function(t){var n=t.defaultColor,o=t.rfId;return function(r){var i=[];return r.edges.reduce(function(a,s){return[s.markerStart,s.markerEnd].forEach(function(l){if(l&&Jo(l)==="object"){var u=qo(l,o);i.includes(u)||(a.push(Bv({id:u,color:l.color||n},l)),i.push(u))}}),a},[]).sort(function(a,s){return a.id.localeCompare(s.id)})}},Ps=function(t){var n=t.defaultColor,o=t.rfId,r=ae(_t(Vv({defaultColor:n,rfId:o}),[n,o]),function(i,a){return!(i.length!==a.length||i.some(function(s,l){return s.id!==a[l].id}))});return O("defs",{children:r.map(function(i){return O(zv,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id)})})};Ps.displayName="MarkerDefinitions";var jv=re(Ps),Yv=[{level:0,isMaxLevel:!0,edges:[]}];function Hv(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=-1,r=e.reduce(function(a,s){var l=Za(s.zIndex),u=l?s.zIndex:0;if(n){var c,d,f,h;u=l?s.zIndex:Math.max(((c=t.get(s.source))===null||c===void 0||(d=c[se])===null||d===void 0?void 0:d.z)||0,((f=t.get(s.target))===null||f===void 0||(h=f[se])===null||h===void 0?void 0:h.z)||0)}return a[u]?a[u].push(s):a[u]=[s],o=u>o?u:o,a},{}),i=Object.entries(r).map(function(a){var s=K(a,2),l=s[0],u=s[1],c=+l;return{edges:u,level:c,isMaxLevel:c===o}});return i.length===0?Yv:i}function Xv(e,t,n){var o=ae(_t(function(r){return e?r.edges.filter(function(i){var a=t.get(i.source),s=t.get(i.target);return(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&dv({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:s.width,targetHeight:s.height,width:r.width,height:r.height,transform:r.transform})}):r.edges},[e,t]));return Hv(o,t,n)}var Uv=function(t){return{connectionNodeId:t.connectionNodeId,connectionHandleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals}},_s=function(t){var n=ae(Uv,ge),o=n.connectionNodeId,r=n.connectionHandleType,i=n.nodesConnectable,a=n.elementsSelectable,s=n.width,l=n.height,u=n.connectionMode,c=n.nodeInternals,d=Xv(t.onlyRenderVisibleElements,c,t.elevateEdgesOnSelect);if(!s)return null;var f=t.connectionLineType,h=t.defaultMarkerColor,v=t.connectionLineStyle,m=t.connectionLineComponent,b=t.connectionLineContainerStyle,y=o&&r;return ne(fe,{children:[d.map(function(C){var E=C.level,g=C.edges,w=C.isMaxLevel;return ne("svg",{style:{zIndex:E},width:s,height:l,className:"react-flow__edges react-flow__container",children:[w&&O(jv,{defaultColor:h,rfId:t.rfId}),O("g",{children:g.map(function(x){var k=Di(c,x.source),P=K(k,3),T=P[0],A=P[1],R=P[2],V=Di(c,x.target),z=K(V,3),p=z[0],N=z[1],S=z[2];if(!R||!S)return null;var _=x.type||"default",M=t.edgeTypes[_]||t.edgeTypes.default,$=u===Nt.Strict?N.target:N.target||N.source,D=Mi(A.source,x.sourceHandle||null),L=Mi($,x.targetHandle||null),H=(D==null?void 0:D.position)||B.Bottom,U=(L==null?void 0:L.position)||B.Top;if(!D||!L)return null;var I=uv(T,D,H,p,L,U),Y=I.sourceX,Z=I.sourceY,q=I.targetX,Q=I.targetY;return O(M,{id:x.id,className:me([x.className,t.noPanClassName]),type:_,data:x.data,selected:!!x.selected,animated:!!x.animated,hidden:!!x.hidden,label:x.label,labelStyle:x.labelStyle,labelShowBg:x.labelShowBg,labelBgStyle:x.labelBgStyle,labelBgPadding:x.labelBgPadding,labelBgBorderRadius:x.labelBgBorderRadius,style:x.style,source:x.source,target:x.target,sourceHandleId:x.sourceHandle,targetHandleId:x.targetHandle,markerEnd:x.markerEnd,markerStart:x.markerStart,sourceX:Y,sourceY:Z,targetX:q,targetY:Q,sourcePosition:H,targetPosition:U,elementsSelectable:a,onEdgeUpdate:t.onEdgeUpdate,onContextMenu:t.onEdgeContextMenu,onMouseEnter:t.onEdgeMouseEnter,onMouseMove:t.onEdgeMouseMove,onMouseLeave:t.onEdgeMouseLeave,onClick:t.onEdgeClick,edgeUpdaterRadius:t.edgeUpdaterRadius,onEdgeDoubleClick:t.onEdgeDoubleClick,onEdgeUpdateStart:t.onEdgeUpdateStart,onEdgeUpdateEnd:t.onEdgeUpdateEnd,rfId:t.rfId},x.id)})})]},E)}),y&&O("svg",{style:b,width:s,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container",children:O($v,{connectionNodeId:o,connectionHandleType:r,connectionLineStyle:v,connectionLineType:f,isConnectable:i,CustomConnectionLineComponent:m})})]})};_s.displayName="EdgeRenderer";var Gv=re(_s),Kv=function(t){return"translate(".concat(t.transform[0],"px,").concat(t.transform[1],"px) scale(").concat(t.transform[2],")")};function qv(e){var t=e.children,n=ae(Kv);return O("div",{className:"react-flow__viewport react-flow__container",style:{transform:n},children:t})}function Fv(e){var t=vr(),n=ie(!1);oe(function(){!n.current&&t.viewportInitialized&&e&&(setTimeout(function(){return e(t)},1),n.current=!0)},[e,t.viewportInitialized])}var ks=function(t){var n=t.nodeTypes,o=t.edgeTypes,r=t.onMove,i=t.onMoveStart,a=t.onMoveEnd,s=t.onInit,l=t.onNodeClick,u=t.onEdgeClick,c=t.onNodeDoubleClick,d=t.onEdgeDoubleClick,f=t.onNodeMouseEnter,h=t.onNodeMouseMove,v=t.onNodeMouseLeave,m=t.onNodeContextMenu,b=t.onSelectionContextMenu,y=t.connectionLineType,C=t.connectionLineStyle,E=t.connectionLineComponent,g=t.connectionLineContainerStyle,w=t.selectionKeyCode,x=t.multiSelectionKeyCode,k=t.zoomActivationKeyCode,P=t.deleteKeyCode,T=t.onlyRenderVisibleElements,A=t.elementsSelectable,R=t.selectNodesOnDrag,V=t.defaultZoom,z=t.defaultPosition,p=t.preventScrolling,N=t.defaultMarkerColor,S=t.zoomOnScroll,_=t.zoomOnPinch,M=t.panOnScroll,$=t.panOnScrollSpeed,D=t.panOnScrollMode,L=t.zoomOnDoubleClick,H=t.panOnDrag,U=t.onPaneClick,I=t.onPaneScroll,Y=t.onPaneContextMenu,Z=t.onEdgeUpdate,q=t.onEdgeContextMenu,Q=t.onEdgeMouseEnter,ee=t.onEdgeMouseMove,j=t.onEdgeMouseLeave,le=t.edgeUpdaterRadius,ke=t.onEdgeUpdateStart,Fe=t.onEdgeUpdateEnd,Ze=t.noDragClassName,kt=t.noWheelClassName,Ve=t.noPanClassName,lt=t.elevateEdgesOnSelect,ct=t.id;return Fv(s),O(kv,{onPaneClick:U,onPaneContextMenu:Y,onPaneScroll:I,deleteKeyCode:P,selectionKeyCode:w,multiSelectionKeyCode:x,zoomActivationKeyCode:k,elementsSelectable:A,onMove:r,onMoveStart:i,onMoveEnd:a,zoomOnScroll:S,zoomOnPinch:_,zoomOnDoubleClick:L,panOnScroll:M,panOnScrollSpeed:$,panOnScrollMode:D,panOnDrag:H,defaultPosition:z,defaultZoom:V,onSelectionContextMenu:b,preventScrolling:p,noDragClassName:Ze,noWheelClassName:kt,noPanClassName:Ve,children:ne(qv,{children:[O(Gv,{edgeTypes:o,onEdgeClick:u,onEdgeDoubleClick:d,connectionLineType:y,connectionLineStyle:C,connectionLineComponent:E,connectionLineContainerStyle:g,onEdgeUpdate:Z,onlyRenderVisibleElements:T,onEdgeContextMenu:q,onEdgeMouseEnter:Q,onEdgeMouseMove:ee,onEdgeMouseLeave:j,onEdgeUpdateStart:ke,onEdgeUpdateEnd:Fe,edgeUpdaterRadius:le,defaultMarkerColor:N,noPanClassName:Ve,elevateEdgesOnSelect:!!lt,rfId:ct}),O(Iv,{nodeTypes:n,onNodeClick:l,onNodeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:h,onNodeMouseLeave:v,onNodeContextMenu:m,selectNodesOnDrag:R,onlyRenderVisibleElements:T,noPanClassName:Ve,noDragClassName:Ze})]})})};ks.displayName="GraphView";var Zv=re(ks),Ms=function(){return null};Ms.displayName="GroupNode";function Ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function qi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ki(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ki(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Lt=function(e){var t=function(o){var r=o.id,i=o.type,a=o.data,s=o.xPos,l=o.yPos,u=o.selected,c=o.onClick,d=o.onMouseEnter,f=o.onMouseMove,h=o.onMouseLeave,v=o.onContextMenu,m=o.onDoubleClick,b=o.style,y=o.className,C=o.isDraggable,E=o.isSelectable,g=o.isConnectable,w=o.selectNodesOnDrag,x=o.sourcePosition,k=o.targetPosition,P=o.hidden,T=o.resizeObserver,A=o.dragHandle,R=o.zIndex,V=o.isParent,z=o.noPanClassName,p=o.noDragClassName,N=o.initialized,S=ue(),_=ie(null),M=ie(x),$=ie(k),D=ie(i),L=E||C||c||d||f||h,H=Rt(r,S.getState,d),U=Rt(r,S.getState,f),I=Rt(r,S.getState,h),Y=Rt(r,S.getState,v),Z=Rt(r,S.getState,m),q=function(j){if(E&&(!w||!C)&&es({id:r,store:S}),c){var le=S.getState().nodeInternals.get(r);c(j,qi({},le))}};oe(function(){if(_.current&&!P){var ee=_.current;return T==null||T.observe(ee),function(){return T==null?void 0:T.unobserve(ee)}}},[P]),oe(function(){var ee=D.current!==i,j=M.current!==x,le=$.current!==k;_.current&&(ee||j||le)&&(ee&&(D.current=i),j&&(M.current=x),le&&($.current=k),S.getState().updateNodeDimensions([{id:r,nodeElement:_.current,forceUpdate:!0}]))},[r,i,x,k]);var Q=Cs({nodeRef:_,disabled:P||!C,noDragClassName:p,handleSelector:A,nodeId:r,isSelectable:E,selectNodesOnDrag:w});return P?null:O("div",{className:me(["react-flow__node","react-flow__node-".concat(i),z,y,{selected:u,selectable:E,parent:V}]),ref:_,style:qi({zIndex:R,transform:"translate(".concat(s,"px,").concat(l,"px)"),pointerEvents:L?"all":"none",visibility:N?"visible":"hidden"},b),onMouseEnter:H,onMouseMove:U,onMouseLeave:I,onContextMenu:Y,onClick:q,onDoubleClick:Z,"data-id":r,children:O(Kh,{value:r,children:O(e,{id:r,data:a,type:i,xPos:s,yPos:l,selected:u,isConnectable:g,sourcePosition:x,targetPosition:k,dragging:Q,dragHandle:A,zIndex:R})})})};return t.displayName="NodeWrapper",re(t)};function Fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Zi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fi(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fi(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Wv(e){var t={input:Lt(e.input||ws),default:Lt(e.default||Qo),output:Lt(e.output||Es),group:Lt(e.group||Ms)},n={},o=Object.keys(e).filter(function(r){return!["input","default","output","group"].includes(r)}).reduce(function(r,i){return r[i]=Lt(e[i]||Qo),r},n);return Zi(Zi({},t),o)}function Wi(e,t){ie(null);var n=Ot(function(){return t(e)},[e]);return n}function Qi(e){if(!(!e||typeof document=="undefined")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");t.appendChild(n),n.appendChild(document.createTextNode(e))}}var Ds=function(t){var n=t.children,o=!0;try{ue()}catch{o=!1}return o?O(fe,{children:n}):O(as,{createStore:ss,children:n})};Ds.displayName="ReactFlowWrapper";var Qv=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectStop","onConnectEnd","onClickConnectStart","onClickConnectStop","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateEdgesOnSelect"];function Ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ji(Object(n),!0).forEach(function(o){W(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ji(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}Qi(rv),Qi(av);var Jv={input:ws,default:Qo,output:Es},ep={default:Zo,straight:vs,step:hs,smoothstep:pr,simplebezier:ds},tp=[15,15],np=[0,0],Is=cs(function(e,t){var n=e.nodes,o=e.edges,r=e.defaultNodes,i=e.defaultEdges,a=e.className,s=e.nodeTypes,l=s===void 0?Jv:s,u=e.edgeTypes,c=u===void 0?ep:u,d=e.onNodeClick,f=e.onEdgeClick,h=e.onInit,v=e.onMove,m=e.onMoveStart,b=e.onMoveEnd,y=e.onConnect,C=e.onConnectStart,E=e.onConnectStop,g=e.onConnectEnd,w=e.onClickConnectStart,x=e.onClickConnectStop,k=e.onClickConnectEnd,P=e.onNodeMouseEnter,T=e.onNodeMouseMove,A=e.onNodeMouseLeave,R=e.onNodeContextMenu,V=e.onNodeDoubleClick,z=e.onNodeDragStart,p=e.onNodeDrag,N=e.onNodeDragStop,S=e.onNodesDelete,_=e.onEdgesDelete,M=e.onSelectionChange,$=e.onSelectionDragStart,D=e.onSelectionDrag,L=e.onSelectionDragStop,H=e.onSelectionContextMenu,U=e.connectionMode,I=U===void 0?Nt.Strict:U,Y=e.connectionLineType,Z=Y===void 0?$e.Bezier:Y,q=e.connectionLineStyle,Q=e.connectionLineComponent,ee=e.connectionLineContainerStyle,j=e.deleteKeyCode,le=j===void 0?"Backspace":j,ke=e.selectionKeyCode,Fe=ke===void 0?"Shift":ke,Ze=e.multiSelectionKeyCode,kt=Ze===void 0?"Meta":Ze,Ve=e.zoomActivationKeyCode,lt=Ve===void 0?"Meta":Ve,ct=e.snapToGrid,io=ct===void 0?!1:ct,Mt=e.snapGrid,on=Mt===void 0?tp:Mt,rn=e.onlyRenderVisibleElements,ao=rn===void 0?!1:rn,an=e.selectNodesOnDrag,sn=an===void 0?!0:an,so=e.nodesDraggable,We=e.nodesConnectable,Ee=e.elementsSelectable,Me=e.minZoom,Dt=e.maxZoom,ut=e.defaultZoom,Qe=ut===void 0?1:ut,dt=e.defaultPosition,lo=dt===void 0?np:dt,It=e.translateExtent,ln=e.preventScrolling,co=ln===void 0?!0:ln,Je=e.nodeExtent,cn=e.defaultMarkerColor,ll=cn===void 0?"#b1b1b7":cn,Sr=e.zoomOnScroll,cl=Sr===void 0?!0:Sr,Er=e.zoomOnPinch,ul=Er===void 0?!0:Er,xr=e.panOnScroll,dl=xr===void 0?!1:xr,Cr=e.panOnScrollSpeed,fl=Cr===void 0?.5:Cr,Nr=e.panOnScrollMode,hl=Nr===void 0?St.Free:Nr,Or=e.zoomOnDoubleClick,vl=Or===void 0?!0:Or,Pr=e.panOnDrag,pl=Pr===void 0?!0:Pr,gl=e.onPaneClick,ml=e.onPaneScroll,yl=e.onPaneContextMenu,bl=e.children,wl=e.onEdgeUpdate,Sl=e.onEdgeContextMenu,El=e.onEdgeDoubleClick,xl=e.onEdgeMouseEnter,Cl=e.onEdgeMouseMove,Nl=e.onEdgeMouseLeave,Ol=e.onEdgeUpdateStart,Pl=e.onEdgeUpdateEnd,_r=e.edgeUpdaterRadius,_l=_r===void 0?10:_r,kl=e.onNodesChange,Ml=e.onEdgesChange,kr=e.noDragClassName,Dl=kr===void 0?"nodrag":kr,Mr=e.noWheelClassName,Il=Mr===void 0?"nowheel":Mr,Dr=e.noPanClassName,Tl=Dr===void 0?"nopan":Dr,Ir=e.fitView,$l=Ir===void 0?!1:Ir,Rl=e.fitViewOptions,Tr=e.connectOnClick,Al=Tr===void 0?!0:Tr,Ll=e.attributionPosition,Bl=e.proOptions,zl=e.defaultEdgeOptions,$r=e.elevateEdgesOnSelect,Vl=$r===void 0?!1:$r,un=tn(e,Qv),jl=Wi(l,Wv),Yl=Wi(c,cv),Hl=me(["react-flow",a]);return O("div",{...ea(ea({},un),{},{ref:t,className:Hl}),children:ne(Ds,{children:[O(Zv,{onInit:h,onMove:v,onMoveStart:m,onMoveEnd:b,onNodeClick:d,onEdgeClick:f,onNodeMouseEnter:P,onNodeMouseMove:T,onNodeMouseLeave:A,onNodeContextMenu:R,onNodeDoubleClick:V,nodeTypes:jl,edgeTypes:Yl,connectionLineType:Z,connectionLineStyle:q,connectionLineComponent:Q,connectionLineContainerStyle:ee,selectionKeyCode:Fe,deleteKeyCode:le,multiSelectionKeyCode:kt,zoomActivationKeyCode:lt,onlyRenderVisibleElements:ao,selectNodesOnDrag:sn,defaultZoom:Qe,defaultPosition:lo,preventScrolling:co,zoomOnScroll:cl,zoomOnPinch:ul,zoomOnDoubleClick:vl,panOnScroll:dl,panOnScrollSpeed:fl,panOnScrollMode:hl,panOnDrag:pl,onPaneClick:gl,onPaneScroll:ml,onPaneContextMenu:yl,onSelectionContextMenu:H,onEdgeUpdate:wl,onEdgeContextMenu:Sl,onEdgeDoubleClick:El,onEdgeMouseEnter:xl,onEdgeMouseMove:Cl,onEdgeMouseLeave:Nl,onEdgeUpdateStart:Ol,onEdgeUpdateEnd:Pl,edgeUpdaterRadius:_l,defaultMarkerColor:ll,noDragClassName:Dl,noWheelClassName:Il,noPanClassName:Tl,elevateEdgesOnSelect:Vl,id:un==null?void 0:un.id}),O(nv,{nodes:n,edges:o,defaultNodes:r,defaultEdges:i,onConnect:y,onConnectStart:C,onConnectStop:E,onConnectEnd:g,onClickConnectStart:w,onClickConnectStop:x,onClickConnectEnd:k,nodesDraggable:so,nodesConnectable:We,elementsSelectable:Ee,minZoom:Me,maxZoom:Dt,nodeExtent:Je,onNodesChange:kl,onEdgesChange:Ml,snapToGrid:io,snapGrid:on,connectionMode:I,translateExtent:It,connectOnClick:Al,defaultEdgeOptions:zl,fitView:$l,fitViewOptions:Rl,onNodesDelete:S,onEdgesDelete:_,onNodeDragStart:z,onNodeDrag:p,onNodeDragStop:N,onSelectionDrag:D,onSelectionDragStart:$,onSelectionDragStop:L}),M&&O(ev,{onSelectionChange:M}),bl,O(zh,{proOptions:Bl,position:Ll})]})})});Is.displayName="ReactFlow";var Ts=function(t){var n=t.children;return O(as,{createStore:ss,children:n})};Ts.displayName="ReactFlowProvider";function $s(e){return function(t){var n=Pt(t),o=K(n,2),r=o[0],i=o[1],a=_t(function(s){return i(function(l){return e(s,l)})},[]);return[r,i,a]}}var op=$s(Qa),rp=$s(lh);const ip=window.React.useMemo,kn=e=>{const{data:t}=Gl(e.modifiedBy),n=Ul(Xl(e.modifiedOn)),{name:o,description:r}=e;return ip(()=>ne(fe,{children:[o&&O(An,{title:o,placement:"top",enterNextDelay:200,children:O("span",{children:O(Bo,{variant:"smallText1",className:"name",children:o})})}),r&&O(An,{title:r,placement:"top",enterNextDelay:200,children:O("span",{children:O(Bo,{variant:"smallText1",className:"description",children:r})})}),t&&O(Wl,{userProfile:t}),O("div",{children:n})]}),[o,r,t,n])};try{kn.displayName="ActivityNodeLabel",kn.__docgenInfo={description:"",displayName:"ActivityNodeLabel",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},etag:{defaultValue:null,description:"",name:"etag",required:!0,type:{name:"string"}},createdOn:{defaultValue:null,description:"",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"",name:"modifiedBy",required:!0,type:{name:"string"}},used:{defaultValue:null,description:"",name:"used",required:!1,type:{name:"(UsedURL | UsedEntity)[]"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ActivityNodeLabel.tsx#ActivityNodeLabel"]={docgenInfo:kn.__docgenInfo,name:"ActivityNodeLabel",path:"src/lib/containers/provenance/ActivityNodeLabel.tsx#ActivityNodeLabel"})}catch{}const ap=new Set([".awk",".bat",".btm",".c",".cmd",".cpp",".cxx",".def",".dlg",".dpc",".dpj",".dtd",".h",".hdl",".hpp",".hrc",".html",".hxx",".inc",".ini",".inl",".ins",".ipy",".java",".js",".jsp",".l",".lgt",".ll",".par",".pl",".py",".r",".rc",".rdb",".res",".s",".sbl",".scp",".sh",".sql",".src",".srs",".xml",".xrb",".y",".yaml",".yxx",".cwl",".wdl",".json"]),Mn=e=>{const{entityHeader:t}=e;if(t){const n=ya(t==null?void 0:t.type);if(n==Ar.FILE){const o=t.name.lastIndexOf(".");if(o>-1){const r=t.name.slice(o);if(ap.has(r.toLowerCase()))return O(or,{options:{icon:"code"}})}}else return O(Lr,{type:n,includeTooltip:!1})}return O(Lr,{type:Ar.FILE,includeTooltip:!1})};try{Mn.displayName="ProvenanceEntityIcon",Mn.__docgenInfo={description:"",displayName:"ProvenanceEntityIcon",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!1,type:{name:"EntityHeader"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceEntityIcon.tsx#ProvenanceEntityIcon"]={docgenInfo:Mn.__docgenInfo,name:"ProvenanceEntityIcon",path:"src/lib/containers/provenance/ProvenanceEntityIcon.tsx#ProvenanceEntityIcon"})}catch{}const sp=window.React.useMemo,Dn=e=>{const t=e.versionNumber?`.${e.versionNumber}`:"",n=`${e.id}${t}`;return sp(()=>ne(fe,{children:[O("div",{children:O(Mn,{entityHeader:e})}),ne(fe,{children:[O("div",{children:O(An,{title:e.name,placement:"top",enterNextDelay:300,children:O("a",{href:`${Jl.PORTAL}#!Synapse:${n}`,children:e.name})})}),Ql(ya(e.type))&&ne("div",{children:[ne("div",{children:["v.",e.versionNumber]}),!e.isLatestVersion&&O("div",{children:"(old version)"})]})]})]}),[e,n])};try{Dn.displayName="EntityNodeLabel",Dn.__docgenInfo={description:"",displayName:"EntityNodeLabel",props:{name:{defaultValue:null,description:"The name of the entity",name:"name",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"The id of the entity",name:"id",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"The type of the entity",name:"type",required:!0,type:{name:"enum",value:[{value:'"org.sagebionetworks.repo.model.table.EntityView"'},{value:'"org.sagebionetworks.repo.model.table.SubmissionView"'},{value:'"org.sagebionetworks.repo.model.table.Dataset"'},{value:'"org.sagebionetworks.repo.model.table.DatasetCollection"'},{value:'"org.sagebionetworks.repo.model.Link"'},{value:'"org.sagebionetworks.repo.model.docker.DockerRepository"'},{value:'"org.sagebionetworks.repo.model.FileEntity"'},{value:'"org.sagebionetworks.repo.model.table.TableEntity"'},{value:'"org.sagebionetworks.repo.model.table.MaterializedView"'},{value:'"org.sagebionetworks.repo.model.Folder"'},{value:'"org.sagebionetworks.repo.model.Project"'}]}},versionNumber:{defaultValue:null,description:"The version number of the entity",name:"versionNumber",required:!1,type:{name:"number"}},versionLabel:{defaultValue:null,description:"The user defined version label of the entity",name:"versionLabel",required:!1,type:{name:"string"}},benefactorId:{defaultValue:null,description:"The ID of the entity that this Entity's ACL is inherited from.",name:"benefactorId",required:!0,type:{name:"number"}},createdOn:{defaultValue:null,description:"The date this entity was created.",name:"createdOn",required:!0,type:{name:"string"}},modifiedOn:{defaultValue:null,description:"The date this entity was last modified.",name:"modifiedOn",required:!0,type:{name:"string"}},createdBy:{defaultValue:null,description:"The ID of the user that created this entity.",name:"createdBy",required:!0,type:{name:"string"}},modifiedBy:{defaultValue:null,description:"The ID of the user that last modified this entity.",name:"modifiedBy",required:!0,type:{name:"string"}},isLatestVersion:{defaultValue:null,description:"If this version is the latest version of the entity",name:"isLatestVersion",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/EntityNodeLabel.tsx#EntityNodeLabel"]={docgenInfo:Dn.__docgenInfo,name:"EntityNodeLabel",path:"src/lib/containers/provenance/EntityNodeLabel.tsx#EntityNodeLabel"})}catch{}const lp=window.React.useMemo,In=e=>{const{itemCount:t}=e;return lp(()=>O(fe,{children:ne("a",{children:["Show ",t," ",ec("item",t),"\u2026"]})}),[t])};try{In.displayName="ExpandGraphNodeLabel",In.__docgenInfo={description:"",displayName:"ExpandGraphNodeLabel",props:{entityHeader:{defaultValue:null,description:"",name:"entityHeader",required:!0,type:{name:"EntityHeader"}},itemCount:{defaultValue:null,description:"",name:"itemCount",required:!0,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ExpandGraphNodeLabel.tsx#ExpandGraphNodeLabel"]={docgenInfo:In.__docgenInfo,name:"ExpandGraphNodeLabel",path:"src/lib/containers/provenance/ExpandGraphNodeLabel.tsx#ExpandGraphNodeLabel"})}catch{}const cp=/^(.+?\.)?github\.com$/,up=/^(.+?\.)?githubusercontent\.com$/,Tn=e=>{const{url:t}=e;let n="link";const o=new URL(t),{hostname:r}=o;return(r.match(cp)||r.match(up))&&(n="github"),O(or,{options:{icon:n}})};try{Tn.displayName="ProvenanceExternalIcon",Tn.__docgenInfo={description:"",displayName:"ProvenanceExternalIcon",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceExternalIcon.tsx#ProvenanceExternalIcon"]={docgenInfo:Tn.__docgenInfo,name:"ProvenanceExternalIcon",path:"src/lib/containers/provenance/ProvenanceExternalIcon.tsx#ProvenanceExternalIcon"})}catch{}const dp=window.React.useMemo,$n=e=>dp(()=>ne(fe,{children:[O("div",{children:O(Tn,{url:e.url})}),O(An,{title:e.name,placement:"top",enterNextDelay:300,children:O("a",{href:e.url,rel:"noopener noreferrer",children:e.name})})]}),[e.name,e.url]);try{$n.displayName="ExternalGraphNodeLabel",$n.__docgenInfo={description:"",displayName:"ExternalGraphNodeLabel",props:{concreteType:{defaultValue:null,description:"",name:"concreteType",required:!0,type:{name:'"org.sagebionetworks.repo.model.provenance.UsedURL"'}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},wasExecuted:{defaultValue:null,description:"",name:"wasExecuted",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ExternalGraphNodeLabel.tsx#ExternalGraphNodeLabel"]={docgenInfo:$n.__docgenInfo,name:"ExternalGraphNodeLabel",path:"src/lib/containers/provenance/ExternalGraphNodeLabel.tsx#ExternalGraphNodeLabel"})}catch{}var qn;if(typeof ba=="function")try{qn=require("graphlib")}catch{}qn||(qn=window.graphlib);var Se=qn,Fn;if(typeof ba=="function")try{Fn={cloneDeep:require("lodash/cloneDeep"),constant:require("lodash/constant"),defaults:require("lodash/defaults"),each:require("lodash/each"),filter:require("lodash/filter"),find:require("lodash/find"),flatten:require("lodash/flatten"),forEach:require("lodash/forEach"),forIn:require("lodash/forIn"),has:require("lodash/has"),isUndefined:require("lodash/isUndefined"),last:require("lodash/last"),map:require("lodash/map"),mapValues:require("lodash/mapValues"),max:require("lodash/max"),merge:require("lodash/merge"),min:require("lodash/min"),minBy:require("lodash/minBy"),now:require("lodash/now"),pick:require("lodash/pick"),range:require("lodash/range"),reduce:require("lodash/reduce"),sortBy:require("lodash/sortBy"),uniqueId:require("lodash/uniqueId"),values:require("lodash/values"),zipObject:require("lodash/zipObject")}}catch{}Fn||(Fn=window._);var te=Fn,fp=oo;function oo(){var e={};e._next=e._prev=e,this._sentinel=e}oo.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Rs(t),t};oo.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Rs(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};oo.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,hp)),n=n._prev;return"["+e.join(", ")+"]"};function Rs(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function hp(e,t){if(e!=="_next"&&e!=="_prev")return t}var Ae=te,vp=Se.Graph,pp=fp,gp=yp,mp=Ae.constant(1);function yp(e,t){if(e.nodeCount()<=1)return[];var n=wp(e,t||mp),o=bp(n.graph,n.buckets,n.zeroIdx);return Ae.flatten(Ae.map(o,function(r){return e.outEdges(r.v,r.w)}),!0)}function bp(e,t,n){for(var o=[],r=t[t.length-1],i=t[0],a;e.nodeCount();){for(;a=i.dequeue();)_o(e,t,n,a);for(;a=r.dequeue();)_o(e,t,n,a);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(a=t[s].dequeue(),a){o=o.concat(_o(e,t,n,a,!0));break}}}return o}function _o(e,t,n,o,r){var i=r?[]:void 0;return Ae.forEach(e.inEdges(o.v),function(a){var s=e.edge(a),l=e.node(a.v);r&&i.push({v:a.v,w:a.w}),l.out-=s,er(t,n,l)}),Ae.forEach(e.outEdges(o.v),function(a){var s=e.edge(a),l=a.w,u=e.node(l);u.in-=s,er(t,n,u)}),e.removeNode(o.v),i}function wp(e,t){var n=new vp,o=0,r=0;Ae.forEach(e.nodes(),function(s){n.setNode(s,{v:s,in:0,out:0})}),Ae.forEach(e.edges(),function(s){var l=n.edge(s.v,s.w)||0,u=t(s),c=l+u;n.setEdge(s.v,s.w,c),r=Math.max(r,n.node(s.v).out+=u),o=Math.max(o,n.node(s.w).in+=u)});var i=Ae.range(r+o+3).map(function(){return new pp}),a=o+1;return Ae.forEach(n.nodes(),function(s){er(i,a,n.node(s))}),{graph:n,buckets:i,zeroIdx:a}}function er(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var nt=te,Sp=gp,Ep={run:xp,undo:Np};function xp(e){var t=e.graph().acyclicer==="greedy"?Sp(e,n(e)):Cp(e);nt.forEach(t,function(o){var r=e.edge(o);e.removeEdge(o),r.forwardName=o.name,r.reversed=!0,e.setEdge(o.w,o.v,r,nt.uniqueId("rev"))});function n(o){return function(r){return o.edge(r).weight}}}function Cp(e){var t=[],n={},o={};function r(i){nt.has(o,i)||(o[i]=!0,n[i]=!0,nt.forEach(e.outEdges(i),function(a){nt.has(n,a.w)?t.push(a):r(a.w)}),delete n[i])}return nt.forEach(e.nodes(),r),t}function Np(e){nt.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}})}var F=te,As=Se.Graph,he={addDummyNode:Ls,simplify:Op,asNonCompoundGraph:Pp,successorWeights:_p,predecessorWeights:kp,intersectRect:Mp,buildLayerMatrix:Dp,normalizeRanks:Ip,removeEmptyRanks:Tp,addBorderNode:$p,maxRank:Bs,partition:Rp,time:Ap,notime:Lp};function Ls(e,t,n,o){var r;do r=F.uniqueId(o);while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r}function Op(e){var t=new As().setGraph(e.graph());return F.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),F.forEach(e.edges(),function(n){var o=t.edge(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+r.weight,minlen:Math.max(o.minlen,r.minlen)})}),t}function Pp(e){var t=new As({multigraph:e.isMultigraph()}).setGraph(e.graph());return F.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),F.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function _p(e){var t=F.map(e.nodes(),function(n){var o={};return F.forEach(e.outEdges(n),function(r){o[r.w]=(o[r.w]||0)+e.edge(r).weight}),o});return F.zipObject(e.nodes(),t)}function kp(e){var t=F.map(e.nodes(),function(n){var o={};return F.forEach(e.inEdges(n),function(r){o[r.v]=(o[r.v]||0)+e.edge(r).weight}),o});return F.zipObject(e.nodes(),t)}function Mp(e,t){var n=e.x,o=e.y,r=t.x-n,i=t.y-o,a=e.width/2,s=e.height/2;if(!r&&!i)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(i)*a>Math.abs(r)*s?(i<0&&(s=-s),l=s*r/i,u=s):(r<0&&(a=-a),l=a,u=a*i/r),{x:n+l,y:o+u}}function Dp(e){var t=F.map(F.range(Bs(e)+1),function(){return[]});return F.forEach(e.nodes(),function(n){var o=e.node(n),r=o.rank;F.isUndefined(r)||(t[r][o.order]=n)}),t}function Ip(e){var t=F.min(F.map(e.nodes(),function(n){return e.node(n).rank}));F.forEach(e.nodes(),function(n){var o=e.node(n);F.has(o,"rank")&&(o.rank-=t)})}function Tp(e){var t=F.min(F.map(e.nodes(),function(i){return e.node(i).rank})),n=[];F.forEach(e.nodes(),function(i){var a=e.node(i).rank-t;n[a]||(n[a]=[]),n[a].push(i)});var o=0,r=e.graph().nodeRankFactor;F.forEach(n,function(i,a){F.isUndefined(i)&&a%r!==0?--o:o&&F.forEach(i,function(s){e.node(s).rank+=o})})}function $p(e,t,n,o){var r={width:0,height:0};return arguments.length>=4&&(r.rank=n,r.order=o),Ls(e,"border",r,t)}function Bs(e){return F.max(F.map(e.nodes(),function(t){var n=e.node(t).rank;if(!F.isUndefined(n))return n}))}function Rp(e,t){var n={lhs:[],rhs:[]};return F.forEach(e,function(o){t(o)?n.lhs.push(o):n.rhs.push(o)}),n}function Ap(e,t){var n=F.now();try{return t()}finally{console.log(e+" time: "+(F.now()-n)+"ms")}}function Lp(e,t){return t()}var zs=te,Bp=he,zp={run:Vp,undo:Yp};function Vp(e){e.graph().dummyChains=[],zs.forEach(e.edges(),function(t){jp(e,t)})}function jp(e,t){var n=t.v,o=e.node(n).rank,r=t.w,i=e.node(r).rank,a=t.name,s=e.edge(t),l=s.labelRank;if(i!==o+1){e.removeEdge(t);var u,c,d;for(d=0,++o;o<i;++d,++o)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:t,rank:o},u=Bp.addDummyNode(e,"edge",c,"_d"),o===l&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),e.setEdge(n,u,{weight:s.weight},a),d===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,r,{weight:s.weight},a)}}function Yp(e){zs.forEach(e.graph().dummyChains,function(t){var n=e.node(t),o=n.edgeLabel,r;for(e.setEdge(n.edgeObj,o);n.dummy;)r=e.successors(t)[0],e.removeNode(t),o.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),t=r,n=e.node(t)})}var En=te,ro={longestPath:Hp,slack:Xp};function Hp(e){var t={};function n(o){var r=e.node(o);if(En.has(t,o))return r.rank;t[o]=!0;var i=En.min(En.map(e.outEdges(o),function(a){return n(a.w)-e.edge(a).minlen}));return(i===Number.POSITIVE_INFINITY||i===void 0||i===null)&&(i=0),r.rank=i}En.forEach(e.sources(),n)}function Xp(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Zn=te,Up=Se.Graph,Wn=ro.slack,Vs=Gp;function Gp(e){var t=new Up({directed:!1}),n=e.nodes()[0],o=e.nodeCount();t.setNode(n,{});for(var r,i;Kp(t,e)<o;)r=qp(t,e),i=t.hasNode(r.v)?Wn(e,r):-Wn(e,r),Fp(t,e,i);return t}function Kp(e,t){function n(o){Zn.forEach(t.nodeEdges(o),function(r){var i=r.v,a=o===i?r.w:i;!e.hasNode(a)&&!Wn(t,r)&&(e.setNode(a,{}),e.setEdge(o,a,{}),n(a))})}return Zn.forEach(e.nodes(),n),e.nodeCount()}function qp(e,t){return Zn.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return Wn(t,n)})}function Fp(e,t,n){Zn.forEach(e.nodes(),function(o){t.node(o).rank+=n})}var ze=te,Zp=Vs,Wp=ro.slack,Qp=ro.longestPath,Jp=Se.alg.preorder,eg=Se.alg.postorder,tg=he.simplify,ng=st;st.initLowLimValues=yr;st.initCutValues=mr;st.calcCutValue=js;st.leaveEdge=Hs;st.enterEdge=Xs;st.exchangeEdges=Us;function st(e){e=tg(e),Qp(e);var t=Zp(e);yr(t),mr(t,e);for(var n,o;n=Hs(t);)o=Xs(t,e,n),Us(t,e,n,o)}function mr(e,t){var n=eg(e,e.nodes());n=n.slice(0,n.length-1),ze.forEach(n,function(o){og(e,t,o)})}function og(e,t,n){var o=e.node(n),r=o.parent;e.edge(n,r).cutvalue=js(e,t,n)}function js(e,t,n){var o=e.node(n),r=o.parent,i=!0,a=t.edge(n,r),s=0;return a||(i=!1,a=t.edge(r,n)),s=a.weight,ze.forEach(t.nodeEdges(n),function(l){var u=l.v===n,c=u?l.w:l.v;if(c!==r){var d=u===i,f=t.edge(l).weight;if(s+=d?f:-f,ig(e,n,c)){var h=e.edge(n,c).cutvalue;s+=d?-h:h}}}),s}function yr(e,t){arguments.length<2&&(t=e.nodes()[0]),Ys(e,{},1,t)}function Ys(e,t,n,o,r){var i=n,a=e.node(o);return t[o]=!0,ze.forEach(e.neighbors(o),function(s){ze.has(t,s)||(n=Ys(e,t,n,s,o))}),a.low=i,a.lim=n++,r?a.parent=r:delete a.parent,n}function Hs(e){return ze.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Xs(e,t,n){var o=n.v,r=n.w;t.hasEdge(o,r)||(o=n.w,r=n.v);var i=e.node(o),a=e.node(r),s=i,l=!1;i.lim>a.lim&&(s=a,l=!0);var u=ze.filter(t.edges(),function(c){return l===ta(e,e.node(c.v),s)&&l!==ta(e,e.node(c.w),s)});return ze.minBy(u,function(c){return Wp(t,c)})}function Us(e,t,n,o){var r=n.v,i=n.w;e.removeEdge(r,i),e.setEdge(o.v,o.w,{}),yr(e),mr(e,t),rg(e,t)}function rg(e,t){var n=ze.find(e.nodes(),function(r){return!t.node(r).parent}),o=Jp(e,n);o=o.slice(1),ze.forEach(o,function(r){var i=e.node(r).parent,a=t.edge(r,i),s=!1;a||(a=t.edge(i,r),s=!0),t.node(r).rank=t.node(i).rank+(s?a.minlen:-a.minlen)})}function ig(e,t,n){return e.hasEdge(t,n)}function ta(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var ag=ro,Gs=ag.longestPath,sg=Vs,lg=ng,cg=ug;function ug(e){switch(e.graph().ranker){case"network-simplex":na(e);break;case"tight-tree":fg(e);break;case"longest-path":dg(e);break;default:na(e)}}var dg=Gs;function fg(e){Gs(e),sg(e)}function na(e){lg(e)}var tr=te,hg=vg;function vg(e){var t=gg(e);tr.forEach(e.graph().dummyChains,function(n){for(var o=e.node(n),r=o.edgeObj,i=pg(e,t,r.v,r.w),a=i.path,s=i.lca,l=0,u=a[l],c=!0;n!==r.w;){if(o=e.node(n),c){for(;(u=a[l])!==s&&e.node(u).maxRank<o.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<a.length-1&&e.node(u=a[l+1]).minRank<=o.rank;)l++;u=a[l]}e.setParent(n,u),n=e.successors(n)[0]}})}function pg(e,t,n,o){var r=[],i=[],a=Math.min(t[n].low,t[o].low),s=Math.max(t[n].lim,t[o].lim),l,u;l=n;do l=e.parent(l),r.push(l);while(l&&(t[l].low>a||s>t[l].lim));for(u=l,l=o;(l=e.parent(l))!==u;)i.push(l);return{path:r.concat(i.reverse()),lca:u}}function gg(e){var t={},n=0;function o(r){var i=n;tr.forEach(e.children(r),o),t[r]={low:i,lim:n++}}return tr.forEach(e.children(),o),t}var Le=te,nr=he,mg={run:yg,cleanup:Sg};function yg(e){var t=nr.addDummyNode(e,"root",{},"_root"),n=bg(e),o=Le.max(Le.values(n))-1,r=2*o+1;e.graph().nestingRoot=t,Le.forEach(e.edges(),function(a){e.edge(a).minlen*=r});var i=wg(e)+1;Le.forEach(e.children(),function(a){Ks(e,t,r,i,o,n,a)}),e.graph().nodeRankFactor=r}function Ks(e,t,n,o,r,i,a){var s=e.children(a);if(!s.length){a!==t&&e.setEdge(t,a,{weight:0,minlen:n});return}var l=nr.addBorderNode(e,"_bt"),u=nr.addBorderNode(e,"_bb"),c=e.node(a);e.setParent(l,a),c.borderTop=l,e.setParent(u,a),c.borderBottom=u,Le.forEach(s,function(d){Ks(e,t,n,o,r,i,d);var f=e.node(d),h=f.borderTop?f.borderTop:d,v=f.borderBottom?f.borderBottom:d,m=f.borderTop?o:2*o,b=h!==v?1:r-i[a]+1;e.setEdge(l,h,{weight:m,minlen:b,nestingEdge:!0}),e.setEdge(v,u,{weight:m,minlen:b,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,l,{weight:0,minlen:r+i[a]})}function bg(e){var t={};function n(o,r){var i=e.children(o);i&&i.length&&Le.forEach(i,function(a){n(a,r+1)}),t[o]=r}return Le.forEach(e.children(),function(o){n(o,1)}),t}function wg(e){return Le.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function Sg(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,Le.forEach(e.edges(),function(n){var o=e.edge(n);o.nestingEdge&&e.removeEdge(n)})}var ko=te,Eg=he,xg=Cg;function Cg(e){function t(n){var o=e.children(n),r=e.node(n);if(o.length&&ko.forEach(o,t),ko.has(r,"minRank")){r.borderLeft=[],r.borderRight=[];for(var i=r.minRank,a=r.maxRank+1;i<a;++i)oa(e,"borderLeft","_bl",n,r,i),oa(e,"borderRight","_br",n,r,i)}}ko.forEach(e.children(),t)}function oa(e,t,n,o,r,i){var a={width:0,height:0,rank:i,borderType:t},s=r[t][i-1],l=Eg.addDummyNode(e,"border",a,n);r[t][i]=l,e.setParent(l,o),s&&e.setEdge(s,l,{weight:1})}var Ne=te,Ng={adjust:Og,undo:Pg};function Og(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&qs(e)}function Pg(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&_g(e),(t==="lr"||t==="rl")&&(kg(e),qs(e))}function qs(e){Ne.forEach(e.nodes(),function(t){ra(e.node(t))}),Ne.forEach(e.edges(),function(t){ra(e.edge(t))})}function ra(e){var t=e.width;e.width=e.height,e.height=t}function _g(e){Ne.forEach(e.nodes(),function(t){Mo(e.node(t))}),Ne.forEach(e.edges(),function(t){var n=e.edge(t);Ne.forEach(n.points,Mo),Ne.has(n,"y")&&Mo(n)})}function Mo(e){e.y=-e.y}function kg(e){Ne.forEach(e.nodes(),function(t){Do(e.node(t))}),Ne.forEach(e.edges(),function(t){var n=e.edge(t);Ne.forEach(n.points,Do),Ne.has(n,"x")&&Do(n)})}function Do(e){var t=e.x;e.x=e.y,e.y=t}var Te=te,Mg=Dg;function Dg(e){var t={},n=Te.filter(e.nodes(),function(s){return!e.children(s).length}),o=Te.max(Te.map(n,function(s){return e.node(s).rank})),r=Te.map(Te.range(o+1),function(){return[]});function i(s){if(!Te.has(t,s)){t[s]=!0;var l=e.node(s);r[l.rank].push(s),Te.forEach(e.successors(s),i)}}var a=Te.sortBy(n,function(s){return e.node(s).rank});return Te.forEach(a,i),r}var He=te,Ig=Tg;function Tg(e,t){for(var n=0,o=1;o<t.length;++o)n+=$g(e,t[o-1],t[o]);return n}function $g(e,t,n){for(var o=He.zipObject(n,He.map(n,function(u,c){return c})),r=He.flatten(He.map(t,function(u){return He.sortBy(He.map(e.outEdges(u),function(c){return{pos:o[c.w],weight:e.edge(c).weight}}),"pos")}),!0),i=1;i<n.length;)i<<=1;var a=2*i-1;i-=1;var s=He.map(new Array(a),function(){return 0}),l=0;return He.forEach(r.forEach(function(u){var c=u.pos+i;s[c]+=u.weight;for(var d=0;c>0;)c%2&&(d+=s[c+1]),c=c-1>>1,s[c]+=u.weight;l+=u.weight*d})),l}var ia=te,Rg=Ag;function Ag(e,t){return ia.map(t,function(n){var o=e.inEdges(n);if(o.length){var r=ia.reduce(o,function(i,a){var s=e.edge(a),l=e.node(a.v);return{sum:i.sum+s.weight*l.order,weight:i.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:r.sum/r.weight,weight:r.weight}}else return{v:n}})}var ve=te,Lg=Bg;function Bg(e,t){var n={};ve.forEach(e,function(r,i){var a=n[r.v]={indegree:0,in:[],out:[],vs:[r.v],i};ve.isUndefined(r.barycenter)||(a.barycenter=r.barycenter,a.weight=r.weight)}),ve.forEach(t.edges(),function(r){var i=n[r.v],a=n[r.w];!ve.isUndefined(i)&&!ve.isUndefined(a)&&(a.indegree++,i.out.push(n[r.w]))});var o=ve.filter(n,function(r){return!r.indegree});return zg(o)}function zg(e){var t=[];function n(i){return function(a){a.merged||(ve.isUndefined(a.barycenter)||ve.isUndefined(i.barycenter)||a.barycenter>=i.barycenter)&&Vg(i,a)}}function o(i){return function(a){a.in.push(i),--a.indegree===0&&e.push(a)}}for(;e.length;){var r=e.pop();t.push(r),ve.forEach(r.in.reverse(),n(r)),ve.forEach(r.out,o(r))}return ve.map(ve.filter(t,function(i){return!i.merged}),function(i){return ve.pick(i,["vs","i","barycenter","weight"])})}function Vg(e,t){var n=0,o=0;e.weight&&(n+=e.barycenter*e.weight,o+=e.weight),t.weight&&(n+=t.barycenter*t.weight,o+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/o,e.weight=o,e.i=Math.min(t.i,e.i),t.merged=!0}var jt=te,jg=he,Yg=Hg;function Hg(e,t){var n=jg.partition(e,function(c){return jt.has(c,"barycenter")}),o=n.lhs,r=jt.sortBy(n.rhs,function(c){return-c.i}),i=[],a=0,s=0,l=0;o.sort(Xg(!!t)),l=aa(i,r,l),jt.forEach(o,function(c){l+=c.vs.length,i.push(c.vs),a+=c.barycenter*c.weight,s+=c.weight,l=aa(i,r,l)});var u={vs:jt.flatten(i,!0)};return s&&(u.barycenter=a/s,u.weight=s),u}function aa(e,t,n){for(var o;t.length&&(o=jt.last(t)).i<=n;)t.pop(),e.push(o.vs),n++;return n}function Xg(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var Ge=te,Ug=Rg,Gg=Lg,Kg=Yg,qg=Fs;function Fs(e,t,n,o){var r=e.children(t),i=e.node(t),a=i?i.borderLeft:void 0,s=i?i.borderRight:void 0,l={};a&&(r=Ge.filter(r,function(v){return v!==a&&v!==s}));var u=Ug(e,r);Ge.forEach(u,function(v){if(e.children(v.v).length){var m=Fs(e,v.v,n,o);l[v.v]=m,Ge.has(m,"barycenter")&&Zg(v,m)}});var c=Gg(u,n);Fg(c,l);var d=Kg(c,o);if(a&&(d.vs=Ge.flatten([a,d.vs,s],!0),e.predecessors(a).length)){var f=e.node(e.predecessors(a)[0]),h=e.node(e.predecessors(s)[0]);Ge.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+h.order)/(d.weight+2),d.weight+=2}return d}function Fg(e,t){Ge.forEach(e,function(n){n.vs=Ge.flatten(n.vs.map(function(o){return t[o]?t[o].vs:o}),!0)})}function Zg(e,t){Ge.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var Yt=te,Wg=Se.Graph,Qg=Jg;function Jg(e,t,n){var o=em(e),r=new Wg({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(i){return e.node(i)});return Yt.forEach(e.nodes(),function(i){var a=e.node(i),s=e.parent(i);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(r.setNode(i),r.setParent(i,s||o),Yt.forEach(e[n](i),function(l){var u=l.v===i?l.w:l.v,c=r.edge(u,i),d=Yt.isUndefined(c)?0:c.weight;r.setEdge(u,i,{weight:e.edge(l).weight+d})}),Yt.has(a,"minRank")&&r.setNode(i,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),r}function em(e){for(var t;e.hasNode(t=Yt.uniqueId("_root")););return t}var tm=te,nm=om;function om(e,t,n){var o={},r;tm.forEach(n,function(i){for(var a=e.parent(i),s,l;a;){if(s=e.parent(a),s?(l=o[s],o[s]=a):(l=r,r=a),l&&l!==a){t.setEdge(l,a);return}a=s}})}var Ke=te,rm=Mg,im=Ig,am=qg,sm=Qg,lm=nm,cm=Se.Graph,sa=he,um=dm;function dm(e){var t=sa.maxRank(e),n=la(e,Ke.range(1,t+1),"inEdges"),o=la(e,Ke.range(t-1,-1,-1),"outEdges"),r=rm(e);ca(e,r);for(var i=Number.POSITIVE_INFINITY,a,s=0,l=0;l<4;++s,++l){fm(s%2?n:o,s%4>=2),r=sa.buildLayerMatrix(e);var u=im(e,r);u<i&&(l=0,a=Ke.cloneDeep(r),i=u)}ca(e,a)}function la(e,t,n){return Ke.map(t,function(o){return sm(e,o,n)})}function fm(e,t){var n=new cm;Ke.forEach(e,function(o){var r=o.graph().root,i=am(o,r,n,t);Ke.forEach(i.vs,function(a,s){o.node(a).order=s}),lm(o,n,i.vs)})}function ca(e,t){Ke.forEach(t,function(n){Ke.forEach(n,function(o,r){e.node(o).order=r})})}var X=te,hm=Se.Graph,vm=he,pm={positionX:ym,findType1Conflicts:Zs,findType2Conflicts:Ws,addConflict:br,hasConflict:Qs,verticalAlignment:Js,horizontalCompaction:el,alignCoordinates:nl,findSmallestWidthAlignment:tl,balance:ol};function Zs(e,t){var n={};function o(r,i){var a=0,s=0,l=r.length,u=X.last(i);return X.forEach(i,function(c,d){var f=gm(e,c),h=f?e.node(f).order:l;(f||c===u)&&(X.forEach(i.slice(s,d+1),function(v){X.forEach(e.predecessors(v),function(m){var b=e.node(m),y=b.order;(y<a||h<y)&&!(b.dummy&&e.node(v).dummy)&&br(n,m,v)})}),s=d+1,a=h)}),i}return X.reduce(t,o),n}function Ws(e,t){var n={};function o(i,a,s,l,u){var c;X.forEach(X.range(a,s),function(d){c=i[d],e.node(c).dummy&&X.forEach(e.predecessors(c),function(f){var h=e.node(f);h.dummy&&(h.order<l||h.order>u)&&br(n,f,c)})})}function r(i,a){var s=-1,l,u=0;return X.forEach(a,function(c,d){if(e.node(c).dummy==="border"){var f=e.predecessors(c);f.length&&(l=e.node(f[0]).order,o(a,u,d,s,l),u=d,s=l)}o(a,u,a.length,l,i.length)}),a}return X.reduce(t,r),n}function gm(e,t){if(e.node(t).dummy)return X.find(e.predecessors(t),function(n){return e.node(n).dummy})}function br(e,t,n){if(t>n){var o=t;t=n,n=o}var r=e[t];r||(e[t]=r={}),r[n]=!0}function Qs(e,t,n){if(t>n){var o=t;t=n,n=o}return X.has(e[t],n)}function Js(e,t,n,o){var r={},i={},a={};return X.forEach(t,function(s){X.forEach(s,function(l,u){r[l]=l,i[l]=l,a[l]=u})}),X.forEach(t,function(s){var l=-1;X.forEach(s,function(u){var c=o(u);if(c.length){c=X.sortBy(c,function(m){return a[m]});for(var d=(c.length-1)/2,f=Math.floor(d),h=Math.ceil(d);f<=h;++f){var v=c[f];i[u]===u&&l<a[v]&&!Qs(n,u,v)&&(i[v]=u,i[u]=r[u]=r[v],l=a[v])}}})}),{root:r,align:i}}function el(e,t,n,o,r){var i={},a=mm(e,t,n,r),s=r?"borderLeft":"borderRight";function l(d,f){for(var h=a.nodes(),v=h.pop(),m={};v;)m[v]?d(v):(m[v]=!0,h.push(v),h=h.concat(f(v))),v=h.pop()}function u(d){i[d]=a.inEdges(d).reduce(function(f,h){return Math.max(f,i[h.v]+a.edge(h))},0)}function c(d){var f=a.outEdges(d).reduce(function(v,m){return Math.min(v,i[m.w]-a.edge(m))},Number.POSITIVE_INFINITY),h=e.node(d);f!==Number.POSITIVE_INFINITY&&h.borderType!==s&&(i[d]=Math.max(i[d],f))}return l(u,a.predecessors.bind(a)),l(c,a.successors.bind(a)),X.forEach(o,function(d){i[d]=i[n[d]]}),i}function mm(e,t,n,o){var r=new hm,i=e.graph(),a=bm(i.nodesep,i.edgesep,o);return X.forEach(t,function(s){var l;X.forEach(s,function(u){var c=n[u];if(r.setNode(c),l){var d=n[l],f=r.edge(d,c);r.setEdge(d,c,Math.max(a(e,u,l),f||0))}l=u})}),r}function tl(e,t){return X.minBy(X.values(t),function(n){var o=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return X.forIn(n,function(i,a){var s=wm(e,a)/2;o=Math.max(i+s,o),r=Math.min(i-s,r)}),o-r})}function nl(e,t){var n=X.values(t),o=X.min(n),r=X.max(n);X.forEach(["u","d"],function(i){X.forEach(["l","r"],function(a){var s=i+a,l=e[s],u;if(l!==t){var c=X.values(l);u=a==="l"?o-X.min(c):r-X.max(c),u&&(e[s]=X.mapValues(l,function(d){return d+u}))}})})}function ol(e,t){return X.mapValues(e.ul,function(n,o){if(t)return e[t.toLowerCase()][o];var r=X.sortBy(X.map(e,o));return(r[1]+r[2])/2})}function ym(e){var t=vm.buildLayerMatrix(e),n=X.merge(Zs(e,t),Ws(e,t)),o={},r;X.forEach(["u","d"],function(a){r=a==="u"?t:X.values(t).reverse(),X.forEach(["l","r"],function(s){s==="r"&&(r=X.map(r,function(d){return X.values(d).reverse()}));var l=(a==="u"?e.predecessors:e.successors).bind(e),u=Js(e,r,n,l),c=el(e,r,u.root,u.align,s==="r");s==="r"&&(c=X.mapValues(c,function(d){return-d})),o[a+s]=c})});var i=tl(e,o);return nl(o,i),ol(o,e.graph().align)}function bm(e,t,n){return function(o,r,i){var a=o.node(r),s=o.node(i),l=0,u;if(l+=a.width/2,X.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=-a.width/2;break;case"r":u=a.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(a.dummy?t:e)/2,l+=(s.dummy?t:e)/2,l+=s.width/2,X.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=s.width/2;break;case"r":u=-s.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function wm(e,t){return e.node(t).width}var Ht=te,rl=he,Sm=pm.positionX,Em=xm;function xm(e){e=rl.asNonCompoundGraph(e),Cm(e),Ht.forEach(Sm(e),function(t,n){e.node(n).x=t})}function Cm(e){var t=rl.buildLayerMatrix(e),n=e.graph().ranksep,o=0;Ht.forEach(t,function(r){var i=Ht.max(Ht.map(r,function(a){return e.node(a).height}));Ht.forEach(r,function(a){e.node(a).y=o+i/2}),o+=i+n})}var G=te,ua=Ep,da=zp,Nm=cg,Om=he.normalizeRanks,Pm=hg,_m=he.removeEmptyRanks,fa=mg,km=xg,ha=Ng,Mm=um,Dm=Em,qe=he,Im=Se.Graph,Tm=$m;function $m(e,t){var n=t&&t.debugTiming?qe.time:qe.notime;n("layout",function(){var o=n("  buildLayoutGraph",function(){return Um(e)});n("  runLayout",function(){Rm(o,n)}),n("  updateInputGraph",function(){Am(e,o)})})}function Rm(e,t){t("    makeSpaceForEdgeLabels",function(){Gm(e)}),t("    removeSelfEdges",function(){t0(e)}),t("    acyclic",function(){ua.run(e)}),t("    nestingGraph.run",function(){fa.run(e)}),t("    rank",function(){Nm(qe.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){Km(e)}),t("    removeEmptyRanks",function(){_m(e)}),t("    nestingGraph.cleanup",function(){fa.cleanup(e)}),t("    normalizeRanks",function(){Om(e)}),t("    assignRankMinMax",function(){qm(e)}),t("    removeEdgeLabelProxies",function(){Fm(e)}),t("    normalize.run",function(){da.run(e)}),t("    parentDummyChains",function(){Pm(e)}),t("    addBorderSegments",function(){km(e)}),t("    order",function(){Mm(e)}),t("    insertSelfEdges",function(){n0(e)}),t("    adjustCoordinateSystem",function(){ha.adjust(e)}),t("    position",function(){Dm(e)}),t("    positionSelfEdges",function(){o0(e)}),t("    removeBorderNodes",function(){e0(e)}),t("    normalize.undo",function(){da.undo(e)}),t("    fixupEdgeLabelCoords",function(){Qm(e)}),t("    undoCoordinateSystem",function(){ha.undo(e)}),t("    translateGraph",function(){Zm(e)}),t("    assignNodeIntersects",function(){Wm(e)}),t("    reversePoints",function(){Jm(e)}),t("    acyclic.undo",function(){ua.undo(e)})}function Am(e,t){G.forEach(e.nodes(),function(n){var o=e.node(n),r=t.node(n);o&&(o.x=r.x,o.y=r.y,t.children(n).length&&(o.width=r.width,o.height=r.height))}),G.forEach(e.edges(),function(n){var o=e.edge(n),r=t.edge(n);o.points=r.points,G.has(r,"x")&&(o.x=r.x,o.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var Lm=["nodesep","edgesep","ranksep","marginx","marginy"],Bm={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},zm=["acyclicer","ranker","rankdir","align"],Vm=["width","height"],jm={width:0,height:0},Ym=["minlen","weight","width","height","labeloffset"],Hm={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Xm=["labelpos"];function Um(e){var t=new Im({multigraph:!0,compound:!0}),n=To(e.graph());return t.setGraph(G.merge({},Bm,Io(n,Lm),G.pick(n,zm))),G.forEach(e.nodes(),function(o){var r=To(e.node(o));t.setNode(o,G.defaults(Io(r,Vm),jm)),t.setParent(o,e.parent(o))}),G.forEach(e.edges(),function(o){var r=To(e.edge(o));t.setEdge(o,G.merge({},Hm,Io(r,Ym),G.pick(r,Xm)))}),t}function Gm(e){var t=e.graph();t.ranksep/=2,G.forEach(e.edges(),function(n){var o=e.edge(n);o.minlen*=2,o.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?o.width+=o.labeloffset:o.height+=o.labeloffset)})}function Km(e){G.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var o=e.node(t.v),r=e.node(t.w),i={rank:(r.rank-o.rank)/2+o.rank,e:t};qe.addDummyNode(e,"edge-proxy",i,"_ep")}})}function qm(e){var t=0;G.forEach(e.nodes(),function(n){var o=e.node(n);o.borderTop&&(o.minRank=e.node(o.borderTop).rank,o.maxRank=e.node(o.borderBottom).rank,t=G.max(t,o.maxRank))}),e.graph().maxRank=t}function Fm(e){G.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function Zm(e){var t=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,r=0,i=e.graph(),a=i.marginx||0,s=i.marginy||0;function l(u){var c=u.x,d=u.y,f=u.width,h=u.height;t=Math.min(t,c-f/2),n=Math.max(n,c+f/2),o=Math.min(o,d-h/2),r=Math.max(r,d+h/2)}G.forEach(e.nodes(),function(u){l(e.node(u))}),G.forEach(e.edges(),function(u){var c=e.edge(u);G.has(c,"x")&&l(c)}),t-=a,o-=s,G.forEach(e.nodes(),function(u){var c=e.node(u);c.x-=t,c.y-=o}),G.forEach(e.edges(),function(u){var c=e.edge(u);G.forEach(c.points,function(d){d.x-=t,d.y-=o}),G.has(c,"x")&&(c.x-=t),G.has(c,"y")&&(c.y-=o)}),i.width=n-t+a,i.height=r-o+s}function Wm(e){G.forEach(e.edges(),function(t){var n=e.edge(t),o=e.node(t.v),r=e.node(t.w),i,a;n.points?(i=n.points[0],a=n.points[n.points.length-1]):(n.points=[],i=r,a=o),n.points.unshift(qe.intersectRect(o,i)),n.points.push(qe.intersectRect(r,a))})}function Qm(e){G.forEach(e.edges(),function(t){var n=e.edge(t);if(G.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function Jm(e){G.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function e0(e){G.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),o=e.node(n.borderTop),r=e.node(n.borderBottom),i=e.node(G.last(n.borderLeft)),a=e.node(G.last(n.borderRight));n.width=Math.abs(a.x-i.x),n.height=Math.abs(r.y-o.y),n.x=i.x+n.width/2,n.y=o.y+n.height/2}}),G.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function t0(e){G.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function n0(e){var t=qe.buildLayerMatrix(e);G.forEach(t,function(n){var o=0;G.forEach(n,function(r,i){var a=e.node(r);a.order=i+o,G.forEach(a.selfEdges,function(s){qe.addDummyNode(e,"selfedge",{width:s.label.width,height:s.label.height,rank:a.rank,order:i+ ++o,e:s.e,label:s.label},"_se")}),delete a.selfEdges})})}function o0(e){G.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var o=e.node(n.e.v),r=o.x+o.width/2,i=o.y,a=n.x-r,s=o.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*a/3,y:i-s},{x:r+5*a/6,y:i-s},{x:r+a,y:i},{x:r+5*a/6,y:i+s},{x:r+2*a/3,y:i+s}],n.label.x=n.x,n.label.y=n.y}})}function Io(e,t){return G.mapValues(G.pick(e,t),Number)}function To(e){var t={};return G.forEach(e,function(n,o){t[o.toLowerCase()]=n}),t}var xn=te,r0=he,i0=Se.Graph,a0={debugOrdering:s0};function s0(e){var t=r0.buildLayerMatrix(e),n=new i0({compound:!0,multigraph:!0}).setGraph({});return xn.forEach(e.nodes(),function(o){n.setNode(o,{label:o}),n.setParent(o,"layer"+e.node(o).rank)}),xn.forEach(e.edges(),function(o){n.setEdge(o.v,o.w,{},o.name)}),xn.forEach(t,function(o,r){var i="layer"+r;n.setNode(i,{rank:"same"}),xn.reduce(o,function(a,s){return n.setEdge(a,s,{style:"invis"}),s})}),n}var l0="0.8.5",il={graphlib:Se,layout:Tm,debug:a0,util:{time:he.time,notime:he.notime},version:l0};const c0=()=>ne(fe,{children:[O(Bo,{variant:"smallText1",className:"description",children:"Undefined"}),O(tc,{placement:"top",markdownText:"Provenance tracks the relationship  between data, code and analytical results.",helpUrl:"https://help.synapse.org/docs/Provenance.1972470373.html"})]}),u0=window.React.useMemo,Rn=e=>{const t=e.targetVersionNumber?`.${e.targetVersionNumber}`:"",n=`${e.targetId}${t}`;return u0(()=>ne(fe,{children:[O("div",{children:O(or,{options:{icon:"fileOutlined"}})}),O("span",{children:n})]}),[n])};try{Rn.displayName="EntityPlaceholderNodeLabel",Rn.__docgenInfo={description:"This node type is used if the user cannot access the entity for some reason",displayName:"EntityPlaceholderNodeLabel",props:{targetId:{defaultValue:null,description:"",name:"targetId",required:!0,type:{name:"string"}},targetVersionNumber:{defaultValue:null,description:"",name:"targetVersionNumber",required:!1,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/EntityPlaceholderNodeLabel.tsx#EntityPlaceholderNodeLabel"]={docgenInfo:Rn.__docgenInfo,name:"EntityPlaceholderNodeLabel",path:"src/lib/containers/provenance/EntityPlaceholderNodeLabel.tsx#EntityPlaceholderNodeLabel"})}catch{}var ce=(e=>(e.ENTITY="EntityNode",e.ENTITY_PLACEHOLDER="EntityPlaceholderNode",e.EXTERNAL="ExternalNode",e.ACTIVITY="ActivityNode",e.EXPAND="ExpandNode",e.UNDEFINED="UndefinedNode",e))(ce||{});const Ut=e=>{const{type:t,data:n}=e;let o;switch(t){case"EntityNode":o=O(Dn,{...n});break;case"EntityPlaceholderNode":o=O(Rn,{...n});break;case"ExternalNode":o=O($n,{...n});break;case"ActivityNode":o=O(kn,{...n});break;case"ExpandNode":o=O(In,{...n});break;case"UndefinedNode":o=O(c0,{});break;default:o=ne("p",{children:["Unrecognized node type: ",t]});break}const r={label:o,props:n,type:t};return{id:Pe(e),position:{x:100,y:100},data:r,connectable:!1,draggable:!1,className:`${t}`}},al=(e,t)=>{const n=Pe(e),o=Pe(t);return{id:`${n}-${o}`,source:n,target:o,animated:!0,type:$e.SimpleBezier,markerEnd:{type:Qt.ArrowClosed}}},Pe=e=>{var o,r,i,a;const{type:t,data:n}=e;switch(t){case"EntityNode":return`${n.id}.${(o=n.versionNumber)!=null?o:"latest"}`;case"EntityPlaceholderNode":return`${n.targetId}.${(r=n.targetVersionNumber)!=null?r:"latest"}`;case"ExternalNode":return`${n.url}`;case"ActivityNode":return`${n.id}`;case"ExpandNode":return`expand.node.${n.entityHeader.id}.${(i=n.entityHeader.versionNumber)!=null?i:"latest"}`;case"UndefinedNode":return`undefined.dummy.node.${n.id}.${(a=n.versionNumber)!=null?a:"latest"}`}},gt=new il.graphlib.Graph;gt.setDefaultEdgeLabel(()=>({}));const va=e=>e.data.type=="ExpandNode"?30:100,pa=e=>e.data.type=="ExpandNode"?30:172,d0=(e,t,n)=>{const o=n==="LR";return gt.setGraph({rankdir:n}),e.forEach(r=>{gt.setNode(r.id,{width:pa(r),height:va(r)})}),t.forEach(r=>{gt.setEdge(r.source,r.target)}),il.layout(gt),e.forEach(r=>{const i=gt.node(r.id);return r.targetPosition=o?B.Left:B.Top,r.sourcePosition=o?B.Right:B.Bottom,r.position={x:i.x-pa(r)/2,y:i.y-va(r)/2},r}),{nodes:e,edges:t}},ga=(e,t)=>nc(e,t,oc).length==0;try{Ut.displayName="getProvenanceNode",Ut.__docgenInfo={description:"",displayName:"getProvenanceNode",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceUtils.tsx#getProvenanceNode"]={docgenInfo:Ut.__docgenInfo,name:"getProvenanceNode",path:"src/lib/containers/provenance/ProvenanceUtils.tsx#getProvenanceNode"})}catch{}try{Pe.displayName="getNodeId",Pe.__docgenInfo={description:"",displayName:"getNodeId",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"EntityNode"'},{value:'"EntityPlaceholderNode"'},{value:'"ExternalNode"'},{value:'"ActivityNode"'},{value:'"ExpandNode"'},{value:'"UndefinedNode"'}]}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ProvenanceNodeLabelProps"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceUtils.tsx#getNodeId"]={docgenInfo:Pe.__docgenInfo,name:"getNodeId",path:"src/lib/containers/provenance/ProvenanceUtils.tsx#getNodeId"})}catch{}const f0="org.sagebionetworks.repo.model.provenance.UsedEntity",ma=e=>{const{entityHeader:t,rootEntityHeaders:n}=e;return(n==null?void 0:n.find(r=>t.id==r.id&&t.versionNumber==r.versionNumber))!==void 0},sl=(e,t)=>t.find(o=>o.id===Pe(e))===void 0,h0=(e,t)=>{const n={type:ce.ENTITY,data:e};return t.find(o=>o.id===Pe(n))},v0=(e,t,n)=>n.find(r=>r.source===Pe(e)&&r.target===Pe(t))===void 0,nn=e=>{const{newNodeProps:t,existingNodeProps:n,nodesCopy:o,edgesCopy:r}=e;sl(t,o)&&o.push(Ut(t)),v0(t,n,r)&&r.push(al(t,n))},p0=e=>{const{activity:t,entityHeader:n,nodesCopy:o,edgesCopy:r}=e,i={type:ce.ACTIVITY,data:t},a={type:ce.ENTITY,data:n};nn({newNodeProps:i,existingNodeProps:a,nodesCopy:o,edgesCopy:r})},g0=e=>{const{entityHeader:t,itemCount:n=0,nodesCopy:o,edgesCopy:r}=e,i={type:ce.EXPAND,data:{itemCount:n,entityHeader:t}},a={type:ce.ENTITY,data:t};nn({newNodeProps:i,existingNodeProps:a,nodesCopy:o,edgesCopy:r})},m0=e=>{const{ref:t,activity:n,nodesCopy:o,edgesCopy:r}=e,i={type:ce.ENTITY_PLACEHOLDER,data:t},a={type:ce.ACTIVITY,data:n};nn({newNodeProps:i,existingNodeProps:a,nodesCopy:o,edgesCopy:r})},y0=e=>{const{entityHeader:t,nodesCopy:n,edgesCopy:o}=e,r={type:ce.UNDEFINED,data:t},i={type:ce.ENTITY,data:t};nn({newNodeProps:r,existingNodeProps:i,nodesCopy:n,edgesCopy:o})},b0=e=>{const{usedURL:t,activity:n,nodesCopy:o,edgesCopy:r}=e,i={type:ce.ACTIVITY,data:n},a={type:ce.EXTERNAL,data:t};nn({newNodeProps:a,existingNodeProps:i,nodesCopy:o,edgesCopy:r})},w0=e=>{const{entityHeader:t,activity:n,nodesCopy:o,edgesCopy:r}=e,i={type:ce.ENTITY,data:t};if(sl(i,o)&&(o.push(Ut(i)),n)){const a={type:ce.ACTIVITY,data:n};r.push(al(i,a))}},$o=window.React,Ro=window.React.useCallback,Cn=window.React.useEffect,S0=window.React.useState,Ao=400,Lo=.85,E0=e=>{const{entityRefs:t,containerHeight:n="200px",initialNodes:o=[],initialEdges:r=[],onNodesChangedListener:i,onEdgesChangedListener:a}=e,{accessToken:s}=ql(),[l,u]=$o.useState(o),[c,d]=$o.useState(r),[f,h,v]=op([]),[m,b,y]=rp([]),[C,E]=S0(),g=Fl(),{data:w,isSuccess:x}=rc(t,{useErrorBoundary:!0});if(x&&w.totalNumberOfResults==0){const p=t.map(N=>N.targetId).join(",");g(`Unable to load provenance for the given Synapse IDs: ${p}`)}const k=w==null?void 0:w.results,[P,T]=$o.useState(!1),A=vr(),R=Ro((p,N)=>{E(N)},[]),V=Ro(async p=>{var $;const{entityHeader:N,nodesCopy:S,edgesCopy:_,usedInActivity:M}=p;w0({entityHeader:N,activity:M,nodesCopy:S,edgesCopy:_});try{const D=await Rr(N.id,N.versionNumber,s);(!ma({entityHeader:N,rootEntityHeaders:k})||D.used&&D.used.length>=Ao)&&g0({entityHeader:N,itemCount:($=D.used)==null?void 0:$.length,nodesCopy:S,edgesCopy:_})}catch(D){console.error(D),ma({entityHeader:N,rootEntityHeaders:k})&&y0({entityHeader:N,nodesCopy:S,edgesCopy:_})}},[s,k]);Cn(()=>{!P&&f.length>0&&setTimeout(()=>{if(k){const p=h0(k[0],f);if(p){const N=A.getZoom(),S=N>Lo?Lo:N;A==null||A.setCenter(p.position.x+150,p.position.y-30,{zoom:S,duration:0})}T(!0)}})},[P,f,A,k]);const z=Ro(async p=>{const{entityHeader:N,nodesCopy:S,edgesCopy:_}=p;try{const M=await Rr(N.id,N.versionNumber,s);if(p0({activity:M,entityHeader:N,nodesCopy:S,edgesCopy:_}),M.used&&M.used.length<Ao){const $=[];M.used.forEach(I=>{I.concreteType==f0?$.push(I.reference):b0({usedURL:I,activity:M,nodesCopy:S,edgesCopy:_})});const D=await Zl($,s),{results:L}=D;$.filter(I=>L.find(Y=>Y.id==I.targetId)==null).forEach(I=>{m0({ref:I,activity:M,nodesCopy:S,edgesCopy:_})});const U=[];L.forEach(I=>{U.push(V({entityHeader:I,nodesCopy:S,edgesCopy:_,usedInActivity:M}))}),await Promise.allSettled(U)}}catch(M){console.error(M)}},[s,V]);return Cn(()=>{if(k&&l.length==0){const p=[...l],N=[...c],S=[];k.forEach(_=>{const M=V({entityHeader:_,nodesCopy:p,edgesCopy:N});S.push(M);const $=z({entityHeader:_,nodesCopy:p,edgesCopy:N});S.push($)}),Promise.allSettled(S).finally(()=>{u(p),d(N)})}},[V,g,z,k,t,c,l]),Cn(()=>{const p=C==null?void 0:C.data;if(C&&(p==null?void 0:p.type)==ce.EXPAND){const N=p.props;if(N.itemCount>Ao){ic("Web visualization does not support expanding this many items at this time.","danger");return}else{p.label=O(dc,{size:30});const S=l.filter($=>$.id!=C.id),_=fr([C],c)[0],M=c.filter($=>$!=_);z({entityHeader:N.entityHeader,nodesCopy:S,edgesCopy:M}).finally(()=>{u(S),d(M)})}E(void 0)}},[C,l,c,z]),Cn(()=>{const{nodes:p,edges:N}=d0(l,c,"TB");ga(p,f)||(h(p),i&&i(p)),ga(N,m)||(b(N),a&&a(N))},[l,c,f,m,h,b,P,A,t,i,a]),O("div",{className:"bootstrap-4-backport ProvenanceWidget",role:"graphics-doc",style:{width:"100%",height:n},children:O(Is,{defaultZoom:Lo,nodes:f,edges:m,onNodeClick:R,onNodesChange:v,onEdgesChange:y,attributionPosition:"bottom-right",onConnect:void 0,children:O(Rh,{})})})},Gt=e=>O(Kl,{children:O(Ts,{children:O(E0,{...e})})});try{Gt.displayName="ProvenanceGraph",Gt.__docgenInfo={description:"",displayName:"ProvenanceGraph",props:{entityRefs:{defaultValue:null,description:"",name:"entityRefs",required:!0,type:{name:"ReferenceList"}},containerHeight:{defaultValue:null,description:"",name:"containerHeight",required:!0,type:{name:"string"}},initialNodes:{defaultValue:null,description:"",name:"initialNodes",required:!1,type:{name:"Node<any>[]"}},initialEdges:{defaultValue:null,description:"",name:"initialEdges",required:!1,type:{name:"Edge<any>[]"}},onNodesChangedListener:{defaultValue:null,description:"",name:"onNodesChangedListener",required:!1,type:{name:"((nodes: Node<any>[]) => void)"}},onEdgesChangedListener:{defaultValue:null,description:"",name:"onEdgesChangedListener",required:!1,type:{name:"((edges: Edge<any>[]) => void)"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/lib/containers/provenance/ProvenanceGraph.tsx#ProvenanceGraph"]={docgenInfo:Gt.__docgenInfo,name:"ProvenanceGraph",path:"src/lib/containers/provenance/ProvenanceGraph.tsx#ProvenanceGraph"})}catch{}var My={parameters:{storySource:{source:`import React from 'react'
import { ComponentStory, ComponentMeta } from '@storybook/react'

import { ProvenanceGraph } from './ProvenanceGraph'

// More on default export: https://storybook.js.org/docs/react/writing-stories/introduction#default-export
export default {
  title: 'Synapse/ProvenanceGraph',
  component: ProvenanceGraph,
  // More on argTypes: https://storybook.js.org/docs/react/api/argtypes
  argTypes: {},
} as ComponentMeta<typeof ProvenanceGraph>

// More on component templates: https://storybook.js.org/docs/react/writing-stories/introduction#using-args
const Template: ComponentStory<typeof ProvenanceGraph> = args => (
  <div className="bootstrap-4-backport">
    <ProvenanceGraph {...args} />
  </div>
)

export const TestProvenanceGraph = Template.bind({})
TestProvenanceGraph.args = {
  entityRefs: [
    {
      targetId: 'syn13363290',
      targetVersionNumber: 9,
    },
  ],
  containerHeight: '500px',
}

export const NoProvenanceGraph = Template.bind({})
NoProvenanceGraph.args = {
  entityRefs: [
    {
      targetId: 'syn8075918',
      targetVersionNumber: undefined,
    },
  ],
  containerHeight: '500px',
}

export const InvalidSynIDProvenanceGraph = Template.bind({})
InvalidSynIDProvenanceGraph.args = {
  entityRefs: [
    {
      targetId: 'synINVALID',
      targetVersionNumber: 1,
    },
  ],
  containerHeight: '500px',
}
`,locationsMap:{"test-provenance-graph":{startLoc:{col:57,line:15},endLoc:{col:1,line:19},startBody:{col:57,line:15},endBody:{col:1,line:19}},"no-provenance-graph":{startLoc:{col:57,line:15},endLoc:{col:1,line:19},startBody:{col:57,line:15},endBody:{col:1,line:19}},"invalid-syn-id-provenance-graph":{startLoc:{col:57,line:15},endLoc:{col:1,line:19},startBody:{col:57,line:15},endBody:{col:1,line:19}}}}},title:"Synapse/ProvenanceGraph",component:Gt,argTypes:{}};const wr=e=>O("div",{className:"bootstrap-4-backport",children:O(Gt,{...e})}),x0=wr.bind({});x0.args={entityRefs:[{targetId:"syn13363290",targetVersionNumber:9}],containerHeight:"500px"};const C0=wr.bind({});C0.args={entityRefs:[{targetId:"syn8075918",targetVersionNumber:void 0}],containerHeight:"500px"};const N0=wr.bind({});N0.args={entityRefs:[{targetId:"synINVALID",targetVersionNumber:1}],containerHeight:"500px"};const Dy=["TestProvenanceGraph","NoProvenanceGraph","InvalidSynIDProvenanceGraph"];export{N0 as InvalidSynIDProvenanceGraph,C0 as NoProvenanceGraph,x0 as TestProvenanceGraph,Dy as __namedExportsOrder,My as default};
//# sourceMappingURL=ProvenanceGraph.stories.800dbc78.js.map
