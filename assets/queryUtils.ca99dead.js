import{r as b}from"./jsx-runtime.1d4416c9.js";import{f as i,j as A,aa as F,ab as Q,ac as L}from"./index.733ef2d4.js";import{u as M}from"./useInfiniteQuery.f21582a5.js";import{o as d,i as l,V as R}from"./SynapseConstants.b6aa8bf5.js";import{e as c}from"./queryKeys.e0d3085f.js";import{i as f}from"./TypeUtils.a2c41307.js";import{c as h}from"./cloneDeep.118b9836.js";const y={refetchOnWindowFocus:!1};function j(e,s){const{accessToken:a}=i();return A(c.tableQueryResult(e,!1),()=>F(e,a),{...y,...s})}function S(e,s,a){const{accessToken:r}=i();return A(c.tableQueryResultWithAsyncStatus(e,!1),()=>L(e,r,a),{...y,...s})}function N(e,s,a){const r=e.partMask&l,t={...e,partMask:r},n=r>0?s==null?void 0:s.enabled:!1;return S(t,{...s,enabled:n},a)}function U(e,s,a){const r=e.partMask&~l,t={...e,query:{...e.query,offset:void 0,limit:void 0,sort:void 0},partMask:r},n=r>0?s==null?void 0:s.enabled:!1;return S(t,{...s,enabled:n},a)}function k(e,s,a){const r=N(e,s,a),t=U(e,s,a);return b.exports.useMemo(()=>r.status==="error"?r:t.status==="error"?t:r.status==="loading"?r:t.status==="loading"?t:r.status==="idle"?Q({},r,t):Q({},t,r),[r,t])}function z(e,s,a){const{accessToken:r}=i();return M(c.tableQueryResult(e,!0),t=>{const n=t.pageParam?parseInt(t.pageParam):0;return L({...e,query:{...e.query,offset:n},partMask:n!==0?e.partMask&l:e.partMask},r,a)},{...y,...s,select:t=>{const n=t==null?void 0:t.pages[0];if(n.responseBody)for(let u=0;u<t.pages.length;u++){const o=t.pages[u];o.responseBody!=null&&(t.pages[u].responseBody={...n.responseBody,queryResult:o.responseBody.queryResult})}return t},getPreviousPageParam:t=>{var o;if(t.jobState!=="COMPLETE")return;const n=t.requestBody;if(n.query.offset==null||n.query.offset===0)return;const u=(o=n.query.limit)!=null?o:d;return Math.max(n.query.offset-u,0)},getNextPageParam:(t,n)=>{var E,g,_,T,p;if(t.jobState!=="COMPLETE")return;const u=t.requestBody,o=(E=u.query.limit)!=null?E:d,m=(g=n[0].responseBody)==null?void 0:g.queryCount;if(!(m!=null&&((_=u.query.offset)!=null?_:0)+o>=m))return((T=t.responseBody.queryResult)==null?void 0:T.queryResults.rows.length)===o?((p=u.query.offset)!=null?p:0)+o:void 0}})}var I=(e=>(e.LIKE="LIKE",e))(I||{}),V=(e=>(e.HAS="HAS",e.HAS_LIKE="HAS_LIKE",e))(V||{});const v="org.sagebionetworks.repo.model.table.ColumnSingleValueQueryFilter",P="org.sagebionetworks.repo.model.table.ColumnMultiValueFunctionQueryFilter",C="org.sagebionetworks.repo.model.table.TextMatchesQueryFilter",q=f(C),w=f(v),O=f(P),J=(e,s)=>{var a,r;return(r=(a=s==null?void 0:s.selectColumns)==null?void 0:a.findIndex(t=>t.name===e))!=null?r:-1},X=(e,s)=>e==null||s==null||e.length===0||s.length===0?!1:e.filter(r=>!x(r)&&s.find(t=>t.name===r.columnName)).length>0,x=e=>e.facetType==="enumeration"&&e.facetValues.length==1&&e.facetValues[0].value==R;function Z(e,s){var r;const a=s==null?void 0:s.columnName;if(a&&e){const t=h(e),n=(r=t.facets)==null?void 0:r.filter(u=>u.columnName.toLowerCase()!==a.toLowerCase());return t.facets=n,t}else return e}function $(e,s){const a=Array.isArray(e.selectedFacets)&&e.selectedFacets.filter(t=>t.columnName!==(s==null?void 0:s.columnName)).length>0,r=Array.isArray(e.additionalFilters)&&e.additionalFilters.filter(t=>w(t)||O(t)?t.columnName!==(s==null?void 0:s.columnName):!0).length>0;return a||r}export{V as C,z as a,w as b,O as c,I as d,k as e,x as f,q as g,$ as h,X as i,J as j,Z as r,j as u};
